(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[187],Array(52).concat([function(e,t,a){"use strict";a.d(t,"b",function(){return s});var r=a(2);var n=a.n(r);window.TSM={interop:{}};function i(e,t){if(n.a.has(window.TSM,e))throw new Error("exportToLegacy: there is already something at "+e+"; we cannot overwrite it");if(!e||0!==e.indexOf("interop"))throw new Error("exportToLegacy: Name "+e+' must start with "interop".');n.a.set(window.TSM,e,t)}t["a"]=i;function s(e){return function(t){return TS.redux.dispatch(e(t)).then(function(e){return{ok:true,request_id:e.request_id,args:e.args,method:t.method,data:e}}).catch(function(e){throw e})}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.d(t,"b",function(){return n});a.d(t,"a",function(){return i});a.d(t,"c",function(){return s});var r=a(28);var n=Object(r["b"])("TS.enterprise.actions.dispatch",function(){return null});var i=Object(r["b"])("TS.enterprise.actions.actions",function(){return null});var s=function e(t){n(i().router.navigateTo(t))}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.d(t,"a",function(){return r});a.d(t,"b",function(){return i});var r={AUTH_REQUIRED:"auth_required",FILENAME_TOO_LONG:"filename_too_long",UNIDENTIFIED_EXTERNAL_URL:"unidentified_external_url",FILE_TYPE_HAS_NO_HANDLER:"file_type_has_no_handler"};var n=["auth_required","filename_too_long","unidentified_external_url","file_type_has_no_handler"];var i="GDRIVE_FILE_PICKER"},,,,,,,,function(e,t,a){"use strict";var r=a(218);var n=a.n(r);var i=a(278);var s=a.n(i);var o=a(2);var l=a(0);var c=a(19);var u=a(18);var d=a(1156);var p=a(29);var m=a(31);var h=Object(p["a"])("Connect a list of team ids to an idp group",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.teamIds,n=void 0===r?[]:r,i=a.userGroupId,s=void 0===i?"":i,o=a.autoProvision,l=void 0!==o&&o,c=a.reason,u=void 0===c?"connectTeamToIdpGroup":c;var d={teams:n,usergroup:s,auto_provision:l};return e(Object(m["a"])({method:"enterprise.usergroups.teams.add",args:d,reason:u}))});h.meta={name:"connectTeamsToUserGroup",key:"fetchersEnterpriseUserGroupsApiConnectTeamsToUserGroup",description:"Connect a list of team ids to an idp group"};h.propTypes=l["default"].shape({teamIds:l["default"].arrayOf(l["default"].string).isRequired,userGroupId:l["default"].string.isRequired,autoProvision:l["default"].bool});var v=a(411);var f=a(16);var b=a(429);var g=a(232);var _=a(601);a.d(t,"c",function(){return k});a.d(t,"l",function(){return E});a.d(t,"a",function(){return C});a.d(t,"n",function(){return S});a.d(t,"o",function(){return w});a.d(t,"j",function(){return j});a.d(t,"k",function(){return I});a.d(t,"p",function(){return T});a.d(t,"b",function(){return A});a.d(t,"i",function(){return P});a.d(t,"h",function(){return M});a.d(t,"g",function(){return D});a.d(t,"f",function(){return x});a.d(t,"e",function(){return F});a.d(t,"m",function(){return L});a.d(t,"d",function(){return B});var y=Object(f["b"])();var O="100";var k=Object(c["b"])("Bulk upserts org user groups to the org-user-group store");k.meta={name:"bulkUpsertOrgUserGroups",key:"orgAdminOrgUserGroupsActionsBulkUpsertOrgUserGroups",description:"Bulk upserts org user groups to the org-user-group store"};k.propTypes={groups:l["default"].arrayOf(l["default"].object).isRequired};var E=Object(c["b"])("Sets the member ids associated with an org user group");E.meta={name:"setMemberIdsForOrgUserGroupPage",key:"orgAdminOrgUserGroupsActionsSetMemberIdsForOrgUserGroupPage",description:"Sets the member ids associated with an org user group"};E.propTypes={groupId:l["default"].string.isRequired,memberIds:l["default"].arrayOf(l["default"].string).isRequired};var C=Object(c["b"])("appends the member ids associated with an org user group");C.meta={name:"addMemberIdsForOrgUserGroupPage",key:"orgAdminOrgUserGroupsActionsAddMemberIdsForOrgUserGroupPage",description:"appends the member ids associated with an org user group"};C.propTypes={groupId:l["default"].string.isRequired,memberIds:l["default"].arrayOf(l["default"].string).isRequired};var S=Object(c["b"])("Sets the list of group ids for the org user group list page");S.meta={name:"setUserGroupIdsForGroupList",key:"orgAdminOrgUserGroupsActionsSetUserGroupIdsForGroupList",description:"Sets the list of group ids for the org user group list page"};S.propTypes={groupIds:l["default"].arrayOf(l["default"].string).isRequired};var w=Object(c["b"])("Sets the workspace ids associated with an org user group");w.meta={name:"setWorkspaceIdsForOrgUserGroup",key:"orgAdminOrgUserGroupsActionsSetWorkspaceIdsForOrgUserGroup",description:"Sets the workspace ids associated with an org user group"};w.propTypes={groupId:l["default"].string.isRequired,workspaceIds:l["default"].arrayOf(l["default"].string).isRequired};var j=Object(c["b"])("Sets the teams autoprovisioned with an org user group");j.meta={name:"setAutoProvisionedTeams",key:"orgAdminOrgUserGroupsActionsSetAutoProvisionedTeams",description:"Sets the teams autoprovisioned with an org user group"};j.propTypes={groupId:l["default"].string.isRequired,autoProvisionedTeams:l["default"].array.isRequired};var I=Object(c["b"])("Sets the channels connected with an org user group");I.meta={name:"setConnectedChannels",key:"orgAdminOrgUserGroupsActionsSetConnectedChannels",description:"Sets the channels connected with an org user group"};I.propTypes={groupId:l["default"].string.isRequired,channels:l["default"].array.isRequired};var T=Object(c["b"])("Updates the auto provision status for an org user group");T.meta={name:"updateAutoProvisionFlag",key:"orgAdminOrgUserGroupsActionsUpdateAutoProvisionFlag",description:"Updates the auto provision status for an org user group"};T.propTypes={autoProvision:l["default"].bool.isRequired,teamId:l["default"].string.isRequired,userGroupId:l["default"].string.isRequired};var A=Object(c["b"])("Adds (but does not remove) team ids connected to a user group");A.meta={name:"addUserGroupConnectedTeamIds",key:"orgAdminOrgUserGroupsActionsAddUserGroupConnectedTeamIds",description:"Adds (but does not remove) team ids connected to a user group"};A.propTypes={groupId:l["default"].string.isRequired,teamIds:l["default"].arrayOf(l["default"].string).isRequired};var N=Object(u["b"])("fetch user groups in org context",function(){var e=s()(regeneratorRuntime.mark(function e(t,a){var r,n,i,s,o,l,c=arguments;return regeneratorRuntime.wrap(function e(a){while(1)switch(a.prev=a.next){case 0:r=c.length>2&&void 0!==c[2]?c[2]:{},n=r.searchTerm,i=r.query,s=r.nextCursorMark,o=r.count,l=void 0===o?O:o;return a.abrupt("return",t(Object(d["f"])({searchTerm:n,count:l,query:i,nextCursorMark:s,includeEnterprise:0})));case 2:case"end":return a.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}());N.meta={name:"fetchOrgUserGroups",key:"orgAdminOrgUserGroupsActionsFetchOrgUserGroups",description:"fetch user groups in org context"};N.propTypes={searchTerm:l["default"].string,query:l["default"].object,count:l["default"].string,nextCursorMark:l["default"].string};var P=Object(u["b"])("fetch the org user groups and bulk upserts",function(){var e=s()(regeneratorRuntime.mark(function e(t,a){var r,i,s,l,c,u,d,p,m,h,v=arguments;return regeneratorRuntime.wrap(function e(a){while(1)switch(a.prev=a.next){case 0:r=v.length>2&&void 0!==v[2]?v[2]:{},i=r.userGroupIds,s=void 0===i?[]:i,l=r.searchTerm,c=void 0===l?"":l,u=r.nextCursorMark,d=void 0===u?"":u;p=s.length?s.map(function(e){return{type:"id",value:e}}):[];m={type:"and",clauses:Object(o["compact"])([{type:"is",value:"group"},c&&{type:"fuzzy",value:c}].concat(n()(p)))};a.next=5;return t(N({searchTerm:c,query:m,nextCursorMark:d}));case 5:h=a.sent;t(k({groups:h.items}));return a.abrupt("return",h);case 8:case"end":return a.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}());P.meta={name:"searchAndBulkUpsertOrgUserGroups",key:"orgAdminOrgUserGroupsActionsSearchAndBulkUpsertOrgUserGroups",description:"fetch the org user groups and bulk upserts"};P.propTypes={userGroupIds:l["default"].array,searchTerm:l["default"].string,nextCursorMark:l["default"].string};var M=Object(u["b"])("fetch the members in user group",function(){var e=s()(regeneratorRuntime.mark(function e(t,a){var r,n,i,s,o,l,c,u,p=arguments;return regeneratorRuntime.wrap(function e(a){while(1)switch(a.prev=a.next){case 0:r=p.length>2&&void 0!==p[2]?p[2]:{},n=r.userGroupId,i=r.searchTerm,s=void 0===i?"":i,o=r.cursorMark;a.next=3;return t(Object(d["h"])({userGroupId:n,searchTerm:s,cursorMark:o}));case 3:l=a.sent;if(l.ok){c=l.items;Object(v["f"])(c);u=c.map(function(e){return e.id});t(o?C({groupId:n,memberIds:u}):E({groupId:n,memberIds:u}))}return a.abrupt("return",l);case 6:case"end":return a.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}());M.meta={name:"getEnterpriseMembersInOrgUserGroup",key:"orgAdminOrgUserGroupsActionsGetEnterpriseMembersInOrgUserGroup",description:"fetch the members in user group"};M.propTypes={userGroupId:l["default"].string.isRequired,searchTerm:l["default"].string,cursorMark:l["default"].string};var D=Object(u["b"])("fetches the connected workspaces in org user group",function(){var e=s()(regeneratorRuntime.mark(function e(t,a){var r,n,i,s,o,l,c,u,p=arguments;return regeneratorRuntime.wrap(function e(a){while(1)switch(a.prev=a.next){case 0:r=p.length>2&&void 0!==p[2]?p[2]:{},n=r.usergroupId;i={type:"and",clauses:[{type:"is",value:"group"},{type:"id",value:n}]};a.next=4;return t(Object(d["i"])({query:i}));case 4:s=a.sent;o=s.teams;o.forEach(function(e){t(Object(b["b"])({team:e}))});a.next=9;return t(Object(d["c"])({usergroup:n}));case 9:l=a.sent;c=l.connected_teams;t(j({groupId:n,autoProvisionedTeams:c}));u=o.map(function(e){return e.id});t(w({groupId:n,workspaceIds:u}));case 14:case"end":return a.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}());D.meta={name:"getConnectedWorkspaceInOrgUserGroup",key:"orgAdminOrgUserGroupsActionsGetConnectedWorkspaceInOrgUserGroup",description:"fetches the connected workspaces in org user group"};D.propTypes={usergroupId:l["default"].string};var x=Object(u["b"])("fetches the connected channels for an org-level user group by ID",function(){var e=s()(regeneratorRuntime.mark(function e(t,a){var r,n,i,s,o,l,c,u=arguments;return regeneratorRuntime.wrap(function e(a){while(1)switch(a.prev=a.next){case 0:r=u.length>2&&void 0!==u[2]?u[2]:{},n=r.userGroupId,i=r.includeNumMembers,s=void 0!==i&&i;o={usergroup_id:n,include_num_members:s};a.next=4;return t(Object(d["d"])(o));case 4:l=a.sent;c=l.channels;t(I({groupId:n,channels:c}));case 7:case"end":return a.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}());x.meta={name:"getConnectedChannelsInOrgUserGroup",key:"orgAdminOrgUserGroupsActionsGetConnectedChannelsInOrgUserGroup",description:"fetches the connected channels for an org-level user group by ID"};x.propTypes={usergroupId:l["default"].string};var R=Object(u["b"])("Removes a workspace from the list of connected workspaces on an org user group",function(){var e=s()(regeneratorRuntime.mark(function e(t,a){var r,n,i,s,o,l,c,u,d=arguments;return regeneratorRuntime.wrap(function e(p){while(1)switch(p.prev=p.next){case 0:r=d.length>2&&void 0!==d[2]?d[2]:{},n=r.teams,i=void 0===n?[]:n,s=r.usergroup,o=void 0===s?null:s;l=a();c=Object(_["i"])(l,{groupId:o});u=c&&c.filter(function(e){return!i.includes(e)});t(w({workspaceIds:u,groupId:o}));case 5:case"end":return p.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}());R.meta={name:"removeWorkspaceFromOrgUserGroupConnectedWorkspaces",key:"orgAdminOrgUserGroupsActionsRemoveWorkspaceFromOrgUserGroupConnectedWorkspaces",description:"Removes a workspace from the list of connected workspaces on an org user group"};R.propTypes={teams:l["default"].arrayOf(l["default"].string).isRequired,usergroup:l["default"].string.isRequired};var F=Object(u["b"])("disconnects a workspace from and org user group via API and removes locally",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.teams,n=void 0===r?[]:r,i=a.usergroup,s=void 0===i?null:i;var o=false;return e(Object(d["b"])({teams:n,usergroup:s})).then(function(t){o=t.ok;e(R({teams:n,usergroup:s}));return o}).catch(function(e){y.warn("Could not disconnect workspaces from org user group:",e);return o})});F.meta={name:"disconnectWorkspacesFromOrgUserGroup",key:"orgAdminOrgUserGroupsActionsDisconnectWorkspacesFromOrgUserGroup",description:"disconnects a workspace from and org user group via API and removes locally"};F.propTypes={teams:l["default"].arrayOf(l["default"].string),usergroup:l["default"].string};var L=Object(u["b"])("Set the provisioning for an org level user group and updates store",function(){var e=s()(regeneratorRuntime.mark(function e(t,a){var r,n,i,s,o,l=arguments;return regeneratorRuntime.wrap(function e(a){while(1)switch(a.prev=a.next){case 0:r=l.length>2&&void 0!==l[2]?l[2]:{},n=r.autoProvision,i=r.teamId,s=r.userGroupId;a.next=3;return t(Object(g["G"])({autoProvision:n,teamId:i,userGroupId:s}));case 3:o=a.sent;t(T({autoProvision:n,teamId:i,userGroupId:s}));return a.abrupt("return",o);case 6:case"end":return a.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}());L.meta={name:"setProvisioningAndUpdateOrgUserGroup",key:"orgAdminOrgUserGroupsActionsSetProvisioningAndUpdateOrgUserGroup",description:"Set the provisioning for an org level user group and updates store"};L.propTypes=l["default"].shape({autoProvision:l["default"].bool.isRequired,teamId:l["default"].string.isRequired});var U=Object(u["b"])("Connect and update a list of teams to an org user group",function(){var e=s()(regeneratorRuntime.mark(function e(t,a){var r,n,i,s,o,l,c,u,d=arguments;return regeneratorRuntime.wrap(function e(a){while(1)switch(a.prev=a.next){case 0:r=d.length>2&&void 0!==d[2]?d[2]:{},n=r.teamIds,i=void 0===n?[]:n,s=r.userGroupId,o=void 0===s?"":s,l=r.autoProvision,c=void 0!==l&&l;a.next=3;return t(h({teamIds:i,userGroupId:o,autoProvision:c}));case 3:t(A({groupId:o,teamIds:i}));u=i.map(function(e){return{date_create:Date.now()/1e3,auto_provision:c,team_id:e}});t(j({groupId:o,autoProvisionedTeams:u}));case 6:case"end":return a.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}());U.meta={name:"connectAndUpdateTeamsInUserGroup",key:"orgAdminOrgUserGroupsActionsConnectAndUpdateTeamsInUserGroup",description:"Connect and update a list of teams to an org user group"};U.propTypes=l["default"].shape({teamIds:l["default"].arrayOf(l["default"].string).isRequired,userGroupId:l["default"].string.isRequired,autoProvision:l["default"].bool});var B=Object(u["b"])("Connect and update a list of teams to an org user group",function(){var e=s()(regeneratorRuntime.mark(function e(t,a){var r,n,i,s,o,l,c,u,d=arguments;return regeneratorRuntime.wrap(function e(a){while(1)switch(a.prev=a.next){case 0:r=d.length>2&&void 0!==d[2]?d[2]:{},n=r.userGroupId,i=void 0===n?"":n,s=r.connectWithAutoProvisionIds,o=void 0===s?[]:s,l=r.connectWithoutAutoProvisionIds,c=void 0===l?[]:l;u=[];o.length&&u.push(t(U({teamIds:o,userGroupId:i,autoProvision:true})));c.length&&u.push(t(U({teamIds:c,userGroupId:i,autoProvision:false})));a.next=6;return Promise.all(u);case 6:case"end":return a.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}());B.meta={name:"connectAndMaybeProvisonWorkspaces",key:"orgAdminOrgUserGroupsActionsConnectAndMaybeProvisonWorkspaces",description:"Connect and update a list of teams to an org user group"};B.propTypes=l["default"].shape({connectWithAutoProvisionIds:l["default"].arrayOf(l["default"].string).isRequired,connectWithoutAutoProvisionIds:l["default"].arrayOf(l["default"].string).isRequired,userGroupId:l["default"].string.isRequired})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.d(t,"c",function(){return r});a.d(t,"b",function(){return n});a.d(t,"d",function(){return i});a.d(t,"e",function(){return s});a.d(t,"a",function(){return o});var r=3;var n={light:{profile:cdn_url+"/80588/img/tractor/steps/step_01.png",workspace:cdn_url+"/80588/img/tractor/steps/step_02.png",invites:cdn_url+"/80588/img/tractor/steps/step_03.png",completion:cdn_url+"/80588/img/tractor/steps/step_04.png"},dark:{profile:cdn_url+"/484c25/img/tractor/steps/step_01_dark.png",workspace:cdn_url+"/484c25/img/tractor/steps/step_02_dark.png",invites:cdn_url+"/484c25/img/tractor/steps/step_03_dark.png",completion:cdn_url+"/484c25/img/tractor/steps/step_04_dark.png"}};var i={profile:0,workspace:1,invites:2,completion:3};var s={0:"TRACTOR_DIALOG_PROFILE_STEP",1:"TRACTOR_DIALOG_WORKSPACE_STEP",2:"TRACTOR_DIALOG_INVITE_STEP",3:"TRACTOR_DIALOG_COMPLETED_STEP"};var o={start_team_creator_account_setup:"BANNER_TRACTOR_WELCOME",complete_team_creator_account_setup:"BANNER_TRACTOR_REMINDER",invite_team_creator_account_setup:"BANNER_TRACTOR_INVITES"}},,,,,,,,,,,,function(e,t,a){"use strict";a.d(t,"e",function(){return l});a.d(t,"g",function(){return c});a.d(t,"d",function(){return u});a.d(t,"f",function(){return d});a.d(t,"i",function(){return p});a.d(t,"h",function(){return m});a.d(t,"a",function(){return h});a.d(t,"c",function(){return v});a.d(t,"b",function(){return f});var r=a(2);var n=a.n(r);var i=a(15);var s=a(9);var o=a(1420);var l=Object(i["b"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.groupId;return e&&e.orgUserGroups&&e.orgUserGroups[a]});l.meta={name:"getOrgUserGroupById",key:"orgAdminOrgUserGroupsSelectorsGetOrgUserGroupById"};var c=Object(i["b"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.groupId;return e&&e.orgUserGroups&&e.orgUserGroups[a]&&e.orgUserGroups[a].name});c.meta={name:"getOrgUserGroupNameById",key:"orgAdminOrgUserGroupsSelectorsGetOrgUserGroupNameById"};var u=Object(i["b"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.groupId;return e&&e.orgUserGroups&&e.orgUserGroups[a]&&e.orgUserGroups[a].memberIds});u.meta={name:"getMemberIdsByOrgUserGroupId",key:"orgAdminOrgUserGroupsSelectorsGetMemberIdsByOrgUserGroupId"};var d=Object(i["b"])(function(e){if(e&&e.orgUserGroups)return Object(r["keys"])(e.orgUserGroups);return[]});d.meta={name:"getOrgUserGroupIds",key:"orgAdminOrgUserGroupsSelectorsGetOrgUserGroupIds"};var p=Object(i["b"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.groupId;return e&&e.orgUserGroups&&e.orgUserGroups[a]&&e.orgUserGroups[a].teams});p.meta={name:"getWorkspaceIdsByOrgUserGroupId",key:"orgAdminOrgUserGroupsSelectorsGetWorkspaceIdsByOrgUserGroupId"};var m=Object(i["b"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.groupId;return e&&e.orgUserGroups&&e.orgUserGroups[a]&&e.orgUserGroups[a].teams&&e.orgUserGroups[a].teams.length});m.meta={name:"getWorkspaceCountByOrgUserGroupId",key:"orgAdminOrgUserGroupsSelectorsGetWorkspaceCountByOrgUserGroupId"};var h=Object(i["b"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.groupId,r=t.filterAutoProvision;var n=e&&e.orgUserGroups&&e.orgUserGroups[a]&&e.orgUserGroups[a].autoProvisionedTeams||[];if(r)return n.filter(function(e){return e.auto_provision});return n});h.meta={name:"getAutoProvisionedTeamsByGroupId",key:"orgAdminOrgUserGroupsSelectorsGetAutoProvisionedTeamsByGroupId"};var v=Object(i["b"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.groupId,r=t.searchTerm,n=t.sortBy,i=t.sortDirAscending,l=void 0!==i&&i,c=t.filterByWorkspace,u=void 0===c?null:c;var d=e&&e.orgUserGroups&&e.orgUserGroups[a]&&e.orgUserGroups[a].channels;if(!d)return[];r&&r.trim&&(d=d.filter(function(e){return Object(s["getDisplayName"])(e).includes(r.trim().toLowerCase())}));u&&(u===o["b"]?d=d.filter(function(e){return Object(s["isOrgWide"])(e)}):u!==o["a"]&&(d=d.filter(function(e){return Object(s["isOrgWide"])(e)||e.internal_team_ids&&e.internal_team_ids.includes(u)})));n&&d.sort(function(e,t){if(e[n]>t[n])return l?1:-1;if(e[n]<t[n])return l?-1:1;return 0});return d});v.meta={name:"getConnectedChannelsByOrgUserGroupId",key:"orgAdminOrgUserGroupsSelectorsGetConnectedChannelsByOrgUserGroupId"};var f=Object(i["b"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.groupId;return e&&e.orgUserGroups&&e.orgUserGroups[a]&&e.orgUserGroups[a].channels&&e.orgUserGroups[a].channels.length||0});f.meta={name:"getChannelCountByOrgUserGroupId",key:"orgAdminOrgUserGroupsSelectorsGetChannelCountByOrgUserGroupId"}},,,,,function(e,t,a){"use strict";var r=a(88);var n=a.n(r);var i=a(2);var s=a(1166);var o=a(246);var l=a.n(o);var c=a(110);var u=a.n(c);var d=a(135);var p=a.n(d);var m=a(35);var h=a(42);var v=function(){function e(){u()(this,e)}p()(e,[{key:"reportLocale",value:function e(){if(!h["isDesktop"])return;var t=Object(h["legacyGetLocaleInformation"])();t&&Object(m["a"])().track("SYSTEM_LOCALE",t)}},{key:"reportCrash",value:function e(){if(!h["isDesktop"])return;var t=Object(h["legacyGetCrashInformation"])();t&&Object(m["a"])().track("DESKTOP_CRASH",t)}},{key:"reportHang",value:function e(){if(!h["isDesktop"])return;var t=Object(h["legacyGetHangInformation"])();t&&Object(m["a"])().track("DESKTOP_HANG",t)}},{key:"reportDisplays",value:function e(){if(!h["isDesktop"])return;var t=Object(h["getDisplayInformation"])();if(!t||!t.displays||!t.windowFrame)return;var a=t.displays,r=t.windowFrame;var n=r.size,i=r.position;var s=l()(n,2),o=s[0],c=s[1];var u=l()(i,2),d=u[0],p=u[1];var v=[o||0,c||0,d||0,p||0];var f=[];a.forEach(function(e){if(e&&e.size&&e.size.width&&e.size.height){f.push(e.size.width);f.push(e.size.height)}f.push(e.scaleFactor||1)});Object(m["a"])().track("DISPLAY_INFO",{display_resolutions:f,window_frame:v})}}]);return e}();var f=a(32);var b=function(){function e(){u()(this,e)}p()(e,[{key:"updateElements",value:function e(t){var a=this;var r=[];Array.isArray(t)&&t.filter(function(e){return e&&e.getBoundingClientRect}).forEach(function(e){return r.push(a.updateElement(e))});return r}},{key:"updateElement",value:function e(t,a){var r=a||t.id||t.type+"."+t.classList.toString().replace(/ /g,".");var n=t.getBoundingClientRect();var i={id:r,width:Math.round(n.width+2),height:Math.round(n.height+2),top:Math.round(n.top),left:Math.round(n.left)};var s=Object(f["isSSBAndAtLeastVersion"])("3.0.0");if(i.width<2&&i.height<2&&s){var o=Object(h["legacyGetNoDragRegions"])();var l=o.filter(function(e){return e.id!==i.id});o.length>l.length&&Object(h["legacyUpdateNoDragRegion"])(l)}else Object(h["legacyUpdateNoDragRegion"])(i);return i}}]);return e}();var g=a(2695);var _=a(512);var y=a(235);var O=a(2402);var k=a(28);var E=Object(k["b"])("TS.inline_videos.maybeStopInlineVideoPlayback");var C=a(2701);var S=a(573);var w=a(1269);var j=a(104);var I=a(2394);var T=a(784);var A=a(2746);var N=a(786);var P=a(751);var M=a(11);var D=a(303);var x=a(38);var R=a(345);var F=a(87);var L=a(21);var U=a(25);var B=a(73);var q=a(33);var G=a(27);var H=a(896);var W=a(321);var V=a(16);var K=a(1967);var z=a(848);var Q=a(324);var Y=a(69);function J(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function X(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?J(Object(a),true).forEach(function(t){n()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):J(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Z={},$=Z.setFocusedWorkspace,ee=Z.focusNextWorkspace,te=Z.focusPreviousWorkspace;var ae=["https://www.dropbox.com/chooser?","https://www.dropbox.com/saver?","https://account.box.com/index.php?","https://account.box.com/webviews/login/box_select?","https://app.box.com/index.php?","https://app.boxcn.net","https://ent.box.com","https://onedrive.live.com",/^https:\/\/[\w.-]+my\.sharepoint\.com\//,"https://login.microsoftonline.com/"];var re=["files/import/box","files/import/dropbox","files/import/gdrive","files/create/gdrive/auth","files/import/onedrive","files/import/onedrive/redirect",/files\/(T[A-Z0-9]{8,}|W[A-Z0-9]{8,}|U[A-Z0-9]{8,})\/F[A-Z0-9]{8,}(\/[a-zA-Z0-9_]+)?/];var ne=Object(V["b"])();function ie(){return Object(P["setScreenReaderEnabled"])(Object(h["isScreenReaderEnabled"])())}function se(e,t){if(!t)return false;if(t.startsWith("chrome://"))return true;if(Object(Y["isGantryUrl"])(t))return true;if(ae.some(function(e){return e instanceof RegExp?e.test(t):t.startsWith(e)}))return true;var a=Object(G["getTeamUrl"])(Object(q["d"])(e));var r=Object(Y["parseUrl"])(t);var n=r.hostname;return re.some(function(e){if(e instanceof RegExp&&Object(Y["isValidSlackHostName"])(n)&&e.test(t))return t.startsWith(r.protocol+"//"+r.hostname);return e instanceof RegExp?t.startsWith(""+a)&&e.test(t):t.startsWith(""+a+e)})}function oe(e,t,a,r){ne.info("DESKTOP","notificationActivated",{channelId:t,messageTs:a,threadTs:r});e(Object(s["a"])({channelId:t,messageTs:a,threadTs:r}))}function le(e){var t=Object(F["a"])(e);var a=[];if(t){a=Object(i["take"])(Object(i["values"])(Object(B["b"])(e,t)),50);Object(f["isMac"])()||Object(f["isSSBAndAtLeastVersion"])("3.3.0")||(a=a.map(function(e){return e.subtype?e:Object(i["omit"])(e,"subtype")}))}return{user_id:Object(M["getCurrentUserId"])(e),msgs:a}}function ce(){var e;var t;var a;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];if(4===n.length){e=n[0];t=n[1];a=n[3]}else{e=n[0];t=n[1];a=n[2]}return Object(A["a"])({channelId:e,text:t,replyToTs:a})}function ue(e){return Object(U["b"])(e).name}function de(e){try{var t=JSON.parse(Object(x["k"])(e,"sidebar_theme_custom_values"));return Object(z["b"])(e)?X({},t,{},Object(z["a"])(t)):t}catch(e){return W["a"]}}function pe(){var e=document.activeElement;var t=Object(S["a"])(e);return Object(S["c"])(e,t.start,t.length)}function me(){return false}function he(e,t,a){switch(a){case"prefs":e(Object(T["a"])());break;case"shortcuts":e(Object(j["i"])());break;default:ne.warn("openDialog failed, unrecognized dialog: "+a);break}}function ve(){Object(K["a"])({bustCache:true})}function fe(e,t){Object(C["b"])();Object(y["b"])();E();e(Object(D["setActiveTeam"])(t))}var be=t["a"]=X({analytics:new v,nodrag:new b},O,{accessibilitySupportChanged:ie,canOpenURLInWindow:se,closeCall:w["a"],focusNextWorkspace:ee,focusPreviousWorkspace:te,getCurrentUserId:M["getCurrentUserId"],getCurrentUserName:ue,getEnterpriseId:L["a"],getSelectedInputText:pe,getThemeValues:de,getTokenFromBootData:M["getTokenFromBootData"],getUserPref:x["k"],getWebappVersionUid:M["getWebappVersionUid"],handleDeepLinkWithArgs:_["g"],handleDeepLinkFromDesktop:I["b"],isOnBetaReleaseChannel:me,maybeTickleMS:g["a"],notificationActivated:oe,notificationClicked:s["a"],openDialog:he,openFromCmdF:N["b"],recentMessagesFromCurrentChannel:le,reload:Q["b"],replyToNotification:ce,setCurrentMemberPresence:R["setCurrentMemberPresence"],setFocusedWorkspace:$,ssbChromeClicked:i["noop"],systemTextSettingsChanged:ve,teamSelectionChanged:fe,track:H["d"],updateDownloadsView:i["noop"],updateState:D["updateFromDesktop"]})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.d(t,"b",function(){return T});var r=a(196);var n=a.n(r);var i=a(110);var s=a.n(i);var o=a(135);var l=a.n(o);var c=a(169);var u=a.n(c);var d=a(138);var p=a.n(d);var m=a(147);var h=a.n(m);var v=a(185);var f=a.n(v);var b=a(1);var g=a.n(b);var _=a(0);var y=a(13);var O=a.n(y);var k=a(2);var E=a.n(k);var C=a(1313);var S=a(1056);var w=Object(b["createContext"])({hover:false,setHover:k["noop"]});var j={className:null,children:void 0,hovered:false,setBackground:k["noop"],"data-qa":void 0,hasKeyboardFocus:false,hasKeyboardFocusWithin:false,onFocus:k["noop"],onBlur:k["noop"]};var I=function(e){f()(t,e);function t(e){var a;s()(this,t);a=u()(this,p()(t).call(this,e));a.onMouseOver=a.onMouseOver.bind(h()(a));a.onMouseOut=a.onMouseOut.bind(h()(a));a.onMutation=a.onMutation.bind(h()(a));a.setHover=a.setHover.bind(h()(a));a.hoveredElement=null;a.mutationObserver=null;a.state={hoverCount:0,hover:false};return a}l()(t,[{key:"componentDidMount",value:function e(){this.setBackground()}},{key:"componentDidUpdate",value:function e(){this.setBackground()}},{key:"componentWillUnmount",value:function e(){if(this.mutationObserver){this.mutationObserver.disconnect();this.mutationObserver=null}}},{key:"onMouseOut",value:function e(t){var a=t.target,r=t.currentTarget,n=t.relatedTarget;if(!r.contains(a))return;if(!this.hoveredElement)return;if(!r.contains(n)){this.setHover(false);this.hoveredElement=null;if(this.mutationObserver){this.mutationObserver.disconnect();this.mutationObserver=null}}}},{key:"onMouseOver",value:function e(t){var a=t.target,r=t.currentTarget,n=t.relatedTarget;if(!r.contains(a))return;if(!r.contains(n)){this.setHover(true);if(!this.mutationObserver){this.mutationObserver=new MutationObserver(this.onMutation);this.mutationObserver.observe(r,{childList:true,subtree:true})}}this.hoveredElement=a}},{key:"onMutation",value:function e(t){var a=this;var r=t.some(function(e){return Array.from(e.removedNodes).some(function(e){return e.contains(a.hoveredElement)})});if(r){this.hoveredElement=null;this.setHover(false)}}},{key:"setBackground",value:function e(){this.props.setBackground({hover:this.isHovered()})}},{key:"setHover",value:function e(t){this.setState(function(e){var a=Math.max(0,e.hoverCount+(t?1:-1));var r=a>0;return{hoverCount:a,hover:r}})}},{key:"isHovered",value:function e(){var e=this.props.hovered||this.state.hover;var t=this.props.hasKeyboardFocus||this.props.hasKeyboardFocusWithin;return e||t}},{key:"render",value:function e(){var t=this.isHovered();var a=O()("c-message_kit__hover",{"c-message_kit__hover--hovered":t},this.props.className);var r=this.props["data-qa"];return g.a.createElement(w.Provider,{value:{hover:t,setHover:this.setHover}},g.a.createElement("div",{role:"document",className:a,onMouseOver:this.onMouseOver,onMouseOut:this.onMouseOut,onFocus:this.props.onFocus,onBlur:this.props.onBlur,"data-qa":r,"data-qa-hover":"true"},this.props.children))}}]);return t}(b["PureComponent"]);I.displayName="MessageHover";I.defaultProps=j;t["a"]=Object(S["b"])(Object(C["a"])(I));function T(e){return function t(a){return g.a.createElement(w.Consumer,null,function(t){var r=t.hover,i=t.setHover;return g.a.createElement(e,n()({},a,{hover:r,setHover:i}))})}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.d(t,"c",function(){return b});a.d(t,"b",function(){return g});a.d(t,"a",function(){return _});a.d(t,"f",function(){return y});a.d(t,"g",function(){return O});a.d(t,"i",function(){return k});a.d(t,"j",function(){return E});a.d(t,"h",function(){return C});a.d(t,"d",function(){return j});a.d(t,"e",function(){return T});var r=a(88);var n=a.n(r);var i=a(35);var s=a(34);var o=a(42);var l=a(61);var c=a(26);var u=a(595);var d=a(68);var p=a(195);var m=a(14);var h=a(6);function v(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function f(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?v(Object(a),true).forEach(function(t){n()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):v(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var b=0;var g=1;var _=2;function y(e,t,a,r,n,o,d,p){if(!T(n,o,m["EventId"].PRQ_CHANNEL_SWITCH_USABLE))return;var v;var y;switch(r){case b:default:v=m["TimingStatus"].COMPLETED;y=false;break;case g:v=m["TimingStatus"].ABANDONED;y=true;break;case _:v=m["TimingStatus"].COMPLETED;y=true;break}var O=Object(u["b"])(1e3*e*1e3,0);var k=f({elapsed_time:O,target_channel_id:a,required_sync:y,end_state:v},S(d,t,p));var E={userId:p,teamId:n,enterpriseId:o,locale:Object(h["s"])()};Object(i["a"])(E).track(m["EventId"].PRQ_CHANNEL_SWITCH_USABLE,k);var C=Object(c["f"])(n);var w=C&&C.getState();var j=Object(s["a"])()?"channel_switch_usable_sonic":"channel_switch_usable_legacy";Object(l["c"])({state:w}).store(j,Math.round(e))}function O(e,t,a,r,n,o,d,p){if(!T(n,o,m["EventId"].PRQ_CHANNEL_SWITCH_VISIBLE))return;var v;var y;switch(r){case b:default:v=m["TimingStatus"].COMPLETED;y=false;break;case g:v=m["TimingStatus"].ABANDONED;y=true;break;case _:v=m["TimingStatus"].COMPLETED;y=false;break}var O=Object(u["b"])(1e3*e*1e3,0);var k=f({elapsed_time:O,target_channel_id:a,required_sync:y,end_state:v},S(d,t,p));var E={userId:p,teamId:n,enterpriseId:o,locale:Object(h["s"])()};Object(i["a"])(E).track(m["EventId"].PRQ_CHANNEL_SWITCH_VISIBLE,k);var C=Object(c["f"])(n);var w=C&&C.getState();var j=Object(s["a"])()?"channel_switch_visible_sonic":"channel_switch_visible_legacy";Object(l["c"])({state:w}).store(j,Math.round(e))}function k(e,t,a,r,n,s,o,l){if(!T(r,n,m["EventId"].PRQ_TIME_TO_USABLE))return;var c=Object(u["b"])(1e3*e*1e3,0);var d=w();var p=f({elapsed_time:c+d,desktop_elapsed_time:d,required_sync:a,end_state:l,start_type:m["MetricStartType"].COLD,target_type:m["MetricTargetType"].CHANNEL},S(s,t,o));var v={userId:o,teamId:r,enterpriseId:n,locale:Object(h["s"])()};Object(i["a"])(v).track(m["EventId"].PRQ_TIME_TO_USABLE,p)}function E(e,t,a,r,n,s,o){if(!T(r,n,m["EventId"].PRQ_TIME_TO_VISIBLE))return;var l=Object(u["b"])(1e3*e*1e3,0);var c=w();var d=f({elapsed_time:l+c,desktop_elapsed_time:c,required_sync:a,end_state:m["TimingStatus"].COMPLETED,start_type:m["MetricStartType"].COLD,target_type:m["MetricTargetType"].CHANNEL},S(s,t,o));var p={userId:o,teamId:r,enterpriseId:n,locale:Object(h["s"])()};Object(i["a"])(p).track(m["EventId"].PRQ_TIME_TO_VISIBLE,d)}function C(e,t,a,r,n,s,o){if(!T(r,n,m["EventId"].PRQ_SESSION_FRAME_STATS))return;var l=f({duration_ms:e,sample_filter:"entire_session",hist_frame_render_time:t,hist_janky_windows:a},S(s,void 0,o));var c={userId:o,teamId:r,enterpriseId:n,locale:Object(h["s"])()};Object(i["a"])(c).track(m["EventId"].PRQ_SESSION_FRAME_STATS,l)}function S(e,t,a){var r="string"===typeof a&&a.startsWith("W");var n={device:{id:"",make:navigator.platform,model:navigator.platform,os:o["isDesktop"]?"electron":"webapp",os_version:o["sessionId"]||""}};var i;if(t){n.ui_context={action:"QUICK_SWITCH"===t?"keydown":"click",ui_component:t};switch(t.toUpperCase()){case"APP_ICON":i=m["MetricTrigger"].APP_ICON;break;case"MSG_PANE":i=m["MetricTrigger"].MSG_PANE;break;case"SIDE_BAR":i=m["MetricTrigger"].SIDE_BAR;break;case"QUICK_SWITCH":i=m["MetricTrigger"].QUICK_SWITCH;break;default:i=m["MetricTrigger"].UNKNOWN;break}}var l=f({contexts:n,session_id:e,time:Date.now(),app_id:Object(s["a"])()?"web_sonic":"web",is_tablet:false,user_id:r?void 0:a,external_id:r?a:void 0},I());t&&(l.trigger=i);return l}function w(){if(o["isDesktop"]){var e=Object(o["timeToPageLoad"])();if(void 0!==e)return 1e6*e;var t=Object(o["deprecatedGetPerformanceRecord"])();if(t&&void 0!==t.numTeamsAtLaunch&&void 0!==t.isInitialTeamBooted&&t.numTeamsAtLaunch>0&&t.isInitialTeamBooted){var a=t["BOOT"];var r=t["PRELOAD_READY"];var n=Object(o["deprecatedCalcHrTime"])(a,r);return n>0?1e6*n:0}}return 0}function j(){if(o["isDesktop"]){var e=Object(o["timeSpentInPreload"])();if(void 0!==e)return e;var t=Object(o["deprecatedGetPerformanceRecord"])();if(t&&void 0!==t.numTeamsAtLaunch&&void 0!==t.isInitialTeamBooted&&t.numTeamsAtLaunch>0){var a=t.PRELOAD_STARTED;var r=t.PRELOAD_READY;var n=Object(o["deprecatedCalcHrTime"])(a,r);return Math.floor(n)}}return 0}function I(){if(o["isDesktop"]){var e=Object(o["getAppVersion"])();if(e){var t=e.prerelease?" ("+e.prerelease+")":"";var a="string"===typeof e.prerelease?e.prerelease.match(/(alpha|beta|electron3|sonic)/i)&&e.prerelease.match(/(alpha|beta|electron3|sonic)/i)[1]:"production";var r;switch(a){case"alpha":case"electron3":r=m["ClientBuildType"].ALPHA;break;case"beta":r=m["ClientBuildType"].BETA;break;default:r=m["ClientBuildType"].PRODUCTION;break}return{app_version:e.major+"."+e.minor+"."+e.patch+t,release_version:e.major+"."+e.minor+"."+e.patch,build_type:r}}}return{app_version:"",release_version:"",build_type:m["ClientBuildType"].PRODUCTION}}function T(e,t,a){if(["E12KS1G65"].includes(t)||["T024BE7LD","T5J4Q04QG"].includes(e))return true;if(["E27SFGS2W","E655JKQRX","E7RBBBXHB","E23RHNDU5","E5BRU6WAE","E4XV0NYS0","E7AN7J5RP","E3T9KQULR","E23RE8G4F","E46RWAPHC","E6GDLMBCM","E3U2DUYG4","E783C7HT4","E8YCM8N9L","E30MTJF0C","E4BGDDU1H","E56KHGV6G","E7U335QS3","E8RLKB40H","E61V1AN6R","E7SV3P9PU","E3ZLD3D42"].includes(t)&&Object(p["a"])(10))return true;if(["E27SFGS2W"].includes(t)&&[m["EventId"].PRQ_TIME_TO_USABLE,m["EventId"].PRQ_TIME_TO_VISIBLE].includes(a))return true;if([m["EventId"].PRQ_TIME_TO_USABLE,m["EventId"].PRQ_TIME_TO_VISIBLE].includes(a))return true;if(a===m["EventId"].PRQ_SESSION_FRAME_STATS)return Object(p["a"])(10);return Object(p["a"])(10)}Object(d["exportToGlobalDebugger"])("prq",{getDesktopElapsedTime:w,getDesktopPreloadTime:j,getElectronInfo:I})},,,,,,,,,,,,,,,function(e,t,a){"use strict";var r=a(196);var n=a.n(r);var i=a(110);var s=a.n(i);var o=a(135);var l=a.n(o);var c=a(169);var u=a.n(c);var d=a(138);var p=a.n(d);var m=a(185);var h=a.n(m);var v=a(1);var f=a.n(v);var b=a(0);var g=a(12);var _=a(2);var y=a.n(_);var O=a(13);var k=a.n(O);var E=a(38);var C=a(850);var S=a(849);var w=a(1242);var j=a(1465);var I=a(2705);var T=a(11);var A=a(2962);var N=a(392);var P=a(144);var M=a(6);var D=a(2376);var x=new M["b"]("attachments");var R=20;var F=10;var L={className:void 0,expandInlineImgsPref:false,expandNonMediaAttachmentsPref:false,featureWysiwygAnchorText:false,viewContext:void 0,blocksContainerContext:P["a"].message_attachment};var U=function(e){h()(t,e);function t(){s()(this,t);return u()(this,p()(t).apply(this,arguments))}l()(t,[{key:"renderAttachmentsOverLimitMaybe",value:function e(t,a){if(!t.length)return null;var r=this.props,i=r.viewContext,s=r.featureAllyBugbash;var o={useAttachmentRules:false,shouldBeExpandedByDefault:false,expandableKey:Object(C["a"])("attachmentsOverLimit",this.props.msg.ts,{limit:a,viewContext:i})};var l=t.length-a;var c=s?{"aria-label":x.t("{remainingAttachments, plural, =1 {Toggle attachment} other {Toggle additional {remainingAttachments} attachments}}",{remainingAttachments:l,note:"the label for the button that expands/collapses additional attachments, describes the button for customers using screen readers"})}:{};return f.a.createElement("div",null,f.a.createElement(w["a"],n()({},c,o),t),f.a.createElement(j["a"],n()({},o,{render:function e(a,r){return f.a.createElement(I["a"],{isExpanded:a.isExpanded,onClick:r,attachmentsOverLimitCount:t.length})}})))}},{key:"render",value:function e(){var t=this.props,a=t.msg,r=t.expandInlineImgsPref,n=t.expandNonMediaAttachmentsPref,i=t.blocksContainerContext,s=t.featureWysiwygAnchorText;var o=Object(S["c"])(a,r,n,false,s);if(!a||!o||!o.length)return null;var l=R;var c=Object(_["map"])(o,function(e,t){var r=e.id||t+1;e.blocks&&(l=F);return f.a.createElement(D["a"],{msg:a,attachment:e,key:r,blocksContainerContext:i})});var u=c.splice(l);var d=k()("c-message_kit__attachments",this.props.className);return f.a.createElement("div",{className:d},c,this.renderAttachmentsOverLimitMaybe(u,l))}}]);return t}(v["PureComponent"]);U.displayName="MessageKitAttachments";U.defaultProps=L;var B=function e(t){return{expandInlineImgsPref:Object(E["k"])(t,"expand_inline_imgs"),expandNonMediaAttachmentsPref:Object(E["k"])(t,"expand_non_media_attachments"),featureAllyBugbash:Object(T["isFeatureEnabled"])(t,"feature_ally_bugbash"),featureWysiwygAnchorText:Object(A["a"])(t)}};t["a"]=Object(N["b"])(Object(g["connect"])(B)(U))},function(e,t,a){"use strict";var r=a(110);var n=a.n(r);var i=a(135);var s=a.n(i);var o=a(169);var l=a.n(o);var c=a(138);var u=a.n(c);var d=a(185);var p=a.n(d);var m=a(1);var h=a.n(m);var v=a(0);var f=a(12);var b=a(13);var g=a.n(b);var _=a(2757);var y=a(384);var O=a(3552);var k=a.n(O);var E={className:void 0,reactionKey:null,latestMessageTsWithReactions:void 0};var C=function(e){p()(t,e);function t(){n()(this,t);return l()(this,u()(t).apply(this,arguments))}s()(t,[{key:"render",value:function e(){var t=this.props,a=t.msg,r=t.className,n=t.reactionKey,i=t.latestMessageTsWithReactions;var s=g()("c-message_kit__reaction_bar",r);var o=i&&i===a.ts;return h.a.createElement(_["a"],{className:s,reactionKey:n,isLatestReactionInChannel:o})}}]);return t}(m["PureComponent"]);C.displayName="MessageReactionBar";C.defaultProps=E;var S=function e(t,a){var r=a.msg;if(!r)return null;var n=Object(y["b"])(r);return{reactionKey:n}};t["a"]=Object(f["connect"])(S)(C)},,,,,,,,,,,,,,,function(e,t,a){"use strict";var r=a(1);var n=a.n(r);var i=a(0);var s=a(3679);var o=a.n(s);var l=function e(t){return n.a.createElement("div",{className:"c-search_filter_section"},n.a.createElement("h3",{className:"c-search_filter_section__title"},t.title),t.children)};l.displayName="SearchFilterSection";l.defaultProps={children:null};t["a"]=l},,function(e,t,a){"use strict";var r=a(110);var n=a.n(r);var i=a(135);var s=a.n(i);var o=a(169);var l=a.n(o);var c=a(138);var u=a.n(c);var d=a(147);var p=a.n(d);var m=a(185);var h=a.n(m);var v=a(1);var f=a.n(v);var b=a(2);var g=a(40);var _=a.n(g);var y=a(0);var O=a(30);var k=a(6);var E=a(14);var C=a(24);var S=a(1627);var w=a(89);var j=a(43);var I=a(23);var T=a(356);var A=a(866);var N=a(564);var P=a(1586);var M=a(54);var D=a(50);var x=a(386);var R=a(88);var F=a.n(R);var L=a(910);var U=a(44);var B=a(299);var q=a(124);var G=a(295);var H=a(128);var W=a(208);var V=a(2308);function K(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function z(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?K(Object(a),true).forEach(function(t){F()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):K(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Q=new k["b"]("enterprise_dashboard");var Y={featureAuditLogsView:false,auditLogResults:[],isLoading:true,newQuery:true};var J=function(e){h()(t,e);function t(e){var a;n()(this,t);a=l()(this,u()(t).call(this,e));a.state={rawLogModalOpen:false,rawLog:{}};Object(O["a"])(p()(a),["showRawLog","closeRawLog"]);return a}s()(t,[{key:"closeRawLog",value:function e(){this.setState(function(){return{rawLogModalOpen:false,rawLog:{}}})}},{key:"showRawLog",value:function e(t){this.setState(function(){return{rawLogModalOpen:true,rawLog:t}})}},{key:"renderAction",value:function e(t){var a=t.action,r=void 0===a?"":a;var n=r.split("_").map(function(e,t){return f.a.createElement(v["Fragment"],{key:e},!!t&&f.a.createElement(f.a.Fragment,null,"_",f.a.createElement("wbr",null)),e)});return f.a.createElement("span",{"data-qa":"audit_log_result_row_event"},n)}},{key:"renderAffects",value:function e(t){var a=t.entity,r=void 0===a?{}:a,n=t.context,i=void 0===n?{}:n,s=t.actor,o=void 0===s?{}:s;if(Object(b["isEmpty"])(r)||Object(b["isEqual"])(r,o))return f.a.createElement("div",{"data-qa":"audit_log_result_row_affected"},"-");var l=r.type;var c=r[l];var u=c.name||"";Object(q["a"])(c.id)&&(u=f.a.createElement(B["a"],{channel:z({},c,{is_private:"private"===c.privacy})}));var d=c.email;if(!d){var p=i.location||{};var m=c.id!==p.id&&p.name;d=m&&p.domain?m+" ("+p.domain+".slack.com)":p.domain&&p.domain+".slack.com"}return f.a.createElement("div",{"data-qa":"audit_log_result_row_affected"},f.a.createElement("div",{className:"p-audit_logs__row_item_value_header p-aduit_logs__row_item_value--truncate","data-qa":"audit_log_result_row_affected_title"},u),d&&f.a.createElement("div",{className:"p-aduit_logs__row_item_value--truncate","data-qa":"audit_log_result_row_affected_subtitle",title:d},d))}},{key:"renderDetails",value:function e(t){var a=this;var r=t.details,n=void 0===r?{}:r;if(!this.props.featureAuditLogsView)return null;var i=function e(){if(!Object(b["isUndefined"])(n.new_value)||!Object(b["isUndefined"])(n.previous_value))return f.a.createElement(f.a.Fragment,null,!Object(b["isUndefined"])(n.previous_value)&&f.a.createElement("div",null,Q.t("Was: {prev}",{prev:n.previous_value})),!Object(b["isUndefined"])(n.new_value)&&f.a.createElement("div",null,Q.t("Now: {new}",{new:n.new_value})));var t=n.inviter;if(t)return f.a.createElement(f.a.Fragment,null,t.name&&f.a.createElement("div",null,Q.t("Invited by {name}",{name:t.name})),t.email&&f.a.createElement("div",null,t.email));return null};return f.a.createElement("div",{"data-qa":"audit_log_result_row_detail"},i(),f.a.createElement(j["a"],{"data-qa":"audit_log_raw_log_link",onClick:function e(){return a.showRawLog(t)}},Q.t("View full details")))}},{key:"renderTime",value:function e(t){var a=Object(H["a"])(t,{returnMoment:true});return f.a.createElement("div",{"data-qa":"audit_log_result_row_date"},f.a.createElement("div",null,Object(W["a"])(a,{shortenMonth:true,shortenDay:true})),f.a.createElement("div",null,Object(G["a"])(t,"{time}")))}},{key:"renderUser",value:function e(t,a){if(!this.props.featureAuditLogsView)return null;return f.a.createElement(f.a.Fragment,null,f.a.createElement("div",{className:"p-audit_logs__row_item_value_header p-aduit_logs__row_item_value--truncate","data-qa":"audit_log_result_row_actor_title"},t),f.a.createElement("div",{className:"p-aduit_logs__row_item_value--truncate","data-qa":"audit_log_result_row_actor_subtitle",title:a},a))}},{key:"render",value:function e(){var t=this;if(!this.props.featureAuditLogsView)return null;var a=this.props,r=a.auditLogResults,n=a.isLoading,i=a.onRequestNextPage,s=a.newQuery;var o=[{value:Q.t("Acting User"),id:"acting_user_header",className:"p-audit_logs__col_member",noHover:true,"data-qa":"audit_log_result_col_actor_title"},{value:Q.t("Event"),id:"event_header",className:"p-audit_logs__col_event",noHover:true,"data-qa":"audit_log_result_col_event_title"},{value:Q.t("Affects"),id:"affects_header",className:"p-audit_logs__col_affects",noHover:true,"data-qa":"audit_log_result_col_affected_title"},{value:Q.t("Details"),id:"details_header",className:"p-audit_logs__col_details",noHover:true,"data-qa":"audit_log_result_col_detail_title"},{value:Q.t("Date"),id:"date_header",className:"p-audit_logs__col_date",noHover:true,"data-qa":"audit_log_result_col_date_title"}];var l=Object(b["map"])(r,function(e){return{id:e.id,items:[{id:"acting_user",value:t.renderUser(Object(b["get"])(e,"actor.user.name",""),Object(b["get"])(e,"actor.user.email","")),className:"p-audit_logs__col_member  p-audit_logs__row_item--nowrap"},{id:"event",value:t.renderAction(e),className:"p-audit_logs__col_event"},{id:"affects",value:t.renderAffects(e),className:"p-audit_logs__col_affects p-audit_logs__row_item--nowrap"},{id:"details",value:t.renderDetails(e),className:"p-audit_logs__col_details"},{id:"date",value:t.renderTime(Object(b["get"])(e,"date_create",_()())),className:"p-audit_logs__col_date"}]}});return f.a.createElement(f.a.Fragment,null,f.a.createElement(L["a"],{autoHeight:true,rows:l,headers:o,onRequestNextPage:i,isLoading:n,newQuery:s}),f.a.createElement(U["a"],{closeModal:this.closeRawLog,isOpen:this.state.rawLogModalOpen},f.a.createElement(U["h"],null,f.a.createElement(U["j"],{title:Q.t("Event details")})),f.a.createElement(U["d"],null,f.a.createElement(U["e"],{"data-qa":"audit_log_raw_log_modal_content"},f.a.createElement("pre",null,JSON.stringify(this.state.rawLog,void 0,4))))))}}]);return t}(v["Component"]);J.displayName="AuditLogsTable";J.defaultProps=Y;var X=J;var Z=new k["b"]("enterprise_dashboard");var $=50;var ee={USER:"user",CHANNEL:"channel",WORKSPACE:"workspace"};var te=function e(t){switch(t){case ee.USER:return Z.t("Users",{fallbackHash:"57f2b181d0a5e79a147ea1cdf41457f58dbbb3c9",fallbackHashNs:"migration_status_page"});case ee.CHANNEL:return Z.t("Channels");case ee.WORKSPACE:return Z.t("Workspaces");default:return""}};var ae={featureAuditLogsView:false,currentUser:null,currentUserIsAdmin:false,currentUserIsOwner:false,clogger:null,pageImpressionEventId:null};function re(){return Object(b["once"])(function(e,t,a,r){if(!(e&&r))return;e.track(r,{is_admin:t,is_owner:a,contexts:{ui_context:{action:E["UiAction"].IMPRESSION}}})})}var ne=function(e){h()(t,e);function t(e){var a;n()(this,t);a=l()(this,u()(t).call(this,e));var r=_()().subtract(7,"d").startOf("day").unix();var i=_()().endOf("day").unix();a.state={selectedUserId:null,selectedAffectedId:null,selectedActionId:null,selectedStartDateTime:r,selectedEndDateTime:i,loading:true,auditLogResults:[],loadingFilterOptions:true,actions:[],newQuery:true,tempStartDateTime:r,tempEndDateTime:i};Object(O["a"])(p()(a),["setSelectedUser","setSelectedAction","setSelectedAffected","mapActions","getAndSetAuditLogs","onRequestNextPage","onStartDateChange","onEndDateChange","onCalendarSave"]);a.logImpression=re();return a}s()(t,[{key:"componentDidMount",value:function e(){var t=this;this.props.getAuditLogActions().then(function(e){var a=e.actions;t.setState(function(){return{loadingFilterOptions:false,actions:t.mapActions(a)}});t.getAndSetAuditLogs()})}},{key:"componentDidUpdate",value:function e(){var t=this.props,a=t.currentUser,r=t.currentUserIsAdmin,n=t.currentUserIsOwner,i=t.clogger,s=t.pageImpressionEventId;a&&this.logImpression(i,r,n,s)}},{key:"onCalendarSave",value:function e(){var t=this.state,a=t.selectedStartDateTime,r=t.selectedEndDateTime,n=t.tempStartDateTime,i=t.tempEndDateTime;a===n&&r===i||this.setState(function(){return{selectedStartDateTime:n,selectedEndDateTime:i}},this.getAndSetAuditLogs)}},{key:"onEndDateChange",value:function e(t){var a=t.selectedEndDate;this.setState(function(){return{tempEndDateTime:_()(a).endOf("day").unix()}})}},{key:"onRequestNextPage",value:function e(){if(""===this.state.nextResultsCursor)return;this.getAndSetAuditLogs({appendResults:true})}},{key:"onStartDateChange",value:function e(t){var a=t.selectedStartDate;this.setState(function(){return{tempStartDateTime:_()(a).startOf("day").unix()}})}},{key:"getAndSetAuditLogs",value:function e(){var t=this;var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=a.appendResults,n=a.retry;var i=n?this.state.newQuery:!r;this.setState(function(){return{loading:true,newQuery:i,error:false}});this.currentSearch&&this.currentSearch.isPending()&&this.currentSearch.cancel();var s=this.state,o=s.selectedUserId,l=s.selectedActionId,c=s.selectedAffectedId,u=s.selectedStartDateTime,d=s.selectedEndDateTime,p=s.nextResultsCursor;this.currentSearch=this.props.getAuditLogs({limit:$,action:l,actor:o,entity:c,cursor:i?void 0:p,oldest:u,latest:d}).then(function(e){var a=e.entries,r=e.metadata,n=void 0===r?{}:r;t.setState(function(e){return{loading:false,auditLogResults:i?a:e.auditLogResults.concat(a),nextResultsCursor:n.next_cursor,error:false}})}).catch(function(){t.setState(function(){return{loading:false,error:true}})})}},{key:"setSelectedAction",value:function e(t){var a=t.value;if(this.state.selectedActionId===a)return;this.setState(function(){return{selectedActionId:a}},this.getAndSetAuditLogs)}},{key:"setSelectedAffected",value:function e(t){var a=t.value;if(this.state.selectedAffectedId===a)return;this.setState(function(){return{selectedAffectedId:a}},this.getAndSetAuditLogs)}},{key:"setSelectedUser",value:function e(t){var a=t.value;if(this.state.selectedUserId===a)return;this.setState(function(){return{selectedUserId:a}},this.getAndSetAuditLogs)}},{key:"mapActions",value:function e(t){return Object(b["map"])(t,function(e,t){return{label:t,options:Object(b["map"])(e,function(e){return{label:e,value:e}})}})}},{key:"renderEntity",value:function e(t){var a=t.type,r=t.value,n=t.label,i=t.entity;switch(a){case ee.USER:return f.a.createElement(A["a"],{id:r,size:"small",showStatus:false,showPresence:false});case ee.CHANNEL:return f.a.createElement(N["a"],{channel:i,size:"small"});case ee.WORKSPACE:return f.a.createElement(P["a"],{id:r,size:"small"});default:return n}}},{key:"renderError",value:function e(){var t=this;if(!this.props.featureAuditLogsView)return null;return this.renderTableOverlay(f.a.createElement(f.a.Fragment,null,f.a.createElement("h3",{className:"p-audit_logs__table_overlay__title"},Z.t("Unable to load audit logs")),f.a.createElement("p",{className:"p-audit_logs__table_overlay__p"},Z.rt("We're having trouble loading your audit logs at the moment.  If the problem persists, please <Link>contact support</Link>.",null,function(e){var t=e.key,a=e.text;return f.a.createElement(j["a"],{key:t,href:"mailto:feedback@slack.com"},a)})),f.a.createElement(C["d"],{className:"p-audit_logs__table_overlay__retry",type:"outline",size:"medium",onClick:function e(){return t.getAndSetAuditLogs({retry:true})},"data-qa":"audit_log_error_page_retry_button"},Z.t("Retry"))))}},{key:"renderFilters",value:function e(){var t=this.props,a=t.featureAuditLogsView,r=t.searchUsers,n=t.searchAffected;if(!a)return null;var i="p-audit_logs__filter";return f.a.createElement("div",{className:"p-audit_logs__filter_container"},f.a.createElement("div",{className:"p-audit_logs_left_filters"},f.a.createElement(D["a"],{text:Z.t("User"),className:i},f.a.createElement(M["c"],{tip:Z.t("Search for a specific member by name or email address")},f.a.createElement("div",null,f.a.createElement(T["c"],{selectId:"audit_log_user_filter",classPrefix:i,placeholderText:Z.t("Select a User..."),isRequired:false,renderOption:this.renderEntity,renderSelectedOption:this.renderEntity,onOptionSelected:this.setSelectedUser,search:r,size:x["f"].SMALL,ariaLabel:Z.t("User / Actor filter"),width:"100%",minOptionsListWidth:300})))),f.a.createElement(D["a"],{text:Z.t("Event"),className:i},f.a.createElement(T["f"],{selectId:"audit_log_action_filter",classPrefix:i,placeholderText:Z.t("Select an event..."),isRequired:false,options:this.state.actions,onOptionSelected:this.setSelectedAction,size:x["f"].SMALL,ariaLabel:Z.t("Event filter"),width:"100%",minOptionsListWidth:300})),f.a.createElement(D["a"],{text:Z.t("Affects"),className:i},f.a.createElement(M["c"],{tip:Z.t("Search for a specific member, workspace, or channel to find events that affected them")},f.a.createElement("div",null,f.a.createElement(T["c"],{selectId:"audit_log_affected_filter",classPrefix:i,placeholderText:Z.t("Select what was affected..."),isRequired:false,renderOption:this.renderEntity,renderSelectedOption:this.renderEntity,onOptionSelected:this.setSelectedAffected,search:n,size:x["f"].SMALL,ariaLabel:Z.t("Affected filter"),debounceWaitPeriod:200,width:"100%",minOptionsListWidth:300}))))),f.a.createElement("div",{className:"p-audit_logs_right_filters"},f.a.createElement(D["a"],{text:Z.t("Date range")},f.a.createElement(S["a"],{size:"small",width:350,onStartDateChange:this.onStartDateChange,onEndDateChange:this.onEndDateChange,maxRange:7,showClearSelection:false,endDateRequired:true,onSave:this.onCalendarSave,disableDatesAfter:_()().format("YYYY-MM-DD"),selectedStartDate:_()().subtract(7,"d").format("YYYY-MM-DD"),selectedEndDate:_()().format("YYYY-MM-DD"),singleMonthMode:true,showSaveCancelButtons:true,dataQa:"audit_log_date_range"}))))}},{key:"renderNoResults",value:function e(){if(!this.props.featureAuditLogsView)return null;return this.renderTableOverlay(f.a.createElement(f.a.Fragment,null,f.a.createElement("p",{className:"p-audit_logs__table_overlay__p"},Z.t("No matches found for these filters."))))}},{key:"renderResults",value:function e(){var t=this.state,a=t.error,r=t.loading,n=t.auditLogResults,i=t.newQuery;var s=!a&&!r&&n&&0===n.length;var o=this.state.error&&!this.state.loading;return f.a.createElement("div",{className:"p-audit_logs__table_container"},o&&this.renderError(),s&&this.renderNoResults(),f.a.createElement(X,{featureAuditLogsView:this.props.featureAuditLogsView,isLoading:r,newQuery:i,auditLogResults:n,onRequestNextPage:this.onRequestNextPage}))}},{key:"renderTableOverlay",value:function e(t){return f.a.createElement("div",{className:"p-audit_logs__table_overlay"},t)}},{key:"render",value:function e(){if(!this.props.featureAuditLogsView)return null;return f.a.createElement("div",{className:"p-audit_logs"},f.a.createElement("div",{className:"p-audit_logs__header"},f.a.createElement("h1",{className:"p-audit_logs__header_title","data-qa":"audit_log_page_title"},Z.t("Audit Logs")),f.a.createElement(j["a"],{href:"https://api.slack.com/docs/audit-logs-api"},Z.t("Learn more about audit logs")," ",f.a.createElement(I["b"],{type:"external-link",inline:true}))),this.state.loadingFilterOptions?f.a.createElement(w["a"],{color:"blue",size:"jumbo","data-qa":"audit_log_spinner"}):f.a.createElement(f.a.Fragment,null,this.renderFilters(),this.renderResults()))}}]);return t}(v["PureComponent"]);ne.displayName="AuditLogs";ne.defaultProps=ae;var ie=ne;a.d(t,"a",function(){return ee});a.d(t,"c",function(){return te});var se=t["b"]=ie},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";var r=a(110);var n=a.n(r);var i=a(135);var s=a.n(i);var o=a(169);var l=a.n(o);var c=a(138);var u=a.n(c);var d=a(147);var p=a.n(d);var m=a(185);var h=a.n(m);var v=a(1);var f=a.n(v);var b=a(12);var g=a(0);var _=a(13);var y=a.n(_);var O=a(2);var k=a.n(O);var E=a(349);var C=a(298);var S=a(384);var w=a(41);var j=a(22);var I=a(392);var T=a(2808);var A=a(816);var N=a(3626);var P=a.n(N);var M={className:void 0,children:void 0,position:"default",parentId:void 0,unreadHandler:O["noop"],show:void 0,showComment:true,showShare:true,showReact:true,showJump:false,showStar:true,showMoreActions:true,jumpOrigin:void 0,messageContainerType:void 0,viewContext:void 0,hover:false,setHover:O["noop"],isEditing:false,maybeStartEditingMessage:O["noop"],isPinned:false,renderOffscreen:false,clogLinkClick:O["noop"],clogThreadEvent:O["noop"]};var D=function(e){h()(t,e);function t(e){var a;n()(this,t);a=l()(this,u()(t).call(this,e));a.onMenuOpen=a.onMenuOpen.bind(p()(a));a.onMenuClose=a.onMenuClose.bind(p()(a));a.startEditing=a.startEditing.bind(p()(a));a.renderActions=a.renderActions.bind(p()(a));return a}s()(t,[{key:"onMenuClose",value:function e(){this.props.setHover(false)}},{key:"onMenuOpen",value:function e(){this.props.setHover(true)}},{key:"startEditing",value:function e(){var t=this.props,a=t.msg,r=t.viewContext;this.props.maybeStartEditingMessage({channelId:Object(w["getMessageChannelId"])(a),ts:Object(w["getMessageTs"])(a),viewContext:r,scroll:true})}},{key:"renderActions",value:function e(){var t=this.props,a=t.msg,r=t.hover,n=t.show,i=t.showComment,s=t.showShare,o=t.showReact,l=t.showJump,c=t.showStar,u=t.showMoreActions,d=t.jumpOrigin,p=t.messageContainerType,m=t.isEditing,h=t.renderOffscreen,v=t.clogLinkClick,b=t.clogThreadEvent,g=t.parentId,_=t.isPinned,y=t.unreadHandler;if(false===n)return null;if(void 0===n&&!r&&!h)return null;if(m)return null;if(Object(w["isEKMAccessDeniedMessage"])(a)||Object(w["isDLPTombstoneMessage"])(a))return null;if(Object(w["isMessageUnknown"])(a))return null;if(a.isEKMError)return null;var O=a.ts,k=a.thread_ts,E=a.channel,C=a.file,j=a.comment,I=a.subtype;return f.a.createElement(T["a"],{ts:O,threadTs:k,channelId:E,reactionKey:Object(S["b"])(a),isStarred:Object(w["isStarred"])(a,C,j),isReply:Object(w["isReply"])(a),isEphemeral:Object(w["isEphemeral"])(a),isPinned:_,subtype:I,replyCount:Object(w["getReplyCount"])(a),comment:a.comment&&a.comment.id,fileIds:a.files,onMenuOpen:this.onMenuOpen,onMenuClose:this.onMenuClose,onEmojiPickerOpen:this.onMenuOpen,onEmojiPickerClose:this.onMenuClose,showComment:i,showShare:s,showReact:o,showJump:l,showStar:c,showMoreActions:u,jumpOrigin:d,editHandler:this.startEditing,messageContainerType:p,renderOffscreen:h&&!r&&!n,clogLinkClick:v,clogThreadEvent:b,parentId:g,unreadHandler:y})}},{key:"render",value:function e(){var t=this.props,a=t.children,r=t.position;var n=y()("c-message_kit__actions","c-message_kit__actions--"+r,this.props.className);return f.a.createElement("div",{className:n,style:{position:"relative"}},a,this.renderActions())}}]);return t}(v["PureComponent"]);D.displayName="MessageActions";D.defaultProps=M;var x=function e(t,a){var r=a.msg,n=a.viewContext;var i=Object(w["getMessageChannelId"])(r);var s=Object(w["getMessageTs"])(r);var o=!!Object(E["getMessageEditData"])(t,{channelId:i,ts:s,viewContext:n});var l=Object(C["isMessagePinned"])(t,{channelId:i,ts:s});return{isEditing:o,isPinned:l}};var R={maybeStartEditingMessage:function e(){return E["maybeStartEditingMessage"].apply(void 0,arguments)}};t["a"]=Object(I["b"])(Object(A["b"])(Object(b["connect"])(x,R)(D)))},,function(e,t,a){"use strict";var r=a(110);var n=a.n(r);var i=a(135);var s=a.n(i);var o=a(169);var l=a.n(o);var c=a(138);var u=a.n(c);var d=a(147);var p=a.n(d);var m=a(185);var h=a.n(m);var v=a(1);var f=a.n(v);var b=a(0);var g=a(23);var _=a(54);var y=a(24);var O=a(2);var k=a(30);var E=a(13);var C=a.n(E);var S=a(93);var w=a(3133);var j={title:"",titleClass:"",description:null,className:"",descriptionAlerts:null};var I=function(e){h()(t,e);function t(){n()(this,t);return l()(this,u()(t).apply(this,arguments))}s()(t,[{key:"renderAlert",value:function e(){if(!this.props.descriptionAlerts)return null;return f.a.createElement(S["a"],{className:"p-settings_item_header__alert",type:"inline",level:"default",align:"left"},this.props.descriptionAlerts.map(function(e){return f.a.createElement("p",{key:e},e)}))}},{key:"renderDescription",value:function e(){if(!this.props.description)return null;return f.a.createElement("span",{className:"sk_foreground_max"},this.props.description)}},{key:"renderTitle",value:function e(){if(!this.props.title)return null;var t=this.props,a=t.titleClass,r=t.className;var n=C()(r,a);return f.a.createElement("h4",{className:n},this.props.title)}},{key:"render",value:function e(){return f.a.createElement("div",{className:"p-settings_item___header"},this.renderTitle(),this.renderDescription(),this.renderAlert())}}]);return t}(v["PureComponent"]);I.displayName="SettingsItemHeader";I.defaultProps=j;var T=I;var A=a(6);var N=a(3135);var P=new A["b"]("enterprise_settings");var M={editOnly:false,toggleOnly:false,enabled:false,onEnable:O["noop"],onDisable:O["noop"],editButtonText:"",dataQAPrefix:""};var D=function(e){h()(t,e);function t(e){var a;n()(this,t);a=l()(this,u()(t).call(this,e));a.onEnable=a.onEnable.bind(p()(a));a.onDisable=a.onDisable.bind(p()(a));a.onEdit=a.onEdit.bind(p()(a));return a}s()(t,[{key:"onDisable",value:function e(t){t.stopPropagation();this.props.onDisable(t)}},{key:"onEdit",value:function e(t){t.stopPropagation();this.props.onEdit(t)}},{key:"onEnable",value:function e(t){t.stopPropagation();this.props.onEnable(t)}},{key:"renderButtonControls",value:function e(){var t=this.props,a=t.editOnly,r=t.enabled;if(a)return this.renderEdit();return r?this.renderDisable():this.renderEnable()}},{key:"renderDisable",value:function e(){var t=P.t("Disable");var a=P.t("Edit");return f.a.createElement("div",{className:"p-settings_item_button_control"},f.a.createElement(y["d"],{type:"danger",size:"small",onClick:this.onDisable,"aria-label":t,"data-qa":this.props.dataQAPrefix+"-setting-item-disable"},t),!this.props.toggleOnly&&f.a.createElement(y["d"],{type:"outline",size:"small",onClick:this.onEdit,className:"margin_left_50","aria-label":a,"data-qa":this.props.dataQAPrefix+"-setting-item-edit"},a))}},{key:"renderEdit",value:function e(){var t=this.props.editButtonText||P.t("Edit");return f.a.createElement("div",{className:"p-settings_item_button_control"},f.a.createElement(y["d"],{type:"outline",size:"small",onClick:this.onEdit,"aria-label":t,className:"margin_left_50","data-qa":this.props.dataQAPrefix+"-setting-item-edit"},t))}},{key:"renderEnable",value:function e(){var t=P.t("Enable");return f.a.createElement("div",{className:"p-settings_item_button_control"},f.a.createElement(y["d"],{type:"outline",size:"small",onClick:this.onEnable,"data-qa":this.props.dataQAPrefix+"-setting-item-enable"},t))}},{key:"render",value:function e(){return this.renderButtonControls()}}]);return t}(v["PureComponent"]);D.displayName="SettingsItemButtonControl";D.defaultProps=M;var x=D;var R=a(3137);var F={description:null,onClick:O["noop"],readonly:false,readonlyTooltip:"",noButton:false,descriptionAlerts:null,type:"button",dataQAPrefix:"",state:null};var L=function(e){h()(t,e);function t(e){var a;n()(this,t);a=l()(this,u()(t).call(this,e));Object(k["a"])(p()(a),["onReadonlyButtonClick","onReadonlyButtonFocus","onReadonlyButtonBlur"]);a.readonlyTooltipRef=f.a.createRef();return a}s()(t,[{key:"onReadonlyButtonBlur",value:function e(){Object(O["has"])(this,"readonlyTooltipRef.current")&&this.readonlyTooltipRef.current.hideTip()}},{key:"onReadonlyButtonClick",value:function e(t){t.preventDefault();t.stopPropagation()}},{key:"onReadonlyButtonFocus",value:function e(){Object(O["has"])(this,"readonlyTooltipRef.current")&&this.readonlyTooltipRef.current.showTip()}},{key:"chooseOnClickHandler",value:function e(){return this.props.readonly?function(e){e.preventDefault();e.stopPropagation()}:this.props.onClick}},{key:"renderButtonControl",value:function e(){if(this.props.noButton)return f.a.createElement(y["c"],{"aria-disabled":"true"});if(this.props.readonly){var t=f.a.createElement(y["c"],{"aria-disabled":"true","aria-label":this.props.readonlyTooltip,className:"c-button--focus-visible p-settings_item__readonly_control",onClick:this.onReadonlyButtonClick,onFocus:this.onReadonlyButtonFocus,onBlur:this.onReadonlyButtonBlur},f.a.createElement(g["b"],{type:"eye-filled",size:"inherit",inline:true})," Read only");if(this.props.readonlyTooltip)return f.a.createElement(_["c"],{tip:this.props.readonlyTooltip,position:"top",ref:this.readonlyTooltipRef},t);return t}var a=this.props.control,r=a.editOnly,n=a.toggleOnly,i=a.editButtonText,s=a.enabled,o=a.onEnable,l=a.onDisable,c=a.onEdit,u=a.dataQAPrefix;return f.a.createElement(x,{editOnly:r,enabled:s,onEnable:o,onDisable:l,onEdit:c,editButtonText:i,toggleOnly:n,dataQAPrefix:u})}},{key:"renderControl",value:function e(){return"button"===this.props.control.type?f.a.createElement("div",{className:"p-settings_item__control"},this.renderButtonControl()):null}},{key:"renderLabel",value:function e(){return f.a.createElement(T,{title:this.props.label,className:"p-settings_item__label"})}},{key:"renderState",value:function e(){var t=this.props,a=t.state,r=t.description,n=t.descriptionAlerts;return f.a.createElement(T,{title:a,description:r,className:"bold",descriptionAlerts:n})}},{key:"render",value:function e(){return f.a.createElement("div",{"data-qa":"ent-settings-item",className:C()("p-settings_item",{"p-settings_item--readonly":this.props.readonly}),onClick:this.chooseOnClickHandler(),role:"presentation"},this.renderLabel(),this.renderState(),this.renderControl())}}]);return t}(v["PureComponent"]);L.displayName="SettingsItem";L.defaultProps=F;var U=t["a"]=L},,,,,,,function(e,t,a){"use strict";var r=a(1);var n=a.n(r);var i=a(11);var s=a(520);var o=a(285);var l=a(110);var c=a.n(l);var u=a(135);var d=a.n(u);var p=a(169);var m=a.n(p);var h=a(138);var v=a.n(h);var f=a(185);var b=a.n(f);var g=a(13);var _=a.n(g);var y=a(12);var O=a(2);var k=a(6);var E=a(34);var C=a(35);var S=a(214);var w=a(174);var j=a(1046);var I=a(14);var T=a(219);var A=a(1873);var N=a(144);var P=a(15);var M=a(25);var D=Object(P["b"])(function(e){var t;var a=Object(S["b"])(e);if(!(null===(t=a)||void 0===t?void 0:t.lastEditorId))return null;return Object(M["e"])(e,a.lastEditorId)});D.meta={name:"getCustomWelcomeMessageAuthor",key:"welcomePlaceStoreGetCustomWelcomeMessageAuthorGetCustomWelcomeMessageAuthor"};var x=a(2734);var R=a(4888);var F=a(561);var L=new k["b"]("welcome_place");var U=function(e){b()(t,e);function t(){c()(this,t);return m()(this,v()(t).apply(this,arguments))}d()(t,[{key:"render",value:function e(){var t=this.props,a=t.onboardingWorkflowType,r=t.featureNewxp3279,i=t.customWelcomeMessage,s=t.messageAuthor;if(!(r&&i&&i.blocks&&"creator_onboarding"!==a))return null;return n.a.createElement("div",{className:"joiner-welcome-message margin_left_125 margin_right_125 margin_top_150"},r&&s&&s.id?n.a.createElement("p",null,L.rt("{messageAuthorNameLink} left you a welcome note:",{messageAuthorNameLink:n.a.createElement(F["a"],{id:s.id})})):null,n.a.createElement("div",{className:"display_flex justify_content_between margin_top_150"},n.a.createElement("div",{className:"welcome-message-workflow-card__avatar-wrapper"},n.a.createElement(T["b"],{userId:s&&s.id,size:56,isInteractive:false})),n.a.createElement("div",{className:s?"welcome-message-workflow-card__dialog-box":"joiner-welcome-message__contents"},n.a.createElement(A["a"],{blocks:i.blocks,blocksContainerContext:N["a"].welcome_message}))))}}]);return t}(r["Component"]);U.displayName="JoinerWelcomeMessage";function B(e){var t=Object(S["b"])(e);var a=t?D(e):null;return{featureNewxp3279:Object(i["isFeatureEnabled"])(e,"feature_newxp_3279"),customWelcomeMessage:t,messageAuthor:a,onboardingWorkflowType:Object(S["j"])(e)}}var q=Object(y["connect"])(B)(U);var G=a(283);var H=a(199);var W=a(1563);function V(e,t){if("completed"===e.state){if("completed"===t.state)return 0;return 1}if("completed"===t.state)return-1;return 0}function K(e,t){var a=e.content.workflow.tasks.filter(W["a"]);var r=a.sort(V);return r.findIndex(function(e){return e.subtype===t})+1}var z=a(39);var Q=a(246);var Y=a.n(Q);var J=a(24);var X=a(23);var Z=a(119);var $=a(3521);var ee=a(196);var te=a.n(ee);var ae=n.a.createContext({});function re(){return function(e){var t=function(t){b()(a,t);function a(){var t;c()(this,a);t=m()(this,v()(a).apply(this,arguments));t.renderWithConsumer=function(a){var r=a.addElementToVisibilityLogging,i=a.removeElementFromVisibilityLogging;return n.a.createElement(e,te()({addElementToVisibilityLogging:r,removeElementFromVisibilityLogging:i},t.props))};return t}d()(a,[{key:"render",value:function e(){return n.a.createElement(ae.Consumer,null,this.renderWithConsumer)}}]);return a}(r["Component"]);t.displayName="WithVisibilityLogger";t.displayName="WithVisibilityLogger("+(e.displayName||"Component")+")";return t}}var ne=function e(t){var a=t.isFlexpaneOpen,i=t.clogger,s=t.pageViewingSessionId,o=t.addElementToVisibilityLogging,l=t.removeElementFromVisibilityLogging,c=t.workflowTask,u=c.subtype,d=c.state,p=t.onButtonClicked,m=t.bodyCopy,h=t.buttonCopy,v=t.clogElementName,f=t.buttonQa,b=t.items,g=t.children,y=t.togglableContents;var O=Object(r["useState"])(false),k=Y()(O,2),E=k[0],C=k[1];var S=b.find(function(e){return"workflow"===e.type});var w=K(S,u);var j=Object(r["useRef"])(null);var T=d===H["d"].Completed;Object(r["useEffect"])(function(){o({element:j.current,uiContext:{ui_element:I["UiElement"]["WELCOME_PLACE_ACTION_"+u.toUpperCase()],ui_properties:{element_value:d,element_type:I["ElementType"].BUTTON,element_name:v}}});return function(){l(j.current)}},[u,v]);var A=null;var N=false;if(g)A=n.a.createElement("div",{className:"c-workflow-item-card__children"},g);else if("function"===typeof p){N=true;var P=function e(){if(T)return;p();i.track("WELCOME_PLACE",{contexts:{ui_context:{action:I["UiAction"].CLICK,ui_element:I["UiElement"]["WELCOME_PLACE_ACTION_"+u.toUpperCase()],ui_properties:{element_value:d,element_type:I["ElementType"].BUTTON,element_name:v}},welcome_place:{welcome_session_id:s}}})};var M=T?null:n.a.createElement(J["d"],{disabled:T,type:"outline",size:"medium",onClick:P,"data-qa":f,className:"workflow-item-card__button"},h);A=n.a.createElement("div",{className:"c-workflow-item-card__section c-workflow-item-card__section--content"},n.a.createElement("div",{className:"full_width"},M))}var D=_()("c-workflow-item-card__number bold",{complete:T});var x=_()("c-workflow-item-card",{complete:T,flexpaneOpen:a,hasChildren:!!g});var R=y&&!T?n.a.createElement("button",{type:"button",className:"c-button-unstyled display_flex justify_content_between",onClick:function e(){return C(!E)}},m,n.a.createElement(X["b"],{type:"chevron-medium-"+(E?"up":"down")})):n.a.createElement("div",{className:"c-workflow-item-card__section_header_body"},m);return n.a.createElement("div",{className:x,ref:j},n.a.createElement("div",{className:_()("c-workflow-item-card__section c-workflow-item-card__section--header",{"c-workflow-item-card__section--full-width":!N})},n.a.createElement("div",{className:D},T?n.a.createElement("i",{"aria-hidden":"true",className:"c-icon c-icon--check-small c-icon--inline"}):w),R),(!y||E||T)&&A)};function ie(e){return{items:Object(S["k"])(e),isFlexpaneOpen:Object(Z["j"])(e),clogger:Object(C["a"])({state:e}),pageViewingSessionId:Object(S["m"])(e)}}var se=Object(y["connect"])(ie)(re()(ne));var oe=a(2758);var le=new k["b"]("welcome_place");var ce=function(e){b()(t,e);function t(){var e;c()(this,t);e=m()(this,v()(t).apply(this,arguments));e.onButtonClicked=function(){e.props.clogger.track("WELCOME_PLACE",{contexts:{ui_context:{action:I["UiAction"].CLICK,ui_element:I["UiElement"].WELCOME_PLACE_ACTION_ACCOUNT_SETUP,ui_properties:{element_name:"WELCOME_PLACE_FINISH_SETUP_CARD",element_type:I["ElementType"].BUTTON}}}});e.props.openTeamCreatorOnboardingDialog()};return e}d()(t,[{key:"render",value:function e(){var t=this.props,a=t.workflowTask,r=t.featureNewxp3279;var i=n.a.createElement("span",null);var s="";if(r){i=a.state===H["d"].Completed?n.a.createElement("p",null,n.a.createElement("b",null,le.t("Finished setting up"))):n.a.createElement(n.a.Fragment,null,n.a.createElement("p",null,n.a.createElement("b",null,le.t("Wrap it all up"))),n.a.createElement("p",null,le.t("Choose a name and password, and make sure the rest looks good.")));s=le.t("Finish setup")}return n.a.createElement(se,{workflowTask:a,onButtonClicked:this.onButtonClicked,bodyCopy:i,buttonCopy:s})}}]);return t}(r["Component"]);ce.displayName="AccountSetupWorkflowCard";function ue(e){return{featureNewxp3279:Object(i["isFeatureEnabled"])(e,"feature_newxp_3279"),clogger:Object(C["a"])({state:e})}}var de=function e(t){return{openTeamCreatorOnboardingDialog:function e(){t(Object(z["openModal"])({element:n.a.createElement(oe["a"]),name:"team-creator-onboarding-dialog"}))}}};var pe=Object(y["connect"])(ue,de)(ce);var me=a(147);var he=a.n(me);var ve=a(1596);var fe=a(1438);var be=a(2949);var ge=a(1894);var _e=a(111);var ye=a(1214);var Oe=a(5101);var ke=new k["b"]("welcome_place");var Ee=_e["a"].RICH_TEXT,Ce=_e["a"].SECTION,Se=_e["a"].LIST;var we=_e["b"].BULLET;var je=function(e){b()(t,e);function t(){var e;c()(this,t);e=m()(this,v()(t).apply(this,arguments));e.onClick=function(){e.props.onClick({blocks:e.props.blocks,welcomeMessage:e.props.welcomeMessage})};return e}d()(t,[{key:"render",value:function e(){var t=this.props,a=t.featureNewxp3279,r=t.introTextBlocks,i=t.welcomeMessage;var s=n.a.createElement("div",null,a?ke.t("Custom\u2026"):"");i&&(s=n.a.createElement(A["a"],{blocks:r,blocksContainerContext:N["a"].welcome_message}));return n.a.createElement("li",{className:"welcome-message-option "+(i?"":"welcome-message-option--custom")},n.a.createElement("button",{className:"welcome-message-option__button c-button-unstyled display_flex justify_content_between",type:"button",onClick:this.onClick},n.a.createElement("div",{className:"welcome-message-option__renderer-wrapper"},s),n.a.createElement(X["b"],{type:"chevron-medium-right"})))}}]);return t}(r["Component"]);je.displayName="WelcomeMessageOption";function Ie(e,t){var a=t.welcomeMessage&&t.welcomeMessage.body_items&&t.welcomeMessage.body_items.length>0?Object(ye["a"])(e,Object(Oe["a"])(e,t.welcomeMessage.body_items.join(""))).blocks:[];var r=t.welcomeMessage&&t.welcomeMessage.list_items&&t.welcomeMessage.list_items.length>0?t.welcomeMessage.list_items.map(function(e){return{type:Ce,elements:[{type:"text",text:e}]}}):[];var n=r.length>0&&a.length>0&&a[0].elements?[{type:Ee,elements:a[0].elements.concat({type:Se,style:we,indent:0,elements:r})}]:null;return{featureNewxp3279:Object(i["isFeatureEnabled"])(e,"feature_newxp_3279"),blocks:n,introTextBlocks:a}}var Te=Object(y["connect"])(Ie)(je);var Ae=a(5100);var Ne=a(16);var Pe=a(43);var Me=new k["b"]("welcome_place_for_creators");var De=function(e){b()(t,e);function t(e){var a;c()(this,t);a=m()(this,v()(t).call(this,e));a.selectWelcomeMessage=function(e){var t=a.props,r=t.currentUserId,n=t.clogger;var i=e.blocks,s=e.welcomeMessage;n.track("WELCOME_PLACE",{contexts:{ui_context:{action:I["UiAction"].CLICK,ui_element:I["UiElement"].WELCOME_PLACE_ACTION_WELCOME_MESSAGE,ui_properties:{element_name:"WELCOME_PLACE_SELECT_WELCOME_MESSAGE",element_type:I["ElementType"].BUTTON,element_value:s&&s.body_items&&s.body_items.length>0?s.body_items[0]:"CUSTOM"}}}});i&&a.setState(function(){return{currentCustomWelcomeMessage:{blocks:i,lastEditorId:r}}});a.setState(function(){return{isEditorOpen:true}})};a.updateCustomWelcomeMessage=function(e){var t=a.props.currentUserId;var r=e.blocks,n=e.overLimit;if(n)return;a.setState(function(){return{currentCustomWelcomeMessage:{blocks:r,lastEditorId:t}}})};a.submitCustomWelcomeMessage=function(){return Object(ve["a"])(he()(a),void 0,void 0,regeneratorRuntime.mark(function e(){var t,a,r,n,i,s,o;return regeneratorRuntime.wrap(function e(l){while(1)switch(l.prev=l.next){case 0:t=this.props,a=t.customWelcomeMessage,r=t.editCustomWelcomeMessage,n=t.createCustomWelcomeMessage,i=t.logger,s=t.clogger;o=this.state.currentCustomWelcomeMessage;s.track("WELCOME_PLACE",{contexts:{ui_context:{action:I["UiAction"].CLICK,ui_element:I["UiElement"].WELCOME_PLACE_ACTION_WELCOME_MESSAGE,ui_properties:{element_name:"WELCOME_PLACE_WELCOME_MESSAGE_SAVE_BUTTON",element_type:I["ElementType"].BUTTON}}}});l.next=5;return this.disableUI();case 5:l.prev=5;if(!a){l.next=11;break}l.next=9;return r({text:o});case 9:l.next=13;break;case 11:l.next=13;return n({text:o});case 13:this.closeEditor();l.next=19;break;case 16:l.prev=16;l.t0=l["catch"](5);i.error("Error submitting welcome message: "+l.t0);case 19:l.prev=19;this.enableUI();return l.finish(19);case 22:case"end":return l.stop()}},e,this,[[5,16,19,22]])}))};a.disableUI=function(){return Object(ve["a"])(he()(a),void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:this.setState(function(){return{isUIDisabled:true}});case 1:case"end":return t.stop()}},e,this)}))};a.enableUI=function(){return Object(ve["a"])(he()(a),void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:this.setState(function(){return{isUIDisabled:false}});case 1:case"end":return t.stop()}},e,this)}))};a.closeEditor=function(){a.setState(function(){return{isEditorOpen:false,currentCustomWelcomeMessage:null}})};a.openEditor=function(){var e=a.props.customWelcomeMessage;a.setState(function(){return{isEditorOpen:true,currentCustomWelcomeMessage:e}})};a.onClickBack=function(){var e=a.props.clogger;e.track("WELCOME_PLACE",{contexts:{ui_context:{action:I["UiAction"].CLICK,ui_element:I["UiElement"].WELCOME_PLACE_ACTION_WELCOME_MESSAGE,ui_properties:{element_name:"WELCOME_PLACE_WELCOME_MESSAGE_BACK_BUTTON",element_type:I["ElementType"].BUTTON}}}});a.closeEditor()};a.state={isEditorOpen:false,currentCustomWelcomeMessage:{blocks:[],lastEditorId:null},isUIDisabled:false};return a}d()(t,[{key:"render",value:function e(){var t=this;var a;var r=this.props,i=r.workflowTask,s=r.customWelcomeMessage,o=r.defaultWelcomeMessages,l=r.featureNewxp3279,c=r.currentUserId,u=r.items;var d=this.state,p=d.isEditorOpen,m=d.currentCustomWelcomeMessage,h=d.isUIDisabled;var v=null;var f=u.find(function(e){return"workflow"===e.type});var b=1===K(f,i.subtype);var g=p||s?function(e){return n.a.createElement("div",{className:"display_flex justify_content_between"},n.a.createElement("div",{className:"welcome-message-workflow-card__avatar-wrapper"},n.a.createElement(T["b"],{userId:c,size:56,isInteractive:false})),e)}:function(e){return e};v=p?n.a.createElement("div",{className:"welcome-message-workflow-card__dialog-box"},n.a.createElement(be["a"],{initialContents:null===(a=m)||void 0===a?void 0:a.blocks,onTextChange:this.updateCustomWelcomeMessage,onClickBack:this.onClickBack,onClickSave:this.submitCustomWelcomeMessage,hasButtons:true,isDisabled:h})):s?n.a.createElement("div",{className:"welcome-message-workflow-card__dialog-box"},n.a.createElement(A["a"],{blocks:s.blocks,blocksContainerContext:N["a"].welcome_message})):n.a.createElement("ul",{className:"no_bullets margin_left_0"},o.map(function(e){var a=e.body_items.join("");return n.a.createElement(Te,{key:"welcome_message_option_"+a,welcomeMessage:e,onClick:t.selectWelcomeMessage})}),n.a.createElement(Te,{welcomeMessage:null,onClick:this.selectWelcomeMessage}));var _=n.a.createElement("span",null);l&&(_=i.state===H["d"].Completed?n.a.createElement("div",{className:"display_flex justify_content_between"},n.a.createElement("b",null,Me.t("Greeting set")),!p&&n.a.createElement(Pe["a"],{onClick:this.openEditor},l?Me.t("Edit"):"")):n.a.createElement("b",null,Me.t("Choose a greeting")));return n.a.createElement(se,{key:"workflow_item_card_"+H["e"].WelcomeMessage,workflowTask:i,bodyCopy:_,togglableContents:!b},b||!s||p?n.a.createElement(n.a.Fragment,null,l?n.a.createElement("p",null,Me.t("Your teammates will see this when they first get to Slack.")):null,g(v)):null)}}]);return t}(r["Component"]);De.displayName="WelcomePlaceMessageWorkflowCard";function xe(e){return{customWelcomeMessage:Object(S["b"])(e),defaultWelcomeMessages:Object(S["c"])(e),clogger:Object(C["a"])({state:e}),featureNewxp3279:Object(i["isFeatureEnabled"])(e,"feature_newxp_3279"),logger:Object(Ne["a"])({state:e}),currentUserId:Object(i["getCurrentUserId"])(e),items:Object(S["k"])(e)}}function Re(e){return{markWelcomeMessageTaskAsComplete:function t(){return e(Object(w["h"])())},createCustomWelcomeMessage:function t(a){return e(Object(Ae["a"])(a))},editCustomWelcomeMessage:function t(a){return e(Object(Ae["c"])(a))},updateCustomWelcomeMessage:function t(a){return e(Object(j["f"])(a))},convertMsgOpsToRichTextMessage:function t(a){return e(Object(fe["a"])(a))}}}var Fe=Object(y["connect"])(xe,Re)(De);var Le=a(3517);var Ue=function(e){b()(t,e);function t(){c()(this,t);return m()(this,v()(t).apply(this,arguments))}d()(t,[{key:"render",value:function e(){var t=this.props,a=t.title,r=t.subtitle;var i=_()("welcome-row__title",{margin_bottom_50:!!r,margin_bottom_75:!r});return n.a.createElement("div",{className:"welcome-row margin_left_125 margin_right_125 margin_top_150 margin_bottom_200"},a?n.a.createElement("div",{className:i},n.a.createElement("h3",{className:"normal"},a)):null,r?n.a.createElement("div",{className:"margin_bottom_75"},n.a.createElement("p",null,r)):null,n.a.createElement("div",null,this.props.children))}}]);return t}(r["Component"]);Ue.displayName="WelcomeRow";var Be=a(88);var qe=a.n(Be);var Ge=a(754);var He=a(20);var We=function e(t,a,r){return t[a][r]};var Ve=new k["b"]("welcome_place");var Ke=function e(t){var a;var r=t.userHasAvailableChannels,i=t.workflowTask,s=t.workflowTask,o=s.state,l=s.user_task_id;var c={body:Ve.rt("<b>See what people are talking about</b> in your team\u2019s channels.",{note:"Incomplete state copy for fourth action step. Most important info should be bolded."}),button:Ve.rt("Join Channels",{note:"Button label for incomplete state of fourth step."}),tip:null};var u={body:n.a.createElement("b",null,Ve.rt("Joined a channel",{note:"Completed state copy, bolded, no punctuation"})),button:Ve.rt("Completed",{note:"Button label for completed state of all tasks."}),tip:Ve.rt("Tip: To find more channels later \u2014 or create new ones \u2014 click on <b>Channels</b> in the sidebar. ",{note:"Completed state body copy conveying a tip about how to return to the channel browser in the future; use bolding on the word \u201cChannels\u201d."})};var d=(a={},qe()(a,H["d"].Pending,c),qe()(a,H["d"].InProgress,c),qe()(a,H["d"].Completed,u),a);var p=o===H["d"].Completed||r?We(d,o,"button"):Ve.t("Browse Channels",{ns:"channel_browser",fallbackHash:"f3783ed57f3ec287bdc59897500c8d674a2f1ec8"});var m=We(d,o,"body");var h=function e(){r?t.updateActionStateAndReload({userTaskId:l,state:H["d"].InProgress}):t.updateActionStateAndReload({userTaskId:l,state:H["d"].Completed});t.openChannelBrowser()};return n.a.createElement(se,{workflowTask:i,onButtonClicked:h,buttonCopy:p,bodyCopy:m,buttonQa:"wp_join_channel_button"})};var ze={updateActionStateAndReload:w["m"],openChannelBrowser:Ge["a"]};function Qe(e){return{userHasAvailableChannels:Object(He["r"])(e).length>Object(He["s"])(e).length}}var Ye=Object(y["connect"])(Qe,ze)(Ke);var Je=a(33);var Xe=new k["b"]("welcome_place");var Ze=function e(t){var a;var i=t.currentTeam.name,s=t.workflowTask,o=t.workflowTask,l=o.state,c=o.user_task_id;Object(r["useEffect"])(function(){l!==H["d"].Completed&&t.updateActionStateAndReload({userTaskId:c,state:H["d"].Completed})});var u={body:Xe.rt("<b>Joined {workspaceName},</b> your team\u2019s Slack workspace",{workspaceName:i,note:"Completed state copy for first action step. Should be personalized with their workspace name but also expose them to the term \u201cworkspace.\u201d Use bolding for the most important information. Note: No punctuation at the end."}),button:Xe.rt("Completed",{note:"Button label for completed state of all tasks."}),tip:null};var d={body:Xe.rt("<b>Joined {workspaceName},</b> your team\u2019s Slack workspace",{workspaceName:i,note:"Completed state copy for first action step. Should be personalized with their workspace name but also expose them to the term \u201cworkspace.\u201d Use bolding for the most important information. Note: No punctuation at the end."}),button:Xe.rt("Completed",{note:"Button label for completed state of all tasks."}),tip:null};var p=(a={},qe()(a,H["d"].Pending,u),qe()(a,H["d"].InProgress,u),qe()(a,H["d"].Completed,d),a);var m=We(p,l,"button");var h=We(p,l,"body");return n.a.createElement(se,{workflowTask:s,onButtonClicked:O["noop"],buttonCopy:m,bodyCopy:h,buttonQa:"wp_see_welcome_place_button"})};var $e={updateActionStateAndReload:w["m"]};function et(e){return{currentTeam:Object(Je["d"])(e)||{name:""}}}var tt=Object(y["connect"])(et,$e)(Ze);var at=a(1166);var rt=a(354);var nt=a(1244);var it=new k["b"]("welcome_place");var st=function e(t){var a;var i=t.workflowTask,s=t.workflowTask,o=s.state,l=s.user_task_id;var c=Object(nt["a"])();Object(r["useEffect"])(function(){o!==H["d"].Completed&&Object(rt["e"])()&&t.updateActionStateAndReload({userTaskId:l,state:H["d"].Completed})});var u={body:it.rt("<b>Get notified</b> when a teammate sends you a message or mentions your name.",{note:"Incomplete state copy for third action step. Most important info should be bolded."}),button:it.rt("Turn On Notifications",{note:"Button label for incomplete state of third step. This should not convey customization, just enablement."}),tip:null};var d={body:"denied"===c?it.rt("You've disallowed notifications in your browser. You'll need to open your browser preferences to change that.",{note:"Completed state copy, bolded, no punctuation",fallbackHash:"1a4db9df0870ea9d3249727659a462c79ca89790",fallbackHashNs:"prefs"}):n.a.createElement("b",null,it.rt("Turned on notifications",{note:"Completed state copy, bolded, no punctuation"})),button:it.rt("Completed",{note:"Button label for completed state of all tasks."}),tip:null};var p=(a={},qe()(a,H["d"].Pending,u),qe()(a,H["d"].InProgress,u),qe()(a,H["d"].Completed,d),a);var m="default"===c;var h=m?H["d"].InProgress:o;var v=We(p,h,"button");var f=We(p,h,"body");var b=function e(){t.updateActionStateAndReload({userTaskId:l,state:H["d"].InProgress});t.promptForPermissionAndSetPref().then(function(){t.updateActionStateAndReload({userTaskId:l,state:H["d"].Completed})})};return"na"!==c?n.a.createElement(se,{workflowTask:te()(te()({},i),{state:m?H["d"].InProgress:i.state}),onButtonClicked:b,buttonCopy:v,bodyCopy:f,buttonQa:"wp_enable_notif_button"}):null};var ot={updateActionStateAndReload:w["m"],promptForPermissionAndSetPref:at["c"]};function lt(e){return{currentTeam:Object(Je["d"])(e)||{name:""}}}var ct=Object(y["connect"])(lt,ot)(st);var ut=a(27);var dt=a(32);var pt=new k["b"]("welcome_place");var mt=qe()({},H["a"].Gdrive,{name:"Google Drive",appId:dt["isDev"]?"A061CBSHF":"A6NL8MJ6Q"});var ht=dt["isDev"]?"/apps/category/At06175UHW-file-management":"/apps/category/At0EFRCDPW-file-management";var vt="utm_medium=in-prod&utm_source=in-prod&utm_campaign=d_in-prod_in-prod_all__welcome";var ft=function e(t){var a;var r=t.workflowTask,i=t.workflowTask,s=i.state,o=i.user_task_id,l=t.team,c=t.fileManagementType,u=t.fileManagementAuthUrl,d=t.isFileManagementAppInstalledOnTeam;var p;var m;var h=c&&mt[c];if(h){var v=h.name;p={body:pt.rt("<b>Connect to {fileManagementAppName}</b> to easily share and collaborate on files with your team.",{fileManagementAppName:v,note:"Incomplete state copy for file management step. Most important info should be bolded. fileManagementAppName refers to a file management integration, such as Google Drive or OneDrive"}),button:pt.rt("Connect to {fileManagementAppName}",{fileManagementAppName:v,note:"Button label for incomplete state of file management step. fileManagementAppName refers to a file management integration, such as Google Drive or OneDrive."}),tip:null};m={body:n.a.createElement("b",null,pt.rt("Connected to {fileManagementAppName}",{fileManagementAppName:v,note:"Completed state copy, bolded, no punctuation"})),button:pt.rt("Completed",{note:"Button label for completed state of all tasks."}),tip:pt.rt("Tip: To share or collaborate on {fileManagementAppName} files without leaving Slack, click on the <b>paperclip icon</b> next to the message field.",{fileManagementAppName:v,note:'Completed state body copy conveying a tip about how to use the file management integration in Slack; use bolding on the words "paperclip icon". fileManagementAppName refers to a file management integration, such as Google Drive or OneDrive.'})}}else{p={body:pt.rt("<b>Connect your file management tools</b> to easily share and collaborate on files with your team.",{note:"Incomplete state copy for file management step when user is not associated with a GSuite/Office 365 enterprise suite. Most important info should be bolded."}),button:pt.rt("Browse Apps",{note:"Button label for incomplete state of file management step. Links to file management section of the App Directory."}),tip:null};m={body:n.a.createElement("b",null,pt.rt("Browsed the App Directory",{note:"Completed state copy, bolded, no punctuation"})),button:pt.rt("Completed",{note:"Button label for completed state of all tasks."}),tip:null}}var f=(a={},qe()(a,H["d"].Pending,p),qe()(a,H["d"].InProgress,p),qe()(a,H["d"].Completed,m),a);var b=We(f,s,"button");var g=We(f,s,"body");var _=function e(){if(h){u&&d?window.open(u):t.openAuthenticatedUrlInBrowser(l,"apps/"+h.appId+"?"+vt);t.updateActionStateAndReload({userTaskId:o,state:H["d"].InProgress})}else{t.openAuthenticatedUrlInBrowser(l,ht+"?"+vt);t.updateActionStateAndReload({userTaskId:o,state:H["d"].Completed})}};return n.a.createElement(se,{workflowTask:r,onButtonClicked:_,buttonCopy:b,bodyCopy:g,clogElementName:c,buttonQa:"wp_file_management_button"})};var bt={updateActionStateAndReload:w["m"],openAuthenticatedUrlInBrowser:ut["openAuthenticatedUrlInBrowser"]};function gt(e){var t,a,r;var n=Object(S["d"])(e);var i=(null===(t=n)||void 0===t?void 0:t.auth_url)||"";var s=null===(a=n)||void 0===a?void 0:a.type;var o=(null===(r=n)||void 0===r?void 0:r.is_installed_on_team)||false;return{team:Object(Je["d"])(e),fileManagementAuthUrl:i,fileManagementType:s,isFileManagementAppInstalledOnTeam:o}}var _t=Object(y["connect"])(gt,bt)(ft);var yt=a(350);var Ot=a.n(yt);function kt(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("string"!==typeof e)throw new Error("String required for capitalization; type "+Ot()(e)+" given");var a=e.slice(1);t&&(a=a.toLowerCase());return""+e.charAt(0).toUpperCase()+a}var Et=new k["b"]("welcome_place");var Ct="https://slack.com/get";var St="utm_medium=in-prod&utm_source=in-prod&utm_campaign=d_in-prod_in-prod_all__welcome";var wt=function e(t){var a;var i=t.workflowTask,s=t.workflowTask,o=s.state,l=s.user_task_id;Object(r["useEffect"])(function(){Object(dt["isSSB"])()&&o!==H["d"].Completed&&t.updateActionStateAndReload({userTaskId:l,state:H["d"].Completed})});var c=Object(dt["getOperatingSystem"])();var u={body:Et.rt("<b>Download the desktop app</b> to get back to Slack swiftly",{note:"Completed state copy for first action step. Use bolding for the most important information. Note: No punctuation at the end."}),button:Et.rt("Get Slack for {operatingSystem}",{note:"Button label for pending state of the desktop app download card. operatingSystem refers to the current operating system that the user is on (Mac, Windows, or Linux).",operatingSystem:kt(c)}),tip:null};var d={body:Et.rt("<b>Downloaded the desktop app</b>",{note:"Completed state copy for first action step. Use bolding for the most important information. Note: No punctuation at the end."}),button:Et.rt("Completed",{note:"Button label for completed state of all tasks."}),tip:null};var p=(a={},qe()(a,H["d"].Pending,u),qe()(a,H["d"].InProgress,u),qe()(a,H["d"].Completed,d),a);var m=We(p,o,"button");var h=We(p,o,"body");var v=function e(){o===H["d"].Pending&&t.updateActionStateAndReload({userTaskId:l,state:H["d"].InProgress});window.open(Ct+"?"+St)};return n.a.createElement(se,{workflowTask:i,onButtonClicked:v,buttonCopy:m,bodyCopy:h,buttonQa:"wp_desktop_app_button"})};var jt={updateActionStateAndReload:w["m"]};function It(){return{}}var Tt=Object(y["connect"])(It,jt)(wt);var At=a(18);var Nt=a(4686);var Pt=a(1282);var Mt=Object(At["b"])("Opens the upload profile photo modal",function(e,t,a){e(Object(z["openModal"])({element:n.a.createElement(Nt["a"],{file:a&&a.file,mode:Pt["a"].PHOTO_UPLOAD})}))});Mt.meta={name:"openUploadProfilePictureModal",key:"actionsOpenUploadProfilePhotoModalOpenUploadProfilePictureModal",description:"Opens the upload profile photo modal"};Mt.propTypes=null;var Dt=Mt;var xt=new k["b"]("welcome_place");var Rt=function e(t){var a;var r=t.workflowTask;var i=xt.rt("<b>Add a profile photo</b> so your teammates know who\u2019s who.");var s=xt.rt("Add Photo");var o={body:i,button:s,tip:null};var l={body:xt.rt("<b>Added a profile photo</b>"),button:null,tip:null};var c=(a={},qe()(a,H["d"].Pending,o),qe()(a,H["d"].InProgress,o),qe()(a,H["d"].Completed,l),a);var u=We(c,r.state,"button");var d=We(c,r.state,"body");return n.a.createElement(se,{workflowTask:r,onButtonClicked:t.openUploadProfilePhotoModal,buttonCopy:u,bodyCopy:d,buttonQa:"wp_add_profile_picture_button"})};var Ft={openUploadProfilePhotoModal:Dt};var Lt=Object(y["connect"])(null,Ft)(Rt);var Ut=a(1670);var Bt=a(1238);var qt=a(1058);var Gt=a(9);var Ht=a(443);var Wt=a(1050);var Vt=a(1989);var Kt=a(495);var zt=a(1991);var Qt=a(89);var Yt=a(87);var Jt=a(4873);var Xt=a(1299);var Zt=a(1150);var $t=a(750);var ea=a(590);var ta=a(521);var aa=a(433);var ra=a(515);var na=a(1189);var ia=a(445);var sa=a(838);var oa=function e(t){var a=t.msg;return n.a.createElement(Xt["a"],{className:"welcome-message"},n.a.createElement(Zt["a"],{msg:a},n.a.createElement($t["a"],{light:n.a.createElement(ea["a"],{msg:a})},n.a.createElement(ta["a"],{msg:a}),"\xa0\xa0",n.a.createElement(sa["a"],{msg:a,clickable:true}),n.a.createElement("br",null),n.a.createElement(aa["a"],{msg:a}),n.a.createElement(ra["a"],{msg:a}),n.a.createElement(na["a"],{msg:a}),n.a.createElement(ia["b"],{msg:a}))))};var la=oa;var ca=a(4875);var ua=new k["b"]("welcome_place");var da=function(e){b()(t,e);function t(){c()(this,t);return m()(this,v()(t).apply(this,arguments))}d()(t,[{key:"render",value:function e(){var t=this.props,a=t.channelName,r=t.isLoading,i=t.lastMessages,s=t.onChannelLinkClicked;var o=0!==i.length;var l=_()("padding_left_150 padding_right_150 padding_top_100 padding_bottom_100",{border_bottom:!r&&!o});var c=ua.t("Say hi, post a GIF, go wild. The world (or at least this channel) is your oyster.");var u=n.a.createElement("div",{className:"welcome-place-channel-preview padding_100 border_top border_bottom"},i.map(function(e){return n.a.createElement(la,{msg:e,key:e.ts})}));return n.a.createElement("div",{className:"sk_primary_background welcome-place-send-message-header"},n.a.createElement("div",{className:l},n.a.createElement("div",{className:"display_flex justify_content_between"},n.a.createElement("span",null,n.a.createElement("strong",null,a)),n.a.createElement(Pe["a"],{onClick:function e(){return s("view_channel")}},ua.t("View channel"))),n.a.createElement("p",{className:"welcome-place-channel-description"},c)),r?n.a.createElement("div",{className:"display_flex align_items_center justify_content_center full_height padding_100 border_top border_bottom"},n.a.createElement(Qt["a"],null)):o&&u)}}]);return t}(r["Component"]);da.displayName="MessageSuggestionsHeader";var pa=function e(t){var a=Object(S["o"])(t)||Object(Yt["a"])(t);var r=Object(He["e"])(t,a);var n=Object(Gt["getDisplayNameForChannel"])(t,r);return{channelId:a,channelName:n,clogger:Object(C["a"])({state:t}),pageViewingSessionId:Object(S["m"])(t)}};var ma={joinAndSwitchToChannel:Bt["a"]};var ha=Object(y["connect"])(pa,ma)(da);var va=a(1925);var fa=a(1995);var ba=a(5075);var ga=new k["b"]("welcome_place");var _a=function e(t){var a=t.channelName,r=t.inputRef,i=t.sendMessage,s=t.onTextChange;return n.a.createElement("div",{className:"display_flex align_items_center margin_bottom_50"},n.a.createElement(va["c"],{className:"welcome-place-message-input margin_right_100",enableEmojiButton:true,enableFileButton:false,enableMentionButton:true,enableSendButton:false,enableSnippetCreation:false,enableJumbomoji:false,placeholder:Object(fa["a"])({channelName:a,isSelfDm:false}),ref:r,sendMessage:i,onTextChange:s,enableComposerButton:true}),n.a.createElement(J["d"],{type:"primary",onClick:i,className:"align_self_start nudge_top_2"},ga.t("Send")))};var ya=function e(t){var a=Object(S["o"])(t);var r=Object(He["e"])(t,a);return{channelName:Object(Gt["getDisplayNameForChannel"])(t,r),clogger:Object(C["a"])({state:t}),pageViewingSessionId:Object(S["m"])(t)}};var Oa=Object(y["connect"])(ya)(_a);var ka=new k["b"]("welcome_place");var Ea=function e(t){var a=t.channelId,i=t.channelName,s=t.fetchHistory,o=t.sendWelcomePlaceInputMessage,l=t.isChannelNonEmpty,c=t.joinAndSwitchToChannel,u=t.clogger,d=t.pageViewingSessionId,p=t.needToRefetchMessages,m=t.lastMessages;var h=Object(r["useState"])(true),v=Y()(h,2),f=v[0],b=v[1];var g=Object(r["useState"])(false),_=Y()(g,2),y=_[0],O=_[1];var k=Object(r["useState"])(p),E=Y()(k,2),C=E[0],S=E[1];Object(r["useEffect"])(function(){if(!p||y)return;O(true);s({channelId:a,type:"channel"}).then(function(){O(false);S(false)})},[p,y,s,a]);var w=Object(r["useRef"])(null);var j=function e(){var t,a;return(null===(t=w.current)||void 0===t?void 0:t.getWrappedInstance)?w.current.getWrappedInstance():null===(a=w)||void 0===a?void 0:a.current};var T=function e(t){var a=j();if(a){a.value(Object(Ht["b"])(t));a.setCursorAtEnd()}};var A=function e(){var t,r,n;if(!f){var i=j();var s=null===(n=null===(t=i)||void 0===t?void 0:(r=t).getContents)||void 0===n?void 0:n.call(r);var l=new Kt["a"](s.contents);o({text:Object(Wt["a"])(s),channelOrMemberId:a,delta:l});u.track("WELCOME_PLACE",{contexts:{ui_context:{action:I["UiAction"].CLICK,ui_element:I["UiElement"].WELCOME_PLACE_ACTION_SEND_MESSAGE,ui_properties:{element_type:I["ElementType"].BUTTON,element_name:"send_channel_message"}},welcome_place:{welcome_session_id:d}}})}};var N=function e(t){c({channelId:a});u.track("WELCOME_PLACE",{contexts:{ui_context:{action:I["UiAction"].CLICK,ui_element:I["UiElement"].WELCOME_PLACE_ACTION_SEND_MESSAGE,ui_properties:{element_type:I["ElementType"].LINK,element_name:t}},welcome_place:{welcome_session_id:d}}})};var P=function e(t){return b(0===t.length)};return n.a.createElement("div",{className:"welcome-place-send-message-card"},n.a.createElement(ha,{isLoading:C,onChannelLinkClicked:N,lastMessages:m}),n.a.createElement("div",{className:"welcome-place-send-message-pane padding_left_150 padding_right_150 padding_top_100 padding_bottom_100"},n.a.createElement("p",{className:"welcome-place-send-message-card--header-subtitle"},ka.rt("Your message will be posted in {channelName}.",{channelName:n.a.createElement(Pe["a"],{onClick:function e(){return N("channel_header")}},i)})),n.a.createElement(Oa,{inputRef:w,sendMessage:A,onTextChange:P}),n.a.createElement(zt["a"],{hasMessagesToRender:l,prefillMessageInput:T})))};var Ca=3;var Sa=function e(t){var a=Object(S["o"])(t);var r=Object(He["e"])(t,a);var n=Object(Gt["getDisplayNameForChannel"])(t,r);var i=Object(Ut["b"])(t,a,Ca),s=i.messages,o=i.slice;var l=s.length>0;return{channelId:a,channelName:n,isChannelNonEmpty:l,clogger:Object(C["a"])({state:t}),pageViewingSessionId:Object(S["m"])(t),lastMessages:s,needToRefetchMessages:!o||!o.reachedEnd}};var wa={sendWelcomePlaceInputMessage:w["l"],fetchHistory:Vt["a"],joinAndSwitchToChannel:Bt["a"]};var ja=Object(y["connect"])(Sa,wa)(Ea);var Ia=new k["b"]("welcome_place");var Ta=function e(t){var a;var r=t.workflowTask,i=t.sendMessageTaskType,s=t.isChannelEmpty,o=t.channelId,l=t.openDmBrowserModal,c=t.joinAndSwitchToChannel,u=t.items,d=t.channelName,p=t.onboardingWorkflowType,m=t.featureNewxp3279;var h=null;i===H["c"].BROWSE&&(h=Ia.rt("<b>Send a message</b> to a teammate and say hello."));var v=u.find(function(e){return"workflow"===e.type});var f=1===K(v,r.subtype);if(i===H["c"].CHANNEL){h=Ia.rt("<b>Send a message</b> to let your team know you\u2019re here.");f&&s&&(h=Ia.rt("<b>Send a message</b> to get the conversation started."))}m&&"creator_onboarding"===p&&(h=n.a.createElement("b",null,Ia.t("Start using Slack for the #{channelName} project.",{channelName:d})));var b={body:h,button:Ia.t("Send a Message"),tip:null};var g={body:Ia.rt("<b>Sent a message</b>"),button:null,tip:null};var _=(a={},qe()(a,H["d"].Pending,b),qe()(a,H["d"].InProgress,b),qe()(a,H["d"].Completed,g),a);var y=We(_,r.state,"button");var k=We(_,r.state,"body");if(r.state!==H["d"].Completed){if(i===H["c"].BROWSE)return n.a.createElement(se,{workflowTask:r,onButtonClicked:l,bodyCopy:k,buttonCopy:y});if(i===H["c"].CHANNEL){if(f||"creator_onboarding"===p)return n.a.createElement(se,{workflowTask:r,onButtonClicked:O["noop"],buttonCopy:y,bodyCopy:k,togglableContents:"creator_onboarding"===p&&!f},n.a.createElement(ja,null));var E=function e(){return c({channelId:o})};return n.a.createElement(se,{workflowTask:r,onButtonClicked:E,buttonCopy:y,bodyCopy:k})}}return n.a.createElement(se,{workflowTask:r,onButtonClicked:O["noop"],buttonCopy:y,bodyCopy:k})};function Aa(e){var t=Object(S["p"])(e)||H["c"].BROWSE;var a={sendMessageTaskType:t,items:Object(S["k"])(e),onboardingWorkflowType:null,featureNewxp3279:Object(i["isFeatureEnabled"])(e,"feature_newxp_3279")};if(t===H["c"].BROWSE)return a;var r=Object(S["o"])(e);if(t===H["c"].CHANNEL){var n=r;var s=Object(He["e"])(e,n);var o=s?Object(Gt["getName"])(s):null;return te()(te()({},a),{channelId:n,channelName:o,isChannelEmpty:!Object(Ut["a"])(e,n),onboardingWorkflowType:Object(S["j"])(e)})}return a}var Na={openDmBrowserModal:qt["a"],joinAndSwitchToChannel:Bt["a"]};var Pa=Object(y["connect"])(Aa,Na)(Ta);var Ma=a(218);var Da=a.n(Ma);var xa=a(4751);var Ra=function(e){b()(t,e);function t(){c()(this,t);return m()(this,v()(t).apply(this,arguments))}d()(t,[{key:"render",value:function e(){var t=this.props,a=t.memberId,r=t.children,i=t.className;return n.a.createElement("div",{className:_()("invites-carousel__card",i)},n.a.createElement("div",{className:"invites-carousel__card_avatar"},n.a.createElement(T["b"],{userId:a||"",size:56,isInteractive:false})),r)}}]);return t}(r["Component"]);Ra.displayName="InvitesCarouselCard";function Fa(e){return{clogger:Object(C["a"])({state:e})}}var La=Object(y["connect"])(Fa)(Ra);var Ua=a(141);var Ba=a(923);var qa=a(177);var Ga=a(456);var Ha=function(e){b()(t,e);function t(){c()(this,t);return m()(this,v()(t).apply(this,arguments))}d()(t,[{key:"render",value:function e(){return n.a.createElement("div",{"data-qa":"invite_carousel_validation_error",className:"display_flex align_items_baseline sk_raspberry_red invites-carousel__form_error"},n.a.createElement(Ga["a"],{type:"info-circle",size:"inherit",className:"margin_right_25"}),n.a.createElement("div",{"data-qa":"invite_carousel_validation_error_text",className:"flex_one caption"},this.props.errorText))}}]);return t}(r["Component"]);Ha.displayName="InvitesCarouselInviteFormError";var Wa=a(5073);var Va=new k["b"]("welcome_place");var Ka=function(e){b()(t,e);function t(e){var a;c()(this,t);a=m()(this,v()(t).call(this,e));a.isNameValid=function(e){return!qa["f"].test(e)};a.onUsernameChange=function(e){a.setState(function(){return{username:e,nameFieldError:!a.isNameValid(e)&&a.props.featureNewxp3279?Va.t("Mostly, names can\u2019t contain punctuation. (Apostrophes, spaces, and periods are fine.)"):""}})};a.onEmailChange=function(e){a.setState(function(){return{email:e,emailFieldError:Object(Ba["c"])(e).errorMessage}})};a.onFormSubmit=function(e){return Object(ve["a"])(he()(a),void 0,void 0,regeneratorRuntime.mark(function t(){var a=this;var r,n,i,s,o,l,c,u,d,p,m,h,v,f;return regeneratorRuntime.wrap(function t(b){while(1)switch(b.prev=b.next){case 0:e.preventDefault();i=this.props,s=i.saveInvite,o=i.logger,l=i.featureNewxp3279,c=i.clogFormSubmit;u=this.state,d=u.username,p=u.email,m=u.isSubmitting,h=u.emailFieldError,v=u.nameFieldError;if(!m){b.next=5;break}return b.abrupt("return");case 5:if(!(h||v)){b.next=8;break}this.setState(function(){return{isSubmitting:false,wasSubmitted:true}});return b.abrupt("return");case 8:this.setState(function(){return{isSubmitting:true,wasSubmitted:true}});c();b.prev=10;b.next=13;return s(p,d);case 13:f=b.sent;if(!((null===(r=f)||void 0===r?void 0:r.ok)&&f.invites&&(null===(n=f.invites[0])||void 0===n?void 0:n.ok))){b.next=20;break}b.next=17;return this.props.loadAndSetWelcomePlaceData();case 17:this.setState(function(){return{isSubmitting:false,wasSubmitted:false,emailFieldError:"",nameFieldError:"",email:"",username:""}},function(){a.nameInputRef.current.focus()});b.next=21;break;case 20:this.setState(function(){return{isSubmitting:false,emailFieldError:Object(Ba["c"])("foo").errorMessage}});case 21:b.next=27;break;case 23:b.prev=23;b.t0=b["catch"](10);this.setState(function(){return{isSubmitting:false,emailFieldError:l?Va.t("Something went wrong."):""}});o.error("WELCOME_PLACE","Invite saving failed",b.t0);case 27:case"end":return b.stop()}},t,this,[[10,23]])}))};a.nameInputRef=n.a.createRef();a.state={username:"",email:"",isSubmitting:false,wasSubmitted:false,emailFieldError:"",nameFieldError:""};return a}d()(t,[{key:"render",value:function e(){var t=this.state,a=t.username,r=t.email,i=t.isSubmitting,s=t.wasSubmitted,o=t.emailFieldError,l=t.nameFieldError;var c=this.props.featureNewxp3279;var u=s&&!!l;var d=s&&!!o;var p=s&&(i||!!o);return n.a.createElement("form",{onSubmit:this.onFormSubmit,noValidate:true,className:"display_flex flex_direction_column"},n.a.createElement(Ua["a"],{id:"invite_carousel_username_field",name:"username",className:"full_width invites-carousel__form_input",placeholder:c?Va.t("Name"):"",size:"medium","data-qa":"invite_carousel_username_field",value:a,onChange:this.onUsernameChange,inputRef:this.nameInputRef,showError:false,errorText:u?"this is invisible error":""}),u&&n.a.createElement(Ha,{errorText:l}),n.a.createElement(Ua["a"],{id:"invite_carousel_email_field",className:"full_width invites-carousel__form_input",name:"email",type:"email",placeholder:c?Va.t("Email"):"",size:"medium","data-qa":"invite_carousel_email_field",spellCheck:false,value:r,onChange:this.onEmailChange,showError:false,errorText:d?"this is invisible error":""}),d&&n.a.createElement(Ha,{errorText:o}),n.a.createElement(J["b"],{id:"submit_btn",className:"align_self_end","data-style":"expand-right","data-qa":"submit_button",type:"primary",disabled:p,"aria-disabled":p,loading:i,size:"medium",htmlType:"submit"},c?Va.t("Invite"):""))}}]);return t}(r["Component"]);Ka.displayName="InvitesCarouselInviteForm";function za(e){return{logger:Object(Ne["a"])({state:e}),featureNewxp3279:Object(i["isFeatureEnabled"])(e,"feature_newxp_3279")}}function Qa(e){return{saveInvite:function t(a,r){return e(Object(w["k"])({email:a,username:r}))},loadAndSetWelcomePlaceData:function t(){return e(Object(w["e"])())}}}var Ya=Object(y["connect"])(za,Qa)(Ka);var Ja=a(5070);var Xa=a.n(Ja);var Za=a(17);var $a=a(418);var er=a(5080);var tr=new k["b"]("welcome_place");var ar=function(e){b()(t,e);function t(e){var a;c()(this,t);a=m()(this,v()(t).call(this,e));a.onMouseEnterName=function(){a.setState(function(){return{isNameTooltipVisible:true}})};a.onMouseLeaveName=function(){a.setState(function(){return{isNameTooltipVisible:false}})};a.state={isNameTooltipVisible:false};return a}d()(t,[{key:"render",value:function e(){var t=this;var a=this.props,r=a.member,i=a.isCurrentUser,s=a.featureNewxp3279,o=a.inviteStatus;var l=this.state.isNameTooltipVisible;var c=Object(Za["getMemberProfileFieldDisplayName"])(r)||Object(Za["getMemberProfileFieldFirstName"])(r)||Object(Za["getMemberRealName"])(r);var u=c.split(/\s+/);var d=u[0];var p=u.slice(1).join(" ");var m="";s&&(i?m=tr.t("(you)"):"pending"===o?m=tr.rt("Pending"):"joined"===o&&(m=tr.rt("Joined")));return n.a.createElement("div",null,n.a.createElement("div",{className:"display_flex flex_direction_column align_items_center position_relative"},n.a.createElement(Xa.a,{attachment:"top left",targetAttachment:"top left",constraints:[{to:"window",attachment:"together"}],renderTarget:function e(a){return n.a.createElement("div",{className:"invites-carousel__card_inner",ref:a},n.a.createElement("div",{className:_()("bold overflow_ellipsis invites-carousel__card_username",{"invites-carousel__card_username--with-presence":"pending"!==o}),onMouseEnter:t.onMouseEnterName},"pending"!==o&&n.a.createElement($a["a"],{className:"invites-carousel__card_presence",memberId:r.id}),n.a.createElement("span",null,d)),!!p&&n.a.createElement("div",{className:"bold overflow_ellipsis invites-carousel__card_username",onMouseEnter:t.onMouseEnterName},p))},renderElement:function e(a){return n.a.createElement("div",{style:{display:l?"block":"none"},ref:a,className:_()("invites-carousel__card_name_tooltip bold",{"invites-carousel__card_name_tooltip--for-double-line":!!p}),onMouseLeave:t.onMouseLeaveName},c)}}),n.a.createElement("div",{className:"invites-carousel__card_subtext"},m)))}}]);return t}(r["Component"]);ar.displayName="InvitesCarouselMember";function rr(e){return{clogger:Object(C["a"])({state:e}),featureNewxp3279:Object(i["isFeatureEnabled"])(e,"feature_newxp_3279")}}var nr=Object(y["connect"])(rr)(ar);var ir=a(5034);var sr=function(e){b()(t,e);function t(){c()(this,t);return m()(this,v()(t).apply(this,arguments))}d()(t,[{key:"render",value:function e(){var t=this.props,a=t.direction,r=t.onClick;var i="right"===a?"arrow-large-right":"arrow-large-left";return n.a.createElement("div",{className:"invites-carousel__arrow invites-carousel__arrow--"+a},"right"===a&&n.a.createElement("div",{className:"invites-carousel__arrow_overlay invites-carousel__arrow_overlay--right"}),n.a.createElement(J["c"],{type:"button",className:"invites-carousel__arrow_button",onClick:r},n.a.createElement(Ga["a"],{type:i,size:"inherit"})),"left"===a&&n.a.createElement("div",{className:"invites-carousel__arrow_overlay invites-carousel__arrow_overlay--left"}))}}]);return t}(r["Component"]);sr.displayName="InviteCarouselArrow";var or=4;var lr=function(e){b()(t,e);function t(e){var a;c()(this,t);a=m()(this,v()(t).call(this,e));a.placeholderCards=Array.from(Array(or)).map(function(e,t){return t});return a}d()(t,[{key:"render",value:function e(){var t=this.props.className;return n.a.createElement("div",{className:"invites-carousel__placeholders_container "+(t||"")},n.a.createElement("div",{className:"invites-carousel__placeholders_container__overlay"}),this.placeholderCards.map(function(e){return n.a.createElement(La,{key:"placeholder_card_"+e,className:"invites-carousel__card--placeholder"})}))}}]);return t}(r["Component"]);lr.displayName="InviteCarouselShadowCards";var cr=a(5040);var ur=20;var dr=80;var pr=function(e){b()(t,e);function t(e){var a;c()(this,t);a=m()(this,v()(t).call(this,e));a.getDimensions=function(){if(!a.sliderElRef.current)return null;var e=a.sliderElRef.current.parentElement.getBoundingClientRect().width;var t=a.sliderElRef.current.scrollWidth;return{sliderParentWidth:e,sliderWidth:t}};a.calculateArrowsVisibility=function(e,t){var a=t.sliderParentWidth,r=t.sliderWidth;return{hasLeftArrow:r>a&&e>0,hasRightArrow:r>a&&a+e<r}};a.recalculatePositions=function(){var e=a.getDimensions();if(!e)return;var t=e.sliderParentWidth,r=e.sliderWidth;var n=r>t?Math.min(a.state.sliderDiff,r-t):0;a.setState(function(){return te()({sliderDiff:n},a.calculateArrowsVisibility(n,e))})};a.onWindowResizeHandler=Object(O["debounce"])(a.recalculatePositions,200);a.setArrowsVisibility=function(){var e=a.getDimensions();if(!e)return;a.setState(function(t){return a.calculateArrowsVisibility(t.sliderDiff,e)})};a.onClickLeftArrow=function(){a.slideContainer("backward")};a.onClickRightArrow=function(){a.slideContainer("forward")};a.sliderElRef=n.a.createRef();a.state={sliderDiff:0,hasLeftArrow:false,hasRightArrow:false};return a}d()(t,[{key:"componentDidMount",value:function e(){window.addEventListener("resize",this.onWindowResizeHandler);this.setArrowsVisibility()}},{key:"componentWillUnmount",value:function e(){window.removeEventListener("resize",this.onWindowResizeHandler)}},{key:"componentDidUpdate",value:function e(t){var a=this;if(this.props.invitedMembers.length>t.invitedMembers.length){var r=this.getDimensions();if(!r)return;var n=r.sliderParentWidth,i=r.sliderWidth;var s=Math.max(0,i-n);this.setState(function(){return te()({sliderDiff:s},a.calculateArrowsVisibility(s,r))})}}},{key:"slideContainer",value:function e(t){var a=this;var r=this.getDimensions();if(!r)return;var n=r.sliderParentWidth,i=r.sliderWidth;var s=this.state.sliderDiff;var o=0;"backward"===t&&(o=Math.max(0,s-n+dr));"forward"===t&&(o=Math.min(s+n-dr,i-n));this.setState(function(){return te()({sliderDiff:o},a.calculateArrowsVisibility(o,r))})}},{key:"render",value:function e(){var t=this.props,a=t.currentMember,r=t.invitedMembers,i=t.clogFormSubmit;var s=this.state,o=s.sliderDiff,l=s.hasLeftArrow,c=s.hasRightArrow;var u=[{member:a,inviteStatus:"joined"}].concat(Da()(r));return n.a.createElement("div",{className:"invites-carousel"},n.a.createElement("div",{className:"invites-carousel__cards_container"},n.a.createElement("div",{className:"invites-carousel__cards_container__members_wrapper"},n.a.createElement("div",{className:"invites-carousel__cards_container__members"},l&&n.a.createElement(sr,{direction:"left",onClick:this.onClickLeftArrow}),n.a.createElement("div",{className:"invites-carousel__inner",ref:this.sliderElRef,style:{transform:"translate3d(-"+o+"px, 0, 0)"}},u.map(function(e){var t=e.member,r=e.inviteStatus;return n.a.createElement(La,{key:t.id,memberId:t.id},n.a.createElement(nr,{member:t,inviteStatus:r,isCurrentUser:t.id===a.id}))})),c&&n.a.createElement(sr,{direction:"right",onClick:this.onClickRightArrow})),n.a.createElement(lr,{className:"invites-carousel__placeholders_container--smallscreen"})),r.length<ur&&n.a.createElement(La,{className:"invites-carousel__card--form"},n.a.createElement(Ya,{clogFormSubmit:i}))),n.a.createElement(lr,null))}}]);return t}(r["Component"]);pr.displayName="InvitesCarousel";var mr=a(486);var hr=a(1052);var vr=a(257);var fr=new k["b"]("welcome_place");var br=function(e){b()(t,e);function t(e){var a;c()(this,t);a=m()(this,v()(t).call(this,e));a.onClickInviteMore=function(){a.props.clogClick("invite_more");a.props.openInviteModal()};a.startCopiedMessageTimer=function(){clearTimeout(a.copiedMessageTimer);a.copiedMessageTimer=setTimeout(function(){a.isComponentMounted&&a.setState(function(){return{isCopiedMessageVisible:false}})},4e3)};a.getSharedInviteLink=function(){return Object(ve["a"])(he()(a),void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function e(a){while(1)switch(a.prev=a.next){case 0:this.props.clogClick("get_shared_invite");if(!this.state.inviteLink){a.next=6;break}Object(vr["writeText"])(this.state.inviteLink);this.startCopiedMessageTimer();this.setState(function(){return{isLoadingInviteLink:false,isLoadingError:false,isCopiedMessageVisible:true}});return a.abrupt("return");case 6:this.setState(function(){return{isLoadingInviteLink:true,isLoadingError:false,isCopiedMessageVisible:false}});a.next=9;return this.props.getInviteLink();case 9:t=a.sent;if(this.isComponentMounted){if(t){Object(vr["writeText"])(t);this.startCopiedMessageTimer()}this.setState(function(){return{isLoadingInviteLink:false,inviteLink:t||"",isLoadingError:!t,isCopiedMessageVisible:!!t}})}case 11:case"end":return a.stop()}},e,this)}))};a.isComponentMounted=true;a.state={inviteLink:"",isCopiedMessageVisible:false,isLoadingError:false,isLoadingInviteLink:false};return a}d()(t,[{key:"componentWillUnmount",value:function e(){clearTimeout(this.copiedMessageTimer);this.isComponentMounted=false}},{key:"render",value:function e(){var t=this;var a=this.props,r=a.featureNewxp3279,i=a.isWorkflowCompleted;var s=this.state,o=s.isLoadingError,l=s.isLoadingInviteLink,c=s.isCopiedMessageVisible;if(i)return n.a.createElement("div",{className:"display_flex justify_content_between"},n.a.createElement("span",null,n.a.createElement("b",null,r?fr.rt("Team assembled"):"")),n.a.createElement(mr["a"],{onClick:this.onClickInviteMore},r?fr.t("Invite more"):""));return n.a.createElement("div",{className:"display_flex flex_direction_column"},n.a.createElement("div",{className:"bold margin_bottom_25"},r?fr.rt("Assemble the team"):""),n.a.createElement("div",null,r?fr.rt("Who do you regularly talk to? You can add them below, or <a>share an invite link</a>.",{},function(e){var a=e.text;return n.a.createElement(mr["a"],{onClick:t.getSharedInviteLink},a)}):"",n.a.createElement("div",{className:"inline_block margin_left_50 caption"},l&&n.a.createElement(Ga["a"],{type:"spinner",animation:"spin",inline:true}),o&&n.a.createElement(n.a.Fragment,null,n.a.createElement(Ga["a"],{type:"info-circle",className:"sk_raspberry_red margin_right_25",inline:true}),r?fr.rt("Error"):""),c&&n.a.createElement(n.a.Fragment,null,n.a.createElement(Ga["a"],{type:"check-small-bold",className:"sk_lilypad_green",inline:true}),r?fr.rt("Link copied!"):""))))}}]);return t}(r["Component"]);br.displayName="InvitesCarouselHeader";function gr(e){return{openInviteModal:function t(){return e(Object(hr["a"])())},getInviteLink:function t(){return e(Object(w["d"])())}}}var _r=Object(y["connect"])(null,gr)(br);var yr=new k["b"]("welcome_place");var Or=function(e){b()(t,e);function t(e){var a;c()(this,t);a=m()(this,v()(t).call(this,e));a.clogClick=function(e){var t=e.elementName,r=e.isLink;a.props.clogger.track(I["EventId"].WELCOME_PLACE,{contexts:{ui_context:{action:I["UiAction"].CLICK,ui_element:I["UiElement"].WELCOME_PLACE_ACTION_INVITE_USERS,ui_properties:{element_type:r?I["ElementType"].LINK:I["ElementType"].BUTTON,element_name:t}},welcome_place:{welcome_session_id:a.props.pageViewingSessionId}}})};a.onClickDone=function(){a.clogClick({elementName:"invites_done"});a.setState(function(){return{isMarkingTaskCompleted:true}},function(){a.props.markInvitesTaskAsComplete().catch(function(){a.setState(function(){return{isMarkingTaskCompleted:false}})})})};a.state={isMarkingTaskCompleted:false};return a}d()(t,[{key:"render",value:function e(){var t=this;var a=this.props,r=a.workflowTask,i=a.currentMember,s=a.invitedMembers,o=a.featureNewxp3279;var l=this.state.isMarkingTaskCompleted;var c=s.length>0;var u=r.state===H["d"].Completed;return n.a.createElement(se,{workflowTask:r,bodyCopy:n.a.createElement(_r,{isWorkflowCompleted:u,featureNewxp3279:o,clogClick:function e(a){return t.clogClick({elementName:a,isLink:true})}})},!u&&n.a.createElement(n.a.Fragment,null,n.a.createElement(pr,{currentMember:i,invitedMembers:s,featureNewxp3279:o,clogFormSubmit:function e(){return t.clogClick({elementName:"invites_form_submit"})}}),c&&n.a.createElement("div",{className:"display_flex justify_content_end margin_top_150"},n.a.createElement(J["b"],{loading:l,type:"outline",size:"medium",onClick:this.onClickDone},n.a.createElement(X["b"],{type:"check-small-bold",size:"inherit",className:"margin_right_25"}),n.a.createElement("span",null,o?yr.t("Done"):"")))))}}]);return t}(r["Component"]);Or.displayName="InvitesCarouselWorkflowCard";function kr(e){var t=Object(S["e"])(e);var a=t.slice().reverse().map(function(t){var a=t.user_id,r=t.invite_status;return{member:Object(M["e"])(e,a,true),inviteStatus:r}});a.sort(function(e,t){if(e.inviteStatus===t.inviteStatus)return 0;return"joined"===e.inviteStatus?-1:1});return{clogger:Object(C["a"])({state:e}),currentMember:Object(M["b"])(e),invitedMembers:a,featureNewxp3279:Object(i["isFeatureEnabled"])(e,"feature_newxp_3279"),pageViewingSessionId:Object(S["m"])(e)}}function Er(e){return{markInvitesTaskAsComplete:function t(){return e(Object(w["g"])())}}}var Cr=Object(y["connect"])(kr,Er)(Or);var Sr=new k["b"]("welcome_place");var wr=function(e){b()(t,e);function t(){c()(this,t);return m()(this,v()(t).apply(this,arguments))}d()(t,[{key:"render",value:function e(){var t=this.props,a=t.workflowItems,r=t.progress,i=t.featureNewxp3279,s=t.onboardingWorkflowType;var o=i&&"creator_onboarding"===s?"":Sr.rt("<b>Let\u2019s get you set up.</b> Follow the steps below to find your people, say hello, and get up and running.");var l=a.slice().filter(W["a"]).sort(V);return n.a.createElement(Ue,{subtitle:o},n.a.createElement("div",{className:"border_bottom padding_bottom_100 caption"},Sr.rt("<span>{completedStepsCount} of {totalStepsCount}</span> complete",{completedStepsCount:r.completed,totalStepsCount:r.total},function(e){var t=e.text;return n.a.createElement("span",{className:"bold"},t)})),n.a.createElement("div",{className:"c-workflow-item-container"},l.map(function(e){var t=e.subtype;var a=null;t===H["e"].SeeWelcomePlace?a=n.a.createElement(tt,{key:"workflow_item_card_"+t,workflowTask:e}):t===H["e"].JoinChannel?a=n.a.createElement(Ye,{key:"workflow_item_card_"+t,workflowTask:e}):t===H["e"].SendMessage?a=n.a.createElement(Pa,{key:"workflow_item_card_"+t,workflowTask:e}):t===H["e"].EnableNotifications?a=n.a.createElement(ct,{key:"workflow_item_card_"+t,workflowTask:e}):t===H["e"].AddAppFileManagement?a=n.a.createElement(_t,{key:"workflow_item_card_"+t,workflowTask:e}):t===H["e"].DownloadDesktopApp?a=n.a.createElement(Tt,{key:"workflow_item_card_"+t,workflowTask:e}):t===H["e"].AddProfilePhoto?a=n.a.createElement(Lt,{key:"workflow_item_card_"+t,workflowTask:e}):t===H["e"].InviteUsers?a=n.a.createElement(Cr,{key:"workflow_item_card_"+t,workflowTask:e}):t===H["e"].WelcomeMessage?a=n.a.createElement(Fe,{key:"workflow_item_card_"+t,workflowTask:e}):t===H["e"].AccountSetup&&(a=n.a.createElement(pe,{key:"workflow_item_card_"+t,workflowTask:e}));return a})))}}]);return t}(r["Component"]);wr.displayName="WorkflowItemContainer";function jr(e){return{progress:Object(S["r"])(e),onboardingWorkflowType:Object(S["j"])(e),featureNewxp3279:Object(i["isFeatureEnabled"])(e,"feature_newxp_3279")}}var Ir=Object(y["connect"])(jr)(wr);var Tr=a(3523);var Ar=function(e){b()(t,e);function t(){c()(this,t);return m()(this,v()(t).apply(this,arguments))}d()(t,[{key:"render",value:function e(){var t=this.props,a=t.className,r=t.hasNoPadding,i=t.hasNoBorder,s=t.hasNoBackground;var o=_()("welcome-card extra-rounded overflow_hidden",a,{padding_125:!r,bordered:!i,sk_white_bg:!s});return n.a.createElement("div",{className:o},this.props.children)}}]);return t}(r["Component"]);Ar.displayName="WelcomeCard";var Nr=a(3525);var Pr=new k["b"]("welcome_place");var Mr=function(e){b()(t,e);function t(e){var a;c()(this,t);a=m()(this,v()(t).call(this,e));a.showPlayer=function(){var e=a.state.showPlayer;var t=a.props,r=t.clogger,n=t.pageViewingSessionId;a.setState(function(){return{showPlayer:!e}});r.track("WELCOME_PLACE",{contexts:{ui_context:{action:I["UiAction"].CLICK,ui_element:I["UiElement"].WELCOME_PLACE_VIDEO,ui_properties:{element_value:"start",element_type:I["ElementType"].VIDEO,element_name:"Team Chat & Channels | Slack Features"}},welcome_place:{welcome_session_id:n}}})};a.containerRef=n.a.createRef();a.state={showPlayer:false};return a}d()(t,[{key:"componentDidMount",value:function e(){this.props.addElementToVisibilityLogging({element:this.containerRef.current,uiContext:{ui_element:I["UiElement"].WELCOME_PLACE_VIDEO}})}},{key:"componentWillUnmount",value:function e(){this.props.removeElementFromVisibilityLogging(this.containerRef.current)}},{key:"render",value:function e(){var t=this.state.showPlayer;var a=this.props,r=a.youtubeEmbedUrl,i=a.className,s=a.isFlexpaneOpen;var o=_()("video-player__title-card video-player__content",{"player-is-active":t});var l=_()("video-player__iframe__container video-player__content",{"player-is-active":t});var c=_()("video-player",{flexpaneOpen:s});var u=r+"&modestbranding=1&rel=0";var d=n.a.createElement(n.a.Fragment,null,n.a.createElement("h1",{className:"sk_white_always margin_bottom_50"},Pr.rt("Welcome to Slack!")),n.a.createElement("p",{className:"sk_white_always margin_bottom_75"},Pr.t("Slack helps your team communicate, connect, and do your best work together.")),n.a.createElement(J["d"],{onClick:this.showPlayer},Pr.t("Watch Video",{note:"Button copy for call-to-action on video module.",fallbackHash:"5ccd18c8a398d9f789a385b18ecb4678bd622f21"})));return n.a.createElement(Ar,{className:i,hasNoPadding:true,hasNoBorder:true,hasNoBackground:true},n.a.createElement("link",{rel:"preload",href:u+"&autoplay=1",as:"document"}),n.a.createElement("div",{className:c,ref:this.containerRef},n.a.createElement("div",{className:"video-player__container"},n.a.createElement("div",{className:o,role:"region"},d),n.a.createElement("div",{className:l},n.a.createElement("iframe",{className:"full_height",style:{height:"100%",width:"100%"},src:u+(t?"&autoplay=1":""),frameBorder:"0",allowFullScreen:true,title:Pr.t("Team Chat & Channels | Slack Features",{note:"A video by Slack, on Youtube, that explains Slack features."})})))))}}]);return t}(r["Component"]);Mr.displayName="VideoCard";function Dr(e){var t=Object(C["a"])({state:e});return{clogger:t,pageViewingSessionId:Object(S["m"])(e),isFlexpaneOpen:Object(Z["j"])(e)}}var xr={};var Rr=Object(y["connect"])(Dr,xr)(re()(Mr));var Fr=a(4696);var Lr=a(121);var Ur=a(299);var Br=a(54);var qr=a(1881);var Gr=new k["b"]("welcome_place");var Hr=function(e){b()(t,e);function t(){var e;c()(this,t);e=m()(this,v()(t).apply(this,arguments));e.startIm=function(){var t=e.props,a=t.member,r=t.clogger,n=t.idx,i=t.pageViewingSessionId;e.props.startImByMemberId({memberId:a.id});r.track("WELCOME_PLACE",{contexts:{ui_context:{action:I["UiAction"].CLICK,ui_element:I["UiElement"].WELCOME_PLACE_PROFILE_CARD,ui_properties:{element_value:a.id,element_index:n,element_type:I["ElementType"].BUTTON}},welcome_place:{welcome_session_id:i}}})};return e}d()(t,[{key:"render",value:function e(){var t=this.props,a=t.member,i=t.type,s=t.channels,o=t.teamDomain;var l=a.profile;var c=i?n.a.createElement("p",{className:"member-card__content"},Gr.t("Invited you to Slack",{fallbackHash:"9064cf8eb6c496f261172fb4d28eb5e38c796b7e"})):null;var u=1===s.length?Gr.t("A channel they're in: ",{fallbackHash:"0b353ec7cd241b45e73b94a056984793bedee7a4"}):Gr.t("A few channels they're in: ",{fallbackHash:"0b353ec7cd241b45e73b94a056984793bedee7a4"});var d=s.map(function(e,t){var a=Object(Gt["constructAbsoluteChannelPermalink"])({channelId:e,teamDomain:o});return n.a.createElement(r["Fragment"],{key:"fragment-"+e},n.a.createElement(Pe["a"],{key:"link-"+e,href:a,className:"no_wrap"},n.a.createElement(Ur["a"],{key:"entity-"+e,channelId:e})),t+1===s.length?".":", ")});return n.a.createElement(Ar,{className:"member-card-container flex_one",hasNoPadding:true},n.a.createElement("div",{className:"member-card"},n.a.createElement(Br["c"],{tip:Gr.rt("Message {name}",{name:l.real_name}),position:"top"},n.a.createElement(Pe["a"],{onClick:this.startIm,className:"member-card__top-link"},n.a.createElement("div",{className:"member-card__top"},n.a.createElement(T["a"],{size:56,isInteractive:false,imageUrl:l.image_72,imageUrl2x:l.image_192,className:"member-card__avatar"}),n.a.createElement("div",{className:"flex_one"},n.a.createElement(qr["a"],{member:a,className:"member-card__name"}),c)))),n.a.createElement("div",{className:"member-card__bottom"},n.a.createElement("p",{className:"member-card__content"},u,d))))}}]);return t}(r["Component"]);Hr.displayName="MemberCard";function Wr(e,t){var a=t.id;var r=Object(M["e"])(e,a);var n=Object(ut["getTeamDomain"])(Object(Je["k"])(e,Object(Za["getTeamIdForMember"])(e,r)));var i=Object(C["a"])({state:e});return{teamDomain:n,member:r,clogger:i,pageViewingSessionId:Object(S["m"])(e)}}var Vr={startImByMemberId:Lr["startImByMemberId"]};var Kr=Object(y["connect"])(Wr,Vr)(Hr);var zr=a(3527);var Qr=new k["b"]("welcome_place");var Yr=function(e){b()(t,e);function t(e){var a;c()(this,t);a=m()(this,v()(t).call(this,e));a.showMoreUsers=function(){var e=a.props,t=e.clogger,r=e.pageViewingSessionId;a.setState(function(){return{showMore:true}});t.track("WELCOME_PLACE",{contexts:{ui_context:{action:I["UiAction"].CLICK,ui_element:I["UiElement"].WELCOME_PLACE_MEMBERS_SHOW_ALL,ui_properties:{element_type:I["ElementType"].LINK}},welcome_place:{welcome_session_id:r}}})};a.openPeopleBrowser=function(){var e=a.props,t=e.clogger,r=e.pageViewingSessionId;t.track("WELCOME_PLACE",{contexts:{ui_context:{action:I["UiAction"].CLICK,ui_element:I["UiElement"].WELCOME_PLACE_MEMBERS_SHOW_MEMBER_DIRECTORY,ui_properties:{element_type:I["ElementType"].LINK}},welcome_place:{welcome_session_id:r}}});a.props.openPeopleBrowser()};a.containerRef=n.a.createRef();a.state={showMore:false,initialUsersCards:[],additionalUserCards:[],suggestOrgChart:false};return a}d()(t,[{key:"componentDidMount",value:function e(){this.props.addElementToVisibilityLogging({element:this.containerRef.current,uiContext:{ui_element:I["UiElement"].WELCOME_PLACE_MEMBERS_BLOCK},visibilityRatio:.33})}},{key:"componentWillUnmount",value:function e(){this.props.removeElementFromVisibilityLogging(this.containerRef.current)}},{key:"render",value:function e(){var t=this;var a=this.props.className;var r=this.state,i=r.initialUsersCards,s=r.additionalUserCards,o=r.suggestOrgChart,l=r.showMore;var c=function e(){var a=l&&o?Qr.t("View directory"):Qr.t("Show more");if(s.length){var r=t.showMoreUsers;if(l&&!o)return null;l&&o&&(r=t.openPeopleBrowser);return n.a.createElement("div",{className:"align_center margin_top_100 member-card__show-more-link"},n.a.createElement(Pe["a"],{onClick:r},a),n.a.createElement(X["b"],{type:"chevron-down"}))}return null};return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:_()("member-card-grid",a,{"member-card-grid-1":1===i.length,"member-card-grid-2":2===i.length}),ref:this.containerRef},i.map(function(e,t){return n.a.createElement(Kr,{id:e.id,idx:t,key:e.id,type:e.type,channels:e.channels})}),l&&s.map(function(e,t){return n.a.createElement(Kr,{id:e.id,idx:t+i.length,key:e.id,channels:e.channels})})),c())}}],[{key:"getDerivedStateFromProps",value:function e(t){var a=Object(O["chunk"])(t.userCards,6);var r=a.shift()||[];var n=[];a.length&&(n=Object(O["chunk"])(Object(O["flatten"])(a),12));var i=n.shift()||[];var s=!!n.length;return{initialUsersCards:r,additionalUserCards:i,suggestOrgChart:s}}}]);return t}(r["Component"]);Yr.displayName="MemberRow";function Jr(e){var t=Object(C["a"])({state:e});return{clogger:t,pageViewingSessionId:Object(S["m"])(e)}}function Xr(e){return{openPeopleBrowser:function t(){e(Object(Fr["a"])())}}}var Zr=Object(y["connect"])(Jr,Xr)(re()(Yr));var $r=a(2764);var en=a(77);var tn=function(e){b()(t,e);function t(e){var a;c()(this,t);a=m()(this,v()(t).call(this,e));a.clogLinkClick=function(e){var t=e.url,r=e.index,n=e.query,i=e.articleId;a.props.clogger.track("WELCOME_PLACE",{contexts:{ui_context:{action:I["UiAction"].CLICK,ui_element:I["UiElement"].WELCOME_PLACE_HELP_LINK,ui_properties:{element_type:I["ElementType"].LINK,element_value:i.toString(),element_index:r},article_url:t,search_terms:n,locale:Object(en["a"])()},welcome_place:{welcome_session_id:a.props.pageViewingSessionId}}})};a.containerRef=n.a.createRef();return a}d()(t,[{key:"componentDidMount",value:function e(){this.props.addElementToVisibilityLogging({element:this.containerRef.current,uiContext:{ui_element:I["UiElement"].WELCOME_PLACE_HELP_BLOCK},visibilityRatio:.5})}},{key:"componentWillUnmount",value:function e(){this.props.removeElementFromVisibilityLogging(this.containerRef.current)}},{key:"render",value:function e(){var t=this.props.defaultArticlesData;return n.a.createElement("div",{ref:this.containerRef,className:"welcome-place__search_container"},n.a.createElement($r["a"],{defaultArticlesData:t,onOpenLink:this.clogLinkClick,noTopMargin:true}))}}]);return t}(r["Component"]);tn.displayName="HelpSearchCard";function an(e){return{clogger:Object(C["a"])({state:e}),pageViewingSessionId:Object(S["m"])(e)}}var rn=Object(y["connect"])(an)(re()(tn));var nn=a(3529);var sn=.8;var on=function(e){b()(t,e);function t(e){var a;c()(this,t);a=m()(this,v()(t).call(this,e));a.elementsForLogging=[];a.addElementForLogging=function(e){a.elementsForLogging.push(e);requestAnimationFrame(function(){a.props.scrollContainerEl&&a.checkElementsForClogging(a.props.scrollContainerEl)})};a.removeElementFromLogging=function(e){if(!e)return;var t=Object(O["findIndex"])(a.elementsForLogging,function(t){return t.element===e});-1!==t&&a.elementsForLogging.splice(t,1)};a.onScrollListenerDebounced=Object(O["debounce"])(function(e){a.checkElementsForClogging(e.target)},1e3);return a}d()(t,[{key:"componentDidMount",value:function e(){this.setupEventListeners()}},{key:"componentDidUpdate",value:function e(t){var a=this;if(t.scrollContainerEl!==this.props.scrollContainerEl){t.scrollContainerEl&&t.scrollContainerEl.removeEventListener("scroll",this.onScrollListenerDebounced);this.setupEventListeners();requestAnimationFrame(function(){a.props.scrollContainerEl&&a.checkElementsForClogging(a.props.scrollContainerEl)})}}},{key:"componentWillUnmount",value:function e(){this.props.scrollContainerEl&&this.props.scrollContainerEl.removeEventListener("scroll",this.onScrollListenerDebounced)}},{key:"checkElementsForClogging",value:function e(t){var a=this;var r=t.getClientRects()[0];if(!r)return;this.elementsForLogging.slice().forEach(function(e){var t=e.element,n=e.uiContext,i=e.visibilityRatio;if(!t)return;var s=t.getClientRects()[0];if(!s)return;var o=i||sn;var l=s.top<r.top&&s.bottom>r.bottom;var c=s.top>r.top&&s.bottom<r.bottom;var u=0;l||c?u=1:s.top<r.top&&s.bottom>r.top&&s.bottom<r.bottom?u=(s.bottom-r.top)/(s.bottom-s.top):s.bottom>r.bottom&&s.top>r.top&&s.top<r.bottom&&(u=(r.bottom-s.top)/(s.bottom-s.top));if(u>=o){a.removeElementFromLogging(t);a.props.clogger.track("WELCOME_PLACE",{contexts:{ui_context:te()(te()({},n),{action:I["UiAction"].IMPRESSION}),welcome_place:{welcome_session_id:a.props.pageViewingSessionId}}})}})}},{key:"setupEventListeners",value:function e(){if(!this.props.scrollContainerEl)return;this.props.scrollContainerEl.addEventListener("scroll",this.onScrollListenerDebounced)}},{key:"render",value:function e(){return n.a.createElement(ae.Provider,{value:{scrollContainerEl:this.props.scrollContainerEl,addElementToVisibilityLogging:this.addElementForLogging,removeElementFromVisibilityLogging:this.removeElementFromLogging}},this.props.children)}}]);return t}(r["Component"]);on.displayName="VisibilityLoggerProviderBase";var ln=Object(y["connect"])(function(e){return{clogger:Object(C["a"])({state:e}),pageViewingSessionId:Object(S["m"])(e)}})(on);function cn(){return function(e){var t=function(t){b()(a,t);function a(e){var t;c()(this,a);t=m()(this,v()(a).call(this,e));t.state={scrollContainer:null};return t}d()(a,[{key:"render",value:function t(){var a=this;return n.a.createElement(ln,{scrollContainerEl:this.state.scrollContainer},n.a.createElement(e,te()({},this.props,{setScrollContainerElement:function e(t){a.setState(function(){return{scrollContainer:t}})}})))}}]);return a}(r["Component"]);t.displayName="WithVisibilityLoggerProvider";t.displayName="WithVisibilityLoggerProvider("+(e.displayName||"Component")+")";return t}}var un=a(40);var dn=a.n(un);var pn=a(211);var mn=a(159);var hn=a(4527);var vn=a(1472);var fn=a(189);var bn=new k["b"]("welcome_place");var gn=function(e){b()(t,e);function t(){var e;c()(this,t);e=m()(this,v()(t).apply(this,arguments));e.navigateToBenefitsPage=function(t){t.preventDefault();e.props.navigateToBenefitsPage()};return e}d()(t,[{key:"render",value:function e(){var t=this;var a=this.props,r=a.containerRef,i=a.teamPlan,s=a.expirationMoment;return n.a.createElement("div",{className:"welcome-trial-info",ref:r},n.a.createElement("div",{className:"welcome-trial-info__content"},n.a.createElement(X["b"],{type:"slack",className:"margin_right_75 welcome-trial-info__icon",size:"inherit"}),n.a.createElement("div",null,n.a.createElement("div",{className:"bold"},bn.rt("Your workspace is on a free trial of {selectedSlackPlan}",{selectedSlackPlan:Object(vn["a"])(i)})),n.a.createElement("div",null,bn.rt("You can try out <a>all the features of {selectedSlackPlan}</a> for free until {trialEndDate}.",{selectedSlackPlan:Object(vn["a"])(i),trialEndDate:Object(fn["i"])(s.valueOf(),{excludeYear:s.year()===dn()().year()})},function(e){var a=e.text;return n.a.createElement(Pe["a"],{onClick:t.navigateToBenefitsPage},a)})))))}}]);return t}(r["Component"]);gn.displayName="WelcomePlaceTrialInfoBannerJoiner";var _n=new k["b"]("welcome_place");var yn=function(e){b()(t,e);function t(){var e;c()(this,t);e=m()(this,v()(t).apply(this,arguments));e.navigateToBenefitsPage=function(t){t.preventDefault();e.props.navigateToBenefitsPage()};return e}d()(t,[{key:"render",value:function e(){var t=this;var a=this.props,r=a.containerRef,i=a.teamPlan,s=a.expirationMoment,o=a.featureNewxp3279;return n.a.createElement("div",{className:"welcome-trial-info-creator",ref:r},n.a.createElement("div",{className:"welcome-trial-info-creator__image_container"},n.a.createElement("img",{className:"welcome-trial-info-creator__image",src:cdn_url+"/7b1c12/img/welcome-place/wp-trial-banner-icon.svg",alt:""})),n.a.createElement("div",{className:"welcome-trial-info-creator__text_container"},n.a.createElement("div",{className:"welcome-trial-info-creator__title"},o?_n.rt("You\u2019re on a free trial of {selectedSlackPlan}",{selectedSlackPlan:Object(vn["a"])(i)}):""),n.a.createElement("div",{className:"welcome-trial-info-creator__substitle"},o?_n.rt("From now until {trialEndDate}, you can try out <a>all the features of the {selectedSlackPlan}</a>.",{selectedSlackPlan:Object(vn["a"])(i),trialEndDate:Object(fn["i"])(s.valueOf(),{excludeYear:s.year()===dn()().year()})},function(e){var a=e.text;return n.a.createElement(Pe["a"],{onClick:t.navigateToBenefitsPage},a)}):"")))}}]);return t}(r["Component"]);yn.displayName="WelcomePlaceTrialInfoBannerCreator";var On=function(e){b()(t,e);function t(e){var a;c()(this,t);a=m()(this,v()(t).call(this,e));a.navigateToBenefitsPage=function(){a.props.clogger.track(mn["q"],{contexts:{ui_context:{step:I["UiStep"].TRACTOR_DIALOG_COMPLETED_STEP,step_variant:"std"===a.props.product?"standard_trial":"plus_trial",action:I["UiAction"].CLICK,ui_properties:{element_type:I["ElementType"].LINK,element_name:"learn_more_about_features"}}}});a.props.setPrimaryView({id:"Ppaid-benefits"})};a.containerRef=n.a.createRef();return a}d()(t,[{key:"componentDidMount",value:function e(){var t=this.props,a=t.product,r=t.addElementToVisibilityLogging,n=t.variant;if("std"!==a&&"plus"!==a)return;r({element:this.containerRef.current,uiContext:{ui_element:I["UiElement"].WELCOME_PLACE_TRIAL_BLOCK,step_variant:"std"===a?"standard_trial":"plus_trial",ui_properties:{element_name:"trial_block_"+n}},visibilityRatio:.33})}},{key:"componentWillUnmount",value:function e(){this.props.removeElementFromVisibilityLogging(this.containerRef.current)}},{key:"render",value:function e(){var t=this.props,a=t.expiration,r=t.product,i=t.variant,s=t.featureNewxp3279;var o;"std"===r?o=mn["m"].Standard:"plus"===r&&(o=mn["m"].Plus);if(!o)return null;var l=dn()(a,"YYYY-MM-DD");return"joiner"===i?n.a.createElement(gn,{expirationMoment:l,product:r,teamPlan:o,containerRef:this.containerRef,navigateToBenefitsPage:this.navigateToBenefitsPage}):n.a.createElement(yn,{expirationMoment:l,product:r,teamPlan:o,containerRef:this.containerRef,navigateToBenefitsPage:this.navigateToBenefitsPage,featureNewxp3279:s})}}]);return t}(r["Component"]);On.displayName="WelcomePlaceTrialInfo";var kn={setPrimaryView:pn["a"]};function En(e){var t=Object(C["a"])({state:e});return{clogger:t,pageViewingSessionId:Object(S["m"])(e),featureNewxp3279:Object(i["isFeatureEnabled"])(e,"feature_newxp_3279")}}var Cn=Object(y["connect"])(En,kn)(re()(On));var Sn=a(5031);var wn=new k["b"]("welcome_place");var jn=function(e){b()(t,e);function t(){c()(this,t);return m()(this,v()(t).apply(this,arguments))}d()(t,[{key:"render",value:function e(){var t=this.props,a=t.clientTheme,r=t.isWorkflowCompleted,i=t.featureNewxp3279;var s={completed:{light:cdn_url+"/ff9c2/img/welcome-place/youre-all-set.light.gif",dark:cdn_url+"/ff9c2/img/welcome-place/youre-all-set.dark.gif"},inProgress:{light:cdn_url+"/ff9c2/img/welcome-place/welcome.light.gif",dark:cdn_url+"/ff9c2/img/welcome-place/welcome.dark.gif"}};var o=s[r?"completed":"inProgress"]["dark"===a?"dark":"light"];var l="";var c="";if(i)if(r){l=wn.t("You\u2019re all set!");c=wn.rt("You\u2019ve assembled your team and started your first project in Slack.<br></br>Want to learn more? <a>See more Slack tips</a>",null,function(e){var t=e.text,a=e.tag;if("a"===a)return n.a.createElement(Pe["a"],{href:"https://slack.com/slack-tips?utm_source=creatorwelcomeplace&utm_medium=inprod&utm_content=completionbanner&utm_campaign=inprod",target:"_blank"},t);if("br"===a)return n.a.createElement("br",null);return null})}else{l=wn.t("Let\u2019s set up your team.");c=wn.rt("Welcome to Slack")}return n.a.createElement("div",{className:"welcome-place-header__container"},n.a.createElement("img",{className:"welcome-place-header__img",src:o,alt:""}),n.a.createElement("div",{className:"welcome-place-header__text"},n.a.createElement("h2",{className:"welcome-place-header__text_header"},l),n.a.createElement("p",{className:_()("welcome-place-header__text_sub",{"welcome-place-header__text_sub--large":!r})},c)))}}]);return t}(r["Component"]);jn.displayName="WelcomeHeaderWithImg";var In=new k["b"]("welcome_place");var Tn=function(e){b()(t,e);function t(e){var a;c()(this,t);a=m()(this,v()(t).call(this,e));a.containerRef=n.a.createRef();return a}d()(t,[{key:"componentDidMount",value:function e(){var t=this.props,a=t.pageEntryPoint,r=t.pageViewingSessionId,n=t.setScrollContainerElement;this.props.maybeRefreshWelcomePlaceData();this.props.clogger.track("WELCOME_PLACE",{contexts:{ui_context:{action:I["UiAction"].IMPRESSION,ui_element:I["UiElement"].WELCOME_PLACE_PAGE},welcome_place:{welcome_session_id:r,entry_point:a}}});this.props.setPageEntryPoint(H["b"].Unknown);n(this.containerRef.current)}},{key:"componentWillUnmount",value:function e(){var t=this.props.pageViewingSessionId;this.props.clogger.track("WELCOME_PLACE",{contexts:{ui_context:{action:I["UiAction"].EXIT_VIEW,ui_element:I["UiElement"].WELCOME_PLACE_PAGE},welcome_place:{welcome_session_id:t}}});this.props.regeneratePageViewingSessionId()}},{key:"render",value:function e(){var t,a;var r=this.props,i=r.items,s=r.clientTheme,o=r.progress,l=r.featureNewxp3279;var c=i.find(function(e){return"trial"===e.type});var u="creator_onboarding"===(null===(a=null===(t=i.find(function(e){return"workflow"===e.type}))||void 0===t?void 0:t.content.workflow.tasks[0])||void 0===a?void 0:a.type);return n.a.createElement("div",{ref:this.containerRef,className:_()("p-welcome-place overflow_x_scroll flex_one sk_off_white_bg",{"welcome-place-page-container--typography":!Object(E["a"])(),"welcome-place-page-container--border-inset":!Object(E["a"])(),"welcome-place-page-container--height-fix":Object(E["a"])(),full_height:!Object(E["a"])()}),"data-qa":"welcome-place-page-container"},n.a.createElement("div",{className:"welcome-place-header-gradient"},u&&!!c&&n.a.createElement(Cn,{variant:"creator",product:c.content.trial.level,expiration:c.content.trial.expiration_date}),u?n.a.createElement(jn,{clientTheme:s,isWorkflowCompleted:o.total===o.completed,featureNewxp3279:l}):n.a.createElement("h2",{className:"padding_top_200 padding_left_125"},In.rt("Welcome to Slack"))),n.a.createElement(q,null),i.map(function(e,t){switch(e.type){case"video":return n.a.createElement(Ue,{key:""+e.type+t,title:In.t("Learn more about Slack",{note:"Title for the new section in the Get Started page that includes the intro to channels video and the Help Center search bar."})},n.a.createElement(Rr,{youtubeEmbedUrl:e.content.video.url}));case"workflow":return n.a.createElement(Ir,{key:""+e.type+t,workflowItems:e.content.workflow.tasks});case"user_cards":return n.a.createElement(Ue,{key:""+e.type+t,title:In.t("See who else is here"),subtitle:In.t("You can message people directly, or check out the channels they\u2019re in.",{note:"Subtitle for the teammates module that shares the two main ways to connect."})},n.a.createElement(Zr,{userCards:e.content.user_cards}));case"help_center_search":return n.a.createElement(Ue,{key:""+e.type+t,title:In.t("Have a question? We\u2019re here to help.",{note:"Title for the Help Center search bar in the Get Started page."})},n.a.createElement(rn,{defaultArticlesData:Object(O["get"])(e,"content.help_center_search.articles",null)}));case"trial":return u?null:n.a.createElement(Cn,{key:""+e.type+t,variant:"joiner",product:e.content.trial.level,expiration:e.content.trial.expiration_date});default:return null}}))}}]);return t}(r["Component"]);Tn.displayName="WelcomePlace";function An(e){return{items:Object(S["k"])(e),clogger:Object(C["a"])({state:e}),pageEntryPoint:Object(S["l"])(e),pageViewingSessionId:Object(S["m"])(e),firstClientLaunch:Object(S["t"])(e),clientTheme:Object(G["getClientTheme"])(e),progress:Object(S["r"])(e),featureNewxp3279:Object(i["isFeatureEnabled"])(e,"feature_newxp_3279")}}function Nn(e){return{maybeRefreshWelcomePlaceData:function t(){e(Object(w["j"])())},setPageEntryPoint:function t(){e(j["g"].apply(void 0,arguments))},regeneratePageViewingSessionId:function t(){e(Object(j["d"])())},setAnimationState:function t(a){e(Object(j["h"])(a))}}}var Pn=Object(y["connect"])(An,Nn)(cn()(Tn));var Mn=a(30);var Dn=a(0);var xn=a(148);var Rn=a(73);var Fn=Object(P["b"])(function(e){return e&&e.unreadsView&&e.unreadsView.newUnreadMsgCount});Fn.meta={name:"getNewUnreadMsgCount",key:"unreadsViewStoreSelectorsGetNewUnreadMsgCount"};var Ln=Object(P["b"])(function(e){return e&&e.unreadsView&&e.unreadsView.refreshId});Ln.meta={name:"getRefreshId",key:"unreadsViewStoreSelectorsGetRefreshId"};var Un=Object(P["b"])(function(e){return e&&e.unreadsView&&e.unreadsView.focusRequestedThreadKey});Un.meta={name:"getFocusRequestedThreadKey",key:"unreadsViewStoreSelectorsGetFocusRequestedThreadKey"};var Bn=a(1061);var qn=a(1168);var Gn=a(150);var Hn=a(90);var Wn=a(1671);var Vn=a(1689);var Kn=a(1631);var zn=a(1996);var Qn=a(2702);var Yn=a(2703);var Jn=a(392);var Xn=a(1997);var Zn=a(1452);var $n=a(1530);var ei=a(22);var ti=a(596);var ai=a(38);var ri=a(21);var ni=a(180);var ii=a(485);var si=a(235);var oi=a(519);var li=a(152);var ci=a(250);var ui=a(2752);var di=a(419);var pi=a(221);function mi(e){var t;var a;var r;if(Object(i["isFeatureEnabled"])(e,"feature_incremental_unread_counts")){t=Object(o["getCountsPerChannel"])(e);a=Object(O["keys"])(t);r=Object(o["hasCountsPerChannelChanged"])(e)}else{a=Object(di["g"])();a=a.filter(function(t){return!Object(pi["isChannelMutedById"])(e,t)});r=Object(di["h"])();t={};a.forEach(function(a){var r=Object(He["e"])(e,a);t[r.id]={unreadCnt:Object(Gt["getUnreadCount"])(r),unreadHighlightCnt:Object(Gt["getUnreadHighlightCount"])(r)}})}return{countsPerChannel:t,unreadChannelIds:a,unreadChannelsAreKnown:r}}var hi=mi;var vi=new k["b"]("all_unreads");var fi=function(e){b()(t,e);function t(e){var a;c()(this,t);a=m()(this,v()(t).call(this,e));a.onUndo=a.onUndo.bind(he()(a));a.onRefresh=a.onRefresh.bind(he()(a));a.onEnter=a.onEnter.bind(he()(a));a.generateMessage();a.state={allowRefreshButton:e.visible};a.containerRef=n.a.createRef();return a}d()(t,[{key:"componentDidMount",value:function e(){this.keyCommands=new ci["a"];this.keyCommands.bindAll([{keys:"enter",handler:this.onEnter}])}},{key:"componentDidUpdate",value:function e(t){var a=this;t.visible&&!this.props.visible?this.generateMessage():!t.visible&&this.props.visible&&(this.buttonDelayTimer=setTimeout(function(){a.setState(function(){return{allowRefreshButton:true}})},1e3))}},{key:"componentWillUnmount",value:function e(){clearTimeout(this.buttonDelayTimer);this.keyCommands&&this.keyCommands.reset()}},{key:"onEnter",value:function e(t){var a=this.props.visible;var r=Object(E["a"])()?this.props.userAttentionIsOnChat:Object(si["f"])();if(!a||!r)return;if(!this.shouldShowNewButton())return;var n=t.target;if(Object(oi["a"])(n))return;var i="BODY"===n.nodeName;var s=this.containerRef.current&&this.containerRef.current.contains(n);(i||s)&&this.onRefresh()}},{key:"onRefresh",value:function e(){this.props.refreshAllUnreads();this.setState(function(){return{allowRefreshButton:false}})}},{key:"onUndo",value:function e(){this.props.undoMarkAllRead();this.setState(function(){return{allowRefreshButton:false}})}},{key:"generateMessage",value:function e(){var t=this.props,a=t.teamId,r=t.preferredSkinTone,n=t.emojiMode;this.message=Object(ui["a"])({locale:Object(ti["a"])({teamId:a}),preferredSkinTone:r,emojiMode:n});var i=new Image;i.src=this.message.emojiUrl}},{key:"shouldShowNewButton",value:function e(){var t=this.state.allowRefreshButton;var a=this.props.totalUnreads;return t&&a>0}},{key:"render",value:function e(){var t=this.props,a=t.visible,r=t.showUndo,i=t.totalUnreads;if(!a)return null;var s=this.shouldShowNewButton();var o=_()("p-unreads_view__empty",{"p-unreads_view__empty--show_new":s});var l=function e(t){var a=t.tag,r=t.text;if("enter-icon"===a)return n.a.createElement(X["b"],{type:"enter",size:"inherit"});return n.a.createElement("b",null,r)};return n.a.createElement("div",{className:o,ref:this.containerRef},n.a.createElement("div",{className:"p-unreads_view__empty__message",role:"alert"},n.a.createElement("img",{className:"p-unreads_view__empty__image",src:this.message.emojiUrl,alt:""}),n.a.createElement("div",null,this.message.lineOne,n.a.createElement("br",null),this.message.lineTwo)),s&&n.a.createElement(n.a.Fragment,null,n.a.createElement(J["d"],{onClick:this.onRefresh},vi.t("{totalUnreads, plural, =1 {# New Message} other {# New Messages} }",{totalUnreads:i})),n.a.createElement("div",{className:"p-unreads_view__empty__button_caption"},Object(dt["isMac"])()?vi.rt("<b>Return</b> <enter-icon></enter-icon> to show",null,l):vi.rt("<b>Enter</b> <enter-icon></enter-icon> to show",null,l))),r&&n.a.createElement("div",{className:"p-unreads_view__empty__undo"},n.a.createElement("div",{className:"p-unreads_view__empty__undo_inner"},vi.t("You marked all your channels read."),n.a.createElement(li["a"],{onClick:this.onUndo,className:"p-unreads_view__empty__undo_button"},vi.t("Undo")))))}}]);return t}(r["Component"]);fi.displayName="EmptyState";function bi(e){var t=hi(e),a=t.countsPerChannel;var r=Object(O["sum"])(Object(O["map"])(a,"unreadCnt"));return{teamId:Object(ri["b"])(e),preferredSkinTone:Object(ai["k"])(e,"preferred_skin_tone")||"1",emojiMode:Object(ni["h"])(e,{forceDisplay:true}),totalUnreads:r,userAttentionIsOnChat:Object(ii["e"])(e)}}var gi=Object(y["connect"])(bi)(fi);var _i=a(286);var yi=a(370);var Oi=a(448);var ki=a(1324);var Ei=a(449);var Ci=a(393);var Si=a(29);var wi=a(440);var ji=a(31);var Ii=Object(Si["a"])("Expand a channel in All Unreads",function(e,t,a){var r=Object(ai["j"])(t());if(!r.includes(a))return;var n=Object(O["without"])(r,a);e(Object(wi["b"])({pref:"unread_collapsed_channels",value:n.join(",")}));e(Object(ji["b"])({method:"unread.expand",args:{channel:a},reason:"all_unreads_expand"}))});Ii.meta={name:"expandChannel",key:"fetchersUnreadsApiExpandChannel",description:"Expand a channel in All Unreads"};Ii.propTypes=Dn["default"].string.isRequired;var Ti=Object(Si["a"])("Collapse a channel in All Unreads",function(e,t,a){var r=Object(ai["j"])(t());if(r.includes(a))return;var n=[].concat(Da()(r),[a]);e(Object(wi["b"])({pref:"unread_collapsed_channels",value:n.join(",")}));e(Object(ji["b"])({method:"unread.collapse",args:{channel:a},reason:"all_unreads_collapse"}))});Ti.meta={name:"collapseChannel",key:"fetchersUnreadsApiCollapseChannel",description:"Collapse a channel in All Unreads"};Ti.propTypes=Dn["default"].string.isRequired;var Ai=a(107);var Ni=a(886);var Pi=a(1672);var Mi=a(1673);var Di=a(1473);var xi=a(783);var Ri=a(1998);var Fi=a(922);var Li=a(1618);var Ui=a(2004);var Bi=a(1236);var qi=a(1453);var Gi=a(755);var Hi=a(80);var Wi=a(906);var Vi=a(1157);var Ki=a(1158);var zi=a(41);var Qi=a(1416);var Yi=a(1075);var Ji=a(1448);function Xi(e,t){var a=[];var r=[];var n=[];var i=true;Object(O["forEach"])(e,function(e){var s=e.channelId,o=e.channelType,l=e.start,c=e.end,u=e.timestamps,d=e.sliceEnd,p=e.reachedEnd,m=e.messages,h=e.lastRead,v=e.initialLastRead,f=e.markedMsgCount,b=e.collapsed;var g=u.filter(function(e){var a=m[e];if(Object(zi["isHidden"])(a))return false;if(Object(zi["isJoinLeave"])(a)&&!Object(zi["isInviteForCurrentUser"])(a,t))return false;if(Object(zi["isTempMsg"])(a))return false;return true});var _=g.filter(function(e){return e>l&&e<=c});var y=g.filter(function(e){return e>c});var k=_.length&&!b;var E=_&&_[0]&&!Object(Yi["a"])(_[0]);var C=h>l&&Object(O["find"])(_,function(e){var a=m[e];return Object(zi["isMessageUnread"])(a,h,t)});a.push("header-"+s);n.push({key:"header-"+s,index:r.length});r.push({type:"header",channelId:s,channelType:o,end:c,initialLastRead:v,markedMsgCount:f,messageCount:_.length,messageCountAfterLatest:y.length,messageCountIsExact:p,collapsed:b});if(k&&!E){a.push("spacer-top-"+s);r.push({type:"spacer"})}if(k){var S=_.map(function(e){return m[e]});var w=Object(Ji["a"])(S),j=w.rollups;_.forEach(function(e,t){var n=_[t-1];var i=e===C;var o=n&&Object(Qi["a"])(n);var l=Object(Qi["a"])(e);if(E&&o!==l){a.push("day-divider-"+s+"-"+l);r.push({type:"day-divider",dayTs:l,unread:i})}else if(i){a.push("unread-divider-"+s);r.push({type:"unread-divider"})}a.push("message-"+s+"-"+e);r.push({type:"message",channelId:s,ts:e,prevTs:n,isFirstMessage:0===t,rollup:j[e]})})}if(!p&&!b){var I=d||l;a.push("loading-"+s+"-"+I);r.push({type:"loading",channelId:s,oldest:I});i=false;return false}if(k)if(y.length){a.push("show-newer-"+s);r.push({type:"show-newer",channelId:s,count:y.length})}else{a.push("spacer-bottom-"+s);r.push({type:"spacer",isBottom:true})}return true});if(i){a.push("footer");r.push({type:"footer"})}return{keys:a,rows:r,stickyItems:n}}var Zi=new k["b"]("all_unreads");var $i=Object(At["b"])("Build an aria-label for an All Unreads header row",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelId,n=a.messageCount,i=a.messageCountAfterLatest,s=a.markedMsgCount,o=a.messageCountIsExact,l=a.collapsed;var c=t();var u=Object(Gt["getDisplayNameForChannel"])(c,Object(He["e"])(c,r));var d=n>0;var p=i>0;var m=s>0;var h;h=d||!m||p?!d&&p||l?o?Zi.t("{messageCount} new {messageCount, plural, =1 {message} other {messages}}",{messageCount:i+n}):Zi.t("New messages"):o?Zi.t("{messageCount, plural, =1 {# message} other {# messages}}",{messageCount:n}):Zi.t("{messageCount, plural, =1 {#+ message} other {#+ messages}}",{messageCount:n}):Zi.t("{messageCount, plural, =1 {# message} other {# messages}} marked read",{messageCount:s});return u+" ("+h+")"});$i.meta={name:"makeHeaderLabel",key:"componentsUnreadsViewUtilityMakeHeaderLabelMakeHeaderLabel",description:"Build an aria-label for an All Unreads header row"};$i.propTypes={channelId:Dn["default"].string.isRequired,messageCount:Dn["default"].number,messageCountAfterLatest:Dn["default"].number,markedMsgCount:Dn["default"].number,messageCountIsExact:Dn["default"].bool,collapsed:Dn["default"].bool};var es=$i;var ts=a(166);var as=a(237);var rs=new k["b"]("all_unreads");var ns={messageCount:0,messageCountIsExact:true};var is=function(e){b()(t,e);function t(){c()(this,t);return m()(this,v()(t).apply(this,arguments))}d()(t,[{key:"getMessageCountText",value:function e(){var t=this.props,a=t.messageCountIsExact,r=t.messageCount;if(!r)return"";if(a)return rs.t("{messageCount, plural, =1 {# message} other {# messages}}",{messageCount:r});return rs.t("{messageCount, plural, =1 {#+ message} other {#+ messages}}",{messageCount:r})}},{key:"renderButton",value:function e(t){return n.a.createElement(J["d"],{onClick:this.props.markRead,type:"outline",size:"small",className:"p-unreads_view__header__mark_read_button","data-qa":"all_unreads_header_mark_read",key:"MARK-READ"},t)}},{key:"renderContent",value:function e(){var t=this;var a=this.props.selected;if(a)return rs.rt('<span className="p-unreads_view__header__kb_instructions">Press <key>Esc</key> to </span><button>Mark as Read</button>',null,function(e){var a=e.text,r=e.tag;if("button"===r)return t.renderButton(a);if("key"===r)return n.a.createElement("span",{className:"c-keyboard_key c-keyboard_key--slim"},a);return null});var r=rs.t("Mark as Read");return this.renderButton(r)}},{key:"render",value:function e(){var t=_()("p-unreads_view__header__kb_instructions_container");return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"p-unreads_view__header__message_count"},this.getMessageCountText()),n.a.createElement("span",{className:t},this.renderContent()))}}]);return t}(r["PureComponent"]);is.displayName="HeaderDefault";is.defaultProps=ns;var ss=is;var os=new k["b"]("all_unreads");var ls={messageCount:0,messageCountIsExact:true,messageCountAfterLatest:0,markedMsgCount:0,totalUnreadCount:0};var cs=function(e){b()(t,e);function t(e){var a;c()(this,t);a=m()(this,v()(t).call(this,e));Object(Mn["a"])(he()(a),["markRead","undoMarkRead","showNew","openChannel","toggleCollapse"]);return a}d()(t,[{key:"markRead",value:function e(){var t={channel_id:this.props.channelId,channel_type:this.props.channelType,unread_count:this.props.totalUnreadCount};this.props.clogLinkClick({event:"UNREADS_MARK_GROUP_AS_READ",metadata:t});this.props.markChannelLastRead(this.props.channelId,this.props.latest,this.props.messageCount)}},{key:"openChannel",value:function e(){this.props.setPrimaryView({id:this.props.channelId})}},{key:"showNew",value:function e(){this.props.showNewerMessages(this.props.channelId,true)}},{key:"toggleCollapse",value:function e(){this.props.toggleCollapse(this.props.channelId)}},{key:"undoMarkRead",value:function e(){var t={channel_id:this.props.channelId,channel_type:this.props.channelType,unread_count:this.props.totalUnreadCount};this.props.clogLinkClick({event:"UNREADS_MARK_GROUP_AS_UNREAD",metadata:t});this.props.markChannelLastRead(this.props.channelId,this.props.initialLastRead)}},{key:"renderDefault",value:function e(){var t=Object(O["pick"])(this.props,["messageCount","messageCountIsExact","selected"]);return n.a.createElement(ss,te()({},t,{markRead:this.markRead}))}},{key:"renderNewMsgs",value:function e(t){var a=this.props,r=a.messageCountAfterLatest,i=a.messageCountIsExact,s=a.messageCount;var o;o=i?os.t("{messageCount} new {messageCount, plural, =1 {message} other {messages}}",{messageCount:r+s}):os.t("New messages");return n.a.createElement(li["a"],{onClick:t,className:"p-unreads_view__header__new_msgs_button","data-qa":"all_unreads_header_new_msgs"},o," ",n.a.createElement(X["b"],{inline:true,size:"inherit",type:"circle-fill"}))}},{key:"renderUndo",value:function e(){var t=this.props.markedMsgCount;var a;t&&(a=os.t("{messageCount, plural, =1 {# message} other {# messages}} marked read",{messageCount:t}));return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"p-unreads_view__header__message_count"},a),n.a.createElement(li["a"],{className:"p-unreads_view__header__undo_button",onClick:this.undoMarkRead,"data-qa":"all_unreads_header_undo"},os.t("Undo")))}},{key:"render",value:function e(){var t=this.props,a=t.channelId,r=t.markedMsgCount,i=t.messageCount,s=t.messageCountAfterLatest,o=t.collapsed;var l=i>0;var c=s>0;var u=r>0;var d={EXPANDED:0,COLLAPSED:1,UNDO:2,SHOW_NEW:3};var p=d.EXPANDED;l||!u||c?!l&&c?p=d.SHOW_NEW:o&&(p=d.COLLAPSED):p=d.UNDO;var m=_()("p-unreads_view__header",{"p-unreads_view__header--was_marked":p===d.UNDO||p===d.SHOW_NEW,"p-unreads_view__header--collapsed":p===d.COLLAPSED});var h=o?"caret-right":"caret-down";var v=p===d.EXPANDED||p===d.COLLAPSED;var f=p===d.EXPANDED;return n.a.createElement("div",{className:m},n.a.createElement(li["a"],{onClick:this.openChannel,className:"p-unreads_view__header__channel_name_link","data-qa":"all_unreads_header_channel_name"},n.a.createElement(ts["a"],{channelId:a,className:"p-unreads_view__header__channel_name"})),v&&n.a.createElement(as["a"],{icon:h,className:"p-unreads_view__header__collapse","data-qa":"all_unreads_header_toggle",onClick:this.toggleCollapse,"aria-expanded":f}),p===d.UNDO&&this.renderUndo(),p===d.SHOW_NEW&&this.renderNewMsgs(this.showNew),p===d.COLLAPSED&&this.renderNewMsgs(this.toggleCollapse),p===d.EXPANDED&&this.renderDefault())}}]);return t}(r["Component"]);cs.displayName="Header";cs.defaultProps=ls;var us={setPrimaryView:function e(){return pn["a"].apply(void 0,arguments)}};var ds=Object(y["connect"])(null,us)(cs);var ps=a(102);var ms=a(861);var hs=a(1674);var vs=a(862);var fs=a(1697);var bs=a(1484);var gs=a(1325);var _s=a(1056);var ys=a(816);var Os=a(911);var ks=a(2044);var Es=a(1658);var Cs=a(1341);var Ss=a(1326);var ws=a(1327);var js=new k["b"]("message_kit");var Is={className:void 0,theme:"light",adjacent:false,focused:false,renderActionsOffscreen:false,actionsPosition:void 0,onBackgroundClick:O["noop"],rollup:null,parentId:void 0};var Ts=function(e){b()(t,e);function t(e){var a;c()(this,t);a=m()(this,v()(t).call(this,e));a.handleBackgroundClick=a.handleBackgroundClick.bind(he()(a));return a}d()(t,[{key:"getCompactGutter",value:function e(){var t=this.props,a=t.msg,r=t.theme,i=t.adjacent;var s="light"===r;var o=_()("p-unreads_view_compact_timestamp",{"p-unreads_view_compact_timestamp--light":s,"p-unreads_view_compact_timestamp--adjacent":i});return n.a.createElement("div",{className:o},n.a.createElement(sa["a"],{msg:a,meridiem:!(i&&s),clickable:true},js.t("Open in channel")))}},{key:"getCompactMessageBody",value:function e(t){var a=this.props,r=a.adjacent,i=a.rollup;return n.a.createElement(ws["a"],null,!r&&n.a.createElement(ks["a"],{msg:t},n.a.createElement(ta["a"],{msg:t,className:"p-unreads_view_sender--compact"}),"\xa0"),n.a.createElement(aa["a"],{msg:t,rollup:i}),n.a.createElement(hs["a"],{msg:t,blocksContainerContext:N["a"].all_unreads}),n.a.createElement(ia["b"],{msg:t}),n.a.createElement(ms["a"],{msg:t}),n.a.createElement(vs["a"],{msg:t}),n.a.createElement(bs["a"],{msg:t}),n.a.createElement(fs["a"],{msg:t}))}},{key:"getMessageBody",value:function e(t){var a=this.props,r=a.adjacent,i=a.rollup;return n.a.createElement(n.a.Fragment,null,!r&&n.a.createElement(ks["a"],{msg:t},n.a.createElement(ta["a"],{msg:t}),"\xa0\xa0",n.a.createElement(sa["a"],{msg:t,clickable:true},js.t("Open in channel")),n.a.createElement("br",null)),n.a.createElement(aa["a"],{msg:t,rollup:i}),n.a.createElement(ra["a"],{msg:t,blocksContainerContext:N["a"].all_unreads}),n.a.createElement(ia["b"],{msg:t}),n.a.createElement(ms["a"],{msg:t}),n.a.createElement(vs["a"],{msg:t}),n.a.createElement(bs["a"],{msg:t}),n.a.createElement(fs["a"],{msg:t}))}},{key:"handleBackgroundClick",value:function e(t){if(t.altKey){t.preventDefault();this.props.onBackgroundClick(this.props.msg)}}},{key:"render",value:function e(){var t=this.props,a=t.msg,r=t.theme,i=t.adjacent,s=t.focused,o=t.renderActionsOffscreen,l=t.actionsPosition,c=t.parentId,u=t.className;var d="dense"===r;var p=d?this.getCompactGutter():null;var m=i?this.getCompactGutter():n.a.createElement(ea["a"],{msg:a});var h=d?this.getCompactMessageBody(a):this.getMessageBody(a);return n.a.createElement(gs["a"],{msg:a},n.a.createElement(_s["a"],{msg:a,className:_()(u,"p-unreads-view__message","c-message_kit__message"),onClick:this.handleBackgroundClick},n.a.createElement(ys["a"],{"data-qa":"unreads_view_message_hover",hovered:s},n.a.createElement(Os["a"],{msg:a,showComment:true,showShare:true,messageContainerType:ei["MESSAGE_CONTAINERS"].UNREAD_VIEW,position:l||(d||i?"above":"default"),renderOffscreen:o,parentId:c},n.a.createElement(Cs["a"],{msg:a,className:"p-unreads-view__message_label"},n.a.createElement($t["a"],{light:m,compact:p},n.a.createElement(Es["a"],{msg:a,replyBar:n.a.createElement(bs["a"],{msg:a})},n.a.createElement(Ss["a"],{msg:a},h))))))))}}]);return t}(r["PureComponent"]);Ts.displayName="Message";Ts.defaultProps=Is;var As=new k["b"]("all_unreads");var Ns=function(e){b()(t,e);function t(e){var a;c()(this,t);a=m()(this,v()(t).call(this,e));a.onClick=a.onClick.bind(he()(a));return a}d()(t,[{key:"onClick",value:function e(){var t=this.props,a=t.channelId,r=t.showNewerMessages;r(a)}},{key:"render",value:function e(){var t=this.props.count;var a=As.t("{count, plural, =1 {# new message} other {# new messages}}",{count:t});return n.a.createElement(li["a"],{className:"p-unreads_view__show_newer",onClick:this.onClick},a)}}]);return t}(r["PureComponent"]);Ns.displayName="ShowNewerButton";var Ps=new k["b"]("all_unreads");function Ms(e){var t=e.markAllRead;return n.a.createElement("div",{className:"p-unreads_view__footer"},n.a.createElement(J["d"],{onClick:t,type:"outline"},Ps.t("Mark All Messages Read")))}Ms.displayName="Footer";var Ds=Ms;var xs=new k["b"]("all_unreads");function Rs(){return n.a.createElement("div",{className:"p-unreads_view__loading_more"},xs.t("Loading more messages..."))}Rs.displayName="LoadingMore";var Fs=Rs;function Ls(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function Us(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ls(Object(a),true).forEach(function(t){qe()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ls(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Bs=new k["b"]("all_unreads");var qs="UNREADS-VIEW";var Gs=Object(Fi["a"])(Ts);var Hs=Object(Fi["a"])(Ri["a"]);var Ws={showNewerMessages:Dn["default"].func.isRequired,markChannelLastRead:Dn["default"].func.isRequired,markAllRead:Dn["default"].func.isRequired,removeFrames:Dn["default"].func.isRequired,totalUnreadCount:Dn["default"].number.isRequired,frames:Dn["default"].arrayOf(Dn["default"].shape({channelId:Dn["default"].string.isRequired,start:Dn["default"].string.isRequired,end:Dn["default"].string.isRequired,initialLastRead:Dn["default"].string.isRequired,markedMsgCount:Dn["default"].number.isRequired,channelType:Dn["default"].string.isRequired,collapsed:Dn["default"].bool.isRequired,lastRead:Dn["default"].string.isRequired,latest:Dn["default"].string.isRequired,timestamps:Dn["default"].arrayOf(Dn["default"].string).isRequired,reachedEnd:Dn["default"].bool.isRequired,messages:Dn["default"].object,isMember:Dn["default"].bool})).isRequired,logger:Dn["default"].object.isRequired,clogLinkClick:Dn["default"].func.isRequired,theme:Dn["default"].oneOf(["dense","light"]).isRequired,featureAriaApplicationMode:Dn["default"].bool.isRequired,allUnreadsSortOrder:Dn["default"].string.isRequired,focusRequestedThreadKey:Dn["default"].string,userAttentionIsOnChat:Dn["default"].bool.isRequired,featureOfflineMode:Dn["default"].bool.isRequired,isOffline:Dn["default"].bool.isRequired,teamId:Dn["default"].string.isRequired,impressionLoggingWebGroup:Dn["default"].string,featureMessageKitInMessagePane:Dn["default"].bool,isIAP1Enabled:Dn["default"].bool,fetchHistory:Dn["default"].func.isRequired,addMessagesFromHistory:Dn["default"].func.isRequired,setUnreadPoint:Dn["default"].func.isRequired,expandChannel:Dn["default"].func.isRequired,collapseChannel:Dn["default"].func.isRequired,makeMessageSummary:Dn["default"].func.isRequired,makeHeaderLabel:Dn["default"].func.isRequired,showThreadIfThreadable:Dn["default"].func.isRequired,setFocusRequestedThreadKey:Dn["default"].func.isRequired,removeFromSectionNavigation:Dn["default"].func,addToSectionNavigation:Dn["default"].func,setInitialActiveSection:Dn["default"].func};var Vs={focusRequestedThreadKey:void 0,removeFromSectionNavigation:O["noop"],addToSectionNavigation:O["noop"],setInitialActiveSection:O["noop"],teamId:void 0,impressionLoggingWebGroup:"control",featureMessageKitInMessagePane:false,isIAP1Enabled:false};var Ks=function(e){b()(t,e);function t(e){var a;c()(this,t);a=m()(this,v()(t).call(this,e));Object(Mn["a"])(he()(a),["renderRow","fetchPost","showNewerMessages","markAllRead","markChannelLastRead","toggleCollapse","handleMessageBackgroundClick","isFocusableItem","onListScroll","onMarkReadKeyCommand","onMarkReadKeyCommandWithR","onLeftKeyCommand","onRightKeyCommand","onPreviousChannelKeyCommand","onNextChannelKeyCommand","onItemTabWithin","shouldIgnoreKeyEvent","shouldIgnoreFocusedKeyEvent","clogClick","isItemAriaExpanded","onFocusEnter","onFocusLeave","getAriaLabelForRow","getPropsForItem","focus"]);a.layout=new xi["a"]({ANCHOR_OFFSET:72});a.list=n.a.createRef();a.rows=[];a.loading=false;a.state={keyToFocus:null,hasKeyboardFocus:false};a.onListScrolledDebounce=Object(Ni["a"])(a.onListScroll,150);a.attachMessageImpressionLogger(e.teamId,e.impressionLoggingWebGroup,e.clogger);return a}d()(t,[{key:"componentWillUnmount",value:function e(){this.messageImpressionLogger.flushAllVisibleMessages()}},{key:"componentDidUpdate",value:function e(t){var a={prevUserAttentionIsOnChat:t.userAttentionIsOnChat,prevComposerVisible:t.composerVisible,currentUserAttentionIsOnChat:this.props.userAttentionIsOnChat,currentComposerVisible:this.props.composerVisible};Object(Vi["a"])(a)&&this.props.addToSectionNavigation();Object(Ki["a"])(a)&&this.props.removeFromSectionNavigation();this.layout.anchor&&0===this.layout.anchorOffset&&this.layout.setAnchor(false);var r=Object(O["map"])(this.props.frames.filter(function(e){return!e.isMember}),"channelId");var n=Object(O["map"])(this.props.frames.filter(function(e){return e.reachedEnd&&(Object(O["isEmpty"])(e.timestamps)||Object(O["last"])(e.timestamps)<=e.initialLastRead)}),"channelId");var i=[].concat(Da()(r),Da()(n));if(i.length){this.props.logger.info("removing frames (non-member, empty):",r,n);this.props.removeFrames(i)}t.teamId!==this.props.teamId&&this.attachMessageImpressionLogger(this.props.teamId,this.props.impressionLoggingWebGroup,this.props.clogger);this.maybeClearKeyToFocus()}},{key:"attachMessageImpressionLogger",value:function e(t,a,r){if(this.messageImpressionLogger)try{this.messageImpressionLogger.flushAllVisibleMessages()}catch(e){this.props.logger.error("unreads_list_unable_log_message_impressions","Unreads List View unable to log message impressions",e)}this.messageImpressionLogger=new Pi["a"]({teamId:t,experimentGroup:a,clogger:r,messageViewLocation:Mi["a"].ALL_UNREAD})}},{key:"maybeClearKeyToFocus",value:function e(){var t=this.list.current;if(t){var a=t.getActiveItem();a&&this.state.keyToFocus===a&&this.setState(function(){return{keyToFocus:null}})}}},{key:"determineKeyToFocus",value:function e(t,a){var r=this.state.keyToFocus;var n=this.props.focusRequestedThreadKey;if(n){var i=Object(Ai["decodeThreadKey"])(n),s=i.channelId,o=i.threadTs;return"message-"+s+"-"+o}if(r)return r;var l=this.list.current&&this.list.current.getInitialActiveItem();var c=Object(O["startsWith"])(l,"show-newer-");if(c&&!Object(O["includes"])(a,l)){var u=t.indexOf(l);if(-1===u)return null;var d=t[u-1];var p=a.indexOf(d);var m=a[p+1];if(m)return m}return null}},{key:"showNewerMessages",value:function e(t,a){var r=Object(O["find"])(this.props.frames,{channelId:t});var n=a&&r.lastRead;a&&this.maybeAnchorToHeader(t);this.props.showNewerMessages(t,r.latest,n)}},{key:"markAllRead",value:function e(){var t={};this.rows.filter(function(e){return"header"===e.type}).forEach(function(e){if(e.messageCountIsExact&&!e.messageCount)return;t[e.channelId]=e.end});this.props.markAllRead(t)}},{key:"getRowAndFrame",value:function e(t){var a=this.props,r=a.logger,n=a.frames;var i=this.keys.indexOf(t);var s=this.rows[i];if(!s||!s.channelId){r.warn("No valid row");return null}var o=s.channelId;var l=Object(O["find"])(n,{channelId:o});if(!l){r.warn("No frame for "+o);return null}return{row:s,frame:l}}},{key:"getActiveRow",value:function e(){var t=this.list.current&&this.list.current.getInitialActiveItem();if(!t)return null;return this.getRowAndFrame(t)}},{key:"getActiveRowForKeyboardMarking",value:function e(){var t=this.getActiveRow();if(t)return t;var a=this.defaultActiveItemForKeyboardMarking||this.keys[0];if(!a)return null;return this.getRowAndFrame(a)}},{key:"onMarkReadKeyCommand",value:function e(){var t=this.props,a=t.logger,r=t.frames;a.info("onMarkReadKeyCommand");var n=this.getActiveRowForKeyboardMarking()||{},i=n.row,s=n.frame;if(!i||!s)return;var o=Object(O["filter"])(this.rows,{channelId:s.channelId,type:"message"}).length;if(!o){if(i.markedMsgCount){this.markChannelLastRead(s.channelId,s.initialLastRead);return}a.warn("No messages to mark or to undo");return}this.markChannelLastRead(s.channelId,s.end,o);var l=r.filter(function(e){return e.start<e.end}).length;if(1===l)return;var c=r[1+r.indexOf(s)];var u=c?"header-"+c.channelId:"header-"+s.channelId;this.setState(function(){return{keyToFocus:u}});this.defaultActiveItemForKeyboardMarking=u}},{key:"onMarkReadKeyCommandWithR",value:function e(){var t=this.props.logger;t.info("onMarkReadKeyCommandWithR");var a=this.getActiveRowForKeyboardMarking()||{},r=a.row,n=a.frame;if(!r||!n)return;if("header"!==r.type){t.info("Header not selected: "+r.type);return}this.onMarkReadKeyCommand()}},{key:"onLeftKeyCommand",value:function e(){var t=this.props.logger;t.info("onLeftKeyCommand");var a=this.getActiveRow(),r=a.row,n=a.frame;if(!r||!n)return;if("header"===r.type&&!n.collapsed){this.toggleCollapse(n.channelId);this.setState(function(){return{keyToFocus:"header-"+n.channelId}})}}},{key:"onRightKeyCommand",value:function e(){var t=this.props.logger;t.info("onRightKeyCommand");var a=this.getActiveRow(),r=a.row,n=a.frame;if(!r||!n)return;if("header"===r.type&&n.collapsed){this.toggleCollapse(n.channelId);this.setState(function(){return{keyToFocus:"header-"+n.channelId}});return}if("message"===r.type){var i=r.ts,s=r.channelId;this.props.showThreadIfThreadable({channelId:s,threadTs:i,requestFocus:true});this.blur()}}},{key:"onPreviousChannelKeyCommand",value:function e(){var t=this.props,a=t.logger,r=t.frames;a.info("onPreviousChannelKeyCommand");var n=this.getActiveRow()||{},i=n.row,s=n.frame;if(!i||!s)return;var o=s;if("header"===i.type){o=r[r.indexOf(s)-1];if(!o){a.info("No previous frame");return}}this.setState(function(){return{keyToFocus:"header-"+o.channelId}})}},{key:"onNextChannelKeyCommand",value:function e(){var t=this.props,a=t.logger,r=t.frames;a.info("onNextChannelKeyCommand");var n=this.getActiveRow()||{},i=n.row,s=n.frame;if(!i||!s)return;var o=r[r.indexOf(s)+1];if(!o){a.info("No next frame");return}this.setState(function(){return{keyToFocus:"header-"+o.channelId}})}},{key:"onItemTabWithin",value:function e(){this.props.setInitialActiveSection()}},{key:"shouldIgnoreKeyEvent",value:function e(t){if(Object(oi["a"])(t.target))return true;if(!this.checkUserAttentionIsOnChat())return true;if(t.target===document.body)return false;if(t.target&&"Punreads"===t.target.getAttribute("data-sidebar-link-id"))return false;return!this.state.hasKeyboardFocus}},{key:"shouldIgnoreFocusedKeyEvent",value:function e(t){if(Object(oi["a"])(t.target))return true;if(!this.checkUserAttentionIsOnChat())return true;return!this.state.hasKeyboardFocus}},{key:"checkUserAttentionIsOnChat",value:function e(){if(Object(E["a"])())return this.props.userAttentionIsOnChat;return Object(si["f"])()}},{key:"maybeAnchorToHeader",value:function e(t){if(!this.list.current)return;var a="header-"+t;var r=this.list.current.getTop(a)-this.list.current.getScrollTop();if(r>0)return;this.layout.setAnchor(a,0)}},{key:"markChannelLastRead",value:function e(t,a,r){this.maybeAnchorToHeader(t);this.props.markChannelLastRead(t,a,r)}},{key:"clogClick",value:function e(t,a){this.props.clogLinkClick({event:t,metadata:a})}},{key:"toggleCollapse",value:function e(t){var a=Object(O["find"])(this.props.frames,{channelId:t});if(!a)return;var r={channel_id:t,channel_type:a.channelType};this.maybeAnchorToHeader(t);if(a.collapsed){this.props.expandChannel(t);this.props.showNewerMessages(t,a.latest);this.clogClick("UNREADS_EXPAND_GROUP",r)}else{this.props.collapseChannel(t);this.clogClick("UNREADS_COLLAPSE_GROUP",r)}}},{key:"handleMessageBackgroundClick",value:function e(t){var a=t.channel,r=t.ts;this.props.setUnreadPoint({channelId:a,unreadTs:r})}},{key:"isFocusableItem",value:function e(t){var a=t.index;var r=this.rows[a];return["header","message","show-newer","footer"].includes(r.type)}},{key:"isItemAriaExpanded",value:function e(t,a){var r=this.rows[a];if(r&&"header"===r.type)return!r.collapsed;return}},{key:"getPropsForItem",value:function e(t){var a=t.key,r=t.index;var n=this.rows[r];return n&&n.type?{"aria-label":this.getAriaLabelForRow(r),"aria-expanded":this.isItemAriaExpanded(a,r)}:void 0}},{key:"scrollToTop",value:function e(){if(!this.list.current)return;this.list.current.scrollToOffset(0)}},{key:"focus",value:function e(){var t=this.list.current;t&&t.focus()}},{key:"blur",value:function e(){var t=this.list.current;t&&t.blur()}},{key:"onFocusEnter",value:function e(){var t=this;this.setState(function(){return{hasKeyboardFocus:true}},function(){var e=t.props.focusRequestedThreadKey;var a=t.list.current;if(!a||!e)return;var r=a.getActiveItem();"message-"+e===r&&t.props.setFocusRequestedThreadKey(null)})}},{key:"onFocusLeave",value:function e(){this.setState(function(){return{hasKeyboardFocus:false}})}},{key:"onListScroll",value:function e(){if(!(this.list&&this.list.current))return;var t=this.list.current.getVisibleRange(void 0,true),a=t.start,r=t.end;var n=this.rows.slice(a,r).filter(function(e){return"message"===e.type}).map(function(e){return{ts:e.ts,channel:e.channelId}});try{this.messageImpressionLogger.setCurrentlyVisibleMessages(n)}catch(e){this.props.logger.error("unreads_list_unable_log_message_impressions","Unreads List View unable to log message impressions",e)}}},{key:"getAriaLabelForRow",value:function e(t){if(!this.props.makeMessageSummary)return null;var a=this.rows[t];if(!a||!a.type)return null;switch(a.type){case"message":var r=a.ts;return this.props.makeMessageSummary({channelId:a.channelId,ts:r,hasFocus:this.state.hasKeyboardFocus,day:{ts:r},viewContext:ei["MESSAGE_CONTAINERS"].UNREAD_VIEW});case"header":return this.props.makeHeaderLabel({channelId:a.channelId,messageCount:a.messageCount,messageCountAfterLatest:a.messageCountAfterLatest,markedMsgCount:a.markedMsgCount,messageCountIsExact:a.messageCountIsExact,collapsed:a.collapsed});case"show-newer":return Bs.t("{count, plural, =1 {# new message} other {# new messages}}",{count:a.count});case"footer":return Bs.t("Mark All Messages Read");default:return null}}},{key:"renderRow",value:function e(t,a){var r=a.hasFocus,i=a.itemId;var s=this.rows[t];var o=this.list.current&&this.list.current.getInitialActiveItem();switch(s.type){case"header":return n.a.createElement(ds,{channelId:s.channelId,channelType:s.channelType,messageCount:s.messageCount,messageCountAfterLatest:s.messageCountAfterLatest,messageCountIsExact:s.messageCountIsExact,markedMsgCount:s.markedMsgCount,collapsed:s.collapsed,latest:s.end,initialLastRead:s.initialLastRead,totalUnreadCount:this.props.totalUnreadCount,markChannelLastRead:this.markChannelLastRead,showNewerMessages:this.showNewerMessages,toggleCollapse:this.toggleCollapse,selected:Object(O["includes"])(o,s.channelId),clogLinkClick:this.props.clogLinkClick});case"message":if(this.props.featureMessageKitInMessagePane)return n.a.createElement(Hs,{channelId:s.channelId,ts:s.ts,prevTs:s.prevTs,actionsPosition:s.isFirstMessage?"default":void 0,markMsgUnread:this.handleMessageBackgroundClick,focused:r,renderActionsOffscreen:this.state.hasKeyboardFocus,theme:this.props.theme,rollup:s.rollup,parentId:i,clickableTimestamp:true,messageContainerType:ei["MESSAGE_CONTAINERS"].UNREAD_VIEW,blocksContainerContext:N["a"].all_unreads});return n.a.createElement(Gs,{channelId:s.channelId,ts:s.ts,prevTs:s.prevTs,actionsPosition:s.isFirstMessage?"default":void 0,onBackgroundClick:this.handleMessageBackgroundClick,focused:r,renderActionsOffscreen:this.state.hasKeyboardFocus,theme:this.props.theme,rollup:s.rollup,parentId:i});case"loading":if(this.props.featureOfflineMode&&this.props.isOffline)return n.a.createElement(qi["a"],null);return n.a.createElement(Fs,null);case"day-divider":var l=+s.dayTs;return n.a.createElement(n.a.Fragment,null,n.a.createElement(Li["b"],{date:l}),n.a.createElement(Li["a"],{date:l,isUnread:s.unread,isIAP1Enabled:this.props.isIAP1Enabled}));case"unread-divider":return n.a.createElement(Ui["a"],{isIAP1Enabled:this.props.isIAP1Enabled});case"show-newer":return n.a.createElement(Ns,{count:s.count,channelId:s.channelId,showNewerMessages:this.showNewerMessages});case"spacer":return n.a.createElement("div",{className:_()("p-unreads_view__spacer",{"p-unreads_view__spacer--bottom":!!s.isBottom})});case"footer":return n.a.createElement(Ds,{markAllRead:this.markAllRead});default:this.props.logger.error("Unhandled row type:",s.type);return s.type}}},{key:"fetchPost",value:function e(){var t=this;var a=Object(O["last"])(this.rows);if(!a)return;if("loading"!==a.type)return;if(this.loading)return;this.loading=true;var r=a.channelId,n=a.oldest;this.props.logger.info("fetchPost",r,n);this.props.fetchHistory({channelId:r,oldest:n,reason:"unreads-view/fetchPost"}).then(function(e){var a=e.msgs,i=e.hasMore,s=e.deleted;t.props.addMessagesFromHistory({channelId:r,oldest:n,msgs:a,hasMore:i,deleted:s})}).finally(function(){t.loading=false})}},{key:"render",value:function e(){var t=this;var a=this.props,r=a.allUnreadsSortOrder,i=a.frames,s=a.currentUserId,o=a.featureOfflineMode,l=a.isOffline;var c=Xi(i,s),u=c.keys,d=c.rows,p=c.stickyItems;var m=!Object(O["some"])(d,function(e){return"message"===e.type});if(o&&l&&m)return n.a.createElement(Zn["a"],null);var h=this.keys;this.rows=d;this.keys=u;var v=[{keys:["r"],handler:this.onMarkReadKeyCommandWithR,filter:this.shouldIgnoreKeyEvent},{keys:["esc"],handler:this.onMarkReadKeyCommand,filter:this.shouldIgnoreKeyEvent},{keys:["left"],handler:this.onLeftKeyCommand,filter:this.shouldIgnoreFocusedKeyEvent},{keys:["right"],handler:this.onRightKeyCommand,filter:this.shouldIgnoreFocusedKeyEvent},{keys:["shift+pageup"],handler:this.onPreviousChannelKeyCommand,filter:this.shouldIgnoreFocusedKeyEvent},{keys:["shift+pagedown"],handler:this.onNextChannelKeyCommand,filter:this.shouldIgnoreFocusedKeyEvent}];var f;f="alphabetical"===r?Bs.t("All Unreads, sorted alphabetically"):"priority"===r?Bs.t("All Unreads, sorted scientifically"):"newest"===r?Bs.t("All Unreads, sorted by newest channel"):Bs.t("All Unreads, sorted by oldest channel");var b=this.determineKeyToFocus(h,this.keys);var g=n.a.createElement(_i["a"],null,function(e){var a=e.width,r=e.height;return n.a.createElement(Di["a"],{id:"unreads_view",ref:t.list,layout:t.layout,width:a,height:r,keys:u,rowRenderer:t.renderRow,isFocusableItem:t.isFocusableItem,loadAround:t.fetchPost,loadPost:t.fetchPost,stickyItems:p,stickyZIndex:202,keyCommands:v,activeItem:b,getPropsForItem:t.getPropsForItem,onFocusEnter:t.onFocusEnter,onFocusLeave:t.onFocusLeave,useAriaApplicationMode:t.props.featureAriaApplicationMode,"aria-label":f,onItemTabWithin:t.onItemTabWithin,onScroll:t.onListScrolledDebounce})});if(Object(E["a"])())return g;return n.a.createElement(Bi["a"],{component:this,order:.2},g)}}]);return t}($n["a"]);Ks.displayName="UnreadsList";Ks.propTypes=Ws;Ks.defaultProps=Vs;function zs(e,t){var a=Object(Ne["a"])({label:qs,state:e});var r=Object(C["a"])({state:e});var n=Object(yi["a"])(e);var s=Object(ai["j"])(e);var o=t.frames.map(function(t){var a=Object(He["e"])(e,t.channelId);var r=Object(Gt["getLastReadTs"])(a);var n=Object(xn["getTimestampsByChannelId"])(e,a.id);var i=Object(Gt["getLatestTs"])(a,n.timestamps);var o=Object(xn["getTimestampsByChannelId"])(e,a.id,t.start);var l=o.timestamps;var c=o.end;var u=!!o.reachedEnd;var d=Object(Rn["b"])(e,a.id);var p=s.includes(t.channelId);var m=Object(Gt["isMemberOfChannel"])(a);return Us({},t,{lastRead:r,latest:i,timestamps:l,sliceEnd:c,reachedEnd:u,messages:d,collapsed:p,isMember:m})});return{logger:a,clogger:r,teamId:Object(ri["b"])(e),theme:n,frames:o,currentUserId:Object(i["getCurrentUserId"])(e),featureAriaApplicationMode:Object(i["isFeatureEnabled"])(e,"feature_aria_application_mode"),allUnreadsSortOrder:Object(Wn["a"])(e),focusRequestedThreadKey:Un(e),userAttentionIsOnChat:Object(ii["e"])(e),featureOfflineMode:Object(i["isFeatureEnabled"])(e,"feature_offline_mode"),isOffline:!Object(Gn["c"])(e),composerVisible:Object(Wi["isComposerVisible"])(e),impressionLoggingWebGroup:Object(Hi["getGroupForUser"])(e,"impression_logging_web"),featureMessageKitInMessagePane:Object(i["isFeatureEnabled"])(e,"feature_message_kit_in_message_pane"),isIAP1Enabled:Object(Hn["e"])(e)}}var Qs={fetchHistory:function e(){return Ci["b"].apply(void 0,arguments)},addMessagesFromHistory:function e(){return Ei["a"].apply(void 0,arguments)},setUnreadPoint:function e(){return Lr["setUnreadPoint"].apply(void 0,arguments)},expandChannel:function e(){return Ii.apply(void 0,arguments)},collapseChannel:function e(){return Ti.apply(void 0,arguments)},makeMessageSummary:function e(){return ki["a"].apply(void 0,arguments)},makeHeaderLabel:function e(){return es.apply(void 0,arguments)},showThreadIfThreadable:function e(){return Oi["showThreadIfThreadable"].apply(void 0,arguments)},setFocusRequestedThreadKey:function e(){return Bn["c"].apply(void 0,arguments)}};var Ys=Object(E["a"])()?Object(Gi["a"])(Ks,"UnreadsList",{index:0}):Ks;var Js=Object(y["connect"])(zs,Qs,null,{withRef:true})(Ys);function Xs(e){var t=e.channels,a=e.allUnreadsSortOrder,r=e.currentUserId;if("oldest"===a)return to(t,r);if("priority"===a)return $s(t);if("newest"===a)return eo(t);return Zs(t)}function Zs(e){var t=oo(e),a=t.starred,r=t.notStarred;return no(a).concat(no(r))}function $s(e){var t=oo(e),a=t.starred,r=t.notStarred;return ao(a).concat(ao(r))}function eo(e){return Object(O["reverse"])(Object(O["sortBy"])(e,"latest"))}function to(e,t){var a=Object(O["memoize"])(function(e){var a=e.lastRead,r=e.messages,n=e.oldestSliceTimestamps,i=e.createdTime;var s=false;var o=Object(O["find"])(n,function(e){if(e<=a)return false;var n=r[e];if(!n){s=true;return false}return Object(zi["isMessageUnread"])(n,a,t)});if(o&&!s)return o;if("0000000000.000000"===a)return i+".000000";return a});return Object(O["sortBy"])(e,a)}function ao(e){var t=lo(e),a=t.publicChannels,r=t.privateChannels,n=t.ims,i=t.mpims;var s=a.concat(r);return ro(s).concat(so(n)).concat(so(i))}function ro(e){var t=co(e),a=t.hasMentions,r=t.noMentions;return so(a).concat(so(r))}function no(e){var t=lo(e),a=t.publicChannels,r=t.privateChannels,n=t.ims,i=t.mpims;var s=io(a.concat(r));var o=io(n);var l=io(i);return s.concat(o).concat(l)}function io(e){return Object(O["clone"])(e).sort(function(e,t){return Object(k["r"])(e.displayName,t.displayName)})}function so(e){return Object(O["clone"])(e).sort(function(e,t){if(e.priority===t.priority)return Object(k["r"])(e.displayName,t.displayName);return t.priority-e.priority})}function oo(e){var t=Object(O["groupBy"])(e,"isStarred");var a=t.true||[];var r=t.false||[];return{starred:a,notStarred:r}}function lo(e){var t=Object(O["groupBy"])(e,"channelType");var a=t.channel||[];var r=t.private||[];var n=t.im||[];var i=t.mpim||[];return{publicChannels:a,privateChannels:r,ims:n,mpims:i}}function co(e){var t=Object(O["groupBy"])(e,function(e){return e.unreadHighlightCnt>0});var a=t.true||[];var r=t.false||[];return{hasMentions:a,noMentions:r}}var uo=Xs;var po=function(e){b()(t,e);function t(e){var a;c()(this,t);a=m()(this,v()(t).call(this,e));Object(Mn["a"])(he()(a),["refreshFromKeyPress"]);return a}d()(t,[{key:"componentDidMount",value:function e(){this.props.setNewUnreadMsgCount(this.props.newUnreadMsgCount)}},{key:"componentDidUpdate",value:function e(t){t.newUnreadMsgCount!==this.props.newUnreadMsgCount&&this.props.setNewUnreadMsgCount(this.props.newUnreadMsgCount)}},{key:"componentWillUnmount",value:function e(){this.props.setNewUnreadMsgCount(0)}},{key:"refreshFromKeyPress",value:function e(){this.props.newUnreadMsgCount>0&&this.props.refreshAllUnreads()}},{key:"render",value:function e(){return null}}]);return t}(r["Component"]);po.displayName="NewMessagesUpdater";function mo(e,t){var a=t.frames.map(function(e){return e.channelId});var r=hi(e),n=r.countsPerChannel;var i=Object(O["filter"])(n,function(e,t){return!a.includes(t)});var s=Object(O["sum"])(Object(O["map"])(i,"unreadCnt"));return{newUnreadMsgCount:s}}var ho=Object(y["connect"])(mo)(po);var vo=a(3636);function fo(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function bo(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?fo(Object(a),true).forEach(function(t){qe()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):fo(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var go=new k["b"]("all_unreads");var _o="UNREADS-VIEW";var yo={channels:Dn["default"].arrayOf(Dn["default"].shape({id:Dn["default"].string.isRequired,lastRead:Dn["default"].string.isRequired,latest:Dn["default"].string.isRequired,displayName:Dn["default"].string.isRequired,channelType:Dn["default"].string.isRequired,isStarred:Dn["default"].bool.isRequired,priority:Dn["default"].number.isRequired,unreadHighlightCnt:Dn["default"].number.isRequired,messages:Dn["default"].object.isRequired,oldestSliceTimestamps:Dn["default"].arrayOf(Dn["default"].string).isRequired,createdTime:Dn["default"].number.isRequired})).isRequired,logger:Dn["default"].object.isRequired,clogger:Dn["default"].object,allUnreadsSortOrder:Dn["default"].string.isRequired,currentUserId:Dn["default"].string.isRequired,refreshId:Dn["default"].number.isRequired,totalUnreadCount:Dn["default"].number.isRequired,unreadChannelsAreKnown:Dn["default"].bool.isRequired,featureOfflineMode:Dn["default"].bool.isRequired,isOffline:Dn["default"].bool.isRequired,isIAPhase1Enabled:Dn["default"].bool.isRequired,clientTheme:Dn["default"].oneOf(["light","dark"]),markLastRead:Dn["default"].func.isRequired,setNewUnreadMsgCount:Dn["default"].func.isRequired};var Oo={clogger:{track:O["noop"],error:O["noop"]},clientTheme:"light"};var ko=function(e){b()(t,e);function t(e){var a;c()(this,t);a=m()(this,v()(t).call(this,e));Object(Mn["a"])(he()(a),["showNewerMessages","markChannelLastRead","markAllRead","undoMarkAllRead","refreshAllUnreads","removeFrames","clogUnreadsEvent"]);a.state=a.computeInitialState();a.unreadsEventSeqId=0;a.initializedTime=Date.now();a.listRef=n.a.createRef();return a}d()(t,[{key:"componentDidMount",value:function e(){this.clogUnreadsEvent({event:"UNREADS_OPEN",metadata:{is_iap1:this.props.isIAPhase1Enabled}});this.incrementTrackingSeqId()}},{key:"componentDidUpdate",value:function e(t){(t.allUnreadsSortOrder!==this.props.allUnreadsSortOrder||t.refreshId<this.props.refreshId||!t.unreadChannelsAreKnown&&this.props.unreadChannelsAreKnown)&&this.refreshAllUnreads()}},{key:"componentDidCatch",value:function e(t){this.setState(function(){return{errored:true}});this.props.logger.error("Unreads view componentDidCatch","unreads_view_did_catch",t)}},{key:"componentWillUnmount",value:function e(){var t={unreads_event_seq_id:this.unreadsEventSeqId,unreads_elapsed_time:Date.now()-this.initializedTime};this.clogUnreadsEvent({event:"UNREADS_CLOSE",metadata:t})}},{key:"incrementTrackingSeqId",value:function e(){this.unreadsEventSeqId+=1}},{key:"clogUnreadsEvent",value:function e(t){var a=t.event,r=t.metadata;var n=this.props.clogger;n.track(a,bo({is_unreads_view:1},r))}},{key:"computeInitialState",value:function e(){var t=this.props,a=t.channels,r=t.allUnreadsSortOrder,n=t.currentUserId;var i=uo({channels:a,allUnreadsSortOrder:r,currentUserId:n});var s=i.map(function(e){var t=e.id,a=e.lastRead,r=e.latest,n=e.channelType;return{channelId:t,start:a,end:r,initialLastRead:a,markedMsgCount:0,channelType:n||""}});return{frames:s,markedChannels:[],errored:false}}},{key:"showNewerMessages",value:function e(t,a){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.setState(function(e){var n=e.frames.map(function(e){if(e.channelId!==t)return e;return bo({},e,{initialLastRead:r||e.initialLastRead,start:r||e.start,end:a})});return{frames:n}})}},{key:"markChannelLastRead",value:function e(t,a){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.props.logger.info("Marking "+t+" to "+a);this.props.markLastRead({id:t,ts:a,immediate:true,reason:"unreads-view/markChannelLastRead"});this.setState(function(e){var n=e.frames.map(function(e){if(e.channelId!==t)return e;return bo({},e,{start:a,markedMsgCount:r})});return{frames:n,markedChannels:[t]}})}},{key:"markAllRead",value:function e(t){this.props.logger.info("Marking all: "+JSON.stringify(t));this.props.markManyLastRead({markers:t,reason:"unreads-view/markAllRead"});var a={unread_count:this.props.totalUnreadCount};this.clogUnreadsEvent({event:"UNREADS_MARK_ALL_AS_READ",metadata:a});this.setState(function(e){var a=e.frames.map(function(e){return bo({},e,{start:e.end})});return bo({},e,{frames:a,markedChannels:Object(O["keys"])(t)})})}},{key:"undoMarkAllRead",value:function e(){this.clogUnreadsEvent({event:"UNREADS_MARK_ALL_AS_UNREAD",metadata:{}});this.setState(function(e,t){var a=e.frames.map(function(t){if(!e.markedChannels.includes(t.channelId))return t;return bo({},t,{start:t.initialLastRead})});var r={};a.forEach(function(t){if(!e.markedChannels.includes(t.channelId))return;if(t.initialLastRead>=t.end)return;r[t.channelId]=t.initialLastRead});t.logger.info("Undoing mark all: "+JSON.stringify(r));t.markManyLastRead({markers:r,reason:"unreads-view/undoMarkAllRead"});return bo({},e,{frames:a,markedChannels:[]})})}},{key:"refreshAllUnreads",value:function e(){var t=this;this.props.logger.info("Refreshing");this.setState(function(){return t.computeInitialState()},function(){var e,a,r,n,i;var s=(null===(e=t.listRef)||void 0===e?void 0:null===(a=e.current)||void 0===a?void 0:a.getWrappedInstance)?null===(r=t.listRef)||void 0===r?void 0:null===(n=r.current)||void 0===n?void 0:n.getWrappedInstance():null===(i=t.listRef)||void 0===i?void 0:i.current;(null===s||void 0===s?void 0:s.scrollToTop)&&s.scrollToTop()});this.props.setNewUnreadMsgCount(0)}},{key:"removeFrames",value:function e(t){this.setState(function(e){return bo({},e,{frames:e.frames.filter(function(e){return!t.includes(e.channelId)})})})}},{key:"renderTopBanners",value:function e(){return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"p-unreads_view__top_banners"},n.a.createElement(Vn["a"],null),n.a.createElement(Kn["a"],null,n.a.createElement(zn["a"],null))),n.a.createElement(Xn["a"],null))}},{key:"render",value:function e(){if(!this.props.unreadChannelsAreKnown){var t=this.props,a=t.featureOfflineMode,r=t.isOffline;return n.a.createElement(n.a.Fragment,null,this.renderTopBanners(),a&&r?n.a.createElement(Zn["a"],null):n.a.createElement(Qn["a"],{clientTheme:this.props.clientTheme}))}var i=this.state,s=i.markedChannels,o=i.errored;if(o)return n.a.createElement("div",{className:"p-unreads_view"},this.renderTopBanners(),n.a.createElement(Yn["a"],{tryAgain:this.refreshAllUnreads,"data-qa":"unreads_view_error"},go.t("Something\u2019s fishy! Slack can\u2019t seem to load your unread messages.")," ",n.a.createElement("br",null),go.rt("You can try again, but if the problem persists, please <a>drop us a line.</a>",null,function(e){var t=e.text;return n.a.createElement(Pe["a"],{href:"https://slack.com/help/contact"},t)})));var l=n.a.createElement(ho,{frames:this.state.frames,setNewUnreadMsgCount:this.props.setNewUnreadMsgCount,refreshAllUnreads:this.refreshAllUnreads});var c=!this.state.frames.some(function(e){return e.start<e.end});var u=n.a.createElement(gi,{visible:c,showUndo:!Object(O["isEmpty"])(s),undoMarkAllRead:this.undoMarkAllRead,refreshAllUnreads:this.refreshAllUnreads});var d=n.a.createElement(Jn["a"],{id:ei["MESSAGE_CONTAINERS"].UNREAD_VIEW},n.a.createElement("div",{className:"p-unreads_view"},n.a.createElement(Js,{ref:this.listRef,frames:this.state.frames,showNewerMessages:this.showNewerMessages,markChannelLastRead:this.markChannelLastRead,markAllRead:this.markAllRead,removeFrames:this.removeFrames,totalUnreadCount:this.props.totalUnreadCount,clogLinkClick:this.clogUnreadsEvent})));return n.a.createElement(n.a.Fragment,null,this.renderTopBanners(),u,!c&&d,!c&&l)}}]);return t}($n["a"]);ko.displayName="UnreadsView";ko.propTypes=yo;ko.defaultProps=Oo;var Eo=ko;function Co(e){var t=Object(Ne["a"])({label:_o,state:e});var a=Object(C["a"])({state:e});var r=hi(e),n=r.countsPerChannel,s=r.unreadChannelIds,o=r.unreadChannelsAreKnown;var l=Object(O["sum"])(Object(O["map"])(n,"unreadCnt"));var c=Object(G["getClientTheme"])(e);var u=s.map(function(t){return Object(He["e"])(e,t)}).map(function(t){var a=Object(Gt["getLastReadTs"])(t);var r=Object(xn["getTimestampsByChannelId"])(e,t.id);var i=Object(Gt["getLatestTs"])(t,r.timestamps);i&&"0000000000.000000"!==i||(i=Math.floor(Date.now()/1e3)+".000000");var s=Object(xn["getTimestampsByChannelId"])(e,t.id,a);var o=Object(Rn["b"])(e,t.id)||{};return{id:t.id,lastRead:a,latest:i,displayName:Object(Gt["getDisplayNameForChannel"])(e,t,{publicChannelIncludeHashSign:false,imIncludeAtSign:false}),channelType:Object(Gt["getChannelType"])(t),isStarred:Object(Gt["isStarred"])(t)||false,priority:Object(Gt["getPriority"])(t)||0,unreadHighlightCnt:n[t.id].unreadHighlightCnt||0,messages:o,oldestSliceTimestamps:s&&s.timestamps||[],createdTime:Object(Gt["getChannelCreatedTime"])(t)}});return{logger:t,clogger:a,channels:u,clientTheme:c,allUnreadsSortOrder:Object(Wn["a"])(e),currentUserId:Object(i["getCurrentUserId"])(e),refreshId:Ln(e),totalUnreadCount:l,unreadChannelsAreKnown:o,featureOfflineMode:Object(i["isFeatureEnabled"])(e,"feature_offline_mode"),isOffline:!Object(Gn["c"])(e),isIAPhase1Enabled:Object(Hn["e"])(e)}}var So={markLastRead:function e(){return qn["b"].apply(void 0,arguments)},markManyLastRead:function e(){return qn["c"].apply(void 0,arguments)},setNewUnreadMsgCount:function e(){return Bn["d"].apply(void 0,arguments)}};var wo=Object(y["connect"])(Co,So)(ko);var jo=wo;var Io=a(122);var To=a(57);var Ao=a(98);var No=a(245);var Po=a.n(No);var Mo={buttonLabel:void 0,tooltipText:void 0,tooltipProps:{},className:void 0,isOpen:false,secondaryView:void 0,dispatch:O["noop"]};function Do(e){var t=e.iconType,a=e.buttonLabel,r=e.tooltipText,i=e.tooltipProps,s=e.onClick,o=e.className,l=e.isOpen,c=e.secondaryView,u=e.dispatch,d=Po()(e,["iconType","buttonLabel","tooltipText","tooltipProps","onClick","className","isOpen","secondaryView","dispatch"]);var p=!!c;var m=p?"bottom":"bottom-right";var h=n.a.createElement(Br["c"],te()({tip:r||a,position:m},i),n.a.createElement(Ao["a"],te()({onClick:s,className:_()("p-ia__view_header__button","p-ia__view_header__button--icon_only",o,{"p-ia__view_header__button--open":l})},d),n.a.createElement(X["b"],{type:t,className:"p-ia__view_header__button_icon"})," "));var v=n.a.createElement(Ao["a"],te()({onClick:s,className:_()("p-ia__view_header__button","p-ia__view_header__button--with_label",o,{"p-ia__view_header__button--open":l})},d),n.a.createElement(X["b"],{type:t,className:"p-ia__view_header__button_icon"})," ",a&&n.a.createElement("span",{className:"p-ia__view_header__button_text"},a));return n.a.createElement(n.a.Fragment,null,h,r?n.a.createElement(Br["c"],te()({tip:r,position:m},i),v):v)}Do.defaultProps=Mo;function xo(e){return{secondaryView:Object(Z["j"])(e)}}var Ro=Object(y["connect"])(xo)(Do);var Fo=new k["b"]("all_unreads");var Lo={newUnreadMsgCount:0,incrementRefreshId:O["noop"],isIAP1Enabled:false};var Uo=function(e){b()(t,e);function t(e){var a;c()(this,t);a=m()(this,v()(t).call(this,e));a.refreshMessages=a.refreshMessages.bind(he()(a));return a}d()(t,[{key:"refreshMessages",value:function e(){this.props.incrementRefreshId()}},{key:"render",value:function e(){var t=this.props,a=t.newUnreadMsgCount,r=t.isIAP1Enabled;if(a<1)return null;var i=Fo.t("{newUnreadMsgCount, plural, =1 {# new message} other {# new messages}}",{newUnreadMsgCount:a});if(r)return n.a.createElement(Ro,{onClick:this.refreshMessages,iconType:"sync",buttonLabel:i});return n.a.createElement("div",{className:"p-classic_nav__channel_header__refresh_button"},n.a.createElement(J["d"],{type:"outline",onClick:this.refreshMessages},n.a.createElement(X["b"],{inline:true,size:"inherit",type:"sync",className:"p-classic_nav__channel_header__refresh_button_icon"}),i))}}]);return t}(r["Component"]);Uo.displayName="RefreshUnreadMessagesButton";Uo.defaultProps=Lo;var Bo=function e(t){return{newUnreadMsgCount:Fn(t),isIAP1Enabled:Object(Hn["e"])(t)}};var qo={incrementRefreshId:function e(){return Bn["a"].apply(void 0,arguments)}};var Go=Object(y["connect"])(Bo,qo)(Uo);var Ho=a(2713);var Wo=a(3638);var Vo=new k["b"]("all_unreads");var Ko={className:void 0,isIAP1Enabled:false};var zo=function(e){b()(t,e);function t(e){var a;c()(this,t);a=m()(this,v()(t).call(this,e));a.renderMenu=a.renderMenu.bind(he()(a));return a}d()(t,[{key:"onSortSelected",value:function e(t){this.props.setUserPrefByApi({pref:"all_unreads_sort_order",value:t})}},{key:"renderMenu",value:function e(t){var a=this;var r=this.props.teamIsPaid;var i=function e(t,i){if(!r&&"priority"===t)return null;return n.a.createElement(To["b"],{key:t,label:i,onSelected:function e(){return a.onSortSelected(t)}})};var s=[{value:"alphabetical",label:Vo.t("Alphabetically")},{value:"priority",label:Vo.t("Scientifically")},{value:"newest",label:Vo.t("Newest")},{value:"oldest",label:Vo.t("Oldest")}];var o=Vo.t("Sort...");return n.a.createElement(To["f"],t,n.a.createElement(To["c"],{label:o}),s.map(function(e){var t=e.value,a=e.label;return i(t,a)}))}},{key:"renderSortingMenuTrigger",value:function e(){var t=this.props,a=t.allUnreadsSortOrder,r=t.isIAP1Enabled;var i="";i="alphabetical"===a?Vo.t("Sorted alphabetically"):"priority"===a?Vo.t("Sorted scientifically"):"newest"===a?Vo.t("Sorted by newest channel"):Vo.t("Sorted by oldest channel");var s=_()({"p-classic_nav__channel_header__subtitle":!r,"p-ia__view_header__subtitle":r});return n.a.createElement("div",{className:s},n.a.createElement(To["e"],{renderMenu:this.renderMenu,position:"bottom-left"},n.a.createElement(Ao["a"],null,n.a.createElement("span",null,i),n.a.createElement(X["b"],{type:"chevron-down",className:"align_top"}))))}},{key:"render",value:function e(){var t=this.props,a=t.className,r=t.isIAP1Enabled;var i=_()("p-classic_nav__channel_header__title","p-classic_nav__no_drag");var s=_()(a,{"p-classic_nav__channel_header__all_unreads_wrapper":!Object(E["a"])()});var o=Vo.t("All Unreads options",{fallbackHash:"2c3cef6f55bd97dda9e8fe6290c4e4a9f285409c",note:"Label for the Channel Header as a section. Not visible on screen as it is only for customers using screen readers."});if(r)return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"p-ia__view_header__title"},Vo.t("All unreads",{fallbackHash:"2c3cef6f55bd97dda9e8fe6290c4e4a9f285409c"}),this.renderSortingMenuTrigger()),n.a.createElement("div",{className:"p-ia__view_header__spacer"}),n.a.createElement(Go,null));return n.a.createElement("div",{className:s,role:"group","aria-label":o},n.a.createElement("div",{className:"p-classic_nav__channel_header__title_section"},n.a.createElement("div",{"aria-hidden":"true",className:i},Vo.t("All Unreads")),this.renderSortingMenuTrigger()),n.a.createElement(Ho["a"],{flex:true,regionId:"main"}),n.a.createElement(Go,null))}}]);return t}(r["Component"]);zo.displayName="AllUnreadsHeader";zo.defaultProps=Ko;var Qo=function e(t){return{allUnreadsSortOrder:Object(Wn["a"])(t),teamIsPaid:Object(ut["isPaidTeam"])(Object(Je["d"])(t)),isIAP1Enabled:Object(Hn["e"])(t)}};var Yo={setUserPrefByApi:function e(){return Io["d"].apply(void 0,arguments)}};var Jo=Object(y["connect"])(Qo,Yo)(zo);var Xo=a(1454);var Zo=a(187);var $o=new k["b"]("drafts");var el={className:void 0,featureComposeFlow:false,numDrafts:0,isIAP1Enabled:false};var tl=function(e){b()(t,e);function t(){c()(this,t);return m()(this,v()(t).apply(this,arguments))}d()(t,[{key:"render",value:function e(){var t=this.props,a=t.className,r=t.featureComposeFlow,i=t.numDrafts,s=t.isIAP1Enabled;if(!r)return null;if(s)return n.a.createElement("div",{className:"p-ia__view_header__title"},$o.t("Drafts"),n.a.createElement("div",{className:"p-ia__view_header__subtitle"},$o.t("{count, plural, =0 {No drafts} =1 {# draft} other {# drafts}}",{count:i})));return n.a.createElement("div",{className:a},n.a.createElement("div",{className:"p-classic_nav__channel_header__title_section"},n.a.createElement("div",{className:"p-classic_nav__channel_header__title p-classic_nav__no_drag"},$o.t("Drafts"))),n.a.createElement("div",{className:"p-classic_nav__channel_header__subtitle"},$o.t("{count, plural, =0 {No drafts} =1 {# draft} other {# drafts}}",{count:i})))}}]);return t}(r["Component"]);tl.displayName="DraftsHeader";tl.defaultProps=el;function al(e){var t=Object(Xo["a"])(e,{includeAllTeams:true});return{featureComposeFlow:Object(Zo["g"])(e),numDrafts:Object(O["size"])(t),isIAP1Enabled:Object(Hn["e"])(e)}}var rl=Object(y["connect"])(al)(tl);var nl=new k["b"]("drafts");var il={className:void 0,featureComposeFlow:false,isIAP1Enabled:false};function sl(e){var t=e.className,a=e.featureComposeFlow,r=e.isIAP1Enabled;if(!a)return null;if(r)return n.a.createElement("div",{className:"p-ia__view_header__title"},nl.t("New message"),n.a.createElement("div",{className:"p-ia__view_header__subtitle",id:"p-composer_page__header_subtitle"}));return n.a.createElement("div",{className:t},n.a.createElement("div",{className:"p-classic_nav__channel_header__title_section"},n.a.createElement("div",{className:"p-classic_nav__channel_header__title p-classic_nav__no_drag"},nl.t("New message"))),n.a.createElement("div",{className:"p-classic_nav__channel_header__subtitle p-composer_page__header_subtitle",id:"p-composer_page__header_subtitle"}))}sl.displayName="ComposerHeader";sl.defaultProps=il;function ol(e){return{featureComposeFlow:Object(Zo["g"])(e),isIAP1Enabled:Object(Hn["e"])(e)}}var ll=Object(y["connect"])(ol)(sl);var cl=a(1179);var ul=a(1693);var dl=a(3640);var pl=new k["b"]("welcome_place");var ml=function(e){b()(t,e);function t(){var e;c()(this,t);e=m()(this,v()(t).apply(this,arguments));e.isDismissClicked=false;e.clickDismiss=function(){e.isDismissClicked=true;e.props.dismissWelcomePlace();e.props.closeModal();e.props.clogger.track("WELCOME_PLACE",{contexts:{ui_context:{action:I["UiAction"].CLICK,ui_element:I["UiElement"].WELCOME_PLACE_DISMISS_MODAL_SUBMIT,ui_properties:{element_type:I["ElementType"].BUTTON}},welcome_place:{welcome_session_id:e.getWelcomeSessionId()}}})};e.hideModal=function(){e.props.closeModal();e.isDismissClicked||e.props.clogger.track("WELCOME_PLACE",{contexts:{ui_context:{action:I["UiAction"].CLICK,ui_element:I["UiElement"].WELCOME_PLACE_DISMISS_MODAL_HIDE},welcome_place:{welcome_session_id:e.getWelcomeSessionId()}}})};return e}d()(t,[{key:"getWelcomeSessionId",value:function e(){return this.props.isOnWelcomePlacePage?this.props.pageViewingSessionId:null}},{key:"render",value:function e(){return n.a.createElement(cl["a"],{title:pl.t("Remove the Get Started page?"),submitButtonText:pl.t("Remove",{note:"Primary call-to-action (button copy) on the \u201cRemove the Get Started page\u201d dialog. Implied direct object is the \u201cGet Started page.\u201d"}),cancelButtonText:pl.t("Cancel",{note:"Secondary call-to-action (button copy) that allows the user to close the modal."}),submitButtonType:"primary",onSubmit:this.clickDismiss,onCancel:this.hideModal,onClose:this.props.closeModal},n.a.createElement("div",{className:"welcome-place-dismiss-dialog__body"},pl.rt("If you're all set, you can remove this page permanently. If you need help later, head to our <a1>Help Center</a1>, or reach out to us at <a2>feedback@slack.com</a2>.",{note:"Body copy of the \u201cRemove the Get Started page\u201d dialog. Explains permanence of the primary action and provides alternate paths for help (Help Center link and clickable email address to support team)."},function(e){var t=e.tag,a=e.text;if("a1"===t)return n.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://get.slack.help/hc/"+Object(k["s"])()},a);if("a2"===t)return n.a.createElement("a",{href:"mailto:feedback@slack.com"},a);return null})))}}]);return t}(r["Component"]);ml.displayName="DismissWelcomePlaceDialog";function hl(e){return{clogger:Object(C["a"])({state:e}),pageViewingSessionId:Object(S["m"])(e),isOnWelcomePlacePage:Object(ul["a"])(e)}}var vl={closeModal:z["closeModal"],dismissWelcomePlace:w["c"]};var fl=Object(y["connect"])(hl,vl)(ml);var bl=a(3642);var gl=new k["b"]("welcome_place");var _l=function(e){b()(t,e);function t(){c()(this,t);return m()(this,v()(t).apply(this,arguments))}d()(t,[{key:"render",value:function e(){var t=this.props.className;var a=gl.t("Get Started",{note:"The label for the Welcome place, both for the title of the page in the header and for the sidebar affordance. Conveys the purpose of the page (a place with learning/action modules to help you start using Slack)."});var r=gl.t("A few essential steps to help you get going with Slack",{note:"The subtitle for the page that lets the reader know the purpose and what to expect from the page contents. Note: there should be no punctuation at the end."});return n.a.createElement("div",{className:_()(t,"welcome-place-page-header")},n.a.createElement("div",{className:"p-classic_nav__channel_header__title"},a),n.a.createElement("div",{className:"p-classic_nav__channel_header__subtitle overflow_ellipsis"},r))}}]);return t}(r["Component"]);_l.displayName="WelcomePlacePageHeader";function yl(){return{}}var Ol=Object(y["connect"])(yl)(_l);var kl=a(2715);var El=a(859);var Cl=a(1477);var Sl=new k["b"]("welcome_place");var wl=function e(t,a){var r;var n=(r={},qe()(r,H["e"].SendMessage,Sl.t("Send a message")),qe()(r,H["e"].JoinChannel,Sl.t("Join a few channels")),qe()(r,H["e"].EnableNotifications,Sl.t("Turn on notifications")),qe()(r,H["e"].AccountSetup,a?Sl.t("Finish setting up"):""),qe()(r,H["e"].DownloadDesktopApp,Sl.t("Get the Slack app")),qe()(r,H["e"].AddAppFileManagement,Sl.t("Connect your tools")),qe()(r,H["e"].InviteUsers,a?Sl.t("Assemble the team"):""),qe()(r,H["e"].WelcomeMessage,a?Sl.t("Choose a greeting"):""),qe()(r,H["e"].AddProfilePhoto,Sl.t("Add a profile photo")),r);return t?n[t]:""};var jl=function(e){b()(t,e);function t(){c()(this,t);return m()(this,v()(t).apply(this,arguments))}d()(t,[{key:"componentDidMount",value:function e(){var t=this.props,a=t.startWorkflow,r=t.isOnboarding,n=t.completeOnboarding;a();r&&n()}},{key:"render",value:function e(){var t=this.props,a=t.name,r=t.progress,i=r.total,s=r.completed,o=r.nextTaskType,l=t.isAnimating,c=t.featureNewxp3279,u=t.isIAP1Enabled;var d=Math.round(s/i*100);var p;p=0===s?Sl.t("First:"):s===i-1?Sl.t("Finally:"):Sl.t("Next:");var m=Sl.t("All done.");var h=s===i?m:(p+" "+wl(o,c)).trim();var v=[n.a.createElement("div",{key:"link_1",className:_()({"p-welcome-place--iap1__sidebar_content__link_progress":u,"p-welcome-place__sidebar_content__link_progress":!u})},n.a.createElement("div",{className:"p-welcome-place__sidebar_content__link_progress_inner",style:{width:d+"%"}})),n.a.createElement("div",{key:"link_2",title:h,className:"p-welcome-place__sidebar_content__link_caption overflow_ellipsis"},h||" ")];return n.a.createElement("div",{className:"display_flex flex_direction_column full_width p-welcome-place__sidebar_content"},n.a.createElement("div",{className:_()({"p-welcome-place--iap1__sidebar_content__title margin_bottom_10":u,"p-welcome-place__sidebar_content__title margin_bottom_25":!u})},a),u?v.reverse():v,n.a.createElement("div",{className:_()("p-welcome-place__sidebar_content__gradient",{"p-welcome-place__sidebar_content__gradient--animating":l})}))}}]);return t}(r["Component"]);jl.displayName="SidebarLinkContent";function Il(e){return{progress:Object(S["r"])(e),isAnimating:Object(S["a"])(e),isOnboarding:!!Object(El["f"])(e),isIAP1Enabled:Object(Hn["e"])(e),featureNewxp3279:Object(i["isFeatureEnabled"])(e,"feature_newxp_3279")}}function Tl(e){return{startWorkflow:function t(){return e(Object(w["i"])())},completeOnboarding:function t(){e(Object(kl["a"])())}}}var Al=Object(y["connect"])(Il,Tl)(jl);var Nl=a(331);var Pl=a(908);var Ml=a(873);var Dl=a(86);var xl=a(300);var Rl=Object(At["b"])("Clogs paid-benefits page and corresponding sidebar link",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.action,n=a.step,i=a.elementType,s=a.elementName,o=a.isPrimaryCTA,l=void 0!==o&&o;var c=t();var u=Object(C["a"])({state:c});var d=Object(xl["t"])(c);var p=Object(xl["r"])(c)===Dl["e"].standard.id;var m="";switch(d){case Dl["h"].FREE_NO_TRIAL:m="free_no_trial";break;case Dl["h"].IN_TRIAL:m=p?"standard_trial":"plus_trial";break;case Dl["h"].FREE_EXPIRED_TRIAL:m=p?"standard_downgrade":"plus_downgrade";break;case Dl["h"].PAID:m=p?"standard_upgraded":"plus_upgraded";break;default:break}u.track(I["EventId"].UPGRDEXP_BENEFITS,{contexts:{ui_context:{step:n,step_variant:m,action:r,ui_properties:{element_type:i,element_name:s},is_primary_cta:l}}})});Rl.meta={name:"clogPaidBenefits",key:"actionsClogPaidBenefitsClogPaidBenefits",description:"Clogs paid-benefits page and corresponding sidebar link"};Rl.propTypes={action:Dn["default"].number.isRequired,step:Dn["default"].number.isRequired,elementType:Dn["default"].number.isRequired,elementName:Dn["default"].string.isRequired,isPrimaryCTA:Dn["default"].bool};var Fl=Rl;function Ll(e){var t=Object(Xo["a"])(e)||[];var a=Object(Zo["f"])(e)||[];var r=t.length-a.length;return r>0?r:0}var Ul=Object(At["b"])("Clogs a user click on the drafts sidebar item",function(e,t){var a=t();var r=Object(C["a"])({state:a});r.track("SIDEBAR_DRAFTS_CLICK",{is_iap1:Object(Hn["e"])(a)})});Ul.meta={name:"clogDraftsSidebarItem",key:"actionsClogDraftsSidebarItemClogDraftsSidebarItem",description:"Clogs a user click on the drafts sidebar item"};Ul.propTypes=null;var Bl=Ul;var ql={addToSectionNavigation:O["noop"],composerVisible:false,removeFromSectionNavigation:O["noop"],userAttentionIsOnChat:false};var Gl=function(e){b()(t,e);function t(){var e;c()(this,t);e=m()(this,v()(t).call(this));Object(Mn["a"])(he()(e),["focus"]);e.pageRef=n.a.createRef();return e}d()(t,[{key:"componentDidUpdate",value:function e(t){var a=this.props,r=a.addToSectionNavigation,n=a.composerVisible,i=a.removeFromSectionNavigation,s=a.userAttentionIsOnChat;var o={currentComposerVisible:n,currentUserAttentionIsOnChat:s,prevComposerVisible:t.composerVisible,prevUserAttentionIsOnChat:t.userAttentionIsOnChat};Object(Vi["a"])(o)?r():Object(Ki["a"])(o)&&i()}},{key:"focus",value:function e(){var t=this.pageRef.current&&this.pageRef.current.getWrappedInstance?this.pageRef.current.getWrappedInstance():this.pageRef.current;if(!t||!t.focus)return;t.focus()}},{key:"render",value:function e(){var t=this.props.children;return n.a.cloneElement(t,{ref:this.pageRef})}}]);return t}(n.a.Component);Gl.displayName="SectionNavPageWrapper";Gl.defaultProps=ql;function Hl(e){return{composerVisible:Object(Wi["isComposerVisible"])(e),userAttentionIsOnChat:Object(ii["e"])(e)}}var Wl=Object(y["connect"])(Hl)(Object(Gi["a"])(Gl,"SectionNavPage",{index:0}));var Vl=a(85);var Kl=a.n(Vl);var zl=a(176);var Ql=a(555);var Yl=a(1885);var Jl=a(1695);var Xl=Object(P["b"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.draftId;return!!(e&&e.draftsExpansion&&e.draftsExpansion[a])});Xl.meta={name:"isDraftExpanded",key:"draftsExpansionStoreSelectorsIsDraftExpanded"};Xl.propTypes={draftId:Dn["default"].string.isRequired};var Zl=a(2716);var $l=a(330);var ec=a(254);var tc=a(1078);var ac=Object(At["b"])("Navigate to the last known channel",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.reason,n=a.shouldReplaceState,i=void 0===n||n;var s=t();var o=Object(tc["a"])(s);Object($l["c"])(ec["a"],{entityId:o},{reason:r,shouldReplaceState:i})});ac.meta={name:"navigateToPrevChannel",key:"actionsNavigateToPrevChannelNavigateToPrevChannel",description:"Navigate to the last known channel"};ac.propTypes={reason:Dn["default"].string.isRequired,shouldReplaceState:Dn["default"].bool};var rc=ac;var nc=Object(P["b"])(function(e){var t,a;var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.draftId;return!!(null===e||void 0===e?void 0:null===(t=e.draftSending)||void 0===t?void 0:null===(a=t[n])||void 0===a?void 0:a.isSending)});nc.meta={name:"isDraftSending",key:"draftSendingStoreSelectorsIsDraftSending"};nc.propTypes={draftId:Dn["default"].string.isRequired};var ic=a(304);var sc=a(2663);var oc=Object(At["b"])("Prepare a draft to be sent to a channel, DM, or MPDM",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.draft,n=a.isQuiet;var s=Object(zl["c"])(r);if(!Object(O["isEmpty"])(s))return Promise.resolve(e(Object(ic["getOrFetchMemberCounts"])({channelId:s[0]}))).then(function(e){if(e&&e.promise)return e.promise;return Promise.resolve()}).then(function(){return{channelId:s[0]}});var o=Object(zl["k"])(r);if(!Object(O["isEmpty"])(o)){var l;var c;if(1===o.length){c=o;l=Object(He["l"])(t(),o[0])}else{var u=Object(i["getCurrentUserId"])(t());c=Object(O["without"])(o,u);var d=[u].concat(Da()(c));l=Object(He["o"])(t(),d)}if(l){if(!n&&!Object(Gt["isOpen"])(l)){var p;Object(Gt["isIm"])(l)&&(p=Object(Gt["getMemberIdFromIm"])(l));e(Object(sc["a"])({channel:l.id,user:p}))}return Promise.resolve({channelId:l.id})}return e(Object(Lr["startMpimByMemberIds"])({isQuiet:n,memberIds:c,shouldNavigateToChannel:false})).then(function(e){return{channelId:e.id}})}return Promise.resolve({})});oc.meta={name:"prepareDraftForSend",key:"draftsStoreThunksPrepareDraftForSendPrepareDraftForSend",description:"Prepare a draft to be sent to a channel, DM, or MPDM"};oc.propTypes={draft:Dn["default"].object.isRequired};var lc=oc;var cc=a(278);var uc=a.n(cc);var dc=a(332);var pc=a.n(dc);var mc=a(1447);var hc=a(2008);var vc=a(63);function fc(e,t){var a={};var r=Object(zl["o"])(e,t);if(Object(O["isEmpty"])(t)&&!r)a.missingDraft=true;else{var n=Object(zl["c"])(t);var s=Object(zl["k"])(t);if(Object(O["isEmpty"])(n))if(Object(O["isEmpty"])(s))a.missingDestination=true;else{var o=Object(i["getCurrentUserId"])(e);var l=Object(O["without"])(s,o);l.length>ei["MAX_OTHER_MPDM_MEMBERS"]&&(a.invalidMemberCount=true);var c=l.filter(function(t){var a=Object(M["e"])(e,t);return Object(Za["isDeleted"])(a)});c.length&&c.length===s.length&&(1===c.length?a.deactivatedMember=true:a.deactivatedMembers=true)}else if(n.length>1)a.invalidChannelCount=true;else{var u=Object(He["e"])(e,n[0]);(Object(Gt["isUnknownOrNonExistent"])(u)||Object(Gt["isArchived"])(u)||!Object(vc["r"])(e,n[0]))&&(a.invalidChannel=true)}if(Object(zl["p"])(t)){var d=Object(zl["l"])(t);Object(hc["a"])({contents:d})||(a.invalidText=true)}else r||(a.invalidText=true);if(r){Object(zl["u"])(e,t)||(a.filesUnsendable=true);Object(zl["i"])(t)&&Object(zl["i"])(t).length>ei["MAX_FILE_UPLOAD_COUNT"]&&(a.tooManyFiles=true)}}return{ok:Object(O["isEmpty"])(a),reasons:a}}function bc(e,t){var a=fc(e,t);return a.ok}var gc=a(4695);var _c=a(317);var yc=a(2790);var Oc=a(4690);var kc=a(2746);var Ec=Object(At["b"])("Sends a composer message",function(){var e=uc()(regeneratorRuntime.mark(function e(t,a){var r,n,i,s,o,l,c,u,d,p,m,h,v,f,b=arguments;return regeneratorRuntime.wrap(function e(g){while(1)switch(g.prev=g.next){case 0:v=function e(){t(Object(Oc["a"])({draftId:l}))};h=function e(){s.info("Composer message successfuly sent. Removing the draft ("+l+")");t(Object(Yl["a"])({ids:[l]}))};m=function e(){m=uc()(regeneratorRuntime.mark(function e(){var r,i,s;return regeneratorRuntime.wrap(function e(o){while(1)switch(o.prev=o.next){case 0:o.next=2;return t(Object(gc["a"])({channelId:d}));case 2:r=Object(Zl["a"])(a());i=Object(Yt["a"])(a());"Pcomposer"===i&&r===l&&t(Object(pn["a"])({id:d}));if(!Object(zl["o"])(a(),n)){o.next=8;break}s=t(Object(fe["a"])({msgOps:c,channelId:d}));return o.abrupt("return",t(Object(_c["m"])({fileIds:Object(zl["i"])(n),channelId:d,blocks:s,xArgs:{draft_id:l},reason:"send_composer_message"})).then(h).finally(v));case 8:return o.abrupt("return",t(Object(kc["a"])({channelId:d,delta:new pc.a(c),xArgs:{draft_id:l}})).then(h).finally(v));case 9:case"end":return o.stop()}},e)}));return m.apply(this,arguments)};p=function e(){return m.apply(this,arguments)};r=b.length>2&&void 0!==b[2]?b[2]:{},n=r.draft,i=r.fromKeyboardShortcut;if(bc(a(),n)){g.next=7;break}return g.abrupt("return",Promise.reject(new Error("Composer message is not sendable. This may be due to a missing destination, missing text, or posting restrictions")));case 7:if(Object(Gn["c"])(a())){g.next=9;break}return g.abrupt("return",Promise.reject(new Error("Composer message is not sendable. Client is offline")));case 9:s=Object(Ne["a"])({getState:a,label:"COMPOSER"});o=Object(C["a"])({getState:a});l=Object(zl["d"])(n);c=Object(zl["l"])(n);if(!nc(a(),{draftId:l})){g.next=16;break}s.info("Already sending draft (draftId: "+l+")");return g.abrupt("return",Promise.resolve());case 16:t(Object(Oc["b"])({draftId:l,isSending:true}));g.next=19;return t(lc({draft:n}));case 19:u=g.sent;d=u.channelId;s.info("Preparing to send a composer message to "+d);o.track(I["EventId"].COMPOSE_FLOW,{draft_id:l,contexts:{ui_context:{action:i?I["UiAction"].KEYDOWN:I["UiAction"].CLICK,step:I["UiStep"].COMPOSE_FLOW_SEND}}});f=Object(mc["a"])({contents:c});if(!Object(Gt["shouldShowAtChannelWarning"])(a(),d,f)){g.next=27;break}t(Object(yc["a"])({channelId:d,keywordsInUse:f,onClose:function e(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=a.didSend;r||t(Object(Oc["a"])({draftId:l}))},onSend:function e(){p()}}));return g.abrupt("return",Promise.reject(new Error("Shouty rooster in effect")));case 27:return g.abrupt("return",p());case 28:case"end":return g.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}());Ec.meta={name:"sendComposerMessage",key:"actionsSendMessageSendComposerMessageSendComposerMessage",description:"Sends a composer message"};Ec.propTypes={draft:Dn["default"].object.isRequired};var Cc=a(646);var Sc=a(4114);var wc=a(2086);var jc=a(1164);var Ic=a(1690);function Tc(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:O["noop"];var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document;var n=Object(jc["a"])();e||n.warn("USE_EVENT_LISTENER",'Missing required "eventName"');var i=Object(r["useRef"])();Object(r["useEffect"])(function(){i.current=t},[t]);Object(r["useEffect"])(function(){var t=function e(t){return i.current(t)};a.addEventListener(e,t);return function(){a.removeEventListener(e,t)}},[e,a])}var Ac=a(348);function Nc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O["noop"];var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];Object(r["useEffect"])(function(){return e()},t)}var Pc=a(5090);var Mc=a(55);var Dc=a(1795);var xc=a(2005);var Rc=a(2717);var Fc=a(2718);var Lc=a(2719);var Uc=a(457);var Bc=a(2006);var qc=a(2720);var Gc=a(2007);var Hc=a(758);var Wc=Object(At["b"])("Request channel history for a given timespan",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelId,n=a.historyRateLimiter,i=a.oldestTs,s=a.latestTs;var o=n.isRequestPending({oldest:i,latest:s});if(o)return Promise.resolve();var l=n.shouldPreventHistoryRequest({oldest:i,latest:s});if(l){var c=Object(Ne["a"])({getState:t});c.error({channelId:r,latestTs:s,oldestTs:i},"composer_request_rate_limited");return Promise.resolve()}var u=e(Object(Vt["a"])({oldest:i,latest:s,channelId:r,reason:"composer-context"}));if(u){n.logHistoryRequest({oldest:i,latest:s,promise:u});return u}return Promise.resolve()});Wc.meta={name:"fetchChannelHistory",key:"componentsComposerPageUtilityFetchChannelHistoryFetchChannelHistory",description:"Request channel history for a given timespan"};Wc.propTypes={channelId:Dn["default"].string.isRequired,historyRateLimiter:Dn["default"].shape({isRequestPending:Dn["default"].func.isRequired,logHistoryRequest:Dn["default"].func.isRequired,shouldPreventHistoryRequest:Dn["default"].func.isRequired}).isRequired,latestTs:Dn["default"].string,oldestTs:Dn["default"].string};var Vc=Wc;function Kc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isLoading,a=e.messages;var r=[];var n=[];var i=Object(O["filter"])(a,function(e){if(Object(zi["isHidden"])(e))return false;if(Object(zi["isTempMsg"])(e))return false;return true});if(Object(O["isEmpty"])(i)){if(t){r.push("loading_empty");n.push({type:"loading_empty"})}}else{if(t){var s=Object(zi["getMessageTs"])(i[0]);r.push("loading_inline-"+s);n.push({type:"loading_inline"})}var o=Object(Ji["a"])(i),l=o.rollups,c=o.messages;c.forEach(function(e,t){var a=Object(zi["getMessageTs"])(c[t-1]);var i=Object(zi["getMessageTs"])(e);var s=Object(Qi["a"])(a);var o=Object(Qi["a"])(i);if(s!==o){r.push("day_divider-"+o+"-"+i);n.push({type:"day_divider",dayTs:Number(o)})}r.push(i);n.push({type:"message",ts:i,prevTs:a,rollup:l[i]})})}return{rows:n,keys:r}}var zc=Object(Fi["a"])(Ts);var Qc=Object(Fi["a"])(Ri["a"]);var Yc={channel:Dn["default"].object,channelId:Dn["default"].string,dispatch:Dn["default"].func,isLoading:Dn["default"].bool,messages:Dn["default"].array,reachedEnd:Dn["default"].bool,reachedStart:Dn["default"].bool,theme:Dn["default"].oneOf(["dense","light"]).isRequired,viewId:Dn["default"].string.isRequired,featureMessageKitInMessagePane:Dn["default"].bool,isIAP1Enabled:Dn["default"].bool};var Jc={channel:void 0,channelId:void 0,dispatch:O["noop"],isLoading:false,messages:[],reachedStart:false,reachedEnd:false,featureMessageKitInMessagePane:false,isIAP1Enabled:false};var Xc=function(e){b()(t,e);function t(e){var a;c()(this,t);a=m()(this,v()(t).call(this,e));a.isFocusableItem=a.isFocusableItem.bind(he()(a));a.requestHistory=a.requestHistory.bind(he()(a));a.renderList=a.renderList.bind(he()(a));a.renderRow=a.renderRow.bind(he()(a));a.isDegradedList=Object(Gc["a"])();a.historyRateLimiter=new xc["a"];a.layout=new qc["a"]({shouldExcludeFirstItemFromGravity:false,stickToBottom:true});return a}d()(t,[{key:"componentDidUpdate",value:function e(t){var a=this.props.channelId;if(a!==t.channelId){this.historyRateLimiter.reset();this.layout.heightCache&&this.layout.heightCache.invalidate&&this.layout.heightCache.invalidate()}}},{key:"isFocusableItem",value:function e(t){var a=t.index;var r=this.rows[a];return r&&"message"===r.type}},{key:"requestHistory",value:function e(t){var a=t.oldest,r=t.latest;var n=this.props,i=n.channel,s=n.channelId,o=n.dispatch;if(Object(Mc["e"])(i))return;if(Object(Gt["isFromAnotherTeam"])(i))return;o(Vc({channelId:s,historyRateLimiter:this.historyRateLimiter,latestTs:r,oldestTs:a}))}},{key:"renderRow",value:function e(t){var a=this.props,r=a.channelId,i=a.theme,s=a.featureMessageKitInMessagePane,o=a.isIAP1Enabled;var l=this.rows[t];if(!l)return null;var c=_()({"p-composer_page__context_item--top":0===t,"p-composer_page__context_item--bottom":t===this.rows.length-1});switch(l.type){case"message":if(s)return n.a.createElement(Qc,{channelId:r,className:c,ts:l.ts,prevTs:l.prevTs,theme:i,rollup:l.rollup,clickableTimestamp:true});return n.a.createElement(zc,{channelId:r,className:c,ts:l.ts,prevTs:l.prevTs,theme:i,rollup:l.rollup});case"day_divider":return n.a.createElement("div",{className:_()(c,"p-composer_page__context_list_divider")},n.a.createElement(Li["b"],{date:l.dayTs,sticky:false}),n.a.createElement(Li["a"],{date:l.dayTs,isIAP1Enabled:o}));case"loading_empty":return n.a.createElement(Fc["a"],null);case"loading_inline":return n.a.createElement(Lc["a"],{className:c});default:return null}}},{key:"renderList",value:function e(t){var a=this;var r=this.props,i=r.isLoading,s=r.messages,o=r.reachedEnd,l=r.reachedStart,c=r.viewId;var u=Kc({isLoading:i,messages:s}),d=u.rows,p=u.keys;this.rows=d;this.keys=p;var m=this.isDegradedList?Bc["a"]:Uc["a"];return n.a.createElement(Cc["a"],null,function(e){var r=e.measureRef,i=e.width,s=e.height;return n.a.createElement("div",{className:"p-composer_page__context_list_wrapper",ref:r},n.a.createElement(m,te()({},t,{height:s,id:c+"-list",isFocusableItem:a.isFocusableItem,keys:p,reachedEnd:o,reachedStart:l,rowRenderer:a.renderRow,width:i})))})}},{key:"render",value:function e(){var t=this.props,a=t.latest,r=t.messages,i=t.oldest,s=t.reachedEnd,o=t.reachedStart,l=t.viewId;if(o&&s&&Object(O["isEmpty"])(r))return null;var c=Object(O["map"])(r,zi["getMessageTs"]);return n.a.createElement(Jn["a"],{id:l},n.a.createElement("div",{className:"p-composer_page__context"},n.a.createElement(Rc["a"],{latest:a,layout:this.layout,listRenderer:this.renderList,oldest:i,reachedEnd:s,reachedStart:o,requestHistory:this.requestHistory,startTs:null,timestamps:c})))}}]);return t}(Dc["a"]);Xc.displayName="ComposerContext";Xc.propTypes=Yc;Xc.defaultProps=Jc;function Zc(e,t){var a=t.channelId;var r=Object(xn["getPotentiallyOutdatedTimestamps"])(e,a)||{},n=r.end,s=r.prevReachedEnd,o=r.reachedEnd,l=r.reachedStart,c=r.start,u=r.timestamps;var d=Object(Rn["d"])(e,a,u);return{channel:Object(He["e"])(e,a),isLoading:Object(Hc["isChannelLoading"])(e,a),latest:n,messages:Object(O["values"])(d),oldest:c,prevReachedEnd:s,reachedEnd:o,reachedStart:l,theme:Object(yi["a"])(e),featureMessageKitInMessagePane:Object(i["isFeatureEnabled"])(e,"feature_message_kit_in_message_pane"),isIAP1Enabled:Object(Hn["e"])(e)}}var $c=Object(y["connect"])(Zc)(Xc);var eu=a(93);var tu=a(357);function au(e,t){var a=fc(e,t);if(!a.ok){if(a.reasons.invalidChannelCount)return{type:"too_many_channels"};if(a.reasons.invalidChannel)return{type:"invalid_channel"};if(a.reasons.invalidMemberCount)return{type:"too_many_members"};if(a.reasons.deactivatedMember)return{type:"deactivated_member"};if(a.reasons.deactivatedMembers)return{type:"deactivated_members"}}var r=Object(zl["k"])(t);var n=Object(i["getCurrentUserId"])(e);var s=Object(O["without"])(r,n);if(!Object(O["isEmpty"])(s)&&s.length===ei["MAX_OTHER_MPDM_MEMBERS"])return{type:"max_members"};var o=[];var l=[];var c=[];var u=Object(zl["c"])(t);Object(O["forEach"])(u,function(t){var a=Object(He["e"])(e,t);if(!Object(Mc["b"])(a))return;Object(Gt["isPendingExternallySharedChannel"])(a)?o.push(a):Object(Gt["isExternallySharedChannel"])(a)&&l.push(a);Object(Gt["isMemberOfChannel"])(a)||c.push(a)});if((o.length||l.length)&&!Object(i["isFeatureEnabled"])(e,"feature_context_bar_scalable")){var d=[].concat(o,l);var p=Object(O["flatMap"])(d,function(t){return Object(Gt["getPendingAndConnectedTeamIds"])(e,t)});if(o.length)return{type:"pending_shared_channels",data:{pendingSharedTeamIds:p}};return{type:"shared_channels",data:{sharedTeamIds:p}}}if(c.length)return{type:"unjoined_channels"};return{}}var ru=new k["b"]("drafts");var nu={alertData:void 0,alertType:void 0,featureComposeFlow:false};function iu(e){var t=e.alertData,a=e.alertType,r=e.featureComposeFlow;if(!r)return null;if(!a)return null;var i;var s;if("too_many_channels"===a){i="error";s=ru.t("Too many channels")}else if("invalid_channel"===a){i="error";s=ru.t("Cannot send message to this channel")}else if("too_many_members"===a){i="error";s=ru.t("Direct messages can\u2019t have more than {maxMembers} people.",{maxMembers:ei["MAX_OTHER_MPDM_MEMBERS"]})}else if("deactivated_member"===a){i="error";s=ru.t("This account has been deactivated.")}else if("deactivated_members"===a){i="error";s=ru.t("These accounts have been deactivated.")}else if("max_members"===a){i="warning";s=ru.t("Direct messages can\u2019t have more than {maxMembers} people.",{maxMembers:ei["MAX_OTHER_MPDM_MEMBERS"]})}else if("pending_shared_channels"===a){i="warning";var o=t.pendingSharedTeamIds.map(function(e){return n.a.createElement(tu["a"],{id:e})});s=ru.rt("<strong>This channel will soon be shared with {teams}.</strong> Messages and files sent here will be seen by members of both organizations.",{teams:Object(k["i"])(o,{react:true})})}else if("shared_channels"===a){i="warning";var l=t.sharedTeamIds.map(function(e){return n.a.createElement(tu["a"],{id:e})});s=ru.rt("<strong>This is a shared channel.</strong> Messages and files sent here will also be seen by members of {teams}.",{teams:Object(k["i"])(l,{react:true})})}else if("unjoined_channels"===a){i="warning";s=ru.t("You\u2019ll join this channel when you send this message.")}return n.a.createElement(eu["a"],{className:"p-composer_page__destination_alert",level:i,type:"inline"},s)}iu.displayName="ComposerDestinationAlert";iu.defaultProps=nu;function su(e,t){var a=t.draft;var r=au(e,a);return{alertData:r.data,alertType:r.type}}var ou=Object(y["connect"])(su)(iu);ou.propTypes={draft:Dn["default"].object.isRequired};var lu=ou;var cu=a(420);var uu=a(124);var du=a(153);var pu=Object(At["b"])("Split destination ids into channels and members",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.ids;var n=t();var s=Object(i["getCurrentUserId"])(n);var o=[];var l=[];Object(O["forEach"])(r,function(e){if(Object(uu["a"])(e)){var t=Object(He["e"])(n,e);if(Object(Gt["isMpim"])(t)){var a=Object(Gt["getMemberIdsFromMpim"])(t);var r=Object(O["without"])(a,s);l.push.apply(l,Da()(r))}else o.push(e)}else if(Object(du["a"])(e))l.push(e);else{var i=Object(Ne["a"])({state:n});i.warn("COMPOSER",'Unhandled selected id "'+e+'"')}});return Promise.resolve({channelIds:o,memberIds:l})});pu.meta={name:"categorizeDestinationIds",key:"componentsComposerPageUtilityCategorizeDestinationIdsCategorizeDestinationIds",description:"Split destination ids into channels and members"};pu.propTypes={ids:Dn["default"].arrayOf(Dn["default"].string.isRequired)};var mu=pu;function hu(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.selectedExternalTeamId;return!!(a&&Object(Za["isMember"])(e.entity)&&Object(Za["isExternal"])(e.entity)&&!Object(Za["isMemberOnTeam"])(e.entity,a))}var vu=a(2685);var fu=new k["b"]("drafts");var bu={featureComposeFlow:false,isActive:false,isDisabled:false};function gu(e){var t=e.entity,a=e.featureComposeFlow,r=e.isActive,i=e.isDisabled;var s;Object(Za["isMember"])(t)&&a&&i&&(s=fu.t("From another organization"));return n.a.createElement(vu["a"],{model:t,isActive:r,isDisabled:i,secondaryContent:s})}gu.displayName="ComposerDestinationSelectOption";gu.defaultProps=bu;var _u=gu;function yu(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function Ou(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?yu(Object(a),true).forEach(function(t){qe()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):yu(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var ku=new k["b"]("drafts");var Eu={dispatch:O["noop"],featureComposeFlow:false,refToForward:void 0,onChange:O["noop"],onSelect:O["noop"],selectedExternalTeamId:void 0};function Cu(e){var t=e.dispatch,a=e.draft,r=e.featureComposeFlow,i=e.refToForward,s=e.onChange,o=e.onSelect,l=e.selectedExternalTeamId;if(!a||!r)return null;var c=Object(zl["c"])(a);var u=Object(zl["k"])(a);var d;Object(O["isEmpty"])(u)?Object(O["isEmpty"])(c)||(d=c):d=u;var p=Object(O["isEmpty"])(u);var m=Object(O["isEmpty"])(c);return n.a.createElement(n.a.Fragment,null,n.a.createElement("span",{className:"p-composer_page__destination_select_icon"},ku.t("To:")),n.a.createElement(cu["d"],{ariaLabel:ku.t("Type the name of a person or channel"),className:"p-composer_page__destination_select",classPrefix:"p-composer_page__destination",enableLoadingState:false,expandOnFocus:Object(O["isEmpty"])(d),inputRef:i,maxHeight:130,onKeyDown:function e(t,a){var r=a.hasActiveRowIndex;if("Enter"===t.key&&!r&&!Object(O["isEmpty"])(d)){t.preventDefault();o()}if("Tab"===t.key&&!t.shiftKey){t.preventDefault();o()}},onSelectedItemsChange:function e(a){var r=Object(O["map"])(a,"value");t(mu({ids:r})).then(function(e){var t=Object(zl["a"])(e);s(t);Object(O["isEmpty"])(c)&&!Object(O["isEmpty"])(e.channelIds)&&o()})},optionsRowHeight:32,placeholderText:ku.t("Type the name of a person or channel"),processOptions:function e(t){return Promise.resolve(t.map(function(e){return Ou({},e,{isDisabled:hu(e,{selectedExternalTeamId:l})})}))},renderOption:function e(t,a){return n.a.createElement(_u,{entity:t.entity,featureComposeFlow:r,id:t.value,isActive:a.isActive,isDisabled:t.isDisabled})},searcherOptions:{allowEmptyQuery:true,entities:{channels:p&&{includeExternallyShared:true,includeFromAnotherTeam:true,includePublic:true,includePrivate:true,includeMpims:m,includeArchived:false,onlyVisibleMpims:true},members:m&&{includeSelf:Object(O["isEmpty"])(u),includeSlackbot:true,includeBots:true,includeWorkflows:false,includeExternal:true,onlyLocalTeam:false,onlyAdmins:false,includeGuests:true,matchEmailField:true},userGroups:false}},selectId:"composer_page__destination",selectedOptions:Object(O["map"])(d,function(e){return{label:e,value:e}}),width:"100%"}))}Cu.defaultProps=Eu;function Su(e,t){var a=t.draft;var r=Object(zl["k"])(a);var n=r.map(function(t){return Object(M["e"])(e,t)});var i=Object(O["find"])(n,function(e){return Object(Za["isExternal"])(e)});return{featureComposeFlow:Object(Zo["g"])(e),selectedExternalTeamId:Object(Za["getTeamIdForMember"])(e,i)}}var wu=Object(y["connect"])(Su)(Cu);var ju=n.a.forwardRef(function(e,t){return n.a.createElement(wu,te()({},e,{refToForward:t}))});var Iu=a(346);var Tu=a(1937);var Au=a(134);function Nu(e,t){var a=fc(e,t),r=a.reasons;return!!(r.invalidChannelCount||r.invalidChannel||r.invalidMemberCount)}var Pu=new k["b"]("drafts");var Mu={destinationNames:void 0,destinationNamesText:void 0,isDisabled:false,isInvalid:false,onClick:O["noop"],shouldUseEmptyText:false};function Du(e){var t=e.destinationNames,a=e.destinationNamesText,r=e.draft,i=e.isDisabled,s=e.isInvalid,o=e.onClick,l=e.shouldUseEmptyText;var c=Object(zl["n"])(r);var u;if(c){var d=Object(O["map"])(t,function(e){return e||n.a.createElement(Iu["b"],{size:Iu["a"].SMALL})});u=Object(k["i"])(d,{noConj:true,react:true})}else l&&(u=Pu.t("No destination"));return n.a.createElement(Ao["a"],{"aria-label":a,className:_()("p-composer_page__destination_text",{"p-composer_page__destination_text--emphasized":Object(zl["r"])(r)&&c,"p-composer_page__destination_text--invalid":s,"p-composer_page__destination_text--disabled":i}),onClick:o},u)}Du.displayName="ComposerDestinationText";Du.defaultProps=Mu;function xu(e,t){var a=t.draft;return{destinationNames:Object(zl["g"])(e,{draft:a,renderChannel:function e(t){return n.a.createElement(n.a.Fragment,null,Object(Gt["isPrivateChannel"])(t)&&n.a.createElement(X["b"],{type:"lock"}),n.a.createElement(Tu["a"],{channel:t,displayFormerNames:Au["d"].false,includeChannelPrefix:true,inline:true}))}}),destinationNamesText:Object(zl["g"])(e,{draft:a,renderChannel:function t(a){return Object(Gt["getDisplayNameForChannel"])(e,a,{imIncludeAtSign:false})}}),isInvalid:Nu(e,a)}}var Ru=Object(y["connect"])(xu)(Du);var Fu=new k["b"]("drafts");var Lu={featureComposeFlow:false,refToForward:void 0,isDisabled:false,isInteractive:false,onChange:O["noop"],onInteractive:O["noop"],onSelect:O["noop"]};function Uu(e){var t=e.draft,a=e.featureComposeFlow,r=e.refToForward,i=e.isDisabled,s=e.isInteractive,o=e.onChange,l=e.onInteractive,c=e.onSelect;var u=s&&!i;return n.a.createElement("div",{className:_()("p-composer_page__subheader",{"p-composer_page__subheader--focused":u})},u?n.a.createElement("div",{className:"p-composer_page__destination_input"},n.a.createElement(ju,{draft:t,onChange:o,onSelect:c,ref:r})):n.a.createElement("div",{className:"p-composer_page__destination_text_wrapper"},Fu.t("To:"),"\xa0",n.a.createElement(Ru,{draft:t,isDisabled:i,onClick:l})),n.a.createElement(lu,{draft:t,featureComposeFlow:a}))}Uu.displayName="ComposerSubheader";Uu.defaultProps=Lu;function Bu(e){return{featureComposeFlow:Object(Zo["g"])(e)}}var qu=Object(y["connect"])(Bu)(Uu);var Gu=n.a.forwardRef(function(e,t){return n.a.createElement(qu,te()({},e,{refToForward:t}))});var Hu=a(202);var Wu=a(106);var Vu=a(131);var Ku=a(4676);var zu=a(2025);var Qu=new k["b"]("drafts");var Yu={destinationNames:void 0,contextChannelId:void 0,dispatch:O["noop"],featureComposeFlow:false,featureUnifiedDrafts:false,focusPrev:O["noop"],refToForward:void 0,isDraftValid:false,isExpanded:false,isHeightConstrained:false,isSendButtonEnabledPref:false,isSendingDraft:false,onChange:O["noop"],onExpand:O["noop"],onFocus:O["noop"],onIsContextBarShowing:O["noop"],onSend:O["noop"]};function Ju(e){var t=e.destinationNames,a=e.contextChannelId,i=e.dispatch,s=e.draft,o=e.featureComposeFlow,l=e.featureUnifiedDrafts,c=e.focusPrev,u=e.refToForward,d=e.isHeightConstrained,p=e.isDraftValid,m=e.isExpanded,h=e.isSendButtonEnabledPref,v=e.isSendingDraft,f=e.onChange,b=e.onExpand,g=e.onFocus,_=e.onIsContextBarShowing,y=e.onSend;var E=Object(r["useState"])(""),C=Y()(E,2),S=C[0],w=C[1];var j=Object(r["useState"])(false),I=Y()(j,2),T=I[0],A=I[1];var N=Object(r["useState"])(true),P=Y()(N,2),M=P[0],D=P[1];var x=Object(Ac["a"])(),R=x.featureContextBarScalable;var F=Object(r["useRef"])();var L=function e(){return F.current&&F.current.getWrappedInstance?F.current.getWrappedInstance():F.current};Object(r["useImperativeHandle"])(u,function(){return{setCursor:function e(){var t,a;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return null===(t=L())||void 0===t?void 0:null===(a=t.setCursor)||void 0===a?void 0:a.call.apply(a,[t].concat(n))},setCursorAtEnd:function e(){var t,a;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return null===(t=L())||void 0===t?void 0:null===(a=t.setCursorAtEnd)||void 0===a?void 0:a.call.apply(a,[t].concat(n))}}});var U=Object(zl["d"])(s);Nc(function(){if(!l){var e=L();if(!e)return;var t=Object(zl["e"])(s);Object(O["isNumber"])(t)?e.setCursor(t):e.setCursorAtEnd()}},[U]);Object(r["useEffect"])(function(){Object(Hu["c"])({viewContext:ei["MESSAGE_CONTAINERS"].COMPOSER_VIEW,channelId:a,functions:{prependContents:function e(t){var a=L();a&&a.prependContents(t)},setCursorAtEnd:function e(){var t=L();t&&t.setCursorAtEnd()},insertContentsAtCursor:function e(t){var a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"user";var n=L();n&&n.insertContentsAtCursor(t,a,r)}}});return function(){Object(Hu["d"])({viewContext:ei["MESSAGE_CONTAINERS"].COMPOSER_VIEW,channelId:a})}},[a]);if(!o)return null;var B=Object(O["isEmpty"])(t)?Qu.t("Start a new message"):Qu.t("Message {names}",{names:Object(k["i"])(t,{noConj:true}).join("")});var q=m||h;var G=Object(zl["k"])(s);return n.a.createElement(n.a.Fragment,null,!!R&&n.a.createElement(Ku["a"],{channelId:a,onIsContextBarShowing:_,className:"p-composer_page__context_bar",memberIds:G}),n.a.createElement(va["c"],{autocompleteProps:{completeOnCommands:false,position:m?"bottom":"top",shouldCompleteOnTab:false},channelId:a,viewContext:ei["MESSAGE_CONTAINERS"].COMPOSER_VIEW,className:"p-composer_page__message_input",composerDraft:l?null:s,unifiedDraftId:l?Object(zl["d"])(s):null,draftDelay:10,enableComposerButton:true,enableEmojiButton:true,enableFileButton:true,enableMentionButton:true,enableSendButton:q,enableExpandButton:d||M,enableSnippetCreation:false,focusOnPaste:true,isComposerPage:true,isDisabled:v,isExpanded:m,isSendingDisabled:!p,maxLength:ei["MAX_MESSAGE_INPUT_WYSIWYG_LENGTH"],onDraftUpdate:f,onExpand:b,onFocus:g,onSelectionChange:function e(){var t=L();if(!t)return;var a=t.getFormat();var r=!!(a&&a["code-block"]);A(r)},onSendError:function e(t){var a=t.reason;if("send_disabled"!==a)return;if(Object(zl["n"])(s))return;i(Object(Wu["enqueueToast"])({element:n.a.createElement(Vu["b"],null,Qu.t("Select a channel or person to send message"))}))},onTab:function e(t){var a=t.modifiers;if(a.shiftKey){c();return false}return true},onTextChange:function e(t,a,r){w(t);var n=r();D(!n)},placeholder:B,ref:F,sendMessage:y,useSendButton:q}),n.a.createElement(zu["a"],{cursorInCodeBlock:T,textLength:S?S.length:0,useSendButton:q}))}Ju.defaultProps=Yu;var Xu=n.a.forwardRef(function(e,t){return n.a.createElement(Ju,te()({refToForward:t},e))});function Zu(e,t){var a=t.draft;return{destinationNames:Object(zl["g"])(e,{draft:a,renderChannel:function t(a){return Object(Gt["getDisplayNameForChannel"])(e,a,{imIncludeAtSign:false})}}),featureComposeFlow:Object(Zo["g"])(e),featureUnifiedDrafts:Object(Zo["k"])(e),isDraftValid:bc(e,a),isSendButtonEnabledPref:Object(ai["k"])(e,"msg_input_send_btn")}}var $u=Object(y["connect"])(Zu,null,null,{withRef:true})(Xu);var ed=a(579);var td=a(643);var ad=new k["b"]("drafts");var rd={draft:Dn["default"].object,featureComposeFlow:Dn["default"].bool,isSaved:Dn["default"].bool,isSaving:Dn["default"].bool};var nd={draft:void 0,featureComposeFlow:false,isSaved:false,isSaving:false};function id(e){var t=e.draft,a=e.featureComposeFlow,r=e.isSaved,n=e.isSaving;if(!a)return null;if(n)return ad.t("Saving message\u2026");if(r)return ad.t("Draft saved");var i=Object(zl["j"])(t);var s=Object(zl["f"])(t);if(i&&i!==s){var o=i/1e3;var l=Object(Yi["a"])(o)?Object(td["a"])(o):Object(ed["a"])(o);return ad.rt("Edited {lastEdited}",{lastEdited:l})}return null}id.propTypes=rd;id.defaultProps=nd;var sd=id;var od=a(4723);function ld(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function cd(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ld(Object(a),true).forEach(function(t){qe()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ld(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var ud={contextChannelId:void 0,dispatch:O["noop"],draft:{},featureComposeFlow:false,refToForward:void 0,isAttentionOnChat:false,isEmptyDraft:true,isExpanded:false,isSendingDraft:false};function dd(e){var t=e.contextChannelId,a=e.dispatch,i=e.draft,s=e.featureComposeFlow,o=e.refToForward,l=e.isAttentionOnChat,c=e.isEmptyDraft,u=e.isExpanded,d=e.isSendingDraft;var p=Object(r["useState"])(),m=Y()(p,2),h=m[0],v=m[1];var f=Object(r["useState"])(true),b=Y()(f,2),g=b[0],y=b[1];var k=Object(r["useState"])(false),E=Y()(k,2),C=E[0],S=E[1];var w=Object(wc["a"])(false,1500),j=Y()(w,3),T=j[0],A=j[1],N=j[2];var P=Object(wc["a"])(false,3e3),M=Y()(P,3),D=M[0],x=M[1],R=M[2];var F=Object(r["useRef"])();var L=Object(r["useRef"])();var U=Object(jc["a"])();var B=Object(Ic["a"])();var q=Object(zl["d"])(i);var G=Object(r["useCallback"])(Object(O["debounce"])(function(e){var t=te()({},e);return a(lc(cd({isQuiet:true},t)))},3e3),[a,q]);Nc(function(){setTimeout(function(){return y(false)},0);if(l){var e=Object(zl["n"])(i)?"body":"dest";v(e)}N();R();c||G({draft:i});return function(){y(true);v(void 0)}},[q]);Nc(function(){if("dest"===h&&F.current)F.current.focus();else if("body"===h&&L.current){var e=Object(zl["e"])(i);var t=L.current.getWrappedInstance?L.current.getWrappedInstance():L.current;t&&(Object(O["isNumber"])(e)&&t.setCursor?t.setCursor(e):t.setCursorAtEnd&&t.setCursorAtEnd())}},[h]);Object(r["useImperativeHandle"])(o,function(){return{focus:function e(){var t=L.current.getWrappedInstance?L.current.getWrappedInstance():L.current;t&&t.setCursorAtEnd&&t.setCursorAtEnd()}}});var H=Object(zl["c"])(i);var W=Object(zl["k"])(i);var V=Object(O["size"])(H)+Object(O["size"])(W);Object(r["useEffect"])(function(){B.track(I["EventId"].COMPOSE_FLOW,{draft_id:q,draft_num_destinations:V,contexts:{ui_context:{step:I["UiStep"].COMPOSE_FLOW_SET_DESTINATION}}})},[B,q,V]);Tc("keydown",function(e){if("Escape"===e.key){c&&a(Object(Yl["a"])({ids:[q]}));B.track(I["EventId"].COMPOSE_FLOW,{draft_id:q,draft_is_empty:c,contexts:{ui_context:{action:I["UiAction"].KEYDOWN,step:I["UiStep"].COMPOSE_FLOW_CLOSE}}})}});var K=Object(Ac["a"])(),z=K.featureContextBarScalable;if(!s)return null;if(Object(O["isEmpty"])(i)){a(rc({reason:"composer_page_empty"}));return null}function Q(e){U.info("COMPOSER","Saving draft (id:"+q+")");a(Object(Ql["g"])(e));A(true);x(true)}function J(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.fromKeyboardShortcut;a(Ec({draft:i,fromKeyboardShortcut:t})).catch(function(e){U.error("COMPOSER","Failed to send message",e)})}function X(e){B.track(I["EventId"].COMPOSE_FLOW,{draft_type:"composer",contexts:{ui_context:{action:I["UiAction"].CLICK,step:e?I["UiStep"].COMPOSE_FLOW_EXPAND:I["UiStep"].COMPOSE_FLOW_CONTRACT}}});a(Object(Jl["b"])({draftId:q,isExpanded:e}))}var Z=t&&!u;var $=document.getElementById("p-composer_page__header_subtitle");return n.a.createElement(Sc["b"],{className:"p-composer_page__drag_and_drop",draftId:q,location:Sc["a"].COMPOSER},n.a.createElement("div",{className:_()("p-composer_page",{"p-composer_page--noncontextual":!Z,"p-composer_page--expanded":u,"p-composer_page--context_bar_showing":z&&C}),"data-qa":"composer_page"},n.a.createElement(Gu,{draft:i,isDisabled:d,isInteractive:!Object(zl["n"])(i)||"dest"===h,onChange:function e(t){if(g)return;var a=cd({},i,{destinations:t});Q(a);G({draft:a})},onInteractive:function e(){return v("dest")},onSelect:function e(){return v("body")},ref:F}),!u&&n.a.createElement("div",{className:"p-composer_page__body"},n.a.createElement($c,{channelId:t,draft:i,key:t,viewId:"composer_context"})),n.a.createElement(Cc["a"],null,function(e){var a=e.height,r=e.measureRef;return n.a.createElement("div",{className:"p-composer_page__footer",ref:r},n.a.createElement("div",{className:_()("p-composer_page__message_input_wrapper",{"p-composer_page__message_input_wrapper--animated":!g}),style:{height:u?a:void 0}},n.a.createElement($u,{draft:i,contextChannelId:t,focusPrev:function e(){return v("dest")},isExpanded:u,isHeightConstrained:!!t,isSendingDraft:d,onChange:function e(t){var a=t.ops,r=t.range,n=void 0===r?{}:r;return Q(cd({},i,{ops:a,cursor_index:n.index}))},onExpand:X,onFocus:function e(){return v("body")},onIsContextBarShowing:function e(t){return S(t)},onSend:J,ref:L})))}),$&&Kl.a.createPortal(n.a.createElement(sd,{draft:i,featureComposeFlow:s,isSaving:T,isSaved:D}),$)))}dd.displayName="ComposerPage";dd.defaultProps=ud;var pd=n.a.forwardRef(function(e,t){return n.a.createElement(dd,te()({refToForward:t},e))});var md=function e(t){var a=Object(Zl["a"])(t);var r=Object(Zo["d"])(t,a);return{contextChannelId:Object(Pc["a"])(t,r),draft:r,featureComposeFlow:Object(Zo["g"])(t),isAttentionOnChat:Object(ii["e"])(t),isEmptyDraft:Object(zl["t"])(t,r),isExpanded:Xl(t,{draftId:a}),isSendingDraft:nc(t,{draftId:a})}};var hd=Object(y["connect"])(md,null,null,{withRef:true})(pd);var vd=a(1340);var fd=a(1081);var bd=a(582);var gd=a(229);var _d=new k["b"]("drafts");function yd(e,t){var a=Object(zl["c"])(t);var r=Object(zl["k"])(t);if(Object(O["isEmpty"])(a)){if(!Object(O["isEmpty"])(r)){var n=Object(i["getCurrentUserId"])(e);var s=Object(O["without"])(r,n);if(Object(O["isEmpty"])(s))return{type:"self-dm"};if(1===s.length)return{type:"dm",data:{memberId:s[0]}};return{type:"mpdm",data:{memberIds:s}}}}else{var o=Object(He["e"])(e,a[0]);if(Object(Gt["isSharedPublicOrPrivateChannel"])(o))return{type:"shared-channel",data:{channel:o}};if(Object(Gt["isPublicChannel"])(o))return{type:"public-channel",data:{channel:o}};if(Object(Gt["isPrivateChannel"])(o))return{type:"private-channel",data:{channel:o}}}return{}}function Od(e,t){var a=t.draft,r=t.featureComposeFlow;if(!r)return null;var n=Object(ai["k"])(e,"time24");var i=Object(zl["j"])(a);var s=i/1e3;var o=Object(ed["a"])(s,{shortenMonth:true});var l=Object(gd["a"])(s,{do24hrTime:n});var c=yd(e,a),u=c.type,d=c.data;if("shared-channel"===u||"public-channel"===u||"private-channel"===u){var p=Object(Gt["getDisplayNameForChannel"])(e,d.channel);if("shared-channel"===u)return _d.t("Message to shared channel {channelName} saved {date} at {time}",{channelName:p,date:o,time:l});if("public-channel"===u)return _d.t("Message to public channel {channelName} saved {date} at {time}",{channelName:p,date:o,time:l});if("private-channel"===u)return _d.t("Message to private channel {channelName} saved {date} at {time}",{channelName:p,date:o,time:l})}if("self-dm"===u)return _d.t("Direct message to yourself saved {date} at {time}",{date:o,time:l});if("dm"===u)return _d.t("Direct message to {memberName} saved {date} at {time}",{memberName:Object(Za["getPrefCompliantMemberNameById"])(e,d.memberId),date:o,time:l});if("mpdm"===u){if(d.memberIds.length<=3){var m=d.memberIds.map(function(t){return Object(Za["getPrefCompliantMemberNameById"])(e,t)});return _d.t("Direct message to {memberNames} saved {date} at {time}",{memberNames:Object(k["i"])(m).join(""),date:o,time:l})}return _d.t("Direct message to {memberName1}, {memberName2} and {numOtherNames} others saved {date} at {time}",{memberName1:Object(Za["getPrefCompliantMemberNameById"])(e,d.memberIds[0]),memberName2:Object(Za["getPrefCompliantMemberNameById"])(e,d.memberIds[1]),numOtherNames:d.memberIds.length-2,date:o,time:l})}return _d.t("Message saved {date} at {time}",{date:o,time:l})}function kd(e){var t=e.draft,a=e.featureComposeFlow;if(!a)return null;var r=Object(zl["l"])(t);var n=Object(bd["a"])({contents:r});if(!n)return null;return _d.t("Summary: {draftText}",{draftText:n})}var Ed=Object(At["b"])("Get a text summary of a draft",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.draftId;var n=t();var i=Object(Zo["d"])(n,r);var s=Object(Zo["g"])(n);var o=Od(n,{draft:i,featureComposeFlow:s});var l=kd({draft:i,featureComposeFlow:s});if(!l)return o;return o+". "+l});Ed.meta={name:"makeDraftSummary",key:"componentsDraftsPageUtilityMakeDraftSummaryMakeDraftSummary",description:"Get a text summary of a draft"};Ed.propTypes={draftId:Dn["default"].string.isRequired};var Cd=Ed;var Sd={getSnippetText:kd,getSummaryType:yd};var wd=a(2030);var jd=a(1475);var Id=a(326);function Td(e,t){return e?e+"__"+t:t}var Ad=n.a.createContext({setIsMenuOpen:O["noop"]});var Nd=a(4960);var Pd={className:void 0,refToForward:void 0,tooltip:void 0};function Md(e){var t=e.className,a=e.refToForward,i=e.icon,s=e.tooltip,o=Po()(e,["className","refToForward","icon","tooltip"]);var l=Object(r["useContext"])(Ad),c=l.dataQaPrefix;var u=n.a.createElement(as["a"],te()({className:_()(t,"c-card_container__action"),"data-qa":Td(c,"card_action--"+i),icon:i,ref:a,size:"small"},o));if(!s)return u;return n.a.createElement(Br["c"],{tip:s},u)}Md.displayName="CardAction";Md.defaultProps=Pd;var Dd=n.a.forwardRef(function(e,t){return n.a.createElement(Md,te()({refToForward:t},e))});var xd=new k["b"]("message");var Rd={onClose:O["noop"],onOpen:O["noop"],position:"top-right"};function Fd(e){var t=e.onClose,a=e.onOpen,i=e.position,s=Po()(e,["onClose","onOpen","position"]);var o=Object(r["useContext"])(Ad),l=o.dataQaPrefix,c=o.onMenuClose,u=o.onMenuOpen;return n.a.createElement(To["e"],te()({"data-qa":Td(l,"card_action_overflow"),onClose:function e(){c();t.apply(void 0,arguments)},onOpen:function e(){u();a.apply(void 0,arguments)},position:i},s),n.a.createElement(Dd,{icon:"vertical-ellipsis",tooltip:xd.t("More actions")}))}Fd.displayName="CardActionOverflow";Fd.defaultProps=Rd;var Ld=Fd;function Ud(e){var t=e.children,a=e.position;var i=Object(r["useContext"])(Ad),s=i.dataQaPrefix,o=i.isFocused,l=i.isHovered,c=i.isMenuOpen;var u=o||l||c;return n.a.createElement("div",{className:_()("c-card_container__actions","c-card_container__actions--position_"+a,{"c-card_container__actions--hidden":!u}),"data-qa":Td(s,"card_actions"),"data-qa-position":a,"data-qa-visible":u},t)}Ud.displayName="CardActions";var Bd=Ud;var qd={className:void 0,dataQaPrefix:void 0,elevation:0,isFocused:false,isHovered:false};function Gd(e){var t=e.children,a=e.className,i=e.dataQaPrefix,s=e.elevation,o=e.isFocused,l=e.isHovered,c=e.size,u=Po()(e,["children","className","dataQaPrefix","elevation","isFocused","isHovered","size"]);var d=Object(r["useState"])(false),p=Y()(d,2),m=p[0],h=p[1];var v=Object(r["useState"])(false),f=Y()(v,2),b=f[0],g=f[1];var y=Object(r["useState"])(false),O=Y()(y,2),k=O[0],E=O[1];var C=Object(r["useMemo"])(function(){return{dataQaPrefix:i,isFocused:o||b,isHovered:l||k,isMenuOpen:m,onMenuClose:function e(){h(false);g(false);E(false)},onMenuOpen:function e(){h(true)}}},[i,o,b,l,k,m]);return n.a.createElement("div",te()({className:_()(a,"c-card_container","c-card_container--elevation_"+s,qe()({},"c-card_container--size_"+c,c)),"data-qa":Td(i,"card"),"data-qa-elevation":s,"data-qa-size":c,onBlur:function e(){return g(false)},onFocus:function e(){return g(true)},onMouseOut:function e(){return E(false)},onMouseOver:function e(){return E(true)}},u),n.a.createElement(Ad.Provider,{value:C},t))}Gd.displayName="CardContainer";Gd.defaultProps=qd;var Hd=Gd;var Wd=Hd;var Vd=a(856);var Kd=a(1318);var zd=a(1680);var Qd;function Yd(e,t){clearInterval(Qd);var a=Object(Vd["e"])(e,t);if(a)return Promise.resolve(a);return new Promise(function(a){Qd=setInterval(function(){var r=Object(Vd["e"])(e,t);if(r){clearInterval(Qd);a(r)}},50)}).timeout(1e4)}var Jd=Object(At["b"])("View a channel, thread, or composer draft",function(e,t,a){var r=a.draft;if(Object(O["isEmpty"])(r))return;if(Object(zl["r"])(r)){var n=Object(zl["d"])(r);e(Object(zd["a"])({draftId:n}))}else{var i=Object(zl["b"])(r)||{},s=i.channelId,o=i.threadTs;var l=Object(He["e"])(t(),s);var c=Object(Gt["teamIdForChannelFromAnotherTeam"])(t(),l);if(o){e(Object(Kd["a"])({channelId:s,teamId:c,threadTs:o}));Yd(s,o).then(function(e){e.scrollIntoView()})}else e(Object(pn["a"])({id:s,teamId:c}))}});Jd.meta={name:"jumpToDraft",key:"componentsDraftsPageUtilityJumpToDraftJumpToDraft",description:"View a channel, thread, or composer draft"};Jd.propTypes={draft:Dn["default"].object.isRequired};var Xd=Jd;var Zd={draftBlocks:void 0};function $d(e){var t=e.draft,a=e.draftBlocks;if(Object(O["isEmpty"])(a))return null;return n.a.createElement(A["a"],{blocks:a.blocks,blocksContainerContext:N["a"].draft,containerId:Object(zl["d"])(t),disableHighlights:true})}$d.displayName="DraftPreview";$d.defaultProps=Zd;function ep(e,t){var a=t.draft;var r=Object(zl["l"])(a);var n=new pc.a(r);return{draftBlocks:Object(ye["a"])(e,n)}}var tp=Object(y["connect"])(ep)($d);var ap=a(129);var rp=a(1406);var np=a(165);var ip=a(1215);var sp=a(82);function op(e){var t=e.file;var a=Object(sp["fileIsImage"])(t)&&Object(sp["getFileThumbnail"])(t,80);var r=_()("p-drafts_page__draft_file",{"p-drafts_page__draft_file--image":a});function i(){return a?n.a.createElement("span",{style:{backgroundImage:"url('"+a+"')"},"aria-label":Object(sp["getFileDisplayName"])(t),className:"p-drafts_page__draft_file__draft_image","data-qa":"draft_file_image"}):n.a.createElement(Ga["a"],{type:t.filetype,file:"tiny","data-qa":"draft_file_icon"})}return n.a.createElement(ip["a"],{file:t,className:r,showActions:false,"data-qa":"draft_file_container"},i())}op.displayName="DraftFile";var lp=op;function cp(e){var t=e.files;var a=_()("p-drafts_page__draft_files_container");return n.a.createElement("div",{className:a,"data-qa":"draft_files_container"},t.map(function(e){return n.a.createElement(lp,{file:e,key:e.id,"data-qa":"draft_files_file"})}))}cp.displayName="DraftFiles";var up=function e(t,a){var r=a.draft;if(!r)return{};var n=Object(zl["d"])(r);var i=Object(rp["a"])(t,{draftId:n});var s=Object(zl["i"])(r);var o=Object(O["compact"])(Object(O["concat"])(s,i));var l=o.map(function(e){return Object(ap["getFileById"])(t,e)});return{files:l}};var dp=Object(y["connect"])(up,null,null,{areStatePropsEqual:function e(t,a){return Object(np["a"])(t,a,1)}})(cp);var pp=a(543);var mp=a(44);var hp=a(819);var vp=a(104);var fp=Object(At["b"])("Send channel or Composer draft message",function(){var e=uc()(regeneratorRuntime.mark(function e(t,a,r){var n,i,s,o,l,c,u,d,p,m,h;return regeneratorRuntime.wrap(function e(v){while(1)switch(v.prev=v.next){case 0:n=r.draft;if(!Object(zl["r"])(n)){v.next=3;break}return v.abrupt("return",t(Ec({draft:n})));case 3:i=Object(Ne["a"])({getState:a,label:"COMPOSER"});s=Object(zl["b"])(n),o=s.channelId,l=s.isBroadcast,c=s.threadTs;u=Object(zl["l"])(n);d=Object(zl["d"])(n);p=Object(Zo["j"])(a());p&&(m=Object(zl["i"])(n));t(p?Object(Yl["a"])({ids:[d]}):Object(Ql["b"])({channelId:o,threadTs:c}));if(!c){v.next=16;break}h=Object(Vd["e"])(o,c);h&&!p&&h.clear();t(Object(vp["m"])({channelId:o,threadTs:c}));v.next=18;break;case 16:v.next=18;return t(Object(Bt["a"])({channelId:o}));case 18:return v.abrupt("return",t(Object(hp["a"])({channelId:o,delta:new pc.a(u),fileIds:m,includeBroadcastKeywordWarning:true,includePrivateFileReshareWarning:true,replyToTs:c,shouldBroadcast:l})).tap(function(){i.info("Composer message successfuly sent. Removing the draft ("+d+")")}).catch(function(){t(p?Object(Ql["g"])(n):Object(Ql["f"])({channelId:o,threadTs:c,delta:new pc.a(u),broadcast:l}))}));case 19:case"end":return v.stop()}},e)}));return function(t,a,r){return e.apply(this,arguments)}}());fp.meta={name:"sendDraftMessage",key:"componentsDraftsPageUtilitySendDraftMessageSendDraftMessage",description:"Send channel or Composer draft message"};fp.propTypes={draft:Dn["default"].object.isRequired};var bp=fp;var gp=new k["b"]("drafts");var _p={dispatch:O["noop"]};function yp(e){var t=e.dispatch,a=e.draft,i=e.featureComposeFlow;var s=Object(r["useState"])(false),o=Y()(s,2),l=o[0],c=o[1];if(!i)return null;function u(){c(true);t(Object(z["closeModal"])());t(bp({draft:a}))}return n.a.createElement(pp["a"],{closeModal:function e(){return t(Object(z["closeModal"])())}},n.a.createElement(mp["h"],null,n.a.createElement(mp["j"],{title:gp.t("Send message")})),n.a.createElement(mp["d"],null,n.a.createElement(mp["e"],null,n.a.createElement("p",null,gp.t("Are you sure you want to send this message?")))),n.a.createElement(mp["f"],null,n.a.createElement(mp["g"],null,n.a.createElement(mp["c"],{type:"outline"},gp.t("Cancel")),n.a.createElement(J["b"],{"data-qa":"drafts_page_draft_send_confirm",loading:l,onClick:u,type:"primary"},gp.t("Send")))))}yp.displayName="ConfirmDraftSendModal";yp.defaultProps=_p;function Op(e){return{featureComposeFlow:Object(Zo["g"])(e)}}var kp=Object(y["connect"])(Op)(yp);var Ep=new k["b"]("drafts");var Cp={dispatch:O["noop"],do24hrTime:false,featureComposeFlow:false,hasFocus:false,isSendable:false,isSendingDraft:false,replyUsers:void 0,replyUsersCount:void 0,rootMsgAuthor:void 0,hasFiles:false};function Sp(e){var t=e.dispatch,a=e.do24hrTime,r=e.draft,i=e.featureComposeFlow,s=e.hasFocus,o=e.isSendable,l=e.isSendingDraft,c=e.replyUsers,u=e.replyUsersCount,d=e.rootMsgAuthor,p=e.hasFiles;if(!i)return null;function m(e){e.preventDefault();e.stopPropagation();t(Xd({draft:r}))}function h(e){e.preventDefault();e.stopPropagation();if(Object(zl["r"])(r)){var a=Object(zl["d"])(r);t(Object(z["openModal"])({element:n.a.createElement(jd["a"],{draftId:a,draft:r})}))}else{var i=Object(zl["b"])(r)||{},s=i.channelId,o=i.threadTs;t(Object(z["openModal"])({element:n.a.createElement(jd["a"],{channelId:s,threadTs:o,draft:r})}))}}function v(e){e.preventDefault();e.stopPropagation();t(Object(z["openModal"])({element:n.a.createElement(kp,{draft:r})}))}var f=Object(zl["j"])(r);var b=f/1e3;var g=Object(zl["n"])(r);var y=Object(zl["p"])(r);return n.a.createElement(Wd,{className:_()("p-drafts_page__draft",{"p-drafts_page__draft--focused":s,"p-drafts_page__draft--sending":l}),"data-qa":"drafts_page_draft",isFocused:s,onClick:m,size:"medium"},n.a.createElement(Id["d"],{text:n.a.createElement("div",{className:"p-drafts_page__draft_header"},n.a.createElement("span",{className:_()("p-drafts_page__draft_destination",{"p-drafts_page__draft_destination--empty":!g})},n.a.createElement(Ru,{draft:r,shouldUseEmptyText:true})),n.a.createElement("div",{className:"p-drafts_page__draft_meta"},f&&n.a.createElement("span",{className:"p-drafts_page__draft_timestamp"},Ep.t("{date} at {time}",{date:Object(ed["a"])(b,{shortenMonth:true}),time:Object(gd["a"])(b,{do24hrTime:a})})),n.a.createElement("span",{className:"p-drafts_page__draft_badge"},l?Ep.t("Sending\u2026"):Ep.t("Draft")))),subtext:n.a.createElement(n.a.Fragment,null,!Object(O["isEmpty"])(c)&&n.a.createElement(wd["a"],{className:"p-drafts_page__draft_thread_participants",replyUsers:c,replyUsersCount:u,rootMsgAuthor:d}),n.a.createElement("div",{className:_()("p-drafts_page__draft_body",{"p-drafts_page__draft_body--empty":!y})},y?n.a.createElement(tp,{draft:r}):Ep.t("No message"),p&&n.a.createElement(dp,{draft:r}))),size:"medium"}),!l&&n.a.createElement(Bd,{position:"inset"},n.a.createElement(Dd,{"data-qa":"drafts_page_draft_delete",icon:"trash",onClick:h,tooltip:Ep.t("Delete draft")}),n.a.createElement(Dd,{icon:"pencil",onClick:m,tooltip:Ep.t("Edit draft")}),o&&n.a.createElement(Dd,{"data-qa":"drafts_page_draft_send",icon:"paper-plane-alt",onClick:v,tooltip:Ep.t("Send message")})))}Sp.displayName="DraftItem";Sp.defaultProps=Cp;function wp(e,t){var a=t.draftId;var r=Object(Zo["d"])(e,a);var n=Object(zl["b"])(r)||{},i=n.channelId,s=n.threadTs;var o;var l;var c;if(!Object(zl["r"])(r)){var u=Object(Rn["a"])(e,i,s);o=Object(zi["getReplyUsers"])(u);l=Object(zi["getReplyUsersCount"])(u);c=Object(zi["getMessageMemberId"])(u)}return{do24hrTime:Object(ai["k"])(e,"time24"),draft:r,featureComposeFlow:Object(Zo["g"])(e),isSendable:bc(e,r),isSendingDraft:nc(e,{draftId:a}),replyUsers:o,replyUsersCount:l,rootMsgAuthor:c,hasFiles:Object(zl["o"])(e,r)}}var jp=Object(y["connect"])(wp)(Sp);var Ip=new k["b"]("drafts");var Tp={dispatch:O["noop"],drafts:void 0,refToForward:void 0};function Ap(e){var t=e.dispatch,a=e.drafts,i=e.refToForward;var s=Object(r["useRef"])();var o=Object(r["useState"])(false),l=Y()(o,2),c=l[0],u=l[1];var d=Object(fd["a"])(function(){var e=new vd["a"]({DEFAULT_HEIGHT:80});return new xi["a"]({heightCache:e})});Object(r["useImperativeHandle"])(i,function(){return{focus:function e(){var t;return null===(t=s.current)||void 0===t?void 0:t.focus()}}});var p=a.map(function(e){return Object(zl["d"])(e)});function m(e){var t=e.key;return Object(O["includes"])(p,t)}function h(e,t){var a=t.hasFocus,r=t.hasFocusWithin,i=t.isHovered;var s=p[e];return n.a.createElement(jp,{draftId:s,hasFocus:a,hasFocusWithin:r,isHovered:i})}function v(e){var a=e.index;if(!c)return null;var r=p[a];if(!r)return null;return{"aria-label":t(Cd({draftId:r}))}}return n.a.createElement(_i["a"],null,function(e){var t=e.width,a=e.height;return n.a.createElement(Uc["a"],{animateOnScroll:false,height:a,isFocusableItem:m,"aria-label":Ip.t("Drafts"),getPropsForItem:v,keys:p,layout:d,onFocusEnter:function e(){return u(true)},onFocusLeave:function e(){return u(false)},ref:s,rowRenderer:h,width:t})})}Ap.displayName="DraftList";Ap.defaultProps=Tp;var Np=n.a.forwardRef(function(e,t){return n.a.createElement(Ap,te()({refToForward:t},e))});var Pp=Object(y["connect"])(null,null,null,{withRef:true})(Np);var Mp=a(760);var Dp=new k["b"]("drafts");function xp(e){var t=e.featureComposeFlow;if(!t)return null;return n.a.createElement(Mp["a"],{description:Dp.t("You don\u2019t have any drafts or unsent messages. When you do, you\u2019ll see them here."),isExtended:true,title:Dp.t("No drafts")})}xp.displayName="DraftsPageEmptyState";var Rp=xp;var Fp=a(4830);var Lp={refToForward:void 0,visibleUnifiedDrafts:void 0};function Up(e){var t=e.featureComposeFlow,a=e.refToForward,i=e.visibleUnifiedDrafts;var s=Object(r["useRef"])();Object(r["useImperativeHandle"])(a,function(){return{focus:function e(){var t;var a=(null===(t=s.current)||void 0===t?void 0:t.getWrappedInstance)?s.current.getWrappedInstance():s.current;(null===a||void 0===a?void 0:a.focus)&&a.focus()}}});var o=Object(zl["v"])(i);var l=!Object(O["isEmpty"])(o);return n.a.createElement("div",{className:_()("p-drafts_page",{"p-drafts_page--empty":!l}),"data-qa":"drafts_page"},l?n.a.createElement(Pp,{drafts:o,ref:s}):n.a.createElement(Rp,{featureComposeFlow:t}))}Up.displayName="DraftsPage";Up.defaultProps=Lp;var Bp=n.a.forwardRef(function(e,t){return n.a.createElement(Up,te()({refToForward:t},e))});function qp(e){return{featureComposeFlow:Object(Zo["g"])(e),visibleUnifiedDrafts:Object(Xo["a"])(e,{includeAllTeams:true})}}var Gp=Object(y["connect"])(qp,null,null,{withRef:true})(Bp);var Hp=a(1683);var Wp=a(69);var Vp=a(266);var Kp=a(1142);var zp=a(1648);var Qp=a(858);var Yp=a(1152);var Jp=a(916);var Xp=a(145);var Zp=a(835);var $p={message:void 0,isInMutedChannel:false};var em=function(e){b()(t,e);function t(e){var a;c()(this,t);a=m()(this,v()(t).call(this,e));Object(Mn["a"])(he()(a),["onClickItem","onClickArchive","onClickMarkAsRead"]);a.state={focused:false};return a}d()(t,[{key:"onClickArchive",value:function e(t){var a=this.props,r=a.item,n=a.isArchived;t.preventDefault();t.stopPropagation();n?this.props.unarchiveItem({id:"reminder"===r.type?r.reminderId:r.id,type:r.type}):this.props.archiveItem({id:"reminder"===r.type?r.reminderId:r.id,type:r.type,subtype:r.subtype||null,channelId:r.channelId||null})}},{key:"onClickItem",value:function e(){var t=this.props,a=t.item,r=t.isRead,n=t.message;var i=this.state.focused;r||i||this.props.markItemAsRead(a);n&&this.setState(function(){return{focused:!i}})}},{key:"onClickMarkAsRead",value:function e(t){var a=this.props,r=a.item,n=a.isRead;t.preventDefault();t.stopPropagation();n?this.props.markItemAsUnread(r):this.props.markItemAsRead(r)}},{key:"renderIconWithTooltip",value:function e(){var t=this.props.item;var a;var r;if("mention"===t.type){a="comment-alt";r="You were mentioned";if(t.subtype&&"cursor_mark"===t.subtype){a="mark_unread";r="You marked this channel unread"}else if(t.subtype&&"dm"===t.subtype){a="user";r="You received this direct message"}}else if("star"===t.type){a="star-o";r="You starred this item"}else if("reminder"===t.type){a="check-list";r="You set this reminder"}return n.a.createElement(Zp["c"],{tip:r},n.a.createElement(X["b"],{type:a}))}},{key:"renderMention",value:function e(){var t=this.props,a=t.item,r=t.isArchived,i=t.isRead,s=t.isInMutedChannel,o=t.message;if(!o||s)return null;return n.a.createElement(n.a.Fragment,null,this.state.focused?this.renderMessage():n.a.createElement(J["c"],{className:_()("p-inbox__item",{"p-inbox__item--archived":r,"p-inbox__item--read":i}),onClick:this.onClickItem},n.a.createElement("span",{className:"p-inbox__item_type"},this.renderIconWithTooltip()),n.a.createElement(Zp["c"],{tip:n.a.createElement(ts["a"],{channelId:a.channelId,className:"normal_wrap"})},n.a.createElement("span",{className:"p-inbox__item_source"},n.a.createElement(ts["a"],{channelId:a.channelId}))),this.renderTruncatedMessage(),n.a.createElement("span",{className:"p-inbox__item_actions"},this.renderSharedActions())))}},{key:"renderMessage",value:function e(){var t=this;var a=this.props,r=a.item,i=a.message,s=a.includeActions;var o=i;var l=n.a.createElement(Zt["a"],{msg:o},n.a.createElement($t["a"],{light:n.a.createElement(ea["a"],{msg:o})},n.a.createElement(ta["a"],{msg:o}),"\xa0\xa0",n.a.createElement(sa["a"],{msg:o,clickable:true,full:true}),n.a.createElement("br",null),n.a.createElement(aa["a"],{msg:o}),n.a.createElement(ra["a"],{msg:o,blocksContainerContext:N["a"].all_unreads}),n.a.createElement(ia["b"],{msg:o}),n.a.createElement(ms["a"],{msg:o}),n.a.createElement(vs["a"],{msg:o}),n.a.createElement(bs["a"],{msg:o,className:"p-unreads_view__thread_replies"}),n.a.createElement(fs["a"],{msg:o})));var c=n.a.createElement(ys["a"],null,n.a.createElement(Os["a"],{msg:o,showComment:true,showShare:true,messageContainerType:ei["MESSAGE_CONTAINERS"].UNREAD_VIEW,position:"above"},l));var u=s?c:l;return n.a.createElement("div",{className:"p-inbox__item p-inbox__item--expanded"},n.a.createElement(J["c"],{className:"p-inbox__item_header",onClick:this.onClickItem},n.a.createElement("span",{className:"p-inbox__item_type"},this.renderIconWithTooltip()),n.a.createElement("span",{className:"p-inbox__item_source"},n.a.createElement(li["a"],{onClick:function e(){return t.props.setPrimaryView({id:r.channelId})}},n.a.createElement(ts["a"],{channelId:r.channelId}))),n.a.createElement("span",{className:"p-inbox__item_actions"},this.renderSharedActions())),n.a.createElement("div",{className:"p-inbox__item_message"},u))}},{key:"renderReminder",value:function e(){var t=this.props,a=t.item,r=t.isArchived,i=t.isRead,s=t.message;var o=null;var l=null;s?o=s:l=Object(Wp["simpleIsUrl"])(a.text)?n.a.createElement(mr["a"],{href:a.text}):n.a.createElement(Xp["a"],{text:a.text});return n.a.createElement(n.a.Fragment,null,this.state.focused&&o?this.renderMessage():n.a.createElement(J["c"],{className:_()("p-inbox__item",{"p-inbox__item--archived":r,"p-inbox__item--read":i}),onClick:this.onClickItem},n.a.createElement("span",{className:"p-inbox__item_type"},this.renderIconWithTooltip()),o?n.a.createElement(Zp["c"],{tip:n.a.createElement(ts["a"],{channelId:a.channelId,className:"normal_wrap"})},n.a.createElement("span",{className:"p-inbox__item_source"},n.a.createElement(ts["a"],{channelId:a.channelId}))):n.a.createElement(n.a.Fragment,null,n.a.createElement("span",{className:"p-inbox__item_source"},"Reminder"),n.a.createElement("span",{className:"p-inbox__item_sender"},"You")),o?this.renderTruncatedMessage():n.a.createElement("span",{className:"p-inbox__item_content"},n.a.createElement(Kp["a"],{lines:1},l)),n.a.createElement("span",{className:"p-inbox__item_actions"},this.renderSharedActions())))}},{key:"renderSharedActions",value:function e(){var t=this.props,a=t.isArchived,r=t.isRead;return n.a.createElement(n.a.Fragment,null,n.a.createElement(Zp["c"],{tip:r?"Mark unread":"Mark as read",delay:0},n.a.createElement(Jp["a"],{icon:"emoji-objects",className:"p-inbox__item_actions--mark-as-read",onClick:this.onClickMarkAsRead})),n.a.createElement(Zp["c"],{tip:a?"Unarchive":"Archive",delay:0},n.a.createElement(Jp["a"],{icon:"circle-checkbox-checked-o",className:"p-inbox__item_actions--archive",onClick:this.onClickArchive})))}},{key:"renderStarredItem",value:function e(){var t=this.props,a=t.item,r=t.isArchived,i=t.isRead,s=t.message;if(!s)return null;return n.a.createElement(n.a.Fragment,null,this.state.focused?this.renderMessage():n.a.createElement(J["c"],{className:_()("p-inbox__item",{"p-inbox__item--archived":r,"p-inbox__item--read":i}),onClick:this.onClickItem},n.a.createElement("span",{className:"p-inbox__item_type"},this.renderIconWithTooltip()),n.a.createElement(Zp["c"],{tip:n.a.createElement(ts["a"],{channelId:a.channelId,className:"normal_wrap"})},n.a.createElement("span",{className:"p-inbox__item_source"},n.a.createElement(ts["a"],{channelId:a.channelId}))),this.renderTruncatedMessage(),n.a.createElement("span",{className:"p-inbox__item_actions"},this.renderSharedActions())))}},{key:"renderTruncatedMessage",value:function e(){var t=this.props.message;var a=t;return n.a.createElement(n.a.Fragment,null,n.a.createElement("span",{className:"p-inbox__item_sender"},n.a.createElement(ta["a"],{msg:a})),n.a.createElement("span",{className:"p-inbox__item_content"},n.a.createElement(Kp["a"],{lines:1},Object(zi["isRichTextMessage"])(a)?n.a.createElement(zp["a"],{richTextBlock:a.blocks[0]}):n.a.createElement(aa["a"],{msg:a}))))}},{key:"render",value:function e(){var t=this.props,a=t.item,r=t.visible;if(!r)return null;return n.a.createElement(Yp["b"],null,"mention"===a.type&&this.renderMention(),"star"===a.type&&this.renderStarredItem(),"reminder"===a.type&&this.renderReminder())}}]);return t}(r["PureComponent"]);em.displayName="InboxItem";em.defaultProps=$p;var tm=function e(t,a){var r=a.item;var n=Object(Rn["a"])(t,r.channelId,r.messageTs);var i=Object(He["e"])(t,r.channelId);var s=Object(Je["d"])(t).id;var o=Object(Gt["getInternalTeamIds"])(t,i)||[];var l=!Object(Vp["f"])(t)||Object(Gt["isImOrMpim"])(i)||Object(Gt["isOrgWide"])(i)||o.includes(s);return{item:r,message:n,includeActions:l,isArchived:r.archived,isRead:r.read,isInMutedChannel:i&&Object(pi["isChannelMutedById"])(t,i.id)}};var am={archiveItem:function e(){return Qp["archiveItem"].apply(void 0,arguments)},unarchiveItem:function e(){return Qp["unarchiveItem"].apply(void 0,arguments)},markItemAsRead:function e(){return Qp["markItemAsRead"].apply(void 0,arguments)},markItemAsUnread:function e(){return Qp["markItemAsUnread"].apply(void 0,arguments)},setPrimaryView:function e(){return pn["a"].apply(void 0,arguments)}};var rm=Object(y["connect"])(tm,am)(em);var nm=a(3644);var im=function(e){b()(t,e);function t(e){var a;c()(this,t);a=m()(this,v()(t).call(this,e));Object(Mn["a"])(he()(a),["toggleArchives"]);a.state={includeArchives:false};return a}d()(t,[{key:"componentDidMount",value:function e(){this.props.refreshInbox()}},{key:"toggleArchives",value:function e(){var t=this.state.includeArchives;this.setState(function(){return{includeArchives:!t}})}},{key:"renderDay",value:function e(t){var a=this.state.includeArchives;var r=false;var i=Object.values(t).map(function(e){r=r||!!a||!e.archived;return n.a.createElement(rm,{key:"reminder"===e.type?e.type+"-"+e.reminderId:e.type+"-"+e.id,item:e,visible:!!a||!e.archived})});if(!r)return null;return n.a.createElement(n.a.Fragment,null,n.a.createElement("h4",null,Object(ed["a"])(t[0].id)),n.a.createElement("div",{className:"p-inbox__day",key:t[0].id},i))}},{key:"renderItems",value:function e(){var t=this;var a=this.props.items;var r=[];var n=a;Object(O["each"])(n,function(e){r.push(t.renderDay(e))});return r}},{key:"render",value:function e(){return n.a.createElement("div",{className:"p-workspace__primary_view_body p-inbox"},n.a.createElement(J["c"],{className:"float_right micro",onClick:this.toggleArchives},n.a.createElement(X["b"],{type:"archive",size:"inherit",className:"margin_right_25"}),this.state.includeArchives?"Hide archived items":"Include archived items"),this.renderItems())}}]);return t}(r["Component"]);im.displayName="InboxView";var sm=function e(t){return{items:Object(Pl["c"])(t)}};var om={refreshInbox:Hp["a"]};var lm=Object(y["connect"])(sm,om)(im);var cm=function(e){b()(t,e);function t(e){var a;c()(this,t);a=m()(this,v()(t).call(this,e));Object(Mn["a"])(he()(a),["onClickRefresh","onClickMarkAllAsRead","onClickArchiveAll"]);return a}d()(t,[{key:"onClickArchiveAll",value:function e(){this.props.archiveAll()}},{key:"onClickMarkAllAsRead",value:function e(){this.props.markAllAsRead()}},{key:"onClickRefresh",value:function e(){this.props.refreshInbox()}},{key:"render",value:function e(){var t=this.props.className;return n.a.createElement("div",{className:t},n.a.createElement("div",{className:"p-classic_nav__channel_header__title_section"},n.a.createElement("div",{className:"p-classic_nav__channel_header__title p-classic_nav__no_drag"},"Home")),n.a.createElement("div",{className:"p-classic_nav__channel_header__subtitle"},n.a.createElement(li["a"],{onClick:this.onClickRefresh},"Refresh")," |"," ",n.a.createElement(li["a"],{onClick:this.onClickMarkAllAsRead},"Mark all as read")," |"," ",n.a.createElement(li["a"],{onClick:this.onClickArchiveAll},"Archive all")))}}]);return t}(r["PureComponent"]);cm.displayName="InboxHeader";var um={refreshInbox:Hp["a"],markAllAsRead:Qp["markAllAsRead"],archiveAll:Qp["archiveAll"]};var dm=Object(y["connect"])(null,um)(cm);var pm=a(296);var mm=a(774);var hm=a(2700);var vm=a(243);var fm=a(1173);function bm(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function gm(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?bm(Object(a),true).forEach(function(t){qe()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):bm(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function _m(){var e;var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.uiStep,r=t.uiElement,n=t.referringEventId,i=t.additionalPayload;return gm({},i,qe()({contexts:qe()({},I["ClientEventKeys"].ui_context,(e={},qe()(e,I["UiContextKeys"].action,I["UiAction"].CLICK),qe()(e,I["UiContextKeys"].ui_component,I["UiComponent"].APP_LAUNCHER_BANNER),qe()(e,I["UiContextKeys"].step,a),qe()(e,I["UiContextKeys"].ui_element,r),e))},I["ClientEventKeys"].referring_event_id,n))}function ym(e){return e.replace(/-/g,"_")}var Om=Object(At["b"])("Clog App Launcher Banner Impression",function(e,t,a){var r;var n=t();var i=Object(C["a"])({state:n});var s=Object(vm["r"])(n);var o=a?ym(a):"";i.track(I["EventId"].APP_LAUNCHER,qe()({contexts:qe()({},I["ClientEventKeys"].ui_context,(r={},qe()(r,I["UiContextKeys"].action,I["UiAction"].IMPRESSION),qe()(r,I["UiContextKeys"].ui_component,I["UiComponent"].APP_LAUNCHER_BANNER),qe()(r,I["UiContextKeys"].step,o),r))},I["ClientEventKeys"].referring_event_id,s))});Om.meta={name:"clogImpression",key:"actionsAppLauncherBannerActionsClogImpression",description:"Clog App Launcher Banner Impression"};Om.propTypes={bannerKey:Dn["default"].string};var km=Object(At["b"])("Handle a click to the App Directory and clog",function(e,t,a){var r=t();var n=Object(ri["b"])(r);var i=Object(Je["k"])(r,n);var s=Object(C["a"])({state:r});var o=Object(vm["r"])(r);var l=a?ym(a):"";var c=I["UiElement"].LINK_APP_DIRECTORY;var u=_m({uiStep:l,uiElement:c,referringEventId:o});s.track(I["EventId"].APP_LAUNCHER,u);Object(ut["openAuthenticatedUrlInBrowser"])(i,"/apps")});km.meta={name:"navigateToAppDirectory",key:"actionsAppLauncherBannerActionsNavigateToAppDirectory",description:"Handle a click to the App Directory and clog"};km.propTypes={bannerKey:Dn["default"].string};var Em=Object(At["b"])("Handle a click to the slack.com/apps/manage and clog",function(e,t,a){var r=t();var n=Object(ri["b"])(r);var i=Object(Je["k"])(r,n);var s=Object(C["a"])({state:r});var o=Object(vm["r"])(r);var l=a?ym(a):"";var c=I["UiElement"].LINK_MANAGE_APPS;var u=_m({uiStep:l,uiElement:c,referringEventId:o});s.track(I["EventId"].APP_LAUNCHER,u);Object(ut["openAuthenticatedUrlInBrowser"])(i,"/apps/manage")});Em.meta={name:"navigateToManageApps",key:"actionsAppLauncherBannerActionsNavigateToManageApps",description:"Handle a click to the slack.com/apps/manage and clog"};Em.propTypes={bannerKey:Dn["default"].string};var Cm=Object(At["b"])("Handle a click to the slack.com/pricing and clog",function(e,t,a){var r=t();var n=Object(ri["b"])(r);var i=Object(Je["k"])(r,n);var s=Object(C["a"])({state:r});var o=Object(vm["r"])(r);var l=a?ym(a):"";var c=I["UiElement"].LINK_PRICING;var u=_m({uiStep:l,uiElement:c,referringEventId:o});s.track(I["EventId"].APP_LAUNCHER,u);Object(ut["openAuthenticatedUrlInBrowser"])(i,Object(Dl["j"])({entryPoint:"app_launcher_banner"}))});Cm.meta={name:"navigateToPricing",key:"actionsAppLauncherBannerActionsNavigateToPricing",description:"Handle a click to the slack.com/pricing and clog"};Cm.propTypes={bannerKey:Dn["default"].string};var Sm=Object(At["b"])("Clog and set dismiss welcome banner pref",function(e,t,a){var r=t();var n=Object(C["a"])({state:r});var i=Object(vm["r"])(r);var s=a?ym(a):"";var o=I["UiElement"].BTN_CLOSE;var l=_m({uiStep:s,uiElement:o,referringEventId:i});n.track(I["EventId"].APP_LAUNCHER,l);e(Object(Io["d"])({pref:"dismissed_app_launcher_welcome",value:true}));e(Object(Nl["s"])({isBannerDismissed:true}));e(Object(Nl["h"])())});Sm.meta={name:"setWelcomeDismissedPref",key:"actionsAppLauncherBannerActionsSetWelcomeDismissedPref",description:"Clog and set dismiss welcome banner pref"};Sm.propTypes={bannerKey:Dn["default"].string};var wm=Object(At["b"])("Clog and set dismiss limit banner pref",function(e,t,a){var r=t();var n=Object(C["a"])({state:r});var i=Object(vm["r"])(r);var s=a?ym(a):"";var o=I["UiElement"].BTN_CLOSE;var l=_m({uiStep:s,uiElement:o,referringEventId:i});n.track(I["EventId"].APP_LAUNCHER,l);e(Object(Io["d"])({pref:"dismissed_app_launcher_limit",value:true}));e(Object(Nl["s"])({isBannerDismissed:true}));e(Object(Nl["h"])())});wm.meta={name:"setLimitDismissedPref",key:"actionsAppLauncherBannerActionsSetLimitDismissedPref",description:"Clog and set dismiss limit banner pref"};wm.propTypes={bannerKey:Dn["default"].string};var jm=Object(At["b"])("Clog and set dismiss limit banner pref and welcome dismissed pref",function(e,t,a){var r=t();var n=Object(C["a"])({state:r});var i=Object(vm["r"])(r);var s=a?ym(a):"";var o=I["UiElement"].BTN_CLOSE;var l=_m({uiStep:s,uiElement:o,referringEventId:i});n.track(I["EventId"].APP_LAUNCHER,l);e(Object(Io["c"])({dismissed_app_launcher_limit:true,dismissed_app_launcher_welcome:true}));e(Object(Nl["s"])({isBannerDismissed:true}));e(Object(Nl["h"])())});jm.meta={name:"setLimitAndWelcomeDismissedPref",key:"actionsAppLauncherBannerActionsSetLimitAndWelcomeDismissedPref",description:"Clog and set dismiss limit banner pref and welcome dismissed pref"};jm.propTypes={bannerKey:Dn["default"].string};var Im=Object(At["b"])("re-activate app limit banner",function(e,t,a){var r=t();var n=Object(C["a"])({state:r});var i=Object(vm["r"])(r);var s=a?ym(a):"";var o=I["UiElement"].BTN_SHOW_ME;var l=_m({uiStep:s,uiElement:o,referringEventId:i});n.track(I["EventId"].APP_LAUNCHER,l);e(Object(Nl["s"])({isBannerDismissed:false}));return e(Object(Io["d"])({pref:"dismissed_app_launcher_limit",value:false})).then(function(){e(Object(Nl["h"])())})});Im.meta={name:"restoreLimitBanner",key:"actionsAppLauncherBannerActionsRestoreLimitBanner",description:"re-activate app limit banner"};Im.propTypes=null;var Tm=Object(At["b"])("re-activate app limit and app welcome banner",function(e,t,a){var r=t();var n=Object(C["a"])({state:r});var i=Object(vm["r"])(r);var s=a?ym(a):"";var o=I["UiElement"].BTN_SHOW_ME;var l=_m({uiStep:s,uiElement:o,referringEventId:i});n.track(I["EventId"].APP_LAUNCHER,l);e(Object(Nl["s"])({isBannerDismissed:false}));return e(Object(Io["c"])({dismissed_app_launcher_limit:false,dismissed_app_launcher_welcome:false})).then(function(){e(Object(Nl["h"])())})});Tm.meta={name:"restoreLimitAndWelcomeBanner",key:"actionsAppLauncherBannerActionsRestoreLimitAndWelcomeBanner",description:"re-activate app limit and app welcome banner"};Tm.propTypes=null;var Am=new k["b"]("app_launcher");var Nm={restoreLimitBanner:O["noop"],restoreLimitAndWelcomeBanner:O["noop"],hasDismissedWelcomeBanner:false,hasDismissedLimitBanner:false,scrollToKey:O["noop"]};var Pm=function(e){b()(t,e);function t(e){var a;c()(this,t);a=m()(this,v()(t).call(this,e));a.restorePrimaryBanner=a.restorePrimaryBanner.bind(he()(a));return a}d()(t,[{key:"restorePrimaryBanner",value:function e(){var t=this;var a=this.props,r=a.hasDismissedWelcomeBanner,n=a.hasDismissedLimitBanner;var i="";if(r&&n){i="free-limit-welcome";this.props.restoreLimitAndWelcomeBanner(i).then(function(){t.props.scrollToKey(i)})}else if(n){i="free-limit";this.props.restoreLimitBanner(i).then(function(){t.props.scrollToKey(i)})}}},{key:"render",value:function e(){var t=this;return n.a.createElement("div",{className:"padding_left_125 padding_right_125 padding_top_75 padding_bottom_75 align_center caption sk_off_white_bg"},Am.rt("Upgrade for unlimited apps. <Link>Learn more</Link>",null,function(e){var a=e.key,r=e.text;return n.a.createElement(Pe["a"],{key:a,onClick:t.restorePrimaryBanner},r)}))}}]);return t}(r["Component"]);Pm.displayName="AppsLauncherPersistentBanner";Pm.defaultProps=Nm;var Mm=function e(t){return{hasDismissedWelcomeBanner:Object(fm["b"])(t),hasDismissedLimitBanner:Object(fm["a"])(t),isPrimaryBannerDismissed:Object(vm["k"])(t)}};var Dm=function e(t){return Object(pm["bindActionCreators"])({restoreLimitBanner:Im,restoreLimitAndWelcomeBanner:Tm},t)};var xm=Object(y["connect"])(Mm,Dm)(Pm);var Rm=a(223);var Fm=new k["b"]("app_launcher");var Lm={featureAppLauncherFilters:false,isFilterPanelOpen:false,isAppLauncherFiltered:false,toggleFilterPane:O["noop"],selectAppLauncherFilter:O["noop"]};function Um(e){var t=e.featureAppLauncherFilters,a=e.isFilterPanelOpen,i=e.toggleFilterPane,s=e.isAppLauncherFiltered,o=e.selectAppLauncherFilter;var l=Object(r["useCallback"])(function(){i()},[i]);var c=Object(r["useCallback"])(function(){return o(Rm["a"])},[o]);if(!t)return null;var u=s?1:0;return n.a.createElement("div",{className:"p-browse_page_controls"},n.a.createElement("div",{className:"p-browse_page_controls__left"}),n.a.createElement("div",{className:_()("p-browse_page_controls__expander",a&&"p-browse_page_controls__expander--open")},n.a.createElement(J["c"],{className:"p-browse_page_controls__button",onClick:l},n.a.createElement(X["b"],{type:a?"times":"filters-bold",size:"inherit",className:"p-browse_page_controls__icon"}),"Filter",u>0&&n.a.createElement("span",{className:"p-browse_page_controls__button__pill"},u)),a&&s?n.a.createElement(Pe["a"],{className:"p-browse_page_controls__reset_button",onClick:c},Fm.t("Reset Filters")):null))}Um.displayName="AppLauncherControls";Um.defaultProps=Lm;var Bm=function e(t){return{featureAppLauncherFilters:Object(i["isFeatureEnabled"])(t,"feature_app_launcher_filters"),isFilterPanelOpen:Object(vm["m"])(t),isAppLauncherFiltered:Object(vm["h"])(t)!==Rm["a"]}};var qm={toggleFilterPane:Nl["A"],selectAppLauncherFilter:Nl["m"]};var Gm=Object(y["connect"])(Bm,qm)(Um);var Hm=a(821);var Wm=a(3574);var Vm=new k["b"]("app_launcher");var Km={featureAppLauncherFilters:false,selectedFilter:void 0,fetchAppLauncherFilters:O["noop"],selectAppLauncherFilter:O["noop"],clogAppLauncherFilterTriggerClick:O["noop"],clogAppLauncherFilterTriggerImpression:O["noop"],nonCategoryFilters:[],categoryFilters:[]};function zm(e){var t=e.featureAppLauncherFilters,a=e.selectedFilter,i=e.fetchAppLauncherFilters,s=e.selectAppLauncherFilter,o=e.clogAppLauncherFilterTriggerClick,l=e.clogAppLauncherFilterTriggerImpression,c=e.nonCategoryFilters,u=e.categoryFilters;Object(r["useEffect"])(function(){l()},[l]);Object(r["useEffect"])(function(){var e=i();return function(){e&&e.cancel&&e.cancel()}},[i]);var d=Object(r["useMemo"])(function(){return[{label:t?Vm.t("All app types"):"",value:Rm["a"]}].concat(c.map(function(e){var t=e.label,a=e.id;return{label:t,value:a}}))},[c,t]);var p=Object(r["useMemo"])(function(){return u.map(function(e){var t=e.label,a=e.id;return{label:t,value:a}})},[u]);var m=Object(r["useMemo"])(function(){return d.concat(p)},[p,d]);var h=Object(r["useMemo"])(function(){return[].concat(Da()(d),[{label:Vm.t("App Directory Categories"),options:p}])},[d,p]);var v=Object(r["useCallback"])(function(e){var t=e.value;s(t)},[s]);var f=Object(r["useCallback"])(function(){o()},[o]);if(!t)return null;return n.a.createElement(Hm["a"],{key:m.map(function(e){return e.value}).toString(),"data-qa":"app_launcher_filter_select",width:"100%",selectId:"channel_filter_type",options:h,selectedOption:m.find(function(e){return e.value===a}),onOptionSelected:v,onClick:f})}zm.displayName="AppLauncherFilterMenu";zm.defaultProps=Km;var Qm=function e(t){return{featureAppLauncherFilters:Object(i["isFeatureEnabled"])(t,"feature_app_launcher_filters"),isFetchingFilters:Object(vm["l"])(t),nonCategoryFilters:Object(vm["f"])(t),categoryFilters:Object(vm["d"])(t),selectedFilter:Object(vm["h"])(t)}};var Ym=function e(t){return Object(pm["bindActionCreators"])({fetchAppLauncherFilters:Nl["d"],selectAppLauncherFilter:Nl["m"],clogAppLauncherFilterTriggerClick:Nl["a"],clogAppLauncherFilterTriggerImpression:Nl["b"]},t)};var Jm=Object(y["connect"])(Qm,Ym)(zm);var Xm=new k["b"]("app_launcher");var Zm={isFilterPaneOpen:false,featureAppLauncherFilters:false};function $m(e){var t=e.isFilterPaneOpen,a=e.featureAppLauncherFilters;if(!a)return null;return n.a.createElement("div",{className:_()("p-browse_page_layout__filters_container",{"p-browse_page_layout__filters_container--open":t})},n.a.createElement("div",{className:"c-search_filter_section"},n.a.createElement("h3",{className:"c-search_filter_section__title"},Xm.t("App type")),n.a.createElement(Jm,null)))}$m.displayName="AppLauncherFilterPane";$m.defaultProps=Zm;var eh=function e(t){return{featureAppLauncherFilters:Object(i["isFeatureEnabled"])(t,"feature_app_launcher_filters"),isFilterPaneOpen:Object(vm["m"])(t)}};var th=Object(y["connect"])(eh)($m);var ah=a(757);var rh=a.n(ah);var nh=a(62);var ih={featureAppLauncher:false,categoryName:"",isAppLauncherFiltered:false,selectAppLauncherFilter:O["noop"],featureAppLauncherFilters:false,isIAP1Enabled:false};var sh=new k["b"]("app_launcher");function oh(e){var t=e.featureAppLauncher,a=e.categoryName,i=e.resultKey,s=e.isAppLauncherFiltered,o=e.selectAppLauncherFilter,l=e.featureAppLauncherFilters,c=e.isIAP1Enabled;var u=Object(r["useCallback"])(function(){return o(Rm["a"])},[o]);if(!t)return null;var d=null;var p=false;if(i===Rm["d"]&&s&&l&&!c){p=true;d=n.a.createElement(li["a"],{className:"p-app_launcher__category_header__clear_filter_link",onClick:u,"data-qa":"app_launcher__category_header__clear_filter_link"},sh.t("Clear filter"))}return n.a.createElement("div",{className:_()("p-app_launcher__category_header",{"p-app_launcher__category_header--filtered":p,"p-app_launcher__category_header--non_ia":!c}),"data-category_header":"true","data-qa":"app_launcher__category_header_"+i,key:i},n.a.createElement("h3",{className:"p-app_launcher__category_header__title"},a),d)}oh.displayName="AppLauncherCategoryHeader";oh.defaultProps=ih;var lh=function e(t,a){var r=a.result,n=void 0===r?{}:r;return{featureAppLauncher:Object(mm["a"])(t),categoryName:n.display_name,resultKey:n.key,isAppLauncherFiltered:Object(vm["h"])(t)!==Rm["a"],featureAppLauncherFilters:Object(i["isFeatureEnabled"])(t,"feature_app_launcher_filters"),isIAP1Enabled:Object(Hn["e"])(t)}};var ch=function e(t){return{selectAppLauncherFilter:function e(){return t(Nl["m"].apply(void 0,arguments))}}};var uh=Object(y["connect"])(lh,ch)(oh);var dh=a(109);var ph=a(421);var mh=a(1449);var hh=new k["b"]("app_launcher");var vh={app:void 0,handleClick:O["noop"]};function fh(e){var t=e.app,a=e.handleClick,i=e.appKey;var s=Object(r["useState"])(false),o=Y()(s,2),l=o[0],c=o[1];var u=Object(r["useCallback"])(function(){c(true)},[c]);var d=Object(r["useCallback"])(function(){a({appKey:i})},[a,i]);if(!t)return null;var p=l?ph["a"]:Object(ph["b"])(t,72);var m=t.is_installed;var h=m?null:n.a.createElement("div",{className:"p-app_launcher__app_card__pseudobutton c-button c-button--medium c-button--outline","data-qa":"app_launcher__app_card__add"},hh.t("Add"));return n.a.createElement(Ao["a"],{className:"p-app_launcher__app_card",onClick:d,"data-qa":"app_launcher__app_card--"+(m?"installed":"not_installed"),"data-app-id":t.app_id,role:m?null:"link"},n.a.createElement("div",{className:"p-app_launcher__app_card__container"},n.a.createElement("img",{className:"p-app_launcher__app_card__icon",src:p,alt:"",onError:u}),n.a.createElement("div",null,n.a.createElement("strong",{className:"p-app_launcher__app_card__title",style:{WebkitBoxOrient:"vertical"}},t.name),n.a.createElement("span",{className:"p-app_launcher__app_card__text",style:{WebkitBoxOrient:"vertical"},"aria-label":t.short_description||""},Object(mh["a"])(t.short_description||"",function(e,t){return n.a.createElement("strong",{key:t},e)})))),h)}fh.displayName="AppLauncherAppCard";fh.defaultProps=vh;var bh=function e(t,a){var r=a.appKey;var n=Object(vm["c"])(t)||{};return{app:n[r]}};var gh=function e(t){return Object(pm["bindActionCreators"])({handleClick:Nl["f"]},t)};var _h=Object(y["connect"])(bh,gh)(fh);var yh={chunk:{appKeys:[]},columns:1,isIAP1Enabled:false};function Oh(e){var t=e.chunk,a=e.columns,r=e.isIAP1Enabled;var i={gridTemplateColumns:"repeat("+a+", 1fr)"};return n.a.createElement("div",{className:_()("p-app_launcher__grid",{"p-app_launcher__grid--non_ia":!r}),style:i,key:t.key,"data-qa":"app_launcher__result_row"},t.appKeys.map(function(e){return n.a.createElement(_h,{appKey:e,key:e})}))}Oh.displayName="AppLauncherResultRow";Oh.defaultProps=yh;var kh=Object(dh["pure"])(Oh);var Eh=a(4787);var Ch=a(2856);var Sh=new k["b"]("app_launcher");var wh={children:null,primaryButtonCTA:null,handlePrimaryButtonClick:O["noop"],secondaryButtonCTA:null,handleSecondaryButtonClick:O["noop"],imageUrl:null,imageUrl2x:null,postScriptText:null,isFocused:false,isIAP1Enabled:false};function jh(e){var t=e.title,a=e.primaryButtonCTA,r=e.handlePrimaryButtonClick,i=e.secondaryButtonCTA,s=e.children,o=e.handleClose,l=e.handleSecondaryButtonClick,c=e.imageUrl,u=e.imageUrl2x,d=e.postScriptText,p=e.isFocused,m=e.isIAP1Enabled;var h;var v;var f;var b;var g;a&&(h=n.a.createElement(J["d"],{className:_()({"p-browser_education_banner__primary_cta":m,"p-app_launcher_banner__primary_cta":!m}),type:"primary",size:"medium",onClick:r,"data-qa":"app_launcher_banner__primary_cta"},a));i&&(v=n.a.createElement(J["d"],{type:"outline",size:"medium",onClick:l,"data-qa":"app_launcher_banner__secondary_cta"},i));c&&u&&(g={srcSet:c+", "+u+" 2x"});c&&(f=n.a.createElement("img",te()({},g,{src:c,className:_()({"p-browser_education_banner__image":m,"p-app_launcher_banner__image":!m}),alt:"","data-qa":"app_launcher_banner__image"})));d&&(b=n.a.createElement("div",{className:"p-app_launcher_banner__post_script"},d));var y=_()({"p-app_launcher_banner":!m,"p-app_launcher_banner--focused":p&&!m,"p-browser_education_banner p-browser_education_banner--with-image margin_left_150 margin_right_150":m});return n.a.createElement("section",{className:y,"data-qa":"app_launcher_banner"},n.a.createElement("div",{className:_()({"p-browser_education_banner__container":m,"p-app_launcher_banner__container":!m})},n.a.createElement("div",{className:_()({"p-browser_education_banner__body":m,"p-app_launcher_banner__body":!m})},n.a.createElement("h3",{className:_()({"p-browser_education_banner__title":m,"p-app_launcher_banner__title":!m})},t),s,n.a.createElement("div",{className:_()({"p-browser_education_banner__ctas":m,"p-app_launcher_banner__ctas":!m})},h,v)),f),b,n.a.createElement(as["a"],{icon:"times","aria-label":Sh.t("Close"),className:"p-app_launcher_banner__close",onClick:o,"data-qa":"app_launcher_banner_close"}))}jh.displayName="AppLauncherBanner";jh.defaultProps=wh;var Ih=function e(t){return{isIAP1Enabled:Object(Hn["e"])(t)}};var Th=Object(y["connect"])(Ih)(jh);var Ah=new k["b"]("app_launcher");var Nh={featureAppLauncherBanners:false,bannerKey:"",navigateToAppDirectory:O["noop"],navigateToManageApps:O["noop"],navigateToPricing:O["noop"],setWelcomeDismissedPref:O["noop"],setLimitDismissedPref:O["noop"],setLimitAndWelcomeDismissedPref:O["noop"],clogImpression:O["noop"],isFocused:false,showPostScript:false};var Ph=function(e){b()(t,e);function t(e){var a;c()(this,t);a=m()(this,v()(t).call(this,e));a.closeBannerWithWelcomeDismissedPref=a.closeBannerWithWelcomeDismissedPref.bind(he()(a));a.closeBannerWithLimitDismissedPref=a.closeBannerWithLimitDismissedPref.bind(he()(a));a.closeBannerWithLimitAndWelcomeDismissedPref=a.closeBannerWithLimitAndWelcomeDismissedPref.bind(he()(a));a.handleAppDirectoryClick=a.handleAppDirectoryClick.bind(he()(a));a.handleManageAppsClick=a.handleManageAppsClick.bind(he()(a));a.handlePricingClick=a.handlePricingClick.bind(he()(a));return a}d()(t,[{key:"componentDidMount",value:function e(){this.props.clogImpression(this.props.bannerKey)}},{key:"closeBannerWithLimitAndWelcomeDismissedPref",value:function e(){this.props.setLimitAndWelcomeDismissedPref(this.props.bannerKey)}},{key:"closeBannerWithLimitDismissedPref",value:function e(){this.props.setLimitDismissedPref(this.props.bannerKey)}},{key:"closeBannerWithWelcomeDismissedPref",value:function e(){this.props.setWelcomeDismissedPref(this.props.bannerKey)}},{key:"handleAppDirectoryClick",value:function e(){this.props.navigateToAppDirectory(this.props.bannerKey)}},{key:"handleManageAppsClick",value:function e(){this.props.navigateToManageApps(this.props.bannerKey)}},{key:"handlePricingClick",value:function e(){this.props.navigateToPricing(this.props.bannerKey)}},{key:"maybeRenderPostScript",value:function e(){var t=this;if(!this.props.featureAppLauncherBanners)return null;if(!this.props.showPostScript)return null;return Ah.rt("<p>Your team is using additional apps that don\u2019t show up on this page.<br></br>Curious about more apps on Slack? <Link>Browse the App Directory</Link></p>",null,function(e){var a=e.tag,r=e.key,i=e.text;switch(a){case"Link":return n.a.createElement(Pe["a"],{key:r,onClick:t.handleAppDirectoryClick},i);case"br":return n.a.createElement("br",null);default:return n.a.createElement("span",{key:r},i)}})}},{key:"render",value:function e(){var t=this;switch(this.props.bannerKey){case Rm["c"].FREE_WELCOME:return n.a.createElement(Th,{title:Ah.t("Bring all your tools into Slack"),primaryButtonCTA:Ah.t("Browse App Directory"),handlePrimaryButtonClick:this.handleAppDirectoryClick,imageUrl:"/img/app-launcher/app_launcher_welcome.png",imageUrl2x:"/img/app-launcher/app_launcher_welcome@2x.png",handleClose:this.closeBannerWithWelcomeDismissedPref,isFocused:this.props.isFocused,postScriptText:this.maybeRenderPostScript()},Ah.rt("<p>On Slack, apps belong to you and your team. Install once and everyone can use them. Teams on the free version of Slack get a limited number of apps. <Link>Upgrade to a paid plan</Link> to get as many as you want.</p>",null,function(e){var a=e.tag,r=e.key,i=e.text;switch(a){case"Link":return n.a.createElement(Pe["a"],{key:r,onClick:t.handlePricingClick},i);default:return n.a.createElement("p",{key:r},i)}}));case Rm["c"].FREE_LIMIT:return n.a.createElement(Th,{title:Ah.t("Upgrade for unlimited apps"),primaryButtonCTA:Ah.t("See Upgrade Options"),handlePrimaryButtonClick:this.handlePricingClick,secondaryButtonCTA:Ah.t("Later"),handleSecondaryButtonClick:this.closeBannerWithLimitDismissedPref,imageUrl:"/img/app-launcher/app_launcher_upgrade.png",imageUrl2x:"/img/app-launcher/app_launcher_upgrade@2x.png",handleClose:this.closeBannerWithLimitDismissedPref,isFocused:this.props.isFocused,postScriptText:this.maybeRenderPostScript()},Ah.rt("<p>Your team\u2019s already using the max you can use with the free version of Slack. Upgrade to a paid plan to add as many apps as you\u2019d like. <Link>Manage apps</Link></p>",null,function(e){var a=e.tag,r=e.key,i=e.text;switch(a){case"Link":return n.a.createElement(Pe["a"],{key:r,onClick:t.handleManageAppsClick},i);default:return n.a.createElement("p",{key:r},i)}}));case Rm["c"].FREE_LIMIT_WELCOME:return n.a.createElement(Th,{title:Ah.t("Bring all your tools into Slack"),primaryButtonCTA:Ah.t("See Upgrade Options"),handlePrimaryButtonClick:this.handlePricingClick,secondaryButtonCTA:Ah.t("Later"),handleSecondaryButtonClick:this.closeBannerWithLimitAndWelcomeDismissedPref,imageUrl:"/img/app-launcher/app_launcher_upgrade.png",imageUrl2x:"/img/app-launcher/app_launcher_upgrade@2x.png",handleClose:this.closeBannerWithLimitAndWelcomeDismissedPref,isFocused:this.props.isFocused,postScriptText:this.maybeRenderPostScript()},Ah.rt("<p>On Slack, apps belong to you and your team. Your team\u2019s already using the max you can use with the free version of Slack. <Link>Manage apps</Link></p>",null,function(e){var a=e.tag,r=e.key,i=e.text;switch(a){case"Link":return n.a.createElement(Pe["a"],{key:r,onClick:t.handleManageAppsClick},i);default:return n.a.createElement("p",{key:r},i)}}));case Rm["c"].PAID_WELCOME:return n.a.createElement(Th,{title:Ah.t("Bring all your tools into Slack"),primaryButtonCTA:Ah.t("Browse App Directory"),handlePrimaryButtonClick:this.handleAppDirectoryClick,imageUrl:"/img/app-launcher/app_launcher_welcome.png",imageUrl2x:"/img/app-launcher/app_launcher_welcome@2x.png",handleClose:this.closeBannerWithWelcomeDismissedPref,isFocused:this.props.isFocused,postScriptText:this.maybeRenderPostScript()},Ah.rt("<p>On Slack, apps belong to you and your team. Install once and everyone can use them. They can help you streamline common tasks, sync your status with your calendar, and more.</p>"));case Rm["c"].PAID_WELCOME_SMALL_CTA:return n.a.createElement(Th,{title:Ah.t("Bring all your tools into Slack"),imageUrl:"/img/app-launcher/app_launcher_welcome.png",imageUrl2x:"/img/app-launcher/app_launcher_welcome@2x.png",handleClose:this.closeBannerWithWelcomeDismissedPref,isFocused:this.props.isFocused,postScriptText:this.maybeRenderPostScript()},Ah.rt("<p>On Slack, apps belong to you and your team. Install once and everyone can use them. They can help you streamline common tasks, sync your status with your calendar, and more.</p><p>Looking for more apps? <Link>Browse App Directory</Link></p>",null,function(e){var a=e.tag,r=e.key,i=e.text;switch(a){case"Link":return n.a.createElement(Pe["a"],{key:r,onClick:t.handleAppDirectoryClick},i);default:return n.a.createElement("p",{key:r},i)}}));case Rm["c"].PAID_AAA_APP_REQUESTING_OFF:return n.a.createElement(Th,{title:Ah.t("Bring all your tools into Slack"),imageUrl:"/img/app-launcher/app_launcher_welcome.png",imageUrl2x:"/img/app-launcher/app_launcher_welcome@2x.png",handleClose:this.closeBannerWithWelcomeDismissedPref,isFocused:this.props.isFocused,postScriptText:this.maybeRenderPostScript()},Ah.rt("<p>On Slack, apps belong to you and your team. They can help you streamline common tasks, sync your status with your calendar, and more.</p><p>Your admin can install apps for your team to use. <Link>Learn more</Link></p>",{fallbackHash:"cce1379df5391b66f89dd00540bddd61da95d1f6"},function(e){var t=e.tag,a=e.key,r=e.text;switch(t){case"Link":return n.a.createElement(Pe["a"],{key:a,href:"https://slack.com/help/articles/360001537467-A-guide-to-apps-and-the-Slack-App-Directory"},r);default:return n.a.createElement("p",{key:a},r)}}));default:return n.a.createElement(n.a.Fragment,null)}}}]);return t}(r["Component"]);Ph.displayName="AppLauncherConnectedBanner";Ph.defaultProps=Nh;var Mh=function e(t){return{featureAppLauncherBanners:Object(i["isFeatureEnabled"])(t,"feature_app_launcher_banners"),showPostScript:Object(fm["g"])(t)}};var Dh=function e(t){return Object(pm["bindActionCreators"])({setWelcomeDismissedPref:Sm,setLimitDismissedPref:wm,setLimitAndWelcomeDismissedPref:jm,navigateToAppDirectory:km,navigateToManageApps:Em,navigateToPricing:Cm,clogImpression:Om},t)};var xh=Object(y["connect"])(Mh,Dh)(Ph);var Rh={featureAppLauncherFilters:false};var Fh=new k["b"]("app_launcher");function Lh(e){var t=e.featureAppLauncherFilters;if(!t)return null;return n.a.createElement("div",{className:"p-app_launcher__filtered_no_results"},Fh.t("Your team hasn\u2019t installed any apps from this category yet. Some of the most popular ones on Slack are listed below. Give one a try!"))}Lh.displayName="AppLauncherFilterEmptyState";Lh.defaultProps=Rh;var Uh=function e(t){return{featureAppLauncherFilters:Object(i["isFeatureEnabled"])(t,"feature_app_launcher_filters")}};var Bh=Object(y["connect"])(Uh)(Lh);var qh={featureAppLauncherFilters:false};var Gh=new k["b"]("app_launcher");function Hh(e){var t=e.featureAppLauncherFilters;if(!t)return null;return n.a.createElement("div",{className:"p-app_launcher__filtered_no_results"},Gh.t("Your team hasn\u2019t installed any apps from this category yet. Your admin can install apps on Slack for you to use."))}Hh.displayName="AppLauncherFilterZeroAppsState";Hh.defaultProps=qh;var Wh=function e(t){return{featureAppLauncherFilters:Object(i["isFeatureEnabled"])(t,"feature_app_launcher_filters")}};var Vh=Object(y["connect"])(Wh)(Hh);var Kh=new k["b"]("app_launcher");var zh=rh()("enter");var Qh={featureAppLauncher:false,nextCursor:void 0,referringEventId:void 0,isBannerDismissed:false,loadMoreApps:O["noop"],handleAppLauncherCardClick:O["noop"],clientTheme:"light",width:0,height:0,seeAAAWhiteListWarning:false,isIAP1Enabled:false};var Yh=function(e){b()(t,e);d()(t,null,[{key:"getDerivedStateFromProps",value:function e(t,a){var r=t.width,n=t.isIAP1Enabled;var i=1;for(var s=1;s<=(n?Rm["f"]:Rm["e"]);s++)r>=Rm["b"]*s&&(i=s);if(i!==a.numOfColumns)return{numOfColumns:i};return null}}]);function t(e){var a;c()(this,t);a=m()(this,v()(t).call(this,e));a.isPaginating=false;a.renderRow=a.renderRow.bind(he()(a));a.paginate=a.paginate.bind(he()(a));a.isFocusableItem=a.isFocusableItem.bind(he()(a));a.getCurrentResults=a.getCurrentResults.bind(he()(a));a.handleKeydownOnItem=a.handleKeydownOnItem.bind(he()(a));a.state={numOfColumns:e.isIAP1Enabled?Rm["f"]:Rm["e"]};a.listRef=n.a.createRef();return a}d()(t,[{key:"componentDidMount",value:function e(){this.props.clogger.track(I["EventId"].APP_INDEX_OPEN,qe()({},I["ClientEventKeys"].referring_event_id,this.props.referringEventId));this.props.registerListRef(this.listRef)}},{key:"getCurrentResults",value:function e(){return this.props.resultsMap[this.state.numOfColumns]||[]}},{key:"handleKeydownOnItem",value:function e(t){if(t.keyCode!==zh)return;if(1!==this.state.numOfColumns)return;this.props.handleAppLauncherCardClick({appKey:t.id})}},{key:"isFocusableItem",value:function e(t){var a=t.index;var r=this.getCurrentResults()[a]||{},n=r.type;return n===Rm["g"].APP_CHUNK||n===Rm["g"].CATEGORY||n===Rm["g"].EMPTY_STATE||n===Rm["g"].APP_LAUNCHER_BANNER&&!this.props.isBannerDismissed}},{key:"loadMoreApps",value:function e(){var t=this;if(this.isPaginating)return;this.isPaginating=true;this.props.loadMoreApps({isAppLauncher:true}).then(function(){t.isPaginating=false})}},{key:"paginate",value:function e(){this.shouldPaginate()&&this.loadMoreApps()}},{key:"shouldPaginate",value:function e(){return!!this.props.nextCursor&&!!this.props.isShowingDefaultAppCategories}},{key:"showAAAWhitelistWarning",value:function e(){if(!this.props.seeAAAWhiteListWarning)return null;return n.a.createElement("span",null,Kh.rt("Also, your team admin must approve an app before it can be installed. <Link>Learn more</Link>",null,function(e){var t=e.key,a=e.text;return n.a.createElement(Pe["a"],{href:"https://slack.com/help/articles/222386767-manage-apps-for-your-workspace",key:t},a)}))}},{key:"renderRow",value:function e(t,a){var r=a.hasFocus,i=a.hasFocusWithin;var s=this.getCurrentResults()[t];switch(s.type){case Rm["g"].LOADING:return n.a.createElement("div",{style:{height:62},key:s.key},n.a.createElement(Qt["a"],{size:"jumbo",loadingMessage:Kh.t("Loading apps...")}));case Rm["g"].CATEGORY:return n.a.createElement(uh,{result:s});case Rm["g"].APP_CHUNK:return n.a.createElement(kh,{chunk:s,columns:this.state.numOfColumns,isIAP1Enabled:this.props.isIAP1Enabled});case Rm["g"].APP_LAUNCHER_BANNER:return n.a.createElement(xh,{listRef:this.listRef,bannerKey:s.key,isFocused:r||i,isIAP1Enabled:this.props.isIAP1Enabled});case Rm["g"].FILTER_EMPTY_STATE:return n.a.createElement(Bh,null);case Rm["g"].FILTER_ZERO_APPS_STATE:return n.a.createElement(Vh,null);default:return n.a.createElement(n.a.Fragment,null)}}},{key:"renderNoResultsState",value:function e(){return n.a.createElement("section",{key:"no-results",className:"p-app_launcher__no_results align_center full_width","data-qa":"app_launcher__no_results",role:"alert"},n.a.createElement("p",null,Kh.rt("No results")),n.a.createElement("p",null,Kh.rt("You might want to try using different keywords, checking for typos or adjusting your filters.")),this.showAAAWhitelistWarning())}},{key:"render",value:function e(){var t=this.props,a=t.featureAppLauncher,r=t.announcerSearchInput,i=t.isLoading,s=t.clientTheme,o=t.keysMap,l=t.width,c=t.height,u=t.isIAP1Enabled;if(!a)return null;var d=this.state.numOfColumns;var p=o[d]||[];var m=this.getCurrentResults();if(!m.length&&r){if(i)return n.a.createElement(Qt["a"],{size:"jumbo",loadingMessage:Kh.t("Loading apps...")});return this.renderNoResultsState()}var h=_()("p-app_launcher__list_container",qe()({"p-app_launcher__list_container--loading":0===p.length,"p-app_launcher__list_container--loading--non_ia":0===p.length&&!u},"p-app_launcher__list_container--loading--"+s,0===p.length&&"light"!==s));return n.a.createElement("div",{className:h,"data-qa":"app_launcher__results_list"},n.a.createElement(Uc["a"],{ref:this.listRef,width:l,height:Math.floor(c),keys:p,rowRenderer:this.renderRow,loadPost:this.paginate,loadAround:this.paginate,isFocusableItem:this.isFocusableItem,onItemClick:this.handleKeydownOnItem,hideHiddenStopTabs:true}))}}]);return t}(r["Component"]);Yh.displayName="AppLauncherSearchResults";Yh.defaultProps=Qh;var Jh=function e(t){return{clogger:Object(C["a"])({state:t}),announcerSearchInput:Object(vm["a"])(t),resultsMap:Object(vm["g"])(t),keysMap:Object(vm["e"])(t),nextCursor:Object(vm["q"])(t),isShowingDefaultAppCategories:Object(vm["o"])(t),isBannerDismissed:Object(vm["k"])(t),featureAppLauncher:Object(mm["a"])(t),clientTheme:Object(G["getClientTheme"])(t),referringEventId:Object(vm["r"])(t),isLoading:Object(vm["n"])(t),seeAAAWhiteListWarning:!Object(M["l"])(t)&&Object(nh["a"])(t,"app_whitelist_enabled"),isIAP1Enabled:Object(Hn["e"])(t)}};var Xh=function e(t){return Object(pm["bindActionCreators"])({loadMoreApps:Nl["g"],handleAppLauncherCardClick:Nl["f"]},t)};var Zh=Object(y["connect"])(Jh,Xh)(Yh);var $h=new k["b"]("app_launcher");var ev={isIAP1Enabled:false,featureAppLauncherFilters:false,isFilterPaneOpen:false};function tv(e){var t=e.featureAppLauncher,a=e.announcerSearchInput,r=e.isLoading,i=e.keyLength,s=e.registerListRef,o=e.isIAP1Enabled,l=e.featureAppLauncherFilters,c=e.isFilterPaneOpen;if(!t)return null;var u=i>1&&a&&!r?$h.t('App search results for "{searchTerm}" ready. To review results, press the tab key.',{searchTerm:a,fallbackHash:"d63e90397a6b47185b2e0b47d11478fa0dc1a153"}):null;var d=n.a.createElement(Cc["a"],null,function(e){var t=e.width,a=e.height,r=e.measureRef;return n.a.createElement("div",{className:"p-app_launcher__measure_container","data-qa":"app_launcher__results_container",ref:r},n.a.createElement(Zh,{width:t,height:a,registerListRef:s}))});if(o&&l)return n.a.createElement(n.a.Fragment,null,n.a.createElement("span",{"aria-live":"polite",className:"offscreen"},u),n.a.createElement(Gm,null),n.a.createElement("div",{className:"p-app_launcher__content"},n.a.createElement("div",{className:_()("p-browse_page_layout__results_container",{"p-browse_page_layout__results_container--padded":c})},d),n.a.createElement(th,null)));return n.a.createElement(n.a.Fragment,null,n.a.createElement("span",{"aria-live":"polite",className:"offscreen"},u),d)}tv.defaultProps=ev;var av=function e(t){return{clientTheme:Object(G["getClientTheme"])(t),announcerSearchInput:Object(vm["a"])(t),isLoading:Object(vm["n"])(t),featureAppLauncher:Object(mm["a"])(t),keyLength:(Object(vm["e"])(t)[1]||[]).length,isFilterPaneOpen:Object(vm["m"])(t),isIAP1Enabled:Object(Hn["e"])(t),featureAppLauncherFilters:Object(i["isFeatureEnabled"])(t,"feature_app_launcher_filters")}};var rv=Object(y["connect"])(av)(tv);var nv=new k["b"]("app_launcher");var iv={small:120,medium:160,large:200};var sv={featureAppLauncherFilters:false,menuProps:void 0,selectedFilter:void 0,onMenuItemSelected:O["noop"],fetchAppLauncherFilters:O["noop"],isFetchingFilters:false,nonCategoryFilters:[],categoryFilters:[]};function ov(e){var t=e.featureAppLauncherFilters,a=e.menuProps,i=e.selectedFilter,s=e.onMenuItemSelected,o=e.isFetchingFilters,l=e.fetchAppLauncherFilters,c=e.nonCategoryFilters,u=e.categoryFilters;Object(r["useEffect"])(function(){var e=l();return function(){e&&e.cancel&&e.cancel()}},[l]);var d=Object(r["useCallback"])(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.label,a=e.id;var r=n.a.createElement(X["b"],{type:"check-small",className:"p-app_launcher_filter_menu--icon"});var o="p-app_launcher_filter_menu--selected-item";return n.a.createElement(To["b"],{"data-qa":"app_launcher_filter_menu_item--"+a,key:a,onSelected:function e(){return s(a)},icon:i===a?r:null,className:i===a?o:""},t)},[i,s]);var p=Object(fd["a"])(function(){return new Array(5).fill(null).map(function(e,t){return n.a.createElement(To["b"],{key:"placeholder-"+t,"data-qa":"app_launcher_filter_menu__placeholder_item",disabled:true},n.a.createElement(Iu["b"],{size:"random",sizes:iv}))})},[]);var m=Object(r["useMemo"])(function(){if(o)return p;return[d({label:t?nv.t("All apps types"):"",id:Rm["a"]})].concat(Da()(c.map(d)),[n.a.createElement(To["d"],{key:"separator"}),n.a.createElement(To["c"],{key:"category_header",label:t?nv.t("App Directory Categories"):""})],Da()(u.map(d)))},[d,u,t,p,c,o]);if(!t)return null;return n.a.createElement(To["f"],te()({},a,{"data-qa":"app_launcher_filter_menu"}),m)}ov.displayName="AppLauncherFilterMenu";ov.defaultProps=sv;var lv=function e(t){return{featureAppLauncherFilters:Object(i["isFeatureEnabled"])(t,"feature_app_launcher_filters"),isFetchingFilters:Object(vm["l"])(t),nonCategoryFilters:Object(vm["f"])(t),categoryFilters:Object(vm["d"])(t)}};var cv=function e(t){return Object(pm["bindActionCreators"])({fetchAppLauncherFilters:Nl["d"]},t)};var uv=Object(y["connect"])(lv,cv)(ov);var dv=a(4715);var pv=new k["b"]("app_launcher");var mv={featureAppLauncherFilters:false,selectedFilter:Rm["a"],selectAppLauncherFilter:O["noop"],clogAppLauncherFilterTriggerClick:O["noop"],clogAppLauncherFilterTriggerImpression:O["noop"]};function hv(e){var t=e.featureAppLauncherFilters,a=e.selectedFilter,i=e.selectAppLauncherFilter,s=e.clogAppLauncherFilterTriggerClick,o=e.clogAppLauncherFilterTriggerImpression;Object(r["useEffect"])(function(){o()},[o]);var l=Object(r["useCallback"])(function(e){return n.a.createElement(uv,{onMenuItemSelected:i,selectedFilter:a,menuProps:e})},[a,i]);var c=Object(r["useCallback"])(function(){s()},[s]);if(!t)return null;var u=a!==Rm["a"];var d=u?pv.t("Filter apps (filter active)"):pv.t("Filter apps");return n.a.createElement(To["e"],{renderMenu:l,position:"bottom-left",offsetY:8,onClick:c},n.a.createElement(as["a"],{icon:"filters","data-qa":"app_launcher_filter_menu_trigger",className:"p-app_launcher_filter_trigger",showBadge:u,"aria-label":d}))}hv.displayName="AppLauncherFilterTrigger";hv.defaultProps=mv;var vv=function e(t){return{featureAppLauncherFilters:Object(i["isFeatureEnabled"])(t,"feature_app_launcher_filters"),selectedFilter:Object(vm["h"])(t)}};var fv=function e(t){return Object(pm["bindActionCreators"])({selectAppLauncherFilter:Nl["m"],clogAppLauncherFilterTriggerClick:Nl["a"],clogAppLauncherFilterTriggerImpression:Nl["b"]},t)};var bv=Object(y["connect"])(vv,fv)(hv);var gv=a(4743);var _v={featureAppLauncher:false,teamId:null,fetchDefaultApps:O["noop"],resetSearch:O["noop"],userAttentionIsOnChat:false,composerVisible:false,removeFromSectionNavigation:O["noop"],addToSectionNavigation:O["noop"],shouldShowPersistentLimitBanner:false,isBannerDismissed:false,isIAP1Enabled:false,featureAppLauncherFilters:false};var yv=function(e){b()(t,e);function t(e){var a;c()(this,t);a=m()(this,v()(t).call(this,e));a.searchInputRef=n.a.createRef();a.focus=a.focus.bind(he()(a));a.registerListRef=a.registerListRef.bind(he()(a));a.scrollAppLauncherResultsToKey=a.scrollAppLauncherResultsToKey.bind(he()(a));a.listRef={};return a}d()(t,[{key:"componentDidMount",value:function e(){this.props.fetchDefaultApps({isAppLauncher:true})}},{key:"componentDidUpdate",value:function e(t){var a={prevUserAttentionIsOnChat:t.userAttentionIsOnChat,prevComposerVisible:t.composerVisible,currentUserAttentionIsOnChat:this.props.userAttentionIsOnChat,currentComposerVisible:this.props.composerVisible};Object(Vi["a"])(a)&&this.props.addToSectionNavigation();Object(Ki["a"])(a)&&this.props.removeFromSectionNavigation();t.isBannerDismissed!==this.props.isBannerDismissed&&true===this.props.isBannerDismissed&&this.focus()}},{key:"componentWillUnmount",value:function e(){this.props.resetSearch()}},{key:"focus",value:function e(){this.searchInputRef.current.focus()}},{key:"registerListRef",value:function e(t){this.listRef=t}},{key:"scrollAppLauncherResultsToKey",value:function e(t){var a=this;this.listRef&&this.listRef.current&&setTimeout(function(){a.listRef.current.scrollToIfNotVisible({itemToScroll:t})},100)}},{key:"render",value:function e(){var t=this.props,a=t.featureAppLauncher,r=t.shouldShowPersistentLimitBanner,i=t.isIAP1Enabled,s=t.featureAppLauncherFilters;if(!a)return null;var o={addAppsVariant:false,channelId:null};var l=i&&s;return n.a.createElement(Yp["b"],{subtype:"app_launcher"},r&&n.a.createElement(xm,{scrollToKey:this.scrollAppLauncherResultsToKey}),n.a.createElement("div",{className:_()("p-app_launcher",{"p-app_launcher--ia_filters":l}),"data-qa":"app_launcher"},n.a.createElement("div",{className:_()("p-app_launcher__grid margin_bottom_0 margin_top_0",{"p-app_launcher__grid--non_ia":!i,"p-app_launcher__grid--ia_filters":l})},n.a.createElement("div",{className:_()("p-app_launcher__search_filter_container",{"p-app_launcher__search_filter_container--ia_filters":l})},n.a.createElement(hm["a"],{isAppLauncher:true,ref:this.searchInputRef,className:"p-app_launcher__search"}),!i&&n.a.createElement(bv,null))),n.a.createElement(rv,te()({},o,{registerListRef:this.registerListRef}))))}}]);return t}(r["Component"]);yv.displayName="AppLauncher";yv.defaultProps=_v;var Ov=function e(t){var a=Object(fm["c"])(t)&&Object(vm["o"])(t)&&Object(vm["k"])(t);return{featureAppLauncher:Object(mm["a"])(t),userAttentionIsOnChat:Object(ii["e"])(t),shouldShowPersistentLimitBanner:a,composerVisible:Object(Wi["isComposerVisible"])(t),teamId:Object(ri["b"])(t),isBannerDismissed:Object(vm["k"])(t),isIAP1Enabled:Object(Hn["e"])(t),featureAppLauncherFilters:Object(i["isFeatureEnabled"])(t,"feature_app_launcher_filters")}};var kv=function e(t){return Object(pm["bindActionCreators"])({fetchDefaultApps:Nl["e"],resetSearch:Nl["j"]},t)};var Ev=Object(Gi["a"])(yv,"AppLauncher",{index:8});var Cv=Object(y["connect"])(Ov,kv)(Ev);var Sv=a(1960);var wv=new k["b"]("app_launcher");var jv={className:""};var Iv=function(e){b()(t,e);function t(e){var a;c()(this,t);a=m()(this,v()(t).call(this,e));a.clogAppDirectory=a.clogAppDirectory.bind(he()(a));return a}d()(t,[{key:"clogAppDirectory",value:function e(){this.props.clogger.track("CLASSIC_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"CHANNEL_HEADER",ui_element:"LINK_APP_DIRECTORY"}}})}},{key:"renderIAHeader",value:function e(){var t=wv.t("Apps");var a=wv.t("App Directory",{fallbackHash:"047851e252b780cc0e6c7e488d6209d47040450e",note:"Label for button that opens the app directory"});return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"p-ia__view_header__title"},t),n.a.createElement("div",{className:"p-ia__view_header__spacer"}),n.a.createElement("div",{className:"caption sk_foreground_max_solid"},n.a.createElement(Ro,{onClick:this.clogAppDirectory,className:"p-app_launcher_actions__button_link","data-qa":"app_launcher_header__more_apps_link",href:"/apps?utm_source=in-prod&utm_medium=inprod-link_app_directory-app_launcher-click","aria-label":wv.t("Apps",{note:"Button that opens up the app directory when clicked"}),iconType:"external-link",buttonLabel:a})))}},{key:"render",value:function e(){var t=this.props,a=t.className,r=t.isIAP1Enabled;if(r)return this.renderIAHeader();var i=wv.t("Apps");var s=wv.t("Your tools, right in Slack.");return n.a.createElement("div",{className:a,"data-qa":"app_launcher__page_header"},n.a.createElement("h2",{className:"p-classic_nav__channel_header__title"},i),n.a.createElement("div",{className:"p-classic_nav__channel_header__subtitle overflow_ellipsis"},s))}}]);return t}(r["Component"]);Iv.displayName="AppLauncherPageHeader";Iv.defaultProps=jv;var Tv=function e(t){return{isIAP1Enabled:Object(Hn["e"])(t),clogger:Object(C["a"])({state:t})}};var Av=Object(y["connect"])(Tv)(Iv);var Nv=a(655);var Pv=a(834);var Mv=a(163);var Dv=a(2009);var xv=a(4692);var Rv=a(424);var Fv=a(349);var Lv={children:null,className:void 0,onClick:O["noop"],onMouseMove:O["noop"]};var Uv=function(e){b()(t,e);function t(e){var a;c()(this,t);a=m()(this,v()(t).call(this,e));a.onClick=a.onClick.bind(he()(a));a.onMouseMove=a.onMouseMove.bind(he()(a));a.dragging=false;a.dragStartX=null;a.dragStartY=null;return a}d()(t,[{key:"onClick",value:function e(t){var a=t.currentTarget;var r=false;var n=t.target;while(!r&&n&&n!==a){r=["A","BUTTON"].includes(n.nodeName)||n.classList.contains("c-message__editor__input_container");n=n.parentNode}if(r)return;var i=false;if(this.dragging){var s=Math.pow(t.clientX-this.dragStartX,2)+Math.pow(t.clientY-this.dragStartY,2);i=s>16;this.dragging=false}i||t.shiftKey||this.props.onClick(t)}},{key:"onMouseMove",value:function e(t){if((1===t.button||1===t.buttons)&&!this.dragging){this.dragging=true;this.dragStartX=t.clientX;this.dragStartY=t.clientY}this.props.onMouseMove(t)}},{key:"render",value:function e(){return n.a.createElement("div",te()({},this.props,{className:this.props.className,onClick:this.onClick,onMouseMove:this.onMouseMove,role:"link",tabIndex:"0"}),this.props.children)}}]);return t}(r["Component"]);Uv.displayName="ControlledClick";Uv.defaultProps=Lv;var Bv=Uv;var qv={className:void 0};function Gv(e){var t=e.msg,a=e.renderHeader,r=e.renderAvatar,i=e.channel,s=e.isEditing,o=e.className,l=e.jumpToMessage,c=e.showThread,u=e.featureDangerouslyGuardIATranslations;var d="activity";var p=Object(zi["getMessageChannelId"])(t);var m=Object(zi["getMessageTs"])(t);var h=Object(zi["getMessageThreadTs"])(t);var v=function e(){return Object(zi["isReply"])(t)?c({channelId:p,highlightTs:m,threadTs:h,origin:d}):l({channelId:p,ts:m,threadTs:h})};return n.a.createElement(ys["a"],null,n.a.createElement(Os["a"],{msg:t,showComment:true,showReact:true,showJump:true,showMoreActions:true,showShare:false,messageContainerType:ei["MESSAGE_CONTAINERS"].THREADS_VIEW,jumpOrigin:d},n.a.createElement(Bv,{className:_()("c-message_kit__message p-activity_page__item",o),onClick:s?O["noop"]:v},n.a.createElement("div",{className:"p-activity_page__item__header"},a(i,u)),n.a.createElement(Zt["a"],{msg:t},n.a.createElement($t["a"],{light:r()},n.a.createElement(Ss["a"],{msg:t},n.a.createElement(ta["a"],{msg:t}),"\xa0\xa0",n.a.createElement(sa["a"],{msg:t,full:true}),n.a.createElement("br",null),n.a.createElement(aa["a"],{msg:t}),n.a.createElement(ra["a"],{msg:t,blocksContainerContext:N["a"].activity}),n.a.createElement(na["a"],{msg:t}),n.a.createElement(ia["b"],{msg:t}),n.a.createElement(ms["a"],{msg:t}),n.a.createElement(vs["a"],{msg:t})))))))}Gv.displayName="ActivityItem";Gv.defaultProps=qv;var Hv=function e(t,a){var r=a.msg;return{channel:Object(He["e"])(t,r.channel,true),isEditing:!!Object(Fv["getMessageEditData"])(t,{channelId:r.channelId,ts:r.ts}),featureDangerouslyGuardIATranslations:Object(Hn["e"])(t)}};var Wv={jumpToMessage:function e(){return Kd["a"].apply(void 0,arguments)},showThread:function e(){return vp["m"].apply(void 0,arguments)}};var Vv=Object(y["connect"])(Hv,Wv)(Gv);var Kv=a(492);var zv=a(1940);var Qv=function e(t){var a=t.id,r=t.name;if(!a)return null;return n.a.createElement(Kv["a"],{userId:a},n.a.createElement("button",{className:"c-button-unstyled p-activity_page__item__link",type:"button","aria-label":r},n.a.createElement(zv["a"],{id:a,showPresence:false,showAvatar:false,showStatus:false,useShortMode:true})))};Qv.displayName="ActivityItemMember";var Yv=Qv;var Jv=new k["b"]("activity");var Xv={className:void 0,name:null};function Zv(e){var t=e.className,a=e.message,r=e.userId,i=e.teamId,s=e.highlightWords,o=e.name;if(!a)return null;var l=!Object(zi["containsMention"])(a,r,s,i,{ignoreHighlightWords:true});var c=!a.user;var u=function e(t,r){if(!r)return null;if(Object(Gt["isChannel"])(t)){var i=n.a.createElement(Ur["a"],{className:"p-activity_page__item__link bold",channel:t});if(Object(zi["containsAtChannel"])(a.text)&&!c)return Jv.rt("{member} mentioned every member of {channel}",{member:n.a.createElement(Yv,{id:a.user,name:o}),channel:i});if(Object(zi["isReply"])(a)){if(l){if(c)return Jv.rt("Your keyword was mentioned in a thread in {channel}",{channel:i});return Jv.rt("{member} mentioned your keyword in a thread in {channel}",{member:n.a.createElement(Yv,{id:a.user,name:o}),channel:i})}if(c)return Jv.rt("You were mentioned in a thread in {channel}",{channel:i});return Jv.rt("{member} mentioned you in a thread in {channel}",{member:n.a.createElement(Yv,{id:a.user,name:o}),channel:i})}if(l){if(c)return Jv.rt("Your keyword was mentioned in {channel}",{channel:i});return Jv.rt("{member} mentioned your keyword in {channel}",{member:n.a.createElement(Yv,{id:a.user,name:o}),channel:i})}if(c)return Jv.rt("You were mentioned in {channel}",{channel:i});return Jv.rt("{member} mentioned you in {channel}",{member:n.a.createElement(Yv,{id:a.user,name:o}),channel:i})}if(Object(Gt["isImOrMpim"])(t)){if(l){if(c)return Jv.rt("Your keyword was mentioned in a <a>direct message</a>",null,function(e){var t=e.text;return t});return Jv.rt("{member} mentioned your keyword in a <a>direct message</a>",{member:n.a.createElement(Yv,{id:a.user,name:o})},function(e){var t=e.text;return t})}if(c)return Jv.rt("You were mentioned in a <a>direct message</a>",null,function(e){var t=e.text;return t});return Jv.rt("{member} mentioned you in a <a>direct message</a>",{member:n.a.createElement(Yv,{id:a.user,name:o})},function(e){var t=e.text;return t})}if(a.thread_ts){if(l){if(c)return Jv.rt("Your keyword was mentioned in a thread");return Jv.rt("{member} mentioned your keyword in a thread",{member:n.a.createElement(Yv,{id:a.user,name:o})})}if(c)return Jv.rt("You were mentioned in a thread");return Jv.rt("{member} mentioned you in a thread",{member:n.a.createElement(Yv,{id:a.user,name:o})})}if(l){if(c)return Jv.rt("Your keyword was mentioned");return Jv.rt("{member} mentioned your keyword",{member:n.a.createElement(Yv,{id:a.user,name:o})})}if(c)return Jv.rt("You were mentioned");return Jv.rt("{member} mentioned you",{member:n.a.createElement(Yv,{id:a.user,name:o})})};return n.a.createElement(Vv,{className:t,msg:a,renderHeader:u,renderAvatar:function e(){return n.a.createElement(ea["a"],{msg:a,size:Au["a"].medium})}})}Zv.displayName="ActivityMention";Zv.defaultProps=Xv;function $v(e,t){var a=t.channelId,r=t.messageTs;var n=Object(Rn["a"])(e,a,r);return{message:n,name:Object(Za["getPrefCompliantMemberNameById"])(e,n.user),userId:Object(i["getCurrentUserId"])(e),teamId:Object(ri["b"])(e),highlightWords:Object(Rv["a"])(e)}}var ef=Object(y["connect"])($v)(Zv);ef.propTypes={channelId:Dn["default"].string.isRequired,messageTs:Dn["default"].string.isRequired};var tf=ef;var af=a(359);var rf=a(384);var nf=a(99);var sf=new k["b"]("activity");function of(e,t){var a=Object(O["uniq"])(Object(O["flatMap"])(e,"users"));return Object(O["without"])(a,t)}var lf={className:void 0,message:void 0,reactions:void 0,memberIds:[],users:[]};function cf(e){var t=e.className,a=e.message,r=e.reactions,i=e.memberIds,s=e.users;if(Object(O["isEmpty"])(r))return false;var o=function e(t,r){if(!r)return null;if(Object(Gt["isChannel"])(t)){var o=n.a.createElement(Ur["a"],{className:"p-activity_page__item__link bold",channel:t});if(1===i.length){if(Object(zi["isReply"])(a))return sf.rt("{member} reacted to your message in a thread in {channel}",{member:n.a.createElement(Yv,{id:i[0],name:s[0]}),channel:o});return sf.rt("{member} reacted to your message in {channel}",{member:n.a.createElement(Yv,{id:i[0],name:s[0]}),channel:o})}if(2===i.length){if(Object(zi["isReply"])(a))return sf.rt("{memberA} and {memberB} reacted to your message in a thread in {channel}",{memberA:n.a.createElement(Yv,{id:i[0],name:s[0]}),memberB:n.a.createElement(Yv,{id:i[1],name:s[1]}),channel:o});return sf.rt("{memberA} and {memberB} reacted to your message in {channel}",{memberA:n.a.createElement(Yv,{id:i[0],name:s[0]}),memberB:n.a.createElement(Yv,{id:i[1],name:s[1]}),channel:o})}if(Object(zi["isReply"])(a))return sf.rt("Several people reacted to your message in a thread in {channel}",{channel:o});return sf.rt("Several people reacted to your message in {channel}",{channel:o})}if(1===i.length){if(Object(zi["isReply"])(a))return sf.rt("{member} reacted to your message in a thread",{member:n.a.createElement(Yv,{id:i[0],name:s[0]})});return sf.rt("{member} reacted to your message",{member:n.a.createElement(Yv,{id:i[0],name:s[0]})})}if(2===i.length){if(Object(zi["isReply"])(a))return sf.rt("{memberA} and {memberB} reacted to your message in a thread",{memberA:n.a.createElement(Yv,{id:i[0],name:s[0]}),memberB:n.a.createElement(Yv,{id:i[1],name:s[1]})});return sf.rt("{memberA} and {memberB} reacted to your message",{memberA:n.a.createElement(Yv,{id:i[0],name:s[0]}),memberB:n.a.createElement(Yv,{id:i[1],name:s[1]})})}if(Object(zi["isReply"])(a))return sf.rt("Several people reacted to your message in a thread");return sf.rt("Several people reacted to your message")};var l=function e(){var t=Object(O["last"])(r);return n.a.createElement(nf["b"],{text:t.name,emojiSize:nf["a"].LARGE,isJumbomoji:true})};return n.a.createElement(Vv,{className:t,msg:a,renderHeader:o,renderAvatar:l})}cf.displayName="ActivityReaction";cf.defaultProps=lf;var uf=function e(t,a){var r=a.channelId,n=a.messageTs;var s=Object(Rn["a"])(t,r,n);var o=Object(rf["b"])(s);var l=Object(af["getReactionsForKey"])(t,o);var c=Object(i["getCurrentUserId"])(t);var u=of(l,c);var d=u.slice(0,2);var p=Object(O["flatMap"])(d,function(e){return Object(Za["getPrefCompliantMemberNameById"])(t,e)});return{message:s,reactions:l,memberIds:u,users:p}};var df=Object(y["connect"])(uf)(cf);df.propTypes={channelId:Dn["default"].string.isRequired,messageTs:Dn["default"].string.isRequired};var pf=df;var mf=new k["b"]("mentions");var hf={fetchActivity:O["noop"],isLoading:false,isDocked:false,items:[],onItemTabWithin:O["noop"],makeMessageSummary:O["noop"],makeReactionsSummary:O["noop"],shouldFocusAfterRender:false,setActivityFocus:O["noop"],jumpToMessage:O["noop"]};var vf=function(e){b()(t,e);function t(e){var a;c()(this,t);a=m()(this,v()(t).call(this,e));Object(Mn["a"])(he()(a),["getPropsForItem","isFocusableItem","renderListItem","focus","onFocusEnter","onFocusLeave","onKeyDown"]);var r=new vd["a"]({DEFAULT_HEIGHT:150});a.layout=new xi["a"]({heightCache:r});a.itemInfo={};a.getItemKeys=Object(Mv["createSelector"])(function(e){var t=e.items;return t},function(e){var t=e.isLoading;return t},function(e,t){var r=["top-anchor-hack"];var n=e.map(function(e){var t=e.type+"-"+e.ts+"-"+e.messageTs;a.itemInfo[t]={channelId:e.channelId,ts:e.messageTs,threadTs:e.threadTs};return t});r.push.apply(r,Da()(n));t&&r.push("loader");return r});a.state={hasKeyboardFocus:false};a.list=n.a.createRef();return a}d()(t,[{key:"componentDidMount",value:function e(){this.props.shouldFocusAfterRender&&this.setFocusOnFirstItem()}},{key:"componentDidUpdate",value:function e(t){var a=t.shouldFocusAfterRender;!a&&this.props.shouldFocusAfterRender&&this.setFocusOnFirstItem()}},{key:"onKeyDown",value:function e(t){var a=t.id,r=t.key;if(r&&"enter"===r.toLowerCase()&&this.itemInfo[a]){var n=this.itemInfo[a],i=n.channelId,s=n.ts,o=n.threadTs;this.props.jumpToMessage({channelId:i,ts:s,threadTs:o})}}},{key:"onFocusEnter",value:function e(t){this.setState(function(){return{hasKeyboardFocus:t.isKeyboardFocus}})}},{key:"onFocusLeave",value:function e(){this.setState(function(){return{hasKeyboardFocus:false}})}},{key:"getPropsForItem",value:function e(t){var a=t.index;var r=this.props,n=r.isLoading,i=r.items;var s=this.state.hasKeyboardFocus;var o=this.getItemKeys({isLoading:n,items:i});var l=o[a];if("top-anchor-hack"===l||"loader"===l)return;var c=i[a-1];if(!c)return;if("reaction"===c.type)return{"aria-label":this.props.makeReactionsSummary({channelId:c.channelId,messageTs:c.messageTs,hasFocus:s,viewContext:ei["MESSAGE_CONTAINERS"].ACTIVITY_FLEXPANE})};return{"aria-label":this.props.makeMessageSummary({channelId:c.channelId,ts:c.messageTs,hasFocus:s,viewContext:ei["MESSAGE_CONTAINERS"].ACTIVITY_FLEXPANE})}}},{key:"setFocusOnFirstItem",value:function e(){var t=this.props,a=t.isLoading,r=t.items,n=t.isDocked,i=t.setActivityFocus;if(!r.length)return;var s=this.getItemKeys({isLoading:a,items:r});var o=s[1];var l=this.list.current;l&&l.focusOnKey(o);i({shouldFocus:false,isDocked:n})}},{key:"focus",value:function e(){var t=this.list.current;t&&t.focus()}},{key:"isFocusableItem",value:function e(t){var a=t.index;var r=this.props,n=r.isLoading,i=r.items;var s=this.getItemKeys({isLoading:n,items:i});var o=s[a];return o&&"top-anchor-hack"!==o&&"loader"!==o}},{key:"renderListItem",value:function e(t){var a=this.props,r=a.isLoading,i=a.isDocked,s=a.items;var o=this.getItemKeys({isLoading:r,items:s});if("top-anchor-hack"===o[t]){var l=_()({"p-activity_page__top_anchor_hack_item":!i,"p-activity_page__top_anchor_hack_item--docked":i});return n.a.createElement("div",{className:l})}if("loader"===o[t])return n.a.createElement(Dv["a"],null);var c=s[t-1];if(!c)return null;var u={key:c.ts,className:_()({"p-activity_page__item--docked":i,"p-activity_page__item--first":c===s[0]}),channelId:c.channelId,messageTs:c.messageTs};if("reaction"===c.type)return n.a.createElement(pf,u);return n.a.createElement(tf,u)}},{key:"render",value:function e(){var t=this;var a=this.props,r=a.fetchActivity,i=a.isLoading,s=a.isDocked,o=a.items,l=a.onItemTabWithin;var c=_()("p-activity_page__list",{"p-activity_page__list--docked":s});return n.a.createElement(_i["a"],null,function(e){var a=e.width,s=e.height;return n.a.createElement(Uc["a"],{className:c,ref:t.list,animateOnScroll:false,height:s,isFocusableItem:t.isFocusableItem,"aria-label":mf.t("Mentions & reactions",{fallbackHash:"81c0d915fa6d82fd30661c5e66e204cea52bb2b5"}),getPropsForItem:t.getPropsForItem,keys:t.getItemKeys({isLoading:i,items:o}),layout:t.layout,loadPost:r,rowRenderer:t.renderListItem,width:a,onFocusEnter:t.onFocusEnter,onFocusLeave:t.onFocusLeave,onItemTabWithin:l,onItemKeyDown:t.onKeyDown})})}}]);return t}(r["PureComponent"]);vf.displayName="ActivityList";var ff=function e(t,a){var r=a.isDocked;return{shouldFocusAfterRender:Object(xv["b"])(t,r)}};var bf=function e(t){return{setActivityFocus:function e(){return t(xv["c"].apply(void 0,arguments))},jumpToMessage:function e(){return t(Kd["a"].apply(void 0,arguments))}}};var gf=Object(y["connect"])(ff,bf,null,{withRef:true})(vf);vf.defaultProps=hf;var _f=new k["b"]("mentions");var yf={featureDangerouslyGuardIATranslations:false,isOffline:false,onRetry:O["noop"],onOptionsClick:O["noop"]};function Of(e){var t=e.featureDangerouslyGuardIATranslations,a=e.isOffline,r=e.onRetry,i=e.onOptionsClick;if(!t)return null;if(a)return n.a.createElement(Mp["a"],{className:"p-activity_page__empty",title:_f.t("Couldn\u2019t load your recent mentions and reactions"),description:_f.t("Try again when you\u2019re online"),primaryActionText:_f.t("Retry"),onClickPrimaryAction:r});return n.a.createElement(Mp["a"],{imageUrl:cdn_url+"/80588/img/accent-bird.png",imageUrl2x:cdn_url+"/80588/img/accent-bird@2x.png",isExtended:true,title:_f.t("Never miss a beat"),description:_f.t("When a team member mentions you or adds a reaction to your message, that message will appear here."),secondaryActionText:_f.t("View Filters"),onClickSecondaryAction:i})}Of.displayName="ActivityEmptyState";Of.defaultProps=yf;function kf(e){return{featureDangerouslyGuardIATranslations:Object(Hn["e"])(e),isOffline:!Object(Gn["c"])(e)}}var Ef=Object(y["connect"])(kf)(Of);var Cf=Ef;var Sf=a(1057);var wf=a(192);var jf=a(97);var If=a(50);var Tf=a(108);var Af=new k["b"]("mentions");var Nf={prefExcludeAtChannel:"mentions_exclude_at_channels",prefExcludeReactions:"mentions_exclude_reactions",prefExcludeUserGroups:"mentions_exclude_at_user_groups"};var Pf={closeModal:O["noop"],onGo:O["noop"],prefExcludeAtChannel:false,prefExcludeReactions:false,prefExcludeUserGroups:false,removeActivityByType:O["noop"],setUserPrefByApi:O["noop"],userGroups:void 0};var Mf=function(e){b()(t,e);function t(e){var a;c()(this,t);a=m()(this,v()(t).call(this,e));Object(Mn["a"])(he()(a),["togglePref"]);a.state={initialPrefs:{prefExcludeAtChannel:e.prefExcludeAtChannel,prefExcludeReactions:e.prefExcludeReactions,prefExcludeUserGroups:e.prefExcludeUserGroups}};return a}d()(t,[{key:"onClose",value:function e(){var t=this.props,a=t.onGo,r=t.prefExcludeAtChannel,n=t.prefExcludeReactions,i=t.prefExcludeUserGroups;var s=this.state.initialPrefs;if(s.prefExcludeAtChannel===r&&s.prefExcludeReactions===n&&s.prefExcludeUserGroups===i)return;r&&!s.prefExcludeAtChannel&&this.props.removeActivityByType("channel");n&&!s.prefExcludeReactions&&this.props.removeActivityByType("reaction");i&&!s.prefExcludeUserGroups&&this.props.removeActivityByType("user_group");a()}},{key:"togglePref",value:function e(t){var a=t.target.name;var r=Nf[a];this.props.setUserPrefByApi({pref:r,value:!t.target.checked})}},{key:"renderUserGroupList",value:function e(){var t=this.props.userGroups;var a=t.filter(function(e){return Object(jf["v"])(e)&&Object(jf["m"])(e)});if(Object(O["isEmpty"])(a))return Af.t("User Groups are collections of individual members");var r=3;var i=a.slice(0,r).map(function(e){return n.a.createElement("strong",null,Object(jf["f"])(e))});if(a.length<=r)return Af.rt("You\u2019re a member of {groups}",{groups:Object(k["i"])(i,{react:true})});return Af.rt("You\u2019re a member of {group1}, {group2}, {group3}, and {numOthers, plural, =1 {# other} other {# others}}",{group1:i[0],group2:i[1],group3:i[2],numOthers:a.length-r})}},{key:"render",value:function e(){var t=this;var a=this.props,r=a.prefExcludeAtChannel,i=a.prefExcludeReactions,s=a.prefExcludeUserGroups,o=a.featureDangerouslyGuardIATranslations;var l=o?Af.t("Filter"):Af.t("Activity view options");var c=o?Af.t("Mentions of your name, along with any of your notification keywords, will always be shown on this screen. You can also choose to show..."):Af.rt("Your activity view will always include <r1>mentions</r1> and <r1>keywords</r1>. You can also choose to show or hide the following:",null,function(e){var t=e.text;return n.a.createElement("strong",null,t)});return n.a.createElement(mp["a"],{closeModal:function e(){t.onClose();t.props.closeModal()}},n.a.createElement(mp["h"],null,n.a.createElement(mp["j"],{id:"activity_options__title-bar",title:l})),n.a.createElement(mp["d"],null,n.a.createElement(mp["e"],null,n.a.createElement("p",null,c),n.a.createElement(If["a"],{type:"inline",cursor:"pointer",text:Af.t("@channel mentions")},n.a.createElement(Tf["a"],{onChange:this.togglePref,checked:!r,name:"prefExcludeAtChannel"})),n.a.createElement(If["a"],{type:"inline",cursor:"pointer",text:Af.t("Reactions")},n.a.createElement(Tf["a"],{onChange:this.togglePref,checked:!i,name:"prefExcludeReactions"})),n.a.createElement(If["a"],{type:"inline",cursor:"pointer",text:Af.t("User Groups"),className:"margin_bottom_175",subtext:this.renderUserGroupList()},n.a.createElement(Tf["a"],{onChange:this.togglePref,checked:!s,name:"prefExcludeUserGroups"})))))}}]);return t}(n.a.Component);Mf.displayName="ActivityOptionsDialog";Mf.defaultProps=Pf;var Df=function e(t){return{prefExcludeAtChannel:Object(ai["k"])(t,"mentions_exclude_at_channels"),prefExcludeReactions:Object(ai["k"])(t,"mentions_exclude_reactions"),prefExcludeUserGroups:Object(ai["k"])(t,"mentions_exclude_at_user_groups"),userGroups:Object(wf["c"])(t),featureDangerouslyGuardIATranslations:Object(Hn["e"])(t)}};var xf={closeModal:function e(){return z["closeModal"].apply(void 0,arguments)},removeActivityByType:function e(){return Pv["removeActivityByType"].apply(void 0,arguments)},setUserPrefByApi:function e(){return Io["d"].apply(void 0,arguments)}};var Rf=Object(y["connect"])(Df,xf)(Mf);var Ff=new k["b"]("mentions");var Lf=Object(At["b"])("Opens the Activity Options Dialog in client",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.limit;e(Object(z["openModal"])({element:n.a.createElement(Rf,{onGo:function t(){e(Object(Pv["fetchActivityMentions"])({limit:r}));e(Object(Wu["enqueueToast"])({element:n.a.createElement(Vu["b"],te()({},Sf["a"],{position:"top-right",invert:true}),Ff.t("Activity view updated"))}))}})}))});Lf.meta={name:"openActivityOptionsDialog",key:"actionsUiOpenActivityOptionsDialogOpenActivityOptionsDialog",description:"Opens the Activity Options Dialog in client"};Lf.propTypes={limit:Dn["default"].number};var Uf=Lf;var Bf=a(2869);var qf=20;var Gf={activityList:[],hasMore:false,isLoading:false,isIAP1Enabled:false,userAttentionIsOnChat:false,composerVisible:false,fetchActivityMentions:O["noop"],openActivityOptionsDialog:O["noop"]};var Hf=function(e){b()(t,e);function t(e){var a;c()(this,t);a=m()(this,v()(t).call(this,e));a.fetchMentions=a.fetchMentions.bind(he()(a));a.fetchMoreMentions=a.fetchMoreMentions.bind(he()(a));a.focus=a.focus.bind(he()(a));a.listRef=n.a.createRef();return a}d()(t,[{key:"componentDidMount",value:function e(){var t=this.props,a=t.clogger,r=t.isIAP1Enabled;a.track("ACTIVITY_PAGE_OPEN",{is_iap1:r});this.fetchMentions()}},{key:"componentDidUpdate",value:function e(t){var a={prevUserAttentionIsOnChat:t.userAttentionIsOnChat,prevComposerVisible:t.composerVisible,currentUserAttentionIsOnChat:this.props.userAttentionIsOnChat,currentComposerVisible:this.props.composerVisible};Object(Vi["a"])(a)&&this.props.addToSectionNavigation();Object(Ki["a"])(a)&&this.props.removeFromSectionNavigation()}},{key:"fetchMentions",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.afterTs;this.props.fetchActivityMentions({afterTs:a,limit:qf})}},{key:"fetchMoreMentions",value:function e(){var t=this.props,a=t.activityList,r=t.hasMore,n=t.isLoading;if(n||!r)return;var i=a[a.length-1].ts;this.fetchMentions({afterTs:i})}},{key:"focus",value:function e(){var t;var a=(null===(t=this.listRef.current)||void 0===t?void 0:t.getWrappedInstance)?this.listRef.current.getWrappedInstance():this.listRef.current;(null===a||void 0===a?void 0:a.focus)&&a.focus()}},{key:"render",value:function e(){var t=this.props,a=t.activityList,r=t.isLoading,i=t.openActivityOptionsDialog;if(!r&&Object(O["isEmpty"])(a))return n.a.createElement(Cf,{onRetry:this.fetchMentions,onOptionsClick:function e(){return i({limit:qf})}});return n.a.createElement("div",{className:"p-activity_page"},r&&n.a.createElement("div",{className:"p-flexpane__floating_loader","data-qa":"floating_loader"},n.a.createElement(Qt["a"],{size:"medium",noMargin:true})),n.a.createElement(gf,{fetchActivity:this.fetchMoreMentions,isLoading:r,items:a,ref:this.listRef}))}}]);return t}(r["Component"]);Hf.displayName="ActivityPage";Hf.defaultProps=Gf;var Wf=function e(t){return{activityList:Object(Pv["getActivityListItems"])(t),hasMore:Object(Pv["hasMoreActivity"])(t),isLoading:Object(Pv["isActivityLoading"])(t),isIAP1Enabled:Object(Hn["e"])(t),clogger:Object(C["a"])({state:t}),userAttentionIsOnChat:Object(ii["e"])(t),composerVisible:Object(Wi["isComposerVisible"])(t)}};var Vf={openActivityOptionsDialog:function e(){return Uf.apply(void 0,arguments)},fetchActivityMentions:function e(){return Pv["fetchActivityMentions"].apply(void 0,arguments)}};var Kf=Object(y["connect"])(Wf,Vf)(Object(Gi["a"])(Hf,"ActivityPage",{index:0}));var zf=new k["b"]("mentions");var Qf={featureDangerouslyGuardIATranslations:false,openActivityOptionsDialog:O["noop"]};function Yf(e){var t=e.featureDangerouslyGuardIATranslations,a=e.openActivityOptionsDialog;if(!t)return null;var r=zf.t("Filter",{fallbackhash:"a09052c3b42360a3492e17c37d74b78324785541"});return n.a.createElement(Br["c"],{tip:r,position:"bottom-right",delay:Br["a"]},n.a.createElement(as["a"],{"aria-label":r,className:"margin_left_25",icon:"filters",onClick:a}))}Yf.displayName="ActivityFilterButton";Yf.defaultProps=Qf;var Jf=function e(t){return{featureDangerouslyGuardIATranslations:Object(Hn["e"])(t)}};var Xf={openActivityOptionsDialog:function e(){return Uf.apply(void 0,arguments)}};var Zf=Object(y["connect"])(Jf,Xf)(Yf);var $f=new k["b"]("activity");var eb=function e(t){var a=t.featureDangerouslyGuardIATranslations,r=t.setActivityFocus,i=t.toggleActivity;if(!a)return null;var s=$f.t("Dock to right side");return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"p-ia__view_header__title"},$f.t("Mentions & reactions")),n.a.createElement("div",{className:"p-ia__view_header__spacer"}),n.a.createElement(Zf,null),n.a.createElement(Br["c"],{tip:s,position:"bottom-right",delay:Br["a"]},n.a.createElement(as["a"],{icon:"move-to-inspector",className:"margin_left_25",onClick:function e(t){var a="keydown"===(null===t||void 0===t?void 0:t.type)||!(null===t||void 0===t?void 0:t.detail);r({shouldFocus:a,isDocked:true});i()},"aria-label":s})))};var tb=function e(t){return{featureDangerouslyGuardIATranslations:Object(Hn["e"])(t)}};var ab=function e(t){return{setActivityFocus:function e(){return t(xv["c"].apply(void 0,arguments))},toggleActivity:function e(){return t(vp["r"].apply(void 0,arguments))}}};var rb=Object(y["connect"])(tb,ab)(eb);var nb=a(895);var ib=a(2722);var sb=a(1329);var ob=a(1033);var lb=a(2944);var cb={className:void 0,"data-qa":void 0};function ub(e){var t=e.msg,a=e["data-qa"],r=e.isEditing,i=e.className,s=e.jumpToMessage,o=e.showThread;var l="saved_items";var c=Object(zi["getMessageChannelId"])(t);var u=Object(zi["getMessageTs"])(t);var d=Object(zi["getMessageThreadTs"])(t);var p=function e(){return Object(zi["isReply"])(t)?o({channelId:c,highlightTs:u,threadTs:d,origin:l}):s({channelId:c,ts:u,threadTs:d})};return n.a.createElement(ys["a"],{"data-qa":a},n.a.createElement(Os["a"],{msg:t,showComment:true,showReact:true,showJump:true,showMoreActions:true,showShare:false,messageContainerType:ei["MESSAGE_CONTAINERS"].THREADS_VIEW,jumpOrigin:l},n.a.createElement(Bv,{className:_()("p-saved_page__item",i),onClick:r?O["noop"]:p},n.a.createElement("div",{className:"p-saved_page__item__header"},n.a.createElement(lb["a"],{className:"p-saved_page__item__link bold",msg:t,flexOrigin:l})),n.a.createElement(Zt["a"],{msg:t},n.a.createElement($t["a"],{light:n.a.createElement(ea["a"],{msg:t,size:Au["a"].medium})},n.a.createElement(Ss["a"],{msg:t},n.a.createElement(ta["a"],{msg:t}),"\xa0\xa0",n.a.createElement(sa["a"],{msg:t,full:true}),n.a.createElement("br",null),n.a.createElement(aa["a"],{msg:t}),n.a.createElement(ra["a"],{msg:t,blocksContainerContext:N["a"].starred_message}),n.a.createElement(na["a"],{msg:t}),n.a.createElement(ia["b"],{msg:t}),n.a.createElement(ms["a"],{msg:t}),n.a.createElement(vs["a"],{msg:t})))))))}ub.displayName="SavedItemMessage";ub.defaultProps=cb;var db=function e(t,a){var r=a.msg;return{isEditing:!!Object(Fv["getMessageEditData"])(t,{channelId:r.channelId,ts:r.ts})}};var pb={jumpToMessage:function e(){return Kd["a"].apply(void 0,arguments)},showThread:function e(){return vp["m"].apply(void 0,arguments)}};var mb=Object(y["connect"])(db,pb)(ub);var hb=a(1450);var vb={className:void 0};var fb=function(e){b()(t,e);function t(e){var a;c()(this,t);a=m()(this,v()(t).call(this,e));a.onFileClick=a.onFileClick.bind(he()(a));return a}d()(t,[{key:"onFileClick",value:function e(){var t=this.props.file;if(!t)return;var a="starred_items";this.props.previewFile({fileId:t.id,flexOrigin:a})}},{key:"render",value:function e(){var t=this.props,a=t.id,r=t.file,i=t.className;if(!r)return null;return n.a.createElement("div",{className:_()("p-saved_page__item p-saved_page__item--file",i),onClick:this.onFileClick,role:"link",tabIndex:"0"},n.a.createElement(hb["a"],{file:r,key:a,includeRootDownloadAction:false,includeRootStarAction:true,fullWidth:true}))}}]);return t}(r["PureComponent"]);fb.displayName="SavedItemFile";fb.defaultProps=vb;var bb=function e(t,a){var r=a.id;return{file:Object(ap["getFileById"])(t,r)}};var gb={previewFile:function e(){return vp["c"].apply(void 0,arguments)}};var _b=Object(y["connect"])(bb,gb)(fb);var yb={className:void 0};function Ob(e){var t=e.comment,a=e.file,r=e.fileId,i=e.className,s=e.previewFile;if(!t)return null;var o={user:t.user,ts:t.timestamp.toString(),subtype:"file_comment",comment:t,files:[r]};var l="saved_items";return n.a.createElement(ys["a"],null,n.a.createElement(Os["a"],{msg:o,showComment:true,showReact:true,showJump:true,showMoreActions:true,showShare:false,messageContainerType:ei["MESSAGE_CONTAINERS"].THREADS_VIEW,jumpOrigin:l},n.a.createElement("div",{className:_()("p-saved_page__item p-saved_page__item--file_comment",i),role:"link",tabIndex:"0",onClick:function e(){return s({fileId:r,flexOrigin:l})}},n.a.createElement("div",{className:"p-saved_page__item__header"},n.a.createElement("span",{className:"p-saved_page__item__link bold"},n.a.createElement(X["b"],{type:"file",className:"",size:"inherit"})," ",a.title)),n.a.createElement(Zt["a"],{msg:o},n.a.createElement($t["a"],{light:n.a.createElement(ea["a"],{msg:o,size:Au["a"].medium})},n.a.createElement(Ss["a"],{msg:o},n.a.createElement(ta["a"],{msg:o}),"\xa0\xa0",n.a.createElement(sa["a"],{msg:o,full:true}),n.a.createElement("br",null),n.a.createElement(aa["a"],{msg:o}),n.a.createElement(ra["a"],{msg:o,blocksContainerContext:N["a"].starred_message}),n.a.createElement(na["a"],{msg:o}),n.a.createElement(ia["b"],{msg:o}),n.a.createElement(ms["a"],{msg:o}),n.a.createElement(vs["a"],{msg:o})))))))}Ob.displayName="SavedItemFileComment";Ob.defaultProps=yb;var kb=function e(t,a){var r=a.fileId,n=a.commentId;return{file:Object(ap["getFileById"])(t,r),comment:Object(ap["getFileCommentById"])(t,r,n)}};var Eb={previewFile:function e(){return vp["c"].apply(void 0,arguments)}};var Cb=Object(y["connect"])(kb,Eb)(Ob);var Sb=Object(Fi["b"])(mb);var wb=new k["b"]("saved_items");var jb={fetchMoreItems:O["noop"],isLoading:false,items:void 0,onItemTabWithin:O["noop"],focusKey:null,setFocusKey:O["noop"],previewFile:O["noop"],jumpToMessage:O["noop"]};var Ib={MESSAGE:"message",FILE:"file",FILE_COMMENT:"file_comment"};var Tb=function(e){b()(t,e);function t(e){var a;c()(this,t);a=m()(this,v()(t).call(this,e));Object(Mn["a"])(he()(a),["renderItem","isFocusableItem","getPropsForItem","onFocusEnter","onFocusLeave","onKeyDown"]);a.itemInfo={};a.getItemKeys=Object(Mv["createSelector"])(function(e){var t=e.items;return t},function(e){var t=e.isLoading;return t},function(e,t){var r=["top-anchor-hack"];var n=e.map(function(e){var t=a.getSavedItemId(e);a.itemInfo[t]={type:e.type,fileId:e.fileId||e.id,channelId:e.channel,ts:e.ts,threadTs:e.threadTs};return t});r.push.apply(r,Da()(n));t&&r.push("loader");return r});a.list=n.a.createRef();a.state={hasKeyboardFocus:false};return a}d()(t,[{key:"componentDidMount",value:function e(){var t=this.props,a=t.focusKey,r=t.items;"stars"===a&&r.length&&this.setFocusOnFirstItem()}},{key:"onKeyDown",value:function e(t){var a=t.id,r=t.key;if(r&&"enter"===r.toLowerCase()&&this.itemInfo[a]){var n=this.itemInfo[a],i=n.type,s=n.fileId,o=n.channelId,l=n.ts,c=n.threadTs;i===Ib.MESSAGE?this.props.jumpToMessage({channelId:o,ts:l,threadTs:c}):i!==Ib.FILE&&i!==Ib.FILE_COMMENT||this.props.previewFile({fileId:s})}}},{key:"onFocusEnter",value:function e(t){this.setState(function(){return{hasKeyboardFocus:t.isKeyboardFocus}})}},{key:"onFocusLeave",value:function e(){this.setState(function(){return{hasKeyboardFocus:false}})}},{key:"getPropsForItem",value:function e(t){var a=t.index;var r=this.props.items;var n=this.state.hasKeyboardFocus;var i=r[a-1];if(!i||!i.type)return;if(i.type===Ib.MESSAGE)return{"aria-label":this.props.makeMessageSummary({channelId:i.channel,ts:i.ts,hasFocus:n,viewContext:ei["MESSAGE_CONTAINERS"].STARS_FLEXPANE})};return{"aria-label":this.props.makeFileSummary({fileId:i.id,hasFocus:n})}}},{key:"getSavedItemId",value:function e(t){switch(t.type){case Ib.MESSAGE:return t.channel+t.ts;case Ib.FILE:return t.id;case Ib.FILE_COMMENT:return t.id;default:return null}}},{key:"setFocusOnFirstItem",value:function e(){var t=this.props,a=t.isLoading,r=t.items;var n=this.getItemKeys({isLoading:a,items:r});var i=n[1];var s=this.list.current;s&&s.focusOnKey(i);this.props.setFocusKey(null)}},{key:"focus",value:function e(){var t=this.list.current;t&&t.focus()}},{key:"isFocusableItem",value:function e(t){var a=t.index;var r=this.props,n=r.isLoading,i=r.items;var s=this.getItemKeys({isLoading:n,items:i});var o=s[a];if(!o)return false;if("top-anchor-hack"===o)return false;if("loader"===o)return false;return true}},{key:"renderItem",value:function e(t){var a=this.props,r=a.isLoading,i=a.items;var s=this.getItemKeys({isLoading:r,items:i});if("top-anchor-hack"===s[t])return n.a.createElement("div",{className:"p-saved_item__top_anchor_item_hack"});if("loader"===s[t])return n.a.createElement(Dv["a"],null);var o=i[t-1];var l={key:this.getSavedItemId(o),className:_()("c-message_kit__message","p-saved_item",{"p-saved_page__item--first":o===i[0]}),"data-qa":"saved_item_"+o.type};switch(o.type){case Ib.MESSAGE:return n.a.createElement(Sb,te()({},l,{channelId:o.channel,ts:o.ts}));case Ib.FILE:return n.a.createElement(_b,te()({},l,{id:o.id}));case Ib.FILE_COMMENT:return n.a.createElement(Cb,te()({},l,{fileId:o.fileId,commentId:o.id}));default:return null}}},{key:"render",value:function e(){var t=this;var a=this.props,r=a.isLoading,i=a.items,s=a.onItemTabWithin,o=a.featureDangerouslyGuardIATranslations;return n.a.createElement(_i["a"],null,function(e){var a=e.width,l=e.height;return n.a.createElement(Uc["a"],{className:"p-saved_page__list",ref:t.list,width:a,height:l,"aria-label":o?wb.t("Saved"):null,keys:t.getItemKeys({isLoading:r,items:i}),rowRenderer:t.renderItem,loadPost:t.props.fetchMoreItems,animateOnScroll:false,getPropsForItem:t.getPropsForItem,isFocusableItem:t.isFocusableItem,onFocusEnter:t.onFocusEnter,onFocusLeave:t.onFocusLeave,onItemTabWithin:s,onItemKeyDown:t.onKeyDown})})}}]);return t}(r["PureComponent"]);Tb.displayName="SavedItemsList";Tb.defaultProps=jb;var Ab=function e(t){return{focusKey:Object(sb["a"])(t),featureDangerouslyGuardIATranslations:Object(Hn["e"])(t)}};var Nb=function e(t){return{makeMessageSummary:function e(){return t(ki["a"].apply(void 0,arguments))},makeFileSummary:function e(){return t(ib["a"].apply(void 0,arguments))},setFocusKey:function e(a){return t(Object(ob["a"])(a))},jumpToMessage:function e(){return t(Kd["a"].apply(void 0,arguments))},previewFile:function e(){return t(vp["c"].apply(void 0,arguments))}}};var Pb=Object(y["connect"])(Ab,Nb)(function(e){var t=e.refToForward,a=Po()(e,["refToForward"]);return n.a.createElement(Tb,te()({ref:t},a))});var Mb=n.a.forwardRef(function(e,t){return n.a.createElement(Pb,te()({refToForward:t},e))});var Db=new k["b"]("saved_items");var xb={featureDangerouslyGuardIATranslations:false,isOffline:false,onRetry:O["noop"]};function Rb(e){var t=e.featureDangerouslyGuardIATranslations,a=e.isOffline,r=e.onRetry;if(!t)return null;if(a)return n.a.createElement(Mp["a"],{className:"p-saved_page__empty",title:Db.t("Couldn\u2019t load your Saved Items"),description:Db.t("Try again when you\u2019re online"),primaryActionText:Db.t("Retry"),onClickPrimaryAction:r});return n.a.createElement(Mp["a"],{imageUrl:cdn_url+"/80588/img/posts.png",imageUrl2x:cdn_url+"/80588/img/posts@2x.png",isExtended:true,title:Db.t("No saved items"),description:Db.t("Save a message or file here. Mark your to-dos, or save something for later \u2014 only you can see your saved items, so use them however you like!")})}Rb.displayName="SavedEmptyState";Rb.defaultProps=xb;function Fb(e){return{featureDangerouslyGuardIATranslations:Object(Hn["e"])(e),isOffline:!Object(Gn["c"])(e)}}var Lb=Object(y["connect"])(Fb)(Rb);var Ub=Lb;var Bb=a(5095);var qb=a(4963);var Gb={isLoading:false,starredItems:void 0,cursorMark:void 0,isIAP1Enabled:false};var Hb=function(e){b()(t,e);function t(e){var a;c()(this,t);a=m()(this,v()(t).call(this,e));a.listRef=n.a.createRef();a.fetchMoreStarredItems=a.fetchMoreStarredItems.bind(he()(a));a.focus=a.focus.bind(he()(a));a.blur=a.blur.bind(he()(a));return a}d()(t,[{key:"componentDidMount",value:function e(){var t=this.props,a=t.clogger,r=t.isIAP1Enabled;a.track("STARS_PAGE_OPEN",{is_iap1:r})}},{key:"componentDidUpdate",value:function e(t){var a=this.props,r=a.starredItems,n=a.cursorMark;!Object(O["isEmpty"])(t.starredItems)&&Object(O["isEmpty"])(r)&&n&&this.fetchStarredItems(n)}},{key:"blur",value:function e(){Object(O["noop"])()}},{key:"fetchMoreStarredItems",value:function e(){var t=this.props,a=t.isLoading,r=t.cursorMark;if(a)return;if(!r)return;this.fetchStarredItems(r)}},{key:"fetchStarredItems",value:function e(t){var a=this;if(this.requestStars)return false;this.requestStars=this.props.dispatch(Object(nb["fetchStarsList"])({exclude:"Ch,Gh,Dh",limit:20,cursor:t}));return this.requestStars.finally(function(){a.requestStars=null})}},{key:"focus",value:function e(){var t=this.listRef.current;t&&t.setFocusOnFirstItem()}},{key:"render",value:function e(){var t=this.props,a=t.isLoading,r=t.starredItems;if(!a&&Object(O["isEmpty"])(r))return n.a.createElement(Ub,{onRetry:this.fetchMoreStarredItems});return n.a.createElement("div",{className:"p-saved_page"},n.a.createElement(Mb,{ref:this.listRef,fetchMoreItems:this.fetchMoreStarredItems,isLoading:a,items:r}))}}]);return t}(r["Component"]);Hb.displayName="StarsPage";Hb.defaultProps=Gb;var Wb=function e(t){return{isLoading:Object(nb["getLoadingState"])(t),starredItems:Object(nb["getAllStarredItems"])(t),totalPages:Object(nb["getTotalPages"])(t),cursorMark:Object(nb["getCursorMark"])(t),clogger:Object(C["a"])({state:t}),isIAP1Enabled:Object(Hn["e"])(t)}};var Vb=Object(y["connect"])(Wb)(Object(Gi["a"])(Hb,"StarsPage",{index:0}));var Kb=a(453);var zb=a(1451);var Qb=a(1216);var Yb=a(1464);var Jb=a(2375);var Xb=a(4680);var Zb={className:void 0,width:void 0,onClick:O["noop"]};var $b=function e(t){var a=t.file,i=t.className,s=t.width,o=t.onClick;var l=Object(r["useCallback"])(function(e){return o(e,a)},[a,o]);var c="image"===Object(sp["getFileType"])(a)&&n.a.createElement(Xb["a"],{file:a,maxSize:300});return n.a.createElement(ip["a"],{file:a,className:i,showActions:true,useRowAction:true,style:{width:s}},n.a.createElement(Qb["a"],{file:a,onClick:l,showThumbnail:false},n.a.createElement(Yb["a"],{file:a})),c,n.a.createElement(Jb["a"],{onClick:l,file:a}))};$b.displayName="FilesPageFile";$b.defaultProps=Zb;var eg=$b;var tg=a(356);var ag=a(866);var rg=a(316);var ng={user:"",filetype:""};var ig=function(e){b()(t,e);function t(e){var a;c()(this,t);a=m()(this,v()(t).call(this,e));a.renderMemberOption=a.renderMemberOption.bind(he()(a));a.renderSelectedMemberOption=a.renderSelectedMemberOption.bind(he()(a));a.processMemberOptions=a.processMemberOptions.bind(he()(a));a.onMemberSelected=a.onMemberSelected.bind(he()(a));a.onFiletypeSelected=a.onFiletypeSelected.bind(he()(a));return a}d()(t,[{key:"onFiletypeSelected",value:function e(t){this.props.dispatch(Object(Kb["setFiletype"])(t))}},{key:"onMemberSelected",value:function e(t){this.props.dispatch(Object(Kb["setUser"])(t.value))}},{key:"getFiletypeTemplate",value:function e(){var t=this;var a=this.props.filetype;var r=function e(t){return a===t?n.a.createElement(X["b"],{type:"check-small",className:"p-files_page__controls__check_icon"}):null};var i=function e(t){return t===a?"p-files_page__filetype_menu_item--selected":""};return[{label:"All File Types",value:"",icon:r(""),click:function e(){return t.onFiletypeSelected("")},className:i("")},{label:"Posts",value:"docs",icon:r("docs"),click:function e(){return t.onFiletypeSelected("docs")},className:i("docs")},{label:"Snippets",value:"snippets",icon:r("snippets"),click:function e(){return t.onFiletypeSelected("snippets")},className:i("snippets")},{label:"Emails",value:"emails",icon:r("emails"),click:function e(){return t.onFiletypeSelected("emails")},className:i("emails")},{label:"Images",value:"images",icon:r("images"),click:function e(){return t.onFiletypeSelected("images")},className:i("images")},{label:"Videos",value:"videos",icon:r("videos"),click:function e(){return t.onFiletypeSelected("videos")},className:i("videos")},{label:"PDF Files",value:"pdfs",icon:r("pdfs"),click:function e(){return t.onFiletypeSelected("pdfs")},className:i("pdfs")},{label:"Spreadsheets",value:"spreadsheets",icon:r("spreadsheets"),click:function e(){return t.onFiletypeSelected("spreadsheets")},className:i("spreadsheets")},{label:"Google Docs",value:"gdocs",icon:r("gdocs"),click:function e(){return t.onFiletypeSelected("gdocs")},className:i("gdocs")}]}},{key:"processMemberOptions",value:function e(t,a){if(a&&a.length>0)return Promise.resolve(t);return Promise.resolve([{value:"",label:"Anyone"}].concat(Da()(t)))}},{key:"renderFiletypeSelect",value:function e(){var t=this.props.filetype;var a=this.getFiletypeTemplate();var r=a.find(function(e){return e.value===t}).label;return n.a.createElement(To["e"],{renderMenu:function e(t){return n.a.createElement(To["a"],te()({menu:true},t,{template:a}))},position:"bottom-left",offsetX:-4,offsetY:4},n.a.createElement(Ao["a"],{className:"p-files_page__filetype"},"Type: ",n.a.createElement("strong",null,r),n.a.createElement(X["b"],{type:"chevron-down",inline:true})))}},{key:"renderMemberOption",value:function e(t){if(""===t.value)return n.a.createElement("strong",null,t.label);return n.a.createElement(ag["a"],{id:t.value})}},{key:"renderMemberSelect",value:function e(){var t=this.props.user;return n.a.createElement(tg["e"],{key:t,className:"p-files_page__controls__member",width:"auto",renderOption:this.renderMemberOption,renderSelectedOption:this.renderSelectedMemberOption,selectedOption:{value:t,label:t||"Anyone"},searcherOptions:{entities:{members:{includeSelf:true,onlyLocalTeam:true}},sort:{selfFirst:true},allowEmptyQuery:true},processOptions:this.processMemberOptions,onOptionSelected:this.onMemberSelected})}},{key:"renderSelectedMemberOption",value:function e(t){var a=""===t.value?t.label:n.a.createElement(rg["a"],{id:t.value});return n.a.createElement("span",null,"From: ",n.a.createElement("strong",null,a))}},{key:"render",value:function e(){return n.a.createElement("div",{className:"p-files_page__controls"},this.renderMemberSelect(),this.renderFiletypeSelect())}}]);return t}(r["Component"]);ig.displayName="FilesPageControls";ig.defaultProps=ng;var sg=function e(t){return{user:Object(Kb["getUser"])(t),filetype:Object(Kb["getFiletype"])(t)}};var og=Object(y["connect"])(sg)(ig);var lg=a(3476);var cg=new k["b"]("files");var ug=Object(zb["a"])(eg);var dg=20;var pg={files:[],user:"",filetype:"",clogger:{},isIAPhase1Enabled:false};var mg=function(e){b()(t,e);function t(e){var a;c()(this,t);a=m()(this,v()(t).call(this,e));a.requestPre=null;a.requestPost=null;a.reachedStart=false;a.reachedEnd=false;a.keys=null;a.layout=new xi["a"];a.layout.heightCache.DEFAULT_HEIGHT=69;a.width=0;a.state={columns:3};a.onFileClick=a.onFileClick.bind(he()(a));a.onScroll=a.onScroll.bind(he()(a));a.fetchPre=a.fetchPre.bind(he()(a));a.fetchPost=a.fetchPost.bind(he()(a));a.fetchAround=a.fetchAround.bind(he()(a));a.renderRow=a.renderRow.bind(he()(a));a.debouncedResize=Object(O["debounce"])(a.onResize,20);return a}d()(t,[{key:"componentDidMount",value:function e(){this.props.clogger.track("FILES_PAGE_OPEN",{is_iap1:this.props.isIAPhase1Enabled});this.props.dispatch(Object(Kb["setUser"])(this.props.currentUserId))}},{key:"UNSAFE_componentWillReceiveProps",value:function e(t){var a=this.props,r=a.filetype,n=a.user;if(t.filetype!==r||t.user!==n){this.requestPre&&this.requestPre.cancel();this.requestPost&&this.requestPost.cancel();this.requestPre=null;this.requestPost=null;this.reachedStart=false;this.reachedEnd=false;this.layout&&this.layout.setAnchor(false)}}},{key:"onFileClick",value:function e(t,a){t.preventDefault();var r=a.id;if(!r)return;this.props.dispatch(Object(vp["c"])({fileId:r}))}},{key:"onResize",value:function e(t){var a=this;if(t!==this.width){this.width=t;this.setState(function(){return{columns:a.getColumns()}})}}},{key:"onScroll",value:function e(){this.layout.anchor&&this.layout.setAnchor(false)}},{key:"getColumns",value:function e(){var t=300;return Math.floor(this.width/t)}},{key:"fetchAround",value:function e(){if(this.requestPre&&this.requestPost)return false;if(this.reachedEnd)return this.fetchPre();if(this.reachedStart)return this.fetchPost();return this.fetchPre()}},{key:"fetchPost",value:function e(){var t=this;if(this.requestPost)return false;if(this.reachedEnd)return false;this.requestPost=this.props.dispatch(Object(Kb["fetchFilesPost"])({types:this.props.filetype,user:this.props.user}));return this.requestPost.then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.paging;var r=a.page,n=a.pages;r>=n&&(t.reachedEnd=true)}).finally(function(){t.requestPost=null})}},{key:"fetchPre",value:function e(){var t=this;if(this.requestPre)return false;if(this.reachedStart)return false;this.requestPre=this.props.dispatch(Object(Kb["fetchFilesPre"])({types:this.props.filetype,user:this.props.user}));return this.requestPre.then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.paging;var r=a.page;1===r&&(t.reachedStart=true)}).finally(function(){t.requestPre=null})}},{key:"isEmpty",value:function e(){return!this.props.files.length&&this.reachedStart&&this.reachedEnd}},{key:"renderFile",value:function e(t){return n.a.createElement(ug,{key:t,fileId:t,className:"p-files_page__file",clogLinkClick:this.clogFileClick,useRowAction:true,onClick:this.onFileClick,width:Math.floor((this.width-dg)/this.state.columns-dg)})}},{key:"renderFiles",value:function e(t){var a=this;var r=this.rows[t];return n.a.createElement("div",{className:"p-files_page__row"},r.map(function(e){return a.renderFile(e)}))}},{key:"renderRow",value:function e(t){var a=this.keys[t];if(!a)return null;switch(a[0]){case"L":return n.a.createElement("div",{className:"p-file_list__loading"},cg.t("Loading\u2026"));case"P":return n.a.createElement("div",{className:"p-file_list__empty"},cg.t("No matching files were found."));default:return this.renderFiles(t)}}},{key:"render",value:function e(){var t=this;var a=this.props.files;var r=a.map(function(e){return e.id});this.rows=Object(O["chunk"])(r,this.state.columns);this.keys=this.rows.map(function(e){return e[0]});this.reachedEnd||this.keys.push("Loading"+this.keys.length);this.isEmpty()&&this.keys.push("Placeholder");return n.a.createElement("div",{className:"p-files_page"},n.a.createElement(og,null),n.a.createElement(Cc["a"],null,function(e){var a=e.measureRef,r=e.width,i=e.height;t.debouncedResize(r);return n.a.createElement("div",{className:"p-files_page__container",ref:a},n.a.createElement(Uc["a"],{width:r,height:i,keys:t.keys,layout:t.layout,rowRenderer:t.renderRow,onScroll:t.onScroll,ref:t.list,loadAround:t.fetchAround,loadPre:t.fetchPre,loadPost:t.fetchPost,onItemClick:t.onFileClick,"aria-label":cg.t("Files")}))}))}}]);return t}(r["Component"]);mg.displayName="FilesPage";mg.defaultProps=pg;var hg=function e(t){return{files:Object(Kb["getFlexpaneFiles"])(t),user:Object(Kb["getUser"])(t),filetype:Object(Kb["getFiletype"])(t),currentUserId:Object(i["getCurrentUserId"])(t),clogger:Object(C["a"])({state:t}),isIAPhase1Enabled:Object(Hn["e"])(t)}};var vg=Object(y["connect"])(hg)(mg);var fg=a(42);var bg=a(303);var gg=a(4240);var _g=a(1445);function yg(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function Og(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?yg(Object(a),true).forEach(function(t){qe()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):yg(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var kg=function e(t){return t.files};var Eg=function e(t,a){return a.startTime-t.startTime};var Cg=function e(t,a){return Og({},t,{},a)};var Sg=Object(Mv["createSelector"])([bg["getTeamDownloads"],kg],function(e,t){return(e||[]).map(function(e){return Cg(e,t[e.id])}).sort(Eg)});var wg=a(4242);var jg=new k["b"]("page_client");var Ig=424;var Tg={featureIap1Downloads:false,featureDangerouslyGuardIATranslations:false};var Ag=function(e){b()(t,e);function t(e){var a;c()(this,t);a=m()(this,v()(t).call(this,e));Object(Mn["a"])(he()(a),["onClearClick","onListHeightChange"]);a.state={listContainerHeight:Ig};a.layout=new _g["a"]({onTotalHeightChange:a.onListHeightChange});a.list=n.a.createRef();return a}d()(t,[{key:"onListHeightChange",value:function e(t){t<Ig&&this.setState(function(){return{listContainerHeight:t+20}})}},{key:"onClearClick",value:function e(){this.props.clearDownloads();this.setState(function(){return{listContainerHeight:Ig}})}},{key:"render",value:function e(){if(!this.props.featureIap1Downloads)return null;var t=this.props.downloads.length>0;var a=_()("p-downloads_modal__content",{"p-downloads_modal__content--empty":!t});var r=this.props.featureDangerouslyGuardIATranslations;var i=r&&jg.t("Downloads");var s=r&&jg.t("Clear downloads");var o=r&&jg.t("Keep track of your downloads");var l=r&&jg.t("Files you download from Slack to your computer will appear here.");return n.a.createElement(pp["a"],{closeModal:this.props.closeModal,className:"p-downloads_modal",isOpen:true,centered:true},n.a.createElement(mp["h"],null,n.a.createElement(mp["j"],{title:i,className:"p-downloads_modal__title"},t&&n.a.createElement(Br["c"],{tip:s,position:"top"},n.a.createElement(as["a"],{icon:"clear",onClick:this.onClearClick,ariaLabel:s,className:"p-downloads_modal__title__clear"})))),n.a.createElement("div",{className:a,style:{height:this.state.listContainerHeight}},t?n.a.createElement(gg["a"],{ref:this.list,"aria-label":i,items:this.props.downloads,layout:this.layout}):n.a.createElement("div",{className:"p-downloads_modal__content_empty_message"},n.a.createElement("h3",{className:"p-downloads_modal__content_empty_message__heading"},o),n.a.createElement("p",null,l))))}}]);return t}(r["Component"]);Ag.displayName="Downloads";Ag.defaultProps=Tg;var Ng=function e(t){return{downloads:Sg(t),featureIap1Downloads:Object(i["isFeatureEnabled"])(t,"feature_iap1_downloads"),featureDangerouslyGuardIATranslations:Object(i["isFeatureEnabled"])(t,"feature_dangerously_guard_ia_translations")}};var Pg=function e(t){return{closeModal:function e(){return t(z["closeModal"].apply(void 0,arguments))},clearDownloads:function e(){return t(bg["clearTeamDesktopDownloads"].apply(void 0,arguments))}}};var Mg=Object(y["connect"])(Ng,Pg)(Ag);var Dg=new k["b"]("files");var xg={user:"",filetype:"",feature_iap1_downloads:false};var Rg=function(e){b()(t,e);function t(e){var a;c()(this,t);a=m()(this,v()(t).call(this,e));a.renderMemberOption=a.renderMemberOption.bind(he()(a));a.renderSelectedMemberOption=a.renderSelectedMemberOption.bind(he()(a));a.processMemberOptions=a.processMemberOptions.bind(he()(a));a.onMemberSelected=a.onMemberSelected.bind(he()(a));a.onFiletypeSelected=a.onFiletypeSelected.bind(he()(a));return a}d()(t,[{key:"onFiletypeSelected",value:function e(t){this.props.dispatch(Object(Kb["setFiletype"])(t.value))}},{key:"onMemberSelected",value:function e(t){this.props.dispatch(Object(Kb["setUser"])(t.value))}},{key:"processMemberOptions",value:function e(t,a){if(a&&a.length>0)return Promise.resolve(t);return Promise.resolve([{value:"",label:"Anyone"}].concat(Da()(t)))}},{key:"renderDownloads",value:function e(){var t=this;var a=this.props.dispatch;if(!fg["isDesktop"])return null;return n.a.createElement(Ro,{onClick:function e(){t.props.feature_iap1_downloads?a(Object(z["openModal"])({element:n.a.createElement(Mg,null)})):a(Object(vp["g"])())},iconType:"download",buttonLabel:Dg.t("Downloads",{fallbackHash:"a862c2b21b5e1337de2b76d5e43ae1375117d34d",fallbackHashNs:"page_client"}),"data-qa":"files_header_downloads_btn"})}},{key:"renderFiletypeSelect",value:function e(){var t=this;var a=[{label:"All File Types",value:""},{label:"Posts",value:"docs"},{label:"Snippets",value:"snippets"},{label:"Emails",value:"emails"},{label:"Images",value:"images"},{label:"Videos",value:"videos"},{label:"PDF Files",value:"pdfs"},{label:"Spreadsheets",value:"spreadsheets"},{label:"Google Docs",value:"gdocs"}];return n.a.createElement(Hm["a"],{className:"p-files_page__header__controls__filetype",options:a,selectedOption:a.find(function(e){return e.value===t.props.filetype}),onOptionSelected:this.onFiletypeSelected})}},{key:"renderMemberOption",value:function e(t){if(""===t.value)return n.a.createElement("strong",null,t.label);return n.a.createElement(ag["a"],{id:t.value})}},{key:"renderMemberSelect",value:function e(){var t=this.props.user;return n.a.createElement(tg["e"],{key:t,renderOption:this.renderMemberOption,renderSelectedOption:this.renderSelectedMemberOption,selectedOption:{value:t,label:t||"Anyone"},searcherOptions:{entities:{members:{includeSelf:true,onlyLocalTeam:true}},sort:{selfFirst:true},allowEmptyQuery:true},processOptions:this.processMemberOptions,onOptionSelected:this.onMemberSelected})}},{key:"renderSelectedMemberOption",value:function e(t){var a=""===t.value?t.label:n.a.createElement(rg["a"],{id:t.value});return n.a.createElement("span",null,"From: ",n.a.createElement("strong",null,a))}},{key:"render",value:function e(){return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"p-ia__view_header__title"},Dg.t("Files")),n.a.createElement("div",{className:"p-ia__view_header__spacer"}),this.renderDownloads())}}]);return t}(r["Component"]);Rg.displayName="FilesHeader";Rg.defaultProps=xg;var Fg=function e(t){return{user:Object(Kb["getUser"])(t),filetype:Object(Kb["getFiletype"])(t),feature_iap1_downloads:Object(i["isFeatureEnabled"])(t,"feature_iap1_downloads")}};var Lg=Object(y["connect"])(Fg)(Rg);var Ug=a(1068);var Bg=a(603);var qg=a(1375);var Gg=a(137);var Hg=a(1257);var Wg=a(428);var Vg=a(2768);var Kg=a(2726);var zg=a(4817);var Qg=new k["b"]("member_directory");var Yg={searchQuery:"",filter:"people",isEnterprise:false,clogger:{},isIAPhase1Enabled:false};var Jg=function(e){b()(t,e);function t(e){var a;c()(this,t);a=m()(this,v()(t).call(this,e));a.onMenuItemSelected=a.onMenuItemSelected.bind(he()(a));a.onFilterInputChange=a.onFilterInputChange.bind(he()(a));a.renderMenu=a.renderMenu.bind(he()(a));a.state={externalTeams:[]};return a}d()(t,[{key:"componentDidMount",value:function e(){this.props.clogger.track("PEOPLE_DIRECTORY_OPEN",{is_iap1:this.props.isIAPhase1Enabled});this.fetchExternalTeams()}},{key:"onFilterInputChange",value:function e(t){var a=t.target.value||"";this.props.dispatch(Object(Bg["f"])(a))}},{key:"onMenuItemSelected",value:function e(t){this.props.dispatch(Object(Bg["d"])(t))}},{key:"fetchExternalTeams",value:function e(){var t=this;this.props.dispatch(Object(qg["b"])()).then(function(e){if(!e||!e.external_teams)return;t.setState(function(){return{externalTeams:Object.keys(e.external_teams)}})})}},{key:"renderMenu",value:function e(t){return n.a.createElement(Kg["a"],{onMenuItemSelected:this.onMenuItemSelected,selectedFilter:this.props.filter,menuProps:t,externalTeams:this.state.externalTeams})}},{key:"render",value:function e(){var t=this.props,a=t.filter,r=t.searchQuery;var i=n.a.createElement(Wg["a"],{value:r,onChange:this.onFilterInputChange,placeholder:Qg.t("Search by name or title"),icon:"search",size:"medium",autoFocus:true,inputAriaLabel:Qg.t("Search members by name or title"),className:"p-directory_page__filter_input"});var s={people:Qg.t("Everyone"),org_members:Qg.t("All Members"),org_admins:Qg.t("Org Admins"),members:Qg.t("All Members"),admins:this.props.isEnterprise?Qg.t("Workspace Admins"):Qg.t("Admins"),bots:Qg.t("Bots"),guests:Qg.t("Guests"),deactivated:Qg.t("Deactivated accounts")};var o=Object(Gg["a"])(a)?n.a.createElement(tu["a"],{id:a}):s[this.props.filter];return n.a.createElement("div",{className:"p-directory_page"},n.a.createElement("div",{className:"p-directory_page__actions"},i,n.a.createElement(Hg["a"],{renderMenu:this.renderMenu,position:"bottom-left",offsetX:-4,offsetY:4},n.a.createElement(Ao["a"],{className:"p-directory_page__filter_type"},"Account type: ",n.a.createElement("strong",null,o),n.a.createElement(Ga["a"],{type:"chevron-down",inline:true})))),n.a.createElement(Vg["a"],{isIAP1Enabled:true}))}}]);return t}(r["Component"]);Jg.displayName="DirectoryPage";Jg.defaultProps=Yg;var Xg=function e(t){return{searchQuery:Object(Ug["f"])(t),filter:Object(Ug["a"])(t),isEnterprise:Object(i["pageNeedsEnterprise"])(t),clogger:Object(C["a"])({state:t}),isIAPhase1Enabled:Object(Hn["e"])(t)}};var Zg=Object(y["connect"])(Xg)(Jg);var $g=a(566);var e_=a(253);var t_={className:void 0};function a_(e){var t=e.onClick,a=e.children,r=e.className,i=Po()(e,["onClick","children","className"]);return n.a.createElement(e_["c"],te()({type:"outline",className:_()(r,"p-ia__view_header__primary_button"),onClick:t},i),a)}a_.displayName="ViewHeaderPrimaryButton";a_.defaultProps=t_;var r_=a_;var n_=new k["b"]("member_directory");var i_=function(e){b()(t,e);function t(){c()(this,t);return m()(this,v()(t).apply(this,arguments))}d()(t,[{key:"render",value:function e(){var t=this.props.showInviteButton;return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"p-ia__view_header__title"},n_.t("People",{fallbackHash:"b37554f695b15005fd23907b9488e0a8ad4bca5f",fallbackHashNs:"channel_sidebar"})),n.a.createElement("div",{className:"p-ia__view_header__spacer"}),t&&n.a.createElement(r_,{onClick:this.props.openInviteModal,"data-qa":"directory_header_invite_people_btn"},n_.t("Invite people",{fallbackHash:"e1eb97afa7ac563e4e26cd26d812294d4e04782c",fallbackHashNs:"classic_nav"})))}}]);return t}(r["Component"]);i_.displayName="DirectoryHeader";var s_=function e(t){return{showInviteButton:Object($g["canUserSeeInviteModal"])(t)}};var o_={openInviteModal:function e(){return hr["a"].apply(void 0,arguments)}};var l_=Object(y["connect"])(s_,o_)(i_);var c_=a(233);var u_=a(1323);var d_=a(817);var p_=a(4884);var m_={children:void 0,startOpen:false};var h_=function e(t){var a=t.children,i=t.label,s=t.description,o=t.emoji,l=t.startOpen;var c=Object(r["useState"])(l),u=Y()(c,2),d=u[0],p=u[1];var m=Object(r["useCallback"])(function(){return p(!d)},[d,p]);return n.a.createElement(n.a.Fragment,null,n.a.createElement(Ao["a"],{onClick:m,className:"p-page_accordion__button"},n.a.createElement("div",{className:"p-page_accordion__emoji"},n.a.createElement(d_["b"],{text:o})),n.a.createElement("div",null,n.a.createElement("div",{className:"p-page_accordion__label"},i),n.a.createElement("div",{className:"p-page_accordion__description"},s)),n.a.createElement(Ga["a"],{className:"p-page_accordion__caret",type:d?"chevron-medium-down":"chevron-medium-right"})),d&&a)};h_.defaultProps=m_;var v_=h_;var f_=a(4886);var b_={currentUser:void 0,customStatusText:void 0,customStatusEmoji:void 0};var g_=function(e){b()(t,e);function t(e){var a;c()(this,t);a=m()(this,v()(t).call(this,e));a.onCustomStatusClick=a.onCustomStatusClick.bind(he()(a));return a}d()(t,[{key:"onCustomStatusClick",value:function e(){this.props.dispatch(Object(u_["a"])())}},{key:"renderHeader",value:function e(){var t=this.props,a=t.currentUserId,r=t.currentUser,i=t.customStatusEmoji,s=t.customStatusText;var o=n.a.createElement(Ao["a"],{className:"p-profile_page__header__info__status",onClick:this.onCustomStatusClick},i&&n.a.createElement(Xp["a"],{text:s?i+" "+s:i,emojiSize:nf["a"].SMALL,showTooltips:false,noJumbomoji:true,noLinking:true,noSpecials:true,noHighlights:true,noEmojiText:true,preventCopyPaste:true,stopAnimations:true}),!i&&"Set a status",n.a.createElement(Ga["a"],{type:"pencil",inline:true,size:"inherit",className:"small_left_margin"}));return n.a.createElement("div",{className:"p-profile_page__header"},n.a.createElement(T["b"],{userId:a,size:100}),n.a.createElement("div",{className:"p-profile_page__header__info"},n.a.createElement(rg["a"],{id:a,className:"p-profile_page__header__info__name"}),n.a.createElement("div",{className:"p-profile_page__header__info__title"},Object(Za["getMemberTitle"])(r)),o))}},{key:"render",value:function e(){return n.a.createElement("div",{className:"p-profile_page"},this.renderHeader(),n.a.createElement(v_,{emoji:"slightly_smiling_face",label:"About",description:"Full name, display name, and basic things others should know"},n.a.createElement("div",{className:"p-profile_page__section"},"Test")),n.a.createElement(v_,{emoji:"telephone",label:"Contact",description:"Tell others how to get in touch with you"},n.a.createElement("div",{className:"p-profile_page__section"},"Test")),n.a.createElement(v_,{emoji:"earth_americas",label:"Location",description:"Country, city, and floor"},n.a.createElement("div",{className:"p-profile_page__section"},"Test")),n.a.createElement(v_,{emoji:"link",label:"Links",description:"Social accounts and more"},n.a.createElement("div",{className:"p-profile_page__section"},"Test")),n.a.createElement(v_,{emoji:"octopus",label:"Everything else",description:"More details provided by your company"},n.a.createElement("div",{className:"p-profile_page__section"},"Test")))}}]);return t}(r["Component"]);g_.displayName="ProfilePage";g_.defaultProps=b_;var __=function e(t){var a=Object(i["getCurrentUserId"])(t);var r=Object(M["g"])(t,a);return{currentUserId:a,currentUser:Object(M["e"])(t,a),customStatusText:r.text,customStatusEmoji:r.emoji,inDnd:!!Object(c_["getCurrentMemberDnd"])(t)}};var y_=Object(y["connect"])(__)(g_);var O_=a(1888);var k_=a(1977);var E_=a(2027);var C_=a(1979);var S_=a(1978);var w_=a(1976);var j_=a(2028);var I_=a(1980);var T_=a(4915);var A_=function e(t){var a=t.featureTinyspeck;return n.a.createElement("div",{className:"p-settings_page"},n.a.createElement(v_,{emoji:"bell",label:"Set notifications",description:"Manage alerts, do-not-disturb, sounds and keywords"},n.a.createElement("div",{className:"p-settings_page__section"},n.a.createElement(O_["a"],null))),n.a.createElement(v_,{emoji:"art",label:"Themes",description:"Change the appearance of Slack"},n.a.createElement("div",{className:"p-settings_page__section"},n.a.createElement(k_["a"],null))),n.a.createElement(v_,{emoji:"desktop_computer",label:"Accessibility & display",description:"Choose how messages and other media and are displayed"},n.a.createElement("div",{className:"p-settings_page__section"},n.a.createElement(C_["a"],null),n.a.createElement(E_["a"],null))),n.a.createElement(v_,{emoji:"open_file_folder",label:"Sidebar",description:"Choose what conversations you see and how channels are organized"},n.a.createElement("div",{className:"p-settings_page__section"},n.a.createElement(S_["a"],null))),n.a.createElement(v_,{emoji:"earth_africa",label:"Language & region",description:"Set your language and timezone settings"},n.a.createElement("div",{className:"p-settings_page__section"},n.a.createElement(w_["a"],null))),n.a.createElement(v_,{emoji:"whale2",label:"Advanced preferences",description:"Everything else"},n.a.createElement("div",{className:"p-settings_page__section"},n.a.createElement(j_["a"],null))),a&&n.a.createElement(v_,{emoji:"telescope",label:"Labs",description:"TS only"},n.a.createElement("div",{className:"p-settings_page__section"},n.a.createElement(I_["a"],null))))};A_.displayName="SettingsPage";var N_=function e(t){return{featureTinyspeck:Object(i["isFeatureEnabled"])(t,"feature_tinyspeck")}};var P_=Object(y["connect"])(N_)(A_);var M_=a(2864);var D_=a(4652);var x_=function(e){b()(t,e);function t(){c()(this,t);return m()(this,v()(t).apply(this,arguments))}d()(t,[{key:"render",value:function e(){return n.a.createElement("div",{className:"p-ia__browse_channels_page"},n.a.createElement(M_["a"],{withoutFullscreenModal:true,withoutHeader:true}))}}]);return t}(r["Component"]);x_.displayName="BrowseChannelsPagePrototype";var R_=a(1155);var F_=new k["b"]("channel_browser");var L_=function(e){b()(t,e);function t(e){var a;c()(this,t);a=m()(this,v()(t).call(this,e));a.onCreateClick=a.onCreateClick.bind(he()(a));return a}d()(t,[{key:"onCreateClick",value:function e(){this.props.openChannelCreateModal({entryPoint:"channel_browser"})}},{key:"render",value:function e(){var t=this.props.canUserCreateChannels;return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"p-ia__view_header__title"},F_.t("Channels",{fallbackHash:"18e03e2a37ba37df713f9665ef752fb8b40fc1e8",fallbackHashNs:"channel_sidebar"})),n.a.createElement("div",{className:"p-ia__view_header__spacer"}),t&&n.a.createElement(r_,{className:"p-channel_browser__header__create","data-qa":"channel_browser_channel_create_btn",onClick:this.onCreateClick},F_.t("Create channel",{fallbackHash:"daaf0897dc2a286540ad6a4b67c0e043aaf8b3db"})))}}]);return t}(r["Component"]);L_.displayName="BrowseChannelsHeader";var U_=function e(t){return{canUserCreateChannels:Object(vc["G"])(t)||Object(vc["F"])(t)}};var B_={openChannelCreateModal:function e(){return R_["a"].apply(void 0,arguments)}};var q_=Object(y["connect"])(U_,B_)(L_);var G_=a(1902);var H_=a(2014);var W_=a(4745);var V_=function(e){b()(t,e);function t(){c()(this,t);return m()(this,v()(t).apply(this,arguments))}d()(t,[{key:"componentDidMount",value:function e(){this.props.setDMBrowserInitialMembers({initialMembers:[]})}},{key:"render",value:function e(){return n.a.createElement("div",{className:"p-ia__browse_dms_page"},n.a.createElement(H_["a"],{withoutFullscreenModal:true}))}}]);return t}(r["Component"]);V_.displayName="BrowseDmsPage";var K_=function e(t){return{setDMBrowserInitialMembers:function e(){return t(G_["b"].apply(void 0,arguments))}}};var z_=Object(y["connect"])(null,K_)(V_);var Q_=a(4997);var Y_=a(4748);var J_=function(e){b()(t,e);function t(){c()(this,t);return m()(this,v()(t).apply(this,arguments))}d()(t,[{key:"render",value:function e(){return n.a.createElement("div",{className:"p-ia__help_page"},n.a.createElement(Q_["a"],{withoutFullscreenModal:true}))}}]);return t}(r["Component"]);J_.displayName="HelpPage";var X_={className:void 0,teamUrl:"/",teamEnterpriseDomain:"",isAdminOrOwner:false,isEnterpriseAdminOrOwner:false};var Z_=function e(t){var a=t.className,r=t.teamUrl,i=t.teamEnterpriseDomain,s=t.isAdminOrOwner,o=t.isEnterpriseAdminOrOwner;return n.a.createElement("div",{className:_()("p-ia__settings_header",a)},n.a.createElement("div",{className:"p-ia__view_header__title"},"Preferences"),o&&n.a.createElement(mr["a"],{href:"https://"+i+".enterprise.slack.com/manage",className:"p-ia__settings_header__link"},"Organization settings",n.a.createElement(Ga["a"],{type:"external-link-square",inline:true})),s&&n.a.createElement(mr["a"],{href:r+"admin/settings",className:"p-ia__settings_header__link"},"Workspace settings ",n.a.createElement(Ga["a"],{type:"external-link-square",inline:true})))};Z_.displayName="SettingsHeader";Z_.defaultProps=X_;var $_=function e(t){var a=Object(Je["d"])(t);var r=Object(M["b"])(t);var n=Object(Je["i"])(t);var i=Object(Za["isEnterpriseAdmin"])(r)||Object(Za["isEnterpriseOwner"])(r);var s=Object(Za["isAdmin"])(t,r)||Object(Za["isOwner"])(t,r)||i;return{teamUrl:Object(ut["getTeamUrl"])(a),teamEnterpriseDomain:n&&n.domain,isAdminOrOwner:s,isEnterpriseAdminOrOwner:i}};var ey=Object(y["connect"])($_)(Z_);var ty=a(2223);var ay=a(1461);var ry=a(1462);var ny=a(2383);var iy=a(128);var sy=a(295);var oy=a(383);var ly=function e(t){var a=[];var r=[];var n=null;t.forEach(function(e){if("top-anchor"===e.key){a.push(e);return}if(!n||!Object(oy["a"])(n,e.ts)){var t="date-divider-"+e.ts;r.push({index:a.length,key:t});a.push({type:"date-divider",ts:e.ts,key:t});n=e.ts}a.push(e)});return[a,r]};var cy=ly;var uy=a(1175);var dy={channel:void 0,name:void 0,senderName:void 0,latestMessage:void 0};var py=function e(t){var a=t.index,i=t.channelId,s=t.channel,o=t.ts,l=t.name,c=t.senderName,u=t.latestMessage,d=t.dispatch;Object(r["useEffect"])(function(){if(u)return;d(Object(Ci["b"])({channelId:i,limit:1,reason:"recent-conversations"})).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.msgs,a=e.hasMore,r=e.isLimited,n=e.pinCount,s=e.deleted;d(Object(uy["l"])({channelId:i}));d(Object(Ei["a"])({msgs:t,channelId:i,isLimited:r,pinCount:n,hasMore:{hasMoreStart:a,hasMoreEnd:false},oldest:null,latest:null,deleted:s}))})},[d,i,u]);var p=Object(r["useCallback"])(function(){d(Object(pn["a"])({id:i}))},[d,i]);var m=Object(gd["a"])(o);var h=u?n.a.createElement(Kp["a"],{lines:1},n.a.createElement("span",{className:"p-recent_page__conversation__sender"},c),Object(zi["isRichTextMessage"])(u)?n.a.createElement(zp["a"],{richTextBlock:u.blocks[0]}):n.a.createElement(aa["a"],{msg:u,isSingleLine:true})):n.a.createElement(Iu["b"],{size:"random"});var v=function e(){switch(Object(Gt["getChannelType"])(s)){case"im":return n.a.createElement(T["b"],{size:36,userId:Object(Gt["getMemberIdFromIm"])(s),isInteractive:false});default:return n.a.createElement(T["b"],{size:36,userId:u&&u.user,isInteractive:false})}};var f=_()("p-recent_page__item","p-recent_page__conversation",{"p-recent_page__item--first":0===a});return n.a.createElement(Ao["a"],{className:f,onClick:p},n.a.createElement("div",{className:"p-recent_page__conversation__avatar"},v()),n.a.createElement("div",{className:"p-recent_page__conversation__content"},n.a.createElement("div",{className:"p-recent_page__conversation__header"},n.a.createElement("div",{className:"p-recent_page__conversation__name"},l||n.a.createElement(Iu["b"],{size:"random"})),n.a.createElement("div",{className:"p-recent_page__timestamp"},m)),n.a.createElement("div",{className:"p-recent_page__message"},h)))};py.displayName="RecentConversationItem";py.defaultProps=dy;var my=function e(t,a){var r=a.channelId;var n=Object(He["e"])(t,r);var s=Object(O["last"])(Object(uy["i"])(t,r).timestamps);var o=Object(Rn["a"])(t,r,s);var l=o&&Object(M["e"])(t,o.user);var c=Object(i["getCurrentUserId"])(t);return{channel:n,name:Object(Gt["getDisplayNameForChannel"])(t,n,{imIncludeAtSign:false}),senderName:l&&(l.id===c?"You":Object(Za["getMemberProfileFieldFirstName"])(l)||Object(Za["getPrefCompliantMemberName"])(t,l)),latestMessage:o}};var hy=Object(y["connect"])(my)(py);var vy=a(5e3);var fy={recentConversationHistory:[]};var by=function e(t){var a=t.dispatch,i=t.recentConversationHistory;var s=Object(r["useState"])([]),o=Y()(s,2),l=o[0],c=o[1];var u=Object(r["useRef"])(new xi["a"]);Object(r["useEffect"])(function(){Promise.all([a(Object(ay["a"])({reason:"recent-conversations"})),a(Object(ry["a"])({reason:"recent-conversations"}))]).then(function(){return a(Object(ny["a"])())}).then(function(e){c(e.filter(function(e){return e.latestTs||e.channel.latest>="1"}).map(function(e){return{ts:Math.floor(Object(iy["a"])(e.latestTs||e.channel.latest).getTime()/1e3),viewId:e.channel.id,type:"message"}}))})},[a]);var d={viewId:"Xtop_anchor",key:"top-anchor",ts:Date.now()+1};var p=cy(Object(O["uniqBy"])([d].concat(Da()(l),Da()(i)).sort(function(e,t){return t.ts-e.ts}),"viewId")),m=Y()(p,2),h=m[0],v=m[1];var f=h.map(function(e){return e.viewId||e.key});var b=function e(t){if("top-anchor"===h[t].key)return n.a.createElement("div",{className:"p-recent_page__top_anchor"});if("date-divider"===h[t].type){var a=h[t].ts;var r=Object(sy["a"])(a,"{day_divider_pretty}");return n.a.createElement("div",{className:"p-recent_page__date_divider"},r)}return n.a.createElement(hy,{index:t,channelId:h[t].viewId,ts:h[t].ts,type:h[t].type||"history"})};return n.a.createElement(Cc["a"],null,function(e){var t=e.width,a=e.height,r=e.measureRef;return n.a.createElement("div",{className:"p-recent_page",ref:r},n.a.createElement(Di["a"],{width:t,height:a,keys:f,rowRenderer:b,stickyItems:v,stickyZIndex:1,layout:u.current}))})};by.displayName="RecentPage";by.defaultProps=fy;var gy=function e(t){return{recentConversationHistory:Object(ty["b"])(t)}};var _y=Object(y["connect"])(gy)(by);var yy=function(e){b()(t,e);function t(){c()(this,t);return m()(this,v()(t).apply(this,arguments))}d()(t,[{key:"render",value:function e(){var t=this;return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"p-ia__view_header__title"},"Recent conversations"),n.a.createElement("div",{className:"p-ia__view_header__spacer"}),n.a.createElement(e_["c"],{onClick:function e(){return t.props.openComposerPage()}},"New message"))}}]);return t}(r["Component"]);yy.displayName="RecentHeader";var Oy={openComposerPage:function e(){return zd["a"].apply(void 0,arguments)}};var ky=Object(y["connect"])(null,Oy)(yy);var Ey=a(653);var Cy=a(574);var Sy=a(340);var wy=a(1612);var jy=a(1932);Iy.defaultProps={value:""};function Iy(e){var t=e.value,a=e.name,r=e.id,i=e.onChange,s=e.onReset,o=e.onSearch;var l=function e(t){i(t.target.value)};return n.a.createElement("div",{className:"p-browse_page_layout__input_container"},n.a.createElement(Wg["a"],{className:"p-browse_page_layout__input",name:a,icon:"search",id:r,placeholder:"Search",onChange:l,onReset:s,onSubmit:o,value:t,allowEmptySubmit:true,autoFocus:true,"data-qa":"browse_page_input"}))}Iy.displayName="BrowsePageInput";var Ty=Iy;var Ay=a(852);var Ny=a(1339);var Py=a(5087);var My=a(123);function Dy(e,t){var a=Object(r["useState"])(e),n=Y()(a,2),i=n[0],s=n[1];Object(r["useEffect"])(function(){var a=setTimeout(function(){s(e)},t);return function(){return clearTimeout(a)}},[e,t]);return i}var xy=a(602);var Ry=function e(t,a){var r=Y()(t,2),n=r[0],i=r[1];return n*a+i};var Fy=function e(t,a){var r=Math.floor(t/a);var n=t%a;return[r,n]};var Ly=function e(t,a,r){if(!t)return false;var n=t.getBoundingClientRect();return n.top>=a&&n.bottom<=r};var Uy=function e(t){var a=Object(xy["d"])(t);if(!a)return;a.focus()};var By=function e(t){var a=Object(xy["c"])(t);if(!a)return;a.focus()};var qy=function e(t,a,r){return Math.max(0,Math.min(a-r,t))};var Gy=function e(t){if(!t)return;var a=t.getBoundingClientRect(),r=a.top,n=a.bottom;t.querySelectorAll("[data-restore-tab-index]").forEach(function(e){e.setAttribute("tabindex",e.dataset.restoreTabIndex);delete e.dataset.restoreTabIndex});var i=Object(xy["a"])(t);i.forEach(function(e){if(!Ly(e,r,n)){e.dataset.restoreTabIndex=e.getAttribute("tabindex");e.setAttribute("tabindex","-1")}})};var Hy=Object(Ni["a"])(Gy,500);var Wy=a(1079);var Vy={className:void 0,children:null,cellKey:null,role:"gridcell",tabIndex:-1,hasFocus:false,hasFocusWithin:false,onFocusEnter:O["noop"],onFocusWithin:O["noop"],onFocusLeave:O["noop"],onTabWithin:O["noop"],onKeyDown:O["noop"],refToForward:void 0};function Ky(e){var t=e.className,a=e.children,i=e.cellKey,s=e.tabIndex,o=e.hasFocus,l=e.hasFocusWithin,c=e.onFocusEnter,u=e.onFocusWithin,d=e.onFocusLeave,p=e.onTabWithin,m=e.onKeyDown,h=e.refToForward,v=Po()(e,["className","children","cellKey","tabIndex","hasFocus","hasFocusWithin","onFocusEnter","onFocusWithin","onFocusLeave","onTabWithin","onKeyDown","refToForward"]);var f=Object(r["useRef"])();var b=Object(r["useCallback"])(function(e){var t=e.relatedEvent,a=e.target;if(t&&"mousedown"===t.type)return;if(a&&(a instanceof HTMLMediaElement||a.dataset.mediaFocusContainer))return;(null===t||void 0===t?void 0:t.keyCode)===My["m"]&&p(e,{key:i});c(e,{key:i})},[i,c,p]);var g=Object(r["useCallback"])(function(e){var t=e.relatedEvent;if(t&&"mousedown"===t.type)return;(null===t||void 0===t?void 0:t.keyCode)===My["m"]&&p(e,{key:i});u(e,{key:i})},[i,u,p]);var y=Object(r["useCallback"])(function(e){var t=e.target,a=e.currentTarget;t===a&&m(e,{key:i})},[i,m]);Object(r["useImperativeHandle"])(h,function(){return f.current});if(!a)return null;var O=_()(t,"p-bp__grid_cell",{"p-bp__grid_cell--focus":o,"p-bp__grid_cell--focus-within":l});return n.a.createElement(Ny["a"],{onFocusEnter:b,onFocusWithin:g,onFocusLeave:d},n.a.createElement("div",te()({},Object(Wy["a"])(v),{"data-qa":"bp_grid_cell",className:O,ref:f,onKeyDown:y,tabIndex:s}),a))}Ky.displayName="GridCell";Ky.defaultProps=Vy;var zy=n.a.forwardRef(function(e,t){return n.a.createElement(Ky,te()({},e,{refToForward:t}))});var Qy={key:"",tabIndex:-1,refToForward:void 0};function Yy(e){var t=e.key,a=e.tabIndex,r=e.refToForward;var i={position:"absolute",width:"1px",height:"1px",outline:"none",boxShadow:"none"};return n.a.createElement("div",{key:t,ref:r,tabIndex:a,style:i})}Yy.displayName="HiddenTabStop";Yy.defaultProps=Qy;var Jy=n.a.forwardRef(function(e,t){return n.a.createElement(Yy,te()({},e,{refToForward:t}))});var Xy={width:0,height:0,onMouseMove:O["noop"]};function Zy(e){var t=e.width,a=e.height,r=e.onMouseMove;var i={position:"absolute",top:"0",left:"0",height:a,width:t,zIndex:201};return n.a.createElement("div",{onMouseMove:r,style:i,"data-qa":"bp_grid_mouse_intercepter"})}Zy.displayName="MouseIntercepter";Zy.defaultProps=Xy;var $y=Zy;var eO=a(5107);var tO={children:null,className:void 0,role:"grid",ariaLabel:void 0,ariaDescribedBy:void 0,onFocusEnter:O["noop"],onFocusLeave:O["noop"],onGridCellFocusEnter:O["noop"],onGridCellClick:O["noop"],gridGap:8,minColumns:1,initialScrollTop:0,onScroll:O["noop"]};function aO(e){var t=e.children,a=e.className,i=e.keys,s=e.role,o=e.ariaLabel,l=e.ariaDescribedBy,c=e.itemRenderer,u=e.onFocusEnter,d=e.onFocusLeave,p=e.onGridCellFocusEnter,m=e.onGridCellClick,h=e.gridGap,v=e.minColumns,f=e.cellWidth,b=e.cellHeight,g=e.initialScrollTop,y=e.onScroll;var k=Object(r["useRef"])();var E=Object(r["useRef"])();var C=Object(r["useRef"])();var S=Object(r["useRef"])();var w=Object(r["useRef"])();var j=Object(wc["a"])(false,250),I=Y()(j,2),T=I[0],A=I[1];var N=Object(r["useState"])(false),P=Y()(N,2),M=P[0],D=P[1];var x=Object(r["useState"])(0),R=Y()(x,2),F=R[0],L=R[1];var U=Object(r["useState"])(0),B=Y()(U,2),q=B[0],G=B[1];var H=Object(r["useState"])(0),W=Y()(H,2),V=W[0],K=W[1];var z=Object(r["useState"])(0),Q=Y()(z,2),J=Q[0],X=Q[1];var Z=Object(r["useState"])(null),$=Y()(Z,2),ee=$[0],te=$[1];var ae=Object(r["useState"])(null),re=Y()(ae,2),ne=re[0],ie=re[1];var se=Object(r["useState"])(null),oe=Y()(se,2),le=oe[0],ce=oe[1];var ue=Dy(V,250);var de=Dy(J,250);var pe=function e(){var t;return null===E||void 0===E?void 0:null===(t=E.current)||void 0===t?void 0:t.scrollTop()};var me=function e(){var t;return null===E||void 0===E?void 0:null===(t=E.current)||void 0===t?void 0:t.scroller};var he=function e(t){var a;var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var n=Math.ceil(t);if(r){var i;return null===E||void 0===E?void 0:null===(i=E.current)||void 0===i?void 0:i.scrollWithAnimation(n)}return null===E||void 0===E?void 0:null===(a=E.current)||void 0===a?void 0:a.scrollTop(n)};var ve=null!==ne;var fe=Object(r["useCallback"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:q;var a=i.indexOf(e);return-1!==a?Fy(a,t):[0,0]},[i,q]);var be=Object(r["useCallback"])(function(e){if(null===le)return false;var t=Y()(le,2),a=t[0],r=t[1];var n=Ry(le,q);var s=i.length-1;var o=0===n;var l=n===s;var c=a-1;var u=r-1;var d=F-1;var p=q-1;var m=a;var h=r;switch(e){case My["h"]:h=u;if(o)h=r;else if(h<0&&c>=0){h=p;m=c}break;case My["k"]:h=r+1;if(l)h=r;else if(h>p&&a+1<=d){h=0;m=a+1}break;case My["n"]:m=a-1;if(o)m=a;else if(m<0){var v=Ry([d,u],q);var f=v<=s;m=f?d:d-1;h=u}break;case My["c"]:m=a+1;if(l)m=a;else if(a===d){m=l?a:0;h=r+1>p?0:r+1}else if(m===d){var b=[m,r];var g=Ry(b,q);var _=g>s;if(_){m=0;h=r===p?0:r+1}}break;default:break}return[m,h]},[le,q,i.length,F]);var ge=Object(r["useCallback"])(function(e){var t=e.relatedEvent,a=e.target;if(t&&"mousedown"===t.type)return;if(a&&(a instanceof HTMLMediaElement||a.dataset.mediaFocusContainer))return;var r=a===(null===C||void 0===C?void 0:C.current);var n=a===(null===S||void 0===S?void 0:S.current);var i=!t;var s=t&&"keydown"===t.type;var o=!i&&(r||n);var l=s||i;if(!l)return;if(o){var c=me();if(r){D(true);By(c)}if(n){D(true);Uy(c)}Gy(c)}u(e,{hasKeyboardFocus:o})},[u]);var _e=Object(r["useCallback"])(function(e){if(ve){ce(null);ie(null);te(ne)}D(false);d(e)},[ne,ve,d]);var ye=Object(r["useCallback"])(function(e){var t;A(true);y(e,{scrollTop:pe(),scrollHeight:null===k||void 0===k?void 0:null===(t=k.current)||void 0===t?void 0:t.offsetHeight,clientHeight:de})},[de,y,A]);var Oe=Object(r["useCallback"])(function(e,t){var a=t.key;var r=e.currentTarget;var n=Object(xy["b"])(r).length<=1;if(n){ie(a);ce(fe(a));te(a)}else{ie(null);ce(null);te(a)}p(e)},[fe,p]);var ke=Object(r["useCallback"])(function(e,t){var a=t.key;var r=e.currentTarget;var n=Object(xy["b"])(r).length<=1;if(n){ie(a);ce(fe(a));te(a)}else{ie(null);ce(null);te(a)}},[fe]);var Ee=Object(r["useCallback"])(function(e,t){var a=t.key;var r=e.target,n=e.currentTarget,i=e.relatedEvent;var s=i.shiftKey&&r===n&&!ve&&ee===a;if(s){ie(a);ce(fe(a));te(a);return}var o=Object(xy["b"])(n).length<=1;if(!o){ie(null);ce(null);te(a)}},[fe,ve,ee]);var Ce=Object(r["useCallback"])(function(e,t){var a=t.key;var r=e.keyCode;r===My["e"]&&m({key:a})},[m]);Object(r["useEffect"])(function(){var e=new ci["a"];var t=[{keys:["up","down","left","right"],handler:function e(t){t.preventDefault();var a=be(t.keyCode);if(a){ce(a);var r=Ry(a,q);var n=i[r];ie(n);te(n)}}}];e.bindAll(t);return function(){e.reset()}},[be,i,q]);Object(r["useEffect"])(function(){T||Hy(me())},[T]);Object(r["useEffect"])(function(){var e;var t=null===k||void 0===k?void 0:null===(e=k.current)||void 0===e?void 0:e.getBoundingClientRect().width;var a=Math.floor((t+h)/(f+h));var r=Math.ceil(i.length/a);r!==F&&L(r);a!==q&&G(a);if(ne){var n=fe(ne,a);ce(n)}},[ne,f,ue,fe,h,i,q,F]);Object(r["useEffect"])(function(){var e=me();if(!w.current||!k.current||!e)return;var t=e.getBoundingClientRect(),a=t.top,r=t.bottom,n=t.height;if(!Ly(w.current,a,r)){var i=k.current.offsetHeight;var s=qy(w.current.offsetTop,i,n);he(s)}By(w.current)},[ne,le]);var Se=Object(O["chunk"])(i,q);var we=Se.reduce(function(e,t,a){return e.concat(t.map(function(e,t){var r=[a,t];var i=Object(np["a"])(le,r);var s=!ve&&M;return n.a.createElement(zy,{key:e,cellKey:e,hasFocus:i,hasFocusWithin:s,ref:i?w:void 0,onFocusEnter:Oe,onFocusWithin:ke,onFocusLeave:O["noop"],onTabWithin:Ee,onKeyDown:Ce},c(t,{key:e,hasFocus:i}))}))},[]);var je=_()(a,"p-bp__grid_container");var Ie={minWidth:v<=1?f:v*f+(v-1)*h,gridGap:h,gridAutoRows:b,gridTemplateColumns:"repeat(auto-fill, "+f+"px)"};var Te=M?-1:0;return n.a.createElement(Py["a"],{className:je},function(e){var a=e.width,r=e.height;K(a);X(r);return n.a.createElement(Ny["a"],{onFocusEnter:ge,onFocusLeave:_e},n.a.createElement("div",{role:"presentation"},n.a.createElement(Jy,{key:"top-tab-stop",tabIndex:Te,ref:C}),n.a.createElement(Ay["b"],{width:a,height:r,role:s,"aria-label":o,"aria-describedby":l,initialScrollTop:g,onScroll:ye,ref:E},n.a.createElement("div",{className:"p-bp__grid",ref:k,style:Ie,role:"presentation"},we),t),n.a.createElement(Jy,{key:"btm-tab-stop",tabIndex:Te,ref:S}),M&&n.a.createElement($y,{width:a,height:r,onMouseMove:O["noop"]})))})}aO.displayName="Grid";aO.defaultProps=tO;var rO=aO;var nO=rO;var iO={children:null,role:"listitem",className:void 0,onFocusEnter:O["noop"],onFocusWithin:O["noop"],onFocusLeave:O["noop"]};function sO(e){var t=e.className,a=e.children,r=e.role,i=e.onFocusEnter,s=e.onFocusWithin,o=e.onFocusLeave;var l=_()(t,"p-bp__list_item");return n.a.createElement(Ny["a"],{onFocusEnter:i,onFocusWithin:s,onFocusLeave:o},n.a.createElement("div",{className:l,role:r},a))}sO.displayName="ListItem";sO.defaultProps=iO;var oO=sO;var lO={children:null,className:void 0,role:"list",ariaLabel:void 0,ariaDescribedBy:void 0,itemProps:{},initialScrollTop:0,onScroll:O["noop"]};function cO(e){var t=e.children,a=e.className,r=e.role,i=e.ariaLabel,s=e.ariaDescribedBy,o=e.keys,l=e.itemRenderer,c=e.itemProps,u=e.initialScrollTop,d=e.onScroll;var p=_()(a,"p-bp__list_container");var m=o.map(function(e,t){return n.a.createElement(oO,te()({},c,{key:e}),l(t,{key:e}))});return n.a.createElement(Py["a"],{className:p},function(e){var a=e.width,o=e.height;return n.a.createElement(Ay["b"],{width:a,height:o,role:r,"aria-label":i,"aria-describedby":s,initialScrollTop:u,onScroll:d},n.a.createElement("div",{className:"p-bp__list"},m),t)})}cO.displayName="List";cO.defaultProps=lO;var uO=cO;var dO=uO;var pO=a(252);function mO(e){var t=e.page,a=e.pageCount,r=e.rangeSize,n=void 0===r?5:r;if(t<=0||!a)return[];var i=n%2===0;var s=i?Math.floor(n/2)-1:Math.floor(n/2);var o=Math.max(Math.min(t-s,a-(n-1)),1);var l=Math.min(o+n,a+1);return Object(O["range"])(o,l)}var hO=a(5109);var vO=new k["b"]("search");var fO={rangeSize:5};function bO(e){var t=e.page,a=e.pageCount,i=e.rangeSize,s=e.onPageSelect;var o=1===t;var l=t===a;var c=function e(t){s(t)};var u=function e(){if(t-1<=0)return;var a=t>=1?t-1:1;s(a)};var d=function e(){if(t+1>a)return;var r=t+1>a?a:t+1;s(r)};var p=Object(r["useMemo"])(function(){return mO({page:t,pageCount:a,rangeSize:i})},[t,a,i]);return n.a.createElement("div",{className:"p-bp__paginator"},n.a.createElement("div",{className:"p-bp__paginator__pages"},n.a.createElement(as["a"],{icon:"chevron-left",size:"small",onClick:u,"data-qa":"browse_page_paginator_back_btn",className:"p-bp__paginator__arrow_btn","aria-label":vO.t("Previous"),disabled:o}),p.map(function(e){return n.a.createElement(Ao["a"],{key:e,className:_()("p-bp__paginator__page_btn",{"p-bp__paginator__page_btn--active":t===e}),"data-qa":"browse_page_paginator_page_btn","aria-label":vO.t("Page {currentPageOffset} of {totalPageCount}",{currentPageOffset:Object(pO["a"])(e),totalPageCount:Object(pO["a"])(a)},{fallbackHash:"12d107c2f54959a419ebf8a58dc959d76473b0ea"}),onClick:function t(){return c(e)}},Object(pO["a"])(e))}),n.a.createElement(as["a"],{icon:"chevron-right",size:"small",onClick:d,"data-qa":"browse_page_paginator_forward_btn",className:"p-bp__paginator__arrow_btn","aria-label":vO.t("Next"),disabled:l})))}bO.displayName="Paginator";bO.defaultProps=fO;var gO=bO;var _O=gO;var yO=a(2073);var OO=new k["b"]("search");var kO=new k["b"]("browsers");var EO={layout:"list",items:[],isLoading:false,initialScrollTop:0,totalCount:0,gridGap:8,cellHeight:232,cellWidth:256,minColumns:1,page:1,pageCount:1,onPageSelect:O["noop"],featureDangerouslyGuardIATranslations:false,error:Sy["i"].NONE};function CO(e){var t=e.isLoading,a=e.layout,i=e.items,s=e.itemRenderer,o=e.gridGap,l=e.cellHeight,c=e.cellWidth,u=e.minColumns,d=e.page,p=e.pageCount,m=e.onPageSelect,h=e.featureDangerouslyGuardIATranslations,v=e.error,f=e.totalCount,b=e.initialScrollTop,g=e.entity,_=e.dispatch;var y=Object(r["useRef"])(b);Object(r["useEffect"])(function(){return function(){_(Object(Ey["E"])({entity:g,value:y.current}))}},[_,g]);if(!h)return null;var O=n.a.createElement("div",{style:{display:"none",pointerEvents:"none"},"aria-hidden":"true"},kO.t("Search channels"),kO.t("Filter (closed)"),kO.t("Filter (expanded)"),kO.t("Filter (closed), {filterCount} {filterCount, plural, =1 {filter} other {filters}} applied",{filterCount:1}),kO.t("Filter (expanded), {filterCount} {filterCount, plural, =1 {filter} other {filters}} applied",{filterCount:1}),kO.t("Private channel, {channelName} {sharedChannelDisplay}, {memberCount} {memberCount, plural, =1 {member} other {members}}. {channelPurpose}",{channelName:"test",sharedChannelDisplay:"test",memberCount:"test",channelPurpose:"test"}),kO.t("Public channel, {channelName} {sharedChannelDisplay}, {memberCount} {memberCount, plural, =1 {member} other {members}}. {channelPurpose}",{channelName:"test",sharedChannelDisplay:"test",memberCount:"test",channelPurpose:"test"}),kO.t("Archived channel, {channelName} {sharedChannelDisplay}, {memberCount} {memberCount, plural, =1 {member} other {members}}. {channelPurpose}",{channelName:"test",sharedChannelDisplay:"test",memberCount:"test",channelPurpose:"test"}),kO.t("Create a channel"),kO.t("Channels shared with {externalOrganization}, {optionPosition} of {totalOptionCount} {totalOptionCount, plural, =1 {suggestion} other {suggestions}}",{externalOrganization:"test",optionPosition:1,totalOptionCount:3}),kO.t("Find more external organizations"),kO.t("Enter an external organization"),kO.t("Search members"),kO.t("Single-channel guest"),kO.t("Multi-channel guest"),kO.t("Invite people"),kO.t("Search user groups"),kO.t("{name}, {handle}, {userCount} {userCount, plural, =1 {member} other {members}}. {description}",{name:"test",handle:"@test",userCount:1,description:"test"}),kO.t("Create a user group"),kO.t("Search files"),kO.t("Shared by {name} on {date}",{name:"test",date:"test"}),kO.t("View downloads"),kO.t("Upload a file"),kO.t("Find more teammates"),kO.t("Files shared by {member}, {optionPosition} of {totalOptionCount} {totalOptionCount, plural, =1 {suggestion} other {suggestions}}",{member:"test",optionPosition:1,totalOptionCount:3}),kO.t("Files shared in {channel}, {optionPosition} of {totalOptionCount} {totalOptionCount, plural, =1 {suggestion} other {suggestions}}",{channel:"test",optionPosition:1,totalOptionCount:3}),kO.t("Find more channels or direct messages"),kO.t("Date shared start"),kO.t("Date shared starting {date}",{date:"test"}),kO.t("Date shared end"),kO.t("Date shared ending {date}",{date:"test"}),kO.t("View previous page"),kO.t("View next page"),kO.t("View page {pageNumber}",{pageNumber:1}));if(t)return n.a.createElement(Qt["a"],{size:"large"});var k=function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=a.scrollTop;y.current=r};var E=n.a.createElement("div",{className:"p-browse_page_results__error"},n.a.createElement("p",null,OO.t("Something went wrong")),n.a.createElement("p",null,OO.t("For some reason, Slack wasn\u2019t able to complete your search."),"\xa0",n.a.createElement(Pe["a"],{onClick:function e(){return _(Object(Ey["j"])())}},OO.t("Try again"))));var C=n.a.createElement("div",{className:"p-browse_page_results__empty"},n.a.createElement("p",null,kO.t("No results")),n.a.createElement("p",null,kO.t("You might want to try using different keywords, checking for typos or adjusting your filters.")));var S=n.a.createElement(_O,{page:d,pageCount:p,onPageSelect:m});var w="grid"===a?n.a.createElement(nO,{keys:i,itemRenderer:s,gridGap:o,cellHeight:l,cellWidth:c,minColumns:u,initialScrollTop:b,onScroll:k},p>1&&S):n.a.createElement(dO,{keys:i,itemRenderer:s,initialScrollTop:b,onScroll:k},p>1&&S);return n.a.createElement("div",{className:"p-browse_page_results"},v!==Sy["i"].NONE&&E,v!==Sy["i"].NONE||f?null:C,v===Sy["i"].NONE&&f?w:null)}CO.displayName="BrowsePageResults";CO.defaultProps=EO;var SO=function e(t,a){var r=a.entity;var n=Object(Ey["f"])(t,r),i=n.results,s=n.page,o=n.pageCount,l=n.isLoading,c=n.totalCount,u=n.error,d=n.scrollPosition;return{items:i[s],page:s,pageCount:o,isLoading:l,featureDangerouslyGuardIATranslations:Object(Hn["e"])(t),totalCount:c,error:u,initialScrollTop:d,entity:r}};var wO=Object(y["connect"])(SO)(CO);var jO=a(1961);var IO=new k["b"]("browsers");var TO={allowSort:true,isFilterPanelOpen:false,isLoading:false,filterCount:0,resultDisplay:"",sortLabel:"",sortOptions:[],onSortSelect:O["noop"],onFilterToggle:O["noop"],onFilterReset:O["noop"],featureDangerouslyGuardIATranslations:false,shouldSuppressAnimations:false};var AO=function e(t){var a=t.allowSort,r=t.isFilterPanelOpen,i=t.isLoading,s=t.filterCount,o=t.resultDisplay,l=t.sortLabel,c=t.sortOptions,u=t.onSortSelect,d=t.onFilterToggle,p=t.onFilterReset,m=t.featureDangerouslyGuardIATranslations,h=t.shouldSuppressAnimations;if(!m)return null;function v(e){return function(){u(e)}}return n.a.createElement("div",{className:"p-browse_page_controls"},n.a.createElement("div",{className:_()("p-browse_page_controls__left",r&&"p-browse_page_controls__left--compressed")},n.a.createElement("div",{className:_()("p-browse_page_controls__total",{"p-browse_page_controls__total--placeholder":i})},!i&&o),a&&n.a.createElement(To["e"],{position:"bottom-right",renderMenu:function e(t){return n.a.createElement(To["f"],te()({width:260},t),c.map(function(e){var t=e.value,a=e.label;return n.a.createElement(To["b"],{key:t,label:a,onSelected:v(t)})}))}},n.a.createElement(J["c"],{className:"p-browse_page_controls__button"},n.a.createElement(X["b"],{type:"sort-bold",size:"inherit",className:"p-browse_page_controls__icon",inline:true}),l))),n.a.createElement("div",{className:_()("p-browse_page_controls__expander",{"p-browse_page_controls__expander--open":r,"p-browse_page_controls__expander--no-transition":h})},n.a.createElement(J["c"],{className:"p-browse_page_controls__button",onClick:d},n.a.createElement(X["b"],{type:"filters-bold",size:"inherit",className:"p-browse_page_controls__icon",inline:true}),"Filter",s>0&&n.a.createElement("span",{className:"p-browse_page_controls__button__pill"},s)),r&&n.a.createElement("div",{className:"p-browse_page_controls__button_group"},s>0?n.a.createElement(n.a.Fragment,null,n.a.createElement(Pe["a"],{className:"p-browse_page_controls__reset_button",onClick:p},IO.t("Reset",{fallbackHash:"56553100b028cf32544522d0a9ac81629de6f741"})),n.a.createElement("div",{className:"p-browse_page_controls__divider"})):null,n.a.createElement(as["a"],{icon:"times",onClick:d}))))};AO.displayName="BrowsePageControls";AO.defaultProps=TO;function NO(e){return{shouldSuppressAnimations:!Object(ai["k"])(e,"a11y_animations")}}var PO=Object(y["connect"])(NO)(AO);var MO={isFilterPanelOpen:false,renderResults:O["noop"],renderFilters:O["noop"],renderExtraContent:O["noop"],shouldSuppressAnimations:false};var DO=function e(t){var a=t.isFilterPanelOpen,r=t.renderResults,i=t.renderFilters,s=t.renderExtraContent,o=t.shouldSuppressAnimations;var l=s&&s();return n.a.createElement("div",{className:"p-browse_page_layout__content"},n.a.createElement("div",{className:_()("p-browse_page_layout__results_container",{"p-browse_page_layout__results_container--compressed":a,"p-browse_page_layout__results_container--no-transition":o})},l&&n.a.createElement("div",{className:"p-browse_page_layout__extras_container"},l),r()),n.a.createElement("div",{className:_()("p-browse_page_layout__filters_container",{"p-browse_page_layout__filters_container--open":a,"p-browse_page_layout__filters_container--no-transition":o})},n.a.createElement(Cc["a"],null,function(e){var t=e.width,a=e.height,r=e.measureRef;return n.a.createElement("div",{className:"p-browse_page_layout__filters_scroll_container",ref:r},n.a.createElement(Ay["b"],{width:t,height:a},n.a.createElement("div",{className:"p-browse_page_layout__filters_inner"},i())))})))};DO.displayName="BrowsePageLayout";DO.defaultProps=MO;function xO(e){return{shouldSuppressAnimations:!Object(ai["k"])(e,"a11y_animations")}}var RO=Object(y["connect"])(xO)(DO);var FO=a(277);var LO=a(1296);var UO=a(4750);var BO=function e(t){var a=Object(Ey["f"])(t,"files"),r=a.filters;var n=Object(Ey["h"])(t),s=n.channelIds,o=n.peopleIds,l=n.state;var c=Object(i["getCurrentUserId"])(t);var u=Object(Je["d"])(t);var d=!!u.enterprise_id;var p=WO(t,r.in);var m="solr_rank_debug"===Object(Hi["getGroupForUser"])(t,"solr_rank_debug");var h=Object(ri["a"])(t);var v=Object(i["getAllLoggedInAccountsNormalized"])(t).filter(function(e){return!!e.enterprise_id&&e.enterprise_id===h});var f={searchOnlyCurrentTeam:r.onlyCurrentTeam,searchExcludeBots:r.excludeBots,searchOnlyMyChannels:r.onlyMyChannels};var b={in:s.map(function(e){return HO(t,e)}).filter(function(e){return!!e}),from:o.map(function(e){return HO(t,e)}).filter(function(e){return!!e})};return{suggestions:b,fileSuggestions:b,loadingFileSuggestions:l===Sy["j"].LOADING,currentTeam:u,isEnterpriseOrg:d,myUserId:c,filters:{in:r.in||LO["a"],from:r.from||LO["a"],before:r.before,after:r.after,fileType:r.fileType},imToUserMap:p,searchPrefs:f,logInfo:Object(Ne["a"])({state:t}).info,isDebugInfoVisible:false,showDebugOption:m,loggedInEnterpriseTeams:v.map(function(e){return Object(Je["k"])(t,e.id)}),featureSearchLimitTeamFilter:Object(i["isFeatureEnabled"])(t,"feature_search_limit_team_filter"),searchOnlyWorkspaceTeamId:r.selectedTeamId,selfEnterpriseOrgName:Object(Je["g"])(t),showEnterpriseOptions:Object(Vp["f"])(t),filterWorkspaceOnly:false}};var qO=function e(t){return{onAfterFilterChange:function e(a){var r=a.dateString;return t(Object(Ey["B"])({filter:"after",value:r}))},onBeforeFilterChange:function e(a){var r=a.dateString;return t(Object(Ey["B"])({filter:"before",value:r}))},onFileTypeChange:function e(a){var r=a.fileType;return t(Object(Ey["B"])({filter:"fileType",value:r}))},onMemberSelect:function e(){return t(Ey["y"].apply(void 0,arguments))},onChannelSelect:function e(){return t(Ey["w"].apply(void 0,arguments))},search:function e(){return t(FO["e"].apply(void 0,arguments))},messageAndFileSearchExcludeBotsChanged:function e(a){var r=a.value;return t(Object(Ey["B"])({filter:"excludeBots",value:r}))},messageAndFileSearchOnlyMyChannelsChanged:function e(a){var r=a.value;return t(Object(Ey["B"])({filter:"onlyMyChannels",value:r}))},searchOnlyByEnterpriseTeamId:function e(a){var r=a.value;return t(Object(Ey["B"])({filter:"selectedTeamId",value:r}))}}};var GO=Object(y["connect"])(BO,qO,null,{areStatePropsEqual:function e(t,a){return Object(np["a"])(t,a,2)}})(UO["a"]);function HO(e,t){if(Object(uu["a"])(t))return Object(He["e"])(e,t);if(Object(du["a"])(t))return Object(M["e"])(e,t);return null}function WO(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t.reduce(function(t,a){if(Object(du["a"])(a)){var r=Object(He["m"])(e,a);r&&(t[r]=a)}return t},{})}var VO=new k["b"]("browsers");var KO=function(e){b()(t,e);function t(e){var a;c()(this,t);a=m()(this,v()(t).call(this,e));a.state={hasError:false};return a}d()(t,[{key:"componentDidCatch",value:function e(t){this.props.logger.error(t);this.setState(function(){return{hasError:true}})}},{key:"render",value:function e(){if(this.state.hasError&&this.props.featureDangerouslyGuardIATranslations)return n.a.createElement("div",{className:"p-browse_page_results__empty"},n.a.createElement("p",null,VO.t("Something went wrong")),n.a.createElement("p",null,VO.t("For some reason, Slack wasn't able to load this page.")));return this.props.children}}]);return t}(r["Component"]);KO.displayName="ProtectedBrowsePage";KO.defaultProps={featureDangerouslyGuardIATranslations:false};var zO=function e(t){return{logger:Object(Ne["a"])({state:t})}};var QO=Object(y["connect"])(zO)(KO);var YO=a(2858);var JO={children:null,title:"",primaryActionText:"",onClickPrimaryAction:O["noop"],onClose:O["noop"],onMarkAsSeen:O["noop"],role:"alert",imgUrl:null,imgUrl2x:null};var XO=function(e){b()(t,e);function t(){c()(this,t);return m()(this,v()(t).apply(this,arguments))}d()(t,[{key:"componentWillUnmount",value:function e(){this.props.onMarkAsSeen()}},{key:"render",value:function e(){var t;var a=this.props,r=a.title,i=a.primaryActionText,s=a.onClickPrimaryAction,o=a.onClose,l=a.role,c=a.children,u=a.namespace,d=a.imgUrl,p=a.imgUrl2x;var m;d&&p&&(m=d+", "+p+" 2x");return n.a.createElement("div",{className:"p-browse_page_education_card",role:l,"data-qa":u+"-education-card"},n.a.createElement("div",{className:"p-browse_page_education_card__content"},n.a.createElement("h3",{className:"p-browse_page_education_card__title"},r),n.a.createElement("div",{className:"p-browse_page_education_card__body"},c),i&&n.a.createElement("div",{className:"p-browse_page_education_card__actions"},n.a.createElement(J["d"],{onClick:s,type:"outline",size:"medium","data-qa":u+"-education-card-primary-button"},i))),d&&n.a.createElement("div",{className:"p-browse_page_education_card__image"},n.a.createElement("img",{srcSet:null!==(t=m)&&void 0!==t?t:void 0,src:d,alt:""})),n.a.createElement(as["a"],{icon:"times",className:"p-browse_page_education_card__close",onClick:o,"data-qa":u+"-education-card-close-button"}))}}]);return t}(r["Component"]);XO.displayName="EducationCard";XO.defaultProps=JO;var ZO=XO;var $O=a(1927);var ek=a(4683);var tk=a(4688);var ak=a(220);var rk=a(4685);var nk={featurePjpeg:false,supressAnimations:false,openViewer:O["noop"],openInspector:O["noop"]};var ik=function e(t){var a=t.file,i=t.openViewer,s=t.openInspector,o=t.featurePjpeg,l=t.supressAnimations;var c=Object(sp["isFileUnknown"])(a);var u=Object(sp["isTombstone"])(a);var d=Object(sp["isNotFound"])(a);var p=Object(sp["isHiddenByStorageLimit"])(a);var m=!c&&!u&&!d&&!p;var h=Object(r["useState"])(false),v=Y()(h,2),f=v[0],b=v[1];var g=Object(r["useState"])(false),y=Y()(g,2),O=y[0],k=y[1];var E=a.filetype,C=a.id;var S=sk(a,{featurePjpeg:o,supressAnimations:l});var w=E||Object(sp["getFileTypeFromMimeType"])(a.mimetype);var j={backgroundImage:"url("+S+")"};var I=Object(sp["getMainAction"])(a);var T=Object(r["useCallback"])(function(e){e.preventDefault();if(!m)return;"view"===I?i({fileId:C}):s({fileId:C})},[I,C,i,s,m]);Object(r["useEffect"])(function(){if(!S||c||O)return;var e=document.createElement("img");e.src=S;e.onload=function(){k(true)};e.onerror=function(){b(true)}},[c,O,S]);var A=S&&O&&!f;var N=S&&!O&&!f;var P=(!S||f)&&!c;return n.a.createElement(ak["a"],{"data-file-id":a.id,className:_()("p-file_card__preview",{"p-file_card__preview--view":"view"===I}),rel:"noopener noreferrer",href:a.permalink,target:a.permalink,style:A?j:void 0,onClick:T,"data-qa":"file-card-preview"},P&&n.a.createElement(X["b"],{type:w,file:"large",size:"inherit"}),(c||N)&&n.a.createElement(rk["a"],{size:50}))};ik.displayName="FileCardPreview";ik.defaultProps=nk;function sk(e,t){var a=t.featurePjpeg,r=t.supressAnimations;if("image"!==Object(sp["getFileType"])(e)&&!e.thumb_pdf)return null;return Object(sp["getThumbSrcForFile"])(e,{featurePjpeg:a,supressAnimations:r})}var ok=ik;var lk=function e(t,a){var n=Object(r["useState"])(false),i=Y()(n,2),s=i[0],o=i[1];Object(r["useEffect"])(function(){var e,a,r,n;o((null===t||void 0===t?void 0:null===(e=t.current)||void 0===e?void 0:e.offsetHeight)<(null===t||void 0===t?void 0:null===(a=t.current)||void 0===a?void 0:a.scrollHeight)||(null===t||void 0===t?void 0:null===(r=t.current)||void 0===r?void 0:r.offsetWidth)<(null===t||void 0===t?void 0:null===(n=t.current)||void 0===n?void 0:n.scrollWidth))},[t,a]);return s};var ck=lk;var uk=function e(t){var a=Object(r["useRef"])(null);var n=Object(r["useRef"])(null);var i=Object(r["useState"])(t-2),s=Y()(i,2),o=s[0],l=s[1];var c=Object(r["useState"])(1),u=Y()(c,2),d=u[0],p=u[1];var m=Object(r["useState"])(1),h=Y()(m,2),v=h[0],f=h[1];Object(r["useEffect"])(function(){if(!a.current&&!n.current)return;if(!o)return;if(!n.current){p(t);l(0);return}if(!a.current){f(t);l(0);return}var e=dk(a.current);if(e){p(d+1);l(o-1);return}f(v+o);l(0)},[o,d,v,t]);return[d,v,a,n]};function dk(e){if(!e)return false;return(null===e||void 0===e?void 0:e.offsetHeight)<(null===e||void 0===e?void 0:e.scrollHeight)||(null===e||void 0===e?void 0:e.offsetWidth)<(null===e||void 0===e?void 0:e.scrollWidth)}var pk=uk;var mk=a(3479);var hk=new k["b"]("files");var vk={onClick:O["noop"],onPricingLinkClick:O["noop"],onPricingLinkImpression:O["noop"],showJustification:false,justificationText:""};var fk=function e(t){var a=t.file,i=t.onClick,s=t.showJustification,o=t.justificationText,l=t.onPricingLinkClick,c=t.onPricingLinkImpression;var u=a.title||Object(sp["getFileName"])(a);var d=Object(sp["isFileUnknown"])(a);var p=Object(sp["isTombstone"])(a);var m=Object(sp["isNotFound"])(a);var h=Object(sp["isHiddenByStorageLimit"])(a);var v=!d&&!p&&!m;var f=v&&!h;var b=pk(3),g=Y()(b,4),_=g[0],y=g[1],O=g[2],k=g[3];var E=ck(O,_);var C=ck(k,y);var S=E||C;Object(r["useEffect"])(function(){h&&c()},[h,c]);var w=n.a.createElement(mk["a"],{text:u});p?w=hk.t("This file was deleted."):m?w=hk.t("This file was not found."):h&&(w=null);var j=Object(r["useCallback"])(function(e){if(i){e.preventDefault();f&&i()}},[i,f]);var I=function e(){if(!v)return n.a.createElement(Iu["b"],null);if(h)return hk.rt("This file can\u2019t be shown because your workspace has passed the free plan\u2019s 5 GB storage limit. <a>See paid plans</a>",null,function(e){var t=e.text;return n.a.createElement(Pe["a"],{href:Object(Dl["j"])({entryPoint:"file_card"}),target:"_blank",rel:"noreferrer noopenner","data-qa":"pillow-file-header__pricing-link",onClick:l},t)});if(s)return n.a.createElement("span",null,n.a.createElement(X["b"],{type:"sparkles_filled",inline:true,size:"inherit",className:"p-file_card__justification_icon"}),o);return n.a.createElement(Yb["a"],{file:a,useSeparator:true,excludeTime:true})};var T=function e(){var t=h?"div":ak["a"];return n.a.createElement(t,{className:"p-file_card__content",onClick:j,href:h?void 0:a.permalink,"data-show-toolip":S},w&&n.a.createElement("div",{className:"p-file_card__name","data-qa":"file-card-display"},n.a.createElement(Kp["a"],{lines:_,ref:O},w)),n.a.createElement("div",{className:"p-file_card__info","data-qa":"file-card-info"},n.a.createElement(Kp["a"],{lines:w?y:3,ref:k},I())))};return S?n.a.createElement(Br["c"],{tip:function e(){return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",null,w),n.a.createElement("div",{className:"p-file_card__tooltip_info"},I()))}},T()):T()};fk.defaultProps=vk;var bk=fk;var gk={onClick:O["noop"],onPricingLinkClick:O["noop"],onPricingLinkImpression:O["noop"],openViewer:O["noop"],openInspector:O["noop"],featurePjpeg:false,supressAnimations:false,showJustification:false,justificationText:""};var _k=function e(t){var a=t.file,i=t.onClick,s=t.openViewer,o=t.openInspector,l=t.showJustification,c=t.justificationText,u=t.featurePjpeg,d=t.supressAnimations,p=t.onPricingLinkClick,m=t.onPricingLinkImpression;var h=a.id;var v=Object(r["useCallback"])(function(){o({fileId:h})},[h,o]);return n.a.createElement("div",{className:"p-file_card",onClick:i,role:"button",tabIndex:"0"},n.a.createElement(ok,{file:a,openViewer:s,openInspector:o,featurePjpeg:u,supressAnimations:d}),n.a.createElement(bk,{file:a,onClick:v,onPricingLinkClick:p,onPricingLinkImpression:m,showJustification:l,justificationText:c}))};_k.displayName="FileCard";_k.defaultProps=gk;var yk={openViewer:ek["a"],openInspector:vp["c"]};var Ok=Object(y["connect"])(null,yk)(_k);function kk(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function Ek(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?kk(Object(a),true).forEach(function(t){qe()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):kk(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function Ck(e,t,a){if(e)return false;if(!t.query.trim())return false;if(!a)return false;return!Object($O["a"])(a.name)&&!Object($O["a"])(a.title)}function Sk(e,t){var a=t.file;var r=Object(Ey["f"])(e,Sy["h"].FILES),n=r.metadata,s=r.lastRequestData;var o=n[a.id]||{};var l=Object(Ey["e"])(e,Sy["h"].FILES);return{file:Ek({},a,{},o),showJustification:Ck(l,s,n[a.id]),featurePjpeg:Object(i["isFeatureEnabled"])(e,"feature_pjpeg"),supressAnimations:!Object(ai["k"])(e,"a11y_animations")}}var wk={onPricingLinkClick:Ey["a"],onPricingLinkImpression:Ey["b"]};var jk=Object(zb["a"])(Object(y["connect"])(Sk,wk)(Ok));var Ik=jk;var Tk=a(5049);var Ak=new k["b"]("browsers");var Nk={isLoading:false,isZeroState:false,isNoResultsState:false,isFilterPanelOpen:false,query:"",totalCount:0,filterCount:0,sort:"",showLowResultsBanner:false,hasSeenInitialEducation:false,featureDangerouslyGuardIATranslations:false,isIAP1Enabled:false};function Pk(e){var t,a;var i=e.isLoading,s=e.isZeroState,o=e.isNoResultsState,l=e.query,c=e.dispatch,u=e.isFilterPanelOpen,d=e.totalCount,p=e.filterCount,m=e.sort,h=e.showLowResultsBanner,v=e.hasSeenInitialEducation,f=e.featureDangerouslyGuardIATranslations,b=e.isIAP1Enabled,g=e.clogger;var _=Object(r["useCallback"])(function(e){c(Object(Ey["D"])({value:e}))},[c]);var y=Object(r["useCallback"])(function(e){c(Object(Ey["C"])({value:e}))},[c]);var O=Object(r["useCallback"])(function(e){c(Object(Ey["F"])({value:e}))},[c]);var k=function e(){v||c(Object(Io["d"])({pref:Sy["n"].SEEN_INITIAL_FILES_BROWSER_EDUCATION,value:true}))};var E=function e(){k();c(Object(Io["d"])({pref:Sy["n"].DISMISSED_FILES_BROWSER_LOW_RESULTS_EDUCATION,value:true}))};Object(r["useEffect"])(function(){g.track("FILES_PAGE_OPEN",{is_iap1:b})},[b,g]);if(!f)return null;var C=[Sy["l"].NEWEST,Sy["l"].OLDEST,Sy["l"].NAME_ALPHA,Sy["l"].NAME_ALPHA_REVERSE];var S=(t={},qe()(t,Sy["l"].NEWEST,Ak.t("Newest")),qe()(t,Sy["l"].OLDEST,Ak.t("Oldest")),qe()(t,Sy["l"].RELEVANT,Ak.t("Relevance")),qe()(t,Sy["l"].NAME_ALPHA,Ak.t("A to Z")),qe()(t,Sy["l"].NAME_ALPHA_REVERSE,Ak.t("Z to A")),t);var w=(a={},qe()(a,Sy["l"].NEWEST,Ak.t("Newest (by date shared)")),qe()(a,Sy["l"].OLDEST,Ak.t("Oldest (by date shared)")),qe()(a,Sy["l"].RELEVANT,Ak.t("Most relevant")),qe()(a,Sy["l"].NAME_ALPHA,Ak.t("A to Z")),qe()(a,Sy["l"].NAME_ALPHA_REVERSE,Ak.t("Z to A")),a);var j=n.a.createElement("div",{style:{display:"none",pointerEvents:"none"},"aria-hidden":"true"},Ak.t("See and search your team\u2019s files"),Ak.t("Files live in conversations, but you can find them here, too."),Ak.t("To add a file to a conversation, click the paper clip in the message input. You can also drag-and-drop a file from anywhere directly into Slack."));l.trim().length&&C.unshift(Sy["l"].RELEVANT);var I="";I=o?Ak.t("No results"):s?Ak.t("{totalCount} {totalCount, plural, =1 {file} other {files}}",{totalCount:Object(wy["a"])(d)}):Ak.t("{totalCount} {totalCount, plural, =1 {result} other {results}}",{totalCount:Object(wy["a"])(d)});return n.a.createElement(QO,{featureDangerouslyGuardIATranslations:f},n.a.createElement("div",{className:"p-browse_page_layout__container"},n.a.createElement(Ty,{name:"browse-people",id:"browse-people",onChange:_,onReset:function e(){return c(Object(Ey["t"])())},onSearch:function e(){return c(Ey["o"].apply(void 0,arguments))},value:l}),n.a.createElement(PO,{allowSort:!o,isFilterPanelOpen:u,isLoading:i,filterCount:p,resultDisplay:I,sortLabel:Ak.t("Sort: {sort}",{sort:S[m]}),sortOptions:C.map(function(e){return{label:w[e],value:e}}),onFilterReset:function e(){return c(Ey["s"].apply(void 0,arguments))},onFilterToggle:function e(){return c(Ey["x"].apply(void 0,arguments))},onSortSelect:O,featureDangerouslyGuardIATranslations:f}),n.a.createElement(RO,{isFilterPanelOpen:u,renderResults:function e(){return n.a.createElement(wO,{layout:"grid",entity:"files",onPageSelect:y,itemRenderer:function e(t,a){var r=a.key;return n.a.createElement(Ik,{fileId:r,key:r,justificationText:Ak.t("Mentioned in file")})},cellWidth:262,cellHeight:240})},renderFilters:function e(){return n.a.createElement(GO,{showFileFilters:true,namespace:"browse-files"})},renderExtraContent:function e(){return h&&n.a.createElement(ZO,{namespace:"browse-people-no-results",title:Ak.t("See and search your team\u2019s files"),onClose:E,onMarkAsSeen:k},n.a.createElement("p",null,Ak.t("Files live in conversations, but you can find them here, too.")),n.a.createElement("p",null,Ak.t("To add a file to a conversation, click the paper clip in the message input. You can also drag-and-drop a file from anywhere directly into Slack.")))}}),j))}Pk.displayName="BrowseFilesPage";Pk.defaultProps=Nk;var Mk=function e(t){var a=Object(Cy["e"])(t,"files"),r=a.query,n=a.isFilterPanelOpen,i=a.totalCount,s=a.sort,o=a.isLoading,l=a.isBooted;return{isBooted:l,isFilterPanelOpen:n,isLoading:o,isZeroState:Object(Cy["b"])(t,"files"),isNoResultsState:Object(Cy["a"])(t,"files"),query:r,filterCount:Object(Cy["f"])(t,"files"),totalCount:i,sort:s,showLowResultsBanner:Object(Cy["m"])(t),hasSeenInitialEducation:Object(ai["k"])(t,Sy["n"].SEEN_INITIAL_FILES_BROWSER_EDUCATION),featureDangerouslyGuardIATranslations:Object(Hn["e"])(t),isIAP1Enabled:Object(Hn["e"])(t),clogger:Object(C["a"])({state:t})}};var Dk=Object(y["connect"])(Mk)(Pk);var xk=Dk;var Rk=a(1653);var Fk=a(320);var Lk=a(1827);var Uk=a(291);var Bk=a(5088);var qk=new Fk["a"]("inline_member");var Gk={className:void 0,id:void 0,member:void 0,teamId:void 0,avatarSize:158,primaryName:void 0,subtext:void 0,isDisabled:false};function Hk(e){var t=e.className,a=e.id,i=e.member,s=e.teamId,o=e.avatarSize,l=e.primaryName,c=e.subtext,u=e.isDisabled;var d=Object(r["useState"])(1),p=Y()(d,2),m=p[0],h=p[1];var v=Object(r["useState"])(1),f=Y()(v,2),b=f[0],g=f[1];var y=Object(r["useState"])(false),O=Y()(y,2),k=O[0],E=O[1];var C=Object(r["useRef"])();var S=Object(r["useRef"])();var w=Object(Za["getMemberTitle"])(i);var j=Object(Za["isRestricted"])(i);var I=Object(Za["isUltraRestricted"])(i);var A=Object(Za["isExternal"])(i);var N=Object(Za["isDeleted"])(i);var P=Object(Za["isSelf"])(i);var M=(null===i||void 0===i?void 0:i.isNonExistent)||Object(Mc["c"])(a);var D=(null===i||void 0===i?void 0:i.isUnknown)||Object(Mc["d"])(a);var x=A&&s;var R=n.a.createElement(X["b"],{className:"p-browse_page_member_card_entity__guest_badge",type:"presence-ra-offline",inline:true});var F=n.a.createElement("span",{className:"p-browse_page_member_card_entity__name","data-qa":"browse_page_member_card_entity_name"},n.a.createElement("strong",null,D||M?n.a.createElement(Lk["a"],{type:"unknown","data-qa":"browse_page_member_card_entity_missing_name"}):n.a.createElement("span",{className:"p-browse_page_member_card_entity__name_text","data-qa":"browse_page_member_card_entity__name_text"},n.a.createElement(Xp["a"],{emojiSize:nf["a"].SMALL,text:l,noJumbomoji:true,noLinking:true,noSpecials:true,noEmojiText:true,noHexColors:true,noCode:true,noQuotes:true,noHighlights:true})),P&&n.a.createElement("span",{className:"p-browse_page_member_card_entity__indicator","data-qa":"browse_page_member_card_entity__you"},qk.t("(you)")),N&&n.a.createElement("span",{className:"p-browse_page_member_card_entity__indicator","data-qa":"browse_page_member_card_entity__deactivated"},qk.t("(deactivated)")),(j||I)&&n.a.createElement("span",{className:"p-browse_page_member_card_entity__indicator","data-qa":"browse_page_member_card_entity__guest_badge"},R)));var L=n.a.createElement("span",{className:"p-browse_page_member_card_entity__subtext","data-qa":"browse_page_member_card_entity_subtext"},D||M?n.a.createElement(n.a.Fragment,null,n.a.createElement(Iu["b"],{"data-qa":"browse_page_member_card_entity_missing_subtext",size:"medium"}),n.a.createElement(Iu["b"],{"data-qa":"browse_page_member_card_entity_missing_subtext",size:"small"})):c||n.a.createElement(Xp["a"],{text:w,emojiSize:nf["a"].SMALL,noJumbomoji:true,noLinking:true,noSpecials:true,noEmojiText:true,noHexColors:true,noCode:true,noQuotes:true,noHighlights:true}));var U=n.a.createElement("div",{className:"p-browse_page_member_card_entity__tooltip","data-qa":"browse_page_member_card_entity__tooltip"},F,L);var B=n.a.createElement("div",null,n.a.createElement("span",{className:"p-browse_page_member_card_entity__primary"},n.a.createElement(Kp["a"],{lines:m,ref:C},F)),n.a.createElement("span",{className:"p-browse_page_member_card_entity__secondary"},n.a.createElement(Kp["a"],{lines:b,ref:S},L)));var q=n.a.createElement("div",{className:"p-browse_page_member_card_entity__info"},k?n.a.createElement(Br["c"],{tip:U},B):B);var G=n.a.createElement("div",{className:"p-browse_page_member_card_entity__avatar"},n.a.createElement(T["b"],{"data-qa":"browse_page_member_card_entity_avatar",userId:a,size:o,isInteractive:false,showBadge:false}),x&&n.a.createElement(Uk["b"],{className:"p-browse_page_member_card_entity__team_icon","data-qa":"browse_page_member_card_entity_team_icon",id:s,size:28,showTooltip:true}));Object(r["useEffect"])(function(){var e,t;if(!C.current&&!S.current)return;var a=(null===(e=C.current)||void 0===e?void 0:e.offsetHeight)<(null===(t=C.current)||void 0===t?void 0:t.scrollHeight);var r=!!(w||c);var n=r?2:3;var i=1===m&&a?n:m;h(i);var s=Math.max(3-i,1);g(s)},[m,l,c,w]);Object(r["useEffect"])(function(){var e,t,a,r;if(!C.current&&!S.current)return;var n=(null===(e=C.current)||void 0===e?void 0:e.offsetHeight)<(null===(t=C.current)||void 0===t?void 0:t.scrollHeight);var i=(null===(a=S.current)||void 0===a?void 0:a.offsetHeight)<(null===(r=S.current)||void 0===r?void 0:r.scrollHeight);E(n||i)},[m,b,l,w]);var H=_()(t,"p-browse_page_member_card_entity",{"p-browse_page_member_card_entity--dim":u||N});return n.a.createElement("div",{className:H},G,q)}Hk.displayName="BrowsePageMemberCardEntity";Hk.defaultProps=Gk;var Wk=function e(t,a){var r=a.member||Object(M["e"])(t,a.id);return{member:r,teamId:Object(Za["getTeamIdForMember"])(t,r),primaryName:Object(Za["getPrefCompliantMemberName"])(t,r,false,false)}};var Vk=Object(y["connect"])(Wk)(Hk);var Kk=a(4728);var zk=new k["b"]("browsers");var Qk=new k["b"]("member_profile");var Yk={member:void 0,avatarSize:158,lastRequestQuery:"",onMemberSelect:O["noop"],featureDangerouslyGuardIATranslations:false};function Jk(e){var t=e.id,a=e.member,i=e.avatarSize,s=e.lastRequestQuery,o=e.teamCustomProfileFields,l=e.onMemberSelect,c=e.featureDangerouslyGuardIATranslations;var u=Object(r["useCallback"])(function(){l({memberId:t})},[t,l]);var d=!!a.top_terms;var p=Object(Za["getMemberProfileFields"])(a);var m=o.some(function(e){var t;var a=e.name;return Object($O["a"])(null===p||void 0===p?void 0:null===(t=p[a])||void 0===t?void 0:t.value)});if(!c)return null;var h=n.a.createElement("div",{style:{display:"none",pointerEvents:"none"},"aria-hidden":"true"},zk.t("Single-channel guest"),zk.t("Multi-channel guest"));var v;Object(Za["isInvitedUser"])(a)?v=Qk.t("Invited member",{fallbackHash:"c4649618a3f5b67c775775107529f167c8d739e5",fallbackHashNs:"members"}):m?v=n.a.createElement("span",null,n.a.createElement(X["b"],{className:"p-browse_page_member__sparkles",type:"sparkles_filled",inline:true,size:"inherit"}),zk.t("Mentioned in profile")):d&&(v=n.a.createElement("span",null,n.a.createElement(X["b"],{className:"p-browse_page_member__sparkles",type:"sparkles_filled",inline:true,size:"inherit"}),Qk.rt("Talks about \u201c{query}\u201d",{query:n.a.createElement(Xp["a"],{className:"p-browse_page_member__top_terms_term",emojiSize:nf["a"].SMALL,text:s,noJumbomoji:true,noLinking:true,noSpecials:true,noHexColors:true,noCode:true,noQuotes:true,noHighlights:true})})));return n.a.createElement("div",{role:"button",tabIndex:"0",className:"p-browse_page_member",onClick:u},n.a.createElement(Vk,{id:t,member:a,subtext:v,avatarSize:i}),h)}Jk.displayName="BrowsePageMember";Jk.defaultProps=Yk;var Xk=function e(t,a){var r=a.id;var n=Object(Cy["e"])(t,"people"),i=n.lastRequestData,s=n.metadata;var o=Object(M["e"])(t,r);var l=Object(O["merge"])({},o,s[r]);var c=Object(Je["d"])(t);return{member:Object(Za["isUnknownOrNonExistent"])(o)?o:l,lastRequestQuery:i.query,teamCustomProfileFields:Object(Rk["a"])(c),featureDangerouslyGuardIATranslations:Object(Hn["e"])(t)}};var Zk=Object(y["connect"])(Xk)(Jk);var $k=Zk;var eE=a(4989);var tE=function e(t){var a=Object(Ey["f"])(t,"people");var r=a.filters,n=r.accountType,s=r.selectedTeamId,o=r.hideDeactivatedUsers;var l=Object(Ey["k"])(t);var c=Object(Ey["i"])(t);var u=Object(ri["a"])(t);var d=Object(i["getAllLoggedInAccountsNormalized"])(t).filter(function(e){return!!e.enterprise_id&&e.enterprise_id===u});return{accountType:{type:n},hideDeactivatedUsers:o,currentTeam:Object(Je["d"])(t),sharedTeams:{state:l.state,teams:Object(Je["l"])(t,l.teamIds).map(function(e){return{id:e.id,name:Object(ut["getTeamDisplayName"])(e)}})},filters:a.filters.selectedOrgs,filterSuggestions:Object(Je["l"])(t,l.suggestedIds).map(function(e){return e.id}),showEnterpriseOptions:Object(Vp["f"])(t),featureSearchLimitTeamFilter:Object(i["isFeatureEnabled"])(t,"feature_search_limit_team_filter"),loggedInEnterpriseTeams:d.map(function(e){return Object(Je["k"])(t,e.id)}),searchOnlyWorkspaceTeamId:s,selfEnterpriseOrgName:Object(Je["g"])(t),visibleFilterState:Object(Ey["l"])(t),teamProfileState:c,filterWorkspaceOnly:false}};var aE=function e(t){return{setPeopleSearchFilterType:function e(a){var r=a.type;t(Object(Ey["B"])({filter:"accountType",value:r}))},togglePeopleSearchOrgFilter:function e(){return t(Ey["A"].apply(void 0,arguments))},searchOnlyByEnterpriseTeamId:function e(a){var r=a.value;t(Object(Ey["B"])({filter:"selectedTeamId",value:r}))},setPeopleSearchHideDeactivatedUsers:function e(a){var r=a.value;t(Object(Ey["B"])({filter:"hideDeactivatedUsers",value:r}))},peopleSearchCustomFilterChanged:function e(){return t(Ey["z"].apply(void 0,arguments))},onMount:function e(){return t(Ey["n"].apply(void 0,arguments))}}};var rE=Object(y["connect"])(tE,aE)(eE["a"]);var nE=a(4238);var iE=a(777);var sE=a(4837);function oE(e){var t=e.tabs,a=e.defaultTabId,i=e.dispatch;var s=Object(r["useCallback"])(function(e){i(Object(nE["a"])({entity:e}))},[i]);var o=t.map(function(e){return Object(O["merge"])({},e,{isExternalLink:true,onClick:s})});return n.a.createElement(iE["a"],{className:"p-browse_page_tabs",tabs:o,defaultTabId:a})}oE.displayName="ConnectedBrowsePageTabs";var lE=Object(y["connect"])()(oE);var cE=new k["b"]("browsers");var uE={isZeroState:false,isNoResultsState:false,isLoading:false,isFilterPanelOpen:false,filterCount:0,totalCount:0,query:"",sort:"",featureDangerouslyGuardIATranslations:false,showLowResultsBanner:false,hasSeenInitialEducation:false,showUserGroups:false};function dE(e){var t,a;var i=e.isLoading,s=e.isZeroState,o=e.isNoResultsState,l=e.query,c=e.dispatch,u=e.isFilterPanelOpen,d=e.filterCount,p=e.totalCount,m=e.sort,h=e.featureDangerouslyGuardIATranslations,v=e.showLowResultsBanner,f=e.hasSeenInitialEducation,b=e.showUserGroups;var g=Object(r["useCallback"])(function(e){c(Object(Ey["D"])({value:e}))},[c]);var _=Object(r["useCallback"])(function(e){c(Object(Ey["F"])({value:e}))},[c]);var y=Object(r["useCallback"])(function(e){c(Object(Ey["C"])({value:e}))},[c]);var O=Object(r["useCallback"])(function(e){var t=e.memberId;c(Object(vp["k"])({memberId:t}))},[c]);var k=function e(){f||c(Object(Io["d"])({pref:Sy["n"].SEEN_INITIAL_PEOPLE_BROWSER_EDUCATION,value:true}))};var E=function e(){k();c(Object(Io["d"])({pref:Sy["n"].DISMISSED_PEOPLE_BROWSER_LOW_RESULTS_EDUCATION,value:true}))};if(!h)return null;var C=[Sy["m"].NAME_ALPHA,Sy["m"].NAME_ALPHA_REVERSE];var S=(t={},qe()(t,Sy["m"].NAME_ALPHA,cE.t("A to Z")),qe()(t,Sy["m"].NAME_ALPHA_REVERSE,cE.t("Z to A")),qe()(t,Sy["m"].RELEVANT,cE.t("Relevance")),t);var w=(a={},qe()(a,Sy["m"].NAME_ALPHA,cE.t("A to Z")),qe()(a,Sy["m"].NAME_ALPHA_REVERSE,cE.t("Z to A")),qe()(a,Sy["m"].RELEVANT,cE.t("Most relevant")),a);l.trim().length&&C.unshift(Sy["m"].RELEVANT);var j=n.a.createElement("div",{style:{display:"none",pointerEvents:"none"},"aria-hidden":"true"},cE.t("Invite your team to Slack"),cE.t("Bring your team members into Slack to start working better together. Send invites via email, or get a handy link to share."),cE.t("No results"),cE.t("You might want to try using different keywords, checking for typos or adjusting your filters."),cE.t("Organize your team"),cE.t("User groups let you mention departments or project teams all at once, by bundling them into a group."));var I="";I=o?cE.t("No results"):s?cE.t("{totalCount} {totalCount, plural, =1 {member} other {members}}",{totalCount:Object(wy["a"])(p)}):cE.t("{totalCount} {totalCount, plural, =1 {result} other {results}}",{totalCount:Object(wy["a"])(p)});var T=[{title:"Members",id:"people"}];b&&T.push({title:"User groups",id:"user-groups"});return n.a.createElement(QO,{featureDangerouslyGuardIATranslations:h},n.a.createElement(lE,{tabs:T,defaultTabId:"people"}),n.a.createElement("div",{className:"p-browse_page_layout__container"},n.a.createElement(Ty,{name:"browse-people",id:"browse-people",onChange:g,onReset:function e(){return c(Object(Ey["t"])())},onSearch:function e(){return c(Ey["o"].apply(void 0,arguments))},value:l}),n.a.createElement(PO,{allowSort:!o,isFilterPanelOpen:u,isLoading:i,filterCount:d,resultDisplay:I,sortLabel:cE.t("Sort: {sort}",{sort:S[m]}),sortOptions:C.map(function(e){return{label:w[e],value:e}}),onFilterReset:function e(){return c(Ey["s"].apply(void 0,arguments))},onFilterToggle:function e(){return c(Ey["x"].apply(void 0,arguments))},onSortSelect:_,featureDangerouslyGuardIATranslations:h}),n.a.createElement(RO,{isFilterPanelOpen:u,renderResults:function e(){return n.a.createElement(wO,{layout:"grid",entity:"people",onPageSelect:y,itemRenderer:function e(t,a){var r=a.key;return n.a.createElement($k,{id:r,key:r,avatarSize:158,onMemberSelect:O})},cellWidth:166,cellHeight:250,minColumns:2})},renderFilters:function e(){return n.a.createElement(rE,{namespace:"people-browser"})},renderExtraContent:function e(){return v&&n.a.createElement(ZO,{namespace:"browse-people-no-results",title:cE.t("Invite your team to Slack"),onClose:E,onMarkAsSeen:k},n.a.createElement("p",null,cE.t("Bring your team members into Slack to start working better together. Send invites via email, or get a handy link to share.")))}}),j))}dE.displayName="BrowsePeoplePage";dE.defaultProps=uE;var pE=function e(t){var a=Object(Cy["e"])(t,Sy["h"].PEOPLE),r=a.query,n=a.isLoading,i=a.totalCount,s=a.sort,o=a.isFilterPanelOpen;return{isZeroState:Object(Cy["b"])(t,Sy["h"].PEOPLE),isNoResultsState:Object(Cy["a"])(t,Sy["h"].PEOPLE),query:r,filterCount:Object(Cy["f"])(t,Sy["h"].PEOPLE),isLoading:n,totalCount:i,sort:s,isFilterPanelOpen:o,featureDangerouslyGuardIATranslations:Object(Hn["e"])(t),showLowResultsBanner:Object(Cy["n"])(t),hasSeenInitialEducation:Object(ai["k"])(t,Sy["n"].SEEN_INITIAL_PEOPLE_BROWSER_EDUCATION),showUserGroups:!Object(Za["isRestricted"])(Object(M["b"])(t))&&Object(ut["isPaidTeam"])(Object(Je["d"])(t))}};var mE=Object(y["connect"])(pE)(dE);var hE=mE;var vE=a(1955);var fE=a(118);var bE=a(1136);var gE=a(2745);var _E=a(1444);var yE=a(2947);var OE=new k["b"]("search");var kE={justification:null,memberCount:void 0};var EE=function e(t){return t.reduce(function(t,a){var r=["bold","italic","strike","code","pre","quote","long_quote_prefix"];if(r.includes(a.type))return[].concat(Da()(t),Da()(e(a.contents)));if(Object(yE["a"])(a))return[].concat(Da()(t),[{text:" "}]);return[].concat(Da()(t),[a])},[])};function CE(e){var t=e.channel,a=e.justification,i=e.memberCount;var s=Object(r["useState"])(false),o=Y()(s,2),l=o[0],c=o[1];var u=Object(r["useState"])(0),d=Y()(u,2),p=d[0],m=d[1];var h=Dy(p,500);var v=Object(Gt["getPurpose"])(t);var f="\xa0\xa0\xb7\xa0\xa0";var b=i>=0;var g=!a&&v&&!Object(Gt["isUnknown"])(t);var _=g||a;var y=Object(r["useRef"])();var O=n.a.createElement("span",{className:"p-browse_page_channel__subtext__contents","data-qa":"browse_page_channel_subtext_contents",ref:y},b&&n.a.createElement("span",{className:"c-medium_channel_entity__member_count","data-qa":"browse_page_channel_member_count"},OE.t("{count, plural, =1 {# member} other {# members}}",{count:i})),_&&f,a&&n.a.createElement("span",{"data-qa":"browse_page_channel_justification"},n.a.createElement(X["b"],{type:"sparkles-filled",size:"inherit",className:"p-browse_page_channel__justification_icon"})," ",n.a.createElement(Xp["a"],{className:"p-browse_page_channel__justification",text:a,emojiSize:nf["a"].MEDIUM,showTooltips:false,noHighlights:true})),g&&n.a.createElement(Xp["a"],{className:"p-browse_page_channel__purpose","data-qa":"browse_page_channel_purpose",text:v,emojiSize:nf["a"].SMALL,customContentHandler:EE,noJumbomoji:true,noHexColors:true,noCode:true,noQuotes:true}));Object(r["useEffect"])(function(){if(!y.current)return;if(h){var e=h<y.current.scrollWidth;c(e)}},[h]);return n.a.createElement(Cc["a"],null,function(e){var t=e.width,a=e.measureRef;m(t);return n.a.createElement("div",{className:"p-browse_page_channel__subtext",ref:a},l?n.a.createElement(Br["c"],{tip:n.a.createElement(Xp["a"],{className:"p-browse_page_channel__purpose--tooltip","data-qa":"browse_page_channel__purpose--tooltip",text:v,emojiSize:nf["a"].SMALL,noJumbomoji:true,noQuotes:true,noLinking:true,showTooltips:false}),position:"top"},O):O)})}CE.displayName="BrowsePageChannelSubtext";CE.defaultProps=kE;var SE=CE;var wE=a(4684);var jE=a(4681);var IE=a(4682);var TE={connectedTeamIds:[],isDisconnected:false,onStopSharingChannel:O["noop"],pendingAndConnectedTeamIds:[]};function AE(e){var t=e.channel,a=e.connectedTeamIds,r=e.currentTeamId,i=e.isDisconnected,s=e.onStopSharingChannel,o=e.pendingAndConnectedTeamIds;if(a.length>0)return n.a.createElement("div",{className:"p-browse_page_channel__connected_info","data-qa":"browse_page_channel_connected_info"},n.a.createElement(IE["a"],{channel:t,className:"p-browse_page_channel__context_bar",connectedTeamIds:a,teamId:r}),n.a.createElement(wE["a"],{channel:t,isDisconnected:i,onStopSharingChannel:s}));if(o.length>0)return n.a.createElement("div",{className:"p-browse_page_channel__connected_info","data-qa":"browse_page_channel_pending_info"},n.a.createElement(jE["a"],{channel:t,className:"p-browse_page_channel__context_bar",connectedTeamIds:o}));return null}AE.defaultProps=TE;var NE=function e(t,a){var r=a.channel;var n=Object(Gt["getConnectedTeamIds"])(t,r);var i=Object(Gt["getPendingAndConnectedTeamIds"])(t,r);return{connectedTeamIds:n,currentTeamId:Object(ri["b"])(t),pendingAndConnectedTeamIds:i}};var PE=Object(y["connect"])(NE)(AE);var ME=a(2003);function DE(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function xE(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?DE(Object(a),true).forEach(function(t){qe()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):DE(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var RE={id:"",teamId:void 0,channel:null,channelDisplayName:"",memberCount:void 0,justification:null,previousName:void 0,isDisconnected:false,onChannelSelect:O["noop"],onChannelDisconnect:O["noop"],onChannelDisconnectNotConfirmed:O["noop"]};function FE(e){var t;var a=e.id,r=e.teamId,i=e.channel,s=e.channelDisplayName,o=e.memberCount,l=e.justification,c=e.previousName,u=e.isDisconnected,d=e.onChannelSelect,p=e.onChannelDisconnect,m=e.onChannelDisconnectNotConfirmed,h=e.dispatch;var v=function e(t){t.preventDefault();if(u)return;d({channel:i,channelName:s,teamId:r,channelId:a,isMember:Object(Gt["isMemberOfChannel"])(i)})};var f=function e(t){t.stopPropagation();h(Object(gE["a"])({channel:i,onConfirm:function e(){return p({channelId:a})},onNotConfirm:function e(){return m()}}))};var b=c&&-1===(null===i||void 0===i?void 0:null===(t=i.name)||void 0===t?void 0:t.indexOf("\ue000"));return n.a.createElement("div",{className:_()("p-browse_page_channel",{"p-browse_page_channel--disconnected":u}),onClick:v,role:"presentation","data-qa":"browse_page_channel"},n.a.createElement(_E["a"],{className:"p-browse_page_channel__entity",channel:i,showPurpose:false,showTeamName:false,bestFormerName:c,displayFormerNames:b,useFilledIcon:true,metadata:n.a.createElement(n.a.Fragment,null,n.a.createElement(SE,{justification:l,memberCount:o,channel:i}),n.a.createElement(PE,{channel:i,onStopSharingChannel:f,isDisconnected:u}))}))}FE.displayName="BrowsePageChannel";FE.defaultProps=RE;var LE=function e(t,a){var r=a.id;var n=Object(Cy["e"])(t,"channels"),i=n.metadata;var s=Object(He["e"])(t,r);var o=i[r]||{};var l=xE({},s,{name:o.name,purpose:o.purpose});var c;Object(Gt["isFromAnotherTeam"])(s)&&(c=Object(Gt["teamIdForChannelFromAnotherTeam"])(t,s));return{channel:Object(Gt["isUnknownOrNonExistent"])(s)?s:l,channelDisplayName:Object(Gt["getDisplayNameForChannel"])(t,s),memberCount:o.member_count,justification:o.justification,previousName:o.previous_name,teamId:c}};var UE=Object(y["connect"])(LE)(FE);var BE=new k["b"]("search");var qE=function(e){b()(t,e);function t(e){var a;c()(this,t);a=m()(this,v()(t).call(this,e));a.state={hasError:false};return a}d()(t,[{key:"componentDidCatch",value:function e(){this.setState(function(){return{hasError:true}})}},{key:"render",value:function e(){if(this.state.hasError)return n.a.createElement("div",{className:"p-browse_page_channel p-browse_page_channel--error"},n.a.createElement("div",null,n.a.createElement(bE["a"],{type:"unknown"})),n.a.createElement("p",null,BE.t("For some reason, Slack wasn\u2019t able to fetch info about this channel.")));return n.a.createElement(UE,this.props)}}]);return t}(r["Component"]);qE.displayName="ProtectedBrowsePageChannel";var GE=qE;var HE=a(2801);var WE=function e(t){var a=Object(ri["a"])(t);var r=Object(Je["d"])(t);var n=Object(Ey["f"])(t,"channels");var s=n.filters,o=s.channelType,l=s.selectedTeamId,c=s.hideMemberChannels;var u=Object(Ey["k"])(t);var d=Object(i["getAllLoggedInAccountsNormalized"])(t).filter(function(e){return!!e.enterprise_id&&e.enterprise_id===a});return{channelType:o,filters:n.filters.selectedOrgs,filterSuggestions:Object(Je["l"])(t,u.suggestedIds).map(function(e){return e.id}),currentTeam:r,showEnterpriseOptions:Object(Vp["f"])(t),sharedTeams:{state:u.state,teams:Object(Je["l"])(t,u.teamIds).map(function(e){return{id:e.id,name:Object(ut["getTeamDisplayName"])(e)}})},loggedInEnterpriseTeams:d.map(function(e){return Object(Je["k"])(t,e.id)}),featureSearchLimitTeamFilter:Object(i["isFeatureEnabled"])(t,"feature_search_limit_team_filter"),selfEnterpriseOrgName:Object(Je["g"])(t),searchOnlyWorkspaceTeamId:l,hideMemberChannels:c,filterWorkspaceOnly:false}};var VE=function e(t){return{setType:function e(a){var r=a.type;t(Object(Ey["B"])({filter:"channelType",value:r}))},onMount:function e(){return t(Ey["m"].apply(void 0,arguments))},toggleChannelSearchOrgFilter:function e(){return t(Ey["A"].apply(void 0,arguments))},setChannelSearchHideMemberChannels:function e(a){var r=a.value;t(Object(Ey["B"])({filter:"hideMemberChannels",value:r}))},searchOnlyByEnterpriseTeamId:function e(a){var r=a.value;t(Object(Ey["B"])({filter:"selectedTeamId",value:r}))}}};var KE=Object(y["connect"])(WE,VE)(HE["a"]);var zE=a(188);var QE=new k["b"]("channel_browser");var YE={canSeeManageSharedChannelsModal:false,externalTeamCount:0,onOpenManageSharedChannelsModal:O["noop"],loadingState:void 0};function JE(e){var t=e.canSeeManageSharedChannelsModal,a=e.externalTeamCount,r=e.onOpenManageSharedChannelsModal,i=e.loadingState;if(!t)return null;return n.a.createElement("div",{className:"p-browse_channels_page__alert","data-qa":"browse-channels-page-connected-workspaces-alert"},"loading"===i?n.a.createElement(Qt["a"],{size:"small"}):n.a.createElement(zE["d"],{type:"boxed",level:"info"},QE.rt("Your organization is currently sharing channels with {externalTeamCount, plural, =1{# other} other{# others}}. <a>Manage shared channels</a>",{externalTeamCount:a},function(e){var t=e.key,a=e.text;return n.a.createElement(mr["a"],{key:t,onClick:r},a)})))}JE.displayName="ManageSharedChannelsAlert";JE.defaultProps=YE;var XE=function e(t){var a=Object(Ey["k"])(t),r=a.teamIds,n=a.state;return{canSeeManageSharedChannelsModal:Object(vc["V"])(t),externalTeamCount:r.length,loadingState:n}};var ZE=Object(y["connect"])(XE)(JE);var $E=a(5224);function eC(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function tC(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?eC(Object(a),true).forEach(function(t){qe()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):eC(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var aC=new k["b"]("browsers");var rC={isZeroState:false,isLoading:false,isNoResultsState:false,query:"",sort:"",totalCount:0,featureDangerouslyGuardIATranslations:false,isFilterPanelOpen:false,filterCount:0,selectedTeamId:"",selectedOrgs:[],channelType:"",showLowResultsBanner:false,hasSeenInitialEducation:false};function nC(e){var t,a;var i=e.isZeroState,s=e.isLoading,o=e.isNoResultsState,l=e.query,c=e.sort,u=e.totalCount,d=e.isFilterPanelOpen,p=e.filterCount,m=e.selectedOrgs,h=e.selectedTeamId,v=e.channelType,f=e.dispatch,b=e.featureDangerouslyGuardIATranslations,g=e.showLowResultsBanner,_=e.hasSeenInitialEducation;var y=Object(Ic["a"])();var k=Object(r["useState"])({}),E=Y()(k,2),C=E[0],S=E[1];var w=Object(r["useCallback"])(function(e){f(Object(Ey["D"])({value:e}))},[f]);var j=Object(r["useCallback"])(function(e){f(Object(Ey["F"])({value:e}))},[f]);var I=Object(r["useCallback"])(function(e){var t=e.channelId;f(Object(vp["f"])({channelId:t,sectionId:"info"}))},[f]);var T=Object(r["useCallback"])(function(e){f(Object(Ey["C"])({value:e}))},[f]);var A=Object(r["useCallback"])(function(e){var t=e.channelId;f(Object(fE["e"])({channelId:t,reason:"browse-channels-page"}));S(tC({},C,qe()({},t,true)));y.track("SHARED_CHANNELS_STOP_SHARING_ACTION",{context:{ui_context:{action:"click",ui_element:"SHARED_CHANNELS_STOP_SHARING_CONFIRM_SUBMIT_BTN",ui_component:"BROWSE_CHANNELS_PAGE"}}})},[y,C,f]);var N=Object(r["useCallback"])(function(){y.track("SHARED_CHANNELS_STOP_SHARING_ACTION",{context:{ui_context:{action:"click",ui_element:"SHARED_CHANNELS_STOP_SHARING_CONFIRM_CANCEL_BTN",ui_component:"BROWSE_CHANNELS_PAGE"}}})},[y]);var P=Object(r["useCallback"])(function(){f(Object(vE["a"])({showOpenTransition:false,referringUiElement:"SHARED_CHANNELS_BROWSE_CHANNELS_PAGE_MANAGE_SHARED_CHANNELS_BTN",onBack:O["noop"]}))},[f]);var M=function e(){_||f(Object(Io["d"])({pref:Sy["n"].SEEN_INITIAL_CHANNEL_BROWSER_EDUCATION,value:true}))};var D=function e(){M();f(Object(Io["d"])({pref:Sy["n"].DISMISSED_CHANNEL_BROWSER_LOW_RESULTS_EDUCATION,value:true}))};if(!b)return null;var x=(t={},qe()(t,Sy["d"].NAME_ALPHA,aC.t("A to Z")),qe()(t,Sy["d"].NAME_ALPHA_REVERSE,aC.t("Z to A")),qe()(t,Sy["d"].CREATED_NEW,aC.t("Newest Channel")),qe()(t,Sy["d"].CREATED_OLD,aC.t("Oldest Channel")),qe()(t,Sy["d"].MEMBERS_MOST,aC.t("Most members")),qe()(t,Sy["d"].MEMBERS_LEAST,aC.t("Fewest Members")),qe()(t,Sy["d"].RELEVANT,aC.t("Relevance")),t);var R=(a={},qe()(a,Sy["d"].NAME_ALPHA,aC.t("A to Z")),qe()(a,Sy["d"].NAME_ALPHA_REVERSE,aC.t("Z to A")),qe()(a,Sy["d"].CREATED_NEW,aC.t("Newest Channel")),qe()(a,Sy["d"].CREATED_OLD,aC.t("Oldest Channel")),qe()(a,Sy["d"].MEMBERS_MOST,aC.t("Most members")),qe()(a,Sy["d"].MEMBERS_LEAST,aC.t("Fewest Members")),qe()(a,Sy["d"].RELEVANT,aC.t("Most relevant")),a);var F=[Sy["d"].CREATED_NEW,Sy["d"].CREATED_OLD,Sy["d"].MEMBERS_MOST,Sy["d"].MEMBERS_LEAST,Sy["d"].NAME_ALPHA,Sy["d"].NAME_ALPHA_REVERSE];l.trim().length&&F.unshift(Sy["d"].RELEVANT);var L=Object(Gg["a"])(h)||Object(Gg["b"])(h)||"shared"===v||m.length>0;var U="";U=o?aC.t("No results"):i?aC.t("{totalCount} {totalCount, plural, =1 {channel} other {channels}}",{totalCount:Object(wy["a"])(u)}):aC.t("{totalCount} {totalCount, plural, =1 {result} other {results}}",{totalCount:Object(wy["a"])(u)});return n.a.createElement(QO,{featureDangerouslyGuardIATranslations:b},n.a.createElement("div",{className:"p-browse_page_layout__container"},n.a.createElement(Ty,{name:"browse-channels",id:"browse-channels",onChange:w,onReset:function e(){return f(Object(Ey["t"])())},onSearch:function e(){return f(Ey["o"].apply(void 0,arguments))},value:l}),L&&n.a.createElement(ZE,{onOpenManageSharedChannelsModal:P}),n.a.createElement(PO,{allowSort:!o,isFilterPanelOpen:d,isLoading:s,filterCount:p,resultDisplay:U,sortLabel:aC.t("Sort: {sort}",{sort:x[c]}),sortOptions:F.map(function(e){return{label:R[e],value:e}}),onFilterReset:function e(){return f(Ey["s"].apply(void 0,arguments))},onFilterToggle:function e(){return f(Ey["x"].apply(void 0,arguments))},onSortSelect:j,featureDangerouslyGuardIATranslations:b}),n.a.createElement(RO,{isFilterPanelOpen:d,renderResults:function e(){return n.a.createElement(wO,{layout:"list",entity:"channels",onPageSelect:T,itemRenderer:function e(t,a){var r=a.key;return n.a.createElement(GE,{id:r,key:r,isDisconnected:C[r],onChannelSelect:I,onChannelDisconnect:A,onChannelDisconnectNotConfirmed:N})}})},renderFilters:function e(){return n.a.createElement(KE,{namespace:"channel-browser"})},renderExtraContent:function e(){return g&&n.a.createElement(ZO,{namespace:"browse-channels-low-results",title:aC.t("Organize your team's conversations"),onClose:D,onMarkAsSeen:M},n.a.createElement("p",null,aC.t("Channels are where your team members communicate. They give each project, group, or initiative a space for its own messages, files, and tools.")))}})))}nC.displayName="BrowseChannelsPage";nC.defaultProps=rC;var iC=function e(t){var a=Object(Cy["e"])(t,"channels"),r=a.query,n=a.isLoading,i=a.totalCount,s=a.sort,o=a.isFilterPanelOpen,l=a.filters,c=a.isBooted;var u=l.selectedTeamId,d=l.selectedOrgs,p=l.channelType;return{isBooted:c,isZeroState:Object(Cy["b"])(t,"channels"),isNoResultsState:Object(Cy["a"])(t,"channels"),isFilterPanelOpen:o,isLoading:n,query:r,filterCount:Object(Cy["f"])(t,"channels"),totalCount:i,sort:s,selectedTeamId:u,selectedOrgs:d,channelType:p,featureDangerouslyGuardIATranslations:Object(Hn["e"])(t),showLowResultsBanner:Object(Cy["l"])(t),hasSeenInitialEducation:Object(ai["k"])(t,Sy["n"].SEEN_INITIAL_CHANNEL_BROWSER_EDUCATION)}};var sC=Object(y["connect"])(iC)(nC);var oC=sC;var lC=a(5124);var cC=a(5093);var uC=new k["b"]("browsers");var dC=new k["b"]("search");var pC={featureDangerouslyGuardIATranslations:false,query:"",totalCount:0,isLoading:false,isNoResultsState:false,isZeroState:false,itemIds:[],error:Dn["default"].string,isFilterPanelOpen:false,hideDeactivatedUserGroups:false,filterCount:0,showLowResultsBanner:false,hasSeenInitialEducation:false};var mC=new vd["a"]({DEFAULT_HEIGHT:90});var hC=new xi["a"]({heightCache:mC});var vC="loading-key";function fC(e){var t=e.featureDangerouslyGuardIATranslations,a=e.dispatch,i=e.query,s=e.isLoading,o=e.totalCount,l=e.isNoResultsState,c=e.isZeroState,u=e.itemIds,d=e.error,p=e.isFilterPanelOpen,m=e.hideDeactivatedUserGroups,h=e.filterCount,v=e.showLowResultsBanner,f=e.hasSeenInitialEducation;var b=Da()(u);var g=Object(r["useRef"])(hC);var y=Object(r["useRef"])(null);var O=Object(r["useCallback"])(function(e){a(Object(Ey["D"])({value:e}))},[a]);var k=!o&&!s&&c;s&&b.push(vC);if(!t)return null;var E=function e(t){var a=b[t];if(!a)return null;if(a===vC)return n.a.createElement("div",{className:"p-browse_user_groups_page_row__loader"},n.a.createElement(Qt["a"],{size:"large"}));return n.a.createElement(lC["a"],{className:_()("p-browse_user_groups_page_row",0===t&&"p-browse_user_groups_page_row__top"),id:u[t],isIAPhase1Enabled:true})};var C=function e(t){a(Object(Ey["B"])({filter:"hideDeactivatedUserGroups",value:t.target.checked}))};var S=function e(t){var r=t.id;a(Object(vp["o"])({groupId:r}))};var w=function e(){f||a(Object(Io["d"])({pref:Sy["n"].SEEN_INITIAL_USER_GROUPS_BROWSER_EDUCATION,value:true}))};var j=function e(){w();a(Object(Io["d"])({pref:Sy["n"].DISMISSED_USER_GROUPS_BROWSER_LOW_RESULTS_EDUCATION,value:true}))};var I="";I=l?uC.t("No results"):c?uC.t("{totalCount} {totalCount, plural, =1 {user group} other {user groups}}",{totalCount:Object(wy["a"])(o)}):uC.t("{totalCount} {totalCount, plural, =1 {result} other {results}}",{totalCount:Object(wy["a"])(o)});var T=function e(){if(y.current)return false;if(!o||u.length>=o)return false;y.current=a(Object(Ey["j"])());return y.current.finally(function(){y.current=null})};var A=function e(){if(d!==Sy["i"].NONE)return n.a.createElement("div",{className:"p-browse_page_results__error"},n.a.createElement("p",null,dC.t("Something went wrong")),n.a.createElement("p",null,dC.t("For some reason, Slack wasn\u2019t able to complete your search."),"\xa0",n.a.createElement(Pe["a"],{onClick:function e(){return a(Object(Ey["j"])())}},dC.t("Try again"))));if(k)return n.a.createElement("div",{className:"p-browse_page_results__empty"},n.a.createElement("img",{srcSet:"/img/browsers/user-groups-empty.png, /img/browsers/user-groups-empty@2x.png 2x",src:"/img/browsers/user-groups-empty.png",alt:""}),n.a.createElement("h3",null,uC.t("Organize your team")),n.a.createElement("br",null),n.a.createElement("p",null,uC.t("User groups let you mention departments or project teams all at once, by bundling them into a group.")));if(!o&&!s&&!c)return n.a.createElement("div",{className:"p-browse_page_results__empty"},n.a.createElement("p",null,uC.t("No results")),n.a.createElement("p",null,uC.t("You might want to try using different keywords, checking for typos or adjusting your filters.")));return n.a.createElement(Py["a"],null,function(e){var t=e.width,a=e.height;return n.a.createElement(Uc["a"],{width:t,height:a,keys:b,rowRenderer:E,layout:g.current,loadPost:T,loadAround:T,onItemClick:S})})};var N=function e(){return n.a.createElement("div",null,n.a.createElement("label",{className:"p-search_filter__checkbox_label",htmlFor:"browse-user-groups-filter-hide-deactivated"},n.a.createElement("input",{type:"checkbox",checked:m,onChange:C,id:"browse-user-groups-filter-hide-deactivated"}),uC.t("Hide deactivated user groups")))};var P=function e(){if(!v||k)return null;return n.a.createElement(ZO,{namespace:"browse-user-group-no-results",title:uC.t("Organize your team"),onClose:j,onMarkAsSeen:w},n.a.createElement("p",null,uC.t("User groups let you mention departments or project teams all at once, by bundling them into a group.")))};return n.a.createElement(QO,{featureDangerouslyGuardIATranslations:t},n.a.createElement(lE,{tabs:[{title:"Members",id:"people"},{title:"User groups",id:"user-groups"}],defaultTabId:"user-groups"}),n.a.createElement("div",{className:"p-browse_page_layout__container p-browse_user_groups_page"},n.a.createElement(Ty,{name:"browse-user-groups",id:"browse-user-groups-input",onChange:O,onReset:function e(){return a(Object(Ey["t"])())},onSearch:function e(){return a(Ey["o"].apply(void 0,arguments))},value:i}),n.a.createElement(PO,{isLoading:s&&0===o,isFilterPanelOpen:p,filterCount:h,allowSort:false,resultDisplay:I,onFilterReset:function e(){return a(Ey["s"].apply(void 0,arguments))},onFilterToggle:function e(){return a(Ey["x"].apply(void 0,arguments))},featureDangerouslyGuardIATranslations:t}),n.a.createElement(RO,{isFilterPanelOpen:p,renderResults:A,renderFilters:N,renderExtraContent:P})))}fC.displayName="BrowseUserGroupsPage";fC.defaultProps=pC;var bC=function e(t){var a=Object(Ey["f"])(t,Sy["h"].USER_GROUPS),r=a.query,n=a.isLoading,i=a.totalCount,s=a.results,o=a.page,l=a.error,c=a.isFilterPanelOpen,u=a.filters;return{featureDangerouslyGuardIATranslations:Object(Hn["e"])(t),isZeroState:Object(Ey["e"])(t,Sy["h"].USER_GROUPS),isNoResultsState:Object(Ey["d"])(t,Sy["h"].USER_GROUPS),filterCount:Object(Ey["g"])(t,Sy["h"].USER_GROUPS),query:r,isLoading:n,totalCount:i,itemIds:s[o],error:l,isFilterPanelOpen:c,hideDeactivatedUserGroups:u.hideDeactivatedUserGroups,showLowResultsBanner:Object(Ey["v"])(t),hasSeenInitialEducation:Object(ai["k"])(t,Sy["n"].SEEN_INITIAL_USER_GROUPS_BROWSER_EDUCATION)}};var gC=Object(y["connect"])(bC)(fC);var _C=gC;var yC=a(2762);var OC=a(325);var kC=a(4833);var EC=a.n(kC);var CC=a(4841);var SC=a.n(CC);var wC=a(4871);var jC=a.n(wC);var IC=a(4891);var TC=a.n(IC);var AC=a(4918);var NC=a.n(AC);var PC=a(4929);var MC=a.n(PC);var DC=a(4992);var xC=a.n(DC);var RC=a(4932);var FC=a.n(RC);var LC=a(4933);var UC=a.n(LC);var BC=a(4934);var qC=a.n(BC);var GC=a(4935);var HC=a.n(GC);var WC=a(4936);var VC=a.n(WC);var KC=a(4937);var zC=a.n(KC);var QC=a(4938);var YC=a.n(QC);var JC=a(4939);var XC=a.n(JC);var ZC=a(4940);var $C=a.n(ZC);var eS=new k["b"]("paid_onboarding");var tS={SHARE_CHANNEL:"share_channel",INVITE_GUESTS:"invite_guests",SEARCH:"search",CONNECT_APP:"connect_app",START_GROUP_CALL:"start_group_call",RETENTION_SETTINGS:"retention_settings",SIGNIN_SETTINGS:"signin_settings",CREATE_USER_GROUP:"create_user_group"};var aS={title:Dn["default"].string.isRequired,description:Dn["default"].string.isRequired,images:Dn["default"].arrayOf(Dn["default"].string).isRequired,ctaTitle:Dn["default"].string.isRequired,ctaAction:Dn["default"].string.isRequired,ctaURL:Dn["default"].string.isRequired,name:Dn["default"].string.isRequired};var rS={guests:[EC.a,SC.a],sharedChannels:[jC.a,TC.a],msgHistory:[NC.a,MC.a],storage:[xC.a,FC.a],apps:[UC.a,qC.a],calls:[HC.a,VC.a],gSuite:[zC.a,YC.a],userGroups:[XC.a,$C.a]};var nS=function e(){var t=Object(en["a"])();return{guests:{title:eS.t("Bring contractors directly into your workspace"),description:eS.t("Guest accounts let you use Slack with people outside your company, in just the channels you choose."),images:rS.guests,ctaTitle:"",ctaAction:tS.INVITE_GUESTS,ctaURL:Object(OC["a"])({articleId:"202518103",zdLocale:t}),name:"invite_guests"},sharedChannels:{title:eS.t("Collaborate securely with external organizations"),description:eS.t("Shared channels let you work with clients or partner teams."),images:rS.sharedChannels,ctaTitle:"",ctaAction:tS.SHARE_CHANNEL,ctaURL:Object(OC["a"])({articleId:"115004151203",zdLocale:t}),name:"shared_channels"},msgHistory:{title:eS.t("Find the information you need, when you need it"),description:eS.t("An unlimited message archive lets you view and search all of your team\u2019s public messages."),images:rS.msgHistory,ctaTitle:"",ctaAction:tS.SEARCH,ctaURL:Object(OC["a"])({articleId:"202528808-Search-in-Slack-",zdLocale:t}),name:"message_history"},storage:{title:eS.t("Choose how long your team\u2019s data is stored"),description:eS.t("Custom retention settings give you complete control over how long files and messages are stored in Slack."),images:rS.storage,ctaTitle:"",ctaAction:tS.RETENTION_SETTINGS,ctaURL:Object(OC["a"])({articleId:"203457187",zdLocale:t}),name:"data_storage"},apps:{title:eS.t("Connect all your apps and tools to Slack"),description:eS.t("Schedule meetings, file tickets, and more, all without leaving Slack."),images:rS.apps,ctaTitle:"",ctaAction:tS.CONNECT_APP,ctaURL:"/apps",name:"apps_tools"},calls:{title:eS.t("Keep everyone in sync with group video calls"),description:eS.t("Host daily stand-ups, share docs, and check in with team members all over the world."),images:rS.calls,ctaTitle:"",ctaAction:tS.START_GROUP_CALL,ctaURL:Object(OC["a"])({articleId:"115003501303",zdLocale:t}),name:"group_calls"},gSuite:{title:eS.t("Let your team sign in with their G Suite account"),description:eS.t("If your team uses G Suite, members can sign in to Slack via their Google account \u2014 no need to remember another password."),images:rS.gSuite,ctaTitle:"",ctaAction:tS.SIGNIN_SETTINGS,ctaURL:Object(OC["a"])({articleId:"204078066",zdLocale:t}),name:"g_suite"},userGroups:{title:eS.t("Organize your team with user groups"),description:eS.t("User groups let you message entire departments at once, by bundling them together in a group \u2014 like @sales or @marketing."),images:rS.userGroups,ctaTitle:"",ctaAction:tS.CREATE_USER_GROUP,ctaURL:Object(OC["a"])({articleId:"212906697",zdLocale:t}),name:"user_groups"}}};var iS={standard:["guests","sharedChannels","msgHistory","storage","apps","calls","gSuite","userGroups"],plus:[]};var sS=function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];var r=nS();return a.reduce(function(e,t){var a=r[t];a?e.push(a):Object(Ne["b"])().warn("Invalid key "+t+" when fetching benefits data");return e},[])};var oS=function e(t,a){return sS(t,iS[a])};var lS=a(2531);var cS=a.n(lS);var uS=a(2532);var dS=a.n(uS);var pS=a(2533);var mS=a.n(pS);var hS=a(4799);var vS=a.n(hS);var fS=a(4974);var bS=new k["b"]("paid_onboarding");var gS={planRenewalLevel:null,trialDaysRemaining:null};var _S=function(e){b()(t,e);function t(){c()(this,t);return m()(this,v()(t).apply(this,arguments))}d()(t,[{key:"componentDidMount",value:function e(){this.props.clogPaidBenefits({action:I["UiAction"].IMPRESSION,step:I["UiStep"].BENEFITS_SIDEBAR,elementType:I["ElementType"].LINK,elementName:"sidebar_benefits"});this.preloadBenefitCardImages()}},{key:"preloadBenefitCardImages",value:function e(){Object.keys(rS).forEach(function(e){var t=rS[e];var a=new Image;a.src=t[0];var r=new Image;r.src=t[1]})}},{key:"renderBackgroundImage",value:function e(){var t=this.props.trialPlanLevel;var a=t===Dl["e"].standard.id;var r=a?cS.a+" 1x, "+dS.a+" 2x":mS.a+" 1x, "+vS.a+" 2x";var i=_()("position_absolute",{"p-sidebar_link__img_standard":a,"p-sidebar_link__img_plus":!a});return n.a.createElement("img",{className:i,srcSet:r,alt:""})}},{key:"renderContent",value:function e(){var t=this.props,a=t.planRenewalLevel,r=t.trialPlanLevel,i=t.trialDaysRemaining,s=t.teamTrialState;var o="";var l="";switch(s){case Dl["h"].PAID:o=a===Dl["e"].standard.id?bS.t("You\u2019re on Slack Standard"):bS.t("You\u2019re on Slack Plus");l=bS.t("See your plan");break;case Dl["h"].FREE_NO_TRIAL:o=r===Dl["e"].standard.id?bS.t("Explore Slack Standard"):bS.t("Explore Slack Plus");l=bS.t("Try it free for 14-days");break;case Dl["h"].FREE_EXPIRED_TRIAL:o=r===Dl["e"].standard.id?bS.t("Keep Slack Standard?"):bS.t("Keep Slack Plus?");l=bS.t("Your trial has ended");break;case Dl["h"].IN_TRIAL:o=r===Dl["e"].standard.id?bS.t("Slack Standard Trial"):bS.t("Slack Plus Trial");l=bS.rt("{trial_days_remaining, plural, =1 {# day} other {# days}} remaining",{trial_days_remaining:i});break;default:break}return n.a.createElement("span",{className:"p-channel_sidebar__name full_width"},n.a.createElement("span",{className:"overflow_ellipsis bold"},o),n.a.createElement("span",{className:"overflow_ellipsis caption"},l))}},{key:"render",value:function e(){return n.a.createElement(n.a.Fragment,null,this.renderBackgroundImage(),this.renderContent())}}]);return t}(r["PureComponent"]);_S.displayName="SidebarLink";_S.defaultProps=gS;var yS=function e(t){var a=Object(xl["q"])(t);return{planRenewalLevel:Object(xl["o"])(t),trialPlanLevel:Object(xl["r"])(t),trialDaysRemaining:Object(yC["a"])(a),teamTrialState:Object(xl["t"])(t)}};var OS=function e(t){return{clogPaidBenefits:function e(){return t(Fl.apply(void 0,arguments))}}};var kS=Object(y["connect"])(yS,OS)(_S);var ES=a(4769);var CS=new k["b"]("paid_onboarding");var SS=function(e){b()(t,e);function t(e){var a;c()(this,t);a=m()(this,v()(t).call(this,e));a.onClick=a.onClick.bind(he()(a));return a}d()(t,[{key:"onClick",value:function e(){var t=this.props.name;this.props.clogPaidBenefits({action:I["UiAction"].CLICK,step:I["UiStep"].BENEFITS_PAGE,elementType:I["ElementType"].LINK,elementName:t+"_learn_more"})}},{key:"renderCTATitle",value:function e(){return n.a.createElement("span",{className:"p-benefit_card__text_link"},n.a.createElement("strong",null,CS.t("Learn More")),n.a.createElement(X["b"],{type:"arrow-right",inline:true}))}},{key:"renderImage",value:function e(){var t=this.props.images;var a=t[0];var r=t[1];return n.a.createElement("img",{className:"p-benefit_card__image",src:r,srcSet:a+" 1x, "+r+" 2x",alt:""})}},{key:"render",value:function e(){var t=this.props,a=t.title,r=t.description,i=t.ctaURL;return n.a.createElement("div",{className:"p-benefit_card__container"},n.a.createElement(Pe["a"],{className:"p-benefit_card__card_link","data-qa":"benefit_card_learn_more_link",rel:"noopener noreferrer",href:i,onClick:this.onClick},this.renderImage(),n.a.createElement("div",{className:"p-benefit_card__text"},n.a.createElement("h3",{className:"p-benefit_card__title"},a),n.a.createElement("p",{className:"p-benefit_card__description sk_foreground_max"},r)),this.renderCTATitle()))}}]);return t}(r["PureComponent"]);SS.displayName="BenefitCard";var wS=function e(t){return{clogPaidBenefits:function e(){return t(Fl.apply(void 0,arguments))}}};var jS=Object(y["connect"])(null,wS)(SS);var IS=a(4968);var TS=new k["b"]("paid_onboarding");var AS=function(e){b()(t,e);function t(e){var a;c()(this,t);a=m()(this,v()(t).call(this,e));a.onClick=a.onClick.bind(he()(a));return a}d()(t,[{key:"onClick",value:function e(){var t=this.props,a=t.team,r=t.checkoutProductId;Object(ut["openAuthenticatedUrlInBrowser"])(a,Dl["a"]+"?s=1&p="+r);this.props.clogPaidBenefits({action:I["UiAction"].CLICK,step:I["UiStep"].BENEFITS_PAGE,elementType:I["ElementType"].BUTTON,elementName:"footer_add_payment_details"})}},{key:"render",value:function e(){var t=this.props.planLevel;var a=t===Dl["e"].standard.id?TS.t("Upgrade to Standard"):TS.t("Upgrade to Plus");return n.a.createElement("div",{className:"p-upgrade_footer align_center"},n.a.createElement("h3",{className:"p-upgrade_footer__heading"},TS.t("Ready to upgrade?")),n.a.createElement("h4",{className:"p-upgrade_footer__subheading"},TS.t("Let\u2019s do it. Just add your payment details and you\u2019ll be set.")),n.a.createElement(J["d"],{type:"primary",onClick:this.onClick,"data-qa":"upgrade_footer_button"},a))}}]);return t}(r["PureComponent"]);AS.displayName="UpgradeFooter";var NS=function e(t){return{team:Object(Je["d"])(t),checkoutProductId:Object(xl["p"])(t)}};var PS=function e(t){return{clogPaidBenefits:function e(){return t(Fl.apply(void 0,arguments))}}};var MS=Object(y["connect"])(NS,PS)(AS);var DS=a(4954);var xS={subtitleText:"",subtitleClass:"",bodyContent:null,headerContainerClass:"",primaryButtonText:"",primaryButtonClass:"",onPrimary:O["noop"],secondaryButtonText:void 0,secondaryButtonClass:"",onSecondary:O["noop"],secondaryHref:void 0,secondaryTarget:void 0};var RS=function(e){b()(t,e);function t(e){var a;c()(this,t);a=m()(this,v()(t).call(this,e));Object(Mn["a"])(he()(a),["handlePrimaryButton","handleSecondaryButton"]);return a}d()(t,[{key:"handlePrimaryButton",value:function e(){var t=this.props.onPrimary;t()}},{key:"handleSecondaryButton",value:function e(){var t=this.props.onSecondary;t()}},{key:"renderPrimaryButton",value:function e(){var t=this.props,a=t.primaryButtonText,r=t.primaryButtonClass;var i=_()("p-paid_benefits_header__button","p-paid_benefits_header__button--primary",r);return n.a.createElement(J["d"],{className:i,onClick:this.handlePrimaryButton,size:"medium","data-qa":"paid_benefits_header_primary_button"},a)}},{key:"renderSecondaryButton",value:function e(){var t=this.props,a=t.secondaryButtonClass,r=t.secondaryButtonText,i=t.secondaryHref,s=t.secondaryTarget;var o=_()("p-paid_benefits_header__button","p-paid_benefits_header__button--secondary",a);return n.a.createElement(J["d"],{className:o,onClick:this.handleSecondaryButton,href:i,target:s,size:"medium",type:"outline","data-qa":"paid_benefits_header_secondary_button"},r)}},{key:"renderSubtitle",value:function e(){var t=this.props,a=t.subtitleText,r=t.subtitleClass;if(!a)return null;var i=_()("p-paid_benefits_header__subtitle",r);return n.a.createElement("div",{className:i},a)}},{key:"renderTitle",value:function e(){var t=this.props.titleText;if(!t)return null;return n.a.createElement("h1",{className:"p-paid_benefits_header__title"},t)}},{key:"render",value:function e(){var t=this.props,a=t.primaryButtonText,r=t.secondaryButtonText,i=t.headerContainerClass,s=t.bodyContent;var o=_()("p-paid_benefits_header",i);return n.a.createElement("div",{className:o},this.renderTitle(),this.renderSubtitle(),s,n.a.createElement("div",{className:"p-paid_benefits_header__button_container"},r&&this.renderSecondaryButton(),a&&this.renderPrimaryButton()))}}]);return t}(r["PureComponent"]);RS.displayName="PaidBenefitsHeader";RS.defaultProps=xS;var FS=RS;var LS=a(4958);var US=new k["b"]("paid_onboarding");var BS=function(e){b()(t,e);function t(e){var a;c()(this,t);a=m()(this,v()(t).call(this,e));Object(Mn["a"])(he()(a),["onPrimaryCTAClick","onSecondaryCTAClick"]);return a}d()(t,[{key:"onPrimaryCTAClick",value:function e(){var t=this.props,a=t.team,r=t.checkoutProductId;Object(ut["openAuthenticatedUrlInBrowser"])(a,Dl["a"]+"?s=1&p="+r+"&entry_point=post_downgrade_header");this.props.clogPaidBenefits({action:I["UiAction"].CLICK,step:I["UiStep"].BENEFITS_PAGE,elementType:I["ElementType"].BUTTON,elementName:"header_add_payment_details",isPrimaryCTA:true})}},{key:"onSecondaryCTAClick",value:function e(){this.props.clogPaidBenefits({action:I["UiAction"].CLICK,step:I["UiStep"].BENEFITS_PAGE,elementType:I["ElementType"].BUTTON,elementName:"get_quote"})}},{key:"getBody",value:function e(){var t=this.props.trialPlanLevel;var a=[US.t("Shared channels have been disconnected"),US.t("Guest accounts have been deactivated"),US.t("Video calls are now limited to 1-1"),US.t("You have access to just your most recent 10,000 messages and your most recent 5GB of files"),US.t("Your workspace is now limited to just 10 apps")];var r=a.map(function(e){return n.a.createElement("li",{key:e}," ",e," ")});var i=t===Dl["e"].standard.id?US.t("Want to keep Slack Standard?"):US.t("Want to keep Slack Plus?");var s=[i," ",US.rt("Add your payment details today, or <a>learn more about Slack\u2019s paid plans.</a>",null,function(e){var t=e.text;return n.a.createElement(Pe["a"],{href:Object(Dl["j"])({entryPoint:"benefits_downgrade_header"})},t)})];return n.a.createElement("div",{className:"p-post_downgrade_header__body"},n.a.createElement("ul",null,r),n.a.createElement("p",null,s))}},{key:"render",value:function e(){var t=this.props.trialPlanLevel;var a=t===Dl["e"].standard.id;var r=a?US.t("Your trial of Slack Standard has ended"):US.t("Your trial of Slack Plus has ended");var i=US.t("Your workspace has been downgraded to the free plan. Here\u2019s what changed:");var s=a?"p-paid_benefits_header__bg_standard":"p-paid_benefits_header__bg_plus";var o="plans/estimate?level="+(a?"std":"plus");return n.a.createElement(FS,{titleText:r,subtitleText:i,primaryButtonText:US.t("Add Payment Details"),headerContainerClass:s,bodyContent:this.getBody(),onPrimary:this.onPrimaryCTAClick,secondaryButtonText:US.t("Get Quote"),secondaryHref:o,secondaryTarget:"_self",onSecondary:this.onSecondaryCTAClick})}}]);return t}(r["PureComponent"]);BS.displayName="PostDowngradeHeader";var qS=function e(t){return{team:Object(Je["d"])(t),trialPlanLevel:Object(xl["r"])(t),checkoutProductId:Object(xl["p"])(t)}};var GS=function e(t){return{clogPaidBenefits:function e(){return t(Fl.apply(void 0,arguments))}}};var HS=Object(y["connect"])(qS,GS)(BS);var WS=new k["b"]("paid_onboarding");var VS=function(e){b()(t,e);function t(){c()(this,t);return m()(this,v()(t).apply(this,arguments))}d()(t,[{key:"render",value:function e(){var t=this.props,a=t.teamName,r=t.planRenewalLevel;var i=r===Dl["e"].standard.id;var s=i?WS.rt("{teamName} is now on Slack Standard",{teamName:a}):WS.rt("{teamName} is now on Slack Plus",{teamName:a});var o=WS.t("Your team is all set with group video calls, shared channels, an unlimited message archive, and more.");var l=i?WS.t("See what else you get with Standard below."):WS.t("See what else you get with Plus below.");var c=[o," ",l];var u=i?"p-paid_benefits_header__bg_standard":"p-paid_benefits_header__bg_plus";return n.a.createElement(FS,{titleText:s,subtitleText:c,headerContainerClass:u})}}]);return t}(r["PureComponent"]);VS.displayName="PostUpgradeHeader";var KS=function e(t){return{teamName:Object(ut["getTeamDisplayName"])(Object(Je["d"])(t)),planRenewalLevel:Object(xl["o"])(t)}};var zS=Object(y["connect"])(KS)(VS);var QS=a(5053);var YS=new k["b"]("paid_onboarding");var JS=function(e){b()(t,e);function t(e){var a;c()(this,t);a=m()(this,v()(t).call(this,e));Object(Mn["a"])(he()(a),["onPrimaryCTAClick"]);return a}d()(t,[{key:"onPrimaryCTAClick",value:function e(){this.props.startTrial({reason:"start_trial_from_paid_benefits_view",args:{campaign_type:"golden_gate_trial",campaign_sub_type:Dl["e"].standard.name}});this.props.clogPaidBenefits({action:I["UiAction"].CLICK,step:I["UiStep"].BENEFITS_PAGE,elementType:I["ElementType"].BUTTON,elementName:"start_trial",isPrimaryCTA:true})}},{key:"render",value:function e(){var t=YS.t("Try Slack Standard for free.");var a=YS.t("Start your 14-day trial and explore features like group video calls, shared channels, and an unlimited, searchable message history.");var r=YS.t("Start Trial");return n.a.createElement(FS,{titleText:t,subtitleText:a,primaryButtonText:r,onPrimary:this.onPrimaryCTAClick})}}]);return t}(r["PureComponent"]);JS.displayName="FreeNoTrialHeader";var XS=function e(t){return{startTrial:function e(){return t(QS["a"].apply(void 0,arguments))},clogPaidBenefits:function e(){return t(Fl.apply(void 0,arguments))}}};var ZS=Object(y["connect"])(null,XS)(JS);var $S=new k["b"]("paid_onboarding");var ew=function(e){b()(t,e);function t(e){var a;c()(this,t);a=m()(this,v()(t).call(this,e));Object(Mn["a"])(he()(a),["onPrimaryCTAClick"]);return a}d()(t,[{key:"onPrimaryCTAClick",value:function e(){var t=this.props,a=t.team,r=t.checkoutProductId;Object(ut["openAuthenticatedUrlInBrowser"])(a,Dl["a"]+"?s=1&p="+r+"&entry_point=in_trial_header");this.props.clogPaidBenefits({action:I["UiAction"].CLICK,step:I["UiStep"].BENEFITS_PAGE,elementType:I["ElementType"].BUTTON,elementName:"header_add_payment_details",isPrimaryCTA:true})}},{key:"formatDate",value:function e(t){var a=dn()(t).subtract(1,"day");return Object(fn["i"])(a,{excludeYear:true})}},{key:"render",value:function e(){var t=this.props,a=t.team,r=t.trialPlanLevel,i=t.trialExpirationDate;var s=Object(ut["getTeamDisplayName"])(a);var o=this.formatDate(i);var l=r===Dl["e"].standard.id;var c=l?$S.rt("{team_name} is trying Slack Standard",{team_name:s}):$S.rt("{team_name} is trying Slack Plus",{team_name:s});var u=l?$S.rt("Your workspace can use all the features of <b>Slack Standard</b> through <b>{trial_expiry_date}.</b>",{trial_expiry_date:o}):$S.rt("Your workspace can use all the features of <b>Slack Plus</b> through <b>{trial_expiry_date}.</b>",{trial_expiry_date:o});var d=$S.t("Add your payment details to stay on this plan and keep using these features.");var p=[u,n.a.createElement("br",{key:"subtitle-text-br"}),d];var m=l?"p-paid_benefits_header__bg_standard":"p-paid_benefits_header__bg_plus";return n.a.createElement(FS,{titleText:c,subtitleText:p,headerContainerClass:m,primaryButtonText:$S.t("Add Payment Details"),onPrimary:this.onPrimaryCTAClick})}}]);return t}(r["PureComponent"]);ew.displayName="InTrialHeader";var tw=function e(t){return{trialPlanLevel:Object(xl["r"])(t),trialExpirationDate:Object(xl["q"])(t),checkoutProductId:Object(xl["p"])(t),team:Object(Je["d"])(t)}};var aw=function e(t){return{clogPaidBenefits:function e(){return t(Fl.apply(void 0,arguments))}}};var rw=Object(y["connect"])(tw,aw)(ew);var nw=a(4847);var iw=new k["b"]("paid_onboarding");var sw=function(e){b()(t,e);function t(){c()(this,t);return m()(this,v()(t).apply(this,arguments))}d()(t,[{key:"componentDidMount",value:function e(){this.props.clogPaidBenefits({action:I["UiAction"].IMPRESSION,step:I["UiStep"].BENEFITS_PAGE,elementType:I["ElementType"].CLIENT_PAGE,elementName:"paid_benefits_page"})}},{key:"renderBenefitCards",value:function e(){var t=this.props.benefitsData;return t.map(function(e){return n.a.createElement("div",{className:"p-paid_benefits_view__card",key:e.name},n.a.createElement(jS,e))})}},{key:"renderBenefitsHeader",value:function e(){var t=this.props.trialPlanLevel;var a=t===Dl["e"].standard.id?iw.t("What can you do with Slack Standard?"):iw.t("What can you do with Slack Plus?");return n.a.createElement("h4",{className:"p-paid_benefits_view__benefits_header"},n.a.createElement("strong",null,a))}},{key:"renderFooter",value:function e(){var t=this.props,a=t.teamTrialState,r=t.trialPlanLevel;if(a!==Dl["h"].IN_TRIAL&&a!==Dl["h"].FREE_EXPIRED_TRIAL)return null;return n.a.createElement(MS,{planLevel:r})}},{key:"renderPageHeader",value:function e(){var t=this.props.teamTrialState;var a=null;switch(t){case Dl["h"].PAID:a=n.a.createElement(zS,null);break;case Dl["h"].FREE_NO_TRIAL:a=n.a.createElement(ZS,null);break;case Dl["h"].FREE_EXPIRED_TRIAL:a=n.a.createElement(HS,null);break;case Dl["h"].IN_TRIAL:a=n.a.createElement(rw,null);break;default:break}return a}},{key:"renderPaidBenefits",value:function e(){return n.a.createElement(n.a.Fragment,null,this.renderPageHeader(),n.a.createElement("div",{className:"p-paid_benefits_view__page_body","data-qa":"paid_benefits_view_page-body"},this.renderBenefitsHeader(),n.a.createElement("div",{className:"p-paid_benefits_view__card_container","data-qa":"paid_benefits_view_card-container"},this.renderBenefitCards()),this.renderFooter()))}},{key:"render",value:function e(){var t=this;return n.a.createElement(_i["a"],null,function(e){var a=e.width,r=e.height;return n.a.createElement(Ay["b"],{width:a,height:r,fade:true},n.a.createElement("div",{className:"p-paid_benefits_view","data-qa":"paid_benefits_view_container"},t.renderPaidBenefits()))})}}]);return t}(r["PureComponent"]);sw.displayName="PaidBenefitsView";var ow=function e(t){return{trialPlanLevel:Object(xl["r"])(t),teamTrialState:Object(xl["t"])(t),benefitsData:oS(t,"standard")}};var lw=function e(t){return{clogPaidBenefits:function e(){return t(Fl.apply(void 0,arguments))}}};var cw=Object(y["connect"])(ow,lw)(sw);a.d(t,"a",function(){return pw});var uw=new k["b"]("channel_sidebar");var dw={Pcomposer:{label:Object(Nv["a"])("Pcomposer"),header:function e(t){return n.a.createElement(ll,t)},headerProps:{forceNarrow:true},view:function e(){return n.a.createElement("div",{className:"p-workspace__primary_view_body"},n.a.createElement(Wl,null,n.a.createElement(hd,null)))}},Pdrafts:{label:Object(Nv["a"])("Pdrafts"),header:function e(t){return n.a.createElement(rl,t)},view:function e(){return n.a.createElement("div",{className:"p-workspace__primary_view_body"},n.a.createElement(Wl,null,n.a.createElement(Gp,null)))},sidebar:{icon:"all-files",isBold:function e(t){return Ll(t)>0},onClick:function e(t){t(Bl())}}},Pexample:{label:Object(Nv["a"])("Pexample"),view:function e(){return n.a.createElement("div",{className:"margin_100"},"Hi! This is an example page.")},sidebar:{icon:"small-quote",onClick:function e(t){},onClickClose:function e(t){},getCloseLinkLabel:function e(){return uw.t("Dismiss example page",{fallbackHash:"2c3cef6f55bd97dda9e8fe6290c4e4a9f285409c"})}}},Punreads:{label:Object(Nv["a"])("Punreads"),header:function e(t){return n.a.createElement(Jo,t)},view:function e(){return n.a.createElement("div",{className:"p-workspace__primary_view_body"},n.a.createElement(jo,null))},sidebar:{icon:"list",isBold:function e(t){return Object(i["isFeatureEnabled"])(t,"feature_incremental_unread_counts")?Object(o["hasUnreadChannels"])(t):Object(s["hasUnreads"])(t)}}},Pwelcome:{isChannelHeaderHidden:function e(){return true},sidebar:{icon:"map",onClick:function e(t){t(Object(j["g"])("sidebar"))},onClickClose:function e(t){t(Object(z["openModal"])({element:n.a.createElement(fl,null)}));t(Object(w["a"])())},getCloseLinkLabel:function e(){return uw.t("Dismiss",{fallbackHash:"2c3cef6f55bd97dda9e8fe6290c4e4a9f285409c"})},isBold:function e(t){return Object(S["x"])(t)},renderLinkContent:function e(t){return n.a.createElement(Al,t)},extraContainerStyleClass:"p-welcome-place--iap1__sidebar__close_container",rowHeight:74},label:Object(Nv["a"])("Pwelcome"),header:function e(t){return n.a.createElement(Ol,t)},view:function e(){return n.a.createElement(Pn,null)}},Papps:{label:Object(Nv["a"])("Papps"),header:function e(t){return n.a.createElement(Av,t)},view:function e(){return n.a.createElement(Cv,null)},sidebar:{icon:"gn-menu",onClick:function e(t){t(Object(Nl["c"])({eventId:"APP_LAUNCHER_OPEN_FROM_SIDEBAR"}))}}},Phome:{label:Object(Nv["a"])("Phome"),header:function e(t){return n.a.createElement(dm,t)},view:function e(){return n.a.createElement(lm,null)},sidebar:{icon:"home",isBold:function e(t){return Object(Pl["d"])(t)}}},Pactivity:{label:Object(Nv["a"])("Pactivity"),header:function e(t){return n.a.createElement(rb,t)},view:function e(){return n.a.createElement(Kf,null)},sidebar:{icon:"mentions"}},Pstars:{label:Object(Nv["a"])("Pstars"),view:function e(){return n.a.createElement(Vb,null)},sidebar:{icon:"bookmark"}},Pfiles:{label:Object(Nv["a"])("Pfiles"),view:function e(){return n.a.createElement(vg,null)},header:function e(t){return n.a.createElement(Lg,t)},sidebar:{icon:"all-files-alt"}},Pdirectory:{label:Object(Nv["a"])("Pdirectory"),view:function e(){return n.a.createElement(Zg,null)},header:function e(t){return n.a.createElement(l_,t)},sidebar:{icon:"team-directory"}},Pprofile:{label:Object(Nv["a"])("Pprofile"),view:function e(){return n.a.createElement(y_,null)},isChannelHeaderHidden:function e(){return true},sidebar:{icon:"user-groups"}},Psettings:{label:Object(Nv["a"])("Psettings"),view:function e(){return n.a.createElement(P_,null)},header:function e(t){return n.a.createElement(ey,t)},sidebar:{icon:"cog-o"}},"Ppaid-benefits":{isChannelHeaderHidden:function e(){return true},label:Object(Nv["a"])("Ppaid-benefits"),view:function e(){return n.a.createElement(cw,null)},sidebar:{icon:"",renderLinkContent:function e(){return n.a.createElement(kS,null)},onClickClose:function e(t){t(Object(Ml["dismissSidebarFooterBenefits"])());t(Fl({action:I["UiAction"].CLICK,step:I["UiStep"].BENEFITS_SIDEBAR,elementType:I["ElementType"].X,elementName:"close_sidebar_benefits"}))},onClick:function e(t){t(Fl({action:I["UiAction"].CLICK,step:I["UiStep"].BENEFITS_SIDEBAR,elementType:I["ElementType"].LINK,elementName:"sidebar_benefits"}))},getCloseLinkLabel:function e(){return uw.t("Dismiss")},showCloseButton:function e(t){return Object(xl["t"])(t)!==Dl["h"].IN_TRIAL},rowHeight:54}},"Pbrowse-channels-prototype":{label:Object(Nv["a"])("Pbrowse-channels-prototype"),view:function e(){return n.a.createElement(x_,null)},header:function e(t){return n.a.createElement(q_,t)},sidebar:{icon:"share-other-alt"}},"Pbrowse-dms":{label:Object(Nv["a"])("Pbrowse-dms"),view:function e(){return n.a.createElement(z_,null)}},"Pbrowse-files":{label:Object(Nv["a"])("Pbrowse-files"),view:function e(){return n.a.createElement(xk,null)},header:function e(t){return n.a.createElement(Lg,t)},sidebar:{icon:"all-files-alt"},indented:true},"Pbrowse-people":{label:Object(Nv["a"])("Pbrowse-people"),view:function e(){return n.a.createElement(hE,null)},header:function e(t){return n.a.createElement(l_,t)},sidebar:{icon:"team-directory"},indented:true},"Pbrowse-channels":{label:Object(Nv["a"])("Pbrowse-channels"),view:function e(){return n.a.createElement(oC,null)},header:function e(t){return n.a.createElement(q_,t)},sidebar:{icon:"share-other-alt"},indented:true},"Pbrowse-user-groups":{label:Object(Nv["a"])("Pbrowse-user-groups"),view:function e(){return n.a.createElement(_C,null)},header:function e(t){return n.a.createElement(l_,t)}},Phelp:{label:Object(Nv["a"])("Phelp"),view:function e(){return n.a.createElement(J_,null)},sidebar:{icon:"question-circle"}},Precent:{label:Object(Nv["a"])("Precent"),view:function e(){return n.a.createElement(_y,null)},header:function e(t){return n.a.createElement(ky,t)},sidebar:{icon:"clock-o"}}};function pw(e){return dw[e]||{}}},,function(e,t,a){"use strict";a.d(t,"b",function(){return d});a.d(t,"a",function(){return m});var r=a(1);var n=a.n(r);var i=a(12);var s=a(21);var o=a(73);var l=a(41);var c=a(820);var u=function e(t,a){var r=a.ts,n=a.channelId;var i=Object(o["a"])(t,n,r);r&&Object(c["d"])(Object(s["b"])(t),n,r);return{msg:i}};function d(e){return Object(i["connect"])(u)(function(t){if(!t.msg)return null;return n.a.createElement(e,t)})}var p=function e(t,a){var r=a.ts,n=a.prevTs,i=a.channelId;var u=Object(o["a"])(t,i,r);var d=Object(o["a"])(t,i,n);var p=Object(s["b"])(t);r&&Object(c["d"])(p,i,r);n&&Object(c["d"])(p,i,n);return{msg:u,adjacent:Object(l["isAdjacentMessage"])(t,u,d)}};function m(e){return Object(i["connect"])(p)(function(t){if(!t.msg)return null;return n.a.createElement(e,t)})}},,,,,,function(e,t,a){"use strict";a.d(t,"c",function(){return o});a.d(t,"i",function(){return l});a.d(t,"b",function(){return c});a.d(t,"d",function(){return u});a.d(t,"e",function(){return d});a.d(t,"f",function(){return p});a.d(t,"h",function(){return m});a.d(t,"a",function(){return h});a.d(t,"j",function(){return v});a.d(t,"g",function(){return f});a.d(t,"k",function(){return b});var r=a(0);var n=a(31);var i=a(29);var s=a(16);var o=Object(i["a"])("Get EKM Clear Cache timestamp",function(e,t,a){var r=a.reason;return e(Object(n["a"])({method:"enterprise.ekm.getClearCacheTs",reason:r})).catch(function(e){var a="failed to get clear cache timestamp";Object(s["a"])({getState:t}).error("EKM",a);throw e})});o.meta={name:"getClearCacheTs",key:"fetchersEkmApiGetClearCacheTs",description:"Get EKM Clear Cache timestamp"};o.propTypes={reason:r["default"].string};var l=Object(i["a"])("Set EKM Clear Cache timestamp",function(e,t,a){var r=a.timestamp,i=a.reason;return e(Object(n["a"])({method:"enterprise.ekm.setClearCacheTs",args:{timestamp:r},reason:i})).catch(function(e){var a="failed to set clear cache timestamp";Object(s["a"])({getState:t}).error("EKM",a);throw e})});l.meta={name:"setClearCacheTs",key:"fetchersEkmApiSetClearCacheTs",description:"Set EKM Clear Cache timestamp"};l.propTypes={timestamp:r["default"].number,reason:r["default"].string};var c=Object(i["a"])("Get EKM Backfill info",function(e,t,a){var r=a.reason;return e(Object(n["a"])({method:"ekm.backfill.info",reason:r})).catch(function(e){var a="failed to get EKM backfill information";Object(s["a"])({getState:t}).error("EKM",a);throw e})});c.meta={name:"getBackfillInfo",key:"fetchersEkmApiGetBackfillInfo",description:"Get EKM Backfill info"};c.propTypes={reason:r["default"].string};var u=Object(i["a"])("Get Misson Control EKM Backfill info",function(e,t,a){var r=a.reason,i=a.teamId;return e(Object(n["a"])({method:"mc.ekm.backfill.info",reason:r,args:{team_id:i}})).catch(function(e){var a="failed to get Mission Control EKM backfill information";Object(s["a"])({getState:t}).error("EKM",a);throw e})});u.meta={name:"getMCBackfillInfo",key:"fetchersEkmApiGetMCBackfillInfo",description:"Get Misson Control EKM Backfill info"};u.propTypes={teamId:r["default"].string.isRequired,reason:r["default"].string};var d=Object(i["a"])("Get EKM Status information for Mission Control",function(e,t,a){var r=a.reason,i=a.teamId;return e(Object(n["a"])({method:"mc.ekm.status",reason:r,args:{team_id:i}})).catch(function(e){var a="failed to get Mission Control EKM Status";Object(s["a"])({getState:t}).error("EKM",a);throw e})});d.meta={name:"getMCEKMStatus",key:"fetchersEkmApiGetMCEKMStatus",description:"Get EKM Status information for Mission Control"};d.propTypes={teamId:r["default"].string.isRequired,reason:r["default"].string};var p=Object(i["a"])("Pause EKM Backfill for Mission Control",function(e,t,a){var r=a.reason,i=a.teamId;return e(Object(n["a"])({method:"mc.ekm.backfill.pause",reason:r,args:{team_id:i}})).catch(function(e){var a="failed to pause MC EKM Backfill";Object(s["a"])({getState:t}).error("EKM",a);throw e})});p.meta={name:"pauseMCEKMBackfill",key:"fetchersEkmApiPauseMCEKMBackfill",description:"Pause EKM Backfill for Mission Control"};p.propTypes={teamId:r["default"].string.isRequired,reason:r["default"].string};var m=Object(i["a"])("Resume EKM Backfill for Mission Control",function(e,t,a){var r=a.reason,i=a.teamId;return e(Object(n["a"])({method:"mc.ekm.backfill.resume",reason:r,args:{team_id:i}})).catch(function(e){var a="failed to resume MC EKM Backfill";Object(s["a"])({getState:t}).error("EKM",a);throw e})});m.meta={name:"resumeMCEKMBackfill",key:"fetchersEkmApiResumeMCEKMBackfill",description:"Resume EKM Backfill for Mission Control"};m.propTypes={teamId:r["default"].string.isRequired,reason:r["default"].string};var h=Object(i["a"])("Enroll Org in EKM for Mission Control",function(e,t,a){var r=a.reason,i=a.teamId,o=a.keyFamily,l=a.requester,c=a.role,u=a.loggingGroupName;return e(Object(n["a"])({method:"mc.ekm.enroll",reason:r,args:{team_id:i,key_family:o,requester:l,role:c,log_group_name:u}})).catch(function(e){var a="failed to enroll org in EKM in MC";Object(s["a"])({getState:t}).error("EKM",a);throw e})});h.meta={name:"enrollMCEKM",key:"fetchersEkmApiEnrollMCEKM",description:"Enroll Org in EKM for Mission Control"};h.propTypes={teamId:r["default"].string.isRequired,keyFamily:r["default"].string.isRequired,requester:r["default"].string.isRequired,role:r["default"].string,loggingGroupName:r["default"].string,reason:r["default"].string};var v=Object(i["a"])("Unenroll Org from EKM for Mission Control",function(e,t,a){var r=a.reason,i=a.teamId,o=a.requester;return e(Object(n["a"])({method:"mc.ekm.unenroll",reason:r,args:{team_id:i,requester:o}})).catch(function(e){var a="failed to unenroll org from EKM in MC";Object(s["a"])({getState:t}).error("EKM",a);throw e})});v.meta={name:"unenrollMCEKM",key:"fetchersEkmApiUnenrollMCEKM",description:"Unenroll Org from EKM for Mission Control"};v.propTypes={teamId:r["default"].string.isRequired,requester:r["default"].string.isRequired,reason:r["default"].string};var f=Object(i["a"])("Re-key Org in EKM for Mission Control",function(e,t,a){var r=a.reason,i=a.teamId,o=a.keyFamily,l=a.requester;return e(Object(n["a"])({method:"mc.ekm.rekey",reason:r,args:{team_id:i,key_family:o,requester:l}})).catch(function(e){var a="failed to re-key org in MC";Object(s["a"])({getState:t}).error("EKM",a);throw e})});f.meta={name:"rekeyMCEKM",key:"fetchersEkmApiRekeyMCEKM",description:"Re-key Org in EKM for Mission Control"};f.propTypes={teamId:r["default"].string.isRequired,keyFamily:r["default"].string.isRequired,requester:r["default"].string.isRequired,reason:r["default"].string};var b=Object(i["a"])("Update EKM Logging for Mission Control",function(e,t,a){var r=a.reason,i=a.teamId,o=a.requester,l=a.loggingGroupName,c=a.role;return e(Object(n["a"])({method:"mc.ekm.updateLogging",reason:r,args:{team_id:i,requester:o,log_group_name:l,role:c}})).catch(function(e){var a="failed to update EKM logging in MC";Object(s["a"])({getState:t}).error("EKM",a);throw e})});b.meta={name:"updateEKMLoggingMC",key:"fetchersEkmApiUpdateEKMLoggingMC",description:"Update EKM Logging for Mission Control"};b.propTypes={teamId:r["default"].string.isRequired,requester:r["default"].string.isRequired,loggingGroupName:r["default"].string.isRequired,role:r["default"].string.isRequired,reason:r["default"].string}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.d(t,"b",function(){return V});var r=a(196);var n=a.n(r);var i=a(88);var s=a.n(i);var o=a(110);var l=a.n(o);var c=a(135);var u=a.n(c);var d=a(169);var p=a.n(d);var m=a(138);var h=a.n(m);var v=a(147);var f=a.n(v);var b=a(185);var g=a.n(b);var _=a(1);var y=a.n(_);var O=a(0);var k=a(12);var E=a(13);var C=a.n(E);var S=a(2);var w=a.n(S);var j=a(2698);var I=a(580);var T=a(484);var A=a(41);var N=a(775);var P=a(562);var M=a(2699);var D=a(3556);var x=a.n(D);function R(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function F(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?R(Object(a),true).forEach(function(t){s()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):R(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var L=Object(_["createContext"])(S["noop"]);var U=3e3;var B=200;var q={msg:void 0,className:void 0,hover:true,onClick:S["noop"],highlight:void 0,clearHighlight:S["noop"],children:void 0,isDeleting:void 0,removeMessageAndTimestamp:S["noop"],logMessage:O["default"].func};var G=function(e){g()(t,e);function t(e){var a;l()(this,t);a=p()(this,h()(t).call(this,e));a.setBackground=a.setBackground.bind(f()(a));a.onClick=a.onClick.bind(f()(a));a.onDeleteAnimationEnd=a.onDeleteAnimationEnd.bind(f()(a));a.onDeleteAnimationTick=a.onDeleteAnimationTick.bind(f()(a));a.highlightTimer=null;a.state={};a.ref=y.a.createRef();return a}u()(t,[{key:"componentDidMount",value:function e(){this.props.highlight&&this.startHighlightTimer();this.props.isDeleting&&this.onDeleteAnimationEnd()}},{key:"componentDidUpdate",value:function e(t){!t.highlight&&this.props.highlight&&this.startHighlightTimer();!t.isDeleting&&this.props.isDeleting&&this.startDeleteAnimation()}},{key:"componentWillUnmount",value:function e(){if(this.highlightTimer){clearTimeout(this.highlightTimer);this.props.clearHighlight()}if(this.deleteAnimation){this.deleteAnimation.cancel();this.onDeleteAnimationEnd()}}},{key:"onClick",value:function e(t){var a=this.props.msg;if(t.shiftKey&&Object(P["a"])(t)&&!Object(M["a"])(t.target)){t.preventDefault();this.props.logMessage({channelId:a.channel,ts:a.ts})}this.props.onClick(t)}},{key:"onDeleteAnimationEnd",value:function e(){var t=this.props.msg;this.props.removeMessageAndTimestamp({channelId:t.channel,ts:t.ts});this.deleteAnimation=null}},{key:"onDeleteAnimationTick",value:function e(t){var a=t.value,r=t.nextTick;this.setState(function(){return{height:a}},r)}},{key:"setBackground",value:function e(t){this.setState(function(e){return F({},e,{},t)})}},{key:"startDeleteAnimation",value:function e(){var t=this.ref.current&&this.ref.current.clientHeight||0;this.deleteAnimation=Object(N["a"])({fromValue:t,toValue:0,duration:B,easing:"easeInOutQuad",onTick:this.onDeleteAnimationTick,onComplete:this.onDeleteAnimationEnd})}},{key:"startHighlightTimer",value:function e(){var t=this;this.highlightTimer&&clearTimeout(this.highlightTimer);this.highlightTimer=setTimeout(function(){t.highlightTimer=null;t.props.clearHighlight()},U)}},{key:"render",value:function e(){var t;var a=this.state.height;var r="number"===typeof a?{height:a}:null;var n=C()("c-message_kit__background",(t={"c-message_kit__background--hovered":this.props.hover&&this.state.hover,"c-message_kit__background--labels":this.state.labels},s()(t,"c-message_kit__background--labels--"+this.state.labels,this.state.labels),s()(t,"c-message_kit__background--editing",this.state.editing),s()(t,"c-message_kit__background--highlight",this.props.highlight),s()(t,"c-message_kit__background--deleting",this.props.isDeleting),t),this.props.className);return y.a.createElement(L.Provider,{value:this.setBackground},y.a.createElement("div",{role:"document",className:n,ref:this.ref,style:r,onClick:this.onClick,"data-qa":"message_container","data-qa-unprocessed":Object(A["isUnprocessedMsg"])(this.props.msg),"data-qa-placeholder":this.props.msg&&Object(A["isTempTs"])(this.props.msg.ts),"data-qa-label":this.state.labels},this.props.children))}}]);return t}(_["PureComponent"]);G.displayName="MessageBackground";G.defaultProps=q;function H(e,t){var a=t.msg;var r=false;if(a){var n=Object(T["getMessageMetaData"])(e,{channelId:a.channel,ts:a.ts});r=n.isDeleting}return{isDeleting:r}}var W=function e(t){return{removeMessageAndTimestamp:function e(a){return t(Object(I["a"])(a))},logMessage:function e(a){return t(Object(j["a"])(a))}}};t["a"]=Object(k["connect"])(H,W)(G);function V(e){return function t(a){return y.a.createElement(L.Consumer,null,function(t){return y.a.createElement(e,n()({},a,{setBackground:t}))})}}},function(e,t,a){"use strict";a.d(t,"a",function(){return z});var r=a(245);var n=a.n(r);var i=a(196);var s=a.n(i);var o=a(110);var l=a.n(o);var c=a(135);var u=a.n(c);var d=a(169);var p=a.n(d);var m=a(138);var h=a.n(m);var v=a(147);var f=a.n(v);var b=a(185);var g=a.n(b);var _=a(1);var y=a.n(_);var O=a(12);var k=a(13);var E=a.n(k);var C=a(2);var S=a.n(C);var w=a(30);var j=a(0);var I=a(150);var T=a(392);var A=a(1236);var N=a(89);var P=a(2731);var M=a(2011);var D=a(602);var x=a(485);var R=a(755);var F=a(34);var L=a(906);var U=a(1157);var B=a(1158);var q=a(283);var G=a(119);var H=a(526);var W=a(90);var V=a(3343);var K=a.n(V);var z={offsetX:24,offsetY:134};var Q=function e(t){var a=t&&t.current||t;if(!a)return;var r=Object(C["isFunction"])(a.getWrappedInstance)?a.getWrappedInstance():a;if(!r)return;if(Object(C["isFunction"])(r.focus))return r};var Y=3e3;var J={className:void 0,bodyClassName:void 0,flexOrigin:void 0,isEmpty:false,isOffline:false,isLoading:false,onBlur:C["noop"],onFocus:C["noop"],renderEmpty:C["noop"],renderControls:C["noop"],renderSubtitle:C["noop"],onOptionsClick:void 0,kbNavOrder:void 0,dataQa:void 0,headerProps:{},userAttentionIsOnChat:false,composerVisible:false,focus:void 0,removeFromSectionNavigation:C["noop"],addToSectionNavigation:C["noop"],setInitialActiveSection:C["noop"],clientTheme:"light",isIAP1Enabled:false,renderAdditionalButtons:C["noop"],highlight:false,setFlexpaneHighlight:C["noop"]};var X=function(e){g()(t,e);function t(e){var a;l()(this,t);a=p()(this,h()(t).call(this,e));Object(w["a"])(f()(a),["focus","blur","setInitialActiveSection"]);a.flexpaneBodyRef=y.a.createRef();a.flexpaneHeaderRef=y.a.createRef();return a}u()(t,[{key:"componentDidMount",value:function e(){this.props.highlight&&this.startHighlightTimer()}},{key:"componentDidUpdate",value:function e(t){var a={prevUserAttentionIsOnChat:t.userAttentionIsOnChat,prevComposerVisible:t.composerVisible,currentUserAttentionIsOnChat:this.props.userAttentionIsOnChat,currentComposerVisible:this.props.composerVisible};Object(U["a"])(a)&&this.props.addToSectionNavigation();Object(B["a"])(a)&&this.props.removeFromSectionNavigation();!t.highlight&&this.props.highlight&&this.startHighlightTimer()}},{key:"setInitialActiveSection",value:function e(){this.props.setInitialActiveSection()}},{key:"startHighlightTimer",value:function e(){var t=this;if(!this.props.isIAP1Enabled)return;setTimeout(function(){t.props.setFlexpaneHighlight(false)},Y)}},{key:"blur",value:function e(){document.activeElement.blur();Object(F["a"])()||this.props.onBlur()}},{key:"focus",value:function e(){var t=this.props,a=t.isEmpty,e=t.focus,r=t.onFocus;if(a){this.focusCloseButton();return}e?e():this.focusItemInBody();Object(F["a"])()||r()}},{key:"focusCloseButton",value:function e(){var t=Q(this.flexpaneHeaderRef);t&&t.focus()}},{key:"focusItemInBody",value:function e(){var t=Q(this.flexpaneBodyRef);if(!t)return;var a=Object(D["a"])(t)[0];a&&a.focus()}},{key:"isLoading",value:function e(){var t=this.props,e=t.isLoading,a=t.isOffline;return e&&!a}},{key:"renderBody",value:function e(){var t=this.props,a=t.isEmpty,r=t.isOffline,e=t.renderBody,n=t.renderEmpty;if(a){if(this.isLoading())return null;return n({isOffline:r})}return e()}},{key:"renderSubtitle",value:function e(){var e=this.props.renderSubtitle;var t=e();if(!t)return null;return y.a.createElement("div",{className:"p-flexpane__subtitle","data-qa":"subtitle"},t)}},{key:"render",value:function e(){var t=this.props,a=t.className,r=t.bodyClassName,n=t.flexOrigin,i=t.isEmpty,o=t.onOptionsClick,l=t.title,c=t.viewId,u=t.kbNavOrder,d=t.dataQa,p=t.renderControls,m=t.headerProps,h=t.clientTheme,v=t.isIAP1Enabled,f=t.highlight,b=t.renderAdditionalButtons;var g=y.a.createElement(T["a"],{id:c},y.a.createElement("div",{role:"complementary","aria-label":this.props["aria-label"],"data-qa":d,className:E()("p-flexpane",{"p-flexpane--iap1":v,"p-flexpane--highlight":v&&f},a)},y.a.createElement(P["a"],s()({ref:this.flexpaneHeaderRef,onOptionsClick:o,renderSecondary:p,clientTheme:h,isIAP1Enabled:v,renderAdditionalButtons:b},m),!v&&y.a.createElement(M["a"],{flexOrigin:n,size:"medium"}),y.a.createElement("div",{className:"p-flexpane__title_container","data-qa":"flexpane-title-container"},l,this.renderSubtitle())),y.a.createElement("div",{ref:this.flexpaneBodyRef,className:E()("p-flexpane__body",r,"p-flexpane__body--"+h,{"p-flexpane__body--empty":i&&!this.isLoading(),"p-flexpane__body--empty_loading":i&&this.isLoading()})},this.isLoading()&&y.a.createElement("div",{className:"p-flexpane__floating_loader","data-qa":"floating_loader"},y.a.createElement(N["a"],{size:"medium",noMargin:true})),this.renderBody())));if(Object(F["a"])())return g;return y.a.createElement(A["a"],{component:this,order:u},g)}}]);return t}(y.a.Component);X.displayName="Flexpane";X.defaultProps=J;var Z=function e(t){return{isOffline:!Object(I["c"])(t),userAttentionIsOnChat:Object(x["e"])(t),composerVisible:Object(L["isComposerVisible"])(t),clientTheme:Object(q["getClientTheme"])(t),isIAP1Enabled:Object(W["e"])(t),highlight:Object(G["k"])(t)}};var $=function e(t){return{setFlexpaneHighlight:function e(a){return t(Object(H["e"])(a))}}};var ee=Object(F["a"])()?Object(R["a"])(X,"Flexpane",{index:1}):X;var te=Object(O["connect"])(Z,$,null,{pure:false})(function(e){var t=e.refToForward,a=n()(e,["refToForward"]);return y.a.createElement(ee,s()({ref:t},a))});t["b"]=y.a.forwardRef(function(e,t){return y.a.createElement(te,s()({refToForward:t},e))})},,,,,,,,,,,function(e,t,a){"use strict";a.d(t,"b",function(){return n});a.d(t,"c",function(){return i});a.d(t,"e",function(){return s});a.d(t,"d",function(){return o});a.d(t,"f",function(){return l});a.d(t,"a",function(){return c});var r=a(15);var n=Object(r["b"])(function(e){return e&&e.memberDirectoryFlexpane&&e.memberDirectoryFlexpane.memberIds});n.meta={name:"getFlexpaneMemberIds",key:"memberDirectoryFlexpaneStoreMemberDirectoryFlexpaneSelectorsGetFlexpaneMemberIds"};var i=Object(r["b"])(function(e){return e&&e.memberDirectoryFlexpane&&e.memberDirectoryFlexpane.nonExactMatchMemberIds});i.meta={name:"getFlexpaneNonExactMatchMemberIds",key:"memberDirectoryFlexpaneStoreMemberDirectoryFlexpaneSelectorsGetFlexpaneNonExactMatchMemberIds"};var s=Object(r["b"])(function(e){return e&&e.memberDirectoryFlexpane&&e.memberDirectoryFlexpane.scrollmark});s.meta={name:"getScrollmark",key:"memberDirectoryFlexpaneStoreMemberDirectoryFlexpaneSelectorsGetScrollmark"};var o=Object(r["b"])(function(e){return e&&e.memberDirectoryFlexpane&&e.memberDirectoryFlexpane.marker});o.meta={name:"getMarker",key:"memberDirectoryFlexpaneStoreMemberDirectoryFlexpaneSelectorsGetMarker"};var l=Object(r["b"])(function(e){return e&&e.memberDirectoryFlexpane&&e.memberDirectoryFlexpane.searchQuery});l.meta={name:"getSearchQuery",key:"memberDirectoryFlexpaneStoreMemberDirectoryFlexpaneSelectorsGetSearchQuery"};var c=Object(r["b"])(function(e){return e&&e.memberDirectoryFlexpane&&e.memberDirectoryFlexpane.filter});c.meta={name:"getFilter",key:"memberDirectoryFlexpaneStoreMemberDirectoryFlexpaneSelectorsGetFilter"}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.d(t,"h",function(){return f});a.d(t,"b",function(){return b});a.d(t,"i",function(){return _});a.d(t,"f",function(){return y});a.d(t,"c",function(){return O});a.d(t,"d",function(){return k});a.d(t,"a",function(){return E});a.d(t,"e",function(){return C});a.d(t,"g",function(){return S});var r=a(245);var n=a.n(r);var i=a(278);var s=a.n(i);var o=a(0);var l=a(29);var c=a(31);var u=a(16);var d=a(353);var p=a(2);var m=a.n(p);var h=a(11);var v="ORG_USER_GROUPS";var f=Object(l["a"])("Fetches the members in the user group",function(e,t,a){var r=a.userGroupId,n=a.searchTerm,i=void 0===n?"":n,s=a.reason,o=void 0===s?"searchOrgUserGroupMembers":s,l=a.count,u=void 0===l?100:l,d=a.cursorMark,m=void 0===d?"*":d;var h={query:JSON.stringify({type:"and",clauses:Object(p["compact"])([{type:"is",value:"user"},{type:"belongs_to_usergroup_id",value:r},i&&{type:"fuzzy_with_email",value:i}])}),search_org:1,count:u,include_deleted:false,include_bots:false,include_dangling:false,cursor_mark:m};return e(Object(c["a"])({method:"search.enterprise",args:h,reason:o}))});f.meta={name:"searchOrgUserGroupMembers",key:"fetchersOrgUserGroupsApiSearchOrgUserGroupMembers",description:"Fetches the members in the user group"};f.propTypes={userGroupId:o["default"].string.isRequired,searchTerm:o["default"].string,reason:o["default"].string,count:o["default"].number,cursorMark:o["default"].string};var b=Object(l["a"])("Disconnect workspaces from an IDP group",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"disconnectWorkspacesFromOrgUserGroup";return e(Object(c["a"])({method:"enterprise.usergroups.teams.remove",args:{teams:Object(p["get"])(a,"teams"),usergroup:Object(p["get"])(a,"usergroup")},reason:r})).catch(function(e){Object(u["a"])({getState:t}).error("failed to disconnect workspaces from IDP group: ",e);throw e})});b.meta={name:"disconnectWorkspacesFromOrgUserGroupAPI",key:"fetchersOrgUserGroupsApiDisconnectWorkspacesFromOrgUserGroupAPI",description:"Disconnect workspaces from an IDP group"};b.propTypes={teams:o["default"].arrayOf(o["default"].string),usergroup:o["default"].string};var g={type:"and",clauses:[{type:"is",value:"group"},{type:"is",value:"group_local"}]};var _=Object(l["a"])("Gets user group matches for a given search term",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.sortBy,n=void 0===r?"real_name":r,i=a.searchTerm,s=void 0===i?"":i,o=a.count,l=void 0===o?"100":o,u=a.nextCursorMark,d=void 0===u?"":u,p=a.query,m=void 0===p?g:p,v=a.sortDir,f=void 0===v?"asc":v,b=a.includeEnterprise,_=void 0===b?1:b,y=a.reason,O=void 0===y?"searchOrgUserGroups":y;var k=t();var E={count:l,query:JSON.stringify(m),sort:n,sort_dir:f,include_enterprise:_,include_dangling:1,enterprise_token:Object(h["getFromBootData"])(k,"enterprise_api_token")};s&&(E._query=s);d&&(E.cursor_mark=d);return e(Object(c["a"])({method:"search.enterprise",args:E,reason:O}))});_.meta={name:"searchOrgUserGroups",key:"fetchersOrgUserGroupsApiSearchOrgUserGroups",description:"Gets user group matches for a given search term"};_.propTypes=o["default"].shape({sortBy:o["default"].string,searchTerm:o["default"].string,count:o["default"].string,nextCursorMark:o["default"].string,sortDir:o["default"].string,includeEnterprise:o["default"].oneOf([1,0])});var y=Object(l["a"])("Gets fuzzy matches for a given search term and upserts the members into redux",function(){var e=s()(regeneratorRuntime.mark(function e(t,a){var r,n,i,s,o,l,c,u,p,m,h,v,f,b=arguments;return regeneratorRuntime.wrap(function e(a){while(1)switch(a.prev=a.next){case 0:r=b.length>2&&void 0!==b[2]?b[2]:{},n=r.sortBy,i=void 0===n?"real_name":n,s=r.searchTerm,o=void 0===s?"":s,l=r.count,c=void 0===l?"100":l,u=r.query,p=r.includeEnterprise,m=void 0===p?1:p,h=r.nextCursorMark,v=void 0===h?"":h;a.next=3;return t(_({sortBy:i,searchTerm:o,count:c,nextCursorMark:v,includeEnterprise:m,query:u}));case 3:f=a.sent;t(Object(d["q"])({userGroups:f.items}));return a.abrupt("return",f);case 6:case"end":return a.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}());y.meta={name:"searchAndUpsertOrgUserGroups",key:"fetchersOrgUserGroupsApiSearchAndUpsertOrgUserGroups",description:"Gets fuzzy matches for a given search term and upserts the members into redux"};y.propTypes=o["default"].shape({sortBy:o["default"].string,searchTerm:o["default"].string,count:o["default"].string,nextCursorMark:o["default"].string,includeEnterprise:o["default"].oneOf([1,0])});var O=Object(l["a"])("Fetch user group team ids and auto provisioned team ids",function(e,t,a){var r=a.usergroup,n=a.reason,i=void 0===n?"usergroup_team_ids":n;return e(Object(c["a"])({method:"enterprise.usergroups.teams.get",args:{usergroup:r},reason:i})).catch(function(e){Object(u["a"])({getState:t}).error(v,"fetchUserGroupTeamIds encountered an error: "+JSON.stringify(e.data));throw e})});O.meta={name:"fetchUserGroupTeamIds",key:"fetchersOrgUserGroupsApiFetchUserGroupTeamIds",description:"Fetch user group team ids and auto provisioned team ids"};O.propTypes={usergroup:o["default"].string.isRequired,reason:o["default"].string};var k=Object(l["a"])("Fetch the list of channels linked to an org-level User Group",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var r=a.reason,i=void 0===r?"getChannelsByUserGroupId":r,s=n()(a,["reason"]);return e(Object(c["a"])({method:"admin.usergroups.listChannels",args:s,reason:i}))});k.meta={name:"getChannelsByUserGroupId",key:"fetchersOrgUserGroupsApiGetChannelsByUserGroupId",description:"Fetch the list of channels linked to an org-level User Group"};k.propTypes={args:o["default"].object};var E=Object(l["a"])("Assigns one or more channels to an org-level User Group",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var r=a.reason,i=void 0===r?"addChannelsToUserGroup":r,s=n()(a,["reason"]);var o={usergroup_id:s.userGroupId,team_id:s.teamId,channel_ids:s.channelIds};return e(Object(c["a"])({method:"admin.usergroups.addChannels",args:o,reason:i})).catch(function(e){Object(u["a"])({getState:t}).error(v,"addChannelsToUserGroup encountered an error: "+e);throw e})});E.meta={name:"addChannelsToUserGroup",key:"fetchersOrgUserGroupsApiAddChannelsToUserGroup",description:"Assigns one or more channels to an org-level User Group"};E.propTypes={channelIds:o["default"].arrayOf(o["default"].string).isRequired,teamId:o["default"].string.isRequired,userGroupId:o["default"].string.isRequired,reason:o["default"].string};var C=Object(l["a"])("Disconnects one or more channels from an org-level User Group",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var r=a.reason,i=void 0===r?"removeChannelsFromUserGroup":r,s=n()(a,["reason"]);var o={usergroup_id:s.userGroupId,team_id:s.teamId,channel_ids:s.channelIds};return e(Object(c["a"])({method:"admin.usergroups.removeChannels",args:o,reason:i})).catch(function(e){Object(u["a"])({getState:t}).error(v,"removeChannelsFromUserGroup encountered an error: "+e);throw e})});C.meta={name:"removeChannelsFromUserGroup",key:"fetchersOrgUserGroupsApiRemoveChannelsFromUserGroup",description:"Disconnects one or more channels from an org-level User Group"};C.propTypes={channelIds:o["default"].arrayOf(o["default"].string).isRequired,teamId:o["default"].string.isRequired,userGroupId:o["default"].string.isRequired,reason:o["default"].string};var S=Object(l["a"])("Searches the org for channels by the given query string",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var r=a.reason,i=void 0===r?"searchOrgChannels":r,s=n()(a,["reason"]);return e(Object(c["a"])({method:"admin.conversations.search",args:s,reason:i})).catch(function(e){Object(u["a"])({getState:t}).error(v,"searchOrgChannels encountered an error: "+e);throw e})});S.meta={name:"searchOrgChannels",key:"fetchersOrgUserGroupsApiSearchOrgChannels",description:"Searches the org for channels by the given query string"};S.propTypes={query:o["default"].string}},function(e,t,a){"use strict";a.d(t,"a",function(){return r});function r(e){var t=e.prevUserAttentionIsOnChat,a=e.prevComposerVisible,r=e.currentUserAttentionIsOnChat,n=e.currentComposerVisible;if(!t&&r&&!n)return true;if(a&&!n&&r)return true;return false}},function(e,t,a){"use strict";a.d(t,"a",function(){return r});function r(e){var t=e.prevUserAttentionIsOnChat,a=e.prevComposerVisible,r=e.currentUserAttentionIsOnChat,n=e.currentComposerVisible;if(!r&&t)return true;if(!a&&n)return true;return false}},,,,,,,,,,,,function(e,t,a){"use strict";a.d(t,"a",function(){return c});a.d(t,"d",function(){return u});a.d(t,"b",function(){return d});a.d(t,"c",function(){return p});a.d(t,"e",function(){return v});var r=a(2);var n=a.n(r);var i=a(35);var s=a(16);var o=a(865);var l=Object(s["b"])();function c(e,t){return new Promise(function(a){Object(o["a"])("experiments.getByInvite",{encoded_invite_id:e,domain:t},function(e,t){e&&t.assignments&&f(t.assignments);a(e)})})}function u(){return new Promise(function(e){Object(o["a"])("experiments.getByVisitor",{},function(t,a){t&&a.assignments&&f(a.assignments);e(t)})})}function d(e){if(void 0===e){l.warn("fetchLeadAssignments requires a leadId");return Promise.resolve(false)}return new Promise(function(t){Object(o["a"])("experiments.getByLead",{lead_id:e},function(e,a){e&&a.assignments&&f(a.assignments);t(e)})})}function p(e){if(void 0===e){l.warn("fetchUserAssignments requires a token");return Promise.resolve(false)}return new Promise(function(t){Object(o["a"])("experiments.getByUser",{token:e},function(e,a){e&&a.assignments&&f(a.assignments);t(e)})})}var m={};var h={};function v(e){var t=m[e];if(!t)return null;t.log_exposures&&b(e,t);return t.group}function f(e){Object(r["forEach"])(e,function(e,t){Object(r["isEqual"])(h[t],e)||(h[t]=null);m[t]=e})}function b(e,t){if(!Object(r["isEqual"])(h[e],t)){Object(i["a"])().track("EXPERIMENT_EXPOSURE",{experiment_name:e,experiment_type:t.type,experiment_id:t.experiment_id,experiment_group:t.group,experiment_trigger:t.trigger,exposure_id:t.exposure_id});h[e]=t}}},,,,,,,,,,,function(e,t,a){"use strict";a.r(t);var r=a(712);var n=a(715);var i=a(713);var s=a(714);var o=a(764);var l=a(710);var c=a(740);var u=a(554);var d=a(711);var p=a(351);var m=a(5128);var h=a(2359);var v=a(5129);var f=a(5130);var b=a(697);var g=a(667);var _=a(723);var y=a(724);var O=a(5131);var k=a(726);var E=a(727);var C=a(728);var S=a(729);var w=a(730);var j=a(731);var I=a(732);var T=a(733);var A=a(734);var N=a(735);var P=a(736);var M=a(737);var D=a(738);var x=a(739);var R=a(658);var F=a(720);var L=a(716);var U=a(717);var B=a(719);var q=a(718);var G=a(722);var H=a(721);var W=a(5132);var V=a(5133);var K=a(695);var z=a(5134);var Q=a(5135);var Y=a(742);var J=a(685);var X=a(691);var Z=a(743);var $=a(694);var ee=a(692);var te=a(5136);var ae=a(5137);var re=a(687);var ne=a(209);var ie=a(696);var se=a(688);var oe=a(689);var le=a(690);var ce=a(693);var ue=a(5138);var de=a(741);var pe=a(358);var me=a(671);var he=a(5139);var ve=a(5140);var fe=a(5141);var be=a(5142);var ge=a(676);var _e=a(677);var ye=a(5143);var Oe=a(5144);var ke=a(5145);var Ee=a(681);var Ce=a(682);var Se=a(683);var we=a(644);var je=a(705);var Ie=a(706);var Te=a(707);var Ae=a(708);var Ne=a(709);var Pe=a(416);var Me=a(668);var De=a(684);var xe=a(5146);var Re=a(1026);var Fe=a(5147);var Le=a(5148);var Ue=a(778);var Be=a(700);var qe=a(703);var Ge=a(5149);var He=a(5150);var We=a(5151);var Ve=a(699);var Ke=a(704);var ze=a(5152);var Qe=a(501);var Ye=a(664);var Je=a(744);var Xe=a(745);var Ze=a(698);var $e=a(701);var et=a(5153);var tt=a(702);var at=a(1494);var rt=a(5120);var nt=a(5154);var it=a(5155);var st=a(1739);var ot=a(657);var lt=a(5156);var ct=a(659);var ut=a(660);var dt=a(5157);var pt=a(662);var mt=a(663);var ht=a(5158);var vt=a(665);var ft=a(5159);var bt=a(5160);var gt=a(670);var _t=a(746);var yt=a(747);var Ot=a(748);var kt=a(749);var Et=a(1);var Ct=a.n(Et);var St=a(85);var wt=a.n(St);var jt=a(387);var It=a(196);var Tt=a.n(It);var At=a(88);var Nt=a.n(At);var Pt=a(110);var Mt=a.n(Pt);var Dt=a(135);var xt=a.n(Dt);var Rt=a(169);var Ft=a.n(Rt);var Lt=a(138);var Ut=a.n(Lt);var Bt=a(147);var qt=a.n(Bt);var Gt=a(185);var Ht=a.n(Gt);var Wt=a(12);var Vt=a(13);var Kt=a.n(Vt);var zt=a(0);var Qt=a(6);var Yt=a(11);var Jt=a(233);var Xt=a(87);var Zt=a(20);var $t=a(57);var ea=a(98);var ta=a(23);var aa=a(54);var ra=a(35);var na=a(14);var ia=a(2);var sa=a(30);var oa=a(2227);var la=a(38);var ca=a(122);var ua=a(25);var da=a(1267);var pa=a(166);var ma=a(2228);var ha=a(9);var va=a(1348);var fa=a(652);var ba=a(784);var ga=a(2781);var _a=a(1338);var ya=a(1870);var Oa=new Qt["b"]("do_not_disturb");var ka={snoozeEndTs:void 0,dndEndTs:void 0,do24hrTime:false,currentChannel:{},menuProps:{},openPrefsModal:ia["noop"],openDndDialog:ia["noop"],openChannelNotificationPrefsModal:ia["noop"],clogger:{track:ia["noop"]},showNotificationScheduleNewBadge:false,setUserPrefByApi:ia["noop"],featureGranularDnd:false,isIAP1Enabled:false,featureVacationDelight:false,canonicalCustomStatus:void 0};var Ea=function(e){Ht()(t,e);function t(e){var a;Mt()(this,t);a=Ft()(this,Ut()(t).call(this,e));a.renderSubmenu=a.renderSubmenu.bind(qt()(a));a.onClickDoNotDisturbSchedule=a.onClickDoNotDisturbSchedule.bind(qt()(a));a.onClickNotificationPreferences=a.onClickNotificationPreferences.bind(qt()(a));return a}xt()(t,[{key:"onClickDoNotDisturbSchedule",value:function e(){var t=this.props,a=t.featureGranularDnd,r=t.showNotificationScheduleNewBadge;this.props.openPrefsModal({activeSection:"notifications",activeSubsection:"prefs_dnd"});a&&r&&this.props.setUserPrefByApi({pref:"dnd_notification_schedule_new_badge_seen",value:true})}},{key:"onClickNotificationPreferences",value:function e(){this.props.openPrefsModal({activeSection:"notifications"})}},{key:"renderAdjustMenuItem",value:function e(){var t=this.props,a=t.inDndBySnooze,r=t.featureGranularDnd;if(a||r)return Ct.a.createElement(da["a"],{label:Oa.t("Adjust time"),renderSubmenu:this.renderSubmenu});return Ct.a.createElement($t["b"],{label:Oa.t("Adjust schedule\u2026"),onSelected:this.onClickDoNotDisturbSchedule})}},{key:"renderDndMenuHeader",value:function e(){var t=this.props,a=t.inDndBySnooze,r=t.snoozeEndTs,n=t.dndEndTs,i=t.do24hrTime,s=t.featureGranularDnd,o=t.featureVacationDelight,l=t.canonicalCustomStatus;var c=a?r:n;var u=Object(va["b"])(c,{do24hrTime:i,vacationDelight:o&&"Vacationing"===l,featureVacationDelight:o});var d=Kt()({"p-dnd_menu__snooze_header":a||s,"p-dnd_menu__schedule_header":!a&&!s});return Ct.a.createElement("div",{className:d},Ct.a.createElement("div",{className:"p-dnd_menu__header_status"},Ct.a.createElement("div",null,Ct.a.createElement("strong",null,s?Oa.t("Do Not Disturb"):Oa.t("Do Not Disturb: ON"))),Ct.a.createElement("div",null,u)))}},{key:"renderSettingsMenuItem",value:function e(){var t=this;var a=this.props.currentChannel;if(!a.id||Object(ha["isIm"])(a))return null;var r=Ct.a.createElement(pa["a"],{channelId:a.id,iconProps:{inherit:true,align:"baseline"},inline:true});var n=Oa.rt("Settings for {name}\u2026",{name:Ct.a.createElement("strong",null,r),fallbackHash:"c6c4739d1b58eef23e9c67fb55a1961f80e0cf65"});return Ct.a.createElement($t["b"],{label:n,onSelected:function e(){return t.props.openChannelNotificationPrefsModal({channelId:a.id,entryPoint:"dnd_enabled_menu"})}})}},{key:"renderSubmenu",value:function e(t){var a=this;var r=this.props,n=r.clogger,i=r.isIAP1Enabled;return Ct.a.createElement($t["f"],Tt()({},t,{width:200}),Ct.a.createElement($t["b"],{label:Oa.t("30 minutes"),onSelected:function e(){var t=30;a.props.snoozeNotifications({duration:t,reason:"DndEnabledMenu:30m"});n.track(na["EventId"].DND_SNOOZE_NOTIFICATIONS,{dnd_duration:t,dnd_preset:na["DndPreset"].DURATION_30_MINUTES,dnd_snooze_type:na["DndSnoozeType"].SNOOZE_ADJUST})}}),Ct.a.createElement($t["b"],{label:Oa.t("1 hour"),onSelected:function e(){var t=60;a.props.snoozeNotifications({duration:t,reason:"DndEnabledMenu:1hr"});n.track(na["EventId"].DND_SNOOZE_NOTIFICATIONS,{dnd_duration:t,dnd_preset:na["DndPreset"].DURATION_1_HOUR,dnd_snooze_type:na["DndSnoozeType"].SNOOZE_ADJUST})}}),Ct.a.createElement($t["b"],{label:Oa.t("2 hours"),onSelected:function e(){var t=120;a.props.snoozeNotifications({duration:t,reason:"DndEnabledMenu:2hr"});n.track(na["EventId"].DND_SNOOZE_NOTIFICATIONS,{dnd_duration:t,dnd_preset:na["DndPreset"].DURATION_2_HOURS,dnd_snooze_type:na["DndSnoozeType"].SNOOZE_ADJUST})}}),!i&&Ct.a.createElement($t["b"],{label:Oa.t("4 hours"),onSelected:function e(){var t=240;a.props.snoozeNotifications({duration:t,reason:"DndEnabledMenu:4hr"});n.track(na["EventId"].DND_SNOOZE_NOTIFICATIONS,{dnd_duration:t,dnd_preset:na["DndPreset"].DURATION_4_HOURS,dnd_snooze_type:na["DndSnoozeType"].SNOOZE_ADJUST})}}),Ct.a.createElement($t["b"],{label:Oa.t("Until tomorrow"),onSelected:function e(){var t=Object(va["d"])();a.props.snoozeNotifications({duration:t,reason:"DndEnabledMenu:tomorrow"});n.track(na["EventId"].DND_SNOOZE_NOTIFICATIONS,{dnd_duration:t,dnd_preset:na["DndPreset"].DURATION_TOMORROW,dnd_snooze_type:na["DndSnoozeType"].SNOOZE_ADJUST})}}),!i&&Ct.a.createElement($t["b"],{label:Oa.t("Until next week"),onSelected:function e(){var t=Object(va["c"])();a.props.snoozeNotifications({duration:t,reason:"DndEnabledMenu:week"});n.track(na["EventId"].DND_SNOOZE_NOTIFICATIONS,{dnd_duration:t,dnd_preset:na["DndPreset"].DURATION_NEXT_WEEK,dnd_snooze_type:na["DndSnoozeType"].SNOOZE_ADJUST})}}),Ct.a.createElement($t["b"],{label:Oa.t("Custom\u2026"),onSelected:function e(){a.props.openDndDialog();n.track(na["EventId"].DND_OPEN_CUSTOM_SNOOZE_DIALOG)}}))}},{key:"render",value:function e(){var t=this;var a=this.props,r=a.inDndBySnooze,n=a.menuProps,i=a.featureGranularDnd,s=a.showNotificationScheduleNewBadge,o=a.isIAP1Enabled;var l;var c;if(i){l=Ct.a.createElement("span",{className:"p-dnd_menu__new_pill"},Oa.t("NEW"));c=s?Ct.a.createElement("span",null,Oa.t("Notification schedule\u2026")," ",l):Oa.t("Notification schedule\u2026")}var u=function e(){r?t.props.endDndSnooze({reason:"DndEnabledMenu:end_snooze"}):t.props.endDndSchedule({reason:"DndEnabledMenu:end_schedule"})};return Ct.a.createElement("div",null,this.renderDndMenuHeader(),Ct.a.createElement($t["f"],Tt()({},n,{menuClassNames:"p-dnd_menu"}),Ct.a.createElement($t["b"],{label:i?Oa.t("Turn off"):Oa.t("Resume notifications now"),onSelected:u,danger:i}),this.renderAdjustMenuItem(),Ct.a.createElement($t["d"],null),Ct.a.createElement($t["b"],{label:i?c:Oa.t("Do Not Disturb schedule\u2026"),onSelected:this.onClickDoNotDisturbSchedule}),!i&&!o&&this.renderSettingsMenuItem(),!i&&!o&&Ct.a.createElement($t["b"],{label:Oa.t("Your notification preferences\u2026",{fallbackHash:"4fa8d4f0498a550e3cf075dc9c810f7b6f771e65"}),onSelected:this.onClickNotificationPreferences}),o&&Ct.a.createElement(ma["a"],null)))}}]);return t}(Et["PureComponent"]);Ea.displayName="DndEnabledMenu";Ea.defaultProps=ka;var Ca=function e(t){var a;var r=Object(Yt["getCurrentUserId"])(t);var n=Object(Jt["getDndScheduleByMemberId"])(t,r),i=n.nextDndEndTs;var s=Object(Jt["getSnoozeScheduleForCurrentUser"])(t),o=s.snoozeEnabled,l=s.snoozeEndTs;var c=Object(Yt["isFeatureEnabled"])(t,"feature_vacation_delight");var u=Object(ua["b"])(t);var d=null===(a=Object(ua["g"])(t,u.id))||void 0===a?void 0:a.canonical;return{inDndBySnooze:o,snoozeEndTs:l,dndEndTs:i,do24hrTime:Object(la["k"])(t,"time24"),clogger:Object(ra["a"])({state:t}),featureGranularDnd:Object(Yt["isFeatureEnabled"])(t,"feature_granular_dnd"),showNotificationScheduleNewBadge:!Object(la["k"])(t,"dnd_notification_schedule_new_badge_seen"),featureVacationDelight:c,canonicalCustomStatus:d}};var Sa=function e(t){return{snoozeNotifications:function e(a){return t(Object(fa["e"])(a))},openDndDialog:function e(){return t(Object(ga["a"])())},endDndSnooze:function e(a){return t(Object(fa["b"])(a))},endDndSchedule:function e(a){return t(Object(fa["a"])(a))},openChannelNotificationPrefsModal:function e(a){return t(Object(_a["a"])(a))},setUserPrefByApi:function e(a){return t(Object(ca["d"])(a))},openPrefsModal:function e(a){return t(Object(ba["a"])(a))}}};var wa=Object(Wt["connect"])(Ca,Sa)(Ea);function ja(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function Ia(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ja(Object(a),true).forEach(function(t){Nt()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ja(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Ta=new Qt["b"]("do_not_disturb");var Aa={currentChannel:{},className:void 0,featureGranularDnd:false,featureClassicNav:false,clogger:{track:ia["noop"]}};var Na=function(e){Ht()(t,e);function t(e){var a;Mt()(this,t);a=Ft()(this,Ut()(t).call(this,e));a.renderMenu=a.renderMenu.bind(qt()(a));Object(sa["a"])(qt()(a),["onClick"]);return a}xt()(t,[{key:"onClick",value:function e(){var t=this.props.clogger;t.track(na["EventId"].DND_MENU_OPEN,{})}},{key:"renderMenu",value:function e(t){var a=this.props,r=a.inDnd,n=a.currentChannel,i=a.featureClassicNav;var s;i&&(s={menuProps:Ia({},t,{onMenuItemSelected:function e(a,r){r.stopPropagation();t.onMenuItemSelected(a,r)}})});if(r)return Ct.a.createElement(wa,Tt()({currentChannel:n,menuProps:t},s));return Ct.a.createElement(oa["a"],Tt()({currentChannel:n,menuProps:t},s))}},{key:"render",value:function e(){var t=this.props,a=t.inDnd,r=t.className,n=t.featureGranularDnd;var i=a?"snooze-outline":"bell-o";return Ct.a.createElement($t["e"],{renderMenu:this.renderMenu,position:"bottom-left",offsetX:-4,offsetY:8,onClick:this.onClick},Ct.a.createElement(aa["c"],{tip:n?Ta.t("Do Not Disturb"):Ta.t("Notifications"),position:"bottom",hideFromScreenReader:true},Ct.a.createElement(ea["a"],{className:Kt()("p-dnd_button",r),"data-qa":"do_not_disturb_btn","aria-label":n?Ta.t("Do Not Disturb"):Ta.t("Notifications"),"aria-pressed":a},Ct.a.createElement(ta["b"],{type:i}))))}}]);return t}(Et["PureComponent"]);Na.displayName="DndButton";Na.defaultProps=Aa;var Pa=function e(t){var a=Object(Xt["a"])(t);return{inDnd:!!Object(Jt["getCurrentMemberDnd"])(t),currentChannel:Object(Zt["e"])(t,a)||void 0,featureGranularDnd:Object(Yt["isFeatureEnabled"])(t,"feature_granular_dnd"),featureClassicNav:Object(Yt["isFeatureEnabled"])(t,"feature_classic_nav"),clogger:Object(ra["a"])({state:t})}};var Ma=Object(Wt["connect"])(Pa)(Na);var Da=a(367);var xa=a(95);var Ra=/\.spec\.jsx?$/;function Fa(e){return!Ra.test(e)}function La(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var a={};if(!e||!Object(ia["isFunction"])(e.keys))throw new Error("Cannot call importAll without a valid require.context.\n\t\t\tSee https://webpack.js.org/guides/dependency-management/#require-context.");var r=t?e.keys():e.keys().filter(Fa);r.forEach(function(t){a[t]=e(t)});return a}var Ua=a(1401);var Ba=a(245);var qa=a.n(Ba);var Ga=a(332);var Ha=a.n(Ga);var Wa=a(392);var Va=a(55);var Ka=a(165);var za=a(226);var Qa=a(1039);var Ya=a(33);var Ja=a(343);var Xa=a(17);var Za=a(368);var $a=a(63);var er=a(124);var tr=a(119);var ar=a(107);var rr=a(22);function nr(e,t){var a=[rr["MESSAGE_CONTAINERS"].MESSAGE_PANE,rr["MESSAGE_CONTAINERS"].CHANNEL_DETAILS_FLEXPANE];if(a.includes(t)||!t){var r=Object(Xt["a"])(e);if(Object(er["a"])(r))return{channelId:r}}else if(t===rr["MESSAGE_CONTAINERS"].THREADS_FLEXPANE){var n=Object(tr["f"])(e);return Object(ar["decodeThreadKey"])(n[0])}return{}}var ir=a(24);var sr=a(250);var or=a(545);var lr=a(1846);var cr={highlighted:false,disabled:false,className:"",onMouseEnter:ia["noop"],onSelected:ia["noop"],menuCallback:ia["noop"],menuCallbackId:null,"data-qa":"menu_item_action_button",activeMenuId:void 0};var ur=function(e){Ht()(t,e);function t(e){var a;Mt()(this,t);a=Ft()(this,Ut()(t).call(this,e));a.disableHighlightedState=false;a.handleMouseEnter=a.handleMouseEnter.bind(qt()(a));a.handleSelected=a.handleSelected.bind(qt()(a));return a}xt()(t,[{key:"componentDidMount",value:function e(){this.bindKeyCommands()}},{key:"componentDidUpdate",value:function e(){this.props.highlighted||(this.disableHighlightedState=false)}},{key:"componentWillUnmount",value:function e(){this.keyCommands&&this.keyCommands.reset()}},{key:"bindKeyCommands",value:function e(){var t=[{keys:["return"],handler:this.handleReturnKey.bind(this)}];this.keyCommands||(this.keyCommands=new sr["a"]);this.keyCommands.bindAll(t)}},{key:"handleMouseEnter",value:function e(t){this.disableHighlightedState=true;this.props.onMouseEnter(t)}},{key:"handleReturnKey",value:function e(t){if(this.props.highlighted){this.handleSelected(t);t&&t.preventDefault&&t.preventDefault()}}},{key:"handleSelected",value:function e(t){this.props.onSelected(t);this.props.menuCallback(this.props.menuCallbackId,t)}},{key:"render",value:function e(){var t=this.props,a=t.disabled,r=t.highlighted,n=t.className,i=t.onMouseEnter,s=t.onSelected,o=t.menuCallback,l=t.menuCallbackId,c=t.activeMenuId,u=qa()(t,["disabled","highlighted","className","onMouseEnter","onSelected","menuCallback","menuCallbackId","activeMenuId"]);var d=Kt()("c-menu_item_action_button",n,{"c-menu_item_action_button--highlighted":r&&!a&&!this.disableHighlightedState});var p=this.props.activeMenuId;return Ct.a.createElement("div",{className:"c-menu_item_action_button__container",onMouseEnter:this.handleMouseEnter,"data-qa":this.props["data-qa"]+"-wrapper"},Ct.a.createElement(ir["d"],Tt()({id:p,className:d,disabled:a,onClick:this.handleSelected,role:"menuitem",tabIndex:"-1",type:"outline"},u)))}}]);return t}(Et["PureComponent"]);ur.displayName="MenuItemActionButton";ur.defaultProps=cr;var dr={MenuItemActionButton:ur};var pr=Object(or["b"])(ur);var mr=a(89);var hr=a(3077);var vr=a(1481);var fr=a(121);var br=a(421);var gr=a(1887);var _r=a(202);var yr=a(1047);var Or=a(585);var kr=a(43);var Er=a(492);var Cr=a(39);var Sr=a(117);var wr={disabled:false,listEntityProps:{}};function jr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var a=function(a){Ht()(r,a);function r(e){var t;Mt()(this,r);t=Ft()(this,Ut()(r).call(this,e));t.state={isActive:false};t.handleMouseEnter=t.handleMouseEnter.bind(qt()(t));t.handleMouseLeave=t.handleMouseLeave.bind(qt()(t));return t}xt()(r,[{key:"handleMouseEnter",value:function e(){this.setState(function(){return{isActive:true}})}},{key:"handleMouseLeave",value:function e(){this.setState(function(){return{isActive:false}})}},{key:"render",value:function a(){var r=this.props,n=r.id,i=r.listEntityProps,s=qa()(r,["id","listEntityProps"]);var o=this.state.isActive;var l=Kt()(i.className,t.className);return Ct.a.createElement(ea["a"],Tt()({onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},s),Ct.a.createElement(e,Tt()({id:n,isActive:o&&!this.props.disabled,isDisabled:this.props.disabled},t,i,{className:l})))}}]);return r}(Et["PureComponent"]);a.displayName="ListEntityButton";a.defaultProps=wr;return a}var Ir=a(1604);var Tr=jr(Ir["a"],{useShortMode:true});var Ar=a(4754);var Nr=new Qt["b"]("workflow_builder");var Pr=function e(t){var a=t.closeModal,r=t.collaborators,n=t.appName;var i=Object(Et["useCallback"])(function(){return r.map(function(e){return Ct.a.createElement(Er["a"],{key:e,userId:e,position:"left-bottom",includeRemoveFromChannelAction:true},Ct.a.createElement(Tr,{id:e,className:"p-members_dialog__member_list_btn","data-qa":"collaborator_row_btn"}))})},[r]);return Ct.a.createElement(Sr["a"],{title:Nr.rt("{usernameCount} collaborators on {appName}",{usernameCount:r.length,appName:n}),overlayClassName:"p-collaborators_dialog__overlay",onClose:a,showGoButton:false,cancelText:Nr.t("Close")},i())};Pr.displayName="CollaboratorsDialog";var Mr=function e(t){return{closeModal:function e(){return t(Object(Cr["closeModal"])())}}};var Dr=Object(Wt["connect"])(null,Mr)(Pr);var xr=a(2771);var Rr=a(316);var Fr=a(4756);var Lr=new Qt["b"]("app_card");var Ur=function e(t){var a=t.memberId;return Ct.a.createElement(Er["a"],{userId:a,position:"left-bottom"},Ct.a.createElement(kr["a"],null,Ct.a.createElement(Rr["a"],{id:a})))};Ur.displayName="Collaborator";var Br=function e(t){var a=t.collaborators,r=t.openModal,n=t.appName;var i=a[0];var s=a[1];switch(a.length){case 0:return"";case 1:return Lr.rt("{username} created this workflow. ",{username:Ct.a.createElement(Ur,{memberId:i})});case 2:return Lr.rt("{firstUser} and {secondUser} are collaborators on this workflow.",{firstUser:Ct.a.createElement(Ur,{memberId:i}),secondUser:Ct.a.createElement(Ur,{memberId:s})});default:return Lr.rt("{firstUser}, {secondUser} and {userCount} other people are <a>collaborators on this workflow</a>.",{firstUser:Ct.a.createElement(Ur,{memberId:i}),secondUser:Ct.a.createElement(Ur,{memberId:s}),userCount:a.length-2},function(e){var t=e.text;return Ct.a.createElement("span",{"data-collaborators-count":true},Ct.a.createElement(kr["a"],{onClick:function e(){return r({element:Ct.a.createElement(Dr,{collaborators:a,appName:n})})}},t))})}};var qr=Object(Wt["connect"])(null,function(e){return{openModal:function t(){return e(Cr["openModal"].apply(void 0,arguments))}}})(Br);var Gr=function e(t){var a=t.app,r=t.cardHeader,n=t.launchWorkflowBuilder,i=t.currentUserId,s=t.disabledMessage;var o=Object(ia["get"])(a,"legacy_app.owner_ids",[]);var l=o.some(function(e){return e===i});return Ct.a.createElement("div",{className:"p-app_profile_card__container","data-qa":"app_profile_card_container"},Ct.a.createElement($t["f"],{width:320,noMargin:true},r,Ct.a.createElement(Ct.a.Fragment,null,Ct.a.createElement($t["d"],{noPaddingAbove:true}),s&&s,!s&&o.length>0&&Ct.a.createElement("div",{className:"p-workflow_profile_card--body"},Ct.a.createElement("div",null,Ct.a.createElement(qr,{collaborators:o,appName:a.profile.name})))),!l&&Ct.a.createElement(Ct.a.Fragment,null,Ct.a.createElement($t["d"],{noPaddingAbove:true}),Ct.a.createElement("div",{"data-workflow-profile-card-non-installer":true,className:"p-workflow_profile_card--body"},Lr.rt("Created with <a>Workflow Builder</a>.",null,function(e){var t=e.text;return Ct.a.createElement("span",{className:"margin_left_25"},Ct.a.createElement(kr["a"],{onClick:n},t))}))),l&&Ct.a.createElement("div",{"data-workflow-profile-card-installer":true},Ct.a.createElement($t["d"],{noPaddingAbove:true}),Ct.a.createElement(pr,{onClick:function e(){return n({subPath:"slack-apps/"+a.app_id,source:"workflow_profile_card"})},className:"margin_bottom_100"},Lr.t("Open in Workflow Builder")))))};Gr.displayName="WorkflowProfileCard";Gr.defaultProps={cardHeader:null,currentUserId:null,disabledMessage:null};var Hr=Object(Wt["connect"])(null,function(e){return{launchWorkflowBuilder:function t(){return e(xr["a"].apply(void 0,arguments))}}})(Gr);var Wr=a(109);var Vr=a(321);var Kr=a(1575);var zr=a(291);var Qr=a(27);var Yr=a(3079);var Jr={externalTeam:void 0};function Xr(e){var t=e.externalTeam;var a=Object(Qr["getTeamDisplayName"])(t);var r=Object(Qr["getTeamId"])(t);if(!t||!a)return null;return Ct.a.createElement("div",{className:"p-app_external_team_banner"},Ct.a.createElement("span",{className:"p-app_external_team_banner__team_name overflow_ellipsis bold"},a),r&&Ct.a.createElement(zr["b"],{id:r,className:"p-app_external_team_banner__team_icon"}))}Xr.displayName="AppExternalTeamBanner";Xr.defaultProps=Jr;var Zr={colorHex:"#2C2D30",isError:false,externalTeam:void 0};function $r(e){var t=e.colorHex,a=e.imageUrl,r=e.name,n=e.isError,i=e.externalTeam;var s=Object(Vr["g"])(t)||[];var o={background:"\n\t\t\tlinear-gradient(\n\t\t\t\t136.53deg,\n\t\t\t\trgba(255, 255, 255, 0.05) 0%,\n\t\t\t\trgba(255, 255, 255, 0.2) 100%\n\t\t\t),\n\t\t\tlinear-gradient(\n\t\t\t\t312.01deg,\n\t\t\t\t"+t+" 0%,\n\t\t\t\trgba("+s.join(",")+", 0.75) 100%\n\t\t\t)\n\t\t",backgroundColor:t};var l=Kt()("full_width",{"p-app_profile_card__header--external":i,"p-app_profile_card__header":!i});return n?null:Ct.a.createElement("div",{className:l,style:o,"data-qa":"app_card_header"},Ct.a.createElement(Xr,{externalTeam:i}),Ct.a.createElement("img",{className:"p-app_profile_card__avatar",src:a,alt:r,"data-qa":"app_header_icon"}),Ct.a.createElement("div",{className:"padding_left_100"},Ct.a.createElement("div",{className:"padding_bottom_25"},Ct.a.createElement("strong",{"data-qa":"app_header_name"},r),Ct.a.createElement("span",{className:"margin_left_50"},Ct.a.createElement(Kr["a"],{inverse:true,"data-qa":"app_header_app_label",isWorkflow:true})))))}$r.defaultProps=Zr;var en=Object(Wr["pure"])($r);var tn={colorHex:"#2C2D30",isError:false,externalTeam:void 0};function an(e){var t=e.colorHex,a=e.imageUrl,r=e.name,n=e.onClick,i=e.isError,s=e.externalTeam,o=e.tagline;var l=Object(Vr["g"])(t)||[];var c={background:"\n\t\t\tlinear-gradient(\n\t\t\t\t136.53deg,\n\t\t\t\trgba(255, 255, 255, 0.05) 0%,\n\t\t\t\trgba(255, 255, 255, 0.2) 100%\n\t\t\t),\n\t\t\tlinear-gradient(\n\t\t\t\t312.01deg,\n\t\t\t\t"+t+" 0%,\n\t\t\t\trgba("+l.join(",")+", 0.75) 100%\n\t\t\t)\n\t\t",backgroundColor:t};var u=Kt()("full_width",{"p-app_profile_card__header--external":s,"p-app_profile_card__header":!s,cursor_pointer:n!==ia["noop"]});return i?null:Ct.a.createElement(ir["c"],{className:u,onClick:n,style:c,"data-qa":"app_card_header"},Ct.a.createElement(Xr,{externalTeam:s}),Ct.a.createElement("img",{className:"p-app_profile_card__avatar",src:a,alt:r,"data-qa":"app_header_icon"}),Ct.a.createElement("div",{className:"p-app_profile_card__title"},Ct.a.createElement("div",{className:"display_flex align_items_center padding_bottom_25"},Ct.a.createElement("strong",{className:"overflow_ellipsis","data-qa":"app_header_name"},r),Ct.a.createElement("span",{className:"margin_left_50"},Ct.a.createElement(Kr["a"],{inverse:true,"data-qa":"app_header_app_label"}))),Ct.a.createElement("div",{className:"p-app_profile_card__description","data-qa":"app_header_description"},o)))}an.defaultProps=tn;var rn=Object(Wr["pure"])(an);var nn=a(561);var sn=new Qt["b"]("app_card");var on={appType:void 0,memberId:void 0,appHomeTeamDisplayName:void 0,appName:"this app",installerIsYou:false,featureAddAppHomeTeamName:false};function ln(e){var t=e.appType,a=e.memberId,r=e.appName,n=e.isError,i=e.installerIsYou,s=e.appHomeTeamDisplayName,o=e.featureAddAppHomeTeamName;var l;if(i)l=sn.rt("You added {appName} to this workspace.",{appName:r});else{var c=Ct.a.createElement(nn["a"],{id:a});l=s&&o?sn.rt("{appName} is installed on {appHomeTeamDisplayName}.",{appHomeTeamDisplayName:s,appName:r}):"custom_integration"===t?sn.rt("{installer} added this custom integration to this workspace.",{installer:c,appName:r}):"slack"===t?sn.rt("{installer} configured {appName} to post in this channel.",{installer:c,appName:r}):sn.rt("{installer} added {appName} to this workspace.",{installer:c,appName:r})}return n?null:Ct.a.createElement("div",{className:"p-app_profile_card__installation_summary","data-qa":"app_card_installation_summary"},Ct.a.createElement("span",{"data-qa-app-profile-card-installation-summary":true},l))}ln.defaultProps=on;var cn=Object(Wr["pure"])(ln);var un=a(2747);var dn=a(1969);var pn=a(1968);var mn=a(26);var hn=a(2782);function vn(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function fn(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?vn(Object(a),true).forEach(function(t){Nt()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):vn(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var bn=new Qt["b"]("app_card");var gn="USER_CARD_CLICK";function _n(e){var t=e.appId,a=e.appUser,r=e.channelIdToRemoveFrom,n=e.dispatch,i=e.homeWorkspaceId,s=e.isActive,o=e.isExternal,l=e.isMemberRestricted,c=e.isMemberUltraRestricted,u=e.isXoxaApp,d=e.memberId,p=e.serviceId,m=e.showAppSettings,h=e.showAppDirectoryLink,v=e.currentTeamId,f=e.currentUserId,b=e.locale,g=e.currentEnterpriseId,_=e.featureM11nChannelDetails;var y=Object(ra["a"])({userId:f,teamId:v,locale:b,enterpriseId:g});var O=Object(Ya["d"])(Object(mn["d"])(v));var k={app_id:t,bot_id:p};var E=function e(){return y.track(gn,k)};var C=[{key:"about_app",label:bn.t("About this app"),click:function e(){E();y.track("APP_CLICK_LINK_APP_ABOUT_IN_USER_CARD",fn({},k,{contexts:{ui_context:{step:"user_card",action:"click",ui_element:"link_app_about"}}}));n(Object(vr["a"])({memberId:d,serviceId:p,homeWorkspaceId:i}))},show:true,dataQa:"app_card_view_details"},{key:"app_directory_link",label:bn.t("View in app directory"),href:Object(Qr["getTeamUrl"])(O,"/apps/"+t+"?utm_source=in-prod&utm_medium=inprod-link_app_directory-user_card-click"),click:function e(){E();y.track("APP_CLICK_LINK_APP_DIRECTORY_IN_USER_CARD",fn({},k,{contexts:{ui_context:{step:"user_card",action:"click",ui_element:"link_app_directory"}}}))},show:h,dataQa:"app_card_view_app_directory"},{key:"settings",label:bn.t("Settings"),href:u?void 0:Object(ia["trimEnd"])(Object(Qr["getTeamUrl"])(O),"/")+"/services/"+p+"?utm_source=in-prod&utm_medium=inprod-link_app_settings-user_card-click",click:function e(){E();y.track("APP_CLICK_LINK_APP_SETTINGS_IN_USER_CARD",{contexts:{ui_context:{step:"user_card",action:"click",ui_element:"link_app_settings"}}});if(!u)return;n(Object(un["a"])({serviceId:p,referringEventId:gn}))},show:m,dataQa:"app_card_edit_settings"},{key:"channel_invite",label:bn.t("Add this app to a channel ..."),click:function e(){E();n(Object(hn["a"])({memberId:a.id}))},show:a&&s&&(u?!l:!c),dataQa:"app_card_invite_to_channel"},{key:"channel_remove",dataQa:"app_card_remove",click:function e(){var i,s,o;if(!_)return;var l=(i={},Nt()(i,na["UiContextKeys"].action,na["UiAction"].CLICK),Nt()(i,na["UiContextKeys"].ui_element,na["UiElement"].BTN_REMOVE_APP),i);y.track(gn,{contexts:(o={},Nt()(o,na["ClientEventKeys"].ui_context,l),Nt()(o,na["ClientEventKeys"].core,(s={},Nt()(s,na["CoreKeys"].app_id,t),Nt()(s,na["CoreKeys"].bot_id,p),Nt()(s,na["CoreKeys"].channel_id,r),s)),o)});n(u?Object(pn["a"])({appUserId:a.id,channelId:r,referringEventId:gn,referringUiContext:l}):Object(dn["a"])({memberId:a.id,channelId:r}))},label:_?bn.rt("Remove this app from {channelName} ...",{channelName:Ct.a.createElement("strong",null,Ct.a.createElement(pa["a"],{className:"cursor_pointer",inline:true,channelId:r,iconProps:{inherit:true,align:"baseline"}}))}):void 0,show:_&&!!r&&!o}];return C.filter(function(e){return e.show})}var yn=_n;var On=a(3093);var kn=new Qt["b"]("app_card");var En={app:void 0,appUser:void 0,installedByMember:void 0,isError:false,menuProps:{},memberId:void 0,installerIsYou:false,externalTeam:{},currentEnterpriseId:void 0,currentUserId:void 0,appHomeTeamDisplayName:void 0,viewContext:rr["MESSAGE_CONTAINERS"].MESSAGE_PANE,channelId:void 0,threadTs:void 0,isMemberRestricted:false,isMemberUltraRestricted:false,isActive:false,isExternal:false,isOrgShared:false,showAppSettings:false,showAppDirectoryLink:false,showSlashCommands:false,canBeRemovedFromChannel:false,commands:[]};var Cn=function(e){Ht()(t,e);function t(e){var a;Mt()(this,t);a=Ft()(this,Ut()(t).call(this,e));a.onHeaderClick=a.onHeaderClick.bind(qt()(a));a.autoFillSlashCommand=a.autoFillSlashCommand.bind(qt()(a));return a}xt()(t,[{key:"shouldComponentUpdate",value:function e(t){var a=this.props,r=a.commands,n=qa()(a,["commands"]);var i=t.commands,s=qa()(t,["commands"]);return!Object(Ka["a"])(n,s)||!Object(Ka["a"])(r,i)}},{key:"onHeaderClick",value:function e(){var t=this.props,a=t.app,r=t.memberId,n=t.menuProps.onTriggerClose,i=t.serviceId,s=t.clogger,o=t.dispatch;var l=a.app_id,c=a.home_workspace_id;s.track("USER_CARD_CLICK",{app_id:l,bot_id:i});o(Object(vr["a"])({memberId:r,serviceId:i,homeWorkspaceId:c}));n&&n()}},{key:"autoFillSlashCommand",value:function e(t){if(this.props.featureSonicInputs){var a=Object(_r["a"])({viewContext:this.props.viewContext,channelId:this.props.channelId,threadTs:this.props.threadTs});if(!a)return;a.prependContents({contents:(new Ha.a).insert(t+" ").ops});a.focus()}else Object(gr["b"])(t)}},{key:"render",value:function e(){var t=this;var a=this.props,r=a.app,n=a.appUser,i=a.commands,s=a.defaultAppIcon,o=a.menuProps,l=a.installedByMember,c=a.installerIsYou,u=a.isError,d=a.dispatch,p=a.serviceId,m=a.currentTeam,h=a.externalTeam,v=a.currentUserId,f=a.currentEnterpriseId,b=a.appHomeTeamDisplayName,g=a.featureAddAppHomeTeamName,_=a.isMemberRestricted,y=a.isMemberUltraRestricted,O=a.isActive,k=a.isExternal,E=a.isOrgShared,C=a.showAppSettings,S=a.showAppDirectoryLink,w=a.showSlashCommands,j=a.channelId,I=a.canBeRemovedFromChannel,T=a.featureM11nChannelDetails;if(Object(Va["d"])(r))return Ct.a.createElement("div",{className:"p-app_profile_card__container"},Ct.a.createElement($t["f"],{menuClassNames:"p-app_profile_card p-app_profile_card--loading",width:320},Ct.a.createElement(mr["a"],null)));if(!Object(Va["b"])(r))return null;var A=Object(br["b"])(r.profile,192,s);var N=Ct.a.createElement(rn,{colorHex:r.profile.color,imageUrl:A,name:r.profile.name,onClick:!O||k?ia["noop"]:this.onHeaderClick,tagline:r.profile.tagline,isError:u,externalTeam:h});var P=O||E||k||_?null:Ct.a.createElement("div",{className:"c-menu_item__li p-app_profile_card__disabled_message","data-qa":"app_card_app_disabled"},Object(Or["d"])(r)?kn.t("This workflow has been disabled"):kn.t("This app has been disabled"));var M=yn({appId:r.app_id,appUser:n,channelIdToRemoveFrom:I&&j,dispatch:d,featureM11nChannelDetails:T,homeWorkspaceId:r.home_workspace_id,isActive:O,isMemberRestricted:_,isMemberUltraRestricted:y,isXoxaApp:"xoxa"===r.app_type,isExternal:k,showAppSettings:C,showAppDirectoryLink:S,legacyApp:r.legacy_app,serviceId:p,currentTeamId:m.id,currentUserId:v,locale:Object(Qt["s"])(),currentEnterpriseId:f});var D=M.map(function(e){return"separator"===e.type?Ct.a.createElement($t["d"],{key:e.key}):Ct.a.createElement($t["b"],{key:e.key,label:e.label,onSelected:e.click,href:e.href,"data-qa":e.dataQa})});if(Object(Or["d"])(r))return Ct.a.createElement(Hr,{app:r,cardHeader:Ct.a.createElement(en,{colorHex:r.profile.color,imageUrl:A,name:r.profile.name,isError:u,externalTeam:h}),currentUserId:v,disabledMessage:P});var x=i.slice(0,3);var R=w&&x.length?x.map(function(e){return Ct.a.createElement($t["b"],{key:e.name,onSelected:function a(){return t.autoFillSlashCommand(e.name)},"data-qa":"app_card_slash_command"},Ct.a.createElement(Ct.a.Fragment,null,Ct.a.createElement("div",{className:"block overflow_ellipsis"},Ct.a.createElement("strong",{className:"margin_right_25"},e.name),e.usage),Ct.a.createElement("div",{className:"p-app_profile_card__command_desc c-menu_item__description"},e.description)))}):null;var F;var L=O&&r.installation&&r.installation.installer_user_id||b&&g;L&&(F=Ct.a.createElement(cn,{appType:r.app_type,memberId:l&&l.id,appName:r.profile.name,isError:u,appHomeTeamDisplayName:b,featureAddAppHomeTeamName:g,installerIsYou:c}));var U=null;var B=O&&r.app_user;k&&(B=r.app_user&&"xoxp"===r.app_type);E&&(B=!!r.app_user);B&&(U=Ct.a.createElement(pr,{className:"p-app_profile_card__direct_message_button",onSelected:function e(){return d(Object(fr["startImByMemberId"])({memberId:n.id}))}},kn.t("Go to App")));return Ct.a.createElement("div",{className:"p-app_profile_card__container","data-qa":"app_profile_card_container"},Ct.a.createElement($t["f"],Tt()({},o,{width:320,noMargin:true,menuClassNames:"p-app_profile_card"}),N,Ct.a.createElement($t["d"],{noPaddingAbove:true}),P,D,R&&Ct.a.createElement($t["d"],null),R,F&&Ct.a.createElement($t["d"],null),F,U))}}]);return t}(Et["Component"]);Cn.displayName="AppProfileCard";Cn.defaultProps=En;var Sn=function e(t,a){var r=a.serviceId,n=a.homeWorkspaceId,i=a.memberId,s=a.viewContext;var o=Object(Qa["getAppProfileByIds"])(t,{serviceId:r,homeWorkspaceId:n,memberId:i});var l=Object(Ya["d"])(t);var c=Object(yr["j"])(t,o);var u=Object(yr["e"])(t,o);var d=Object(Yt["pageNeedsEnterprise"])(t);var p=d?Object(Ya["i"])(t).id:void 0;var m=Object(ua["b"])(t);var h=o&&Object(ua["e"])(t,Object(yr["f"])(o));var v=Object(yr["a"])(t,o);var f=nr(t,s),b=f.channelId,g=f.threadTs;var _=Object(ua["e"])(t,i||o&&o.app_user&&o.app_user.id);var y=b&&Object(Ja["getChannelMembershipInfoForUser"])(t,b,i);var O=b&&y.isKnown&&y.isMember&&Object($a["u"])(t,b,_);var k=[];b&&o.commands&&(k=o.commands.filter(function(e){return Object(Za["j"])(t,e,{channelId:b,isThread:!!g}).isEnabled}));return{app:o,appUser:_,channelId:b,threadTs:g,commands:k,defaultAppIcon:Object(za["getDefaultAppIcon"])(t),installedByMember:h,installerIsYou:Object(yr["g"])(t,o),isActive:Object(yr["i"])(o),isExternal:c,isOrgShared:Object(yr["k"])(t,o),showAppSettings:Object(yr["n"])(t,o),showAppDirectoryLink:Object(yr["m"])(t,o),showSlashCommands:Object(yr["o"])(t,o),featureAddAppHomeTeamName:Object(Yt["isFeatureEnabled"])(t,"feature_add_app_home_team_name"),featureSonicInputs:Object(Yt["isFeatureEnabled"])(t,"feature_sonic_inputs"),homeWorkspaceId:Object(yr["b"])(o)||n,currentTeam:l,externalTeam:u,clogger:Object(ra["a"])({state:t}),currentEnterpriseId:p,currentUserId:m.id,appHomeTeamDisplayName:v,isMemberRestricted:Object(Xa["isRestricted"])(m),isMemberUltraRestricted:Object(Xa["isUltraRestricted"])(m),canBeRemovedFromChannel:O,featureM11nChannelDetails:Object(Yt["isFeatureEnabled"])(t,"feature_m11n_channel_details")}};var wn=Object(Wa["b"])(Object(Wt["connect"])(Sn)(Cn));var jn=wn;var In=a(344);var Tn=a(104);var An=a(348);var Nn=a(1081);var Pn=a(2654);var Mn=a(2655);var Dn=a(2656);var xn=a(2657);var Rn=a(2658);var Fn=a(1881);var Ln=a(1209);var Un=a(1060);var Bn=new Qt["b"]("member_profile");var qn=new Qt["b"]("team");function Gn(e){var t=e.fullName,a=e.memberType;if(a)return Bn.t("Profile image for {fullName}. {memberType}. Hit enter to view profile",{fullName:t,memberType:a});return Bn.t("Profile image for {fullName}. Hit enter to view profile",{fullName:t})}function Hn(e){if(!e.profile.status_emoji&&!e.profile.status_text)return null;return Bn.t("Status, {statusEmoji} {statusText}",{statusEmoji:Object(Un["a"])(e.profile.status_emoji),statusText:e.profile.status_text})}function Wn(e,t){var a=Object(mn["d"])(e);var r=Object(Xa["getTeamIdForMember"])(a,t);var n=Object(Ya["k"])(a,r);if(Object(Xa["isExternal"])(t))return Object(Qr["getTeamDisplayName"])(n);if(Object(Xa["isDeleted"])(t))return qn.t("Deactivated account",{fallbackHash:"d57fa5164165105a1507c830ae06f7af8307870a",fallbackHashNs:"team"});if(Object(Xa["isUltraRestricted"])(t)){if(Object(Xa["isInvitedUser"])(t))return qn.t("Invited Guest");return qn.t("Single-Channel Guest")}if(Object(Xa["isRestricted"])(t)){if(Object(Xa["isInvitedUser"])(t))return qn.t("Invited Guest");return qn.t("Multi-Channel Guest")}if(Object(Xa["isOwner"])(a,t))return qn.t("Owner of {teamName}",{teamName:Object(Qt["q"])(Object(Qr["getTeamDisplayName"])(n))});if(Object(Xa["isAdmin"])(a,t))return qn.t("Workspace Admin");if(Object(Xa["isInvitedUser"])(t))return qn.t("Invited Member");return null}var Vn=a(2424);var Kn=a(2866);var zn=a(152);var Qn=new Qt["b"]("member_profile");var Yn={onMenuItemSelected:ia["noop"],canRemoveFromChannel:false,channelId:void 0,featureModernProfileFlexpane:false};function Jn(e){var t=e.memberId,a=e.onMenuItemSelected,r=e.canRemoveFromChannel,n=e.channelId,i=e.dispatchOpenRemoveMemberDialog,s=e.featureModernProfileFlexpane;if(r&&n){var o=Ct.a.createElement("strong",null,Ct.a.createElement(pa["a"],{className:"p-member_profile_card__context_action_channel_name",inline:true,channelId:n,iconProps:{inherit:true,align:"baseline"}}));var l=s?Qn.rt("Remove from {channelName}",{channelName:o}):"";var c=function e(){i({memberId:t,channelId:n});a()};var u="member_profile_card_remove_from_channel";return Ct.a.createElement("div",{className:"p-member_profile_card__context_action_container"},Ct.a.createElement(zn["a"],{className:"p-member_profile_card__context_action","data-qa":u,onClick:c},l))}return null}Jn.defaultProps=Yn;function Xn(e,t){var a=t.memberId,r=t.viewContext;var n=nr(e,r),i=n.channelId;var s=i&&Object(Ja["getChannelMembershipInfoForUser"])(e,i,a);var o=Object(Yt["getCurrentUserId"])(e)===a;var l=!o&&s&&s.isKnown&&s.isMember&&Object($a["g"])(e,i)&&Object(Xa["canMemberBeRemoved"])(e,a);return{canRemoveFromChannel:l,channelId:i,featureModernProfileFlexpane:Object(Yt["isFeatureEnabled"])(e,"feature_modern_profile_flexpane")}}var Zn={dispatchOpenRemoveMemberDialog:function e(){return dn["a"].apply(void 0,arguments)}};var $n=Object(Wa["b"])(Object(Wt["connect"])(Xn,Zn)(Jn));var ei=new Qt["b"]("member_profile");var ti={currentMember:void 0,member:void 0,memberTeam:void 0,onClose:ia["noop"],showMemberProfile:ia["noop"],team:void 0,includeRemoveFromChannelAction:false,canInteract:true,clogger:{track:ia["noop"]},onCardClick:ia["noop"],onMessageClick:ia["noop"],onCallClick:ia["noop"]};function ai(e){var t=e.currentMember,a=e.member,r=e.memberTeam,n=e.onCardClick,i=e.onClose,s=e.showMemberProfile,o=e.team,l=e.includeRemoveFromChannelAction,c=e.canInteract,u=e.clogger,d=e.onMessageClick,p=e.onCallClick;var m=Object(Nn["a"])(function(){var e=[Ln["a"].STATUS];t!==a&&e.push(Ln["a"].TIME);return e},[t,a]);var h=Object(An["a"])(),v=h.featureModernProfileFlexpane;var f=Object(Et["useCallback"])(function(){u.track(na["EventId"].USER_CARD_CLICK);n();i()},[u,n,i]);Object(Et["useEffect"])(function(){var e=document.getElementById("member_profile_card_photo");e&&e.focus()},[]);if(!v)return null;var b=Ct.a.createElement(Pn["a"],{className:"p-member_profile_card__picture",member:a});var g=Ct.a.createElement(Dn["a"],{className:"p-member_profile_card__restriction",member:a,team:r});var _=Ct.a.createElement(Fn["a"],{className:"p-member_profile_card__name",member:a});if(Object(Qr["isUnavailable"])(r))return Ct.a.createElement("div",{className:"p-member_profile_card","data-qa":"member_profile_card"},Ct.a.createElement("div",{className:"p-member_profile_card__header"},b,g),_,Ct.a.createElement(xn["a"],{memberTeam:r}));if(!c)return Ct.a.createElement("div",{className:"p-member_profile_card","data-qa":"member_profile_card"},Ct.a.createElement("div",{className:"p-member_profile_card__header"},b,g),_,Ct.a.createElement(Rn["a"],{member:a}));return Ct.a.createElement("div",{className:"p-member_profile_card","data-qa":"member_profile_card"},Ct.a.createElement("div",{className:"p-member_profile_card__header"},Ct.a.createElement(ea["a"],{id:"member_profile_card_photo",className:"p-member_profile_card__picture_trigger","data-qa":"member_profile_card_photo",onClick:function e(){s({memberId:a.id});f()},"aria-label":Gn({fullName:Object(Xa["getMemberRealName"])(a),memberType:Wn(o.id,a)})},Ct.a.createElement("span",{className:"p-member_profile_card__picture_hint"},ei.t("Click to view profile")),b),g),Ct.a.createElement(Fn["a"],{className:"p-member_profile_card__name",member:a,onClick:f,onShowMemberProfile:function e(){s({memberId:a.id})},clogger:u}),Ct.a.createElement(Ln["b"],{member:a,onClick:f,team:o,types:m}),Ct.a.createElement(Mn["a"],{className:"p-member_profile_card__buttons",member:a,onClick:f,showCallButton:true,callLogContext:Kn["a"].miniProfileCard,clogger:u,onCallClick:p,onMessageClick:d}),l?Ct.a.createElement($n,{memberId:a.id,onMenuItemSelected:f}):null)}ai.displayName="MemberProfileCard";ai.defaultProps=ti;function ri(e,t){var a=t.memberId;var r=Object(ua["e"])(e,a);if(!r)return{};var n=Object(Yt["isFeatureEnabled"])(e,"feature_stranger_danger")?Object(In["canMemberInteractById"])(e,a):!Object(Xa["isStranger"])(r);return{currentMember:Object(ua["b"])(e),member:r,memberTeam:Object(Ya["k"])(e,Object(Xa["getTeamIdForMember"])(e,r)),team:Object(Ya["d"])(e),canInteract:n,clogger:Object(ra["a"])({state:e})}}var ni={showMemberProfile:function e(){return Tn["k"].apply(void 0,arguments)}};var ii=Object(Wt["connect"])(ri,ni)(ai);var si=ii;var oi=a(262);var li=a(21);var ci=a(517);var ui={serviceId:void 0,memberId:void 0,homeWorkspaceId:void 0,menuProps:void 0,memberIsHuman:false,includeRemoveFromChannelAction:false};function di(e){var t=e.serviceId,a=e.memberId,r=e.homeWorkspaceId,n=e.menuProps,i=e.memberIsHuman,s=e.includeRemoveFromChannelAction;if(t&&!i)return Ct.a.createElement(jn,{serviceId:t,memberId:a,homeWorkspaceId:r,menuProps:n});if(a&&i){var o=n||{},l=o.onClose,c=o.onCallClick,u=o.onCardClick,d=o.onMessageClick;return Ct.a.createElement(si,{memberId:a,onClose:l,onCallClick:c,onMessageClick:d,onCardClick:u,includeRemoveFromChannelAction:s})}return null}di.defaultProps=ui;var pi={userId:zt["default"].string,botId:zt["default"].string,botProfile:zt["default"].object};var mi=function e(t,a){var r=a.userId,n=a.botId,i=a.botProfile;var s=Object(oi["maybeGetBotAndMemberByIds"])(t,{userId:r,botId:n,botProfile:i}),o=s.member,l=s.bot,c=s.memberIsHuman;var u=Object(li["b"])(t);var d=Object(ci["getTeamIdFromBotOrUser"])({member:o,bot:l,botProfile:i,currentTeamId:u});return{serviceId:l&&l.id,memberId:o&&o.id,homeWorkspaceId:d,memberIsHuman:c}};var hi=Object(Wt["connect"])(mi)(di);hi.propTypes=pi;var vi=function e(t){return Ct.a.createElement(hi,t)};vi.displayName="renderProfileCard";var fi=hi;var bi=a(2962);var gi=a(62);var _i=a(1035);var yi=a(69);var Oi=a(562);var ki=a(34);var Ei=new Set(["/apps","/services","/account","/admin","/customize","/pricing","/stats","/help","/plans","/interop"]);function Ci(e,t,a,r){if(!e)return false;var n=e;var i=Object(Qr["getTeamUrl"])(t);e.startsWith(i)&&(n=n.slice(i.length-1));var s=n;s.startsWith("/")||(s="/"+s);var o=s.indexOf("/",1);o>-1&&(s=s.slice(0,o));var l=s.indexOf("?");l>-1&&(s=s.slice(0,l));if(Ei.has(s)){a&&a.preventDefault&&a.preventDefault();a&&a.stopPropagation&&a.stopPropagation();Object(Qr["openAuthenticatedUrlInBrowser"])(t,n,r);return true}return false}var Si=a(1185);var wi=a(1389);var ji={children:void 0,onClick:void 0,className:void 0,disabled:false,invert:false,redirDomain:void 0,clogLinkClick:ia["noop"],hideReferersPref:true,permalinkContainsUnknownChannel:false,onMouseDown:void 0,onMouseEnter:void 0,onMouseLeave:void 0,onCopy:void 0,openPermalink:ia["noop"],refToForward:void 0,currentTeam:void 0,target:void 0,maybeOpenSuspiciousLinkDialog:ia["noop"],featureWysiwygAnchorText:false};var Ii=function(e){Ht()(t,e);function t(e){var a;Mt()(this,t);a=Ft()(this,Ut()(t).call(this,e));a.onClick=a.onClick.bind(qt()(a));return a}xt()(t,[{key:"onClick",value:function e(t){var a=this.props,e=a.onClick,r=a.href,n=a.target,i=a.currentTeam,s=a.maybeOpenSuspiciousLinkDialog,o=a.featureWysiwygAnchorText;if(e){e(t);t.defaultPrevented||Ci(r,i,t,n);return}if(Ci(r,i,t,n))return;if(o){s(t);if(t.defaultPrevented)return}if(Object(Oi["a"])(t))return;if(1===t.button)return;if(this.props.openPermalink({permalink:r})){t.preventDefault();t.stopPropagation()}}},{key:"render",value:function e(){var t=this.props.refToForward;return Ct.a.createElement(wi["a"],Tt()({ref:t},this.props,{onClick:this.onClick}))}}]);return t}(Et["PureComponent"]);Ii.displayName="ExternalLink";Ii.defaultProps=ji;Ii.displayName="ExternalLink";var Ti=Ct.a.forwardRef(function(e,t){return Ct.a.createElement(Ii,Tt()({},e,{refToForward:t}))});var Ai=function e(t,a){var r=a.href;var n=Object(li["b"])(t);var i=Object(Ya["k"])(t,n);var s=Object(Xt["a"])(t);Object(ki["a"])()&&r.startsWith("/")&&(r=Object(Qr["getTeamUrl"])(i,r));var o=Object(_i["b"])(r);var l=false;if(o&&Object(er["a"])(o)){var c=Object(Zt["e"])(t,o);l=Object(ha["isUnknown"])(c)}var u=Object(yi["parseUrl"])(r);var d=u&&u.pathname;var p=u&&u.hostname;if(Object(yi["isValidSlackHostName"])(p)&&Object(ia["startsWith"])(d,"/files/")||Object(yi["isGantryUrl"])(r)&&Object(ia["startsWith"])(d,"/docs/")){r=Object(yi["setUrlQueryStringValue"])(r,"origin_team",n);s&&(r=Object(yi["setUrlQueryStringValue"])(r,"origin_channel",s))}return{href:r,currentTeam:i,redirDomain:Object(Yt["getFromBootData"])(t,"redir_domain"),hideReferersPref:Object(gi["a"])(t,"hide_referers"),permalinkContainsUnknownChannel:l,featureWysiwygAnchorText:Object(bi["a"])(t)}};var Ni={openPermalink:function e(){return Si["b"].apply(void 0,arguments)}};var Pi=Object(Wt["connect"])(Ai,Ni)(Ii);var Mi=Ct.a.forwardRef(function(e,t){return Ct.a.createElement(Pi,Tt()({},e,{refToForward:t}))});Ti.propTypes={href:zt["default"].string.isRequired};var Di=Mi;Si["b"].register(Ua["a"]);Si["c"].register(vi);Si["a"].register(function(){return Di});Object(Da["a"])({ToastContainer:jt["a"],DndButton:Ma});La(a(3105));window.React=Ct.a;window.ReactDOM=wt.a;window.moment=xa["a"]},,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";var r=a(6);var n=a(252);var i=Object(r["s"])();var s={USD:{"fr-FR":{string:"dollar des \xc9tats-Unis",correction:"dollar am\xe9ricain"},"pt-BR":{string:"D\xf3lar",correction:"d\xf3lar"}},JPY:{"pt-BR":{string:"Iene",correction:"iene"}},EUR:{"pt-BR":{string:"Euro",correction:"euro"}}};function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;var t=arguments.length>1?arguments[1]:void 0;var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.displayTrailingZeroes,o=void 0!==r&&r,l=a.currencyDisplay,c=void 0===l?"symbol":l,u=a.renderCurrencyText,d=void 0!==u&&u;if(!t)return null;var p={coerce:true,style:"currency",currency:t,currencyDisplay:c};e%100!==0||o||(p.minimumFractionDigits=0);if(d){p.minimumFractionDigits=0;p.currencyDisplay="name";var m=/\d+(\s)|\d/g;var h=Object(n["b"])(0,i,p).replace(m,"");var v=s[t];if(v&&v[i]){var f=v[i],b=f.string,g=f.correction;return h.replace(b,g)}return h}var _=Object(n["b"])(e,i,p);if("USD"===t)switch(i){case"en-US":_+=" USD";break;case"en-GB":_=_.replace("US$","$US");break;case"fr-FR":_=_.replace("$US","$\xa0US");break;case"ja-JP":_=_.replace("$","US$");break;case"de-DE":_=_.replace("$","USD");break;case"es-ES":_=_.replace("US$","USD");break;case"es-LA":break;default:break}return _}var l={};Object.defineProperty(l,"locale",{get:function e(){return i},set:function e(t){i=t}});t["a"]=o},,,,function(e,t,a){"use strict";var r=a(110);var n=a.n(r);var i=a(135);var s=a.n(i);var o=a(169);var l=a.n(o);var c=a(138);var u=a.n(c);var d=a(185);var p=a.n(d);var m=a(1);var h=a.n(m);var v=a(12);var f=a(2);var b=a(0);var g=a(6);var _=a(1368);var y=a(17);var O=a(62);var k=a(11);var E=a(2659);var C=a(43);var S=a(220);var w=a(561);var j=a(98);var I=a(840);var T=a(54);var A=a(24);var N=a(88);var P=a.n(N);var M=a(27);function D(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function x(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?D(Object(a),true).forEach(function(t){P()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):D(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function R(e,t){var a=Object(M["getTeamProfileFields"])(t);if(Object(f["isEmpty"])(a))return[];var r=Object(y["getMemberProfileFields"])(e);if(Object(f["isEmpty"])(r))return[];var n=[];a.forEach(function(e){if(e.is_hidden)return;var t=r[e.id];if(!t||!t.value)return;n.push(x({},e,{alt:t.alt,value:t.value}))});return n}var F=a(1415);function L(e){return e&&"text"===e.type&&"skype"===e.label.toLowerCase()}var U=a(246);var B=a.n(U);var q=a(257);var G=a(348);var H=a(2086);var W=a(13);var V=a.n(W);var K=a(1593);var z=a(3103);var Q={children:void 0,value:void 0,className:void 0};function Y(e){var t=e.children,a=e.label,r=e.value,n=e.className;var i=Object(m["useContext"])(K["a"]);if(!a)return null;return h.a.createElement("div",{className:V()("p-member_profile_field",{"p-member_profile_field--keyboard":i},n)},h.a.createElement("div",{className:"p-member_profile_field__primary"},h.a.createElement("div",{className:"p-member_profile_field__label"},a),h.a.createElement("div",{className:"p-member_profile_field__value"},r)),t&&h.a.createElement("div",{className:"p-member_profile_field__secondary"},t))}Y.displayName="MemberProfileField";Y.defaultProps=Q;var J=Y;var X=new g["b"]("member_profile");var Z={member:void 0};function $(e){var t=e.member;var a=Object(H["a"])(false,2e3),r=B()(a,2),n=r[0],i=r[1];var s=Object(G["a"])(),o=s.featureModernProfileFlexpane;if(!o)return null;var l;var c;if(n){c="success";l=X.t("Copied!")}else l=X.t("Copy");var u=Object(y["getMemberEmail"])(t);return h.a.createElement(J,{label:X.t("Email address"),value:h.a.createElement(C["a"],{href:"mailto:"+u},u)},Object(q["canWriteText"])()&&h.a.createElement(T["c"],{status:c,tip:l,zIndex:"above_fs"},h.a.createElement(A["d"],{"aria-label":X.t("Copy Email Address"),onClick:function e(){Object(q["writeText"])(u);i(true)},icon:"all-files",type:"outline"})))}$.displayName="MemberEmailField";$.defaultProps=Z;var ee=$;var te=a(460);var ae=a(23);var re=a(1082);var ne=a(2794);var ie=a(2866);var se=a(927);var oe=a(3410);var le=new g["b"]("member_profile");var ce={member:void 0,memberPhoneNumber:void 0,onClick:f["noop"],isPhoneIntegrationAdminExperimentOn:false,startCall:f["noop"],callsApps:{video:[],audio:[]}};function ue(e){var t=e.memberPhoneNumber,a=e.onClick,r=e.isPhoneIntegrationAdminExperimentOn,n=e.startCall,i=e.member,s=e.callsApps;var o=Object(m["useState"])(false),l=B()(o,2),c=l[0],u=l[1];var d=Object(m["useCallback"])(function(){return u(false)},[]);var p=Object(m["useCallback"])(function(){return u(true)},[]);var v=Object(m["useCallback"])(function(e){var t=e.appId,r=e.type,i=e.phoneNumber;a();n({appId:t,type:r,phoneNumber:i})},[n,a]);var f=r&&s&&s.audio&&s.audio.length>0?t:h.a.createElement(S["a"],{href:"tel:"+t,onClick:a},t);var b=function e(t){return h.a.createElement(A["d"],{onClick:t,type:"outline",size:"medium",className:"p-member_phone_field__calls_button"},h.a.createElement("div",{className:"display_flex"},h.a.createElement(ae["b"],{type:"phone",className:"p-classic_nav__model__button__icon"}),!t&&h.a.createElement(ae["b"],{"data-qa":"call_icon_chevron_down",className:"p-classic_nav__model__button--chevron",type:"chevron_down",inline:true})))};return h.a.createElement(J,{key:"phone",label:le.t("Phone number"),value:f,className:c?"p-member_phone_field__menu_open":""},r&&h.a.createElement(ne["a"],{onCloseMenuCallback:d,onMenuItemSelected:v,onRenderMenuCallback:p,member:i,childFunctionComponent:b,cloggerContext:{entryPoint:ie["a"].profilePhoneField},hideVideoApps:true}))}ue.displayName="MemberPhoneField";ue.defaultProps=ce;var de=function e(t,a){var r=a.member;return{isPhoneIntegrationAdminExperimentOn:Object(re["c"])(t),callsApps:Object(se["d"])(t),memberPhoneNumber:Object(y["getMemberPhone"])(r),member:r}};var pe=function e(t){return{startCall:function e(){t(te["d"].apply(void 0,arguments))}}};var me=Object(v["connect"])(de,pe)(ue);var he=a(581);var ve=a(38);var fe=a(1981);var be=new g["b"]("member_profile");function ge(e,t){return Object(he["a"])(Date.now(),{timeZone:Object(y["getMemberTimezone"])(e),timeZoneOffset:Object(y["getMemberTimezoneOffset"])(e),do24hrTime:t})}var _e={member:void 0,time24:false};function ye(e){var t=e.member,a=e.time24;var r=Object(m["useState"])(),n=B()(r,2),i=n[0],s=n[1];Object(fe["a"])(function(){s(ge(t,a))});return h.a.createElement(J,{label:be.t("Local time"),value:i})}ye.displayName="MemberLocalTimeField";ye.defaultProps=_e;function Oe(e){return{time24:Object(ve["k"])(e,"time24")}}var ke=Object(v["connect"])(Oe)(ye);var Ee=a(297);var Ce=a(89);var Se=a(55);var we=a(1035);var je=a(20);var Ie=a(166);var Te=new g["b"]("member_profile");var Ae={channels:void 0};function Ne(e){var t=e.channels;var a=Object(G["a"])(),r=a.featureModernProfileFlexpane;if(!r)return null;var n=Object(f["filter"])(t,Se["b"]);if(Object(f["isEmpty"])(n))return Te.t("None");return h.a.createElement("ul",{className:"p-member_profile_field__list"},n.map(function(e){return h.a.createElement("li",{key:e.id,className:"p-member_profile_field__list_item"},h.a.createElement(C["a"],{href:Object(we["a"])({channelId:e.id})},h.a.createElement(Ie["a"],{channelId:e.id,className:"cursor_pointer",iconProps:{inherit:true}})))}))}Ne.displayName="ChannelList";Ne.defaultProps=Ae;function Pe(e,t){var a=t.channelIds;var r=Object(f["map"])(a,function(t){return Object(je["e"])(e,t)});return{channels:r}}var Me=Object(v["connect"])(Pe)(Ne);function De(e){var t=e.fetchMemberProfileExtras,a=e.member;var r=Object(m["useState"])(false),n=B()(r,2),i=n[0],s=n[1];var o=Object(m["useState"])([]),l=B()(o,2),c=l[0],u=l[1];Object(m["useEffect"])(function(){var e;Object(y["isRestricted"])(a)?e=["channels"]:Object(y["isExternal"])(a)&&(e=["shared_channels"]);if(!e)return;s(true);t({keys:e,userId:a.id,reason:"useProfileExtras"}).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};u(e.channels||e.shared_channels)}).finally(function(){s(false)})},[t,a]);return{extras:c,isLoading:i}}var xe=new g["b"]("member_profile");var Re={fetchMemberProfileExtras:f["noop"],member:void 0};function Fe(e){var t=e.fetchMemberProfileExtras,a=e.member;var r=De({fetchMemberProfileExtras:t,member:a}),n=r.extras,i=r.isLoading;var s=Object(G["a"])(),o=s.featureModernProfileFlexpane;if(!o)return null;return h.a.createElement(J,{label:xe.t("Shared Channels"),value:i?h.a.createElement(Ce["a"],{size:"small",inline:true}):h.a.createElement(Me,{channelIds:n})})}Fe.displayName="MemberSharedChannelsField";Fe.defaultProps=Re;var Le={fetchMemberProfileExtras:function e(){return Ee["f"].apply(void 0,arguments)}};var Ue=Object(v["connect"])(null,Le)(Fe);var Be=a(165);var qe=a(1077);var Ge=a(25);var He=a(33);var We=new g["b"]("member_profile");var Ve={teams:void 0};function Ke(e){var t=e.teams;var a=Object(G["a"])(),r=a.featureModernProfileFlexpane;if(!r)return null;var n=Object(f["filter"])(t,Se["b"]);if(Object(f["isEmpty"])(n))return We.t("None");return h.a.createElement("ul",{className:"p-member_profile_field__list"},n.map(function(e){return h.a.createElement("li",{key:e.id,className:"p-member_profile_field__list_item"},Object(M["getTeamDisplayName"])(e))}))}Ke.displayName="TeamList";Ke.defaultProps=Ve;function ze(e,t){var a=t.teamIds;var r=Object(f["map"])(a,function(t){return Object(He["k"])(e,t)});return{teams:r}}var Qe=Object(v["connect"])(ze)(Ke);var Ye=new g["b"]("member_profile");function Je(e,t){var a=Object(m["useState"])(false),r=B()(a,2),n=r[0],i=r[1];Object(m["useEffect"])(function(){if(Object(f["isEmpty"])(t))return;i(true);e({ids:t,reason:"MemberSharedWorkspacesField"}).finally(function(){return i(false)})},[e,t]);return{isLoading:n}}var Xe={fetchAndUpsertTeamsFromAPI:f["noop"],sharedTeamIds:void 0};function Ze(e){var t=e.fetchAndUpsertTeamsFromAPI,a=e.sharedTeamIds;var r=Je(t,a),n=r.isLoading;var i=Object(G["a"])(),s=i.featureModernProfileFlexpane;if(!s)return null;var o=n?h.a.createElement(Ce["a"],{size:"small",inline:true}):h.a.createElement(Qe,{teamIds:a});return h.a.createElement(J,{label:Ye.t("Shared Workspaces"),value:o})}Ze.displayName="MemberSharedWorkspacesField";Ze.defaultProps=Xe;var $e=h.a.memo(Ze,function(e,t){return Object(Be["a"])(t,e,2)});function et(e,t){var a=t.member;var r=Object(Ge["b"])(e);return{sharedTeamIds:Object(y["getMemberWorkspacesInCommon"])(a,r)}}var tt={fetchAndUpsertTeamsFromAPI:function e(){return qe["b"].apply(void 0,arguments)}};var at=Object(v["connect"])(et,tt)($e);var rt=new g["b"]("member_profile");var nt={member:void 0};function it(e){var t=e.member;var a=Object(G["a"])(),r=a.featureModernProfileFlexpane;if(!r)return null;var n=Object(y["getMemberGuestInvitedBy"])(t);if(!n)return null;return h.a.createElement(J,{key:"invited_by",label:rt.t("Invited By"),value:h.a.createElement(w["a"],{id:n})})}it.displayName="MemberGuestInvitedByField";it.defaultProps=nt;var st=it;var ot=a(208);var lt=a(229);var ct=new g["b"]("member_profile");var ut={member:void 0};function dt(e){var t=e.member;var a=Object(G["a"])(),r=a.featureModernProfileFlexpane;if(!r)return null;var n=Object(y["getMemberGuestExpirationTs"])(t);if(!n)return null;return h.a.createElement(J,{label:ct.t("Member Until"),value:ct.t("{date} at {time}",{date:Object(ot["a"])(n),time:Object(lt["a"])(n)})})}dt.displayName="MemberGuestUntilField";dt.defaultProps=ut;var pt=dt;var mt=new g["b"]("member_profile");var ht={currentMemberIsAdmin:false,fetchMemberProfileExtras:f["noop"],member:void 0,team:void 0};function vt(e){var t=e.currentMemberIsAdmin,a=e.fetchMemberProfileExtras,r=e.member,n=e.team;var i=De({fetchMemberProfileExtras:a,member:r}),s=i.extras,o=i.isLoading;var l=Object(G["a"])(),c=l.featureModernProfileFlexpane;if(!c)return null;var u=o?h.a.createElement(Ce["a"],{size:"small",inline:true}):h.a.createElement(Me,{channelIds:s});return h.a.createElement(J,{key:"channels",label:mt.t("Channels"),value:u},Object(y["isRestricted"])(r)&&t&&h.a.createElement(T["c"],{tip:mt.t("Manage")},h.a.createElement(A["d"],{"aria-label":mt.t("Manage Guest Channels"),href:Object(M["getTeamUrl"])(n)+"admin?#restricted",icon:"filters",type:"outline"})))}vt.displayName="MemberGuestChannelsField";vt.defaultProps=ht;function ft(e){return{currentMemberIsAdmin:Object(y["isAdmin"])(e,Object(Ge["b"])(e))}}var bt={fetchMemberProfileExtras:function e(){return Ee["f"].apply(void 0,arguments)}};var gt=Object(v["connect"])(ft,bt)(vt);a.d(t,"a",function(){return _t});var _t={CUSTOM:"custom",EMAIL:"email",PHONE:"phone",STATUS:"status",TIME:"time",NAME:"name",CHANNELS:"channels",SHARED_WORKSPACES:"shared_workspaces",GUEST:"guest"};var yt=new g["b"]("member_profile");var Ot={hasStatus:false,isEnterprise:false,member:void 0,onClick:f["noop"],openCustomStatusDialog:f["noop"],prefDisplayEmailAddresses:false,team:void 0};var kt=function(e){p()(t,e);function t(){n()(this,t);return l()(this,u()(t).apply(this,arguments))}s()(t,[{key:"getProfileLinkHTML",value:function e(t,a){return h.a.createElement(S["a"],{href:t,onClick:this.props.onClick,target:"_blank",title:t},a||t)}},{key:"getProfileUserFieldHTML",value:function e(t){var a=t.split(/\s*,\s*/);var r=a.map(function(e){return h.a.createElement(w["a"],{id:e})});return Object(g["i"])(r,{noConj:true,react:true})}},{key:"getVisibleTeamProfileFieldsForMember",value:function e(){var t=this;var a=this.props,r=a.member,n=a.team;var i=R(r,n).map(function(e){var a;var r;if("date"===e.type){a=Object(_["a"])(e.value);r=e.value}else if("user"===e.type)r=t.getProfileUserFieldHTML(e.value);else if("link"===e.type)r=t.getProfileLinkHTML(e.value,e.alt||e.label);else if(L(e)){var n="skype:"+e.value+"?call";r=t.getProfileLinkHTML(n,e.value)}else{a=e.alt;r=e.value}return{alt:a,id:e.id,label:e.label,value:r}});return i}},{key:"render",value:function e(){var t=this;var a=this.props,r=a.featureModernProfileFlexpane,n=a.hasStatus,i=a.isEnterprise,s=a.member,o=a.onClick,l=a.prefDisplayEmailAddresses,c=a.team,u=a.types;if(!r)return null;var d=[];u.forEach(function(e){if(e===_t.EMAIL&&(l||Object(y["isSelf"])(s))){var a=Object(y["getMemberEmail"])(s);Object(F["a"])(a)&&d.push(h.a.createElement(ee,{key:"email",member:s}))}else if(e===_t.PHONE){var r=Object(y["getMemberPhone"])(s);Object(F["a"])(r)&&d.push(h.a.createElement(me,{key:"phone",member:s,onClick:o}))}else if(e===_t.STATUS){var u;if(n){var p=h.a.createElement(I["b"],{animated:true,className:"p-member_profile_field__status",memberId:s.id,tooltip:false});u=Object(y["isSelf"])(s)?h.a.createElement(T["c"],{tip:yt.t("Edit")},h.a.createElement(j["a"],{onClick:function e(){o();t.props.openCustomStatusDialog()},tabIndex:-1},p,h.a.createElement(I["a"],{className:"p-member_profile_field__status_expiration",memberId:s.id}))):p}else Object(y["isSelf"])(s)&&(u=h.a.createElement(C["a"],{className:"p-member_profile_field__interactable",onClick:function e(){o();t.props.openCustomStatusDialog()}},yt.t("Set a status")));u&&d.push(h.a.createElement(J,{key:"status",label:yt.t("Status"),value:u},Object(y["isSelf"])(s)&&n&&h.a.createElement(T["c"],{tip:yt.t("Edit"),zIndex:"above_fs"},h.a.createElement(A["d"],{"aria-label":yt.t("Edit Custom Status"),onClick:function e(){o();t.props.openCustomStatusDialog()},icon:"pencil",type:"outline"}))))}else if(e!==_t.TIME||Object(y["isSlackbot"])(s))if(e===_t.NAME){var m=Object(y["getMemberProfileFieldDisplayName"])(s);Object(F["a"])(m)&&d.push(h.a.createElement(J,{key:"name",label:yt.t("Display name"),value:m}))}else if(e===_t.CUSTOM){var v=t.getVisibleTeamProfileFieldsForMember();v.forEach(function(e){if(!Object(F["a"])(e.value))return;d.push(h.a.createElement(J,{key:e.id,label:e.label,value:e.alt||e.value}))})}else e===_t.SHARED_CHANNELS?Object(y["isExternal"])(s)&&d.push(h.a.createElement(Ue,{key:_t.SHARED_CHANNELS,member:s})):e===_t.SHARED_WORKSPACES?i&&d.push(h.a.createElement(at,{key:_t.SHARED_WORKSPACES,member:s})):e===_t.GUEST&&Object(y["isRestricted"])(s)&&d.push(h.a.createElement(st,{key:"guest-invited",member:s}),h.a.createElement(pt,{key:"guest-until",member:s}),h.a.createElement(gt,{key:"guest-channels",member:s,team:c}));else d.push(h.a.createElement(ke,{key:"time",member:s}))});return h.a.createElement("div",null,d)}}]);return t}(m["Component"]);kt.displayName="MemberProfileFields";kt.defaultProps=Ot;function Et(e,t){var a=t.member;return{hasStatus:Object(y["hasCustomStatusSet"])(a),isEnterprise:Object(k["pageNeedsEnterprise"])(e),prefDisplayEmailAddresses:Object(O["a"])(e,"display_email_addresses"),featureModernProfileFlexpane:Object(k["isFeatureEnabled"])(e,"feature_modern_profile_flexpane")}}var Ct={openCustomStatusDialog:function e(){return E["a"].apply(void 0,arguments)}};var St=t["b"]=Object(v["connect"])(Et,Ct)(kt)},,,,,,,,,,,function(e,t,a){"use strict";a.d(t,"a",function(){return u});var r=a(6);var n=a(210);var i=a(43);var s=a(0);var o=a(1);var l=a.n(o);var c=new r["b"]("search");function u(e){var t=e.onClick,a=e.short,r=e.className;return l.a.createElement(n["a"],{enabled:["feature_tinyspeck"]},l.a.createElement("span",{className:r},a?"":c.t("Something off?")+" ",l.a.createElement(i["a"],{onClick:t},c.t("Give feedback"))))}u.displayName="FeedbackLink";u.defaultProps={className:"",short:false}},,,,,,,,,,,,,,,,function(e,t,a){"use strict";var r=a(110);var n=a.n(r);var i=a(135);var s=a.n(i);var o=a(169);var l=a.n(o);var c=a(138);var u=a.n(c);var d=a(185);var p=a.n(d);var m=a(0);var h=a(1);var v=a(12);var f=a(2);var b=a(21);var g=function e(t,a){return t+"-"+a};var _={add:function e(t,a,r){this.sections||(this.sections={});var n=g(t,a);if(this.sections[n])return;this.sections[n]=r},remove:function e(t,a){if(!this.sections)return;var r=g(t,a);if(!this.sections[r])return;this.sections[r]=null;delete this.sections[r]},get:function e(t,a){if(!this.sections)return;return this.sections[g(t,a)]}};var y=_;var O={children:null};var k=function(e){p()(t,e);function t(e){var a;n()(this,t);a=l()(this,u()(t).call(this,e));var r=e.component,i=r.focus,s=r.blur;var o=Object(f["isFunction"])(i)&&Object(f["isFunction"])(s);if(o)return l()(a);throw new Error("FocusableSection requires a single child that implements focus and blur methods.")}s()(t,[{key:"componentDidMount",value:function e(){var t=this.props,a=t.teamId,r=t.order,n=t.component;y.add(a,r,n)}},{key:"componentWillUnmount",value:function e(){var t=this.props,a=t.teamId,r=t.order;y.remove(a,r)}},{key:"render",value:function e(){return this.props.children}}]);return t}(h["PureComponent"]);k.displayName="FocusableSection";k.defaultProps=O;var E=function e(t){return{teamId:Object(b["b"])(t)}};var C=Object(v["connect"])(E)(k);a.d(t,"a",function(){return C});a.d(t,"b",function(){return y})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";var r=a(110);var n=a.n(r);var i=a(135);var s=a.n(i);var o=a(169);var l=a.n(o);var c=a(138);var u=a.n(c);var d=a(147);var p=a.n(d);var m=a(185);var h=a.n(m);var v=a(0);var f=a(1);var b=a.n(f);var g=a(12);var _=a(2);var y=a.n(_);var O=a(13);var k=a.n(O);var E=a(11);var C=a(90);var S=a(24);var w=a(23);var j=a(237);var I=a(54);var T=a(1787);var A=a.n(T);var N={className:"",onClick:y.a.noop,iconType:null,tooltipPosition:"top",ariaHasPopup:true,"data-qa":void 0,btnRef:null,shortcutKey:null,ariaLabel:null,"aria-pressed":void 0,featureMessageActionsRefresh:false,isIAPhase1Enabled:false};var P=function(e){h()(t,e);function t(){var e;n()(this,t);e=l()(this,u()(t).call(this));e.onKeyDown=e.onKeyDown.bind(p()(e));e.onClick=e.onClick.bind(p()(e));return e}s()(t,[{key:"onKeyDown",value:function e(t){if(t&&t.key===this.props.shortcutKey){t.stopPropagation();t.preventDefault();this.props.onClick(t)}}},{key:"onClick",value:function e(t){this.props.isIAPhase1Enabled&&t.stopPropagation();this.props.onClick(t)}},{key:"render",value:function e(){var t=this.props,a=t.ariaLabel,r=t.featureMessageActionsRefresh,n=t.label;var i=k()("c-message_actions__button",this.props.className);return b.a.createElement(I["c"],{tip:this.props.label,position:this.props.tooltipPosition,delay:I["b"]},r?b.a.createElement(j["a"],{className:i,onClick:this.onClick,"aria-label":a||n,"aria-haspopup":this.props.ariaHasPopup,"data-qa":this.props["data-qa"],ref:this.props.btnRef,onKeyDown:this.props.shortcutKey?this.onKeyDown:null,"aria-pressed":this.props["aria-pressed"],icon:this.props.iconType,size:"small"}):b.a.createElement(S["c"],{className:i,onClick:this.onClick,"aria-label":a||n,"aria-haspopup":this.props.ariaHasPopup,"data-qa":this.props["data-qa"],ref:this.props.btnRef,onKeyDown:this.props.shortcutKey?this.onKeyDown:null,"aria-pressed":this.props["aria-pressed"]},b.a.createElement(w["b"],{type:this.props.iconType})))}}]);return t}(f["PureComponent"]);P.displayName="MessageActionButton";P.defaultProps=N;function M(e){return{featureMessageActionsRefresh:Object(E["isFeatureEnabled"])(e,"feature_message_actions_refresh"),isIAPhase1Enabled:Object(C["e"])(e)}}t["a"]=Object(g["connect"])(M)(P)},,function(e,t,a){"use strict";a.d(t,"a",function(){return r});a.d(t,"b",function(){return n});var r=[];var n={}},,,function(e,t,a){"use strict";a.d(t,"a",function(){return k});var r=a(110);var n=a.n(r);var i=a(135);var s=a.n(i);var o=a(169);var l=a.n(o);var c=a(138);var u=a.n(c);var d=a(185);var p=a.n(d);var m=a(1);var h=a.n(m);var v=a(0);var f=a(13);var b=a.n(f);var g=a(816);var _=a(3612);var y=a.n(_);var O={className:void 0,children:void 0};var k=function(e){p()(t,e);function t(){n()(this,t);return l()(this,u()(t).apply(this,arguments))}s()(t,[{key:"render",value:function e(){var t=b()("c-message_kit__pillow",this.props.className);return h.a.createElement(g["a"],{className:t},this.props.children)}}]);return t}(m["PureComponent"]);k.displayName="MessagePillow";k.defaultProps=O},,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";var r=a(88);var n=a.n(r);var i=a(18);var s=a(0);var o=a(102);var l=a(2704);var c=a(2792);var u=a(349);var d=a(751);var p=a(1416);function m(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function h(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?m(Object(a),true).forEach(function(t){n()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):m(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var v=Object(i["b"])("build message summary for aria labels",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelId,n=a.ts,i=a.isFirstUnreadMsg,s=a.isFirstMsgForDay,o=a.isLastMsgForDay,m=a.previousMessageTs,v=a.day,f=a.rollup,b=a.hasFocus,g=a.viewContext,_=a.includeDate;var y=t();var O=Object(d["isScreenReaderEnabled"])(y);var k=!!Object(u["getMessageEditData"])(y,{channelId:r,ts:n});if(k)return;if(!(O||b))return;var E=Object(c["a"])(y,{channelId:r,ts:n,previousMessageTs:m,rollup:f,hasFocus:b});var C=v||{ts:parseInt(Object(p["a"])(n),10),isFirstDay:false,isLastDay:false};return Object(l["a"])(h({},E,{viewContext:g,isFirstUnreadMsg:i,isFirstMsgForDay:s,isLastMsgForDay:o,day:C,includeDate:_}))});v.meta={name:"makeMessageSummary",key:"actionsMakeMessageSummaryMakeMessageSummary",description:"build message summary for aria labels"};v.propTypes={channelId:s["default"].string.isRequired,ts:s["default"].string.isRequired,isFirstUnreadMsg:s["default"].bool,isFirstMsgForDay:s["default"].bool,isLastMsgForDay:s["default"].bool,previousMessageTs:s["default"].string,day:s["default"].object,rollup:o["a"].Rollup(),hasFocus:s["default"].bool,viewContext:s["default"].string,includeDate:s["default"].bool};t["a"]=v},function(e,t,a){"use strict";var r=a(110);var n=a.n(r);var i=a(135);var s=a.n(i);var o=a(169);var l=a.n(o);var c=a(138);var u=a.n(c);var d=a(185);var p=a.n(d);var m=a(1);var h=a.n(m);var v=a(12);var f=a(11);var b=a(0);var g=a(16);var _={children:null,featureTinyspeck:false};var y=function(e){p()(t,e);function t(e){var a;n()(this,t);a=l()(this,u()(t).call(this,e));a.state={error:false};return a}s()(t,[{key:"componentDidCatch",value:function e(t,a){this.setState(function(){return{error:true}});var r=t?t.message:"";var n=t?t.stack:"";var i=this.props.msg,s=i.ts,o=i.channel,l=i.subtype;this.props.logger.error("Message Kit componentDidCatch: "+l+" "+s+" in "+o+", "+r);n&&this.props.logger.error(n);a&&a.componentStack&&this.props.logger.error(a.componentStack)}},{key:"render",value:function e(){if(!this.state.error)return this.props.children;if(!this.props.featureTinyspeck)return null;var t=this.props.msg,a=t.ts,r=t.channel;return h.a.createElement("div",{className:"sk_raspberry_red_bg sk_inverted_foreground padding_100 padding_bottom_25"},h.a.createElement("p",null,h.a.createElement("strong",null,"Message ",a," in ",r," failed to render."," ")),h.a.createElement("p",null,"Please go to #escal-messages and,"," ",h.a.createElement("strong",null,"if it has not been reported yet"),", post a report including a screenshot and a link to the previous message if this is a public channel."),h.a.createElement("p",null,"This message is only displayed to workspaces in the Slack org."))}}]);return t}(m["Component"]);y.displayName="MessageErrorBoundary";y.defaultProps=_;var O=y;var k=function e(t){return{featureTinyspeck:Object(f["isFeatureEnabled"])(t,"feature_tinyspeck"),logger:Object(g["a"])({state:t})}};t["a"]=Object(v["connect"])(k)(y)},function(e,t,a){"use strict";var r=a(110);var n=a.n(r);var i=a(135);var s=a.n(i);var o=a(169);var l=a.n(o);var c=a(138);var u=a.n(c);var d=a(185);var p=a.n(d);var m=a(1);var h=a.n(m);var v=a(12);var f=a(0);var b=a(13);var g=a.n(b);var _=a(2);var y=a.n(_);var O=a(41);var k=a(349);var E=a(392);var C=a(2776);var S=a(1056);var w=a(3632);var j=a.n(w);var I={className:void 0,children:void 0,isEditing:false,setBackground:_["noop"],viewContext:void 0};var T=function(e){p()(t,e);function t(){n()(this,t);return l()(this,u()(t).apply(this,arguments))}s()(t,[{key:"componentDidMount",value:function e(){this.setBackground()}},{key:"componentDidUpdate",value:function e(){this.setBackground()}},{key:"setBackground",value:function e(){var t=this.props,a=t.isEditing,e=t.setBackground;e({editing:a})}},{key:"render",value:function e(){var t=this.props,a=t.msg,r=t.isEditing,n=t.children,i=t.viewContext;if(!r)return n;var s=a.channel,o=a.ts;var l=g()(this.props.className,"c-message_kit__edit");return h.a.createElement("div",{className:l},h.a.createElement(C["a"],{channelId:s,ts:o,messageContainerType:i}))}}]);return t}(m["PureComponent"]);T.displayName="MessageEdit";T.defaultProps=I;var A=function e(t,a){var r=a.msg,n=a.viewContext;var i=Object(O["getMessageChannelId"])(r);var s=Object(O["getMessageTs"])(r);var o=!!Object(k["getMessageEditData"])(t,{channelId:i,ts:s,viewContext:n});return{isEditing:o}};t["a"]=Object(S["b"])(Object(E["b"])(Object(v["connect"])(A)(T)))},function(e,t,a){"use strict";var r=a(110);var n=a.n(r);var i=a(135);var s=a.n(i);var o=a(169);var l=a.n(o);var c=a(138);var u=a.n(c);var d=a(185);var p=a.n(d);var m=a(1);var h=a.n(m);var v=a(12);var f=a(0);var b=a(13);var g=a.n(b);var _=a(370);var y=a(3634);var O=a.n(y);var k={className:void 0,children:void 0,theme:"light"};var E=function(e){p()(t,e);function t(){n()(this,t);return l()(this,u()(t).apply(this,arguments))}s()(t,[{key:"render",value:function e(){var t=this.props,a=t.children,r=t.theme;if("light"===r)return a;var n=g()("c-message_kit__indent",this.props.className);return h.a.createElement("div",{className:n},a)}}]);return t}(m["Component"]);E.displayName="MessageIndent";E.defaultProps=k;t["a"]=Object(v["connect"])(function(e){return{theme:Object(_["a"])(e)}})(E)},,,,,,function(e,t,a){"use strict";var r=a(88);var n=a.n(r);var i=a(245);var s=a.n(i);var o=a(0);var l=a(1);var c=a.n(l);var u=a(18);var d=a(39);var p=a(21);var m=a(33);var h=a(32);var v=a(42);var f=a(27);var b=a(35);var g=a(14);var _=a(12);var y=a(1235);var O=a(197);var k=a(110);var E=a.n(k);var C=a(135);var S=a.n(C);var w=a(169);var j=a.n(w);var I=a(138);var T=a.n(I);var A=a(147);var N=a.n(A);var P=a(185);var M=a.n(P);var D=a(2);var x=a(296);var R=a(6);var F=a(87);var L=a(331);var U=a(24);var B=a(166);var q=a(2700);var G=a(13);var H=a.n(G);var W=a(38);var V=a(243);var K=a(223);var z=a(25);var Q=a(17);var Y=a(118);var J=a(1460);var X=Object(u["b"])("Adds app to channel by member id",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.memberId,n=a.channelId;if(!r||!n)return;var i=Object(z["e"])(t(),r);Object(Q["isAppUser"])(i)?e(Object(J["a"])({appUserId:r,channelId:n,referringEventId:"INVITE_TO_CHANNEL_DIALOG",referringUiContext:{action:"IMPRESSION"}})):e(Object(Y["L"])({channelId:n,users:r}))});X.meta={name:"addAppToChannelByMemberId",key:"actionsAddAppToChannelByMemberIdAddAppToChannelByMemberId",description:"Adds app to channel by member id"};X.propTypes={memberId:o["default"].string.isRequired,channelId:o["default"].string.isRequired};var Z=X;var $=a(283);var ee=a(912);var te=a(44);function ae(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.image,a=e.title,r=e.description,n=e.children;return c.a.createElement(c.a.Fragment,null,c.a.createElement(te["d"],null,c.a.createElement(te["i"],{height:300,width:500,alt:"",src:t}),c.a.createElement(te["j"],{title:a}),c.a.createElement(te["e"],null,c.a.createElement("p",null,r))),n)}var re=a(196);var ne=a.n(re);var ie=a(882);function se(e){var t=e.tutorialStatus,a=e.actions;return c.a.createElement(ie["a"],null,c.a.createElement("span",null,t),c.a.createElement(te["g"],null,a.map(function(e){var t=e.label,a=s()(e,["label"]);return c.a.createElement(U["d"],ne()({},a,{key:t}),t)})))}se.displayName="AppsTutorialFooter";se.defaultProps={tutorialStatus:"",actions:[]};var oe=se;var le=new R["b"]("step_tutorial");function ce(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.steps,a=void 0===t?[]:t;return function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.index,n=t.navigate,i=t.end;if(r<0||r>=a.length)return;var s=0===r;var o=r===a.length-1;var l=[];var c=le.t("{current} of {total}",{current:r+1,total:a.length});s||l.push({type:"outline",label:le.t("Back"),onClick:function e(){return n(a[r-1].id)}});l.push({label:o?le.t("Done"):le.t("Next"),onClick:o?i:function(){return n(a[r+1].id)}});return{step:a[r],footer:{tutorialStatus:c,actions:l}}}}var ue=new R["b"]("apps_browser");function de(e){var t=e.closeModal;var a=Object(l["useMemo"])(function(){var e=[{id:"common_tasks",image:cdn_url+"/80588/img/app_space_tutorial_illustration_01.jpg",title:ue.t("Common tasks, done in a jiffy"),description:ue.t("Approve requests, schedule meetings, share documents, and more \u2014 all inside Slack.")},{id:"connect_tools",image:cdn_url+"/80588/img/app_space_tutorial_illustration_02.jpg",title:ue.t("Connect the tools you already use"),description:ue.t("Slack works with the systems you use, for everything from accounting to customer support.")},{id:"discover_ways",image:cdn_url+"/80588/img/app_space_tutorial_illustration_03.jpg",title:ue.t("Discover new ways to work"),description:ue.t("Poll your workspace, send kudos, and automate the coffee run. Have a better workday with apps.")}];var a=ce({steps:e});return e.reduce(function(e,r,n){e[r.id]={render:function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=r.switchPane;var s=a({index:n,navigate:i,end:t});return c.a.createElement(ae,s.step,c.a.createElement(oe,s.footer))}};return e},{})},[t]);return c.a.createElement(ee["b"],{defaultPane:"common_tasks",isOpen:true,invertCloseButton:true,panes:a,closeModal:t})}de.displayName="AppsTutorial";var pe=function e(t){return Object(x["bindActionCreators"])({closeModal:d["closeModal"]},t)};var me=Object(_["connect"])(null,pe)(de);var he=a(440);var ve="seen_app_space_tutorial";var fe=Object(u["b"])("Opens the apps tutorial modal",function(e,t){var a=t();var r=Object(b["a"])({state:a});r.track("APP_TUTORIAL_VIEW",null);Object(W["k"])(a,ve)||e(Object(he["b"])({pref:ve,value:true}));e(Object(d["openModal"])({element:c.a.createElement(me),isStackable:true}))});fe.meta={name:"openAppsTutorialModal",key:"actionsOpenAppsTutorialModalOpenAppsTutorialModal",description:"Opens the apps tutorial modal"};fe.propTypes=null;var be=fe;var ge=a(1481);var _e=a(343);var ye=a(86);var Oe=a(457);var ke=a(646);var Ee=a(89);var Ce=a(585);var Se=a(421);var we=a(1449);var je=new R["b"]("apps_browser");var Ie={onClick:void 0,onMouseLeave:void 0};var Te=function e(t){var a=t.app,r=t.appCanBeAdded,n=t.className,i=t.onClick,s=t.onMouseLeave,o=t["data-app_index"];var l=je.t("Install");var u=je.t("Install app",{fallbackHash:"fd6c3ebf7befca9f8208f86c76e4d4180303745c"});if("tutorial_app"===a.app_id){l=je.t("Start");u=je.t("Start app tutorial",{fallbackHash:"952f375412e89ff213a8aca383d18e5691354347"})}else if(r){l=je.t("Add");u=je.t("Add app",{fallbackHash:"61cc55aa0453184734c3fa0b621eda6fa874bd83"})}else if(a.is_installed){l=je.t("View");u=je.t("View app",{fallbackHash:"69bd4ef9fbd0894a22759c3766b859defbdedbc8"})}var d=Object(Se["b"])(a,72);return c.a.createElement("div",{className:n,onClick:i,onMouseLeave:s,"data-app":true,"data-app_index":o,"data-is_installed":a.is_installed,"data-app_id":a.app_id,"data-bot_id":a.bot_id,"data-bot_user_id":a.bot_user_id,"data-can_app_be_added":r||null,"data-qa":"apps_browser_row",role:"presentation"},c.a.createElement("img",{className:"p-apps_browser__app_icon",src:d,alt:a.name}),c.a.createElement("div",{className:"p-apps_browser__app_info"},c.a.createElement("div",{className:"p-apps_browser__app_name"},c.a.createElement("strong",null,a.name)),c.a.createElement("div",{className:"p-apps_browser__app_description"},Object(we["a"])(a.short_description,function(e,t){return c.a.createElement("strong",{key:t},e)}))),c.a.createElement(U["d"],{"data-qa":"apps_browser_row_action",className:"p-apps_browser__app_action",type:"outline","aria-label":u},l))};Te.displayName="AppsBrowserActionText";Te.defaultProps=Ie;var Ae=function e(t,a){var r=a.addAppsVariant,n=a.app,i=a.channelId;return{appCanBeAdded:r&&Object(Ce["a"])(t,n,i)}};var Ne=Object(_["connect"])(Ae)(Te);var Pe=a(43);var Me=a(218);var De=a.n(Me);var xe=a(109);var Re=a(54);var Fe=a(3507);var Le=10;var Ue=new R["b"]("apps_browser");var Be={apps:[],isFirefoxAndWindows:false,isFirefoxAndMac:false,isInternetExplorer:false};var qe=function e(t){var a=t.apps,r=t.isFirefoxAndWindows,n=t.isFirefoxAndMac,i=t.isInternetExplorer;if(a.length>Le)return null;var s=[].concat(De()(a),De()(Array(Le-a.length)));var o=s.map(function(e,t){var a=!e;var s="limit-apps-"+t;var o="bottom";0===t?o="bottom-left":t===Le-1&&(o="bottom-right");var l=H()("p-apps_browser__app_limit_meter__apps","inline_block",{"p-apps_browser__app_limit_meter__blank_app_box":a,is_ff_and_win:r,is_ff_and_mac:n,is_ie:i});return c.a.createElement(Re["c"],{key:s,tip:a?Ue.t("Try a new app"):e.name,position:o,offsetY:17},c.a.createElement("div",{className:l,"data-qa":a?"app_limit_meter__blank_app_box":"app_limit_meter__app_box"},!a&&c.a.createElement("img",{className:"p-apps_browser__app_limit_meter__app_icon align_top",src:Object(Se["b"])(e,24),alt:""})))});var l=s.map(function(e,t){if(0===t)return null;var a="color-meter-"+t;var r=!e;var n=H()({first:1===t,meter_first_green:t<4&&!r,meter_second_green:4===t&&!r,meter_third_green:5===t&&!r,meter_fourth_green:6===t&&!r,meter_yellow:7===t&&!r,meter_orange:8===t&&!r,meter_red:9===t&&!r,on:!r,off:r&&1!==t});return c.a.createElement("li",{className:n,key:a})});var u=H()("p-apps_browser__app_limit_meter__color_meter",{is_ff_and_win:r});return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"p-apps_browser__app_limit_meter__apps_container"},o),c.a.createElement("ul",{className:u},l))};qe.defaultProps=Be;var Ge=Object(xe["pure"])(qe);var He=new R["b"]("apps_browser");var We={isInternetExplorer:false,isFirefoxAndMac:false,isFirefoxAndWindows:false,isMacSsbBuild:false,installedApps:[],isShowingDefaultAppCategories:true,hasSeenAppSpaceTutorial:false};var Ve=function(e){M()(t,e);function t(e){var a;E()(this,t);a=j()(this,T()(t).call(this,e));a.limitMeterClogId="";a.firstSelectableAppIndex=e.hasSeenAppSpaceTutorial?1:0;a.appLimitMeterClogPayload={};a.cloggedLimitMeterImpression=false;a.showLimitMeter=false;a.handleAppLimitMeterClickClog=a.handleAppLimitMeterClickClog.bind(N()(a));return a}S()(t,[{key:"handleAppLimitMeterClickClog",value:function e(){var t=this.props.clogger;if("GROWTH_PRICING"===this.LimitMeterClogId){this.appLimitMeterClogPayload.contexts.ui_context.action="click";t.track("UPGRDEXP_LIMIT_APPSPACE",this.appLimitMeterClogPayload)}}},{key:"render",value:function e(){var t=this;var a=10;var r=this.props.installedApps.length;var n=this.props,i=n.isFirefoxAndWindows,s=n.isFirefoxAndMac,o=n.isInternetExplorer,l=n.clogger,u=n.isShowingDefaultAppCategories;if(!r||r>a||!u)return null;var d="num_of_apps="+r;var p=!!r;var m="limit-meter-"+K["d"];this.showLimitMeter=p;if(!this.showLimitMeter)return null;this.firstSelectableAppIndex=0;var h;var v;var f;var b;var g;var _=H()("p-apps_browser__app_limit_meter",{is_ff_and_mac:s});if(r<6){h=He.t("Add apps to get things done");f="/apps?utm_source=in-prod&utm_medium=inprod-link_see_app_suggestions-apps_browser-click";this.LimitMeterClogId="UPGRDEXP_LIMIT_APPSPACE";b="link_app_directory";v=He.rt("Schedule meetings, share docs, and more \u2014 straight from Slack. <a>See app suggestions</a>",null,function(e){var a=e.tag,r=e.text;if("a"!==a)return null;return c.a.createElement(Pe["a"],{href:f,target:"new","data-app":true,"data-app_index":t.firstSelectableAppIndex,"data-app_id":"app_limit_meter","data-clog-event":t.LimitMeterClogId,"data-clog-ui-element":b,"data-clog-ui-action":"click","data-clog-ui-step":"apps_browser","data-clog-params":d,onClick:t.handleAppLimitMeterClickClog},r)})}else if(r<10){h=He.t("Upgrade for unlimited apps");f=Object(ye["j"])({entryPoint:"app_limit_meter"});this.LimitMeterClogId="GROWTH_PRICING";b="pricing_link";g=H()({hidden:this.props.isMacSsbBuild});v=He.rt("Your team\u2019s up and running \u2014\xa0they\u2019re using {numOfApps} apps already. On a paid plan you can add as many as you\u2019d like. <a>See upgrade options</a>",{numOfApps:r},function(e){var a=e.tag,r=e.text;if("a"!==a)return null;return c.a.createElement(Pe["a"],{className:g,href:f,target:"new","data-app":true,"data-app_index":t.firstSelectableAppIndex,"data-app_id":"app_limit_meter","data-clog-event":t.LimitMeterClogId,"data-clog-ui-element":b,"data-clog-ui-action":"click","data-clog-ui-step":"apps_browser","data-clog-params":d,onClick:t.handleAppLimitMeterClickClog},r)})}else{h=He.t("Upgrade to add more apps");f=Object(ye["j"])({entryPoint:"app_limit_meter"});this.LimitMeterClogId="GROWTH_PRICING";b="pricing_link";g=H()({hidden:this.props.isMacSsbBuild});v=He.rt("Your team\u2019s already using 10 apps, the max you can use with the free version of Slack. Upgrade to a paid plan to add as many apps as you\u2019d like. <a>See upgrade options</a>",null,function(e){var a=e.tag,r=e.text;if("a"!==a)return null;return c.a.createElement(Pe["a"],{className:g,href:f,target:"new","data-app":true,"data-app_index":t.firstSelectableAppIndex,"data-app_id":"app_limit_meter","data-clog-event":t.LimitMeterClogId,"data-clog-ui-element":b,"data-clog-ui-action":"click","data-clog-ui-step":"apps_browser","data-clog-params":d,onClick:t.handleAppLimitMeterClickClog},r)})}this.appLimitMeterClogPayload={num_of_apps:r,contexts:{ui_context:{step:"apps_browser",action:"impression",ui_element:b}}};if(!this.cloggedLimitMeterImpression){if("GROWTH_PRICING"===this.LimitMeterClogId){l.track(this.LimitMeterClogId,this.appLimitMeterClogPayload);l.track("UPGRDEXP_LIMIT_APPSPACE",this.appLimitMeterClogPayload)}else{l.track(this.LimitMeterClogId,this.appLimitMeterClogPayload);l.track("APP_CLICK_LINK_SEE_APP_SUGGESTIONS_IN_APPS_BROWSER",{contexts:{ui_context:{step:"apps_browser",action:"click",ui_element:"link_see_app_suggestions"}}})}this.cloggedLimitMeterImpression=true}return c.a.createElement("div",{className:"p-apps_browser__app_limit_meter__container",key:m},c.a.createElement("div",{className:_,"data-qa":"apps_browser_app_limit_meter"},c.a.createElement("p",{className:"p-apps_browser__app_limit_meter__heading very_small_bottom_margin"},c.a.createElement("b",null,h)),c.a.createElement("p",{className:"p-apps_browser__app_limit_meter__paragraph","data-qa":"apps_browser_app_limit_meter_paragraph"},v),c.a.createElement(Ge,{apps:this.props.installedApps,isFirefoxAndWindows:i,isFirefoxAndMac:s,isInternetExplorer:o})))}}]);return t}(l["Component"]);Ve.displayName="AppLimitMeterContainer";Ve.defaultProps=We;var Ke=function e(t){var a=Object(h["getBrowser"])();return{installedApps:Object(V["j"])(t),isInternetExplorer:"ie"===a,isFirefoxAndWindows:"firefox"===a&&Object(h["isWindows"])(),isFirefoxAndMac:"firefox"===a&&Object(h["isMac"])(),isMacSsbBuild:Object(v["isAppStoreBuild"])(),clogger:Object(b["a"])({state:t})}};var ze=Object(_["connect"])(Ke,null)(Ve);function Qe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function Ye(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Qe(Object(a),true).forEach(function(t){n()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Qe(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Je=new R["b"]("apps_browser");var Xe={addAppToChannelByMemberId:D["noop"],hasSeenAppSpaceTutorial:false,channelId:void 0,nextCursor:void 0,loadMoreApps:D["noop"],openAboutApp:D["noop"],openAppsTutorialModal:D["noop"],closeModal:D["noop"],getChannelMembershipInfoForUsers:D["noop"],clientTheme:"light"};var Ze=function e(){return{name:Je.t("What are apps?"),short_description:Je.t("A quick look at how apps in Slack can streamline your work"),icons:{image_84:cdn_url+"/80588/img/tutorial@2x.png"},app_id:"tutorial_app",bot_id:"",bot_user_id:"",is_installed:false}};var $e=function(e){M()(t,e);function t(e){var a;E()(this,t);a=j()(this,T()(t).call(this,e));a.isPaginating=false;a.renderRow=a.renderRow.bind(N()(a));a.isFocusableItem=a.isFocusableItem.bind(N()(a));a.paginate=a.paginate.bind(N()(a));a.handleItemClick=a.handleItemClick.bind(N()(a));return a}S()(t,[{key:"componentDidUpdate",value:function e(t){var a=this.props,r=a.results,n=a.addAppsVariant;if(r!==t.results&&n){var i=r.reduce(function(e,t){"app"===t.type&&t.bot_user_id&&e.push(t.bot_user_id);return e},[]);this.props.getChannelMembershipInfoForUsers({channelId:this.props.channelId,userIds:i})}}},{key:"handleItemClick",value:function e(t){var a=t.currentTarget.children[0].dataset;a.app_id&&this.selectApp(a)}},{key:"isFocusableItem",value:function e(t){var a=t.index;var r=this.props.results[a]||{},n=r.type;return n===K["g"].APP||n===K["g"].APP_LIMIT_METER||n===K["g"].APP_TUTORIAL}},{key:"loadMoreApps",value:function e(){var t=this;if(this.isPaginating)return;this.isPaginating=true;this.props.loadMoreApps().then(function(){t.isPaginating=false})}},{key:"openAboutApp",value:function e(t){this.props.openAboutApp({appId:t.app_id,serviceId:t.bot_id,memberId:t.bot_user_id})}},{key:"paginate",value:function e(){this.shouldPaginate()&&this.loadMoreApps()}},{key:"selectApp",value:function e(t){var a=this.props,r=a.clogger,n=a.channelId;var i={app_id:t.app_id,bot_id:t.bot_id,is_from_search:this.props.isShowingDefaultAppCategories?"0":"1",contexts:{core:{app_id:t.app_id,bot_id:t.bot_id}}};if("tutorial_app"===t.app_id)this.props.openAppsTutorialModal();else if("app_limit_meter"===t.app_id){var s=parseInt(t.clogParams.split("=")[1],10);if("pricing_link"===t.clogUiElement){Object(f["openAuthenticatedUrlInBrowser"])(this.props.team,Object(ye["j"])({entryPoint:"apps_browser_results"}));r.track("GROWTH_PRICING",{num_of_apps:s,contexts:{ui_context:{step:"apps_browser",action:"click",ui_element:"pricing_link"}}});r.track("UPGRDEXP_LIMIT_APPSPACE",{num_of_apps:s,contexts:{ui_context:{step:"apps_browser",action:"click",ui_element:"pricing_link"}}})}else{Object(f["openAuthenticatedUrlInBrowser"])(this.props.team,"/apps");r.track("UPGRDEXP_LIMIT_APPSPACE",{num_of_apps:s,contexts:{ui_context:{step:"apps_browser",action:"click",ui_element:"link_app_directory"}}})}}else if("true"===t.can_app_be_added){this.props.closeModal();this.props.addAppToChannelByMemberId({memberId:t.bot_user_id,channelId:n})}else if("true"===t.is_installed){this.openAboutApp(t);r.track("APP_INDEX_VIEW_CLICK",i)}else{Object(f["openAuthenticatedUrlInBrowser"])(this.props.team,"/apps/"+t.app_id+"?utm_source=in-prod&utm_medium=inprod-btn_app_install-index-click");r.track("APP_INDEX_INSTALL_CLICK",i);r.track("APP_CLICK_BTN_APP_INSTALL_IN_INDEX",Ye({},i,{contexts:Ye({},i.contexts,{ui_context:{step:"index",action:"click",ui_element:"btn_app_install"}})}))}}},{key:"shouldPaginate",value:function e(){return!!this.props.nextCursor}},{key:"renderRow",value:function e(t,a){var r=a.key;var n=this.props.results;var i=n[t];switch(i.type){case K["g"].LOADING:return c.a.createElement("div",{style:{height:62}},c.a.createElement(Ee["a"],{size:"jumbo"}));case K["g"].APP_LIMIT_METER:var s=this.props,o=s.isShowingDefaultAppCategories,l=s.hasSeenAppSpaceTutorial;var u={isShowingDefaultAppCategories:o,hasSeenAppSpaceTutorial:l};return c.a.createElement(ze,u);case K["g"].CATEGORY:var d=i.display_name;return c.a.createElement("div",{className:H()("p-apps_browser__category_header",{margin_top_150:!(0===t)}),"data-category_header":"true","data-qa":"apps_browser__category_header"},d);case K["g"].APP_TUTORIAL:return c.a.createElement(Ne,{key:r,addAppsVariant:this.props.addAppsVariant,app:Ze(),className:"p-apps_browser__app p-apps_browser__app--tutorial","data-app_index":t});case K["g"].APP:return c.a.createElement(Ne,{key:r,addAppsVariant:this.props.addAppsVariant,channelId:this.props.channelId,app:i,className:"p-apps_browser__app","data-app_index":t});default:return c.a.createElement(c.a.Fragment,null)}}},{key:"render",value:function e(){var t=this;var a=this.props,r=a.clientTheme,i=a.results,s=a.keys,o=a.searchInput;if(!i.length&&o)return c.a.createElement("section",{key:"no-results",className:"p-apps_browser__no_results","data-qa":"apps_browser__no_results"},Je.t("There are no apps matching"),"\xa0",c.a.createElement("strong",null,o));var l=H()("p-apps_browser__list_container",n()({"p-apps_browser__list_container--loading":0===s.length},"p-apps_browser__list_container--loading--"+r,0===s.length&&"light"!==r));return c.a.createElement(ke["a"],null,function(e){var a=e.width,r=e.height,n=e.measureRef;return c.a.createElement("div",{className:l,"data-qa":"apps_browser__results_list",ref:n},c.a.createElement(Oe["a"],{width:a,height:Math.floor(r),keys:s,rowRenderer:t.renderRow,onItemClick:t.handleItemClick,loadPost:t.paginate,loadAround:t.paginate,isFocusableItem:t.isFocusableItem,hideHiddenStopTabs:true}))})}}]);return t}(l["Component"]);$e.displayName="AppsBrowserResults";$e.defaultProps=Xe;var et=function e(t){return{clogger:Object(b["a"])({state:t}),hasSeenAppSpaceTutorial:Object(W["k"])(t,"seen_app_space_tutorial"),searchInput:Object(V["t"])(t),results:Object(V["s"])(t),keys:Object(V["p"])(t),nextCursor:Object(V["q"])(t),isShowingDefaultAppCategories:Object(V["o"])(t),clientTheme:Object($["getClientTheme"])(t)}};var tt=function e(t){return Object(x["bindActionCreators"])({openAboutApp:ge["b"],openAppsTutorialModal:be,closeModal:d["closeModal"],getChannelMembershipInfoForUsers:_e["getChannelMembershipInfoForUsers"],loadMoreApps:L["g"],addAppToChannelByMemberId:Z},t)};var at=Object(_["connect"])(et,tt)($e);var rt=a(2469);var nt=new R["b"]("apps_browser");var it={channelId:void 0,addAppsVariant:false,team:void 0,fetchDefaultApps:D["noop"],resetSearch:D["noop"]};var st=function(e){M()(t,e);function t(e){var a;E()(this,t);a=j()(this,T()(t).call(this,e));a.handleAppDirectoryButtonClick=a.handleAppDirectoryButtonClick.bind(N()(a));a.renderHeader=a.renderHeader.bind(N()(a));return a}S()(t,[{key:"componentDidMount",value:function e(){this.props.fetchDefaultApps()}},{key:"componentWillUnmount",value:function e(){this.props.resetSearch()}},{key:"handleAppDirectoryButtonClick",value:function e(){var t=this.props.clogger;Object(f["openAuthenticatedUrlInBrowser"])(this.props.team,"/apps?utm_source=in-prod&utm_medium=inprod-link_app_directory-index-click");t.track("APP_INDEX_VIEW_APP_DIRECTORY_CLICK");t.track("APP_CLICK_LINK_APP_DIRECTORY_IN_INDEX",{contexts:{ui_context:{step:"index",action:"click",ui_element:"link_app_directory"}}})}},{key:"renderHeader",value:function e(){var t=this.props,a=t.addAppsVariant,r=t.channelId;var n;n=a&&r?c.a.createElement("h2",{className:"overflow_hidden"},nt.rt("Add apps to {channelName}",{channelName:c.a.createElement(B["a"],{channelId:r,inline:true,className:"overflow_ellipsis"})})):c.a.createElement("h2",null,nt.t("Browse Apps"));return c.a.createElement("div",{className:"p-apps_browser__filter_header","data-qa":"apps_browser__header"},n,c.a.createElement(U["d"],{className:"p-apps_browser__browse_apps flex_shrink_none","data-qa":"apps_browser__app_directory_button",size:"large",type:"outline",onClick:this.handleAppDirectoryButtonClick},nt.t("View App Directory")))}},{key:"render",value:function e(){var t=this.props,a=t.addAppsVariant,r=t.channelId,n=t.team;var i={addAppsVariant:a,channelId:r,team:n};return c.a.createElement("div",{className:"p-apps_browser","data-qa":"apps_browser"},c.a.createElement("div",{className:"p-apps_browser__filter_container"},this.renderHeader(),c.a.createElement(q["a"],null)),c.a.createElement(at,i))}}]);return t}(l["Component"]);st.displayName="AppsBrowser";st.defaultProps=it;var ot=function e(t){var a=Object(m["d"])(t);return{channelId:Object(F["a"])(t),team:a,clogger:Object(b["a"])({state:t})}};var lt=function e(t){return Object(x["bindActionCreators"])({fetchDefaultApps:L["e"],resetSearch:L["j"]},t)};var ct=Object(_["connect"])(ot,lt)(st);var ut=a(20);var dt=a(9);var pt=a(98);var mt=a(23);var ht=new R["b"]("apps_browser");function vt(e){var t=e.tutorialSeen,a=e.openAppsTutorial,r=e.clogger;var n=Object(l["useCallback"])(function(){r.track("APP_INDEX_MANAGE_CLICK",null);r.track("APP_CLICK_LINK_MANAGE_APPS_IN_INDEX",{contexts:{ui_context:{step:"index",action:"click",ui_element:"link_manage_apps"}}})},[r]);return c.a.createElement("div",{className:"p-apps_browser_links"},c.a.createElement(pt["a"],{className:"p-apps_browser_links__link",href:"/apps/manage?utm_source=in-prod&utm_medium=inprod-link_manage_apps-index-click",onClick:n,"data-qa":"apps_browser_manage_apps"},c.a.createElement(mt["b"],{type:"cog-o",inline:true,className:"p-apps_browser_links__link_icon"}),ht.t("Manage apps...")),t&&c.a.createElement(pt["a"],{className:"p-apps_browser_links__link","data-qa":"apps_browser_view_tutorial",onClick:a},c.a.createElement(mt["b"],{type:"lightbulb-o",inline:true,className:"p-apps_browser_links__link_icon"}),ht.t("What are apps?")))}vt.displayName="AppsBrowserHeaderLinks";var ft="seen_app_space_tutorial";var bt=function e(t){return{tutorialSeen:Object(W["k"])(t,ft),clogger:Object(b["a"])({state:t})}};var gt=function e(t){return Object(x["bindActionCreators"])({openAppsTutorial:be},t)};var _t=Object(_["connect"])(bt,gt)(vt);var yt=new R["b"]("apps_browser");function Ot(e){var t=e.addAppsVariant,a=e.channelName,r=e.clogger;var n=t&&a?yt.t("Add apps to {channelName}",{channelName:a}):yt.t("Browse Apps");var i=function e(){r.track(g["EventId"].APP_BROWSER_CLOSE,{contexts:{ui_context:{step:g["UiStep"].APPS_BROWSER,action:g["UiAction"].CLICK,ui_properties:{element_type:g["ElementType"].X,element_name:"app_browser_fullscreen_modal_close"}}}})};return c.a.createElement(y["a"],{showGoButton:false,showCancelButton:false,onCancel:i,contentLabel:n,"data-qa":"apps_browser_modal",modalClasses:"p-apps_browser_modal"},c.a.createElement(_t,null),c.a.createElement(O["a"],null,c.a.createElement("div",{className:"p-apps_browser_container"},c.a.createElement(ct,e))))}Ot.displayName="AppsBrowserModal";Ot.defaultProps={addAppsVariant:false,channelName:"",clogger:{}};var kt=function e(t){var a=Object(F["a"])(t);var r=Object(b["a"])({state:t});if(!a)return{};var n=Object(ut["e"])(t,a);return{channelName:Object(dt["getDisplayNameForChannel"])(t,n,{publicChannelIncludeHashSign:false,imIncludeAtSign:false}),clogger:r}};var Et=Object(_["connect"])(kt)(Ot);var Ct=a(774);var St=a(1993);function wt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function jt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?wt(Object(a),true).forEach(function(t){n()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):wt(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var It=Object(u["b"])("Opens the apps browser modal",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var r=a.referringEventId,n=a.referringUiContext,i=a.channelId,o=s()(a,["referringEventId","referringUiContext","channelId"]);var l=Object(Ct["a"])(t());!o.addAppsVariant&&l&&e(Object(St["a"])());var u=Object(b["a"])({getState:t});u.track(g["EventId"].APP_INDEX_OPEN,null);o.addAppsVariant&&r&&u.track(g["EventId"].APPS_BROWSER_ADD_TO_CHANNEL,{contexts:{ui_context:{action:g["UiAction"].IMPRESSION},referring_ui_context:n,core:{channel_id:i}},referring_event_id:r});var _=Object(p["b"])(t());var y=Object(m["k"])(t(),_);var O=Object(f["isEnterpriseTeam"])(y);var k=Object(f["isPaidTeam"])(y);var E=Object(h["getBrowser"])();var C={isUnpaid:!k&&!O,isInternetExplorer:"ie"===E,isFirefoxAndWindows:"firefox"===E&&Object(h["isWindows"])(),isFirefoxAndMac:"firefox"===E&&Object(h["isMac"])(),isMacSsbBuild:Object(v["isAppStoreBuild"])()};e(Object(d["openModal"])({element:c.a.createElement(Et,jt({},o,{},C))}))});It.meta={name:"openAppsBrowserModal",key:"actionsOpenAppsBrowserModalOpenAppsBrowserModal",description:"Opens the apps browser modal"};It.propTypes={addAppsVariant:o["default"].bool,eventId:o["default"].number,uiContext:o["default"].object,channelId:o["default"].string};var Tt=t["a"]=It},,,,,,,,function(e,t,a){"use strict";var r=a(88);var n=a.n(r);var i=a(110);var s=a.n(i);var o=a(135);var l=a.n(o);var c=a(169);var u=a.n(c);var d=a(138);var p=a.n(d);var m=a(147);var h=a.n(m);var v=a(185);var f=a.n(v);var b=a(1);var g=a.n(b);var _=a(12);var y=a(0);var O=a(13);var k=a.n(O);var E=a(2);var C=a(20);var S=a(484);var w=a(11);var j=a(370);var I=a(87);var T=a(211);var A=a(182);var N=a(104);var P=a(90);var M=a(41);var D=a(9);var x=a(2090);var R=a(2709);var F=a(2711);var L=a(23);var U=a(43);var B=a(1947);var q=a(2712);var G=a(1056);var H=a(6);var W=new H["b"]("message");var V={PINNED:"pinned",UNPINNED:"unpinned",STARRED:"starred",UNSTARRED:"unstarred"};var K={currentUserId:void 0,isIAP1Enabled:false,featureContextualMessageShortcuts:false};var z=function(e){f()(t,e);function t(e){var a;s()(this,t);a=u()(this,p()(t).call(this,e));a.state={ariaLiveMessage:null};return a}l()(t,[{key:"componentDidUpdate",value:function e(t){this.maybeSetAriaLiveMessage(t)}},{key:"componentWillUnmount",value:function e(){this.cancelTimerToClearMessage()}},{key:"getAriaLiveMessageOnUpdate",value:function e(t){var a=this.props,r=a.currentUserId,n=a.msg;var i=Object(M["getMessagePinnedInfo"])(t.msg);var s=i&&i.pinnedBy;var o=s===r;var l=Object(M["getMessagePinnedInfo"])(n);var c=l&&l.pinnedBy;var u=c===r;var d=Object(M["isStarred"])(t.msg);var p=Object(M["isStarred"])(n);if(o&&!u)return V.UNPINNED;if(!o&&u)return V.PINNED;if(!d&&p)return V.STARRED;if(d&&!p)return V.UNSTARRED;return null}},{key:"getAriaLiveMessageText",value:function e(){var t=this.props,a=t.isIAP1Enabled,r=t.featureContextualMessageShortcuts;var n=this.state.ariaLiveMessage;if(!r)return"";if(n===V.PINNED)return W.t("Added to the pinned items",{note:"Used to confirm the pin action for customers using screen readers. Not visible on screen."});if(n===V.UNPINNED)return W.t("Removed from the pinned items",{note:"Used to confirm the remove pin action for customers using screen readers. Not visible on screen."});if(n===V.STARRED){if(a)return"Added to your saved items";return W.t("Added to your starred items",{note:"Used to confirm the star action for customers using screen readers. Not visible on screen."})}if(n===V.UNSTARRED){if(a)return"Removed from your saved items";return W.t("Removed from your starred items",{note:"Used to confirm the remove star action for customers using screen readers. Not visible on screen."})}return""}},{key:"cancelTimerToClearMessage",value:function e(){clearTimeout(this.ariaLiveMessageTimer)}},{key:"maybeSetAriaLiveMessage",value:function e(t){var a=this;if(!this.props.featureContextualMessageShortcuts)return;var r=this.getAriaLiveMessageOnUpdate(t);if(r&&r!==this.state.ariaLiveMessage){this.cancelTimerToClearMessage();this.setState(function(){return{ariaLiveMessage:r}},function(){a.startTimerToClearMessage()})}}},{key:"startTimerToClearMessage",value:function e(){var t=this;this.ariaLiveMessageTimer=setTimeout(function(){t.setState(function(){return{ariaLiveMessage:null}})},3e3)}},{key:"render",value:function e(){return g.a.createElement("div",{className:"c-message_kit__labels__offscreen_message","aria-live":"assertive"},this.getAriaLiveMessageText())}}]);return t}(b["Component"]);z.displayName="LabelsAriaLiveMessage";z.defaultProps=K;function Q(e){return{currentUserId:Object(w["getCurrentUserId"])(e),isIAP1Enabled:Object(P["e"])(e),featureContextualMessageShortcuts:Object(w["isFeatureEnabled"])(e,"feature_contextual_message_shortcuts")}}var Y=Object(_["connect"])(Q)(z);var J=a(3630);function X(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function Z(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?X(Object(a),true).forEach(function(t){n()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):X(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var $={pinned:"thumb-tack-filled",starred:"star",custom_response:"pencil",sli_highlight:"sparkles-filled",ephemeral:"eye-filled",broadcast:"jump"};var ee={className:void 0,children:void 0,showPinned:true,showStarred:true,showBroadcast:false,theme:"light",sliHighlight:void 0,currentUserId:void 0,primaryView:void 0,isSelfIm:false,isSlackbotIm:false,dispatch:E["noop"],isIAP1Enabled:false,featureDangerouslyGuardIATranslations:false,setBackground:E["noop"]};var te=function(e){f()(t,e);function t(e){var a;s()(this,t);a=u()(this,p()(t).call(this,e));a.onBroadcastClick=a.onBroadcastClick.bind(h()(a));a.renderHighlight=a.renderHighlight.bind(h()(a));a.renderStarButton=a.renderStarButton.bind(h()(a));a.renderBroadcast=a.renderBroadcast.bind(h()(a));a.onStarClick=a.onStarClick.bind(h()(a));a.labelText=null;a.primaryLabelType=null;return a}l()(t,[{key:"componentDidMount",value:function e(){this.setBackground()}},{key:"componentDidUpdate",value:function e(){this.setBackground()}},{key:"onBroadcastClick",value:function e(t){var a=this.props,r=a.dispatch,n=a.msg,i=a.primaryView;t.preventDefault();if(i===n.channel){r(Object(A["c"])({ts:n.ts,highlight:true}));return}r(Object(T["a"])({id:n.channel,startTs:n.ts}))}},{key:"onStarClick",value:function e(){var t=this.props.dispatch;t(Object(N["l"])())}},{key:"getLabelTypes",value:function e(){var t=this.props,a=t.msg,r=t.sliHighlight,n=t.showPinned,i=t.showStarred,s=t.showBroadcast;var o=Object(M["getMessagePinnedInfo"])(a);return Object(x["a"])({isPinned:n&&!!o,isEphemeral:Object(M["isEphemeral"])(a),isStarred:i&&Object(M["isStarred"])(a),isBroadcast:s&&Object(M["isThreadBroadcast"])(a),subtype:a.subtype,sliHighlight:!!r})}},{key:"setBackground",value:function e(){var e=this.props.setBackground;e({labels:this.labelText&&this.primaryLabelType})}},{key:"renderBroadcast",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.text;if(!a)return null;return g.a.createElement(U["a"],{onClick:this.onBroadcastClick,className:"c-message_kit__labels__link"},a)}},{key:"renderHighlight",value:function e(){var t=this.props,a=t.msg,r=t.sliHighlight;var n=a.channel,i=a.ts;if(!Object(S["shouldShowHighlightsLabel"])(r))return null;return g.a.createElement(q["a"],{sliHighlight:r,channelId:n,ts:i})}},{key:"renderLabelIcon",value:function e(t){var a=this.props.isIAP1Enabled;var r=$[t];if(!r)return null;a&&"starred"===t&&(r="bookmark-filled");return g.a.createElement("div",{className:"c-message_kit__labels__icon"},g.a.createElement(L["b"],{type:r,size:"inherit"}))}},{key:"renderLabelText",value:function e(t){var a=this.props,r=a.msg,n=a.currentUserId,i=a.isSelfIm,s=a.isSlackbotIm,o=a.isIAP1Enabled,l=a.featureDangerouslyGuardIATranslations;var c=Object(M["getMessagePinnedInfo"])(r);var u=c&&c.pinnedBy;var d=Object(F["a"])(Z({},t,{isSelfIm:i,isSlackbotIm:s,currentUserId:n,pinnedBy:u,renderPinnedBy:this.renderPinnedBy,renderStarButton:this.renderStarButton,renderHighlight:this.renderHighlight,renderBroadcast:this.renderBroadcast,isIAP1Enabled:o,featureDangerouslyGuardIATranslations:l}));if(!d)return null;return g.a.createElement("span",{className:"c-message_kit__labels__text"},d)}},{key:"renderPinnedBy",value:function e(t){return g.a.createElement(B["a"],{className:"c-message_kit__labels__link",id:t})}},{key:"renderStarButton",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.text;if(!a)return null;return g.a.createElement(U["a"],{onClick:this.onStarClick,className:"c-message_kit__labels__link"},a)}},{key:"render",value:function e(){var t=this.props,a=t.children,r=t.theme,n=t.msg;var i=this.getLabelTypes();var s=Object(R["a"])(i);var o=this.renderLabelIcon(s);var l=this.renderLabelText(i);this.labelText=l;this.primaryLabelType=s;var c=k()(this.props.className,"c-message_kit__labels","c-message_kit__labels--"+s,"c-message_kit__labels--"+r);var u=l?g.a.createElement("div",{className:c},g.a.createElement("div",{className:"c-message_kit__labels__label"},o,l),a):a;return g.a.createElement(g.a.Fragment,null,g.a.createElement(Y,{msg:n}),u)}}]);return t}(b["PureComponent"]);te.displayName="MessageLabels";te.defaultProps=ee;var ae=function e(t,a){var r=a.msg;if(!r)return null;var n=r.channel,i=r.ts;var s=Object(w["getCurrentUserId"])(t);var o=Object(C["e"])(t,n);var l=Object(I["a"])(t);var c=Object(S["getMessageMetaData"])(t,{channelId:n,ts:i}),u=c.sliHighlight;var d=Object(D["isSlackbot"])(o);var p=Object(D["isYou"])(s,o);return{theme:Object(j["a"])(t),currentUserId:s,primaryView:l,sliHighlight:u,isSlackbotIm:d,isSelfIm:p,isIAP1Enabled:Object(P["e"])(t),featureDangerouslyGuardIATranslations:Object(P["e"])(t)}};var re=t["a"]=Object(G["b"])(Object(_["connect"])(ae)(te))},,,,,,,function(e,t,a){"use strict";a.d(t,"a",function(){return u});a.d(t,"d",function(){return d});a.d(t,"c",function(){return p});a.d(t,"b",function(){return m});var r=a(40);var n=a.n(r);var i=a(128);var s=a(769);var o=a(189);var l=a(6);var c=new l["b"]("do_not_disturb");var u=function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=a.currentTime,o=void 0===r?n()().unix():r;var l=Object(i["a"])(o);var c=Object(i["a"])(t);var u=Math.ceil(Object(s["a"])(c,l));return u};var d=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.time,r=void 0===a?"09:00":a;var i=n()().add(1,"days").format("YYYY-MM-DD");var s=n()(i+" "+r).unix();return u(s)};var p=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.time,r=void 0===a?"09:00":a;var i=n()().add(1,"week").startOf("isoWeek").format("YYYY-MM-DD");var s=n()(i+" "+r).unix();return u(s)};var m=function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=a.do24hrTime,i=void 0!==r&&r,s=a.today,l=void 0===s?n()().format("YYYY-MM-DD"):s,u=a.tomorrow,d=void 0===u?n()().add(1,"day").format("YYYY-MM-DD"):u,p=a.vacationDelight,m=void 0!==p&&p,h=a.featureVacationDelight,v=void 0!==h&&h;if(!t)return"";if(m)return v?c.t("Notifications are paused until you\u2019re back from vacation and clear your status. \ud83c\udf34"):"Notifications are paused until you\u2019re back from vacation and clear your status. \ud83c\udf34";var f=Object(o["n"])(t,{do24hrTime:i});var b=Object(o["k"])(t,{omitTime:true});if(b===l)return c.t("Notifications paused until {time}",{time:f});if(b===d)return c.t("Notifications paused until tomorrow at {time}",{time:f});return c.t("Notifications paused until {expires}",{expires:Object(o["c"])(t,"{status_expiration}",{do24hrTime:i})})}},,function(e,t,a){"use strict";a.d(t,"a",function(){return n});var r=a(442);function n(e){return Object(r["a"])((e||"").trim().toLowerCase())}},,,,,,function(e,t,a){"use strict";a.d(t,"a",function(){return u});a.d(t,"g",function(){return d});a.d(t,"e",function(){return p});a.d(t,"f",function(){return m});a.d(t,"d",function(){return h});a.d(t,"c",function(){return v});a.d(t,"b",function(){return b});var r=a(2);var n=a.n(r);var i={"en-us":["en-US","English"],"es-es":["es","Spanish"],"fr-fr":["fr","French"],"de-de":["de","German"],"ja-jp":["ja","Japanese"]};var s=function e(){return new Promise(function(e){var t;var a=function a(){if(window.$zopim&&window.zE&&window.zE.hide){clearInterval(t);window.zE.hide();e()}};t=setInterval(a,500);a()})};var o=function e(t){window.$zopim&&window.$zopim(function(){window.$zopim.livechat.addTags(t)})};var l=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var a=t.name,r=t.email;window.zE.identify({name:a,email:r})};var c=function e(t){var a=i[t]||i["en-us"];var r=a[0];var n=a[1];window.zE.setLocale(r);o(n)};var u=function e(){window.zE.show();window.zE.activate();window.zE.hide();window.zE.show()};var d=function e(){window.zE.activate();window.$zopim&&window.$zopim(function(){window.$zopim.livechat.window.show()})};var p=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r["noop"];window.zE.activate();window.$zopim&&window.$zopim(function(){window.$zopim.livechat.window.onHide(t)})};var m=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r["noop"];window.zE.activate();window.$zopim&&window.$zopim(function(){window.$zopim.livechat.window.onShow(t)})};var h=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r["noop"];window.zE.activate();window.$zopim&&window.$zopim(function(){window.$zopim.livechat.setOnChatStart(t)})};var v=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r["noop"];window.zE.activate();window.$zopim&&window.$zopim(function(){window.$zopim.livechat.setOnChatEnd(t)})};var f=function e(){window.$zopim&&window.$zopim(function(){if(!window.$zopim.livechat.isChatting()){h(d);window.$zopim.livechat.sendVisitorPath({url:"https://slack.com",title:"Slack"});window.$zopim.livechat.sendVisitorPath()}})};var b=function e(t,a){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return s().then(function(){l(t);c(a);r.autoOpenOnChatStart&&f();window.zE("webWidget","hide");window.zE("webWidget:on","close",function(){window.zE("webWidget","show")});return Promise.resolve(true)}).catch(function(){return Promise.resolve(false)})}},,,,function(e,t,a){"use strict";var r=a(110);var n=a.n(r);var i=a(135);var s=a.n(i);var o=a(2);var l=a(595);var c=a(61);var u=a(28);var d=Object(u["b"])("TS.debug_widget.isVisible");var p=Object(u["b"])("TS.debug_widget.setFrameRate");a.d(t,"f",function(){return O});a.d(t,"h",function(){return k});a.d(t,"j",function(){return E});a.d(t,"d",function(){return C});a.d(t,"b",function(){return S});a.d(t,"c",function(){return w});a.d(t,"g",function(){return j});a.d(t,"i",function(){return I});a.d(t,"e",function(){return T});a.d(t,"a",function(){return A});var m=100;var h=1e3;var v=300;var f=1e3;var b=500;var g=60;var _=function(){function e(){n()(this,e);this.enabledForPRQMetrics=false;this.enabledForClientStats=false;this.resetCountersForClientStats();this.resetCountersForPRQMetrics();this.beachballsTotal=0;this.stuttersTotal=0;this.rafHandler=this.rafHandler.bind(this)}s()(e,[{key:"isEnabled",value:function e(){return this.isEnabledForClientStats()||this.isEnabledForPRQMetrics()}},{key:"rafHandler",value:function e(){this.isEnabledForClientStats()&&this.rafHandlerForClientStats();this.isEnabledForPRQMetrics()&&this.rafHandlerForPRQMetrics();this.isEnabled()&&window.requestAnimationFrame(this.rafHandler)}},{key:"resetCountersForClientStats",value:function e(){this.beachballs=0;this.frameRates=[];this.stutters=0;this.lastRafHandlerTimeForClientStats=window.performance.now();this.fpsIndex=0;this.fpsStartTime=null}},{key:"rafHandlerForClientStats",value:function e(){if(!this.isEnabledForClientStats())return;var t=window.performance.now();var a=t-this.lastRafHandlerTimeForClientStats;this.lastRafHandlerTimeForClientStats=t;if(a>h){this.beachballs+=1;this.beachballsTotal+=1}else if(a>m){this.stutters+=1;this.stuttersTotal+=1}0===this.fpsIndex&&(this.fpsStartTime=t);this.fpsIndex+=1;if(this.fpsIndex===v){var r=(t-this.fpsStartTime)/1e3;var n=Math.floor(this.fpsIndex/r);this.fpsIndex=0;d()&&p(n);this.frameRates.push(n)}}},{key:"startClientStats",value:function e(){this.isEnabled()||window.requestAnimationFrame(this.rafHandler);this.enabledForClientStats=true;this.resetCountersForClientStats()}},{key:"stopClientStats",value:function e(){this.enabledForClientStats=false}},{key:"storeClientStats",value:function e(){var t=Object(c["a"])();t.count("stutters",this.stutters);t.count("beachballs",this.beachballs);if(!Object(o["isEmpty"])(this.frameRates)){var a=Object(o["min"])(this.frameRates);var r;var n=this.frameRates.sort();var i=Math.floor(n.length/2);r=n.length%2===1?n[i]:(n[i-1]+n[i])/2;t.store("fps_min",a);t.store("fps_median",r)}this.stutters=void 0;this.beachballs=void 0;this.frameRates=void 0}},{key:"isEnabledForClientStats",value:function e(){return!!this.enabledForClientStats}},{key:"getTotalBeachballCount",value:function e(){return this.beachballsTotal}},{key:"getTotalStutterCount",value:function e(){return this.stuttersTotal}},{key:"resetCountersForPRQMetrics",value:function e(){this.histJankyWindows={};this.histFrameRenderTime={};this.durationMs=0;this.lastRafHandlerTimeForPRQMetrics=void 0;this.nextJankyWindowSampleIntervalNumber=1;this.framesInPreviousJankyWindowSample=0;this.framesInCurrentJankyWindowSample=0}},{key:"recordJankyWindows",value:function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(a<1)return;var r=Math.max(g-t,0);this.histJankyWindows[r]=(this.histJankyWindows[r]||0)+a}},{key:"sampleJankyWindows",value:function e(){var t=Object(l["d"])(this.durationMs,9)>b*this.nextJankyWindowSampleIntervalNumber;var a=Math.floor(this.durationMs/b);var r=a-this.nextJankyWindowSampleIntervalNumber;if(t){if(this.durationMs>=f){this.recordJankyWindows(0,r-1);this.recordJankyWindows(this.framesInCurrentJankyWindowSample,r>0?1:0);this.recordJankyWindows(this.framesInCurrentJankyWindowSample+this.framesInPreviousJankyWindowSample)}this.nextJankyWindowSampleIntervalNumber=a+1;this.framesInPreviousJankyWindowSample=r>0?0:this.framesInCurrentJankyWindowSample;this.framesInCurrentJankyWindowSample=0}this.framesInCurrentJankyWindowSample+=1}},{key:"rafHandlerForPRQMetrics",value:function e(){if(!this.isEnabledForPRQMetrics())return;var t=window.performance.now();if("undefined"===typeof this.lastRafHandlerTimeForPRQMetrics){this.lastRafHandlerTimeForPRQMetrics=t;return}var a=t-this.lastRafHandlerTimeForPRQMetrics;var r=Object(l["d"])(Math.round(a,0),2);this.histFrameRenderTime[r]=(this.histFrameRenderTime[r]||0)+1;this.lastRafHandlerTimeForPRQMetrics=t;this.durationMs+=a;this.sampleJankyWindows()}},{key:"startPRQMetrics",value:function e(){this.isEnabled()||window.requestAnimationFrame(this.rafHandler);this.enabledForPRQMetrics=true;this.resetCountersForPRQMetrics()}},{key:"stopPRQMetrics",value:function e(){this.enabledForPRQMetrics=false}},{key:"isEnabledForPRQMetrics",value:function e(){return!!this.enabledForPRQMetrics}},{key:"getPRQMetrics",value:function e(){return{durationMs:Math.round(this.durationMs),histJankyWindows:this.histJankyWindows,histFrameRenderTime:this.histFrameRenderTime}}}]);return e}();_.instance=null;function y(){null===_.instance&&(_.instance=new _);return _.instance}var O=y().startClientStats.bind(_.instance);var k=y().stopClientStats.bind(_.instance);var E=y().storeClientStats.bind(_.instance);var C=y().isEnabledForClientStats.bind(_.instance);var S=y().getTotalBeachballCount.bind(_.instance);var w=y().getTotalStutterCount.bind(_.instance);var j=y().startPRQMetrics.bind(_.instance);var I=y().stopPRQMetrics.bind(_.instance);var T=y().isEnabledForPRQMetrics.bind(_.instance);var A=y().getPRQMetrics.bind(_.instance)},,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";var r=a(196);var n=a.n(r);var i=a(110);var s=a.n(i);var o=a(135);var l=a.n(o);var c=a(169);var u=a.n(c);var d=a(138);var p=a.n(d);var m=a(147);var h=a.n(m);var v=a(185);var f=a.n(v);var b=a(1);var g=a.n(b);var _=a(0);var y=a(12);var O=a(2);var k=a(30);var E=a(17);var C=a(6);var S=a(250);var w=a(232);var j=a(256);var I=a(23);var T=a(245);var A=a.n(T);var N=a(218);var P=a.n(N);var M=a(13);var D=a.n(M);var x=a(1569);var R=a(547);var F=a(194);var L=a(24);var U=a(1582);var B=a(1607);var q={default:"default",short:"short"};var G=new C["b"]("form");var H={autoSelectFirstOption:_["default"].bool,className:_["default"].string,displayValue:_["default"].string,id:_["default"].string,isLoading:_["default"].bool,labelId:_["default"].string,membersOnly:_["default"].bool,name:_["default"].string,onChange:_["default"].func,onClearButtonClick:_["default"].func.isRequired,onClose:_["default"].func,onFilterInputChange:_["default"].func,onOptionHighlighted:_["default"].func,onOutsideClick:_["default"].func,onOpen:_["default"].func,onScroll:_["default"].func,optionClassName:_["default"].string,optionGroups:_["default"].array,options:_["default"].array,optionsListOffsetBottom:_["default"].number,optionsListOffsetTop:_["default"].number,optionsListWidth:_["default"].number,optionsRowHeight:_["default"].number,pillarClassName:_["default"].string,placeholder:_["default"].string,selectedOption:_["default"].object,selectedValueClassName:_["default"].string,type:_["default"].oneOf(Object(O["values"])(q)),useFullWidthOptions:_["default"].bool,usePlaceholderOption:_["default"].bool,wrapperClassName:_["default"].string,value:_["default"].string};var W={className:null,displayValue:void 0,id:"select-"+Object(F["d"])(),isLoading:false,labelId:null,membersOnly:true,name:null,onChange:O["noop"],onClose:O["noop"],onFilterInputChange:O["noop"],onOptionHighlighted:O["noop"],onOutsideClick:O["noop"],onOpen:O["noop"],optionClassName:void 0,optionGroups:void 0,options:void 0,optionsListOffsetBottom:0,optionsListOffsetTop:0,optionsListWidth:void 0,pillarClassName:void 0,placeholder:void 0,selectedOption:void 0,selectedValueClassName:void 0,type:q.default,usePlaceholderOption:true,wrapperClassName:null,value:""};var V=function(e){f()(t,e);function t(e){var a;s()(this,t);if(!e.optionGroups&&!e.options)throw new Error('WorkspaceSearchSelect requires an "optionGroups" or "options" prop.');a=u()(this,p()(t).call(this,e));a.preventFocusAndBlur=false;a.state={filterQuery:"",isOpen:false,selectedOptionValue:""};Object(k["a"])(h()(a),["getFilteredOptions","getFilteredOptionGroups","onBlurred","onClearInput","onClicked","onFilterInputChanged","onFocused","onKeyPressedEsc","onKeyPressedUpOrDown","onOptionSelected","onOutsideClicked","onWrapperMouseDownOrTouchStart","onWrapperMouseUpOrTouchEnd","setRef"]);return a}l()(t,[{key:"componentDidMount",value:function e(){this.initKeyCommands()}},{key:"UNSAFE_componentWillReceiveProps",value:function e(){this.setState(function(e){return{isOpen:e.isOpen}})}},{key:"componentDidUpdate",value:function e(t,a){var r=this.props,n=r.onClose,i=r.onOpen,s=r.selectedOption;var o=this.state,l=o.isOpen,c=o.selectedOptionValue;if(s){var u=Object(j["h"])(s)?Object(E["getMemberRealName"])(s):Object(O["get"])(s,"name");u!==c&&this.setSelectedOptionValue(u)}else c&&this.setSelectedOptionValue("");if(this.state.isOpen){document.addEventListener("click",this.onOutsideClicked);if(!a.isOpen){this.filterInput&&this.filterInput.focus();i(this.filterInput)}}else{document.removeEventListener("click",this.onOutsideClicked);a.isOpen&&n()}this.filterInput&&l&&this.filterInput.focus()}},{key:"componentWillUnmount",value:function e(){document.removeEventListener("click",this.onOutsideClicked);this.resetKeyCommads()}},{key:"onBlurred",value:function e(){this.preventFocusAndBlur||this.toggleOpenState(false)}},{key:"onClicked",value:function e(t){var a=t.target===this.filterInput;a?this.toggleOpenState(true):this.toggleOpenState()}},{key:"onClearInput",value:function e(){var t=this.props.onClearButtonClick;this.filterInput&&(this.filterInput.value="");this.setFilterQuery("");this.setSelectedOptionValue("");this.toggleOpenState(false);t()}},{key:"onFilterInputChanged",value:function e(){if(this.filterInput){var t=this.filterInput.value;this.props.onFilterInputChange(t);this.setFilterQuery(t)}}},{key:"onFocused",value:function e(){this.preventFocusAndBlur||this.toggleOpenState(true);var t=this.props.displayValue;t&&this.filterInput&&(this.filterInput.value=t)}},{key:"onKeyPressedEsc",value:function e(){if(this.state.isOpen){this.toggleOpenState(false);this.focus()}}},{key:"onKeyPressedUpOrDown",value:function e(t){if(!this.state.isOpen){this.toggleOpenState(true);t.stopPropagation()}}},{key:"onOptionSelected",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.value;if(!a)return;var r=this.getSelectedOptionDisplayValue({value:a});this.setSelectedOptionValue(r);this.props.onChange(a);this.toggleOpenState(false);this.filterInput&&this.filterInput.blur()}},{key:"onOutsideClicked",value:function e(t){if(this.wrapper&&!this.wrapper.contains(t.target)){this.toggleOpenState(false);this.props.onOutsideClick()}}},{key:"onWrapperMouseDownOrTouchStart",value:function e(){this.preventFocusAndBlur=true}},{key:"onWrapperMouseUpOrTouchEnd",value:function e(){this.preventFocusAndBlur=false}},{key:"onSearchAgainTriggered",value:function e(){var t=this.props.onClearButtonClick;this.preventFocusAndBlur=true;this.filterInput&&(this.filterInput.value="");this.setFilterQuery("");this.setSelectedOptionValue("");t();this.filterInput.focus();this.toggleOpenState();this.preventFocusAndBlur=false}},{key:"maybeShowOptions",value:function e(){var t=this.props,a=t.selectedOption,r=t.membersOnly;var n=this.getFilterQuery();var i=r?this.getFilteredOptions:this.getFilteredOptionGroups;if(n.length>0||a)return i();return[]}},{key:"getPlaceholder",value:function e(){return this.props.placeholder||G.t("Choose an option\u2026")}},{key:"getFilteredOptionGroups",value:function e(){var t=this.props,a=t.optionGroups,r=t.usePlaceholderOption;var n=this.getFilterQuery();if(!a)return null;if(!n&&r)return[this.getPlaceholderOptionGroup()].concat(P()(a));return a}},{key:"getFilteredOptions",value:function e(){var t=this.props,a=t.options,r=t.usePlaceholderOption;var n=this.getFilterQuery();if(!a)return null;if(!n&&r)return[this.getPlaceholderOption()].concat(P()(a));return a}},{key:"getFilterQuery",value:function e(){return Object(O["get"])(this,"filterInput.value","")}},{key:"getOptionsListEmptyMessage",value:function e(){var t=this.getFilterQuery();return t.length>0?this.renderOptionsListEmptyMessage():this.renderOptionsListHintText()}},{key:"getOptionsListTargetMeasurements",value:function e(){var t=this.props,a=t.optionsListOffsetBottom,r=t.optionsListOffsetTop,n=t.optionsListWidth;var i=this.select.getBoundingClientRect();var s=this.select.offsetTop-Object(x["a"])(this.select,this.select.offsetParent);var o=this.select.offsetLeft;var l=this.select.offsetParent.clientHeight-s;var c=s+i.height;var u=i.bottom;var d=i.top;var p=n||i.width;return{bottom:u,offsetBottom:a,offsetTop:r,relativeBottom:c,relativeLeft:o,relativeTop:l,top:d,width:p}}},{key:"getPlaceholderOption",value:function e(){return{isPlaceholder:true,label:this.getPlaceholder(),value:""}}},{key:"getPlaceholderOptionGroup",value:function e(){return{isPlaceholder:true,options:[this.getPlaceholderOption()]}}},{key:"getSelectedOptionDisplayValue",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.value;var r=this.props,n=r.optionGroups,i=r.options;var s=n?Object(O["flatMap"])(n,"options"):i;var o=Object(O["find"])(s,{value:a});return Object(O["get"])(o,"displayValue")}},{key:"setFilterQuery",value:function e(t){this.setState(function(){return{filterQuery:t}})}},{key:"setSelectedOptionValue",value:function e(t){this.setState(function(){return{selectedOptionValue:t}})}},{key:"setRef",value:function e(t){var a=this;return function(e){a[t]=e}}},{key:"focus",value:function e(){this.preventFocusAndBlur=true;this.select.focus();this.preventFocusAndBlur=false}},{key:"blur",value:function e(){this.select.blur();this.filterInput&&this.filterInput.blur()}},{key:"filterOption",value:function e(t){var a=t.label.toLowerCase();var r=this.getFilterQuery().toLowerCase();return-1!==a.indexOf(r)}},{key:"initKeyCommands",value:function e(){this.keyCommands=new S["a"](this.select);this.keyCommands.bindAll([{keys:["esc"],handler:this.onKeyPressedEsc},{keys:["up","down"],handler:this.onKeyPressedUpOrDown}])}},{key:"resetKeyCommads",value:function e(){this.keyCommands&&this.keyCommands.reset()}},{key:"toggleOpenState",value:function e(t){this.setState(function(e){var a={isOpen:Object(O["isUndefined"])(t)?!e.isOpen:t};a.isOpen||(a.filterQuery="");return a})}},{key:"renderFilterInput",value:function e(){var t=this.state,a=t.filterQuery,r=t.selectedOptionValue;var n=this.props.displayValue;var i={"aria-label":"Filter for option list",className:"c-input_select__filter_input p-workspace-search__select",onChange:this.onFilterInputChanged,placeholder:this.getPlaceholder(),ref:this.setRef("filterInput"),type:"text"};i.value=r&&!a?r:r||!n||a?a:n;return g.a.createElement("input",i)}},{key:"renderOptionsListMaybe",value:function e(){if(!this.state.isOpen)return null;var t=this.props,a=t.autoSelectFirstOption,r=t.id,n=t.isLoading,i=t.membersOnly,s=t.optionClassName,o=t.optionsRowHeight,l=t.pillarClassName,c=t.useFullWidthOptions,u=t.value,d=t.onScroll,p=t.onOptionHighlighted;var m=i?240:400;var h=Object(F["a"])(r,this.state.selectedOptionValue);return g.a.createElement(U["a"],{"aria-activedescendant":h,autoSelectFirstOption:a,emptyStateMessage:this.getOptionsListEmptyMessage(),isLoading:n,maxListHeight:m,onOptionSelected:this.onOptionSelected,optionClassName:s,onScroll:d,optionGroups:i?null:this.maybeShowOptions(),options:i?this.maybeShowOptions():null,optionsRowHeight:o,pillarClassName:l,targetMeasurements:this.getOptionsListTargetMeasurements(),useFullWidthOptions:c,value:u,onActiveOptionUpdated:p})}},{key:"renderOptionsListEmptyMessage",value:function e(){var t=this.getFilterQuery();var a=G.rt('No workspaces found matching <span class="sk_primary_foreground bold">{query}</span>.',{query:t});var r=G.t("Try searching for another workspace or searching for a teammate\u2019s workspaces.");return g.a.createElement("div",{className:"p-workspace_search__no-results-message"},g.a.createElement("p",{className:"margin_0"},a),g.a.createElement("p",{className:"margin_0"},r))}},{key:"renderOptionsListHintText",value:function e(){var t=this.props.membersOnly;var a=t?G.rt('Enter a teammate\u2019s <span class="sk_primary_foreground bold">name</span> or <span class="sk_primary_foreground bold">email address</span>.'):G.rt('Enter a teammate\u2019s <span class="sk_primary_foreground bold">name</span> or <span class="sk_primary_foreground bold">email address</span>, or search for a <span class="sk_primary_foreground bold">specific workspace</span>.');return g.a.createElement("div",{className:"p-workspace_search__no-results-message"},g.a.createElement("p",{className:"margin_0"},a))}},{key:"render",value:function e(){var t=this.props,a=t.autoSelectFirstOption,r=t.className,i=t.displayValue,s=t.isLoading,o=t.labelId,l=t.membersOnly,c=t.name,u=t.onChange,d=t.onClearButtonClick,p=t.onClose,m=t.onFilterInputChange,h=t.onOutsideClick,v=t.onOpen,f=t.onOptionHighlighted,b=t.onScroll,_=t.optionClassName,y=t.options,O=t.optionsListOffsetBottom,k=t.optionsListOffsetTop,E=t.optionsListWidth,C=t.optionsRowHeight,S=t.optionGroups,w=t.pillarClassName,j=t.placeholder,I=t.selectedOption,T=t.selectedValueClassName,N=t.type,P=t.useFullWidthOptions,M=t.usePlaceholderOption,x=t.wrapperClassName,R=A()(t,["autoSelectFirstOption","className","displayValue","isLoading","labelId","membersOnly","name","onChange","onClearButtonClick","onClose","onFilterInputChange","onOutsideClick","onOpen","onOptionHighlighted","onScroll","optionClassName","options","optionsListOffsetBottom","optionsListOffsetTop","optionsListWidth","optionsRowHeight","optionGroups","pillarClassName","placeholder","selectedOption","selectedValueClassName","type","useFullWidthOptions","usePlaceholderOption","wrapperClassName"]);var F=this.state.filterQuery;var U=D()("c-input_select__wrapper",x);var B=D()("c-input_select",{"c-input_select--active":this.state.isOpen,"c-input_select--short":"short"===N},r);var q=D()("p-workspace_search__clear-button",{hidden:!F&&!i});return g.a.createElement(g.a.Fragment,null,g.a.createElement("div",{className:U,onMouseDown:this.onWrapperMouseDownOrTouchStart,onMouseUp:this.onWrapperMouseUpOrTouchEnd,onTouchStart:this.onWrapperMouseDownOrTouchStart,onTouchEnd:this.onWrapperMouseUpOrTouchEnd,ref:this.setRef("wrapper"),role:"group"},g.a.createElement("div",n()({},R,{"aria-labelledby":o,className:B,"data-name":c,onBlur:this.onBlurred,onMouseDown:this.onClicked,onFocus:this.onFocused,ref:this.setRef("select")}),this.renderFilterInput()),this.renderOptionsListMaybe()),g.a.createElement(L["c"],{className:q,onClick:this.onClearInput,ref:this.setRef("closeButton")}))}}]);return t}(R["a"]);V.displayName="WorkspaceSearchSelect";V.propTypes=H;V.defaultProps=W;var K=V;var z=a(518);var Q=a(2329);var Y={item:{},type:"member"};var J=function(e){f()(t,e);function t(e){var a;s()(this,t);a=u()(this,p()(t).call(this,e));Object(k["a"])(h()(a),["maybeRenderTitle","maybeRenderEmail"]);return a}l()(t,[{key:"maybeRenderEmail",value:function e(t){if(!t)return null;return g.a.createElement("div",{className:"p-workspace_search_options_list_item__secondary_content_item"},t)}},{key:"maybeRenderTitle",value:function e(t){if(!t)return null;return g.a.createElement("div",{className:"p-workspace_search_options_list_item__secondary_content_item"},t)}},{key:"renderEntityIcon",value:function e(t){var a=t.item,r=t.type;var n=this.props.featureReactMessages;return g.a.createElement(z["a"],{entityType:r,dimension:36,entityData:a,customClasses:"p-workspace_search_options_list_item__avatar",featureReactMessages:n})}},{key:"renderItemAsMember",value:function e(t){var a=t.item,r=t.type;var n=Object(O["get"])(a,"profile");var i=n.real_name,s=n.email,o=n.title;return g.a.createElement("div",{className:"p-workspace_search_options_list_item"},this.renderEntityIcon({item:a,type:r}),g.a.createElement("div",{className:"p-workspace_search_options_list_item__content nudge_bottom_3"},g.a.createElement("div",{className:"p-workspace_search_options_list_item__primary_content"},i),g.a.createElement("div",{className:"p-workspace_search_options_list_item__secondary_content"},this.maybeRenderTitle(o),this.maybeRenderEmail(s))))}},{key:"renderItemAsWorkspace",value:function e(t){var a=t.item,r=t.type;var n=a.name,i=a.description;return g.a.createElement("div",{className:"p-workspace_search_options_list_item"},this.renderEntityIcon({item:a,type:r}),g.a.createElement("div",{className:"p-workspace_search_options_list_item__content nudge_bottom_3"},g.a.createElement("div",{className:"p-workspace_search_options_list_item__primary_content"},n),g.a.createElement("div",{className:"p-workspace_search_options_list_item__secondary_content"},i)))}},{key:"render",value:function e(){var t=this.props,a=t.item,r=t.type;return"member"===r?this.renderItemAsMember({item:a,type:r}):this.renderItemAsWorkspace({item:a,type:r})}}]);return t}(b["PureComponent"]);J.displayName="WorkspaceSearchOptionsListItem";J.defaultProps=Y;var X=a(2331);var Z=new C["b"]("workspace_directory");var $={className:"",containerIdSelector:"",membersOnly:true,onClearInput:O["noop"],onOptionsListClosed:O["noop"],onOptionsListOpened:O["noop"],prepopulatedOption:void 0,triggerAction:O["noop"]};var ee=function(e){f()(t,e);function t(e){var a;s()(this,t);a=u()(this,p()(t).call(this,e));a.state={nextCursorMark:"*",totalResultsCount:null,memberResultsCount:null,workspaceResultsCount:null,currentOptionsData:[],currentSearchQuery:"",prepopulatedOptionData:void 0,selectedOptionData:void 0,value:void 0,loadingResults:true,isAnOptionHighlighted:false};Object(k["a"])(h()(a),["clearInput","formatMemberOptionData","formatOptionsDataArrayOrObject","getOptionsFetcher","fetchMemberData","fetchMemberAndWorkspaceData","onChange","onClearButtonClicked","onFilterInputChange","onOptionHighlighted","onScroll","renderMemberItemTemplate","setIsAnOptionHighlighted","setCurrentSearchQuery","setIsLoading","setValue","triggerActionWithValue","onClose","onKeyPressedEnter","onOpen","setSelectRef"]);a.select=null;a.debouncedOnFilterInputChange=Object(O["debounce"])(a.onFilterInputChange,100);return a}l()(t,[{key:"componentDidMount",value:function e(){var t=this.props,a=t.prepopulatedOption,r=t.membersOnly;Object(O["isEmpty"])(a)||this.setPrepopulatedOptionData(a);this.getOptionsFetcher();r||(this.keyCommands=this.initKeyCommands())}},{key:"componentDidUpdate",value:function e(t){var a=this.props.prepopulatedOption;var r=t.prepopulatedOption;Object(O["isEmpty"])(a)||a===r||this.setPrepopulatedOptionData(a)}},{key:"componentWillUnmount",value:function e(){this.keyCommands&&this.keyCommands.reset()}},{key:"onChange",value:function e(t){var a=this.props.membersOnly;var r=this.state,n=r.currentOptionsData,i=r.currentSearchQuery;var s;var o;var l;if(t===j["b"]){s={id:j["b"],displayValue:i};l=n}else if(a){s=Object(O["find"])(n,{id:t});o=Object(E["getMemberRealName"])(s);l=[s]}else{s=Object(O["find"])(Object(O["flatten"])(Object(O["values"])(n)),{id:t});var c=Object(j["h"])(s);o=c?Object(E["getMemberRealName"])(s):Object(O["get"])(s,"name");l=c?{members:[s],workspaces:[]}:{members:[],workspaces:[s]}}this.setState(function(){var e={value:t,selectedOptionData:s,currentSearchQuery:t===j["b"]?i:o,nextCursorMark:"*",currentOptionsData:l};return e},this.triggerActionWithValue)}},{key:"onClearButtonClicked",value:function e(){var t=this.props.onClearInput;this.clearInput();t()}},{key:"onClose",value:function e(){var t=this.props.onOptionsListClosed;this.setIsAnOptionHighlighted(false);t()}},{key:"onFilterInputChange",value:function e(t){var a=this.props,r=a.triggerAction,n=a.membersOnly;this.setIsLoading(true);this.setSelectedOptionData(null);this.setPrepopulatedOptionData(null);this.setValue(null);n&&r({selectedOptionData:null});this.getOptionsFetcher(t)}},{key:"onKeyPressedEnter",value:function e(){if(this.props.membersOnly)return;var t=this.state,a=t.selectedOptionData,r=t.currentSearchQuery,n=t.isAnOptionHighlighted;if(!r||n)return;var i=Object(O["get"])(this.select,"filterInput.value",r);if(!a){this.select.blur();this.setState(function(){var e={selectedOptionData:{id:j["b"],displayValue:i},currentSearchQuery:i,nextCursorMark:"*"};return e},this.triggerActionWithValue)}}},{key:"onOpen",value:function e(){var t=this.props.onOptionsListOpened;t()}},{key:"onOptionHighlighted",value:function e(t){var a=!Object(O["isEmpty"])(t);this.setIsAnOptionHighlighted(a)}},{key:"onScroll",value:function e(t){var a=200;var r=this.state,n=r.currentSearchQuery,i=r.currentOptionsData,s=void 0===i?[]:i,o=r.totalResultsCount;var l=t.clientHeight,c=t.scrollHeight,u=t.scrollTop;var d=c-(u+l)<a;d&&s.length<o&&this.getOptionsFetcher(n,{doFetchNextPage:true})}},{key:"onSearchAgainTriggered",value:function e(){this.select.onSearchAgainTriggered()}},{key:"getBoundingRect",value:function e(t){this._workspaceSearchBoundingContainer||(this._workspaceSearchBoundingContainer=document.getElementById(t));return this._workspaceSearchBoundingContainer?this._workspaceSearchBoundingContainer.getBoundingClientRect():{}}},{key:"getOptionsFetcher",value:function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=a.forceNewSearch,n=void 0!==r&&r,i=a.doFetchNextPage,s=void 0!==i&&i;var o=this.state.currentSearchQuery;var l=this.props.membersOnly;var c=l?this.fetchMemberData:this.fetchMemberAndWorkspaceData;var u={searchTerm:t};if(!s&&t===o&&!n)return null;u.nextCursorMark=o===t?this.state.nextCursorMark:"";this.setCurrentSearchQuery(t);return c({args:u,forceNewSearch:n,newSearchQuery:t,stashedSearchQuery:o})}},{key:"getPlaceHolderText",value:function e(t){var a=Z.t("Search for a teammate");var r=Z.t("Search");return t?a:r}},{key:"setCurrentOptionGroupsData",value:function e(t){var a=t.memberOptionData,r=t.workspaceOptionData,n=t.isNewSearch,i=t.totalResultsCount,s=t.memberResultsCount,o=void 0===s?0:s,l=t.workspaceResultsCount,c=void 0===l?0:l;var u=this.state.currentOptionsData;var d;var p=!o&&!c||i?i:o+c;d=n?{members:a,workspaces:r}:{members:Object(O["unionBy"])(Object(O["get"])(u,"members"),a,"id"),workspaces:Object(O["unionBy"])(Object(O["get"])(u,"workspaces"),r,"id")};this.setState(function(){return{currentOptionsData:d,totalResultsCount:p,memberResultsCount:o,workspaceResultsCount:c}});this.setIsLoading(false)}},{key:"setCurrentOptionsData",value:function e(t){var a=t.optionData,r=t.isNewSearch,n=t.totalResultsCount;var i=this.state.currentOptionsData;var s;s=r?a:Object(O["unionBy"])(i,a,"id");this.setState(function(){return{currentOptionsData:s,totalResultsCount:n}});this.setIsLoading(false)}},{key:"setCurrentSearchQuery",value:function e(t){this.setState(function(){return{currentSearchQuery:t}})}},{key:"setIsAnOptionHighlighted",value:function e(t){this.setState(function(){return{isAnOptionHighlighted:t}})}},{key:"setIsLoading",value:function e(t){this.setState(function(){return{loadingResults:t}})}},{key:"setNextCursorMark",value:function e(t){this.setState(function(){return{nextCursorMark:t}})}},{key:"setPrepopulatedOptionData",value:function e(t){this.setState(function(){return{prepopulatedOptionData:t}})}},{key:"setSelectRef",value:function e(t){this.select=t}},{key:"setSelectedOptionData",value:function e(t){this.setState(function(){return{selectedOptionData:t}})}},{key:"setValue",value:function e(t){this.setState(function(){return{value:t}})}},{key:"blur",value:function e(){this.select.blur()}},{key:"clearInput",value:function e(){var t=this.props.triggerAction;this.setSelectedOptionData(null);this.setCurrentSearchQuery(null);this.setPrepopulatedOptionData(null);this.setValue(null);this.getOptionsFetcher();t({selectedOptionData:null,type:null});this.select.toggleOpenState()}},{key:"fetchMemberAndWorkspaceData",value:function e(t){var a=this;var r=t.args,n=t.forceNewSearch,i=t.newSearchQuery,s=t.stashedSearchQuery;var o=this.props.fetchMembers;var l=[o(r),this.props.fetchDirectoryWorkspaces(r)];return Promise.all(l).then(function(e){var t=e[0],r=t.items,o=void 0===r?[]:r,l=t.next_cursor_mark,c=t.num_found;var u=e[1],d=u.items,p=void 0===d?[]:d,m=u.next_cursor_mark,h=u.num_found;var v;if(!o.length&&"*"!==l&&!p.length&&"*"!==m)return;o.length&&!p.length?a.setNextCursorMark(l):p.length&&!o.length&&a.setNextCursorMark(m);o.length&&!p.length?v=c:p.length&&!o.length&&(v=h);a.setCurrentOptionGroupsData({memberOptionData:o,workspaceOptionData:p,isNewSearch:n||s!==i,totalResultsCount:v,memberResultsCount:c,workspaceResultsCount:h})})}},{key:"fetchMemberData",value:function e(t){var a=this;var r=t.args,n=t.forceNewSearch,i=t.newSearchQuery,s=t.stashedSearchQuery;var o=this.props.fetchMembers;return o(r).then(function(e){var t=e.items,r=void 0===t?[]:t,o=e.next_cursor_mark,l=e.num_found;if(!r.length&&"*"!==o)return;a.setNextCursorMark(o);a.setCurrentOptionsData({optionData:r,isNewSearch:n||s!==i,totalResultsCount:l})})}},{key:"focus",value:function e(){this.select.focus()}},{key:"formatMemberOptionData",value:function e(t){var a=Object(E["getMemberRealName"])(t);var r=Object(O["get"])(t,"id");return{label:this.renderMemberItemTemplate({item:t,type:"member"}),value:r,displayValue:a}}},{key:"formatMemberOptionsGroupsHeader",value:function e(){var t=this.state,a=t.memberResultsCount,r=t.selectedOptionData;var n=r?1:a;return Z.t("Search by coworker ({num})",{num:n})}},{key:"formatOptionsDataArrayOrObject",value:function e(t){var a=this;var r=this.props.membersOnly;var n=[];if(r)n=Object(O["map"])(t,function(e){return a.formatMemberOptionData(e)});else{var i=t.members,s=t.workspaces;var o=Object(O["get"])(i,"length",0);var l=Object(O["get"])(s,"length",0);if(o){var c={label:this.formatMemberOptionsGroupsHeader(),options:[]};var u=l>0?Object(O["slice"])(i,0,4):i;c.options=Object(O["map"])(u,function(e){return a.formatMemberOptionData(e)});n.push(c)}if(l){var d={label:this.formatWorkspaceOptionsGroupsHeader(),options:[]};d.options=Object(O["map"])(s,function(e){return a.formatWorkspaceOptionData(e)});n.push(d)}}return n}},{key:"formatWorkspaceOptionData",value:function e(t){var a=Object(O["get"])(t,"name");var r=Object(O["get"])(t,"id");return{label:this.renderMemberItemTemplate({item:t,type:"workspace"}),value:r,displayValue:a}}},{key:"formatWorkspaceOptionsGroupsHeader",value:function e(){var t=this.props.prepopulatedOption;var a=this.state,r=a.currentSearchQuery,n=a.workspaceResultsCount,i=a.selectedOptionData;var s=Object(O["get"])(t,"displayValue","")?Object(O["get"])(t,"displayValue",""):r;var o=i?1:n;var l=Object(j["c"])()?50:150;var c=Object(O["get"])(s,"length",0)>l?s.slice(0,l)+"...":s;return Z.t("Workspaces matching \u201c{query}\u201d ({num})",{query:Object(C["q"])(c),num:o})}},{key:"initKeyCommands",value:function e(){var t=new S["a"];t.bindAll([{keys:["enter"],handler:this.onKeyPressedEnter}]);return t}},{key:"triggerActionWithValue",value:function e(){var t=this.props.triggerAction;var a=this.state.selectedOptionData;var r=Object(j["h"])(a)?"member":"workspace";t({selectedOptionData:a,type:r})}},{key:"renderMemberItemTemplate",value:function e(t){var a=t.item,r=t.type;return g.a.createElement(J,{item:a,type:r,featureReactMessages:true})}},{key:"renderShowAllWorkspacesListItem",value:function e(){var t=this.state.currentSearchQuery;return g.a.createElement("div",{className:"p-workspace_search_options_list_item"},g.a.createElement("div",{className:"p-workspace_search__search_icon_wrapper"},g.a.createElement(I["b"],{type:"search"})),g.a.createElement("div",{className:"p-workspace_search_options_list_item__content nudge_bottom_1"},g.a.createElement("div",{className:"p-workspace_search_options_list_item__alternate_content"},Z.rt('All workspace results for <span class="p-workspace_search_options_list_item__alternate_content--highlight">{query}</span>',{query:Object(C["q"])(t)}))))}},{key:"render",value:function e(){var t=this.props,a=t.containerIdSelector,r=t.membersOnly;var i=this.state,s=i.value,o=i.currentOptionsData,l=i.loadingResults,c=i.currentSearchQuery,u=i.prepopulatedOptionData,d=i.selectedOptionData;var p=this.getBoundingRect(a),m=p.bottom,h=void 0===m?0:m,v=p.top,f=void 0===v?0:v;var b={autoSelectFirstOption:true,className:"p-workspace_search",displayValue:c,isLoading:l,membersOnly:r,onChange:this.onChange,onClearButtonClick:this.onClearButtonClicked,onClose:this.onClose,onFilterInputChange:this.debouncedOnFilterInputChange,onOpen:this.onOpen,onOptionHighlighted:this.onOptionHighlighted,onScroll:this.onScroll,optionsListOffsetBottom:window.innerHeight-h,optionsListOffsetTop:f,optionsRowHeight:48,placeholder:this.getPlaceHolderText(r),pillarClassName:"p-workspace_search",selectedOption:d,usePlaceholderOption:false,useFullWidthOptions:true,value:s,wrapperClassName:"p-workspace_search__wrapper"};r?b.options=this.formatOptionsDataArrayOrObject(o):b.optionGroups=this.formatOptionsDataArrayOrObject(o);if(u&&!s)if(Object(O["get"])(u,"id")===j["b"]){b.selectedOption=u;b.displayValue=Object(O["get"])(u,"displayValue")}else{var _=Object(j["h"])(u)?this.formatMemberOptionData(u):this.formatWorkspaceOptionData(u);b.selectedOption=u;b.displayValue=Object(O["get"])(_,"displayValue")}return g.a.createElement("div",{className:"position_relative"},g.a.createElement(K,n()({},b,{ref:this.setSelectRef})))}}]);return t}(b["Component"]);ee.displayName="WorkspaceSearch";ee.defaultProps=$;var te={fetchMembers:w["A"],fetchDirectoryWorkspaces:w["m"]};var ae=Object(y["connect"])(null,te,null,{withRef:true})(ee);var re=t["a"]=ae},,,function(e,t,a){"use strict";var r=a(88);var n=a.n(r);var i=a(110);var s=a.n(i);var o=a(135);var l=a.n(o);var c=a(169);var u=a.n(c);var d=a(138);var p=a.n(d);var m=a(147);var h=a.n(m);var v=a(185);var f=a.n(v);var b=a(1);var g=a.n(b);var _=a(0);var y=a(6);var O=a(13);var k=a.n(O);var E=a(2);var C=a(30);var S=a(602);var w=a(237);var j=a(775);var I=a(3087);var T=new y["b"]("sk_banner");var A={type:_["default"].oneOf(["info","success","warning","urgent","neutral"]),children:_["default"].any.isRequired,showCloseButton:_["default"].bool,autoFadeout:_["default"].bool,topOffset:_["default"].number,className:_["default"].string,isFixedPosition:_["default"].bool,"data-qa":_["default"].string,onClose:_["default"].func,onFocus:_["default"].func,onBlur:_["default"].func};var N={type:"success",showCloseButton:true,autoFadeout:false,topOffset:0,className:null,isFixedPosition:true,"data-qa":"banner",onClose:E["noop"],onFocus:E["noop"],onBlur:E["noop"]};var P=2e3;var M=function(e){f()(t,e);function t(e){var a;s()(this,t);a=u()(this,p()(t).call(this,e));a.state={isShowing:true,opacity:1};Object(C["a"])(h()(a),["handleCloseButtonClick","focus"]);a.handleCloseButtonClick=a.handleCloseButtonClick.bind(h()(a));a.cancelAnimation=E["noop"];a.banner=g.a.createRef();return a}l()(t,[{key:"componentDidMount",value:function e(){this.fadeOutMaybe()}},{key:"componentWillUnmount",value:function e(){this.cancelAnimation()}},{key:"fadeOutMaybe",value:function e(){var t=this;var a=this.props,r=a.autoFadeout,n=a.onClose;if(!r)return;var i=Object(j["a"])({delay:P,fromValue:1,toValue:0,duration:P,easing:"easeOutQuad",onTick:function e(a){var r=a.value,n=a.nextTick;t.setState(function(){return{opacity:r}});n()},onComplete:function e(){t.setState(function(){return{isShowing:false}});n()}});this.cancelAnimation=i.cancel}},{key:"focus",value:function e(){var t=Object(S["c"])(this.banner.current);t&&t.focus()}},{key:"handleCloseButtonClick",value:function e(){var t=this.props.onClose;this.setState(function(){return{isShowing:false}});t()}},{key:"render",value:function e(){var t;var a=this.props,r=a.type,i=a.children,s=a.showCloseButton,o=a.topOffset,l=a.className,c=a.isFixedPosition,u=a["data-qa"];var d=this.state,p=d.isShowing,m=d.opacity;if(!p)return false;var h=k()("c-banner",(t={},n()(t,"c-banner--"+r,!!r),n()(t,"c-banner--fixed",c),t),l);var v="warning"!==r?"dark":void 0;return g.a.createElement("div",{role:"alert",className:h,style:{top:o,opacity:m},"data-qa":u,ref:this.banner,onFocus:this.props.onFocus,onBlur:this.props.onBlur},g.a.createElement("div",{className:"c-banner__text"},i),s&&g.a.createElement(w["a"],{className:"c-banner__close",icon:"times",onClick:this.handleCloseButtonClick,backgroundStyle:v,"aria-label":T.t("Dismiss")}))}}]);return t}(b["PureComponent"]);M.displayName="Banner";M.defaultProps=N;M.displayName="Banner";var D=M;var x=t["a"]=D},,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.d(t,"a",function(){return n});var r=a(128);function n(e){if(!e)return;var t=Object(r["a"])(e);var a=new Date(t.getFullYear(),t.getMonth(),t.getDate());return a.getTime().toString()}},,,,function(e,t,a){"use strict";a.d(t,"a",function(){return r});a.d(t,"b",function(){return n});var r="ALL_WORKSPACES";var n="ONLY_ORG_WIDE"},,,,,function(e,t,a){"use strict";a.d(t,"b",function(){return ae});a.d(t,"c",function(){return re});var r=a(88);var n=a.n(r);var i=a(110);var s=a.n(i);var o=a(135);var l=a.n(o);var c=a(169);var u=a.n(c);var d=a(138);var p=a.n(d);var m=a(147);var h=a.n(m);var v=a(185);var f=a.n(v);var b=a(0);var g=a(1);var _=a.n(g);var y=a(12);var O=a(286);var k=a(2);var E=a.n(k);var C=a(30);var S=a(13);var w=a.n(S);var j=a(16);var I=a(106);var T=a(11);var A=a(33);var N=a(232);var P=a(17);var M=a(6);var D=a(324);var x=a(35);var R=a(23);var F=a(43);var L=a(24);var U=a(131);var B=a(518);var q=a(1388);var G=a(89);var H=a(1865);var W=a(914);var V=a(256);var K=a(1909);var z=a.n(K);function Q(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function Y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(a),true).forEach(function(t){n()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Q(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var J=new M["b"]("grid_onboarding");var X={orgName:"",scrollElement:window,enqueueToast:k["noop"],onFooterClick:k["noop"]};var Z=24;var $=1200;var ee=Object(j["b"])();function te(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Object(k["filter"])(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"open"===e.discoverable||"closed"===e.discoverable||"unlisted"===e.discoverable&&e.is_assigned})}function ae(e){var t=e.totalWorkspaces,a=e.onWorkspaces;return!t&&a}function re(e){var t=e.totalWorkspaces,a=e.onWorkspaces;return!t&&!a}function ne(){return{oneJoinableWorkspace:J.t("Join this workspace to start working with them on Slack."),moreThanOneJoinableWorkspaces:J.t("Join the workspace that seems right for your role to get started."),noAccess:J.t("Get in touch with them to be invited to a workspace they\u2019re in."),noWorkspaces:J.t("Try searching for someone else on your team."),onApiError:J.rt("You may want to try <a>reloading this page</a> and searching again, or try searching for someone else.",null,function(e){var t=e.text,a=e.key,r=e.tag;if("a"===r)return _.a.createElement(F["a"],{onClick:function e(){return Object(D["b"])({reason:"Search failure, user initiated reload via link in error message",reasonKey:"search_results_failure",noCache:true})},target:"_self",key:a},t);return{text:t}})}}var ie=function e(t){var a=t.workspaces,r=t.noAccessToWorkspaces,n=t.noWorkspaces,i=t.hasApiError;var s=ne();if(i)return s.onApiError;var o=te(a).length;if(1===o)return s.oneJoinableWorkspace;if(o>1)return s.moreThanOneJoinableWorkspaces;if(r)return s.noAccess;if(n)return s.noWorkspaces;return""};var se=function e(t){var a=t.noAccessToWorkspaces,r=t.noWorkspaces,n=t.memberRealName,i=t.totalWorkspaces,s=t.hasApiError;if(s)return J.t("We ran into some trouble fetching {memberName}\u2019s workspaces",{memberName:Object(M["q"])(n)});if(a)return J.t("{memberName} isn\u2019t in a workspace you have access to",{memberName:Object(M["q"])(n)});if(r)return J.t("{memberName} hasn\u2019t joined a workspace",{memberName:Object(M["q"])(n)});return J.t("{memberName} is in {numWorkspaces, plural, =1 {# workspace} other {# workspaces}}",{memberName:Object(M["q"])(n),numWorkspaces:i})};var oe=function(e){f()(t,e);function t(e){var a;s()(this,t);a=u()(this,p()(t).call(this,e));a.state={isMobileView:false,loadingWorkspaces:false,nextCursorMark:null,memberRealName:"",selectedMember:{},workspaces:[],totalWorkspaces:0,onWorkspaces:false,hasApiError:false};a.resultsList=null;a.searchBar=null;a.userHasNoAccessToWorkspaces=false;a.memberHasNoWorkspaces=false;a.noWorkspacesToDisplay=false;a.doRenderSearchAgainButton=false;Object(C["a"])(h()(a),["onFooterClick","onResize","onScroll","setListRef","setSearchBarRef","renderWorkspaceCard","getListKeys","onSearchAgainButtonClick","onSelectColleague","setWorkspaceFetchOptions","fetchWorkspaces","onButtonActionReject","onButtonActionResolve","setToastText","setLoadingWorkspaces"]);return a}l()(t,[{key:"componentDidMount",value:function e(){window.addEventListener("resize",this.onResize);this.clientHeight=window.innerHeight;this.setSelectedMember(this.props.selectedMember)}},{key:"componentDidUpdate",value:function e(t,a){this.maybeFetchNextPage(a);this.maybeTriggerNewSearch(a);this.maybeUpdateMemberRealName(a)}},{key:"componentWillUnmount",value:function e(){window.removeEventListener("resize",this.onResize)}},{key:"onButtonActionReject",value:function e(t){var a=t.node;a&&this.setToastText(a)}},{key:"onButtonActionResolve",value:function e(t){var a=t.node,r=t.i,n=t.workspace;Object(k["isNumber"])(r)&&n&&this.setWorkspaceByIndex({index:r,workspace:n});a&&this.setToastText(a)}},{key:"onFooterClick",value:function e(){this.props.onFooterClick()}},{key:"onResize",value:function e(){this.clientHeight=window.innerHeight;var t=Object(V["c"])();var a=this.state.isMobileView!==t;(t||a)&&this.resultsList.invalidateRowHeights()}},{key:"onScroll",value:function e(t){var a=t.scrollTop,r=t.scrollHeight;this.doInfiniteScrollHandler({scrollTop:a,scrollHeight:r})}},{key:"onSearchAgainButtonClick",value:function e(t){var a;t.preventDefault();t.stopPropagation();var r=(null===(a=this.searchBar)||void 0===a?void 0:a.getWrappedInstance)?this.searchBar.getWrappedInstance():this.searchBar;(null===r||void 0===r?void 0:r.onSearchAgainTriggered)&&r.onSearchAgainTriggered()}},{key:"onSelectColleague",value:function e(t){var a=t.selectedOptionData;a&&this.setSelectedMember(a)}},{key:"getListKeys",value:function e(){if(!this.state.workspaces)return[];return this.state.workspaces.map(function(e){return String(e.id)})}},{key:"setHasApiError",value:function e(t){this.setState(function(){return{hasApiError:t}})}},{key:"setListRef",value:function e(t){this.resultsList=t}},{key:"setLoadingWorkspaces",value:function e(t){this.setState(function(){return{loadingWorkspaces:t}})}},{key:"setMemberRealName",value:function e(t){this.setState(function(){return{memberRealName:t}})}},{key:"setSearchBarRef",value:function e(t){this.searchBar=t}},{key:"setSelectedMember",value:function e(t){this.setState(function(){return{selectedMember:t}})}},{key:"setToastText",value:function e(t){this.props.enqueueToast({element:_.a.createElement(U["b"],{position:"bottom-right",offsetY:50},t)})}},{key:"setWorkspaceByIndex",value:function e(t){var a=t.index,r=t.workspace;this.setState(function(e){var t=[].concat(e.workspaces);if(a>=t.length){ee.warn("SearchResultsScreen: Out of bounds index "+a+" passed into setWorkspaceByIndex");return e}t[a]=r;return{workspaces:t}})}},{key:"setWorkspaceFetchOptions",value:function e(t){var a=t.workspaces,r=t.totalWorkspaces,n=t.onWorkspaces,i=t.nextCursorMark;this.setState(function(){return{workspaces:a,totalWorkspaces:r,onWorkspaces:n,nextCursorMark:i}})}},{key:"clearWorkspaceFetchOptions",value:function e(){this.setWorkspaceFetchOptions({workspaces:[],totalWorkspaces:0,onWorkspaces:false,nextCursorMark:null})}},{key:"doInfiniteScrollHandler",value:function e(t){var a=t.scrollTop,r=t.scrollHeight;var n=this.hasScrolledWithinScrollThreshold({scrollTop:a,scrollHeight:r});n&&!this.hasFetchedAllWorkspaces()?this.setLoadingWorkspaces(true):!n&&this.hasFetchedAllWorkspaces()&&this.setLoadingWorkspaces(false)}},{key:"fetchWorkspaces",value:function e(){var t=this;var a=this.state,r=a.nextCursorMark,n=a.selectedMember;this.setHasApiError(false);return this.props.fetchDirectoryWorkspaces({nextCursorMark:r,id:Object(k["get"])(n,"id"),type:"single_user"}).then(function(e){t.setLoadingWorkspaces(false);var a=e.num_found,n=e.on_workspaces,i=e.items;var s=i?[].concat(t.state.workspaces,i):[];t.setWorkspaceFetchOptions({workspaces:s,totalWorkspaces:a,onWorkspaces:n,nextCursorMark:e.next_cursor_mark});r||Object(V["e"])({anchorPage:"grid_onboarding",numSearchResults:Object(k["get"])(e,"num_found",0),clogger:t.props.clogger})}).catch(function(e){t.setHasApiError(true);t.setLoadingWorkspaces(false);ee.error("SearchResultsScreen: Error in FetchWorkspaces -",e)})}},{key:"hasFetchedAllWorkspaces",value:function e(){return this.state.workspaces.length===this.state.totalWorkspaces}},{key:"hasScrolledWithinScrollThreshold",value:function e(t){var a=t.scrollHeight,r=t.scrollTop;return a-(r+this.clientHeight)<$}},{key:"maybeFetchNextPage",value:function e(t){!t.loadingWorkspaces&&this.state.loadingWorkspaces&&this.fetchWorkspaces()}},{key:"maybeTriggerNewSearch",value:function e(t){if(t.selectedMember!==this.state.selectedMember){this.clearWorkspaceFetchOptions();this.setLoadingWorkspaces(true)}}},{key:"maybeUpdateMemberRealName",value:function e(t){if(t.selectedMember!==this.state.selectedMember){var a=Object(P["getMemberRealName"])(this.state.selectedMember);this.setMemberRealName(a)}}},{key:"renderFooter",value:function e(){var t=this.props.orgName;var a=w()("p-grid_onboarding__footer","p-grid_onboarding__footer_link",{margin_top_250:!this.noWorkspacesToDisplay||!this.doRenderSearchAgainButton,margin_top_150:this.noWorkspacesToDisplay});return _.a.createElement(F["a"],{onClick:this.onFooterClick,className:a},J.t("View all {orgName} workspaces",{orgName:t}),_.a.createElement(R["a"],{type:"chevron-right",key:"footer-chevron-icon",className:"p-grid_onboarding__footer_icon"}))}},{key:"renderHeading",value:function e(){var t=this.state,a=t.totalWorkspaces,r=t.selectedMember,n=t.hasApiError;var i=Object(P["getMemberRealName"])(r);var s=se({noAccessToWorkspaces:this.userHasNoAccessToWorkspaces,noWorkspaces:this.memberHasNoWorkspaces,totalWorkspaces:a,memberRealName:i,hasApiError:n});var o=w()("p-grid_onboarding__results_heading_container",{align_center:this.noWorkspacesToDisplay});return _.a.createElement("div",{className:o},_.a.createElement("span",{className:"p-grid_onboarding__results_heading"},_.a.createElement(B["a"],{entityType:"member",dimension:Z,entityData:r,featureReactMessages:true,customClasses:"p-grid_onboarding_results__icon"}),s))}},{key:"renderInfiniteSpinner",value:function e(){return _.a.createElement("div",{className:"p-grid_onboarding__spinner"},_.a.createElement(G["a"],{size:"jumbo",className:"inline_block full_width margin_top_200"}))}},{key:"renderResults",value:function e(){var t=this.state,a=t.loadingWorkspaces,r=t.selectedMember;var n=a&&this.memberHasNoWorkspaces;if(n||!r)return this.renderInfiniteSpinner();return _.a.createElement(_.a.Fragment,null,this.renderHeading(),this.renderSubheading(),!this.noWorkspacesToDisplay&&this.renderWorkspaceList(),a&&this.renderInfiniteSpinner(),this.doRenderSearchAgainButton&&this.renderSearchAgainButton(),!a&&this.renderFooter())}},{key:"renderSearchAgainButton",value:function e(){return _.a.createElement("div",{className:"display_flex justify_content_center margin_top_150"},_.a.createElement(L["d"],{type:"outline",onClick:this.onSearchAgainButtonClick},J.t("Search Again")))}},{key:"renderSearchBar",value:function e(){return _.a.createElement("div",{className:"p-grid_onboarding_results__search"},_.a.createElement(q["a"],{triggerAction:this.onSelectColleague,containerIdSelector:"colleagueSearchResults",membersOnly:true,className:"margin_bottom_200",prepopulatedOption:this.props.selectedMember,ref:this.setSearchBarRef}))}},{key:"renderSubheading",value:function e(){var t=this.state,a=t.workspaces,r=t.hasApiError;var n=ie({workspaces:a,noAccessToWorkspaces:this.userHasNoAccessToWorkspaces,noWorkspaces:this.memberHasNoWorkspaces,hasApiError:r});var i=w()("p-grid_onboarding__results_subheading",{align_center:this.noWorkspacesToDisplay});return _.a.createElement("div",{className:i},n)}},{key:"renderWorkspaceCard",value:function e(t){var a=this;var r=this.state,n=r.workspaces,i=r.totalWorkspaces;var s=w()("p-grid_onboarding_results__list_item",{margin_bottom_0:t===i-1});return _.a.createElement(H["a"],{team:n[t],size:"large",className:s,onActionResolve:function e(r){return a.onButtonActionResolve(Y({},r,{i:t}))},onActionReject:function e(r){return a.onButtonActionReject(Y({},r,{i:t}))},anchorPage:"grid_onboarding"})}},{key:"renderWorkspaceList",value:function e(){var t=this;var a=this.props.scrollElement;return _.a.createElement(O["e"],{scrollElement:a,onScroll:this.onScroll},function(e){var r=e.height,n=e.isScrolling,i=e.onChildScroll,s=e.scrollTop,o=e.registerChild;return _.a.createElement("div",{className:"p-grid_onboarding_results__list",ref:o},_.a.createElement(W["a"],{keys:t.getListKeys(),rowRenderer:t.renderWorkspaceCard,ref:t.setListRef,scrollElement:a,onScroll:i,height:r,isScrolling:n,scrollTop:s}))})}},{key:"render",value:function e(){var t=this.state,a=t.totalWorkspaces,r=t.onWorkspaces,n=t.loadingWorkspaces,i=t.hasApiError;this.userHasNoAccessToWorkspaces=ae({totalWorkspaces:a,onWorkspaces:r});this.memberHasNoWorkspaces=re({totalWorkspaces:a,onWorkspaces:r});this.noWorkspacesToDisplay=this.userHasNoAccessToWorkspaces||this.memberHasNoWorkspaces;this.doRenderSearchAgainButton=!n&&this.noWorkspacesToDisplay&&!i;return _.a.createElement("div",{className:"p-grid_onboarding__results",id:"colleagueSearchResults"},this.renderSearchBar(),this.renderResults())}}]);return t}(g["Component"]);oe.displayName="SearchResultsScreen";oe.defaultProps=X;var le=function e(t,a){var r=a.selectedMember,n=a.workspaces;var i=Object(A["g"])(t);var s=Object(x["a"])({state:t});return{selectedMember:r,workspaces:n,orgName:i,clogger:s,featureSingleUserWorkspacePagination:Object(T["isFeatureEnabled"])(t,"feature_single_user_workspace_pagination")}};var ce={enqueueToast:I["enqueueToast"],fetchDirectoryWorkspaces:N["m"]};t["a"]=Object(y["connect"])(le,ce)(oe)},,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";var r=a(110);var n=a.n(r);var i=a(135);var s=a.n(i);var o=a(169);var l=a.n(o);var c=a(138);var u=a.n(c);var d=a(147);var p=a.n(d);var m=a(185);var h=a.n(m);var v=a(1);var f=a.n(v);var b=a(0);var g=a(13);var _=a.n(g);var y=a(2);var O=a.n(y);var k=a(102);var E=a(1215);var C=a(1216);var S=a(1464);var w={clogLinkClick:y["noop"],className:null,fullWidth:false,onClick:y["noop"],showActions:true,useRowAction:false,includeRootDownloadAction:true,includeRootStarAction:false,"data-qa":void 0};var j=function(e){h()(t,e);function t(e){var a;n()(this,t);a=l()(this,u()(t).call(this,e));a.onClick=a.onClick.bind(p()(a));return a}s()(t,[{key:"onClick",value:function e(t){t.preventDefault();this.props.onClick(t,this.props.file)}},{key:"render",value:function e(){var t=this.props,a=t.file,r=t.clogLinkClick,n=t.fullWidth,i=t.showActions,s=t.includeRootDownloadAction,o=t.includeRootStarAction,l=t.useRowAction,c=t["data-qa"];var u=_()("p-contextual_file",this.props.className);return f.a.createElement(E["a"],{file:a,className:u,fullWidth:n,clogLinkClick:r,showActions:i,useRowAction:l,includeRootDownloadAction:s,includeRootStarAction:o,"data-qa":c},f.a.createElement(C["a"],{file:a,onClick:this.onClick},f.a.createElement(S["a"],{file:a})))}}]);return t}(v["PureComponent"]);j.displayName="ContextualFile";j.defaultProps=w;t["a"]=j},function(e,t,a){"use strict";a.d(t,"a",function(){return l});var r=a(1);var n=a.n(r);var i=a(12);var s=a(129);var o=function e(t,a){var r=a.fileId;return{file:Object(s["getFileById"])(t,r)}};function l(e){return Object(i["connect"])(o)(function(t){if(!t||!t.file)return null;return n.a.createElement(e,t)})}},function(e,t,a){"use strict";var r=a(1);var n=a.n(r);var i=a(0);var s=a(23);var o=a(270);var l=a(6);var c=a(2470);var u=a.n(c);var d=new l["b"]("offline_mode");function p(e){var t=e.featureOfflineMode,a=e.caption;if(!t)return null;return n.a.createElement("div",{className:"p-large_offline_indicator"},n.a.createElement("p",{className:"p-large_offline_indicator__headline"},n.a.createElement(s["b"],{type:"cloud-offline-small",size:"inherit"})," ",d.t("No connection")),n.a.createElement("p",{className:"p-large_offline_indicator__caption"},a||d.t("Go online to get the latest messages.")))}p.displayName="LargeOfflineIndicator";p.defaultProps={caption:void 0};t["a"]=Object(o["a"])("feature_offline_mode")(p)},function(e,t,a){"use strict";var r=a(1);var n=a.n(r);var i=a(0);var s=a(23);var o=a(270);var l=a(6);var c=a(2470);var u=a.n(c);var d=new l["b"]("offline_mode");function p(e){var t=e.featureOfflineMode,a=e.caption;if(!t)return null;return n.a.createElement("div",{className:"p-inline_offline_indicator"},n.a.createElement("span",null,n.a.createElement(s["b"],{type:"cloud-offline-small",size:"inherit"})," ",n.a.createElement("strong",null,d.t("No connection."))," ",a||d.t("Go online to load more messages.")))}p.displayName="InlineOfflineIndicator";p.defaultProps={caption:void 0};t["a"]=Object(o["a"])("feature_offline_mode")(p)},function(e,t,a){"use strict";a.d(t,"a",function(){return m});var r=a(2);var n=a.n(r);var i=a(55);var s=a(9);var o=a(63);var l=a(176);var c=a(73);var u=a(11);var d=a(20);var p=a(187);function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.includeAllTeams;var n=Object(r["values"])(Object(p["e"])(e));var m=[];n.forEach(function(t){if(Object(l["r"])(t))m.push(t);else{var r=Object(l["b"])(t)||{},n=r.channelId,p=r.threadTs;var h=Object(d["e"])(e,n);if(!a&&Object(s["isFromAnotherTeam"])(h))return;if(Object(s["isUnknownOrNonExistent"])(h))return;if(Object(s["isArchived"])(h))return;if(!Object(s["isMemberOfChannel"])(h))return;if(p&&!Object(o["t"])(e,n))return;if(!p&&!Object(o["r"])(e,n))return;if(p&&Object(u["isFeatureEnabled"])(e,"feature_unknown_messages")){var v=Object(c["a"])(e,n,p);if(Object(i["e"])(v))return}m.push(t)}});return m}},,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.d(t,"a",function(){return l});var r=a(88);var n=a.n(r);var i=a(6);var s=a(159);var o=new i["b"]("team_creation");function l(e){var t;var a=(t={},n()(t,s["m"].Free,o.t("Slack Free")),n()(t,s["m"].Standard,o.t("Slack Standard")),n()(t,s["m"].Plus,o.t("Slack Plus")),t);return a[e]}function c(e){var t;var a=(t={},n()(t,s["m"].Free,o.t("Free")),n()(t,s["m"].Standard,o.t("Standard")),n()(t,s["m"].Plus,o.t("Plus")),t);return a[e]}},function(e,t,a){"use strict";a.d(t,"a",function(){return M});var r=a(196);var n=a.n(r);var i=a(110);var s=a.n(i);var o=a(135);var l=a.n(o);var c=a(169);var u=a.n(c);var d=a(138);var p=a.n(d);var m=a(504);var h=a.n(m);var v=a(185);var f=a.n(v);var b=a(88);var g=a.n(b);var _=a(1);var y=a.n(_);var O=a(0);var k=a(2);var E=a.n(k);var C=a(13);var S=a.n(C);var w=a(457);var j=a(1651);function I(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function T(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?I(Object(a),true).forEach(function(t){g()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):I(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function A(e){var t={};for(var a=0;a<e.length;a++)t[e[a].key]={index:e[a].index,next:E.a.get(e[a+1],"key")};return t}var N=T({},w["a"].propTypes,{stickyItems:O["default"].arrayOf(O["default"].shape({key:O["default"].string,index:O["default"].number})),stickyOffsetTop:O["default"].number,stickyZIndex:O["default"].number});var P=T({},w["a"].defaultProps,{stickyItems:[],stickyOffsetTop:0,stickyZIndex:null});var M=function(e){f()(t,e);function t(e){var a;s()(this,t);a=u()(this,p()(t).call(this,e));a.stickyItems=A(e.stickyItems);return a}l()(t,[{key:"UNSAFE_componentWillReceiveProps",value:function e(a){h()(p()(t.prototype),"UNSAFE_componentWillReceiveProps",this).call(this,a);this.stickyItems=A(a.stickyItems)}},{key:"renderItem",value:function e(a,r){if(!(a in this.stickyItems))return h()(p()(t.prototype),"renderItem",this).call(this,a,r);var i=0===r?-100:this.getTop(a);var s=this.layout.getHeight(a);var o=this.layout.getHeightValidity(a);var l=this.getContentHeight();var c=this.stickyItems[a].next;var u=c?this.getTop(c):l;var d=Math.max(0,l-u);var m=this.state.activeItem===a;var v=null===this.state.activeItem&&this.state.hasKeyboardFocus&&this.state.initialActiveItem===a;var f=this.state.mouseDownTargetItem===a;var b=this.state.hoveredItem===a;var g=this.props,_=g.rowRenderer,O=g.getPropsForItem,k=g.onItemClick,E=g.onItemKeyDown,C=g.shouldHorizontallyScroll,w=g.useStaticHeightForListItems,I=g.width;var T=this.getUniqueItemId(a);var A=m&&this.state.isInitialFocusInRange;var N=O({key:a,index:r,isInitialFocusInRange:A})||{};var P=S()(N.className,"c-virtual_list__item--sticky");return y.a.createElement("div",{key:""+a+i+d+this.props.width+this.props.height,className:"c-virtual_list__sticky_container",role:"presentation",style:{top:i,bottom:d}},y.a.createElement(j["a"],n()({tabIndex:this.getListItemTabIndex(a)},N,{id:a,itemKey:a,key:a,height:s,validity:o,className:P,style:{top:this.props.stickyOffsetTop,zIndex:this.props.stickyZIndex},hasFocus:m,hasFocusWithin:v,isMouseDownOnItem:f,onFocusEnter:this.onItemFocusEnter,onFocusWithin:this.onItemFocusWithin,onFocusLeave:this.onItemFocusLeave,onTabWithin:this.onItemTabWithin,onHeightChange:this.setHeight,onMouseOver:this.onItemMouseOver,onMouseLeave:this.onItemMouseLeave,onMouseDown:this.onItemMouseDown,onMouseUp:this.onItemMouseUp,onClick:k,onKeyDown:E,shouldHorizontallyScroll:C,useStaticHeight:w}),_(r,{key:a,hasFocus:m,hasFocusWithin:v,isHovered:b,isExpanded:N["aria-expanded"],itemId:T,listWidth:I})))}},{key:"renderItems",value:function e(){var a=h()(p()(t.prototype),"renderItems",this).call(this);var r=this.state.start;var n=E.a.sortedIndexBy(this.props.stickyItems,{index:r},function(e){return e.index})-1;var i=this.props.stickyItems[n];i&&a.unshift(this.renderItem(i.key,i.index));return a}}]);return t}(w["a"]);M.propTypes=N;M.defaultProps=P},,function(e,t,a){"use strict";var r=a(1);var n=a.n(r);var i=a(12);var s=a(2);var o=a.n(s);var l=a(0);var c=a(6);var u=a(39);var d=a(44);var p=a(24);var m=a(187);var h=a(555);var v=a(1885);var f=a(1708);var b=a(856);var g=a(1690);var _=a(14);var y=new c["b"]("composer");var O={closeModal:s["noop"],channelId:void 0,threadTs:void 0,draftId:void 0,featureComposeFlowSidebar:false};function k(e){var t=e.draft,a=e.closeModal,r=e.channelId,i=e.threadTs,s=e.clearChannelDraft,o=e.draftId,l=e.clearDrafts,c=e.featureComposeFlowSidebar,u=e.removeAllDraftFiles;var m=Object(g["a"])();if(!c)return null;return n.a.createElement(d["a"],{closeModal:a},n.a.createElement(d["h"],null,n.a.createElement(d["j"],{title:y.t("Delete draft?")})),n.a.createElement(d["d"],null,n.a.createElement(d["e"],null,y.t("Are you sure you want to delete this draft?"))),n.a.createElement(d["f"],null,n.a.createElement(d["g"],null,n.a.createElement(p["d"],{onClick:function e(){return a()},type:"outline"},y.t("Cancel")),n.a.createElement(p["d"],{"data-qa":"drafts_page_draft_delete_confirm",onClick:function e(){a();u({draft:t});if(o)l({ids:[o]});else if(r){var n=Object(b["e"])(r,i);n&&n.clear();s({channelId:r,threadTs:i})}m.track(_["EventId"].COMPOSE_FLOW,{draft_id:o,draft_type:o?"composer":"channel",contexts:{ui_context:{action:_["UiAction"].CLICK,step:_["UiStep"].COMPOSE_FLOW_DELETE}}})},type:"danger"},y.t("Delete Draft")))))}k.displayName="DeleteDraftModal";k.defaultProps=O;function E(e){return{featureComposeFlowSidebar:Object(m["i"])(e)}}var C={closeModal:function e(){return u["closeModal"].apply(void 0,arguments)},clearChannelDraft:function e(){return h["b"].apply(void 0,arguments)},clearDrafts:function e(){return v["a"].apply(void 0,arguments)},removeAllDraftFiles:function e(){return f["a"].apply(void 0,arguments)}};t["a"]=Object(i["connect"])(E,C)(k)},,function(e,t,a){},,,,,,,function(e,t,a){"use strict";var r=a(110);var n=a.n(r);var i=a(135);var s=a.n(i);var o=a(169);var l=a.n(o);var c=a(138);var u=a.n(c);var d=a(185);var p=a.n(d);var m=a(2);var h=a.n(m);var v=a(1);var f=a.n(v);var b=a(0);var g=a(12);var _=a(13);var y=a.n(_);var O=a(448);var k=a(2809);var E=a(107);var C=a(5004);var S=a.n(C);var w={dispatchShowThreadIfThreadable:m["noop"],className:void 0,currentThreadKey:void 0};var j=function(e){p()(t,e);function t(){n()(this,t);return l()(this,u()(t).apply(this,arguments))}s()(t,[{key:"render",value:function e(){var t=this.props,a=t.msg,r=t.dispatchShowThreadIfThreadable,n=t.currentThreadKey;var i=y()("c-message_kit__thread_replies",this.props.className);var s=a.channel;var o=a.thread_ts;var l=a.replies;var c=a.reply_count;var u=a.reply_users;var d=a.reply_users_count;var p=a.latest_reply;if(!s||!c)return null;var m=Object(E["getThreadKey"])(s,o);var h=n&&m===n;var v=h?Object(E["makeIdForThreadList"])(n):void 0;return f.a.createElement(k["a"],{channelId:s,threadTs:o,replies:l,replyCount:c,replyUsers:u,replyUsersCount:d,latestReply:p,showThreadIfThreadable:r,className:i,isThreadExpanded:h,threadListId:v})}}]);return t}(v["PureComponent"]);j.displayName="ThreadReplies";j.defaultProps=w;var I=function e(t){return{currentThreadKey:Object(E["getCurrentThreadKey"])(t)}};var T=function e(t){return{dispatchShowThreadIfThreadable:function e(){return t(O["showThreadIfThreadable"].apply(void 0,arguments))}}};t["a"]=Object(g["connect"])(I,T)(j)},,,,function(e,t,a){"use strict";a.d(t,"e",function(){return c});a.d(t,"d",function(){return u});a.d(t,"c",function(){return d});a.d(t,"a",function(){return p});a.d(t,"b",function(){return m});var r=a(68);var n=a(16);var i=0;var s=0;var o=true;var l=Object(n["b"])({label:"HISTORY-NAVIGATION"});var c=function e(){if(s===i)return;l.info("Incrementing the users current position in the history stack");s+=1;o=false};var u=function e(){if(1===s)return;l.info("Decrementing the users current position in the history stack");s-=1;o=false};var d=function e(){if(!o){o=true;return}l.info("Adding route to the history stack");if(s!==i){s+=1;i=s;return}s+=1;i+=1};var p=function e(){return 1===s};var m=function e(){return s===i};Object(r["exportToGlobalDebugger"])("history",{getHistoryLength:function e(){return i},getHistoryIndex:function e(){return s}})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";var r=a(196);var n=a.n(r);var i=a(245);var s=a.n(i);var o=a(1);var l=a.n(o);var c=a(12);var u=a(0);var d=a(33);var p=a(493);var m=a(134);var h=a(1609);var v={className:void 0,isActive:false,isDisabled:false,secondaryContent:void 0};function f(e){var t=e.className,a=e.id,r=e.isActive,i=e.isDisabled,o=e.secondaryContent,c=e.team,u=s()(e,["className","id","isActive","isDisabled","secondaryContent","team"]);var d;r?d=i?m["c"].highlightDim:m["c"].highlightDark:i&&(d=m["c"].dim);return l.a.createElement(p["a"],{className:t,size:"small",style:d,primaryContent:l.a.createElement(h["a"],n()({},u,{team:c,invert:d===m["c"].highlightDark})),secondaryContent:o,"data-team-id":a})}f.displayName="SmallTeamListEntity";f.defaultProps=v;var b=function e(t,a){var r=a.team||Object(d["k"])(t,a.id);return{team:r,id:r.id}};t["a"]=Object(c["connect"])(b)(f)},function(e,t,a){"use strict";var r=a(88);var n=a.n(r);var i=a(110);var s=a.n(i);var o=a(135);var l=a.n(o);var c=a(169);var u=a.n(c);var d=a(138);var p=a.n(d);var m=a(147);var h=a.n(m);var v=a(185);var f=a.n(v);var b=a(1);var g=a.n(b);var _=a(0);var y=a(12);var O=a(13);var k=a.n(O);var E=a(2);var C=a.n(E);var S=a(102);var w=a(16);var j=a(61);var I=a(129);var T=a(1215);var A=a(1216);var N=a(1464);function P(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function M(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?P(Object(a),true).forEach(function(t){n()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):P(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var D="IMPROVED_SEARCH";var x={index:null,clogLinkClick:E["noop"],className:null,fullWidth:false,onClick:E["noop"],logger:{error:E["noop"]},telemeter:j["d"]};var R=function(e){f()(t,e);function t(e){var a;s()(this,t);a=u()(this,p()(t).call(this,e));a.onClick=a.onClick.bind(h()(a));return a}l()(t,[{key:"componentDidCatch",value:function e(t,a){this.props.telemeter.count("search_ui_files_result_file_render_error");this.props.logger.error(D,"Error caught by SearchFile "+a.componentStack)}},{key:"onClick",value:function e(t){t.preventDefault();t.stopPropagation();t.nativeEvent.stopImmediatePropagation();this.props.onClick(t,{file:this.props.file,index:this.props.index})}},{key:"render",value:function e(){var t=this.props,a=t.file,r=t.fileFromRedux,n=t.clogLinkClick,i=t.fullWidth;var s=k()("p-search_file",this.props.className);var o=r&&r.title;var l=r&&r.name;var c=M({},r,{title:a.search_title||a.title||o,name:a.search_name||a.name||l});return g.a.createElement(T["a"],{file:c,className:s,fullWidth:i,clogLinkClick:n,"data-qa":"search_result_file"},g.a.createElement(A["a"],{file:c,onClick:this.onClick},g.a.createElement(N["a"],{file:c,excludeTime:true})))}}]);return t}(b["PureComponent"]);R.displayName="SearchFile";R.defaultProps=x;var F=function e(t,a){var r=a.file;return{fileFromRedux:r?Object(I["getFileById"])(t,r.id):null,logger:Object(w["a"])({state:t}),telemeter:Object(j["c"])({state:t})}};t["a"]=Object(y["connect"])(F)(R)},,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.d(t,"b",function(){return u});a.d(t,"c",function(){return m});a.d(t,"d",function(){return h});a.d(t,"a",function(){return v});var r=a(2);var n=a.n(r);var i=a(875);var s=a(15);var o=a(21);var l=a(1990);var c=Object(s["b"])(function(e){return e&&e.channelActions||{}});c.meta={name:"selectChannelActionsState",key:"channelActionsStoreSelectorsSelectChannelActionsState"};var u=Object(i["a"])(c,function(e,t){return t},function(e,t){var a=e.actions;return a[t]||null});var d=Object(i["a"])(c,function(e,t){return t},function(e,t){var a=e.actionIdsByChannelId;var r=a[t];if(Array.isArray(r))return r;return[]});var p=Object(i["a"])(d,c,function(e,t){var a=t.actions;if(e)return e.map(function(e){return a[e]}).filter(function(e){return void 0!==e});return[]});var m=Object(i["a"])(c,function(e,t){return t},function(e,t){var a=e.actionCountByChannelId;return a&&a[t]||0});var h=Object(s["b"])(function(e,t){var a=c(e);var n=a.actionCountByChannelId;if(n)return Object(r["isNumber"])(n[t]);return false});h.meta={name:"selectChannelActionCountIsKnownForChannelId",key:"channelActionsStoreSelectorsSelectChannelActionCountIsKnownForChannelId"};var v=Object(i["a"])(o["b"],m,p,function(e,t){return t},function(e,t,a,r){t>0&&Object(l["b"])(e,r);return a})},function(e,t,a){"use strict";a.d(t,"a",function(){return i});var r=a(252);var n=a(595);function i(e){return e>=1e4?Object(n["a"])(e,{precision:4,decimal_places:0,lowercase:true}):Object(r["a"])(e)}},,function(e,t,a){"use strict";a.d(t,"c",function(){return n});a.d(t,"b",function(){return i});a.d(t,"d",function(){return s});a.d(t,"a",function(){return l});var r=a(28);var n=Object(r["b"])("TS.permissions.members.canPostInModelOb",function(){return false});var i=Object(r["b"])("TS.permissions.members.canCreateConvertOrgSharedChannels",function(){return false});var s=Object(r["b"])("TS.permissions.members.canUserInviteToWorkspace",function(){return false});var o=Object(r["b"])("TS.permissions.members.canEditUserGroups",function(){return false});var l=Object(r["b"])("TS.permissions.members.canCreateAndDeleteUserGroups",function(){return false})},,,function(e,t,a){"use strict";a.d(t,"a",function(){return v});a.d(t,"b",function(){return f});var r=a(0);var n=a(18);var i=a(16);var s=a(35);var o=a(14);var l=a(921);var c=a(1488);var u=a(90);var d="HISTORY-NAVIGATION";var p="back";var m="forward";var h=function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=a.fromKeyboardShortcut,n=a.elementName;var i=Object(s["a"])({state:t});i.track(o["EventId"].HISTORY_NAVIGATION,{contexts:{ui_context:{action:r?o["UiAction"].KEYDOWN:o["UiAction"].CLICK,ui_properties:{element_type:o["ElementType"].BUTTON,element_name:n}}},is_iap1:Object(u["e"])(t)})};var v=Object(n["b"])("Go back in history",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.event,n=a.fromKeyboardShortcut,s=void 0!==n&&n;r&&r.preventDefault();var o=t();var u=Object(i["a"])({state:o,label:d});if(Object(l["b"])(o)){if(Object(c["a"])()){u.debug("This is the beginning of the history stack \u2b05\ufe0f");return}u.debug("Moving back in history");window.history.back();Object(c["d"])();h(o,{fromKeyboardShortcut:s,elementName:p})}else{u.debug("Moving back in history");window.history.back();h(o,{fromKeyboardShortcut:s,elementName:p})}});v.meta={name:"triggerNavigateBack",key:"actionsKeyCommandsTriggerHistoryNavigationTriggerNavigateBack",description:"Go back in history"};v.propTypes={event:r["default"].object,fromKeyboardShortcut:r["default"].bool};var f=Object(n["b"])("Go forward in history",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.event,n=a.fromKeyboardShortcut,s=void 0!==n&&n;r&&r.preventDefault();var o=t();var u=Object(i["a"])({state:o,label:d});if(Object(l["b"])(o)){if(Object(c["b"])()){u.debug("This is the end of the history stack \u27a1\ufe0f");return}u.debug("Moving forward in history");window.history.forward();Object(c["e"])();h(o,{fromKeyboardShortcut:s,elementName:m})}else{u.debug("Moving forward in history");window.history.forward();h(o,{fromKeyboardShortcut:s,elementName:m})}});f.meta={name:"triggerNavigateForward",key:"actionsKeyCommandsTriggerHistoryNavigationTriggerNavigateForward",description:"Go forward in history"};f.propTypes={event:r["default"].object,fromKeyboardShortcut:r["default"].bool}},function(e,t,a){"use strict";a.d(t,"a",function(){return f});a.d(t,"b",function(){return b});var r=a(245);var n=a.n(r);var i=a(0);var s=a(1);var o=a.n(s);var l=a(109);var c=a(13);var u=a.n(c);var d=a(295);var p=a(2004);var m={isUnread:false,ghost:false,isIAP1Enabled:false};function h(e){var t=e.isUnread,a=n()(e,["isUnread"]);var r=t?o.a.createElement(p["a"],{ghost:a.ghost,isIAP1Enabled:a.isIAP1Enabled}):o.a.createElement("hr",{className:"c-message_list__day_divider__line"});return o.a.createElement("div",{className:"c-message_list__day_divider"},r)}h.displayName="DayDivider";h.defaultProps=m;function v(e){var t=e.date,a=e.sticky;var r=t/1e3;var n=Object(d["a"])(r,"{day_divider_pretty}");var i=u()("c-message_list__day_divider__label",{"c-message_list__day_divider__label--non_sticky":!a});return o.a.createElement("div",{className:i},o.a.createElement("div",{className:"c-message_list__day_divider__label__pill"},n))}v.displayName="DayDividerLabel";v.defaultProps={sticky:true};var f=Object(l["pure"])(h);var b=Object(l["pure"])(v)},,,,,,,,,,,,function(e,t,a){"use strict";a.d(t,"a",function(){return G});var r=a(218);var n=a.n(r);var i=a(88);var s=a.n(i);var o=a(110);var l=a.n(o);var c=a(135);var u=a.n(c);var d=a(169);var p=a.n(d);var m=a(138);var h=a.n(m);var v=a(147);var f=a.n(v);var b=a(185);var g=a.n(b);var _=a(0);var y=a(1);var O=a.n(y);var k=a(2);var E=a.n(k);var C=a(13);var S=a.n(C);var w=a(108);var j=a(43);var I=a(253);var T=a(1257);var A=a(559);var N=a(835);var P=a(883);var M=a(456);var D=a(6);var x=a(3130);var R=a.n(x);function F(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function L(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?F(Object(a),true).forEach(function(t){s()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):F(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var U=_["default"].shape({selectionElementId:_["default"].string,previewText:_["default"].string,isSelected:_["default"].bool});var B=_["default"].shape({id:_["default"].string.isRequired,label:_["default"].node.isRequired,isPrimary:_["default"].bool,isDanger:_["default"].bool,disabled:_["default"].bool,appliesToCount:_["default"].number});var q={showingSelection:false,titleFormatter:void 0,onToggleShowingSelection:void 0,onToggleSelect:void 0,onAction:void 0,"data-qa":"selection_bar",position:void 0};var G=76;var H=3;var W=new D["b"]("selection_bar");var V=function(e){g()(t,e);function t(e){var a;l()(this,t);a=p()(this,h()(t).call(this,e));a.onCheckboxChange=a.onCheckboxChange.bind(f()(a));a.onShowClick=a.onShowClick.bind(f()(a));a.renderActionMenu=a.renderActionMenu.bind(f()(a));a.getDefaultTitle=a.getDefaultTitle.bind(f()(a));return a}u()(t,[{key:"onCheckboxChange",value:function e(){var t=this.props,a=t.selectedCount,r=t.availableCount,n=t.onToggleSelect;n(r!==a)}},{key:"onShowClick",value:function e(){var t=this.props,a=t.showingSelection,r=t.onToggleShowingSelection;r(!a)}},{key:"getActionProps",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];var a;var r=Object(k["findIndex"])(t,{isPrimary:true});r=-1!==r?r:0;var i=L({},t[r],{isPrimary:true});var s=t.length>=3;if(t.length<=1)a={primaryAction:i,isMenu:s};else if(2===t.length){var o=0===r?t[1]:t[0];a={primaryAction:i,secondaryAction:o,isMenu:s}}else{var l=[].concat(n()(t.slice(0,r)),n()(t.slice(r+1)));a={primaryAction:i,menuActions:l,isMenu:s}}return a}},{key:"getDataQAAttr",value:function e(t){return this.props["data-qa"]+"_"+t}},{key:"getDefaultTitle",value:function e(t){return W.t("{selectedCount, plural,=1 {# item selected} other {# items selected}}",{selectedCount:t})}},{key:"getItemListProps",value:function e(t,a){return Object(k["reduce"])(t,function(e,t,a){var r=0===a?"":" ";e.ariaControls+=""+r+t.selectionElementId;if(t.isSelected&&e.previewItems.length<H){e.previewItems.push(t.previewText);e.moreItemsCount-=1}return e},{ariaControls:"",previewItems:[],moreItemsCount:a})}},{key:"getPreviewText",value:function e(t,a){var r=null;(t.length>0||a>0)&&(r=a>0?W.rt("{previewSelectionItems}{ moreItemsCount, plural,=1 {, and # more} other {, and # more}}.",{previewSelectionItems:Object(D["i"])(t,{noConj:true,noEscape:true}).join(""),moreItemsCount:a}):W.rt("{previewSelectionItems}.",{previewSelectionItems:Object(D["i"])(t,{noEscape:true}).join("")}));return r}},{key:"renderActionButton",value:function e(t){var a=this;var r=t.id,n=t.isPrimary,i=t.isDanger,s=t.disabled;var o=I["b"].outline;i?o=I["b"].danger:n&&(o=I["b"].primary);return O.a.createElement(I["c"],{key:r,type:o,className:n?void 0:"c-selection_bar__secondary_action","data-qa":this.getDataQAAttr("action_"+r),disabled:s,onClick:function e(){return a.props.onAction(r)}},this.renderActionLabel(t))}},{key:"renderActionLabel",value:function e(t){var a=t.label,r=t.appliesToCount;return r&&r>0?W.t("{action} ({count})",{action:a,count:r}):a}},{key:"renderActionMenu",value:function e(t){var a=this;var r=this.getActionProps(this.props.actions),n=r.menuActions;if(!n||0===n.length)return null;return O.a.createElement(P["a"],t,n.map(function(e){return O.a.createElement(A["a"],{key:e.id,label:a.renderActionLabel(e),disabled:e.disabled,"data-qa":a.getDataQAAttr("action_menu_item_"+e.id),onSelected:function t(){return a.props.onAction(e.id)},danger:true===e.isDanger})}))}},{key:"renderActionMenuButton",value:function e(){var t=W.rt("More {chevronDownIcon}",{chevronDownIcon:O.a.createElement(M["a"],{type:"chevron-down",inline:true})});return O.a.createElement(T["a"],{renderMenu:this.renderActionMenu,position:"top-right",offsetY:-8},O.a.createElement(I["c"],{className:"c-selection_bar__secondary_action","data-qa":this.getDataQAAttr("action_menu"),type:I["b"].outline},t))}},{key:"render",value:function e(){var t;var a=this.props,r=a.availableCount,n=a.selectedCount,i=a.items,o=a.titleFormatter,l=a.showingSelection,c=a.actions,u=a.position;var d=r===n;var p=!d&&n>0;var m=this.getItemListProps(i,n),h=m.ariaControls,v=m.previewItems,f=m.moreItemsCount;var b=this.getPreviewText(v,f);var g=o||this.getDefaultTitle;var _=this.getActionProps(c),y=_.primaryAction,k=_.secondaryAction,E=_.isMenu;var C="c-selection_bar--position_"+u;var I=(t={},s()(t,C,!!u),s()(t,"c-selection_bar--position_relative","relative"===u),s()(t,"c-selection_bar--slide_up",n>0),t);var T=p||0===n?W.t("Select all"):W.t("Deselect all");var A=l?W.t("Show all"):W.t("Show selection");return O.a.createElement("div",{className:S()("c-selection_bar",I)},O.a.createElement("div",{className:"c-selection_bar__checkbox"},O.a.createElement(N["c"],{tip:T},O.a.createElement("div",null,O.a.createElement(w["a"],{className:"c-selection_bar__checkbox_input","aria-label":b,"data-qa":this.getDataQAAttr("checkbox"),checked:d,indeterminate:p,"aria-controls":h,onChange:this.onCheckboxChange})))),O.a.createElement("div",{className:"c-selection_bar__body"},O.a.createElement("div",{className:"c-selection_bar__selected_count","data-qa":this.getDataQAAttr("title")},g(n)),O.a.createElement("div",null,O.a.createElement("span",{className:"c-selection_bar__selected_preview","data-qa":this.getDataQAAttr("preview")},b),O.a.createElement(j["a"],{className:"c-selection_bar__show_link",onClick:this.onShowClick,"data-qa":this.getDataQAAttr("show_link")},A))),O.a.createElement("div",{className:"c-selection_bar__actions"},E&&this.renderActionMenuButton(),k&&this.renderActionButton(k),y&&this.renderActionButton(y)))}}]);return t}(y["PureComponent"]);V.displayName="BaseSelectionBar";V.defaultProps=q;t["b"]=V},function(e,t,a){"use strict";var r=a(0);var n=a(12);var i=a(70);var s={children:r["default"].node,isDegradedMode:r["default"].bool};var o={children:null,isDegradedMode:null};var l=function e(t){var a=t.isDegradedMode,r=t.children;return a?r:null};l.propTypes=s;l.defaultProps=o;var c=function e(t){return{isDegradedMode:Object(i["isHavingTroubleReconnecting"])(t)}};t["a"]=Object(n["connect"])(c)(l)},,,function(e,t,a){"use strict";var r=a(196);var n=a.n(r);var i=a(88);var s=a.n(i);var o=a(110);var l=a.n(o);var c=a(135);var u=a.n(c);var d=a(169);var p=a.n(d);var m=a(138);var h=a.n(m);var v=a(147);var f=a.n(v);var b=a(185);var g=a.n(b);var _=a(1);var y=a.n(_);var O=a(0);var k=a(12);var E=a(2);var C=a(30);var S=a(11);var w=a(353);var j=a(192);var I=a(39);var T=a(106);var A=a(874);var N=a(104);var P=a(97);var M=a(6);var D=a(16);var x=a(131);var R=a(117);var F=a(93);var L=a(50);var U=a(141);var B=a(530);var q=a(18);var G=a(319);var H=a(1367);var W=80;var V=new M["b"]("user_groups");var K;var z;function Q(e,t){if(!Object(S["isFeatureEnabled"])(e,"feature_sonic_user_groups"))return;z={hasNameRequiredWarning:V.t("Please enter a name for this group."),hasReservedName:V.t('The name "{name}" is reserved and cannot be used.',{name:t,fallbackHash:"fc741acb2c5d6bf755a8dfceb173bf447313e359"}),hasMaxLengthWarning:V.t("Names can\u2019t be more than {maxLength} characters.",{maxLength:W}),hasNameTakenWarning:V.t("This name is already in use by another group."),unknownError:V.t("Sorry, something went wrong. Please try a different name.")}}function Y(){K={admins:V.t("Team Admins"),owners:V.t("Team Owners")}}var J=Object(q["b"])("Validate user group name",function(e,t,a){var r=a.name,n=a.prevName,i=a.reason;var s=t();Q(s,r);Y();if(!r||!r.trim())return Promise.resolve(z.hasNameRequiredWarning);var o=r.toLowerCase().trim();if(n&&o===n.toLowerCase().trim())return Promise.resolve("");if(o===K.admins.toLowerCase()||o===K.owners.toLowerCase())return Promise.resolve(z.hasReservedName);if(Object(H["a"])(r)>W)return Promise.resolve(z.hasMaxLengthWarning);return e(Object(G["m"])({name:r,reason:i})).then(function(e){var t=e.error;if("name_already_exists"===t)return z.hasNameTakenWarning;if(t)return z.unknownError;return""})});J.meta={name:"validateUserGroupName",key:"utilityValidateUserGroupNameValidateUserGroupName",description:"Validate user group name"};J.propTypes={name:O["default"].string,prevName:O["default"].string};var X=J;var Z={};Object.defineProperty(Z,"handleErrorSnameErrorStringstrings",{get:function e(){return z},set:function e(t){z=t}});var $=new M["b"]("user_groups");var ee=80;var te;var ae;function re(e,t){if(!Object(S["isFeatureEnabled"])(e,"feature_sonic_user_groups"))return;te={hasHandleRequiredWarning:$.t("Please enter a handle for this group."),hasMaxLengthWarning:$.t("Handles can\u2019t be more than {maxLength} characters.",{maxLength:ee}),hasReservedHandle:$.t("The group name @{handle} is reserved and cannot be used.",{handle:t,fallbackHash:"87ee177397df658b72975b506208aebb74090907"}),hasSpecialsWarning:$.t("Handles can only contain letters or numbers."),hasPunctuationWarning:$.t("Handles can only contain letters or numbers."),hasLowercaseWarning:$.t("Handles can only be in lowercase."),hasHandleTakenWarning:$.t("This handle is already in use by a member, channel, or another group."),unknownError:$.t("Sorry, something went wrong. Please try a different handle.")}}function ne(){ae={admins:$.t("admins"),owners:$.t("owners")}}var ie=Object(q["b"])("Validate user group handle",function(e,t,a){var r=a.handle,n=a.prevHandle,i=a.reason;var s=t();re(s,r);ne();if(!r||!r.trim())return Promise.resolve(te.hasHandleRequiredWarning);if(r===n)return Promise.resolve("");if(r.toLowerCase()===ae.admins.toLowerCase()||r.toLowerCase()===ae.owners.toLowerCase())return Promise.resolve(te.hasReservedHandle);if(/[ ,;'`~!@#$%^&*+=\\:"<>?|]/.test(r.trim()))return Promise.resolve(te.hasSpecialsWarning);if(/^[-|_]+$/.test(r))return Promise.resolve(te.hasPunctuationWarning);if(/[A-Z]/.test(r))return Promise.resolve(te.hasLowercaseWarning);if(Object(H["a"])(r)>ee)return Promise.resolve(te.hasMaxLengthWarning);return e(Object(G["l"])({handle:r,reason:i})).then(function(e){var t=e.error;if("handle_already_exists"===t)return te.hasHandleTakenWarning;if(t)return te.unknownError;return""})});ie.meta={name:"validateUserGroupHandle",key:"utilityValidateUserGroupHandleValidateUserGroupHandle",description:"Validate user group handle"};ie.propTypes={handle:O["default"].string,prevHandle:O["default"].string};var se=ie;var oe={};Object.defineProperty(oe,"handleErrorStrings",{get:function e(){return te},set:function e(t){te=t}});var le=a(2224);var ce=new M["b"]("user_groups");var ue={detailsFormValues:{name:"",handle:"",purpose:"",channels:[]},errors:{nameError:"",handleError:"",purposeError:""},submitError:""};var de=function(e){g()(t,e);function t(e){var a;l()(this,t);a=p()(this,h()(t).call(this,e));a.state={name:e.detailsFormValues.name,handle:e.detailsFormValues.handle,purpose:e.detailsFormValues.purpose,channels:e.detailsFormValues.channels};var r=!a.state.name||!a.state.handle;a.props.setRequiredFieldsEmpty(r);a.validateUserGroupName=Object(E["debounce"])(a.validateUserGroupName,300).bind(f()(a));a.validateUserGroupHandle=Object(E["debounce"])(a.validateUserGroupHandle,300).bind(f()(a));Object(C["a"])(f()(a),["onNameChange","onHandleChange","onPurposeChange","onChannelsUpdate","getFormValues","setUserGroupFormRef","maybeRenderApiError","focusNameInput"]);a.postValidateHandle=null;a.postValidateName=null;a.nameInputRef=y.a.createRef();return a}u()(t,[{key:"componentDidMount",value:function e(){this.props.onRef(this);this.focusNameInput()}},{key:"componentDidUpdate",value:function e(t){if(t!==this.props){var a=!this.state.name||!this.state.handle;this.props.setRequiredFieldsEmpty(a)}}},{key:"componentWillUnmount",value:function e(){this.props.onRef(void 0)}},{key:"onChannelsUpdate",value:function e(t){var a=t.map(function(e){return e.value});this.setState(function(){return{channels:a}})}},{key:"onHandleChange",value:function e(t){if(this.postValidateHandle){this.postValidateHandle.cancel();this.postValidateHandle=null}var a=t.replace(/ /g,"");this.setState(function(){return{handle:a}});if(" "!==t.charAt(0))return this.validateUserGroupHandle(a);return Promise.resolve()}},{key:"onNameChange",value:function e(t){if(this.postValidateName){this.postValidateName.cancel();this.postValidateName=null}this.setState(function(){return{name:t}});return this.validateUserGroupName(t)}},{key:"onPurposeChange",value:function e(t){this.props.onPurposeChange(t);this.setState(function(){return{purpose:t}})}},{key:"getFormValues",value:function e(){return this.state}},{key:"setUserGroupFormRef",value:function e(t){this.defaultChannelsRef=t}},{key:"focusNameInput",value:function e(){this.nameInputRef.current.focus()}},{key:"hasValidationErrors",value:function e(t){return Object(E["find"])(t,function(e){return e})}},{key:"maybeRenderApiError",value:function e(){if(!this.props.featureSonicUserGroups)return null;if(this.props.submitError){var t=ce.t("We\u2019re not sure why, but that didn\u2019t work. Try again?");return y.a.createElement(F["a"],{level:"error",type:"inline",className:"margin_bottom_100"},t)}return false}},{key:"maybeRenderAutogeneratedUserGroupAlert",value:function e(){var t=this.props.userGroup;if(!Object(P["n"])(t))return null;var a=ce.t("This user group is automatically generated for Workspace Admins.",{fallbackHash:"0cf6a765aa60fc4bc7f34f9ec7e18139d7ab4c37"});var r=ce.t("This user group is automatically generated for Workspace Owners.",{fallbackHash:"18d8fa9ec13425420cc46bc2669fc1f2055284c6"});var n;Object(P["p"])(t)&&(n=r);Object(P["o"])(t)&&(n=a);return y.a.createElement(F["a"],{level:"info",type:"inline",className:"margin_bottom_100"},n)}},{key:"validateUserGroupHandle",value:function e(t){var a=this;var r=this.props.userGroup;return this.props.validateUserGroupHandle({handle:t,prevHandle:Object(P["f"])(r,{includeAtSign:false}),reason:"user-group-edit-create-form"}).then(function(e){a.props.setFormErrors({handleError:e})}).finally(function(){a.postValidateHandle=null})}},{key:"validateUserGroupName",value:function e(t){var a=this;var r=this.props.userGroup;return this.props.validateUserGroupName({name:t,prevName:Object(P["h"])(r),reason:"user-group-edit-create-form"}).then(function(e){a.props.setFormErrors({nameError:e})}).finally(function(){a.postValidateName=null})}},{key:"renderDefaultChannelSelect",value:function e(){return y.a.createElement(le["a"],{selectedChannels:this.state.channels,onChange:this.onChannelsUpdate})}},{key:"renderUserGroupHandleField",value:function e(){var t=this;if(!this.props.featureSonicUserGroups)return null;var a=ce.t("e.g. accounts-team");var r=ce.t("You\u2019ll use the display name to get the group\u2019s attention. It should be all lowercase, with no spaces.");var n=ce.t("Handle");return y.a.createElement("div",null,y.a.createElement(L["a"],{htmlFor:"handle_label",id:"user_group_handle",key:"user_group_handle",text:n},y.a.createElement(U["a"],{name:"user_group_handle",id:"handle_input",placeholder:a,labelId:"user_group_handle",value:this.state.handle,type:"text",onChange:function e(a){return t.onHandleChange(a)},errorText:this.props.errors.handleError,hintText:r,isRequired:true,icon:"mentions",useInlineAlert:true,isDisabled:Object(P["n"])(this.props.userGroup)})))}},{key:"renderUserGroupNameField",value:function e(){var t=this;if(!this.props.featureSonicUserGroups)return null;var a=ce.t("Name");var r=ce.t("e.g. Accounts Team");return y.a.createElement("div",null,y.a.createElement(L["a"],{htmlFor:"name_label",id:"user_group_name",key:"user_group_name",text:a},y.a.createElement(U["a"],{name:"user_group_name",ref:this.nameInputRef,id:"name_input",placeholder:r,labelId:"user_group_name",value:this.state.name,type:"text",onChange:function e(a){return t.onNameChange(a)},errorText:this.props.errors.nameError,isRequired:true,useInlineAlert:true,isDisabled:Object(P["n"])(this.props.userGroup)})))}},{key:"renderUserGroupPurposeField",value:function e(){var t=this;if(!this.props.featureSonicUserGroups)return null;var a=ce.t("Purpose");var r=ce.t("What is this group about?");return y.a.createElement("div",null,y.a.createElement(L["a"],{htmlFor:"purpose_label",id:"user_group_purpose",key:"user_group_purpose",text:a,optional:true},y.a.createElement(B["a"],{name:"user_group_purpose",id:"purpose_input",labelId:"user_group_purpose",value:this.state.purpose,type:"text",onChange:function e(a){return t.onPurposeChange(a)},errorText:this.props.errors.purposeError,hintText:r,maxCharacterLimit:this.props.purposeMaxLength,useInlineAlert:true})))}},{key:"render",value:function e(){if(!this.props.featureSonicUserGroups)return null;return y.a.createElement("div",null,this.maybeRenderApiError(),this.maybeRenderAutogeneratedUserGroupAlert(),y.a.createElement("form",{className:"p-user_group_create_form"},this.renderUserGroupNameField(),this.renderUserGroupHandleField(),this.renderUserGroupPurposeField(),this.renderDefaultChannelSelect()))}}]);return t}(_["PureComponent"]);de.displayName="UserGroupEditCreateForm";de.defaultProps=ue;var pe=function e(t){return{featureSonicUserGroups:Object(S["isFeatureEnabled"])(t,"feature_sonic_user_groups")}};var me={validateUserGroupName:X,validateUserGroupHandle:se};var he=Object(k["connect"])(pe,me)(de);var ve=a(2797);var fe=a(246);var be=a.n(fe);var ge=Object(q["b"])("Validate the user group form",function(e,t,a){var r=a.name,n=a.handle,i=a.prevName,s=a.prevHandle;return Promise.all([e(X({name:r,prevName:i})),e(se({handle:n,prevHandle:s}))]).then(function(e){var t=be()(e,2),a=t[0],r=t[1];return{nameError:a,handleError:r}})});ge.meta={name:"validate",key:"componentsFlexpaneUserGroupsUtilityValidationValidate",description:"Validate the user group form"};ge.propTypes={name:O["default"].string,handle:O["default"].string,prevName:O["default"].string,prevHandle:O["default"].string};var _e=ge;function ye(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function Oe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ye(Object(a),true).forEach(function(t){s()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ye(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var ke=new M["b"]("user_groups");var Ee={userGroupId:"",userGroupName:null,userGroupHandle:null,userGroupPurpose:"",userGroupDefaultChannels:[],closeModal:E["noop"],enqueueToast:E["noop"],showUserGroupDetails:E["noop"]};var Ce;var Se=Object(D["b"])();var we=140;var je=function(e){g()(t,e);function t(e){var a;l()(this,t);a=p()(this,h()(t).call(this,e));a.state={formSubmitPending:false,errors:{nameError:"",handleError:"",purposeError:""},formStep:"",submitError:"",requiredFieldsEmpty:false,detailsFormValues:{name:a.props.userGroupName,handle:a.props.userGroupHandle,purpose:a.props.userGroupPurpose,channels:a.props.userGroupDefaultChannels},purposeTooLong:false};Object(C["a"])(f()(a),["setFormErrors","setUserGroupFormRef","setUserGroupMemberManagementRef","setRequiredFieldsEmpty","onSubmitSuccess","onSubmitFailure","onDetailsStepComplete","onEditDialogSubmit","onCreateDialogSubmit","createDialogViewInfo","shouldShowCloseDialogSpeedBump","onSelectedItemsChange","onPurposeChange"]);a.onPurposeChange=Object(E["debounce"])(a.onPurposeChange,300).bind(f()(a));a.formRef=null;return a}u()(t,[{key:"UNSAFE_componentWillMount",value:function e(){this.createDialogViewInfo();this.props.userGroupId?this.setDialogStep(Ce.edit.id):this.setDialogStep(Ce.details.id)}},{key:"onCreateDialogSubmit",value:function e(){var t=this;if(!this.props.featureSonicUserGroups)return null;var a=this.state.detailsFormValues;a=void 0===a?{}:a;var r=a.name,n=a.handle,i=a.purpose,s=a.channels;if(!this.userGroupMemberManagementRef)return false;var o=this.userGroupMemberManagementRef.validateUpdatedGroupMemberCount();if(!o){this.setRequiredFieldsEmpty(true);return false}var l=this.userGroupMemberManagementRef.getUpdatedUserGroupMembers();return this.props.createUserGroup({name:Object(E["trim"])(r),handle:n,description:i,channels:s,users:l,reason:"onCreateDialogSubmit"}).then(function(e){var a=e.id;t.props.showUserGroupDetails({groupId:a});t.props.addUserGroupIds([a])}).then(function(){t.props.enqueueToast({element:y.a.createElement(x["b"],null,ke.t("User group created!"))});t.onSubmitSuccess()}).catch(function(e){Se.error("Error creating user group: "+e);t.onSubmitFailure(e)})}},{key:"onDetailsStepComplete",value:function e(){var t=this;var a=this.formRef.getFormValues();this.setFormSubmitPending(true);return this.props.validate(Oe({},a,{prevName:this.props.userGroupName,prevHandle:this.props.userGroupHandle})).then(function(e){t.setFormErrors(e);if(t.hasValidationErrors(e)){t.setFormSubmitPending(false);return}if(t.state.formStep===Ce.edit.id)t.onEditDialogSubmit(a);else{t.setDetailsFormValues(a);t.setDialogStep(Ce.members.id);t.setFormSubmitPending(false)}})}},{key:"onEditDialogSubmit",value:function e(t){var a=this;var r=t.name,n=t.handle,i=t.purpose,s=t.channels;if(!this.props.featureSonicUserGroups)return null;var o=this.props.userGroupId;return this.props.updateUserGroup({groupId:o,name:Object(E["trim"])(r),handle:n,description:i,channels:s,reason:"onEditDialogSubmit"}).then(function(){a.props.enqueueToast({element:y.a.createElement(x["b"],null,ke.t("Group has been updated."))});a.onSubmitSuccess()}).catch(function(e){Se.error("Error editing user group: "+e);a.onSubmitFailure(e)})}},{key:"onPurposeChange",value:function e(t){var a=t.length>we;this.setState(function(){return{purposeTooLong:a}})}},{key:"onSelectedItemsChange",value:function e(t){this.setRequiredFieldsEmpty(!t.length)}},{key:"onSubmitFailure",value:function e(t){this.setFormSubmitPending(false);this.setApiError(t)}},{key:"onSubmitSuccess",value:function e(){this.setFormSubmitPending(false);this.props.closeModal();this.setApiError("")}},{key:"getDetailsFormDialogProps",value:function e(){if(!this.props.featureSonicUserGroups)return null;var t=this.state.formStep;var a=Object(E["find"])(Ce,function(e){return e.id===t});return{title:a.title,contentLabel:a.title,goButtonText:a.goButtonText,onGo:this.onDetailsStepComplete,shouldCloseOnCancel:true,cancelText:ke.t("Cancel"),shouldCloseOnGo:false,footerText:a.footerText}}},{key:"getMemberSelectorDialogProps",value:function e(){var t=this;if(!this.props.featureSonicUserGroups)return null;return{title:Ce.members.title,contentLabel:Ce.members.title,shouldCloseOnGo:true,bodyClassName:"p-user_group_member_management__dialog_body",onGo:this.onCreateDialogSubmit,goButtonText:Ce.members.goButtonText,shouldCloseOnCancel:false,cancelText:ke.t("Back"),onCancel:function e(){t.setDialogStep(Ce.details.id)},footerText:Ce.members.footerText}}},{key:"setApiError",value:function e(t){this.setState(function(){return{submitError:t}})}},{key:"setDetailsFormValues",value:function e(t){this.setState(function(e){return{detailsFormValues:Oe({},e.detailsFormValues,{},t)}})}},{key:"setDialogStep",value:function e(t){this.setState(function(){return{formStep:t}})}},{key:"setFormErrors",value:function e(t){this.setState(function(e){return{errors:Oe({},e.errors,{},t)}})}},{key:"setFormSubmitPending",value:function e(t){this.setState(function(){return{formSubmitPending:t}})}},{key:"setRequiredFieldsEmpty",value:function e(t){this.setState(function(){return{requiredFieldsEmpty:t}})}},{key:"setUserGroupFormRef",value:function e(t){this.formRef=t}},{key:"setUserGroupMemberManagementRef",value:function e(t){this.userGroupMemberManagementRef=t&&t.getWrappedInstance?t.getWrappedInstance():t}},{key:"createDialogViewInfo",value:function e(){if(!this.props.featureSonicUserGroups)return;Ce={details:{id:"details",footerText:ke.t("Step 1 of 2"),title:ke.t("Create User Group"),goButtonText:ke.t("Next")},members:{id:"members",footerText:ke.t("Step 2 of 2"),title:ke.t("Add members"),goButtonText:ke.t("Create Group")},edit:{id:"edit",footerText:null,title:ke.t("Edit User Group"),goButtonText:ke.t("Save")}}}},{key:"hasValidationErrors",value:function e(t){return!!Object(E["find"])(t,function(e){return e.length})}},{key:"shouldShowCloseDialogSpeedBump",value:function e(t){if("go"===t||this.state.formStep===Ce.members.id)return false;var a=this.formRef.getFormValues();return!Object(E["isEqual"])(this.state.detailsFormValues,a)}},{key:"renderDetailsForm",value:function e(){var t=this;return y.a.createElement("div",null,y.a.createElement(he,n()({},this.props,{detailsFormValues:this.state.detailsFormValues,errors:this.state.errors,submitError:this.state.submitError,setFormErrors:this.setFormErrors,onRef:function e(a){return t.setUserGroupFormRef(a)},setRequiredFieldsEmpty:this.setRequiredFieldsEmpty,onPurposeChange:this.onPurposeChange,purposeMaxLength:we,userGroup:this.props.userGroup})))}},{key:"renderDialogStep",value:function e(){if(this.state.formStep===Ce.details.id||this.state.formStep===Ce.edit.id)return this.renderDetailsForm();if(this.state.formStep===Ce.members.id)return this.renderMemberSelector();return""}},{key:"renderMemberSelector",value:function e(){if(!this.props.featureSonicUserGroups)return null;return y.a.createElement(ve["a"],{groupId:this.props.userGroupId,ref:this.setUserGroupMemberManagementRef,onSelectedItemsChange:this.onSelectedItemsChange})}},{key:"render",value:function e(){if(!this.props.featureSonicUserGroups)return null;var t=this.hasValidationErrors(this.state.errors)||this.state.requiredFieldsEmpty||this.state.purposeTooLong;var a=this.state.formStep===Ce.details.id||this.state.formStep===Ce.edit.id?this.getDetailsFormDialogProps():this.getMemberSelectorDialogProps();return y.a.createElement(R["a"],n()({showCancelButton:true,goButtonIsDisabled:t,goButtonIsPending:this.state.formSubmitPending},a,{getShouldShowSpeedBump:this.shouldShowCloseDialogSpeedBump,speedBumpCancelButtonText:ke.t("Keep Editing"),speedBumpContinueButtonText:ke.t("Close"),speedBumpTitleText:ke.t("Your work won\u2019t be saved - are you sure you want to close?")}),this.renderDialogStep())}}]);return t}(_["PureComponent"]);je.displayName="UserGroupEditCreateDialog";je.defaultProps=Ee;var Ie=function e(t,a){var r=Object(j["f"])(t,a.userGroupId);if(!r)return{userGroup:{},userGroupName:"",userGroupHandle:"",userGroupPurpose:"",userGroupDefaultChannels:[],featureSonicUserGroups:Object(S["isFeatureEnabled"])(t,"feature_sonic_user_groups")};return{userGroup:r,userGroupName:Object(P["h"])(r),userGroupHandle:Object(P["f"])(r,{includeAtSign:false}),userGroupPurpose:Object(P["e"])(r),userGroupDefaultChannels:Object(P["d"])(t,r),featureSonicUserGroups:Object(S["isFeatureEnabled"])(t,"feature_sonic_user_groups")}};var Te={createUserGroup:w["g"],updateUserGroup:w["o"],closeModal:I["closeModal"],enqueueToast:T["enqueueToast"],showUserGroupDetails:N["o"],validate:_e,addUserGroupIds:A["addUserGroupIds"]};var Ae=t["a"]=Object(k["connect"])(Ie,Te)(je)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.d(t,"a",function(){return b});a.d(t,"b",function(){return g});var r=a(246);var n=a.n(r);var i=a(218);var s=a.n(i);var o=a(0);var l=a(94);var c=a(232);var u=a(1156);var d=a(6);var p=new d["b"]("enterprise_dashboard");var m="25";function h(e){var t=e.type,a=e.entities,r=void 0===a?[]:a,n=e.label;var i=(r||[]).map(function(e){return{value:e.id,label:e.id,entity:e,type:t}});return{label:n,options:i}}function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(0===e.length)return;var t=e.map(function(e){return{type:"id",value:e}});return{type:"or",clauses:[{type:"is",value:"user"}].concat(s()(t))}}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(0===e.length)return;var t=e.map(function(e){return{type:"id",value:e}});return{type:"or",clauses:[{type:"is",value:"group"},{type:"is",value:"group_local"}].concat(s()(t))}}var b=Object(l["e"])("fetch user groups and members in the org context",function(e,t,a){var r=a.query,i=a.userIds,s=a.userGroupIds;var o=v(i);var l=f(s);var d=e(Object(c["x"])({searchTerm:r,count:m,query:o}));var b=e(Object(u["f"])({searchTerm:r,count:m,query:l}));return Promise.all([d,b]).then(function(e){var t=n()(e,2),a=t[0],r=t[1],i=void 0===r?{}:r;var s=p.t("Members");var o=p.t("User Groups");var l=h({entities:a,type:"member",label:s});var c=h({entities:i.items,type:"user_group",label:o});return[l,c]})});b.meta={name:"fetchMembersAndUserGroups",key:"componentsEnterpriseChannelAdministrationUtilitySearchUserGroupsAndMembersFetchMembersAndUserGroups",description:"fetch user groups and members in the org context"};b.propTypes=o["default"].shape({query:o["default"].string,userIds:o["default"].arrayOf(o["default"].string),userGroupIds:o["default"].arrayOf(o["default"].string)}).isRequired;var g=Object(l["e"])("Search for user groups and members in the org context",function(e,t,a){return e(b({query:a}))});g.meta={name:"searchUserGroupsAndMembers",key:"componentsEnterpriseChannelAdministrationUtilitySearchUserGroupsAndMembersSearchUserGroupsAndMembers",description:"Search for user groups and members in the org context"};g.propTypes={query:o["default"].string};var _=g;var y={};Object.defineProperty(y,"getOptionGroup",{get:function e(){return h},set:function e(t){h=t}})},function(e,t,a){"use strict";a.d(t,"a",function(){return s});var r=a(6);var n=a(1060);var i=new r["b"]("a11y");function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,a=e.isGuest,r=e.isSelf,s=e.isAppOrBot,o=e.isDeleted,l=e.isPrescenceAway,c=e.isPrescenceDND,u=e.statusEmojiCode,d=e.statusText,p=e.isCurrent,m=e.hasNotifications,h=e.isStarred,v=e.isMuted,f=e.hasDraft;var b=function(){if(o)return i.t("deactivated");if(s)return i.t("APP");if(a&&!l&&c)return i.t("guest, do not disturb");if(a&&l&&!c)return i.t("guest, away");if(a&&!l&&!c)return i.t("guest");if(r&&!l&&c)return i.t("you, do not disturb");if(r&&!l&&!c)return i.t("you");if(!a&&!l&&c)return i.t("do not disturb");if(!a&&l&&!c)return i.t("away");return""}();var g=u&&Object(n["a"])(u);var _=function(){if(g&&!d)return g;if(g&&d)return i.t("{statusEmoji} {statusText}",{statusEmoji:g,statusText:d,fallbackHash:"ad5c47c4aa7f1e2be1e151ea075d02eff6e54376"});if(!g&&d)return d;return""}();var y=function(){if(p&&m&&v&&h&&f)return i.t("current conversation, has notifications, muted, starred, has a draft message");if(!p&&m&&v&&h&&f)return i.t("has notifications, muted, starred, has a draft message");if(p&&!m&&v&&h&&f)return i.t("current conversation, muted, starred, has a draft message");if(!p&&!m&&v&&h&&f)return i.t("muted, starred, has a draft message");if(p&&m&&!v&&h&&f)return i.t("current conversation, has notifications, starred, has a draft message");if(!p&&m&&!v&&h&&f)return i.t("has notifications, starred, has a draft message");if(p&&!m&&!v&&h&&f)return i.t("current conversation, starred, has a draft message");if(!p&&!m&&!v&&h&&f)return i.t("starred, has a draft message");if(p&&m&&v&&!h&&f)return i.t("current conversation, has notifications, muted, has a draft message");if(!p&&m&&v&&!h&&f)return i.t("has notifications, muted, has a draft message");if(p&&!m&&v&&!h&&f)return i.t("current conversation, muted, has a draft message");if(!p&&!m&&v&&!h&&f)return i.t("muted, has a draft message");if(p&&m&&!v&&!h&&f)return i.t("current conversation, has notifications, has a draft message");if(!p&&m&&!v&&!h&&f)return i.t("has notifications, has a draft message");if(p&&!m&&!v&&!h&&f)return i.t("current conversation, has a draft message");if(!p&&!m&&!v&&!h&&f)return i.t("has a draft message");if(p&&m&&v&&h&&!f)return i.t("current conversation, has notifications, muted, starred");if(!p&&m&&v&&h&&!f)return i.t("has notifications, muted, starred");if(p&&!m&&v&&h&&!f)return i.t("current conversation, muted, starred");if(!p&&!m&&v&&h&&!f)return i.t("muted, starred");if(p&&m&&!v&&h&&!f)return i.t("current conversation, has notifications, starred");if(!p&&m&&!v&&h&&!f)return i.t("has notifications, starred");if(p&&!m&&!v&&h&&!f)return i.t("current conversation, starred");if(!p&&!m&&!v&&h&&!f)return i.t("starred");if(p&&m&&v&&!h&&!f)return i.t("current conversation, has notifications, muted");if(!p&&m&&v&&!h&&!f)return i.t("has notifications, muted");if(p&&!m&&v&&!h&&!f)return i.t("current conversation, muted");if(!p&&!m&&v&&!h&&!f)return i.t("muted");if(p&&m&&!v&&!h&&!f)return i.t("current conversation, has notifications");if(!p&&m&&!v&&!h&&!f)return i.t("has notifications");if(p&&!m&&!v&&!h&&!f)return i.t("current conversation");return""}();if(t&&b&&_&&y)return i.t("{name} ({userInfo}), status: {status} ({context})",{name:t,userInfo:b,status:_,context:y});if(t&&!b&&_&&y)return i.t("{name}, status: {status} ({context})",{name:t,status:_,context:y});if(t&&b&&!_&&y)return i.t("{name} ({userInfo}) ({context})",{name:t,userInfo:b,context:y});if(t&&!b&&!_&&y)return i.t("{name} ({context})",{name:t,context:y});if(t&&b&&_&&!y)return i.t("{name} ({userInfo}), status: {status}",{name:t,userInfo:b,status:_});if(t&&!b&&_&&!y)return i.t("{name}, status: {status}",{name:t,status:_});if(t&&b&&!_&&!y)return i.t("{name} ({userInfo})",{name:t,userInfo:b});if(t)return t;return""}},function(e,t,a){"use strict";a.d(t,"b",function(){return l});a.d(t,"a",function(){return c});var r=a(15);var n=a(73);var i=a(148);var s=a(41);var o=a(787);var l=Object(r["b"])(function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;var r=Object(i["getPotentiallyOutdatedTimestamps"])(e,t);var l=r?r.timestamps:[];var c=l.map(function(a){return Object(n["a"])(e,t,a)}).filter(function(t){return!Object(o["a"])(t.subtype)&&!Object(s["isEphemeral"])(t)&&!Object(s["isHidden"])(t)&&!Object(s["isAppMessage"])(e,t)&&!Object(s["isTombstone"])(t)&&!Object(s["isTempMsg"])(t)&&!Object(s["isSlackbotMessage"])(t)}).slice(-1*Math.abs(a));return{slice:r,messages:c}});l.meta={name:"getLastHumanMessages",key:"channelHistoryStoreGetLastChannelMessagesGetLastHumanMessages"};var c=Object(r["b"])(function(e,t){return l(e,t,1).messages.length>0});c.meta={name:"doesChannelHaveMessages",key:"channelHistoryStoreGetLastChannelMessagesDoesChannelHaveMessages"}},function(e,t,a){"use strict";a.d(t,"a",function(){return l});var r=a(2);var n=a.n(r);var i=a(38);var s=a(33);var o=a(27);function l(e){var t=Object(i["k"])(e,"all_unreads_sort_order");var a=["alphabetical","priority","oldest","newest"];if(t&&Object(r["includes"])(a,t))return t;return Object(o["isPaidTeam"])(Object(s["d"])(e))?"priority":"alphabetical"}},function(e,t,a){"use strict";a.d(t,"a",function(){return f});var r=a(88);var n=a.n(r);var i=a(110);var s=a.n(i);var o=a(135);var l=a.n(o);var c=a(14);var u=a(26);var d=a(73);function p(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function m(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?p(Object(a),true).forEach(function(t){n()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):p(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var h=function e(t){var a=t.channel,r=t.ts;return a&&r?a+"-"+r:r};var v=1e3;var f=function(){function e(t){var a=t.teamId,r=t.experimentGroup,n=t.clogger,i=t.messageViewLocation;s()(this,e);this.teamId=a;this.visibleMessageIds={};this.messagesById={};this.experimentGroup=r;this.clogger=n;this.messageViewLocation=i}l()(e,[{key:"setCurrentlyVisibleMessages",value:function e(t){var a=this;var r=(new Date).getTime();var n=m({},this.visibleMessageIds);t.forEach(function(e){var t=h(e);a.messagesById[t]=e;a.visibleMessageIds[t]=a.visibleMessageIds[t]||r;delete n[t]});Object.keys(n).forEach(function(e){var t=a.messagesById[e],n=t.ts,i=t.channel;var s=false;var o=Object(d["a"])(Object(u["d"])(a.teamId),i,n,s);var l=r-a.visibleMessageIds[e];delete a.visibleMessageIds[e];delete a.messagesById[e];if(!a.shouldLog())return;if(l<v)return;if(!o)return;a.clogger.track(c["EventId"].MSG_IMPRESSION,{contexts:{ui_context:{action:c["UiAction"].IMPRESSION},message_impression:{channel_id:o.channel,msg_timestamp:o.ts,msg_thread_ts:o.thread_ts,msg_author_user_id:o.user,duration_milliseconds:l,message_view_location:a.messageViewLocation}}})})}},{key:"flushAllVisibleMessages",value:function e(){this.setCurrentlyVisibleMessages([])}},{key:"isDisabled",value:function e(){return!this.experimentGroup||"control"===this.experimentGroup}},{key:"shouldLog",value:function e(){if(this.isDisabled())return false;switch(this.experimentGroup){case"enabled":return true;case"sample_001":return Math.random()<.01;default:return false}}}]);return e}()},function(e,t,a){"use strict";a.d(t,"a",function(){return r});var r={CHANNEL:0,DM:1,MPDM:2,THREAD:3,ALL_UNREAD:4,ALL_THREADS:5,SEARCH:6}},function(e,t,a){"use strict";var r=a(196);var n=a.n(r);var i=a(245);var s=a.n(i);var o=a(1);var l=a.n(o);var c=a(0);var u=a(41);var d=a(515);function p(e){var t=e.msg,a=s()(e,["msg"]);return l.a.createElement(d["a"],n()({msg:t},a,{inline:Object(u["isRichTextMessage"])(t)}))}p.displayName="CompactBlocks";t["a"]=p},function(e,t,a){"use strict";var r=a(757);var n=a.n(r);var i=a(0);var s=a(18);var o=a(2729);var l=Object(s["b"])("maybe shows omni switcher modal",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.event,i=a.keyCode;n&&n.preventDefault();var s;i&&(i===r["codes"].k?s="k":i===r["codes"].t&&(s="t"));e(Object(o["a"])({key:s||"button"}));return true});l.meta={name:"maybeShowOmniSwitcher",key:"actionsToggleOmniSwitcherMaybeShowOmniSwitcher",description:"maybe shows omni switcher modal"};l.propTypes={event:i["default"].object,keyCode:i["default"].number};t["a"]=l},function(e,t,a){"use strict";a.d(t,"a",function(){return o});var r=a(2);var n=a.n(r);var i=a(6);var s=new i["b"]("channel_sidebar");function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,a=e.displayName,r=e.isShared,i=e.isOrgShared,o=e.isYou,l=e.isMuted,c=e.isSuggested,u=e.hasUnreads,d=e.hasDraft,p=e.isArchived,m=e.unreadCount,h=e.badgeCount,v=e.isSelected,f=e.userActive,b=e.isTyping,g=e.isThread,_=e.canPost,y=void 0===_||_,O=e.featureAnnounceOnly,k=void 0!==O&&O;var E=[v?s.t("selected"):null];if("channel"===t)E.push(r||i?s.t("shared channel"):s.t("channel"));else if("private"===t)E.push(s.t("private channel"));else if("mpim"===t)E.push(s.t("group direct message"));else if("im"===t){E.push(s.t("direct message"));E.push(f?s.t("active"):s.t("away"))}p&&E.push(s.t("archived"));l&&E.push(s.t("muted"));!y&&k&&E.push(s.t("read only",{fallbackHash:"1d8d39a6e91a5d579d831544fb5c2b08d7ea8d5d"}));c&&E.push(s.t("suggested"));u&&m&&!h&&E.push(s.t("{count} unread {count, plural, =1 {message} other {messages}}",{count:m}));h&&E.push(s.t("{count} {count, plural, =1 {unread highlight} other {unread highlights}}",{count:h}));d&&E.push(s.t("has draft"));b&&E.push(s.t("typing"));var C=function(){if(o)return s.t("{name} (you)",{name:a});if(g&&("channel"===t||"private"===t))return s.t("Thread in {name}",{name:a});if(g&&("mpim"===t||"im"===t))return s.t("Thread with {name}",{name:a});return a}();var S=n.a.join(n.a.filter(E,n.a.identity),", ");return C+" ("+S+")"}},,,,function(e,t,a){"use strict";var r=a(278);var n=a.n(r);var i=a(0);var s=a(16);var o=a(35);var l=a(14);var c=a(1379);var u=a(18);var d=a(211);var p=a(1);var m=a.n(p);var h=a(168);var v=a(2714);var f=a(106);var b=a(12);var g=a(6);var _=a(187);var y=a(131);var O=new g["b"]("drafts");var k={featureComposeFlow:false};function E(e){var t=e.featureComposeFlow;if(!t)return null;return m.a.createElement(y["b"],null,O.t("You\u2019ve reached the maximum number of drafts allowed"))}E.displayName="DraftLimitToast";E.defaultProps=k;function C(e){return{featureComposeFlow:Object(_["g"])(e)}}var S=Object(b["connect"])(C)(E);var w=S;var j=a(555);var I=Object(u["b"])("Create a new composer draft",function(e,t){var a=t();if(Object(v["a"])(a)){e(Object(f["enqueueToast"])({element:m.a.createElement(w)}));Object(s["a"])({state:a}).info("Failed to create composer draft (max_num_drafts)");return Promise.reject(new Error("max_num_drafts"))}var r=Object(h["a"])();e(Object(j["g"])({id:r,is_from_composer:true}));return Promise.resolve(r)});I.meta={name:"createComposerDraft",key:"draftsStoreThunksCreateComposerDraftCreateComposerDraft",description:"Create a new composer draft"};I.propTypes=null;var T=I;a.d(t,"a",function(){return A});var A=Object(u["b"])("Opens the composer page",function(){var e=n()(regeneratorRuntime.mark(function e(t,a){var r,n,i,u,p,m,h,v=arguments;return regeneratorRuntime.wrap(function e(f){while(1)switch(f.prev=f.next){case 0:r=v.length>2&&void 0!==v[2]?v[2]:{},n=r.draftId,i=r.fromKeyboardShortcut;u=a();p=Object(s["a"])({state:u,label:"COMPOSER"});if(!n){f.next=7;break}m=n;f.next=18;break;case 7:f.prev=7;f.next=10;return t(T());case 10:m=f.sent;p.info("Creating a new composer draft "+m);if(i){h=Object(o["a"])({state:u});h.track(l["EventId"].COMPOSE_FLOW,{draft_action_source:"sidebar",draft_type:"composer",contexts:{ui_context:{action:l["UiAction"].KEYDOWN,step:l["UiStep"].COMPOSE_FLOW_CREATE}}})}f.next=18;break;case 15:f.prev=15;f.t0=f["catch"](7);return f.abrupt("return");case 18:p.info("Opening the composer page to the following draft "+m);t(Object(d["a"])({id:"Pcomposer",routeParams:{draftId:Object(c["b"])(m)}}));case 20:case"end":return f.stop()}},e,null,[[7,15]])}));return function(t,a){return e.apply(this,arguments)}}());A.meta={name:"openComposerPage",key:"actionsOpenComposerPageOpenComposerPage",description:"Opens the composer page"};A.propTypes={draftId:i["default"].string,fromKeyboardShortcut:i["default"].bool}},,,,,,function(e,t,a){"use strict";var r=a(18);var n=a(1188);var i=a(193);var s=a(114);var o=a(1202);var l=3;var c=Object(r["b"])("Reset people search UI",function(e,t){var a=t();var r=a.searchUi.sharedTeams.teamIds;e(Object(s["e"])());r&&Array.isArray(r)&&r.length&&e(Object(o["setPeopleSearchOrgFilterSuggestions"])({teamIds:r.slice(0,l)}))});c.meta={name:"resetPeopleSearchUi",key:"actionsUniversalSearchResetPeopleSearchUiResetPeopleSearchUi",description:"Reset people search UI"};var u=c;var d=a(1281);var p=a(826);var m=a(293);var h=a(227);var v=a(2380);var f=a(441);var b=Object(r["b"])("Clear the search input, resetting the editable query and ending the search and query sessions",function(e,t){var a=t();e(Object(n["a"])({textyString:"",fetchAutocompleteSuggestions:true}));e(Object(d["a"])({interfaceMode:p["a"].EDIT}));e(Object(h["resetEditableRequest"])());e(Object(s["m"])());e(Object(v["a"])());e(Object(s["c"])());e(Object(m["resetSearchAutocomplete"])());e(u());if(!Object(i["v"])(a)){e(Object(f["endSearchSession"])());var r=Object(i["t"])(a);if(r){clearTimeout(r);e(Object(s["J"])({sessionTimeoutId:null}))}}});b.meta={name:"clearSearchInput",key:"actionsUniversalSearchClearSearchInputClearSearchInput",description:"Clear the search input, resetting the editable query and ending the search and query sessions"};b.propTypes=null;var g=t["a"]=b},,,function(e,t,a){"use strict";var r=a(88);var n=a.n(r);var i=a(110);var s=a.n(i);var o=a(169);var l=a.n(o);var c=a(138);var u=a.n(c);var d=a(147);var p=a.n(d);var m=a(135);var h=a.n(m);var v=a(185);var f=a.n(v);var b=a(2);var g=a(1);var _=a.n(g);var y=a(12);var O=a(13);var k=a.n(O);var E=a(0);var C=a(33);var S=a(414);var w=a(6);var j=a(24);var I=a(23);var T=a(488);var A=a(919);var N=a(90);var P=a(3531);function M(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function D(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?M(Object(a),true).forEach(function(t){n()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):M(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var x=new w["b"]("files");var R={fileName:"",fileCount:0,percentComplete:0,status:S["UPLOADING"],cancelable:false,cancelUpload:b["noop"],isRetry:false,teamId:void 0,isIAP1Enabled:false};var F=function(e){f()(t,e);h()(t,null,[{key:"renderComplete",value:function e(){var t=x.t("Processing uploaded file\u2026 complete!");return _.a.createElement("div",{className:"p-file_upload_banner__progress p-file_upload_banner__progress--complete"},_.a.createElement("div",{className:"p-file_upload_banner__text"},t))}}]);function t(e){var a;s()(this,t);a=l()(this,u()(t).call(this,e));a.cancel=a.cancel.bind(p()(a));a.clearOverrides=a.clearOverrides.bind(p()(a));a.doneProlongingStatus=a.doneProlongingStatus.bind(p()(a));a.state={statusOverride:null,fileNameOverride:null,timer:null,fading:false};return a}h()(t,[{key:"UNSAFE_componentWillReceiveProps",value:function e(t){var a=this;var r=[S["COMPLETE"],S["CANCELED"]];this.props.status!==t.status&&Object(b["includes"])(r,t.status)&&this.setState(function(){return{statusOverride:t.status,fileNameOverride:t.fileName,timer:setTimeout(a.doneProlongingStatus,1e3)}})}},{key:"componentWillUnmount",value:function e(){this.state.timer&&clearTimeout(this.state.timer)}},{key:"getFileName",value:function e(){var t=this.props.fileName;var a=this.state.fileNameOverride;return a||t}},{key:"getStatus",value:function e(){var t=this.props.status;var a=this.state.statusOverride;return a||t}},{key:"cancel",value:function e(){var t=this.props.teamId;var a=this.props.cancelUpload;var r=Object(A["a"])(t);a=r.cancelCurrentUpload.bind(r);setTimeout(function(){a()},1)}},{key:"clearOverrides",value:function e(){this.setState(function(){return{statusOverride:null,fileNameOverride:null,timer:null,fading:false}})}},{key:"doneProlongingStatus",value:function e(){var t=this;this.props.status===S["IDLE"]?this.setState(function(){return{fading:true,timer:setTimeout(t.clearOverrides,250)}}):this.clearOverrides()}},{key:"renderCanceled",value:function e(){var t=this.props.fileCount;var a=this.getFileName();var r=x.t("Canceling {fileName}\u2026",{fileName:Object(w["q"])(a)});t>1&&(r=x.t("Canceling upload\u2026"));return _.a.createElement("div",{className:"p-file_upload_banner__progress p-file_upload_banner__progress--canceled"},_.a.createElement("div",{className:"p-file_upload_banner__text"},r))}},{key:"renderMultiFileUploadComplete",value:function e(){var t=this.props.fileCount;var a=x.t("Processing uploaded {fileCount, plural, =1 {file} other {files}}\u2026 complete!",{fileCount:t});return _.a.createElement("div",{className:"p-file_upload_banner__progress p-file_upload_banner__progress--complete"},_.a.createElement("div",{className:"p-file_upload_banner__text"},a))}},{key:"renderUploading",value:function e(){var t=this.props,a=t.fileName,r=t.fileCount,n=t.percentComplete,i=t.cancelable,s=t.isRetry,o=t.isIAP1Enabled;var l=this.getStatus();var c=l===S["PROCESSING"]||n>=99;var u;if(c)u=x.t("Processing uploaded {fileCount, plural, =1 {file} other {files}}\u2026",{fileCount:r});else{if(s){u=x.t("Re-uploading {fileName}",{fileName:Object(w["q"])(a)});r>1&&(u=x.t("Re-uploading {fileCount} files",{fileCount:r}))}else{u=x.t("Uploading {fileName}",{fileName:Object(w["q"])(a)});r>1&&(u=x.t("Uploading {fileCount} files",{fileCount:r}))}u+="\u2026 "+n+"%"}var d=k()("p-file_upload_banner__progress_inner",{"p-file_upload_banner__progress_inner--animated":c});var p={width:n+"%"};var m=null;i&&!c&&(m=_.a.createElement(j["c"],{key:"cancel",className:"p-file_upload_banner__cancel",onClick:this.cancel},o?_.a.createElement(I["b"],{type:"times"}):x.t("cancel")));return[_.a.createElement("div",{key:"bar",className:"p-file_upload_banner__progress"},_.a.createElement("span",{className:d,style:p})),_.a.createElement("div",{key:"text",className:"p-file_upload_banner__text"},u),m]}},{key:"render",value:function e(){var t=this.getStatus();var a=this.state.fading;if(t===S["IDLE"])return null;var r;r=t===S["UPLOADING"]||t===S["PROCESSING"]?this.renderUploading():t===S["COMPLETE"]?this.renderMultiFileUploadComplete():this.renderCanceled();var n=k()("p-file_upload_banner p-message_pane__banner",{"p-file_upload_banner--fading":a});return _.a.createElement("div",{className:n},r)}}]);return t}(g["PureComponent"]);F.displayName="FileUploadBanner";F.defaultProps=R;function L(e){var t=Object(S["getFileUploadState"])(e);var a=Object(C["d"])(e);return D({},t,{teamId:a.id,cancelUpload:T["a"],isIAP1Enabled:Object(N["e"])(e)})}var U=Object(y["connect"])(L)(F);var B=t["a"]=U},function(e,t,a){"use strict";var r=a(1);var n=a.n(r);var i=a(896);var s=n.a.createContext(new i["a"]);var o=a(1164);a.d(t,"a",function(){return l});function l(){var e=Object(r["useContext"])(s);var t=Object(o["a"])();e&&e.teamId||t.warn("USE_CLOGGER","Missing team-based clogger");return e}},,,,,,,function(e,t,a){"use strict";a.d(t,"a",function(){return u});var r=a(1);var n=a.n(r);var i=a(0);var s=a(41);var o=a(2706);var l=a(3554);var c=a.n(l);function u(e){var t=e.msg;if(!Object(s["isThreadBroadcast"])(t))return null;return n.a.createElement(o["a"],{className:"c-message_kit__broadcast_footer",ts:t.ts,threadTs:t.thread_ts,channelId:t.channel})}u.displayName="BroadcastFooter"},function(e,t,a){"use strict";var r=a(110);var n=a.n(r);var i=a(135);var s=a.n(i);var o=a(169);var l=a.n(o);var c=a(138);var u=a.n(c);var d=a(147);var p=a.n(d);var m=a(185);var h=a.n(m);var v=a(1);var f=a.n(v);var b=a(12);var g=a(0);var _=a(13);var y=a.n(_);var O=a(2708);var k=a(580);var E=a(41);var C=a(6);var S=a(152);var w=a(3781);var j=a.n(w);var I=new C["b"]("message");var T={className:void 0,children:void 0};var A=function(e){h()(t,e);function t(e){var a;n()(this,t);a=l()(this,u()(t).call(this,e));a.resend=a.resend.bind(p()(a));a.cancel=a.cancel.bind(p()(a));return a}s()(t,[{key:"getText",value:function e(){var t=this.props.msg.isEKMError;if(t)return I.t("Your message couldn\u2019t be sent because your admins have disabled sending messages to this channel.");return I.t("Slack couldn\u2019t send this message")}},{key:"cancel",value:function e(){var t=this.props.msg;var a=t.ts,r=t.channel;this.props.removeMessageAndTimestamp({channelId:r,ts:a})}},{key:"resend",value:function e(){var t=this.props.msg;var a=t.ts,r=t.channel;this.props.resendMessage(r,a)}},{key:"renderFooter",value:function e(){var t=this.props.msg,a=t.showResend,r=t.showCancel,n=t.isEKMError;if(!a&&!r)return null;var i=a&&f.a.createElement(S["a"],{className:"c-message_kit__resend__resend",onClick:this.resend},I.t("Try again"));var s=r&&f.a.createElement(S["a"],{className:"c-message_kit__resend__cancel",onClick:this.cancel},n?I.t("Clear"):I.t("Cancel"));var o=i&&s&&f.a.createElement("span",{className:"c-message_kit__resend__separator"},"\xa0|\xa0");return f.a.createElement("div",{className:"c-message_kit__resend__footer"},f.a.createElement("div",{className:"c-message_kit__resend__footer__border"}),f.a.createElement("div",null,this.getText(),"\u2002",i,o,s))}},{key:"render",value:function e(){var t=this.props.msg,a=t.showResend,r=t.showCancel;var n=Object(E["isUnprocessedMsg"])(this.props.msg);if(!a&&!r&&!n)return this.props.children;var i=y()("c-message_kit__resend",this.props.className,{"c-message_kit__resend--with_buttons":a||r,"c-message_kit__resend--unprocessed":n});return f.a.createElement("div",{className:i},this.props.children,this.renderFooter())}}]);return t}(v["PureComponent"]);A.displayName="MessageResend";A.defaultProps=T;var N={resendMessage:function e(){return O["a"].apply(void 0,arguments)},removeMessageAndTimestamp:function e(){return k["a"].apply(void 0,arguments)}};t["a"]=Object(b["connect"])(null,N)(A)},function(e,t,a){"use strict";var r=a(88);var n=a.n(r);var i=a(110);var s=a.n(i);var o=a(135);var l=a.n(o);var c=a(169);var u=a.n(c);var d=a(138);var p=a.n(d);var m=a(147);var h=a.n(m);var v=a(185);var f=a.n(v);var b=a(1);var g=a.n(b);var _=a(13);var y=a.n(_);var O=a(0);var k=a(2);var E=a.n(k);var C=a(30);var S=a(356);var w=a(486);var j=a(6);var I=a(3677);var T=a.n(I);function A(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function N(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?A(Object(a),true).forEach(function(t){n()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):A(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var P=new j["b"]("search");var M={onOptionChange:k["noop"],onOptionAdd:k["noop"],renderVisibleOption:void 0,renderOption:void 0,filterOptions:function e(t,a){return a},showMoreOptions:true};var D={};var x=function(e){f()(t,e);function t(e){var a;s()(this,t);a=u()(this,p()(t).call(this,e));a.initialState={isSelectVisible:false,isLoading:false,emptyMessage:D,activeRowIndex:null,filterQuery:"",options:[],selectId:"search-multi-select-filter-"+e.checkboxName,isExpanded:false,isInvalid:false,isDisabled:false};a.state=a.initialState;Object(C["a"])(h()(a),["onShowSelectClick","setSelectState","renderOption","emptyStateMessage"]);a.loadOptionsPromise=null;a.inputRef=g.a.createRef();return a}l()(t,[{key:"componentDidMount",value:function e(){this.reloadOptions("")}},{key:"componentWillUnmount",value:function e(){this.loadOptionsPromise&&this.loadOptionsPromise.cancel()}},{key:"onShowSelectClick",value:function e(){var t=this;this.setState(function(){return{isSelectVisible:true}},function(){t.inputRef.current.focus()})}},{key:"setSelectState",value:function e(t,a){var r=this;var n=false;this.setState(function(e){var a=t();var i=a.activeRowIndex,s=void 0===i?e.activeRowIndex:i,o=a.filterQuery,l=void 0===o?e.filterQuery:o,c=a.isExpanded,u=void 0===c?e.isExpanded:c,d=a.isInvalid,p=void 0===d?e.isInvalid:d,m=a.isDisabled,h=void 0===m?e.isDisabled:m,v=a.options,f=void 0===v?e.options:v,b=a.selectId,g=void 0===b?e.selectId:b;void 0!==l&&l!==e.filterQuery&&(n=true);var _=Object(k["unionBy"])(f,e.options,"value").length;_===f.length&&_===e.options.length||(n=true);return{activeRowIndex:s,filterQuery:l,isExpanded:u,isInvalid:p,isDisabled:h,options:r.props.filterOptions(l,f),selectId:g}},function(){n&&r.reloadOptions(r.state.filterQuery);a&&a()})}},{key:"emptyStateMessage",value:function e(){return this.state.emptyMessage===D?P.t("Nothing found",{fallbackHash:"f4e12416c6b8d6a75b8a34fc79a221e1a43d1120",fallbackHashNs:"select"}):this.state.emptyMessage}},{key:"refilterOptions",value:function e(){var t=this;this.setState(function(e){return{options:t.props.filterOptions(e.filterQuery,e.options)}})}},{key:"reloadOptions",value:function e(t){var a=this;this.loadOptionsPromise&&this.loadOptionsPromise.cancel();this.setState(function(){return{isLoading:true}});this.loadOptionsPromise=this.props.loadOptions(t).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,r=e.emptyMessage,n=void 0===r?D:r;a.setState(function(e){return{options:a.props.filterOptions(e.filterQuery,t),emptyMessage:n}})}).catch(k["noop"]).finally(function(){a.loadOptionsPromise.isCancelled()||a.setState(function(){return{isLoading:false}})})}},{key:"renderOption",value:function e(t,a){var r=a.isActive,n=a.isSelected;return g.a.createElement("div",{className:y()("p-search_filter__option p-search_filter__option--suggestion",{"p-search_filter__option--active":r,"p-search_filter__option--selected":n})},this.props.renderOption?this.props.renderOption(t,a):g.a.createElement("span",{className:"p-search_filter__option_label"},t.label))}},{key:"render",value:function e(){var t=this;var a=this.props,r=a.checkboxName,n=a.visibleOptions,i=a.placeholderText,s=a.onOptionChange,o=a.onOptionAdd,l=a.renderVisibleOption,c=a.showMoreOptions,u=a.showMoreOptionsAriaLabel,d=a.namespace;var p=this.state.isSelectVisible;var m=0===n.length;return g.a.createElement("div",null,n.map(function(e){var a=d+"-search-filter-"+r+"-"+e.value;return g.a.createElement("label",{key:e.value,htmlFor:a,className:y()("p-search_filter__visible_option",{"p-search_filter__visible_option--selected":e.checked}),"data-qa":"search_filter_suggestion"},g.a.createElement("span",{className:"p-search_filter__visible_checkbox"},g.a.createElement("input",{id:a,type:"checkbox",name:r,value:e.value,checked:e.checked,onChange:function a(r){s(e,r.target.checked);t.refilterOptions()}})),l?l(e):g.a.createElement("span",{className:"p-search_filter__option_label"},e.label))}),c&&(p?g.a.createElement("div",{className:"p-search_filter__select p-search_filter__select--separated"},g.a.createElement(S["b"],{width:"100%",inputRef:this.inputRef,selectId:"search-multi-select-filter-"+r,placeholderText:i,emptyStateMessage:this.emptyStateMessage,options:this.state.options,isLoading:this.state.isLoading,setSelectState:this.setSelectState,isExpanded:!!this.state.emptyMessage&&this.state.isExpanded,selectState:{activeRowIndex:this.state.activeRowIndex,filterQuery:this.state.filterQuery,options:this.state.options,selectId:this.state.selectId,isExpanded:!!this.state.emptyMessage&&this.state.isExpanded,isInvalid:this.state.isInvalid,isDisabled:this.state.isDisabled},onOptionSelected:function e(){t.setState(function(e){return N({},t.initialState,{options:e.options})});o.apply(void 0,arguments)},renderOption:this.renderOption})):g.a.createElement(w["a"],{className:y()("p-search_filter__more_link",{"p-search_filter__empty_more_link":m}),"data-qa":"search_filter_multi_select__more_link",onClick:this.onShowSelectClick,"aria-label":u,"aria-expanded":"false"},P.t("More\u2026"))))}}]);return t}(b["Component"]);x.displayName="SearchFilterMultiSelect";x.defaultProps=M;t["a"]=x},,function(e,t,a){"use strict";var r=a(0);var n=a(12);var i=a(150);var s={children:r["default"].node,isOnline:r["default"].bool};var o={children:null,isOnline:null};var l=function e(t){var a=t.isOnline,r=t.children;return a?r:null};l.propTypes=s;l.defaultProps=o;var c=function e(t){return{isOnline:Object(i["c"])(t)}};var u=Object(n["connect"])(c)(l);var d={children:r["default"].node,isOnline:r["default"].bool};var p={children:null,isOnline:null};var m=function e(t){var a=t.isOnline,r=t.children;return a?null:r};m.propTypes=d;m.defaultProps=p;var h=function e(t){return{isOnline:Object(i["c"])(t)}};var v=Object(n["connect"])(h)(m);var f=a(1631);a.d(t,"b",function(){return u});a.d(t,"a",function(){return v})},,,,,,,function(e,t,a){"use strict";a.d(t,"b",function(){return N});a.d(t,"a",function(){return P});var r=a(218);var n=a.n(r);var i=a(88);var s=a.n(i);var o=a(2);var l=a.n(o);var c=a(0);var u=a(18);var d=a(16);var p=a(919);var m=a(555);var h=a(187);var v=a(929);var f=a(1986);var b=a(1616);var g=a(1406);var _=a(21);var y=a(1944);var O=a(317);var k=a(176);var E=a(1615);var C=a(129);var S=a(82);function w(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function j(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?w(Object(a),true).forEach(function(t){s()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):w(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var I="DRAFT-FILES";var T=Object(u["b"])("Deletes a draft file",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.persistedFileId;if(!r)return;var n=Object(d["a"])({getState:t,label:I});n.info("Deleting a draft file "+r);e(Object(O["c"])({fileId:r,reason:"delete_draft_file"}))});T.meta={name:"deleteDraftFile",key:"draftsStoreThunksRemoveDraftFileDeleteDraftFile",description:"Deletes a draft file"};T.propTypes={persistedFileId:c["default"].string.isRequired};var A=Object(u["b"])("Cancels a draft file upload",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.pendingFileId;if(!r)return;var n=Object(d["a"])({getState:t,label:I});n.info("Cancelling a draft file upload "+r);var i=Object(_["b"])(t());var s=Object(p["a"])(i);s.cancelEagerUpload({pendingFileId:r})});A.meta={name:"cancelDraftFileUpload",key:"draftsStoreThunksRemoveDraftFileCancelDraftFileUpload",description:"Cancels a draft file upload"};A.propTypes={pendingFileId:c["default"].string.isRequired};var N=Object(u["b"])("Removes individual files from a draft",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.draftId,n=a.pendingFileId,i=a.persistedFileId,s=a.shouldUpdateDraft,l=void 0===s||s;if(!r||!n&&!i)return;var c=t();if(i){var u=Object(h["d"])(c,r);var d=Object(k["i"])(u);l&&e(Object(m["g"])(j({},u,{files:Object(o["without"])(d,i)})));var p=Object(C["getFileById"])(c,i);Object(S["isShared"])(p)||e(T({persistedFileId:i}))}else e(A({pendingFileId:n}));if(n){e(Object(v["c"])({pendingFileId:n}));e(Object(b["c"])({draftId:r,pendingFileId:n}))}});N.meta={name:"removeDraftFile",key:"draftsStoreThunksRemoveDraftFileRemoveDraftFile",description:"Removes individual files from a draft"};N.propTypes={draftId:c["default"].string.isRequired,pendingFileId:c["default"].string,persistedFileId:c["default"].string};var P=Object(u["b"])("Removes individual files from a draft",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.draft;if(!r)return;var i=Object(k["o"])(t(),r);if(!i)return;var s=Object(k["d"])(r);var l=Object(k["i"])(r);var c=Object(g["a"])(t(),{draftId:s})||[];var u=n()(c).reverse().map(function(a){var r=Object(f["a"])(t(),{pendingFileId:a});var n=Object(E["c"])(r);e(Object(y["b"])({fileId:n}));e(N({draftId:s,pendingFileId:a,persistedFileId:n,shouldUpdateDraft:false}));return n}).filter(function(e){return!!e});var d=Object(o["difference"])(l,u);d.forEach(function(t){e(T({persistedFileId:t}));e(Object(y["b"])({fileId:t}))})});P.meta={name:"removeAllDraftFiles",key:"draftsStoreThunksRemoveDraftFileRemoveAllDraftFiles",description:"Removes individual files from a draft"};P.propTypes={draft:c["default"].object.isRequired};var M={deleteDraftFile:T,cancelDraftFileUpload:A}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){e.exports={}},function(e,t,a){var r=a(553),n=a(592);var i="[object Symbol]";function s(e){return"symbol"==typeof e||n(e)&&r(e)==i}e.exports=s},function(e,t,a){var r=a(3211),n=a(1023),i=a(3212),s=a(3213),o=a(2431),l=a(553),c=a(1055);var u="[object Map]",d="[object Object]",p="[object Promise]",m="[object Set]",h="[object WeakMap]";var v="[object DataView]";var f=c(r),b=c(n),g=c(i),_=c(s),y=c(o);var O=l;(r&&O(new r(new ArrayBuffer(1)))!=v||n&&O(new n)!=u||i&&O(i.resolve())!=p||s&&O(new s)!=m||o&&O(new o)!=h)&&(O=function(e){var t=l(e),a=t==d?e.constructor:void 0,r=a?c(a):"";if(r)switch(r){case f:return v;case b:return u;case g:return p;case _:return m;case y:return h}return t});e.exports=O},function(e,t,a){var r=a(1784);var n=1/0;function i(e){if("string"==typeof e||r(e))return e;var t=e+"";return"0"==t&&1/e==-n?"-0":t}e.exports=i},function(e,t,a){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.r(t);var r=a(52);var n=a(90);Object(r["a"])("interop.ia",{isIAPhase1Enabled:function e(){var t=TS.redux.getState();return Object(n["e"])(t)}})},,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";var r=a(0);var n=a(12);var i=a(40);var s=a.n(i);var o=a(6);var l=a(295);var c=a(1028);var u=new o["b"]("enterprise_dashboard");var d={getRelativeTimestamp:r["default"].func.isRequired};function p(e){var t=e.timestamp,a=e.getRelativeTimestamp;if("number"!==typeof t||t<1)return u.t("Never");var r=s()();var n=s.a.unix(t);var i=r.diff(n,"h");if(i>23)return Object(l["a"])(n,"{date} at {time}");var o=r.diff(n,"m");var c;c=0===o?u.t("a few seconds ago"):o>59?u.t("{hours, plural, =1 {1 hour} other {# hours}} ago",{hours:i}):u.t("{minutes, plural, =1 {1 minute} other {# minutes}} ago",{minutes:o});return a(t)+" ("+c+")"}p.propTypes=d;var m=function e(t){return{getRelativeTimestamp:function e(a){return 0===a?"":Object(c["a"])(t,a,{uncapitalized:false})}}};t["a"]=Object(n["connect"])(m)(p)},function(e,t,a){"use strict";var r=a(0);var n=a(1);var i=a.n(n);var s=a(109);var o=a(13);var l=a.n(o);var c=a(1787);var u=a.n(c);var d={children:null,className:null,ariaLabel:null};var p=function e(t){var a=t.className,r=t.children,n=t.ariaLabel;return i.a.createElement("div",{className:l()("c-message_actions__container",a),role:"group","aria-label":n},r)};p.displayName="MessageActionContainer";p.defaultProps=d;t["a"]=Object(s["pure"])(p)},,,,,,,function(e,t,a){"use strict";var r=a(110);var n=a.n(r);var i=a(135);var s=a.n(i);var o=a(169);var l=a.n(o);var c=a(138);var u=a.n(c);var d=a(147);var p=a.n(d);var m=a(185);var h=a.n(m);var v=a(0);var f=a(1);var b=a.n(f);var g=a(13);var _=a.n(g);var y=a(2);var O=a(1871);var k=a(6);var E=a(518);var C=a(256);var S=a(2333);var w=new k["b"]("workspace_directory");var j={large:"large",small:"small"};var I={large:64,small:48};var T={size:j.large,className:"",onActionResolve:y["noop"],onActionReject:y["noop"],anchorPage:"",openDialog:y["noop"],doLaunchInNewTab:false,isFromSharedChannelInvite:false};var A=function(e){h()(t,e);function t(e){var a;n()(this,t);a=l()(this,u()(t).call(this,e));a.onCardClick=a.onCardClick.bind(p()(a));a.onKeyPress=a.onKeyPress.bind(p()(a));a.onResize=a.onResize.bind(p()(a));a.openDialog=a.openDialog.bind(p()(a));a.state={isMobileView:false};return a}s()(t,[{key:"componentDidMount",value:function e(){this.setIsMobileView(Object(C["c"])());window.addEventListener("resize",this.onResize)}},{key:"componentWillUnmount",value:function e(){window.removeEventListener("resize",this.onResize)}},{key:"onCardClick",value:function e(t){t.stopPropagation();t.preventDefault();this.isSmallVariationCard()&&this.openDialog()}},{key:"onKeyPress",value:function e(t,a){t.preventDefault();if("Enter"===t.key)switch(a){case"openDialog":if(this.isSmallVariationCard())return this.openDialog();break;default:}return null}},{key:"onResize",value:function e(){this.setIsMobileView(Object(C["c"])())}},{key:"setIsMobileView",value:function e(t){this.setState(function(){return{isMobileView:t}})}},{key:"isLargeVariationCard",value:function e(){return this.props.size===j.large}},{key:"isSmallVariationCard",value:function e(){return this.props.size===j.small}},{key:"openDialog",value:function e(){var t=this.props,a=t.team,e=t.openDialog;e({team:a})}},{key:"renderAvatar",value:function e(){var t=this.props.team;var a=this.isLargeVariationCard()&&!this.state.isMobileView?I[j.large]:I[j.small];return b.a.createElement("div",{className:"display_flex"},b.a.createElement(E["a"],{entityType:"workspace",customClasses:this.isSmallVariationCard()?"cursor_pointer":"",dimension:a,entityData:t,featureReactMessages:true}))}},{key:"renderButton",value:function e(){var t=this.props,a=t.team,r=t.size,n=t.onActionReject,i=t.onActionResolve,s=t.anchorPage,o=t.doLaunchInNewTab,l=t.isFromSharedChannelInvite;var c=this.isLargeVariationCard()?"large":"medium";return b.a.createElement(O["a"],{team:a,buttonContext:r+"Card",customClasses:"p-workspace_directory_card__button",onDefaultButtonClick:this.openDialog,onActionReject:n,onActionResolve:i,anchorPage:s,doLaunchInNewTab:o,size:c,preventAppLaunch:l})}},{key:"renderWorkspaceDescription",value:function e(){var t=this.props.team.description;return b.a.createElement("div",{className:"p-workspace_directory_card__description","data-qa-ws-directory-card-description":true},t)}},{key:"renderWorkspaceName",value:function e(){var t=this.props.team.name;return b.a.createElement("span",{className:"p-workspace_directory_card__title","data-qa-ws-directory-card-title":true,title:t},t)}},{key:"renderWorkspaceStatus",value:function e(){var t=this.props.team;if(this.isSmallVariationCard())return null;var a=Object(C["f"])(t,{context:"largeCard"});if(!a)return null;return b.a.createElement("div",{className:"p-workspace_directory_card__status"},a)}},{key:"renderWorkspaceSubtitle",value:function e(){var t=this.props.team;var a=this.state.isMobileView;var r=t.date_requested_join,n=t.discoverable,i=t.domain,s=t.user_counts;s=void 0===s?{}:s;var o=s.active_members,l=void 0===o?0:o;var c=w.t("{activeMembers} active members",{activeMembers:l?Object(k["n"])(l):0});var u;u=this.isLargeVariationCard()&&!a?b.a.createElement("div",null,b.a.createElement("span",{className:"border_right padding_right_50 margin_right_50 float_left"},c),b.a.createElement("span",{className:"overflow_ellipsis"},i+".slack.com")):this.isSmallVariationCard()&&"closed"===n&&r?b.a.createElement("span",null,w.t("Awaiting admin approval")):b.a.createElement("span",{className:"overflow_ellipsis"},c);return b.a.createElement("div",{className:"p-workspace_directory_card__subtitle","data-qa-ws-directory-card-subtitle":true},u)}},{key:"render",value:function e(){var t=this.props,a=t.size,r=t.className;var n=this.props.team.id;var i=_()("p-workspace_directory_card",r,{"p-workspace_directory_card--large":this.isLargeVariationCard(),"p-workspace_directory_card--small":this.isSmallVariationCard()});return b.a.createElement("div",{className:i,onClick:this.onCardClick,"data-workspace-id":n,"data-qa-ws-directory-card":true,"data-qa-ws-directory-card-size":a,role:"presentation"},b.a.createElement("div",{className:"display_flex flex_direction_column"},b.a.createElement("div",{className:"display_flex align_self_start full_width"},this.renderAvatar(),b.a.createElement("div",{className:"p-workspace_directory_card__heading nudge_top_1"},this.renderWorkspaceName(),this.renderWorkspaceSubtitle())),this.renderWorkspaceStatus(),this.renderWorkspaceDescription()),this.renderButton())}}]);return t}(f["Component"]);A.displayName="WorkspaceDirectoryCard";A.defaultProps=T;var N={};var P=A;var M=t["a"]=P},,,,,function(e,t,a){},function(e,t,a){"use strict";var r=a(196);var n=a.n(r);var i=a(245);var s=a.n(i);var o=a(88);var l=a.n(o);var c=a(110);var u=a.n(c);var d=a(135);var p=a.n(d);var m=a(169);var h=a.n(m);var v=a(138);var f=a.n(v);var b=a(147);var g=a.n(b);var _=a(185);var y=a.n(_);var O=a(0);var k=a(1);var E=a.n(k);var C=a(12);var S=a(2);var w=a(232);var j=a(1024);var I=a(487);var T=a(11);var A=a(25);var N=a(24);var P=a(23);var M=a(6);var D=a(34);var x=a(256);function R(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function F(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?R(Object(a),true).forEach(function(t){l()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):R(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var L=new M["b"]("workspace_directory");var U={launch:"launch",join:"join",request:"request",request_sent:"request_sent",default:"default"};var B={buttonContext:"largeCard",customClasses:"",onWorkspaceLaunch:S["noop"],onDefaultButtonClick:S["noop"],doLaunchInNewTab:false,displayDirectoryInModal:false,callJoinWorkspace:S["noop"],callRequestToJoinWorkspace:S["noop"],size:"large",onActionReject:S["noop"],onActionResolve:S["noop"],anchorPage:void 0,doUpsertJoin:false,preventAppLaunch:false};var q=function e(t){var a=t.displayDirectoryInModal,r=t.preventAppLaunch;var n="primary";var i="join";var s;s=r?L.t("Join and Continue",{fallbackHash:"e6533ebcba1f476e42b0bc2d0890470600735435"}):a?L.t("Join and Open"):L.t("Join and Launch Slack");return{text:s,type:n,"data-qa-ws-directory-button-type":n,"data-qa-ws-directory-button-text":i,"data-qa":i}};var G=function e(){var t="primary";var a="request_to_join";return{text:L.t("Request to Join"),type:t,"data-qa-ws-directory-button-type":t,"data-qa-ws-directory-button-text":a,"data-qa":a}};var H=function e(){var t="primary";var a="request_sent";return{text:L.t("Request Sent"),type:t,"data-qa-ws-directory-button-type":t,"data-qa-ws-directory-button-text":a,"data-qa":a,disabled:true}};var W=function e(t){var a=t.displayDirectoryInModal,r=t.preventAppLaunch;var n="primary";var i="launch";var s;s=r?L.t("Continue",{fallbackHash:"cf9b77061f7b3126b49d50a6fa68f7ca8c26b7a3"}):a?L.t("Open"):L.t("Launch in Slack");return{text:s,type:n,"data-qa-ws-directory-button-type":n,"data-qa-ws-directory-button-text":i,"data-qa":i}};var V=function e(){var t="outline";var a="default";return{type:t,text:L.t("View Details",{fallbackHash:"6319b15f86fee6c8e5aa4846437f377ec352787c"}),"data-qa-ws-directory-button-type":t,"data-qa-ws-directory-button-text":a,"data-qa":a}};var K=function(e){y()(t,e);function t(e){var a;u()(this,t);a=h()(this,f()(t).call(this,e));a.state={loading:false};a.buttonType=null;a.onClick=a.onClick.bind(g()(a));a.onKeyPress=a.onKeyPress.bind(g()(a));return a}p()(t,[{key:"onClick",value:function e(t){t.stopPropagation();t.preventDefault();this.handleButtonAction()}},{key:"onKeyPress",value:function e(t){t.stopPropagation();t.preventDefault();13===t.which&&this.handleButtonAction()}},{key:"onWorkspaceJoin",value:function e(){var t=this;var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=a.windowOpener;var n=this.props,i=n.team,s=n.onActionReject,o=n.onActionResolve,l=n.anchorPage,c=n.doUpsertJoin;Object(D["a"])()&&Object(j["d"])(false);return this.props.callJoinWorkspace({teamId:i.id,anchorPage:l,doUpsertJoin:c}).then(function(){var e={};c&&(e.workspace=F({},i,{is_member:true}));o(e);Object(D["a"])()&&!Object(I["b"])()&&Object(j["d"])(true)}).then(function(){return t.props.onWorkspaceLaunch(r)}).catch(function(e){Object(D["a"])()&&Object(j["d"])(true);if(r){t.setLoading(false);r.close()}s({node:E.a.createElement("span",null,L.rt("Workspace couldn\u2019t be joined. Please reload and try again.")),err:e})})}},{key:"onWorkspaceRequestToJoin",value:function e(){var t=this;var a=this.props,r=a.team,n=a.onActionReject,i=a.onActionResolve,s=a.anchorPage;return this.props.callRequestToJoinWorkspace({teamId:r.id,anchorPage:s}).then(function(){i({node:E.a.createElement("div",{className:"display_flex"},E.a.createElement(P["b"],{type:"check-circle-o",className:"margin_right_50 sk_lilypad_green"}),E.a.createElement("span",null,L.rt("<strong>Request sent!</strong> You\u2019ll be notified by email when a Workspace Admin grants access."))),workspace:F({},r,{date_requested_join:String(Math.floor(Date.now()))})})}).then(function(){t.setLoading(false)}).catch(function(e){n({node:E.a.createElement("span",null,L.rt("Your request couldn\u2019t be sent. Please reload and try again.")),err:e})})}},{key:"getButtonProps",value:function e(t){var a=this.props,r=a.displayDirectoryInModal,n=a.preventAppLaunch;switch(t){case U.launch:return W({displayDirectoryInModal:r,preventAppLaunch:n});case U.request:return G();case U.join:return q({displayDirectoryInModal:r,preventAppLaunch:n});case U.request_sent:return H();case U.default:return V();default:return null}}},{key:"setLoading",value:function e(t){this.setState(function(){return{loading:t}})}},{key:"handleButtonAction",value:function e(){var t=this.props.doLaunchInNewTab;if("default"===this.buttonType)return this.props.onDefaultButtonClick();this.setLoading(true);if("join"===this.buttonType){if(t){var a=window.open("","_blank");return this.onWorkspaceJoin({windowOpener:a})}return this.onWorkspaceJoin()}if("request"===this.buttonType)return this.onWorkspaceRequestToJoin();if("launch"===this.buttonType){this.props.onWorkspaceLaunch();t&&this.setLoading(false)}return null}},{key:"render",value:function e(){var t=this.props,a=t.team,r=t.buttonContext,i=t.customClasses,o=t.size;var l=this.state.loading;var c=J(a,{context:r});this.buttonType=c;var u=this.getButtonProps(c);if(!c||Object(S["isEmpty"])(u))return null;var d=a.id;var p=u.text,m=s()(u,["text"]);var h=m.disabled||l;return E.a.createElement(N["b"],n()({},m,{className:i,onClick:this.onClick,onKeyPress:this.onKeyPress,"data-workspace-id":d,"data-qa-ws-directory-button":true,loading:l,disabled:h,size:o}),p)}}]);return t}(k["Component"]);K.displayName="WorkspaceDirectoryButton";K.defaultProps=B;var z=function e(t,a){var r=a.team,n=a.onActionResolve,i=a.anchorPage,s=a.doLaunchInNewTab,o=a.channelRedirect,l=a.postLaunchAction,c=a.userIdFromURL;var u=Object(A["b"])(t);return{displayDirectoryInModal:Object(T["isClientApp"])(t),onWorkspaceLaunch:function e(a){return Object(x["i"])(t,{team:r,user:u,onActionResolve:n,anchorPage:i,doLaunchInNewTab:s,windowOpener:a,channelRedirect:o,postLaunchAction:l,userIdFromURL:c})}}};var Q={callJoinWorkspace:w["e"],callRequestToJoinWorkspace:w["g"]};var Y=Object(C["connect"])(z,Q)(K);function J(e,t){var a=t.context,r=void 0===a?x["a"].smallCard:a;var n=e.is_member,i=e.date_requested_join,s=e.is_assigned,o=e.discoverable;if(n)return U.launch;if(r!==x["a"].smallCard){if(s)return U.join;switch(o){case"open":return U.join;case"closed":if(!i)return U.request;if(r===x["a"].largeCard)return U.request_sent;break;case"unlisted":break;default:}return null}return U.default}var X=t["a"]=Y},,,,,,,,,,function(e,t,a){"use strict";var r=a(1);var n=a.n(r);var i=a(12);var s=a(0);var o=a(6);var l=a(17);var c=a(418);var u=a(43);var d=a(1664);var p=a(2);var m=a.n(p);var h=a(345);var v=a(14);var f=a(1268);var b=a(90);var g=a(1415);var _=a(3101);var y=a.n(_);var O=new o["b"]("member_profile");var k={className:void 0,member:void 0,canInteract:true,onClick:p["noop"],onOpenEditProfileModal:p["noop"],onShowMemberProfile:p["noop"],presence:false,clogger:{track:p["noop"]},isIAP1Enabled:false};function E(e){var t=e.className,a=e.member,r=e.canInteract,i=e.onClick,s=e.onOpenEditProfileModal,o=e.onShowMemberProfile,d=e.presence,p=e.clogger,m=e.isIAP1Enabled;var h=r&&!Object(l["isDeleted"])(a);var b=Object(l["getMemberRealName"])(a);var _=n.a.createElement(n.a.Fragment,null,b,h&&n.a.createElement(c["a"],{className:"p-member_profile_name__presence",memberId:a.id}));var y=function e(){o();i()};var k=function e(){s();i();setTimeout(function(){var e=document.getElementById("title-input");e&&e.focus()},150);p.track(v["EventId"].USER_PROFILE_ADD_TITLE_CLICK)};var E=function e(){if(d)return O.t("{name}, {presence}",{name:b,presence:d});return b};var C=Object(l["isSlackbot"])(a)?O.t("Friendly bot, part-time programmer, and Help Center assistant-in-training."):Object(l["getMemberTitle"])(a);var S=function e(){if(Object(g["a"])(C))return n.a.createElement("span",{className:"p-member_profile_name__subtitle"},C);if(Object(l["isSelf"])(a))return n.a.createElement(u["a"],{className:"p-member_profile_field__interactable",onClick:k,"data-qa":"member_title_edit_btn"},O.t("Add a title"));return null};var w=n.a.createElement("div",{className:"p-member_profile_name__title"},o?n.a.createElement(u["a"],{"aria-label":E(),className:"p-member_profile_name__link",onClick:y},_):_);if(m)return n.a.createElement("div",{className:t},n.a.createElement(f["a"],{id:a.id},w),S());return n.a.createElement("div",{className:t},w,S())}E.displayName="MemberProfileName";E.defaultProps=k;var C=function e(t,a){var r=Object(h["getPresenceByMemberId"])(t,a.member.id);return{presence:r,isIAP1Enabled:Object(b["e"])(t)}};var S={onOpenEditProfileModal:function e(){return d["a"].apply(void 0,arguments)}};t["a"]=Object(i["connect"])(C,S)(E)},,,function(e,t,a){"use strict";a.d(t,"b",function(){return c});a.d(t,"a",function(){return u});var r=a(0);var n=a(31);var i=a(29);var s=a(16);var o=a(2);var l=a.n(o);var c=Object(i["a"])("Get Audit Logs",function(e,t,a){var r=a.limit,i=a.action,l=a.actor,c=a.entity,u=a.reason,d=a.cursor,p=a.oldest,m=a.latest;var h=Object(o["omitBy"])({limit:r,action:i,actor:l,entity:c,cursor:d,oldest:p,latest:m},function(e){return Object(o["isUndefined"])(e)||Object(o["isNull"])(e)});return e(Object(n["a"])({method:"audit.logs",args:h,reason:u})).catch(function(e){var a="failed to get audit logs";Object(s["a"])({getState:t}).error("Enterprise",a);throw e})});c.meta={name:"getAuditLogs",key:"fetchersAuditLogsApiGetAuditLogs",description:"Get Audit Logs"};c.propTypes={reason:r["default"].string,limit:r["default"].number};var u=Object(i["a"])("Get Audit Log Actions",function(e,t,a){var r=a.limit,i=void 0===r?999:r,o=a.reason;return e(Object(n["a"])({method:"audit.actions",args:{limit:i},reason:o})).catch(function(e){var a="failed to get audit log actions";Object(s["a"])({getState:t}).error("Enterprise",a);throw e})});u.meta={name:"getAuditLogActions",key:"fetchersAuditLogsApiGetAuditLogActions",description:"Get Audit Log Actions"};u.propTypes={reason:r["default"].string,limit:r["default"].number}},function(e,t,a){"use strict";var r=a(0);var n=a(2);var i=a.n(n);var s=a(18);var o=a(555);var l=a(1427);var c=a(4726);var u=Object(s["b"])("Clear draft and all related data from redux",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.ids;if(Object(n["isEmpty"])(r))return;e(Object(o["a"])({ids:r}));Object(c["a"])(t())&&e(Object(l["f"])({draftIds:r}))});u.meta={name:"clearDrafts",key:"draftsStoreThunksClearDraftsClearDrafts",description:"Clear draft and all related data from redux"};u.propTypes={ids:r["default"].arrayOf(r["default"].string.isRequired).isRequired};t["a"]=u},,,,,,,,,function(e,t,a){},,,,function(e,t,a){"use strict";var r=a(110);var n=a.n(r);var i=a(135);var s=a.n(i);var o=a(169);var l=a.n(o);var c=a(138);var u=a.n(c);var d=a(147);var p=a.n(d);var m=a(185);var h=a.n(m);var v=a(0);var f=a(1);var b=a.n(f);var g=a(2);var _=a(30);var y=a(13);var O=a.n(y);var k=a(196);var E=a.n(k);var C=a(12);var S=a(585);var w=a(1594);var j=a(55);var I=a(226);var T=a(1384);var A=a(421);var N=a(1667);var P=a(1194);var M=a(1310);var D=a(326);var x=a(23);var R=a(134);var F=a(102);var L=a(4793);var U=R["a"].small;var B={className:void 0,"data-qa":void 0,"data-sk":"small_app_action_entity",actionId:void 0,appId:void 0,isDeactivated:false,invert:false};function q(e){var t=e.className,a=e["data-qa"],r=e["data-sk"],n=e.action,i=e.actionId,s=e.app,o=e.appId,l=e.isDeactivated,c=e.invert;var u=c&&!l;var d;var p;var m=Object(j["b"])(n)?Object(w["a"])(n):null;if(Object(j["b"])(s)&&Object(j["b"])(n)){d=Object(S["b"])(s);var h=Object(A["b"])(s,U);p=function e(t){return b.a.createElement(P["a"],E()({},t,{classes:t.className,image:h,ariaHidden:true}))}}else{d=b.a.createElement(N["a"],{type:Object(j["d"])(s)?"unknown":"non-existent",invert:u});p=function e(t){return b.a.createElement(M["a"],E()({},t,{isNonExistent:Object(j["c"])(s),size:U,subtler:l,invert:u}))}}var v=function e(t){return b.a.createElement("span",{className:"c-app_action_entity__avatar_container"},p(t),b.a.createElement(x["b"],{type:"bolt-filled",className:"c-app_action_entity__bolt_icon",size:"inherit"}))};var f=l&&!c?R["c"].dim:null;return b.a.createElement(D["d"],{avatar:v,className:t,"data-action-id":i,"data-app-id":o||(null===s||void 0===s?void 0:s.id),"data-qa":a,"data-sk":r,size:"small",style:f,text:b.a.createElement("span",null,b.a.createElement("span",{className:"c-app_action_entity__app_label","data-qa":"action_entity_app_label"},d),m?b.a.createElement("span",{className:"c-app_action_entity__action_label","data-qa":"action_entity_action_label"},m):null)})}q.displayName="SmallAppActionEntity";q.defaultProps=B;function G(e,t){var a=t.app,r=t.appId,n=t.action,i=t.actionId;var s=a||Object(I["getAppById"])(e,r);var o=(null===s||void 0===s?void 0:s.id)||r;var l=n||Object(T["e"])(e,{appId:o,actionId:i});return{app:s,appId:o,action:l,actionId:i}}var H=Object(C["connect"])(G)(q);var W={id:v["default"].string.isRequired,index:v["default"].number.isRequired,suggestion:v["default"].object.isRequired,isSelected:v["default"].bool.isRequired,onDelete:v["default"].func,onMouseUp:v["default"].func.isRequired,onMouseMove:v["default"].func.isRequired};var V={onDelete:g["noop"]};var K=b.a.forwardRef(function(e,t){var a=e.id,r=e.index,n=e.isSelected,i=e.suggestion,s=e.onMouseUp,o=e.onMouseMove;var l=i.suggestion_replacement,c=i.exact_string,u=i.featureVector;var d=e.suggestion.app_action;return b.a.createElement("li",{ref:t,"data-index":r,"data-type":i.type,"data-replacement":l,"data-exact-string":c,"data-feature-vector":u,"data-is-action":true,"data-id":d.id,id:a,role:"option",tabIndex:"-1","aria-selected":n,onMouseMove:o,onClick:s,className:O()("c-search_autocomplete__suggestion_item",{"c-search_autocomplete__suggestion_item--selected":n})},b.a.createElement(H,{actionId:d.id,appId:d.app_id,className:"c-search_autocomplete__app_action",isActive:n}))});K.defaultProps=V;var z=K;var Q=a(9);var Y=a(17);var J={unreadCount:void 0};var X=function(e){h()(t,e);function t(){n()(this,t);return l()(this,u()(t).apply(this,arguments))}s()(t,[{key:"render",value:function e(){var t=this.props.unreadCount;if(!t)return null;var a=t<10?t:"9+";return b.a.createElement("span",{className:"c-search_autocomplete__unread_count"},a)}}]);return t}(f["PureComponent"]);X.displayName="UnreadCount";function Z(e,t){var a=t.model;var r;r=Object(Y["isMember"])(a)?Object(Y["getImUnreadCountByMember"])(e,a):Object(Q["getBadgeCountWithMuted"])(a);return{unreadCount:r}}X.defaultProps=J;var $=Object(C["connect"])(Z)(X);var ee=a(6);var te=a(1457);var ae=a(564);var re=new ee["b"]("jumper");var ne=b.a.forwardRef(function(e,t){var a=e.id,r=e.index,n=e.isSelected,i=e.suggestion,s=e.onMouseUp,o=e.onMouseMove,l=e.hasChannelNameCollision;var c=i.suggestion_replacement,u=i.exact_string,d=i.featureVector;var p=i.channel||i.mpim;var m=e.suggestion.channel&&e.suggestion.channel._jumper_previous_name_match;var h=Object(Q["isMemberOfChannel"])(i.channel);var v=i.channel&&!h&&!Object(Q["isArchived"])(p);var f=Object(Q["isMpim"])(p);var g=Object(Q["isArchived"])(p);var _=e.suggestion.display_context&&e.suggestion.display_context.subqueryScoresByMember;return b.a.createElement("li",{ref:t,"data-index":r,"data-type":i.type,"data-replacement":c,"data-exact-string":u,"data-feature-vector":d,"data-is-navigational":true,"data-id":p.id,id:a,role:"option",tabIndex:"-1","aria-selected":n,onMouseMove:o,onClick:s,className:O()("c-search_autocomplete__suggestion_item",{"c-search_autocomplete__suggestion_item--selected":n})},f?b.a.createElement(b.a.Fragment,null,b.a.createElement(te["a"],{id:p.id,isActive:n,isDeactivated:g,matchData:_,useCarpeMPDM:true}),b.a.createElement($,{model:p})):b.a.createElement(ae["a"],{channel:p,showUnreadBadge:true,isActive:n,badgeCount:Object(Q["getBadgeCountWithMuted"])(p),displayFormerNames:!!m&&R["d"].bestOnly,bestFormerName:m,showTeamForLocalChannel:l}),v&&b.a.createElement("span",{className:"c-search_autocomplete__channel-membership"},re.t("Not a member",{fallbackHash:"28de8887932845dddf7c04d15831c5780b353820"})))});ne.defaultProps=V;var ie=ne;var se=a(145);var oe=b.a.forwardRef(function(e,t){var a=e.id,r=e.index,n=e.isSelected,i=e.suggestion,s=e.onMouseUp,o=e.onMouseMove;var l=i.suggestion_replacement,c=i.exact_string,u=i.featureVector,d=i.file;return b.a.createElement("li",{ref:t,"data-index":r,"data-type":i.type,"data-replacement":l,"data-exact-string":c,"data-feature-vector":u,"data-id":d.id,"data-is-navigational":true,key:d.id,id:a,role:"option",tabIndex:"-1","aria-selected":n,onMouseMove:o,onClick:s,className:O()("c-search_autocomplete__suggestion_item",{"c-search_autocomplete__suggestion_item--selected":n})},b.a.createElement(x["b"],{file:"tiny",type:e.suggestion.type,className:"c-search_autocomplete__icon  c-search_autocomplete__icon--file"}),b.a.createElement("div",{className:"c-search_autocomplete__filetype_title"},b.a.createElement(se["a"],{text:d.title,noLinking:true,noSpecials:true,doInlineImages:false,noJumbomoji:true,noHighlights:true,noHexColors:true,noCode:true,noQuotes:true})),b.a.createElement("div",{className:"c-search_autocomplete__filetype_description"},e.suggestion.fileTypeDescription))});oe.defaultProps=V;var le=oe;var ce=a(88);var ue=a.n(ce);var de=a(410);var pe=a(27);var me=a(33);var he=a(283);var ve=a(24);var fe=a(323);var be=a(441);var ge=new ee["b"]("search");var _e={onDelete:g["noop"]};var ye=function(e){h()(t,e);function t(e){var a;n()(this,t);a=l()(this,u()(t).call(this,e));Object(_["a"])(p()(a),["onClick"]);return a}s()(t,[{key:"onClick",value:function e(t){var a=this;t.stopPropagation();this.props.searchDelete({hash:this.props.queryHash,searchSessionId:this.props.searchSessionId,querySessionId:this.props.querySessionId}).then(function(){a.props.onDelete()})}},{key:"render",value:function e(){return b.a.createElement("div",{className:"c-search_autocomplete__suggestion_action"},b.a.createElement(ve["c"],{className:"c-search_autocomplete__suggestion_delete",onClick:this.onClick,label:ge.t("delete history result")},b.a.createElement(x["b"],{type:"times_small",inline:true})))}}]);return t}(f["PureComponent"]);ye.displayName="Delete";ye.defaultProps=_e;var Oe=function e(t){return{searchDelete:function e(){return t(fe["q"].apply(void 0,arguments))},querySessionId:t(Object(be["getQuerySessionId"])()),searchSessionId:t(Object(be["getSearchSessionId"])())}};var ke=Object(C["connect"])(null,Oe)(ye);var Ee=a(32);var Ce=new ee["b"]("search");var Se=function(e){h()(t,e);function t(){n()(this,t);return l()(this,u()(t).apply(this,arguments))}s()(t,[{key:"render",value:function e(){var t=this.props,a=t.user,r=t.fullNameOrDisplayName,n=t.filter;var i=Object(Y["isRestricted"])(a);var s=Object(Y["isExternal"])(a);var o=Object(Y["isDeleted"])(a);var l=Object(Y["isBotUser"])(a);var c=Object(Ee["isHighResolutionScreen"])();var u;u="from"===n?Ce.t("from")+":":"to"===n?Ce.t("to")+":":null;var d={backgroundImage:"url("+(c?a.profile.image_48:a.profile.image_24)+")"};return b.a.createElement("span",{className:O()("token","member_token",{ra:i,external_member:s,deleted:o}),"data-member-id":a.id},b.a.createElement("span",{className:O()({bot:l,member_preview_link:!l},"member_image","thumb_24"),"data-member-id":a.id,"data-thumb-size":"24",style:d,"aria-hidden":"true"})," ",b.a.createElement("span",{className:"token_label"},u,b.a.createElement("b",null,"@",r)))}}]);return t}(f["PureComponent"]);Se.displayName="SuggestionQueryUserFilterBase";Se.defaultProps={filter:void 0};var we=function e(t,a){var r=a.user;return{fullNameOrDisplayName:Object(Y["getPrefCompliantMemberName"])(t,r)}};var je=Object(C["connect"])(we)(Se);var Ie=je;var Te=a(346);var Ae=a(25);var Ne=a(20);var Pe=new ee["b"]("search");var Me=function(e){h()(t,e);function t(){n()(this,t);return l()(this,u()(t).apply(this,arguments))}s()(t,[{key:"render",value:function e(){var t=this.props,a=t.channel,r=t.displayName,n=t.fallbackName,i=t.isUnknown,s=t.isNonExistent;var o=Pe.t("in:");if(i)return b.a.createElement(Te["b"],{size:"random"});return b.a.createElement("span",{className:"token channel_token"},b.a.createElement("span",{className:"token_label"},s&&""+o+n,!s&&!r&&""+o+n,!s&&r&&b.a.createElement(b.a.Fragment,null,o,Object(Q["isPrivateChannel"])(a)&&b.a.createElement(x["b"],{type:"lock",size:"inherit"}),Object(Q["isPublicChannel"])(a)&&b.a.createElement(x["b"],{type:"channel",size:"inherit"}),b.a.createElement("b",null,r),Object(Q["isExternallySharedChannel"])(a)&&!Object(Q["isPendingExternallySharedChannel"])(a)&&b.a.createElement(x["b"],{type:"shared-channels-baseline",size:"inherit",className:"token_label_icon--suffix"}),Object(Q["isExternallySharedChannel"])(a)&&Object(Q["isPendingExternallySharedChannel"])(a)&&b.a.createElement(x["b"],{type:"shared-channels-baseline-pending",size:"inherit",className:"token_label_icon--suffix"}),Object(Q["isOrgShared"])(a)&&b.a.createElement(x["b"],{type:"shared-channel",size:"inherit",className:"token_label_icon--suffix"}))))}}]);return t}(f["PureComponent"]);Me.displayName="SuggestionQueryInFilterBase";Me.defaultProps={fallbackName:"",displayName:void 0,channel:void 0,isUnknown:false,isNonExistent:false};var De=function e(t,a){var r=a.member,n=a.channel,i=a.fallbackName;var s="";var o=false;var l=false;if(r){var c=Object(Ae["e"])(t,r.id);o=Object(Y["isUnknown"])(c);l=Object(Y["isNonExistent"])(c);s=o||l?"":"@"+Object(Y["getPrefCompliantMemberName"])(t,c)}else if(n){var u=Object(Ne["e"])(t,n.id);o=Object(Q["isUnknown"])(u);l=Object(Q["isNonExistent"])(u);s=o||l?"":Object(Q["getDisplayNameForChannel"])(t,u,{publicChannelIncludeHashSign:false})}return{fallbackName:i,displayName:s,isUnknown:o,isNonExistent:l}};var xe=Object(C["connect"])(De)(Me);xe.propTypes={member:v["default"].object,fallbackName:v["default"].string};xe.defaultProps={member:void 0,fallbackName:""};var Re=xe;var Fe=a(584);var Le=new ee["b"]("search");var Ue=function e(t){var a=t.theAttribute;return b.a.createElement("span",{className:"token has_token"},b.a.createElement("span",{className:"token_label"},Le.t("has"),":",b.a.createElement("b",null,b.a.createElement(se["a"],{text:Object(Fe["a"])(a),noLinking:true,noSpecials:true,doInlineImages:false,noJumbomoji:true,noHighlights:true,noHexColors:true,noCode:true,noQuotes:true}))))};Ue.displayName="SuggestionQueryHasFilter";var Be=Ue;var qe=new ee["b"]("search");var Ge=function e(t){var a=t.fileType;return b.a.createElement("span",{className:"token type_token"},b.a.createElement("span",{className:"token_label"},qe.t("type"),":",b.a.createElement("b",null,a)))};Ge.displayName="SuggestionQueryTypeFilter";var He=Ge;var We=a(59);var Ve=function e(t){var a=t.modifierName,r=t.dateString;return b.a.createElement("span",{className:"token date_token"},b.a.createElement("span",{className:"token_label"},Object(We["f"])()[a],": ",r))};Ve.displayName="SuggestionQueryDateFilter";var Ke=Ve;function ze(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function Qe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ze(Object(a),true).forEach(function(t){ue()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ze(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Ye=new ee["b"]("search");function Je(e,t){return Object(g["flatten"])(e.map(function(e){return[t,e]})).slice(1)}var Xe=Qe({},V,{orgName:"",teamName:"",clientTheme:"light"});var Ze=b.a.forwardRef(function(e,t){var a=e.id,r=e.index,n=e.isSelected,i=e.suggestion,s=e.onDelete,o=e.onMouseUp,l=e.onMouseMove,c=e.teamName,u=e.orgName,d=e.clientTheme;var p=i.suggestion_replacement,m=i.exact_string,h=i.hash,v=i.token_list,f=i.featureVector,g=i.isCustomDateFilter,_=i.deletable;return b.a.createElement("li",{ref:t,"data-index":r,"data-type":i.type,"data-replacement":p,"data-exact-string":m,"data-feature-vector":f,"data-is-custom-date-filter":g,"data-is-replacement-full":true,id:a,role:"option",tabIndex:"-1","aria-selected":n,onMouseMove:l,onClick:o,className:O()("c-search_autocomplete__suggestion_item",{"c-search_autocomplete__suggestion_item--selected":n})},b.a.createElement(x["b"],{type:"search-medium",className:"c-search_autocomplete__icon c-search_autocomplete__icon--query"}),b.a.createElement("div",{className:"c-search_autocomplete__query_wrapper"},b.a.createElement("span",{className:O()("c-search_autocomplete__query_parts",ue()({},"c-search_autocomplete__query_parts--"+d,"light"!==d))},Je(v.map(function(t,a){switch(true){case t.is_type_string:return b.a.createElement(se["a"],{key:a,text:e.getClnMessage(t.string),noLinking:true,noSpecials:true,doInlineImages:false,noJumbomoji:true,noHighlights:true,noHexColors:true,noCode:true,noQuotes:true});case t.is_type_phrase:return"\u201c"+t.phrase+"\u201d";case t.is_type_member_filter&&t.is_type_from_filter:return b.a.createElement(Ie,{key:a,filter:"from",user:t.user});case t.is_type_member_filter&&t.is_type_to_filter:return b.a.createElement(Ie,{key:a,filter:"to",user:t.user});case t.is_type_member:return b.a.createElement(Ie,{key:a,user:t.user});case t.is_type_in_filter:return b.a.createElement(Re,{key:a,member:t.user,channel:t.channel,fallbackName:t.fallbackName});case t.is_type_has_filter:return b.a.createElement(Be,{key:a,theAttribute:t.thing});case t.is_type_type_filter:return b.a.createElement(He,{key:a,fileType:t.file_type});case t.is_type_date_filter:return b.a.createElement(Ke,{key:a,modifierName:t.modifier,dateString:t.date_string_normalized});default:return null}})," "))),b.a.createElement("span",{className:"c-search_autocomplete__omniswitcher_hint"},"\u2014"," ",Ye.rt("Search {teamName}",{teamName:u||c||""})," "),_&&b.a.createElement(ke,{queryHash:h,onDelete:s}))});Ze.defaultProps=Xe;var $e=function e(t){return{getClnMessage:function e(a){return Object(de["b"])(t,a,{isInternalMessage:false})},orgName:Object(me["g"])(t)||"",teamName:Object(pe["getTeamDisplayName"])(Object(me["d"])(t)),clientTheme:Object(he["getClientTheme"])(t)}};var et=Object(C["connect"])($e,null,null,{withRef:true})(Ze);var tt=a(866);var at=b.a.forwardRef(function(e,t){var a=e.id,r=e.index,n=e.isSelected,i=e.suggestion,s=e.onMouseUp,o=e.onMouseMove;var l=i.suggestion_replacement,c=i.exact_string,u=i.featureVector,d=i.user;var p=d&&d.profile&&d.profile.bot_id;var m=Object(Y["isDeleted"])(d);return b.a.createElement("li",{ref:t,"data-index":r,"data-type":i.type,"data-replacement":l,"data-exact-string":c,"data-feature-vector":u,"data-bot-id":p,"data-id":d.id,"data-is-navigational":true,id:a,role:"option",tabIndex:"-1","aria-selected":n,onMouseMove:o,onClick:s,className:O()("c-search_autocomplete__suggestion_item",{"c-search_autocomplete__suggestion_item--selected":n})},b.a.createElement("span",{className:O()("c-search_autocomplete__member",{"c-search_autocomplete__member--deleted":m})},b.a.createElement(tt["a"],{id:d.id,isActive:n,showTooltip:false,isDeactivated:m,showPresence:false,showUnreadCount:true})))});at.defaultProps=V;var rt=at;var nt=a(1586);var it=b.a.forwardRef(function(e,t){var a=e.id,r=e.index,n=e.isSelected,i=e.suggestion,s=e.onMouseUp,o=e.onMouseMove;var l=i.suggestion_replacement,c=i.exact_string,u=i.featureVector;var d=e.suggestion.team;return b.a.createElement("li",{ref:t,"data-index":r,"data-type":i.type,"data-replacement":l,"data-exact-string":c,"data-feature-vector":u,"data-is-navigational":true,"data-id":d.id,id:a,role:"option",tabIndex:"-1","aria-selected":n,onMouseMove:o,onClick:s,className:O()("c-search_autocomplete__suggestion_item",{"c-search_autocomplete__suggestion_item--selected":n})},b.a.createElement(nt["a"],{className:"c-search_autocomplete__team",team:d,id:d.id}))});it.defaultProps=V;var st=it;var ot=a(493);var lt=a(920);var ct=a(438);var ut=a(3668);var dt={className:void 0,isDisabled:false};function pt(e){var t=e.className,a=e.id,r=e.isDisabled;var n=Object(ct["c"])(a)||Object(lt["a"])(a);if(Object(g["isEmpty"])(n))return null;var i=r?R["c"].dim:void 0;var s="list";"Vall_threads"===a?s="small-reply":"Vapp_space"===a?s="gn-menu":n.sidebar&&n.sidebar.icon&&(s=n.sidebar.icon);return b.a.createElement(D["d"],{size:"small",className:O()("c-page_view_entity",t),style:i,avatar:function e(){return b.a.createElement(x["b"],{className:"c-page_view_entity__icon",type:s})},text:b.a.createElement("span",{className:"c-page_view_entity__text"},n.label&&n.label()||n.name)})}pt.displayName="SmallViewEntity";pt.defaultProps=dt;var mt=pt;var ht={className:void 0,isActive:false,isDisabled:false,secondaryContent:void 0};function vt(e){var t=e.className,a=e.id,r=e.isActive,n=e.isDisabled,i=e.secondaryContent;var s;r?s=n?R["c"].highlightDim:R["c"].highlightDark:n&&(s=R["c"].dim);return b.a.createElement(ot["a"],{size:"small",style:s,className:t,primaryContent:b.a.createElement(mt,{id:a,isDisabled:n}),secondaryContent:i})}vt.displayName="SmallPageViewListEntity";vt.defaultProps=ht;var ft=vt;var bt=b.a.forwardRef(function(e,t){var a=e.id,r=e.index,n=e.isSelected,i=e.suggestion,s=e.onMouseUp,o=e.onMouseMove;var l=i.suggestion_replacement,c=i.exact_string,u=i.featureVector;var d=e.suggestion.view;return b.a.createElement("li",{ref:t,"data-index":r,"data-type":i.type,"data-replacement":l,"data-exact-string":c,"data-feature-vector":u,"data-is-navigational":true,"data-id":d.id,id:a,role:"option",tabIndex:"-1","aria-selected":n,onMouseMove:o,onClick:s,className:O()("c-search_autocomplete__suggestion_item",{"c-search_autocomplete__suggestion_item--selected":n})},b.a.createElement(ft,{id:d.id,className:"c-search_autocomplete__view"}))});bt.defaultProps=V;var gt=bt;a.d(t,"b",function(){return yt});var _t={onAccept:g["noop"],onSelected:g["noop"],onDelete:g["noop"],hasChannelNameCollision:false,listItemRef:void 0};var yt=function e(t){return"c-search_autcomplete__suggestion_"+t};var Ot=function(e){h()(t,e);function t(e){var a;n()(this,t);a=l()(this,u()(t).call(this,e));Object(_["a"])(p()(a),["onMouseUp","onMouseMove","onDelete"]);return a}s()(t,[{key:"onDelete",value:function e(){this.props.onDelete(this.props.suggestion)}},{key:"onMouseMove",value:function e(){if(this.props.isSelected)return;this.props.onSelected(this.props.index,true)}},{key:"onMouseUp",value:function e(t){if(0!==t.button||t.ctrlKey)return;this.props.onAccept()}},{key:"componentClassForSuggestion",value:function e(t){if(t.is_type_query_completion)return et;if(t.is_type_user)return rt;if(t.is_type_channel||t.is_type_mpim)return ie;if(t.is_type_file)return le;if(t.is_type_view)return gt;if(t.is_type_team)return st;if(t.is_type_app_action)return z;return null}},{key:"render",value:function e(){var t=yt(this.props.index);var a=this.componentClassForSuggestion(this.props.suggestion);return b.a.createElement(a,{ref:this.props.listItemRef,id:t,index:this.props.index,isSelected:this.props.isSelected,suggestion:this.props.suggestion,onDelete:this.onDelete,onMouseUp:this.onMouseUp,onMouseMove:this.onMouseMove,hasChannelNameCollision:this.props.hasChannelNameCollision})}}]);return t}(f["PureComponent"]);Ot.displayName="Suggestion";Ot.defaultProps=_t;var kt=t["a"]=Ot},,,,,,function(e,t,a){var r=a(3171),n=a(3173);function i(e,t,a){return r(n,e,t,a)}e.exports=i},function(e,t,a){var r=a(1906),n=a(539);function i(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var a=r(e.prototype),i=e.apply(a,t);return n(i)?i:a}}e.exports=i},function(e,t,a){var r=a(539);var n=Object.create;var i=function(){function e(){}return function(t){if(!r(t))return{};if(n)return n(t);e.prototype=t;var a=new e;e.prototype=void 0;return a}}();e.exports=i},function(e,t){function a(e,t){var a=-1,r=e.length;t||(t=Array(r));while(++a<r)t[a]=e[a];return t}e.exports=a},function(e,t,a){var r=a(2207),n=a(2410);function i(e,t,a,i){var s=!a;a||(a={});var o=-1,l=t.length;while(++o<l){var c=t[o];var u=i?i(a[c],e[c],c,a,e):void 0;void 0===u&&(u=e[c]);s?n(a,c,u):r(a,c,u)}return a}e.exports=i},function(e,t,a){},,,function(e,t,a){},,function(e,t,a){},,,,,,,,function(e,t,a){},,,function(e,t,a){"use strict";var r=a(196);var n=a.n(r);var i=a(88);var s=a.n(i);var o=a(110);var l=a.n(o);var c=a(135);var u=a.n(c);var d=a(169);var p=a.n(d);var m=a(138);var h=a.n(m);var v=a(147);var f=a.n(v);var b=a(185);var g=a.n(b);var _=a(2);var y=a(0);var O=a(1);var k=a.n(O);var E=a(85);var C=a.n(E);var S=a(13);var w=a.n(S);var j=a(12);var I=a(332);var T=a.n(I);var A=a(30);var N=a(21);var P=a(11);var M=a(2962);var D=a(4726);var x=a(859);var R=a(150);var F=a(1030);var L=a(38);var U=a(283);var B=a(450);var q=a(106);var G=a(39);var H=a(117);var W=a(555);var V=a(1885);var K=a(187);var z=a(1427);var Q=a(856);var Y=a(1992);var J=a(1617);var X=a(2950);var Z=a(18);var $=a(5126);var ee=a(176);var te=a(4674);var ae=Object(Z["b"])("Fetch draft unfurl preview data for all urls in a draft's ops",function(e,t,a){if(!a)return null;var r=t();var n=Object(K["d"])(r,a);var i=Object(ee["l"])(n);if(!i)return Promise.resolve();var s=Object(te["a"])(i);var o=Object(z["h"])(r,a);var l=Object(z["j"])(r,a);var c=Object(_["difference"])(l,s);c.forEach(function(t){return e(Object(z["k"])({draftId:a,url:t,status:z["a"]}))});var u=Object(_["difference"])(s,o);if(!u||!u.length)return Promise.resolve();var d=Object(_["map"])(u,function(t){e(Object(z["k"])({draftId:a,url:t,status:z["c"]}));return e(Object($["a"])({url:t,reason:"fetch-unfurl-preview"})).catch(function(r){r&&"no_attachments"===r.name?e(Object(z["k"])({draftId:a,url:t,status:z["d"]})):e(Object(z["k"])({draftId:a,url:t,status:z["b"]}));return Promise.resolve()})});return Promise.all(d).then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.forEach(function(t){if(!t)return;var r=t.original_url;e(Object(z["k"])({draftId:a,url:r,status:z["a"],data:t}))})})});ae.meta={name:"fetchDraftUnfurlData",key:"actionsFetchDraftUnfurlDataFetchDraftUnfurlData",description:"Fetch draft unfurl preview data for all urls in a draft's ops"};ae.propTypes=y["default"].string.isRequired;var re=ae;var ne=a(107);var ie=a(924);var se=a(6);var oe=new se["b"]("coachmarks");var le={anchorElement:y["default"].instanceOf(Element),setTractorFilesCoachmarkVisibility:y["default"].func};var ce={anchorElement:null,setTractorFilesCoachmarkVisibility:_["noop"]};var ue=function(e){g()(t,e);function t(){l()(this,t);return p()(this,h()(t).apply(this,arguments))}u()(t,[{key:"render",value:function e(){var t=this.props,a=t.setTractorFilesCoachmarkVisibility,r=t.anchorElement;return k.a.createElement("div",{className:"position_relative"},k.a.createElement(ie["a"],{anchorElement:r,"data-qa":"coachmark",isOpen:true,arrowPosition:80,orientation:"right",offsetY:-40,closeCoachmark:function e(){return a(false)},coachmarkClassNames:"c-message-pane__c-coachmark"},k.a.createElement("h3",null,oe.t("Share a file in the channel")),k.a.createElement("p",null,oe.rt('Click the <i class="c-icon c-icon--paperclip"></i> paperclip icon next to the message input box to <strong>add a file from your computer</strong>.'))))}}]);return t}(ie["a"]);ue.displayName="TractorShareFilesCoachmark";ue.propTypes=le;ue.defaultProps=ce;var de=a(495);var pe=a(162);var me=a(851);var he=a(582);var ve=a(218);var fe=a.n(ve);var be=a(1708);var ge=a(1406);var _e=a(1986);var ye=a(2784);var Oe=a(1645);var ke=a(165);var Ee={dispatch:_["noop"],featureComposeFlow:false,pendingFiles:[],draftFiles:[],draftId:void 0};function Ce(e){var t=e.dispatch,a=e.featureComposeFlow,r=e.pendingFiles,n=e.draftFiles,i=e.draftId;if(!a)return null;var s=function e(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=a.pendingFileId,n=a.persistedFileId;t(Object(be["b"])({draftId:i,pendingFileId:r,persistedFileId:n,shouldUpdateDraft:true}))};var o=n.filter(function(e){return!r.find(function(t){return t.persistedFileId===e.persistedFileId})});var l=[].concat(fe()(o),fe()(r));if(!l.length)return null;return k.a.createElement("div",null,k.a.createElement(Oe["b"],{composerFiles:l,isEagerUpload:true,onRemoveFile:s,showAddFile:false}))}Ce.displayName="ComposerFiles";Ce.defaultProps=Ee;var Se=function e(t,a){var r=a.draft,n=a.draftId;var i=Object(ge["a"])(t,{draftId:n});var s=Object(_["compact"])(Object(_["map"])(i,function(e){return Object(_e["a"])(t,{pendingFileId:e})}));var o=Object(ee["i"])(r)||[];var l=Object(_["compact"])(o.map(function(e){return Object(ye["a"])(t,e)}));return{pendingFiles:s,featureComposeFlow:Object(K["g"])(t),draftFiles:l}};var we=Object(j["connect"])(Se,null,null,{areStatePropsEqual:function e(t,a){return Object(ke["a"])(t,a,3)}})(Ce);var je=a(286);var Ie=a(5127);var Te=a(1648);var Ae=a(1041);function Ne(e){return e&&e.service_name}function Pe(e){return e&&e.service_url}function Me(e){return e&&e.service_icon}function De(e){return e&&e.author_name}function xe(e){return e&&e.author_link}function Re(e){return e&&e.author_icon}function Fe(e){return e&&e.title}function Le(e){return e&&e.title_link}function Ue(e){return e&&e.text}function Be(e){return e&&e.blocks}function qe(e){var t=Be(e);if(!Object(Ae["a"])(t))return null;return t[0]}function Ge(e){return e&&e.image_url}function He(e){return e&&e.original_url}function We(e){return e&&e.channel_name}function Ve(e){return e&&e.fallback}function Ke(e){return!!(e&&e.is_msg_unfurl)}function ze(e){var t=!!Ge(e);var a=!(Ne(e)||De(e));return t&&a}function Qe(e){if(!e)return null;var t=He(e);var a;var r;var n;var i;var s=De(e);var o=Re(e);var l=xe(e);var c=s&&o;if(c){a=s;r=l;n=o}else{a=Ne(e)||s;r=Pe(e)||l;n=Me(e)||o}if(!a){a=t;r=t}var u=We(e);u?i="#"+u:s&&a!==s&&(i=s);return{name:a,nameLink:r,iconLink:n,subheader:i}}function Ye(e){if(!e)return false;var t=!!He(e);var a=!!qe(e);var r=!!(a||Fe(e)||Ue(e)||Ve(e));return t&&r||ze(e)}var Je=a(24);var Xe=a(23);var Ze=a(43);var $e=a(145);var et=a(99);var tt=a(5162);var at=new se["b"]("live_unfurling");var rt={draftUnfurls:null,upsertDraftUnfurl:_["noop"],featureLiveUnfurls:false};var nt=function(e){g()(t,e);function t(e){var a;l()(this,t);a=p()(this,h()(t).call(this,e));a.removeUnfurl=a.removeUnfurl.bind(f()(a));return a}u()(t,[{key:"removeUnfurl",value:function e(t){var a=this.props.draftId;this.props.upsertDraftUnfurl({draftId:a,url:t,status:z["e"]})}},{key:"renderUnfurlHeader",value:function e(t){var a=Qe(t),r=a.name,n=a.nameLink,i=a.iconLink,s=a.subheader;var o=i?k.a.createElement("img",{className:"p-draft_unfurls__unfurl_icon",src:i,alt:""}):null;var l="p-draft_unfurls__unfurl_name";var c=n?k.a.createElement(Ze["a"],{href:n,className:l},r):k.a.createElement("span",{className:l},r);var u=s?k.a.createElement("span",{className:"p-draft_unfurls__unfurl_subheader"},s):null;return k.a.createElement("div",{className:"p-draft_unfurls__unfurl_header"},o,k.a.createElement("span",{className:"p-draft_unfurls__unfurl_header_text"},c,u))}},{key:"renderBlocks",value:function e(t){if(Object(_["isEmpty"])(t))return null;return k.a.createElement(Te["a"],{richTextBlock:t})}},{key:"renderDescriptionText",value:function e(t){if(!t)return null;return k.a.createElement($e["a"],{text:t,noHighlights:true,noHexColors:true,noJumbomoji:true,noLinking:true,noCode:true,noQuotes:true,maxNewlines:1,emojiSize:et["a"].SMALL})}},{key:"renderUnfurlText",value:function e(t){var a=Fe(t);var r=Le(t);var n=qe(t);var i=Ue(t);Object(_["isUndefined"])(i)&&(i=Ve(t));return k.a.createElement("div",{className:"p-draft_unfurls__unfurl_text"},a?k.a.createElement("span",{className:"p-draft_unfurls__unfurl_title"},r?k.a.createElement(Ze["a"],{href:r},a):a):null,n?this.renderBlocks(n):k.a.createElement("span",{className:"p-draft_unfurls__unfurl_description"},this.renderDescriptionText(i)))}},{key:"renderGraphicUnfurl",value:function e(t){return k.a.createElement("img",{className:"p-draft_unfurls__unfurl_thumbnail",src:Ge(t),alt:Ve(t)})}},{key:"renderRemoveUnfurlButton",value:function e(t){var a=this;var r=this.props.featureLiveUnfurls;if(!r)return null;var n=He(t);return k.a.createElement(Je["c"],{className:"p-draft_unfurls__remove_btn",onClick:function e(){return a.removeUnfurl(n)},"aria-label":at.t("Remove link preview")},k.a.createElement(Xe["b"],{type:"circle-fill",className:"p-draft_unfurls__remove_btn_circle"}),k.a.createElement(Xe["b"],{type:"times-circle",className:"p-draft_unfurls__remove_btn_times"}))}},{key:"renderDraftUnfurl",value:function e(t){var a=ze(t);var r=w()("p-draft_unfurls__unfurl",{"p-draft_unfurls__unfurl--graphic":a});var n=He(t);return k.a.createElement("div",{className:r,key:n},this.renderRemoveUnfurlButton(t),a?this.renderGraphicUnfurl(t):k.a.createElement(k.a.Fragment,null,this.renderUnfurlHeader(t),this.renderUnfurlText(t)))}},{key:"render",value:function e(){var t=this;var a=this.props.draftUnfurls;var r=Object(_["filter"])(a,function(e){return Ye(e)});if(Object(_["isEmpty"])(r))return null;return k.a.createElement("div",{className:"p-draft_unfurls"},r.map(function(e){return t.renderDraftUnfurl(e)}))}}]);return t}(O["Component"]);nt.displayName="DraftUnfurls";nt.defaultProps=rt;function it(e,t){var a=t.draftId;return{draftUnfurls:Object(z["i"])(e,a),featureLiveUnfurls:Object(D["a"])(e)}}function st(e){return{upsertDraftUnfurl:function t(){return e(z["k"].apply(void 0,arguments))}}}var ot=Object(j["connect"])(it,st)(nt);var lt={dispatch:_["noop"],featureLiveUnfurls:false,pendingFiles:[],draftFiles:[],completeDraftUnfurls:[],draftId:void 0};var ct=200;var ut=function(e){g()(t,e);function t(){l()(this,t);return p()(this,h()(t).apply(this,arguments))}u()(t,[{key:"renderFiles",value:function e(){var t=this.props,a=t.dispatch,r=t.pendingFiles,n=t.draftFiles,i=t.draftId;var s=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.pendingFileId,n=t.persistedFileId;a(Object(be["b"])({draftId:i,pendingFileId:r,persistedFileId:n,shouldUpdateDraft:true}))};var o=n.filter(function(e){return!r.find(function(t){return t.persistedFileId===e.persistedFileId})});var l=[].concat(fe()(o),fe()(r));if(!l.length)return null;return k.a.createElement(Oe["b"],{composerFiles:l,isEagerUpload:true,onRemoveFile:s,showAddFile:false,draftId:i,renderGalleryScroller:false})}},{key:"renderUnfurls",value:function e(){var t=this.props,a=t.draftId,r=t.completeDraftUnfurls;if(Object(_["isEmpty"])(r))return null;return k.a.createElement(ot,{draftId:a})}},{key:"renderSeparator",value:function e(){return k.a.createElement("div",{className:"p-composer_attachments__separator"})}},{key:"render",value:function e(){var t=this;var a=this.props.featureLiveUnfurls;if(!a)return null;var r=1.25*ct;var n=this.renderFiles();var i=this.renderUnfurls();if(!n&&!i)return null;return k.a.createElement(je["a"],{disableHeight:true},function(e){var a=e.width;return k.a.createElement(Ie["a"],{width:a,pageSize:r},t.renderFiles(),n&&i?t.renderSeparator():null,t.renderUnfurls())})}}]);return t}(O["Component"]);ut.displayName="ComposerAttachments";ut.defaultProps=lt;var dt=function e(t,a){var r=a.draftId;var n=Object(K["d"])(t,r);if(!n)return{};var i=Object(ge["a"])(t,{draftId:r});var s=Object(_["compact"])(Object(_["map"])(i,function(e){return Object(_e["a"])(t,{pendingFileId:e})}));var o=n.files?Object(_["compact"])(n.files.map(function(e){return Object(ye["a"])(t,e)})):null;var l=Object(z["i"])(t,r)||[];return{pendingFiles:s,draftFiles:o,completeDraftUnfurls:l,featureLiveUnfurls:Object(D["a"])(t)}};var pt=Object(j["connect"])(dt,null,null,{areStatePropsEqual:function e(t,a){return Object(ke["a"])(t,a,3)}})(ut);var mt=a(16);var ht=a(1049);var vt=a(14);var ft=a(34);var bt=a(131);var gt=a(1273);var _t=a(35);var yt=a(32);var Ot=a(388);var kt=a(245);var Et=a.n(kt);var Ct=a(237);var St=a(1611);var wt=a(1990);var jt=a(1384);var It=a(320);var Tt=a(54);var At=a(90);var Nt=a(385);var Pt=a(1385);var Mt=a(246);var Dt=a.n(Mt);var xt=a(1876);var Rt=a(1433);var Ft=a(348);var Lt=new se["b"]("channel_action_menu");var Ut=function e(t){var a=t.name,r=Et()(t,["name"]);var n=Object(Ft["a"])(),i=n.featureChannelActionsClient;return k.a.createElement(bt["b"],r,k.a.createElement("span",null,i?Lt.rt("You used the action <b>{name}</b>",{name:a}):""))};Ut.displayName="AppActionSuccessToast";var Bt=Ut;var qt=function e(t){return k.a.createElement(Ut,t)};qt.displayName="appActionSuccessToastFactory";var Gt=a(1403);var Ht=a(549);var Wt="PLATFORM-CHANNEL-ACTIONS";var Vt=Object(Z["b"])("Runs a channel action",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelId,n=a.actionId;var i=t();var s=Object(mt["a"])({state:i,label:Wt});var o=Object(St["b"])(i,n);if(!o){s.error("Unable to run unknown channel action with ID "+n+" for channel "+r);return Promise.resolve()}var l={actionId:n,appId:o.appId,channelId:r,type:Ht["a"].channelAction};return e(Object(Gt["c"])(l)).tap(function(){s.info("Successfully ran channel action "+n+" for channel "+r);var t=qt({name:o.name});e(Object(q["enqueueToast"])({element:t}))}).catch(function(t){s.error("Failed to run channel action "+n+" for channel "+r,t);var a=function t(){return e(Vt({channelId:r,actionId:n}))};var i=Object(Rt["a"])({onRetry:a});e(Object(q["enqueueToast"])({element:i}))})});Vt.meta={name:"runChannelAction",key:"channelActionsStoreActionsRunChannelAction",description:"Runs a channel action"};Vt.propTypes={actionId:y["default"].string.isRequired,channelId:y["default"].string.isRequired};var Kt=a(1841);var zt=a(1308);var Qt=a(368);var Yt=a(202);var Jt=a(20);var Xt=a(87);var Zt=a(9);var $t=a(261);var ea=a(289);var ta=a(1702);var aa=function e(t){return(t||"").split(/\s+/)[0]};var ra=function e(t){return["/","\uff0f"].includes((t||"").charAt(0))?t:"/"+t};var na=function e(t){return((t||"").split(/[^\S\n\r]+/g)||[]).length>1};function ia(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function sa(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ia(Object(a),true).forEach(function(t){s()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ia(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var oa=new se["b"]("app_action_picker");var la=15;var ca=77;var ua=540;var da=430;var pa=da-ca;var ma="OPTION_CHANNEL_ACTION";var ha="OPTION_GLOBAL_ACTION";var va="OPTION_GLOBAL_ACTION_V2";var fa="OPTION_SLASH_COMMAND";var ba="LABEL_CHANNEL_ACTIONS";var ga="APP_SHORTCUTS_MENU";var _a="APP_SHORTCUTS_MENU_ITEM";var ya="APP_SHORTCUTS_MENU_TRIGGER";var Oa="APP_SHORTCUTS_ADD_MENU_WORKFLOW_BUILDER";var ka="APP_SHORTCUTS_ADD_MENU_APP_SUGGESTION";var Ea="APP_SHORTCUTS_ADD_MENU_TRIGGER";var Ca="APP_SHORTCUTS_SLASH_COMMAND";var Sa=function e(t){return["/","\uff0f"].includes(t.charAt(0))};var wa=function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";var r=aa(a);var n=na(a);var i=Object(ea["a"])(a);var s=Sa(a);return t.reduce(function(e,t){var o=t.options.filter(function(e){if(s&&e.type!==fa)return false;var t=Object(ea["a"])(e.label);var o=Object(ea["a"])(e.description)||"";var l=Object(ea["a"])(e.appName)||"";if(e.type===fa){if("last-used"===e.command.type)return""===a||"/"===a||"\uff0f"===a;if("slack"===l&&""===a)return false;var c=Object(ta["a"])(e.command,r,{allowPartialMatches:true});var u=Object(ta["a"])(e.command,r,{allowPartialMatches:false});if(s){if(n)return u;return c}if(c)return true;if(o.includes(i))return true;if(l.includes(i))return true}if(e.type===ma||e.type===ha||e.type===va){if(t.includes(i))return true;if(o.includes(i))return true;if(l.includes(i))return true}return false});if(o.length>0){var l=sa({},t,{options:o});return e.concat(l)}return e},[])};var ja=function e(t){var a;var r=t.channelActions,n=t.channelName,i=t.installTeamId,s=t.appName,o=t.topLevelTeamId,l=t.featureDangerouslyGuardIATranslations;var c=i!==o;var u=l?oa.t("Added by {teamName} in {channelName}",{channelName:Object(se["q"])(n),teamName:Object(se["q"])(null===r||void 0===r?void 0:null===(a=r[0])||void 0===a?void 0:a.installTeamName)}):"";var d=l?oa.t("Added by your team in {channelName}",{channelName:Object(se["q"])(n)}):"";var p=c?u:d;return{label:p,icon:"bolt-filled",installTeamId:i,isFromExternalTeam:c,options:(r||[]).map(function(e){return{value:e.id,label:e.name,description:e.description,type:ma,appName:s,height:28,action:e}})}};var Ia=function e(t){var a=t.channelActions,r=void 0===a?[]:a,n=t.channelName,i=t.appName,o=t.topLevelTeamId,l=t.featureDangerouslyGuardIATranslations;return Object.entries(r.reduce(function(e,t){return sa({},e,s()({},t.installTeamId,(e[t.installTeamId]||[]).concat(t)))},{})).map(function(e){var t=Dt()(e,2),a=t[0],r=t[1];return ja({channelActions:r,channelName:n,installTeamId:a,appName:i,topLevelTeamId:o,featureDangerouslyGuardIATranslations:l})})};var Ta=function e(t){return Object.entries(t.reduce(function(e,t){return sa({},e,s()({},t.appName,(e[t.appName]||[]).concat(t)))},{})).map(function(e){var t=Dt()(e,2),a=t[0],r=t[1];return{label:a,img:r[0].app.icons.image_48,options:r.map(function(e){return{value:e.id,label:e.name,type:ha,appName:a,height:28,action:e}})}})};var Aa=function e(t){return Object.entries(t).filter(function(e){var t=Dt()(e,2),a=t[1];return Object.keys(a).length}).map(function(e){var t,a,r;var n=Dt()(e,2),i=n[0],s=n[1];var o=null===(t=Object.entries(s))||void 0===t?void 0:null===(a=t[0])||void 0===a?void 0:null===(r=a[1])||void 0===r?void 0:r.appName;return{appId:i,label:o,options:Object.entries(s).map(function(e){var t=Dt()(e,2),a=t[1];return{value:a.id,label:a.name,type:va,appName:o,height:28,action:a}})}})};var Na=function e(t,a){return{label:a,icon:"input-integration",options:t.map(function(e){return{value:Object(Qt["d"])(e),label:Object(Qt["f"])(e),description:Object(Qt["e"])(e),type:fa,appName:e.appName,height:50,command:e}})}};var Pa=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(t&&t.command){if("last-used"===t.command.type)return t.command.originalCommand;return t.command}return null};var Ma=a(2377);var Da=a(226);var xa=a(1682);var Ra=function e(t){var a=t.action,r=t.app,i=t.appName,s=Et()(t,["action","app","appName"]);var o=k.a.createElement(xa["a"],null,a.name);var l="channel_action"===a.type?k.a.createElement(xa["b"],null,i):null;return k.a.createElement(xa["c"],n()({},s,{primaryContent:o,secondaryContent:l}))};Ra.displayName="AppActionPickerActionItem";Ra.defaultProps={app:null,appName:""};var Fa=function e(t,a){var r=a.action.appId;return{app:Object(Da["getAppById"])(t,r)||null}};var La=Object(j["connect"])(Fa)(Ra);var Ua=a(2393);var Ba=a(421);var qa=a(134);var Ga=a(585);var Ha=a(2621);var Wa=qa["a"].small;var Va=function e(t){var a=t.app,r=t.icon,n=t.className;var i=Object(Ba["b"])(a,Wa);var s=Object(Ga["b"])(a);return k.a.createElement(Ua["a"],{img:i,label:s,icon:r,className:n})};Va.displayName="AppActionPickerGlobalActionHeading";Va.defaultProps={icon:null,className:null,app:{}};var Ka=function e(t,a){var r=a.appId;return{app:Object(Da["getAppById"])(t,r)}};var za=Object(j["connect"])(Ka)(Va);var Qa=a(109);var Ya=a(291);var Ja=function e(t){var a=t.installTeamId,r=t.className,n=t.label;var i="margin_right_75 nudge_top_1";return k.a.createElement("div",{className:w()("p-app_action_picker_heading",r)},k.a.createElement(Ya["b"],{className:i,id:a,size:20}),n)};Ja.displayName="AppActionPickerESCActionHeading";Ja.defaultProps={className:null};var Xa=Object(Qa["pure"])(Ja);var Za=function e(t){var a=t.option,r=t.channelId,n=t.isActive;if("heading"===a.type){var i,s,o,l,c;if(null===a||void 0===a?void 0:null===(i=a.extras)||void 0===i?void 0:i.isFromExternalTeam){var u;return k.a.createElement(Xa,{installTeamId:null===a||void 0===a?void 0:null===(u=a.extras)||void 0===u?void 0:u.installTeamId,label:null===a||void 0===a?void 0:a.label})}if(null===a||void 0===a?void 0:null===(s=a.extras)||void 0===s?void 0:s.appId)return k.a.createElement(za,{appId:a.extras.appId});return k.a.createElement(Ua["a"],{icon:null===a||void 0===a?void 0:null===(o=a.extras)||void 0===o?void 0:o.icon,label:a.label,img:null===a||void 0===a?void 0:null===(l=a.extras)||void 0===l?void 0:l.img,iconClassName:(null===a||void 0===a?void 0:null===(c=a.extras)||void 0===c?void 0:c.installTeamId)?"p-app_action_picker_heading__icon--highlighted":""})}if(a.type===ma||a.type===ha||a.type===va)return k.a.createElement(La,{key:a.key,action:a.action,channelId:r,isActive:n,appName:a.appName,"data-qa":a.type+"_action_item"});return k.a.createElement(Ma["a"],{key:a.key,command:a.command,channelId:r,isActive:n,appName:a.appName,"data-qa":a.type+"_action_item"})};Za.displayName="AppActionPickerOption";Za.defaultProps={isActive:false};var $a=Za;var er=a(1333);var tr=new se["b"]("app_action_picker");var ar=function e(t){var a=t.filterQuery,r=t.onSelected,n=t.openAppsBrowserModal,i=t.featureDangerouslyGuardIATranslations;return k.a.createElement("div",{className:"p-app_action_picker__empty"},i?tr.rt('No shortcuts found for "{query}"',{query:k.a.createElement("strong",null,a),fallbackHash:"851674b368ef5691d52a910ccaa9dd7e5fbcbf15"}):"",k.a.createElement("br",null),i?tr.rt("Try a different shortcut or <a>add an app</a>.",{fallbackHash:"37fd2a13bad902bc0ff9034c7619d050142c5b85"},function(e){var t=e.text;return k.a.createElement(Ze["a"],{onClick:function e(){r();n()}},t)}):"")};ar.displayName="AppActionPickerEmptyMessage";ar.defaultProps={featureDangerouslyGuardIATranslations:false};var rr=function e(t){return{featureDangerouslyGuardIATranslations:Object(At["e"])(t)}};var nr=function e(t){return{openAppsBrowserModal:function e(){return t(Object(er["a"])())}}};var ir=Object(j["connect"])(rr,nr)(ar);var sr=a(141);var or=a(194);var lr=a(62);var cr=a(5208);var ur=a(2779);var dr=a(299);var pr=a(44);var mr=a(1179);var hr=a(2771);var vr=a(122);var fr=new se["b"]("channel_action_menu");var br=function e(t){var a=t.closeModal,r=t.setClickedThrough,n=t.launchWorkflowBuilder,i=t.channelId;var s=Object(Ft["a"])(),o=s.featureChannelActionsClient;var l=Object(O["useCallback"])(function(){n({subPath:"workflow/create/channel_action/"+i});r();a()},[a,r,i,n]);if(!o)return null;return k.a.createElement(mr["a"],{onClose:a,title:fr.t("Add a new action"),submitButtonText:fr.t("Create Workflow"),onSubmit:l,showCancelButton:false,"data-qa":"add_channel_action_modal"},k.a.createElement("p",null,fr.t("You can automate everyday actions \u2014 like sending routine messages or gathering info from people \u2014 with Workflow Builder. Create workflows and add them to a channel for everyone to use.")))};br.displayName="BaseAddChannelActionModal";var gr=function e(t){return{closeModal:function e(){return t(Object(G["closeModal"])())},launchWorkflowBuilder:function e(a){var r=a.subPath;return t(Object(hr["a"])({source:"add_channel_action__modal",subPath:r}))},setClickedThrough:function e(){return t(Object(vr["d"])({pref:"workflow_builder_intro_modal_clicked_through",value:true}))}}};var _r=Object(j["connect"])(void 0,gr)(br);var yr=_r;var Or=function e(t){return k.a.createElement(_r,{channelId:t})};Or.displayName="createAddChannelActionModal";var kr=Object(Z["b"])("add channel action with workflow builder",function(e,t,a){var r=t();Object(ur["a"])(r)&&Object(P["isFeatureEnabled"])(r,"feature_builder_can_access")&&(true!==Object(L["k"])(r,"workflow_builder_intro_modal_clicked_through")?e(Object(G["openModal"])({element:Or(a)})):e(Object(hr["a"])({source:"add_channel_action__seen_modal",subPath:"workflow/create/channel_action/"+a})))});kr.meta={name:"addChannelActionWithWorkflowBuilder",key:"actionsAddChannelActionWithWorkflowBuilderAddChannelActionWithWorkflowBuilder",description:"add channel action with workflow builder"};kr.propTypes=y["default"].string.isRequired;var Er=kr;var Cr=a(1389);var Sr=a(2184);var wr=new se["b"]("app_action_picker");var jr=function e(t){var a=t.featureDangerouslyGuardIATranslations,r=t.isGDriveEnabled,n=t.isGiphyEnabled;return r&&n?k.a.createElement(pr["e"],{className:"p-app_action_picker_add_app_shortcut_section__add-app-section"},k.a.createElement("div",null,a?wr.t("This feature is in beta. More apps with shortcuts coming soon."):"")):k.a.createElement(pr["e"],{className:"p-app_action_picker_add_app_shortcut_section__add-app-section"},k.a.createElement("div",{className:"p-app_action_picker_add_app_shortcut_section__add-app-wrapper"},k.a.createElement(Xe["b"],{type:"plus-square-o"}),k.a.createElement("div",{className:"p-app_action_picker_add_app_shortcut_section__add-app-title-container"},k.a.createElement("strong",null,a?wr.t("Add these apps and their shortcuts"):""))),!r&&k.a.createElement(Cr["a"],{href:"/apps/A6NL8MJ6Q",className:"p-app_action_picker_add_app_shortcut_section__app-link"},k.a.createElement("div",{className:"p-app_action_picker_add_app_shortcut_section__app-container"},k.a.createElement("div",{className:"p-app_action_picker_add_app_shortcut_section__app-text"},k.a.createElement("strong",null,"Google Drive"),"Create and share documents, sheets, and slides"),k.a.createElement("img",{src:"/img/services/gdrive_72.png",height:"36",width:"36",alt:""}))),!n&&k.a.createElement(Cr["a"],{href:"/apps/A0F827J2C",className:"p-app_action_picker_add_app_shortcut_section__app-link"},k.a.createElement("div",{className:"p-app_action_picker_add_app_shortcut_section__app-container"},k.a.createElement("div",{className:"p-app_action_picker_add_app_shortcut_section__app-text"},k.a.createElement("strong",null,"Giphy"),"Find and post a gif"),k.a.createElement("img",{src:"/img/services/giphy_72.png",height:"36",width:"36",alt:""}))))};jr.defaultProps={featureDangerouslyGuardIATranslations:false,isGDriveEnabled:false};var Ir=function e(t){return{featureDangerouslyGuardIATranslations:Object(At["e"])(t),isGDriveEnabled:Object(lr["a"])(t,"gdrive_enabled_team")}};var Tr=Object(j["connect"])(Ir,null)(jr);var Ar=a(2960);var Nr=new se["b"]("app_action_picker");var Pr=function e(t){var a=t.addChannelActionWithWorkflowBuilder,r=t.channelId,n=t.canCreateWorkflows,i=t.featureDangerouslyGuardIATranslations,s=t.isGiphyEnabled,o=t.onAdd,l=t.clogger;var c=Object(O["useCallback"])(function(){a(r);l.track(vt["EventId"].APP_SHORTCUTS,{contexts:{ui_context:{action:vt["UiAction"].CLICK,ui_properties:{element_name:Oa}}}});o()},[a,r,o,l]);return k.a.createElement(pr["b"],{labelledby:"app-action-add-action__title-bar",describedby:"app-action-add-action__modal-content"},k.a.createElement(pr["h"],null,k.a.createElement(pr["j"],{className:"p-app_action_picker_add_shortcut_modal__add-channel-action-title",id:"app-action-add-action__title-bar",title:i?Nr.t("Add shortcuts"):""})),k.a.createElement(pr["d"],null,n&&k.a.createElement(pr["e"],{className:"p-app_action_picker_add_shortcut_modal__add-channel-action-section"},k.a.createElement(Xe["b"],{type:"magic"}),k.a.createElement("div",{className:"p-app_action_picker_add_shortcut_modal__add-channel-action-text-container"},k.a.createElement("div",null,k.a.createElement("strong",null,i?Nr.rt("Add a custom shortcut to {channelName}",{channelName:k.a.createElement(dr["a"],{channelId:r})}):"")),k.a.createElement("div",{id:"app-action-add-action__modal-content"},i?Nr.t("With Workflow Builder, you can make and add your own shortcut for something you and your team do every day."):""),k.a.createElement(Je["d"],{"aria-label":i?Nr.t("Get started with shortcuts",{fallbackHash:"90e40d504340834d9e79a4d800e45283591c5927"}):"",type:"outline",className:"p-app_action_picker_add_shortcut_modal__add-channel-action-button",onClick:c},i?Nr.t("Get Started",{fallbackHash:"90e40d504340834d9e79a4d800e45283591c5927"}):""))),k.a.createElement(Tr,{isGiphyEnabled:s})))};Pr.displayName="AppActionPickerAddShortcutModal";Pr.defaultProps={channelId:null,featureDangerouslyGuardIATranslations:false,onAdd:_["noop"],clogger:{track:_["noop"]}};var Mr=function e(t){return{featureDangerouslyGuardIATranslations:Object(At["e"])(t),clogger:Object(_t["a"])({state:t})}};var Dr={addChannelActionWithWorkflowBuilder:function e(){return Er.apply(void 0,arguments)}};var xr=Object(j["connect"])(Mr,Dr)(Pr);var Rr=new se["b"]("app_action_picker");var Fr=function e(t){var a=t.activeRowIndex,r=t.canCreateWorkflows,n=t.channelId,i=t.commands,s=t.featureDangerouslyGuardIATranslations,o=t.filterQuery,l=t.isExpanded,c=t.onAdd,u=t.onChange,d=t.openModal,p=t.selectId,m=t.shouldShowCreateButton,h=t.clogger;var v=Object(O["useState"])(false),f=Dt()(v,2),b=f[0],g=f[1];var y=!!i.find(function(e){return"/giphy"===e.name});Object(O["useEffect"])(function(){if(!b&&""!==o.trim()){h.track(vt["EventId"].APP_SHORTCUTS,{contexts:{ui_context:{action:vt["UiAction"].SEARCH,ui_properties:{element_type:vt["ElementType"].INPUT,element_name:ga}}}});g(true)}},[b,o,h]);var E=Object(O["useCallback"])(function(){h.track(vt["EventId"].APP_SHORTCUTS,{contexts:{ui_context:{action:vt["UiAction"].CLICK,ui_properties:{element_type:vt["ElementType"].BUTTON,element_name:Ea}}}});d({element:k.a.createElement(xr,{canCreateWorkflows:r,channelId:n,isGiphyEnabled:y,onAdd:c})});c()},[r,n,y,d,c,h]);var C=l&&Object(_["isNumber"])(a)?Object(or["a"])(p,"option_"+a):null;if(l&&s)return k.a.createElement("div",{className:"p-app_action_picker_search_input_wrapper"},k.a.createElement(sr["a"],{className:"p-app_action_picker_search_input",focusOnMount:true,value:o,onChange:u,role:"combobox","aria-activedescendant":C,"aria-autocomplete":"list","aria-expanded":l,"aria-owns":Object(or["a"])(p,"listbox"),autoComplete:"off",placeholder:Rr.t("Search shortcuts",{fallbackHash:"e57e14d22c217f85541eeb008abd59538e5db875"}),id:p,icon:"search-medium",name:p}),m&&k.a.createElement(Je["d"],{"aria-label":Rr.t("Add shortcuts"),className:"p-app_action_picker_search_input__add",type:"outline",onClick:E,"data-qa":"channel_action_section__create_action_cta",size:"small"},Rr.t("Add")));return null};Fr.defaultProps={onAdd:_["noop"],isExpanded:false,activeRowIndex:null,channelId:null,filterQuery:"",featureDangerouslyGuardIATranslations:false,shouldShowCreateButton:false,canCreateWorkflows:false,commands:[],clogger:{}};var Lr=function e(t,a){var r=a.channelId,n=a.commands;var i=Object(Jt["e"])(t,r);var s=Object(lr["a"])(t,"gdrive_enabled_team")&&!!n.find(function(e){return"/giphy"===e.name});return{canCreateWorkflows:Object(ur["a"])(t),featureDangerouslyGuardIATranslations:Object(At["e"])(t),shouldShowCreateButton:(Object(ur["a"])(t)||!s)&&Object(Zt["isMemberOfChannel"])(i)&&(Object(Zt["isPrivateChannel"])(i)||Object(Zt["isPublicChannel"])(i)),clogger:Object(_t["a"])({state:t})}};var Ur={openModal:function e(){return G["openModal"].apply(void 0,arguments)}};var Br=Object(j["connect"])(Lr,Ur)(Fr);var qr=a(460);var Gr=a(4758);var Hr=a(4739);var Wr=a(875);var Vr=a(1221);var Kr=a(2765);var zr=a(5061);var Qr=a(1212);var Yr=a(27);var Jr=a(33);var Xr=a(205);var Zr=a(927);function $r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function en(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?$r(Object(a),true).forEach(function(t){s()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):$r(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var tn=k.a.lazy(function(){return Promise.resolve().then(a.bind(null,2860))});var an=k.a.lazy(function(){return Promise.resolve().then(a.bind(null,4842))});var rn=new It["a"]("app_action_picker");var nn=Object(Z["b"])("run the /remind command without args",function(e,t,a){var r=a.channelId,n=a.threadTs;var i=(new T.a).insert("/remind ");e(Object(Hr["a"])({channelId:r,threadTs:n,delta:i}))});nn.meta={name:"setReminder",key:"componentsWIPIaAppActionPickerLocalGlobalActionsSetReminder",description:"run the /remind command without args"};nn.propTypes={channelId:y["default"].string.isRequired,threadTs:y["default"].string};var sn=Object(Z["b"])("start a call, but ask first",function(e,t,a){var r=a.channelId;var n=t();var i=Object(Jt["e"])(n,r);Object(Zt["isIm"])(i)?e(Object(qr["d"])({appId:Xr["e"],type:Zr["a"].video,channelId:r})):e(Object(Vr["a"])({element:k.a.createElement(tn,{channelId:i.id,appId:Xr["e"],type:Zr["a"].video})}))});sn.meta={name:"cautiouslyStartCall",key:"componentsWIPIaAppActionPickerLocalGlobalActionsCautiouslyStartCall",description:"start a call, but ask first"};sn.propTypes={channelId:y["default"].string.isRequired};var on=Object(Z["b"])("open a fake giphy modal",function(e,t,a){var r=a.channelId,n=a.threadTs;return e(Object(Vr["a"])({element:k.a.createElement(an,{channelId:r,threadTs:n})}))});on.meta={name:"openFakeGiphyModal",key:"componentsWIPIaAppActionPickerLocalGlobalActionsOpenFakeGiphyModal",description:"open a fake giphy modal"};on.propTypes={channelId:y["default"].string.isRequired,threadTs:y["default"].string};var ln=Object(Z["b"])("create a snippet (using a fake global action)",function(e,t,a){var r,n,i,s;var o=a.channelId,l=a.threadTs,c=a.viewContext;var u=Object(Yt["a"])({viewContext:c,channelId:o,threadTs:l});e(Object(Y["a"])({initialText:null!==(r=null===u||void 0===u?void 0:null===(n=u.getDisplayValue)||void 0===n?void 0:n.call(u))&&void 0!==r?r:"",initialContents:null!==(i=null===u||void 0===u?void 0:null===(s=u.getContents)||void 0===s?void 0:s.call(u))&&void 0!==i?i:void 0,initialChannelId:o,threadTs:l,viewContext:c}));u&&u.clear()});ln.meta={name:"createSnippet",key:"componentsWIPIaAppActionPickerLocalGlobalActionsCreateSnippet",description:"create a snippet (using a fake global action)"};ln.propTypes={channelId:y["default"].string.isRequired,threadTs:y["default"].string,viewContext:y["default"].string};var cn=[{id:"slack-set-a-reminder",type:"global_action",getName:function e(t){var a=t.featureDangerouslyGuardIATranslations;return a?rn.t("Set myself a reminder"):""},appName:"Slack",worksInThreads:false,isEnabled:function e(t){var a=t.channelId;return!!a},app:{icons:{image_48:"/img/slack_logo_mark.svg"}},action:nn},{id:"slack-start-a-call",type:"global_action",getName:function e(t){var a=t.featureDangerouslyGuardIATranslations;return a?rn.t("Start a call"):""},appName:"Slack",worksInThreads:false,isEnabled:function e(t){var a=t.canStartCall,r=t.channelId,n=t.isFreeTeam;return a&&!!r&&!n},app:{icons:{image_48:"/img/slack_logo_mark.svg"}},action:sn},{id:"slack-create-a-post",type:"global_action",getName:function e(t){var a=t.featureDangerouslyGuardIATranslations;return a?rn.t("Create a post"):""},appName:"Slack",worksInThreads:true,isEnabled:function e(){return true},app:{icons:{image_48:"/img/slack_logo_mark.svg"}},action:Gr["a"]},{id:"slack-create-a-snippet",type:"global_action",getName:function e(t){var a=t.featureDangerouslyGuardIATranslations;return a?rn.t("Create a code or text snippet"):""},appName:"Slack",worksInThreads:true,isEnabled:function e(){return true},app:{icons:{image_48:"/img/slack_logo_mark.svg"}},action:ln}];var un=[{id:"giphy-find-and-share-a-gif",type:"global_action",getName:function e(t){var a=t.featureDangerouslyGuardIATranslations;return a?rn.t("Find and share a gif"):""},appName:"Giphy",worksInThreads:true,isEnabled:function e(t){var a=t.channelId,r=t.isGiphyEnabled;return!!a&&r},app:{icons:{image_48:"/img/services/giphy_48.png"}},action:on},{id:"gdrive-create-doc",type:"global_action",getName:function e(t){var a=t.featureDangerouslyGuardIATranslations;return a?rn.t("Create a new document"):""},appName:"Google Drive",worksInThreads:true,isEnabled:function e(t){var a=t.teamPrefs;return a.gdrive_enabled_team},app:{icons:{image_48:"/img/services/gdrive_48.png"}},action:function e(t){var a=t.threadTs,r=t.channelId;return Object(Kr["a"])({type:"document",displayType:"Document",initialChannelId:r,threadTs:a})}},{id:"gdrive-create-spreadsheet",type:"global_action",getName:function e(t){var a=t.featureDangerouslyGuardIATranslations;return a?rn.t("Create a new spreadsheet"):""},appName:"Google Drive",worksInThreads:true,isEnabled:function e(t){var a=t.teamPrefs;return a.gdrive_enabled_team},app:{icons:{image_48:"/img/services/gdrive_48.png"}},action:function e(t){var a=t.threadTs,r=t.channelId;return Object(Kr["a"])({type:"spreadsheet",displayType:"Spreadsheet",initialChannelId:r,threadTs:a})}},{id:"gdrive-create-presentation",type:"global_action",getName:function e(t){var a=t.featureDangerouslyGuardIATranslations;return a?rn.t("Create a new presentation"):""},appName:"Google Drive",worksInThreads:true,isEnabled:function e(t){var a=t.teamPrefs;return a.gdrive_enabled_team},app:{icons:{image_48:"/img/services/gdrive_48.png"}},action:function e(t){var a=t.threadTs,r=t.channelId;return Object(Kr["a"])({type:"presentation",displayType:"Presentation",initialChannelId:r,threadTs:a})}}];var dn=Object(Wr["a"])(function(e,t){return t},function(e,t,a){return a},function(e,t,a,r){return r.some(function(e){return"/giphy"===e.name})},function(e){var t;return null===e||void 0===e?void 0:null===(t=e.prefs)||void 0===t?void 0:t.team},function(e){return Object(P["getFeatureFlags"])(e)},function(e,t){return Object(Qr["d"])(e,Object(Jt["e"])(e,t))},function(e){return Object(At["e"])(e)},function(e){return"Pcomposer"===Object(Xt["a"])(e)},function(e){return Object(Yr["isOnFreePlan"])(Object(Jr["d"])(e))},function(e,t,a,r,n,i,s,o,l){var c=!!t;var u=Object(_["mapKeys"])(n,function(e,t){return Object(zr["a"])(t)});var d={channelId:e,threadTs:t,teamPrefs:r,featureFlags:u,canStartCall:i,featureDangerouslyGuardIATranslations:s,isComposerView:o,isGiphyEnabled:a,isFreeTeam:l};var p=cn.reduce(function(e,t){var a,r;var n=null!==(a=null===t||void 0===t?void 0:null===(r=t.isEnabled)||void 0===r?void 0:r.call(t,d))&&void 0!==a&&a;if(n&&(!c||t.worksInThreads))return e.concat(en({},t,{name:t.getName(d)}));return e},[]);var m=un.reduce(function(e,t){var a,r;var n=null!==(a=null===t||void 0===t?void 0:null===(r=t.isEnabled)||void 0===r?void 0:r.call(t,d))&&void 0!==a&&a;if(n&&(!c||t.worksInThreads))return e.concat(en({},t,{name:t.getName(d)}));return e},[]);return{slackGlobalActions:p,fakeGlobalActions:m}});var pn=a(5210);function mn(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function hn(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?mn(Object(a),true).forEach(function(t){s()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):mn(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var vn="app_action_picker_select";var fn=new It["a"]("app_action_picker");var bn=Object(O["memo"])(function(e){var t=e.channelActions,a=e.channelId,r=e.channelName,n=e.commands,i=e.dispatch,s=e.featureDangerouslyGuardIATranslations,o=e.slackGlobalActions,l=e.fakeGlobalActions,c=e.initialFilterValue,u=e.onSelected,d=e.runChannelAction,p=e.threadTs,m=e.viewContext,h=e.globalActionsV2,v=e.fetchAndUpsertActions,f=e.isComposerView,b=e.clogger,g=e.featureAppActionSlashCommandsPad1042,y=e.topLevelTeamId;Object(O["useEffect"])(function(){var e=v();return function(){e.cancel()}},[v]);var E=Object(O["useState"])({selectedOption:null,activeRowIndex:null,filterQuery:c,isExpanded:true}),C=Dt()(E,2),S=C[0],w=C[1];var j=Object(O["useState"])({showSlashCommands:false}),I=Dt()(j,2),A=I[0],N=I[1];var P=s?fn.t("Workflow"):"";var M=s?fn.t("Slash commands"):"";var D=Object(O["useMemo"])(function(){return Ia({channelActions:t,channelName:r,appName:P,topLevelTeamId:y,featureDangerouslyGuardIATranslations:s})},[t,r,P,y,s]);var x=Object(O["useMemo"])(function(){return Ta(o)},[o]);var R=Object(O["useMemo"])(function(){return Ta(l)},[l]);var F=Object(O["useMemo"])(function(){return Aa(h)},[h]);var L=Object(O["useMemo"])(function(){return Na(f||g&&!A.showSlashCommands?[]:n,M)},[n,M,f,A.showSlashCommands,g]);var U=Object(O["useCallback"])(function(e,t){var a=e.isFromExternalTeam;var r=t.isFromExternalTeam;if(a)return 1;if(r)return-1;return 0},[]);var B=Object(O["useCallback"])(function(e,t){var a=e.label;var r=t.label;return Object($t["a"])(a,r)},[]);var q=Object(O["useMemo"])(function(){return wa([].concat(fe()(D.sort(U)),fe()(x),fe()([].concat(fe()(R),fe()(F)).sort(B)),[L]),S.filterQuery)},[D,U,x,R,F,B,L,S.filterQuery]);var G=Object(O["useCallback"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;var a=e();w(function(e){return hn({},e,{},a)});t&&t()},[]);var H=Object(O["useCallback"])(function(e){var t=false;Sa(e)&&(t=true);w(function(t){return hn({},t,{filterQuery:e})});g&&N(function(e){return hn({},e,{showSlashCommands:t})})},[g]);var W=Object(O["useCallback"])(function(e){var t=Object(Qt["f"])(e);var r=Object(Yt["a"])({viewContext:m,channelId:a,threadTs:p});r.prependContents({contents:(new T.a).insert(t+" ").ops});r.setCursorAtEnd()},[a,p,m]);var V=Object(O["useCallback"])(function(e){var t={};t.type=e.type;var r=e.type===fa;if(r){u();var n=Pa(e);W(n);t.app_id=Object(Qt["c"])(n);t.trigger_id=Object(Qt["d"])(n)}else if(e.type===ma){var s=e.action;t.trigger_id=s.id;d({appId:s.appId,actionId:s.id,actionName:s.name,channelId:a});u()}else if(e.type===ha){var o=e.action;t.app_name=null===o||void 0===o?void 0:o.appName;t.trigger_id=null===o||void 0===o?void 0:o.id;i(o.action({channelId:a,threadTs:p,viewContext:m}));u()}else if(e.type===va){var l=e.action;t.app_id=l.app_id;t.action_id=l.id;t.trigger_id=l.id;t.callback_id=l.callback_id;i(Object(Kt["a"])({actionId:l.id,appId:l.app_id,referrer:"app-action-picker"}));u()}b.track(vt["EventId"].APP_SHORTCUTS,hn({contexts:{ui_context:{action:vt["UiAction"].CLICK,ui_properties:{element_name:r?Ca:_a}}}},t))},[u,W,d,a,i,p,m,b]);var K=Object(O["useCallback"])(function(e,t){var r=t.isActive;return k.a.createElement($a,{channelId:a,option:e,isActive:r})},[a]);var z=Object(O["useCallback"])(function(e){return k.a.createElement(ir,{filterQuery:e,onSelected:u})},[u]);var Q=Object(O["useCallback"])(function(){return{height:window.innerHeight-ca-2*la,width:window.innerWidth-2*la}},[]);var Y=Object(O["useState"])(Q()),J=Dt()(Y,2),X=J[0],Z=J[1];var $=Object(O["useCallback"])(Object(_["debounce"])(function(){Z(Q())},50),[]);Object(O["useEffect"])(function(){window.addEventListener("resize",$);return function(){return window.removeEventListener("resize",$)}},[$]);var ee=Math.min(X.width,ua);var te=Math.min(X.height,pa);return k.a.createElement("div",{className:"p-app_action_picker"},k.a.createElement(Br,{channelId:a,filterQuery:S.filterQuery,onChange:H,selectId:vn,activeRowIndex:S.activeRowIndex,isExpanded:S.isExpanded,onAdd:u,commands:n}),S.isExpanded&&k.a.createElement(zt["a"],{width:ee,maxListHeight:te,onOptionSelected:V,renderOption:K,selectState:hn({},S,{options:q,selectId:vn,isRequired:true}),emptyStateMessage:z,setSelectState:G,shouldIncludeActiveOption:true}))});bn.displayName="AppActionPicker";bn.defaultProps={channelActions:[],commands:[],featureDangerouslyGuardIATranslations:false,slackGlobalActions:[],fakeGlobalActions:[],globalActionsV2:{},initialFilterValue:"",onSelected:_["noop"],threadTs:null,isComposerView:false,clogger:{},featureAppActionSlashCommandsPad1042:false};var gn=function e(t,a){var r=a.channelId,n=a.threadTs;var i=Object(xt["a"])(t,r,n&&n.length>0);var s=Object(P["isFeatureEnabled"])(t,"feature_app_action_slash_commands_pad1042");var o=Object(xt["c"])(t);var l="Pcomposer"===Object(Xt["a"])(t);var c=n?void 0:Object(St["a"])(t,r);var u=dn(t,r,n,i),d=u.slackGlobalActions,p=u.fakeGlobalActions;var m=Object(jt["a"])(t);var h=Object(Jt["e"])(t,r);var v=Object(Zt["getDisplayNameForChannel"])(t,h);var f=Object(At["e"])(t);return{cacheTs:o,channelId:r,channelName:v,commands:i,channelActions:c,slackGlobalActions:d,fakeGlobalActions:p,globalActionsV2:m,featureDangerouslyGuardIATranslations:f,featureAppActionSlashCommandsPad1042:s,isComposerView:l,clogger:Object(_t["a"])({state:t}),topLevelTeamId:Object(N["c"])(t)}};var _n=function e(t){return{runChannelAction:function e(a){return t(Vt(a))},fetchAndUpsertActions:function e(){return t(Kt["b"].apply(void 0,arguments))},dispatch:t}};var yn=Object(j["connect"])(gn,_n,null,{areStatePropsEqual:function e(t,a){return t.cacheTs===a.cacheTs&&t.channelId===a.channelId&&t.channelName===a.channelName&&t.channelActions===a.channelActions&&t.slackGlobalActions===a.slackGlobalActions&&t.fakeGlobalActions===a.fakeGlobalActions&&t.globalActionsV2===a.globalActionsV2&&t.featureDangerouslyGuardIATranslations===a.featureDangerouslyGuardIATranslations&&t.isComposerView===a.isComposerView}})(bn);var On=new se["b"]("app_action_picker");var kn={channelId:null,offsetX:-9,offsetY:-5,position:"top-right",onClick:_["noop"],onClose:_["noop"],onOpen:_["noop"],forceOpen:false,featureDangerouslyGuardIATranslations:false,initialFilterValue:"",threadTs:null,containerRef:null,dispatchedSetShouldOpenAppActionPicker:_["noop"]};var En=function e(t){var a=t.channelId,r=t.children,i=t.containerRef,s=t.featureDangerouslyGuardIATranslations,o=t.forceOpen,l=t.initialFilterValue,c=t.offsetX,u=t.offsetY,d=t.onClick,p=t.onClose,m=t.onOpen,h=t.position,v=t.threadTs,f=t.viewContext,b=t.dispatchedSetShouldOpenAppActionPicker,g=Et()(t,["channelId","children","containerRef","featureDangerouslyGuardIATranslations","forceOpen","initialFilterValue","offsetX","offsetY","onClick","onClose","onOpen","position","threadTs","viewContext","dispatchedSetShouldOpenAppActionPicker"]);var _=function e(){b({shouldOpen:false,viewContext:"",threadTs:""});p()};return k.a.createElement(Nt["b"],n()({},g,{ariaHasPopup:true,onClick:d,onClose:_,forceOpen:o,renderPopover:function e(t){return k.a.createElement(Nt["a"],n()({shouldFade:false,allowanceX:la,allowanceY:la,position:h,offsetX:c,offsetY:u,ariaLabel:s?On.t("Shortcuts",{fallbackHash:"e47e804262aa8131a62f0b23fccce47a48b6d429"}):"",ariaRole:"dialog",onOpen:m},t),k.a.createElement(yn,{channelId:a,onSelected:t.onClose,initialFilterValue:l,threadTs:v,viewContext:f,containerRef:i}))}}),r)};En.displayName="AppActionPickerTrigger";En.defaultProps=kn;var Cn=function e(t){return{featureDangerouslyGuardIATranslations:Object(At["e"])(t)}};var Sn=function e(t){return{dispatchedSetShouldOpenAppActionPicker:function e(){return t(Pt["e"].apply(void 0,arguments))}}};var wn=Object(j["connect"])(Cn,Sn)(En);var jn=a(5212);var In=new It["a"]("app_action_picker");var Tn=Object(O["forwardRef"])(function(e,t){var a=e.teamId,r=e.channelId,i=e.channelActionsCount,s=e.viewContext,o=e.tabIndex,l=e.featureDangerouslyGuardIATranslations,c=e.forceOpen,u=e.isDisabled,d=e.shouldForceAppActionPickerOpen,p=e.clogger,m=e.onClick,h=e.isIAP1Enabled,v=Et()(e,["teamId","channelId","channelActionsCount","viewContext","tabIndex","featureDangerouslyGuardIATranslations","forceOpen","isDisabled","shouldForceAppActionPickerOpen","clogger","onClick","isIAP1Enabled"]);Object(O["useEffect"])(function(){i>0&&Object(wt["b"])(a,r)},[a,r,i]);var f=Object(O["useCallback"])(function(){p.track(vt["EventId"].APP_SHORTCUTS_MENU_OPEN,{referrer:s,contexts:{ui_context:{action:vt["UiAction"].CLICK,ui_properties:{element_type:vt["ElementType"].BUTTON,element_name:ya}}},is_iap1:h});m()},[m,p,s,h]);var b=i>0;var g=w()("p-app_action_picker_trigger_button",{"p-app_action_picker_trigger_button--highlighted":b});var _=b?"bolt-filled":"bolt";var y=Object(O["useCallback"])(function(){return l?In.t("Shortcuts"):""},[l]);var E=Object(O["useCallback"])(function(){return l?In.t("{channelActionsCount, plural, =1 {# workflow} other {# workflows}}",{channelActionsCount:i}):""},[i,l]);var C=Object(O["useCallback"])(function(){var e=y();var t=E();if(!b)return e;return k.a.createElement(k.a.Fragment,null,e,k.a.createElement("div",{className:"sk_foreground_high_solid"},t))},[b,y,E]);var S=Object(O["useCallback"])(function(){var e=y();var t=E();if(!b)return e;return e+", "+t},[b,y,E]);var j=c||d;return k.a.createElement("div",{className:"p-app_action_picker_trigger_button_left_column"},k.a.createElement("div",{className:w()("p-app_action_picker_trigger_button_container",{"p-app_action_picker_trigger_button_container--disabled":u})},k.a.createElement(wn,n()({position:"top-left",channelId:r,viewContext:s,onClick:f,forceOpen:j},v),k.a.createElement(Tt["c"],{tip:C(),position:"top-left",offsetY:-7},k.a.createElement(Ct["a"],{"aria-label":S(),ref:t,className:g,icon:_,size:"small",tabIndex:u?-1:o})))))});Tn.defaultProps={channelActionsCount:null,tabIndex:void 0,featureDangerouslyGuardIATranslations:false,isIAP1Enabled:false,onClick:_["noop"],clogger:{track:_["noop"]},forceOpen:false,isDisabled:false,shouldForceAppActionPickerOpen:false};Tn.displayName="AppActionPickerTriggerButton";var An=function e(t,a){var r=a.channelId,n=a.threadTs,i=a.viewContext;var s=Object(jt["f"])(t);var o=Object(jt["d"])(t);var l=Object(jt["c"])(t);var c=!n||n===l;var u=o===i&&c&&s;return{channelActionsCount:n?0:Object(St["c"])(t,r),teamId:Object(N["b"])(t),featureDangerouslyGuardIATranslations:Object(At["e"])(t),isIAP1Enabled:Object(At["e"])(t),clogger:Object(_t["a"])({state:t}),shouldForceAppActionPickerOpen:u}};var Nn=Object(j["connect"])(An)(Tn);var Pn=a(5173);var Mn=Pn["a"];var Dn=a(2807);var xn=a(751);var Rn=a(22);var Fn=a(1312);var Ln=a(1446);function Un(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function Bn(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Un(Object(a),true).forEach(function(t){s()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Un(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var qn=new se["b"]("offline_mode");var Gn=new se["b"]("msg_input");var Hn=function e(t){if(!t)return"";var a=document.createElement("span");a.innerHTML=t;return a.textContent.trim()};var Wn={channelId:void 0,teamId:void 0,threadTs:void 0,viewContext:void 0,placeholder:void 0,sendMessage:function e(){return Promise.resolve()},className:void 0,autocompleteProps:void 0,enableEmojiButton:false,enableFileButton:true,enableActionsButton:false,enableSnippetCreation:true,enableMentionButton:false,enableComposerButton:false,enableSendButton:false,enableBroadcastKeywords:true,enableJumbomoji:false,enableExpandButton:false,arrowHistory:false,useSendButton:false,isDisabled:false,isSendingDisabled:false,isExpanded:false,maxLines:void 0,focusOnMount:false,focusOnPaste:false,draft:void 0,draftDelay:1e3,setChannelDraft:_["noop"],clearChannelDraft:_["noop"],setComposerDraft:_["noop"],clearDrafts:_["noop"],editLastMessage:_["noop"],openSnippetDialog:_["noop"],openFileUploadDialog:_["noop"],featureOfflineMode:false,featureSonicInputs:false,wasRecentlyOnline:false,isClientOnline:false,onTextChange:_["noop"],onSelectionChange:_["noop"],onExpand:_["noop"],onTab:function e(){return true},onDraftUpdate:_["noop"],onFocus:_["noop"],onBlur:_["noop"],enqueueToast:_["noop"],openModal:_["noop"],maxLength:void 0,showFocusOutline:false,additionalDraftContent:void 0,onDraftRestore:_["noop"],onSendError:_["noop"],triggerNavigateBack:_["noop"],triggerNavigateForward:_["noop"],shouldShowTractorFilesCoachmark:false,setTractorFilesCoachmarkVisibility:_["noop"],ariaDescribedBy:void 0,clientTheme:"light",isComposerPage:false,composerDraft:void 0,featureUnifiedDrafts:false,unifiedDraftId:void 0,unifiedDraft:void 0,featureFilesInInput:false,onUpArrow:_["noop"],onDownArrowWhenEmpty:_["noop"],featureMessageNavigationShortcuts:false,featureWysiwygAnchorText:false,featureLiveUnfurls:false,fetchDraftUnfurlData:_["noop"],completeDraftUnfurls:void 0,hasKeyboardFocus:false,uploadDraftFiles:_["noop"],pendingFileIds:[],setUserPrefByApi:_["noop"],openContextualMessageShortcutsModal:_["noop"],contextualMessageShortcutsModalWasSeen:false,screenReaderIsEnabled:false,upToBrowseKbShortcutPref:false,onDoubleDeckerToggled:_["noop"],isAtMaximumFilesAllowed:false};var Vn=function(e){g()(t,e);function t(e){var a;l()(this,t);a=p()(this,h()(t).call(this,e));Object(A["a"])(f()(a),["onEnter","onFileMenuClose","onFileMenuOpen","onLeftWhenEmpty","onPlusMenuShortcut","onCmdLeftWhenEmpty","onCmdRightWhenEmpty","onPasteLimit","onTextChange","onSelectionChange","onUpArrow","onTextyInputMount","onFilesSelected","openSnippetDialog","renderInput","renderModernAutocomplete","renderFileButton","renderActionButton","renderFileMenu"]);a.isFlushingDraftFromChannelSwitch=false;a.state={isPlusMenuOpen:false,forcePlusMenuOpen:false,isFilesContainerReady:false};a.getComputedModules=Object(ht["a"])(function(e,t,a,r){var n=Object(Ln["a"])({featureWysiwygAnchorText:a});return Bn({},e,{composer:Bn({},n,{teamId:t}),slacklink:{convertImages:false,disableLinksWithLabels:!a},slackmarkdown:{convertHeaders:false,convertHorizontalRule:false},composerattachments:r})});return a}u()(t,[{key:"componentDidMount",value:function e(){this.handlePropChanges({isMount:true});this.maybeFocusInput()}},{key:"componentDidUpdate",value:function e(t){this.handlePropChanges({prevProps:t});this.maybeFocusInput(t)}},{key:"componentWillUnmount",value:function e(){this.updateDraftThrottled&&this.updateDraftThrottled.flush()}},{key:"onCmdLeftWhenEmpty",value:function e(){this.props.logger.info("MESSAGE-INPUT","onCmdLeftWhenEmpty");this.props.triggerNavigateBack({fromKeyboardShortcut:true})}},{key:"onCmdRightWhenEmpty",value:function e(){this.props.logger.info("MESSAGE-INPUT","onCmdRightWhenEmpty");this.props.triggerNavigateForward({fromKeyboardShortcut:true})}},{key:"onDraftUpdate",value:function e(){var t=this.props,e=t.onDraftUpdate,a=t.unifiedDraftId,r=t.featureLiveUnfurls;var n=this.getInputRef();var i=n.getContents().contents;var s=n.getSelection();e({ops:i,range:s});r&&this.props.fetchDraftUnfurlData(a)}},{key:"onEnter",value:function e(t){var a=t.metaKey,r=t.ctrlKey,n=t.shiftKey;var i=this.props,s=i.sendMessage,o=i.featureOfflineMode,l=i.featureSonicInputs,c=i.wasRecentlyOnline,u=i.enableSnippetCreation,d=i.onSendError;var p=this.getInputRef();if(!p)return false;if(this.isSendingDisabled()&&!n)return false;this.updateDraftThrottled.cancel();if(o&&!c){var m=qn;this.props.enqueueToast({element:k.a.createElement(bt["b"],{ariaAssertive:true,position:"top-right",icon:"cloud-offline-small"},k.a.createElement("span",null,k.a.createElement("strong",null,m.rt("No connection."))," ",m.rt("You\u2019ll be able to send messages as soon as you\u2019re back online.")))});return false}if(l&&u&&(Object(yt["isMac"])()&&a&&n||!Object(yt["isMac"])()&&r&&n)){this.openSnippetDialog();return false}if(this.isSendingDisabled()){d({reason:"send_disabled"});return false}s({fromKeyboardShortcut:true});return false}},{key:"onFileMenuClose",value:function e(){this.setState(function(){return{isPlusMenuOpen:false,forcePlusMenuOpen:false}})}},{key:"onFileMenuOpen",value:function e(){var t=this.props.isAtMaximumFilesAllowed;if(t)return;this.setState(function(){return{isPlusMenuOpen:true}});var a=this.props.clogger;var r={contexts:{growth:{action:"click",trigger:"plus_menu_button"}}};a.track("PFP_ACTION",r)}},{key:"onFilesSelected",value:function e(t){var a=this.props,r=a.composerDraft,n=a.unifiedDraft,i=a.unifiedDraftId,s=a.isComposerPage,o=a.channelId,l=a.threadTs,c=a.viewContext,u=a.featureUnifiedDrafts,d=a.featureFilesInInput;if(s||d){var p=u?n:r;var m=u?i:Object(ee["d"])(p);this.props.uploadDraftFiles({draftId:m,files:t})}else{var h={fileUploadAction:vt["FileUploadAction"].PLUS_MENU,fileUploadSrc:vt["FileUploadSrc"].LOCAL};var v=Object(Yt["a"])({channelId:o,threadTs:l,viewContext:c});this.props.openFileUploadDialog({files:t,initialChannelId:o,threadTs:l,inputProxy:v,metadata:h})}}},{key:"onLeftWhenEmpty",value:function e(){this.setState(function(){return{isPlusMenuOpen:true,forcePlusMenuOpen:true}})}},{key:"onPasteLimit",value:function e(t,a){this.props.openModal({element:this.renderPasteLimitDialog(a),isStackable:true})}},{key:"onPlusMenuShortcut",value:function e(){this.setState(function(){return{isPlusMenuOpen:true,forcePlusMenuOpen:true}})}},{key:"onSelectionChange",value:function e(t){var e=this.props.onSelectionChange;e(t)}},{key:"onTextChange",value:function e(t,a){var e=this.props.onTextChange;var r=this.getInputRef();var n=r.value();var i=r.getContents().contents;this.updateOrClearDraft({inputRef:r});n||this.updateDraftThrottled.flush();e(n,i,a)}},{key:"onUpArrow",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var a=this.props,r=a.arrowHistory,n=a.featureOfflineMode,i=a.isClientOnline,s=a.featureMessageNavigationShortcuts,o=a.hasKeyboardFocus,l=a.upToBrowseKbShortcutPref;if(!Object(ft["a"])()&&r&&!t)return;var c=this.getInputRef();if(!c)return;if(!c.isEmpty())return;t?this.trackNavigationShortcut("cmd+up"):this.trackNavigationShortcut("up");var u=t?"cmd+up":"up";if(!s||s&&(t||!l)){var d=n&&!i;if(d)return;this.props.editLastMessage({keyboardShortcut:u,hasKeyboardFocus:o});return}this.props.onUpArrow(t)}},{key:"onTextyInputMount",value:function e(){this.props.featureFilesInInput&&!this.state.isFilesContainerReady&&this.setState(function(){return{isFilesContainerReady:true}})}},{key:"getInputRef",value:function e(){var t=this.props.refToForward;return t.current&&t.current.getWrappedInstance?t.current.getWrappedInstance():t.current}},{key:"setCursor",value:function e(){var t;(t=this.getInputRef()).setCursor.apply(t,arguments)}},{key:"setCursorAtEnd",value:function e(){var t;(t=this.getInputRef()).setCursorAtEnd.apply(t,arguments)}},{key:"isSendingDisabled",value:function e(){var t=this.props,a=t.isDisabled,e=t.isSendingDisabled;return a||e}},{key:"focus",value:function e(){var t=this.props.logger;var a=this.getInputRef();try{a.focus()}catch(e){t.error("MESSAGE-INPUT","maybeFocusInput caught error: "+(e&&e.message));e.stack&&t.error("MESSAGE-INPUT",e.stack)}}},{key:"shouldShowContextualMessageShortcutsModal",value:function e(){var t=this.props,a=t.featureMessageNavigationShortcuts,r=t.contextualMessageShortcutsModalWasSeen;if(!a)return false;if(r)return false;return true}},{key:"handlePropChanges",value:function e(t){var a=t.prevProps,r=void 0===a?{}:a,n=t.isMount;var i=this.props,s=i.channelId,o=i.threadTs,l=i.unifiedDraftId,c=i.unifiedDraft,u=i.composerDraft,d=i.draft,p=i.draftDelay,m=i.logger,h=i.onDraftRestore,v=i.additionalDraftContent,f=i.featureUnifiedDrafts,b=i.featureFilesInInput,g=i.isComposerPage;r.draftDelay!==p&&(this.updateDraftThrottled=Object(_["debounce"])(this.updateDraft,p));if(!n&&r.additionalDraftContent!==v){var y=this.getInputRef();this.updateOrClearDraft({inputRef:y})}if(f){var O=this.getInputRef();if(r.unifiedDraftId!==l){this.isFlushingDraftFromChannelSwitch=true;this.updateDraftThrottled.flush();this.isFlushingDraftFromChannelSwitch=false;if(c){O.value({contents:c.ops});if(!g){var k=Object(ee["e"])(c);Object(_["isNumber"])(k)?O.setCursor(k):O.setCursorAtEnd()}h(c)}else O.clear();O.clearHistory()}else b&&r.unifiedDraft&&!c&&!O.isEmpty()?O.clear():b&&!r.unifiedDraft&&c&&O.isEmpty()?O.value({contents:c.ops}):b&&(this.hasFiles()&&!this.hasFiles(r)||!this.hasFiles()&&this.hasFiles(r))&&this.updateOrClearDraft({inputRef:O,immediately:true});return}if(u&&u.id&&(!r.composerDraft||r.composerDraft.id!==u.id)){this.updateDraftThrottled.flush();var E=this.getInputRef();E.value({contents:u.ops});E.clearHistory()}if(!u&&(r.channelId!==s||r.threadTs!==o)){this.isFlushingDraftFromChannelSwitch=true;this.updateDraftThrottled.flush();this.isFlushingDraftFromChannelSwitch=false;var C=this.getInputRef();if(s)if(d){m.debug("DRAFT","Restoring draft to "+s);d.ops&&C.value({contents:d.ops});d.range&&C.setCursor(d.range.index,d.range.length);h(d)}else{m.debug("DRAFT","No draft, clearing input for "+s);C.clear()}C.clearHistory()}}},{key:"maybeFocusInput",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var a=this.props,r=a.channelId,n=a.threadTs,i=a.focusOnMount;if(!i)return;var s=i!==t.focusOnMount||r&&!n&&t.channelId!==r||n&&t.threadTs!==n;if(!s)return;this.focus()}},{key:"openSnippetDialog",value:function e(t){var a=this.props,r=a.channelId,n=a.threadTs,i=a.viewContext;var s=this.getInputRef();var o;var l;if(t&&t.ops){l={contents:t.ops};o=Object(he["a"])(l)}else{o=s?s.displayValue():"";l=s?s.getContents():void 0}this.props.openSnippetDialog({initialText:o,initialContents:l,initialChannelId:r,threadTs:n,viewContext:i});t||s.value("");return false}},{key:"trackNavigationShortcut",value:function e(t){var a,r;var n=this.props,i=n.clogger,o=n.viewContext,l=n.hasKeyboardFocus,c=n.screenReaderIsEnabled;i.track(vt["EventId"].CLIENT_KEYBOARD_SHORTCUTS,{contexts:s()({},vt["ClientEventKeys"].ui_context,(r={},s()(r,vt["UiContextKeys"].action,vt["UiAction"].KEYDOWN),s()(r,vt["UiContextKeys"].ui_properties,(a={},s()(a,vt["UiPropertiesKeys"].key,t),s()(a,vt["UiPropertiesKeys"].view_context,o),s()(a,vt["UiPropertiesKeys"].is_screen_reader_enabled,c),s()(a,vt["UiPropertiesKeys"].client_has_keyboard_focus,l),a)),r))})}},{key:"hasFiles",value:function e(t){var a=t||this.props,r=a.pendingFileIds,n=a.unifiedDraft,i=a.featureFilesInInput;return i&&(!Object(_["isEmpty"])(r)||!Object(_["isEmpty"])(Object(ee["i"])(n)))}},{key:"updateDraft",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.channelId,r=t.threadTs,n=t.delta;var i=this.props,s=i.additionalDraftContent,o=i.isComposerPage,l=i.featureFilesInInput,c=i.unifiedDraftId,u=i.featureLiveUnfurls;if(o){this.onDraftUpdate();return}var d=this.getInputRef();if(l){var p=Object(Q["d"])({channelId:a,threadTs:r});if(n){var m;var h={id:p,ops:n.ops,destinations:[{channel_id:a,thread_ts:r,broadcast:null===s||void 0===s?void 0:s.broadcast}],cursor_index:null===(m=d.getSelection())||void 0===m?void 0:m.index,is_from_composer:o};this.props.setComposerDraft(Bn({},h,{shouldWithold:!this.isFlushingDraftFromChannelSwitch}));u&&this.props.fetchDraftUnfurlData(c)}else this.props.clearDrafts({ids:[p]});return}n?this.props.setChannelDraft(Bn({channelId:a,threadTs:r,delta:n,range:d.getSelection(),shouldWithold:!this.isFlushingDraftFromChannelSwitch},s)):this.props.clearChannelDraft({channelId:a,threadTs:r})}},{key:"updateOrClearDraft",value:function e(t){var a=t.inputRef,r=t.immediately,n=void 0!==r&&r;var i=this.props,s=i.channelId,o=i.threadTs,l=i.logger,c=i.isComposerPage;var u=n?this.updateDraft.bind(this):this.updateDraftThrottled.bind(this);if(c){u();return}if(!s||!a)return;var d=a.getContents();var p=a.getLength()&&Object(_["trim"])(Object(pe["o"])(d.contents,{embedReplacement:"a"})).length;var m=this.hasFiles();if(p||m){var h=new T.a(d.contents);l.debug("DRAFT","Updating draft in "+s);u({channelId:s,threadTs:o,delta:h})}else{l.debug("DRAFT","Clearing draft for "+s);u({channelId:s,threadTs:o})}}},{key:"renderActionButton",value:function e(){var t=this.props,a=t.viewContext,r=t.enableActionsButton,n=t.channelId,i=t.threadTs,s=t.isDisabled;if(!r)return null;return k.a.createElement(Nn,{channelId:n,isDisabled:s,threadTs:i,viewContext:a})}},{key:"renderFiles",value:function e(){var t=this.props,a=t.unifiedDraft,r=t.composerDraft,n=t.pendingFileIds,i=t.featureUnifiedDrafts;var s=this.getInputRef();if(!s)return null;if(!a&&!r)return null;var o=Object(ee["i"])(a);var l=Object(ee["i"])(r);if(Object(_["isEmpty"])(o)&&Object(_["isEmpty"])(l)&&Object(_["isEmpty"])(n))return null;var c=s.container.querySelector(".ql-files");if(!c)return null;var u=i?Object(ee["d"])(a):Object(ee["d"])(r);var d=k.a.createElement(we,{className:"p-composer_page__files",draft:a||r,draftId:u});return C.a.createPortal(d,c)}},{key:"renderAttachments",value:function e(){var t=this.props,a=t.unifiedDraft,r=t.unifiedDraftId,n=t.composerDraft,i=t.pendingFileIds,s=t.completeDraftUnfurls,o=t.featureLiveUnfurls;if(!o)return null;if(!a)return null;var l=this.getInputRef();if(!l)return null;var c=Object(ee["i"])(a);var u=Object(ee["i"])(n);if(Object(_["isEmpty"])(c)&&Object(_["isEmpty"])(u)&&!i.length&&Object(_["isEmpty"])(s))return null;var d=l.container.querySelector(".ql-attachments");if(!d)return null;var p=k.a.createElement(pt,{draftId:r});return C.a.createPortal(p,d)}},{key:"renderInput",value:function e(t){var a=t.modules,r=t.isOpen;var n=this.props,i=n.placeholder,s=n.channelId,o=n.enableEmojiButton,l=n.enableMentionButton,c=n.enableComposerButton,u=n.enableSendButton,d=n.enableBroadcastKeywords,p=n.enableExpandButton,m=n.onFocus,h=n.onBlur,v=n.onExpand,f=n.onTab,b=n.refToForward,g=n.enableJumbomoji,_=n.isDisabled,y=n.isSendingDisabled,O=n.isExpanded,E=n.maxLines,C=n.threadTs,S=n.viewContext,w=n.maxLength,j=n.featureWysiwygAnchorText,I=n.featureLiveUnfurls,T=n.teamId,A=n.focusOnPaste,N=n.ariaDescribedBy,P=n.useSendButton,M=n.sendMessage,D=n.enableFileButton,x=n.enableActionsButton,R=n.onDoubleDeckerToggled;var F=Hn(i);var L=this.getComputedModules(a,T,j,I);var U=D&&x;return k.a.createElement(de["g"],{channelId:s,className:"p-message_input_field",ariaLabel:F,ariaDescribedBy:N,focusOnPaste:A,placeholder:i,onEnter:this.onEnter,onUpArrow:this.onUpArrow,onDownArrowWhenEmpty:this.props.onDownArrowWhenEmpty,onLeftWhenEmpty:this.onLeftWhenEmpty,onPlusMenuShortcut:this.onPlusMenuShortcut,onCmdLeftWhenEmpty:Object(ft["a"])()?this.onCmdLeftWhenEmpty:null,onCmdRightWhenEmpty:Object(ft["a"])()?this.onCmdRightWhenEmpty:null,onExpand:v,onTab:f,onFileMenuOpen:this.onFileMenuOpen,onFileMenuClose:this.onFileMenuClose,forceFileMenuOpen:this.state.forcePlusMenuOpen,"data-qa":"message_input","data-message-input":true,"data-channel-id":s,"data-thread-ts":C,"data-thread-key":C?Object(ne["getThreadKey"])(s,C):null,"data-view-context":S,ref:b,maxLines:E,modules:L,isAutocompleteOpen:r,isDisabled:_,isSendingDisabled:y,isExpanded:O,enableEmojiButton:o,enableMentionButton:l,enableComposerButton:c,enableSendButton:u,enableBroadcastKeywords:d,enableJumbomoji:g,enableExpandButton:p,enableFileButton:U,onFilesSelected:this.onFilesSelected,renderFileMenu:this.renderFileMenu,onTextChange:this.onTextChange,onSelectionChange:this.onSelectionChange,onFocus:m,onBlur:h,onPasteLimit:this.onPasteLimit,sendMessage:M,maxLength:w,useFocusRing:false,useSendButton:P,onMount:this.onTextyInputMount,onDoubleDeckerToggled:R})}},{key:"renderModernAutocomplete",value:function e(){var t=this;var a=this.props.autocompleteProps;return k.a.createElement(me["a"],n()({completeOnMembers:true,completeOnChannels:true,completeOnCommands:true,completeOnEmoji:true,channelId:this.props.channelId,threadTs:this.props.threadTs,renderInput:function e(){return t.renderInput.apply(t,arguments)},shouldCompleteOnTab:!this.props.useSendButton},a))}},{key:"renderFileMenu",value:function e(t,a){var r=this.props,n=r.channelId,i=r.threadTs,s=r.viewContext,o=r.isComposerPage,l=r.composerDraft,c=r.unifiedDraftId,u=r.featureUnifiedDrafts;var d=u?c:Object(ee["d"])(l);return k.a.createElement(Mn,{menuProps:t,channelId:n,threadTs:i,viewContext:s,hiddenFileInputRef:a,isComposerPage:o,draftId:d})}},{key:"renderFileButton",value:function e(){var t=this.props,a=t.channelId,r=t.threadTs,n=t.viewContext,i=t.enableFileButton,s=t.enableActionsButton,o=t.isComposerPage,l=t.shouldShowTractorFilesCoachmark,c=t.setTractorFilesCoachmarkVisibility,u=t.composerDraft,d=t.unifiedDraftId,p=t.featureUnifiedDrafts,m=t.isAtMaximumFilesAllowed;if(!i||s)return null;var h=p?d:Object(ee["d"])(u);var v=k.a.createElement(ui,{draftId:h,channelId:a,threadTs:r,viewContext:n,isComposerPage:o,isOpen:this.state.isPlusMenuOpen,forceOpen:this.state.forcePlusMenuOpen,onFileMenuOpen:this.onFileMenuOpen,onFileMenuClose:this.onFileMenuClose,onFilesSelected:this.onFilesSelected,isAtMaximumFilesAllowed:m});return l?k.a.createElement(gt["a"],{orientation:"right",coachmarkElement:k.a.createElement(ue,{setTractorFilesCoachmarkVisibility:c}),style:{position:"absolute",bottom:4,height:34,width:34}},v):v}},{key:"renderPasteLimitDialog",value:function e(t){var a=this;var r=Gn;return k.a.createElement(H["a"],{title:r.t("That\u2019s a bit too long to paste"),cancelText:r.t("Create a snippet"),goButtonText:r.t("OK"),onCancel:function e(){return a.openSnippetDialog(t)},showCancelButton:true},r.rt("To keep things running smoothly, there\u2019s a limit on the number of characters you can paste into Slack. If you\u2019d like you could <b>create a snippet</b> instead."))}},{key:"render",value:function e(){var t=this.props,a=t.className,r=t.showFocusOutline,n=t.clientTheme,i=t.featureLiveUnfurls,o=t.isDisabled;var l=i?this.renderAttachments():null;var c=i?null:this.renderFiles();var u=w()(a,"p-message_input",s()({"p-message_input--focus-visible":r,"p-message_input--files-visible":!!c,"p-message_input--attachments-visible":!!l,"p-message_input--disabled":o},"p-message_input--"+n,"light"!==n));return k.a.createElement("div",{className:u},this.renderModernAutocomplete(),this.renderFileButton(),this.renderActionButton(),l,c)}}]);return t}(O["Component"]);Vn.displayName="MessageInput";Vn.defaultProps=Wn;function Kn(e,t){var a=t.channelId,r=t.threadTs,n=t.unifiedDraftId,i=t.composerDraft;var s=Object(K["k"])(e);var o=n||Object(ee["d"])(i);var l=Object(ge["a"])(e,{draftId:o});var c=s?Object(K["d"])(e,n):null;var u=false;s&&c&&(u=l?Object(ee["i"])(c).length+l.length>=Rn["MAX_FILE_UPLOAD_COUNT"]:Object(ee["i"])(c).length>=Rn["MAX_FILE_UPLOAD_COUNT"]);return{enableJumbomoji:Object(F["a"])(e),enableActionsButton:Object(At["e"])(e),arrowHistory:Object(L["k"])(e,"arrow_history"),draft:s?null:Object(K["b"])(e,{channelId:a,threadTs:r}),composerDraft:s?null:i,unifiedDraft:c,featureUnifiedDrafts:s,completeDraftUnfurls:Object(z["i"])(e,n)||[],featureLiveUnfurls:Object(D["a"])(e),featureFilesInInput:Object(K["j"])(e),featureOfflineMode:Object(P["isFeatureEnabled"])(e,"feature_offline_mode"),featureSonicInputs:Object(P["isFeatureEnabled"])(e,"feature_sonic_inputs"),wasRecentlyOnline:Object(R["h"])(e),isClientOnline:Object(R["c"])(e),logger:Object(mt["a"])({state:e}),clogger:Object(_t["a"])({state:e}),teamId:Object(N["b"])(e),shouldShowTractorFilesCoachmark:Object(x["b"])(e),clientTheme:Object(U["getClientTheme"])(e),featureMessageNavigationShortcuts:Object(P["isFeatureEnabled"])(e,"feature_message_navigation_shortcuts"),featureWysiwygAnchorText:Object(M["a"])(e),pendingFileIds:l,contextualMessageShortcutsModalWasSeen:Object(L["k"])(e,"contextual_message_shortcuts_modal_was_seen"),screenReaderIsEnabled:Object(xn["isScreenReaderEnabled"])(e),upToBrowseKbShortcutPref:Object(L["k"])(e,"up_to_browse_kb_shortcut"),isAtMaximumFilesAllowed:u}}var zn={setChannelDraft:function e(){return W["f"].apply(void 0,arguments)},clearChannelDraft:function e(){return W["b"].apply(void 0,arguments)},setComposerDraft:function e(){return W["g"].apply(void 0,arguments)},clearDrafts:function e(){return V["a"].apply(void 0,arguments)},enqueueToast:function e(){return q["enqueueToast"].apply(void 0,arguments)},openModal:function e(){return G["openModal"].apply(void 0,arguments)},openSnippetDialog:function e(){return Y["a"].apply(void 0,arguments)},triggerNavigateBack:function e(t){return Object(J["a"])(t)},triggerNavigateForward:function e(t){return Object(J["b"])(t)},setTractorFilesCoachmarkVisibility:function e(){return B["f"].apply(void 0,arguments)},uploadDraftFiles:function e(){return X["a"].apply(void 0,arguments)},openFileUploadDialog:function e(){return Fn["a"].apply(void 0,arguments)},openContextualMessageShortcutsModal:function e(){return Dn["a"].apply(void 0,arguments)},setUserPrefByApi:function e(){return vr["d"].apply(void 0,arguments)},fetchDraftUnfurlData:function e(){return re.apply(void 0,arguments)}};var Qn=Object(j["connect"])(Kn,zn)(Object(Ot["a"])(Vn));var Yn=k.a.forwardRef(function(e,t){return k.a.createElement(Qn,n()({},e,{refToForward:t||k.a.createRef()}))});var Jn=a(57);var Xn=a(1874);var Zn=a(1701);var $n=a(892);var ei=a(1622);var ti=a(1662);var ai=a(1663);var ri=a(1025);var ni=new se["b"]("message_input_plus_button");var ii={channelId:void 0,threadTs:void 0,viewContext:void 0,featureOfflineMode:false,isComposerPage:false,isOpen:false,onFileMenuOpen:_["noop"],onFileMenuClose:_["noop"],forceOpen:false,keyboardLocale:void 0,draftId:void 0,onFilesSelected:_["noop"],featureFilesInInput:false,isAtMaximumFilesAllowed:false};var si="MSG_INPUT_FILE_BTN";var oi=function(e){g()(t,e);function t(){var e;l()(this,t);e=p()(this,h()(t).call(this));Object(A["a"])(f()(e),["renderMenu","renderTip","onFilesSelectedHandler"]);e.hiddenFileInputRef=k.a.createRef();return e}u()(t,[{key:"onFilesSelectedHandler",value:function e(t){if(Object(_["isEmpty"])(t))return;this.props.onFilesSelected(t)}},{key:"renderMenu",value:function e(t){var a=this.props,r=a.channelId,n=a.threadTs,i=a.logger,s=a.viewContext,o=a.isComposerPage,l=a.draftId,c=a.isAtMaximumFilesAllowed;if(c)return false;if(!r&&!o){i.error(si,"Missing channelId in "+s);return null}return k.a.createElement(ei["a"],{subtype:si},k.a.createElement(Mn,{menuProps:t,channelId:r,threadTs:n,viewContext:s,hiddenFileInputRef:this.hiddenFileInputRef,isComposerPage:o,draftId:l}))}},{key:"renderTip",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.isOffline,r=t.isAtMaximumFilesAllowed;var n=Object(ti["a"])("Cmd",this.props.keyboardLocale);var i=k.a.createElement("div",null,k.a.createElement(ri["a"],{label:n,tooltip:true}),k.a.createElement(ri["a"],{label:"U",tooltip:true}));var s=ni.rt("Attach file {keyboardShortcut}",{keyboardShortcut:i,fallbackHash:"0c431f4969959dd3463afd487244f98660be5ae0"});r&&(s=ni.t("You can only upload {count, plural, =1 {# file} other {# files}} at a time.",{count:Rn["MAX_FILE_UPLOAD_COUNT"],fallbackHash:"021a9e8871b437dabd4fd7af47907bd9c168993f",fallbackHashNs:"multi_file_upload"}));return a?k.a.createElement($n["a"],{tooltipLabel:s}):s}},{key:"render",value:function e(){var t=this.props,a=t.channelId,r=t.threadTs,n=t.viewContext,i=t.featureOfflineMode,s=t.isComposerPage,o=t.isOpen,l=t.onFileMenuOpen,c=t.onFileMenuClose,u=t.forceOpen,d=t.featureFilesInInput,p=t.isAtMaximumFilesAllowed;var m=w()("p-message_input_file_button",{"p-message_input_file_button--active":o,"p-message_input_file_button--disabled":p});var h=k.a.createElement(Je["c"],{className:m,"aria-label":ni.t("File menu"),tabIndex:"-1","data-qa":"msg_input_file_btn"},k.a.createElement(Xe["b"],{className:"p-message_input_file_icon",type:"paperclip"}));var v=k.a.createElement(Tt["c"],{tip:this.renderTip({isAtMaximumFilesAllowed:p}),position:"top",offsetY:-7,delay:500,zIndex:"above_fs"},h);var f=k.a.createElement(Jn["e"],{renderMenu:this.renderMenu,position:"top-left",offsetY:-6,onOpen:l,onClose:c,forceOpen:u},v);i&&(f=k.a.createElement(k.a.Fragment,null,k.a.createElement(Zn["b"],null,f),k.a.createElement(Zn["a"],null,k.a.createElement(Jn["e"],{renderMenu:this.renderMenu,position:"top-left",offsetY:-6,onOpen:l,onClose:c},k.a.createElement(Tt["c"],{tip:this.renderTip({isOffline:true})},h)))));var b=k.a.createElement(Jn["e"],{renderMenu:this.renderMenu,position:"top-left",offsetY:-6,onOpen:l,onClose:c,forceOpen:u},v);if(s||d)return k.a.createElement(k.a.Fragment,null,b,k.a.createElement(Xn["a"],{ref:this.hiddenFileInputRef,channelId:a,threadTs:r,viewContext:n,onFilesSelectedHandler:this.onFilesSelectedHandler}));return k.a.createElement(k.a.Fragment,null,f,k.a.createElement(Xn["a"],{ref:this.hiddenFileInputRef,channelId:a,threadTs:r,viewContext:n}))}}]);return t}(O["Component"]);oi.displayName="MessageInputFileButton";oi.defaultProps=ii;function li(e){return{featureOfflineMode:Object(P["isFeatureEnabled"])(e,"feature_offline_mode"),featureFilesInInput:Object(K["j"])(e),logger:Object(mt["a"])({state:e})}}var ci=Object(j["connect"])(li)(oi);var ui=Object(ai["a"])(ci);var di=new se["b"]("msg_input");var pi={isDisabled:false,isOffline:false,className:void 0,featureOfflineMode:false,buttonSize:void 0,showTooltip:false};var mi=function e(t){var a=t.isDisabled,r=t.isOffline,n=t.className,i=t.sendMessage,s=t.featureOfflineMode,o=t.buttonSize,l=t.showTooltip;var c=di.t("Send");var u;l&&(u=Object(yt["isMac"])()?di.t("\u2318Enter"):di.t("Ctrl+Enter"));var d="top";var p=k.a.createElement(Je["d"],{className:n,pillarClassName:"p-message_input__send",disabled:a||r,onClick:i,size:o},c);if(s&&r){p=k.a.createElement("div",{style:{marginLeft:"auto"}},p);d="top-right";u=k.a.createElement($n["a"],{tooltipLabel:c})}if(a&&!s)return p;if(!u)return p;return k.a.createElement(Tt["c"],{tip:u,position:d},p)};mi.displayName="MessageInputSendButton";mi.defaultProps=pi;var hi=function e(t){return{isOffline:!Object(R["c"])(t),featureOfflineMode:Object(P["isFeatureEnabled"])(t,"feature_offline_mode"),showTooltip:Object(L["k"])(t,"msg_input_send_btn")}};var vi=Object(j["connect"])(hi)(mi);a.d(t,"a",function(){return ui});a.d(t,"b",function(){return vi});var fi=t["c"]=Yn},,function(e,t,a){"use strict";a.d(t,"b",function(){return r});var r=function e(){return/[\ue000\ue001]/g};var n=function e(t){return r().test(t)};t["a"]=n},,,,,function(e,t,a){},,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){},function(e,t,a){},,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";var r=a(2795);t["a"]=r["a"]},function(e,t,a){"use strict";a.d(t,"a",function(){return i});var r=a(6);var n=new r["b"]("a11y");function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.channelName,a=e.previousChannelName,r=e.workspaceName,i=e.orgName,s=e.isOrgGlobalSharedPublicOrPrivateChannel,o=e.isOrgSharedPublicOrPrivateChannel,l=e.isExternallySharedChannel,c=e.isArchived,u=e.isCurrent,d=e.hasUnreads,p=e.hasNotifications,m=e.isPrivate,h=e.isNotMember,v=e.isMuted,f=e.isStarred,b=e.hasDraft;var g=function(){if(l&&r)return n.t("shared with {workspaceName}",{workspaceName:r});if(s&&i)return n.t("shared across all {orgName} workspaces",{orgName:i});if(o)return n.t("shared channel");return""}();var _=function(){if(c)return n.t("archived channel");if(u&&d&&p&&m&&h&&v&&f&&b)return n.t("current channel, has unread messages and notifications, private, not a member, muted, starred, has a draft message");if(!u&&d&&p&&m&&h&&v&&f&&b)return n.t("has unread messages and notifications, private, not a member, muted, starred, has a draft message");if(u&&!d&&p&&m&&h&&v&&f&&b)return n.t("current channel, has notifications, private, not a member, muted, starred, has a draft message");if(!u&&!d&&p&&m&&h&&v&&f&&b)return n.t("has notifications, private, not a member, muted, starred, has a draft message");if(u&&d&&!p&&m&&h&&v&&f&&b)return n.t("current channel, has unread messages, private, not a member, muted, starred, has a draft message");if(!u&&d&&!p&&m&&h&&v&&f&&b)return n.t("has unread messages, private, not a member, muted, starred, has a draft message");if(u&&!d&&!p&&m&&h&&v&&f&&b)return n.t("current channel, private, not a member, muted, starred, has a draft message");if(!u&&!d&&!p&&m&&h&&v&&f&&b)return n.t("private, not a member, muted, starred, has a draft message");if(u&&d&&p&&!m&&h&&v&&f&&b)return n.t("current channel, has unread messages and notifications, not a member, muted, starred, has a draft message");if(!u&&d&&p&&!m&&h&&v&&f&&b)return n.t("has unread messages and notifications, not a member, muted, starred, has a draft message");if(u&&!d&&p&&!m&&h&&v&&f&&b)return n.t("current channel, has notifications, not a member, muted, starred, has a draft message");if(!u&&!d&&p&&!m&&h&&v&&f&&b)return n.t("has notifications, not a member, muted, starred, has a draft message");if(u&&d&&!p&&!m&&h&&v&&f&&b)return n.t("current channel, has unread messages, not a member, muted, starred, has a draft message");if(!u&&d&&!p&&!m&&h&&v&&f&&b)return n.t("has unread messages, not a member, muted, starred, has a draft message");if(u&&!d&&!p&&!m&&h&&v&&f&&b)return n.t("current channel, not a member, muted, starred, has a draft message");if(!u&&!d&&!p&&!m&&h&&v&&f&&b)return n.t("not a member, muted, starred, has a draft message");if(u&&d&&p&&m&&!h&&v&&f&&b)return n.t("current channel, has unread messages and notifications, private, muted, starred, has a draft message");if(!u&&d&&p&&m&&!h&&v&&f&&b)return n.t("has unread messages and notifications, private, muted, starred, has a draft message");if(u&&!d&&p&&m&&!h&&v&&f&&b)return n.t("current channel, has notifications, private, muted, starred, has a draft message");if(!u&&!d&&p&&m&&!h&&v&&f&&b)return n.t("has notifications, private, muted, starred, has a draft message");if(u&&d&&!p&&m&&!h&&v&&f&&b)return n.t("current channel, has unread messages, private, muted, starred, has a draft message");if(!u&&d&&!p&&m&&!h&&v&&f&&b)return n.t("has unread messages, private, muted, starred, has a draft message");if(u&&!d&&!p&&m&&!h&&v&&f&&b)return n.t("current channel, private, muted, starred, has a draft message");if(!u&&!d&&!p&&m&&!h&&v&&f&&b)return n.t("private, muted, starred, has a draft message");if(u&&d&&p&&!m&&!h&&v&&f&&b)return n.t("current channel, has unread messages and notifications, muted, starred, has a draft message");if(!u&&d&&p&&!m&&!h&&v&&f&&b)return n.t("has unread messages and notifications, muted, starred, has a draft message");if(u&&!d&&p&&!m&&!h&&v&&f&&b)return n.t("current channel, has notifications, muted, starred, has a draft message");if(!u&&!d&&p&&!m&&!h&&v&&f&&b)return n.t("has notifications, muted, starred, has a draft message");if(u&&d&&!p&&!m&&!h&&v&&f&&b)return n.t("current channel, has unread messages, muted, starred, has a draft message");if(!u&&d&&!p&&!m&&!h&&v&&f&&b)return n.t("has unread messages, muted, starred, has a draft message");if(u&&!d&&!p&&!m&&!h&&v&&f&&b)return n.t("current channel, muted, starred, has a draft message");if(!u&&!d&&!p&&!m&&!h&&v&&f&&b)return n.t("muted, starred, has a draft message");if(u&&d&&p&&m&&h&&!v&&f&&b)return n.t("current channel, has unread messages and notifications, private, not a member, starred, has a draft message");if(!u&&d&&p&&m&&h&&!v&&f&&b)return n.t("has unread messages and notifications, private, not a member, starred, has a draft message");if(u&&!d&&p&&m&&h&&!v&&f&&b)return n.t("current channel, has notifications, private, not a member, starred, has a draft message");if(!u&&!d&&p&&m&&h&&!v&&f&&b)return n.t("has notifications, private, not a member, starred, has a draft message");if(u&&d&&!p&&m&&h&&!v&&f&&b)return n.t("current channel, has unread messages, private, not a member, starred, has a draft message");if(!u&&d&&!p&&m&&h&&!v&&f&&b)return n.t("has unread messages, private, not a member, starred, has a draft message");if(u&&!d&&!p&&m&&h&&!v&&f&&b)return n.t("current channel, private, not a member, starred, has a draft message");if(!u&&!d&&!p&&m&&h&&!v&&f&&b)return n.t("private, not a member, starred, has a draft message");if(u&&d&&p&&!m&&h&&!v&&f&&b)return n.t("current channel, has unread messages and notifications, not a member, starred, has a draft message");if(!u&&d&&p&&!m&&h&&!v&&f&&b)return n.t("has unread messages and notifications, not a member, starred, has a draft message");if(u&&!d&&p&&!m&&h&&!v&&f&&b)return n.t("current channel, has notifications, not a member, starred, has a draft message");if(!u&&!d&&p&&!m&&h&&!v&&f&&b)return n.t("has notifications, not a member, starred, has a draft message");if(u&&d&&!p&&!m&&h&&!v&&f&&b)return n.t("current channel, has unread messages, not a member, starred, has a draft message");if(!u&&d&&!p&&!m&&h&&!v&&f&&b)return n.t("has unread messages, not a member, starred, has a draft message");if(u&&!d&&!p&&!m&&h&&!v&&f&&b)return n.t("current channel, not a member, starred, has a draft message");if(!u&&!d&&!p&&!m&&h&&!v&&f&&b)return n.t("not a member, starred, has a draft message");if(u&&d&&p&&m&&!h&&!v&&f&&b)return n.t("current channel, has unread messages and notifications, private, starred, has a draft message");if(!u&&d&&p&&m&&!h&&!v&&f&&b)return n.t("has unread messages and notifications, private, starred, has a draft message");if(u&&!d&&p&&m&&!h&&!v&&f&&b)return n.t("current channel, has notifications, private, starred, has a draft message");if(!u&&!d&&p&&m&&!h&&!v&&f&&b)return n.t("has notifications, private, starred, has a draft message");if(u&&d&&!p&&m&&!h&&!v&&f&&b)return n.t("current channel, has unread messages, private, starred, has a draft message");if(!u&&d&&!p&&m&&!h&&!v&&f&&b)return n.t("has unread messages, private, starred, has a draft message");if(u&&!d&&!p&&m&&!h&&!v&&f&&b)return n.t("current channel, private, starred, has a draft message");if(!u&&!d&&!p&&m&&!h&&!v&&f&&b)return n.t("private, starred, has a draft message");if(u&&d&&p&&!m&&!h&&!v&&f&&b)return n.t("current channel, has unread messages and notifications, starred, has a draft message");if(!u&&d&&p&&!m&&!h&&!v&&f&&b)return n.t("has unread messages and notifications, starred, has a draft message");if(u&&!d&&p&&!m&&!h&&!v&&f&&b)return n.t("current channel, has notifications, starred, has a draft message");if(!u&&!d&&p&&!m&&!h&&!v&&f&&b)return n.t("has notifications, starred, has a draft message");if(u&&d&&!p&&!m&&!h&&!v&&f&&b)return n.t("current channel, has unread messages, starred, has a draft message");if(!u&&d&&!p&&!m&&!h&&!v&&f&&b)return n.t("has unread messages, starred, has a draft message");if(u&&!d&&!p&&!m&&!h&&!v&&f&&b)return n.t("current channel, starred, has a draft message");if(!u&&!d&&!p&&!m&&!h&&!v&&f&&b)return n.t("starred, has a draft message");if(u&&d&&p&&m&&h&&v&&!f&&b)return n.t("current channel, has unread messages and notifications, private, not a member, muted, has a draft message");if(!u&&d&&p&&m&&h&&v&&!f&&b)return n.t("has unread messages and notifications, private, not a member, muted, has a draft message");if(u&&!d&&p&&m&&h&&v&&!f&&b)return n.t("current channel, has notifications, private, not a member, muted, has a draft message");if(!u&&!d&&p&&m&&h&&v&&!f&&b)return n.t("has notifications, private, not a member, muted, has a draft message");if(u&&d&&!p&&m&&h&&v&&!f&&b)return n.t("current channel, has unread messages, private, not a member, muted, has a draft message");if(!u&&d&&!p&&m&&h&&v&&!f&&b)return n.t("has unread messages, private, not a member, muted, has a draft message");if(u&&!d&&!p&&m&&h&&v&&!f&&b)return n.t("current channel, private, not a member, muted, has a draft message");if(!u&&!d&&!p&&m&&h&&v&&!f&&b)return n.t("private, not a member, muted, has a draft message");if(u&&d&&p&&!m&&h&&v&&!f&&b)return n.t("current channel, has unread messages and notifications, not a member, muted, has a draft message");if(!u&&d&&p&&!m&&h&&v&&!f&&b)return n.t("has unread messages and notifications, not a member, muted, has a draft message");if(u&&!d&&p&&!m&&h&&v&&!f&&b)return n.t("current channel, has notifications, not a member, muted, has a draft message");if(!u&&!d&&p&&!m&&h&&v&&!f&&b)return n.t("has notifications, not a member, muted, has a draft message");if(u&&d&&!p&&!m&&h&&v&&!f&&b)return n.t("current channel, has unread messages, not a member, muted, has a draft message");if(!u&&d&&!p&&!m&&h&&v&&!f&&b)return n.t("has unread messages, not a member, muted, has a draft message");if(u&&!d&&!p&&!m&&h&&v&&!f&&b)return n.t("current channel, not a member, muted, has a draft message");if(!u&&!d&&!p&&!m&&h&&v&&!f&&b)return n.t("not a member, muted, has a draft message");if(u&&d&&p&&m&&!h&&v&&!f&&b)return n.t("current channel, has unread messages and notifications, private, muted, has a draft message");if(!u&&d&&p&&m&&!h&&v&&!f&&b)return n.t("has unread messages and notifications, private, muted, has a draft message");if(u&&!d&&p&&m&&!h&&v&&!f&&b)return n.t("current channel, has notifications, private, muted, has a draft message");if(!u&&!d&&p&&m&&!h&&v&&!f&&b)return n.t("has notifications, private, muted, has a draft message");if(u&&d&&!p&&m&&!h&&v&&!f&&b)return n.t("current channel, has unread messages, private, muted, has a draft message");if(!u&&d&&!p&&m&&!h&&v&&!f&&b)return n.t("has unread messages, private, muted, has a draft message");if(u&&!d&&!p&&m&&!h&&v&&!f&&b)return n.t("current channel, private, muted, has a draft message");if(!u&&!d&&!p&&m&&!h&&v&&!f&&b)return n.t("private, muted, has a draft message");if(u&&d&&p&&!m&&!h&&v&&!f&&b)return n.t("current channel, has unread messages and notifications, muted, has a draft message");if(!u&&d&&p&&!m&&!h&&v&&!f&&b)return n.t("has unread messages and notifications, muted, has a draft message");if(u&&!d&&p&&!m&&!h&&v&&!f&&b)return n.t("current channel, has notifications, muted, has a draft message");if(!u&&!d&&p&&!m&&!h&&v&&!f&&b)return n.t("has notifications, muted, has a draft message");if(u&&d&&!p&&!m&&!h&&v&&!f&&b)return n.t("current channel, has unread messages, muted, has a draft message");if(!u&&d&&!p&&!m&&!h&&v&&!f&&b)return n.t("has unread messages, muted, has a draft message");if(u&&!d&&!p&&!m&&!h&&v&&!f&&b)return n.t("current channel, muted, has a draft message");if(!u&&!d&&!p&&!m&&!h&&v&&!f&&b)return n.t("muted, has a draft message");if(u&&d&&p&&m&&h&&!v&&!f&&b)return n.t("current channel, has unread messages and notifications, private, not a member, has a draft message");if(!u&&d&&p&&m&&h&&!v&&!f&&b)return n.t("has unread messages and notifications, private, not a member, has a draft message");if(u&&!d&&p&&m&&h&&!v&&!f&&b)return n.t("current channel, has notifications, private, not a member, has a draft message");if(!u&&!d&&p&&m&&h&&!v&&!f&&b)return n.t("has notifications, private, not a member, has a draft message");if(u&&d&&!p&&m&&h&&!v&&!f&&b)return n.t("current channel, has unread messages, private, not a member, has a draft message");if(!u&&d&&!p&&m&&h&&!v&&!f&&b)return n.t("has unread messages, private, not a member, has a draft message");if(u&&!d&&!p&&m&&h&&!v&&!f&&b)return n.t("current channel, private, not a member, has a draft message");if(!u&&!d&&!p&&m&&h&&!v&&!f&&b)return n.t("private, not a member, has a draft message");if(u&&d&&p&&!m&&h&&!v&&!f&&b)return n.t("current channel, has unread messages and notifications, not a member, has a draft message");if(!u&&d&&p&&!m&&h&&!v&&!f&&b)return n.t("has unread messages and notifications, not a member, has a draft message");if(u&&!d&&p&&!m&&h&&!v&&!f&&b)return n.t("current channel, has notifications, not a member, has a draft message");if(!u&&!d&&p&&!m&&h&&!v&&!f&&b)return n.t("has notifications, not a member, has a draft message");if(u&&d&&!p&&!m&&h&&!v&&!f&&b)return n.t("current channel, has unread messages, not a member, has a draft message");if(!u&&d&&!p&&!m&&h&&!v&&!f&&b)return n.t("has unread messages, not a member, has a draft message");if(u&&!d&&!p&&!m&&h&&!v&&!f&&b)return n.t("current channel, not a member, has a draft message");if(!u&&!d&&!p&&!m&&h&&!v&&!f&&b)return n.t("not a member, has a draft message");if(u&&d&&p&&m&&!h&&!v&&!f&&b)return n.t("current channel, has unread messages and notifications, private, has a draft message");if(!u&&d&&p&&m&&!h&&!v&&!f&&b)return n.t("has unread messages and notifications, private, has a draft message");if(u&&!d&&p&&m&&!h&&!v&&!f&&b)return n.t("current channel, has notifications, private, has a draft message");if(!u&&!d&&p&&m&&!h&&!v&&!f&&b)return n.t("has notifications, private, has a draft message");if(u&&d&&!p&&m&&!h&&!v&&!f&&b)return n.t("current channel, has unread messages, private, has a draft message");if(!u&&d&&!p&&m&&!h&&!v&&!f&&b)return n.t("has unread messages, private, has a draft message");if(u&&!d&&!p&&m&&!h&&!v&&!f&&b)return n.t("current channel, private, has a draft message");if(!u&&!d&&!p&&m&&!h&&!v&&!f&&b)return n.t("private, has a draft message");if(u&&d&&p&&!m&&!h&&!v&&!f&&b)return n.t("current channel, has unread messages and notifications, has a draft message");if(!u&&d&&p&&!m&&!h&&!v&&!f&&b)return n.t("has unread messages and notifications, has a draft message");if(u&&!d&&p&&!m&&!h&&!v&&!f&&b)return n.t("current channel, has notifications, has a draft message");if(!u&&!d&&p&&!m&&!h&&!v&&!f&&b)return n.t("has notifications, has a draft message");if(u&&d&&!p&&!m&&!h&&!v&&!f&&b)return n.t("current channel, has unread messages, has a draft message");if(!u&&d&&!p&&!m&&!h&&!v&&!f&&b)return n.t("has unread messages, has a draft message");if(u&&!d&&!p&&!m&&!h&&!v&&!f&&b)return n.t("current channel, has a draft message");if(!u&&!d&&!p&&!m&&!h&&!v&&!f&&b)return n.t("has a draft message");if(u&&d&&p&&m&&h&&v&&f&&!b)return n.t("current channel, has unread messages and notifications, private, not a member, muted, starred");if(!u&&d&&p&&m&&h&&v&&f&&!b)return n.t("has unread messages and notifications, private, not a member, muted, starred");if(u&&!d&&p&&m&&h&&v&&f&&!b)return n.t("current channel, has notifications, private, not a member, muted, starred");if(!u&&!d&&p&&m&&h&&v&&f&&!b)return n.t("has notifications, private, not a member, muted, starred");if(u&&d&&!p&&m&&h&&v&&f&&!b)return n.t("current channel, has unread messages, private, not a member, muted, starred");if(!u&&d&&!p&&m&&h&&v&&f&&!b)return n.t("has unread messages, private, not a member, muted, starred");if(u&&!d&&!p&&m&&h&&v&&f&&!b)return n.t("current channel, private, not a member, muted, starred");if(!u&&!d&&!p&&m&&h&&v&&f&&!b)return n.t("private, not a member, muted, starred");if(u&&d&&p&&!m&&h&&v&&f&&!b)return n.t("current channel, has unread messages and notifications, not a member, muted, starred");if(!u&&d&&p&&!m&&h&&v&&f&&!b)return n.t("has unread messages and notifications, not a member, muted, starred");if(u&&!d&&p&&!m&&h&&v&&f&&!b)return n.t("current channel, has notifications, not a member, muted, starred");if(!u&&!d&&p&&!m&&h&&v&&f&&!b)return n.t("has notifications, not a member, muted, starred");if(u&&d&&!p&&!m&&h&&v&&f&&!b)return n.t("current channel, has unread messages, not a member, muted, starred");if(!u&&d&&!p&&!m&&h&&v&&f&&!b)return n.t("has unread messages, not a member, muted, starred");if(u&&!d&&!p&&!m&&h&&v&&f&&!b)return n.t("current channel, not a member, muted, starred");if(!u&&!d&&!p&&!m&&h&&v&&f&&!b)return n.t("not a member, muted, starred");if(u&&d&&p&&m&&!h&&v&&f&&!b)return n.t("current channel, has unread messages and notifications, private, muted, starred");if(!u&&d&&p&&m&&!h&&v&&f&&!b)return n.t("has unread messages and notifications, private, muted, starred");if(u&&!d&&p&&m&&!h&&v&&f&&!b)return n.t("current channel, has notifications, private, muted, starred");if(!u&&!d&&p&&m&&!h&&v&&f&&!b)return n.t("has notifications, private, muted, starred");if(u&&d&&!p&&m&&!h&&v&&f&&!b)return n.t("current channel, has unread messages, private, muted, starred");if(!u&&d&&!p&&m&&!h&&v&&f&&!b)return n.t("has unread messages, private, muted, starred");if(u&&!d&&!p&&m&&!h&&v&&f&&!b)return n.t("current channel, private, muted, starred");if(!u&&!d&&!p&&m&&!h&&v&&f&&!b)return n.t("private, muted, starred");if(u&&d&&p&&!m&&!h&&v&&f&&!b)return n.t("current channel, has unread messages and notifications, muted, starred");if(!u&&d&&p&&!m&&!h&&v&&f&&!b)return n.t("has unread messages and notifications, muted, starred");if(u&&!d&&p&&!m&&!h&&v&&f&&!b)return n.t("current channel, has notifications, muted, starred");if(!u&&!d&&p&&!m&&!h&&v&&f&&!b)return n.t("has notifications, muted, starred");if(u&&d&&!p&&!m&&!h&&v&&f&&!b)return n.t("current channel, has unread messages, muted, starred");if(!u&&d&&!p&&!m&&!h&&v&&f&&!b)return n.t("has unread messages, muted, starred");if(u&&!d&&!p&&!m&&!h&&v&&f&&!b)return n.t("current channel, muted, starred");if(!u&&!d&&!p&&!m&&!h&&v&&f&&!b)return n.t("muted, starred");if(u&&d&&p&&m&&h&&!v&&f&&!b)return n.t("current channel, has unread messages and notifications, private, not a member, starred");if(!u&&d&&p&&m&&h&&!v&&f&&!b)return n.t("has unread messages and notifications, private, not a member, starred");if(u&&!d&&p&&m&&h&&!v&&f&&!b)return n.t("current channel, has notifications, private, not a member, starred");if(!u&&!d&&p&&m&&h&&!v&&f&&!b)return n.t("has notifications, private, not a member, starred");if(u&&d&&!p&&m&&h&&!v&&f&&!b)return n.t("current channel, has unread messages, private, not a member, starred");if(!u&&d&&!p&&m&&h&&!v&&f&&!b)return n.t("has unread messages, private, not a member, starred");if(u&&!d&&!p&&m&&h&&!v&&f&&!b)return n.t("current channel, private, not a member, starred");if(!u&&!d&&!p&&m&&h&&!v&&f&&!b)return n.t("private, not a member, starred");if(u&&d&&p&&!m&&h&&!v&&f&&!b)return n.t("current channel, has unread messages and notifications, not a member, starred");if(!u&&d&&p&&!m&&h&&!v&&f&&!b)return n.t("has unread messages and notifications, not a member, starred");if(u&&!d&&p&&!m&&h&&!v&&f&&!b)return n.t("current channel, has notifications, not a member, starred");if(!u&&!d&&p&&!m&&h&&!v&&f&&!b)return n.t("has notifications, not a member, starred");if(u&&d&&!p&&!m&&h&&!v&&f&&!b)return n.t("current channel, has unread messages, not a member, starred");if(!u&&d&&!p&&!m&&h&&!v&&f&&!b)return n.t("has unread messages, not a member, starred");if(u&&!d&&!p&&!m&&h&&!v&&f&&!b)return n.t("current channel, not a member, starred");if(!u&&!d&&!p&&!m&&h&&!v&&f&&!b)return n.t("not a member, starred");if(u&&d&&p&&m&&!h&&!v&&f&&!b)return n.t("current channel, has unread messages and notifications, private, starred");if(!u&&d&&p&&m&&!h&&!v&&f&&!b)return n.t("has unread messages and notifications, private, starred");if(u&&!d&&p&&m&&!h&&!v&&f&&!b)return n.t("current channel, has notifications, private, starred");if(!u&&!d&&p&&m&&!h&&!v&&f&&!b)return n.t("has notifications, private, starred");if(u&&d&&!p&&m&&!h&&!v&&f&&!b)return n.t("current channel, has unread messages, private, starred");if(!u&&d&&!p&&m&&!h&&!v&&f&&!b)return n.t("has unread messages, private, starred");if(u&&!d&&!p&&m&&!h&&!v&&f&&!b)return n.t("current channel, private, starred");if(!u&&!d&&!p&&m&&!h&&!v&&f&&!b)return n.t("private, starred");if(u&&d&&p&&!m&&!h&&!v&&f&&!b)return n.t("current channel, has unread messages and notifications, starred");if(!u&&d&&p&&!m&&!h&&!v&&f&&!b)return n.t("has unread messages and notifications, starred");if(u&&!d&&p&&!m&&!h&&!v&&f&&!b)return n.t("current channel, has notifications, starred");if(!u&&!d&&p&&!m&&!h&&!v&&f&&!b)return n.t("has notifications, starred");if(u&&d&&!p&&!m&&!h&&!v&&f&&!b)return n.t("current channel, has unread messages, starred");if(!u&&d&&!p&&!m&&!h&&!v&&f&&!b)return n.t("has unread messages, starred");if(u&&!d&&!p&&!m&&!h&&!v&&f&&!b)return n.t("current channel, starred");if(!u&&!d&&!p&&!m&&!h&&!v&&f&&!b)return n.t("starred");if(u&&d&&p&&m&&h&&v&&!f&&!b)return n.t("current channel, has unread messages and notifications, private, not a member, muted");if(!u&&d&&p&&m&&h&&v&&!f&&!b)return n.t("has unread messages and notifications, private, not a member, muted");if(u&&!d&&p&&m&&h&&v&&!f&&!b)return n.t("current channel, has notifications, private, not a member, muted");if(!u&&!d&&p&&m&&h&&v&&!f&&!b)return n.t("has notifications, private, not a member, muted");if(u&&d&&!p&&m&&h&&v&&!f&&!b)return n.t("current channel, has unread messages, private, not a member, muted");if(!u&&d&&!p&&m&&h&&v&&!f&&!b)return n.t("has unread messages, private, not a member, muted");if(u&&!d&&!p&&m&&h&&v&&!f&&!b)return n.t("current channel, private, not a member, muted");if(!u&&!d&&!p&&m&&h&&v&&!f&&!b)return n.t("private, not a member, muted");if(u&&d&&p&&!m&&h&&v&&!f&&!b)return n.t("current channel, has unread messages and notifications, not a member, muted");if(!u&&d&&p&&!m&&h&&v&&!f&&!b)return n.t("has unread messages and notifications, not a member, muted");if(u&&!d&&p&&!m&&h&&v&&!f&&!b)return n.t("current channel, has notifications, not a member, muted");if(!u&&!d&&p&&!m&&h&&v&&!f&&!b)return n.t("has notifications, not a member, muted");if(u&&d&&!p&&!m&&h&&v&&!f&&!b)return n.t("current channel, has unread messages, not a member, muted");if(!u&&d&&!p&&!m&&h&&v&&!f&&!b)return n.t("has unread messages, not a member, muted");if(u&&!d&&!p&&!m&&h&&v&&!f&&!b)return n.t("current channel, not a member, muted");if(!u&&!d&&!p&&!m&&h&&v&&!f&&!b)return n.t("not a member, muted");if(u&&d&&p&&m&&!h&&v&&!f&&!b)return n.t("current channel, has unread messages and notifications, private, muted");if(!u&&d&&p&&m&&!h&&v&&!f&&!b)return n.t("has unread messages and notifications, private, muted");if(u&&!d&&p&&m&&!h&&v&&!f&&!b)return n.t("current channel, has notifications, private, muted");if(!u&&!d&&p&&m&&!h&&v&&!f&&!b)return n.t("has notifications, private, muted");if(u&&d&&!p&&m&&!h&&v&&!f&&!b)return n.t("current channel, has unread messages, private, muted");if(!u&&d&&!p&&m&&!h&&v&&!f&&!b)return n.t("has unread messages, private, muted");if(u&&!d&&!p&&m&&!h&&v&&!f&&!b)return n.t("current channel, private, muted");if(!u&&!d&&!p&&m&&!h&&v&&!f&&!b)return n.t("private, muted");if(u&&d&&p&&!m&&!h&&v&&!f&&!b)return n.t("current channel, has unread messages and notifications, muted");if(!u&&d&&p&&!m&&!h&&v&&!f&&!b)return n.t("has unread messages and notifications, muted");if(u&&!d&&p&&!m&&!h&&v&&!f&&!b)return n.t("current channel, has notifications, muted");if(!u&&!d&&p&&!m&&!h&&v&&!f&&!b)return n.t("has notifications, muted");if(u&&d&&!p&&!m&&!h&&v&&!f&&!b)return n.t("current channel, has unread messages, muted");if(!u&&d&&!p&&!m&&!h&&v&&!f&&!b)return n.t("has unread messages, muted");if(u&&!d&&!p&&!m&&!h&&v&&!f&&!b)return n.t("current channel, muted");if(!u&&!d&&!p&&!m&&!h&&v&&!f&&!b)return n.t("muted");if(u&&d&&p&&m&&h&&!v&&!f&&!b)return n.t("current channel, has unread messages and notifications, private, not a member");if(!u&&d&&p&&m&&h&&!v&&!f&&!b)return n.t("has unread messages and notifications, private, not a member");if(u&&!d&&p&&m&&h&&!v&&!f&&!b)return n.t("current channel, has notifications, private, not a member");if(!u&&!d&&p&&m&&h&&!v&&!f&&!b)return n.t("has notifications, private, not a member");if(u&&d&&!p&&m&&h&&!v&&!f&&!b)return n.t("current channel, has unread messages, private, not a member");if(!u&&d&&!p&&m&&h&&!v&&!f&&!b)return n.t("has unread messages, private, not a member");if(u&&!d&&!p&&m&&h&&!v&&!f&&!b)return n.t("current channel, private, not a member");if(!u&&!d&&!p&&m&&h&&!v&&!f&&!b)return n.t("private, not a member");if(u&&d&&p&&!m&&h&&!v&&!f&&!b)return n.t("current channel, has unread messages and notifications, not a member");if(!u&&d&&p&&!m&&h&&!v&&!f&&!b)return n.t("has unread messages and notifications, not a member");if(u&&!d&&p&&!m&&h&&!v&&!f&&!b)return n.t("current channel, has notifications, not a member");if(!u&&!d&&p&&!m&&h&&!v&&!f&&!b)return n.t("has notifications, not a member");if(u&&d&&!p&&!m&&h&&!v&&!f&&!b)return n.t("current channel, has unread messages, not a member");if(!u&&d&&!p&&!m&&h&&!v&&!f&&!b)return n.t("has unread messages, not a member");if(u&&!d&&!p&&!m&&h&&!v&&!f&&!b)return n.t("current channel, not a member");if(!u&&!d&&!p&&!m&&h&&!v&&!f&&!b)return n.t("not a member");if(u&&d&&p&&m&&!h&&!v&&!f&&!b)return n.t("current channel, has unread messages and notifications, private");if(!u&&d&&p&&m&&!h&&!v&&!f&&!b)return n.t("has unread messages and notifications, private");if(u&&!d&&p&&m&&!h&&!v&&!f&&!b)return n.t("current channel, has notifications, private");if(!u&&!d&&p&&m&&!h&&!v&&!f&&!b)return n.t("has notifications, private");if(u&&d&&!p&&m&&!h&&!v&&!f&&!b)return n.t("current channel, has unread messages, private");if(!u&&d&&!p&&m&&!h&&!v&&!f&&!b)return n.t("has unread messages, private");if(u&&!d&&!p&&m&&!h&&!v&&!f&&!b)return n.t("current channel, private");if(!u&&!d&&!p&&m&&!h&&!v&&!f&&!b)return n.t("private");if(u&&d&&p&&!m&&!h&&!v&&!f&&!b)return n.t("current channel, has unread messages and notifications");if(!u&&d&&p&&!m&&!h&&!v&&!f&&!b)return n.t("has unread messages and notifications");if(u&&!d&&p&&!m&&!h&&!v&&!f&&!b)return n.t("current channel, has notifications");if(!u&&!d&&p&&!m&&!h&&!v&&!f&&!b)return n.t("has notifications");if(u&&d&&!p&&!m&&!h&&!v&&!f&&!b)return n.t("current channel, has unread messages");if(!u&&d&&!p&&!m&&!h&&!v&&!f&&!b)return n.t("has unread messages");if(u&&!d&&!p&&!m&&!h&&!v&&!f&&!b)return n.t("current channel");return""}();if(a&&!g&&!_)return n.t("{channelName}, previously {previousChannelName}",{channelName:t,previousChannelName:a});if(!a&&!g&&_)return n.t("{channelName} ({context})",{channelName:t,context:_});if(a&&!g&&_)return n.t("{channelName}, previously {previousChannelName} ({context})",{channelName:t,previousChannelName:a,context:_});if(!a&&g&&!_)return n.t("{channelName}, {workspaceDescription}",{channelName:t,workspaceDescription:g});if(a&&g&&!_)return n.t("{channelName}, previously {previousChannelName}, {workspaceDescription}",{channelName:t,workspaceDescription:g,previousChannelName:a});if(!a&&g&&_)return n.t("{channelName}, {workspaceDescription} ({context})",{channelName:t,workspaceDescription:g,context:_});if(a&&g&&_)return n.t("{channelName}, previously {previousChannelName}, {workspaceDescription} ({context})",{channelName:t,workspaceDescription:g,previousChannelName:a,context:_});if(t)return t;return""}},function(e,t,a){"use strict";var r=a(88);var n=a.n(r);var i=a(0);var s=a(2);var o=a.n(s);var l=a(18);var c=a(449);var u=a(1463);var d=a(758);var p=a(298);var m=a(1038);var h=a(16);var v=a(393);var f=a(533);var b=a(1611);var g=a(1990);function _(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?_(Object(a),true).forEach(function(t){n()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var O=Object(l["b"])("Helper for handling history",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.oldest,n=a.latest,i=a.channelId,s=a.msgs,l=a.hasMore,d=a.pinCount,m=a.channelActionsCount,h=a.isLimited,v=a.deleted;var f=o.a.map(s,"ts");e(r||n?Object(c["a"])({msgs:s,channelId:i,oldest:r,latest:n,hasMore:l,isLimited:h,loading:false,deleted:v}):Object(c["a"])({msgs:s,channelId:i,isLimited:h,latest:o.a.max(f),oldest:o.a.min(f),hasMore:{hasMoreStart:l,hasMoreEnd:false},loading:false,deleted:v}));o.a.isNumber(d)&&e(Object(p["updatePinCount"])({channelId:i,count:d}));if(o.a.isNumber(m)){var _=t();var y=Object(b["c"])(_,i);var O=Object(b["d"])(_,i);if(!O||y!==m){e(Object(g["a"])([i]));e(Object(u["d"])({channelId:i,count:m}))}}});O.meta={name:"historyHandler",key:"messagePaneStoreFetchHistoryHistoryHandler",description:"Helper for handling history"};O.propTypes={oldest:i["default"].string,latest:i["default"].string,channelId:i["default"].string,msgs:i["default"].array,hasMore:i["default"].oneOfType([i["default"].object,i["default"].bool]),pinCount:i["default"].number,channelActionsCount:i["default"].number,isLimited:i["default"].bool,deleted:i["default"].array};var k=Object(l["b"])("Fetch conversation history",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelId,n=a.oldest,i=void 0===n?null:n,s=a.latest,l=void 0===s?null:s,c=a.reason,u=void 0===c?"message-pane-store/fetchHistory":c;if(!r)return false;var p=t();var b=Object(d["isChannelLoading"])(p,r);if(b)return false;Object(h["a"])({getState:t}).info("HISTORY-FETCH","Fetching history for message pane: "+r+" oldest: "+i+" latest: "+l);if(l&&i){var g=e(Object(v["b"])({channelId:r,oldest:null,latest:l,reason:u}));var _=e(Object(v["b"])({channelId:r,oldest:i,latest:null,reason:u}));var k=Promise.all([g,_]).then(function(t){var a=t[0],n=a.msgs,s=a.hasMore,c=a.isLimited,u=a.pinCount,d=a.channelActionsCount,p=a.deleted;var m=t[1],h=m.msgs,v=m.hasMore,f=m.deleted;var b=o.a.uniqBy(n.concat(h),"ts");var g=o.a.uniq(o.a.concat(p,f));var _=o.a.map(b,"ts");e(O({channelId:r,msgs:b,isLimited:c,pinCount:u,channelActionsCount:d,hasMore:{hasMoreStart:s,hasMoreEnd:v},oldest:o.a.min([i,o.a.min(_)]),latest:o.a.max([l,o.a.max(_)]),deleted:g}))}).catch(function(t){Object(f["c"])(t,"Failed to fetch history for "+r,"message_pane_history_fetch_fail");e(Object(d["doneLoading"])({channelId:r}))});e(Object(d["startLoading"])({channelId:r,loadingOlder:true,request:k}));return k}l&&e(Object(m["searchInProductEducationIncrement"])());var E=e(Object(v["b"])({channelId:r,oldest:i,latest:l,reason:u})).then(function(t){e(O(y({},t,{oldest:i,latest:l,channelId:r})))}).catch(function(t){Object(f["c"])(t,"Failed to fetch history for "+r,"message_pane_history_fetch_fail");e(Object(d["doneLoading"])({channelId:r}))});e(Object(d["startLoading"])({channelId:r,loadingOlder:!!l,request:E}));return E});k.meta={name:"fetchHistory",key:"messagePaneStoreFetchHistoryFetchHistory",description:"Fetch conversation history"};k.propTypes={channelId:i["default"].string.isRequired,oldest:i["default"].string,latest:i["default"].string,reason:i["default"].string};t["a"]=k},function(e,t,a){"use strict";a.d(t,"a",function(){return b});a.d(t,"b",function(){return g});var r=a(2);var n=a.n(r);var i=a(0);var s=a(184);var o=a(26);var l=a(18);var c=a(21);var u=a(1403);var d=a(16);var p=a(1463);var m="PLATFORM-CHANNEL-ACTIONS";var h=function e(t,a){Object(d["a"])({teamId:t}).info(m,"fetching channel actions for channel "+a);return Object(o["b"])(t,Object(u["b"])({resourceType:"channel",resourceId:a})).then(function(e){return e.map(function(e){return{appId:Object(r["get"])(e,"app.app_id"),id:Object(r["get"])(e,"action_id"),name:Object(r["get"])(e,"name"),description:Object(r["get"])(e,"description"),type:Object(r["get"])(e,"type"),app:Object(r["get"])(e,"app"),installTeamId:Object(r["get"])(e,"install_team_id"),installTeamName:Object(r["get"])(e,"install_team_name"),channelId:a}})})};var v=function e(t,a){return h(t,a).then(function(e){var r=f();r.markObjectsAsFresh(t,[a]);Object(o["b"])(t,Object(p["a"])({channelId:a,actions:e}))})};var f=Object(r["memoize"])(function(){return new s["b"]({fetch:function e(t,a){return Promise.map(a,function(e){return v(t,e)})},isEnabled:function e(){return true}})});var b=Object(l["b"])("Mark actions for channelIds as stale",function(e,t,a){var r=f();var n=t();var i=Object(c["b"])(n);r.markObjectsAsStale(i,a)});b.meta={name:"markChannelActionsAsStaleForChannels",key:"channelActionsStoreConditionalFetchingMarkChannelActionsAsStaleForChannels",description:"Mark actions for channelIds as stale"};b.propTypes=i["default"].arrayOf(i["default"].string).isRequired;var g=function e(t,a){f().maybeRefetch(t,a)}},function(e,t,a){"use strict";var r=a(110);var n=a.n(r);var i=a(135);var s=a.n(i);var o=a(169);var l=a.n(o);var c=a(138);var u=a.n(c);var d=a(185);var p=a.n(d);var m=a(1);var h=a.n(m);var v=a(12);var f=a(6);var b=a(35);var g=a(24);var _=a(11);var y=a(214);var O=a(17);var k=a(14);var E=a(4844);var C=a.n(E);var S=new f["b"]("welcome_place");var w=function e(t){var a=t.inviterUsername,r=t.hasMessagesInChannel,n=t.isInTeamCreatorOnboarding,i=t.featureNewxp3279;var s=n?[{id:"HI_TEAM",buttonText:i?S.t("\ud83d\ude4b\u200d\u2640\ufe0f Hi team!"):"",isVisible:true},{id:"DAILY_UPDATES",buttonText:i?S.t("\ud83d\udc4b\ufe0f Put daily updates here! I\u2019ll start\u2026"):"",isVisible:true}]:[{id:"JUST_ARRIVED",buttonText:S.t("\ud83d\udc83 Just arrived!"),isVisible:!!r},{id:"ROLL_CALL",buttonText:S.t("\ud83d\ude4b Roll call! Who else is here?"),isVisible:!r},{id:"IM_HERE",buttonText:S.t("\ud83d\udc4b I\u2019m here! What\u2019d I miss?"),isVisible:!a},{id:"THANKS_FOR_THE_INVITE",buttonText:S.rt("\ud83d\udc4b Thanks for the invite, <a>{username}</a>!",{username:a}),prefillText:S.t("\ud83d\udc4b Thanks for the invite, {username}!",{username:a}),isVisible:!!a}];return s.filter(function(e){return e.isVisible})};var j=function(e){p()(t,e);function t(){var e;n()(this,t);e=l()(this,u()(t).apply(this,arguments));e.onMessageSuggestionClicked=function(t){var a=e.props,r=a.clogger,n=a.pageViewingSessionId,i=a.prefillMessageInput;var s=t.prefillText||t.buttonText;i(s);r.track("WELCOME_PLACE",{contexts:{ui_context:{action:k["UiAction"].CLICK,ui_element:k["UiElement"].WELCOME_PLACE_ACTION_SEND_MESSAGE,ui_properties:{element_type:k["ElementType"].BUTTON,element_name:t.id}},welcome_place:{welcome_session_id:n}}})};return e}s()(t,[{key:"render",value:function e(){var t=this;var a=this.props,r=a.hasMessagesToRender,n=a.inviterUsername,i=a.featureNewxp3279,s=a.isInTeamCreatorOnboarding;var o=w({hasMessagesInChannel:r,inviterUsername:n,featureNewxp3279:i,isInTeamCreatorOnboarding:s});return o.map(function(e){return h.a.createElement(g["d"],{className:"message-suggestion-button margin_right_50 margin_top_50",size:"small",key:e.id,onClick:function a(){return t.onMessageSuggestionClicked(e)},"data-qa":"wp_message_suggestion_button"},e.buttonText)})}}]);return t}(m["Component"]);j.displayName="MessageSuggestions";var I=function e(t){var a=Object(y["f"])(t);var r=a?Object(O["getPrefCompliantMemberNameById"])(t,a,false,true):void 0;var n="creator_onboarding"===Object(y["j"])(t);return{inviterUsername:r,clogger:Object(b["a"])({state:t}),pageViewingSessionId:Object(y["m"])(t),featureNewxp3279:Object(_["isFeatureEnabled"])(t,"feature_newxp_3279"),isInTeamCreatorOnboarding:n}};t["a"]=Object(v["connect"])(I)(j)},function(e,t,a){"use strict";var r=a(88);var n=a.n(r);var i=a(1);var s=a.n(i);var o=a(0);var l=a(18);var c=a(1221);function u(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(Object(a),true).forEach(function(t){n()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var p=s.a.lazy(function(){return Promise.resolve().then(a.bind(null,4952))});var m=Object(l["b"])("Opens the snippet dialog",function(e,t,a){var r=a.initialText.replace(/\u2018|\u2019/g,"'").replace(/\u201c|\u201d/g,'"');e(Object(c["a"])({element:s.a.createElement(p,d({},a,{initialSnippetText:r,initialText:"",resetSnippetText:r,resetChannelId:a.initialChannelId}))}))});m.meta={name:"openSnippetDialog",key:"actionsOpenSnippetDialogOpenSnippetDialog",description:"Opens the snippet dialog"};m.propTypes={initialText:o["default"].string,initialChannelId:o["default"].string.isRequired,threadTs:o["default"].string,viewContext:o["default"].string};t["a"]=m},function(e,t,a){"use strict";var r=a(18);var n=a(211);var i=Object(r["b"])("Switches to the App Launcher view",function(e){e(Object(n["a"])({id:"Papps"}))});i.meta={name:"openAppLauncherView",key:"actionsOpenAppLauncherViewOpenAppLauncherView",description:"Switches to the App Launcher view"};t["a"]=i},function(e,t,a){"use strict";var r=a(218);var n=a.n(r);var i=a(110);var s=a.n(i);var o=a(135);var l=a.n(o);var c=a(169);var u=a.n(c);var d=a(138);var p=a.n(d);var m=a(147);var h=a.n(m);var v=a(185);var f=a.n(v);var b=a(2);var g=a.n(b);var _=a(1);var y=a.n(_);var O=a(0);var k=a(12);var E=a(33);var C=a(11);var S=a(62);var w=a(194);var j=a(6);var I=a(821);var T=a(3660);var A=a.n(T);var N=new j["b"]("files");var P={filetype:"",onChange:b["noop"],featureRemoteFilesApi:false,showEmail:false};var M=function(e){f()(t,e);function t(e){var a;s()(this,t);a=u()(this,p()(t).call(this,e));a.onChange=a.onChange.bind(h()(a));a.labelId="file_type_select_"+Object(w["d"])();return a}l()(t,[{key:"onChange",value:function e(t){this.props.onChange(t.value)}},{key:"render",value:function e(){var t=this;var a=N.t("Show all file types",{fallbackHash:"30266588dc5ca2b69979f4afa079509cd409568e"});var r=[{label:a,value:""},{label:N.t("Posts",{fallbackHash:"a0ca0c3198947ded7419101f3e83d48a9cb41f2a"}),value:"docs"},{label:N.t("Snippets",{fallbackHash:"ae05fb5b1e39e29b396e03c2efe053196e3b9456"}),value:"snippets"}].concat(n()(this.props.showEmail?[{label:N.t("Emails",{fallbackHash:"473558393914486d8e60b9968e5443e40be433e0"}),value:"emails"}]:[]),[{label:N.t("Images",{fallbackHash:"09e871c98fef3b901a775def173e4126aaf73b42"}),value:"images"},{label:N.t("Videos",{fallbackHash:"56b71e89fb1079caaadefd0889e9a22e8b0560e3"}),value:"videos"},{label:N.t("PDF Files",{fallbackHash:"fc3989fcc658f040ec5e0ef8d939fbdee62504ee"}),value:"pdfs"},{label:N.t("Spreadsheets",{fallbackHash:"e8a0fe95bcd9c07d210920e52baa1560871c11ad"}),value:"spreadsheets"}],n()(this.props.featureRemoteFilesApi?[{label:N.t("Presentations"),value:"presentations"},{label:N.t("Documents"),value:"documents"}]:[]),[{label:N.t("Google Docs",{fallbackHash:"f87b0e163c24d4d015e972ff48d4014602f5a503"}),value:"gdocs"}]);var i=r.find(function(e){return e.value===t.props.filetype});return y.a.createElement(I["a"],{key:r.toString(),width:"100%",placeholderText:a,onOptionSelected:this.onChange,selectedOption:i,selectId:this.labelId,options:r})}}]);return t}(_["PureComponent"]);M.displayName="FileTypeSelect";M.defaultProps=P;t["a"]=Object(k["connect"])(function(e){return{featureRemoteFilesApi:Object(C["isFeatureEnabled"])(e,"feature_remote_files_api"),showEmail:!!Object(E["d"])(e).plan&&!Object(S["a"])(e,"disable_email_ingestion")}})(M)},function(e,t,a){"use strict";a.d(t,"a",function(){return i});var r=a(6);var n=new r["b"]("msg_input");function i(e){var t=e.channelName,a=e.isSelfDm;if(a)return n.t("Jot something down");if(t)return n.t("Message {msg}",{msg:Object(r["q"])(t)});return n.t("Message channel")}},function(e,t,a){"use strict";var r=a(246);var n=a.n(r);var i=a(1);var s=a.n(i);var o=a(12);var l=a(42);var c=a(0);var u=a(2660);var d=a(647);var p=a(87);var m=a(360);var h=a(107);var v=a(43);var f=a(189);var b=a(32);var g=a(6);var _=a(34);var y=a(124);var O=a(1062);var k=a(3533);var E=a.n(k);var C=new g["b"]("ms");var S=6e4;var w=1e4;var j={currentThreadKey:void 0};function I(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t=e.currentThreadKey,a=e.primaryView,r=e.reconnectImmediately,o=e.requestOfflineCounts,c=e.requestOfflineHistory;var u=Object(i["useRef"])();var d=Object(i["useRef"])();var p=Object(i["useState"])(),m=n()(p,2),g=m[0],k=m[1];var E=Object(i["useState"])(false),j=n()(E,2),I=j[0],T=j[1];Object(i["useEffect"])(function(){A();var e=setInterval(N,S);return function(){clearInterval(e);clearTimeout(d.current)}},[]);function A(){u.current=Date.now()}function N(){k(Object(f["o"])(u.current/1e3))}function P(){if(l["isDesktop"]){if(g)return C.t("Last updated {timeAgo}\u2026 Press F6 to navigate to the status banner and click load new messages",{timeAgo:g});return C.t("Last updated less than a minute ago\u2026 Press F6 to navigate to the status banner and click load new messages")}if(Object(b["isMac"])()){if(g)return C.t("Last updated {timeAgo}\u2026 Press Cmd + F6 to navigate to the status banner and click load new messages",{timeAgo:g});return C.t("Last updated less than a minute ago\u2026 Press Cmd + F6 to navigate to the status banner and click load new messages")}if(g)return C.t("Last updated {timeAgo}\u2026 Press Ctrl + F6 to navigate to the status banner and click load new messages",{timeAgo:g});return C.t("Last updated less than a minute ago\u2026 Press Ctrl + F6 to navigate to the status banner and click load new messages")}function M(){T(true);d.current=setTimeout(function(){T(false)},w)}function D(){var e=[];(Object(y["a"])(a)||a===O["a"].allThreads)&&e.push(c({channelId:a}));if(t){var n=Object(h["decodeThreadKey"])(t),i=n.channelId,s=n.threadTs;e.push(c({channelId:i,threadTs:s}))}e.push(o());r();return Promise.all(e)}function x(e){e&&e.preventDefault&&e.preventDefault();M();D().then(function(){A();k()})}function R(e){var t=e.tag,a=e.text;if("a"===t)return s.a.createElement(v["a"],{className:"p-message_pane__degraded_banner__reload_cta",onClick:x,"data-qa":"connecting_banner_cta"},a);return s.a.createElement("div",{className:"p-message_pane__degraded_banner__banner_text"},a)}if(!Object(_["a"])()||I)return null;var F;F=g?C.rt("<div>Last updated {timeAgo}\u2026</div><a>Load new messages</a>",{timeAgo:g},R):C.rt("<div>Last updated less than a minute ago\u2026</div><a>Load new messages</a>",null,R);return s.a.createElement("div",{className:"p-message_pane__degraded_banner p-message_pane__banner"},F,s.a.createElement("div",{"aria-live":"assertive",className:"offscreen"},P()))}I.displayName="DegradedBanner";I.defaultProps=j;var T=function e(t){return{currentThreadKey:Object(h["getCurrentThreadKey"])(t),primaryView:Object(p["a"])(t)}};var A=function e(t){return{reconnectImmediately:function e(){return t(m["reconnectImmediately"].apply(void 0,arguments))},requestOfflineCounts:function e(){return t(u["a"].apply(void 0,arguments))},requestOfflineHistory:function e(){return t(d["a"].apply(void 0,arguments))}}};t["a"]=Object(o["connect"])(T,A)(I);var N={TIME_AGO_MESSAGE_INTERVAL_MS:S,HIDE_ON_RECONNECT_DURATION_MS:w}},function(e,t,a){"use strict";var r=a(2956);t["a"]=r["a"]},function(e,t,a){"use strict";var r=a(110);var n=a.n(r);var i=a(135);var s=a.n(i);var o=a(169);var l=a.n(o);var c=a(138);var u=a.n(c);var d=a(147);var p=a.n(d);var m=a(185);var h=a.n(m);var v=a(1);var f=a.n(v);var b=a(0);var g=a(13);var _=a.n(g);var y=a(2);var O=a.n(y);var k=a(1999);var E=a(102);var C=a(6);var S=a(22);var w=a(144);var j=a(861);var I=a(590);var T=a(445);var A=a(521);var N=a(838);var P=a(433);var M=a(515);var D=a(1674);var x=a(1189);var R=a(862);var F=a(1697);var L=a(1484);var U=a(1325);var B=a(1056);var q=a(816);var G=a(911);var H=a(750);var W=a(2044);var V=a(1658);var K=a(1341);var z=a(1326);var Q=a(1327);var Y=a(1698);var J=a(5006);var X=a.n(J);var Z=new C["b"]("message_kit");var $={className:void 0,theme:"light",adjacent:false,focused:false,renderActionsOffscreen:false,actionsPosition:void 0,markMsgUnread:y["noop"],rollup:null,parentId:void 0,isLast:false,showingContextBar:false,highlight:false,clearHighlight:y["noop"],latestMessageTsWithReactions:void 0,clickableTimestamp:false,messageContainerType:S["MESSAGE_CONTAINERS"].MESSAGE_PANE,blocksContainerContext:w["a"].message};var ee=function(e){h()(t,e);function t(e){var a;n()(this,t);a=l()(this,u()(t).call(this,e));a.handleBackgroundClick=a.handleBackgroundClick.bind(p()(a));return a}s()(t,[{key:"getCompactGutter",value:function e(){var t=this.props,a=t.msg,r=t.theme,n=t.adjacent,i=t.clickableTimestamp;var s="light"===r;var o=_()("p-message_pane_message__compact_timestamp",{"p-message_pane_message__compact_timestamp--light":s,"p-message_pane_message__compact_timestamp--adjacent":n});return f.a.createElement("div",{className:o},f.a.createElement(N["a"],{msg:a,meridiem:!(n&&s),clickable:i},i?Z.t("Open in channel"):null))}},{key:"getCompactMessageBody",value:function e(t){var a=this.props,r=a.adjacent,n=a.rollup,i=a.latestMessageTsWithReactions,s=a.blocksContainerContext;return f.a.createElement(Q["a"],null,!r&&f.a.createElement(W["a"],{msg:t},f.a.createElement(A["a"],{msg:t,className:"p-message_pane_message__sender--compact"}),"\xa0"),f.a.createElement(Y["a"],{msg:t},f.a.createElement(P["a"],{msg:t,rollup:n,"data-qa":"message-text"}),f.a.createElement(D["a"],{msg:t,blocksContainerContext:s}),f.a.createElement(x["a"],{msg:t}),f.a.createElement(T["b"],{msg:t}),f.a.createElement(j["a"],{msg:t})),f.a.createElement(R["a"],{msg:t,latestMessageTsWithReactions:i}),f.a.createElement(L["a"],{msg:t}),f.a.createElement(F["a"],{msg:t}))}},{key:"getMessageBody",value:function e(t){var a=this.props,r=a.adjacent,n=a.rollup,i=a.latestMessageTsWithReactions,s=a.clickableTimestamp,o=a.blocksContainerContext;return f.a.createElement(f.a.Fragment,null,!r&&f.a.createElement(W["a"],{msg:t},f.a.createElement(A["a"],{msg:t}),"\xa0\xa0",f.a.createElement(N["a"],{msg:t,clickable:s},s?Z.t("Open in channel"):null),f.a.createElement("br",null)),f.a.createElement(Y["a"],{msg:t},f.a.createElement(P["a"],{msg:t,rollup:n,"data-qa":"message-text"}),f.a.createElement(M["a"],{msg:t,blocksContainerContext:o}),f.a.createElement(x["a"],{msg:t}),f.a.createElement(T["b"],{msg:t}),f.a.createElement(j["a"],{msg:t})),f.a.createElement(R["a"],{msg:t,latestMessageTsWithReactions:i}),f.a.createElement(L["a"],{msg:t}),f.a.createElement(F["a"],{msg:t}))}},{key:"handleBackgroundClick",value:function e(t){if(t.altKey){t.preventDefault();this.props.markMsgUnread(this.props.msg)}}},{key:"render",value:function e(){var t=this.props,a=t.msg,r=t.theme,n=t.adjacent,i=t.focused,s=t.renderActionsOffscreen,o=t.actionsPosition,l=t.parentId,c=t.isLast,u=t.showingContextBar,d=t.highlight,p=t.clearHighlight,m=t.messageContainerType,h=t.markMsgUnread;var v=_()("p-message_pane_message__message","c-message_kit__message",this.props.className,{"p-message_pane_message__message--last":c,"p-message_pane_message__message--showing_context_bar":u});var b="dense"===r;var g=b?this.getCompactGutter():null;var y=n?this.getCompactGutter():f.a.createElement(I["a"],{msg:a});var O=b?this.getCompactMessageBody(a):this.getMessageBody(a);return f.a.createElement(U["a"],{msg:a},f.a.createElement(B["a"],{msg:a,className:v,onClick:this.handleBackgroundClick,highlight:d,clearHighlight:p},f.a.createElement(q["a"],{hovered:i},f.a.createElement(G["a"],{msg:a,showComment:true,showShare:true,messageContainerType:m,position:o||(b||n?"above":"default"),renderOffscreen:s,parentId:l,unreadHandler:h},f.a.createElement(K["a"],{msg:a,className:"p-message_pane_message__message_label"},f.a.createElement(H["a"],{light:y,compact:g},f.a.createElement(V["a"],{msg:a,replyBar:f.a.createElement(L["a"],{msg:a})},f.a.createElement(z["a"],{msg:a},O))))))))}}]);return t}(v["PureComponent"]);ee.displayName="Message";ee.defaultProps=$;t["a"]=Object(k["a"])(ee,"message-pane-message")},function(e,t,a){"use strict";a.d(t,"a",function(){return _});var r=a(110);var n=a.n(r);var i=a(135);var s=a.n(i);var o=a(169);var l=a.n(o);var c=a(138);var u=a.n(c);var d=a(504);var p=a.n(d);var m=a(185);var h=a.n(m);var v=a(2);var f=a.n(v);var b=a(61);var g=a(195);function _(e,t){return function(a){h()(r,a);function r(a){var i;n()(this,r);i=l()(this,u()(r).call(this,a));i.uniqueId=Object(v["uniqueId"])();i.name=Object(v["snakeCase"])(e.name);i.telemeter=Object(b["a"])();i.logMetrics=i.telemeter&&Object(g["a"])(1);i.label=t||"react_"+i.name;return i}s()(r,[{key:"UNSAFE_componentWillMount",value:function e(){var t;this.logMetrics&&this.telemeter.mark(this.label+"_mount_mark_"+this.uniqueId);for(var a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];p()(u()(r.prototype),"UNSAFE_componentWillMount",this)&&(t=p()(u()(r.prototype),"UNSAFE_componentWillMount",this)).call.apply(t,[this].concat(n))}},{key:"componentDidMount",value:function e(){var t;for(var a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];p()(u()(r.prototype),"componentDidMount",this)&&(t=p()(u()(r.prototype),"componentDidMount",this)).call.apply(t,[this].concat(n));this.logMetrics&&this.telemeter.measureAndClear(this.label+"_mount_mark_"+this.uniqueId,this.label+"_mount")}},{key:"UNSAFE_componentWillUpdate",value:function e(){var t;this.logMetrics&&this.telemeter.mark(this.label+"_update_mark_"+this.uniqueId);for(var a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];p()(u()(r.prototype),"UNSAFE_componentWillUpdate",this)&&(t=p()(u()(r.prototype),"UNSAFE_componentWillUpdate",this)).call.apply(t,[this].concat(n))}},{key:"componentDidUpdate",value:function e(){var t;for(var a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];p()(u()(r.prototype),"componentDidUpdate",this)&&(t=p()(u()(r.prototype),"componentDidUpdate",this)).call.apply(t,[this].concat(n));this.logMetrics&&this.telemeter.measureAndClear(this.label+"_update_mark_"+this.uniqueId,this.label+"_update")}}]);return r}(e)}},,function(e,t,a){"use strict";var r=a(110);var n=a.n(r);var i=a(135);var s=a.n(i);var o=a(169);var l=a.n(o);var c=a(138);var u=a.n(c);var d=a(147);var p=a.n(d);var m=a(185);var h=a.n(m);var v=a(1);var f=a.n(v);var b=a(0);var g=a(12);var _=a(2);var y=a.n(_);var O=a(9);var k=a(6);var E=a(20);var C=a(2777);var S=a(117);var w=a(2021);var j=new k["b"]("msg_edit");var I={channelType:void 0,removeMessage:_["noop"]};var T=function(e){h()(t,e);function t(){var e;n()(this,t);e=l()(this,u()(t).call(this));e.onGo=e.onGo.bind(p()(e));return e}s()(t,[{key:"onGo",value:function e(){var t=this.props,a=t.ts,r=t.channelId,n=t.removeMessage;n({channelId:r,ts:a,broadcastDelete:true}).catch(_["noop"])}},{key:"render",value:function e(){var t=this.props,a=t.ts,r=t.channelId,n=t.channelType;var i;var s;if("channel"===n){i=j.t("Remove from channel");s=j.t("Are you sure you want to remove this message from the channel?")}else{i=j.t("Remove from conversation");s=j.t("Are you sure you want to remove this message from the conversation?")}return f.a.createElement(S["a"],{title:i,goButtonText:j.t("Remove message"),onGo:this.onGo},f.a.createElement("div",{className:"margin_bottom_100"},s,j.t("The original reply will still be visible in its thread.")),f.a.createElement(w["a"],{ts:a,channelId:r,isStandalone:true}))}}]);return t}(v["PureComponent"]);T.displayName="BaseRemoveBroadcastDialog";T.defaultProps=I;var A=function e(t,a){var r=a.channelId;var n=Object(E["e"])(t,r);var i=Object(O["getChannelType"])(n);return{channelType:i}};var N={removeMessage:C["a"]};var P=Object(g["connect"])(A,N)(T);P.propTypes={channelId:b["default"].string.isRequired};t["a"]=P},function(e,t,a){"use strict";var r=a(110);var n=a.n(r);var i=a(135);var s=a.n(i);var o=a(169);var l=a.n(o);var c=a(138);var u=a.n(c);var d=a(147);var p=a.n(d);var m=a(185);var h=a.n(m);var v=a(1);var f=a.n(v);var b=a(0);var g=a(12);var _=a(2);var y=a.n(_);var O=a(102);var k=a(392);var E=a(22);var C=a(73);var S=a(41);var w=a(11);var j=a(129);var I=a(6);var T=a(2777);var A=a(117);var N=a(2021);var P=a(144);var M=a(39);var D=a(1316);var x=a(1644);var R=a(1946);var F=a(2710);var L=a(922);var U=Object(L["b"])(F["a"]);var B=new I["b"]("msg_edit");var q={messageExists:true,removeMessage:_["noop"],subtype:void 0,hasFile:false,fileMode:void 0,rollup:void 0,useBulkDelete:false,closeModal:_["noop"],completedMessageAction:_["noop"],viewContext:E["MESSAGE_CONTAINERS"].MESSAGE_PANE,featureContextualMessageShortcuts:false,setViewContextToRestoreFocus:_["noop"],viewContextToRestoreFocus:null,featureMessageKitInMessagePane:false};var G=function(e){h()(t,e);function t(){var e;n()(this,t);e=l()(this,u()(t).call(this));e.onGo=e.onGo.bind(p()(e));e.onClose=e.onClose.bind(p()(e));return e}s()(t,[{key:"componentDidMount",value:function e(){this.maybeCloseModal()}},{key:"componentDidUpdate",value:function e(){this.maybeCloseModal()}},{key:"onClose",value:function e(){var t=this.props,a=t.channelId,r=t.ts,n=t.viewContext,i=t.viewContextToRestoreFocus,s=t.featureContextualMessageShortcuts,o=t.completedMessageAction,l=t.setViewContextToRestoreFocus;var c=s&&i;if(!c)return;var u=this.messageDeleted;u&&l(null);o({viewContext:n,channelId:a,ts:r,focusOnInput:u})}},{key:"onGo",value:function e(t){this.props.featureContextualMessageShortcuts&&t&&"keydown"===t.type&&"Enter"===t.key&&t.preventDefault();var a=this.props,r=a.ts,n=a.channelId,i=a.removeMessage,s=a.useBulkDelete,o=a.rollup,l=a.featureContextualMessageShortcuts;var c=s?Object(_["reduce"])(o,function(e,t){return e.concat(t.timestamps)},[]):[];c.sort();i({channelId:n,ts:r,rollupTimestamps:s&&c?c:[]});l&&(this.messageDeleted=true)}},{key:"getBodyText",value:function e(){var t=this.props.subtype;if(!t)return null;var a=this.getFileLabel();if("file_upload"===t){if("file"===a)return B.t("Note that deleting this message will not delete the file that was uploaded.");if("snippet"===a)return B.t("Note that deleting this message will not delete the snippet that was uploaded.");if("post"===a)return B.t("Note that deleting this message will not delete the post that was uploaded.")}else if("file_share"===t){if("file"===a)return B.t("Note that deleting this message will not unshare the file.");if("snippet"===a)return B.t("Note that deleting this message will not unshare the snippet.");if("post"===a)return B.t("Note that deleting this message will not unshare the post.")}else if("file_comment"===t)return B.t("Note that deleting this message will not delete the comment.");return null}},{key:"getFileLabel",value:function e(){var t=this.props,a=t.hasFile,r=t.fileMode;if(!a)return null;if("snippet"===r)return"snippet";if("post"===r)return"post";return"file"}},{key:"maybeCloseModal",value:function e(){this.props.messageExists||this.props.closeModal()}},{key:"render",value:function e(){var t=this.props,a=t.ts,r=t.channelId,n=t.rollup,i=t.useBulkDelete,s=t.messageExists,o=t.featureMessageKitInMessagePane;if(!s)return null;var l=this.getBodyText();return f.a.createElement(k["a"],{id:E["MESSAGE_CONTAINERS"].DELETE_MSG_DIALOG},f.a.createElement(A["a"],{title:B.t("Delete message"),goButtonText:B.t("Delete"),goButtonType:"danger",onGo:this.onGo,onClose:this.onClose},B.t("Are you sure you want to delete this message? This cannot be undone."),l&&f.a.createElement("div",{className:"margin_top_50"},l),f.a.createElement("div",{className:"margin_top_100"},o?f.a.createElement(U,{ts:a,channelId:r,blocksContainerContext:P["a"].delete_dialog,footer:false}):f.a.createElement(N["a"],{ts:a,channelId:r,rollup:i&&n?n:null,blocksContainerContext:P["a"].delete_dialog,isStandalone:true}))))}}]);return t}(v["PureComponent"]);G.displayName="BaseDeleteMessageDialog";G.defaultProps=q;var H=function e(t,a){var r=a.channelId,n=a.ts,i=a.rollup;var s=Object(w["isFeatureEnabled"])(t,"feature_allow_bulk_delete_join_leave_messages");var o=Object(C["a"])(t,r,n);if(!o)return{messageExists:false};var l=o.files;var c=Object(j["getFileById"])(t,Object(_["first"])(l));var u=false;var d;if(c){u=true;d=c.mode}var p=!!(s&&i);return{messageExists:true,hasFile:u,fileMode:d,subtype:Object(S["getMessageSubtype"])(o),rollup:i,useBulkDelete:p,featureContextualMessageShortcuts:Object(w["isFeatureEnabled"])(t,"feature_contextual_message_shortcuts"),viewContextToRestoreFocus:Object(R["a"])(t),featureMessageKitInMessagePane:Object(w["isFeatureEnabled"])(t,"feature_message_kit_in_message_pane")}};var W={removeMessage:function e(){return T["a"].apply(void 0,arguments)},closeModal:function e(){return M["closeModal"].apply(void 0,arguments)},completedMessageAction:function e(){return D["a"].apply(void 0,arguments)},setViewContextToRestoreFocus:function e(){return x["a"].apply(void 0,arguments)}};var V=Object(g["connect"])(H,W)(G);V.propTypes={channelId:b["default"].string.isRequired,ts:b["default"].string.isRequired};t["a"]=V},function(e,t,a){},function(e,t,a){"use strict";var r=a(0);var n=a(1);var i=a.n(n);var s=a(109);var o=a(13);var l=a.n(o);var c=a(6);var u=new c["b"]("messages");var d={ghost:false,isIAP1Enabled:false};function p(e){var t=e.ghost,a=e.isIAP1Enabled;var r=a;return i.a.createElement("div",{className:l()({"c-message_list__unread_divider":true,"c-message_list__unread_divider--ghost":t})},i.a.createElement("hr",{className:"c-message_list__unread_divider__separator","aria-hidden":"true"}),i.a.createElement("span",{className:"c-message_list__unread_divider__label"},r?u.t("New",{note:"Label for unread divider in the message list (formerly: new messages)"}):u.t("new messages")))}p.displayName="UnreadDivider";p.defaultProps=d;t["a"]=Object(s["pure"])(p)},function(e,t,a){"use strict";a.d(t,"a",function(){return c});var r=a(110);var n=a.n(r);var i=a(135);var s=a.n(i);var o=2;var l=1e4;var c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.limit,r=void 0===a?o:a,i=t.duration,s=void 0===i?l:i;n()(this,e);this.historyRequests={};this.promise=null;this.requestLimit=r;this.initialDuration=s}s()(e,[{key:"reset",value:function e(){this.historyRequests={};this.promise=null}},{key:"logHistoryRequest",value:function e(t){var a=t.oldest,r=t.latest,n=t.now,i=void 0===n?Date.now():n,s=t.promise;var o=a+"_"+r;var l=this.historyRequests[o];if(!l){l={count:0,time:0,duration:this.initialDuration};this.historyRequests[o]=l}if(s){l.promise=s;s.finally(function(){l.promise=null})}if(i-l.duration>l.time){l.count>=this.requestLimit?l.duration=Math.min(2*l.duration,16e4):l.duration=this.initialDuration;l.count=1;l.time=i}else l.count+=1}},{key:"shouldPreventHistoryRequest",value:function e(t){var a=t.oldest,r=t.latest,n=t.now,i=void 0===n?Date.now():n;var s=this.historyRequests[a+"_"+r];if(!s)return false;if(s.count<this.requestLimit)return false;if(s.time<i-s.duration)return false;return true}},{key:"isRequestPending",value:function e(t){var a=t.oldest,r=t.latest;var n=this.historyRequests[a+"_"+r];if(!n)return false;return n.promise&&n.promise.isPending()}}]);return e}()},function(e,t,a){"use strict";a.d(t,"a",function(){return x});var r=a(218);var n=a.n(r);var i=a(110);var s=a.n(i);var o=a(135);var l=a.n(o);var c=a(169);var u=a.n(c);var d=a(138);var p=a.n(d);var m=a(504);var h=a.n(m);var v=a(185);var f=a.n(v);var b=a(88);var g=a.n(b);var _=a(1);var y=a.n(_);var O=a(13);var k=a.n(O);var E=a(0);var C=a(23);var S=a(6);var w=a(1473);var j=a(3746);var I=a.n(j);function T(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function A(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?T(Object(a),true).forEach(function(t){g()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):T(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var N=new S["b"]("messages");var P=20;var M=A({},w["a"].propTypes,{reachedStart:E["default"].bool,reachedEnd:E["default"].bool});var D=A({},w["a"].defaultProps,{reachedStart:false,reachedEnd:false});var x=function(e){f()(t,e);function t(e){var a;s()(this,t);a=u()(this,p()(t).call(this,e));a.pendingUpdate=null;a.recomputeOffsets(e);a.overscan=Math.max(200,e.height/2);return a}l()(t,[{key:"componentDidUpdate",value:function e(){var a;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];(a=h()(p()(t.prototype),"componentDidUpdate",this)).call.apply(a,[this].concat(n));0===this.props.keys.length&&this.loadMore();this.layout.setBottomMargin(this.getLoadingOffsetBottom());this.pendingUpdate=false}},{key:"onKeyDownPageDown",value:function e(a){if(this.state.hasKeyboardFocus&&this.isScrolledToBottom()&&this.props.reachedEnd){this.focusLastItemInView();return}h()(p()(t.prototype),"onKeyDownPageDown",this).call(this,a)}},{key:"onKeyUpPageDown",value:function e(a){if(this.state.hasKeyboardFocus&&this.isScrolledToTop()&&this.props.reachedStart){this.focusFirstItemInView();return}h()(p()(t.prototype),"onKeyUpPageDown",this).call(this,a)}},{key:"getOffset",value:function e(){var t=this.getLoadingOffsetTop();return this.startTop-t}},{key:"getLoadingOffsetTop",value:function e(){if(!this.props.keys.length)return 0;if(this.props.reachedStart&&0===this.state.start)return 0;if(this.layout.getTotalHeight()<=this.props.height)return 0;if(0!==this.state.start)return 96;return 56}},{key:"getLoadingOffsetBottom",value:function e(){if(!this.props.keys.length)return 0;if(this.props.reachedEnd&&this.state.end===this.props.keys.length)return 0;return 96}},{key:"getScrollTop",value:function e(){if("number"===typeof this.scrollTop)return this.scrollTop;if("number"===typeof this.pendingScrollTop)return this.pendingScrollTop;return h()(p()(t.prototype),"getScrollTop",this).call(this)+this.getOffset()}},{key:"getContentHeight",value:function e(){return this.endBottom-this.getOffset()+this.getLoadingOffsetBottom()}},{key:"getTop",value:function e(t){return this.layout.getTop(t)-this.getOffset()}},{key:"getBottom",value:function e(t){return this.layout.getBottom(t)-this.getOffset()}},{key:"setScrollTop",value:function e(a){var r=a<this.getOffset();var n=a+this.props.height>this.endBottom+this.getLoadingOffsetBottom();if(r&&0!==this.state.start||n&&this.state.end!==this.props.keys.length){this.scrollTop=a;this.relayout();return}h()(p()(t.prototype),"setScrollTop",this).call(this,a-this.getOffset())}},{key:"scrollToOffset",value:function e(a){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.animate,i=r.absolute;if(!this.node)return;if(this.pendingUpdate)return;var s=i?a:a-this.getOffset();!i&&s>0&&s<this.getLoadingOffsetTop()&&(s=0);var o=this.bracketScrollTop(s);if(!i&&o!==s){this.setScrollTop(a);return}if(n){this.scrollAnimation=this.node.scrollWithAnimation(o);return}h()(p()(t.prototype),"setScrollTop",this).call(this,o)}},{key:"bracketScrollTop",value:function e(t){return Math.max(0,Math.min(this.getContentHeight()-this.props.height,t))}},{key:"resetRendered",value:function e(){this.overscan=this.props.height/2}},{key:"loadMore",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.start;var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state.end;var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.props;var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.getScrollTop();var i=this.layout.getTotalHeight();var s=0===t&&n<1;var o=a===r.keys.length&&n+r.height>i-1;var l=!r.keys.length||i<=r.height||s;var c=!r.keys.length||i<=r.height||o;if(l&&c)return r.loadAround();if(l)return r.loadPre();if(c)return r.loadPost();return false}},{key:"relayout",value:function e(){var t=this;this.setState(function(e,a){if(a.isLoading)return null;var r=e.start,n=e.end;var i=t.startKey;var s=t.endKey;t.recomputeOffsets(a,r,n);var o=t.node?t.node.scrollTop():0;var l=t.getScrollTop();var c=o-1<=0||l-1<=t.getOffset();var u=o+1>=t.getContentHeight()-a.height||l+1>=t.endBottom-a.height;var d={start:r,end:n};if(t.startKey!==i||t.endKey!==s||c&&0!==r||u&&n!==a.keys.length){e.scrolling&&(t.overscan=8e3);d=t.computeBounds(a,l);var p=d,m=p.start,h=p.end;t.recomputeOffsets(a,m,h);c=l-1<=t.getOffset();u=l+a.height+1>=t.endBottom+t.getLoadingOffsetBottom()}(c&&0===d.start||u&&d.end===a.keys.length||t.layout.getTotalHeight()<a.height&&0===d.start)&&t.loadMore(r,n,a);var v=t.layout.getTops();if(d.start===r&&d.end===n&&v===e.tops)return null;t.scrollAnimation&&t.scrollAnimation.cancel();t.pendingUpdate=true;t.scrollTop=l;return A({},d,{tops:v})})}},{key:"recomputeOffsets",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state.start;var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.state.end;var n=this.layout.getTotalHeight()<=t.height;this.startKey=t.keys[a];this.endKey=t.keys[r-1];this.startTop=n?0:this.layout.getTop(this.startKey)||0;this.endBottom=this.layout.getBottom(this.endKey)||0}},{key:"computeBounds",value:function e(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;var r=arguments.length>1?arguments[1]:void 0;var n=r-this.overscan;var i=r+a.height+this.overscan;var s=h()(p()(t.prototype),"getBounds",this).call(this,n,i);return this.snapBounds(a,s)}},{key:"snapBounds",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;var a=arguments.length>1?arguments[1]:void 0,r=a.start,n=a.end;return{start:r<P?0:r,end:t.keys.length-n<P?t.keys.length:n}}},{key:"renderLoading",value:function e(t,a){var r=t?{top:0,paddingTop:40}:{bottom:0,paddingBottom:15};var n=t?"degradedLoadingTop":"degradedLoadingBottom";var i=this.props.featureOfflineMode&&this.props.isOffline&&!a;var s=N.t("Loading history...");this.props.featureOfflineMode&&i&&(s=y.a.createElement("span",null,y.a.createElement(C["b"],{type:"cloud-offline-small",size:"inherit"})," ",y.a.createElement("strong",null,N.t("No connection."))," ",N.t("Go online to load more messages.")));var o=k()("p-degraded_list__loading",{"p-degraded_list__loading--offline":i});return y.a.createElement("div",{key:n,className:o,style:r},s)}},{key:"renderItems",value:function e(){var a=h()(p()(t.prototype),"renderItems",this).call(this);var r=this.state.start>0;var i=this.state.end<this.props.keys.length;var s=this.props.keys.length>1&&(!this.props.reachedStart||r);var o=this.props.keys.length>1&&(!this.props.reachedEnd||i);return[s&&this.renderLoading(true,r)].concat(n()(a),[o&&this.renderLoading(false,i)])}}]);return t}(w["a"]);x.propTypes=M;x.defaultProps=D},function(e,t,a){"use strict";a.d(t,"a",function(){return r});function r(){var e=window.location.search||"";if(e.indexOf("force_degraded_list=1")>0)return true;if(e.indexOf("force_infinite_list=1")>0)return false;var t=window.navigator.userAgent;if(-1!==t.indexOf("Firefox"))return true;if(-1!==t.indexOf("Windows"))return true;if(-1!==t.indexOf("Linux"))return true;return false}},function(e,t,a){"use strict";var r=a(332);var n=a.n(r);var i=a(22);var s=a(162);var o=a(1037);t["a"]=function(e){if(!e)return false;var t=Object(s["o"])(e.contents,{embedReplacement:"a"});if(!t.trim())return false;if(Object(o["a"])(new n.a(e.contents))>i["MAX_MESSAGE_INPUT_WYSIWYG_LENGTH"])return false;return true}},function(e,t,a){"use strict";var r=a(1);var n=a.n(r);var i=a(89);var s=a(3772);var o=a.n(s);var l=function e(){return n.a.createElement("div",{className:"p-flexpane__loader_item"},n.a.createElement(i["a"],{noMargin:true,size:"medium"}))};l.displayName="FlexpaneLoaderItem";t["a"]=l},function(e,t,a){"use strict";var r=a(218);var n=a.n(r);var i=a(1);var s=a.n(i);var o=a(821);var l=a(0);var c=a(6);var u=a(2);var d=a.n(u);var p=a(291);var m=a(357);var h=new c["b"]("search");function v(e){var t=e.loggedInEnterpriseTeams,a=e.searchOnlyWorkspaceTeamId,r=e.selfEnterpriseOrgName,i=e.featureSearchTeamLimitFilter;if(!!i&&false===i)return null;var l=[{renderLabel:s.a.createElement("div",{className:"p-search_filter__limit_team_filter_dropdown_item"},h.rt("All {enterpriseName} Workspaces",{enterpriseName:r})),label:h.t("All {enterpriseName} Workspaces",{enterpriseName:r}),value:""}].concat(n()(t.map(function(e){return{renderLabel:s.a.createElement("div",{className:"p-search_filter__limit_team_filter_dropdown_item"},s.a.createElement(s.a.Fragment,null,s.a.createElement(p["b"],{className:"p-search_filter__limit_team_filter_icon",id:e.id,size:18})," ",s.a.createElement(m["a"],{id:e.id,bold:false}))),label:e.name,value:e.id}})));var c=""===a?l[0]:l.find(function(e){return e.value===a});return s.a.createElement(o["a"],{options:l,selectId:"search_limit_team_filter_dropdown",width:"100%",onOptionSelected:function t(a){e.onChange(a)},renderOption:function e(t){return s.a.createElement("span",null,t.renderLabel)},selectedOption:c,renderSelectedOption:function e(t){return s.a.createElement("span",null,t.renderLabel)}})}v.displayName="SearchLimitTeamFilterDropdown";v.defaultProps={loggedInEnterpriseTeams:[],searchOnlyWorkspaceTeamId:"",selfEnterpriseOrgName:"",onChange:u["noop"],featureSearchTeamLimitFilter:false};t["a"]=v},function(e,t,a){"use strict";var r=a(110);var n=a.n(r);var i=a(135);var s=a.n(i);var o=a(169);var l=a.n(o);var c=a(138);var u=a.n(c);var d=a(147);var p=a.n(d);var m=a(185);var h=a.n(m);var v=a(1);var f=a.n(v);var b=a(0);var g=a(12);var _=a(2);var y=a.n(_);var O=a(13);var k=a.n(O);var E=a(119);var C=a(104);var S=a(833);var w=a(341);var j=a(237);var I={flexName:void 0,flexParams:void 0,flexOrigin:void 0,flexOriginId:void 0,previewFile:_["noop"],showUserGroupList:_["noop"],toggleActivityFlexpane:_["noop"],showMemberDirectory:_["noop"],showDetails:_["noop"],showStarredItemsList:_["noop"],showMemberProfile:_["noop"],showFileList:_["noop"],size:"large",className:void 0};var T=function(e){h()(t,e);function t(e){var a;n()(this,t);a=l()(this,u()(t).call(this,e));a.onClick=a.onClick.bind(p()(a));a.getOrigin=a.getOrigin.bind(p()(a));a.openOrigin=a.openOrigin.bind(p()(a));return a}s()(t,[{key:"onClick",value:function e(){var t=this.props,a=t.flexOrigin,r=t.flexName;if(a)return this.openOrigin();switch(r){case"files":return this.props.showFileList();case"team":return this.props.showMemberDirectory();case"groups":case"user_groups":return this.props.showUserGroupList();default:return null}}},{key:"getOrigin",value:function e(){var t=this.props,a=t.flexOrigin,r=t.flexName,n=t.flexParams;var i=n&&n[0];if(a)return a;switch(r){case"files":return Object(S["a"])(i)?"files":null;case"team":case"groups":return Object(w["a"])(i)?"groups":null;case"user_groups":return Object(w["a"])(i)?"user_groups":null;default:return null}}},{key:"openOrigin",value:function e(){var t=this.props,a=t.flexOrigin,r=t.flexOriginId;switch(a){case"member_preview":return this.props.showMemberProfile({memberId:r});case"directory":return this.props.showMemberDirectory();case"starred_items":return this.props.showStarredItemsList("stars");case"details":case"channel_page":case"group_page":case"im_page":return this.props.showDetails({sectionId:r});case"activity":return this.props.toggleActivityFlexpane();case"file_details":return Object(S["a"])(r)?this.props.previewFile({fileId:r}):this.props.showFileList();case"files":return this.props.showFileList();default:return null}}},{key:"render",value:function e(){var t=this.getOrigin();if(!t)return null;var a=this.props,r=a.size,n=a.className;var i="chevron-"+r+"-left";return f.a.createElement(j["a"],{className:k()("p-global_nav__flex_btn","p-global_nav__flex_btn--back",n),icon:i,onClick:this.onClick})}}]);return t}(v["Component"]);T.displayName="FlexBack";T.defaultProps=I;var A=function e(t,a){var r=a.flexOrigin;return{flexName:Object(E["j"])(t),flexParams:Object(E["f"])(t),flexOrigin:r||Object(E["d"])(t),flexOriginId:Object(E["e"])(t)}};var N={previewFile:C["c"],showUserGroupList:C["p"],toggleActivityFlexpane:C["s"],showMemberDirectory:C["j"],showDetails:C["f"],showStarredItemsList:C["l"],showMemberProfile:C["k"],showFileList:C["h"]};t["a"]=Object(g["connect"])(A,N)(T)},,,,,,,function(e,t,a){"use strict";var r=a(110);var n=a.n(r);var i=a(135);var s=a.n(i);var o=a(169);var l=a.n(o);var c=a(138);var u=a.n(c);var d=a(185);var p=a.n(d);var m=a(1);var h=a.n(m);var v=a(0);var f=a(12);var b=a(38);var g=a(6);var _=a(579);var y=a(229);var O=a(1059);var k=a(145);var E=a(147);var C=a.n(E);var S=a(2);var w=a(563);var j=a(28);var I=Object(j["b"])("TS.ui.comments.startDelete");var T=a(23);var A=a(57);var N=a(98);var P=a(90);var M=new g["b"]("comments");var D={isStarred:false,updateStar:S["noop"],commentId:void 0,fileId:void 0,featureDangerouslyGuardIATranslations:false};var x=function(e){p()(t,e);function t(e){var a;n()(this,t);a=l()(this,u()(t).call(this,e));a.renderMenu=a.renderMenu.bind(C()(a));a.toggleStar=a.toggleStar.bind(C()(a));a.deleteComment=a.deleteComment.bind(C()(a));return a}s()(t,[{key:"getSavedToggleLabel",value:function e(){var t=this.props,a=t.isStarred,r=t.featureDangerouslyGuardIATranslations;if(r)return a?M.t("Unsave this file comment"):M.t("Save this file comment");return a?M.t("Unstar this file comment"):M.t("Star this file comment")}},{key:"deleteComment",value:function e(){var t=this.props,a=t.commentId,r=t.fileId;if(!a||!r)return;I(r,a)}},{key:"toggleStar",value:function e(){var t=this.props,a=t.commentId,r=t.fileId,n=t.isStarred;if(!a||!r)return;this.props.updateStar(!n,{file_comment:a,file_comment_file:r})}},{key:"renderMenu",value:function e(t){return h.a.createElement(A["f"],t,h.a.createElement(A["b"],{label:this.getSavedToggleLabel(),onSelected:this.toggleStar}),h.a.createElement(A["d"],null),h.a.createElement(A["b"],{label:M.t("Delete comment"),danger:true,onSelected:this.deleteComment}))}},{key:"render",value:function e(){return h.a.createElement(A["e"],{renderMenu:this.renderMenu,position:"left-bottom"},h.a.createElement(N["a"],{className:"p-comment__actions","aria-label":M.t("Show more actions")},h.a.createElement(T["b"],{type:"cog",size:"inherit"})))}}]);return t}(m["PureComponent"]);x.displayName="CommentActions";x.defaultProps=D;var R=function e(t){return{featureDangerouslyGuardIATranslations:Object(P["e"])(t)}};var F=Object(f["connect"])(R,{updateStar:w["a"]})(x);var L=a(3654);var U=new g["b"]("comments");var B={time24:false,fileId:void 0};var q=function(e){p()(t,e);function t(){n()(this,t);return l()(this,u()(t).apply(this,arguments))}s()(t,[{key:"render",value:function e(){var t=this.props,a=t.comment,r=t.time24,n=t.fileId;var i=a.user,s=a.timestamp,o=a.comment,l=a.is_starred,c=a.id;return h.a.createElement("div",{className:"p-comment"},h.a.createElement("div",{className:"p-comment__header"},i?h.a.createElement(O["a"],{userId:i}):null,h.a.createElement("span",{className:"p-comment__timestamp"},U.t("{date} at {time}",{date:Object(_["a"])(s,{shortenMonth:true}),time:Object(y["a"])(s,{do24hrTime:r})})),h.a.createElement(F,{isStarred:l,commentId:c,fileId:n})),h.a.createElement("div",{className:"p-comment__body"},h.a.createElement(k["a"],{text:o,memberId:i})))}}]);return t}(m["PureComponent"]);q.displayName="Comment";q.defaultProps=B;function G(e){return{time24:Object(b["k"])(e,"time24")}}var H=t["a"]=Object(f["connect"])(G)(q)},,,function(e,t,a){"use strict";var r=a(88);var n=a.n(r);var i=a(12);var s=a(2);var o=a.n(s);var l=a(35);var c=a(16);var u=a(815);var d=a(1963);var p=a(73);var m=a(2708);var h=a(580);var v=a(262);var f=a(25);var b=a(21);var g=a(33);var _=a(20);var y=a(129);var O=a(38);var k=a(370);var E=a(484);var C=a(820);var S=a(2698);var w=a(517);var j=a(349);var I=a(11);var T=a(298);var A=a(9);var N=a(41);var P=a(384);var M=a(1654);var D=a(2232);var x=a(34);var R=a(2962);var F=a(196);var L=a.n(F);var U=a(246);var B=a.n(U);var q=a(110);var G=a.n(q);var H=a(135);var W=a.n(H);var V=a(169);var K=a.n(V);var z=a(138);var Q=a.n(z);var Y=a(147);var J=a.n(Y);var X=a(185);var Z=a.n(X);var $=a(0);var ee=a(1);var te=a.n(ee);var ae=a(13);var re=a.n(ae);var ne=a(787);var ie=a(850);var se=a(849);var oe=a(2709);var le=a(2090);var ce=a(102);var ue=a(22);var de=a(270);var pe=a(775);var me=a(244);var he=a(602);var ve=a(229);var fe=a(579);var be=a(165);var ge=a(6);var _e=a(2699);var ye=a(1436);var Oe=a(562);var ke=a(235);var Ee=a(1999);var Ce=a(1313);var Se=a(24);var we=a(918);var je=a(219);var Ie=a(2757);var Te=a(145);var Ae=a(54);var Ne=a(527);var Pe=a(1242);var Me=a(1465);var De=a(2705);var xe=a(23);var Re=a(1346);var Fe=a(144);var Le=a(445);var Ue=a(1059);var Be=a(2809);var qe=a(1154);var Ge=a(832);var He=a(2387);var We=a(2770);var Ve=a(2810);var Ke=a(2706);var ze=a(2808);var Qe=a(2776);var Ye=a(2019);var Je=a(104);var Xe=a(90);var Ze=a(2711);var $e=a(2712);var et=a(561);var tt=new ge["b"]("message");var at={pinned:"thumb-tack-filled",starred:"star",custom_response:"pencil",sli_highlight:"sparkles-filled",ephemeral:"eye-filled"};var rt={isVisible:false,isPinned:false,isStarred:false,isEphemeral:false,isCustomResponse:false,isSliHighlight:false,isSelfIm:false,isSlackbotIm:false,primaryType:void 0,sliHighlight:void 0,isHovered:false,channelId:void 0,ts:void 0,currentUserId:void 0,pinnedByMemberId:void 0,showStarredItemsList:s["noop"],isIAP1Enabled:false,featureDangerouslyGuardIATranslations:false};var nt=function(e){Z()(t,e);W()(t,null,[{key:"getDerivedStateFromProps",value:function e(t,a){var r=t.currentUserId,n=t.pinnedByMemberId,i=t.isPinned,s=t.isStarred,o=t.featureContextualMessageShortcuts,l=t.isIAP1Enabled;if(!o)return null;if(n===r){if(!a.isPinnedByCurrentUser&&i)return{isPinnedByCurrentUser:true,ariaLiveMessage:tt.t("Added to the pinned items",{note:"Used to confirm the pin action for customers using screen readers. Not visible on screen."})};if(a.isPinnedByCurrentUser&&!i)return{isPinnedByCurrentUser:false,ariaLiveMessage:tt.t("Removed from the pinned items",{note:"Used to confirm the remove pin action for customers using screen readers. Not visible on screen."})}}if(!a.isStarred&&s)return{isStarred:true,ariaLiveMessage:l?"Added to your saved items":tt.t("Added to your starred items",{note:"Used to confirm the star action for customers using screen readers. Not visible on screen."})};if(a.isStarred&&!s)return{isStarred:false,ariaLiveMessage:l?"Removed from your saved items":tt.t("Removed from your starred items",{note:"Used to confirm the remove star action for customers using screen readers. Not visible on screen."})};return null}}]);function t(e){var a;G()(this,t);a=K()(this,Q()(t).call(this,e));a.renderHighlight=a.renderHighlight.bind(J()(a));a.renderStarButton=a.renderStarButton.bind(J()(a));a.state={isPinnedByCurrentUser:false,isStarred:false,ariaLiveMessage:void 0};return a}W()(t,[{key:"componentDidUpdate",value:function e(){this.eventuallyRemoveAriaLiveMessage()}},{key:"componentWillUnmount",value:function e(){this.timerId&&clearTimeout(this.timerId)}},{key:"eventuallyRemoveAriaLiveMessage",value:function e(){var t=this;if(!this.state.ariaLiveMessage)return;this.timerId&&clearTimeout(this.timerId);this.timerId=setTimeout(function(){t.setState(function(){return{ariaLiveMessage:void 0}});t.timerId=null},3e3)}},{key:"renderGutter",value:function e(){var t=this.props,a=t.primaryType,r=t.featureSonicInputs,n=t.isIAP1Enabled;var i=at[a];n&&"starred"===a&&(i="bookmark-filled");var s=re()("c-message__label__gutter",{"c-message__label__gutter--feature_sonic_inputs":r});return te.a.createElement("div",{className:s},i&&te.a.createElement(xe["b"],{type:i,className:"c-message__label__icon",size:"inherit",inline:true}))}},{key:"renderHighlight",value:function e(){var t=this.props,a=t.sliHighlight,r=t.channelId,n=t.ts,i=t.isHovered;if(!Object(E["shouldShowHighlightsLabel"])(a))return null;return te.a.createElement($e["a"],{channelId:r,ts:n,isHovered:i,sliHighlight:a})}},{key:"renderPinnedBy",value:function e(t){return te.a.createElement(et["a"],{id:t,className:"c-message__label_link"})}},{key:"renderStarButton",value:function e(t){var a=t.text;return te.a.createElement(Se["c"],{onClick:this.props.showStarredItemsList,className:"c-message__label_button"},a)}},{key:"render",value:function e(){var t=this.props,a=t.isPinned,r=t.isStarred,n=t.isEphemeral,i=t.isCustomResponse,s=t.isSliHighlight,o=t.isSelfIm,l=t.isSlackbotIm,c=t.isVisible,u=t.currentUserId,d=t.pinnedByMemberId,p=t.isIAP1Enabled,m=t.featureDangerouslyGuardIATranslations;var h=Object(Ze["a"])({isPinned:a,isStarred:r,isEphemeral:n,isCustomResponse:i,isSliHighlight:s,isSelfIm:o,isSlackbotIm:l,isIAP1Enabled:p,featureDangerouslyGuardIATranslations:m,currentUserId:u,pinnedBy:d,renderHighlight:this.renderHighlight,renderPinnedBy:this.renderPinnedBy,renderStarButton:this.renderStarButton});var v=c&&h?te.a.createElement("div",{className:"c-message__label"},this.renderGutter(),te.a.createElement("div",{className:"c-message__label__text"},h)):void 0;return te.a.createElement(te.a.Fragment,null,v,te.a.createElement("div",{className:"c-message__visually_hidden_label","aria-live":"assertive"},this.state.ariaLiveMessage))}}]);return t}(ee["PureComponent"]);nt.displayName="MessageLabel";nt.defaultProps=rt;var it=function e(t){return{featureSonicInputs:Object(I["isFeatureEnabled"])(t,"feature_sonic_inputs"),featureContextualMessageShortcuts:Object(I["isFeatureEnabled"])(t,"feature_contextual_message_shortcuts"),isIAP1Enabled:Object(Xe["e"])(t),featureDangerouslyGuardIATranslations:Object(Xe["e"])(t)}};var st=function e(t){return{showStarredItemsList:function e(){return t(Je["l"].apply(void 0,arguments))}}};var ot=Object(i["connect"])(it,st)(nt);var lt=a(3610);function ct(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function ut(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ct(Object(a),true).forEach(function(t){n()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ct(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var dt=new ge["b"]("message");var pt=200;var mt=20;var ht=10;var vt="theme_install_button";var ft={quote:true,pre:true};var bt={logger:{info:s["noop"],warn:s["noop"],error:s["noop"]},message:null,ts:null,messageNotFound:false,channelId:void 0,text:null,noSpecials:false,alertType:null,subtype:null,theme:"light",userId:null,botId:null,appId:null,username:null,hasAdHocSender:false,reactionKey:null,reactionKeyForInitialFileComment:null,replies:[],replyCount:0,replyUsers:[],replyUsersCount:0,latestReply:null,threadsEverythingPref:null,expandInlineImgsPref:false,expandNonMediaAttachmentsPref:false,threadTs:null,attachments:[],fileId:null,fileIds:null,comment:null,isUpload:false,showUser:true,isFileFollowup:false,isEditing:false,isHovered:false,maybeStartEditingMessage:s["noop"],edited:null,isLast:false,latestMessageTsWithReactions:null,rollup:null,logMessage:s["noop"],setUnreadPoint:s["noop"],isStarred:false,isStandalone:false,isPinned:false,currentUserId:void 0,pinnedByMemberId:void 0,sliHighlight:null,isEphemeral:false,isRichTextMessage:false,shouldRenderBlocks:false,isDeleting:false,icons:null,botProfile:null,slackbotFeels:null,fadeAwayHighlight:false,doneHighlighting:s["noop"],isUnprocessed:false,showResend:false,showCancel:false,sourceTeamId:"",resendMsg:s["noop"],removeMsg:s["noop"],shouldJumpToTimestamp:false,isSelfIm:false,isSlackbotIm:false,isTombstonedMessage:false,isUnknown:false,isEKMError:false,featureAttachmentsV2:false,teamDomain:void 0,channelSessionId:null,previousMessageIsPinned:void 0,previousMessageIsEphemeral:void 0,previousMessageIsStarred:void 0,previousMessageSubtype:void 0,previousMessageSliHighlight:void 0,previousMessagePinnedByMemberId:void 0,renderActions:false,renderActionsOffscreen:false,messageContainerType:void 0,ariaAssertive:void 0,blocks:void 0,serviceTeamId:void 0,featureSonicInputs:false,clogMessageClick:s["noop"],clogUserClick:s["noop"],isThreadExpanded:false,threadListId:void 0,showThreadIfThreadable:s["noop"],blocksContainerContext:Fe["a"].message,hasKeyboardFocusWithin:false,onFocus:s["noop"],onBlur:s["noop"],parentId:void 0};var gt=function(e){Z()(t,e);function t(e){var a;G()(this,t);a=K()(this,Q()(t).call(this,e));a.setRef=a.setRef.bind(J()(a));a.onContainerClick=a.onContainerClick.bind(J()(a));a.onTimestampClick=a.onTimestampClick.bind(J()(a));a.startEditing=a.startEditing.bind(J()(a));a.onMouseEnter=a.onMouseEnter.bind(J()(a));a.onMouseLeave=a.onMouseLeave.bind(J()(a));a.onMenuToggle=a.onMenuToggle.bind(J()(a));a.startHighlightingTimer=a.startHighlightingTimer.bind(J()(a));a.onDoneHighlighting=a.onDoneHighlighting.bind(J()(a));a.onDeleteAnimationTick=a.onDeleteAnimationTick.bind(J()(a));a.onDeleteAnimationEnd=a.onDeleteAnimationEnd.bind(J()(a));a.resendMsg=a.resendMsg.bind(J()(a));a.removeMsg=a.removeMsg.bind(J()(a));a.formatInlineAttachmentMaybe=a.formatInlineAttachmentMaybe.bind(J()(a));a.formatThemeInstallButton=a.formatThemeInstallButton.bind(J()(a));a.customFormatHandler=a.customFormatHandler.bind(J()(a));a.customContentHandler=a.customContentHandler.bind(J()(a));a.clogLinkClick=a.clogLinkClick.bind(J()(a));a.clogUserClick=a.clogUserClick.bind(J()(a));a.shouldShowAttachment=a.shouldShowAttachment.bind(J()(a));a.messageRef=null;a.deleteAnimation=null;a.hasDisplayedContent=true;a.inlineAttachmentsKey=0;a.setAttachmentsSorted();a.state={isHovered:e.isHovered,actionsMenuOpen:false,height:null};return a}W()(t,[{key:"componentDidMount",value:function e(){this.props.fadeAwayHighlight&&this.startHighlightingTimer();this.isDeleting()&&this.onDeleteAnimationEnd()}},{key:"UNSAFE_componentWillReceiveProps",value:function e(t){var a=this.props.fadeAwayHighlight;t.fadeAwayHighlight&&!a&&this.startHighlightingTimer();this.isDeleting(t)&&!this.isDeleting()&&this.startDeleteAnimation();this.setAttachmentsSorted(t);this.setState(function(){return{isHovered:t.isHovered}})}},{key:"componentDidCatch",value:function e(t){this.setState(function(){return{caughtError:true}});var a=t?t.message:"";var r=t?t.stack:"";var n=this.props||{};var i=n.channel&&n.channelId;var s=n.logger;s.error("Message componentDidCatch: "+n.subtype+" "+n.ts+" in "+i+", "+a);r&&s.error(r)}},{key:"componentWillUnmount",value:function e(){if(this.highlightTimer){clearTimeout(this.highlightTimer);this.onDoneHighlighting()}if(this.deleteAnimation){this.deleteAnimation.cancel();this.onDeleteAnimationEnd()}}},{key:"onContainerClick",value:function e(t){if(t.shiftKey&&Object(Oe["a"])(t)&&!Object(_e["a"])(t.target)){t.stopPropagation();this.props.logMessage({channelId:this.props.channelId,ts:this.props.ts});return}if(t.altKey){t.preventDefault();this.props.setUnreadPoint({channelId:this.props.channelId,unreadTs:this.props.ts})}}},{key:"onDeleteAnimationEnd",value:function e(){this.removeMsg();this.deleteAnimation=null}},{key:"onDeleteAnimationTick",value:function e(t){var a=t.value,r=t.nextTick;if(!this.messageRef)return;this.setState(function(){return{height:a}},r)}},{key:"onDoneHighlighting",value:function e(){this.props.doneHighlighting();this.highlightTimer=null}},{key:"onMenuToggle",value:function e(t){var a=this;if(!t){setTimeout(function(){a.setState(function(){return{actionsMenuOpen:false}})},100);return}this.setState(function(){return{actionsMenuOpen:t}})}},{key:"onMouseEnter",value:function e(){this.setState(function(){return{isHovered:true}})}},{key:"onMouseLeave",value:function e(){this.setState(function(){return{isHovered:false}})}},{key:"onTimestampClick",value:function e(t){t.preventDefault();this.props.shouldJumpToTimestamp&&Object(ke["o"])(this.props.channelId,this.props.ts,this.props.threadTs)}},{key:"getResendText",value:function e(){var t=this.props.isEKMError;if(t)return dt.t("Your message couldn\u2019t be sent because your admins have disabled sending messages to this channel.");return dt.t("Slack couldn\u2019t send this message")}},{key:"getTextWithThemes",value:function e(){if(!this.props.text)return this.props.text;var t=/((?:#[A-Fa-f0-9]{6} {0,}, {0,}){7})(#[A-Fa-f0-9]{6})(\b)/g;return this.props.text.replace(t,function(e){return e+" <"+vt+"|"+e+">"})}},{key:"setAttachmentsSorted",value:function e(){var t=this;var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,r=a.attachments,n=a.text,i=a.featureWysiwygAnchorText;var o=Object(s["partition"])(Object(s["map"])(Object(s["filter"])(r,this.shouldShowAttachment),me["b"]),function(e){return!i&&t.isInlineImage(e,n)}),l=B()(o,2),c=l[0],u=l[1];this.attachmentsInline&&c&&!Object(be["a"])(this.attachmentsInline,c,2)&&(this.inlineAttachmentsKey+=1);this.attachmentsInline=c;this.attachmentsBelow=u}},{key:"setRef",value:function e(t){this.messageRef=t}},{key:"clogLinkClick",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var a=this.props,r=a.ts,n=a.channelId,i=a.userId,s=a.botId;var o={ts:r,user:i,channel:n,bot_id:s};var l=ut({},t,{request_id:null});"user_link"===t.type?this.props.clogUserClick({msg:o,payload:l}):this.props.clogMessageClick({msg:o,payload:l})}},{key:"clogUserClick",value:function e(t){this.clogLinkClick(ut({type:"user_link"},t))}},{key:"customContentHandler",value:function e(t){var a=this.props.edited;if(a){var r=o.a.last(t)||{};t.push({type:"custom_edited_label",omitWhitespace:!!ft[r.type]})}this.hasDisplayedContent=!!t.length;return t}},{key:"customFormatHandler",value:function e(t){var a=t.item,r=t.getDefaultOutput;var n;"link"===a.type?n=a.url===vt?this.formatThemeInstallButton(t):this.formatInlineAttachmentMaybe(t):"custom_edited_label"===a.type&&(n=this.renderEditedLabel({omitWhitespace:a.omitWhitespace}));return n||r()}},{key:"focusFirst",value:function e(t){this.focusNode(Object(he["c"])(t))}},{key:"focusLast",value:function e(t){this.focusNode(Object(he["d"])(t))}},{key:"focusNode",value:function e(t){if(!t)return;if(document.activeElement===t)return;t.focus();t.classList.add("focus-ring")}},{key:"formatInlineAttachmentMaybe",value:function e(t){var a=t.item,r=t.getDefaultOutput;var n=this.props,i=n.ts,l=n.channelId,c=n.sourceTeamId;var u=a.url;var d=Object(s["find"])(this.attachmentsInline,{fromUrl:o.a.unescape(u)});if(!d)return r();return te.a.createElement(te.a.Fragment,null,r(),te.a.createElement(we["a"],L()({},d,{messageTs:i,activeChannelId:l,sourceTeamId:c,clogLinkClick:this.clogLinkClick,botProfile:this.props.botProfile,isInline:true})))}},{key:"formatThemeInstallButton",value:function e(t){var a=t.item;var r=a.contents[0].text.replace(/\s/g,"").split(",");return te.a.createElement("div",{className:"c-message__theme_button_container"},te.a.createElement(Ye["a"],{colors:r,clogLinkClick:this.clogLinkClick}))}},{key:"isDeleting",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;var e=t.isDeleting,a=t.isStandalone;return e&&!a}},{key:"isInlineImage",value:function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props.text;return a&&-1!==o.a.unescape(a).indexOf(t.fromUrl)&&Object(Ne["l"])(t)}},{key:"isThreadRootTombstone",value:function e(){return"tombstone"===this.props.subtype}},{key:"removeMsg",value:function e(){var t=this.props,a=t.ts,r=t.channelId,n=t.messageContainerType,i=t.subtype;var s="thread_broadcast"===i&&n===ue["MESSAGE_CONTAINERS"].THREADS_FLEXPANE;this.props.removeMsg({channelId:r,ts:a,broadcastDelete:s})}},{key:"resendMsg",value:function e(){var t=this.props,a=t.ts,r=t.channelId;this.props.resendMsg(r,a)}},{key:"shouldShowAttachment",value:function e(t){var a=this.props,r=a.text,n=a.blocks,i=a.subtype,s=a.isStandalone,o=a.expandInlineImgsPref,l=a.expandNonMediaAttachmentsPref,c=a.isRichTextMessage;return Object(se["g"])({attachment:t,messageText:r,messageBlocks:n,messageSubtype:i,messageIsStandalone:s,expandInlineImgsPref:o,expandNonMediaAttachmentsPref:l,isRichTextMessage:c})}},{key:"shouldShowMessageLabel",value:function e(t){var a=t.labelTypes;var r=this.props,n=r.showUser,i=r.isFileFollowup,s=r.pinnedByMemberId,l=r.previousMessageIsStarred,c=r.previousMessageIsPinned,u=r.previousMessageIsEphemeral,d=r.previousMessageSubtype,p=r.previousMessageSliHighlight,m=r.previousMessagePinnedByMemberId;if(o.a.isEmpty(a))return false;if(a.sliHighlight)return true;if(!n||i){var h=Object(le["a"])({isStarred:l,isPinned:c,isEphemeral:u,subtype:d,sliHighlight:p});if(Object(be["a"])(a,h))return a.isPinned&&h.isPinned&&m!==s}return true}},{key:"shouldShowResendControls",value:function e(){var t=this.props,a=t.showResend,r=t.showCancel;return a||r}},{key:"startDeleteAnimation",value:function e(){if(!this.messageRef)return;var t=this.messageRef.clientHeight;this.deleteAnimation=Object(pe["a"])({fromValue:t,toValue:0,duration:pt,easing:"easeInOutQuad",onTick:this.onDeleteAnimationTick,onComplete:this.onDeleteAnimationEnd})}},{key:"startEditing",value:function e(){var t=this.props,a=t.maybeStartEditingMessage,r=t.channelId,n=t.ts;a({channelId:r,ts:n,scroll:true})}},{key:"startHighlightingTimer",value:function e(){if(this.highlightTimer)return;this.highlightTimer=setTimeout(this.onDoneHighlighting,4500)}},{key:"renderActions",value:function e(){var t=this;var a=this.props,r=a.ts,n=a.reactionKey,i=a.fileId,s=a.fileIds,o=a.comment,l=a.replies,c=a.replyCount,u=a.rollup,d=a.threadsEverythingPref,p=a.threadTs,m=a.channelId,h=a.subtype,v=a.isStarred,f=a.isPinned,b=a.isEphemeral,g=a.isDeleting,_=a.isStandalone,y=a.isUnknown,O=a.setUnreadPoint,k=a.theme,e=a.renderActions,E=a.renderActionsOffscreen,C=a.messageContainerType,S=a.hasKeyboardFocusWithin,w=a.parentId;var j=this.state,I=j.actionsMenuOpen,T=j.isHovered;if(!r||!m)return null;var A=E&&!S&&!T&&!e;if(!I&&!T&&!S&&!A&&!e)return null;if(g||_||y)return null;return te.a.createElement(ze["a"],{reactionKey:n,fileId:i,fileIds:s,comment:o&&o.id,replies:l,replyCount:c,rollup:u,ts:r,threadsEverythingPref:d,threadTs:p,channelId:m,subtype:h,isStarred:v,isPinned:f,isEphemeral:b,editHandler:this.startEditing,unreadHandler:O,onMenuOpen:function e(){return t.onMenuToggle(true)},onMenuClose:function e(){return t.onMenuToggle(false)},onEmojiPickerOpen:function e(){return t.onMenuToggle(true)},onEmojiPickerClose:function e(){return t.onMenuToggle(false)},theme:k,renderOffscreen:A,messageContainerType:C,parentId:w})}},{key:"renderAttachments",value:function e(){var t=this;var a=this.props,r=a.ts,n=a.channelId,i=a.blocks,o=a.text,l=a.blocksContainerContext,c=a.sourceTeamId;var u=this.attachmentsBelow;if(!u||!u.length)return null;var d=mt;var p=Object(s["map"])(u,function(e,a){var s=e.id||a+1;var u=e.botId||t.props.botId;e.blocks&&(d=ht);return te.a.createElement(we["a"],L()({},e,{service:u,messageTs:r,activeChannelId:n,sourceTeamId:c,key:s,clogLinkClick:t.clogLinkClick,botProfile:t.props.botProfile,isOnlyMessageContent:!t.hasDisplayedContent||!i&&!o,blocksContainerContext:l}))});var m=p.splice(d);return te.a.createElement("div",{className:"c-message__attachments"},p,this.renderAttachmentsOverLimitMaybe(m,d))}},{key:"renderAttachmentsOverLimitMaybe",value:function e(t,a){if(!t.length)return null;var r=this.props.featureAllyBugbash;var n={useAttachmentRules:false,shouldBeExpandedByDefault:false,expandableKey:Object(ie["a"])("attachmentsOverLimit",this.props.ts,{limit:a})};var i=t.length-a;var s=r?{"aria-label":dt.t("{remainingAttachments, plural, =1 {Toggle attachment} other {Toggle additional {remainingAttachments} attachments}}",{remainingAttachments:i,note:"the label for the button that expands/collapses addtional message attachments, describes the button for customers using screen readers"})}:{};return te.a.createElement("div",null,te.a.createElement(Pe["a"],L()({},n,s),t),te.a.createElement(Me["a"],L()({},n,{render:function e(a,r){return te.a.createElement(De["a"],{isExpanded:a.isExpanded,onClick:r,attachmentsOverLimitCount:t.length})}})))}},{key:"renderAutomatedSubtype",value:function e(){return te.a.createElement(We["a"],{subtype:this.props.subtype,channelId:this.props.channelId,timestamp:this.props.ts})}},{key:"renderAvatar",value:function e(){var t=36;if(this.isThreadRootTombstone())return te.a.createElement("div",{className:"c-message__tombstone_icon"},te.a.createElement(xe["a"],{type:"trash",align:"top"}));var a=this.props,r=a.userId,n=a.hasAdHocSender,i=a.botId,s=a.botProfile,o=a.isStandalone,l=a.icons,c=a.slackbotFeels,u=a.isTombstonedMessage,d=a.isUnknown;return te.a.createElement(je["b"],{className:"c-message__avatar",userId:r,isAdHocMember:n,botId:i,botProfile:s,slackbotFeels:c,size:t,icons:l,isInteractive:!u&&!o,isUnknown:d,showCard:true,showTooltip:true,clogLinkClick:this.clogUserClick,ariaHidden:"true",tabIndex:"-1"})}},{key:"renderBody",value:function e(){var t=this.props,a=t.ts,r=t.fileId,n=t.subtype,i=t.rollup,s=t.userId,o=t.edited,l=t.noSpecials,c=t.ariaAssertive,u=t.attachments,d=t.blocks,p=t.shouldRenderBlocks,m=t.isTombstonedMessage,h=t.isUnknown,v=t.sourceTeamId,f=t.message,b=t.blocksContainerContext,g=t.isRichTextMessage,_=t.theme;if(this.isThreadRootTombstone())return te.a.createElement("span",{className:"c-message__body c-message__body--tombstone"},dt.t("This message was deleted."));if(h)return te.a.createElement("span",{className:"c-message__body c-message__body--unknown"},"\xa0");if(r||"file_comment"===n||"file_mention"===n)return null;if(i)return this.renderRollup();if(Object(ne["a"])(n))return this.renderAutomatedSubtype();var y=re()("c-message__body",{"c-message__body--me":"me_message"===n,"c-message__body--automated":m});if(d&&p)return te.a.createElement(Re["a"],{blocksContainerContext:b,msg:f,clogLinkClick:this.clogLinkClick,inline:g&&"dense"===_});var O=parseInt(a,10)>ue["ADD_DIRECTION_ATTRIBUTE_TS"];return te.a.createElement(Te["a"],{"data-qa":"message-text",className:y,text:this.getTextWithThemes(),memberId:s,customFormatHandler:this.customFormatHandler,customContentHandler:this.customContentHandler,key:this.inlineAttachmentsKey,doSlackActionLinks:true,clogLinkClick:this.clogLinkClick,noSpecials:l,ariaAssertive:c,ignoredPropEdited:o,ignoredPropAttachments:u,addDirectionAttr:O,sourceTeamId:v})}},{key:"renderContent",value:function e(){var t=this.props,a=t.showUser,r=t.theme,n=t.isStandalone,i=t.reactionKey,s=t.reactionKeyForInitialFileComment;var o=re()("c-message__content",{"c-message__content--feature_sonic_inputs":this.props.featureSonicInputs});return te.a.createElement("div",{className:o,"data-qa":"message_content"},a&&this.renderContentHeader(),"light"===r&&this.renderThreadBroadcastPreamble(),this.renderBody(),this.renderFile(),this.renderFiles(),this.renderAttachments(),!n&&!this.isThreadRootTombstone()&&this.renderReactions(i),!n&&!this.isThreadRootTombstone()&&this.renderReactions(s),!n&&this.renderReplyBar(),this.renderThreadBroadcastFooter(),this.shouldShowResendControls()&&this.renderResendControls())}},{key:"renderContentHeader",value:function e(){var t=this.props,a=t.userId,r=t.botId,n=t.username,i=t.theme,s=t.isUpload,o=t.isStandalone,l=t.isTombstonedMessage,c=t.botProfile;if(this.isThreadRootTombstone())return null;var u=l?Object(ye["a"])({upload:s}):void 0;return te.a.createElement("div",{className:"c-message__content_header"},te.a.createElement(Ue["a"],{overrideNameText:u,userId:a,botId:r,username:n,isInteractive:!o&&!l,botProfile:c,clogLinkClick:this.clogUserClick})," ","light"===i&&this.renderTimestamp(),"dense"===i&&te.a.createElement("span",{className:"c-message__dense_copy_timestamp copy_only"},this.renderTimestamp(),te.a.createElement("br",null)),"dense"===i&&"\xa0","dense"===i&&this.renderThreadBroadcastPreamble())}},{key:"renderEdit",value:function e(){var t=this.props,a=t.channelId,r=t.ts,n=t.messageContainerType;if(!r||!a)return null;return te.a.createElement("div",{className:"c-message__content"},te.a.createElement(Qe["a"],{channelId:a,ts:r,messageContainerType:n}))}},{key:"renderEditedLabel",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.omitWhitespace,r=void 0!==a&&a;var n=this.props.edited;var i=n.ts;var s=te.a.createElement("span",{key:"edited",className:"c-message__edited_label",dir:"ltr"},!r&&"\xa0",dt.t("(edited)"),!r&&"\xa0");if(i){var o=dt.t("{date} at {time}",{date:Object(fe["a"])(i,{shortenMonth:true}),time:Object(ve["a"])(i)});return te.a.createElement(Ae["c"],{key:"edited",delay:Ae["a"],tip:o},s)}return s}},{key:"renderError",value:function e(){if(!this.props.featureTinyspeck)return null;var t=this.props,a=t.ts,r=t.channelId;var n={background:"#FFCFCF",padding:"24px"};return te.a.createElement("div",{style:n},te.a.createElement("strong",null,"TS-ONLY: Message ",a," in ",r," failed to render.")," ","Please go to #escal-messages and read up to see if this was already reported. If not, please make a report including a link to the message before this one (if in a public channel.)")}},{key:"renderFile",value:function e(){var t=this.props,a=t.fileId,r=t.comment,n=t.subtype;if(!a)return null;if(r&&"file_comment"===n)return this.renderFileComment();return null}},{key:"renderFileComment",value:function e(){var t=this.props,a=t.fileId,r=t.comment,n=t.isFileFollowup,i=t.theme,s=t.subtype,o=t.userId;if(!a||!r)return null;var l="file_comment"===s&&(!n||"dense"===i)&&te.a.createElement(Ge["a"],{fileId:a,comment:r,followup:n,key:r.id+"-meta"});return[l||null,te.a.createElement(Te["a"],{text:r.comment,memberId:o,className:"c-message__comment c-message__body",key:r.id+"-body",clogLinkClick:this.clogLinkClick})]}},{key:"renderFiles",value:function e(){var t=this.props,a=t.fileIds,r=t.channelId,n=t.subtype,i=t.text;if(!a||!a.length||!r)return null;if("file_comment"===n)return null;var s=te.a.createElement(Le["b"],{msg:this.props.message});var o=re()("c-message__files","c-message__files--file_threads_meta_data","c-message__files--pillow",{"c-message__files--empty_body":!i});return te.a.createElement("div",{className:o},s)}},{key:"renderGutter",value:function e(){var t=re()("c-message__gutter",{"c-message__gutter--feature_sonic_inputs":this.props.featureSonicInputs});if("light"===this.props.theme){if(this.props.isFileFollowup)return te.a.createElement("div",{className:re()(t,"c-message__gutter--empty")});if(this.props.isEditing||this.props.showUser)return te.a.createElement("div",{className:t},this.renderAvatar())}return te.a.createElement("div",{className:t},this.renderTimestamp({isHiddenFromCopy:"dense"===this.props.theme}))}},{key:"renderMessageLabel",value:function e(t){var a=t.labelTypes,r=t.primaryLabelType;var n=this.props,i=n.sliHighlight,s=n.isSlackbotIm,o=n.isSelfIm,l=n.channelId,c=n.ts,u=n.currentUserId,d=n.pinnedByMemberId,p=n.sourceTeamId;var m=this.state.isHovered;return te.a.createElement(ot,L()({},a,{isVisible:this.shouldShowMessageLabel({labelTypes:a}),primaryType:r,channelId:l,ts:c,isHovered:m,isSlackbotIm:s,isSelfIm:o,sliHighlight:i,currentUserId:u,pinnedByMemberId:d,sourceTeamId:p}))}},{key:"renderReactions",value:function e(t){var a=this.props,r=a.ts,n=a.latestMessageTsWithReactions;if("file_comment"===this.props.subtype)return null;if(!t)return null;var i=r===n;return te.a.createElement(Ie["a"],{reactionKey:t,isLatestReactionInChannel:i})}},{key:"renderReplyBar",value:function e(){var t=this.props,a=t.replies,r=t.replyCount,n=t.replyUsers,i=t.replyUsersCount,s=t.latestReply,o=t.channelId,l=t.threadTs,c=t.isThreadExpanded,u=t.threadListId,d=t.showThreadIfThreadable;if(!o||!r)return null;return te.a.createElement(Be["a"],{channelId:o,threadTs:l,replies:a,replyCount:r,replyUsers:n,replyUsersCount:i,latestReply:s,isThreadExpanded:c,threadListId:u,showThreadIfThreadable:d})}},{key:"renderResendControls",value:function e(){var t=this.props,a=t.isEKMError,r=t.showResend,n=t.showCancel;var i=null;r&&(i=te.a.createElement(Se["c"],{className:"c-message__resend",onClick:this.resendMsg},dt.t("Try again")));var s=null;n&&(s=te.a.createElement(Se["c"],{className:"c-message__cancel",onClick:this.removeMsg},a?dt.t("Clear"):dt.t("Cancel")));var o=null;r&&n&&(o=" | ");return te.a.createElement("div",{className:"c-message__resend_controls"},te.a.createElement("div",{className:"c-message__resend_column"}),this.getResendText(),i,o,s)}},{key:"renderRollup",value:function e(){var t=this.props,a=t.rollup,r=t.channelId,n=t.userId;if(!a||!r)return null;return te.a.createElement(He["a"],{rollup:a,channelId:r,user:n})}},{key:"renderThreadBroadcastFooter",value:function e(){var t=this.props,a=t.ts,r=t.threadTs,n=t.channelId,i=t.subtype,s=t.isStandalone;if(!a||!n||!r||s||"thread_broadcast"!==i)return null;return te.a.createElement(Ke["a"],{ts:a,threadTs:r,channelId:n})}},{key:"renderThreadBroadcastPreamble",value:function e(){var t=this.props,a=t.ts,r=t.threadTs,n=t.channelId,i=t.subtype,s=t.isStandalone;if(!a||!n||s||"thread_broadcast"!==i)return null;return te.a.createElement(Ve["a"],{ts:a,threadTs:r,channelId:n})}},{key:"renderTimestamp",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.isHiddenFromCopy,r=void 0!==a&&a;var n=this.props,i=n.teamDomain,s=n.channelId,o=n.ts,l=n.threadTs,c=n.isStandalone,u=n.isTombstonedMessage;if(!o||!s||u)return null;var d;var p;if(!c){d=Object(N["constructAbsoluteMsgPermalink"])({teamDomain:i,channelId:s,ts:o,threadTs:l});p=this.onTimestampClick}var m={};r&&(m["data-stringify-text"]="");return te.a.createElement(qe["b"],L()({timestamp:o,relative:false,full:false,link:d,onClick:p},m))}},{key:"render",value:function e(){var t;if(this.state.caughtError)return this.renderError();if(this.props.messageNotFound)return null;var a=this.props,r=a.theme,i=a.isEditing,s=a.showUser,o=a.alertType,l=a.fadeAwayHighlight,c=a.isLast,u=a.isStandalone,d=a.isUnprocessed,p=a.subtype,m=a.rollup,h=a.sliHighlight,v=a.ts,f=a.isPinned,b=a.isEphemeral,g=a.isStarred,_=a.isTombstonedMessage,y=a.isEKMError,O=a.hasKeyboardFocusWithin;var k=this.state,C=k.isHovered,S=k.actionsMenuOpen,w=k.height;var j=Object(le["a"])({isPinned:f,isEphemeral:b,isStarred:g,subtype:p,sliHighlight:h});var I=Object(oe["a"])(j);var T=re()("c-message",(t={},n()(t,"c-message--"+r,r),n()(t,"c-message--hover",C||S),n()(t,"c-message--focus-within",O),n()(t,"c-message--adjacent",!i&&!s&&!u),n()(t,"c-message--thread_broadcast","thread_broadcast"===p),n()(t,"c-message--highlight_yellow_bg","shared_channel_join"===o),n()(t,"c-message--highlight",!u&&i),n()(t,"c-message--fade_highlight",l&&!I),n()(t,"c-message--last",c),n()(t,"c-message--rollup",m),n()(t,"c-message--standalone",u),n()(t,"c-message--unprocessed",d),n()(t,"c-message--resend",this.shouldShowResendControls()),n()(t,"c-message--deleting",this.isDeleting()),n()(t,"c-message--editing",i),n()(t,"c-message--sli_highlight_negative",Object(E["isNegativeHighlightFeedback"])(h)),n()(t,"c-message--"+I,I),t));var A={};null!==w&&(A={height:w});return te.a.createElement("div",{ref:this.setRef,className:T,onClick:this.onContainerClick,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onMouseOver:this.onMouseEnter,onFocus:this.props.onFocus,onBlur:this.props.onBlur,style:A,role:"document","data-qa":"message_container","data-qa-hover":"true","data-qa-placeholder":Object(N["isTempTs"])(v),"data-qa-label":I},this.renderMessageLabel({labelTypes:j,primaryLabelType:I}),this.renderGutter(),!u&&i&&this.renderEdit(),(u||!i)&&this.renderContent(),!_&&!y&&!u&&!i&&this.renderActions())}}]);return t}(ee["PureComponent"]);gt.displayName="Message";gt.defaultProps=bt;var _t=Object(de["a"])("feature_ally_bugbash")(Object(Ce["a"])(Object(Ee["a"])(gt)));function yt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function Ot(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?yt(Object(a),true).forEach(function(t){n()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):yt(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var kt=function e(t,a){var r=a.ts,n=a.channelId,i=a.previousMessageTs;var o=Object(p["a"])(t,n,r);var u=Object(k["a"])(t);var d=Object(O["k"])(t,"threads_everything");var m=Object(O["k"])(t,"expand_inline_imgs");var h=Object(O["k"])(t,"expand_non_media_attachments");var S=Object(_["e"])(t,n);var F=Object(I["isFeatureEnabled"])(t,"feature_attachments_v2");var L=Object(I["isFeatureEnabled"])(t,"feature_sonic_inputs");var U=Object(I["isFeatureEnabled"])(t,"feature_tinyspeck");var B=Object(l["a"])({state:t});var q=Object(c["a"])({state:t});if(!o)return{channelId:n,clogger:B,logger:q,featureTinyspeck:U,messageNotFound:true};var G=Object(b["b"])(t);r&&Object(C["d"])(G,n,r);i&&Object(C["d"])(G,n,i);var H=o.files;var W=Object(y["getFileById"])(t,Object(s["first"])(H));var V=Object(N["isFileComment"])(o)?W&&W.id:void 0;var K=false;var z=Object(p["a"])(t,n,i,K);var Q=!Object(N["isAdjacentMessage"])(t,o,z);var Y=Object(D["a"])(o,z);var J=Object(P["b"])(o);var X=Object(N["getMsgSenderEntity"])(t,o);var Z=X.botId&&Object(v["getBotByMsg"])(t,o);var $=Z?Z.app_id:null;var ee=o.slackbot_feels||null;var te=o.comment&&W&&Object(y["getFileCommentById"])(t,W.id,o.comment.id)||o.comment;var ae=Object(E["getMessageMetaData"])(t,{channelId:n,ts:r}),re=ae.isDeleting,ne=ae.sliHighlight;var ie=!!Object(j["getMessageEditData"])(t,{channelId:n,ts:r});var se=Object(N["getMessagePinnedInfo"])(o);var oe=se?se.pinnedBy:null;var le;if(z){var ce=Object(N["getMessagePinnedInfo"])(z);var ue=ce?ce.pinnedBy:null;le={previousMessageIsStarred:Object(N["isStarred"])(z),previousMessageIsPinned:Object(T["isMessagePinned"])(t,{channelId:n,ts:i}),previousMessageIsEphemeral:Object(N["isEphemeral"])(z),previousMessageSubtype:z.subtype,previousMessageSliHighlight:z.sliHighlight,previousMessagePinnedByMemberId:ue}}var de=o.thread_ts;var pe;if(de){pe={replyCount:o.reply_count};if(Object(x["a"])())if(o.reply_users){pe.replyUsers=o.reply_users;pe.replyUsersCount=o.reply_users_count;pe.latestReply=o.latest_reply}else o.replies&&(pe.replies=o.replies);else if(o.replies)pe.replies=o.replies;else{pe.replyUsers=o.reply_users;pe.replyUsersCount=o.reply_users_count;pe.latestReply=o.latest_reply}}var me=Object(I["getCurrentUserId"])(t);var he=Object(g["d"])(t);var ve=he&&he.domain;var fe;if(Z){var be=Object(f["e"])(t,o.user);fe=Object(w["getTeamIdFromBotOrUser"])({bot:Z,botProfile:o.bot_profile,member:be,teamId:G})}return Ot({message:o,channelId:n,clogger:B,logger:q,blocks:o.blocks,alertType:o.alert_type,subtype:o.subtype,text:o.text,noSpecials:false===o.mrkdwn,theme:u},X,{appId:$,hasAdHocSender:Object(M["a"])(o)},pe,{threadTs:de,threadsEverythingPref:d,expandInlineImgsPref:m,expandNonMediaAttachmentsPref:h,attachments:o.attachments,fileId:V,fileIds:H,comment:te,isUpload:o.upload,reactionKey:J,showUser:Q,isFileFollowup:Y,edited:o.edited,isStarred:Object(N["isStarred"])(o,W,"file_comment"===o.subtype&&te),isPinned:Object(T["isMessagePinned"])(t,{channelId:n,ts:r}),currentUserId:me,pinnedByMemberId:oe,sliHighlight:ne,botProfile:o.bot_profile,slackbotFeels:ee,icons:o.icons,isEditing:ie,isUnprocessed:Object(N["isTempMsg"])(o)&&!Object(N["isEphemeral"])(o),isEphemeral:Object(N["isEphemeral"])(o),isDeleting:re,showResend:o.showResend,showCancel:o.showCancel,isSlackbotIm:Object(A["isSlackbot"])(S),isRichTextMessage:Object(N["isRichTextMessage"])(o),shouldRenderBlocks:Object(N["shouldRenderBlocksInsteadOfText"])(t,o),sourceTeamId:Object(N["getSourceTeamId"])(o)||Object(b["b"])(t),isSelfIm:Object(A["isYou"])(me,S),isTombstonedMessage:Object(N["isEKMAccessDeniedMessage"])(o)||Object(N["isDLPTombstoneMessage"])(o),isUnknown:Object(N["isMessageUnknown"])(o),isEKMError:o.isEKMError,teamDomain:ve},le,{featureTinyspeck:U,featureAttachmentsV2:F,ariaAssertive:Object(N["isDisconnectedFeedback"])(o),serviceTeamId:fe,featureSonicInputs:L,featureWysiwygAnchorText:Object(R["a"])(t)})};var Et={logMessage:function e(){return S["a"].apply(void 0,arguments)},clogMessageClick:function e(){return u["a"].apply(void 0,arguments)},clogUserClick:function e(){return d["a"].apply(void 0,arguments)},maybeStartEditingMessage:function e(){return j["maybeStartEditingMessage"].apply(void 0,arguments)},removeMsg:function e(){return h["a"].apply(void 0,arguments)},resendMsg:function e(){return m["a"].apply(void 0,arguments)}};var Ct=t["a"]=Object(i["connect"])(kt,Et)(_t)},,,,function(e,t,a){"use strict";var r=a(110);var n=a.n(r);var i=a(135);var s=a.n(i);var o=a(169);var l=a.n(o);var c=a(138);var u=a.n(c);var d=a(185);var p=a.n(d);var m=a(2);var h=a(13);var v=a.n(h);var f=a(1);var b=a.n(f);var g=a(12);var _=a(0);var y=a(6);var O=a(32);var k=a(150);var E=a(119);var C=a(38);var S=a(23);var w=a(3733);var j=new y["b"]("notification_bar");var I={wasRecentlyOnline:false,typingNames:null,textLength:0,isLegacy:false,secondaryView:void 0,showTypingIndicator:true,useSendButton:false,usePreNewlines:false,cursorInCodeBlock:false};var T=function(e){p()(t,e);function t(){n()(this,t);return l()(this,u()(t).apply(this,arguments))}s()(t,[{key:"renderFormattingTips",value:function e(){var t=this.props,a=t.wasRecentlyOnline,r=t.useSendButton,n=t.usePreNewlines,i=t.cursorInCodeBlock;if(!a)return null;var s=function e(t){var a=t.tag,r=t.key,n=t.text;if("span"===a)return b.a.createElement("span",{key:r,className:"p-notification_bar__send"},n);return b.a.createElement("b",{className:"p-notification_bar__return",key:r},n)};if(n&&i)return j.rt("<span><b>Shift + Return</b> to send</span><b>Return</b> to add a new line",null,s);if(r){if(Object(O["isMac"])())return j.rt("<span><b>\u2318 + Return</b> to send</span><b>Return</b> to add a new line",null,s);return j.rt("<span><b>Ctrl + Return</b> to send</span><b>Return</b> to add a new line",null,s)}return j.rt("<span><b>Return</b> to send</span><b>Shift + Return</b> to add a new line",null,s)}},{key:"renderLeft",value:function e(){var t=this.props,a=t.wasRecentlyOnline,r=t.typingNames,n=t.textLength,i=t.showTypingIndicator;if(!a){var s=n?j.t("Slack is trying to connect, so messages can\u2019t be sent yet."):j.t("Slack is trying to connect.");return b.a.createElement("span",{id:"msg_input_info",className:"p-notification_bar__offline","aria-live":"polite"},s," ",b.a.createElement(S["a"],{type:"cloud-offline-small-filled",className:"p-notification_bar__offline_icon"}))}if(i&&!Object(m["isEmpty"])(r)){var o;o=1===r.length?j.rt("<b>{name}</b> is typing",{name:r[0]}):2===r.length?j.rt("<b>{name}</b> and <b>{other_name}</b> are typing",{name:r[0],other_name:r[1]}):j.t("several people are typing");return b.a.createElement("div",{role:"status","aria-live":"polite","aria-atomic":"true",className:"p-notification_bar__typing"},o)}return null}},{key:"render",value:function e(){var t=this.props,a=t.wasRecentlyOnline,r=t.isLegacy,n=t.typingNames,i=t.secondaryView,s=t.showTypingIndicator,o=t.textLength;var l=v()("p-notification_bar__section","p-notification_bar__section--right",{"p-notification_bar__section--is-visible":a&&o>2});var c=v()("p-notification_bar",{"p-notification_bar--legacy":r,"p-notification_bar--typers_showing":s&&!Object(m["isEmpty"])(n),"p-notification_bar--flexpane_open":!!i});return b.a.createElement("div",{className:c},b.a.createElement("div",{className:"p-notification_bar__section p-notification_bar__section--left"},this.renderLeft()),b.a.createElement("div",{className:l},b.a.createElement("span",{className:"p-notification_bar__formatting","aria-hidden":"true"},this.renderFormattingTips())))}}]);return t}(f["PureComponent"]);T.displayName="NotificationBar";T.defaultProps=I;function A(e,t){var a=t.useSendButton,r=t.wasRecentlyOnline;return{wasRecentlyOnline:Object(m["isBoolean"])(r)?r:Object(k["h"])(e),secondaryView:Object(E["j"])(e),showTypingIndicator:Object(C["k"])(e,"show_typing"),useSendButton:Object(m["isBoolean"])(a)?a:Object(C["k"])(e,"msg_input_send_btn"),usePreNewlines:Object(C["k"])(e,"enter_is_special_in_tbt")}}var N=Object(g["connect"])(A)(T);var P=t["a"]=N},,,,function(e,t,a){"use strict";var r=a(196);var n=a.n(r);var i=a(245);var s=a.n(i);var o=a(88);var l=a.n(o);var c=a(218);var u=a.n(c);var d=a(110);var p=a.n(d);var m=a(135);var h=a.n(m);var v=a(169);var f=a.n(v);var b=a(138);var g=a.n(b);var _=a(147);var y=a.n(_);var O=a(185);var k=a.n(O);var E=a(1);var C=a.n(E);var S=a(0);var w=a(13);var j=a.n(w);var I=a(2);var T=a(494);var A=a(108);var N=a(3280);function P(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function M(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?P(Object(a),true).forEach(function(t){l()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):P(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var D={headers:[],rows:[],selectedRows:[],onSelect:I["noop"],getCheckboxId:null,allowSelectAll:true};var x=function(e){k()(t,e);function t(e){var a;p()(this,t);a=f()(this,g()(t).call(this,e));a.getCheckboxId=a.getCheckboxId.bind(y()(a));a.state={allSelected:void 0};return a}h()(t,[{key:"getCheckboxId",value:function e(t){var a;a=this.props.getCheckboxId?this.props.getCheckboxId(t.id):this.props.id+"-"+t.id+"-checkbox";return a}},{key:"getHeaders",value:function e(t){var a=this;var r=this.props,n=r.id,i=r.headers,s=r.rows,o=r.onSelect,l=r.allowSelectAll;var c=s.filter(function(e){return false!==e.selectable});var d=c.length>0;var p=d&&Object(I["every"])(c,function(e){return t.includes(e.id)});return[{id:n+"-select-all-checkbox",value:l?C.a.createElement(A["a"],{checked:p,disabled:!d,indeterminate:t.length>0&&!p,onChange:function e(){o(p?I["without"].apply(void 0,[t].concat(u()(Object(I["map"])(c,"id")))):Object(I["union"])(t,Object(I["map"])(c,"id")),null,!p);if(p===a.state.allSelected)return;a.setState(function(){return{allSelected:p}})},"aria-controls":c.map(this.getCheckboxId).join(" "),className:"p-ent_multi_select_table__checkbox"}):null,noHover:true,className:"p-ent_multi_select_table__checkbox_item"}].concat(u()(i))}},{key:"getRows",value:function e(t){var a=this;var r=this.props,n=r.rows,i=r.onSelect;var s=this.state.allSelected;return n.map(function(e){var r;var n=null!==(r=e.checked)&&void 0!==r?r:t.includes(e.id);var o=a.getCheckboxId(e);var l=j()("p-ent_multi_select_table__checkbox_item",e.checkboxClassName);return M({},e,{selected:n,items:[{id:o+"-item",value:C.a.createElement(A["a"],{id:o,checked:n,disabled:false===e.selectable,value:e.id,onChange:function a(){return i(n?Object(I["without"])(t,e.id):[].concat(u()(t),[e.id]),e.id,void 0!==s&&!s)},className:"p-ent_multi_select_table__checkbox"}),className:l}].concat(u()(e.items)),className:e.className})})}},{key:"render",value:function e(){var t=this.props,a=t.selectedRows,r=t.onSelect,i=s()(t,["selectedRows","onSelect"]);return C.a.createElement(T["b"],n()({},i,{headers:this.getHeaders(a),rows:this.getRows(a)}))}}]);return t}(E["PureComponent"]);x.displayName="MultiSelectTable";x.defaultProps=D;var R=x;var F=t["a"]=R},,function(e,t,a){"use strict";var r=a(18);var n=a(293);var i=a(271);var s=a(441);var o=a(0);var l=a(35);var c=a(292);var u=a(193);var d=a(2081);var p=Object(r["b"])("Clog clicks on a message or file using data from redux",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.suggestion;var i=t();var o=e(Object(s["getSearchSessionId"])());var p=e(Object(s["getQuerySessionId"])());var m=Object(n["getSearchAutocompleteSuggestions"])(i);var h=Object(n["getSearchAutocompleteSelectedIndex"])(i);var v=m.map(function(e){return e.featureVector});var f=Object(l["a"])({state:i});var b=Object(c["getSearchInputBoxUserQuery"])(i);var g=b?b.length:0;var _=Object(u["i"])(i);var y={accept_module_name:"results_unified",accept_module_length:m.length,accept_item_offset:h,feature_vector_list:v,suggestion_type:r.type,is_navigational:r.is_type_navigational,is_action:r.is_type_action,navigation_model_id:r.id,request_id:Object(d["a"])(i),search_session_id:o,client_request_id:p,query_length:g,open_method:_};f.track("SEARCH_AUTOCOMPLETE_ACCEPT",y)});p.meta={name:"clogAutocompleteAccept",key:"actionsUniversalSearchClogAutocompleteClogAutocompleteAccept",description:"Clog clicks on a message or file using data from redux"};p.propTypes={suggestion:o["default"].object.isRequired};var m=p;var h=a(331);var v=a(227);var f=a(1188);var b=a(1281);var g=a(826);var _=a(104);var y=a(505);var O=a(837);var k=a(16);var E=a(137);var C=a(256);var S=a(831);var w=a(235);var j=a(211);var I=a(2093);var T=a(9);var A=a(17);var N=a(34);var P=a(32);var M=a(598);var D=a(1333);var x=a(1993);var R=a(1578);var F=a(21);var L=a(1165);var U=a(330);var B=a(27);var q=a(1048);var G=a(1198);var H=a(1841);var W=a(774);var V=a(153);var K=a(20);var z=a(26);var Q=a(1024);var Y=a(232);var J=a(25);var X=a(487);var Z=a(39);var $=a(90);a.d(t,"a",function(){return se});var ee={},te=ee.fetchAuthAndSetFocusedWorkspace;var ae={},re=ae.getWorkspacesMeta,ne=ae.isWorkspaceExpired;var ie="IMPROVED_SEARCH";var se=Object(r["b"])("Accept the selected (or 0th) search autocomplete suggestion",function(e,t){Object(k["a"])({getState:t}).info(ie,"Accepted search query");var a=t();var r=Object(n["getSearchAutocompleteSelectedIndex"])(a)||0;var o=Object(n["getSearchAutocompleteSuggestions"])(a)[r];Object($["e"])(a)&&e(Object(Z["closeModal"])());if(!o)return;e(m({suggestion:o}));if(o.is_type_query_completion){var l=Object(i["g"])(o.suggestion_replacement);var u=Object(i["g"])(o.suggestion_replacement_for_request);Object(k["a"])({getState:t}).info(ie,"Accepting query suggestion");e(Object(v["setEditableRequestQueryThenRequest"])({query:u}));e(Object(s["setSearchSessionLastQuery"])({query:u}));e(Object(c["setSearchInputBoxDisplayQuery"])({displayQuery:l}));if(Object(S["a"])(a)){e(Object(n["closeSearchAutocomplete"])());Object(w["l"])("Vsearch")}else e(Object(b["a"])({interfaceMode:g["a"].SEARCH_RESULTS}))}else if(o.is_type_navigational){if(o.is_type_file){Object(k["a"])({getState:t}).info(ie,"Navigating to file. file: "+o.file.id);e(Object(_["c"])({fileId:o.file.id}))}else{Object(k["a"])({getState:t}).info(ie,"Navigating to model: id: "+o.id);if(Object(E["a"])(o.id))if(Object(N["a"])()){var d=Object(J["b"])(a);oe(o.id)?Object(U["c"])(L["a"],{teamId:o.id},{reason:"omniswitcher:searchAutocompleteSuggestionAccept"}):Object(X["b"])()?le(e,t,d,o.id):ce(e,t,d,o.id)}else if(Object(P["isSSB"])())Object(C["o"])(o.id);else{var p=o.team.url||Object(B["getTeamUrl"])(o.team);Object(q["a"])(p)}else if(o.channel&&Object(T["isFromAnotherTeam"])(o.channel)){var A=o.channel.id;var z=Object(R["a"])({state:a,channel:o.channel,currentTeamId:Object(F["b"])(a)})||Object(T["teamIdForChannelFromAnotherTeam"])(a,o.channel);if(Object(N["a"])()){var Q=Object(J["b"])(a);oe(z)?e(Object(j["a"])({id:A,teamId:z})):Object(X["b"])()?le(e,t,Q,z,A):ce(e,t,Q,z,A)}else e(Object(I["a"])({teamId:z,channelId:A}))}else if(o.channel&&Object(T["legacyIsFromAnotherTeam"])(a,o.channel)){var Y=o.channel.team_id;var ee=o.channel.id;Object(N["a"])()?e(Object(j["a"])({id:ee,teamId:Y})):e(Object(I["a"])({teamId:Y,channelId:ee}))}else if("Vapp_space"===o.id){var te=Object(W["a"])(t());if(te){e(Object(x["a"])());e(Object(h["c"])({eventId:"APP_LAUNCHER_OPEN_FROM_SEARCH"}))}else e(Object(D["a"])())}else{var ae;Object(V["a"])(o.id)&&(ae=Object(K["m"])(a,o.id));e(Object(y["a"])({id:ae||o.id}))}var re=o.channel||o.member||{id:o.id};var ne=Object(c["getSearchInputBoxUserQuery"])(a);e(Object(M["b"])({id:re.id,text:ne}))}e(Object(f["a"])({textyString:""}));e(Object(O["a"])());e(Object(n["closeSearchAutocomplete"])())}else if(o.is_type_action&&Object(G["a"])(a)){if(o.is_type_app_action){var se=o.app_action;var ue=Object(c["getSearchInputBoxUserQuery"])(a);e(Object(H["a"])({actionId:se.id,appId:se.app_id,referrer:"quickswitcher"}));e(Object(M["b"])({id:se.id,text:ue}))}Object(k["a"])({getState:t}).action("Executed action",o);e(Object(f["a"])({textyString:""}));e(Object(O["a"])());e(Object(n["closeSearchAutocomplete"])())}});se.meta={name:"searchAutocompleteSuggestionAccept",key:"actionsUniversalSearchSearchAutocompleteSuggestionAcceptSearchAutocompleteSuggestionAccept",description:"Accept the selected (or 0th) search autocomplete suggestion"};se.propTypes={};function oe(e){var t=Object(z["e"])();var a=re(t);return!!(a[e]&&!ne(t,e))}function le(e,t,a,r,n){if(Object(A["isMemberOnTeam"])(a,r))return Object(z["a"])(te({teamId:r,channelId:n}));Object(Q["d"])(false);return e(Object(Y["e"])({teamId:r})).catch(function(e){if(e.data&&"user_already_team_member"===e.data.error)return;throw e}).then(function(){return Object(z["a"])(te({teamId:r,channelId:n}))}).catch(function(e){Object(k["a"])({getState:t}).error("Unable to join team "+r+": "+e);Object(Q["d"])(true)})}function ce(e,t,a,r,n){if(Object(A["isMemberOnTeam"])(a,r))return Promise.resolve(ue(e,r,n));Object(Q["d"])(false);return e(Object(Y["e"])({teamId:r})).catch(function(e){if(e.data&&"user_already_team_member"===e.data.error)return;throw e}).then(function(){ue(e,r,n)}).catch(function(e){Object(k["a"])({getState:t}).error("Unable to join team "+r+": "+e)}).finally(function(){return Object(Q["d"])(true)})}function ue(e,t,a){a?e(Object(j["a"])({id:a,teamId:t})):Object(U["c"])(L["a"],{teamId:t},{reason:"omniswitcher:searchAutocompleteSuggestionAccept"})}},,,,,,,,,,,,,function(e,t,a){"use strict";var r=a(110);var n=a.n(r);var i=a(135);var s=a.n(i);var o=a(169);var l=a.n(o);var c=a(138);var u=a.n(c);var d=a(185);var p=a.n(d);var m=a(1);var h=a.n(m);var v=a(12);var f=a(13);var b=a.n(f);var g=a(0);var _=a(370);var y=a(41);var O=a(2810);var k=a(3628);var E=a.n(k);var C={msg:g["default"].object,children:null,theme:"light"};var S=function(e){p()(t,e);function t(){n()(this,t);return l()(this,u()(t).apply(this,arguments))}s()(t,[{key:"render",value:function e(){var t=this.props,a=t.msg,r=t.children,n=t.theme;if(!Object(y["isThreadBroadcast"])(a))return r;var i=b()("c-message_kit__broadcast_preamble",{"c-message_kit__broadcast_preamble--dense":"dense"===n});return h.a.createElement("div",{className:i},r,h.a.createElement(O["a"],{ts:a.ts,threadTs:a.thread_ts,channelId:a.channel,className:"c-message_kit__broadcast_preamble__inner"}))}}]);return t}(m["PureComponent"]);S.displayName="BroadcastPreamble";S.defaultProps=C;t["a"]=Object(v["connect"])(function(e){return{theme:Object(_["a"])(e)}})(S)},,,,,,,,,,,,,,,function(e,t,a){"use strict";var r=a(110);var n=a.n(r);var i=a(135);var s=a.n(i);var o=a(169);var l=a.n(o);var c=a(138);var u=a.n(c);var d=a(185);var p=a.n(d);var m=a(1);var h=a.n(m);var v=a(0);var f=a(12);var b=a(6);var g=a(928);var _=a(93);var y=a(23);var O=a(43);var k=a(89);var E=a(1857);var C=a(2310);var S=a.n(C);var w=new b["b"]("enterprise_dashboard");var j={orgName:""};var I=6e4;var T={MESSAGES:0,FILES:1,SEARCH:2};var A={ENROLL:"enroll",UNENROLL:"unenroll",REKEY:"rekey",MIGRATION:"migration"};var N=function(e){p()(t,e);function t(e){var a;n()(this,t);a=l()(this,u()(t).call(this,e));a.state={ekmBackfillInfo:{}};return a}s()(t,[{key:"componentDidMount",value:function e(){var t=this;var a=function e(){t.props.getBackfillInfo().then(function(e){t.setState(function(){return{ekmBackfillInfo:e}})})};a();this.updateInterval=setInterval(a,I)}},{key:"componentWillUnmount",value:function e(){this.updateInterval&&clearInterval(this.updateInterval)}},{key:"getStatus",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;var a=arguments.length>1?arguments[1]:void 0;return h.a.createElement("div",{className:"p-ekm_status__status_description"},this.getStatusLine1(t,a),this.getStatusLine2(t,a))}},{key:"getStatusLine1",value:function e(t,a){var r=this.state.ekmBackfillInfo,n=r.backfill_in_progress,i=r.backfill_reason,s=r.ekm_access_denied;var o;var l;if(100===t)if(n&&i===A.UNENROLL){o=h.a.createElement(y["b"],{type:"circle-minus-filled",className:"sk_foreground_max margin_right_25",size:"inherit"});l=[w.t("Unenrolled"),w.t("Unenrolled"),w.t("Unenrolled")][a]}else{o=h.a.createElement(y["b"],{type:"circle-checkbox-checked",className:"sk_lilypad_green margin_right_25",size:"inherit"});l=[w.t("Encrypted"),w.t("Encrypted"),w.t("Encrypted")][a]}else if(n&&!s){o=h.a.createElement(k["a"],{inline:true,className:"p_ekm_status__spinner"});var c;switch(i){case A.MIGRATION:c=[w.t("Encrypting messages from migrating workspace..."),w.t("Encrypting files from migrating workspace..."),w.t("Encrypting search history from migrating workspace...")];break;case A.REKEY:c=[w.t("Re-encrypting existing messages..."),w.t("Re-encrypting existing files..."),w.t("Re-encrypting existing search history...")];break;case A.UNENROLL:c=[w.t("In progress"),w.t("In progress"),w.t("In progress")];break;default:c=[w.t("Encrypting existing messages..."),w.t("Encrypting existing files..."),w.t("Encrypting existing search history...")]}l=c[a]}else{o=h.a.createElement(y["b"],{type:"circle-minus-filled",className:"sk_foreground_max margin_right_25",size:"inherit"});l=0===t?w.t("Not started"):w.t("Paused")}return h.a.createElement("div",{className:"bold"},o,l)}},{key:"getStatusLine2",value:function e(t,a){var r=this.state.ekmBackfillInfo,n=r.backfill_in_progress,i=r.backfill_reason;var s;s=100!==t||n&&i===A.UNENROLL?w.t("{status}% complete",{status:t}):[w.t("Current and future messages"),w.t("Current and future files"),w.t("Current and future search history")][a];return h.a.createElement("div",{className:"sk_foreground_max"},s)}},{key:"renderEncryptionStatusTable",value:function e(){var t=this.state.ekmBackfillInfo,a=t.messages,r=t.files,n=t.search;return h.a.createElement("div",{className:"p-ekm_status__progress_container"},h.a.createElement("div",{className:"bold"},w.t("Messages")),this.getStatus(a,T.MESSAGES),h.a.createElement("div",{className:"bold"},w.t("Files")),this.getStatus(r,T.FILES),h.a.createElement("div",{className:"bold"},w.t("Search history")),this.getStatus(n,T.SEARCH))}},{key:"renderStatusMessage",value:function e(){var t=this.props.orgName;var a=this.state.ekmBackfillInfo,r=a.backfill_in_progress,n=a.backfill_reason,i=a.ekm_access_denied;if(!(r||i))return null;var s="info";var o="info-circle";var l;var c;if(i){s="error";o="warning";l=w.rt("Encryption of <b>{orgName}</b> has been paused because Slack couldn\u2019t access your key family. To continue encrypting data, please review your key policy in AWS and ensure Slack has access to your key family.",{orgName:t})}else if(r)switch(n){case A.MIGRATION:l=w.t("A workspace has been migrated into your organization, so all data in that workspace will be encrypted.");c=h.a.createElement("div",null,h.a.createElement(O["a"],{href:"/manage/organization/migrations"},w.t("View scheduled migrations")));break;case A.REKEY:s="warning";o="warning";l=w.rt("<b>{orgName}</b>\u2019s key family was recently rotated, so all existing data is being encrypted with the new key. Ensure Slack has access to your previous keys until this is done.",{orgName:t});break;case A.UNENROLL:s="warning";o="warning";l=w.rt("Unenrollment from EKM for <b>{orgName}</b> is in progress. If your organization has a large amount of data, the process may take some time to complete. Ensure Slack has access to your keys until then.",{orgName:t});break;default:l=w.rt("EKM was recently enabled for <b>{orgName}</b> and all existing data is now being encrypted. If your organization has a large amount of data, the process may take some time to complete.",{orgName:t})}return h.a.createElement(_["a"],{type:"boxed",level:s,icon:o,align:"left",className:"margin_bottom_100"},l,c)}},{key:"render",value:function e(){var t=this.state.ekmBackfillInfo.last_updated;return h.a.createElement("div",null,h.a.createElement("h2",{className:"p-ekm_status__subtitle"},"Encryption status"),h.a.createElement("div",{className:"sk_foreground_max margin_bottom_100"},h.a.createElement("span",{className:"bold"},w.t("Last updated: ")),h.a.createElement("span",null,h.a.createElement(E["a"],{timestamp:t}))),this.renderStatusMessage(),this.renderEncryptionStatusTable())}}]);return t}(m["PureComponent"]);N.displayName="EKMStatus";N.defaultProps=j;var P=function e(t,a){var r=a.isMissionControl,n=a.teamId;var i=r?g["d"]:g["b"];return{getBackfillInfo:function e(){return t(i({reason:"EKMStatus_getBackfillInfo",teamId:n}))}}};var M=Object(f["connect"])(null,P)(N);M.propTypes={isMissionControl:v["default"].bool,teamId:v["default"].string};M.defaultProps={isMissionControl:false,teamId:null};t["a"]=M},function(e,t,a){},function(e,t,a){"use strict";var r=a(2);var n=a.n(r);var i=a(16);var s=false;var o=function e(t){if(!t)return;var a="";var r=t.srcElement||t.target;var n=i["b"]&&Object(i["b"])();if(r&&r.nodeName)if("SCRIPT"===r.nodeName){var s=r.src;var o=t.type||"error";a="["+o+"] from script at "+s+" (failed to load?)"}else if("IMG"===r.nodeName){var c=r.src||r.currentSrc||"unknown";n.warn("<img> fired error with url = "+c);return}t.error&&t.error.stack&&(a+=" "+t.error.stack);if(t.filename){var u=t.filename;var d=t.lineno;var p=t.colno;a+=" from "+u;d&&(a+=" @ line "+d+", col "+p)}var m;m=t.error&&t.error.stack?a:(t.message||"")+" "+a;m&&m.replace&&(m=m.replace(/\s+/g," ").trim());if(!m||!m.length)if(r){var h=r.nodeName||"unknown";if("VIDEO"===h)return;m="error event from node of "+h+", no message provided?"}else m="error event fired, no relevant message or node found";m="\ud83d\udc1e "+m;var v="js_runtime_error";l({error:t.error||t,msg:m,subtype:v})};function l(e){var t=e.error,a=e.msg,r=e.subtype;var n={subtype:r};Object(i["b"])().error(t,a,n)}var c=function e(){if(s)return;var t=true;var a=Object(r["throttle"])(o,1e4);window.addEventListener("error",a,t);s=true};t["a"]=c;var u={globalErrorHandler:o};Object.defineProperty(u,"logError",{get:function e(){return l},set:function e(t){l=t}});Object.defineProperty(u,"hasRegisteredGlobalErrorHandler",{get:function e(){return s},set:function e(t){s=t}})},function(e,t,a){"use strict";var r=a(6);var n=new r["b"]("password");var i=function e(t){var a={no_values:n.t("Please enter a password!"),matches_username:n.t("That password is too similar to your username. Try something different?"),matches_email:n.t("That password is too similar to your email address. Try something different?"),too_short:n.t("Your password must be at least 6 characters long."),too_long:n.t("Your password can be at most 500 characters long."),numeric_sequence:n.t("Your password cannot solely contain sequences of letters or numbers."),alpha_sequence:n.t("Your password cannot solely contain sequences of letters or numbers."),adjacent:n.t("Your password cannot solely contain adjacent keys on a keyboard."),repeated:n.t("Your password cannot solely contain a repeated character."),common:n.t("That password is pretty common. Try something different?")};return a[t]||""};t["a"]=i},function(e,t,a){"use strict";var r=a(196);var n=a.n(r);var i=a(88);var s=a.n(i);var o=a(110);var l=a.n(o);var c=a(135);var u=a.n(c);var d=a(169);var p=a.n(d);var m=a(138);var h=a.n(m);var v=a(147);var f=a.n(v);var b=a(185);var g=a.n(b);var _=a(2);var y=a.n(_);var O=a(30);var k=a(1);var E=a.n(k);var C=a(0);var S=a(13);var w=a.n(S);var j=a(12);var I=a(815);var T=a(1218);var A=a(102);var N=a(244);var P=a(527);var M=a(1449);var D=a(6);var x=a(257);var R=a(1041);var F=a(41);var L=a(145);var U=a(219);var B=a(1154);var q=a(918);var G=a(1439);var H=a(1317);var W=a(1440);var V=a(99);var K=a(1587);var z=a(1059);var Q=a(1858);var Y=a(1294);var J=a(1346);var X=a(144);var Z=a(23);var $=a(54);var ee=a(98);var te=a(2339);var ae=a.n(te);var re=a(236);function ne(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function ie(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(a),true).forEach(function(t){s()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ne(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var se=new D["b"]("search");var oe="IMPROVED_SEARCH";var le={teamDomain:"",index:null,username:null,theme:"light",botId:null,botProfile:null,subtype:"",expanded:false,onClick:y.a.noop,onFileClick:y.a.noop,onRepliesClick:y.a.noop,files:[],attachments:[],reactions:[],extracts:[],onExpandHoverStart:y.a.noop,onExpandHoverEnd:y.a.noop,reply_count:0,onLinkClick:y.a.noop,icons:null,blocks:null,blocks_extracts:null,wysiwygSearchHighlightingEnabled:false,clogMessageClick:y.a.noop,clogFileClick:y.a.noop,clogSearchMessageClick:y.a.noop};var ce=function(e){g()(t,e);function t(e){var a;l()(this,t);a=p()(this,h()(t).call(this,e));Object(O["a"])(f()(a),["expand","onClick","onFileClick","onRepliesClick","onCopyLink","onExpandHoverStart","onExpandHoverEnd","onMouseMove","onLinkClick","onAvatarLinkClick","onProfileMessageClick","onProfileCallClick","onMrkdwnLinkClick","onSenderLinkClick","onTimestampClick"]);a.dragging=false;a.dragStartX=null;a.dragStartY=null;return a}u()(t,[{key:"onAvatarLinkClick",value:function e(){this.props.onLinkClick({iid:this.props.iid,ts:this.props.ts,channelId:this.props.channel.id,botId:this.props.botId,userId:this.props.user,type:re["b"].avatar})}},{key:"onClick",value:function e(t){if(t.target.dataset.memberId)return;if("BUTTON"===t.target.tagName||"BUTTON"===t.target.parentNode.tagName)return;if(t.target.dataset.channelId||t.target.dataset.messageSender||("A"===t.target.tagName&&"_blank"===t.target.target||"A"===t.target.parentNode.tagName&&"_blank"===t.target.parentNode.target)&&!t.defaultPrevented){this.onLinkClick(t);return}var a=false;if(this.dragging){var r=Math.pow(t.clientX-this.dragStartX,2)+Math.pow(t.clientY-this.dragStartY,2);a=r>16;this.dragging=false}a||t.shiftKey||this.props.onClick({iid:this.props.iid,permalink:this.props.permalink,ts:this.props.ts,channelId:this.props.channel.id,userId:this.props.user,botId:this.props.botId})}},{key:"onCopyLink",value:function e(t){t.preventDefault();t.stopPropagation();var a=this.props,r=a.channel,n=a.ts,i=a.botId,s=a.user,o=a.teamDomain,l=a.isCrossWorkspace,c=a.iid;var u=this.props.permalink;u||(l?this.props.logger.error(oe,"Missing permalink for cross workspace message result. channel: "+r+" ts: "+n):u=Object(F["constructAbsoluteMsgPermalink"])({teamDomain:o,channelId:r.id,ts:n}));u&&Object(x["writeText"])(u);this.props.clogMessageClick({msg:{channel:r.id,bot_id:i,user:s,ts:n},payload:{subtype:"copy_link"}});this.props.clogSearchMessageClick({iid:c,ts:n,channelId:r.id,botId:i,userId:s,type:re["b"].copyLink,position:this.props.index})}},{key:"onExpandHoverEnd",value:function e(){this.props.onExpandHoverEnd()}},{key:"onExpandHoverStart",value:function e(){this.props.onExpandHoverStart()}},{key:"onFileClick",value:function e(t,a){var r=a.file;t.preventDefault();this.props.onFileClick(t,{file:r,iid:this.props.iid,permalink:this.props.permalink,ts:this.props.ts,channelId:this.props.channel.id,userId:this.props.user,botId:this.props.botId})}},{key:"onLinkClick",value:function e(t){var a={iid:this.props.iid,ts:this.props.ts,channelId:this.props.channel.id,botId:this.props.botId,userId:this.props.user};t.target.dataset.channelId?a.type=re["b"].channel:t.target.dataset.messageSender?a.type=re["b"].sender:("A"===t.target.tagName&&"_blank"===t.target.target||"A"===t.target.parentNode.tagName&&"_blank"===t.target.parentNode.target)&&!t.defaultPrevented&&(a.type=re["b"].link);a.type&&this.props.onLinkClick(a)}},{key:"onMouseMove",value:function e(t){if((1===t.button||1===t.buttons)&&!this.dragging){this.dragging=true;this.dragStartX=t.clientX;this.dragStartY=t.clientY}}},{key:"onMrkdwnLinkClick",value:function e(t){var a={iid:this.props.iid,ts:this.props.ts,channelId:this.props.channel.id,botId:this.props.botId,userId:this.props.user};"user"===t.link_type?a.type=re["b"].user:"channel"===t.link_type?a.type=re["b"].channel:"external"===t.link_type&&(a.type=re["b"].link);a.type&&this.props.onLinkClick(a)}},{key:"onProfileCallClick",value:function e(){this.props.onLinkClick({iid:this.props.iid,ts:this.props.ts,channelId:this.props.channel.id,botId:this.props.botId,userId:this.props.user,type:re["b"].profileCall})}},{key:"onProfileMessageClick",value:function e(){this.props.onLinkClick({iid:this.props.iid,ts:this.props.ts,channelId:this.props.channel.id,botId:this.props.botId,userId:this.props.user,type:re["b"].profileMessage})}},{key:"onRepliesClick",value:function e(t){t.preventDefault();this.props.onRepliesClick({iid:this.props.iid,permalink:this.props.permalinkToMessageThread,ts:this.props.ts,channelId:this.props.channel.id,userId:this.props.user,botId:this.props.botId})}},{key:"onSenderLinkClick",value:function e(){this.props.onLinkClick({iid:this.props.iid,ts:this.props.ts,channelId:this.props.channel.id,botId:this.props.botId,userId:this.props.user,type:re["b"].sender})}},{key:"onTimestampClick",value:function e(t){t.preventDefault()}},{key:"expand",value:function e(t){t.preventDefault();t.stopPropagation();this.props.onExpand({iid:this.props.iid,permalink:this.props.permalink,ts:this.props.ts,channelId:this.props.channel.id,userId:this.props.user,botId:this.props.botId})}},{key:"renderActions",value:function e(){var t=w()("c-search_message__actions","c-message_actions__container--search",{"c-search_message__actions--dense":"dense"===this.props.theme});return E.a.createElement(Q["a"],{className:t,ariaLabel:se.t("Message actions")},E.a.createElement(Y["a"],{"data-qa":"copy-link",iconType:"link",ariaHasPopup:false,label:se.t("Copy link"),onClick:this.onCopyLink}))}},{key:"renderAttachments",value:function e(){var t=this;var a=this.props,r=a.attachments,n=a.expanded,i=a.canBeTruncated;if(!r.length)return null;if(n||!i)return y.a.map(r,function(e,a){return t.renderFullAttachment(e,a)});var s=y.a.map(r,function(e,a){var r=Object(N["b"])(e);if(r.blocks)return t.renderFullAttachment(r,a);return t.renderTruncatedLegacyAttachment(r,a)});return E.a.createElement("div",{className:"c-search_message__attachments"},s)}},{key:"renderAvatar",value:function e(){var t=this.props,a=t.user,r=t.hasAdHocSender,i=t.botId,s=t.botProfile,o=t.icons;var l={};i&&(l=ie({},l,{botId:i}));var c=o||s&&s.icons;if(c){var u=c.image_36||c.image_48;var d=c.image_64||c.image_72;var p=c.emoji;u&&(l=ie({},l,{imageUrl:u}));d&&(l=ie({},l,{imageUrl2x:d}));p&&(l=ie({},l,{emoji:p}))}a&&(l=ie({},l,{userId:a}));return E.a.createElement(U["b"],n()({className:"c-search_message__avatar",ariaHidden:"true",isAdHocMember:r,size:36,isInteractive:true,showCard:true,showTooltip:true,tabIndex:"-1",clogLinkClick:this.onAvatarLinkClick,clogProfileMessageClick:this.onProfileMessageClick,clogProfileCallClick:this.onProfileCallClick},l))}},{key:"renderBlocks",value:function e(){var t=this.props,a=t.ts,r=t.blocks,n=t.blocks_extracts,i=t.channel,s=t.botId,o=t.user,l=t.wysiwygSearchHighlightingEnabled;if(Object(R["a"])(r)){if(l&&n&&n.length>0)return E.a.createElement(J["a"],{msg:{channel:i.id,bot_id:s,user:o,ts:a,blocks:n},blocksContainerContext:X["a"].search});return this.renderText()}return E.a.createElement(J["a"],{msg:{channel:i.id,bot_id:s,user:o,ts:a,blocks:r},blocksContainerContext:X["a"].search})}},{key:"renderContentHeader",value:function e(){var t=this.props,a=t.user,r=t.botId,n=t.botProfile,i=t.username,s=t.theme,o=t.channelName;return E.a.createElement("div",{className:"c-search_message__content_header","data-qa":"search_message_header"},E.a.createElement(z["a"],{userId:a,botId:r,botProfile:n,username:i,channelName:o,clogLinkClick:this.onSenderLinkClick,clogProfileMessageClick:this.onProfileMessageClick,clogProfileCallClick:this.onProfileCallClick,isInteractive:true})," ","light"===s&&this.renderTimestamp())}},{key:"renderEllipsisButton",value:function e(t){var a={leading:"expand-head",trailing:"expand-tail"}[t];var r=se.t("Show more");return E.a.createElement($["c"],{tip:r},E.a.createElement(ee["a"],{"aria-label":r,"data-qa":a,onClick:this.expand,onMouseEnter:this.onExpandHoverStart,onMouseLeave:this.onExpandHoverEnd,className:"c-search__expand","aria-expanded":this.props.expanded},E.a.createElement("span",{className:"c-search__expand_ellipsis"},"...")))}},{key:"renderExpandButton",value:function e(){return E.a.createElement(ee["a"],{"data-qa":"expand-end",onClick:this.expand,onMouseEnter:this.onExpandHoverStart,onMouseLeave:this.onExpandHoverEnd,className:"c-search__expand","aria-expanded":this.props.expanded},E.a.createElement("span",{className:"c-search__expand_ellipsis"},"... ",se.t("Show more")))}},{key:"renderFiles",value:function e(){var t=this;var a=this.props.files;if(!a||!a.length)return null;return a.map(function(e){return e&&E.a.createElement(K["a"],{key:e.id,file:e,onClick:t.onFileClick,clogLinkClick:function a(r){t.props.clogFileClick({file:e,payload:r})}})})}},{key:"renderFullAttachment",value:function e(t,a){var r=this.props,i=r.ts,s=r.channel,o=r.hasText,l=r.blocks;return E.a.createElement(q["a"],n()({key:t.id||a+1},Object(N["b"])(t),{isOnlyMessageContent:!!(o||l),messageTs:i,activeChannelId:s.id,showDelete:false,blocksContainerContext:X["a"].search}))}},{key:"renderGutter",value:function e(){if("light"===this.props.theme)return E.a.createElement("div",{className:"c-search_message__gutter"},this.renderAvatar());return E.a.createElement("div",{className:"c-search_message__gutter"},this.renderTimestamp())}},{key:"renderReactionsAndReplies",value:function e(){var t=this.props.reactions;var a=this.props.reply_count;if(!t.length&&!a)return null;var r=y.a.take(y.a.sortBy(t,function(e){return-e.count}),2);var n=y.a.sumBy(t,"count");var i=null;var s=null;n>0&&(i=E.a.createElement("span",{"data-qa":"search-reaction-count",className:"c-search_message__reactions_count"},se.t("{totalReactionCount, plural, =1 {# reaction} other {# reactions}}",{totalReactionCount:n})));if(a>0){var o=se.t("{replyCount, plural, =1 {# reply} other {# replies}}",{replyCount:a});s=E.a.createElement(ee["a"],{"data-qa":"search-replies",className:"c-search_message__replies_count",onClick:this.onRepliesClick},E.a.createElement(Z["a"],{type:"comment-alt"}),o)}return E.a.createElement("div",{"data-qa":"search-reactions",className:"c-search_message__reactions"},y.a.map(r,function(e){return E.a.createElement(V["b"],{text:":"+e.name+":",key:e.name,emojiSize:V["a"].SMALL})}),i,s)}},{key:"renderText",value:function e(){var t=this;var a=this.props,r=a.text,n=a.blocks,i=a.extracts,s=a.expanded,o=a.canBeTruncated;if(!(r.length||i.length)&&!n)return null;if(s||!o)return E.a.createElement("div",{className:"c-search_message__body","data-qa":"search_message_body"},E.a.createElement(L["a"],{text:r,clogLinkClick:this.onMrkdwnLinkClick}));if(i.length)return E.a.createElement("div",{className:"c-search_message__body"},E.a.createElement(E.a.Fragment,null,i.map(function(e,a){var r=0===a&&e.truncated_head;var n=e.truncated_tail;var s=a===i.length-1;return E.a.createElement(k["Fragment"],{key:a},r?t.renderEllipsisButton("leading"):null,E.a.createElement(L["a"],{text:e.text,clogLinkClick:t.onMrkdwnLinkClick}),!n||o&&s?null:t.renderEllipsisButton("trailing"),o&&s?t.renderExpandButton():null)})));return E.a.createElement("div",{className:"c-search_message__body"},E.a.createElement(L["a"],{text:r,clogLinkClick:this.onMrkdwnLinkClick}))}},{key:"renderTimestamp",value:function e(){var t=this.props,a=t.ts,r=t.permalink;return E.a.createElement(B["b"],{onClick:this.onTimestampClick,timestamp:a,relative:false,full:false,link:r})}},{key:"renderTruncatedLegacyAttachment",value:function e(t,a){var r=this;var n=this.props.ts;var i=null;if(Object(P["e"])(t)){var s=t.serviceIcon||t.authorIcon;var o=t.serviceName||t.authorName;var l=o===t.authorName?t.authorSubname:t.authorName;i=E.a.createElement("div",null,E.a.createElement(H["a"],{icon:s,name:o,link:t.serviceUrl||t.authorLink,subname:l,subnameLink:t.authorLink}))}var c=t.extracts;var u=null;c&&c.title&&(u=E.a.createElement("div",{"data-qa":"search-attachment-title",className:"c-search_message__attachment_title"},y.a.map(c.title,function(e,t){var a=0===t&&e.truncated_head;var r=e.truncated_tail;return E.a.createElement(k["Fragment"],{key:t}," ",a?"\u2026":null,ue(e.text),r?"\u2026":null)})));var d=null;c&&c.pretext&&(d=y.a.map(c.pretext,function(e,t){var a=0===t&&e.truncated_head;var n=e.truncated_tail;return E.a.createElement("span",{className:"c-message_attachment__pretext",key:t}," ",E.a.createElement(E.a.Fragment,null,a?r.renderEllipsisButton("leading"):null,E.a.createElement(L["a"],{text:e.text,clogLinkClick:r.onMrkdwnLinkClick}),n?r.renderEllipsisButton("trailing"):null))}));var p=null;c&&c.text&&(p=y.a.map(c.text,function(e,t){var a=0===t&&e.truncated_head;var n=e.truncated_tail;return E.a.createElement(k["Fragment"],{key:t}," ",a?r.renderEllipsisButton("leading"):null,E.a.createElement(L["a"],{text:e.text,clogLinkClick:r.onMrkdwnLinkClick}),n?r.renderEllipsisButton("trailing"):null)}));var m=null;Object(P["h"])(t)&&(m=E.a.createElement("div",null,E.a.createElement(W["a"],{botId:t.botId,icon:t.footerIcon,isAppUnfurl:t.isAppUnfurl,text:t.footer,ts:n})));if(!i&&!u&&!d&&!p&&!m)return null;return E.a.createElement("div",{"data-qa":"search-message-attachment",className:"c-search_message__attachment",key:this.props.iid+"-attachment-"+a},E.a.createElement(G["a"],{color:t.color}),E.a.createElement("div",{className:"c-search_message__attachment_body"},i,u,d,p,m))}},{key:"render",value:function e(){var t=this.props,a=t.theme,r=t.canBeTruncated,n=t.expanded,i=t.blocks;var s=w()("c-search_message","c-search_message--"+a,{"c-search_message--collapsed":!n&&r});return E.a.createElement("div",{className:s,role:"presentation","data-qa":"search_result",onClick:this.onClick,onMouseMove:this.onMouseMove},this.renderGutter(),E.a.createElement("div",{className:"c-search_message__content"},this.renderContentHeader(),i?this.renderBlocks():this.renderText(),this.renderAttachments(),this.renderReactionsAndReplies(),this.renderFiles(),this.renderActions()))}}]);return t}(k["PureComponent"]);ce.displayName="SearchResult";function ue(e){return Object(M["a"])(e,function(e,t){return E.a.createElement("span",{className:"c-search__match",key:t},e)})}ce.defaultProps=le;var de={clogSearchMessageClick:function e(){return re["i"].apply(void 0,arguments)},clogMessageClick:function e(){return I["a"].apply(void 0,arguments)},clogFileClick:function e(){return T["a"].apply(void 0,arguments)}};t["a"]=Object(j["connect"])(null,de)(ce)},,,,,,,function(e,t,a){"use strict";var r=a(88);var n=a.n(r);var i=a(110);var s=a.n(i);var o=a(135);var l=a.n(o);var c=a(169);var u=a.n(c);var d=a(138);var p=a.n(d);var m=a(147);var h=a.n(m);var v=a(185);var f=a.n(v);var b=a(0);var g=a(1);var _=a.n(g);var y=a(12);var O=a(2);var k=a(13);var E=a.n(k);var C=a(11);var S=a(1610);var w=a(649);var j=a(1685);var I=a(853);var T=a(6);var A=a(208);var N=a(24);var P=a(43);var M=a(220);var D=a(27);var x=a(2327);function R(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function F(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?R(Object(a),true).forEach(function(t){n()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):R(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var L=new T["b"]("custom_tos");var U={hasCustomTOS:false,disablePrivacyAndCookiePolicy:false,enterprise:null,orgUrl:"",customTOSTimestamp:0,customTOSViewLink:"",team:null,safeAbsRootURL:"https://slack.com/",onSubmit:O["noop"],onlyDisplayCard:false};var B=function(e){f()(t,e);function t(e){var a;s()(this,t);a=u()(this,p()(t).call(this,e));a.state={buttonIsPending:false};a.onClick=a.onClick.bind(h()(a));return a}l()(t,[{key:"onClick",value:function e(t){t.preventDefault();this.setButtonPending(true);this.props.onSubmit()}},{key:"setButtonPending",value:function e(t){this.setState(function(){return{buttonIsPending:t}})}},{key:"maybeRenderCookiePolicy",value:function e(){var t=this.props.disablePrivacyAndCookiePolicy;if(t)return null;return _.a.createElement("li",null,this.renderCookiePolicy())}},{key:"maybeRenderEnterpriseTOS",value:function e(){var t=this.props.hasCustomTOS;if(!t)return null;return _.a.createElement("li",null,this.renderEnterpriseTOS())}},{key:"maybeRenderPrivacyPolicy",value:function e(){var t=this.props.disablePrivacyAndCookiePolicy;if(t)return null;return _.a.createElement("li",null,this.renderPrivacyPolicy())}},{key:"maybeRenderSlackUserTOS",value:function e(){var t=this.props.hasCustomTOS;if(t)return null;return _.a.createElement("li",null,this.renderSlackUserTOS())}},{key:"renderCard",value:function e(){var t=E()("p-tos__card",{margin_top_0:this.props.onlyDisplayCard});return _.a.createElement("div",{className:t},_.a.createElement("div",{className:"p-tos__content"},this.renderTOSHeading(),this.renderTOSSubheading(),this.renderTOSBody()))}},{key:"renderCookiePolicy",value:function e(){var t=this.props.safeAbsRootURL;return _.a.createElement(P["a"],{href:t+"cookie-policy",target:"_blank",rel:"noopener noreferrer"},L.t("Slack\u2019s Cookie Policy"))}},{key:"renderEnterpriseTOS",value:function e(){var t=this.props,a=t.customTOSViewLink,r=t.enterprise;return _.a.createElement(M["a"],{href:""+a,target:"_blank",rel:"noopener noreferrer"},L.rt("{enterpriseName}\u2019s Terms of Service",{enterpriseName:r.name}))}},{key:"renderPrivacyPolicy",value:function e(){var t=this.props.safeAbsRootURL;return _.a.createElement(P["a"],{href:t+"privacy-policy",target:"_blank",rel:"noopener noreferrer"},L.t("Slack\u2019s Privacy Policy"))}},{key:"renderSlackUserTOS",value:function e(){var t=this.props.safeAbsRootURL;return _.a.createElement(P["a"],{href:t+"terms-of-service/user",target:"_blank",rel:"noopener noreferrer"},L.t("Slack\u2019s User Terms of Service"))}},{key:"renderSubmitButton",value:function e(){var t=this.state.buttonIsPending;return _.a.createElement(N["b"],{id:"submit_btn",type:"primary",className:"p-tos__button",onClick:this.onClick,loading:t,disabled:t,"data-qa":"submit_button"},L.t("I Agree"))}},{key:"renderTOSBody",value:function e(){return _.a.createElement("div",{className:"p-tos__body"},this.renderTOSLinks(),this.renderSubmitButton())}},{key:"renderTOSHeading",value:function e(){var t=this.props.customTOSTimestamp;var a;a=t?L.t("Review and accept the updated terms of service"):L.t("Review the terms of service");return _.a.createElement("div",{className:"p-tos__heading"},a)}},{key:"renderTOSLinks",value:function e(){var t=this.props.customTOSTimestamp;if(t)return null;return _.a.createElement("div",{className:"p-tos__body"},_.a.createElement("ul",{className:"no_bullets margin_left_0"},this.maybeRenderSlackUserTOS(),this.maybeRenderPrivacyPolicy(),this.maybeRenderCookiePolicy(),this.maybeRenderEnterpriseTOS()))}},{key:"renderTOSSubheading",value:function e(){var t=this.props,a=t.customTOSTimestamp,r=t.enterprise,n=t.customTOSViewLink,i=t.team;if(Object(O["isNull"])(Object(I["c"])(n))){if(!Object(O["isEmpty"])(i))return _.a.createElement("div",null,_.a.createElement("p",{className:"p-tos__subheading"},L.rt('<strong>{teamName}</strong> is a Slack workspace managed by <strong>{enterpriseName}</strong>. By choosing <strong className="sk_primary_foreground">\u201cI Agree\u201d</strong> you understand and agree to:',{teamName:Object(D["getTeamDisplayName"])(i),enterpriseName:r.name})),_.a.createElement("p",{className:"p-tos__subheading"},n));return _.a.createElement("div",null,_.a.createElement("p",{className:"p-tos__subheading"},L.rt('By choosing <strong className="sk_primary_foreground">\u201cI Agree\u201d</strong> you understand and agree to:')),_.a.createElement("p",{className:"p-tos__subheading"},n))}if(a)return _.a.createElement("p",{className:"p-tos__subheading"},L.rt('By choosing <strong className="sk_primary_foreground">\u201cI Agree\u201d</strong> you understand and agree to <a>{enterpriseName}\u2019s Terms of Service</a>, updated on {TOSUpdatedOn}.',{enterpriseName:r.name,customTOSViewLink:n,TOSUpdatedOn:Object(A["a"])(a)},function(e){var t=e.text,a=e.key,r=e.tag;if("a"===r)return _.a.createElement(M["a"],{href:n,target:"_blank",key:a,rel:"noopener noreferrer"},t);return null}));if(!Object(O["isEmpty"])(i))return _.a.createElement("p",{className:"p-tos__subheading"},L.rt('<strong>{teamName}</strong> is a Slack workspace managed by <strong>{enterpriseName}</strong>. By choosing <strong className="sk_primary_foreground">\u201cI Agree\u201d</strong> you understand and agree to:',{teamName:Object(D["getTeamDisplayName"])(i),enterpriseName:r.name}));return _.a.createElement("p",{className:"p-tos__subheading"},L.rt('By choosing <strong className="sk_primary_foreground">\u201cI Agree\u201d</strong> you understand and agree to:'))}},{key:"render",value:function e(){var t=this.props,a=t.enterprise,r=t.onlyDisplayCard,n=t.orgUrl;return _.a.createElement("div",{className:"p-tos"},!r&&_.a.createElement(j["a"],{team:a,title:n,logoAriaLabel:"Slack"}),this.renderCard())}}]);return t}(g["PureComponent"]);B.displayName="TermsOfService";B.defaultProps=U;var q=function e(t){var a=Object(C["getFromBootData"])(t,"custom_tos");var r=a.enterprise;var n=Object(S["b"])(t);Object(O["isEmpty"])(n)||(r=n);var i=Object(w["d"])(t,r.domain);return F({},a,{enterprise:r,orgUrl:i})};var G=Object(y["connect"])(q)(B);a.d(t,"a",function(){return B});var H=t["b"]=G},function(e,t,a){"use strict";var r=a(88);var n=a.n(r);var i=a(196);var s=a.n(i);var o=a(110);var l=a.n(o);var c=a(135);var u=a.n(c);var d=a(169);var p=a.n(d);var m=a(138);var h=a.n(m);var v=a(147);var f=a.n(v);var b=a(185);var g=a.n(b);var _=a(1);var y=a.n(_);var O=a(12);var k=a(0);var E=a(2);var C=a(11);var S=a(106);var w=a(25);var j=a(131);var I=a(387);var T=a(543);var A=a(44);var N=a(24);var P=a(50);var M=a(151);var D=a(269);var x=a(31);var R=a(29);var F=a(16);var L=Object(R["a"])("Reset user's sessions",function(e,t,a){var r=a.userId,n=a.mobileOnly,i=void 0!==n&&n,s=a.desktopOnly,o=void 0!==s&&s,l=a.reason;return e(Object(x["a"])({method:"admin.users.session.reset",args:{user_id:r,mobile_only:i,web_only:o},reason:l})).catch(function(e){Object(F["a"])({getState:t}).error("failed to reset use's sessions");throw e})});L.meta={name:"resetUserSessions",key:"fetchersUsersSessionsApiResetUserSessions",description:"Reset user's sessions"};L.propTypes={userId:k["default"].string.isRequired,mobileOnly:k["default"].bool,desktopOnly:k["default"].bool,reason:k["default"].string};var U=a(324);var B=a(30);var q=a(6);function G(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function H(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?G(Object(a),true).forEach(function(t){n()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):G(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var W=new q["b"]("session_reset_modal");var V={isOpen:true,memberId:"",memberName:"",resetSessions:E["noop"],closeModal:E["noop"],featureOrgDashboardResetSessions:false,featureWorkspaceDashboardResetSessions:false,needsToastContainer:true,toastProps:{}};var K={MOBILE:"mobile",DESKTOP:"desktop",BOTH:"both"};var z={sessionTypes:K.MOBILE,saving:false};var Q=function(e){g()(t,e);function t(e){var a;l()(this,t);a=p()(this,h()(t).call(this,e));a.state=z;Object(B["a"])(f()(a),["closeModal","resetSessions"]);return a}u()(t,[{key:"setSessionsType",value:function e(t){this.setState(function(){return{sessionTypes:t}})}},{key:"closeModal",value:function e(){this.setState(function(){return z});this.props.closeModal()}},{key:"resetSessions",value:function e(){var t=this;var a=this.props,r=a.featureOrgDashboardResetSessions,n=a.memberName,i=a.toastProps,o=a.memberId,l=a.isCurrentAdminTarget;if(!r)return;this.setState(function(){return{saving:true}});var c=this.state.sessionTypes===K.MOBILE;var u=this.state.sessionTypes===K.DESKTOP;this.props.resetSessions({userId:o,mobileOnly:c,desktopOnly:u}).then(function(){t.closeModal();t.props.enqueueToast({element:y.a.createElement(j["b"],s()({icon:"check-circle-o-large"},i),y.a.createElement("strong",null,W.t("{memberName} was signed out of Slack",{memberName:n})))});l&&!c&&Object(U["b"])({reason:"The admin who requested the session reset is the same as the target user.",noCache:true,reasonKey:"admin_self_session_reset"})},function(){t.setState(function(){return{saving:false}});t.props.enqueueToast({element:y.a.createElement(j["b"],i,y.a.createElement("strong",null,W.t("Something went wrong")))})})}},{key:"render",value:function e(){var t=this;var a=this.props,r=a.featureOrgDashboardResetSessions,n=a.featureWorkspaceDashboardResetSessions,i=a.memberName,s=a.isOpen,o=a.needsToastContainer;var l=this.state,c=l.saving,u=l.sessionTypes;if(!r&&!n)return null;return y.a.createElement(y.a.Fragment,null,y.a.createElement(T["a"],{centered:true,closeModal:this.closeModal,isOpen:s},y.a.createElement(A["h"],null,y.a.createElement(A["j"],{title:W.t("Sign {memberName} out of Slack",{memberName:i})})),y.a.createElement(A["d"],null,y.a.createElement(A["e"],null,y.a.createElement("p",null,W.t("Choose whether you'd like to sign this member out of Slack on mobile, desktop, or both.")),y.a.createElement(D["a"],{className:"no_margin"},y.a.createElement(P["a"],{text:W.t("Mobile"),htmlFor:"session-reset-radio-mobile",type:"inline",cursor:"pointer"},y.a.createElement(M["a"],{id:"session-reset-radio-mobile",value:K.MOBILE,checked:u===K.MOBILE,onChange:function e(){return t.setSessionsType(K.MOBILE)}})),y.a.createElement(P["a"],{text:W.t("Desktop"),htmlFor:"session-reset-radio-desktop",type:"inline",cursor:"pointer"},y.a.createElement(M["a"],{id:"session-reset-radio-desktop",value:K.DESKTOP,checked:u===K.DESKTOP,onChange:function e(){return t.setSessionsType(K.DESKTOP)}})),y.a.createElement(P["a"],{text:W.t("Both"),htmlFor:"session-reset-radio-both",type:"inline",cursor:"pointer"},y.a.createElement(M["a"],{id:"session-reset-radio-both",value:K.BOTH,checked:u===K.BOTH,onChange:function e(){return t.setSessionsType(K.BOTH)}}))))),y.a.createElement(A["f"],null,y.a.createElement(A["g"],null,y.a.createElement(A["c"],{type:"outline"},W.t("Cancel")),y.a.createElement(N["b"],{"data-qa":"session-reset-modal-button-confirm",type:"primary",onClick:this.resetSessions,loading:c},W.t("Confirm"))))),o&&y.a.createElement(I["a"],null))}}]);return t}(_["Component"]);Q.displayName="SessionResetModal";Q.defaultProps=V;var Y=function e(t,a){var r=a.memberId;var n=Object(w["b"])(t)||{},i=n.id;return{featureOrgDashboardResetSessions:Object(C["isFeatureEnabled"])(t,"feature_org_dashboard_reset_sessions"),featureWorkspaceDashboardResetSessions:Object(C["isFeatureEnabled"])(t,"feature_workspace_dashboard_reset_sessions"),isCurrentAdminTarget:i===r}};var J=function e(t){return{enqueueToast:function e(){return t(S["enqueueToast"].apply(void 0,arguments))},resetSessions:function e(a){return t(L(H({},a,{reason:"SessionResetModal_resetSessions"})))}}};var X=t["a"]=Object(O["connect"])(Y,J)(Q)},,function(e,t,a){},,,,,,,,,,,,function(e,t,a){},function(e,t,a){"use strict";a.d(t,"a",function(){return c});var r=a(246);var n=a.n(r);var i=a(1);var s=a.n(i);var o=a(2);var l=a.n(o);function c(e,t){var a=Object(i["useRef"])(e);var r=Object(i["useRef"])();var s=Object(i["useState"])(e),l=n()(s,2),c=l[0],u=l[1];var d=Object(i["useCallback"])(function(){clearTimeout(r.current);u(a.current)},[]);Object(i["useEffect"])(function(){if(c!==a.current&&Object(o["isNumber"])(t)&&t>0){r.current=setTimeout(function(){u(a.current)},t);return function(){clearTimeout(r.current)}}return o["noop"]},[t,c]);return[c,u,d]}},,,function(e,t,a){"use strict";a.d(t,"a",function(){return f});a.d(t,"b",function(){return b});var r=a(196);var n=a.n(r);var i=a(1);var s=a.n(i);var o=a(85);var l=a.n(o);var c=a(156);var u=a(2);var d=a.n(u);var p=a(12);var m=a(26);var h=a(2758);var v=a(197);var f=function e(t,a,r){var i=Object(m["f"])(t);var o=function e(){Object(u["defer"])(function(){l.a.unmountComponentAtNode(a)})};Object(c["a"])(s.a.createElement(p["Provider"],{store:i},s.a.createElement(v["a"],null,s.a.createElement(h["a"],n()({onClose:o},r)))),a)};var b=function e(t){l.a.unmountComponentAtNode(t)}},function(e,t,a){"use strict";var r=a(484);t["a"]=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isPinned,a=void 0!==t&&t,n=e.isEphemeral,i=void 0!==n&&n,s=e.isStarred,o=void 0!==s&&s,l=e.isBroadcast,c=void 0!==l&&l,u=e.subtype,d=e.sliHighlight;var p="slackbot_response"===u;var m=Object(r["shouldShowHighlightsLabel"])(d);return{isPinned:a,isStarred:o,isEphemeral:i,isBroadcast:c,isCustomResponse:p,isSliHighlight:m}}},,function(e,t,a){"use strict";a.d(t,"a",function(){return f});a.d(t,"b",function(){return b});var r=a(196);var n=a.n(r);var i=a(1);var s=a.n(i);var o=a(85);var l=a.n(o);var c=a(12);var u=a(2);var d=a.n(u);var p=a(156);var m=a(26);var h=a(2748);var v=a(197);var f=function e(t,a){var r=document.getElementById("manage_shared_channels_modal_mount_point");if(!t)throw new Error("mountChannelOptions must be called with a teamId parameter");var i=Object(m["f"])(t);var o=function e(){Object(u["defer"])(function(){l.a.unmountComponentAtNode(r)})};Object(p["a"])(s.a.createElement(c["Provider"],{store:i},s.a.createElement(v["a"],null,s.a.createElement(h["a"],n()({},a,{onClose:o})))),r)};var b=function e(t){l.a.unmountComponentAtNode(t)};var g={mountManageSharedChannelsModal:f,unmountManageSharedChannelsModal:b}},function(e,t,a){"use strict";var r=a(0);var n=a(18);var i=a(649);var s=a(2);var o=a.n(s);var l=a(42);var c=a(33);var u=a(32);var d=a(136);var p=a(533);var m=a(512);var h=Object(n["b"])("Open channel from another workspace",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelId,n=a.teamId;var o=t();if(Object(u["isSSB"])()){var h=Object(s["includes"])(Object(l["legacyGetSignedInTeamIds"])(o),n);var v=h?Promise.resolve():Object(m["i"])(n);return v.then(function(){return new Promise(function(e){return window.requestAnimationFrame(e)})}).then(function(){if(Object(u["isSSBAndAtLeastVersion"])("3.2"))Object(l["displayTeamAndChannel"])(n,r);else{var e=document.createElement("iframe");var t=Object(d["c"])({team:n,id:r});e.src="slack://channel"+t;document.body.appendChild(e);setTimeout(function(){return e.remove()},1e3)}})}var f=Object(c["k"])(o,n);var b=Object(s["get"])(f,"domain");var g=Object(i["c"])(o,b)+"/messages/"+r;Object(p["d"])(g,n);return Promise.resolve()});h.meta={name:"openChannelFromAnotherTeam",key:"actionsOpenChannelFromAnotherTeamOpenChannelFromAnotherTeam",description:"Open channel from another workspace"};h.propTypes={channelId:r["default"].string.isRequired,teamId:r["default"].string.isRequired};t["a"]=h},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){},,function(e,t,a){"use strict";var r=a(2);var n=a.n(r);var i=a(0);var s=a(120);var o=i["default"].oneOf(Object(r["values"])(s["a"]));var l=i["default"].shape({state:i["default"].oneOf(["ready","loading","error"]).isRequired,teams:i["default"].arrayOf(i["default"].shape({id:i["default"].string.isRequired,name:i["default"].string.isRequired})).isRequired});var c=i["default"].arrayOf(i["default"].string);var u=i["default"].arrayOf(i["default"].string)},function(e,t,a){"use strict";t["a"]=function(e){if(!e)return false;if(e.metaKey||e.ctrlKey)return false;return e.key&&1===e.key.length}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";var r=a(110);var n=a.n(r);var i=a(135);var s=a.n(i);var o=a(169);var l=a.n(o);var c=a(138);var u=a.n(c);var d=a(185);var p=a.n(d);var m=a(1);var h=a.n(m);var v=a(0);var f=a(12);var b=a(2);var g=a.n(b);var _=a(11);var y=a(6);var O=a(20);var k=a(420);var E=a(564);var C=a(50);var S=a(854);var w=a(277);var j=new y["b"]("user_groups");var I={selectedChannels:[],onChange:b["noop"]};var T=100;var A=32;var N={entities:{channels:{includePublic:true,includePrivate:true,includeFromAnotherTeam:false,includeMpims:false,includeArchived:false,searchPreviousNames:false,onlyVisibleMpims:false,includeRequired:true}},limit:T,tiered:true,sort:{frecency:true}};var P=function(e){p()(t,e);function t(){n()(this,t);return l()(this,u()(t).apply(this,arguments))}s()(t,[{key:"getSelectedOptions",value:function e(){return(this.props.selectedChannels||[]).map(function(e){return{value:e}})}},{key:"renderChannelOption",value:function e(t){return h.a.createElement(E["a"],{channel:t.entity,channelId:t.value})}},{key:"render",value:function e(){if(!this.props.featureSonicUserGroups)return null;var t=this.props.onChange;var a=j.t("Default channels");var r=j.t("Group members are added to these channels automatically.");return h.a.createElement(C["a"],{htmlFor:"user_group_default_channel_select",id:"user_group_default_channel",key:"user_group_default_channel",text:a,optional:true},h.a.createElement(k["d"],{selectedOptions:this.getSelectedOptions(),renderOption:this.renderChannelOption,width:"100%",optionsRowHeight:A,onSelectedItemsChange:t,selectId:"user_group_default_channel_select",searcherOptions:N}),h.a.createElement(S["a"],null,r))}}]);return t}(m["PureComponent"]);P.displayName="UserGroupDefaultChannelPicker";P.defaultProps=I;var M=function e(t){return{getChannelById:function e(a){return Object(O["e"])(t,a)},featureSonicUserGroups:Object(_["isFeatureEnabled"])(t,"feature_sonic_user_groups")}};var D={search:w["e"]};t["a"]=Object(f["connect"])(M,D)(P)},,,function(e,t,a){"use strict";var r=a(110);var n=a.n(r);var i=a(135);var s=a.n(i);var o=a(169);var l=a.n(o);var c=a(138);var u=a.n(c);var d=a(147);var p=a.n(d);var m=a(185);var h=a.n(m);var v=a(1);var f=a.n(v);var b=a(12);var g=a(2);var _=a.n(g);var y=a(0);var O=a(6);var k=a(57);var E=a(454);var C=a(166);var S=a(98);var w=a(23);var j=a(54);var I=a(2228);var T=a(11);var A=a(38);var N=a(150);var P=a(122);var M=a(9);var D=a(652);var x=a(90);var R=a(784);var F=a(1338);var L=a(2781);var U=a(1348);var B=a(14);var q=a(35);var G=new O["b"]("do_not_disturb");var H={currentChannel:{},menuProps:{},openDndDialog:g["noop"],openChannelNotificationPrefsModal:g["noop"],openPrefsModal:g["noop"],clogger:{track:g["noop"]},setUserPrefByApi:g["noop"],showNotificationScheduleNewBadge:false,featureGranularDnd:false};var W=function(e){h()(t,e);function t(e){var a;n()(this,t);a=l()(this,u()(t).call(this,e));a.onClickDoNotDisturbSchedule=a.onClickDoNotDisturbSchedule.bind(p()(a));a.onClickNotificationPreferences=a.onClickNotificationPreferences.bind(p()(a));return a}s()(t,[{key:"onClickDoNotDisturbSchedule",value:function e(){var t=this.props,a=t.featureGranularDnd,r=t.showNotificationScheduleNewBadge;this.props.openPrefsModal({activeSection:"notifications",activeSubsection:"prefs_dnd"});a&&r&&this.props.setUserPrefByApi({pref:"dnd_notification_schedule_new_badge_seen",value:true})}},{key:"onClickNotificationPreferences",value:function e(){this.props.openPrefsModal({activeSection:"notifications"})}},{key:"renderSettingsMenuItem",value:function e(){var t=this;var a=this.props.currentChannel;if(!a.id||Object(M["isIm"])(a))return null;var r=f.a.createElement(C["a"],{channelId:a.id,iconProps:{inherit:true,align:"baseline"},inline:true});var n=G.rt("Settings for {name}\u2026",{name:f.a.createElement("strong",null,r),fallbackHash:"c6c4739d1b58eef23e9c67fb55a1961f80e0cf65"});return f.a.createElement(k["b"],{label:n,onSelected:function e(){return t.props.openChannelNotificationPrefsModal({channelId:a.id,entryPoint:"dnd_disabled_menu"})}})}},{key:"render",value:function e(){var t=this;var a=this.props,r=a.menuProps,n=a.clogger,i=a.featureGranularDnd,s=a.showNotificationScheduleNewBadge,o=a.featureOfflineMode,l=a.isOffline,c=a.isIAP1Enabled;var u;var d;var p;if(i){u=G.t("Do Not Disturb allows you to pause your Slack notifications");d=f.a.createElement("span",{className:"p-dnd_menu__new_pill"},G.t("NEW"));p=s?f.a.createElement("span",null,G.t("Notification schedule\u2026")," ",d):G.t("Notification schedule\u2026")}return f.a.createElement(k["f"],r,f.a.createElement(k["c"],{label:i?G.t("Do Not Disturb"):G.t("Pause notifications")}),i&&f.a.createElement(j["c"],{tip:u,position:"right",zIndex:"above_fs"},f.a.createElement(S["a"],{className:"p-dnd_menu_question_button"},f.a.createElement(w["b"],{type:"question-circle"}))),f.a.createElement(k["b"],{type:E["a"].subheaderChild,label:G.t("30 minutes"),onSelected:function e(){var a=30;t.props.snoozeNotifications({duration:a,reason:"DndDisabledMenu:30m"});n.track(B["EventId"].DND_SNOOZE_NOTIFICATIONS,{dnd_duration:a,dnd_preset:B["DndPreset"].DURATION_30_MINUTES,dnd_snooze_type:B["DndSnoozeType"].SNOOZE_INITIAL})},"data-qa":"snooze_btn_30",disabled:o&&l,showOfflineIcon:o&&l}),f.a.createElement(k["b"],{type:E["a"].subheaderChild,label:G.t("1 hour"),onSelected:function e(){var a=60;t.props.snoozeNotifications({duration:a,reason:"DndDisabledMenu:1hr"});n.track(B["EventId"].DND_SNOOZE_NOTIFICATIONS,{dnd_duration:a,dnd_preset:B["DndPreset"].DURATION_1_HOUR,dnd_snooze_type:B["DndSnoozeType"].SNOOZE_INITIAL})},"data-qa":"snooze_btn_60",disabled:o&&l,showOfflineIcon:o&&l}),f.a.createElement(k["b"],{type:E["a"].subheaderChild,label:G.t("2 hours"),onSelected:function e(){var a=120;t.props.snoozeNotifications({duration:a,reason:"DndDisabledMenu:2hr"});n.track(B["EventId"].DND_SNOOZE_NOTIFICATIONS,{dnd_duration:a,dnd_preset:B["DndPreset"].DURATION_2_HOURS,dnd_snooze_type:B["DndSnoozeType"].SNOOZE_INITIAL})},"data-qa":"snooze_btn_120",disabled:o&&l,showOfflineIcon:o&&l}),!c&&f.a.createElement(k["b"],{type:E["a"].subheaderChild,label:G.t("4 hours"),onSelected:function e(){var a=240;t.props.snoozeNotifications({duration:a,reason:"DndDisabledMenu:4hr"});n.track(B["EventId"].DND_SNOOZE_NOTIFICATIONS,{dnd_duration:a,dnd_preset:B["DndPreset"].DURATION_4_HOURS,dnd_snooze_type:B["DndSnoozeType"].SNOOZE_INITIAL})},"data-qa":"snooze_btn_240",disabled:o&&l,showOfflineIcon:o&&l}),f.a.createElement(k["b"],{type:E["a"].subheaderChild,label:c?"Tomorrow":G.t("Until tomorrow"),onSelected:function e(){var a=Object(U["d"])();t.props.snoozeNotifications({duration:a,reason:"DndDisabledMenu:tomorrow"});n.track(B["EventId"].DND_SNOOZE_NOTIFICATIONS,{dnd_duration:a,dnd_preset:B["DndPreset"].DURATION_TOMORROW,dnd_snooze_type:B["DndSnoozeType"].SNOOZE_INITIAL})},"data-qa":"snooze_btn_tomorrow",disabled:o&&l,showOfflineIcon:o&&l}),!c&&f.a.createElement(k["b"],{type:E["a"].subheaderChild,label:G.t("Until next week"),onSelected:function e(){var a=Object(U["c"])();t.props.snoozeNotifications({duration:a,reason:"DndDisabledMenu:week"});n.track(B["EventId"].DND_SNOOZE_NOTIFICATIONS,{dnd_duration:a,dnd_preset:B["DndPreset"].DURATION_NEXT_WEEK,dnd_snooze_type:B["DndSnoozeType"].SNOOZE_INITIAL})},"data-qa":"snooze_btn_next_week",disabled:o&&l,showOfflineIcon:o&&l}),f.a.createElement(k["b"],{type:E["a"].subheaderChild,label:G.t("Custom\u2026"),onSelected:function e(){t.props.openDndDialog();n.track(B["EventId"].DND_OPEN_CUSTOM_SNOOZE_DIALOG)},"data-qa":"snooze_btn_custom",disabled:o&&l,showOfflineIcon:o&&l}),f.a.createElement(k["d"],null),f.a.createElement(k["b"],{label:i?p:G.t("Do Not Disturb schedule\u2026"),onSelected:this.onClickDoNotDisturbSchedule}),!i&&!c&&f.a.createElement(k["d"],null),!i&&!c&&this.renderSettingsMenuItem(),!i&&!c&&f.a.createElement(k["b"],{label:G.t("Your notification preferences\u2026"),onSelected:this.onClickNotificationPreferences}),c&&f.a.createElement(I["a"],null))}}]);return t}(v["PureComponent"]);W.displayName="DndDisabledMenu";W.defaultProps=H;var V=function e(t){return{clogger:Object(q["a"])({state:t}),featureGranularDnd:Object(T["isFeatureEnabled"])(t,"feature_granular_dnd"),showNotificationScheduleNewBadge:!Object(A["k"])(t,"dnd_notification_schedule_new_badge_seen"),featureOfflineMode:Object(T["isFeatureEnabled"])(t,"feature_offline_mode"),isOffline:!Object(N["c"])(t),isIAP1Enabled:Object(x["e"])(t)}};var K=function e(t){return{snoozeNotifications:function e(a){return t(Object(D["e"])(a))},openDndDialog:function e(){return t(Object(L["a"])())},openChannelNotificationPrefsModal:function e(a){return t(Object(F["a"])(a))},setUserPrefByApi:function e(a){return t(Object(P["d"])(a))},openPrefsModal:function e(a){return t(Object(R["a"])(a))}}};t["a"]=Object(b["connect"])(V,K)(W)},function(e,t,a){"use strict";var r=a(196);var n=a.n(r);var i=a(245);var s=a.n(i);var o=a(1);var l=a.n(o);var c=a(0);var u=a(12);var d=a(11);var p=a(345);var m=a(559);var h=a(545);var v={userPresence:"active"};var f=function e(t){var a=t.userPresence,r=t.dispatch,i=s()(t,["userPresence","dispatch"]);var c=Object(o["useCallback"])(function(){r(Object(p["toggleUserPresence"])())},[r]);var u=l.a.createElement(l.a.Fragment,null,"Set yourself to ",l.a.createElement("strong",null,"active"===a?"away":"active"));return l.a.createElement(m["a"],n()({},i,{label:u,onSelected:c}))};f.displayName="TogglePresenceItem";f.defaultProps=v;var b=function e(t){var a=Object(d["getCurrentUserId"])(t);return{userPresence:Object(p["getPresenceByMemberId"])(t,a)}};t["a"]=Object(h["b"])(Object(u["connect"])(b)(f))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){},,function(e,t,a){},,function(e,t,a){var r=a(2429),n=a(3175),i=a(3176),s=a(2432),o=a(3193),l=a(2316),c=a(3194),u=a(2438),d=a(2440),p=a(2320);var m="Expected a function";var h=1,v=2,f=8,b=16,g=32,_=64;var y=Math.max;function O(e,t,a,O,k,E,C,S){var w=t&v;if(!w&&"function"!=typeof e)throw new TypeError(m);var j=O?O.length:0;if(!j){t&=~(g|_);O=k=void 0}C=void 0===C?C:y(p(C),0);S=void 0===S?S:p(S);j-=k?k.length:0;if(t&_){var I=O,T=k;O=k=void 0}var A=w?void 0:l(e);var N=[e,t,a,O,k,I,T,E,C,S];A&&c(N,A);e=N[0];t=N[1];a=N[2];O=N[3];k=N[4];S=N[9]=void 0===N[9]?w?0:e.length:y(N[9]-j,0);!S&&t&(f|b)&&(t&=~(f|b));if(t&&t!=h)P=t==f||t==b?i(e,t,S):t!=g&&t!=(h|g)||k.length?s.apply(void 0,N):o(e,t,a,O);else var P=n(e,t,a);var M=A?r:u;return d(M(P,N),e,t)}e.exports=O},function(e,t){function a(e,t,a){switch(a.length){case 0:return e.call(t);case 1:return e.call(t,a[0]);case 2:return e.call(t,a[0],a[1]);case 3:return e.call(t,a[0],a[1],a[2])}return e.apply(t,a)}e.exports=a},function(e,t,a){var r=a(1906),n=a(2315);var i=4294967295;function s(e){this.__wrapped__=e;this.__actions__=[];this.__dir__=1;this.__filtered__=false;this.__iteratees__=[];this.__takeCount__=i;this.__views__=[]}s.prototype=r(n.prototype);s.prototype.constructor=s;e.exports=s},function(e,t){function a(){}e.exports=a},function(e,t,a){var r=a(2430),n=a(3178);var i=r?function(e){return r.get(e)}:n;e.exports=i},function(e,t,a){var r=a(1906),n=a(2315);function i(e,t){this.__wrapped__=e;this.__actions__=[];this.__chain__=!!t;this.__index__=0;this.__values__=void 0}i.prototype=r(n.prototype);i.prototype.constructor=i;e.exports=i},function(e,t){function a(e,t){var a=-1,r=null==e?0:e.length;while(++a<r)if(false===t(e[a],a,e))break;return e}e.exports=a},function(e,t){var a="__lodash_placeholder__";function r(e,t){var r=-1,n=e.length,i=0,s=[];while(++r<n){var o=e[r];if(o===t||o===a){e[r]=a;s[i++]=r}}return s}e.exports=r},function(e,t,a){var r=a(3195);function n(e){var t=r(e),a=t%1;return t===t?a?t-a:t:0}e.exports=n},function(e,t,a){var r=a(903),n=a(3198),i=a(3199),s=a(3200),o=a(3201),l=a(3202);function c(e){var t=this.__data__=new r(e);this.size=t.size}c.prototype.clear=n;c.prototype["delete"]=i;c.prototype.get=s;c.prototype.has=o;c.prototype.set=l;e.exports=c},function(e,t,a){var r=a(3208),n=a(2446);var i=Object.prototype;var s=i.propertyIsEnumerable;var o=Object.getOwnPropertySymbols;var l=o?function(e){if(null==e)return[];e=Object(e);return r(o(e),function(t){return s.call(e,t)})}:n;e.exports=l},function(e,t,a){var r=a(2416);var n=r(Object.getPrototypeOf,Object);e.exports=n},function(e,t,a){var r=a(2450);function n(e){var t=new e.constructor(e.byteLength);new r(t).set(new r(e));return t}e.exports=n},function(e,t,a){var r=a(522),n=a(1784);var i=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;function o(e,t){if(r(e))return false;var a=typeof e;if("number"==a||"symbol"==a||"boolean"==a||null==e||n(e))return true;return s.test(e)||!i.test(e)||null!=t&&e in Object(t)}e.exports=o},function(e,t){function a(e,t){var a=-1,r=null==e?0:e.length,n=Array(r);while(++a<r)n[a]=t(e[a],a,e);return n}e.exports=a},function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,,,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.r(t);var r=a(52);var n=a(2);var i=a(1972);var s=function(e){var t=Object(i["b"])(e);if(!Object(n["isString"])(t)||!t.trim())return{words:[],cmd:"",disp:null,rest:"",originalRest:"",originalText:null};var a=t.trim();var r=a.split(/\s+/);var s=r[0].toLowerCase().replace(/\u2019/g,"'");var o=r[0];var l=t.substr(s.length).trim();var c=e.substr(s.length).trim();var u=e;return{words:r,cmd:s,disp:o,rest:l,originalText:u,originalRest:c}};var o=a(1973);var l=/^[/\uff0f][^/\uff0f\s]/;var c=function(e){return l.test(e)};var u=a(1409);var d=a(2989);var p=a(22);var m=p["SLASH_COMMAND_ERRORS"].UNKNOWN_COMMAND;Object(r["a"])("interop.slashCommand",{UNKNOWN_COMMAND:m,looksLikeSlashCommand:c,parseEditLastMessageCommand:o["a"],parseArgs:s,loadSlashCommands:u["b"],executeCommand:u["a"],slackDebugLagCommand:d["default"]})},,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){var r=a(1904),n=r("join",a(3262));n.placeholder=a(1783);e.exports=n},,,,,,,,,,,,,,,,,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){var r=a(1850),n=a(2430);var i=n?function(e,t){n.set(e,t);return e}:r;e.exports=i},function(e,t,a){var r=a(2431);var n=r&&new r;e.exports=n},function(e,t,a){var r=a(567),n=a(389);var i=r(n,"WeakMap");e.exports=i},function(e,t,a){var r=a(2433),n=a(2434),i=a(3177),s=a(1905),o=a(2435),l=a(2442),c=a(3192),u=a(2319),d=a(389);var p=1,m=2,h=8,v=16,f=128,b=512;function g(e,t,a,_,y,O,k,E,C,S){var w=t&f,j=t&p,I=t&m,T=t&(h|v),A=t&b,N=I?void 0:s(e);function P(){var p=arguments.length,m=Array(p),h=p;while(h--)m[h]=arguments[h];if(T)var v=l(P),f=i(m,v);_&&(m=r(m,_,y,T));O&&(m=n(m,O,k,T));p-=f;if(T&&p<S){var b=u(m,v);return o(e,t,g,P.placeholder,a,m,b,E,C,S-p)}var M=j?a:this,D=I?M[e]:e;p=m.length;E?m=c(m,E):A&&p>1&&m.reverse();w&&C<p&&(m.length=C);this&&this!==d&&this instanceof P&&(D=N||s(D));return D.apply(M,m)}return P}e.exports=g},function(e,t){var a=Math.max;function r(e,t,r,n){var i=-1,s=e.length,o=r.length,l=-1,c=t.length,u=a(s-o,0),d=Array(c+u),p=!n;while(++l<c)d[l]=t[l];while(++i<o)(p||i<s)&&(d[r[i]]=e[i]);while(u--)d[l++]=e[i++];return d}e.exports=r},function(e,t){var a=Math.max;function r(e,t,r,n){var i=-1,s=e.length,o=-1,l=r.length,c=-1,u=t.length,d=a(s-l,0),p=Array(d+u),m=!n;while(++i<d)p[i]=e[i];var h=i;while(++c<u)p[h+c]=t[c];while(++o<l)(m||i<s)&&(p[h+r[o]]=e[i++]);return p}e.exports=r},function(e,t,a){var r=a(2436),n=a(2438),i=a(2440);var s=1,o=2,l=4,c=8,u=32,d=64;function p(e,t,a,p,m,h,v,f,b,g){var _=t&c,y=_?v:void 0,O=_?void 0:v,k=_?h:void 0,E=_?void 0:h;t|=_?u:d;t&=~(_?d:u);t&l||(t&=~(s|o));var C=[e,t,m,k,y,E,O,f,b,g];var S=a.apply(void 0,C);r(e)&&n(S,C);S.placeholder=p;return i(S,e,t)}e.exports=p},function(e,t,a){var r=a(2314),n=a(2316),i=a(2437),s=a(3180);function o(e){var t=i(e),a=s[t];if("function"!=typeof a||!(t in r.prototype))return false;if(e===a)return true;var o=n(a);return!!o&&e===o[0]}e.exports=o},function(e,t,a){var r=a(3179);var n=Object.prototype;var i=n.hasOwnProperty;function s(e){var t=e.name+"",a=r[t],n=i.call(r,t)?a.length:0;while(n--){var s=a[n],o=s.func;if(null==o||o==e)return s.name}return t}e.exports=s},function(e,t,a){var r=a(2429),n=a(2439);var i=n(r);e.exports=i},function(e,t){var a=800,r=16;var n=Date.now;function i(e){var t=0,i=0;return function(){var s=n(),o=r-(s-i);i=s;if(o>0){if(++t>=a)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}e.exports=i},function(e,t,a){var r=a(3182),n=a(3183),i=a(2441),s=a(3186);function o(e,t,a){var o=t+"";return i(e,n(o,s(r(o),a)))}e.exports=o},function(e,t,a){var r=a(3184),n=a(2439);var i=n(r);e.exports=i},function(e,t){function a(e){var t=e;return t.placeholder}e.exports=a},function(e,t,a){var r=a(1908),n=a(1714);function i(e,t){return e&&r(t,n(t),e)}e.exports=i},function(e,t,a){var r=a(2321),n=a(2318),i=a(2207),s=a(2443),o=a(3203),l=a(3206),c=a(1907),u=a(3207),d=a(3209),p=a(2448),m=a(3210),h=a(1785),v=a(3214),f=a(3215),b=a(3220),g=a(522),_=a(2208),y=a(3221),O=a(539),k=a(3223),E=a(1714);var C=1,S=2,w=4;var j="[object Arguments]",I="[object Array]",T="[object Boolean]",A="[object Date]",N="[object Error]",P="[object Function]",M="[object GeneratorFunction]",D="[object Map]",x="[object Number]",R="[object Object]",F="[object RegExp]",L="[object Set]",U="[object String]",B="[object Symbol]",q="[object WeakMap]";var G="[object ArrayBuffer]",H="[object DataView]",W="[object Float32Array]",V="[object Float64Array]",K="[object Int8Array]",z="[object Int16Array]",Q="[object Int32Array]",Y="[object Uint8Array]",J="[object Uint8ClampedArray]",X="[object Uint16Array]",Z="[object Uint32Array]";var $={};$[j]=$[I]=$[G]=$[H]=$[T]=$[A]=$[W]=$[V]=$[K]=$[z]=$[Q]=$[D]=$[x]=$[R]=$[F]=$[L]=$[U]=$[B]=$[Y]=$[J]=$[X]=$[Z]=true;$[N]=$[P]=$[q]=false;function ee(e,t,a,I,T,A){var N,D=t&C,x=t&S,F=t&w;a&&(N=T?a(e,I,T,A):a(e));if(void 0!==N)return N;if(!O(e))return e;var L=g(e);if(L){N=v(e);if(!D)return c(e,N)}else{var U=h(e),B=U==P||U==M;if(_(e))return l(e,D);if(U==R||U==j||B&&!T){N=x||B?{}:b(e);if(!D)return x?d(e,o(N,e)):u(e,s(N,e))}else{if(!$[U])return T?e:{};N=f(e,U,D)}}A||(A=new r);var q=A.get(e);if(q)return q;A.set(e,N);k(e)?e.forEach(function(r){N.add(ee(r,t,a,r,e,A))}):y(e)&&e.forEach(function(r,n){N.set(n,ee(r,t,a,n,e,A))});var G=F?x?m:p:x?keysIn:E;var H=L?void 0:G(e);n(H||e,function(r,n){if(H){n=r;r=e[n]}i(N,n,ee(r,t,a,n,e,A))});return N}e.exports=ee},function(e,t,a){var r=a(2413),n=a(3204),i=a(1715);function s(e){return i(e)?r(e,true):n(e)}e.exports=s},function(e,t){function a(){return[]}e.exports=a},function(e,t,a){var r=a(2206),n=a(2323),i=a(2322),s=a(2446);var o=Object.getOwnPropertySymbols;var l=o?function(e){var t=[];while(e){r(t,i(e));e=n(e)}return t}:s;e.exports=l},function(e,t,a){var r=a(2449),n=a(2322),i=a(1714);function s(e){return r(e,i,n)}e.exports=s},function(e,t,a){var r=a(2206),n=a(522);function i(e,t,a){var i=t(e);return n(e)?i:r(i,a(e))}e.exports=i},function(e,t,a){var r=a(389);var n=r.Uint8Array;e.exports=n},function(e,t,a){var r=a(3230),n=a(3243),i=a(1850),s=a(522),o=a(3250);function l(e){if("function"==typeof e)return e;if(null==e)return i;if("object"==typeof e)return s(e)?n(e[0],e[1]):r(e);return o(e)}e.exports=l},function(e,t,a){var r=a(3232),n=a(592);function i(e,t,a,s,o){if(e===t)return true;if(null==e||null==t||!n(e)&&!n(t))return e!==e&&t!==t;return r(e,t,a,s,i,o)}e.exports=i},function(e,t,a){var r=a(3233),n=a(3236),i=a(3237);var s=1,o=2;function l(e,t,a,l,c,u){var d=a&s,p=e.length,m=t.length;if(p!=m&&!(d&&m>p))return false;var h=u.get(e);if(h&&u.get(t))return h==t;var v=-1,f=true,b=a&o?new r:void 0;u.set(e,t);u.set(t,e);while(++v<p){var g=e[v],_=t[v];if(l)var y=d?l(_,g,v,t,e,u):l(g,_,v,e,t,u);if(void 0!==y){if(y)continue;f=false;break}if(b){if(!n(t,function(e,t){if(!i(b,t)&&(g===e||c(g,e,a,l,u)))return b.push(t)})){f=false;break}}else if(!(g===_||c(g,_,a,l,u))){f=false;break}}u["delete"](e);u["delete"](t);return f}e.exports=l},function(e,t,a){var r=a(539);function n(e){return e===e&&!r(e)}e.exports=n},function(e,t){function a(e,t){return function(a){if(null==a)return false;return a[e]===t&&(void 0!==t||e in Object(a))}}e.exports=a},function(e,t,a){var r=a(2457),n=a(1786);function i(e,t){t=r(t,e);var a=0,i=t.length;while(null!=e&&a<i)e=e[n(t[a++])];return a&&a==i?e:void 0}e.exports=i},function(e,t,a){var r=a(522),n=a(2325),i=a(2458),s=a(2459);function o(e,t){if(r(e))return e;return n(e,t)?[e]:i(s(e))}e.exports=o},function(e,t,a){var r=a(3245);var n=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g;var i=/\\(\\)?/g;var s=r(function(e){var t=[];46===e.charCodeAt(0)&&t.push("");e.replace(n,function(e,a,r,n){t.push(r?n.replace(i,"$1"):a||e)});return t});e.exports=s},function(e,t,a){var r=a(3246);function n(e){return null==e?"":r(e)}e.exports=n},function(e,t,a){var r=a(1717),n=a(3254),i=a(2441);function s(e){return i(n(e,void 0,r),e+"")}e.exports=s},function(e,t,a){},,,,,,,,function(e,t,a){},function(e,t,a){},,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,,,,,,,,,,,,function(e,t,a){var r=a(1904),n=r("flow",a(3256));n.placeholder=a(1783);e.exports=n},function(e,t,a){var r=a(1904),n=r("map",a(3258));n.placeholder=a(1783);e.exports=n},function(e,t,a){var r=a(1904),n=r("slice",a(3263));n.placeholder=a(1783);e.exports=n},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){},function(e,t,a){e.exports=a.p+"7b3252cab82a75f8c36207ecf33d3b55.png"},function(e,t,a){e.exports=a.p+"0801db7ea193e602f620a36829b95fcd.png"},function(e,t,a){e.exports=a.p+"2c1f56affe8dea4c13cd0cfcb0fbca83.png"},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(2);var s=a.n(i);var o=a(6);var l=a(52);var c=a(110);var u=a.n(c);var d=a(135);var p=a.n(d);var m=a(169);var h=a.n(m);var v=a(138);var f=a.n(v);var b=a(185);var g=a.n(b);var _=a(0);var y=a(27);var O={additionalItemCopy:"",item:{}};var k=function(e){g()(t,e);function t(){u()(this,t);return h()(this,f()(t).apply(this,arguments))}p()(t,[{key:"render",value:function e(){var t=this.props,a=t.additionalItemCopy,r=t.item;var i=r.team.icon.image_44+" 1x, "+r.team.icon.image_88+" 2x";return n.a.createElement("div",{className:"c-lazy_filter_select__team_item",key:"team-list-item-"+r.id},n.a.createElement("img",{alt:"",className:"c-lazy_filter_select__team_list_icon",src:r.team.icon.image_44,srcSet:i}),n.a.createElement("div",{className:"c-lazy_filter_select__team_token_name"},Object(y["getTeamDisplayName"])(r.team)," ",a&&n.a.createElement("span",null," - ",a)))}}]);return t}(r["PureComponent"]);k.displayName="LazyFilterSelectTeamListItem";k.defaultProps=O;var E={additionalItemCopy:"",item:{}};var C=function(e){g()(t,e);function t(){u()(this,t);return h()(this,f()(t).apply(this,arguments))}p()(t,[{key:"render",value:function e(){var t=this.props,a=t.additionalItemCopy,r=t.item;return n.a.createElement("div",{className:"c-lazy_filter_select__team_token",key:"team-token-"+r.id},n.a.createElement("img",{alt:"",className:"c-lazy_filter_select__team_token_icon",src:r.team.icon.image_44}),n.a.createElement("div",{className:"c-lazy_filter_select__team_token_name"},Object(y["getTeamDisplayName"])(r.team)," ",a&&n.a.createElement("span",null," - ",a)))}}]);return t}(r["PureComponent"]);C.displayName="LazyFilterSelectTeamToken";C.defaultProps=E;var S=a(1970);var w=a(1971);function j(e){var t=new o["b"]("channel_browser");var a=t.rt("<span>Show:</span> {label}",{label:e.label},function(t){var a=t.text;return n.a.createElement("span",{key:e.id,className:"sk_foreground_max"},a)});return a}function I(e){var t=new o["b"]("channel_browser");var a=t.rt("<span>Sort:</span> {label}",{label:e.label},function(t){var a=t.text;return n.a.createElement("span",{key:e.id,className:"sk_foreground_max"},a)});return a}function T(e){var t=new o["b"]("team_picker");var a;a=e?t.rt("No teams found matching <strong>{query}</strong>",{query:s.a.escape(e)}):t.t("No teams found");return a}function A(e){return n.a.createElement(k,{item:e})}A.displayName="teamPickerListItem";function N(e){return n.a.createElement(C,{item:e})}N.displayName="teamPickerToken";function P(e){return n.a.createElement(S["a"],{item:e})}P.displayName="memberListItem";function M(e){return n.a.createElement(w["a"],{item:e})}M.displayName="memberListToken";Object(l["a"])("interop.lazyFilterSelect",{channelBrowserShowWhichChannelsToken:j,channelBrowserSortByToken:I,teamPickerNoResults:T,teamPickerListItem:A,teamPickerToken:N,memberListItem:P,memberListToken:M})},,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.r(t);var r={};a.r(r);a.d(r,"supportsCallWindowStatus",function(){return k});a.d(r,"setCallWindowBusy",function(){return E});a.d(r,"isCallWindowBusy",function(){return C});a.d(r,"setCallWindowToken",function(){return w});a.d(r,"clearCallWindowToken",function(){return j});a.d(r,"getCallWindowToken",function(){return I});a.d(r,"setCallWindowTeamId",function(){return A});a.d(r,"clearCallWindowTeamId",function(){return N});a.d(r,"getCallWindowTeamId",function(){return P});a.d(r,"setCallWindowTeamName",function(){return D});a.d(r,"clearCallWindowTeamName",function(){return x});a.d(r,"getCallWindowTeamName",function(){return R});a.d(r,"setIncomingCallWindowBusy",function(){return L});a.d(r,"isIncomingCallWindowBusy",function(){return U});a.d(r,"setIncomingCallWindowToken",function(){return q});a.d(r,"clearIncomingCallWindowToken",function(){return G});a.d(r,"getIncomingCallWindowToken",function(){return H});a.d(r,"setIncomingCallWindowTeamId",function(){return V});a.d(r,"clearIncomingCallWindowTeamId",function(){return K});a.d(r,"getIncomingCallWindowTeamId",function(){return z});a.d(r,"setIncomingCallWindowTeamName",function(){return Y});a.d(r,"clearIncomingCallWindowTeamName",function(){return J});a.d(r,"getIncomingCallWindowTeamName",function(){return X});var n=a(88);var i=a.n(n);var s=a(52);var o=a(42);var l=a(2642);var c=a(827);var u=a(11);var d=a(18);var p=a(21);var m=a(16);var h=a(26);function v(e){return Object(o["getAppLogFiles"])().then(function(t){var a=t&&t.length>0?t[0]:null;if(!a)return Promise.resolve();var r=a instanceof File?a:new File(a.buffer,a.name,a.options);var n=Object(h["d"])(e);var i=Object(u["getFromBootData"])(n,"api_token");if(!i)return Promise.resolve();return c["b"].fetch({method:"profiling.addLogging",args:{token:i,platform:"ssb",log_file:r},teamId:e})}).catch(function(t){Object(m["a"])({teamId:e}).error("Unable to upload app logs: "+t)})}var f=Object(d["b"])("Signal to the desktop that all delegates are ready",function(e,t){Object(o["didFinishLoading"])();_(t);g(t)});f.meta={name:"onWebappBooted",key:"desktopOnWebappBootedOnWebappBooted",description:"Signal to the desktop that all delegates are ready"};var b=f;function g(e){setTimeout(function(){var t=e();if(!Object(u["isFeatureEnabled"])(t,"feature_desktop_logs_upload"))return;var a="ssb";var r=Object(u["getFromBootData"])(t,"api_token");var n=Object(p["b"])(t);c["b"].fetch({method:"api.features",args:{token:r,platform:a},teamId:n}).then(function(e){e&&e.features&&e.features.desktop_diagnostics_timestamp&&v(n)})},6e4)}function _(e){if(!Object(u["isFeatureEnabled"])(e(),"feature_desktop_force_production_channel"))return;Object(o["setPreference"])({name:"releaseChannel",value:"prod"})}var y=a(278);var O=a.n(y);function k(){return Object(o["legacyHasDeviceStorage"])()}function E(e){Object(o["setItem"])("isCallWindowBusy",e)}function C(){return S.apply(this,arguments)}function S(){S=O()(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function e(a){while(1)switch(a.prev=a.next){case 0:a.prev=0;a.next=3;return Object(o["getItem"])("isCallWindowBusy");case 3:t=a.sent;return a.abrupt("return","true"===t);case 7:a.prev=7;a.t0=a["catch"](0);return a.abrupt("return",false);case 10:case"end":return a.stop()}},e,null,[[0,7]])}));return S.apply(this,arguments)}function w(e){Object(o["setItem"])("callWindowToken",e)}function j(){Object(o["removeItem"])("callWindowToken")}function I(){return T.apply(this,arguments)}function T(){T=O()(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function e(a){while(1)switch(a.prev=a.next){case 0:a.prev=0;a.next=3;return Object(o["getItem"])("callWindowToken");case 3:t=a.sent;return a.abrupt("return",t);case 7:a.prev=7;a.t0=a["catch"](0);return a.abrupt("return","");case 10:case"end":return a.stop()}},e,null,[[0,7]])}));return T.apply(this,arguments)}function A(e){Object(o["setItem"])("callWindowTeamId",e)}function N(){Object(o["removeItem"])("callWindowTeamId")}function P(){return M.apply(this,arguments)}function M(){M=O()(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function e(a){while(1)switch(a.prev=a.next){case 0:a.prev=0;a.next=3;return Object(o["getItem"])("callWindowTeamId");case 3:t=a.sent;return a.abrupt("return",t);case 7:a.prev=7;a.t0=a["catch"](0);return a.abrupt("return","");case 10:case"end":return a.stop()}},e,null,[[0,7]])}));return M.apply(this,arguments)}function D(e){Object(o["setItem"])("callWindowTeamName",e)}function x(){Object(o["removeItem"])("callWindowTeamName")}function R(){return F.apply(this,arguments)}function F(){F=O()(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function e(a){while(1)switch(a.prev=a.next){case 0:a.prev=0;a.next=3;return Object(o["getItem"])("callWindowTeamName");case 3:t=a.sent;return a.abrupt("return",t);case 7:a.prev=7;a.t0=a["catch"](0);return a.abrupt("return","");case 10:case"end":return a.stop()}},e,null,[[0,7]])}));return F.apply(this,arguments)}function L(e){Object(o["setItem"])("isIncomingCallWindowBusy",e)}function U(){return B.apply(this,arguments)}function B(){B=O()(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function e(a){while(1)switch(a.prev=a.next){case 0:a.prev=0;a.next=3;return Object(o["getItem"])("isIncomingCallWindowBusy");case 3:t=a.sent;return a.abrupt("return","true"===t);case 7:a.prev=7;a.t0=a["catch"](0);return a.abrupt("return",false);case 10:case"end":return a.stop()}},e,null,[[0,7]])}));return B.apply(this,arguments)}function q(e){Object(o["setItem"])("incomingCallWindowToken",e)}function G(){Object(o["removeItem"])("incomingCallWindowToken")}function H(){return W.apply(this,arguments)}function W(){W=O()(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function e(a){while(1)switch(a.prev=a.next){case 0:a.prev=0;a.next=3;return Object(o["getItem"])("incomingCallWindowToken");case 3:t=a.sent;return a.abrupt("return",t);case 7:a.prev=7;a.t0=a["catch"](0);return a.abrupt("return","");case 10:case"end":return a.stop()}},e,null,[[0,7]])}));return W.apply(this,arguments)}function V(e){Object(o["setItem"])("incomingCallWindowTeamId",e)}function K(){Object(o["removeItem"])("incomingCallWindowTeamId")}function z(){return Q.apply(this,arguments)}function Q(){Q=O()(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function e(a){while(1)switch(a.prev=a.next){case 0:a.prev=0;a.next=3;return Object(o["getItem"])("incomingCallWindowTeamId");case 3:t=a.sent;return a.abrupt("return",t);case 7:a.prev=7;a.t0=a["catch"](0);return a.abrupt("return","");case 10:case"end":return a.stop()}},e,null,[[0,7]])}));return Q.apply(this,arguments)}function Y(e){Object(o["setItem"])("incomingCallWindowTeamName",e)}function J(){Object(o["removeItem"])("incomingCallWindowTeamName")}function X(){return Z.apply(this,arguments)}function Z(){Z=O()(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function e(a){while(1)switch(a.prev=a.next){case 0:a.prev=0;a.next=3;return Object(o["getItem"])("incomingCallWindowTeamName");case 3:t=a.sent;return a.abrupt("return",t);case 7:a.prev=7;a.t0=a["catch"](0);return a.abrupt("return","");case 10:case"end":return a.stop()}},e,null,[[0,7]])}));return Z.apply(this,arguments)}function $(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function ee(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?$(Object(a),true).forEach(function(t){i()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):$(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}Object(s["a"])("interop.desktop",ee({},o,{},r,{getParsedNotificationWarnings:l["a"],onWebappBooted:b}))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){},,,,,,,,,,,function(e,t,a){},,,,function(e,t,a){},,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";var r=a(1);var n=a.n(r);var i=a(12);var s=a(13);var o=a.n(s);var l=a(109);var c=a(0);var u=a(17);var d=a(6);var p=a(3095);var m=a.n(p);var h=new d["b"]("member_profile");var v={className:void 0};function f(e){var t=e.className,a=e.member,r=e.memberName;var i=a.profile.image_512;var s=a.profile.image_48;var l="url('"+s+"')";var c=h.t("Profile photo for {member_name}",{member_name:r});return n.a.createElement("div",{className:o()(t,"p-member_profile_picture"),style:{backgroundImage:l}},n.a.createElement("img",{src:i,alt:c,className:"p_member_profile_picture__img"}))}f.displayName="MemberProfilePicture";f.defaultProps=v;var b=function e(t,a){var r=a.member;return{memberName:Object(u["getPrefCompliantMemberName"])(t,r)}};t["a"]=Object(i["connect"])(b)(Object(l["pure"])(f))},function(e,t,a){"use strict";var r=a(1);var n=a.n(r);var i=a(12);var s=a(2);var o=a.n(s);var l=a(13);var c=a.n(l);var u=a(0);var d=a(6);var p=a(17);var m=a(121);var h=a(1664);var v=a(1887);var f=a(104);var b=a(653);var g=a(23);var _=a(24);var y=a(54);var O=a(892);var k=a(348);var E=a(150);var C=a(1212);var S=a(14);var w=a(2794);var j=a(1082);var I=a(90);var T=a(1828);var A=a(2424);var N=a.n(A);var P=new d["b"]("member_profile");var M={autoFillSlashCommand:s["noop"],children:void 0,className:void 0,member:void 0,onClick:s["noop"],openEditProfileModal:s["noop"],showCallButton:false,isPhoneIntegrationAdminExperimentOn:false,showFileList:s["noop"],showMemberProfile:s["noop"],startCallByMemberId:s["noop"],startImByMemberId:s["noop"],callLogContext:void 0,clogger:{track:s["noop"]},onCallClick:s["noop"],onMessageClick:s["noop"],openFileBrowser:s["noop"],isIAP1Enabled:false};function D(e){var t=e.autoFillSlashCommand,a=e.children,i=e.className,s=e.member,o=e.onClick,l=e.onCallClick,u=e.onMessageClick,d=e.openEditProfileModal,m=e.showCallButton,h=e.showFileList,v=e.showMemberProfile,f=e.startCallByMemberId,b=e.startImByMemberId,E=e.isOffline,C=e.isCallsAllowedByAdmin,j=e.callLogContext,I=e.clogger,T=e.isPhoneIntegrationAdminExperimentOn,A=e.openFileBrowser,N=e.isIAP1Enabled;var M=Object(k["a"])(),D=M.featureModernProfileFlexpane,x=M.featureOfflineMode;var R=s.id;var F=Object(r["useCallback"])(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.appId,a=e.type,r=e.phoneNumber;f({memberId:s.id,appId:t,type:a,phoneNumber:r});l();o()},[s.id,o,l,f]);var L=Object(r["useCallback"])(function(){N?A({filters:{from:[R]}}):h({user:R});o()},[N,A,h,o,R]);var U=Object(p["getMemberRealName"])(s);var B=Object(p["isMemberProfileComplete"])(s);if(!D)return null;var q=function e(){I.track(S["EventId"].USER_PROFILE_EDIT_PROFILE_CLICK,{edit_profile_button_type:B?"complete":"incomplete"});d();o()};var G;if(Object(p["isSelf"])(s))G=n.a.createElement(_["d"],{className:"p-member_profile_buttons__button",onClick:q,type:B?"outline":"primary","data-qa":"member_profile_edit_btn"},P.t("Edit Profile"));else if(Object(p["isSlackbot"])(s))G=n.a.createElement(_["d"],{className:"p-member_profile_buttons__button",onClick:function e(){var a=P.t("remind",{ns:"chat_commands"});t({commandName:"/"+a});o()},type:"outline","data-qa":"member_profile_remind_btn"},P.t("Remind Me"));else if(!Object(p["isInvitedUser"])(s))if(m)if(Object(p["isActiveMember"])(s)&&C){var H=function e(t){return n.a.createElement(_["d"],{className:"p-member_profile_buttons__button",onClick:t,type:"outline","data-qa":"member_profile_call_btn",disabled:x&&E,"aria-label":x&&E?P.t("Go online to start a call"):P.t("Call {name}",{name:U})},T?n.a.createElement("div",{className:"display_flex p-member_profile_buttons__button_body"},n.a.createElement("div",{className:"p-member_profile_buttons__button_body_label"},P.t("Call")),n.a.createElement("div",{className:"p-member_profile_buttons__button_body_icon"},!t&&n.a.createElement(g["b"],{"data-qa":"call_icon_chevron_down",className:"p-classic_nav__model__button--chevron",type:"chevron_down",inline:true}))):P.t("Call"))};var W=x?n.a.createElement(O["a"],{tooltipLabel:P.t("Go online to start a call")}):null;var V=function e(t){return x&&E?n.a.createElement(y["c"],{tip:W},n.a.createElement("span",{className:"p-member_profile_buttons__button_disabled_container"},H(t))):H(t)};G=T?n.a.createElement(w["a"],{member:s,onMenuItemSelected:F,childFunctionComponent:V,cloggerContext:{entryPoint:j}}):V(function(){return F()})}else G=n.a.createElement(_["d"],{className:"p-member_profile_buttons__button",onClick:L,type:"outline","data-qa":"member_profile_files_btn"},P.t("View Files"));else G=n.a.createElement(_["d"],{className:"p-member_profile_buttons__button",onClick:function e(){v({memberId:s.id});o()},type:"outline","data-qa":"member_profile_profile_btn"},P.t("View Profile"));return n.a.createElement("div",{className:c()(i,"p-member_profile_buttons")},n.a.createElement(_["d"],{"aria-label":P.t("Message {name}",{name:Object(p["getMemberRealName"])(s)}),className:"p-member_profile_buttons__button",onClick:function e(){b({memberId:s.id});u();o()},type:"outline","data-qa":"member_profile_message_btn"},P.t("Message")),G,a)}D.displayName="MemberProfileButtons";D.defaultProps=M;var x=function e(t){return{isOffline:!Object(E["c"])(t),isCallsAllowedByAdmin:Object(C["e"])(t),isPhoneIntegrationAdminExperimentOn:Object(j["c"])(t),isIAP1Enabled:Object(I["e"])(t)}};var R={autoFillSlashCommand:function e(){return v["a"].apply(void 0,arguments)},openEditProfileModal:function e(){return h["a"].apply(void 0,arguments)},showFileList:function e(){return f["h"].apply(void 0,arguments)},showMemberProfile:function e(){return f["k"].apply(void 0,arguments)},openFileBrowser:function e(){return b["p"].apply(void 0,arguments)},startCallByMemberId:function e(){return T["a"].apply(void 0,arguments)},startImByMemberId:function e(){return m["startImByMemberId"].apply(void 0,arguments)}};t["a"]=Object(i["connect"])(x,R)(D)},function(e,t,a){"use strict";var r=a(1);var n=a.n(r);var i=a(13);var s=a.n(i);var o=a(12);var l=a(0);var c=a(6);var u=a(27);var d=a(17);var p=a(291);var m=a(23);var h=a(54);var v=a(348);var f=a(3098);var b=a.n(f);var g=new c["b"]("team");function _(e){return n.a.createElement(h["c"],{position:"bottom-right",tip:e,zIndex:"above_fs"},n.a.createElement(m["b"],{type:"question-circle"}))}_.displayName="renderTooltip";var y={className:void 0,memberIsAdmin:false,memberIsOwner:false};function O(e){var t=e.className,a=e.member,r=e.memberIsAdmin,i=e.memberIsOwner,o=e.team;var l=Object(v["a"])(),h=l.featureModernProfileFlexpane;if(!h)return null;var f=s()(t,"p-member_profile_restriction");var b=Object(d["isInvitedUser"])(a)&&g.t("This person hasn\u2019t finished signing up. They may receive messages via email.");if(Object(d["isExternal"])(a))return n.a.createElement("div",{className:f},n.a.createElement(p["b"],{className:"p-member_profile_restriction__team_icon",id:o.id,size:16}),n.a.createElement("span",{className:"p-member_profile_restriction__text"},Object(u["getTeamDisplayName"])(o)));if(Object(d["isDeleted"])(a))return n.a.createElement("div",{className:f},n.a.createElement(m["b"],{className:"p-member_profile_restriction__icon",type:"archived-channel"}),n.a.createElement("span",{className:"p-member_profile_restriction__text"},g.t("Deactivated account",{fallbackHash:"d57fa5164165105a1507c830ae06f7af8307870a",fallbackHashNs:"team"})));if(Object(d["isUltraRestricted"])(a))return n.a.createElement("div",{className:f},n.a.createElement(m["b"],{className:"p-member_profile_restriction__icon",type:Object(d["isInvitedUser"])(a)?"envelope-o":"single-channel-guest"}),n.a.createElement("span",{className:"p-member_profile_restriction__text"},Object(d["isInvitedUser"])(a)?g.t("Invited guest",{fallbackHash:"6fcd1092947f3972caf7bce4f6ffa2d7662431c8",fallbackHashNs:"team"}):g.t("Single-Channel Guest")),_(b||g.t("Single-Channel Guests see a partial directory and can only access messages and files from selected channels.")));if(Object(d["isRestricted"])(a))return n.a.createElement("div",{className:f},n.a.createElement(m["b"],{className:"p-member_profile_restriction__icon",type:Object(d["isInvitedUser"])(a)?"envelope-o":"restricted-user"}),n.a.createElement("span",{className:"p-member_profile_restriction__text"},Object(d["isInvitedUser"])(a)?g.t("Invited guest",{fallbackHash:"6fcd1092947f3972caf7bce4f6ffa2d7662431c8",fallbackHashNs:"team"}):g.t("Multi-Channel Guest")),_(b||g.t("Multi-Channel Guests see a partial directory and can only access messages and files from selected channels.")));if(i)return n.a.createElement("div",{className:f},n.a.createElement("span",{className:"p-member_profile_restriction__text"},g.t("Owner of {teamName}",{teamName:Object(c["q"])(Object(u["getTeamDisplayName"])(o))})));if(r)return n.a.createElement("div",{className:f},n.a.createElement("span",{className:"p-member_profile_restriction__text"},g.t("Workspace Admin")));if(Object(d["isInvitedUser"])(a))return n.a.createElement("div",{className:f},n.a.createElement(m["b"],{className:"p-member_profile_restriction__icon",type:"envelope-o"}),n.a.createElement("span",{className:"p-member_profile_restriction__text"},g.t("Invited member",{fallbackHash:"c4649618a3f5b67c775775107529f167c8d739e5",fallbackHashNs:"team"})),_(b));return null}var k=function e(t,a){var r=a.member;return{memberIsAdmin:Object(d["isAdmin"])(t,r),memberIsOwner:Object(d["isOwner"])(t,r)}};O.defaultProps=y;t["a"]=Object(o["connect"])(k)(O)},function(e,t,a){"use strict";var r=a(1);var n=a.n(r);var i=a(0);var s=a(6);var o=a(27);var l=a(2425);var c=a.n(l);var u=new s["b"]("unavailable_channel");var d={memberTeam:void 0};function p(e){var t=e.memberTeam;return n.a.createElement("div",{className:"p-member_profile_card__special_text"},u.rt("{teamName} is making some changes to their workspace, so content and conversations shared with them are temporarily unavailable.",{teamName:n.a.createElement("strong",null,Object(o["getTeamDisplayName"])(t))}))}p.displayName="MemberProfileUnavailable";p.defaultProps=d;t["a"]=p},function(e,t,a){"use strict";var r=a(1);var n=a.n(r);var i=a(0);var s=a(6);var o=a(316);var l=a(348);var c=new s["b"]("team");var u={member:void 0};function d(e){var t=e.member;var a=Object(l["a"])(),r=a.featureModernProfileFlexpane;if(!r)return null;var i=c.t("To interact with a person from another organization, you need to be in at least one channel together.");return n.a.createElement("div",{className:"p-member_profile_card__special_text"},n.a.createElement("strong",null,c.rt("You don\u2019t share any channels with {memberName}.",{memberName:n.a.createElement(o["a"],{id:t.id})}))," ",i)}d.displayName="MemberProfileStranger";d.defaultProps=u;t["a"]=d},,function(e,t,a){"use strict";var r=a(2);var n=a.n(r);var i=a(18);var s=a(21);var o=a(26);var l=a(121);var c=a(148);var u=a(119);var d=a(1882);var p=a(1357);var m=a(34);var h=a(16);var v=6e4;var f=function e(t){var a=Object(o["d"])(t);if(Object(m["a"])()&&!Object(u["l"])(a))return Promise.resolve();return Object(o["b"])(t,Object(d["a"])({reason:"requestOfflineCounts"})).tap(function(){return Object(o["b"])(t,Object(c["resetReachedEnd"])())}).tap(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(o["b"])(t,Object(p["a"])(e))}).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var a=Object(r["compact"])(Object(r["concat"])(e.channels,e.groups));Object(o["b"])(t,Object(l["reconcileChannelAccess"])({channels:a}))}).catch(function(e){Object(h["a"])({state:a}).error("Failed to fetch offline users counts for "+t+": "+e)})};var b=Object(r["throttle"])(f,v,{trailing:false});var g=Object(i["b"])("Request offline users counts",function(e,t){return b(Object(s["b"])(t()))});g.meta={name:"requestOfflineCounts",key:"actionsRequestOfflineCountsRequestOfflineCounts",description:"Request offline users counts"};g.propTypes={};t["a"]=g;var _={fetchOfflineUsersCounts:f}},,function(e,t,a){"use strict";a.d(t,"b",function(){return f});a.d(t,"a",function(){return g});var r=a(88);var n=a.n(r);var i=a(0);var s=a(1433);var o=a(1403);var l=a(18);var c=a(106);var u=a(21);var d=a(549);var p=a(1883);var m=a(1322);function h(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function v(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?h(Object(a),true).forEach(function(t){n()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):h(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var f=Object(l["b"])("Runs a message action",function(e,t,a){e(Object(m["c"])());var r=v({},a,{type:d["a"].messageAction});return e(Object(o["c"])(r)).catch(function(){var t=function t(){return e(f(r))};var a=Object(s["a"])({onRetry:t});e(Object(c["enqueueToast"])({element:a}))})});f.meta={name:"runMessageAction",key:"appActionsStoreActionsRunMessageAction",description:"Runs a message action"};f.propTypes={actionId:i["default"].string.isRequired,appId:i["default"].string.isRequired,channelId:i["default"].string.isRequired,messageTs:i["default"].string.isRequired};var b=Object(l["b"])("Runs a global action",function(e,t,a){e(Object(m["c"])());var r=v({},a,{type:d["a"].globalAction});return e(Object(o["c"])(r)).catch(function(){var t=function t(){return e(b(r))};var a=Object(s["a"])({onRetry:t});e(Object(c["enqueueToast"])({element:a}))})});b.meta={name:"runGlobalAction",key:"appActionsStoreActionsRunGlobalAction",description:"Runs a global action"};b.propTypes={actionId:i["default"].string.isRequired,appId:i["default"].string.isRequired};var g=Object(l["b"])("Explicitly load app actions",function(e,t){var a=t();var r=Object(u["b"])(a);return Object(p["a"])(r)});g.meta={name:"loadAppActions",key:"appActionsStoreActionsLoadAppActions",description:"Explicitly load app actions"}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.d(t,"a",function(){return o});var r=a(94);var n=a(232);var i=a(588);var s=a(21);var o=Object(r["e"])("gets the SSO provider name",function(e,t){return e(Object(n["t"])()).then(function(a){var r=t();var n=Object(s["b"])(r);e(Object(i["m"])({teamId:n,ssoProvider:a.sso_provider}))}).catch(function(e){throw e})});o.meta={name:"loadSsoProvider",key:"componentsEnterpriseOrgLevelUserGroupsUtilityLoadSsoProviderLoadSsoProvider",description:"gets the SSO provider name"};var l=o},function(e,t,a){"use strict";var r=a(1);var n=a.n(r);var i=a(13);var s=a.n(i);var o=a(0);var l=a(518);var c=a(3169);var u=a.n(c);var d={inactive:false,dimension:34};var p=function e(t){var a=t.team,r=t.inactive,i=t.dimension;return n.a.createElement("div",{className:"p-ent_workspace_row_item"},n.a.createElement(l["a"],{entityType:"workspace",dimension:i,entityData:a,customClasses:s()("p-ent_workspace_row_item__icon",{"p-ent_workspace_row_item__icon--inactive":r})}),n.a.createElement("div",{className:"p-ent_workspace_row_item__text"},n.a.createElement("div",{className:"p-ent_workspace_row_item__name"},a.name),n.a.createElement("div",{className:"p-ent_workspace_row_item__domain"},a.domain+".slack.com")))};p.displayName="WorkspaceRowItem";p.defaultProps=d;t["a"]=p},function(e,t,a){"use strict";var r=a(2);var n=a.n(r);var i=a(0);var s=a(150);var o=a(345);var l=a(70);var c=a(18);var u=a(360);var d=a(25);var p=a(17);var m=a(80);var h=a(42);var v=a(16);var f=a(61);var b=a(893);var g=a(103);var _=a(195);var y=19e3;var O="TICKLE-MS";var k=25;var E=Object(_["a"])(1);var C=Date.now();var S=function(){if(!h["isDesktop"]||!Object(h["getScreen"])())return r["noop"];var e=["focus","mousedown","keydown"];var t=Object(h["getScreen"])().getCursorScreenPoint();return function(a){var r=Object(h["getScreen"])().getCursorScreenPoint();var n=Math.hypot(r.x-t.x,r.y-t.y)>k;var i=e.includes(a);if(n||i){C=Date.now();t=r}return C}}();Object(g["d"])({actions:[l["connected"]],sideEffect:function e(){C=Date.now()}});function w(e,t){if(!h["isDesktop"])return;var a=Object(f["c"])({getState:e});var r=Object(h["getDesktopState"])();var n=r&&r.app||{};var i=n.systemIdleStatus,s=n.systemLockedStatus;var o="treatment"===Object(m["getGroupForUser"])(e(),"tickle_frame");if((E||o)&&s){a.count("tickle3_idle_status_"+i);a.count("tickle3_locked_"+t)}o&&a.count("tickle3_since_activity",Date.now()-C)}var j=Object(c["b"])("Ping the message server if necessary",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.reason;var n=t();var i=Object(d["b"])(n);var c=Object(v["a"])({state:n});if(!i){c.info(O,"Skipping tickle because no user exists");return}S(r);if(!Object(l["isConnected"])(n))return;if(Object(p["getMemberManualPresence"])(i)===o["PRESENCE_AWAY"])return;var m=Date.now()-Object(s["g"])(n);if(m<y)return;e(Object(u["send"])({type:"tickle"})).then(function(){return w(t,r)}).catch(function(a){var r=a&&a.message===b["c"];if(!r){c.warn(O,"Send tickle event failed with error = "+a);return}c.warn(O,"Sending tickle event failed; will try again the next time we get reconnected");Object(l["promiseToHaveOpenWebSocket"])(t()).then(function(){c.info(O,"Retrying tickle event that failed earlier");e(Object(u["send"])({type:"tickle"})).then(function(){c.info(O,"Tickle sent successfully after retry")}).catch(function(e){c.warn(O,"Tickle retry failed with error: "+e)})})})});j.meta={name:"maybeTickleMS",key:"infraTickleMsMaybeTickleMS",description:"Ping the message server if necessary"};j.propTypes=i["default"].shape({reason:i["default"].string.isRequired});t["a"]=j},function(e,t,a){"use strict";var r=a(88);var n=a.n(r);var i=a(110);var s=a.n(i);var o=a(135);var l=a.n(o);var c=a(169);var u=a.n(c);var d=a(138);var p=a.n(d);var m=a(147);var h=a.n(m);var v=a(185);var f=a.n(v);var b=a(1);var g=a.n(b);var _=a(0);var y=a(2);var O=a.n(y);var k=a(9);var E=a(356);var C=a(564);var S=a(1311);var w=a(30);var j=a(6);var I=a(4993);var T=a.n(I);function A(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function N(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?A(Object(a),true).forEach(function(t){n()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):A(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var P=new j["b"]("admin");var M={entities:{channels:{includeArchived:false,includeRequired:true,includeExternallyShared:false}},allowEmptyQuery:true,returnMetadata:false,sort:{preferExactMatch:false,frecency:false,preferChannelsUserBelongsTo:true,flat:true}};var D={channelOptionsFilter:void 0,selectedChannel:null,classPrefix:null,selectId:null};var x=function(e){f()(t,e);function t(e){var a;s()(this,t);a=u()(this,p()(t).call(this,e));Object(w["a"])(h()(a),["renderEmptyStateMessage","processChannelSearchResults","renderSelectedOption"]);return a}l()(t,[{key:"getChannelSelectObject",value:function e(t){if(!t)return null;return{entity:t,label:Object(k["getName"])(t),value:t.id}}},{key:"processChannelSearchResults",value:function e(t){var a=[];var r=[];var n=this.props.channelOptionsFilter;t.forEach(function(e){n&&!n(e.entity)||(Object(k["isPrivateChannel"])(e.entity)?r.push(N({},e,{label:Object(k["getName"])(e.entity)})):a.push(N({},e,{label:Object(k["getName"])(e.entity)})))});var i=[];a.length&&i.push({label:P.t("Channels"),options:a});r.length&&i.push({label:P.t("Private Channels"),options:r});return Promise.resolve(i)}},{key:"renderEmptyStateMessage",value:function e(){return g.a.createElement("div",null,P.rt("No channels found"))}},{key:"renderOption",value:function e(t){var a="heading"===t.type;if(a)return t.label;var r=Object(y["get"])(t,"entity.id");return g.a.createElement(C["a"],{channelId:r})}},{key:"renderSelectedOption",value:function e(t){if(!t||!t.entity)return null;var a=Object(y["get"])(t,"entity.id");return g.a.createElement(S["a"],{channelId:a})}},{key:"render",value:function e(){var t=this.props,a=t.classPrefix,r=t.selectId,n=t.isDisabled,i=t.onChangeChannel,s=t.selectedChannel;return g.a.createElement(E["e"],{ariaLabel:"",className:"p-admin_settings_channel_select cursor_pointer nudge_left_2",classPrefix:a,emptyStateMessage:this.renderEmptyStateMessage,isDisabled:n,onOptionSelected:i,placeholderText:P.t("Choose a channel"),processOptions:this.processChannelSearchResults,renderOption:this.renderOption,searcherOptions:M,selectedOption:this.getChannelSelectObject(s),renderSelectedOption:this.renderSelectedOption,selectId:r,width:"100%"})}}]);return t}(b["PureComponent"]);x.displayName="AdminSettingsChannelSelect";x.defaultProps=D;t["a"]=x},function(e,t,a){"use strict";a.d(t,"a",function(){return i});var r=a(6);var n=new r["b"]("a11y");function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,a=e.isCurrent,r=e.hasNotifications,i=e.isStarred,s=e.isMuted,o=e.hasDraft;var l=function(){if(a&&r&&s&&i&&o)return n.t("current conversation, has notifications, muted, starred, has a draft message");if(!a&&r&&s&&i&&o)return n.t("has notifications, muted, starred, has a draft message");if(a&&!r&&s&&i&&o)return n.t("current conversation, muted, starred, has a draft message");if(!a&&!r&&s&&i&&o)return n.t("muted, starred, has a draft message");if(a&&r&&!s&&i&&o)return n.t("current conversation, has notifications, starred, has a draft message");if(!a&&r&&!s&&i&&o)return n.t("has notifications, starred, has a draft message");if(a&&!r&&!s&&i&&o)return n.t("current conversation, starred, has a draft message");if(!a&&!r&&!s&&i&&o)return n.t("starred, has a draft message");if(a&&r&&s&&!i&&o)return n.t("current conversation, has notifications, muted, has a draft message");if(!a&&r&&s&&!i&&o)return n.t("has notifications, muted, has a draft message");if(a&&!r&&s&&!i&&o)return n.t("current conversation, muted, has a draft message");if(!a&&!r&&s&&!i&&o)return n.t("muted, has a draft message");if(a&&r&&!s&&!i&&o)return n.t("current conversation, has notifications, has a draft message");if(!a&&r&&!s&&!i&&o)return n.t("has notifications, has a draft message");if(a&&!r&&!s&&!i&&o)return n.t("current conversation, has a draft message");if(!a&&!r&&!s&&!i&&o)return n.t("has a draft message");if(a&&r&&s&&i&&!o)return n.t("current conversation, has notifications, muted, starred");if(!a&&r&&s&&i&&!o)return n.t("has notifications, muted, starred");if(a&&!r&&s&&i&&!o)return n.t("current conversation, muted, starred");if(!a&&!r&&s&&i&&!o)return n.t("muted, starred");if(a&&r&&!s&&i&&!o)return n.t("current conversation, has notifications, starred");if(!a&&r&&!s&&i&&!o)return n.t("has notifications, starred");if(a&&!r&&!s&&i&&!o)return n.t("current conversation, starred");if(!a&&!r&&!s&&i&&!o)return n.t("starred");if(a&&r&&s&&!i&&!o)return n.t("current conversation, has notifications, muted");if(!a&&r&&s&&!i&&!o)return n.t("has notifications, muted");if(a&&!r&&s&&!i&&!o)return n.t("current conversation, muted");if(!a&&!r&&s&&!i&&!o)return n.t("muted");if(a&&r&&!s&&!i&&!o)return n.t("current conversation, has notifications");if(!a&&r&&!s&&!i&&!o)return n.t("has notifications");if(a&&!r&&!s&&!i&&!o)return n.t("current conversation");return""}();if(t&&l)return n.t("{name} ({context})",{name:t,context:l});if(t)return t;return""}},function(e,t,a){"use strict";var r=a(18);var n=a(73);var i=a(20);var s=a(0);var o=a(16);var l=a(1166);var c=Object(r["b"])("log message to console (for debugging)",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelId,s=a.ts;var c=t();var u=Object(n["a"])(c,r,s);var d=Object(i["e"])(c,r);if(u){Object(o["a"])({getState:t}).warn(u);e(Object(l["e"])({message:u,modelObject:d}))}});c.meta={name:"logMessage",key:"actionsLogMessageLogMessage",description:"log message to console (for debugging)"};c.propTypes={channelId:s["default"].string.isRequired,ts:s["default"].string.isRequired};t["a"]=c},function(e,t,a){"use strict";a.d(t,"a",function(){return n});var r=a(1556);function n(e){return Object(r["a"])(e,function(e){return"A"===e.nodeName})}},function(e,t,a){"use strict";var r=a(196);var n=a.n(r);var i=a(110);var s=a.n(i);var o=a(135);var l=a.n(o);var c=a(169);var u=a.n(c);var d=a(138);var p=a.n(d);var m=a(147);var h=a.n(m);var v=a(185);var f=a.n(v);var b=a(1);var g=a.n(b);var _=a(12);var y=a(296);var O=a(2);var k=a.n(O);var E=a(0);var C=a(6);var S=a(35);var w=a(331);var j=a(243);var I=a(428);var T=new C["b"]("apps_browser");var A={isAppLauncher:false,refToForward:void 0,searchAppsIfNeeded:O["noop"],setSearchInput:O["noop"],isLoading:false,searchInput:"",className:""};var N=function(e){f()(t,e);function t(e){var a;s()(this,t);a=u()(this,p()(t).call(this,e));a.handleSearchInputChange=a.handleSearchInputChange.bind(h()(a));a.searchApps=a.searchApps.bind(h()(a));a.debouncedSearchApps=Object(O["debounce"])(a.searchApps,300);return a}l()(t,[{key:"handleSearchInputChange",value:function e(t){var a="";t.target.value&&(a=t.target.value);""===a.trim()&&(a=a.trim());if(a!==this.props.searchInput){this.props.setSearchInput({searchInput:a});this.debouncedSearchApps(a)}}},{key:"searchApps",value:function e(t){var a=this.props,r=a.clogger,n=a.isAppLauncher;t.length>0&&r.track("APP_INDEX_SEARCH");this.props.searchAppsIfNeeded({isAppLauncher:n,searchInput:t})}},{key:"render",value:function e(){var t=this.props,a=t.isLoading,r=t.searchInput,n=t.refToForward,i=t.className;return g.a.createElement(I["a"],{ref:n,className:i,placeholder:T.t("Search by name or category (e.g. productivity, sales)"),icon:"search",autoFocus:true,isLoading:a,onChange:this.handleSearchInputChange,value:r,"data-qa":"apps_browser__filter_input",inputAriaLabel:T.t("Search apps by name or category (e.g. productivity, sales)",{fallbackHash:"34fa4221db1bf66f5b9f47b2cb2e449c97fc453d"})})}}]);return t}(b["Component"]);N.displayName="AppsBrowserFilter";N.defaultProps=A;var P=function e(t){return{clogger:Object(S["a"])({state:t}),isLoading:Object(j["n"])(t),searchInput:Object(j["t"])(t)}};var M=function e(t){return Object(y["bindActionCreators"])({searchAppsIfNeeded:w["k"],setSearchInput:w["x"]},t)};var D=Object(_["connect"])(P,M)(N);t["a"]=g.a.forwardRef(function(e,t){return g.a.createElement(D,n()({},e,{refToForward:t}))})},function(e,t,a){"use strict";a.d(t,"a",function(){return s});a.d(t,"b",function(){return o});var r=a(28);var n=Object(r["b"])("TS.ui.needToBlockAtChannelKeyword");var i=Object(r["b"])("TS.ui.needToShowAtChannelWarning");var s=Object(r["b"])("TS.ui.showVersionInfo");var o=Object(r["b"])("TS.ui.teamSelectionChanged")},function(e,t,a){"use strict";var r=a(88);var n=a.n(r);var i=a(110);var s=a.n(i);var o=a(135);var l=a.n(o);var c=a(169);var u=a.n(c);var d=a(138);var p=a.n(d);var m=a(185);var h=a.n(m);var v=a(1);var f=a.n(v);var b=a(6);var g=a(0);var _=a(13);var y=a.n(_);var O=a(3535);var k=a.n(O);var E=new b["b"]("unread");var C={clientTheme:"light"};var S=function(e){h()(t,e);function t(e){var a;s()(this,t);a=u()(this,p()(t).call(this,e));a.state={slow:false};a.timer=null;return a}l()(t,[{key:"componentDidMount",value:function e(){var t=this;this.timer=setTimeout(function(){t.setState(function(){return{slow:true}})},5e3)}},{key:"componentWillUnmount",value:function e(){clearTimeout(this.timer)}},{key:"render",value:function e(){var t=this.props.clientTheme;var a=E.t("Loading messages...");var r=E.t("Still loading... sorry for the long wait!");var i=y()("p-message_container_loading",n()({},"p-message_container_loading--"+t,"light"!==t));return f.a.createElement("div",{className:i,"data-qa":"message_container_loading"},f.a.createElement("div",{className:"p-message_container_loading__msg"},this.state.slow?r:a))}}]);return t}(f.a.Component);S.displayName="MessageContainerLoading";S.defaultProps=C;t["a"]=S},function(e,t,a){"use strict";var r=a(2);var n=a.n(r);var i=a(1);var s=a.n(i);var o=a(0);var l=a(6);var c=a(24);var u=a(99);var d=a(3537);var p=a.n(d);var m=new l["b"]("threads");var h={tryAgain:r["noop"],"data-qa":"message_container_error",children:null};function v(e){var t=e.tryAgain,a=e["data-qa"],r=e.children;return s.a.createElement("div",{className:"p-message_container_error","data-qa":a},s.a.createElement("div",{className:"p-message_container_error__contents"},s.a.createElement("div",{className:"p-message_container_error__emoji"},s.a.createElement(u["b"],{text:":tropical_fish:",emojiSize:u["a"].LARGE})),s.a.createElement("p",{className:"p-message_container_error__msg"},r),s.a.createElement(c["d"],{type:"primary",onClick:t,"data-qa":a+"_try_again"},m.t("Try Again"))))}v.displayName="MessageContainerError";v.defaultProps=h;t["a"]=v},function(e,t,a){"use strict";a.d(t,"a",function(){return m});var r=a(2);var n=a.n(r);var i=a(6);var s=a(295);var o=a(95);var l=a(128);var c=a(383);var u=a(22);var d=new i["b"]("aria_msg_summary");function p(e){var t=e.isFirstMsgForDay,a=e.isLastMsgForDay,r=e.isToday,n=e.isYesterday,i=e.day;if(t&&!a){if(r)return d.t("First message from today.",{day:i});if(n)return d.t("First message from yesterday.",{day:i});return d.t("First message from {day}.",{day:i})}if(a&&!t){if(r)return d.t("Last message from today.",{day:i});if(n)return d.t("Last message from yesterday.",{day:i});return d.t("Last message from {day}.",{day:i})}if(r)return d.t("Message from today.",{day:i});if(n)return d.t("Message from yesterday.",{day:i});return d.t("Message from {day}.",{day:i})}function m(e){if(!e)return null;var t=[];var a=e.viewContext;var n=e.day.ts/1e3;var i=Object(o["a"])();var m=Object(o["a"])(i).subtract(1,"days");var h=Object(l["a"])(n,{returnMoment:true});var v=Object(c["a"])(i,h);var f=Object(c["a"])(m,h);var b=n&&Object(s["a"])(n,"{day_divider_pretty}");var g=!a||[u["MESSAGE_CONTAINERS"].MESSAGE_PANE,u["MESSAGE_CONTAINERS"].THREADS_FLEXPANE,u["MESSAGE_CONTAINERS"].THREADS_VIEW,u["MESSAGE_CONTAINERS"].UNREAD_VIEW].includes(a);var _=e.includeDate||e.isFirstMsgForDay||e.isLastMsgForDay||!g;_&&t.push(p({isFirstMsgForDay:g&&e.isFirstMsgForDay,isLastMsgForDay:g&&e.isLastMsgForDay,isToday:v,isYesterday:f,day:b}));e.isFirstUnreadMsg&&g&&t.push(d.t("First unread message."));e.isTombstone||t.push(d.t("{name} at {time}.",{name:e.name,time:e.time}));e.isEKMOrDLPTombstone&&t.push(e.name);e.channelName&&!g&&t.push(d.t("In {channel}.",{channel:e.channelName}));t.push(e.text);e.reactionCount>0&&!e.isTombstone&&t.push(d.t("{count, plural, =1 {# reaction} other {# reactions}}.",{count:e.reactionCount}));e.replyCount>0&&t.push(d.t("{count, plural, =1 {# reply} other {# replies}}.",{count:e.replyCount}));e.isStarred&&a!==u["MESSAGE_CONTAINERS"].STARS_FLEXPANE&&t.push(d.t("Message is starred."));e.isPinned&&a!==u["MESSAGE_CONTAINERS"].PINS_FLEXPANE&&t.push(d.t("Message is pinned."));e.isEdited&&t.push(d.t("Message is edited.",{note:"Part of the description for customers using screen readers: indicates that a message has been edited"}));e.attachmentCount>0&&t.push(d.t("{count, plural, =1 {# attachment} other {# attachments}}.",{count:e.attachmentCount}));e.attachmentTexts&&e.attachmentTexts.length>0&&(t=t.concat(e.attachmentTexts));return Object(r["unescape"])(t.join(" "))}},function(e,t,a){"use strict";var r=a(1);var n=a.n(r);var i=a(0);var s=a(109);var o=a(2);var l=a.n(o);var c=a(6);var u=a(210);var d=a(24);var p=a(1439);var m=new c["b"]("attachments");var h={isExpanded:false,onClick:o["noop"],attachmentsOverLimitCount:0};var v=function e(t){var a=t.isExpanded,r=t.onClick,i=t.attachmentsOverLimitCount;var s=function e(){return n.a.createElement("b",null,a?m.t("Show fewer attachments",{fallbackHash:"82ec3619e636876bba549869a1e98fc21e6bee00"}):m.t("{count, plural, =1 {+ # more attachment} other {+ # more attachments}}",{count:i,fallbackHash:"61f00263e27b3ffe8a86b728c78ef71614ebe535"}))};return n.a.createElement(u["a"],{enabled:["feature_react_messages"]},n.a.createElement("div",{className:"c-message_attachment"},n.a.createElement(p["a"],null),n.a.createElement("div",{className:"c-message_attachment__body"},n.a.createElement(d["c"],{className:"c-message_attachment__over_limit_button",onClick:r},n.a.createElement("p",{className:"c-message_attachment__over_limit"},s())))))};v.displayName="MessageAttachmentOverLimitButton";v.defaultProps=h;t["a"]=Object(s["pure"])(v)},function(e,t,a){"use strict";var r=a(110);var n=a.n(r);var i=a(135);var s=a.n(i);var o=a(169);var l=a.n(o);var c=a(138);var u=a.n(c);var d=a(147);var p=a.n(d);var m=a(185);var h=a.n(m);var v=a(0);var f=a(1);var b=a.n(f);var g=a(12);var _=a(13);var y=a.n(_);var O=a(2);var k=a.n(O);var E=a(73);var C=a(11);var S=a(41);var w=a(104);var j=a(6);var I=a(152);var T=new j["b"]("message");var A={className:void 0,showThread:O["noop"],featureNewRepliesAfterBcast:false};var N=function(e){h()(t,e);function t(e){var a;n()(this,t);a=l()(this,u()(t).call(this,e));a.onClick=a.onClick.bind(p()(a));return a}s()(t,[{key:"onClick",value:function e(t){var a=this.props,r=a.channelId,n=a.threadTs,i=a.ts;t.preventDefault();this.props.showThread({channelId:r,threadTs:n,highlightTs:i})}},{key:"render",value:function e(){var t=this.props,a=t.ts,r=t.latestReply,n=t.featureNewRepliesAfterBcast;if(!n||!r)return null;if(r<=a)return null;var i=y()("c-message__broadcast_footer",this.props.className);return b.a.createElement(I["a"],{className:i,onClick:this.onClick},T.t("View newer replies"))}}]);return t}(f["PureComponent"]);N.displayName="ThreadBroadcastFooter";N.defaultProps=A;var P=function e(t,a){var r=a.channelId,n=a.threadTs;var i=Object(E["a"])(t,r,n);return{latestReply:Object(S["getLatestReply"])(i),featureNewRepliesAfterBcast:Object(C["isFeatureEnabled"])(t,"feature_new_replies_after_bcast")}};t["a"]=Object(g["connect"])(P,{showThread:w["m"]})(N)},function(e,t,a){"use strict";a.d(t,"a",function(){return d});var r=a(88);var n=a.n(r);var i=a(0);var s=a(31);var o=a(29);var l=a(489);function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function u(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(Object(a),true).forEach(function(t){n()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var d=Object(o["a"])("Adds a reminder for a message via API call",function(e,t,a){var r=l["a"].generateAndEnqueue(t());var n=u({},a,{client_token:r});return e(Object(s["a"])({method:"reminders.addFromMessage",args:n}))});d.meta={name:"addReminderForMessage",key:"fetchersMessageActionsApiAddReminderForMessage",description:"Adds a reminder for a message via API call"};d.propTypes={time:i["default"].oneOf(["In 20 minutes","In 1 hour","In 3 hours","Tomorrow","Next week","Custom"]).isRequired,message_channel:i["default"].string.isRequired,message_ts:i["default"].string.isRequired,respond_in_channel:i["default"].bool}},function(e,t,a){"use strict";a.d(t,"a",function(){return o});var r=a(580);var n=a(819);var i=a(73);var s=a(1818);function o(e,t){return function(a,o){var l=Object(i["a"])(o(),e,t);if(!l)return;a(Object(r["a"])({channelId:e,ts:t}));a(Object(n["d"])(l,t));var c=true;a(Object(s["a"])({channelId:e,msg:l,resent:c}))}}},function(e,t,a){"use strict";a.d(t,"a",function(){return r});function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isPinned,a=e.isStarred,r=e.isEphemeral,n=e.isBroadcast,i=e.isCustomResponse,s=e.isSliHighlight;if(n)return"broadcast";if(t)return"pinned";if(a)return"starred";if(r)return"ephemeral";if(i)return"custom_response";if(s)return"sli_highlight";return}},function(e,t,a){"use strict";var r=a(110);var n=a.n(r);var i=a(135);var s=a.n(i);var o=a(169);var l=a.n(o);var c=a(138);var u=a.n(c);var d=a(185);var p=a.n(d);var m=a(1);var h=a.n(m);var v=a(0);var f=a(13);var b=a.n(f);var g=a(590);var _=a(521);var y=a(838);var O=a(433);var k=a(515);var E=a(862);var C=a(2398);var S=a(445);var w=a(1189);var j=a(750);var I=a(1150);var T=a(1299);var A=a(3617);var N=a.n(A);var P={avatarSize:24,className:void 0,flexOrigin:void 0,timestampClickable:false,timestampFull:true,timestampRelative:false,blocksContainerContext:void 0,footer:true};var M=function(e){p()(t,e);function t(){n()(this,t);return l()(this,u()(t).apply(this,arguments))}s()(t,[{key:"render",value:function e(){var t=this.props,a=t.avatarSize,r=t.className,n=t.flexOrigin,i=t.msg,s=t.timestampClickable,o=t.timestampFull,l=t.timestampRelative,c=t.blocksContainerContext,u=t.footer;return h.a.createElement(T["a"],{className:b()("c-message_kit__message","c-message_kit__contextual_message",r)},h.a.createElement(I["a"],{msg:i},h.a.createElement(j["a"],{light:h.a.createElement(g["a"],{msg:i,size:a})},h.a.createElement(_["a"],{msg:i}),"\xa0\xa0",h.a.createElement(y["a"],{msg:i,clickable:s,full:o,relative:l}),h.a.createElement("br",null),h.a.createElement(O["a"],{msg:i}),h.a.createElement(k["a"],{msg:i,blocksContainerContext:c}),h.a.createElement(w["a"],{msg:i}),h.a.createElement(S["b"],{msg:i}),h.a.createElement(E["a"],{msg:i}),u?h.a.createElement(C["a"],{flexOrigin:n,msg:i}):null)))}}]);return t}(m["PureComponent"]);M.displayName="ContextualMessage";M.defaultProps=P;t["a"]=M},function(e,t,a){"use strict";a.d(t,"a",function(){return o});var r=a(6);var n=new r["b"]("message");function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.currentUserId,a=e.pinnedBy,r=e.renderPinnedBy;if(a){if(a===t)return n.t("Pinned by you");return n.rt("Pinned by {member}",{member:r(a)})}return n.t("Pinned")}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.long,a=void 0!==t&&t,r=e.renderStarButton,i=e.isIAP1Enabled,s=e.featureDangerouslyGuardIATranslations;if(i&&s){if(a)return n.rt("<star>Added to your saved items</star>",null,r);return n.rt("<star>Saved</star>",null,r)}if(a)return n.rt("<star>Added to your starred items</star>",null,r);return n.rt("<star>Starred</star>",null,r)}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isPinned,a=e.isStarred,r=e.isEphemeral,o=e.isBroadcast,l=e.isCustomResponse,c=e.isSliHighlight,u=e.isSelfIm,d=e.isSlackbotIm,p=e.currentUserId,m=e.pinnedBy,h=e.renderPinnedBy,v=e.renderStarButton,f=e.renderHighlight,b=e.renderBroadcast,g=e.isIAP1Enabled,_=e.featureDangerouslyGuardIATranslations;if(r){if(!u&&!d)return n.t("Only visible to you");return null}if(o){if(t&&a)return n.rt("<a>Also sent to the channel</a> \u2219 {pinned} \u2219 {starred}",{pinned:i({currentUserId:p,pinnedBy:m,renderPinnedBy:h}),starred:s({renderStarButton:v,isIAP1Enabled:g,featureDangerouslyGuardIATranslations:_})},b);if(a)return n.rt("<a>Also sent to the channel</a> \u2219 {starred}",{starred:s({renderStarButton:v,isIAP1Enabled:g,featureDangerouslyGuardIATranslations:_})},b);if(t)return n.rt("<a>Also sent to the channel</a> \u2219 {pinned}",{pinned:i({currentUserId:p,pinnedBy:m,renderPinnedBy:h})},b);return n.rt("<a>Also sent to the channel</a>",null,b)}if(l){if(t&&a)return n.rt("{pinned} \u2219 {starred} \u2219 Custom response",{pinned:i({currentUserId:p,pinnedBy:m,renderPinnedBy:h}),starred:s({renderStarButton:v,isIAP1Enabled:g,featureDangerouslyGuardIATranslations:_})});if(a)return n.rt("{starred} \u2219 Custom response",{starred:s({long:true,renderStarButton:v,isIAP1Enabled:g,featureDangerouslyGuardIATranslations:_})});if(t)return n.rt("{pinned} \u2219 Custom response",{pinned:i({currentUserId:p,pinnedBy:m,renderPinnedBy:h})});return n.t("Custom response")}if(c){if(t&&a)return n.rt("{pinned} \u2219 {starred} \u2219 {highlight}",{highlight:f(),pinned:i({currentUserId:p,pinnedBy:m,renderPinnedBy:h}),starred:s({renderStarButton:v,isIAP1Enabled:g,featureDangerouslyGuardIATranslations:_})});if(a)return n.rt("{starred} \u2219 {highlight}",{highlight:f(),starred:s({long:true,renderStarButton:v,isIAP1Enabled:g,featureDangerouslyGuardIATranslations:_})});if(t)return n.rt("{pinned} \u2219 {highlight}",{highlight:f(),pinned:i({currentUserId:p,pinnedBy:m,renderPinnedBy:h})});return n.rt("{highlight}",{highlight:f()})}if(t&&a)return n.rt("{pinned} \u2219 {starred}",{pinned:i({currentUserId:p,pinnedBy:m,renderPinnedBy:h}),starred:s({renderStarButton:v,isIAP1Enabled:g,featureDangerouslyGuardIATranslations:_})});if(t)return i({currentUserId:p,pinnedBy:m,renderPinnedBy:h});if(a)return s({long:true,renderStarButton:v,isIAP1Enabled:g,featureDangerouslyGuardIATranslations:_});return null}},function(e,t,a){"use strict";var r=a(110);var n=a.n(r);var i=a(135);var s=a.n(i);var o=a(169);var l=a.n(o);var c=a(138);var u=a.n(c);var d=a(147);var p=a.n(d);var m=a(185);var h=a.n(m);var v=a(0);var f=a(1);var b=a.n(f);var g=a(12);var _=a(13);var y=a.n(_);var O=a(2);var k=a.n(O);var E=a(484);var C=a(54);var S=a(6);var w=a(23);var j=a(24);var I=a(145);var T=a(57);var A=new S["b"]("message");var N={isHovered:false,sliHighlight:null,onSliHighlightsDefaultFeedback:k.a.noop,onSliHighlightsSecondaryFeedbackOption:k.a.noop};var P=function(e){h()(t,e);function t(e){var a;n()(this,t);a=l()(this,u()(t).call(this,e));a.onSliHighlightsFeedbackDefaultPositive=a.onSliHighlightsFeedbackDefaultPositive.bind(p()(a));a.onSliHighlightsFeedbackDefaultNegative=a.onSliHighlightsFeedbackDefaultNegative.bind(p()(a));a.renderNegativeFeedbackMenu=a.renderNegativeFeedbackMenu.bind(p()(a));return a}s()(t,[{key:"onSliHighlightsFeedbackDefaultNegative",value:function e(){if(this.props.sliHighlight.feedback)return;this.props.onSliHighlightsDefaultFeedback(false)}},{key:"onSliHighlightsFeedbackDefaultPositive",value:function e(){if(this.props.sliHighlight.feedback)return;this.props.onSliHighlightsDefaultFeedback(true)}},{key:"renderFeedbackControls",value:function e(){var t=this.props,a=t.isHovered,r=t.sliHighlight;var n="default_positive"===r.feedback;if(a){var i=y()({"c-message__label__highlight_positive":true,"c-message__label__highlight_positive--active":n});var s=y()({"c-message__label__highlight_negative":true,"c-message__label__highlight_negative--inactive":n});return b.a.createElement("span",null,A.t("Is this helpful?"),b.a.createElement(C["c"],{tip:n?A.t("Thank you!"):A.t("This was helpful")},b.a.createElement(j["c"],{className:i,onClick:this.onSliHighlightsFeedbackDefaultPositive},b.a.createElement(w["b"],{type:"thumbs-up",size:"inherit",inline:true}))),b.a.createElement(C["c"],{tip:A.t("This wasn\u2019t helpful")},b.a.createElement(j["c"],{className:s,onClick:this.onSliHighlightsFeedbackDefaultNegative},b.a.createElement(w["b"],{type:"thumbs-down",size:"inherit",inline:true}))))}return b.a.createElement(I["a"],{text:this.props.sliHighlight.justification})}},{key:"renderNegativeFeedbackMenu",value:function e(t){var a=this;var r=this.props.sliHighlight.feedbackOptions;if(k.a.isEmpty(r))return null;return b.a.createElement(T["f"],t,k.a.map(r.negative,function(e){return b.a.createElement(T["b"],{key:e.args.ts,label:b.a.createElement(I["a"],{text:e.text,noLinking:true,showTooltips:false}),onSelected:function t(){return a.props.onSliHighlightsSecondaryFeedbackOption(e.args)}})}))}},{key:"renderNegativeHighlightLabel",value:function e(){return b.a.createElement("span",null,b.a.createElement("strong",null,A.t("What\u2019s not working about this highlight?"))," ",A.t("Let us know, and we\u2019ll adjust."),"\xa0",b.a.createElement(T["e"],{renderMenu:this.renderNegativeFeedbackMenu,position:"right",offsetX:0,offsetY:0},b.a.createElement(j["c"],{className:"c-message__label__feedback_dropdown btn_unstyle sk_highlight_accent"},A.t("Give Feedback")," ",b.a.createElement(w["b"],{type:"chevron-down",inline:true}))))}},{key:"renderPositiveHighlightLabel",value:function e(){return b.a.createElement("span",null,b.a.createElement("span",{className:"c-message__label__highlight_title"},A.t("Highlight")),(this.props.sliHighlight.justification||this.props.isHovered)&&" \u2014 ",this.renderFeedbackControls())}},{key:"render",value:function e(){var t=this.props.sliHighlight;if(!t.feedback||"default_positive"===t.feedback)return this.renderPositiveHighlightLabel();return this.renderNegativeHighlightLabel()}}]);return t}(f["PureComponent"]);P.displayName="SliHighlightsMessageLabel";P.defaultProps=N;function M(e,t){var a=t.channelId,r=t.ts,n=t.sliHighlight;return{onSliHighlightsDefaultFeedback:function t(i){return e(Object(E["setFeedbackForHighlight"])({channelId:a,ts:r,feedback:i?"default_positive":"default_negative",leftFeedback:i,args:n.feedbackOptions[i?"default_positive":"default_negative"].args,requestId:n.requestId}))},onSliHighlightsSecondaryFeedbackOption:function t(i){return e(Object(E["setFeedbackForHighlight"])({channelId:a,ts:r,feedback:"negative",leftFeedback:true,args:i,requestId:n.requestId}))}}}t["a"]=Object(g["connect"])(null,M)(P)},function(e,t,a){"use strict";var r=a(196);var n=a.n(r);var i=a(245);var s=a.n(i);var o=a(1);var l=a.n(o);var c=a(0);var u=a(13);var d=a.n(u);var p=a(34);var m={className:void 0,flex:false};function h(e){var t=e.regionId,a=e.className,r=e.flex,i=s()(e,["regionId","className","flex"]);if(Object(p["a"])())return null;var o=d()(a,{"p-classic_nav__page_header__legacy_drag_region":true,flex_one:r,channel_header_drag_region:true});return l.a.createElement("div",n()({},i,{className:o,"data-region":t}))}h.displayName="LegacyPageHeaderDragRegion";h.defaultProps=m;t["a"]=h},function(e,t,a){"use strict";a.d(t,"a",function(){return o});var r=a(22);var n=a(176);var i=a(1454);var s=a(63);function o(e){var t=Object(i["a"])(e,{canPostInChannel:s["r"],canPostInThread:s["t"]});var a=t.filter(function(e){return Object(n["r"])(e)});return a.length>=r["MAX_NUM_COMPOSER_DRAFTS"]}},function(e,t,a){"use strict";a.d(t,"a",function(){return l});var r=a(278);var n=a.n(r);var i=a(18);var s=a(122);var o=a(450);var l=Object(i["b"])("Completes joiner onboarding",function(){var e=n()(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function e(a){while(1)switch(a.prev=a.next){case 0:t(Object(o["b"])(false));t(Object(o["c"])(false));t(Object(s["c"])({onboarding_complete:true,seen_welcome_2:true}));case 3:case"end":return a.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());l.meta={name:"completeJoinerOnboarding",key:"onboardingStoreThunksCompleteJoinerOnboardingCompleteJoinerOnboarding",description:"Completes joiner onboarding"}},function(e,t,a){"use strict";var r=a(1379);var n=a(187);var i={},s=i.getRouteParams;function o(e){if(!Object(n["g"])(e))return;var t=s(e);var a=t.entityId;var i=t.draftId;return a&&Object(r["a"])(i)}t["a"]=o},function(e,t,a){"use strict";a.d(t,"a",function(){return C});var r=a(110);var n=a.n(r);var i=a(135);var s=a.n(i);var o=a(169);var l=a.n(o);var c=a(138);var u=a.n(c);var d=a(147);var p=a.n(d);var m=a(185);var h=a.n(m);var v=a(1);var f=a.n(v);var b=a(0);var g=a(2);var _=a.n(g);var y=a(783);var O=a(886);var k=250;var E={oldest:void 0,latest:void 0,startTs:false,startTsOffset:0,highlightKey:void 0,requestHistory:g["noop"],reachedStart:true,reachedEnd:true,layout:void 0,isFileExpanding:false,onVisibleRowsChanged:g["noop"]};var C=function(e){h()(t,e);function t(e){var a;n()(this,t);a=l()(this,u()(t).call(this,e));a.onScroll=a.onScroll.bind(p()(a));a.setListRef=a.setListRef.bind(p()(a));a.loadAround=a.loadAround.bind(p()(a));a.loadPre=a.loadPre.bind(p()(a));a.loadPost=a.loadPost.bind(p()(a));a.focus=a.focus.bind(p()(a));a.onListScrolled=a.onListScrolled.bind(p()(a));a.debouncedOnListScrolled=Object(O["a"])(a.onListScrolled,150);a.list=null;a.layout=e.layout||new y["a"];a.layout.setAnchor(e.startTs);e.startTsOffset&&(a.layout.anchorOffset=e.startTsOffset);a.layout.setStickToBottom(e.reachedEnd);a.state={isLoading:false};return a}s()(t,[{key:"UNSAFE_componentWillReceiveProps",value:function e(t){if(!this.list)throw new Error("MessageList needs a ref to List");(t.startTs!==this.props.startTs||t.highlightKey&&t.highlightKey!==this.props.highlightKey)&&(t.timestamps===this.props.timestamps?this.list.scrollToKey(t.startTs,{lazy:true}):this.layout.setAnchor(t.startTs))}},{key:"componentDidUpdate",value:function e(t){!t.reachedEnd&&this.props.reachedEnd&&this.layout.setAnchor(false);var a=!!t.isFileExpanding&&!this.props.isFileExpanding;a?this.layout.setStickToBottom(false):this.layout.setStickToBottom(this.props.reachedEnd);this.updateVisibleRows()}},{key:"onListScrolled",value:function e(){this.updateVisibleRows()}},{key:"onScroll",value:function e(){this.layout.setAnchor(false);this.debouncedOnListScrolled()}},{key:"getScrollmark",value:function e(){if(!this.list)return null;var t=this.list.getScrollTop();var a=this.layout.shouldStickToBottom(t);var r=this.props.timestamps;var n=this.layout.findAnchor(r,r,t);var i=this.layout.getTop(n)-t;return{mark:n,offset:i,stickToBottom:a}}},{key:"setListRef",value:function e(t){this.list=t}},{key:"focus",value:function e(){this.list&&this.list.focus()}},{key:"loadAround",value:function e(){var t=this;if(this.state.isLoading)return false;var a=this.props,r=a.oldest,n=a.latest,i=a.reachedStart,s=a.reachedEnd,o=a.timestamps,l=a.startTs;if(s)return this.loadPre();if(i)return this.loadPost();var c=n||Object(g["first"])(o)||l;var u=r||Object(g["last"])(o)||l;var d=this.props.requestHistory({latest:c,oldest:u});if(d){d.finally(function(){return Promise.delay(k)}).then(function(){return t.setState(function(){return{isLoading:false}})});this.setState(function(){return{isLoading:"around"}})}return d}},{key:"loadPost",value:function e(){var t=this;if(this.state.isLoading)return false;var a=this.props,r=a.latest,n=a.reachedEnd,i=a.timestamps,s=a.startTs;if(n)return false;this.isLoading=true;var o=r||Object(g["last"])(i)||s;var l=this.props.requestHistory({oldest:o});if(l){l.finally(function(){return Promise.delay(k)}).then(function(){return t.setState(function(){return{isLoading:false}})});this.setState(function(){return{isLoading:"pre"}})}return l}},{key:"loadPre",value:function e(){var t=this;if(this.state.isLoading)return false;var a=this.props,r=a.oldest,n=a.reachedStart,i=a.timestamps,s=a.startTs;if(n)return false;var o=r||Object(g["first"])(i)||s;var l=this.props.requestHistory({latest:o});if(l){l.finally(function(){return Promise.delay(k)}).then(function(){return t.setState(function(){return{isLoading:false}})});this.setState(function(){return{isLoading:"pre"}})}return l}},{key:"updateVisibleRows",value:function e(){if(!this.list)return;var t=this.list.getVisibleRange(void 0,false),a=t.start,r=t.end;var n=this.list.getVisibleRange(void 0,true),i=n.start,s=n.end;this.props.onVisibleRowsChanged(this.props.timestamps.slice(a,r),this.props.timestamps.slice(i,s))}},{key:"render",value:function e(){var t=this.props,a=t.reachedStart,r=t.reachedEnd,n=t.timestamps;return this.props.listRenderer({reachedStart:a,reachedEnd:r,keys:n,layout:this.layout,onScroll:this.onScroll,loadAround:this.loadAround,loadPre:this.loadPre,loadPost:this.loadPost,ref:this.setListRef})}}]);return t}(v["PureComponent"]);C.displayName="MessageList";C.defaultProps=E},function(e,t,a){"use strict";var r=a(1);var n=a.n(r);var i=a(12);var s=a(13);var o=a.n(s);var l=a(0);var c=a(11);var u=a(150);var d=a(1453);var p=a(89);var m={className:void 0,featureOfflineMode:false,isOffline:false};function h(e){var t=e.className,a=e.featureOfflineMode,r=e.isOffline;if(a&&r)return n.a.createElement(d["a"],null);return n.a.createElement("div",{className:o()(t,"c-message_list__spinner")},n.a.createElement(p["a"],{size:"jumbo"}))}h.displayName="MessageListEmptyLoader";h.defaultProps=m;function v(e){return{featureOfflineMode:Object(c["isFeatureEnabled"])(e,"feature_offline_mode"),isOffline:!Object(u["c"])(e)}}t["a"]=Object(i["connect"])(v)(h)},function(e,t,a){"use strict";var r=a(1);var n=a.n(r);var i=a(12);var s=a(13);var o=a.n(s);var l=a(0);var c=a(34);var u=a(370);var d=a(283);var p=a(11);var m=a(150);var h=a(1453);var v={className:void 0,clientTheme:"light",featureOfflineMode:false,isOffline:false,theme:"light"};function f(e){var t=e.className,a=e.clientTheme,r=e.featureOfflineMode,i=e.isOffline,s=e.theme;if(r&&i)return n.a.createElement(h["a"],null);return n.a.createElement("div",{className:o()(t,"c-message_list__placeholders","c-message_list__placeholders--"+s,"c-message_list__placeholders--client-theme-"+a,{"c-message_list__placeholders--legacy":!Object(c["a"])()})})}f.displayName="MessageListInlineLoader";f.defaultProps=v;function b(e){return{clientTheme:Object(d["getClientTheme"])(e),featureOfflineMode:Object(p["isFeatureEnabled"])(e,"feature_offline_mode"),isOffline:!Object(m["c"])(e),theme:Object(u["a"])(e)}}t["a"]=Object(i["connect"])(b)(f)},function(e,t,a){"use strict";a.d(t,"a",function(){return g});var r=a(110);var n=a.n(r);var i=a(135);var s=a.n(i);var o=a(169);var l=a.n(o);var c=a(138);var u=a.n(c);var d=a(504);var p=a.n(d);var m=a(185);var h=a.n(m);var v=a(2);var f=a.n(v);var b=a(783);var g=function(e){h()(t,e);function t(e){var a;n()(this,t);a=l()(this,u()(t).call(this,e));f.a.isFunction(e.shouldExcludeFirstItemFromGravity)&&(a.shouldExcludeFirstItemFromGravity=e.shouldExcludeFirstItemFromGravity);return a}s()(t,[{key:"layout",value:function e(){p()(u()(t.prototype),"layout",this).call(this);if(this.totalHeight<this.containerHeight){var a=this.containerHeight-this.totalHeight;this.tops=f.a.mapValues(this.tops,function(e){return e+a});this.totalHeight=this.containerHeight}this.shouldExcludeFirstItemFromGravity&&this.shouldExcludeFirstItemFromGravity()&&this.keys.length>0&&(this.tops[f.a.first(this.keys)]=0)}}]);return t}(b["a"])},,function(e,t,a){"use strict";var r=a(18);var n=a(0);var i=a(129);var s=a(82);var o=a(17);var l=a(38);var c=a(751);var u=a(1949);var d=a(189);var p=a(6);var m=new p["b"]("files");var h=Object(r["b"])("build file summary for aria labels",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.fileId,n=a.hasFocus;var p=t();if(!(Object(c["isScreenReaderEnabled"])(p)||n))return;var h=Object(i["getFileById"])(p,r);if(!h)return;var v=h.created,f=h.timestamp,b=h.user;var g=v||f;var _=Object(s["isExternal"])(h)?Object(u["a"])(h):Object(s["getFileType"])(h);var y=Object(s["getFileDisplayName"])(h);var O=Object(o["getPrefCompliantMemberNameById"])(p,b);var k=Object(d["i"])(g,{shortenMonth:false,excludeYear:Object(d["h"])(g)});var E=Object(l["k"])(p,"time24");var C=Object(d["n"])(g,{do24hrTime:E});var S=m.t("{fileType} file {fileName} uploaded by {userName} on {dateStr} at {timeStr}",{fileType:_,fileName:y,userName:O,dateStr:k,timeStr:C});return S});h.meta={name:"makeFileSummary",key:"actionsMakeFileSummaryMakeFileSummary",description:"build file summary for aria labels"};h.propTypes={fileId:n["default"].string.isRequired,hasFocus:n["default"].bool};t["a"]=h},,,function(e,t,a){},function(e,t,a){"use strict";var r=a(196);var n=a.n(r);var i=a(218);var s=a.n(i);var o=a(110);var l=a.n(o);var c=a(169);var u=a.n(c);var d=a(138);var p=a.n(d);var m=a(135);var h=a.n(m);var v=a(185);var f=a.n(v);var b=a(0);var g=a(1);var _=a.n(g);var y=a(12);var O=a(2);var k=a.n(O);var E=a(11);var C=a(6);var S=a(33);var w=a(27);var j=a(57);var I=a(23);var T=a(3712);var A=a.n(T);var N=new C["b"]("member_directory");var P={isEnterprise:false,selectedFilter:void 0,onMenuItemSelected:O["noop"],workspaceName:void 0,enterpriseOrgName:void 0,externalWorkspaces:[],menuProps:void 0};var M={people:"people",orgMembers:"org_members",orgAdmins:"org_admins",workspaceMembers:"members",workspaceAdmins:"admins",bots:"bots",guests:"guests",deactivatedMembers:"deactivated"};var D=function(e){f()(t,e);h()(t,null,[{key:"menuSeparator",value:function e(){return{type:"separator"}}}]);function t(e){var a;l()(this,t);a=u()(this,p()(t).call(this,e));a.memberDirectoryStrings={people:N.t("Everyone"),org_members:N.t("All Members"),org_admins:N.t("Org Admins"),members:N.t("All Members"),admins:a.props.isEnterprise?N.t("Workspace Admins"):N.t("Admins"),bots:N.t("Bots"),guests:N.t("Guests"),deactivated:N.t("Deactivated accounts")};return a}h()(t,[{key:"getLabel",value:function e(t){return this.memberDirectoryStrings[t]}},{key:"getWorkspaceSectionLabel",value:function e(){var t=this.props,a=t.isEnterprise,r=t.externalWorkspaces,n=t.workspaceName;var i=r.length>0;if(a)return N.t("{workspaceName} (current workspace)",{workspaceName:n});return i?n:""}},{key:"buildMenuItemTemplate",value:function e(t){var a=this.props,r=a.selectedFilter,n=a.onMenuItemSelected;var i=_.a.createElement(I["b"],{type:"check-small",className:"p-member_directory_menu--icon"});var s="p-member_directory_menu--selected-item";return{label:this.getLabel(t),click:function e(){return n(t)},icon:r===t?i:null,className:r===t?s:""}}},{key:"buildWorkspaceFilterSection",value:function e(){var a=this.getWorkspaceSectionLabel();var r={type:"header",label:a};return[t.menuSeparator(),r,this.buildMenuItemTemplate(M.workspaceMembers),this.buildMenuItemTemplate(M.workspaceAdmins),this.buildMenuItemTemplate(M.guests),this.buildMenuItemTemplate(M.bots)]}},{key:"maybeBuildExternalWorkspaceSection",value:function e(){var a=this.props,r=a.externalWorkspaces,n=a.selectedFilter,i=a.onMenuItemSelected;var o=r.length>0;if(!o)return[];var l=_.a.createElement(I["b"],{type:"check-small",className:"p-member_directory_menu--icon"});var c="p-member_directory_menu--selected-item";var u=N.t("External Organizations");var d={type:"header",label:u};var p=r.map(function(e){var t=Object(w["getTeamId"])(e);return{label:Object(w["getTeamDisplayName"])(e),click:function e(){return i(t)},icon:n===t?l:null,className:n===t?c:""}});return[t.menuSeparator(),d].concat(s()(p))}},{key:"maybeBuildOrgFilterSection",value:function e(){var a=this.props,r=a.isEnterprise,n=a.enterpriseOrgName;if(!r)return[];var i={type:"header",label:n};return[t.menuSeparator(),i,this.buildMenuItemTemplate(M.orgMembers),this.buildMenuItemTemplate(M.orgAdmins)]}},{key:"render",value:function e(){var a=this.props.menuProps;var r=[].concat(s()(this.buildWorkspaceFilterSection()),s()(this.maybeBuildOrgFilterSection()));var i=[this.buildMenuItemTemplate(M.people)].concat(s()(r),s()(this.maybeBuildExternalWorkspaceSection()),[t.menuSeparator(),this.buildMenuItemTemplate(M.deactivatedMembers)]);return _.a.createElement(j["a"],n()({},a,{template:i}))}}]);return t}(g["PureComponent"]);D.displayName="MemberDirectoryMenu";var x=function e(t,a){var r=a.externalTeams;var n=Object(S["d"])(t);var i=Object(E["pageNeedsEnterprise"])(t);var s={workspaceName:Object(w["getTeamDisplayName"])(n),isEnterprise:i,externalWorkspaces:r.map(function(e){return Object(S["k"])(t,e)})};i&&(s.enterpriseOrgName=Object(S["g"])(t));return s};D.defaultProps=P;t["a"]=Object(y["connect"])(x)(D)},function(e,t,a){"use strict";a.d(t,"a",function(){return N});var r=a(110);var n=a.n(r);var i=a(135);var s=a.n(i);var o=a(169);var l=a.n(o);var c=a(138);var u=a.n(c);var d=a(147);var p=a.n(d);var m=a(185);var h=a.n(m);var v=a(1);var f=a.n(v);var b=a(2);var g=a.n(b);var _=a(30);var y=a(0);var O=a(6);var k=a(291);var E=a(357);var C=a(1036);var S=a(27);var w=a(2186);var j=a(877);var I=a(1699);var T=new O["b"]("search");var A={sharedTeams:{state:"ready",teams:[]},filters:[],filterSuggestions:[],clogSearchFilterAdded:b["noop"],clogSearchFilterRemoved:b["noop"],context:"channels"};var N=function(e){h()(t,e);function t(e){var a;n()(this,t);a=l()(this,u()(t).call(this,e));Object(_["a"])(p()(a),["loadOptions","filterOptions","renderOption"]);return a}s()(t,[{key:"onOrgFilterChange",value:function e(t,a){var r=this.props.filters;var n=!r.includes(t);n?this.props.clogSearchFilterAdded({filter_channel_team:t,filter_position:a}):this.props.clogSearchFilterRemoved({filter_channel_team:t,filter_position:a});this.props.toggleSearchOrgFilter({teamId:t,value:n})}},{key:"filterOptions",value:function e(t,a){var r=this.props.filters;return a.filter(function(e){return isFinite(e.score)&&!r.includes(e.value)})}},{key:"loadOptions",value:function e(t){var a=this.props.sharedTeams;var r=new C["b"](t);return Promise.resolve({options:Object(b["sortBy"])(a.teams.map(function(e){return{value:e.id,score:0===t.length?0:r.normalizeAndScore(Object(S["getTeamDisplayName"])(e))}}),"score")})}},{key:"renderOption",value:function e(t){var a=this.props.filters;var r=t.value;return f.a.createElement(f.a.Fragment,null,f.a.createElement(k["b"],{id:r,size:18,ariaHidden:"true",tabIndex:"-1"})," ",f.a.createElement("span",{className:"no_wrap overflow_ellipsis padding_left_50"},f.a.createElement(E["a"],{bold:a.includes(r),id:r})))}},{key:"render",value:function e(){var t=this;var a=this.props,r=a.sharedTeams,n=a.filters,i=a.filterSuggestions,s=a.context;var o="loading"===r.state;var l=r.teams&&r.teams.length>0;if(o||!l)return null;var c=i.map(function(e){return{value:e,checked:n.includes(e)}});return f.a.createElement(j["a"],{title:"people"===s?T.t("Members from",{fallbackHash:"439b67b7e64809a75c04b0c52ec368f1c67431cf"}):T.t("Shared with",{fallbackHash:"439b67b7e64809a75c04b0c52ec368f1c67431cf"})},f.a.createElement(I["a"],{namespace:this.props.namespace+"-org-filter",checkboxName:"external_org",placeholderText:T.t("Enter an external organization"),showMoreOptionsAriaLabel:T.t("More external organizations to filter by"),loadOptions:this.loadOptions,renderVisibleOption:this.renderOption,renderOption:this.renderOption,visibleOptions:c,onOptionChange:function e(a){t.onOrgFilterChange(a.value,c.indexOf(a))},onOptionAdd:function e(a){t.onOrgFilterChange(a.value,null)},filterOptions:this.filterOptions}))}}]);return t}(v["PureComponent"]);N.displayName="SearchOrgFilter";N.defaultProps=A},function(e,t,a){"use strict";var r=a(1);var n=a.n(r);var i=a(2);var s=a.n(i);var o=a(13);var l=a.n(o);var c=a(0);var u=a(6);var d=a(291);var p=a(357);var m=new u["b"]("search");function h(e){var t=e.filterWorkspaceOnly,a=e.currentTeam;return n.a.createElement("label",{className:l()("p-search_filter__checkbox_label",{"p-search_filter__checkbox_label--selected":t}),htmlFor:"search-channel-filter-workspace-only"},n.a.createElement("input",{type:"checkbox",className:"flex_shrink_none",checked:t,onChange:function t(a){return e.checkOnlySearchWorkspace(a)},id:"search-channel-filter-workspace-only"}),m.rt("Only search {currentTeamNameAndIcon}",{fallbackHash:"b326da02faf635a430ceb2bda81e5803542e7b21",currentTeamNameAndIcon:n.a.createElement(n.a.Fragment,null,n.a.createElement(d["b"],{className:"p-search_filter__workspace_only_team_icon",team:a,size:18})," ",n.a.createElement(p["a"],{id:a.id,bold:t}))}))}h.displayName="SearchLimitTeamFilterCheckbox";h.defaultProps={filterWorkspaceOnly:i["noop"],checkOnlySearchWorkspace:i["noop"]};t["a"]=h},function(e,t,a){"use strict";a.d(t,"a",function(){return l});var r=a(18);var n=a(0);var i=a(293);var s=a(786);var o=a(837);var l=Object(r["b"])("toggle the omniswitcher using command+k",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.key;Object(i["isSearchAutocompleteOpen"])(t())?e(Object(o["a"])()):e(Object(s["h"])({key:r}))});l.meta={name:"toggleFromQuickSwitcherCmd",key:"actionsUniversalSearchToggleFromToggleFromQuickSwitcherCmd",description:"toggle the omniswitcher using command+k"};l.propTypes={key:n["default"].string.isRequired}},function(e,t,a){"use strict";var r=a(0);var n=a(1);var i=a.n(n);var s=a(12);var o=a(38);var l=a(1148);var c=a(321);var u=a(1066);var d=a(16);var p=a(11);var m=a(921);var h=a(283);var v=a(90);var f={theme:"default_theme",custom:void 0,iaTheme:void 0,featureClassicNav:false,historyNavigationEnabled:false,clientTheme:"light",useIATopNav:false};var b=function e(t){var a=Object(u["g"])(Object(u["e"])(t.theme,t.custom,{clientTheme:t.clientTheme}));if(!a){t.logger.error("SIDEBAR_THEME",'Theme: could not identify theme "'+t.theme+'" ('+t.custom+")");return null}var r=Object(c["e"])(a,{featureClassicNav:t.featureClassicNav});var n=a.text_color;var s=Object(c["d"])(a.column_bg,25);var o=Object(c["d"])(a.column_bg,35);var l=t.historyNavigationEnabled?Object(c["m"])(n,.15):s;var d=t.historyNavigationEnabled?Object(c["m"])(n,.2):o;var p=Object(c["b"])(n,Object(c["m"])(n,.3));var m=Object(v["d"])(t.theme,t.iaTheme,a);var h=m.top_nav_bg;var f=m.top_nav_text;var b=Object(c["b"])(f,Object(c["m"])(f,.3));var g="\n\t\t.p-channel_sidebar {\n\t\t\tbackground: "+a.column_bg+";\n\t\t\tcolor: "+r+';\n\t\t}\n\n\t\t/* Cover up "p-channel_sidebar__icon" when the close button is focused */\n\t\t.p-channel_sidebar__close:focus {\n\t\t\tbackground: '+a.column_bg+";\n\t\t}\n\t\t.p-channel_sidebar__channel--selected + .p-channel_sidebar__close:focus {\n\t\t\tbackground: "+a.active_item+";\n\t\t}\n\n\t\t.p-channel_sidebar__channel,\n\t\t.p-channel_sidebar__link,\n\t\t.p-channel_sidebar__channel:link,\n\t\t.p-channel_sidebar__link:link,\n\t\t.p-channel_sidebar__channel:visited,\n\t\t.p-channel_sidebar__link:visited,\n\t\t.p-channel_sidebar__channel:hover,\n\t\t.p-channel_sidebar__link:hover {\n\t\t\tcolor: "+r+";\n\t\t}\n\t\t.p-channel_sidebar__section_heading--selected,\n\t\t.p-channel_sidebar__section_heading--selected:hover,\n\t\t.p-channel_sidebar__channel--selected,\n\t\t.p-channel_sidebar__link--selected,\n\t\t.p-channel_sidebar__channel--selected:link,\n\t\t.p-channel_sidebar__link--selected:link,\n\t\t.p-channel_sidebar__channel--selected:visited,\n\t\t.p-channel_sidebar__link--selected:visited,\n\t\t.p-channel_sidebar__channel--selected:hover,\n\t\t.p-channel_sidebar__link--selected:hover,\n\t\t.p-channel_sidebar__channel--selected + .p-channel_sidebar__close,\n\t\t.p-channel_sidebar__link--selected + .p-channel_sidebar__close {\n\t\t\tcolor: "+a.active_item_text+";\n\t\t}\n\n\t\t.p-channel_sidebar__channel:hover,\n\t\t.p-channel_sidebar__link:hover,\n\t\t.p-channel_sidebar__close_container:hover {\n\t\t\tbackground: "+a.hover_item+";\n\t\t}\n\n\t\t.p-channel_sidebar__header {\n\t\t\tcolor: "+r+';\n\t\t}\n\n\t\t/* Folders */\n\n\t\tinput[type="text"].p-channel_sidebar__folder_heading_label_rename {\n\t\t\tbackground: '+s+";\n\t\t\tcolor: "+r+';\n\t\t}\n\t\tinput[type="text"].p-channel_sidebar__folder_heading_label_rename:hover {\n\t\t\tbackground: '+o+";\n\t\t\tcolor: "+r+";\n\t\t}\n\n\t\t/* Override presence icons */\n\t\t.p-channel_sidebar__presence_icon.c-presence--active,\n\t\t.p-channel_sidebar__channel_icon_prefix--im-slackbot {\n\t\t\tcolor: "+a.active_presence+";\n\t\t}\n\t\t.p-channel_sidebar__channel--selected .p-channel_sidebar__presence_icon.c-presence,\n\t\t.p-channel_sidebar__channel--selected .p-channel_sidebar__channel_icon_prefix--im-slackbot {\n\t\t\tcolor: "+a.active_item_text+";\n\t\t}\n\t\t.p-channel_sidebar__presence_icon.c-presence--away {\n\t\t\tcolor: "+r+";\n\t\t}\n\n\t\t.p-channel_sidebar__section_heading--selected,\n\t\t.p-channel_sidebar__channel--selected,\n\t\t.p-channel_sidebar__channel--selected:hover,\n\t\t.p-channel_sidebar__link--selected,\n\t\t.p-channel_sidebar__link--selected:hover {\n\t\t\tbackground: "+a.active_item+";\n\t\t}\n\n\t\t.p-channel_sidebar__section-heading--browse:hover,\n\t\t.p-channel_sidebar__channel--selected .p-channel_sidebar__channel_icon_prefix,\n\t\t.p-channel_sidebar__channel--selected:hover .p-channel_sidebar__channel_icon_prefix,\n\t\t.p-channel_sidebar__link--selected:before,\n\t\t.p-channel_sidebar__link--selected:before,\n\t\t.p-channel_sidebar__channel--selected:after,\n\t\t.p-channel_sidebar__channel--selected:hover:after,\n\t\t.p-channel_sidebar__link--selected:after,\n\t\t.p-channel_sidebar__link--selected:after {\n\t\t\tcolor: "+a.active_item_text+";\n\t\t}\n\n\t\t.p-channel_sidebar__badge:not(.c-mention_badge--transparent),\n\t\t.p-channel_sidebar__banner--mentions {\n\t\t\tbackground: "+a.badge+";\n\t\t}\n\n\t\t.p-channel_sidebar .c-custom_scrollbar__thumb_vertical,\n\t\t.p-channel_sidebar .c-scrollbar__bar {\n\t\t\tbackground: "+Object(c["m"])(n,.45)+";\n\t\t}\n\n\t\t.client_channels_list_container.focusablesection:focus .sectionfocusindicator,\n\t\t.client_channels_list_container .focus-ring,\n\t\t.p-channel_sidebar.focusablesection:focus .sectionfocusindicator,\n\t\t#team_menu.focusablesection:focus .sectionfocusindicator {\n\t\t\tbox-shadow: "+p+";\n\t\t}\n\n\t\t.client_channels_list_container a:not(.c-link--focus-visible).focus-ring,\n\t\t.client_channels_list_container button:not(.c-button--focus-visible).focus-ring,\n\t\t.p-channel_sidebar__jumper.c-button--focus-visible:focus,\n\t\t.p-channel_sidebar__history_button.c-button--focus-visible:focus,\n\t\t.p-channel_sidebar__section_heading_label--clickable.c-button--focus-visible:focus,\n\t\t.p-channel_sidebar__section_heading_plus.c-button--focus-visible:focus,\n\t\t.p-channel_sidebar__channel.c-link--focus-visible:focus .p-channel_sidebar__name,\n\t\t.p-channel_sidebar__link.c-button--focus-visible:focus .p-channel_sidebar__name,\n\t\t.p-channel_sidebar__link.c-link--focus-visible:focus .p-channel_sidebar__name,\n\t\t.p-channel_sidebar__close.c-button--focus-visible:focus {\n\t\t\tbox-shadow: "+p+";\n\t\t}\n\n\t\t/** `opacity: 1` color overrides */\n\t\t.p-channel_sidebar__channel--unread:not(.p-channel_sidebar__channel--muted):not(.p-channel_sidebar__channel--suggested):not(.p-channel_sidebar__channel--selected) .p-channel_sidebar__name,\n\t\t.p-channel_sidebar__link--unread:not(.p-channel_sidebar__link--selected) .p-channel_sidebar__name,\n\t\t.p-channel_sidebar__link--invites:not(.p-channel_sidebar__link--dim) .p-channel_sidebar__name,\n\t\t.p-channel_sidebar__link--add-channel:not(.p-channel_sidebar__link--dim) .p-channel_sidebar__name,\n\t\t.p-channel_sidebar__link--add-apps:not(.p-channel_sidebar__link--dim) .p-channel_sidebar__name,\n\t\t.p-channel_sidebar__section_heading:not(.p-channel_sidebar__section_heading--selected) .p-channel_sidebar__section_heading_label--unreads,\n\t\t.p-channel_sidebar__quickswitcher:hover,\n\t\t.p-channel_sidebar--iap1 .p-channel_sidebar__section-heading--pages-drawer:hover {\n\t\t\tcolor: "+n+";\n\t\t}\n\n\t\t/** Navigation Bar **/\n\t\t.p-channel_sidebar__jumper {\n\t\t\tbackground: "+l+";\n\t\t}\n\t\t.p-channel_sidebar__jumper:hover {\n\t\t\tbackground: "+d+";\n\t\t}\n\t\t.p-channel_sidebar__history_button {\n\t\t\tbackground: "+l+";\n\t\t}\n\t\t.p-channel_sidebar__history_button:hover {\n\t\t\tbackground: "+d+";\n\t\t}\n\t\t.p-channel_sidebar__history_button--disabled:hover {\n\t\t\tbackground: "+l+";\n\t\t}\n\n\t\t/** Compose Button **/\n\t\t.p-channel_sidebar__compose_button,\n\t\t.p-ia__big_search_compose {\n\t\t\tbackground: "+(t.useIATopNav&&"light"===t.clientTheme?h:n)+";\n\t\t\tcolor: "+(t.useIATopNav&&"light"===t.clientTheme?f:a.column_bg)+";\n\t\t}\n\t\t.p-channel_sidebar__compose_button--disabled {\n\t\t\tbackground: "+r+";\n\t\t}\n\n\t\t.p-channel_sidebar__compose_button--iap1 {\n\t\t\tbackground-color: "+n+";\n\t\t\tcolor: "+a.column_bg+";\n\t\t}\n\n\t\t/** Classic Nav **/\n\t\t.p-classic_nav__team_header {\n\t\t\tbackground: "+a.column_bg+";\n\t\t\tcolor: "+n+";\n\t\t}\n\t\t.p-classic_nav__team_header:hover {\n\t\t\tbackground: "+a.menu_bg+";\n\t\t}\n\t\t.p-classic_nav__team_header__user__presence.c-presence--active {\n\t\t\tcolor: "+a.active_presence+";\n\t\t}\n\t\t.p-classic_nav__team_header__user__presence.c-presence--away {\n\t\t\tcolor: "+r+";\n\t\t}\n\t\t.p-classic_nav__team_header .c-link--focus-visible:focus,\n\t\t.p-classic_nav__team_header .c-button--focus-visible:focus,\n\t\t.p-channel_sidebar__static_list__item.c-virtual_list__item--focus:focus:after,\n\t\tdiv[aria-selected=true].p-channel_sidebar__static_list__item:focus:after {\n\t\t\tbox-shadow: "+p+";\n\t\t}\n\n\t\t/** Organization mode **/\n\t\t.p-channel_sidebar__organize_mode_menu {\n\t\t\tborder-color: "+Object(c["m"])(n,.11)+";\n\t\t}\n\t\t.p-channel_sidebar__organize_action {\n\t\t\tcolor: "+n+";\n\t\t\tbackground-color: "+Object(c["m"])(n,.11)+";\n\t\t}\n\t\t.p-channel_sidebar__organize_action:hover,\n\t\t.p-channel_sidebar__organize_action:active,\n\t\t.p-channel_sidebar__organize_action:focus {\n\t\t\tbackground-color: "+Object(c["m"])(n,.2)+";\n\t\t}\n\t\t.p-channel_sidebar__organize_action--primary {\n\t\t\tcolor: "+a.column_bg+";\n\t\t\tbackground-color: "+n+";\n\t\t}\n\t\t.p-channel_sidebar__organize_action--primary:hover,\n\t\t.p-channel_sidebar__organize_action--primary:active,\n\t\t.p-channel_sidebar__organize_action--primary:focus {\n\t\t\tbackground-color: "+Object(c["m"])(n,.89)+";\n\t\t}\n\n\t\t/** IA experiment (feature_iap1) **/\n\t\t.p-ia__sidebar_header {\n\t\t\tbackground: "+a.column_bg+";\n\t\t\tcolor: "+n+";\n\t\t}\n\t\t.p-ia__omniswitcher_button {\n\t\t\tcolor: "+n+";\n\t\t\tborder: 1px solid "+Object(c["j"])(n,a.column_bg,.12)+";\n\t\t}\n\t\t.p-ia__omniswitcher_button:hover {\n\t\t\tborder-color: "+Object(c["j"])(n,a.column_bg,.2)+";\n\t\t}\n\t\t.p-ia__sidebar_header__mode {\n\t\t\tbackground-color: "+Object(c["j"])(n,a.column_bg,.07)+";\n\t\t}\n\t\t.p-ia__sidebar_header .p-ia__sidebar_header__mode {\n\t\t\tbackground: "+a.column_bg+";\n\t\t}\n\n\t\t.p-ia__sidebar_header--top-nav .p-ia__sidebar_header__button,\n\t\t.p-ia__sidebar_header--top-nav .p-ia__sidebar_header__mode {\n\t\t\tbackground-color: initial;\n\t\t\tborder-color: "+Object(c["j"])(n,a.column_bg,.1)+";\n\t\t}\n\t\t.p-ia__sidebar_header--top-nav:hover {\n\t\t\tbackground-color: "+a.hover_item+";\n\t\t}\n\t\t.p-ia__nav__user__presence.c-presence--active,\n\t\t.p-ia__sidebar_header__user__presence.c-presence--active {\n\t\t\tcolor: "+a.active_presence+";\n\t\t}\n\t\t.p-ia__sidebar_header__user__presence.c-presence--away {\n\t\t\tcolor: "+r+";\n\t\t}\n\t\t.p-channel_sidebar--iap1 .p-channel_sidebar__banner--unreads {\n\t\t\tbackground: "+Object(c["j"])(n,a.column_bg,.9)+";\n\t\t\tcolor: "+a.column_bg+";\n\t\t}\n\t\t.p-channel_sidebar--iap1.p-channel_sidebar--top_banner_showing .p-channel_sidebar__list:before {\n\t\t\tbackground: linear-gradient(to bottom, "+a.column_bg+", "+Object(c["m"])(a.column_bg,0)+");\n\t\t}\n\t\t.p-channel_sidebar--iap1.p-channel_sidebar--bottom_banner_showing .p-channel_sidebar__list:after {\n\t\t\tbackground: linear-gradient(to top, "+a.column_bg+", "+Object(c["m"])(a.column_bg,0)+");\n\t\t}\n\t\t.p-channel_sidebar--iap1 .p-channel_sidebar__section_heading_plus:hover,\n\t\t.p-channel_sidebar--iap1 .p-channel_sidebar__section_heading_ellipsis:hover {\n\t\t\tbackground: "+Object(c["m"])(n,.1)+";\n\t\t}\n\t\t.p-channel_sidebar--iap1 .p-channel_sidebar__divider {\n\t\t\tborder-bottom: 1px solid "+Object(c["j"])(n,a.column_bg,.1)+";\n\t\t}\n\t\t.p-workspace--iap1 .p-workspace__sidebar:after {\n\t\t\tbackground: "+Object(c["j"])(n,a.column_bg,.1)+";\n\t\t}\n\n\t\t.p-top_nav {\n\t\t\tbackground: "+h+";\n\t\t\tcolor: "+f+";\n\t\t\tbox-shadow: 0 1px 0 0 "+Object(c["m"])(n,.1)+";\n\t\t}\n\t\t.p-top_nav__button,\n\t\t.p-top_nav__search,\n\t\t.p-top_nav__sidebar .p-channel_sidebar__history_button,\n\t\t.p-top_nav__sidebar .p-channel_sidebar__history_button--disabled:hover,\n\t\t.p-top_nav__search__clear {\n\t\t\tcolor: "+f+";\n\t\t}\n\t\t.p-top_nav__windows_icon {\n\t\t\tfill: "+f+";\n\t\t}\n\t\t.p-top_nav__search__clear:hover {\n\t\t\tcolor: "+Object(c["j"])(h,f,.2)+";\n\t\t}\n\t\t.p-top_nav__button:hover,\n\t\t.p-top_nav__sidebar .p-channel_sidebar__history_button:hover {\n\t\t\tbackground: "+Object(c["j"])(h,f,.9)+";\n\t\t}\n\t\t.p-top_nav__sidebar .p-channel_sidebar__history_button--disabled:hover {\n\t\t\tbackground: none;\n\t\t}\n\t\t.p-top_nav__button.c-button--focus-visible:focus,\n\t\t.p-top_nav__search.c-button--focus-visible:focus,\n\t\t.p-top_nav__sidebar .p-channel_sidebar__history_button.c-button--focus-visible:focus {\n\t\t\tbox-shadow: "+b+";\n\t\t}\n\t\t.p-top_nav__search {\n\t\t\tbackground: "+Object(c["j"])(h,f,.93)+";\n\t\t\tbox-shadow: inset 0 0 0 1px "+Object(c["j"])(h,f,.75)+";\n\t\t}\n\t\t.p-top_nav__search:hover {\n\t\t\tbackground: "+Object(c["j"])(h,f,.9)+";\n\t\t\tbox-shadow: inset 0 0 0 1px "+Object(c["j"])(h,f,.5)+";\n\t\t}\n\n\t\t.p-ia_edu_cta,\n\t\t.p-ia_edu_cta:hover {\n\t\t\tbackground: "+a.badge+";\n\t\t}\n\n\t\t.p-top_nav__help__badge {\n\t\t\tbackground: "+a.badge+";\n\t\t\tbox-shadow: 0 0 0 2px "+h+";\n\t\t}\n\t";return i.a.createElement("style",{className:"p-channel_sidebar__theme--"+t.theme},g)};b.displayName="Theme";b.defaultProps=f;var g=function e(t){var a=Object(o["k"])(t,"sidebar_theme");var r=Object(o["d"])(t);var n={};try{n=Object(l["a"])(Object(o["k"])(t,"ia_top_nav_theme"))}catch(e){}return{theme:a,custom:r,iaTheme:n,featureClassicNav:Object(p["isFeatureEnabled"])(t,"feature_classic_nav"),useIATopNav:Object(v["f"])(t),historyNavigationEnabled:Object(m["a"])(t),clientTheme:Object(h["getClientTheme"])(t),logger:Object(d["a"])({state:t})}};t["a"]=Object(s["connect"])(g)(b)},function(e,t,a){"use strict";var r=a(245);var n=a.n(r);var i=a(196);var s=a.n(i);var o=a(110);var l=a.n(o);var c=a(135);var u=a.n(c);var d=a(169);var p=a.n(d);var m=a(138);var h=a.n(m);var v=a(147);var f=a.n(v);var b=a(185);var g=a.n(b);var _=a(1);var y=a.n(_);var O=a(0);var k=a(12);var E=a(13);var C=a.n(E);var S=a(2);var w=a.n(S);var j=a(104);var I=a(237);var T=a(54);var A=a(6);var N=a(3341);var P=a.n(N);var M=new A["b"]("flexpane");var D=function(e){g()(t,e);function t(e){var a;l()(this,t);a=p()(this,h()(t).call(this,e));a.closeButtonRef=y.a.createRef();a.focus=a.focus.bind(f()(a));return a}u()(t,[{key:"focus",value:function e(){var t=this.closeButtonRef.current;t&&t.focus()}},{key:"render",value:function e(){var t=this.props,a=t.children,r=t.className,n=t.onOptionsClick,i=t.optionsHref,o=t.optionsIconType,l=t.optionsTooltipText,c=t.renderSecondary,u=t.clientTheme,d=t.isIAP1Enabled,p=t.renderAdditionalButtons;var m=n||i;var h="dark"===u?{backgroundStyle:"dark"}:{};var v=m||p?T["a"]:1e3;var f=c();var b=l||M.t("View options");return y.a.createElement("div",{className:C()("p-flexpane_header",r)},y.a.createElement("div",{className:"p-flexpane_header__primary"},y.a.createElement("div",{className:"p-flexpane_header__primary_content"},a),m&&y.a.createElement(T["c"],{delay:v,tip:b,position:d?"bottom":"top"},y.a.createElement(I["a"],s()({"aria-label":M.t("View options"),className:"p-flexpane_header__control",icon:o,href:i,onClick:n},h))),d&&p(),y.a.createElement(T["c"],{delay:v,tip:M.t("Close"),position:d?"bottom-right":"top-right"},y.a.createElement(I["a"],s()({"aria-label":M.t("Close Right Sidebar"),className:"p-flexpane_header__control",onClick:this.props.closeFlexpane,"data-qa":"close_flexpane",icon:"times",ref:this.closeButtonRef},h)))),f&&y.a.createElement("div",{className:"p-flexpane_header__secondary"},f))}}]);return t}(_["PureComponent"]);D.displayName="FlexpaneHeader";D.defaultProps={children:null,className:void 0,closeFlexpane:S["noop"],onOptionsClick:void 0,optionsHref:void 0,optionsIconType:"filters",optionsTooltipText:void 0,renderSecondary:S["noop"],isIAP1Enabled:false,renderAdditionalButtons:void 0};var x=Object(k["connect"])(null,{closeFlexpane:j["a"]})(function(e){var t=e.refToForward,a=n()(e,["refToForward"]);return y.a.createElement(D,s()({ref:t},a))});t["a"]=y.a.forwardRef(function(e,t){return y.a.createElement(x,s()({refToForward:t},e))})},function(e,t,a){"use strict";a.d(t,"a",function(){return v});var r=a(1);var n=a.n(r);var i=a(0);var s=a(2);var o=a.n(s);var l=a(6);var c=a(152);var u=a(23);var d=a(2473);var p=a.n(d);var m=new l["b"]("comments");var h={toggleList:s["noop"],commentCount:0,expanded:false};function v(e){var t=e.toggleList,a=e.commentCount,r=e.expanded;var i=r?m.t("Hide older comments",{fallbackHash:"f560b67c78f367354057065ac81410a1c310432b"}):m.t("See older comments");var s=r?"caret-down":"caret-right";return n.a.createElement("div",{className:"p-comment_list__toggle_container"},n.a.createElement(c["a"],{onClick:t,"aria-expanded":r},i),n.a.createElement("span",{className:"p-comment_list__toggle_count_button",role:"presentation",onClick:t},n.a.createElement(u["b"],{type:"comment-alt"}),n.a.createElement("span",{className:"p-comment_list__toggle_count"},a),n.a.createElement(u["b"],{type:s,className:"p-comment_list__toggle_caret"})))}v.displayName="CommentListToggle";v.defaultProps=h},function(e,t,a){"use strict";var r=a(4997);t["a"]=r["a"]},function(e,t,a){},function(e,t,a){"use strict";var r=a(88);var n=a.n(r);var i=a(0);var s=a(18);var o=a(349);var l=a(751);var c=a(35);var u=a(14);var d=a(22);var p=Object(s["b"])("Start editing the last message in a given channel",function(e,t){var a,r;var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=i.channelId,p=i.threadTs,m=i.viewContext,h=i.keyboardShortcut,v=i.hasKeyboardFocus;var f=t();var b=Object(l["isScreenReaderEnabled"])(f);var g=Object(o["getLastEditableMessageInChannel"])(f,{channelId:s,threadTs:p});var _=Object(c["a"])({state:f});if(!g)return false;_.track(u["EventId"].MSG_EDIT_LAST,{contexts:n()({},u["ClientEventKeys"].ui_context,(r={},n()(r,u["UiContextKeys"].action,u["UiAction"].EDIT),n()(r,u["UiContextKeys"].ui_properties,(a={},n()(a,u["UiPropertiesKeys"].view_context,m||d["MESSAGE_CONTAINERS"].MESSAGE_PANE),n()(a,u["UiPropertiesKeys"].key,h),n()(a,u["UiPropertiesKeys"].is_screen_reader_enabled,b),n()(a,u["UiPropertiesKeys"].client_has_keyboard_focus,v),a)),r))});e(Object(o["maybeStartEditingMessage"])({channelId:s,ts:g.ts,viewContext:m,scroll:true,keyboardShortcut:h,screenReaderIsEnabled:b,hasKeyboardFocus:v}));return true});p.meta={name:"editLastMessageInChannel",key:"actionsEditLastMessageInChannelEditLastMessageInChannel",description:"Start editing the last message in a given channel"};p.propTypes={channelId:i["default"].string.isRequired,threadTs:i["default"].string,viewContext:i["default"].string};t["a"]=p},function(e,t,a){"use strict";var r=a(110);var n=a.n(r);var i=a(135);var s=a.n(i);var o=a(169);var l=a.n(o);var c=a(138);var u=a.n(c);var d=a(147);var p=a.n(d);var m=a(185);var h=a.n(m);var v=a(1);var f=a.n(v);var b=a(12);var g=a(0);var _=a(1337);var y=a(1974);var O=a(2631);var k=a(384);var E=a(1213);var C=a(16);var S="GLOBAL-RXN-SHORTCUT";var w={threadTs:void 0};var j=function(e){h()(t,e);function t(e){var a;n()(this,t);a=l()(this,u()(t).call(this,e));a.state={forceOpen:false};a.onEmojiSelected=a.onEmojiSelected.bind(p()(a));a.onClose=a.onClose.bind(p()(a));return a}s()(t,[{key:"onClose",value:function e(){this.setState(function(){return{forceOpen:false}})}},{key:"onEmojiSelected",value:function e(t,a){if(!this.reactionKey){this.props.logger.warn(S,"No reaction key");return}this.props.changeReactionFromUserAction({key:this.reactionKey,name:a})}},{key:"startReactionPopoverForLastMessage",value:function e(){var t=this.props,a=t.channelId,r=t.threadTs,n=t.logger;var i;i=r?this.props.getLastMessageInThread(a,r):this.props.getLastMessageInChannel(a);if(!i){n.info(S,"Could not find last message");return}this.reactionKey=Object(k["b"])(i);n.info(S,"Opening reaction popover for "+this.reactionKey);this.setState(function(){return{forceOpen:true}})}},{key:"render",value:function e(){var t=this.props.children;var a=this.state.forceOpen;return f.a.createElement(E["a"],{showHandyReactions:true,customTrigger:true,forceOpen:a,onEmojiSelected:this.onEmojiSelected,onClose:this.onClose},f.a.createElement(N,null,t))}}]);return t}(v["PureComponent"]);j.displayName="MessageInputReactionPopover";j.defaultProps=w;function I(e){return{logger:Object(C["a"])({state:e})}}var T={getLastMessageInChannel:function e(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return function(e,t){return y["a"].apply(void 0,[t()].concat(a))}},getLastMessageInThread:function e(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return function(e,t){return O["a"].apply(void 0,[t()].concat(a))}},changeReactionFromUserAction:function e(){return _["a"].apply(void 0,arguments)}};var A=Object(b["connect"])(I,T,null,{withRef:true})(j);t["a"]=A;var N=function(e){h()(t,e);function t(){n()(this,t);return l()(this,u()(t).apply(this,arguments))}s()(t,[{key:"render",value:function e(){return this.props.children}}]);return t}(v["PureComponent"]);N.displayName="PassThrough"},function(e,t,a){"use strict";a.d(t,"a",function(){return s});var r=a(519);var n=a(2187);var i=a(123);function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.e,a=e.isMenuVisible,s=void 0!==a&&a;if(!t)return false;if(s)return false;if(Object(r["a"])(t.target))return false;if(!Object(n["a"])(t))return false;if(t&&t.keyCode===i["l"])return false;return true}},function(e,t,a){"use strict";var r=a(1);var n=a.n(r);var i=a(0);var s=a(13);var o=a.n(s);var l=a(6);var c=a(54);var u=a(23);var d=a(3742);var p=a.n(d);var m=new l["b"]("msg_input");var h={tooltip:null,border:false,padding:void 0,featureAnnounceOnly:false};var v=function e(t){var a=t.tooltip,r=t.border,i=t.padding,s=t.featureAnnounceOnly;if(!s)return null;var l=o()("p-message_input_announce_only_roadblock",{"p-message_input_announce_only_roadblock--border":r,"p-message_input_announce_only_roadblock--large_padding":"large"===i});return n.a.createElement("div",{className:l},n.a.createElement(u["b"],{type:"emoji-objects",className:"p-message_input_announce_only_roadblock__icon",inline:true}),m.t("Read only",{fallbackHash:"9b19a5a212deb29444cc1b420ad81703205848be"}),a&&n.a.createElement(c["c"],{position:"top-right",tip:a},n.a.createElement(u["b"],{type:"question-circle",className:"p-message_input_announce_only_roadblock__tip",inline:true})))};v.displayName="MessageInputAnnounceOnlyRoadblock";v.defaultProps=h;t["a"]=v},,function(e,t,a){"use strict";a.d(t,"a",function(){return l});var r=a(2);var n=a.n(r);var i=a(41);var s=a(73);function o(e,t,a){var r=Object(s["a"])(e,t,a);return r&&!Object(i["isTempMsg"])(r)&&!Object(i["isEphemeral"])(r)}function l(e,t,a){return Object(r["max"])(Object(r["filter"])(a,function(a){return o(e,t,a)}))}},function(e,t,a){"use strict";var r=a(88);var n=a.n(r);var i=a(110);var s=a.n(i);var o=a(135);var l=a.n(o);var c=a(169);var u=a.n(c);var d=a(138);var p=a.n(d);var m=a(147);var h=a.n(m);var v=a(185);var f=a.n(v);var b=a(1);var g=a.n(b);var _=a(0);var y=a(12);var O=a(13);var k=a.n(O);var E=a(2);var C=a.n(E);var S=a(30);var w=a(6);var j=a(192);var I=a(11);var T=a(97);var A=a(104);var N=a(5085);var P=a(3804);var M=a.n(P);function D(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function x(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?D(Object(a),true).forEach(function(t){n()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):D(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var R={description:null,isActive:false,handle:void 0,featureSonicUserGroups:false,onClick:E["noop"]};var F=new w["b"]("user_groups");var L=function(e){f()(t,e);function t(e){var a;s()(this,t);a=u()(this,p()(t).call(this,e));Object(S["a"])(h()(a),["onMenuClick","renderContextMenu"]);return a}l()(t,[{key:"onMenuClick",value:function e(t){var a=this.props.id;this.props.onClick(t,a)}},{key:"renderContextMenu",value:function e(t){return g.a.createElement(N["c"],{menuProps:t,groupId:this.props.id,onClick:this.onMenuClick})}},{key:"renderDescription",value:function e(){var t=this.props,a=t.description,r=t.isActive;if(!a)return null;var n=k()("overflow_ellipsis",{sk_foreground_max:!r});return g.a.createElement("div",{className:n},a)}},{key:"renderHandle",value:function e(){var t=this.props.handle;if(!t)return null;return g.a.createElement("span",{className:"p-user_group_row__handle"},t)}},{key:"renderName",value:function e(){var t=this.props,a=t.name,r=t.isActive,n=t.featureSonicUserGroups;if(!n)return null;var i=k()("black",{sk_foreground_max:!r});var s=r?a:F.t("{name} (Deactivated)",{name:a});return g.a.createElement("div",{className:i},s)}},{key:"render",value:function e(){var t=this.props,a=t.userCount,r=t.isActive,n=t.featureSonicUserGroups;if(!n)return null;var i=k()("p-user_group_row",{"p-user_group_row--inactive":!r});var s={renderMenu:this.renderContextMenu,className:i,isContextButtonVisible:this.props.canEditUserGroups()||this.props.canCreateAndDeleteUserGroups(),id:this.props.id,isActive:r};return g.a.createElement(N["a"],s,this.renderName(),this.renderDescription(),this.renderHandle(),g.a.createElement("span",{className:"p-user_group_row__count"},F.t("{userCount, plural, =1 {# member} other {# members}}",{userCount:a})))}}]);return t}(b["PureComponent"]);L.displayName="UserGroupRow";L.defaultProps=R;var U=function e(t,a){var r=a.id;var n=Object(j["f"])(t,r);var i={canEditUserGroups:function e(){return Object(T["c"])(t)},canCreateAndDeleteUserGroups:function e(){return Object(T["b"])(t)},featureSonicUserGroups:Object(I["isFeatureEnabled"])(t,"feature_sonic_user_groups")};if(!n)return i;return x({name:Object(T["h"])(n),description:Object(T["e"])(n),handle:Object(T["f"])(n),userCount:Object(T["l"])(n),isActive:Object(T["v"])(n)},i)};var B={showUserGroupDetails:A["o"]};t["a"]=Object(y["connect"])(U,B)(L)},function(e,t,a){"use strict";var r=a(1);var n=a.n(r);var i=a(0);var s=a(18);var o=a(298);var l=a(39);var c=a(11);var u=a(12);var d=a(2);var p=a(348);var m=a(1413);var h=a(1316);var v=a(117);var f=a(6);var b=a(22);var g=a(110);var _=a.n(g);var y=a(135);var O=a.n(y);var k=a(169);var E=a.n(k);var C=a(138);var S=a.n(C);var w=a(147);var j=a.n(w);var I=a(185);var T=a.n(I);var A=a(30);var N=a(104);var P=a(1450);var M=a(196);var D=a.n(M);var x=a(13);var R=a.n(x);var F=a(1451);var L=a(590);var U=a(521);var B=a(838);var q=a(1655);var G=a(1657);var H=a(2398);var W=a(433);var V=a(515);var K=a(445);var z=a(1299);var Q=a(2337);var Y=a(3615);var J=Object(F["a"])(P["a"]);var X={className:void 0,showSender:true,onFileClick:d["noop"],timestampClickable:true,timestampFull:true,timestampRelative:false,flexOrigin:"activity",flexOriginId:void 0,blocksContainerContext:void 0};var Z=function(e){T()(t,e);function t(){_()(this,t);return E()(this,S()(t).apply(this,arguments))}O()(t,[{key:"render",value:function e(){var t=this.props,a=t.className,r=t.msg,i=t.showSender,s=t.onFileClick,o=t.timestampClickable,l=t.timestampFull,c=t.timestampRelative,u=t.flexOrigin,d=t.flexOriginId,p=t.blocksContainerContext;var m=i&&n.a.createElement("div",{className:"c-message_kit__condensed_message_header"},n.a.createElement(L["a"],{msg:r,size:16}),"\xa0",n.a.createElement(U["a"],{msg:r,className:"c-message_kit__condensed_message_sender"}),n.a.createElement(B["a"],{msg:r,clickable:o,full:l,relative:c}));return n.a.createElement(z["a"],{className:R()("c-message_kit__message","c-message_kit__condensed_message",a)},m,n.a.createElement(W["a"],{className:"c-message_kit__condensed_message_text",msg:r,isSingleLine:true}),n.a.createElement(V["a"],{msg:r,blockLimit:1,blocksContainerContext:p}),n.a.createElement(K["b"],{msg:r,renderFile:function e(t){return n.a.createElement(J,D()({},t,{className:R()("c-message_kit__condensed_message_file",{"c-message_kit__condensed_message_file--isolated":!r.text}),onClick:s}))}}),n.a.createElement("div",{className:"c-message_kit__condensed_message_meta"},n.a.createElement(q["a"],{msg:r,className:"c-message_kit__condensed_message_reactions"}),n.a.createElement(G["a"],{msg:r,flexOrigin:u,flexOriginId:d})),n.a.createElement(H["a"],{msg:r,flexOrigin:u,flexOriginId:d}))}}]);return t}(r["PureComponent"]);Z.displayName="CondensedMessage";Z.defaultProps=X;var $=Z;var ee=a(144);var te=a(129);var ae=a(2710);var re={className:void 0,comment:void 0};var ne=function(e){T()(t,e);function t(){_()(this,t);return E()(this,S()(t).apply(this,arguments))}O()(t,[{key:"render",value:function e(){var t=this.props,a=t.comment,r=t.fileId,i=t.className;if(!a)return null;var s={user:a.user,ts:a.timestamp.toString(),subtype:"file_comment",comment:a,files:[r]};return n.a.createElement(ae["a"],{msg:s,className:i})}}]);return t}(r["PureComponent"]);ne.displayName="PinnedItemFileComment";ne.defaultProps=re;var ie=function e(t,a){var r=a.fileId,n=a.commentId;return{comment:Object(te["getFileCommentById"])(t,r,n)}};var se=Object(u["connect"])(ie)(ne);var oe=function(e){T()(t,e);function t(e){var a;_()(this,t);a=E()(this,S()(t).call(this,e));Object(A["a"])(j()(a),["onFileClick","renderMessage","renderFile","renderFileComment"]);return a}O()(t,[{key:"onFileClick",value:function e(t,a){if(!a)return;this.props.previewFile({fileId:a.id,flexOrigin:"details",flexOriginId:"pins"})}},{key:"renderFile",value:function e(t){if(!t||!t.id)return null;return n.a.createElement(P["a"],{file:t,onClick:this.onFileClick,showActions:false})}},{key:"renderFileComment",value:function e(t){if(!t||!t.id)return null;return n.a.createElement(se,{commentId:t.id,fileId:t.fileId})}},{key:"renderMessage",value:function e(t){if(!t||!t.ts)return null;return n.a.createElement($,{msg:t,timestampClickable:true,onFileClick:this.onFileClick,className:"p-pinned_items__message",flexOrigin:"details",flexOriginId:"pins",blocksContainerContext:ee["a"].pinned_items})}},{key:"render",value:function e(){var t=this.props.pin;if(t.type===o["PINNED_ITEM_TYPES"].FILE)return this.renderFile(t);if(t.type===o["PINNED_ITEM_TYPES"].FILE_COMMENT)return this.renderFileComment(t);return this.renderMessage(t)}}]);return t}(r["PureComponent"]);oe.displayName="PinnedItem";var le=function e(t){return{previewFile:function e(){return t(N["c"].apply(void 0,arguments))}}};var ce=Object(u["connect"])(null,le)(oe);var ue=new f["b"]("channel_details");var de={viewContext:b["MESSAGE_CONTAINERS"].MESSAGE_PANE,completedMessageAction:d["noop"],featureContextualMessageShortcuts:false};var pe=function e(t){var a=t.pin,i=t.channelId,s=t.unpinMessage,l=t.pinsRemove,c=t.completedMessageAction,u=t.viewContext,d=t.featureContextualMessageShortcuts;var m=Object(r["useCallback"])(function(){var e={channelId:i,reason:"pins-list-remove"};switch(a.type){case o["PINNED_ITEM_TYPES"].MESSAGE:e.ts=a.ts;break;case o["PINNED_ITEM_TYPES"].FILE:e.fileId=a.id;break;case o["PINNED_ITEM_TYPES"].FILE_COMMENT:e.fileCommentId=a.id;break;default:break}a.type===o["PINNED_ITEM_TYPES"].MESSAGE?s(e):l(e)},[a,i,s,l]);Object(r["useEffect"])(function(){return function(){d&&a&&c({viewContext:u,channelId:i,ts:a.ts})}},[i,c,d,a,u]);var h=Object(p["a"])(),f=h.featureM11nChannelDetails;if(!f)return null;return n.a.createElement(v["a"],{title:ue.t("Remove pinned item"),goButtonText:ue.t("Remove pinned item"),onGo:m,shouldReturnFocusAfterClose:!d},n.a.createElement("p",null,ue.t("Are you sure you want to remove this pinned item?")),n.a.createElement(ce,{pin:a}))};pe.displayName="PinnedItemRemoveConfirm";pe.defaultProps=de;var me={unpinMessage:function e(){return o["unpinMessage"].apply(void 0,arguments)},pinsRemove:function e(){return m["c"].apply(void 0,arguments)},completedMessageAction:function e(){return h["a"].apply(void 0,arguments)}};var he=Object(u["connect"])(null,me)(pe);a.d(t,"a",function(){return ve});var ve=Object(s["b"])("Toggle message pinned status, with a confirmation dialog before un-pinning",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.ts,i=a.channelId,s=a.viewContext;var u=t();if(Object(o["isMessagePinned"])(u,{ts:r,channelId:i})){var d=Object(o["getItemWithPinIdentifier"])(u,{type:o["PINNED_ITEM_TYPES"].MESSAGE,channel:i,ts:r});var p=Object(c["isFeatureEnabled"])(u,"feature_contextual_message_shortcuts");e(Object(l["openModal"])({element:n.a.createElement(he,{pin:d,channelId:i,viewContext:s,featureContextualMessageShortcuts:p})}))}else e(Object(o["pinMessage"])({ts:r,channelId:i}))});ve.meta={name:"togglePinWithUnpinConfirmation",key:"actionsUiTogglePinWithUnpinConfirmationTogglePinWithUnpinConfirmation",description:"Toggle message pinned status, with a confirmation dialog before un-pinning"};ve.propTypes={ts:i["default"].string.isRequired,channelId:i["default"].string.isRequired,viewContext:i["default"].string}},function(e,t,a){"use strict";var r=a(1);var n=a.n(r);var i=a(0);var s={includeAvatar:false};function o(e){var t=e.variation,a=e.includeAvatar;return n.a.createElement("div",{className:"p-search_filter__placeholder_suggestion"},a?n.a.createElement("div",{className:"p-search_filter__placeholder_avatar"}):null,n.a.createElement("div",{className:"p-search_filter__placeholder_name p-search_filter__placeholder_name--"+t}))}o.displayName="PlaceholderSuggestion";o.defaultProps=s;t["a"]=o},,,,function(e,t,a){"use strict";var r=a(1);var n=a.n(r);var i=a(0);var s=a(39);var o=a(18);var l=a(110);var c=a.n(l);var u=a(135);var d=a.n(u);var p=a(169);var m=a.n(p);var h=a(138);var v=a.n(h);var f=a(147);var b=a.n(f);var g=a(185);var _=a.n(g);var y=a(13);var O=a.n(y);var k=a(2);var E=a(6);var C=a(1235);var S=a(43);var w=a(24);var j=a(1027);var I=a(1292);var T=a(50);var A=a(108);var N=a(54);var P=a(89);var M=a(1361);var D=a(88);var x=a.n(D);var R=a(12);var F=a(30);var L=a(813);var U=a(261);var B=a(20);var q=a(788);var G=a(9);var H=a(87);var W=a(25);var V=a(63);var K=a(23);var z=a(166);var Q=new E["b"]("app_management_modal");var Y={"data-qa":"app_channel_list_item",canBeRemovedFromChannel:false};var J=function(e){_()(t,e);function t(e){var a;c()(this,t);a=m()(this,v()(t).call(this,e));a.handleRemove=a.handleRemove.bind(b()(a));return a}d()(t,[{key:"handleRemove",value:function e(){var t=this.props,a=t.channel.id,r=t.onRemove;r(a)}},{key:"render",value:function e(){var t=this.props,a=t.channel,r=t["data-qa"],i=t.canBeRemovedFromChannel;return n.a.createElement("li",{className:"p-app_management_modal__channel_list_item","data-qa":r},n.a.createElement(z["a"],{className:"flex_one",channel:a,inheritPresenceIconSize:true}),i&&n.a.createElement(w["c"],{className:"p-app_management_modal__channel_list_item_remove position_relative","aria-label":Q.t("Remove app from channel"),onClick:this.handleRemove,"data-qa":r+"_remove"},n.a.createElement(K["b"],{inline:true,type:"times-circle"})))}}]);return t}(r["PureComponent"]);J.displayName="AppChannelListItem";J.displayName="AppChannelListItem";J.defaultProps=Y;var X=J;var Z=a(196);var $=a.n(Z);var ee=a(245);var te=a.n(ee);var ae=a(645);var re=new E["b"]("app_management_modal");var ne=220;var ie=36;var se=28;var oe=200;var le={forExclusions:false,isMobile:false};var ce=function(e){_()(t,e);function t(e){var a;c()(this,t);a=m()(this,v()(t).call(this,e));Object(F["a"])(b()(a),["buildChannelOptions","optionsFetcher","setSelectorReference","scrollSelectorIntoView"]);return a}d()(t,[{key:"componentDidMount",value:function e(){if(this.selector){var t=this.selector.focusSelectInput;t&&t()}}},{key:"componentWillUnmount",value:function e(){clearTimeout(this.mobileKeyboardTimeout)}},{key:"setSelectorReference",value:function e(t){this.selector=t}},{key:"buildChannelOption",value:function e(t){return{label:n.a.createElement(z["a"],{className:"p-app_management_modal__channel_selector_item",channel:t,inheritPresenceIconSize:true}),value:t.id}}},{key:"buildChannelOptions",value:function e(t){return{options:t.map(this.buildChannelOption)}}},{key:"optionsFetcher",value:function e(t){var a=this.props,r=a.forExclusions,n=a.serviceId;return this.props.searchChannelsForApp({query:t,forExclusions:r,serviceId:n}).then(this.buildChannelOptions).tap(this.scrollSelectorIntoView)}},{key:"scrollSelectorIntoView",value:function e(){if(this.selector){var t=this.selector.select;t&&t.wrapper&&(this.mobileKeyboardTimeout=setTimeout(function(){t.wrapper.scrollIntoView()},this.props.isMobile?oe:0))}}},{key:"render",value:function e(){var t=this.props,a=t.serviceId,r=t.forExclusions,i=t.searchChannelsForApp,s=t.isMobile,o=te()(t,["serviceId","forExclusions","searchChannelsForApp","isMobile"]);var l=s?ie:se;return n.a.createElement(ae["a"],$()({},o,{ref:this.setSelectorReference,optionsFetcher:this.optionsFetcher,prefetchOptions:true,className:"p-app_management_modal__channel_selector_input",isAlwaysOpen:true,optionsListWidth:ne,optionsRowHeight:l,placeholder:re.t("Find a channel"),type:"short",usePlaceholderOption:false,wrapperClassName:"p-app_management_modal__channel_selector"}))}}]);return t}(r["PureComponent"]);ce.displayName="AppChannelListSelector";var ue={searchChannelsForApp:q["searchChannelsForApp"]};ce.defaultProps=le;var de=Object(R["connect"])(null,ue)(ce);function pe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function me(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(a),true).forEach(function(t){x()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):pe(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var he=new E["b"]("app_management_modal");var ve={channels:[],hiddenChannelCount:0,"data-qa":"app_channel_list",isMobile:false,forExclusions:false,canBeRemovedFromChannel:false};var fe=function(e){_()(t,e);function t(e){var a;c()(this,t);a=m()(this,v()(t).call(this,e));a.state={showChannelSelector:false};Object(F["a"])(b()(a),["handleAddChannel","toggleChannelSelector"]);return a}d()(t,[{key:"componentWillUnmount",value:function e(){clearTimeout(this.timeout)}},{key:"setSelectorInputReference",value:function e(t){this.selectorInput=t}},{key:"handleAddChannel",value:function e(t){var a=this.props.onAddChannel;a(t);this.toggleChannelSelector()}},{key:"toggleChannelSelector",value:function e(){this.setState(function(e){return{showChannelSelector:!e.showChannelSelector}})}},{key:"renderChannelSelector",value:function e(){var t=this.props,a=t.buttonText,r=t["data-qa"],i=t.isMobile,s=t.forExclusions,o=t.serviceId;var l=this.state.showChannelSelector;return n.a.createElement("div",{className:"position_relative"},n.a.createElement(w["d"],{className:"p-app_management_modal__channel_list_add",type:"outline",size:"small",onClick:this.toggleChannelSelector,"data-qa":r+"_button"},a),l&&n.a.createElement(de,{onChange:this.handleAddChannel,onOutsideClick:this.toggleChannelSelector,"data-qa":r+"_selector",isMobile:i,forExclusions:s,serviceId:o}))}},{key:"renderHiddenChannelCountText",value:function e(){var t=this.props,a=t.channels,r=t.hiddenChannelCount;if(a.length>0)return he.t("...and {hiddenChannelCount, plural, =1 {# other private conversation} other {# other private conversations}}",{hiddenChannelCount:r});return he.t("{hiddenChannelCount, plural, =1 {# private conversation} other {# private conversations}}",{hiddenChannelCount:r})}},{key:"renderListItems",value:function e(){var t=this.props,a=t.channels,r=t.emptyListText,i=t.hiddenChannelCount,s=t.canBeRemovedFromChannel,o=t.onRemoveChannel,l=t["data-qa"];if(0===a.length&&0===i)return n.a.createElement("li",{className:"p-app_management_modal__channel_list_item sk_foreground_high","data-qa":l+"_empty_message"},r);var c=Object(k["compact"])(a).map(function(e){return n.a.createElement(X,{key:e.id,channel:e,canBeRemovedFromChannel:s,onRemove:o,"data-qa":l+"_channel_"+e.id})});i>0&&c.push(n.a.createElement("li",{key:"0",className:"p-app_management_modal__channel_list_item","data-qa":l+"_hidden_channels_message"},this.renderHiddenChannelCountText()));return c}},{key:"render",value:function e(){var t=this.props,a=t.headerText,r=t["data-qa"];return n.a.createElement(L["a"],{className:"p-app_management_modal__card","data-qa":r},n.a.createElement(L["b"],{className:"p-app_management_modal__card_header"},n.a.createElement("strong",{className:"flex_one align_self_center margin_right_50"},a),this.renderChannelSelector()),n.a.createElement(L["c"],{className:"no_margin no_padding"},n.a.createElement("ul",{className:"no_margin p-app_management_modal__channel_list"},this.renderListItems())))}}]);return t}(r["PureComponent"]);fe.displayName="AppChannelList";var be=function e(t,a){return Object(U["a"])(Object(G["getDisplayName"])(t),Object(G["getDisplayName"])(a))};var ge=function e(t,a){return Object.keys(t).map(function(e){return Object(B["e"])(a,e)}).filter(function(e){return!Object(G["isArchived"])(e)&&!Object(G["isUnknown"])(e)}).sort(be)};var _e=function e(t,a){var r=a.forExclusions,n=a.serviceId,i=a.memberId;var s=Object(q["getAppPermissionsByServiceId"])(t,n),o=s.exclusionIds,l=s.hiddenChannelCount,c=s.privateChannelIds,u=s.publicChannelIds;if(r)return{channels:ge(o,t)};var d=Object(H["a"])(t);var p=Object(W["e"])(t,i);var m=Object(V["u"])(t,d,p);return{channels:ge(me({},u,{},c),t),hiddenChannelCount:l,canBeRemovedFromChannel:m}};fe.defaultProps=ve;var ye=Object(R["connect"])(_e)(fe);var Oe=a(286);var ke=function e(t){return n.a.createElement(n.a.Fragment,null,n.a.createElement(P["a"],{size:"small",className:"c-infinite_spinner--inline"}),n.a.createElement("span",{className:"c-infinite_spinner__loading_msg"},t.children))};var Ee=ke;var Ce=a(428);var Se=a(914);var we=a(219);var je=a(57);var Ie=a(11);var Te=a(524);var Ae=a(418);var Ne=a(17);var Pe=new E["b"]("app_management_modal");var Me={memberSecondaryName:""};var De=function(e){_()(t,e);function t(){c()(this,t);return m()(this,v()(t).apply(this,arguments))}d()(t,[{key:"renderIsYou",value:function e(){if(this.props.isYou)return n.a.createElement("span",null,Pe.t("(you)"));return null}},{key:"renderPrimaryName",value:function e(){return n.a.createElement("span",{className:"p-app_management_modal__member_list_primary_name"},this.props.memberPrimaryName," ",this.renderIsYou())}},{key:"renderSecondaryName",value:function e(){var t=this.props.memberSecondaryName;if(t)return n.a.createElement("span",{className:"p-app_management_modal__member_list_secondary_name"},t);return null}},{key:"render",value:function e(){if(this.props.isUnknown)return n.a.createElement(Te["a"],{type:"unknown"});if(this.props.isNonExistent)return n.a.createElement(Te["a"],{type:"non-existent"});return n.a.createElement("span",{className:"p-app_member_name"},this.renderPrimaryName(),n.a.createElement(Ae["a"],{memberId:this.props.memberId}),this.renderSecondaryName())}}]);return t}(r["PureComponent"]);De.displayName="AppMemberName";De.defaultProps=Me;function xe(e,t){var a=t.memberId;var r=Object(W["e"])(e,a);return{isYou:Object(Ie["getCurrentUserId"])(e)===a,isUnknown:Object(Ne["isUnknown"])(r),isNonExistent:Object(Ne["isNonExistent"])(r),memberPrimaryName:Object(Ne["getPrefCompliantMemberName"])(e,r,false,false),memberSecondaryName:Object(Ne["getMemberSecondaryName"])(e,r)}}var Re=Object(R["connect"])(xe)(De);var Fe=new E["b"]("app_management_modal");var Le={"data-qa":"app_member_list_item",onRevokeButtonClick:k["noop"],onViewUserPermissionsClick:k["noop"]};var Ue=function(e){_()(t,e);function t(e){var a;c()(this,t);a=m()(this,v()(t).call(this,e));Object(F["a"])(b()(a),["handleViewUserPermissionsClick","renderMenu"]);return a}d()(t,[{key:"handleViewUserPermissionsClick",value:function e(){var t=this.props,a=t.onViewUserPermissionsClick,r=t.userId,n=t.scopes;a(r,n)}},{key:"renderAvatar",value:function e(){var t=this.props.userId;return n.a.createElement(we["b"],{className:"p-app_management_modal__member_list_avatar",userId:t,size:36,isInteractive:false,showCard:false,showTooltip:false,tabIndex:"-1"})}},{key:"renderMenu",value:function e(t){var a=this.props,r=a.isYou,i=a.onRevokeButtonClick;return n.a.createElement(je["f"],t,n.a.createElement(je["b"],{"data-qa":this.props["data-qa"]+"_menu_permissions",onSelected:this.handleViewUserPermissionsClick,label:Fe.t("View permissions")}),r&&n.a.createElement(je["b"],{"data-qa":this.props["data-qa"]+"_menu_revoke",onSelected:i,label:Fe.t("Revoke authorization")}))}},{key:"renderMenuTrigger",value:function e(){return n.a.createElement(je["e"],{renderMenu:this.renderMenu,position:"bottom-right"},n.a.createElement(w["c"],{"data-qa":this.props["data-qa"]+"_menu_trigger"},n.a.createElement(K["b"],{type:"ellipsis"})))}},{key:"renderScopeInfo",value:function e(){var t=this.props.scopes;return n.a.createElement("div",null,n.a.createElement(S["a"],{className:"p-app_management_modal__member_list_scope_info","data-qa":this.props["data-qa"]+"_permissions_link",onClick:this.handleViewUserPermissionsClick},Fe.t("{scopeCount, plural, =1 {# permission} other {# permissions}} granted",{scopeCount:t.length})))}},{key:"renderUserName",value:function e(){var t=this.props.userId;return n.a.createElement(Re,{memberId:t})}},{key:"render",value:function e(){return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"p-app_management_modal__member_list_gutter"},this.renderAvatar()),n.a.createElement("div",{className:"p-app_management_modal__member_list_content"},this.renderUserName(),this.renderScopeInfo()),this.renderMenuTrigger())}}]);return t}(r["PureComponent"]);Ue.displayName="AppMemberListItem";Ue.displayName="AppMemberListItem";Ue.defaultProps=Le;var Be=function e(t,a){var r=a.userId;return{isYou:Object(Ie["getCurrentUserId"])(t)===r}};var qe=Object(R["connect"])(Be)(Ue);var Ge=new E["b"]("app_management_modal");var He={"data-qa":"app_member_list",memberQuery:"",modalBodyRef:void 0,onAppSearchUsers:k["noop"],onRevokeButtonClick:k["noop"],onViewUserPermissionsClick:k["noop"],totalResultsCount:0,userCount:0,useVirtualizedList:true};var We=300;var Ve=5;var Ke=function(e){_()(t,e);function t(e){var a;c()(this,t);a=m()(this,v()(t).call(this,e));Object(F["a"])(b()(a),["handleScroll","renderListItem","setListRef","setMemberQuery","handleScrollToTopButtonClick"]);a.state={searchValue:"",showScrollToTopButton:false};a.debouncedFetchMemberList=Object(k["debounce"])(a.fetchMemberList,We);return a}d()(t,[{key:"componentDidMount",value:function e(){this.fetchMemberList()}},{key:"getMemberListKeys",value:function e(){var t=this.props,a=t.memberResults,r=t.isLoading;var n=a.map(function(e){var t=e.user_id;return t});return r?n.concat("loading"):n}},{key:"setListRef",value:function e(t){this.list=t}},{key:"setMemberQuery",value:function e(t){var a=t.target.value;this.setState(function(){return{searchValue:a}});this.debouncedFetchMemberList(a)}},{key:"fetchMemberList",value:function e(t,a){var r=this.props,n=r.onAppSearchUsers,i=r.serviceId;n({serviceId:i,query:t,nextPage:a})}},{key:"handleScroll",value:function e(t){var a=t.scrollTop;var r=this.props,n=r.isLoading,i=r.memberResults,s=r.totalResultsCount,o=r.memberQuery;var l=this.state.showScrollToTopButton;a>0&&!l?this.setState(function(){return{showScrollToTopButton:true}}):0===a&&l&&this.setState(function(){return{showScrollToTopButton:false}});if(n)return;var c=i.length;if(c===s)return;var u=this.list&&this.list.getVisibleRange&&this.list.getVisibleRange().end||0;if(c-u>Ve)return;this.fetchMemberList(o,true)}},{key:"handleScrollToTopButtonClick",value:function e(){this.props.modalBodyRef.scrollTo(0,0)}},{key:"renderBody",value:function e(){return n.a.createElement(L["c"],{className:"no_margin no_padding"},n.a.createElement("ul",{className:"p-app_management_modal__card_list"},this.renderListItems(),this.renderScrollToTopButton()))}},{key:"renderEmptyItem",value:function e(){return n.a.createElement("li",{key:"empty_message",className:"p-app_management_modal__member_list_item p-app_management_modal__member_list_item--empty_message","data-qa":this.props["data-qa"]+"_empty_message"},Ge.t("No matching members found."))}},{key:"renderHeader",value:function e(){var t=this.props,a=t.memberQuery,r=t.totalResultsCount,i=t.userCount;var s=Ge.t("Member Results");a?r&&(s=Ge.t("{totalResultsCount} Member Results",{totalResultsCount:r})):s=Ge.t("{userCount, plural, =1 {# Member} other {# Members}}",{userCount:i});return n.a.createElement(L["b"],{className:"p-app_management_modal__card_header"},n.a.createElement("strong",{className:"flex_one align_self_center margin_right_50","data-qa":this.props["data-qa"]+"_count"},s),n.a.createElement(Ce["a"],{className:"p-app_management_modal__member_search","data-qa":this.props["data-qa"]+"_search",icon:"search",onChange:this.setMemberQuery,placeholder:Ge.t("Search members"),value:this.state.searchValue}))}},{key:"renderListItem",value:function e(t){var a=this.props.memberResults;if(t===a.length)return this.renderLoadingItem();var r=a[t];return this.renderMemberItem(r)}},{key:"renderListItems",value:function e(){var t=this;var a=this.props,r=a.totalResultsCount,i=a.isLoading,s=a.modalBodyRef,o=a.useVirtualizedList;if(!r&&!i)return this.renderEmptyItem();if(!o)return this.getMemberListKeys().map(function(e,a){return t.renderListItem(a)});return n.a.createElement(Oe["e"],{scrollElement:s,onScroll:this.handleScroll},function(e){var a=e.height,r=e.isScrolling,i=e.onChildScroll,o=e.scrollTop;return n.a.createElement(Se["a"],{height:a,rowRenderer:t.renderListItem,keys:t.getMemberListKeys(),onScroll:i,isScrolling:r,ref:t.setListRef,scrollTop:o,scrollElement:s})})}},{key:"renderLoadingItem",value:function e(){var t=this.props.memberQuery;return n.a.createElement("li",{key:"loading",className:"p-app_management_modal__member_list_item p-app_management_modal__member_list_item--loading","data-qa":this.props["data-qa"]+"_loading"},n.a.createElement(Ee,null,t?Ge.t("Loading member results\u2026"):Ge.t("Loading members\u2026")))}},{key:"renderMemberItem",value:function e(t){var a=this.props,r=a.onRevokeButtonClick,i=a.onViewUserPermissionsClick;var s=this.props["data-qa"]+"_item_"+t.user_id;return n.a.createElement("li",{key:t.user_id,className:"p-app_management_modal__member_list_item p-app_management_modal__member_list_item--member","data-qa":s},n.a.createElement(qe,{"data-qa":s,userId:t.user_id,scopes:t.scopes,onRevokeButtonClick:r,onViewUserPermissionsClick:i}))}},{key:"renderScrollToTopButton",value:function e(){if(!this.state.showScrollToTopButton)return null;return n.a.createElement(w["d"],{type:"outline",size:"small",className:"p-app_management_modal__member_list_scroll_button",onClick:this.handleScrollToTopButtonClick,"data-qa":this.props["data-qa"]+"_scroll_button"},n.a.createElement(K["b"],{type:"arrow-up-medium"}),"\xa0",Ge.t("Back to top"))}},{key:"render",value:function e(){var t=this.props["data-qa"];return n.a.createElement(L["a"],{className:"p-app_management_modal__card","data-qa":t},this.renderHeader(),this.renderBody())}}]);return t}(r["PureComponent"]);Ke.displayName="AppMemberList";var ze=function e(t,a){var r=a.serviceId;var n=Object(q["getAppPermissionsUserSearchResultsByServiceId"])(t,r);if(!n)return{};var i=n.isLoading,s=n.query,o=n.results,l=n.total;return{isLoading:i,memberQuery:s,memberResults:o,totalResultsCount:l}};Ke.defaultProps=He;var Qe=Object(R["connect"])(ze)(Ke);var Ye=a(1391);var Je=new E["b"]("app_management_modal");var Xe=60;var Ze={alertBannerType:void 0,channelId:void 0,onClose:k["noop"]};var $e=function e(t){var a=t.alertBannerType,r=t.appName,i=t.channelId,s=t.onClose;if(!a)return null;var o;var l="error";var c=i?n.a.createElement(z["a"],{channelId:i,inline:true}):null;switch(a){case"addSuccess":o=Je.rt("{appName} was added to {channelName}",{appName:r,channelName:c});l="success";break;case"addError":o=Je.rt("Adding {appName} to {channelName} failed. Try again?",{appName:r,channelName:c});break;case"removeSuccess":o=Je.rt("{appName} was removed from {channelName}",{appName:r,channelName:c});l="success";break;case"removeError":o=Je.rt("Removing {appName} from {channelName} failed. Try again?",{appName:r,channelName:c});break;case"wildcardAddError":o=Je.rt("Adding {appName} to all public channels failed. Try again?",{appName:r,channelName:c});break;case"wildcardRemoveError":o=Je.rt("Removing {appName} from all public channels failed. Try again?",{appName:r,channelName:c});break;case"uninstallError":o=Je.rt("Uninstalling {appName} failed. Try again?",{appName:r});break;case"revokeSuccess":o=Je.rt("Access successfully revoked.");l="success";break;case"revokeError":o=Je.rt("Revoking access to your member data failed. Try again?");break;default:o=Je.t("Hmm, something went wrong. Try again?");break}return n.a.createElement(Ye["a"],{type:l,topOffset:Xe,"data-qa":"app_management_modal_alert_banner",showCloseButton:false,autoFadeout:true,onClose:s},o)};$e.displayName="AppManagementAlertBanner";$e.defaultProps=Ze;var et=$e;var tt=a(3089);var at=new E["b"]("app_management_modal");var rt={isLoading:true,workspaceScopeInfo:[],channelScopeInfo:[],userScopeInfo:[],currentUserScopeInfo:[],userCount:0,appHomepageUrl:void 0,appSupportUrl:void 0,showAppDirectoryLink:true,appIconLarge:void 0,showWildcardToggle:true,alertBannerType:void 0,activeDialogChannelId:void 0,wildcardEnabled:false,workspaceName:void 0,userIsAppmin:false,isMobile:false,onClose:k["noop"],onAppSearchUsers:k["noop"],onSidebarMenuLinkClick:k["noop"],hasError:false};var nt=-5;var it=function(e){_()(t,e);function t(e){var a;c()(this,t);a=m()(this,v()(t).call(this,e));a.setModalBodyRef=a.setModalBodyRef.bind(b()(a));return a}d()(t,[{key:"setModalBodyRef",value:function e(t){this.modalBodyRef=t}},{key:"renderAlertBanner",value:function e(){var t=this.props,a=t.appName,r=t.activeDialogChannelId,i=t.alertBannerType,s=t.onAlertBannerClose;if(!i)return null;return n.a.createElement(et,{alertBannerType:i,appName:a,channelId:r,onClose:s})}},{key:"renderAppminUserAccessSection",value:function e(){var t=this.props,a=t.activeSection,r=t.appName,i=t.serviceId,s=t.userCount,o=t.userScopeInfo,l=t.workspaceName,c=t.onAppSearchUsers,u=t.onMemberListRevokeClick,d=t.onViewUserPermissionsClick;if("user"!==a||0===s||Object(k["isEmpty"])(o))return null;var p=Object(E["q"])(r);var m=at.t("{workspaceName} members have allowed {appName} to:",{appName:p,workspaceName:Object(E["q"])(l)});return n.a.createElement("div",null,n.a.createElement("div",null,n.a.createElement("h3",null,at.t("What can {appName} do with member data?",{appName:p})),n.a.createElement("p",{className:"margin_top_50 margin_bottom_150"},m),n.a.createElement(I["a"],{scopeInfo:o,"data-qa":"app_management_modal_member_appmin_scope_info"})),n.a.createElement("div",{className:"margin_top_250"},n.a.createElement("h3",null,at.t("Which members have authorized {appName} to access their data?",{appName:p})),n.a.createElement(Qe,{modalBodyRef:this.modalBodyRef,onAppSearchUsers:c,onRevokeButtonClick:u,onViewUserPermissionsClick:d,serviceId:i,userCount:s})))}},{key:"renderChannelAccessSection",value:function e(){var t=this.props,a=t.activeSection,r=t.appName,i=t.channelScopeInfo,s=t.onWorkspaceSectionLinkClick,o=t.onExclusionListAdd,l=t.onExclusionListRemove,c=t.onGrantListAdd,u=t.onGrantListRemove,d=t.wildcardEnabled,p=t.onWildcardCheckboxChange,m=t.userIsAppmin,h=t.showWildcardToggle,v=t.isMobile,f=t.serviceId;if("channel"!==a)return null;var b=Object(E["q"])(r);var g=n.a.createElement("h3",null,at.t("What can {appName} do in a channel?",{appName:b}));if(Object(k["isEmpty"])(i)){var _=at.rt("This app can\u2019t be added to individual channels \u2014 it has access to your entire workspace. Check <Link>Workspace Access</Link> for more.",null,function(e){var t=e.text;return n.a.createElement(S["a"],{onClick:s,"data-qa":"app_management_modal_empty_channel_section_link"},t)});return n.a.createElement("div",null,g,n.a.createElement("p",{className:"margin_top_50 sk_foreground_max"},_))}var y=n.a.createElement(A["a"],{className:"p-app_management_modal__wildcard_checkbox",checked:d,onChange:p,disabled:!m,"data-qa":"app_management_modal_wildcard_checkbox"});return n.a.createElement("div",null,n.a.createElement("div",null,g,n.a.createElement("p",{className:"margin_top_50 margin_bottom_150"},at.t("In channels it\u2019s added to, {appName} can:",{appName:b})),n.a.createElement(I["a"],{scopeInfo:i,"data-qa":"app_management_modal_channel_scope_info"})),n.a.createElement("div",{className:"margin_top_250"},n.a.createElement("h3",null,at.t("Which channels can {appName} access?",{appName:b})),h&&n.a.createElement("div",{className:"margin_top_50"},n.a.createElement(T["a"],{text:at.t("All public channels"),cursor:"pointer",type:"inline",subtext:at.t("{appName} will join all public channels, in addition to other conversations it\u2019s added to.",{appName:b})},m?y:n.a.createElement(N["c"],{offsetX:nt,tip:at.t("Only an app admin can change this setting."),"data-qa":"app_management_modal_wilcard_checkbox_tooltip"},n.a.createElement("span",null,y)))),d&&n.a.createElement(ye,{isMobile:v,headerText:at.t("Excluded Public Channels"),buttonText:at.t("Add Excluded Channel"),emptyListText:at.t("No public channels excluded."),onAddChannel:o,onRemoveChannel:l,"data-qa":"app_management_modal_exclusion_list",serviceId:f,forExclusions:true}),n.a.createElement(ye,{isMobile:v,headerText:at.t("{appName} was individually added to:",{appName:b}),buttonText:at.t("Add App to channel",{fallbackHash:"b15a7b87166cf757534bf619b95f1e9b49b6f92a"}),emptyListText:at.t("{appName} has not been individually added to any channels.",{appName:b}),onAddChannel:c,onRemoveChannel:u,"data-qa":"app_management_modal_grant_list",serviceId:f})))}},{key:"renderModalContents",value:function e(){var t=this.props,a=t.isLoading,r=t.userIsAppmin;if(a)return n.a.createElement(P["a"],null);return n.a.createElement(n.a.Fragment,null,this.renderAlertBanner(),n.a.createElement("div",{className:"p-app_management_modal__sidebar_container"},this.renderSidebarMenu()),n.a.createElement("div",{className:"p-app_management_modal__content_container"},this.renderChannelAccessSection(),this.renderWorkspaceAccessSection(),r?this.renderAppminUserAccessSection():this.renderUserAccessSection()))}},{key:"renderSidebarMenu",value:function e(){var t=this.props,a=t.activeSection,r=t.appId,i=t.appHomepageUrl,s=t.appSupportUrl,o=t.showAppDirectoryLink,l=t.onSidebarMenuItemClick,c=t.onSidebarMenuLinkClick;return n.a.createElement(j["b"],{activeItemId:a},n.a.createElement(j["a"],{itemId:"channel",onClick:l,"data-qa":"app_management_modal_channel_access_link"},at.t("Channel access",{fallbackHash:"93f2f019560a491cf643b739cc7027f2a62c1d38"})),n.a.createElement(j["a"],{itemId:"workspace",onClick:l,"data-qa":"app_management_modal_workspace_access_link"},at.t("Workspace access",{fallbackHash:"a976c398ad6ec00251f8f90209b8393dd1b68b3a"})),this.renderUserAccessSidebarMenuItem(),i||o||s?n.a.createElement(j["a"],{isDivider:true}):null,i&&n.a.createElement(j["a"],{itemId:"homepage",onClick:c,isExternalLink:true,href:i,"data-qa":"app_management_modal_homepage_link"},at.t("App homepage",{fallbackHash:"ee2dbe71c27837ecd0a10d866992e1b3ff0d9b2f"})),o&&n.a.createElement(j["a"],{itemId:"directory",onClick:c,isExternalLink:true,href:"/apps/"+r+"?utm_source=in-prod&utm_medium=inprod-view_in_app_directory-user_profile-click","data-qa":"app_management_modal_directory_link"},at.t("View in App Directory")),s&&n.a.createElement(j["a"],{itemId:"support",onClick:c,isExternalLink:true,href:s,"data-qa":"app_management_modal_support_link"},at.t("Support for this App")))}},{key:"renderUninstallButton",value:function e(){var t=this.props,a=t.userIsAppmin,r=t.onUninstallButtonClick;return n.a.createElement("div",null,n.a.createElement(w["d"],{type:"outline",disabled:!a,onClick:r,"data-qa":"app_management_modal_uninstall_button"},at.t("Uninstall App")),!a&&n.a.createElement("span",{className:"margin_left_100 sk_foreground_max"},at.t("Only an app admin can uninstall this app.")))}},{key:"renderUserAccessSection",value:function e(){var t=this.props,a=t.activeSection,r=t.appName,i=t.currentUserScopeInfo,s=t.onRevokeButtonClick;if("user"!==a||Object(k["isEmpty"])(i))return null;var o=Object(E["q"])(r);return n.a.createElement("div",null,n.a.createElement("div",null,n.a.createElement("h3",null,at.t("What can {appName} do with your data?",{appName:o})),n.a.createElement("p",{className:"margin_top_50 margin_bottom_150"},at.t("You\u2019ve allowed {appName} to:",{appName:o,fallbackHash:"7313b20011628c3948a6a709c3e227ae089e2c81"})),n.a.createElement(I["a"],{scopeInfo:i,"data-qa":"app_management_modal_member_scope_info"})),n.a.createElement("div",{className:"margin_top_250"},n.a.createElement("h3",null,at.t("Revoke access")),n.a.createElement("p",{className:"margin_top_50 margin_bottom_100"},at.t("{appName} will no longer be able to access your data or take actions for you.",{appName:o})),n.a.createElement(w["d"],{"data-qa":"app_management_modal_revoke_button",type:"outline",onClick:s},at.t("Revoke"))))}},{key:"renderUserAccessSidebarMenuItem",value:function e(){var t=this.props,a=t.currentUserScopeInfo,r=t.userCount,i=t.userIsAppmin,s=t.onSidebarMenuItemClick;if(i?0===r:Object(k["isEmpty"])(a))return null;return n.a.createElement(j["a"],{itemId:"user",onClick:s,"data-qa":"app_management_modal_user_access_link"},i?at.t("Member data access",{fallbackHash:"54485606f08a3c5d7e73fe0730e62de7b3fe9ea2"}):at.t("Access to your data",{fallbackHash:"7284a962539fd4edca8ba9beccf1501937e2f49e"}))}},{key:"renderWorkspaceAccessSection",value:function e(){var t=this.props,a=t.activeSection,r=t.appName,i=t.workspaceName,s=t.workspaceScopeInfo;if("workspace"!==a)return null;var o=Object(E["q"])(r);var l=Object(E["q"])(i);return n.a.createElement("div",null,n.a.createElement("div",null,n.a.createElement("h3",null,at.t("What can {appName} do in this workspace?",{appName:o})),n.a.createElement("p",{className:"margin_top_50 margin_bottom_150"},at.t("On {workspaceName}, {appName} can:",{appName:o,workspaceName:l})),n.a.createElement(I["a"],{scopeInfo:s,"data-qa":"app_management_modal_workspace_scope_info"})),n.a.createElement("div",{className:"margin_top_250"},n.a.createElement("h3",null,at.t("Uninstall {appName}",{appName:o})),n.a.createElement("p",{className:"margin_top_50 margin_bottom_100"},at.t("Remove this app from the {workspaceName} workspace and revoke all access and authorizations.",{workspaceName:l})),this.renderUninstallButton()))}},{key:"render",value:function e(){var t=this.props,a=t.appIconLarge,r=t.appName,i=t.hasError,s=t.isMobile,o=t.onClose;if(i)return null;var l=r?at.t("{appName} Settings",{appName:Object(E["q"])(r)}):r;return n.a.createElement(C["a"],{onCancel:o,showCancelButton:false,showGoButton:false,title:l,modalClasses:O()("p-app_management_modal",{"p-app_management_modal--mobile":s}),modalBodyOpenClassName:"p-app_management_modal__ReactModal__Body--open",position:"fixed",withHeader:true,headerImage:a,setBodyRef:this.setModalBodyRef},this.renderModalContents())}}]);return t}(r["PureComponent"]);it.displayName="AppManagementModal";it.defaultProps=rt;var st=it;var ot=a(131);var lt=a(898);var ct=a(106);var ut=a(33);var dt=a(55);var pt=a(421);var mt=a(1039);var ht=a(62);var vt=a(27);var ft=a(2016);var bt=a(2785);var gt=a(117);var _t=new E["b"]("app_management_modal");var yt={workspaceName:void 0,title:void 0,workspaceAccessCheckboxText:void 0,channelAccessCheckboxText:void 0,onCancel:k["noop"]};var Ot=function(e){_()(t,e);function t(e){var a;c()(this,t);a=m()(this,v()(t).call(this,e));a.state={workspaceConfirmChecked:false,channelConfirmChecked:!e.channelAccessCheckboxText,confirmInProgress:false};Object(F["a"])(b()(a),["handleConfirm","handleCheckboxChange"]);return a}d()(t,[{key:"handleCheckboxChange",value:function e(t){var a=t.target,r=a.name,n=a.checked;this.setState(function(){return x()({},r+"Checked",n)})}},{key:"handleConfirm",value:function e(){var t=this.props.onGo;this.setState(function(){return{confirmInProgress:true}});return t()}},{key:"renderChannelAccessConfirmCheckbox",value:function e(){var t=this.props.channelAccessCheckboxText;return t?this.renderCheckbox("channelConfirm",t):null}},{key:"renderCheckbox",value:function e(t,a){return n.a.createElement(T["a"],{type:"inline",cursor:"pointer",text:a},n.a.createElement(A["a"],{onChange:this.handleCheckboxChange,name:t,isRequired:true,"data-qa":"app_uninstall_dialog_"+Object(k["snakeCase"])(t)+"_checkbox"}))}},{key:"renderTitle",value:function e(){var t=this.props,a=t.appName,r=t.workspaceName,n=t.title;return n||_t.t("Uninstall {appName} from {workspaceName}?",{appName:Object(E["q"])(a),workspaceName:Object(E["q"])(r)})}},{key:"renderWorkspaceAccessConfirmCheckbox",value:function e(){var t=this.props,a=t.appName,r=t.workspaceName,n=t.workspaceAccessCheckboxText;var i=n||_t.rt("I understand members of the <strong>{workspaceName}</strong> workspace will no longer be able to use {appName}.",{appName:a,workspaceName:r});return this.renderCheckbox("workspaceConfirm",i)}},{key:"render",value:function e(){var t=this.props,a=t.onCancel,r=t.appIcon;var i=this.state,s=i.workspaceConfirmChecked,o=i.channelConfirmChecked,l=i.confirmInProgress;var c=!(s&&o)||l;return n.a.createElement(gt["a"],{contentLabel:this.renderTitle(),title:this.renderTitle(),titleImage:r,truncateTitle:false,goButtonText:_t.t("Uninstall App"),onGo:this.handleConfirm,goButtonType:"danger",goButtonIsDisabled:c,goButtonIsPending:l,showCancelButton:true,onCancel:a,"data-qa":"app_uninstall_dialog"},this.renderWorkspaceAccessConfirmCheckbox(),this.renderChannelAccessConfirmCheckbox())}}]);return t}(r["PureComponent"]);Ot.displayName="AppUninstallDialog";Ot.displayName="AppUninstallDialog";Ot.defaultProps=yt;var kt=Ot;var Et=kt;var Ct=a(14);var St=a(35);var wt=a(226);var jt=new E["b"]("app_management_modal");var It={onCancel:k["noop"]};var Tt=function(e){_()(t,e);function t(e){var a;c()(this,t);a=m()(this,v()(t).call(this,e));a.state={confirmInProgress:false};a.handleConfirm=a.handleConfirm.bind(b()(a));return a}d()(t,[{key:"handleConfirm",value:function e(){var t=this.props.onGo;this.setState(function(){return{confirmInProgress:true}});return t()}},{key:"render",value:function e(){var t=this.props,a=t.appName,r=t.wildcardEnabled,i=t.onCancel;var s=this.state.confirmInProgress;var o=Object(E["q"])(a);var l;var c;if(r){l={title:jt.t("Remove {appName} from all public channels?",{appName:o}),goButtonText:jt.t("Remove"),goButtonType:"danger","data-qa":"app_wildcard_disable_dialog"};c=jt.t("{appName} will only be able to post in channels it\u2019s individually added to.",{appName:o})}else{l={title:jt.t("Allow {appName} access to all public channels?",{appName:o}),goButtonText:jt.t("Allow"),"data-qa":"app_wildcard_enable_dialog"};c=jt.t("{appName} will be added to all public channels (quietly, of course).",{appName:o})}return n.a.createElement(gt["a"],$()({showCancelButton:true,contentLabel:l.title,truncateTitle:false,onGo:this.handleConfirm,onCancel:i,goButtonIsPending:s,goButtonIsDisabled:s},l),n.a.createElement("p",{className:"margin_bottom_0"},c))}}]);return t}(r["PureComponent"]);Tt.displayName="AppWildcardDialog";Tt.defaultProps=It;Tt.displayName="AppWildcardDialog";var At=Tt;var Nt=new E["b"]("app_management_modal");var Pt={onCancel:k["noop"]};var Mt=function(e){_()(t,e);function t(e){var a;c()(this,t);a=m()(this,v()(t).call(this,e));a.state={confirmInProgress:false};a.handleConfirm=a.handleConfirm.bind(b()(a));return a}d()(t,[{key:"handleConfirm",value:function e(){var t=this.props.onGo;this.setState(function(){return{confirmInProgress:true}});return t()}},{key:"render",value:function e(){var t=this.props,a=t.appName,r=t.onCancel,i=t.workspaceName;var s=this.state.confirmInProgress;var o=Nt.t("Revoke access to your member data?");var l=Nt.t("{appName} will remain installed on {workspaceName}, but will no longer be able to access your member data.",{appName:Object(E["q"])(a),workspaceName:Object(E["q"])(i)});return n.a.createElement(gt["a"],{"data-qa":"app_revoke_dialog",goButtonIsDisabled:s,goButtonIsPending:s,goButtonText:Nt.t("Revoke"),goButtonType:"danger",onCancel:r,onGo:this.handleConfirm,showCancelButton:true,title:o,truncateTitle:false},n.a.createElement("p",{className:"margin_bottom_0"},l))}}]);return t}(r["PureComponent"]);Mt.displayName="AppRevokeDialog";Mt.defaultProps=Pt;Mt.displayName="AppRevokeDialog";var Dt=Mt;var xt=new E["b"]("app_management_modal");var Rt={currentUserScopeInfo:[],isMemberCurrentUser:false,memberName:void 0,onGo:k["noop"],onClose:k["noop"],scopes:[],userScopeInfo:[]};var Ft={memberId:i["default"].string.isRequired};var Lt=function e(t,a){return Object(k["find"])(t,function(e){return e.scopes[0]===a})};var Ut=function e(t,a){return a.map(function(e){return Lt(t,e)})};var Bt=function e(t){var a=t.appName,r=t.currentUserScopeInfo,i=t.isMemberCurrentUser,s=t.memberName,o=t.onGo,l=t.onClose,c=t.scopes,u=t.userScopeInfo;var d;d=i?r:Ut(u,c);var p=Object(E["q"])(a);var m=i?xt.t("You\u2019ve allowed {appName} to:",{appName:p,fallbackHash:"7313b20011628c3948a6a709c3e227ae089e2c81"}):xt.t("{memberName} has allowed {appName} to:",{appName:p,memberName:Object(E["q"])(s)});return n.a.createElement(gt["a"],{cancelText:xt.t("Done"),"data-qa":"app_user_permissions_dialog",goButtonType:"outline",goButtonText:xt.t("Revoke All"),showGoButton:i,reverseButtons:true,truncateTitle:false,onGo:o,onCancel:l,title:m},n.a.createElement("div",{className:"margin_bottom_400"},n.a.createElement(I["a"],{scopeInfo:d})))};Bt.displayName="AppUserPermissionsDialog";Bt.defaultProps=Rt;var qt=Bt;var Gt=function e(t,a){var r=a.memberId;return{isMemberCurrentUser:r===Object(Ie["getCurrentUserId"])(t),memberName:Object(Ne["getPrefCompliantMemberNameById"])(t,r)}};var Ht=Object(R["connect"])(Gt)(Bt);Ht.propTypes=Ft;var Wt=Ht;function Vt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function Kt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Vt(Object(a),true).forEach(function(t){x()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Vt(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var zt=new E["b"]("app_management_modal");var Qt="APP_SETTINGS_MODAL";var Yt="APP_CHANNEL_ADD_DIALOG";var Jt="APP_CHANNEL_REMOVE_DIALOG";var Xt={onUninstall:k["noop"],showAppDirectoryLink:true,isMobile:false,workspaceName:"",enqueueToast:k["noop"],serviceId:void 0,appProfile:void 0,appId:void 0,appUserId:void 0,appName:void 0,wildcardEnabled:false,onClose:k["noop"],appIcon:void 0,privateChannelCount:0,publicChannelCount:0,openModal:k["noop"],closeModal:k["noop"],currentUserScopeInfo:[],userScopeInfo:[],userCount:0,userIsAppmin:false,referringEventId:void 0,referringUiContext:void 0,isLoading:true,hasError:false};var Zt=function e(t){var a=t.app_user_id,r=t.id,n=t.name,i=t.support_url,s=t.url;return{appUserId:a,appIcon:Object(pt["b"])(t,48),appIconLarge:Object(pt["b"])(t,88),appId:r,appName:n,appSupportUrl:i,appHomepageUrl:s}};var $t=function e(t,a){var r=t.app_user,n=t.app_id,i=t.profile,s=t.directory_profile;return{appUserId:r.id,appIcon:Object(pt["b"])(i,48,a),appIconLarge:Object(pt["b"])(i,88,a),appId:n,appName:i.name,appSupportUrl:s.support_url,appHomepageUrl:s.home_url}};var ea=80;var ta="already_has_resource";var aa="no_resource_to_remove";var ra="permission_exists";var na=aa;var ia=function(e){_()(t,e);d()(t,null,[{key:"getDerivedStateFromProps",value:function e(t,a){var r=t.currentUserScopeInfo,n=t.userIsAppmin,i=t.userCount;if("user"===a.activeSection&&(n?0===i:Object(k["isEmpty"])(r)))return{activeSection:"channel"};return null}}]);function t(e){var a;c()(this,t);a=m()(this,v()(t).call(this,e));a.state={alertBannerType:null,activeDialogChannelId:null,addChannelScopeInfo:null,activeSection:"channel"};Object(F["a"])(b()(a),["handleSidebarMenuItemClick","handleWorkspaceSectionLinkClick","handleUninstallButtonClick","handleAlertBannerClose","handleWildcardCheckboxChange","handleAppSearchUsers","handleExclusionListAdd","handleExclusionListRemove","handleGrantListAdd","handleGrantListRemove","handleRevokeButtonClick","handleMemberListRevokeClick","handleViewUserPermissionsClick"]);a.referringEventId=e.referringEventId;a.referringUiContext=e.referringUiContext;return a}d()(t,[{key:"componentDidUpdate",value:function e(t,a){var r=this.props,n=r.isLoading,i=r.hasError;var s=this.state.activeSection;if(!t.hasError&&i){this.handleError();return}(t.isLoading&&!n||a.activeSection!==s)&&this.trackClog(x()({},Ct["UiContextKeys"].action,Ct["UiAction"].IMPRESSION))}},{key:"componentWillUnmount",value:function e(){this.props.clearAppPermissions();this.trackClog(x()({},Ct["UiContextKeys"].action,Ct["UiAction"].CLOSE))}},{key:"getClogStep",value:function e(){var t=this.props.userIsAppmin;var a=this.state.activeSection;switch(a){case"workspace":return Ct["UiStep"].WORKSPACE_ACCESS_SECTION;case"user":return t?Ct["UiStep"].APPMIN_MEMBER_ACCESS_SECTION:Ct["UiStep"].MEMBER_ACCESS_SECTION;default:return Ct["UiStep"].CHANNEL_ACCESS_SECTION}}},{key:"handleAddChannel",value:function e(){var t=this;var a=this.props.appUserId;var r=this.state.activeDialogChannelId;return this.props.fetchAppAddResource({appUserId:a,channelId:r,didConfirm:true}).then(function(){t.props.maybeUpdateAppPermissionsAfterChannelAdd({appUserId:a,channelId:r});t.setState(function(){return{addChannelScopeInfo:null,alertBannerType:"addSuccess"}})}).catch(function(){t.setState(function(){return{alertBannerType:"addError"}})})}},{key:"handleAlertBannerClose",value:function e(){this.setState(function(){return{alertBannerType:null}})}},{key:"handleAppSearchUsers",value:function e(t){var a=this;if(t.query){var r;this.trackClog((r={},x()(r,Ct["UiContextKeys"].action,Ct["UiAction"].SEARCH),x()(r,Ct["UiContextKeys"].ui_element,Ct["UiElement"].APP_MEMBER_LIST_SEARCH),r))}return this.props.searchUsersForApp(t).catch(function(){a.setState(function(){return{alertBannerType:"error"}})})}},{key:"handleChannelAddOrRemove",value:function e(t,a,r){var n;this.trackClog((n={},x()(n,Ct["UiContextKeys"].action,Ct["UiAction"].CLICK),x()(n,Ct["UiContextKeys"].ui_element,r),n),x()({},Ct["CoreKeys"].channel_id,t));this[a](t)}},{key:"handleError",value:function e(){this.props.closeModal();this.props.enqueueToast({element:n.a.createElement(ot["b"],{offsetY:ea,icon:"warning-filled",iconClassName:"sk_raspberry_red margin_right_75"},n.a.createElement("span",{"data-qa":"app_management_modal_error_toast"},zt.t("Hmm, something went wrong. Try again?")))})}},{key:"handleExclusionListAdd",value:function e(t){this.handleChannelAddOrRemove(t,"showRemoveDialog",Ct["UiElement"].BTN_APP_ADD_EXCLUSION)}},{key:"handleExclusionListRemove",value:function e(t){this.handleChannelAddOrRemove(t,"showAddDialog",Ct["UiElement"].BTN_APP_REMOVE_EXCLUSION)}},{key:"handleGrantListAdd",value:function e(t){this.handleChannelAddOrRemove(t,"showAddDialog",Ct["UiElement"].BTN_APP_ADD_CHANNEL)}},{key:"handleGrantListRemove",value:function e(t){this.handleChannelAddOrRemove(t,"showRemoveDialog",Ct["UiElement"].BTN_APP_REMOVE_CHANNEL)}},{key:"handleMemberListRevokeClick",value:function e(){var t;this.trackClog((t={},x()(t,Ct["UiContextKeys"].action,Ct["UiAction"].CLICK),x()(t,Ct["UiContextKeys"].ui_element,Ct["UiElement"].APP_MEMBER_LIST_MENU_REVOKE),t));this.showRevokeDialog()}},{key:"handleRemoveChannel",value:function e(){var t=this;var a=this.props.appUserId;var r=this.state.activeDialogChannelId;var n={alertBannerType:"removeSuccess"};return this.props.fetchAppRemoveResource({appUserId:a,channelId:r}).then(function(){t.props.maybeUpdateAppPermissionsAfterChannelRemove({appUserId:a,channelId:r});t.setState(function(){return n})}).catch(function(e){var a=Object(k["get"])(e,"data.error");a===aa?t.setState(function(){return n}):t.setState(function(){return{alertBannerType:"removeError"}})})}},{key:"handleRevokeButtonClick",value:function e(){var t;this.trackClog((t={},x()(t,Ct["UiContextKeys"].action,Ct["UiAction"].CLICK),x()(t,Ct["UiContextKeys"].ui_element,Ct["UiElement"].BTN_APP_REVOKE),t));this.showRevokeDialog()}},{key:"handleRevokeConfirm",value:function e(){var t=this;var a=this.props.serviceId;return this.props.fetchAppRevokeUserAndUpdateAppPermissions({serviceId:a}).then(function(){t.setState(function(){return{alertBannerType:"revokeSuccess"}})}).catch(function(){t.setState(function(){return{alertBannerType:"revokeError"}})})}},{key:"handleSidebarMenuItemClick",value:function e(t){this.trackClogForSidebarMenuClick(t);t!==this.state.activeSection&&this.setState(function(){return{activeSection:t}})}},{key:"handleUninstallButtonClick",value:function e(){var t;this.trackClog((t={},x()(t,Ct["UiContextKeys"].action,Ct["UiAction"].CLICK),x()(t,Ct["UiContextKeys"].ui_element,Ct["UiElement"].BTN_APP_UNINSTALL),t));this.showUninstallDialog()}},{key:"handleUninstallConfirm",value:function e(){var t=this;var a=this.props,r=a.onUninstall,n=a.appId,i=a.onClose;return this.props.fetchAppUninstall({appId:n}).then(function(){r();t.showUninstallToast();i();t.props.closeModal()}).catch(function(){t.setState(function(){return{alertBannerType:"uninstallError"}})})}},{key:"handleViewUserPermissionsClick",value:function e(t,a){var r;this.trackClog((r={},x()(r,Ct["UiContextKeys"].action,Ct["UiAction"].CLICK),x()(r,Ct["UiContextKeys"].ui_element,Ct["UiElement"].LINK_APP_VIEW_PERMISSIONS),r));this.showUserPermissionsDialog(t,a)}},{key:"handleWildcardCheckboxChange",value:function e(){var t;this.trackClog((t={},x()(t,Ct["UiContextKeys"].action,Ct["UiAction"].CLICK),x()(t,Ct["UiContextKeys"].ui_element,Ct["UiElement"].APP_WILDCARD_CHECKBOX),t));this.showWildcardDialog()}},{key:"handleWorkspaceSectionLinkClick",value:function e(){this.handleSidebarMenuItemClick("workspace")}},{key:"showAddDialog",value:function e(t){var a=this;var r=this.props,i=r.appUserId,s=r.appName,o=r.appIcon;return this.props.fetchAppAddResource({appUserId:i,channelId:t,didConfirm:false}).then(function(e){a.setState(function(){return{activeDialogChannelId:t,addChannelScopeInfo:e,alertBannerType:null}});var r={channelId:t,appName:s,appIcon:o,scopeInfo:e,onAuthorize:function e(){a.trackClog(x()({},Ct["UiContextKeys"].action,Ct["UiAction"].ALLOW),x()({},Ct["CoreKeys"].channel_id,t),Yt);a.handleAddChannel()},onDismiss:function e(){a.trackClog(x()({},Ct["UiContextKeys"].action,Ct["UiAction"].DO_NOT_ALLOW),x()({},Ct["CoreKeys"].channel_id,t),Yt)},onClose:function e(){a.trackClog(x()({},Ct["UiContextKeys"].action,Ct["UiAction"].CLOSE),x()({},Ct["CoreKeys"].channel_id,t),Yt)}};a.props.openModal({element:n.a.createElement(ft["b"],r),isStackable:true});a.trackClog(x()({},Ct["UiContextKeys"].action,Ct["UiAction"].IMPRESSION),x()({},Ct["CoreKeys"].channel_id,t),Yt)}).catch(function(e){var r=Object(k["get"])(e,"data.error");r===ta?a.setState(function(){return{addChannelScopeInfo:null,alertBannerType:"addSuccess"}}):a.setState(function(){return{activeDialogChannelId:t,alertBannerType:"addError"}})})}},{key:"showRemoveDialog",value:function e(t){var a=this;var r=this.props.appName;this.setState(function(){return{activeDialogChannelId:t,alertBannerType:null}});var i={appName:r,channelId:t,onConfirm:function e(){a.trackClog(x()({},Ct["UiContextKeys"].action,Ct["UiAction"].OK),x()({},Ct["CoreKeys"].channel_id,t),Jt);return a.handleRemoveChannel()},onCancel:function e(){return a.trackClog(x()({},Ct["UiContextKeys"].action,Ct["UiAction"].CLOSE),x()({},Ct["CoreKeys"].channel_id,t),Jt)}};this.props.openModal({element:n.a.createElement(bt["a"],i),isStackable:true});this.trackClog(x()({},Ct["UiContextKeys"].action,Ct["UiAction"].IMPRESSION),x()({},Ct["CoreKeys"].channel_id,t),Jt)}},{key:"showRevokeDialog",value:function e(){var t=this,a;var r=this.props,i=r.appName,s=r.workspaceName;this.setState(function(){return{alertBannerType:null}});var o={appName:i,onGo:function e(){var a;t.trackClog((a={},x()(a,Ct["UiContextKeys"].action,Ct["UiAction"].OK),x()(a,Ct["UiContextKeys"].ui_element,Ct["UiElement"].APP_REVOKE_DIALOG),a));return t.handleRevokeConfirm()},onCancel:function e(){var a;return t.trackClog((a={},x()(a,Ct["UiContextKeys"].action,Ct["UiAction"].CLOSE),x()(a,Ct["UiContextKeys"].ui_element,Ct["UiElement"].APP_REVOKE_DIALOG),a))},workspaceName:s};this.props.openModal({element:n.a.createElement(Dt,o),isStackable:true});this.trackClog((a={},x()(a,Ct["UiContextKeys"].action,Ct["UiAction"].IMPRESSION),x()(a,Ct["UiContextKeys"].ui_element,Ct["UiElement"].APP_REVOKE_DIALOG),a))}},{key:"showUninstallDialog",value:function e(){var t=this,a;var r=this.props,i=r.appName,s=r.appIcon,o=r.workspaceName,l=r.publicChannelCount,c=r.privateChannelCount;var u={appName:i,appIcon:s,workspaceName:o,publicChannelCount:l,privateChannelCount:c,onGo:function e(){var a;t.trackClog((a={},x()(a,Ct["UiContextKeys"].action,Ct["UiAction"].ALLOW),x()(a,Ct["UiContextKeys"].ui_element,Ct["UiElement"].APP_UNINSTALL_DIALOG),a));return t.handleUninstallConfirm()},onCancel:function e(){var a;return t.trackClog((a={},x()(a,Ct["UiContextKeys"].action,Ct["UiAction"].CLOSE),x()(a,Ct["UiContextKeys"].ui_element,Ct["UiElement"].APP_UNINSTALL_DIALOG),a))}};var d;l>0?d=c>0?zt.rt("I understand {appName} will no longer be able to access <strong>{publicChannelCount, plural, =1 {# public channel} other {# public channels}} and {privateChannelCount, plural, =1 {# other private conversation} other {# other private conversations}}</strong>.",{appName:i,publicChannelCount:l,privateChannelCount:c}):zt.rt("I understand {appName} will no longer be able to access <strong>{publicChannelCount, plural, =1 {# public channel} other {# public channels}}</strong>.",{appName:i,publicChannelCount:l}):c>0&&(d=zt.rt("I understand {appName} will no longer be able to access <strong>{privateChannelCount, plural, =1 {# private conversation} other {# private conversations}}</strong>.",{appName:i,privateChannelCount:c}));u.channelAccessCheckboxText=d;this.props.openModal({element:n.a.createElement(Et,u),isStackable:true});this.trackClog((a={},x()(a,Ct["UiContextKeys"].action,Ct["UiAction"].IMPRESSION),x()(a,Ct["UiContextKeys"].ui_element,Ct["UiElement"].APP_UNINSTALL_DIALOG),a))}},{key:"showUninstallToast",value:function e(){var t=this.props,a=t.appName,r=t.workspaceName;this.props.enqueueToast({element:n.a.createElement(ot["b"],{offsetY:ea},n.a.createElement("span",{"data-qa":"app_management_modal_uninstall_toast"},zt.t("{appName} was removed from {workspaceName}",{appName:Object(E["q"])(a),workspaceName:Object(E["q"])(r)})))})}},{key:"showUserPermissionsDialog",value:function e(t,a){var r=this,i;var s=this.props,o=s.appName,l=s.currentUserScopeInfo,c=s.userScopeInfo;var u={appName:o,currentUserScopeInfo:l,memberId:t,onGo:function e(){return Object(k["defer"])(function(){return r.showRevokeDialog()})},onClose:function e(){var t;return r.trackClog((t={},x()(t,Ct["UiContextKeys"].action,Ct["UiAction"].CLOSE),x()(t,Ct["UiContextKeys"].ui_element,Ct["UiElement"].APP_USER_PERMISSIONS_DIALOG),t))},scopes:a,userScopeInfo:c};this.props.openModal({element:n.a.createElement(Wt,u),isStackable:true});this.trackClog((i={},x()(i,Ct["UiContextKeys"].action,Ct["UiAction"].IMPRESSION),x()(i,Ct["UiContextKeys"].ui_element,Ct["UiElement"].APP_USER_PERMISSIONS_DIALOG),i))}},{key:"showWildcardDialog",value:function e(){var t=this,a;var r=this.props,i=r.wildcardEnabled,s=r.appName;var o=i?Ct["UiElement"].APP_WILDCARD_DISABLE_DIALOG:Ct["UiElement"].APP_WILDCARD_ENABLE_DIALOG;var l={appName:s,wildcardEnabled:i,onGo:function e(){var a;t.trackClog((a={},x()(a,Ct["UiContextKeys"].action,Ct["UiAction"].OK),x()(a,Ct["UiContextKeys"].ui_element,o),a));return t.toggleWildcardEnabled()},onCancel:function e(){var a;return t.trackClog((a={},x()(a,Ct["UiContextKeys"].action,Ct["UiAction"].CLOSE),x()(a,Ct["UiContextKeys"].ui_element,o),a))}};this.props.openModal({element:n.a.createElement(At,l),isStackable:true});this.trackClog((a={},x()(a,Ct["UiContextKeys"].action,Ct["UiAction"].IMPRESSION),x()(a,Ct["UiContextKeys"].ui_element,o),a))}},{key:"toggleWildcardEnabled",value:function e(){var t=this;var a=this.props,r=a.appUserId,n=a.wildcardEnabled,i=a.serviceId;var s="fetchAppWildcard"+(n?"Disable":"Enable");return this.props[s]({appUserId:r}).then(function(e){t.props.maybeUpdateAppPermissionsAfterWildcardChange({appUserId:r,wildcardEnabled:!n});n||t.props.updatePublicChannelCount({countDelta:e,serviceId:i})}).catch(function(e){var a=Object(k["get"])(e,"data.error");a===ra||a===na||t.setState(function(){return{alertBannerType:n?"wildcardRemoveError":"wildcardAddError"}})})}},{key:"trackClog",value:function e(){var t;var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Qt;var i=this.props,s=i.appId,o=i.clogger;var l=Kt(x()({},Ct["UiContextKeys"].step,n===Qt?this.getClogStep():void 0),a);o.track(n,x()({contexts:(t={},x()(t,Ct["ClientEventKeys"].ui_context,l),x()(t,Ct["ClientEventKeys"].referring_ui_context,this.referringUiContext),x()(t,Ct["ClientEventKeys"].core,Kt(x()({},Ct["CoreKeys"].app_id,s),r)),t)},Ct["ClientEventKeys"].referring_event_id,this.referringEventId));this.referringEventId=n;this.referringUiContext=l}},{key:"trackClogForSidebarMenuClick",value:function e(t){var a;var r;switch(t){case"workspace":r=Ct["UiElement"].LINK_WORKSPACE_ACCESS_SECTION;break;case"channel":r=Ct["UiElement"].LINK_CHANNEL_ACCESS_SECTION;break;case"user":r=this.props.userIsAppmin?Ct["UiElement"].LINK_APPMIN_MEMBER_ACCESS_SECTION:Ct["UiElement"].LINK_MEMBER_ACCESS_SECTION;break;case"homepage":r=Ct["UiElement"].LINK_APP_HOMEPAGE;break;case"directory":r=Ct["UiElement"].LINK_APP_DIRECTORY;break;case"support":r=Ct["UiElement"].LINK_APP_SUPPORT;break;default:r=void 0;break}this.trackClog((a={},x()(a,Ct["UiContextKeys"].action,Ct["UiAction"].CLICK),x()(a,Ct["UiContextKeys"].ui_element,r),a))}},{key:"render",value:function e(){var t=Kt({onSidebarMenuItemClick:this.handleSidebarMenuItemClick,onSidebarMenuLinkClick:this.trackClogForSidebarMenuClick,onWorkspaceSectionLinkClick:this.handleWorkspaceSectionLinkClick,onRevokeButtonClick:this.handleRevokeButtonClick,onMemberListRevokeClick:this.handleMemberListRevokeClick,onUninstallButtonClick:this.handleUninstallButtonClick,onExclusionListAdd:this.handleExclusionListAdd,onExclusionListRemove:this.handleExclusionListRemove,onGrantListAdd:this.handleGrantListAdd,onGrantListRemove:this.handleGrantListRemove,onWildcardCheckboxChange:this.handleWildcardCheckboxChange,onAlertBannerClose:this.handleAlertBannerClose,onViewUserPermissionsClick:this.handleViewUserPermissionsClick,onAppSearchUsers:this.handleAppSearchUsers},this.props,{},this.state);return n.a.createElement(st,t)}}]);return t}(r["PureComponent"]);ia.displayName="AppManagementModalContainer";ia.displayName="AppManagementModalContainer";ia.defaultProps=Xt;var sa=function e(t,a){var r=a.appProfile,n=a.serviceId;var i=Object(ut["d"])(t);var s=i?Object(vt["getTeamDisplayName"])(i):"";var o={};var l=Object(wt["getDefaultAppIcon"])(t);if(r)o=Zt(r,l);else if(n){var c=Object(mt["getAppProfileByIds"])(t,{serviceId:n});c&&(o=$t(c,l))}var u=Object(q["getAppPermissionsByServiceId"])(t,n);return Kt({workspaceName:s,userIsAppmin:!Object(ht["a"])(t,"app_whitelist_enabled")||Object(W["l"])(t),isLoading:Object(dt["d"])(u),hasError:Object(dt["c"])(u)||Object(k["isEmpty"])(o),showWildcardToggle:Object(q["canAppBeAddedToChannelType"])(u,"channel")},o,{},u,{clogger:Object(St["a"])({state:t})})};var oa={clearAppPermissions:q["clearAppPermissions"],enqueueToast:ct["enqueueToast"],fetchAppAddResource:lt["a"],fetchAppRemoveResource:lt["h"],fetchAppUninstall:lt["k"],fetchAppWildcardDisable:lt["l"],fetchAppWildcardEnable:lt["m"],fetchAppRevokeUserAndUpdateAppPermissions:q["fetchAppRevokeUserAndUpdateAppPermissions"],maybeUpdateAppPermissionsAfterChannelAdd:q["maybeUpdateAppPermissionsAfterChannelAdd"],maybeUpdateAppPermissionsAfterChannelRemove:q["maybeUpdateAppPermissionsAfterChannelRemove"],maybeUpdateAppPermissionsAfterWildcardChange:q["maybeUpdateAppPermissionsAfterWildcardChange"],searchUsersForApp:q["searchUsersForApp"],updatePublicChannelCount:q["updatePublicChannelCount"],openModal:s["openModal"],closeModal:s["closeModal"]};var la=ia;var ca=Object(R["connect"])(sa,oa)(ia);var ua=ca;var da=Object(o["b"])("Opens app app management modal in client",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var r=n.a.createElement(ua,a);e(Object(s["openModal"])({element:r}))});da.meta={name:"openAppManagementModal",key:"actionsOpenAppManagementModalOpenAppManagementModal",description:"Opens app app management modal in client"};da.propTypes={serviceId:i["default"].string,appProfile:i["default"].object,onClose:i["default"].func,showAppDirectoryLink:i["default"].bool,onUninstall:i["default"].func,isMobile:i["default"].bool,referringEventId:i["default"].string,referringUiContext:i["default"].object};var pa=t["a"]=da},,,function(e,t,a){"use strict";var r=a(196);var n=a.n(r);var i=a(245);var s=a.n(i);var o=a(218);var l=a.n(o);var c=a(88);var u=a.n(c);var d=a(110);var p=a.n(d);var m=a(169);var h=a.n(m);var v=a(138);var f=a.n(v);var b=a(147);var g=a.n(b);var _=a(135);var y=a.n(_);var O=a(185);var k=a.n(O);var E=a(0);var C=a(1);var S=a.n(C);var w=a(85);var j=a(13);var I=a.n(j);var T=a(12);var A=a(2);var N=a(30);var P=a(286);var M=a(32);var D=a(33);var x=a(25);var R=a(17);var F=a(106);var L=a(39);var U=a(11);var B=a(16);var q=a(38);var G=a(352);var H=a(122);var W=a(6);var V=a(35);var K=a(90);var z=a(232);var Q=a(297);var Y=a(34);var J=a(487);var X=a(165);var Z=a(23);var $=a(131);var ee=a(387);var te=a(43);var ae=a(89);var re=a(518);var ne=a(1235);var ie=a(246);var se=a.n(ie);var oe=a(543);var le=a(44);var ce=a(93);var ue=a(50);var de=a(141);var pe=a(530);var me=new W["b"]("enterprise_workspaces");var he={closeModal:A["noop"],requestCreateWorkspaceApi:A["noop"]};var ve=255;var fe=512;var be={required:"required",nameTaken:"nameTaken",maxLength:"maxLength"};function ge(e){var t=e.closeModal,a=e.requestCreateWorkspaceApi;var r=Object(C["useState"])(),n=se()(r,2),i=n[0],s=n[1];var o=Object(C["useState"])(),l=se()(o,2),c=l[0],u=l[1];var d=Object(C["useState"])(false),p=se()(d,2),m=p[0],h=p[1];var v=Object(C["useState"])(false),f=se()(v,2),b=f[0],g=f[1];var _=Object(C["useState"])(be.required),y=se()(_,2),O=y[0],k=y[1];var E=Object(C["useState"])(be.required),w=se()(E,2),j=w[0],I=w[1];function T(){g(false);h(true);a({workspaceName:i,workspaceMessage:c,reason:"workspace_directory_request_new_workspace"}).then(function(){return t()}).catch(function(e){var t=e.data;h(false);"name_taken"===t.error?k(be.nameTaken):g(true)})}function N(e,t){var a=t.maxLength;var r=Object(A["trim"])(e);if(!r)return be.required;if(a&&r.length>a)return be.maxLength;return}function P(e){g(false);s(e);var t=N(e,{maxLength:ve});k(t)}function M(e){g(false);u(e);var t=N(e,{maxLength:fe});I(t)}return S.a.createElement(oe["a"],{labelledby:"request_workspace__title-bar",centered:true,closeModal:t},S.a.createElement(le["h"],null,S.a.createElement(le["j"],{id:"request_workspace__title-bar",title:me.t("Request creation of a new workspace")})),S.a.createElement(le["d"],null,S.a.createElement(le["e"],null,b&&S.a.createElement(ce["a"],{level:"error",className:"margin_bottom_100"},me.t("Sorry! Something went wrong. Please try again.",{fallbackHash:"48faa2ac6ac6d273cd7dacbe15a5b6f7e1822087",fallbackHashNs:"edit_profile"})),S.a.createElement("p",null,me.t("To create a new workspace, you\u2019ll need to send a request to an organization administrator. Before sending this request, be sure to check the Find Workspaces list to see whether a similar workspace already exists.")),S.a.createElement(ue["a"],{htmlFor:"p-request-workspace__name_input",id:"p-request-workspace__name_label",text:me.t("Workspace Name")},S.a.createElement(de["a"],{ariaDescribedby:"p-request-workspace__name_label",id:"p-request-workspace__name_input",name:"workspace_name",size:"large",useInlineAlert:true,onChange:P,errorText:O===be.nameTaken?me.t("That workspace name is already taken.",{fallbackHash:"26cf402314e8bf926ba97077c467adcadb1c715e",fallbackHashNs:"enterprise_dashboard"}):void 0,value:i,isRequired:true,minCharacterLimit:1,maxCharacterLimit:ve})),S.a.createElement(ue["a"],{htmlFor:"p-request-workspace__message_input",id:"p-request-workspace__message_label",text:me.t("Message to administrators")},S.a.createElement(pe["a"],{ariaDescribedby:"p-request-workspace__message_label",id:"p-request-workspace__message_input",name:"workspace_message",size:"large",useInlineAlert:true,onChange:M,value:c,isRequired:true,minCharacterLimit:1,maxCharacterLimit:fe})))),S.a.createElement(le["f"],null,S.a.createElement(le["g"],null,S.a.createElement(le["c"],{"data-qa":"request_workspace_dialog_cancel_button",type:"outline"},me.t("Cancel")),S.a.createElement(le["c"],{"data-qa":"request_workspace_dialog_go_button",onClick:T,loading:m,disabled:!!(j||O||b)},me.t("Send Request")))))}ge.displayName="RequestWorkspaceDialog";ge.defaultProps=he;var _e={closeModal:function e(){return L["closeModal"].apply(void 0,arguments)},requestCreateWorkspaceApi:function e(){return z["w"].apply(void 0,arguments)}};var ye=Object(T["connect"])(null,_e)(ge);var Oe=ye;var ke=a(1425);var Ee=a(1076);var Ce=a(1865);var Se=a(117);var we=a(1871);var je=a(24);var Ie=a(256);var Te=a(3298);function Ae(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function Ne(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ae(Object(a),true).forEach(function(t){u()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ae(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Pe=new W["b"]("workspace_directory");var Me={callLeaveWorkspace:A["noop"],onClose:A["noop"],onActionResolve:A["noop"],onActionReject:A["noop"],fetchEnterpriseTeamById:A["noop"],onLeaveReject:A["noop"],onLeaveResolve:A["noop"],onDone:A["noop"],fetchTeam:A["noop"],isGuest:false,displayDirectoryInModal:false,channelRedirect:null,postLaunchAction:null,userIdFromURL:null,isFromSharedChannelInvite:false};var De=function(e){k()(t,e);function t(e){var a;p()(this,t);a=h()(this,f()(t).call(this,e));a.state={team:{},loading:false};a.onWorkspaceLeave=a.onWorkspaceLeave.bind(g()(a));a.setLoading=a.setLoading.bind(g()(a));return a}y()(t,[{key:"componentDidMount",value:function e(){var t=this.props.team;this.setWorkspace(t);this.fetchWorkspaceInfo()}},{key:"onWorkspaceLeave",value:function e(t){var a=this.props,r=a.team,n=a.onLeaveReject,i=a.onLeaveResolve,s=a.onDone;t.preventDefault();return this.props.callLeaveWorkspace({teamId:r.id}).then(function(){return i({workspace:Ne({},r,{is_member:false})})}).then(function(){return s()}).catch(function(e){return n({node:S.a.createElement("span",null,Pe.rt("Workspace couldn\u2019t be left. Please reload and try again.")),err:e})})}},{key:"getTitleAria",value:function e(){var t=this.state.team.name,a=void 0===t?"":t;if(!a)return"Workspace Name";return a}},{key:"setLoading",value:function e(t){this.setState(function(){return{loading:t}})}},{key:"setWorkspace",value:function e(t,a){this.setState(function(){return{team:t}},a)}},{key:"canLeaveWorkspace",value:function e(){var t=this.state.team,a=t.is_member,r=t.can_leave;var n=this.props.isGuest;return a&&r&&!n}},{key:"fetchWorkspaceInfo",value:function e(){var t=this;var a=this.props.team.id;this.setLoading(true);return this.props.fetchEnterpriseTeamById({teamId:a,additionalOptions:{include_admins:true}}).then(function(e){t.setWorkspace(e,function(){return t.setLoading(false)})})}},{key:"listifyAdminRealNames",value:function e(t){var a=Object(A["map"])(t,function(e){return Object(R["getMemberRealName"])(e)});return Object(W["i"])(a,{noEscape:true})}},{key:"renderButton",value:function e(){var t=this.props,a=t.onActionReject,r=t.onActionResolve,n=t.isFromSharedChannelInvite;var i=this.state,s=i.team,o=i.loading;if(o)return null;var l=Object(M["isSSB"])()||Object(Y["a"])()&&Object(J["b"])();var c=!l;return S.a.createElement(we["a"],{team:s,customClasses:"margin_top_100",buttonContext:"dialog",onActionReject:a,onActionResolve:r,anchorPage:"workspace_directory",size:"medium",doLaunchInNewTab:c,channelRedirect:this.props.channelRedirect,postLaunchAction:this.props.postLaunchAction,userIdFromURL:this.props.userIdFromURL,doUpsertJoin:true,preventAppLaunch:n})}},{key:"renderDialogBody",value:function e(){if(this.state.loading)return this.renderInfiniteSpinner();var t=this.state.team,a=t.description,r=t.admins,n=t.user_counts;var i=[];a&&i.push({heading:Pe.t("About"),text:a,key:"dialog-description"});i.push({heading:Pe.t("Active members"),text:Pe.t("{activeMembers}",{activeMembers:Object(W["n"])(Object(A["get"])(n,"active_members",0))}),key:"dialog-active-members"},{heading:Pe.t("Workspace admins"),text:this.listifyAdminRealNames(r),key:"dialog-admins"});var s=function e(t){return S.a.createElement("div",{key:t.key},S.a.createElement("p",{className:"margin_bottom_25 bold"},t.heading),S.a.createElement("p",null,t.text))};return S.a.createElement("div",{className:"p-workspace_directory_dialog__body"},i.map(function(e){return s(e)}))}},{key:"renderDialogFooter",value:function e(){return S.a.createElement(je["c"],{className:"p-workspace_directory_dialog__leave",onClick:this.onWorkspaceLeave},Pe.t("Leave this workspace"))}},{key:"renderDialogHeader",value:function e(t){var a=this.state.team;var r=a.name,n=void 0===r?"":r,i=a.domain,s=void 0===i?"":i;var o=I()("p-workspace_directory_dialog__header",{"p-workspace_directory_dialog__header--mobile":Object(Ie["c"])()});return S.a.createElement("div",{className:o},S.a.createElement(re["a"],{entityType:"workspace",dimension:100,entityData:a,featureReactMessages:true}),S.a.createElement("div",{className:"p-workspace_directory_dialog__name"},Pe.t("{name}",{name:Object(W["q"])(n)})),S.a.createElement("div",{className:"p-workspace_directory_dialog__domain"},Pe.t("{domain}.slack.com",{domain:s})),this.renderDialogHeaderCaption(t),this.renderButton())}},{key:"renderDialogHeaderCaption",value:function e(t){var a=this.state.loading;if(a)return null;if(!t)return null;return S.a.createElement("span",{className:"p-workspace_directory_dialog__caption"},S.a.createElement(Z["b"],{size:"inherit",type:"exclamation-circle",align:"baseline",className:"margin_right_25"}),t)}},{key:"renderDialogOnMobile",value:function e(t){var a=this.canLeaveWorkspace();return S.a.createElement(ne["a"],{showCancelButton:false,showCloseButton:false,showGoButton:false,position:"fixed",modalBodyClasses:"p-workspace_directory_dialog--mobile"},this.renderDialogHeader(t),S.a.createElement("div",{className:"p-workspace_directory_dialog__contents--mobile"},this.renderDialogBody(),a&&this.renderDialogFooter()))}},{key:"renderInfiniteSpinner",value:function e(){return S.a.createElement("div",{className:"overflow_hidden margin_100"},S.a.createElement(ae["a"],{size:"jumbo",className:"inline_block full_width"}))}},{key:"render",value:function e(){var t=this.state.team;var a=Object(Ie["f"])(t,{context:"dialog"});if(Object(Ie["c"])())return this.renderDialogOnMobile(a);var r=this.props.displayDirectoryInModal;var n=I()("p-workspace_directory_dialog",{"p-workspace_directory_dialog--focus_ring":!r});var i={contentLabel:a,className:n,showCloseButton:true,showCancelButton:false,showGoButton:false,showHeader:true,title:this.renderDialogHeader(a),titleAria:this.getTitleAria(),useSlackScrollbar:false,showFooter:false,shouldCloseOnOverlayClick:true,invertCloseButton:true};this.canLeaveWorkspace()&&(i=Ne({},i,{showFooter:true,footerText:this.renderDialogFooter()}));return S.a.createElement(Se["a"],i,this.renderDialogBody())}}]);return t}(C["Component"]);De.displayName="WorkspaceDirectoryDialog";De.defaultProps=Me;var xe={callLeaveWorkspace:z["f"],fetchEnterpriseTeamById:z["n"]};var Re=Object(T["connect"])(null,xe)(De);var Fe=Re;var Le=a(1388);var Ue=a(914);var Be=a(3300);var qe={scrollElement:window,onScroll:A["noop"],renderWorkspaceCard:A["noop"],topOffset:0};var Ge=function(e){k()(t,e);y()(t,null,[{key:"getUpdatedRowIndex",value:function e(t){var a=t.currentRow,r=void 0===a?0:a,n=t.prevColumns,i=void 0===n?0:n,s=t.updatedColumns,o=void 0===s?0:s;if(!r)return 0;if(i===o)return r;var l=r*i;return Math.floor(l/o)}}]);function t(e){var a;p()(this,t);a=h()(this,f()(t).call(this,e));Object(N["a"])(g()(a),["onScroll","onResize","setListRef","getListKeys","renderRow","renderCell"]);a.state={columns:3};a.list=null;a.keys=[];a.rowsByIndex=[];a.currentRow=0;return a}y()(t,[{key:"componentDidMount",value:function e(){window.addEventListener("resize",this.onResize);this.calculateColumns()}},{key:"componentDidUpdate",value:function e(a,r){if(this.state.columns!==r.columns){var n=t.getUpdatedRowIndex({currentRow:this.currentRow,prevColumns:r.columns,updatedColumns:this.state.columns});this.currentRow=n;var i=this.getKeyForRow(n);this.keys.length&&this.list.scrollToKey(i)}}},{key:"componentWillUnmount",value:function e(){window.removeEventListener("resize",this.onResize)}},{key:"onResize",value:function e(){var t=this.list.getVisibleRange(),a=t.start;this.currentRow=a||0;this.calculateColumns()}},{key:"onScroll",value:function e(t){return this.props.onScroll(t)}},{key:"getContentHeight",value:function e(){return this.list.getContentHeight()}},{key:"getKeyForRow",value:function e(t){return this.keys[t]}},{key:"getListKeys",value:function e(){return this.keys}},{key:"getWorkspacesByRowIndex",value:function e(t){var a=this.state.columns;var r=this.props.workspaces;var n=this.rowsByIndex[t];var i=Math.min(n+a,r.length);return Object(A["range"])(n,i)}},{key:"setColumns",value:function e(t){this.setState(function(){return{columns:t}})}},{key:"setListRef",value:function e(t){this.list=t}},{key:"calculateColumns",value:function e(){var t=window.innerWidth;var a=3;a=Object(Ie["c"])(t)?1:Object(Ie["d"])(t)?2:3;this.state.columns!==a&&this.setColumns(a)}},{key:"renderCell",value:function e(t){var a=this.props,r=a.workspaces,n=a.renderWorkspaceCard;var i=r[t];if(!i)return null;return S.a.createElement("div",{className:"p-workspace_grid_list__cell",key:"grid_list_cell_"+t},n(i))}},{key:"renderRow",value:function e(t){var a=this;var r=this.getWorkspacesByRowIndex(t);var n=I()("p-workspace_grid_list__row",{"p-workspace_grid_list__row--one_column":1===this.state.columns});return S.a.createElement("div",{className:n},r.map(function(e){return a.renderCell(e)}))}},{key:"render",value:function e(){var t=this.props,a=t.topOffset,r=t.scrollElement,i=s()(t,["topOffset","scrollElement"]);this.rowsByIndex=Object(A["range"])(0,this.props.workspaces.length,this.state.columns);this.keys=this.rowsByIndex.map(function(e){return e.toString()});return S.a.createElement(Ue["a"],n()({keys:this.getListKeys(),rowRenderer:this.renderRow,ref:this.setListRef,scrollElement:this.props.scrollElement,onScroll:this.onScroll,topOffset:this.props.topOffset},i))}}]);return t}(C["PureComponent"]);Ge.displayName="WorkspaceGridList";Ge.defaultProps=qe;var He=Ge;var We=He;var Ve=a(649);var Ke=a(57);var ze=a(1685);var Qe=a(3302);var Ye=new W["b"]("workspace_directory");var Je={isMobileView:false,displayManageOrgButton:false,displaySearchBar:false,prefCompliantMemberName:"",organizationUrl:"",selectedSearchOption:{},onOptionSelected:A["noop"],onClearHeaderInput:A["noop"]};var Xe=function(e){k()(t,e);function t(e){var a;p()(this,t);a=h()(this,f()(t).call(this,e));Object(N["a"])(g()(a),["maybeRenderSearchBar","onSelectOption","onMenuItemSelected","renderUserMenu","renderUserSettings"]);return a}y()(t,[{key:"onMenuItemSelected",value:function e(t){var a=window.location.origin+"/account/settings";switch(t){case"settings":window.open(a,"_self");break;default:}return null}},{key:"onSelectOption",value:function e(t){this.props.onOptionSelected(t)}},{key:"maybeRenderManageOrganizationButton",value:function e(){if(!this.props.displayManageOrgButton)return null;var t=Ye.t("Manage Organization",{fallbackHash:"35677e6e3c1751d4a193cc6db0f31a75016c019f"});return S.a.createElement(je["d"],{"data-qa":"ws_directory_manage_org_button",className:"p-workspace_directory_header__manage_org no_underline nudge_bottom_1",type:"outline",href:"/manage",target:"_blank"},t)}},{key:"maybeRenderSearchBar",value:function e(){var t=this.props.selectedSearchOption;if(!this.props.displaySearchBar||this.props.isMobileView)return null;return S.a.createElement("div",{className:"p-workspace_directory_header__search","data-qa":"ws_directory_search_bar"},S.a.createElement(Le["a"],{prepopulatedOption:t,membersOnly:false,containerIdSelector:"directory_mount_point",triggerAction:this.onSelectOption,onClearInput:this.props.onClearHeaderInput}))}},{key:"renderAvatar",value:function e(){var t=this.props.user;return S.a.createElement(Ke["e"],{"data-qa":"ws_directory_user_menu_trigger",renderMenu:this.renderUserMenu,position:"bottom-right",offsetX:0,offsetY:7.5},S.a.createElement(je["c"],{"aria-haspopup":true,className:"p-workspace_directory_header__user_icon"},S.a.createElement(re["a"],{entityType:"member",dimension:36,entityData:t,customClasses:"flex_none cursor_pointer",featureReactMessages:true,isInteractive:false})))}},{key:"renderUserMenu",value:function e(t){var a=this;var r=this.props,i=r.prefCompliantMemberName,s=r.enterprise,o=r.signoutUrl;var l=function e(){return S.a.createElement(Ke["b"],{key:"workspace_directory_user_menu_name",label:S.a.createElement("span",{className:"black"},i),description:Ye.t("Account settings",{fallbackHash:"e32707613d1f53b92e6162cc5ddb4a9bb58a2ec6"}),href:"/account/settings",onSelected:function e(){return a.onMenuItemSelected("settings")},className:"no_underline"})};var c=function e(){return S.a.createElement(Ke["b"],{key:"workspace_directory_user_menu_sign_out",label:Ye.t("Sign out of {orgName}",{orgName:Object(W["q"])(s.name)}),href:o,className:"no_underline",showLinkIndicatorIcon:false,target:"_self",danger:true})};return S.a.createElement(Ke["f"],n()({},t,{menuClassNames:"p-workspace_directory_header__menu","data-qa":"ws_directory_user_menu"}),l(),S.a.createElement(Ke["d"],null),c())}},{key:"renderUserSettings",value:function e(){return S.a.createElement("div",{className:"p-workspace_directory_header__settings"},this.maybeRenderManageOrganizationButton(),this.renderAvatar())}},{key:"render",value:function e(){var t=this.props,a=t.enterprise,r=t.isMobileView,n=t.organizationUrl;var i=r?Ye.t("Directory"):Ye.t("Workspace Directory");return S.a.createElement(ze["a"],{"data-qa":"ws_directory_header",title:i,team:a,isEnterprise:true,logoAriaLabel:"Slack",logoLink:n,renderRightContents:this.renderUserSettings,renderCenterContents:this.maybeRenderSearchBar})}}]);return t}(C["Component"]);Xe.displayName="WorkspaceDirectoryHeader";Xe.defaultProps=Je;var Ze=function e(t,a){var r=a.user,n=a.enterprise,i=void 0===n?{}:n;return{signoutUrl:Object(U["getFromBootData"])(t,"signout_url"),prefCompliantMemberName:Object(R["getPrefCompliantMemberName"])(t,r),organizationUrl:Object(Ve["b"])(t,i.domain)}};var $e=Object(T["connect"])(Ze)(Xe);var et=$e;var tt=a(3304);var at={title:"",description:"",showCloseButton:false,onClose:A["noop"],className:"",isHidden:true};var rt=function(e){k()(t,e);function t(e){var a;p()(this,t);a=h()(this,f()(t).call(this,e));a.onClose=a.onClose.bind(g()(a));a.onKeyPress=a.onKeyPress.bind(g()(a));return a}y()(t,[{key:"onClose",value:function e(t){this.props.onClose(t)}},{key:"onKeyPress",value:function e(t){t.preventDefault();if(13===t.which)return this.props.onClose(t);return null}},{key:"renderBannerText",value:function e(){var t=this.props,a=t.title,r=t.description;return S.a.createElement("div",{className:"p-workspace_directory_banner__text"},S.a.createElement("div",{className:"p-workspace_directory_banner__title"},a),S.a.createElement("span",{className:"p-workspace_directory_banner__description"},r))}},{key:"renderCloseButton",value:function e(){var t=this.props.isHidden;return S.a.createElement(je["c"],{tabIndex:t?-1:0,className:"p-workspace_directory_banner__close_btn",onClick:this.onClose,onKeyPress:this.onKeyPress},S.a.createElement(Z["b"],{type:"times"}))}},{key:"render",value:function e(){var t=this.props,a=t.showCloseButton,r=t.className;var n=I()("p-workspace_directory_banner",r);return S.a.createElement("div",{className:n},this.renderBannerText(),a&&this.renderCloseButton())}}]);return t}(C["PureComponent"]);rt.displayName="WorkspaceDirectoryBanner";rt.defaultProps=at;var nt=rt;var it=nt;var st=a(2461);function ot(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function lt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ot(Object(a),true).forEach(function(t){u()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ot(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var ct=new W["b"]("workspace_directory");var ut={user:{},userIsAdminOrOwner:false,enqueueToast:A["noop"],openModal:A["noop"],closeModal:A["noop"],allowWorkspaceRequest:false,showRequestDialog:A["noop"],launchTeamId:null,displayDirectoryInModal:true,onClose:A["noop"],hasSeenOnboardingBanner:false,queryString:null,setUserPrefByApi:A["noop"],featureModernRequestWorkspaceDialog:false,isIAPhase1Enabled:false};var dt=300;var pt=Object(B["b"])();var mt=function(e){k()(t,e);y()(t,null,[{key:"sortListByWorkspaceName",value:function e(t){return Object(A["sortBy"])(t,function(e){return e.name})}}]);function t(e){var a;p()(this,t);a=h()(this,f()(t).call(this,e));a.state={isMobileView:false,hasScrolledPastHeaderPane:false,allWorkspaces:{totalWorkspaces:0,workspaces:[],cursorMark:null,hasApiError:false,topOffset:0},yourWorkspaces:{totalWorkspaces:0,workspaces:[],cursorMark:null,hasApiError:false,topOffset:0},searchResults:{totalWorkspaces:0,workspaces:[],cursorMark:null,hasApiError:false,topOffset:0},dialogWorkspaceDetail:null,selectedOption:null,hideOnboardingBanner:true,viewingHiddenWorkspace:false};a.dialog=null;a.headerPaneHeight=null;a.clientHeight=null;a.page=null;a.pageSearch=null;a.listRefs={allWorkspaces:null,yourWorkspaces:null};a.windowScroller=null;a.onboardingBannerHeight=0;a.trackingCode="";Object(N["a"])(g()(a),["setPageRef","setPageSearchRef","setHeaderPaneRef","setOnboardingBannerRef","onScroll","onWindowScrollerScroll","onFullscreenModalClose","onResize","openWorkspaceRequestForm","openDialog","closeDialog","onOnboardingBannerDismiss","onWorkspaceLeave","onActionResolve","onActionReject","onSelectOption","onClearHeaderInput","setToastText","setListRef","setWindowScrollerRef","renderWorkspaceCard","fetchSingleMemberToPrepopulate"]);return a}y()(t,[{key:"componentDidMount",value:function e(){this.setIsMobileView(Object(Ie["c"])());window.addEventListener("resize",this.onResize);this.clientHeight=window.innerHeight;this.setLoadingWorkspaces("allWorkspaces",true);this.setLoadingWorkspaces("yourWorkspaces",true);if(this.props.launchTeamId){this.trackingCode="workspace_url";this.fetchTeam(this.props.launchTeamId)}var t=this.props.hasSeenOnboardingBanner;this.setHideOnboardingBanner(t);Object(Ie["m"])({trackingCode:this.trackingCode,clogger:this.props.clogger,isIAPhase1Enabled:this.props.isIAPhase1Enabled});var a=this.props.queryString&&Object(A["get"])(this.props.queryString,"user",null);a&&this.fetchSingleMemberToPrepopulate(a)}},{key:"componentDidUpdate",value:function e(t,a){this.headerPane&&(this.headerPaneHeight=this.headerPane.clientHeight);var r=this.getListHeight("yourWorkspaces");r!==this.state.allWorkspaces.topOffset&&this.setListTopOffset({workspaceListKey:"allWorkspaces",topOffset:r});this.props.hasSeenOnboardingBanner||!this.onboardingBanner||this.onboardingBannerHeight||(this.onboardingBannerHeight=Object(w["findDOMNode"])(this.onboardingBanner).clientHeight);!a.hideOnboardingBanner&&this.state.hideOnboardingBanner&&this.windowScroller.updatePosition();a.selectedOption!==this.state.selectedOption&&this.fetchSearchResults();this.maybeFetchNextPage(a)}},{key:"componentWillUnmount",value:function e(){window.removeEventListener("resize",this.onResize)}},{key:"onActionReject",value:function e(t){var a=t.node,r=t.err;a&&this.setToastText(a);pt.error("Error with Workspace Action in WorkspaceDirectory - ",r)}},{key:"onActionResolve",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.node,r=t.workspace;if(r)if(r.member){this.onWorkspaceJoin({workspace:r});if(this.props.displayDirectoryInModal)return this.onFullscreenModalClose()}else r.date_requested_join&&this.onWorkspaceRequested({workspace:r});a&&this.setToastText(a);return this.closeDialog()}},{key:"onClearHeaderInput",value:function e(){var t;var a=(null===(t=this.pageSearch)||void 0===t?void 0:t.getWrappedInstance)?this.pageSearch.getWrappedInstance():this.pageSearch;(null===a||void 0===a?void 0:a.clearInput)&&a.clearInput()}},{key:"onFullscreenModalClose",value:function e(){this.dialog&&this.dialog.close();this.props.onClose&&this.props.onClose()}},{key:"onOnboardingBannerDismiss",value:function e(){this.setHideOnboardingBanner(true);this.props.setUserPrefByApi({pref:"seen_onboarding_banner",value:true}).catch(function(e){return pt.error("Error setting seen_onboarding_banner user pref",e)})}},{key:"onResize",value:function e(){this.clientHeight=window.innerHeight;this.setIsMobileView(Object(Ie["c"])());var t=this.getListHeight("yourWorkspaces");this.setListTopOffset({workspaceListKey:"allWorkspaces",topOffset:t})}},{key:"onScroll",value:function e(t){var a=t.currentTarget.scrollTop;var r=a>=this.headerPaneHeight;if(r){var n;var i=(null===(n=this.pageSearch)||void 0===n?void 0:n.getWrappedInstance)?this.pageSearch.getWrappedInstance():this.pageSearch;(null===i||void 0===i?void 0:i.blur)&&i.blur()}r!==this.state.hasScrolledPastHeaderPane&&this.setHasScrolledPastHeaderPane(r)}},{key:"onSearchAgainButtonClick",value:function e(){var t;var a=(null===(t=this.pageSearch)||void 0===t?void 0:t.getWrappedInstance)?this.pageSearch.getWrappedInstance():this.pageSearch;(null===a||void 0===a?void 0:a.onSearchAgainTriggered)&&a.onSearchAgainTriggered()}},{key:"onSelectOption",value:function e(t){this.setSearchResultsOptions(t)}},{key:"onWindowScrollerScroll",value:function e(t){var a=t.scrollTop;this.doInfiniteScrollHandler({scrollTop:a})}},{key:"onWorkspaceJoin",value:function e(a){var r=this;var n=a.workspace;this.setState(function(e){var a=r.maybeUpsertWorkspaceToSearchResults(e,n);var i=e.yourWorkspaces.workspaces;var s=Object(A["unionBy"])([n],i,"id");var o=e.yourWorkspaces.totalWorkspaces+1;var l={yourWorkspaces:lt({},e.yourWorkspaces,{workspaces:t.sortListByWorkspaceName(s),totalWorkspaces:o}),searchResults:lt({},e.searchResults,{workspaces:t.sortListByWorkspaceName(a)})};return l})}},{key:"onWorkspaceLeave",value:function e(a){var r=this;var n=a.workspace;this.setState(function(e){var a=r.maybeUpsertWorkspaceToSearchResults(e,n);var i=e.yourWorkspaces.workspaces;var s=Object(A["filter"])(i,function(e){return e.id!==n.id});var o=e.yourWorkspaces.totalWorkspaces-1;var l=e.allWorkspaces.workspaces;var c=Object(A["unionBy"])([n],l,"id");var u={yourWorkspaces:lt({},e.yourWorkspaces,{workspaces:s,totalWorkspaces:o}),allWorkspaces:lt({},e.allWorkspaces,{workspaces:t.sortListByWorkspaceName(c)}),searchResults:lt({},e.searchResults,{workspaces:t.sortListByWorkspaceName(a)})};return u},function(){r.closeDialog()})}},{key:"onWorkspaceRequested",value:function e(t){var a=t.workspace;if(!a)return;this.setState(function(e){var t=l()(e.allWorkspaces.workspaces);var r=Object(A["findIndex"])(t,function(e){return e.id===a.id});if(r<0)return null;t[r]=a;var n={allWorkspaces:lt({},e.allWorkspaces,{workspaces:t})};return n})}},{key:"getListHeading",value:function e(t){var a=this.state.selectedOption;if("allWorkspaces"===t){var r=this.state.allWorkspaces.totalWorkspaces;var n=this.state.yourWorkspaces.totalWorkspaces;return ct.t("Browse {numWorkspaces, plural, =1 {# workspace} other {# workspaces}}",{numWorkspaces:Math.max(r-n,0)})}if("yourWorkspaces"===t)return ct.t("Your Workspaces");if("searchResults"===t){var i=this.state.searchResults,s=i.loadingWorkspaces,o=i.totalWorkspaces;var l=Object(A["get"])(a,"selectedOptionData");if(s)return null;if("member"===Object(A["get"])(a,"type")){var c=Object(R["getMemberRealName"])(l);var u=ct.t("{memberName} is in {workspaceCount, plural, =1 {# workspace} other {# workspaces}}",{memberName:c,workspaceCount:o});return S.a.createElement(S.a.Fragment,null,S.a.createElement(re["a"],{entityType:"member",dimension:28,entityData:l,customClasses:"margin_right_75",featureReactMessages:true,isInteractive:false}),u)}if("workspace"===Object(A["get"])(a,"type")&&0===o)return ct.t("No workspaces found matching \u201c{searchQuery}\u201d",{searchQuery:"SEARCH QUERY"});if((!Object(A["get"])(a,"type")||l.id===Ie["b"])&&o>0)return ct.t("{workspaceCount, plural, =1 {# workspace} other {# workspaces}} matching \u201c{searchQuery}\u201d",{workspaceCount:o,searchQuery:Object(A["get"])(l,"displayValue")});if("workspace"===Object(A["get"])(a,"type")&&o>0)return ct.t("{workspaceCount, plural, =1 {# workspace} other {# workspaces}} matching \u201c{workspaceName}\u201d",{workspaceCount:o,workspaceName:Object(A["get"])(a,"selectedOptionData.name")})}return""}},{key:"getListHeight",value:function e(t){return this.listRefs[t]?this.listRefs[t].getContentHeight():0}},{key:"getWorkspaceListTopOffset",value:function e(t){return this.state[t]?this.state[t].topOffset:0}},{key:"getWorkspacesForList",value:function e(t){if("allWorkspaces"===t){var a=this.state.allWorkspaces.workspaces;var r=this.state.yourWorkspaces.workspaces;return Object(A["differenceBy"])(a,r,"id")}if("yourWorkspaces"===t)return this.state.yourWorkspaces.workspaces;if("searchResults"===t)return this.state.searchResults.workspaces;return[]}},{key:"setDialogWorkspaceDetail",value:function e(t,a){this.setState(function(){return{dialogWorkspaceDetail:t}},a)}},{key:"setHasApiError",value:function e(t,a){this.setState(function(e){return u()({},t,lt({},e[t],{hasApiError:a}))})}},{key:"setHasScrolledPastHeaderPane",value:function e(t){this.setState(function(){return{hasScrolledPastHeaderPane:t}})}},{key:"setHeaderPaneRef",value:function e(t){this.headerPane=t}},{key:"setHideOnboardingBanner",value:function e(t){this.setState(function(){return{hideOnboardingBanner:t}})}},{key:"setIsMobileView",value:function e(t){this.setState(function(){return{isMobileView:t}})}},{key:"setListRef",value:function e(t){var a=t.workspaceListKey,r=t.ref;this.listRefs[a]=r}},{key:"setListTopOffset",value:function e(t){var a=t.workspaceListKey,r=t.topOffset;this.setState(function(e){return u()({},a,lt({},e[a],{topOffset:r}))})}},{key:"setLoadingWorkspaces",value:function e(t,a){this.setState(function(e){return u()({},t,lt({},e[t],{loadingWorkspaces:a}))})}},{key:"setOnboardingBannerRef",value:function e(t){this.onboardingBanner=t}},{key:"setPageRef",value:function e(t){this.page=t}},{key:"setPageSearchRef",value:function e(t){this.pageSearch=t}},{key:"setSearchResultsOptions",value:function e(t){this.setState(function(){return{searchResults:{totalWorkspaces:0,workspaces:[],cursorMark:null,hasApiError:false,topOffset:0},selectedOption:t}})}},{key:"setToastText",value:function e(t){this.props.enqueueToast({element:S.a.createElement($["b"],{position:"bottom-right",offsetY:50},t)})}},{key:"setViewingHiddenWorkspace",value:function e(t){this.setState(function(){return{viewingHiddenWorkspace:t}})}},{key:"setWindowScrollerRef",value:function e(t){this.windowScroller=t}},{key:"setWorkspaceFetchOptions",value:function e(t,a){var r=a.workspaces,n=void 0===r?[]:r,i=a.totalWorkspaces,s=void 0===i?0:i,o=a.onWorkspaces,l=void 0!==o&&o,c=a.nextCursorMark,d=void 0===c?null:c;this.setState(function(e){return u()({},t,lt({},e[t],{workspaces:n,totalWorkspaces:s,onWorkspaces:l,nextCursorMark:d}))})}},{key:"closeDialog",value:function e(){this.props.displayDirectoryInModal||window.history.replaceState({},"","/")}},{key:"doInfiniteScrollHandler",value:function e(t){var a=t.scrollTop;var r=this.hasFetchedAllWorkspaces("yourWorkspaces")?"allWorkspaces":"yourWorkspaces";var n=this.getListHeight("yourWorkspaces");"allWorkspaces"===r&&(n+=this.getListHeight("allWorkspaces"));var i=this.hasScrolledWithinScrollThreshold({scrollTop:a,scrollHeight:n});i&&!this.hasFetchedAllWorkspaces(r)?this.setLoadingWorkspaces(r,true):!i&&this.hasFetchedAllWorkspaces(r)&&this.setLoadingWorkspaces(r,false)}},{key:"fetchSearchResults",value:function e(){var t=this.state.selectedOption,a=t.selectedOptionData,r=t.type;var n={};if(!a)return;this.setLoadingWorkspaces("searchResults",true);if(Object(A["get"])(a,"id")===Ie["b"])n.searchTerm=a.displayValue;else{n.id=a.id;n.type="member"===r?"single_user":"single_workspace"}Object(Ie["j"])({searchType:r,clogger:this.props.clogger});this.fetchWorkspacesWithArgs(n)}},{key:"fetchSingleMemberToPrepopulate",value:function e(t){var a=this;this.props.fetchRawMembersFromAPI({ids:[t]}).then(function(e){var t={selectedOption:{selectedOptionData:e.members[0],type:"member"}};a.setState(t)})}},{key:"fetchTeam",value:function e(t){var a=this;return this.props.fetchEnterpriseTeamById({teamId:t}).then(function(e){a.setSearchResultsOptions({selectedOptionData:e,type:"workspace"});a.openDialog({team:e})}).catch(function(e){a.setViewingHiddenWorkspace(true);pt.error("Error fetching workspace detail for launch_team_id -",e)})}},{key:"fetchWorkspaces",value:function e(){var t=this;var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=a.additionalOptions,n=a.workspaceListKey,i=void 0===n?"allWorkspaces":n;var s=this.state[i].nextCursorMark;this.setHasApiError(i,false);return this.props.fetchDirectoryWorkspaces(lt({nextCursorMark:s},r)).then(function(e){var a=e.num_found,r=e.on_workspaces,n=e.items;var o=n;s&&(o=Object(A["unionBy"])(t.state[i].workspaces,o,"id"));t.setWorkspaceFetchOptions(i,{workspaces:o,totalWorkspaces:a,onWorkspaces:r,nextCursorMark:e.next_cursor_mark});t.setLoadingWorkspaces(i,false)}).catch(function(e){t.setHasApiError(i,true);t.setLoadingWorkspaces(i,false);pt.error("WorkspaceDirectory: Error in FetchWorkspaces -",e)})}},{key:"fetchWorkspacesWithArgs",value:function e(t){var a=t.type,r=t.id,n=t.searchTerm;var i=this.props.user.id;var s=this.state.selectedOption;var o=Object(A["isEmpty"])(s);var l=r===i&&o?"yourWorkspaces":"searchResults";return this.fetchWorkspaces({workspaceListKey:l,additionalOptions:{type:a,id:r,searchTerm:n}})}},{key:"hasFetchedAllWorkspaces",value:function e(t){return this.state[t].workspaces.length>=this.state[t].totalWorkspaces}},{key:"hasScrolledWithinScrollThreshold",value:function e(t){var a=t.scrollHeight,r=t.scrollTop;return a-(r+this.clientHeight)<dt}},{key:"isFromSharedChannelInvite",value:function e(){var t=Object(Ee["c"])("post_signin");var a=false;if(t){t=decodeURIComponent(t);var r=JSON.parse(t);a="shared_channel_invite"===r.context}return a}},{key:"maybeFetchNextPage",value:function e(t){!t.allWorkspaces.loadingWorkspaces&&this.state.allWorkspaces.loadingWorkspaces&&this.fetchWorkspaces();!t.yourWorkspaces.loadingWorkspaces&&this.state.yourWorkspaces.loadingWorkspaces&&this.fetchWorkspacesWithArgs({id:this.props.user.id,type:"single_user"})}},{key:"maybeUpsertWorkspaceToSearchResults",value:function e(t,a){var r=Object(A["get"])(t.searchResults,"workspaces",[]);var n=Object(A["find"])(r,function(e){return a.id===e.id});return n?Object(A["unionBy"])([a],r,"id"):r}},{key:"openDialog",value:function e(t){var a=this;var r=t.team;this.props.displayDirectoryInModal||window.history.replaceState({},"","/workspace/"+r.id);Object(Ie["n"])({teamId:r.id,trackingCode:this.trackingCode,clogger:this.props.clogger});this.setDialogWorkspaceDetail(r,function(){a.dialog=a.props.openModal({element:a.renderDialog(),isStackable:true,name:"find-more-workspaces-info"})})}},{key:"openWorkspaceRequestForm",value:function e(){var t=this;var a=this.props,r=a.showRequestDialog,n=a.featureModernRequestWorkspaceDialog,i=a.openModal;n?i({element:S.a.createElement(Oe,null),isStackable:true}):r({displayModernToast:function e(a){var r=a.type,n=a.errorType,i=a.teamName;var s=Object(Ie["g"])({type:r,errorType:n,teamName:i});t.setToastText(S.a.createElement("div",{className:"display_flex"},"success"===r&&S.a.createElement(Z["b"],{type:"check-circle-o",className:"margin_right_50 sk_lilypad_green"}),S.a.createElement("span",null,s)))}})}},{key:"renderAllWorkspaces",value:function e(t){return this.renderList({listProps:t,workspaceListKey:"allWorkspaces"})}},{key:"renderDialog",value:function e(){var t=this.state,a=t.dialogWorkspaceDetail,r=t.displayDirectoryInModal;var n=this.props.user;var i=Object(A["get"])(this.props.queryString,"channel",null);var s=Object(A["get"])(this.props.queryString,"action",null);var o=Object(A["get"])(this.props.queryString,"user",null);var l=Object(R["isGuest"])(n);var c=this.isFromSharedChannelInvite();return S.a.createElement(Fe,{team:a,displayDirectoryInModal:r,onClose:this.closeDialog,onActionResolve:this.onActionResolve,onActionReject:this.onActionReject,onLeaveResolve:this.onWorkspaceLeave,onLeaveReject:this.onActionReject,isGuest:l,channelRedirect:i,postLaunchAction:s,userIdFromURL:o,isFromSharedChannelInvite:c})}},{key:"renderDirectoryInModal",value:function e(){var t=this.props.enterprise;var a=I()("p-workspace_directory__page","p-workspace_directory__page--modal_view");return S.a.createElement(ne["a"],{onCancel:this.onFullscreenModalClose,showCancelButton:false,showGoButton:false,title:ct.t("Workspaces at {orgName}",{orgName:t.name,__react:true}),position:"fixed",modalBodyClasses:"p-workspace_directory__modal_body",modalClasses:"p-workspace_directory_modal",fullBleedModalBodyContent:true,withHeader:true},S.a.createElement("div",{className:a,onScroll:this.onScroll,ref:this.setPageRef},this.renderDirectoryPage()))}},{key:"renderDirectoryLists",value:function e(t){var a=this.state.selectedOption;var r=t.onChildScroll,n=t.registerChild,i=s()(t,["onChildScroll","registerChild"]);var o=lt({onScroll:r,scrollElement:this.page},i);var l=!!Object(A["get"])(a,"selectedOptionData");if(l)return S.a.createElement("div",{ref:n},this.renderSearchResults(o));return S.a.createElement("div",{ref:n},this.renderYourWorkspaces(o),this.renderAllWorkspaces(o))}},{key:"renderDirectoryPage",value:function e(){var t=this.props.user;var a=this.state.viewingHiddenWorkspace;var r=this.state.allWorkspaces,n=r.workspaces,i=r.loadingWorkspaces;var s=this.state.yourWorkspaces,o=s.workspaces,l=s.loadingWorkspaces;var c=!l&&Object(A["isEmpty"])(o);var u=!i&&Object(A["isEmpty"])(n);if(c&&Object(R["isGuest"])(t))return this.renderEmptyState({isZeroWorkspaceGuest:true});if(u&&c)return this.renderEmptyState({isZeroWorkspaceOrg:true});if(a)return this.renderEmptyState({isHiddenWorkspace:true});return S.a.createElement("div",{className:"p-workspace_directory",id:"workspace_directory"},this.renderWorkspaceDirectoryHeaderPane(),this.renderWorkspaceDirectoryBody())}},{key:"renderEmptyState",value:function e(t){var a=this.props.enterprise;return S.a.createElement("div",{className:"p-workspace_directory__empty_state_container"},S.a.createElement(Ot,n()({enterprise:a},t)))}},{key:"renderInfiniteSpinner",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.renderFullPage;var r=I()("p-workspace_directory__spinner",{"p-workspace_directory__spinner--fs":!!a});return S.a.createElement("div",{className:r},S.a.createElement(ae["a"],{size:"jumbo",className:"inline_block full_width margin_top_200"}))}},{key:"renderList",value:function e(t){var a=this;var r=t.listProps,i=t.workspaceListKey;var s=this.getWorkspacesForList(i);var o=this.state[i].loadingWorkspaces;if("searchResults"===i&&Object(A["isEmpty"])(s)&&!o)return this.renderSearchEmptyState();if(Object(A["isEmpty"])(s)&&!o)return null;var l=this.getWorkspaceListTopOffset(i);var c=this.getListHeading(i);return S.a.createElement(S.a.Fragment,null,this.renderListHeading(c),S.a.createElement("div",{className:"p-workspace_directory__list"},S.a.createElement(We,n()({scrollElement:this.page,workspaces:s,renderWorkspaceCard:this.renderWorkspaceCard,topOffset:l,ref:function e(t){return a.setListRef({workspaceListKey:i,ref:t})}},r))),o&&this.renderInfiniteSpinner())}},{key:"renderListHeading",value:function e(t){return S.a.createElement("p",{className:"p-workspace_directory__list_title"},t)}},{key:"renderOnboardingBanner",value:function e(){var t=this.props.hasSeenOnboardingBanner;if(t)return null;var a=this.state.hideOnboardingBanner;var r=I()("p-workspace_directory__banner","p-workspace_directory__banner--onboarding",{"p-workspace_directory__banner--hidden":a});var n=ct.t("Workspaces are where you and your teammates communicate and get work done. To get started, find your team\u2019s workspace.");return S.a.createElement(it,{title:ct.t("What is a workspace?"),description:n,className:r,onClose:this.onOnboardingBannerDismiss,isHidden:a,showCloseButton:true,ref:this.setOnboardingBannerRef})}},{key:"renderSearchEmptyState",value:function e(){var t=this;var a=this.state,r=a.searchResults,n=a.selectedOption;var i=Object(A["get"])(n,"selectedOptionData");var s;var o;if(Object(Ie["h"])(i)){var l=Object(A["get"])(r,"totalWorkspaces");var c=Object(A["get"])(r,"onWorkspaces");var u=Object(R["getMemberRealName"])(i);if(Object(ke["c"])({totalWorkspaces:l,onWorkspaces:c})&&!Object(ke["b"])({totalWorkspaces:l,onWorkspaces:c})){s=ct.t("{memberName} hasn\u2019t joined any workspaces",{memberName:u});o=ct.rt("Try <a>searching for someone else</a> on your team, or for a specific workspace",null,function(e){var a=e.text,r=e.key,n=e.tag;if("a"===n)return S.a.createElement(te["a"],{onClick:function e(){return t.onSearchAgainButtonClick()},key:r},a);return{text:a}})}if(Object(ke["b"])({totalWorkspaces:l,onWorkspaces:c})){s=ct.t("{memberName} isn\u2019t in a workspace you have access to",{memberName:u});o=ct.rt("Get in touch with {memberName} to be invited to a workspace they\u2019re in, or try <a>searching for someone else</a> on your team.",{memberName:u},function(e){var a=e.text,r=e.key,n=e.tag;if("a"===n)return S.a.createElement(te["a"],{onClick:function e(){return t.onSearchAgainButtonClick()},key:r},a);return{text:a}})}return S.a.createElement("div",{className:"align_center"},S.a.createElement("p",{className:"p-workspace_directory__list_title inline_flex margin_top_75"},S.a.createElement(re["a"],{entityType:"member",dimension:28,entityData:i,customClasses:"margin_right_75",featureReactMessages:true}),s),S.a.createElement("p",{className:"p-workspace_directory__list_empty_state_text"},o))}s=ct.t("No workspaces found matching \u201c{searchTerm}\u201d",{searchTerm:Object(A["get"])(i,"displayValue")});o=ct.rt("Try <a>searching for another workspace</a> or searching for a teammate\u2019s workspaces.",null,function(e){var a=e.text,r=e.key,n=e.tag;if("a"===n)return S.a.createElement(te["a"],{onClick:function e(){return t.onSearchAgainButtonClick()},key:r},a);return{text:a}});return S.a.createElement("div",{className:"align_center"},S.a.createElement("p",{className:"p-workspace_directory__list_title inline_flex margin_top_75"},s),S.a.createElement("p",{className:"p-workspace_directory__list_empty_state_text"},o))}},{key:"renderSearchResults",value:function e(t){return this.renderList({listProps:t,workspaceListKey:"searchResults"})}},{key:"renderTitle",value:function e(){var t=this.props.enterprise.name;return S.a.createElement("div",{className:"p-workspace_directory__title"},ct.t("Workspaces at {name}",{name:Object(W["q"])(t)}))}},{key:"renderWorkspaceCard",value:function e(t){if(Object(A["isEmpty"])(t))return null;var a=Object(M["isSSB"])()||Object(Y["a"])()&&Object(J["b"])();var r=!a;var n=this.isFromSharedChannelInvite();return S.a.createElement(Ce["a"],{team:t,key:t.id,size:"small",onActionResolve:this.onActionResolve,onActionReject:this.onActionReject,openDialog:this.openDialog,anchorPage:"workspace_directory",doLaunchInNewTab:r,doUpsertJoin:true,isFromSharedChannelInvite:n})}},{key:"renderWorkspaceDirectoryBody",value:function e(){var t=this;var a=this.state,r=a.searchResults,n=a.hideOnboardingBanner;var i=I()("p-workspace_directory__body",{"p-workspace_directory__body--has_banner":!n});var s={};this.onboardingBannerHeight&&!n&&(s.transform="translate3d(0, "+this.onboardingBannerHeight+"px, 0)");if(!this.page)return null;return S.a.createElement(S.a.Fragment,null,this.renderOnboardingBanner(),S.a.createElement("div",{"data-js":"workspace_directory_body",className:i,style:s},S.a.createElement(P["e"],{scrollElement:this.page,onScroll:this.onWindowScrollerScroll,ref:this.setWindowScrollerRef},function(e){return t.renderDirectoryLists(e)}),!Object(A["get"])(r,"loadingWorkspaces")&&this.renderWorkspaceRequestBanner()))}},{key:"renderWorkspaceDirectoryHeader",value:function e(){var t=this.props,a=t.user,r=t.userIsAdminOrOwner,n=t.enterprise;var i=this.state,s=i.isMobileView,o=i.hasScrolledPastHeaderPane,l=i.selectedOption;return S.a.createElement(et,{enterprise:n,displayManageOrgButton:r,displaySearchBar:this.headerPane&&o,"data-js":"workspace_directory_sticky_header",user:a,isMobileView:s,selectedSearchOption:Object(A["get"])(l,"selectedOptionData"),onOptionSelected:this.onSelectOption,onClearHeaderInput:this.onClearHeaderInput})}},{key:"renderWorkspaceDirectoryHeaderPane",value:function e(){var t=this.props,a=t.displayDirectoryInModal,r=t.user;var n=I()("p-workspace_directory__header_pane",{margin_top_75:a});return S.a.createElement("div",{className:n,"data-js":"workspace_directory_header_pane",ref:this.setHeaderPaneRef},!a&&this.renderTitle(),!Object(R["isGuest"])(r)&&this.renderWorkspaceSearchInput())}},{key:"renderWorkspaceRequestBanner",value:function e(){var t=this;var a=this.props.allowWorkspaceRequest;if(!a)return null;var r=ct.rt("Your team might not be using Slack yet. You may ask your admins to <Link>create a new workspace</Link>.",null,function(e){var a=e.text;return S.a.createElement(te["a"],{onClick:t.openWorkspaceRequestForm},a)});return S.a.createElement(it,{title:ct.t("Can\u2019t find your workspace?"),description:r,className:"p-workspace_directory__banner p-workspace_directory__banner--workspace_request",onClose:A["noop"]})}},{key:"renderWorkspaceSearchInput",value:function e(){var t=this.state.selectedOption;return S.a.createElement("div",{className:"p-workspace_directory__search"},S.a.createElement(Le["a"],{containerIdSelector:"workspace_directory",ref:this.setPageSearchRef,membersOnly:false,triggerAction:this.onSelectOption,prepopulatedOption:Object(A["get"])(t,"selectedOptionData")}))}},{key:"renderYourWorkspaces",value:function e(t){return this.renderList({listProps:t,workspaceListKey:"yourWorkspaces"})}},{key:"render",value:function e(){var t=this.props.displayDirectoryInModal;var a=this.state.allWorkspaces,r=a.workspaces,n=a.loadingWorkspaces;var i=this.state.yourWorkspaces,s=i.workspaces,o=i.loadingWorkspaces;var l=o&&Object(A["isEmpty"])(s);var c=n&&Object(A["isEmpty"])(r);var u=l||c;if(t)return this.renderDirectoryInModal();return S.a.createElement("div",{className:"p-workspace_directory__wrapper"},this.renderWorkspaceDirectoryHeader(),u&&this.renderInfiniteSpinner({renderFullPage:true}),S.a.createElement("div",{className:"p-workspace_directory__page",onScroll:this.onScroll,ref:this.setPageRef},this.renderDirectoryPage()),S.a.createElement(ee["a"],null))}}]);return t}(C["Component"]);mt.displayName="WorkspaceDirectory";mt.defaultProps=ut;var ht=function e(t,a){var r=a.userId;var n=Object(D["i"])(t)||{};var i=Object(x["e"])(t,r);var s=Object(G["g"])(t,"enterprise_team_creation_request");var o=s&&s.is_enabled&&!Object(R["isGuest"])(i);var l=Object(U["isClientApp"])(t);var c=Object(q["k"])(t,"seen_onboarding_banner");var u=Object(V["a"])({state:t});return{enterprise:n,user:lt({id:r},i),userIsAdminOrOwner:Object(R["isAdminOrOwner"])(t,i),allowWorkspaceRequest:o,displayDirectoryInModal:l,hasSeenOnboardingBanner:c,clogger:u,isIAPhase1Enabled:Object(K["e"])(t),featureModernRequestWorkspaceDialog:Object(U["isFeatureEnabled"])(t,"feature_modern_request_workspace_dialog")}};var vt={enqueueToast:F["enqueueToast"],openModal:function e(){return L["openModal"].apply(void 0,arguments)},closeModal:L["closeModal"],fetchRawMembersFromAPI:Q["h"],setUserPrefByApi:H["d"],fetchEnterpriseTeamById:z["n"],fetchDirectoryWorkspaces:z["m"]};var ft=Object(T["connect"])(ht,vt,null,{areStatePropsEqual:function e(t,a){return Object(X["a"])(t,a,2)}})(mt);var bt=new W["b"]("workspace_directory");var gt={isZeroWorkspaceGuest:false,isZeroWorkspaceOrg:false,isHiddenWorkspace:false,directoryUrl:void 0};var _t=function(e){k()(t,e);function t(e){var a;p()(this,t);a=h()(this,f()(t).call(this,e));a.redirectToDirectory=a.redirectToDirectory.bind(g()(a));return a}y()(t,[{key:"redirectToDirectory",value:function e(){var t=this.props.directoryUrl;window.open(t+"/signin/find-workspaces","_self")}},{key:"renderBody",value:function e(){var t=this.props,a=t.isZeroWorkspaceGuest,r=t.isZeroWorkspaceOrg,n=t.isHiddenWorkspace;if(a)return this.renderZeroWorkspaceGuestBody();if(r)return this.renderZeroWorkspaceOrgBody();if(n)return this.renderHiddenWorkspaceBody();return null}},{key:"renderFooter",value:function e(){var t=this.props.enterprise;return S.a.createElement(te["a"],{onClick:this.redirectToDirectory,className:"p-workspace_directory_empty_state__footer"},bt.t("View all {orgName} workspaces",{orgName:Object(W["q"])(t.name)}),S.a.createElement(Z["b"],{type:"chevron-right",key:"footer-chevron-icon",inline:true}))}},{key:"renderHeading",value:function e(){var t=this.props,a=t.enterprise,r=t.isHiddenWorkspace;var n=r?bt.t("No workspace found"):bt.t("No available workspaces");return S.a.createElement("span",{className:"p-workspace_directory_empty_state__heading"},S.a.createElement("span",{className:"p-workspace_directory_empty_state__icon"},S.a.createElement(re["a"],{entityType:"org",dimension:28,entityData:a,customClasses:"flex_none",featureReactMessages:true})),n)}},{key:"renderHiddenWorkspaceBody",value:function e(){var t=this.props.enterprise;return S.a.createElement("p",{className:"p-workspace_directory_empty_state__body"},bt.t("Either this workspace doesn\u2019t exist, or you do not have access to it. If you need to be added to a workspace, contact the {orgName} IT team.",{orgName:Object(W["q"])(t.name)}))}},{key:"renderZeroWorkspaceGuestBody",value:function e(){var t=this.props.enterprise;return S.a.createElement("p",{className:"p-workspace_directory_empty_state__body"},bt.t("You have a guest account with {orgName}, which means someone needs to invite you to join a workspace. You may want to get in touch with the person who helped you create an account.",{orgName:Object(W["q"])(t.name)}))}},{key:"renderZeroWorkspaceOrgBody",value:function e(){var t=this.props.enterprise;return S.a.createElement("p",{className:"p-workspace_directory_empty_state__body"},bt.t("{orgName} doesn\u2019t have any open workspaces that you can join. If you need to be added to a workspace, contact your manager or the {orgName} IT team.",{orgName:Object(W["q"])(t.name)}))}},{key:"render",value:function e(){return S.a.createElement(S.a.Fragment,null,S.a.createElement("div",{className:"p-workspace_directory_empty_state"},this.renderHeading(),this.renderBody()),this.props.isHiddenWorkspace&&this.renderFooter())}}]);return t}(C["PureComponent"]);_t.displayName="WorkspaceDirectoryEmptyState";_t.defaultProps=gt;var yt=function e(t,a){var r=a.enterprise;return{directoryUrl:Object(Ve["b"])(t,r.domain)}};var Ot=Object(T["connect"])(yt)(_t);a.d(t,"a",function(){return Ot});var kt=t["b"]=ft},,function(e,t,a){"use strict";var r=a(88);var n=a.n(r);var i=a(6);var s={default:{tada:cdn_url+"/80588/img/unread/empty/default/1f389.png",victory:{1:cdn_url+"/80588/img/unread/empty/default/270c-fe0f.png",2:cdn_url+"/80588/img/unread/empty/default/270c-1f3fb.png",3:cdn_url+"/80588/img/unread/empty/default/270c-1f3fc.png",4:cdn_url+"/80588/img/unread/empty/default/270c-1f3fd.png",5:cdn_url+"/80588/img/unread/empty/default/270c-1f3fe.png",6:cdn_url+"/80588/img/unread/empty/default/270c-1f3ff.png"},racecar:cdn_url+"/80588/img/unread/empty/default/1f3ce-fe0f.png",rocket:cdn_url+"/80588/img/unread/empty/default/1f680.png",octopus:cdn_url+"/80588/img/unread/empty/default/1f419.png",high5:{1:cdn_url+"/80588/img/unread/empty/default/1f64c.png",2:cdn_url+"/80588/img/unread/empty/default/1f64c-1f3fb.png",3:cdn_url+"/80588/img/unread/empty/default/1f64c-1f3fc.png",4:cdn_url+"/80588/img/unread/empty/default/1f64c-1f3fd.png",5:cdn_url+"/80588/img/unread/empty/default/1f64c-1f3fe.png",6:cdn_url+"/80588/img/unread/empty/default/1f64c-1f3ff.png"},apple:cdn_url+"/80588/img/unread/empty/default/1f34f.png",sunglasses:cdn_url+"/80588/img/unread/empty/default/1f60e.png",thumbup:{1:cdn_url+"/80588/img/unread/empty/default/1f44d.png",2:cdn_url+"/80588/img/unread/empty/default/1f44d-1f3fb.png",3:cdn_url+"/80588/img/unread/empty/default/1f44d-1f3fc.png",4:cdn_url+"/80588/img/unread/empty/default/1f44d-1f3fd.png",5:cdn_url+"/80588/img/unread/empty/default/1f44d-1f3fe.png",6:cdn_url+"/80588/img/unread/empty/default/1f44d-1f3ff.png"},boom:cdn_url+"/80588/img/unread/empty/default/1f4a5.png",bee:cdn_url+"/80588/img/unread/empty/default/1f41d.png",clap:{1:cdn_url+"/80588/img/unread/empty/default/1f44f.png",2:cdn_url+"/80588/img/unread/empty/default/1f44f-1f3fb.png",3:cdn_url+"/80588/img/unread/empty/default/1f44f-1f3fc.png",4:cdn_url+"/80588/img/unread/empty/default/1f44f-1f3fd.png",5:cdn_url+"/80588/img/unread/empty/default/1f44f-1f3fe.png",6:cdn_url+"/80588/img/unread/empty/default/1f44f-1f3ff.png"},crystalball:cdn_url+"/80588/img/unread/empty/default/1f52e.png",tractor:cdn_url+"/80588/img/unread/empty/default/1f69c.png",pony:cdn_url+"/80588/img/unread/empty/default/1f434.png",chick:cdn_url+"/80588/img/unread/empty/default/1f423.png",growth:cdn_url+"/80588/img/unread/empty/default/1f331.png",sun:cdn_url+"/80588/img/unread/empty/default/2600-fe0f.png",balloon:cdn_url+"/80588/img/unread/empty/default/1f388.png",sweetpotato:cdn_url+"/80588/img/unread/empty/default/1f360.png",leafs:cdn_url+"/80588/img/unread/empty/default/1f343.png",owl:cdn_url+"/80588/img/unread/empty/default/1f989.png",books:cdn_url+"/80588/img/unread/empty/default/1f4da.png",island:cdn_url+"/80588/img/unread/empty/default/1f3dd-fe0f.png",coffee:cdn_url+"/80588/img/unread/empty/default/2615.png",footprints:cdn_url+"/80588/img/unread/empty/default/1f463.png",tea:cdn_url+"/80588/img/unread/empty/default/1f375.png",croissant:cdn_url+"/80588/img/unread/empty/default/1f950.png",art:cdn_url+"/80588/img/unread/empty/default/1f3a8.png",person_ball:{1:cdn_url+"/80588/img/unread/empty/default/26f9-fe0f-200d-2640-fe0f.png",2:cdn_url+"/80588/img/unread/empty/default/26f9-1f3fb-200d-2640-fe0f.png",3:cdn_url+"/80588/img/unread/empty/default/26f9-1f3fc-200d-2640-fe0f.png",4:cdn_url+"/80588/img/unread/empty/default/26f9-1f3fd-200d-2640-fe0f.png",5:cdn_url+"/80588/img/unread/empty/default/26f9-1f3fe-200d-2640-fe0f.png",6:cdn_url+"/80588/img/unread/empty/default/26f9-1f3ff-200d-2640-fe0f.png"},airplane:cdn_url+"/80588/img/unread/empty/default/2708-fe0f.png",sailboat:cdn_url+"/80588/img/unread/empty/default/26f5.png",ship:cdn_url+"/80588/img/unread/empty/default/1f6a2.png",bulb:cdn_url+"/80588/img/unread/empty/default/1f4a1.png",hammer:cdn_url+"/80588/img/unread/empty/default/1f528.png",checkered_flag:cdn_url+"/80588/img/unread/empty/default/1f3c1.png",wrench:cdn_url+"/80588/img/unread/empty/default/1f527.png",metro:cdn_url+"/80588/img/unread/empty/default/1f687.png",soccer:cdn_url+"/80588/img/unread/empty/default/26bd.png",trophy:cdn_url+"/80588/img/unread/empty/default/1f3c6.png",cityscape:cdn_url+"/80588/img/unread/empty/default/1f3d9-fe0f.png",dog:cdn_url+"/80588/img/unread/empty/default/1f436.png",crossed_swords:cdn_url+"/80588/img/unread/empty/default/2694-fe0f.png",blush:cdn_url+"/80588/img/unread/empty/default/1f60a.png",candy:cdn_url+"/80588/img/unread/empty/default/1f36c.png",herb:cdn_url+"/80588/img/unread/empty/default/1f33f.png",sparkles:cdn_url+"/80588/img/unread/empty/default/2728.png",check_mark:cdn_url+"/80588/img/unread/empty/default/2705.png",confetti_ball:cdn_url+"/80588/img/unread/empty/default/1f38a.png",doughnut:cdn_url+"/80588/img/unread/empty/default/1f369.png",bookmark_tabs:cdn_url+"/80588/img/unread/empty/default/1f4d1.png",sleuth:{1:cdn_url+"/80588/img/unread/empty/default/1f575-fe0f.png",2:cdn_url+"/80588/img/unread/empty/default/1f575-1f3fb-200d-2642-fe0f.png",3:cdn_url+"/80588/img/unread/empty/default/1f575-1f3fc-200d-2642-fe0f.png",4:cdn_url+"/80588/img/unread/empty/default/1f575-1f3fd-200d-2642-fe0f.png",5:cdn_url+"/80588/img/unread/empty/default/1f575-1f3fe-200d-2642-fe0f.png",6:cdn_url+"/80588/img/unread/empty/default/1f575-1f3ff-200d-2642-fe0f.png"},hourglass:cdn_url+"/80588/img/unread/empty/default/23f3.png",newspaper:cdn_url+"/80588/img/unread/empty/default/1f5de-fe0f.png",flex:{1:cdn_url+"/80588/img/unread/empty/default/1f4aa.png",2:cdn_url+"/80588/img/unread/empty/default/1f4aa-1f3fb.png",3:cdn_url+"/80588/img/unread/empty/default/1f4aa-1f3fc.png",4:cdn_url+"/80588/img/unread/empty/default/1f4aa-1f3fd.png",5:cdn_url+"/80588/img/unread/empty/default/1f4aa-1f3fe.png",6:cdn_url+"/80588/img/unread/empty/default/1f4aa-1f3ff.png"},earth_americas:cdn_url+"/80588/img/unread/empty/default/1f30e.png",chocolate_bar:cdn_url+"/80588/img/unread/empty/default/1f36b.png",wave:{1:cdn_url+"/80588/img/unread/empty/default/1f44b.png",2:cdn_url+"/80588/img/unread/empty/default/1f44b-1f3fb.png",3:cdn_url+"/80588/img/unread/empty/default/1f44b-1f3fc.png",4:cdn_url+"/80588/img/unread/empty/default/1f44b-1f3fd.png",5:cdn_url+"/80588/img/unread/empty/default/1f44b-1f3fe.png",6:cdn_url+"/80588/img/unread/empty/default/1f44b-1f3ff.png"},relieved:cdn_url+"/80588/img/unread/empty/default/1f60c.png",walking:{1:cdn_url+"/80588/img/unread/empty/default/1f6b6-200d-2640-fe0f.png",2:cdn_url+"/80588/img/unread/empty/default/1f6b6-1f3fb-200d-2640-fe0f.png",3:cdn_url+"/80588/img/unread/empty/default/1f6b6-1f3fc-200d-2640-fe0f.png",4:cdn_url+"/80588/img/unread/empty/default/1f6b6-1f3fd-200d-2640-fe0f.png",5:cdn_url+"/80588/img/unread/empty/default/1f6b6-1f3fe-200d-2640-fe0f.png",6:cdn_url+"/80588/img/unread/empty/default/1f6b6-1f3ff-200d-2640-fe0f.png"},couch_and_lamp:cdn_url+"/80588/img/unread/empty/default/1f6cb.png",unicorn_face:cdn_url+"/80588/img/unread/empty/default/1f984.png",zap:cdn_url+"/80588/img/unread/empty/default/26a1.png",star:cdn_url+"/80588/img/unread/empty/default/2b50.png"},google:{tada:cdn_url+"/80588/img/unread/empty/google/1f389.png",victory:{1:cdn_url+"/80588/img/unread/empty/google/270c-fe0f.png",2:cdn_url+"/80588/img/unread/empty/google/270c-1f3fb.png",3:cdn_url+"/80588/img/unread/empty/google/270c-1f3fc.png",4:cdn_url+"/80588/img/unread/empty/google/270c-1f3fd.png",5:cdn_url+"/80588/img/unread/empty/google/270c-1f3fe.png",6:cdn_url+"/80588/img/unread/empty/google/270c-1f3ff.png"},racecar:cdn_url+"/80588/img/unread/empty/google/1f3ce-fe0f.png",rocket:cdn_url+"/80588/img/unread/empty/google/1f680.png",octopus:cdn_url+"/80588/img/unread/empty/google/1f419.png",high5:{1:cdn_url+"/80588/img/unread/empty/google/1f64c.png",2:cdn_url+"/80588/img/unread/empty/google/1f64c-1f3fb.png",3:cdn_url+"/80588/img/unread/empty/google/1f64c-1f3fc.png",4:cdn_url+"/80588/img/unread/empty/google/1f64c-1f3fd.png",5:cdn_url+"/80588/img/unread/empty/google/1f64c-1f3fe.png",6:cdn_url+"/80588/img/unread/empty/google/1f64c-1f3ff.png"},apple:cdn_url+"/80588/img/unread/empty/google/1f34f.png",sunglasses:cdn_url+"/80588/img/unread/empty/google/1f60e.png",thumbup:{1:cdn_url+"/80588/img/unread/empty/google/1f44d.png",2:cdn_url+"/80588/img/unread/empty/google/1f44d-1f3fb.png",3:cdn_url+"/80588/img/unread/empty/google/1f44d-1f3fc.png",4:cdn_url+"/80588/img/unread/empty/google/1f44d-1f3fd.png",5:cdn_url+"/80588/img/unread/empty/google/1f44d-1f3fe.png",6:cdn_url+"/80588/img/unread/empty/google/1f44d-1f3ff.png"},boom:cdn_url+"/80588/img/unread/empty/google/1f4a5.png",bee:cdn_url+"/80588/img/unread/empty/google/1f41d.png",clap:{1:cdn_url+"/80588/img/unread/empty/google/1f44f.png",2:cdn_url+"/80588/img/unread/empty/google/1f44f-1f3fb.png",3:cdn_url+"/80588/img/unread/empty/google/1f44f-1f3fc.png",4:cdn_url+"/80588/img/unread/empty/google/1f44f-1f3fd.png",5:cdn_url+"/80588/img/unread/empty/google/1f44f-1f3fe.png",6:cdn_url+"/80588/img/unread/empty/google/1f44f-1f3ff.png"},crystalball:cdn_url+"/80588/img/unread/empty/google/1f52e.png",tractor:cdn_url+"/80588/img/unread/empty/google/1f69c.png",pony:cdn_url+"/80588/img/unread/empty/google/1f434.png",chick:cdn_url+"/80588/img/unread/empty/google/1f423.png",growth:cdn_url+"/80588/img/unread/empty/google/1f331.png",sun:cdn_url+"/80588/img/unread/empty/google/2600-fe0f.png",balloon:cdn_url+"/80588/img/unread/empty/google/1f388.png",sweetpotato:cdn_url+"/80588/img/unread/empty/google/1f360.png",leafs:cdn_url+"/80588/img/unread/empty/google/1f343.png",owl:cdn_url+"/80588/img/unread/empty/google/1f989.png",books:cdn_url+"/80588/img/unread/empty/google/1f4da.png",island:cdn_url+"/80588/img/unread/empty/google/1f3dd-fe0f.png",coffee:cdn_url+"/80588/img/unread/empty/google/2615.png",footprints:cdn_url+"/80588/img/unread/empty/google/1f463.png",tea:cdn_url+"/80588/img/unread/empty/google/1f375.png",croissant:cdn_url+"/80588/img/unread/empty/google/1f950.png",art:cdn_url+"/80588/img/unread/empty/google/1f3a8.png",person_ball:{1:cdn_url+"/80588/img/unread/empty/google/26f9-fe0f-200d-2640-fe0f.png",2:cdn_url+"/80588/img/unread/empty/google/26f9-1f3fb-200d-2640-fe0f.png",3:cdn_url+"/80588/img/unread/empty/google/26f9-1f3fc-200d-2640-fe0f.png",4:cdn_url+"/80588/img/unread/empty/google/26f9-1f3fd-200d-2640-fe0f.png",5:cdn_url+"/80588/img/unread/empty/google/26f9-1f3fe-200d-2640-fe0f.png",6:cdn_url+"/80588/img/unread/empty/google/26f9-1f3ff-200d-2640-fe0f.png"},airplane:cdn_url+"/80588/img/unread/empty/google/2708-fe0f.png",sailboat:cdn_url+"/80588/img/unread/empty/google/26f5.png",ship:cdn_url+"/80588/img/unread/empty/google/1f6a2.png",bulb:cdn_url+"/80588/img/unread/empty/google/1f4a1.png",hammer:cdn_url+"/80588/img/unread/empty/google/1f528.png",checkered_flag:cdn_url+"/80588/img/unread/empty/google/1f3c1.png",wrench:cdn_url+"/80588/img/unread/empty/google/1f527.png",metro:cdn_url+"/80588/img/unread/empty/google/1f687.png",soccer:cdn_url+"/80588/img/unread/empty/google/26bd.png",trophy:cdn_url+"/80588/img/unread/empty/google/1f3c6.png",cityscape:cdn_url+"/80588/img/unread/empty/google/1f3d9-fe0f.png",dog:cdn_url+"/80588/img/unread/empty/google/1f436.png",crossed_swords:cdn_url+"/80588/img/unread/empty/google/2694-fe0f.png",blush:cdn_url+"/80588/img/unread/empty/google/1f60a.png",candy:cdn_url+"/80588/img/unread/empty/google/1f36c.png",herb:cdn_url+"/80588/img/unread/empty/google/1f33f.png",sparkles:cdn_url+"/80588/img/unread/empty/google/2728.png",check_mark:cdn_url+"/80588/img/unread/empty/google/2705.png",confetti_ball:cdn_url+"/80588/img/unread/empty/google/1f38a.png",doughnut:cdn_url+"/80588/img/unread/empty/google/1f369.png",bookmark_tabs:cdn_url+"/80588/img/unread/empty/google/1f4d1.png",sleuth:{1:cdn_url+"/80588/img/unread/empty/google/1f575-fe0f.png",2:cdn_url+"/80588/img/unread/empty/google/1f575-1f3fb-200d-2642-fe0f.png",3:cdn_url+"/80588/img/unread/empty/google/1f575-1f3fc-200d-2642-fe0f.png",4:cdn_url+"/80588/img/unread/empty/google/1f575-1f3fd-200d-2642-fe0f.png",5:cdn_url+"/80588/img/unread/empty/google/1f575-1f3fe-200d-2642-fe0f.png",6:cdn_url+"/80588/img/unread/empty/google/1f575-1f3ff-200d-2642-fe0f.png"},hourglass:cdn_url+"/80588/img/unread/empty/google/23f3.png",newspaper:cdn_url+"/80588/img/unread/empty/google/1f5de-fe0f.png",flex:{1:cdn_url+"/80588/img/unread/empty/google/1f4aa.png",2:cdn_url+"/80588/img/unread/empty/google/1f4aa-1f3fb.png",3:cdn_url+"/80588/img/unread/empty/google/1f4aa-1f3fc.png",4:cdn_url+"/80588/img/unread/empty/google/1f4aa-1f3fd.png",5:cdn_url+"/80588/img/unread/empty/google/1f4aa-1f3fe.png",6:cdn_url+"/80588/img/unread/empty/google/1f4aa-1f3ff.png"},earth_americas:cdn_url+"/80588/img/unread/empty/google/1f30e.png",chocolate_bar:cdn_url+"/80588/img/unread/empty/google/1f36b.png",wave:{1:cdn_url+"/80588/img/unread/empty/google/1f44b.png",2:cdn_url+"/80588/img/unread/empty/google/1f44b-1f3fb.png",3:cdn_url+"/80588/img/unread/empty/google/1f44b-1f3fc.png",4:cdn_url+"/80588/img/unread/empty/google/1f44b-1f3fd.png",5:cdn_url+"/80588/img/unread/empty/google/1f44b-1f3fe.png",6:cdn_url+"/80588/img/unread/empty/google/1f44b-1f3ff.png"},relieved:cdn_url+"/80588/img/unread/empty/google/1f60c.png",walking:{1:cdn_url+"/80588/img/unread/empty/google/1f6b6-200d-2640-fe0f.png",2:cdn_url+"/80588/img/unread/empty/google/1f6b6-1f3fb-200d-2640-fe0f.png",3:cdn_url+"/80588/img/unread/empty/google/1f6b6-1f3fc-200d-2640-fe0f.png",4:cdn_url+"/80588/img/unread/empty/google/1f6b6-1f3fd-200d-2640-fe0f.png",5:cdn_url+"/80588/img/unread/empty/google/1f6b6-1f3fe-200d-2640-fe0f.png",6:cdn_url+"/80588/img/unread/empty/google/1f6b6-1f3ff-200d-2640-fe0f.png"},couch_and_lamp:cdn_url+"/80588/img/unread/empty/google/1f6cb.png",unicorn_face:cdn_url+"/80588/img/unread/empty/google/1f984.png",zap:cdn_url+"/80588/img/unread/empty/google/26a1.png",star:cdn_url+"/80588/img/unread/empty/google/2b50.png"}};var o=[{emoji:"airplane",skintone:false,lineOne:"Jetzt bist du startklar.",lineTwo:""},{emoji:"art",skintone:false,lineOne:"Alles paletti!",lineTwo:""},{emoji:"bee",skintone:false,lineOne:"Geschafft!",lineTwo:"Ganz sch\xf6n flei\xdfig."},{emoji:"books",skintone:false,lineOne:"Alles gelesen.",lineTwo:"Wie es im Buche steht."},{emoji:"boom",skintone:false,lineOne:"Du bist der Knaller!",lineTwo:""},{emoji:"bulb",skintone:false,lineOne:"Heureka!",lineTwo:"Du hast ALLES gelesen!"},{emoji:"checkered_flag",skintone:false,lineOne:"Du bist am Ziel angelangt!",lineTwo:"Du hast alles gelesen!"},{emoji:"clap",skintone:true,lineOne:"Das war das T\xfcpfelchen auf dem i.",lineTwo:""},{emoji:"croissant",skintone:false,lineOne:"Voil\xe0!",lineTwo:"Das war es auch schon."},{emoji:"crystalball",skintone:false,lineOne:"Alles klar.",lineTwo:"Die Zukunft geh\xf6rt dir!"},{emoji:"footprints",skintone:false,lineOne:"Gut gemacht.",lineTwo:"Jetzt liegt dir die Welt zu F\xfc\xdfen!"},{emoji:"hammer",skintone:false,lineOne:"Du bist der Hammer!",lineTwo:"Alles gelesen!"},{emoji:"high5",skintone:true,lineOne:"Geschafft!",lineTwo:"Das war alles."},{emoji:"metro",skintone:false,lineOne:"Hier ist das Licht am Ende des Tunnels!",lineTwo:""},{emoji:"island",skintone:false,lineOne:"Land in Sicht!",lineTwo:"Du hast alles gelesen!"},{emoji:"person_ball",skintone:true,lineOne:"Immer am Ball bleiben!",lineTwo:""},{emoji:"rocket",skintone:false,lineOne:"Du hast ein ganz sch\xf6nes Lesetempo drauf!",lineTwo:""},{emoji:"sailboat",skintone:false,lineOne:"Alles im Lot auf dem Boot.",lineTwo:""},{emoji:"sailboat",skintone:false,lineOne:"Alles in Butter auf dem Kutter!",lineTwo:""},{emoji:"ship",skintone:false,lineOne:"Klar Schiff!",lineTwo:""},{emoji:"soccer",skintone:false,lineOne:"Volltreffer! ",lineTwo:"Du hast alles gelesen!"},{emoji:"sun",skintone:false,lineOne:"Alles heiter und klar!",lineTwo:""},{emoji:"sunglasses",skintone:false,lineOne:"Alles klar!",lineTwo:""},{emoji:"tada",skintone:false,lineOne:"Ta-da !",lineTwo:"Du bist jetzt ganz sch\xf6n belesen."},{emoji:"tea",skintone:false,lineOne:"Du hast alles aufgeholt.",lineTwo:"Zeit f\xfcr eine kleine Pause."},{emoji:"thumbup",skintone:true,lineOne:"Du bist ganz sch\xf6n auf Zack!",lineTwo:""},{emoji:"victory",skintone:true,lineOne:"Alles erledigt!",lineTwo:"Das ist das A und O."},{emoji:"wrench",skintone:false,lineOne:"Ganz sch\xf6n fix!",lineTwo:""}];var l=[{emoji:"chocolate_bar",skintone:false,lineOne:"You\u2019ve read everything you need to.",lineTwo:"Take a little break."},{emoji:"balloon",skintone:false,lineOne:"There, all caught up.",lineTwo:"Turn your mind to something new."},{emoji:"bee",skintone:false,lineOne:"You\u2019re up to date.",lineTwo:"Go on and do great things."},{emoji:"zap",skintone:false,lineOne:"Boom!",lineTwo:"You\u2019re up to date."},{emoji:"clap",skintone:true,lineOne:"Everything unread has now been read.",lineTwo:"You\u2019ve done it."},{emoji:"growth",skintone:false,lineOne:"Everything\u2019s sorted.",lineTwo:"Let\u2019s do something else."},{emoji:"crystalball",skintone:false,lineOne:"All that was unread has now been read.",lineTwo:"But what\u2019s next?"},{emoji:"high5",skintone:true,lineOne:"That\u2019s everything!",lineTwo:""},{emoji:"check_mark",skintone:false,lineOne:"Done and dusted.",lineTwo:""},{emoji:"octopus",skintone:false,lineOne:"All sorted.",lineTwo:"The world is your oyster."},{emoji:"unicorn_face",skintone:false,lineOne:"You\u2019ve read it all.",lineTwo:"Here\u2019s a unicorn."},{emoji:"racecar",skintone:false,lineOne:"Right!",lineTwo:"All caught up."},{emoji:"rocket",skintone:false,lineOne:"That\u2019s it.",lineTwo:"The future is yours."},{emoji:"sailboat",skintone:false,lineOne:"You\u2019ve caught up on everything.",lineTwo:"Plain sailing from now on."},{emoji:"sunglasses",skintone:false,lineOne:"All clear.",lineTwo:""},{emoji:"coffee",skintone:false,lineOne:"You\u2019ve got through the lot!",lineTwo:"Pop the kettle on?"},{emoji:"tada",skintone:false,lineOne:"Ta-da!",lineTwo:"You\u2019ve read everything there is to read."},{emoji:"tada",skintone:false,lineOne:"Ta-da!",lineTwo:"You\u2019re all up to date."},{emoji:"couch_and_lamp",skintone:false,lineOne:"That\u2019s you sorted.",lineTwo:"Put your feet up."},{emoji:"tractor",skintone:false,lineOne:"You\u2019ve read everything.",lineTwo:"Here\u2019s a tractor."},{emoji:"victory",skintone:true,lineOne:"Caught up on everything.",lineTwo:"What\u2019s next?"}];var c=[{emoji:"apple",skintone:false,lineOne:"You\u2019ve read all you needed.",lineTwo:"Take a moment."},{emoji:"balloon",skintone:false,lineOne:"There! Caught up.",lineTwo:"Set your mind to something new."},{emoji:"bee",skintone:false,lineOne:"You\u2019re up to date.",lineTwo:"Go forth and do great things."},{emoji:"boom",skintone:false,lineOne:"Boom.",lineTwo:"You\u2019re up to date."},{emoji:"clap",skintone:true,lineOne:"Everything unread is now read.",lineTwo:"You\u2019ve done it."},{emoji:"growth",skintone:false,lineOne:"Everything\u2019s sorted!",lineTwo:"Let\u2019s start something new."},{emoji:"crystalball",skintone:false,lineOne:"All that was unread is now read.",lineTwo:"What\u2019s next?"},{emoji:"high5",skintone:true,lineOne:"That\u2019s everything!",lineTwo:""},{emoji:"leafs",skintone:false,lineOne:"Done and done.",lineTwo:""},{emoji:"octopus",skintone:false,lineOne:"All done.",lineTwo:"The world is your oyster."},{emoji:"pony",skintone:false,lineOne:"You\u2019re all read.",lineTwo:"Here\u2019s a pony."},{emoji:"racecar",skintone:false,lineOne:"There.",lineTwo:"All caught up."},{emoji:"rocket",skintone:false,lineOne:"All done.",lineTwo:"The future is yours."},{emoji:"sun",skintone:false,lineOne:"You\u2019re all caught up!",lineTwo:"Clear screens ahead."},{emoji:"sunglasses",skintone:false,lineOne:"All clear.",lineTwo:""},{emoji:"sweetpotato",skintone:false,lineOne:"Sweet potato!",lineTwo:"You\u2019re all done."},{emoji:"tada",skintone:false,lineOne:"Ta-da!",lineTwo:"You\u2019ve read everything there is to read."},{emoji:"tada",skintone:false,lineOne:"Ta-da!",lineTwo:"You\u2019re up to date."},{emoji:"thumbup",skintone:true,lineOne:"That\u2019s that.",lineTwo:"You\u2019re good to go."},{emoji:"tractor",skintone:false,lineOne:"You\u2019re all read.",lineTwo:"Here\u2019s a tractor."},{emoji:"victory",skintone:true,lineOne:"All caught up.",lineTwo:"What\u2019s next?"}];var u=[{emoji:"boom",skintone:false,lineOne:"Bum.",lineTwo:"Est\xe1s al d\xeda."},{emoji:"chick",skintone:false,lineOne:"Est\xe1s al d\xeda.",lineTwo:"Es hora de salir a hacer algo estupendo."},{emoji:"candy",skintone:false,lineOne:"Has le\xeddo todo.",lineTwo:"Aqu\xed tienes un caramelo de regalo."},{emoji:"cityscape",skintone:false,lineOne:"Has terminado de leer.",lineTwo:"Tienes el mundo a tus pies."},{emoji:"checkered_flag",skintone:false,lineOne:"Has terminado de leer.",lineTwo:"\xbfY ahora qu\xe9 sigue?"},{emoji:"flex",skintone:true,lineOne:"Has terminado de leer.",lineTwo:"\xa1Lo lograste!"},{emoji:"high5",skintone:true,lineOne:"\xa1Eso es todo!",lineTwo:""},{emoji:"hourglass",skintone:false,lineOne:"Has terminado de leer.",lineTwo:"El futuro es tuyo."},{emoji:"leafs",skintone:false,lineOne:"Punto y aparte.",lineTwo:""},{emoji:"newspaper",skintone:false,lineOne:"Ya est\xe1s al d\xeda con tu lectura.",lineTwo:"Ahora puedes tomarte un descanso."},{emoji:"rocket",skintone:false,lineOne:"\xa1Listo! Est\xe1s al tanto de todo.",lineTwo:"Ahora puedes proponerte algo nuevo."},{emoji:"sunglasses",skintone:false,lineOne:"El pron\xf3stico se ve despejado.",lineTwo:""},{emoji:"sleuth",skintone:true,lineOne:"Est\xe1s al tanto de todo.",lineTwo:"\xbfY ahora qu\xe9?"},{emoji:"sleuth",skintone:true,lineOne:"Listo.",lineTwo:"Ya est\xe1s al tanto de todo."},{emoji:"tada",skintone:false,lineOne:"\xa1Enhorabuena!",lineTwo:"Has le\xeddo todo lo que hab\xeda que leer."},{emoji:"trophy",skintone:false,lineOne:"\xa1Al fin!",lineTwo:"Ya has terminado."}];var d=[{emoji:"apple",skintone:false,lineOne:"Est\xe1s al d\xeda con la lectura.",lineTwo:"T\xf3mate un descanso."},{emoji:"balloon",skintone:false,lineOne:"\xa1Listo! Est\xe1s al d\xeda.",lineTwo:"Centra tu mente en algo nuevo."},{emoji:"bee",skintone:false,lineOne:"Est\xe1s al d\xeda.",lineTwo:"\xa1Ve a conquistar el mundo!"},{emoji:"boom",skintone:false,lineOne:"Bum.",lineTwo:"Est\xe1s al d\xeda."},{emoji:"clap",skintone:true,lineOne:"Terminaste de leer todo.",lineTwo:"\xa1Lo lograste!"},{emoji:"growth",skintone:false,lineOne:"\xa1Todo resuelto!",lineTwo:"Empecemos algo nuevo."},{emoji:"crystalball",skintone:false,lineOne:"Le\xedste todo lo que hab\xeda que leer.",lineTwo:"\xbfY ahora qu\xe9?"},{emoji:"high5",skintone:true,lineOne:"\xa1Eso es todo!",lineTwo:""},{emoji:"leafs",skintone:false,lineOne:"Punto y aparte.",lineTwo:""},{emoji:"octopus",skintone:false,lineOne:"Todo listo.",lineTwo:"El mundo est\xe1 a tus pies."},{emoji:"pony",skintone:false,lineOne:"Ya le\xedste todo.",lineTwo:"Aqu\xed tienes un poni."},{emoji:"racecar",skintone:false,lineOne:"!Bien hecho!",lineTwo:"Est\xe1s al tanto de todo."},{emoji:"rocket",skintone:false,lineOne:"Todo listo.",lineTwo:"El futuro es tuyo."},{emoji:"sun",skintone:false,lineOne:"Ya est\xe1s al tanto de todo.",lineTwo:"\xa1Pantalla despejada!"},{emoji:"sunglasses",skintone:false,lineOne:"\xa1Todo despejado!",lineTwo:""},{emoji:"sweetpotato",skintone:false,lineOne:"\xa1Qu\xe9 belleza!",lineTwo:"Ya terminaste."},{emoji:"tada",skintone:false,lineOne:"\xa1Felicidades!",lineTwo:"Le\xedste todo lo que hab\xeda que leer."},{emoji:"tada",skintone:false,lineOne:"\xa1Felicidades!",lineTwo:"Est\xe1s al d\xeda."},{emoji:"thumbup",skintone:true,lineOne:"Eso es todo.",lineTwo:"Puedes seguir con tus otras tareas."},{emoji:"tractor",skintone:false,lineOne:"Ya le\xedste todo.",lineTwo:"Aqu\xed tienes un tractor."},{emoji:"victory",skintone:true,lineOne:"Est\xe1s al tanto de todo.",lineTwo:"\xbfY ahora qu\xe9?"}];var p=[{emoji:"balloon",skintone:false,lineOne:"Vous \xeates \xe0 jour.",lineTwo:"On se sent d\xe9j\xe0 plus l\xe9ger."},{emoji:"bee",skintone:false,lineOne:"Vous \xeates \xe0 jour.",lineTwo:"On d\xe9colle mieux face au vent, courage !"},{emoji:"books",skintone:false,lineOne:"Lu et relu !",lineTwo:""},{emoji:"boom",skintone:false,lineOne:"Boum !",lineTwo:"Vous \xeates \xe0 jour."},{emoji:"clap",skintone:true,lineOne:"Bravo !",lineTwo:"Vous avez tout lu."},{emoji:"coffee",skintone:false,lineOne:"Vous avez tout lu !",lineTwo:"Une pause s\u2019impose !"},{emoji:"crystalball",skintone:false,lineOne:"Vous avez tout lu !",lineTwo:"Que vous r\xe9serve l\u2019avenir ?"},{emoji:"high5",skintone:true,lineOne:"C\u2019est tout !",lineTwo:""},{emoji:"island",skintone:false,lineOne:"Termin\xe9 !",lineTwo:"Vous pouvez vous la couler douce !"},{emoji:"owl",skintone:false,lineOne:"Chouette !",lineTwo:"Vous avez termin\xe9."},{emoji:"racecar",skintone:false,lineOne:"Voil\xe0 !",lineTwo:"Vous \xeates sur la bonne voie."},{emoji:"rocket",skintone:false,lineOne:"Termin\xe9 !",lineTwo:"L\u2019avenir vous appartient."},{emoji:"sun",skintone:false,lineOne:"Vous \xeates \xe0 jour.",lineTwo:"L\u2019horizon est d\xe9gag\xe9."},{emoji:"sunglasses",skintone:false,lineOne:"Tout est \xe0 jour.",lineTwo:""},{emoji:"tada",skintone:false,lineOne:"Tadam !",lineTwo:"Vous avez tout lu."},{emoji:"thumbup",skintone:true,lineOne:"\xc7a y est !",lineTwo:"Vous avez fini."},{emoji:"victory",skintone:true,lineOne:"Vous \xeates \xe0 jour.",lineTwo:"Quelle est la suite du programme ?"}];var m=[{emoji:"blush",skintone:false,lineOne:"\u672a\u8aad\u30e1\u30c3\u30bb\u30fc\u30b8\u306f\u4ee5\u4e0a\u3067\u3059\u3002",lineTwo:"\u304a\u75b2\u308c\u3055\u307e\u3067\u3057\u305f\u3002"},{emoji:"bookmark_tabs",skintone:false,lineOne:"\u672a\u8aad\u30c1\u30a7\u30c3\u30af\u5b8c\u4e86\uff01\u6e96\u5099\u4e07\u7aef\uff01",lineTwo:"\u3055\u3042\u3001\u4f55\u304b\u3089\u3084\u308a\u307e\u3059\u304b\uff1f"},{emoji:"candy",skintone:false,lineOne:"\u5168\u672a\u8aad\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u78ba\u8a8d\u3001\u304a\u75b2\u308c\u3055\u307e\u3067\u3057\u305f\u3002",lineTwo:"\u306f\u3044\u3001\u30a2\u30e1\u3061\u3083\u3093\uff01"},{emoji:"check_mark",skintone:false,lineOne:"\u5168\u672a\u8aad\u30e1\u30c3\u30bb\u30fc\u30b8\u78ba\u8a8d\u7d42\u4e86\uff01",lineTwo:"\u3084\u308b\u3053\u3068\u30ea\u30b9\u30c8\u304b\u30891\u3064\u6d88\u3048\u307e\u3057\u305f\uff01"},{emoji:"cityscape",skintone:false,lineOne:"\u5168\u672a\u8aad\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u78ba\u8a8d\u3001\u304a\u75b2\u308c\u3055\u307e\u3067\u3057\u305f\u3002",lineTwo:"\u9060\u304f\u3092\u898b\u308b\u3068\u75b2\u308c\u76ee\u306b\u3044\u3044\u3089\u3057\u3044\u3067\u3059\u3088\uff1f"},{emoji:"coffee",skintone:false,lineOne:"\u3059\u3079\u3066\u306e\u672a\u8aad\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u78ba\u8a8d\u3057\u307e\u3057\u305f\u3002",lineTwo:"\u3061\u3087\u3063\u3068\u4e00\u606f\u5165\u308c\u307e\u305b\u3093\u304b\uff1f"},{emoji:"confetti_ball",skintone:false,lineOne:"\u672a\u8aad\u30e1\u30c3\u30bb\u30fc\u30b8\u8aad\u4e86\u3092\u9054\u6210\u3057\u307e\u3057\u305f\uff01",lineTwo:""},{emoji:"crossed_swords",skintone:false,lineOne:"\u307f\u3069\u304f\u3000\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u3000\u3084\u3063\u3064\u3051\u305f\u3002",lineTwo:"\u304b\u3057\u3053\u3055\u304c\u3000\uff11\u30dd\u30a4\u30f3\u30c8\u3000\u3042\u304c\u3063\u305f\uff01"},{emoji:"dog",skintone:false,lineOne:"\u672a\u8aad\u30c1\u30a7\u30c3\u30af\u5b8c\u4e86\uff01",lineTwo:"\u30ef\u30f3\u3060\u3075\u308b\uff01"},{emoji:"doughnut",skintone:false,lineOne:"\u5168\u672a\u8aad\u30e1\u30c3\u30bb\u30fc\u30b8\u78ba\u8a8d\u7d42\u4e86\uff01",lineTwo:"\u3061\u3087\u3063\u3068\u4f11\u61a9\u3057\u3066\u3001\u75b2\u308c\u305f\u8133\u306b\u7cd6\u5206\u88dc\u7d66"},{emoji:"herb",skintone:false,lineOne:"\u672a\u8aad\u30b9\u30c3\u30ad\u30ea\uff01\u6c17\u5206\u3082\u30b9\u30c3\u30ad\u30ea\uff01",lineTwo:""},{emoji:"leafs",skintone:false,lineOne:"\u5168\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u65e2\u8aad\u306b\u306a\u308a\u307e\u3057\u305f\u3002",lineTwo:"\u305d\u308c\u306f\u305d\u308c\u3067\u3001\u3061\u3087\u3063\u3068\u5bc2\u3057\u3044\u2026\uff1f"},{emoji:"rocket",skintone:false,lineOne:"\u672a\u8aad\u30b3\u30f3\u30d7\u30ea\u30fc\u30c8\uff01",lineTwo:"\u3053\u306e\u8abf\u5b50\u3067\u3069\u3093\u3069\u3093\u884c\u3063\u3061\u3083\u3044\u307e\u3057\u3087\u3046\uff01"},{emoji:"sparkles",skintone:false,lineOne:"\u672a\u8aad\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u3001\u305c\u3093\u3076\u30ad\u30ec\u30a4\u306b\u7247\u4ed8\u304d\u307e\u3057\u305f\u3002",lineTwo:""},{emoji:"tada",skintone:false,lineOne:"\u3059\u3054\u3044\uff01",lineTwo:"\u672a\u8aad\u30b3\u30f3\u30d7\u30ea\u30fc\u30c8\uff01"},{emoji:"tea",skintone:false,lineOne:"\u672a\u8aad\u30c1\u30a7\u30c3\u30af\u5b8c\u4e86\uff01",lineTwo:"\u304a\u75b2\u308c\u3055\u307e\u3067\u3057\u305f\u3002"},{emoji:"trophy",skintone:false,lineOne:"\u304a\u3081\u3067\u3068\u3046\u3054\u3056\u3044\u307e\u3059\uff01",lineTwo:"\u5168\u672a\u8aad\u30c1\u30a7\u30c3\u30af\u5b8c\u4e86\u3067\u3059\uff01"},{emoji:"victory",skintone:true,lineOne:"\u672a\u8aad\u30c1\u30a7\u30c3\u30af\u5b8c\u4e86\uff01",lineTwo:""},{emoji:"sleuth",skintone:true,lineOne:"\u5168\u672a\u8aad\u30e1\u30c3\u30bb\u30fc\u30b8\u3092",lineTwo:"\u6f0f\u308c\u306a\u304f\u3059\u3079\u3066\u78ba\u8a8d\u3057\u307e\u3057\u305f\u3002"}];var h=[{emoji:"apple",skintone:false,lineOne:"Voc\xea j\xe1 leu tudo.",lineTwo:"Agora fa\xe7a uma pausa."},{emoji:"balloon",skintone:false,lineOne:"Pronto!",lineTwo:"Agora voc\xea j\xe1 pode partir para outra."},{emoji:"bee",skintone:false,lineOne:"Tudo em dia.",lineTwo:"Voc\xea est\xe1 pronto para outra."},{emoji:"flex",skintone:true,lineOne:"Feito!",lineTwo:"Voc\xea leu todas as suas mensagens."},{emoji:"clap",skintone:true,lineOne:"Todas as n\xe3o lidas foram lidas.",lineTwo:"Parab\xe9ns!"},{emoji:"relieved",skintone:false,lineOne:"Miss\xe3o cumprida!",lineTwo:"Pronto para algo novo."},{emoji:"crystalball",skintone:false,lineOne:"Agora voc\xea est\xe1 por dentro de tudo.",lineTwo:"Pronto para o futuro?"},{emoji:"high5",skintone:true,lineOne:"Isso \xe9 tudo!",lineTwo:""},{emoji:"high5",skintone:true,lineOne:"Deu.",lineTwo:""},{emoji:"earth_americas",skintone:false,lineOne:"Tudo pronto.",lineTwo:"Agora o mundo est\xe1 nas suas m\xe3os."},{emoji:"walking",skintone:true,lineOne:"\xc9 isso.",lineTwo:"J\xe1 pode sair por a\xed."},{emoji:"check_mark",skintone:false,lineOne:"Tudo em dia.",lineTwo:"O que vai fazer agora?"},{emoji:"rocket",skintone:false,lineOne:"Dever cumprido.",lineTwo:"O futuro \xe9 seu."},{emoji:"sunglasses",skintone:false,lineOne:"Tudo lido.",lineTwo:"Agora j\xe1 pode relaxar."},{emoji:"sunglasses",skintone:false,lineOne:"Tudo pronto!",lineTwo:""},{emoji:"star",skintone:false,lineOne:"Bom trabalho!",lineTwo:"Leitura conclu\xedda."},{emoji:"tada",skintone:false,lineOne:"Surpresa!",lineTwo:"Voc\xea terminou."},{emoji:"tada",skintone:false,lineOne:"Surpresa!",lineTwo:"Agora voc\xea est\xe1 atualizado."},{emoji:"thumbup",skintone:true,lineOne:"Acabou!",lineTwo:"Miss\xe3o dada \xe9 miss\xe3o cumprida."},{emoji:"wave",skintone:true,lineOne:"Era isso.",lineTwo:"Por hoje \xe9 s\xf3!"},{emoji:"victory",skintone:true,lineOne:"Atualizado!",lineTwo:"E agora?"}];a.d(t,"a",function(){return b});var v;var f=(v={"de-DE":o,"en-GB":l},n()(v,i["b"].DEFAULT_LOCALE,c),n()(v,"es-ES",u),n()(v,"es-LA",d),n()(v,"fr-FR",p),n()(v,"ja-JP",m),n()(v,"pt-BR",h),v);function b(e){var t=e.locale,a=void 0===t?i["b"].DEFAULT_LOCALE:t,r=e.preferredSkintone,n=void 0===r?1:r,o=e.emojiMode,l=void 0===o?"default":o;var c="apple"===l?"default":l;var u=f[a]||f[i["b"].DEFAULT_LOCALE];var d=u[Math.floor(Math.random()*u.length)];var p=d.skintone?s[c][d.emoji][n]:s[c][d.emoji];d.emojiUrl=p;return d}},,,,function(e,t,a){"use strict";var r=a(196);var n=a.n(r);var i=a(110);var s=a.n(i);var o=a(135);var l=a.n(o);var c=a(169);var u=a.n(c);var d=a(138);var p=a.n(d);var m=a(147);var h=a.n(m);var v=a(185);var f=a.n(v);var b=a(1);var g=a.n(b);var _=a(12);var y=a(0);var O=a(39);var k=a(912);var E=a(106);var C=a(218);var S=a.n(C);var w=a(2);var j=a(6);var I=a(30);var T=a(33);var A=a(601);var N=a(540);var P=a(97);var M=a(266);var D=a(232);var x=a(44);var R=a(544);var F=a(24);var L=a(428);var U=a(2029);var B=a(245);var q=a.n(B);var G=a(493);var H=a(134);var W=a(27);var V=a(326);var K=a(2692);var z=a(357);var Q=a(2306);var Y={className:void 0,subtext:void 0};function J(e){var t=e.className,a=e.id,r=e.subtext,i=e.team;var s=null;var o=r&&!Object(W["isUnknownOrNonExistent"])(i);return g.a.createElement(V["d"],{avatar:function e(t){return g.a.createElement(K["a"],n()({},t,{team:i,size:H["a"].medium}))},className:t,size:"medium",style:s,text:g.a.createElement(z["a"],{team:i}),subtext:o&&g.a.createElement(V["b"],null,r),"data-team-id":a})}J.displayName="MediumTeamEntity";J.defaultProps=Y;var X=function e(t,a){var r=a.team||Object(T["k"])(t,a.id);return{team:r,id:r.id}};var Z=Object(_["connect"])(X)(J);var $={className:void 0,isActive:false,isDisabled:false,secondaryContent:void 0};function ee(e){var t=e.className,a=e.id,r=e.isActive,i=e.isDisabled,s=e.secondaryContent,o=e.team,l=q()(e,["className","id","isActive","isDisabled","secondaryContent","team"]);var c;r?c=i?H["c"].highlightDim:H["c"].highlightLight:i&&(c=H["c"].dim);return g.a.createElement(G["a"],{className:t,size:"medium",style:c,primaryContent:g.a.createElement(Z,n()({},l,{team:o})),secondaryContent:s,"data-team-id":a})}ee.displayName="MediumTeamListEntity";ee.defaultProps=$;var te=function e(t,a){var r=a.team||Object(T["k"])(t,a.id);return{team:r,id:r.id}};var ae=Object(_["connect"])(te)(ee);var re=a(23);var ne=new j["b"]("enterprise_dashboard");var ie={isSearching:false,isLoading:false,searchQuery:"",workspaceIds:[],selectedWorkspaceIds:[],connectedWorkspaceIds:[],onWorkspaceChange:w["noop"],onRequestNextPage:w["noop"]};function se(e){return"select-workspaces-"+e+"-checkbox"}var oe="345px";var le=function(e){f()(t,e);function t(e){var a;s()(this,t);a=u()(this,p()(t).call(this,e));Object(I["a"])(h()(a),["makeRows","makeNoSearchResultsRowTemplate"]);return a}l()(t,[{key:"makeNoSearchResultsRowTemplate",value:function e(){var t=this.props.searchQuery;return{id:"row_member1",items:[{id:"no_results_row",value:g.a.createElement("div",null,ne.rt("No results matching <b>{searchQuery}</b>.",{searchQuery:t})),className:"p-org_level_user_groups__search_row"}],checkboxClassName:"hidden"}}},{key:"makeRows",value:function e(){var t=this.props,a=t.isLoading,r=t.isSearching,n=t.workspaceIds,i=t.connectedWorkspaceIds;if(!a&&!r&&!n.length)return[this.makeNoSearchResultsRowTemplate()];return Object(w["map"])(n,function(e){var t=Object(w["includes"])(i,e);return{id:e,items:[{id:"workspace",value:g.a.createElement(ae,{className:"p-select_workspaces_pane__team_list_entity",id:e,isDisabled:t,secondaryContent:t?g.a.createElement("span",{className:"p-select_workspaces_pane__connected_icon","data-qa":"idp_conn_ws_row_connected"},g.a.createElement(re["b"],{type:"link",className:"margin_right_25"}),ne.t("Connected")):null})}],selectable:!t,className:t?"p-select_workspaces_pane__table_row_item--connected":"p-select_workspaces_pane__table_row_item--not-connected"}})}},{key:"render",value:function e(){var t=this.props,a=t.selectedWorkspaceIds,r=t.onWorkspaceChange,n=t.connectedWorkspaceIds,i=t.onRequestNextPage,s=t.isLoading;var o=this.makeRows();var l=[{id:"workspace",value:ne.t("Workspace"),noHover:true}];return g.a.createElement(U["a"],{height:oe,id:"select-workspaces-table",rowClassName:"p-select_workspaces_pane__table_row_item--connected c-table_view_hover_disabled",selectedRows:a.concat(n),onSelect:r,getCheckboxId:se,"data-qa":"select-workspaces-table-rows",rows:o,headers:l,allowSelectAll:false,onRequestNextPage:i,isLoading:s})}}]);return t}(b["PureComponent"]);le.displayName="WorkspaceList";le.defaultProps=ie;var ce=le;var ue=a(4956);var de=new j["b"]("enterprise_dashboard");var pe={orgUserGroupName:void 0,ssoLabel:void 0,selectedWorkspaceIds:void 0,connectedWorkspaceIds:void 0,searchAndUpsertOrgTeams:w["noop"]};var me=200;var he=function(e){f()(t,e);function t(e){var a;s()(this,t);a=u()(this,p()(t).call(this,e));Object(I["a"])(h()(a),["onSearchInputChange","onWorkspaceChange","onRequestNextPage"]);a.state={isSearching:false,searchQuery:"",workspaceIds:[],selectedWorkspaceIds:e.selectedWorkspaceIds||[],isLoading:false,nextCursor:void 0,hasReachedEnd:false};a.searchPromise=null;a.debouncedFetchTeams=Object(w["debounce"])(a.fetchWorkspaces,me);return a}l()(t,[{key:"componentDidMount",value:function e(){var t=this.props,a=t.connectedWorkspaceIds,r=t.getConnectedWorkspaceInOrgUserGroup,n=t.userGroupId;a||r({usergroupId:n});this.fetchWorkspaces()}},{key:"componentWillUnmount",value:function e(){this.searchPromise&&this.searchPromise.cancel&&this.searchPromise.cancel()}},{key:"onRequestNextPage",value:function e(){this.fetchWorkspaces(this.state.nextCursor)}},{key:"onSearchInputChange",value:function e(t){var a=t.target.value;this.setState(function(){return{isSearching:true,searchQuery:a,workspaceIds:[],nextCursor:"",hasReachedEnd:false}},this.debouncedFetchTeams)}},{key:"onWorkspaceChange",value:function e(t,a){var r=this.state.selectedWorkspaceIds;var n;n=Object(w["includes"])(r,a)?Object(w["without"])(r,a):[].concat(S()(r),[a]);this.setState(function(){return{selectedWorkspaceIds:n}})}},{key:"setIsLoading",value:function e(t){this.setState(function(){return{isLoading:t}})}},{key:"fetchWorkspaces",value:function e(t){var a=this;var r=this.props.searchAndUpsertOrgTeams;var n=this.state,i=n.searchQuery,s=n.workspaceIds,o=n.hasReachedEnd;if(o)return;this.setIsLoading(true);this.searchPromise=r({searchTerm:i,nextCursorMark:t}).then(function(e){var r=e.teams,n=void 0===r?[]:r,i=e.nextCursor;var o=n.map(function(e){return e.id});a.setState(function(){return{workspaceIds:s.concat(o),nextCursor:i,hasReachedEnd:i===t}})}).finally(function(){return a.setState(function(){return{isSearching:false,isLoading:false}})})}},{key:"renderSearch",value:function e(){var t=this.state,a=t.searchQuery,r=t.isLoading;return g.a.createElement("div",{className:"p-connect_workspaces_modal__search"},g.a.createElement(L["a"],{value:a,onChange:this.onSearchInputChange,placeholder:de.t("Search workspaces by name"),icon:"search","data-qa":"org_user_groups_conn_ws_search",autoFocus:true,isLoading:r}))}},{key:"renderWorkspaceList",value:function e(){var t=this.state,a=t.searchQuery,r=t.selectedWorkspaceIds,n=t.workspaceIds,i=t.isLoading,s=t.isSearching;return g.a.createElement(ce,{isSearching:s,isLoading:i,searchQuery:a,workspaceIds:n,selectedWorkspaceIds:r,connectedWorkspaceIds:this.props.connectedWorkspaceIds,onWorkspaceChange:this.onWorkspaceChange,onRequestNextPage:this.onRequestNextPage})}},{key:"render",value:function e(){var t=this.props,a=t.orgUserGroupName,r=t.ssoLabel,n=t.switchPane,i=t.userGroupId;var s=this.state.selectedWorkspaceIds;var o=de.t("Connect {ssoLabel} group to workspaces",{ssoLabel:r||de.t("IDP")});var l=de.rt("All current and future members of {orgUserGroupName} will have access to the workspaces you select.",{orgUserGroupName:g.a.createElement("strong",null,a)});var c=Object(w["isEmpty"])(s)?de.t("No workspaces selected"):de.t("{numberOfWorkspaces, plural, =1 {# workspace} other {# workspaces}} selected",{numberOfWorkspaces:s.length});var u=Object(w["isEmpty"])(s);return g.a.createElement(g.a.Fragment,null,g.a.createElement(x["h"],null,g.a.createElement(R["a"],{title:o,"data-qa":"org_user_groups_conn_ws_title"})),g.a.createElement(x["d"],null,g.a.createElement(x["e"],{className:"p-connect_workspaces_modal__modal_content"},g.a.createElement("p",{"data-qa":"org_user_groups_conn_ws_subtitle"},l),this.renderSearch(),this.renderWorkspaceList())),g.a.createElement(x["f"],{"data-qa":"select-workspaces-footer"},g.a.createElement("span",{className:"p-select_workspaces_pane--footer","data-qa":"org_user_groups_conn_ws_footer_count"},g.a.createElement("strong",null,c)),g.a.createElement(x["g"],{className:"p-select_workspaces_pane__footer_actions"},g.a.createElement(x["c"],{type:"outline","data-qa":"org_user_groups_conn_ws_cancel_btn"},de.t("Cancel")),g.a.createElement(F["d"],{"data-qa":"org_user_groups_conn_ws_go_btn",onClick:function e(){return n("autoProvision",{selectedWorkspaceIds:s,userGroupId:i})},disabled:u},de.t("Next")))))}}]);return t}(b["PureComponent"]);he.displayName="SelectWorkspacesPane";he.defaultProps=pe;var ve=function e(t,a){var r=a.userGroupId;var n=Object(T["i"])(t);var i=Object(A["e"])(t,{groupId:r});return{orgUserGroupName:Object(P["h"])(i),ssoLabel:Object(M["e"])(n),connectedWorkspaceIds:Object(A["i"])(t,{groupId:r})}};var fe={searchAndUpsertOrgTeams:function e(){return D["y"].apply(void 0,arguments)},getConnectedWorkspaceInOrgUserGroup:function e(){return N["g"].apply(void 0,arguments)}};var be=Object(_["connect"])(ve,fe)(he);var ge=a(278);var _e=a.n(ge);var ye=a(88);var Oe=a.n(ye);var ke=a(1241);var Ee=a(131);var Ce=new j["b"]("enterprise_dashboard");function Se(e){var t=e.status,a=e.selectedWorkspaceIds;var r=g.a.createElement("span",null,Ce.t("{numberOfWorkspaces, plural, =1 {Workspace} other {Workspaces}} connected",{fallbackHash:"c2f9b7b4897f03f94abf92294c9ca46fea62360b",numberOfWorkspaces:a.length}));"error"===t&&(r=g.a.createElement("span",null,Ce.t("Something\u2019s gone wrong. Mind trying again in a moment?")));return g.a.createElement(Ee["b"],{position:"bottom-right",icon:"check-circle-o",shouldAutoFade:true},r)}Se.displayName="ConnectWorkspaceToast";var we=Se;var je=a(494);var Ie=new j["b"]("enterprise_dashboard");var Te={selectedWorkspaceIds:[]};var Ae="345px";var Ne=function(e){f()(t,e);function t(e){var a;s()(this,t);a=u()(this,p()(t).call(this,e));Object(I["a"])(h()(a),["makeRowData"]);return a}l()(t,[{key:"headerData",value:function e(){return[{id:"header_0",value:Ie.t("Workspaces"),"data-qa":"org_user_groups_conn_ws_col_workspaces"},{id:"header_1",value:Ie.t("Required?"),"data-qa":"org_user_groups_conn_ws_col_required"}]}},{key:"makeRowData",value:function e(t,a){var r=this.props,n=r.workspacesToAutoProvision,i=r.onToggleAutoProvision;var s="row_group"+(a+1);var o=s+"_col_";var l=n[t];var c=l?"org_user_groups_conn_ws_row_off":"org_user_groups_conn_ws_row_on";return{id:s,"data-qa":c,items:[{id:o+"1",value:g.a.createElement(Z,{"data-qa":"org_user_groups_conn_ws_team_entity",id:t})},{id:o+"2",className:"p-auto_provision_workspaces_pane__list__item p-auto_provision_workspaces_pane__list__toogle",value:g.a.createElement("div",{"data-qa":"org_user_groups_conn_ws_row_toggle_switch",className:"p-auto_provision_workspaces_pane__list__toggle__switch"},g.a.createElement(ke["a"],{isToggled:l,onChange:function e(){return i(t)}}))}]}}},{key:"makeRows",value:function e(){return this.props.selectedWorkspaceIds.map(this.makeRowData)}},{key:"render",value:function e(){return g.a.createElement("div",{"data-qa":"org_user_groups_conn_ws_selected_list",className:"p-auto_provision_workspaces_pane__list"},g.a.createElement(je["b"],{height:Ae,headers:this.headerData(),rows:this.makeRows(),rowClassName:"p-auto_provision_workspaces_pane__table__row",rowHeaderItemClassName:"p-auto_provision_workspaces_pane__column_header c-table_view_hover_disabled",listClassName:"p-auto_provision_workspaces_pane__list",useKeyboardNavigableTable:true}))}}]);return t}(b["Component"]);Ne.displayName="AutoProvisionWorkspacesList";Ne.defaultProps=Te;var Pe=Ne;var Me=a(3420);function De(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function xe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?De(Object(a),true).forEach(function(t){Oe()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):De(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Re=new j["b"]("enterprise_dashboard");var Fe={selectedWorkspaceIds:[]};var Le={workspacesToAutoProvision:{},maybeMakeAllRequired:false,isLoading:false};var Ue=function(e){f()(t,e);function t(e){var a;s()(this,t);a=u()(this,p()(t).call(this,e));a.state=xe({},Le);Object(I["a"])(h()(a),["handleToggleAutoProvision","handleToggleMakeAllRequired","makeAllRequired","handleClickConnectWorkspaces"]);return a}l()(t,[{key:"handleClickConnectWorkspaces",value:function(){var e=_e()(regeneratorRuntime.mark(function e(){var t,a,r,n,i,s,o;return regeneratorRuntime.wrap(function e(l){while(1)switch(l.prev=l.next){case 0:t=this.props,a=t.selectedWorkspaceIds,r=t.userGroupId,n=t.connectAndMaybeProvisonWorkspaces;i=this.state.workspacesToAutoProvision;this.setState(function(){return{isLoading:true}});s=a.filter(function(e){return i[e]});o=a.filter(function(e){return!i[e]});l.prev=5;l.next=8;return n({userGroupId:r,connectWithAutoProvisionIds:s,connectWithoutAutoProvisionIds:o});case 8:this.setState(function(){return xe({},Le)});this.props.closeModal();this.props.enqueueToast({element:g.a.createElement(we,{selectedWorkspaceIds:a,status:"success"})});l.next=18;break;case 13:l.prev=13;l.t0=l["catch"](5);this.setState(function(){return xe({},Le)});this.props.closeModal();this.props.enqueueToast({element:g.a.createElement(we,{status:"error"})});case 18:case"end":return l.stop()}},e,this,[[5,13]])}));function t(){return e.apply(this,arguments)}return t}()},{key:"handleToggleAutoProvision",value:function e(t){this.setState(function(e){var a=e.workspacesToAutoProvision;return{workspacesToAutoProvision:xe({},a,Oe()({},t,!a[t]))}})}},{key:"handleToggleMakeAllRequired",value:function e(){var t=this;this.setState(function(e){var a=e.maybeMakeAllRequired;return{workspacesToAutoProvision:a?{}:t.makeAllRequired(),maybeMakeAllRequired:!a}})}},{key:"makeAllRequired",value:function e(){return this.props.selectedWorkspaceIds.reduce(function(e,t){e[t]=true;return e},{})}},{key:"render",value:function e(){var t=this.props,a=t.switchPane,r=t.selectedWorkspaceIds;var n=Re.t("Make membership required?");var i=Re.t("When required, existing members (and future members) will be added to these workspaces and will not be able to leave");return g.a.createElement("div",{"data-qa":"org_user_groups_conn_ws_modal",className:"p-auto_provision_workspaces_pane"},g.a.createElement(x["h"],null,g.a.createElement(R["a"],{title:n,"data-qa":"org_user_groups_conn_ws_title"})),g.a.createElement(x["d"],null,g.a.createElement(x["e"],{className:"p-connect_workspaces_modal__modal_content"},g.a.createElement("p",{"data-qa":"org_user_groups_conn_ws_subtitle"},i),g.a.createElement("div",{"data-qa":"org_user_groups_conn_ws_select_all",className:"p-auto_provision_workspaces_pane__all_required"},g.a.createElement("div",{className:"p-auto_provision_workspaces_pane__all_required_label"},Re.t("Make all workspaces required")),g.a.createElement("div",{className:"p-auto_provision_workspaces_pane__all_required_switch"},g.a.createElement(ke["a"],{isToggled:this.state.maybeMakeAllRequired,onChange:this.handleToggleMakeAllRequired}))),g.a.createElement(Pe,{workspacesToAutoProvision:this.state.workspacesToAutoProvision,onToggleAutoProvision:this.handleToggleAutoProvision,selectedWorkspaceIds:this.props.selectedWorkspaceIds}))),g.a.createElement(x["f"],{"data-qa":"auto-provision-workspaces-footer"},g.a.createElement(x["g"],null,g.a.createElement(F["d"],{type:"outline","data-qa":"org_user_groups_conn_ws_back_btn",onClick:function e(){return a("selectWorkspaces",{selectedWorkspaceIds:r})}},Re.t("Back")),g.a.createElement(F["b"],{loading:this.state.isLoading,"data-qa":"org_user_groups_conn_ws_connect_btn",onClick:this.handleClickConnectWorkspaces},Re.t("Connect Workspaces")))))}}]);return t}(b["PureComponent"]);Ue.displayName="AutoProvisionPane";Ue.defaultProps=Fe;var Be={connectAndMaybeProvisonWorkspaces:N["d"],closeModal:O["closeModal"],enqueueToast:E["enqueueToast"]};var qe=Object(_["connect"])(null,Be)(Ue);var Ge=a(5047);var He="selectWorkspaces";var We=function(e){f()(t,e);function t(e){var a;s()(this,t);a=u()(this,p()(t).call(this,e));a.onCloseModal=a.onCloseModal.bind(h()(a));return a}l()(t,[{key:"onCloseModal",value:function e(){this.props.closeModal()}},{key:"onFailure",value:function e(){this.props.enqueueToast({element:g.a.createElement(we,{status:"error"})})}},{key:"onSuccess",value:function e(){this.props.enqueueToast({element:g.a.createElement(we,{status:"success"})})}},{key:"getPanes",value:function e(){var t=this;return{selectWorkspaces:{render:function e(a){return g.a.createElement(be,n()({userGroupId:t.props.userGroupId},a))}},autoProvision:{pane:"autoProvision",render:function e(t){return g.a.createElement(qe,t)}}}}},{key:"render",value:function e(){return g.a.createElement(k["b"],{closeModal:this.onCloseModal,defaultPane:He,panes:this.getPanes(),dataQa:"org_user_groups_conn_ws_modal"})}}]);return t}(b["PureComponent"]);We.displayName="ConnectWorkspacesModal";var Ve=function e(t){return{closeModal:function e(){return t(O["closeModal"].apply(void 0,arguments))},enqueueToast:function e(){return t(E["enqueueToast"].apply(void 0,arguments))}}};var Ke=t["a"]=Object(_["connect"])(null,Ve)(We)},function(e,t,a){"use strict";var r=a(88);var n=a.n(r);var i=a(110);var s=a.n(i);var o=a(169);var l=a.n(o);var c=a(138);var u=a.n(c);var d=a(147);var p=a.n(d);var m=a(135);var h=a.n(m);var v=a(185);var f=a.n(v);var b=a(0);var g=a(1);var _=a.n(g);var y=a(12);var O=a(2);var k=a(13);var E=a.n(k);var C=a(286);var S=a(359);var w=a(1337);var j=a(11);var I=a(80);var T=a(1319);var A=a(180);var N=a(6);var P=a(1053);var M=a(384);var D=a(2e3);var x=a(41);var R=new N["b"]("email_workflow");var F=function e(t,a){var r=Object(T["a"])(t);if(r&&Object(D["a"])(t,a)&&!Object(x["isReply"])(a))return[{name:"eyes",tooltip:R.t("I\u2019m looking into this")},{name:"white_check_mark",tooltip:R.t("Mark as resolved")}];return};var L=a(73);var U=a(283);var B=a(38);var q=a(388);var G=a(1530);var H=a(2058);var W=a(24);var V=a(23);var K=a(54);var z=a(1213);var Q=new N["b"]("emoji");var Y={onEmojiSelected:O["noop"],featureSonicEmoji:false,clientTheme:"light",showPulse:false};function J(e){var t=e.onClick,a=e.onEmojiSelected,r=e.featureSonicEmoji,n=e.clientTheme,i=e.showPulse;var s=_.a.createElement(K["c"],{tip:Q.t("Add reaction..."),delay:K["a"]},_.a.createElement(W["c"],{className:E()("c-reaction_add","c-reaction_add--"+n,{"c-reaction_pulse":i}),onClick:t,"aria-label":Q.t("Add reaction..."),"data-qa":"add_reaction_button"},_.a.createElement("div",{className:"c-reaction_add__container"},_.a.createElement(V["b"],{type:"small-reaction-bg",className:"c-reaction_add__icon c-reaction_add__icon--bg","aria-hidden":true}),_.a.createElement(V["b"],{type:"small-reaction",className:"c-reaction_add__icon c-reaction_add__icon--fg","aria-hidden":true}))));if(r)return _.a.createElement(z["a"],{onEmojiSelected:a,showHandyReactions:true},i?_.a.createElement("div",{className:"c-reaction_reactji-pulse"},s):s);return s}J.defaultProps=Y;var X=a(35);var Z=a(14);var $=a(873);var ee=a(2095);var te=a(1273);var ae=a(99);var re=a(924);var ne=new N["b"]("messages");var ie={channelId:b["default"].string,anchorElement:b["default"].instanceOf(Element),closeCoachmark:b["default"].func,featureReactjiAwarenessV2:b["default"].bool,clogger:b["default"].object.isRequired};var se={channelId:void 0,anchorElement:null,closeCoachmark:O["noop"],featureReactjiAwarenessV2:false};var oe=function(e){f()(t,e);function t(e){var a;s()(this,t);a=l()(this,u()(t).call(this,e));a.onCloseCoachmark=a.onCloseCoachmark.bind(p()(a));a.onButtonClick=a.onButtonClick.bind(p()(a));return a}h()(t,[{key:"onCloseCoachmark",value:function e(){var t=this.props,a=t.clogger,r=t.closeCoachmark;a.track(Z["EventId"].EDUCATION_IN_CONTEXT_MESSAGE_PANE,{contexts:{ui_context:{step:Z["UiStep"].LEARN_MORE_MODAL,step_variant:"reaction",action:Z["UiAction"].CLICK,ui_properties:{element_type:Z["ElementType"].X}}}});r()}},{key:"onButtonClick",value:function e(){var t=this.props,a=t.clogger,r=t.closeCoachmark;a.track(Z["EventId"].EDUCATION_IN_CONTEXT_MESSAGE_PANE,{contexts:{ui_context:{step:Z["UiStep"].LEARN_MORE_MODAL,step_variant:"reaction",action:Z["UiAction"].CLICK,ui_properties:{element_type:Z["ElementType"].BUTTON}}}});r()}},{key:"render",value:function e(){var t=this.props,a=t.featureReactjiAwarenessV2,r=t.anchorElement,n=t.isOpen;if(!a)return null;var i=ne.rt("Say it faster with emoji <sparkles></sparkles>",null,function(e){var t=e.tag,a=e.key;if("sparkles"===t)return _.a.createElement(ae["b"],{key:a,text:":sparkles:",emojiSize:ae["a"].MEDIUM});return null});var s=ne.t("Emoji reactions are a quick way to respond in Slack without having to send a message.");return _.a.createElement("div",{className:"position_relative"},_.a.createElement(re["a"],{anchorElement:r,isOpen:n,closeCoachmark:this.onCloseCoachmark,onClickPrimaryButton:this.onButtonClick,primaryCallToActionText:ne.t("Got It"),arrowPosition:50,offsetX:-140,offsetY:-10,orientation:"top"},_.a.createElement("h3",{className:"margin_bottom_50"},i),_.a.createElement("p",null,s)))}}]);return t}(re["a"]);oe.displayName="ReactionEducationCoachmark";oe.propTypes=ie;oe.defaultProps=se;var le=function e(t){return{featureReactjiAwarenessV2:Object(j["isFeatureEnabled"])(t,"feature_reactji_awareness_v2"),clogger:Object(X["a"])({state:t})}};var ce=Object(y["connect"])(le)(oe);var ue=a(2465);var de=new N["b"]("app_suggestions");var pe={featureReactjiAwarenessV2:false};var me={UNOPENED:0,OPEN:1,CLOSED:2};var he=function(e){f()(t,e);function t(e){var a;s()(this,t);a=l()(this,u()(t).call(this,e));a.onHelperNoteClick=a.onHelperNoteClick.bind(p()(a));a.onEducationCoachmarkDismiss=a.onEducationCoachmarkDismiss.bind(p()(a));a.state={coachmarkState:me.UNOPENED};return a}h()(t,[{key:"componentDidMount",value:function e(){this.props.setInProductCoachmarkAsSeen({notification:"reactji_awareness_coachmark",step:"tooltip"})}},{key:"onEducationCoachmarkDismiss",value:function e(){this.setState(function(){return{coachmarkState:me.CLOSED}});this.props.setInProductCoachmark(null)}},{key:"onHelperNoteClick",value:function e(){var t=this.props.clogger;var a=this.state.coachmarkState;if(a===me.UNOPENED){this.setState(function(){return{coachmarkState:me.OPEN}});this.props.setInProductCoachmarkAsSeen({notification:"reactji_awareness_coachmark",step:"dialog"});t.track(Z["EventId"].EDUCATION_IN_CONTEXT_MESSAGE_PANE,{contexts:{ui_context:{step:Z["UiStep"].LEARN_MORE_PILL,action:Z["UiAction"].CLICK,step_variant:"reaction"}}})}}},{key:"render",value:function e(){var t=this.props.featureReactjiAwarenessV2;var a=this.state.coachmarkState;if(!t)return null;if(a!==me.CLOSED){var r=_.a.createElement(ce,{isOpen:a===me.OPEN,closeCoachmark:this.onEducationCoachmarkDismiss});return _.a.createElement(te["a"],{coachmarkElement:r,orientation:"top",key:"reaction_education_coachmark_anchor",style:{width:"100%",display:"inline"}},_.a.createElement(W["c"],{className:"c-reaction_add__note",onClick:this.onHelperNoteClick,"data-qa":"reaction_education_note"},_.a.createElement(V["b"],{type:"arrow-left","aria-hidden":true}),de.t("Learn more about reactions")))}return null}}]);return t}(g["Component"]);he.displayName="ReactionEducationTip";he.defaultProps=pe;var ve=function e(t){return{featureReactjiAwarenessV2:Object(j["isFeatureEnabled"])(t,"feature_reactji_awareness_v2"),clogger:Object(X["a"])({state:t})}};var fe={setInProductCoachmark:ee["m"],setInProductCoachmarkAsSeen:$["setInProductCoachmarkAsSeen"]};var be=Object(y["connect"])(ve,fe)(he);var ge=a(196);var _e=a.n(ge);var ye=new N["b"]("emoji");var Oe={refToForward:void 0};function ke(e){var t=e.onClick,a=e.number,r=e.selected,n=e.refToForward,i=e.featureCollapseReactions;if(!i)return null;return _.a.createElement(K["c"],{tip:ye.t("Show more reactions"),delay:K["a"]},_.a.createElement(W["c"],{className:E()("c-reaction_expand",{"c-reaction_expand--reacted":r}),onClick:t,"aria-label":ye.t("More reactions"),"aria-expanded":"false","data-qa":"expand_reaction_button",ref:n},_.a.createElement("div",{className:"c-reaction_expand__overlay"},ye.rt("{number} more",{number:a}))))}ke.displayName="ReactionExpandButton";ke.defaultProps=Oe;var Ee=_.a.forwardRef(function(e,t){return _.a.createElement(ke,_e()({},e,{refToForward:t}))});var Ce=new N["b"]("emoji");function Se(e){var t=e.onClick,a=e.featureCollapseReactions;if(!a)return null;return _.a.createElement(K["c"],{tip:Ce.t("Show fewer reactions"),delay:K["a"]},_.a.createElement(W["c"],{className:"c-reaction_expand",onClick:t,"aria-label":Ce.t("More reactions"),"aria-expanded":"true","data-qa":"expand_reaction_button"},_.a.createElement("div",{className:"c-reaction_expand__overlay"},_.a.createElement(V["b"],{type:"chevron-medium-left","aria-hidden":true}))))}Se.displayName="ReactionCollapseButton";function we(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function je(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?we(Object(a),true).forEach(function(t){n()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):we(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Ie=new N["b"]("reactions");var Te=3;var Ae=[];var Ne={reactions:b["default"].arrayOf(b["default"].shape(H["b"])),reactionKey:b["default"].string,currentUser:b["default"].string,className:b["default"].string,emojiMode:b["default"].string,changeReactionFromUserAction:b["default"].func.isRequired,featureSonicEmoji:b["default"].bool,featureEmailWorkflow:b["default"].bool,featureCollapseReactions:b["default"].bool,canReact:b["default"].bool,clientTheme:b["default"].string,isLatestReactionInChannel:b["default"].bool,isInReactjiAwarenessTreatmentGroup:b["default"].bool,hasKeyboardFocus:b["default"].bool,cannedReactions:b["default"].arrayOf(b["default"].shape({name:b["default"].string.isRequired,tooltip:b["default"].string}))};var Pe={reactions:null,reactionKey:null,currentUser:null,className:null,emojiMode:null,featureSonicEmoji:false,featureEmailWorkflow:false,featureCollapseReactions:false,hasKeyboardFocus:false,canReact:true,clientTheme:"light",isLatestReactionInChannel:false,isInReactjiAwarenessTreatmentGroup:false,cannedReactions:[]};var Me=function(e){f()(t,e);h()(t,null,[{key:"getDerivedStateFromProps",value:function e(a,r){if(a.featureCollapseReactions){var n=t.getReactions(a);var i=8;var s=36;var o=0;var l=[];n&&n.forEach(function(e){var t=Math.floor(Math.log10(e.count)+1);var a=t*i+s;o+=a;l.push(o)});var c=38;var u=64;var d=Object(O["sortedIndex"])(l,r.width-c);var p=Object(O["sortedIndex"])(l,r.width-c-u);if(!r.collapsed||!n||n.length<=d)return je({},r,{reactions:n,collapseLimit:d,collapseTarget:p});var m=n.slice(p);var h=m.filter(function(e){return e.users.includes(a.currentUser)});var v=r.reactions&&r.reactions.filter(function(e){return e.users.includes(a.currentUser)});var f=Object(O["differenceBy"])(h,v,"name");var b=!!f.length;return je({},r,{collapsed:!b&&r.collapsed,reactions:n,collapseLimit:d,collapseTarget:p})}return{}}},{key:"getReactions",value:function e(t){var a=t.canReact,r=t.cannedReactions,n=t.featureEmailWorkflow,i=t.reactions;if(!n||!a)return i;var s=(r||[]).map(function(e){var t=e.tooltip,a=e.name;return{count:0,users:Ae,tooltip:t||(n?Ie.t("Click to react with {emoji}",{emoji:":"+a+":"}):void 0),name:a}});return Object(O["uniqBy"])((i||[]).concat(s),"name")}}]);function t(e){var a;s()(this,t);a=l()(this,u()(t).call(this,e));a.onAddReaction=a.onAddReaction.bind(p()(a));a.onReactionClick=a.onReactionClick.bind(p()(a));a.onReactionEmojiPickerSelected=a.onReactionEmojiPickerSelected.bind(p()(a));a.onExpand=a.onExpand.bind(p()(a));a.onCollapse=a.onCollapse.bind(p()(a));if(e.featureCollapseReactions){a.reactionBarRef=_.a.createRef();a.reactionExpandRef=_.a.createRef();a.state={collapsed:true,reactions:e.reactions,width:0,collapseLimit:0,collapseTarget:0}}else a.state={};return a}h()(t,[{key:"componentDidUpdate",value:function e(t,a){this.props.featureCollapseReactions&&this.maybeUpdateCollapseFocus(a.collapsed)}},{key:"onAddReaction",value:function e(t){Object(P["a"])({e:t,rxn_key:this.props.reactionKey})}},{key:"onCollapse",value:function e(){this.setState(function(){return{collapsed:true}})}},{key:"onExpand",value:function e(){this.setState(function(){return{collapsed:false}})}},{key:"onReactionClick",value:function e(t,a){var r=this.props.reactionKey;this.props.changeReactionFromUserAction({key:r,name:t,adding:!a})}},{key:"onReactionEmojiPickerSelected",value:function e(t,a){this.onReactionClick(a)}},{key:"maybeUpdateCollapseFocus",value:function e(t){if(!this.props.hasKeyboardFocus)return;if(t&&!this.state.collapsed){var a=this.reactionBarRef.current&&this.reactionBarRef.current.children;var r=a&&a[this.state.collapseTarget];r&&r.focus()}if(!t&&this.state.collapsed){var n=this.reactionExpandRef&&this.reactionExpandRef.current;n&&n.focus()}}},{key:"render",value:function e(){var a=this;var r=this.props,n=r.reactionKey,i=r.currentUser,s=r.emojiMode,o=r.featureSonicEmoji,l=r.canReact,c=r.isLatestReactionInChannel,u=r.isInReactjiAwarenessTreatmentGroup,d=r.clientTheme,p=r.featureCollapseReactions,m=r.isA11yAnimationsEnabled;var h=this.state,v=h.collapseLimit,f=h.collapseTarget;var b=t.getReactions(this.props);if(!b||0===b.length)return null;var g=b.map(function(e){var t=e.count,r=e.name,o=e.users,c=e.url,u=e.tooltip;return _.a.createElement(H["a"],{name:r,count:t,users:o,url:c,currentUser:i,key:r,reactionKey:n,onClick:a.onReactionClick,emojiMode:s,canReact:l,clientTheme:d,tooltip:u})});var y=p&&b.length>Te&&b.length>v;if(y)if(this.state.collapsed){g=g.slice(0,f);var O=b.length-f;var k=b.slice(f).some(function(e){return e.users.includes(i)});g.push(_.a.createElement(Ee,{onClick:this.onExpand,number:O,selected:k,ref:this.reactionExpandRef,key:"reaction-expand-button",featureCollapseReactions:p}))}else g.push(_.a.createElement(Se,{onClick:this.onCollapse,key:"reaction-collapse-button",featureCollapseReactions:p}));var S=l&&c&&u&&!y;l&&(g=g.concat(_.a.createElement(J,{onClick:this.onAddReaction,onEmojiSelected:this.onReactionEmojiPickerSelected,key:"reaction-add-button",featureSonicEmoji:o,clientTheme:d,showPulse:S&&m})));S&&(g=g.concat(_.a.createElement(be,{key:"reaction-education-tip"})));var w=E()(this.props.className,"c-reaction_bar","c-reaction_bar--"+d,{"c-reaction_bar--collapsed":this.props.featureCollapseReactions&&this.state.collapsed});var j=Ie.t("Reactions",{note:"Screenreader: Label for blind users"});var I;if(p&&b.length>Te){I=_.a.createElement(C["a"],{disableHeight:true},function(e){var t=e.width;return a.setState(function(){return{width:t}})});this.state.width||(g=null)}return _.a.createElement("div",{className:w,role:"group","aria-label":j,ref:this.reactionBarRef},I,g)}}]);return t}(G["a"]);Me.displayName="ReactionBar";Me.propTypes=Ne;Me.defaultProps=Pe;var De=function e(t,a){var r=a.reactionKey,n=a.isLatestReactionInChannel;var i=Object(M["d"])(r),s=i.entityId,o=i.channelId;var l=[];var c=true;if(Object(M["e"])(r)){var u=Object(L["a"])(t,o,s);c=Object(x["canAddReaction"])(t,u);c&&(l=F(t,u))}var d=false;n&&(d="treatment"===Object(I["getGroupForUser"])(t,"reactji_awareness_v2"));return{canReact:c,cannedReactions:l,isA11yAnimationsEnabled:Object(B["k"])(t,"a11y_animations"),reactions:Object(S["getReactionsForKey"])(t,r),currentUser:Object(j["getCurrentUserId"])(t),emojiMode:Object(A["h"])(t),featureSonicEmoji:Object(j["isFeatureEnabled"])(t,"feature_sonic_emoji"),featureEmailWorkflow:Object(T["a"])(t),featureCollapseReactions:Object(j["isFeatureEnabled"])(t,"feature_collapse_reactions"),clientTheme:Object(U["getClientTheme"])(t),isInReactjiAwarenessTreatmentGroup:d}};var xe={changeReactionFromUserAction:w["a"]};var Re=Object(y["connect"])(De,xe)(Object(q["a"])(Me));var Fe=t["a"]=Re},function(e,t,a){"use strict";var r=a(246);var n=a.n(r);var i=a(110);var s=a.n(i);var o=a(135);var l=a.n(o);var c=a(169);var u=a.n(c);var d=a(138);var p=a.n(d);var m=a(147);var h=a.n(m);var v=a(185);var f=a.n(v);var b=a(1);var g=a.n(b);var _=a(0);var y=a(12);var O=a(2);var k=a(30);var E=a(13);var C=a.n(E);var S=a(287);var w=a(38);var j=a(39);var I=a(34);var T=a(283);var A=a(159);var N=a(62);var P=a(33);var M=a(27);var D=a(86);var x=a(333);var R=a(462);var F=a(6);var L=a(16);var U=a(35);var B=a(14);var q=a(117);var G={title:""};var H=function(e){f()(t,e);function t(){s()(this,t);return u()(this,p()(t).apply(this,arguments))}l()(t,[{key:"UNSAFE_componentWillReceiveProps",value:function e(){var t=this.props,a=t.title,r=t.currentStep,n=t.step;var i=r===n;i&&this.props.setModalTitle(a)}},{key:"render",value:function e(){var t=this.props,a=t.currentStep,r=t.step;var n=a===r;var i=C()({"p-onboarding__step":true,"p-onboarding__step--active":n,"p-onboarding__step--inactive":!n});var s=g.a.createElement("div",{className:i},n&&this.props.children);return n?s:null}}]);return t}(b["Component"]);H.displayName="Step";H.defaultProps=G;var W={setModalTitle:S["setModalTitle"]};var V=Object(y["connect"])(null,W)(H);var K=a(196);var z=a.n(K);var Q=a(88);var Y=a.n(Q);var J=a(1897);var X=a(2062);var Z=a(589);var $=a(141);var ee=a(269);var te=a(151);var ae=a(108);var re=a(1272);var ne=a(50);var ie=function e(t){var a=t.src;return g.a.createElement(g.a.Fragment,null,g.a.createElement("div",{className:"p-onboarding__step__header"},g.a.createElement("img",{src:a,srcSet:a+" 1x, "+a.replace(".png","@2x.png")+" 2x",alt:""})))};var se=ie;var oe={realName:"",gdprPref:false,onPasswordSet:O["noop"],needsPasswordSet:true,updateRealName:O["noop"],updateGdprPref:O["noop"],updateStep:O["noop"],setStepCallback:O["noop"],submitCheckPasswordComplexity:O["noop"]};var le=new F["b"]("team_creation");var ce=Object(L["b"])();var ue="TEAM_CREATOR_ONBOARDING";var de=function(e){f()(t,e);function t(e){var a;s()(this,t);a=u()(this,p()(t).call(this,e));var r=a.props.realName;Object(k["a"])(h()(a),["onRealNameChange","onPasswordChange","onGdprPrefChange","onGo","setRealNameInputRef","updateRealName","validateAndSaveStep"]);a.nameInput=null;a.updateRealNameDebounced=Object(O["debounce"])(a.updateRealNameApi,500);a.checkPasswordComplexityDebounced=Object(O["debounce"])(a.checkPasswordComplexityApi,500);a.state={realName:r,realNameError:null,password:"",passwordError:null,gdpr:null};return a}l()(t,[{key:"componentDidMount",value:function e(){this.nameInput.focus();this.props.setStepCallback(this.onGo);this.validateAndSaveStep()}},{key:"onGdprPrefChange",value:function e(t){var a=this;var r=t.target.classList.contains("gdpr_pref_radio");var n=!!r||t.target.checked;var i=t.target.value;this.setState(function(){return{gdpr:n,gdprRadioValue:i}},function(){a.props.updateGdprPref({gdprPref:n})})}},{key:"onGo",value:function e(){var t=this;var a=this.props.needsPasswordSet;this.validateAndSaveStep().then(function(e){if(!e.isValid)return;a&&t.props.onPasswordSet(t.state.password);t.props.updateStep({number:Z["d"].workspace})}).catch(function(e){ce.info(ue,e)})}},{key:"onPasswordChange",value:function e(t){var a=this;this.setState(function(){return{password:t}},function(){a.checkPasswordComplexityDebounced(t)})}},{key:"onRealNameChange",value:function e(){this.updateRealNameDebounced(this.state.realName)}},{key:"setRealNameInputRef",value:function e(t){this.nameInput=t}},{key:"checkPasswordComplexityApi",value:function e(t){var a=this;this.props.submitCheckPasswordComplexity({password:t}).then(function(){a.setState(function(){return{passwordError:null}})}).catch(function(e){var t=e.data;a.setState(function(){return{passwordError:t.error}})}).finally(function(){a.validateAndSaveStep()})}},{key:"updateRealName",value:function e(t){this.setState(function(){return{realName:t}})}},{key:"updateRealNameApi",value:function e(t){var a=this;this.props.updateRealName({realName:t}).then(function(){a.setState(function(){return{realNameError:null}})}).catch(function(e){a.setState(function(){return{realNameError:e}})}).finally(function(){a.validateAndSaveStep()})}},{key:"validateAndSaveStep",value:function e(){var t=this.state,a=t.realName,r=t.realNameError,n=t.password,i=t.passwordError;var s=this.props.needsPasswordSet;var o=!s||n;return this.props.updateStep({validated:!!(a&&o&&!r&&!i),forceValidation:true})}},{key:"renderGdprPref",value:function e(){var t=this.props.inEU;var a=this.props.gdpr;var r=this.state.gdpr;var n=g.a.createElement(ne["a"],{type:"inline",cursor:"pointer",htmlFor:"gdpr_field",text:le.t("It\u2019s okay to send me email with Slack tips, news, and offers."),className:"margin_bottom_150 normal tractor_checkbox_label",id:"gdpr_checkbox_label"},g.a.createElement(ae["a"],{id:"gdpr_field",checked:null===r?a:r,"data-qa":"tractor-gdpr-checkbox",onChange:this.onGdprPrefChange}));var i=g.a.createElement(ee["a"],{className:"margin_bottom_150 normal tractor_checkbox_label","data-qa":"tractor-gdpr-radiogroup"},g.a.createElement(re["a"],null,le.rt("<strong>Can we send you email with Slack tips, news, and offers?</strong>")),g.a.createElement(ne["a"],{htmlFor:"gdpr_field_yes",text:le.t("Sure!"),cursor:"pointer",type:"inline"},g.a.createElement(te["a"],{id:"gdpr_field_yes",className:"gdpr_pref_radio",value:"opt_in","data-qa":"tractor-gdpr-radio-yes",checked:"opt_in"===this.state.gdprRadioValue,onChange:this.onGdprPrefChange})),g.a.createElement(ne["a"],{htmlFor:"gdpr_field_no",text:le.t("No thanks"),cursor:"pointer",type:"inline"},g.a.createElement(te["a"],{id:"gdpr_field_no",className:"gdpr_pref_radio",value:"opt_out","data-qa":"tractor-gdpr-radio-no",checked:"opt_out"===this.state.gdprRadioValue,onChange:this.onGdprPrefChange})));return t?i:n}},{key:"renderPasswordField",value:function e(){var t=this.state,a=t.password,r=t.passwordError;var n=C()("password_input",Y()({"c-input_text--with_error":!!r,"p-onboarding__step__password_input--success":!r},r,!!r));var i={text:le.t("Your password"),className:"margin_bottom_150",htmlFor:"password_field",id:"passwordLabel"};var s={name:"password_field",hintText:le.t("Passwords must be at least 6 characters long, and can\u2019t be things like password, 123456, or abcdef."),id:"password_field","data-qa":"tractor-password-input",className:n,onChange:this.onPasswordChange,value:a,type:"password",isRequired:true};var o="";r&&(o=Object(X["a"])(r));var l=r?{errorText:o,errorLevel:"error",errorType:"nested_box"}:null;return g.a.createElement(ne["a"],i,g.a.createElement($["a"],z()({},s,l)))}},{key:"renderRealNameField",value:function e(){var t=this.state,a=t.realName,r=t.realNameError;var n=r?r.message:null;var i=r?r.name:null;var s=C()("realName_input",Y()({"c-input_text--with_error":n,"p-onboarding__step__real_name_input--success":!n},i,n));var o=n?{errorText:n,errorLevel:"error",errorType:"nested_box"}:null;var l={name:"real_name",hintText:le.t("Your name will be displayed with messages you send."),id:"real_name",className:s,"data-qa":"tractor-real-name-input",value:a,onChange:this.updateRealName,onBlur:this.onRealNameChange,ref:this.setRealNameInputRef,isRequired:true};var c={text:le.t("Your full name"),className:"margin_bottom_150",htmlFor:"real_name",id:"real_name_label"};return g.a.createElement(ne["a"],c,g.a.createElement($["a"],z()({},l,o)))}},{key:"render",value:function e(){return g.a.createElement(g.a.Fragment,null,g.a.createElement(se,{src:this.props.imgUrl}),g.a.createElement("div",{className:"p-onboarding__step__fields","data-qa":"tractor-profile-step"},this.renderRealNameField(),this.props.needsPasswordSet&&this.renderPasswordField(),this.renderGdprPref()))}}]);return t}(b["Component"]);de.displayName="ProfileStep";de.defaultProps=oe;var pe=function e(t){return{realName:Object(S["getRealName"])(t),gdpr:Object(S["getGdprPref"])(t),inEU:Object(S["getInEurope"])(t),needsPasswordSet:Object(w["k"])(t,"needs_initial_password_set")}};var me={updateRealName:S["updateRealName"],updateGdprPref:S["updateGdprPref"],updateStep:S["updateStep"],setStepCallback:S["setStepCallback"],submitCheckPasswordComplexity:J["d"]};var he=Object(y["connect"])(pe,me)(de);var ve=a(11);var fe=a(152);var be=a(530);var ge={invites:[],workspaceName:"",domainWhitelistingPref:false,signupDomain:"",onDialogFinish:O["noop"],validateInvites:O["noop"],sendInvites:O["noop"],setDomainWhitelistingPref:O["noop"],updateStep:O["noop"],setStepCallback:O["noop"],canWhitelistDomain:false,featureTractorSharedInviteLink:true,featureTractorBackupChannelnameCopy:false,sharedInviteLink:"",fetchAndSetSharedInviteLink:O["noop"]};var _e=new F["b"]("team_creation");var ye=Object(L["b"])();var Oe="TEAM_CREATOR_ONBOARDING";var ke=function(e){f()(t,e);function t(e){var a;s()(this,t);a=u()(this,p()(t).call(this,e));var r=a.props.invites;var n=r instanceof Array?r.join(", "):r;Object(k["a"])(h()(a),["onInvitesChange","onDomainWhitelistingCheckboxChange","onGo","setInvitesInputRef","renderSharedInviteLink","toggleSharedInviteLinkView"]);a.invitesInput=null;a.validateInvitesDebounced=Object(O["debounce"])(a.validateInvites,250);a.state={invites:n,invitesError:null,domainWhitelistingPref:false,toggleSharedInviteLink:false};return a}l()(t,[{key:"componentDidMount",value:function e(){this.invitesInput.focus();var t=this.props,a=t.sharedInviteLink,r=t.featureTractorSharedInviteLink;this.props.setStepCallback(this.onGo);r&&!a&&this.props.fetchAndSetSharedInviteLink();this.props.updateStep({validated:true})}},{key:"onDomainWhitelistingCheckboxChange",value:function e(t){var a=this;var r=t.target.checked;this.setState(function(){return{domainWhitelistingPref:r}},function(){a.props.setDomainWhitelistingPref(r)})}},{key:"onGo",value:function e(){var t=this;this.props.sendInvites().then(function(){t.props.onDialogFinish().then(function(){t.props.updateStep({number:Z["d"].completion})})}).catch(function(e){ye.info(Oe,e);t.setState(function(){return{invitesError:e}})})}},{key:"onInvitesChange",value:function e(t){var a=this;this.setState(function(){return{invites:t}},function(){a.validateInvitesDebounced(t)})}},{key:"setInvitesInputRef",value:function e(t){this.invitesInput=t}},{key:"toggleSharedInviteLinkView",value:function e(){var t=this.state.toggleSharedInviteLink;this.setState(function(){return{toggleSharedInviteLink:!t}})}},{key:"validateInvites",value:function e(t){var a=this;this.props.validateInvites({invites:t}).then(function(){a.setState(function(){return{invitesError:null}})}).catch(function(e){a.setState(function(){return{invitesError:e}})})}},{key:"renderDomainWhitelistingCheckbox",value:function e(){var t=this.props.signupDomain;var a=this.state.domainWhitelistingPref;var r=this.props.domainWhitelistingPref;return g.a.createElement(ne["a"],{className:"margin_bottom_150 normal tractor_checkbox_label",text:_e.rt("Let other people sign up with their verified <strong>@{signupDomain}</strong> email address.",{signupDomain:t}),id:"domain_whitelisting_checkbox_label",htmlFor:"domain_whitelisting_field",type:"inline",cursor:"pointer"},g.a.createElement(ae["a"],{id:"domain_whitelisting_field","data-qa":"tractor-domain-whitelisting-checkbox",checked:null===a?r:a,onChange:this.onDomainWhitelistingCheckboxChange}))}},{key:"renderInvitesInput",value:function e(){var t=this.state,a=t.invites,r=t.invitesError;var n=this.props,i=n.workspaceName,s=n.channelName,o=n.featureTractorBackupChannelnameCopy;var l=r?r.message:null;var c=r?r.name:null;var u=C()("invites_input",Y()({"c-input_textarea--with_error":l,"p-onboarding__step__invites_input--success":!l},c,l));var d;d=o?s&&void 0!==s&&""!==s?_e.rt("We\u2019ll send invitations to join <strong>{workspaceName}</strong> on Slack. New members will be added to <strong>#{channelName}</strong>, plus your starter channels, <strong>#general</strong> and <strong>#random</strong>.",{channelName:s,workspaceName:i}):_e.rt("We\u2019ll send invitations to join {workspaceName} on Slack. New members will be added to your starter channels, <strong>#general</strong> and <strong>#random</strong>.",{workspaceName:i}):_e.rt("We\u2019ll send invitations to join {workspaceName} on Slack. New members will be added to <strong>#{channelName}</strong>, plus your starter channels, <strong>#general</strong> and <strong>#random</strong>.",{channelName:s,workspaceName:i});var p={name:"invites_field",id:"invites_field",className:u,onChange:this.onInvitesChange,value:a,"data-qa":"tractor-invites-input",hintText:r?null:d,ref:this.setInvitesInputRef};var m={className:"margin_bottom_150",text:_e.t("Email addresses"),htmlFor:"invites_field",id:"invites_label"};var h=l?{errorText:l,errorLevel:"error",errorType:"nested_box"}:null;return g.a.createElement(ne["a"],m,g.a.createElement(be["a"],z()({},p,h)))}},{key:"renderSharedInviteLink",value:function e(){if(!this.props.featureTractorSharedInviteLink)return null;var t=this.props.sharedInviteLink;var a=this.state.toggleSharedInviteLink;var r=_e.t("invite link");var n=_e.rt("<b>Or, you could get an <u>{link}</u> to share with other people.</b>",{link:g.a.createElement(fe["a"],{"data-qa":"tractor_shared_invite_link_toggle",onClick:this.toggleSharedInviteLinkView},r)});var i={text:n,htmlFor:"shared_invite_link",id:"shared_invite_link_label","data-qa":"tractor_shared_invite_link_label"};var s={name:"shared_invite_link",id:"shared_invite_link","data-qa":"tractor-invites-shared-invite-input",hintText:_e.t("Anyone can use this link to join your workspace. It will expire in 4 weeks and can be used for up to 2000 members."),value:t,onFocus:this.select};return g.a.createElement("div",{className:"margin_bottom_100"},!a&&g.a.createElement("span",null,n),a&&g.a.createElement(ne["a"],i,g.a.createElement($["a"],s)))}},{key:"render",value:function e(){return g.a.createElement(g.a.Fragment,null,g.a.createElement(se,{src:this.props.imgUrl}),g.a.createElement("div",{className:"p-onboarding__step__fields","data-qa":"tractor-invites-step"},this.renderInvitesInput(),this.renderSharedInviteLink(),this.props.canWhitelistDomain&&this.renderDomainWhitelistingCheckbox()))}}]);return t}(b["Component"]);ke.displayName="InvitesStep";ke.defaultProps=ge;var Ee=function e(t){return{invites:Object(S["getInvites"])(t),workspaceName:Object(S["getWorkspaceName"])(t),domainWhitelistingPref:Object(S["getDomainWhitelistingPref"])(t),channelName:Object(S["getChannelName"])(t),signupDomain:Object(S["getSignupDomain"])(t),canWhitelistDomain:Object(S["getCanWhitelistOwnerEmailDomain"])(t),featureTractorSharedInviteLink:Object(ve["isFeatureEnabled"])(t,"feature_tractor_shared_invite_link"),featureTractorBackupChannelnameCopy:Object(ve["isFeatureEnabled"])(t,"feature_tractor_backup_channelname_copy"),sharedInviteLink:Object(S["getSharedInviteLink"])(t)}};var Ce={validateInvites:S["validateInvites"],sendInvites:S["sendInvites"],setDomainWhitelistingPref:S["setDomainWhitelistingPref"],fetchAndSetSharedInviteLink:S["fetchAndSetSharedInviteLink"],updateStep:S["updateStep"],setStepCallback:S["setStepCallback"]};var Se=Object(y["connect"])(Ee,Ce)(ke);var we={workspaceName:"",workspaceDomain:"",hasInvited:false,onDialogFinish:O["noop"],updateWorkspaceName:O["noop"],updateWorkspaceDomain:O["noop"],updateStep:O["noop"],setStepCallback:O["noop"],fetchAndSetSharedInviteLink:O["noop"],featureTractorSharedInviteLink:false};var je=new F["b"]("team_creation");var Ie=Object(L["b"])();var Te="TEAM_CREATOR_ONBOARDING";var Ae=function(e){f()(t,e);function t(e){var a;s()(this,t);a=u()(this,p()(t).call(this,e));var r=a.props,n=r.workspaceName,i=r.workspaceDomain;Object(k["a"])(h()(a),["onWorkspaceNameChange","onWorkspaceNameBlur","onWorkspaceDomainChange","onGo","setWorkspaceNameInputRef","validateAndSaveStep"]);a.nameInput=null;a.updateWorkspaceNameDebounced=Object(O["debounce"])(a.updateWorkspaceNameApi,500);a.updateWorkspaceDomainDebounced=Object(O["debounce"])(a.updateWorkspaceDomainApi,500);a.state={workspaceName:n,workspaceNameError:null,workspaceDomain:i,workspaceDomainError:null};return a}l()(t,[{key:"componentDidMount",value:function e(){this.nameInput.focus();this.props.setStepCallback(this.onGo);this.props.updateStep({validated:true})}},{key:"onGo",value:function e(){var t=this;this.validateAndSaveStep().then(function(e){if(!e.isValid)return;t.props.hasInvited?t.props.onDialogFinish().then(function(){t.props.updateStep({number:Z["d"].completion})}):t.props.updateStep({number:Z["d"].invites})}).catch(function(e){Ie.info(Te,e)})}},{key:"onWorkspaceDomainChange",value:function e(t){var a=this;this.setState(function(){return{workspaceDomain:t}},function(){a.updateWorkspaceDomainDebounced(t)})}},{key:"onWorkspaceNameBlur",value:function e(){var t=this.props.workspaceName;var a=this.state.workspaceName;a||this.onWorkspaceNameChange(t)}},{key:"onWorkspaceNameChange",value:function e(t){var a=this;this.setState(function(){return{workspaceName:t}},function(){a.updateWorkspaceNameDebounced(t)})}},{key:"setWorkspaceNameInputRef",value:function e(t){this.nameInput=t}},{key:"updateWorkspaceDomainApi",value:function e(t){var a=this;var r=this.props.featureTractorSharedInviteLink;this.props.updateWorkspaceDomain({workspaceDomain:t}).then(function(){a.setState(function(){return{workspaceDomainError:null}});r&&a.props.fetchAndSetSharedInviteLink()}).catch(function(e){a.setState(function(){return{workspaceDomainError:e}})}).finally(function(){a.validateAndSaveStep()})}},{key:"updateWorkspaceNameApi",value:function e(t){var a=this;this.props.updateWorkspaceName({workspaceName:t}).then(function(){a.setState(function(){return{workspaceNameError:null}})}).catch(function(e){a.setState(function(){return{workspaceNameError:e}})}).finally(function(){a.validateAndSaveStep()})}},{key:"validateAndSaveStep",value:function e(){var t=this.state,a=t.workspaceDomain,r=t.workspaceNameError,n=t.workspaceDomainError;return this.props.updateStep({validated:!!(a&&!r&&!n),forceValidation:true})}},{key:"renderWorkspaceDomain",value:function e(){var t=this.state,a=t.workspaceDomain,r=t.workspaceDomainError;var n=r?r.message:null;var i=r?r.name:null;var s=C()("workspaceDomain_input",Y()({"c-input_text--with_error":n,"p-onboarding__step__workspace_domain_input--success":!n},i,n));var o={text:je.t("Slack URL"),className:"margin_bottom_150",htmlFor:"workspace_domain_field",id:"workspace_domain_label"};var l={name:"workspace_domain_field",id:"workspace_domain_field",className:s,hintText:je.t("You\u2019ll use this URL to sign in to Slack. Letters, numbers, and hyphens only."),"data-qa":"tractor-workspace-domain-input",onChange:this.onWorkspaceDomainChange,value:a,suffix:".slack.com",isRequired:true};var c=n?{errorText:n,errorLevel:"error",errorType:"nested_box"}:null;return g.a.createElement(ne["a"],o,g.a.createElement($["a"],z()({},l,c)))}},{key:"renderWorkspaceName",value:function e(){var t=this.state,a=t.workspaceName,r=t.workspaceNameError;var n=r?r.message:null;var i=r?r.name:null;var s=C()("workspaceName_input",Y()({"c-input_text--with_error":n,"p-onboarding__step__workspace_name_input--success":!n},i,n));var o={className:"margin_bottom_150",text:je.t("Slack workspace name"),htmlFor:"workspace_name_field",id:"workspace_name_label"};var l={name:"workspace_name_field",id:"workspace_name_field",className:s,onChange:this.onWorkspaceNameChange,onBlur:this.onWorkspaceNameBlur,value:a,"data-qa":"tractor-workspace-name-input",hintText:je.t("Most teams use the name of their company or organization."),ref:this.setWorkspaceNameInputRef,isRequired:true};var c=n?{errorText:n,errorLevel:"error",errorType:"nested_box"}:null;return g.a.createElement(ne["a"],o,g.a.createElement($["a"],z()({},l,c)))}},{key:"render",value:function e(){return g.a.createElement(g.a.Fragment,null,g.a.createElement(se,{src:this.props.imgUrl}),g.a.createElement("div",{className:"p-onboarding__step__fields","data-qa":"tractor-workspace-step"},this.renderWorkspaceName(),this.renderWorkspaceDomain()))}}]);return t}(b["Component"]);Ae.displayName="WorkspaceStep";Ae.defaultProps=we;var Ne=function e(t){return{workspaceName:Object(S["getWorkspaceName"])(t),workspaceDomain:Object(S["getWorkspaceDomain"])(t),hasInvited:Object(w["k"])(t,"has_invited"),featureTractorSharedInviteLink:Object(ve["isFeatureEnabled"])(t,"feature_tractor_shared_invite_link")}};var Pe={updateWorkspaceName:S["updateWorkspaceName"],updateWorkspaceDomain:S["updateWorkspaceDomain"],fetchAndSetSharedInviteLink:S["fetchAndSetSharedInviteLink"],updateStep:S["updateStep"],setStepCallback:S["setStepCallback"]};var Me=Object(y["connect"])(Ne,Pe)(Ae);var De=a(1472);var xe=a(43);var Re=a(211);var Fe={invites:[],ggEnabled:false,isTeamOnStandardPlan:false,isTeamOnFreePlan:false,isTeamOnPlusPlan:false,updateStep:O["noop"],setPrimaryView:O["noop"],closeModal:O["noop"],clogger:{}};var Le=new F["b"]("team_creation");var Ue=function(e){f()(t,e);function t(e){var a;s()(this,t);a=u()(this,p()(t).call(this,e));a.navigateToBenefitsPage=a.navigateToBenefitsPage.bind(h()(a));return a}l()(t,[{key:"componentDidMount",value:function e(){this.props.updateStep({validated:true})}},{key:"navigateToBenefitsPage",value:function e(t){t.preventDefault();var a=this.props,r=a.clogger,n=a.isTeamOnStandardPlan;r.track(A["q"],{contexts:{ui_context:{step:B["UiStep"].TRACTOR_DIALOG_COMPLETED_STEP,step_variant:n?"standard_trial":"plus_trial",action:B["UiAction"].CLICK,ui_properties:{element_type:B["ElementType"].LINK,element_name:"learn_more_about_features"}}}});this.props.setPrimaryView({id:"Ppaid-benefits"});this.props.closeModal()}},{key:"render",value:function e(){var t=this;var a=this.props,r=a.imgUrl,n=a.invites,i=a.channelName,s=a.ggEnabled,o=a.isTeamOnFreePlan,l=a.isTeamOnPlusPlan,c=a.isTeamOnStandardPlan;var u="";s&&(o?u=Object(De["a"])(A["m"].Free):c?u=Object(De["a"])(A["m"].Standard):l&&(u=Object(De["a"])(A["m"].Plus)));var d=s&&!o&&u;var p=i&&void 0!==i&&""!==i?n.length:0;var m;var h;switch(p){case 0:m=d?Le.t("Your workspace is all set"):Le.t("Your Slack workspace is all set");h=d?Le.rt("We\u2019ve added a few basic channels for your team\xa0\u2014 go ahead and poke around, or <a>learn about {selectedSlackPlan}</a>. When you\u2019re ready, add your payment details to avoid any disruption when your trial ends. ",{selectedSlackPlan:u},function(e){var a=e.text;return g.a.createElement(xe["a"],{onClick:t.navigateToBenefitsPage},a)}):Le.rt("We\u2019ve added a few basic channels for your team \u2014 go ahead and poke around! Or <strong>try sending yourself a direct message</strong> to test things out.");break;case 1:m=Le.t("Your invitation has been sent!");h=d?Le.rt("Your teammate will be here as soon as they accept the invitation. Until then, try posting a welcome message in #{channelName}, or <a>learn about {selectedSlackPlan}</a>. When you\u2019re ready, add your payment details to avoid any disruption when your trial ends.",{selectedSlackPlan:u,channelName:i},function(e){var a=e.text;return g.a.createElement(xe["a"],{onClick:t.navigateToBenefitsPage},a)}):Le.rt("Your teammate will be here as soon as they accept the invitation. Until then, try posting a welcome message for them in <strong>#{channelName}</strong>.",{channelName:i});break;default:m=Le.t("Your {numInvites} invitations have been sent!",{numInvites:p});h=d?Le.rt("Your teammates will be here as soon as they accept the invitation. Until then, try posting a welcome message in #{channelName}, or <a>learn about {selectedSlackPlan}</a>. When you\u2019re ready, add your payment details to avoid any disruption when your trial ends.",{selectedSlackPlan:u,channelName:i},function(e){var a=e.text;return g.a.createElement(xe["a"],{onClick:t.navigateToBenefitsPage},a)}):Le.rt("Your teammates will be here as soon as they accept their invitations. Until then, try posting a welcome message for them in <strong>#{channelName}</strong>.",{channelName:i});break}return g.a.createElement(g.a.Fragment,null,g.a.createElement(se,{src:r}),g.a.createElement("div",{className:"p-onboarding__step__fields","data-qa":"tractor-completion-step"},g.a.createElement("h2",null,m),h))}}]);return t}(b["Component"]);Ue.displayName="CompletionStep";Ue.defaultProps=Fe;var Be=function e(t){var a=Object(P["d"])(t);return{invites:Object(S["getInvites"])(t),channelName:Object(S["getChannelName"])(t),ggEnabled:Object(N["a"])(t,"gg_enabled"),isTeamOnStandardPlan:Object(M["isOnStandardPlan"])(a),isTeamOnFreePlan:Object(M["isOnFreePlan"])(a),isTeamOnPlusPlan:Object(M["isOnPlusPlan"])(a),clogger:Object(U["a"])({state:t})}};var qe={updateStep:S["updateStep"],setPrimaryView:Re["a"],closeModal:j["closeModal"]};var Ge=Object(y["connect"])(Be,qe)(Ue);var He=a(174);var We=a(214);var Ve=a(3549);var Ke={invites:[],modalTitle:"",onClose:O["noop"],stepCallback:O["noop"],stepNumber:0,isCurrentStepValid:false,isPromiseRunning:false,hasInvited:false,needsPasswordSet:true,ggEnabled:false,isTeamOnStandardPlan:false,isTeamOnFreePlan:false,isTeamOnPlusPlan:false,team:null,standardPlanProductId:"",plusPlanProductId:"",isInCreatorWelcomePlace:false,fetchAndSetChannelInfo:O["noop"],fetchAndSetWorkspace:O["noop"],fetchAndSetSignupDetails:O["noop"],setInitialMarketingPref:O["noop"],setStepNumber:O["noop"],updatePassword:O["noop"],submitDomainWhitelistingPref:O["noop"],completeWorkflowTask:O["noop"],closeModal:O["noop"],fetchPlansData:O["noop"],markAccountSetupTaskAsComplete:O["noop"],clientTheme:"light"};var ze=new F["b"]("team_creation");var Qe=Object(L["b"])();var Ye="TEAM_CREATOR_ONBOARDING";var Je=function(e){f()(t,e);function t(e){var a;s()(this,t);a=u()(this,p()(t).call(this,e));Object(k["a"])(h()(a),["getGoButtonText","getFooterText","onBack","onGo","onPasswordSet","onDialogFinish","onClose"]);a.state={password:null};return a}l()(t,[{key:"componentDidMount",value:function e(){this.props.fetchAndSetChannelInfo();this.props.fetchAndSetWorkspace();this.props.fetchAndSetSignupDetails();this.props.setInitialMarketingPref();this.preloadRemainingImages();Qe.info(Ye,"Onboarding dialog mounted.");var t=this.props.needsPasswordSet;t&&this.props.setStepNumber(0);!this.hasGGTrialBehavior()||this.props.standardPlanProductId&&this.props.plusPlanProductId||this.props.fetchPlansData()}},{key:"componentDidUpdate",value:function e(t){t.stepNumber!==this.props.stepNumber&&3===this.props.stepNumber&&this.props.clogger.track(A["q"],{contexts:{ui_context:{step:B["UiStep"].TRACTOR_DIALOG_COMPLETED_STEP,step_variant:this.getGGClogStepVariant(),action:B["UiAction"].IMPRESSION}}})}},{key:"onBack",value:function e(){var t=this.props,a=t.stepNumber,r=t.clogger;if(this.hasGGTrialBehavior()&&a===Z["d"].completion){r.track(A["q"],{contexts:{ui_context:{step:B["UiStep"].TRACTOR_DIALOG_COMPLETED_STEP,step_variant:this.getGGClogStepVariant(),action:B["UiAction"].CLICK,ui_properties:{element_type:B["ElementType"].BUTTON,element_name:"add_payment_details"}}}});this.openCheckoutUrl();return}var n;n=a>0?a-1:Z["c"]-1;r.track(B["EventId"].GROWTH_CREATE_TRACTOR_TEAM,{contexts:{ui_context:{step:Z["e"][a],action:"BACK"}}});r.track(A["q"],{contexts:{ui_context:{step:Z["e"][a],action:"BACK"}}});this.props.setStepNumber(n)}},{key:"onClose",value:function e(){var t=this.props,a=t.clogger,r=t.stepNumber;a.track(B["EventId"].GROWTH_CREATE_TRACTOR_TEAM,{contexts:{ui_context:{step:Z["e"][r],action:"CLOSE"}}});a.track(A["q"],{contexts:{ui_context:{step:Z["e"][r],action:"CLOSE"}}});Object(I["a"])()?this.props.closeModal():this.props.onClose()}},{key:"onDialogFinish",value:function e(){var t=this;var a=this.state.password;var r=this.props.isInCreatorWelcomePlace;var n;n=this.props.needsPasswordSet?this.props.updatePassword({password:a}):Promise.resolve();var i=this.props.submitDomainWhitelistingPref();return Promise.all([n,i]).then(function(){return t.props.completeWorkflowTask({taskSubtype:"complete_team_creator_account_setup"}).then(function(){r&&t.props.markAccountSetupTaskAsComplete()})}).catch(function(e){Qe.info(Ye,e)})}},{key:"onGo",value:function e(){var t=this.props,a=t.stepCallback,r=t.isCurrentStepValid,n=t.clogger,i=t.stepNumber;r&&a();n.track(B["EventId"].GROWTH_CREATE_TRACTOR_TEAM,{contexts:{ui_context:{step:Z["e"][i],action:"CLICK"}}});n.track(A["q"],{contexts:{ui_context:{step:Z["e"][i],step_variant:this.getGGClogStepVariant(),action:"CLICK",is_primary_cta:true,ui_properties:{element_type:B["ElementType"].BUTTON,element_name:"explore_slack"}}}})}},{key:"onPasswordSet",value:function e(t){this.setState(function(){return{password:t}})}},{key:"getFooterText",value:function e(){var t=this.props,a=t.stepNumber,r=t.hasInvited;if(a>=Z["c"])return null;var n=a+1;var i=r?2:3;return ze.t("Step {stepNumber} of {totalSteps}",{stepNumber:n,totalSteps:i})}},{key:"getGGClogStepVariant",value:function e(){return this.props.isTeamOnStandardPlan?"standard_trial":"plus_trial"}},{key:"getGoButtonText",value:function e(){var t=this.props,a=t.stepNumber,r=t.invites,n=t.hasInvited;var i=r?r.length:0;switch(a){case 1:return n?ze.t("Finish"):ze.t("Next");case 2:return i>=1?ze.t("Add {numEmails, plural, =1 {# Person} other {# People}}",{numEmails:i,fallbackHash:"afa51f5e80065586875a7cd693abcad1a66bdb3b"}):ze.t("Finish");case 3:if(0===i)return ze.t("Explore Slack");return ze.t("Start the Conversation");default:return ze.t("Next")}}},{key:"hasGGTrialBehavior",value:function e(){var t=this.props,a=t.ggEnabled,r=t.isTeamOnFreePlan;return a&&!r}},{key:"openCheckoutUrl",value:function e(){var t=this.props,a=t.isTeamOnStandardPlan,r=t.isTeamOnPlusPlan,n=t.isTeamOnFreePlan,i=t.standardPlanProductId,s=t.plusPlanProductId,o=t.team;var l;a?l=i:r?l=s:n&&(l=i);Object(M["openAuthenticatedUrlInBrowser"])(o,D["a"]+"?s=1&p="+l+"&entry_point=pricing_plans_modal")}},{key:"preloadRemainingImages",value:function e(){Object(O["map"])(Z["b"][this.props.clientTheme],function(e,t){if("profile"===t)return null;var a=new Image;var r=new Image;a.src=e;r.src=e.replace(".png","@2x.png");return null})}},{key:"shouldShowBackButton",value:function e(t){if(t===Z["d"].profile||t===Z["d"].completion&&!this.hasGGTrialBehavior())return false;return true}},{key:"render",value:function e(){var t=this.props,a=t.modalTitle,r=t.stepNumber,n=t.isCurrentStepValid,i=t.isPromiseRunning,s=t.clientTheme;var o=this.hasGGTrialBehavior()&&r===Z["d"].completion?ze.t("Add Payment Details"):ze.t("Back");var l=C()("p-team_creator_onboarding_dialog",{"p-team_creator_onboarding_dialog--complete":3===r});return g.a.createElement(g.a.Fragment,null,g.a.createElement(q["a"],{showGoButton:true,showCloseButton:true,showHeader:true,shouldCloseOnCancel:false,shouldCloseOnGo:r===Z["d"].completion,truncateTitle:false,onClose:this.onClose,showCancelButton:this.shouldShowBackButton(r),goButtonIsDisabled:!n,goButtonIsPending:i,goButtonText:this.getGoButtonText(),title:a,footerText:this.getFooterText(),onGo:this.onGo,onCancel:this.onBack,cancelText:o,id:"team-creator-onboarding-dialog","data-qa":"team-creator-onboarding-dialog",className:l,bodyClassName:"p-team_creator_onboarding_dialog__body"},g.a.createElement(V,{step:0,currentStep:r,title:ze.t("Set your name and password")},g.a.createElement(he,{imgUrl:Z["b"][s].profile,onPasswordSet:this.onPasswordSet})),g.a.createElement(V,{step:1,currentStep:r,title:ze.t("Review your team\u2019s details")},g.a.createElement(Me,{imgUrl:Z["b"][s].workspace,onDialogFinish:this.onDialogFinish})),g.a.createElement(V,{step:2,currentStep:r,title:ze.t("Add people to your Slack workspace")},g.a.createElement("div",null),g.a.createElement(Se,{imgUrl:Z["b"][s].invites,onDialogFinish:this.onDialogFinish})),g.a.createElement(V,{step:3,currentStep:r},g.a.createElement("div",null),g.a.createElement(Ge,{imgUrl:Z["b"][s].completion}))))}}]);return t}(g.a.Component);Je.displayName="TeamCreatorOnboardingDialog";Je.defaultProps=Ke;var Xe=function e(t){var a=Object(x["v"])(t);var r=n()(a,1),i=r[0];var s=Object(P["d"])(t);return{hasInvited:Object(w["k"])(t,"has_invited"),needsPasswordSet:Object(w["k"])(t,"needs_initial_password_set"),stepNumber:Object(S["getStepNumber"])(t),modalTitle:Object(S["getModalTitle"])(t),stepCallback:Object(S["getStepCallback"])(t),isCurrentStepValid:Object(S["getCurrentStepValidity"])(t),isPromiseRunning:Object(S["getIsPromiseRunning"])(t),invites:Object(S["getInvites"])(t),clogger:Object(U["a"])({state:t}),clientTheme:Object(T["getClientTheme"])(t),ggEnabled:Object(N["a"])(t,"gg_enabled"),isTeamOnStandardPlan:Object(M["isOnStandardPlan"])(s),isTeamOnFreePlan:Object(M["isOnFreePlan"])(s),isTeamOnPlusPlan:Object(M["isOnPlusPlan"])(s),isInCreatorWelcomePlace:Object(We["v"])(t),team:s,standardPlanProductId:Object(x["e"])(t,i,D["f"].monthly,D["e"].standard.id,D["d"].CREDIT_CARD)||"",plusPlanProductId:Object(x["e"])(t,i,D["f"].monthly,D["e"].plus.id,D["d"].CREDIT_CARD)||""}};var Ze={fetchAndSetChannelInfo:S["fetchAndSetChannelInfo"],fetchAndSetWorkspace:S["fetchAndSetWorkspace"],fetchAndSetSignupDetails:S["fetchAndSetSignupDetails"],setInitialMarketingPref:S["setInitialMarketingPref"],setStepNumber:S["setStepNumber"],updatePassword:S["updatePassword"],submitDomainWhitelistingPref:S["submitDomainWhitelistingPref"],completeWorkflowTask:S["completeWorkflowTask"],closeModal:j["closeModal"],fetchPlansData:R["f"],markAccountSetupTaskAsComplete:He["f"]};var $e=t["a"]=Object(y["connect"])(Xe,Ze)(Je)},,,,,,function(e,t,a){"use strict";var r=a(88);var n=a.n(r);var i=a(110);var s=a.n(i);var o=a(135);var l=a.n(o);var c=a(169);var u=a.n(c);var d=a(138);var p=a.n(d);var m=a(147);var h=a.n(m);var v=a(185);var f=a.n(v);var b=a(1);var g=a.n(b);var _=a(12);var y=a(2);var O=a(0);var k=a(6);var E=a(2074);var C=function e(t,a){var r=Math.min(a||5e5,5e5);if(t.length>r)return Object(y["escapeRegExp"])(t.slice(0,r));return Object(y["escapeRegExp"])(t)};var S=a(33);var w=a(325);var j=a(77);var I=a(35);var T=a(90);var A=a(11);var N=a(13);var P=a.n(N);var M=a(286);var D=a(30);var x=a(428);var R=a(1703);var F=a(89);var L=a(23);var U=a(152);var B=a(145);var q=function e(t){return g.a.createElement("div",null,g.a.createElement(U["a"],{"data-qa":"article-"+t.article.id,className:"p-help_search__list__item "+(t.isFocus?"p-help_search__list__item__focus":""),key:t.article.id+"-list-item",onClick:function e(){t.onClickArticle(t.article.url)},onKeyDown:function e(a){13===a.keyCode&&t.onClickArticle(t.article.url)}},g.a.createElement("div",{className:"p-help_search__list__item__title"},"string"===typeof t.article.title?g.a.createElement(B["a"],{className:"c-channel_search_result__justification",text:t.article.title,showTooltips:false}):t.article.title),g.a.createElement(L["b"],{type:"external-link",className:"p-help_search__list__icon"})))};q.displayName="Article";q.defaultProps={article:{},isFocus:false,onClickArticle:y["noop"]};var G=q;var H=function e(t){var a=""+t.category.category_id==="-1";var r=function e(t){return a?"/help":"/help/categories/"+t};return g.a.createElement("div",null,g.a.createElement(U["a"],{"data-qa":"category-"+t.category.category_id,className:"p-help_search__list__category_item "+(t.isFocus?"p-help_search__list__category_item__focus":"")+" "+(a?"p-help_search__list__category_item__last":""),key:t.category.category_id+"-list-item",onClick:function e(){t.onClickCategory(r(t.category.category_id))},onKeyDown:function e(a){13===a.keyCode&&t.onClickCategory(r(t.category.category_id))}},g.a.createElement("div",{className:"p-help_search__list__category_item_title_description"},g.a.createElement("div",{className:"p-help_search__list__category_item__title"},"string"===typeof t.category.name?g.a.createElement(B["a"],{className:"c-channel_search_result__justification",text:t.category.name,showTooltips:false}):t.category.name),g.a.createElement("div",{className:"p-help_search__list__category_item__description"},"string"===typeof t.category.description?g.a.createElement(B["a"],{className:"c-channel_search_result__justification",text:t.category.description,showTooltips:false}):t.category.description)),a?null:g.a.createElement(L["b"],{type:"external-link",className:"p-help_search__list__icon"})))};H.displayName="Category";H.defaultProps={category:{},isFocus:false,onClickCategory:y["noop"]};var W=H;var V=a(3333);var K=new k["b"]("help");var z={query:"",articles:[],categories:[],tickets:{closed:0,read:0,unread:0},onQueryChange:y["noop"],isLoading:false,onOpenLink:y["noop"],autoFocus:false,noTopMargin:false,noBottomMargin:false,focusFirstResult:true,isIAPhase1EnabledFlag:false,featureHelpModalIaRedesign:false};var Q=function(e){f()(t,e);function t(e){var a;s()(this,t);a=u()(this,p()(t).call(this,e));a.state={query:a.props.query,articles:a.props.articles,categories:a.props.categories,focusFirstResult:a.props.focusFirstResult,isLoading:a.props.isLoading};a.zdLocale=Object(j["a"])();Object(D["a"])(h()(a),["onListMouseEnter","onSearchInputChange","onSearchInputSubmit","onClickArticle","onClickCategory","onSearchInputBlur","renderArticles","renderCategories","renderCategoriesOrArticles"]);return a}l()(t,[{key:"UNSAFE_componentWillReceiveProps",value:function e(t){t.articles===this.state.articles&&t.categories===this.state.categories||this.setState(function(){return{articles:t.articles,categories:t.categories,isLoading:t.isLoading}})}},{key:"onClickArticle",value:function e(t){var a=t.url,r=t.index,n=t.articleId;this.openLinkInNewWindow({url:a,index:r,articleId:n})}},{key:"onClickCategory",value:function e(t){var a=t.url,r=t.index,n=t.categoryId;this.openLinkInNewWindow({url:a,index:r,categoryId:n})}},{key:"onListMouseEnter",value:function e(){this.setState(function(){return{focusFirstResult:false}})}},{key:"onSearchInputBlur",value:function e(){this.setState(function(){return{focusFirstResult:false}})}},{key:"onSearchInputChange",value:function e(t){var a=t.target.value;this.setState(function(){return{query:a,focusFirstResult:true}});this.props.onQueryChange(a)}},{key:"onSearchInputSubmit",value:function e(){this.state.articles.length&&this.openLinkInNewWindow({url:this.state.articles[0].url,isFromSubmit:true,index:0,articleId:this.state.articles[0].id})}},{key:"openLinkInNewWindow",value:function e(t){var a=t.url,r=t.index,n=t.isFromSubmit,i=t.articleId,s=t.categoryId;var o=this.props.onOpenLink;o(s?{url:a,query:this.state.query,index:r,isFromSubmit:n,categoryId:s}:{url:a,query:this.state.query,index:r,isFromSubmit:n,articleId:i});window.open(a)}},{key:"renderArticles",value:function e(t){var a=this;var r=this.state,n=r.articles,i=r.focusFirstResult;var s=n[t];return g.a.createElement(G,{article:s,isFocus:i&&0===t,onClickArticle:function e(r){return a.onClickArticle({url:r,index:t,articleId:s.id})}})}},{key:"renderCategories",value:function e(t){var a=this;var r=this.state,n=r.categories,i=r.focusFirstResult;var s=n[t];return g.a.createElement(W,{category:s,isFocus:i&&0===t,onClickCategory:function e(r){return a.onClickCategory({url:r,index:t,categoryId:s.category_id})}})}},{key:"renderCategoriesOrArticles",value:function e(t){var a=this.state.query;var r=this.props,n=r.isIAPhase1EnabledFlag,i=r.featureHelpModalIaRedesign;if((!a||""===a)&&n&&i)return this.renderCategories(t);return this.renderArticles(t)}},{key:"render",value:function e(){var t=this;var a=this.props,r=a.autoFocus,n=a.noTopMargin,i=a.noBottomMargin,s=a.isIAPhase1EnabledFlag,o=a.featureHelpModalIaRedesign;var l=this.state,c=l.query,u=l.articles,d=l.categories;this.keys=c&&""!==c||!s||!o?Object(y["map"])(u,"id").map(function(e){return e.toString()}):Object(y["map"])(d,"category_id").map(function(e){return e.toString()});var p=P()({margin_top_200:!n,margin_bottom_100:!i});return g.a.createElement(g.a.Fragment,null,g.a.createElement(x["a"],{placeholder:K.t("Search the Help Center"),value:c,icon:"search",autoFocus:r,hasResetButton:true,onChange:this.onSearchInputChange,onSubmit:this.onSearchInputSubmit,blurOnSubmit:true,className:p,size:"large",onBlur:this.onSearchInputBlur}),g.a.createElement("div",{role:"list",className:"p-help_search__list display_flex flex_direction_column justify_content_between",onMouseEnter:this.onListMouseEnter},this.state.isLoading?g.a.createElement(F["a"],{size:"large",color:"blue",noMargin:true}):g.a.createElement("div",{className:"p-help_search__list__inner full_height"},g.a.createElement(M["a"],null,function(e){var a=e.width,r=e.height;return g.a.createElement(R["a"],{width:a,height:r,keys:t.keys,rowRenderer:t.renderCategoriesOrArticles})}))))}}]);return t}(b["Component"]);Q.displayName="HelpSearch";Q.defaultProps=z;var Y=function e(t){return{isIAPhase1EnabledFlag:Object(T["e"])(t),featureHelpModalIaRedesign:Object(A["isFeatureEnabled"])(t,"feature_help_modal_ia_redesign")}};var J=Object(_["connect"])(Y)(Q);function X(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function Z(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?X(Object(a),true).forEach(function(t){n()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):X(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var $=new k["b"]("help");var ee={query:"",fetchHelpArticles:y["noop"],fetchHelpCategories:y["noop"],autoFocus:false,onQueryChange:y["noop"],defaultArticlesData:null,onOpenLink:y["noop"],noTopMargin:false,noBottomMargin:false,isIAPhase1EnabledFlag:false,featureHelpModalIaRedesign:false};function te(e){return"number"===typeof e||"helplink"===e.type?e.id||e:null}var ae=function(e){f()(t,e);function t(e){var a;s()(this,t);a=u()(this,p()(t).call(this,e));a.state={query:a.props.query,articles:[],isLoading:true,categories:[]};a.allArticles=[];a.allCategories=[];a.onQueryChange=a.onQueryChange.bind(h()(a));a.zdLocale=Object(j["a"])();return a}l()(t,[{key:"componentDidMount",value:function e(){this.fetchHelpArticles({reason:"help-search-container/componentDidMount"});var t=this.props,a=t.isIAPhase1EnabledFlag,r=t.featureHelpModalIaRedesign;a&&r&&this.fetchHelpCategories({reason:"help-search-container/componentDidMount"})}},{key:"componentDidUpdate",value:function e(t){t.defaultArticlesData!==this.props.defaultArticlesData&&this.fetchHelpArticles({reason:"help-search-container/componentDidUpdate"})}},{key:"onQueryChange",value:function e(t){var a=t?this.filterArticlesByQuery(t):this.defaultArticles;if(t&&a.length<7){var r=Object(w["a"])({query:t,zdLocale:this.zdLocale});a.push({id:-99999,images:[],label_names:[],title:$.rt('Search for "{query}" on the Help Center',{query:t}),url:r})}this.setState(function(){return{query:t,articles:a}});this.props.onQueryChange(t)}},{key:"fetchHelpCategories",value:function e(){var t=this;this.props.fetchHelpCategories({locale:this.zdLocale,reason:"help-search-container/fetchHelpCategories"}).then(function(e){t.processCategories(e)})}},{key:"fetchHelpArticles",value:function e(){var t=this;this.props.fetchHelpArticles({locale:this.zdLocale,reason:"help-search-container/fetchHelpArticles"}).then(function(e){t.processArticles(e)})}},{key:"filterArticlesByQuery",value:function e(t){var a=C(t);var r=new RegExp(a,"i");var n=-1;var i=this.allArticles.filter(function(e,t){if(e.title.toLowerCase()===a.toLowerCase()){n=t;return false}return e.title.match(r)});-1!==n&&i.unshift(this.allArticles[n]);return i}},{key:"filterDefaultArticles",value:function e(t){var a=this.props.defaultArticlesData;if(!a)return[];var r={};a.forEach(function(e){var a=te(e);a&&(r[a]=t.find(function(e){return e.id===a}))});var n=a.map(function(e,t){var a=te(e);if(a&&r[a]){if("number"===typeof e)return r[a];return Z({},r[a],{title:e.text||r[a].title})}return{id:"customArticle-"+t,title:e.text,url:e.url}}).filter(function(e){return!!e.url});return n}},{key:"filterPromotedArticles",value:function e(t){var a=[];t.forEach(function(e){e.is_promoted&&a.push(e)});a.sort(function(e,t){if(void 0===e.order)return 1;if(void 0===t.order)return-1;return e.order-t.order});return a}},{key:"processCategories",value:function e(t){var a=this;var r=this.props.featureHelpModalIaRedesign;try{var n=t.categories;n.push({category_id:"-1",name:r?$.t("View Help Center"):"",description:""});this.allCategories=n}catch(e){this.allCategories=[]}this.setState(function(){return{categories:a.allCategories,isLoading:false}})}},{key:"processArticles",value:function e(t){var a=this;try{this.allArticles=t.articles}catch(e){this.allArticles=[]}this.defaultArticles=this.props.defaultArticlesData?this.filterDefaultArticles(this.allArticles):this.filterPromotedArticles(this.allArticles);this.state.query?this.setState(function(){return{articles:a.filterArticlesByQuery(a.props.query),isLoading:false}}):this.setState(function(){return{articles:a.defaultArticles,isLoading:false}})}},{key:"render",value:function e(){var t=this.state,a=t.articles,r=t.query,n=t.isLoading,i=t.categories;var s=this.props,o=s.clogger,l=s.autoFocus,c=s.onOpenLink,u=s.noTopMargin,d=s.noBottomMargin,p=s.isIAPhase1EnabledFlag,m=s.featureHelpModalIaRedesign;var h=true;p&&m&&(h=!(!r||""===r));return g.a.createElement(J,{articles:a,categories:i,focusFirstResult:h,query:r,autoFocus:l,onQueryChange:this.onQueryChange,isLoading:n,clogger:o,onOpenLink:c,noTopMargin:u,noBottomMargin:d})}}]);return t}(b["Component"]);ae.displayName="HelpSearchContainer";ae.defaultProps=ee;var re=function e(t){return{clogger:Object(I["a"])({state:t}),team:Object(S["d"])(t),isIAPhase1EnabledFlag:Object(T["e"])(t),featureHelpModalIaRedesign:Object(A["isFeatureEnabled"])(t,"feature_help_modal_ia_redesign")}};var ne={fetchHelpArticles:E["a"],fetchHelpCategories:E["b"]};var ie=Object(_["connect"])(re,ne)(ae);var se=t["a"]=ie},function(e,t,a){"use strict";var r=a(1);var n=a.n(r);var i=a(0);var s=a(18);var o=a(39);var l=a(88);var c=a.n(l);var u=a(110);var d=a.n(u);var p=a(135);var m=a.n(p);var h=a(169);var v=a.n(h);var f=a(138);var b=a.n(f);var g=a(147);var _=a.n(g);var y=a(185);var O=a.n(y);var k=a(12);var E=a(2);var C=a.n(E);var S=a(30);var w=a(13);var j=a.n(w);var I=a(20);var T=a(1437);var A=a(1438);var N=a(6);var P=a(22);var M=a(188);var D=a(117);var x=a(50);var R=a(108);var F=a(141);var L=a(211);var U=a(335);var B=a(317);var q=a(1424);var G=new N["b"]("menu_file");var H={success:i["default"].bool,response:i["default"].object,wasShared:i["default"].bool,channel:i["default"].string,threadTs:i["default"].string};var W=Object(s["b"])("On Gdrive Creation Complete",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.success,n=a.response,i=a.wasShared,s=a.channel,o=a.threadTs;var l=t();var c=Object(q["getEnablePopupsBannerVisibility"])(l);r&&n&&n.data&&n.data.url&&!i&&c&&e(Object(U["addOrFlashEphemeralBotMsg"])({ephemeralType:"created_google_drive_document",message:{channel:s,thread_ts:o,slackbot_feels:"sad_surprise",text:G.t("It looks like your browser is blocking popups so here\u2019s a link to your <{url}|document>",{url:n.data.url})}}))});W.meta={name:"onGDriveCreateComplete",key:"actionsOnGdriveCompleteOnGDriveCreateComplete",description:"On Gdrive Creation Complete"};W.propTypes=H;var V=W;var K=a(756);var z=a(87);var Q=a(410);var Y=a(16);var J=a(4037);var X=new N["b"]("files");var Z={type:i["default"].string.isRequired,title:i["default"].string,comment:i["default"].string,blocks:i["default"].array,broadcast:i["default"].bool,shareFile:i["default"].bool,channel:i["default"].string,threadTs:i["default"].string,reason:i["default"].string};var $=Object(s["b"])("Create a Gdrive File",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.type,n=a.title,i=a.comment,s=a.blocks,o=a.broadcast,l=a.shareFile,c=a.channel,u=a.threadTs,d=a.reason;var p="application/vnd.google-apps";var m=t();var h=Object(Y["a"])({state:m});var v="CREATE_GOOGLE_DRIVE_FILE";l&&c&&!u&&e(Object(L["a"])({id:c}));var f=Object(z["a"])(m);return e(Object(B["b"])({serviceStub:"gdrive",mimeType:p+"."+r,filename:n||"",reason:d||"create-gdrive-file"})).then(function(a){var r=Object(K["d"])(a.url);r&&!r.closed||e(Object(q["updateEnablePopupsBannerVisibility"])(true));l?e(Object(B["o"])({channels:c,threadTs:u,title:n||"",initialComment:Object(Q["b"])(t(),i),blocks:s,broadcast:o,link:a.url,reason:d||"create-gdrive-file"})).then(function(){return e(V({success:true,response:a,wasShared:l,channel:f,threadTs:u}))}).catch(function(t){h.error(v,t);e(Object(U["addOrFlashEphemeralBotMsg"])({ephemeralType:U["EphemeralTypes"].gdriveShareFileError,message:{channel:f,thread_ts:u,slackbot_feels:"sad_surprise",text:X.t("Oh no! I couldn\u2019t import your newly created file")}}))}):e(V({success:true,response:a,wasShared:l,channel:f,threadTs:u}))}).catch(function(a){var r;e(V({success:false}));var n=X.t("Darn, that didn\u2019t work. Try again or <https://my.slack.com/help/requests/new|contact us> if it\u2019s still not working.");"use_auth_url"===(null===a||void 0===a?void 0:null===(r=a.data)||void 0===r?void 0:r.error)&&(n=X.t("Looks like you\u2019re trying to add a Google Drive file \u2014 first you\u2019ll need to connect <{url}|Google Drive to Slack>.\n\n Once your account is connected, you\u2019ll be able to easily share files, see file previews, and even find your files later as you search in Slack. <{url}|Learn more about using Google Drive in Slack>.",{url:Object(J["b"])(t())}));a&&a.data&&"filename_too_long"===a.data.error&&(n=X.t("Sorry! The name of that file is too long for us to handle. Please try importing a file with a shorter filename."));h.error(v,a);e(Object(U["addOrFlashEphemeralBotMsg"])({ephemeralType:U["EphemeralTypes"].unhandledGdriveCreate,message:{channel:f,thread_ts:u,slackbot_feels:"sad_surprise",text:n}}))})});$.meta={name:"createGdriveFile",key:"actionsCreateGdriveFileCreateGdriveFile",description:"Create a Gdrive File"};$.propTypes=Z;var ee=$;var te=a(1659);var ae=a(1660);var re=a(1352);var ne=a(1661);var ie=a(1965);var se=a(1966);var oe=a(1911);function le(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function ce(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?le(Object(a),true).forEach(function(t){c()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):le(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var ue=new N["b"]("create-gdoc-dialog");var de={type:void 0,closeModal:C.a.noop,getShareableChannelId:C.a.noop,createGdriveFile:C.a.noop,onGDriveCreateComplete:C.a.noop,threadTs:void 0,msgText:"",msgOps:void 0,setMsgOps:C.a.noop,converMsgOpsToRichTextMessage:C.a.noop,selectedChannelId:void 0,setSelectedChannel:C.a.noop,disallowedKeywordInMsgText:void 0,canPostInSelectedChannel:false,canThread:false,channelType:null};var pe=function(e){O()(t,e);function t(e){var a;d()(this,t);a=v()(this,b()(t).call(this,e));Object(S["a"])(_()(a),["onTextChange","onShareChannelChange","onGo","onCancel","onBroadcastChange","onTitleInputChange","onShareWithChange","setTitleInputRef"]);a.titleInput=null;a._isMounted=false;a.state={overMsgLengthLimit:false,titleInputValue:"",submitting:false,shareWith:true,broadcast:false};return a}m()(t,[{key:"componentDidMount",value:function e(){this._isMounted=true}},{key:"componentWillUnmount",value:function e(){this._isMounted=false}},{key:"onBroadcastChange",value:function e(t){this.setState(function(){return{broadcast:t}})}},{key:"onCancel",value:function e(){this.props.onGDriveCreateComplete(false)}},{key:"onGo",value:function e(){if(this.isGoButtonDisabled())return;this.createGDocOnGo()}},{key:"onShareChannelChange",value:function e(t){this.props.setSelectedChannel(t)}},{key:"onShareWithChange",value:function e(t){var a=t.target.checked;this.setState(function(){return{shareWith:!!a}})}},{key:"onTextChange",value:function e(t){var a=t.msgOps,r=t.overLimit;this.props.setMsgOps(a);this.setState(function(){return{overMsgLengthLimit:r}})}},{key:"onTitleInputChange",value:function e(t){this.setState(function(){return{titleInputValue:t}})}},{key:"getDialogTitle",value:function e(){var t=this.props.type;switch(t){case"document":return ue.t("Create a Google Document");case"presentation":return ue.t("Create a Google Presentation");case"spreadsheet":return ue.t("Create a Google Spreadsheet");default:return ue.t("Create a Google file")}}},{key:"setTitleInputRef",value:function e(t){if(!t)return;this.titleInput=t;this.focusTitleInput()}},{key:"createGDocOnGo",value:function e(){var t=this;var a=this.props,r=a.selectedChannelId,n=a.getShareableChannelId,i=a.type,s=a.threadTs,o=a.msgOps;var l=this.state,c=l.titleInputValue,u=l.shareWith,d=l.broadcast;if(!r)return;n({channelOrMemberId:r}).then(function(e){var a=c||ue.t("Untitled",{fallbackHash:"621521f9a8788695ec292cbec54d2792cfdf0a7d",fallbackHashNs:"space"});var r=t.props.converMsgOpsToRichTextMessage({msgOps:o,channelId:e,inThread:!!s});t.props.createGdriveFile({type:i,title:a,blocks:r,broadcast:d,shareFile:u,channel:e,threadTs:s,reason:"create-gdrive-file"}).then(function(){t._isMounted&&t.setState(function(){return{submitting:false}});t.props.closeModal()})});this.setState(function(){return{submitting:true}})}},{key:"focusTitleInput",value:function e(){this.titleInput&&this.titleInput.focus()}},{key:"isGoButtonDisabled",value:function e(){var t=this.props,a=t.disallowedKeywordInMsgText,r=t.canPostInSelectedChannel,n=t.threadTs,i=t.canThread;var s=this.state,o=s.overMsgLengthLimit,l=s.shareWith,c=s.titleInputValue,u=s.submitting;var d=c&&c.length>P["MAX_FILENAME_LENGTH"];return l&&!r&&!n||l&&n&&!i||!!a||o||d||u}},{key:"maybeRenderBroadcast",value:function e(){var t=this.props,a=t.threadTs,r=t.canPostInSelectedChannel,i=t.channelType,s=t.selectedChannelName;var o=this.state.broadcast;if(!a||!r)return null;return n.a.createElement("div",{className:"p-create_gdoc_dialog__broadcast_section"},n.a.createElement(se["a"],{channelType:i,selectedChannelName:s,value:o,onChange:this.onBroadcastChange}))}},{key:"renderChannelPicker",value:function e(){var t=this.props.selectedChannelId;var a=this.state.shareWith;return n.a.createElement(ae["a"],{onChange:this.onShareChannelChange,initialChannelId:t,isDisabled:!a,dialogType:"create_gdoc_dialog"})}},{key:"renderMessageInput",value:function e(){var t=this.props.msgText;var a=this.state.shareWith;if(!a)return null;var r=ue.t("Add a message, if you\u2019d like.");var i=j()("p-share_dialog__section","p-share_dialog__create_gdoc_message_input");return n.a.createElement("div",{className:i},n.a.createElement(te["a"],{text:t,onTextChange:this.onTextChange,placeholder:r,ariaLabel:r,onEnter:this.onGo}),this.maybeRenderBroadcast())}},{key:"renderShareAlert",value:function e(){var t=this.state.shareWith;if(!t)return null;var a=Object(ne["a"])(ce({},this.props));if(!a)return null;return n.a.createElement("div",{className:"p-share_dialog__section"},n.a.createElement(M["d"],{type:"inline",level:"warning",className:"margin_bottom_100"},a))}},{key:"renderShareWith",value:function e(){var t=this.state.shareWith;var a="create-gdoc-share-with";return n.a.createElement(x["a"],{text:ue.t("Share with:"),htmlFor:a,type:"inline"},n.a.createElement(R["a"],{id:a,defaultChecked:t,onChange:this.onShareWithChange,"data-qa":"share_with"}))}},{key:"renderShareWithPicker",value:function e(){var t=this.props,a=t.selectedChannelId,r=t.threadTs;if(r)return n.a.createElement(ie["a"],{channelId:a,threadTs:r});return n.a.createElement("div",{className:"p-create_gdoc_dialog__footer_share_inputs"},this.renderShareWith(),this.renderChannelPicker())}},{key:"renderTitleInput",value:function e(){var t=this.state.titleInputValue;var a="p-create_gdoc_dialog__title";return n.a.createElement("div",{className:"p-share_dialog__section p-share_dialog__section_bottom_padding"},n.a.createElement(x["a"],{htmlFor:a,text:ue.t("Title"),optional:true},n.a.createElement(F["a"],{id:a,name:a,maxCharacterLimit:P["MAX_FILENAME_LENGTH"],counterMinimumCharacters:P["MIN_FILENAME_CHARACTERS_BEFORE_WARNING"],onChange:this.onTitleInputChange,value:t,ref:this.setTitleInputRef,"data-qa":"create_gdoc_title"})))}},{key:"render",value:function e(){return n.a.createElement(D["a"],{className:"p-create_gdoc_dialog",title:this.getDialogTitle(),useSlackScrollbarWithPadding:true,goButtonText:ue.t("Create"),onGo:this.onGo,onClose:this.onCancel,showCancelButton:false,footerText:this.renderShareWithPicker(),goButtonIsDisabled:this.isGoButtonDisabled()},this.renderTitleInput(),this.renderShareAlert(),this.renderMessageInput())}}]);return t}(r["Component"]);pe.displayName="CreateGDocDialog";pe.defaultProps=de;function me(e,t){var a=t.selectedChannelId;var r=Object(re["b"])(e,t);var n=Object(I["e"])(e,a)||Object(I["l"])(e,a);return ce({},r,{selectedChannel:n})}var he=function e(t){return{closeModal:function e(){return t(o["closeModal"].apply(void 0,arguments))},getShareableChannelId:function e(){return t(T["a"].apply(void 0,arguments))},createGdriveFile:function e(){return t(ee.apply(void 0,arguments))},onGDriveCreateComplete:function e(){return t(V.apply(void 0,arguments))},converMsgOpsToRichTextMessage:function e(){return t(A["a"].apply(void 0,arguments))}}};var ve=Object(k["connect"])(me,he)(pe);var fe=Object(re["a"])(ve);var be=Object(s["b"])("Opens the create gdoc file dialog",function(e,t,a){e(Object(o["openModal"])({element:n.a.createElement(fe,a)}))});be.meta={name:"openCreateGDocDialog",key:"actionsOpenCreateGdocDialogOpenCreateGDocDialog",description:"Opens the create gdoc file dialog"};be.propTypes={type:i["default"].string,displayType:i["default"].string,initialChannelId:i["default"].string};var ge=t["a"]=be},function(e,t,a){"use strict";var r=a(110);var n=a.n(r);var i=a(135);var s=a.n(i);var o=a(169);var l=a.n(o);var c=a(138);var u=a.n(c);var d=a(147);var p=a.n(d);var m=a(185);var h=a.n(m);var v=a(1);var f=a.n(v);var b=a(0);var g=a(12);var _=a(2);var y=a(227);var O=a(16);var k=a(61);var E=a(13);var C=a.n(E);var S=a(30);var w=a(193);var j=a(826);var I=a(292);var T=a(1188);var A=a(303);var N=a(385);var P=a(837);var M=a(23);var D=a(98);var x=a(42);var R=a(6);var F=a(323);var L=a(2031);var U=a(57);var B=a(1063);var q=a(28);var G=Object(q["b"])("TS.view.resize_sig.add",_["noop"],true);var H=Object(q["b"])("TS.view.resize_sig.remove",_["noop"],true);var W=a(32);var V=a(90);var K=a(2802);var z=a(2803);var Q=a(4721);var Y=new R["b"]("search");var J=new R["b"]("jumper");var X=new R["b"]("keys");var Z={displayQuery:"",telemeter:k["d"],isCustomTitlebarShown:false,lastOpenMethod:"",isIATopNavEnabled:false};var $=function(e){h()(t,e);function t(e){var a;n()(this,t);a=l()(this,u()(t).call(this,e));Object(S["a"])(p()(a),["onSearchClose","onSearchAutocompleteSuggestionAccept","onSearchAutocompleteSuggestionDelete","onSearchInputBoxEscape","onClickRefreshSearch"]);a.state={appBannerHeightPx:a.getBannerHeight(),isInitialAutocomplete:true};a.onSearchInputBoxFocus=Object(_["throttle"])(function(){return a.props.searchPrecache()},6e4);a.onResize=Object(_["throttle"])(a.onResize.bind(p()(a)),50);G(a.onResize);a.inputRef=f.a.createRef();return a}s()(t,[{key:"componentDidMount",value:function e(){x["isDesktop"]&&Object(x["legacyAreDragRegionsRequired"])()&&Object(x["updateDragRegion"])([])}},{key:"componentDidUpdate",value:function e(t){if(this.props.isIATopNavEnabled){this.props.visible&&this.state.isInitialAutocomplete&&this.props.interfaceMode!==j["a"].EDIT&&this.setState(function(){return{isInitialAutocomplete:false}});!this.props.visible&&t.visible&&this.setState(function(){return{isInitialAutocomplete:true}})}}},{key:"componentWillUnmount",value:function e(){H(this.onResize)}},{key:"onClickRefreshSearch",value:function e(){this.props.setRequestFromEditableRequest({fetchSuggestions:true})}},{key:"onResize",value:function e(){var t=this;this.setState(function(){return{appBannerHeightPx:t.getBannerHeight()}})}},{key:"onSearchAutocompleteSuggestionAccept",value:function e(){Object(B["e"])(this.props.telemeter);this.props.searchAutocompleteSuggestionAccept()}},{key:"onSearchAutocompleteSuggestionDelete",value:function e(){if(this.inputRef.current){var t;var a=(null===(t=this.inputRef.current)||void 0===t?void 0:t.getWrappedInstance)?this.inputRef.current.getWrappedInstance():this.inputRef.current;(null===a||void 0===a?void 0:a.focusTexty)&&a.focusTexty()}}},{key:"onSearchClose",value:function e(){Object(U["g"])()||this.props.close()}},{key:"onSearchInputBoxEscape",value:function e(){this.onSearchClose();return true}},{key:"getBannerHeight",value:function e(){var t=window.$&&window.$("#banner");return t&&t.height()||0}},{key:"clear",value:function e(){this.props.setSearchInputBoxUserQuery({textyString:""})}},{key:"renderCmdKHint",value:function e(){if("key_button"===this.props.lastOpenMethod){var t=Object(W["isMac"])()?X.t("\u2318K"):X.t("Ctrl+K");return f.a.createElement("div",{className:"c-search_modal__tip_wrapper"},f.a.createElement("div",{className:"c-search_modal__tip"},J.rt("<strong>Tip:</strong> Open this faster with {cmd_shortcut}",{cmd_shortcut:t})))}return null}},{key:"renderMode",value:function e(){switch(this.props.interfaceMode){case j["a"].SEARCH_RESULTS:return this.renderSearchResults();case j["a"].EDIT:default:return this.renderQueryEdit()}}},{key:"renderQueryEdit",value:function e(){return f.a.createElement("div",{className:"c-search-autocomplete","data-qa":"search_autocomplete"},f.a.createElement(K["a"],{userQuery:this.props.userQuery,onAccept:this.onSearchAutocompleteSuggestionAccept,onDelete:this.onSearchAutocompleteSuggestionDelete}))}},{key:"renderSearchResults",value:function e(){return f.a.createElement(Q["a"],{onClickRefreshSearch:this.onClickRefreshSearch})}},{key:"render",value:function e(){var t={top:0,left:0,bottom:0,right:0};var a=C()("c-popover","c-search_modal",{"c-search_modal--autocomplete":this.props.interfaceMode===j["a"].EDIT,"c-search_modal--custom_titlebar":this.props.isCustomTitlebarShown,"c-search_modal--iap1_topnav":this.props.isIATopNavEnabled,"c-search_modal--initial_autocomplete":this.props.isIATopNavEnabled&&this.props.interfaceMode===j["a"].EDIT&&this.state.isInitialAutocomplete});var r=Y.t("Search");return f.a.createElement(N["a"],{ariaRole:"dialog",ariaLabel:r,isOpen:this.props.visible,position:"top-left",targetBounds:t,onClose:this.onSearchClose,shouldFade:false,overlayClassName:a,allowanceX:0,allowanceY:0,shouldFocusAfterRender:true,shouldReturnFocusAfterClose:false,contentStyle:{marginTop:this.state.appBannerHeightPx}},f.a.createElement("div",{className:"c-search__input_and_close"},f.a.createElement(z["a"],{autoFocus:true,displayQuery:this.props.displayQuery,onEnter:this.onSearchAutocompleteSuggestionAccept,onEscape:this.onSearchInputBoxEscape,onFocus:this.onSearchInputBoxFocus,ref:this.inputRef}),f.a.createElement(D["a"],{className:"c-search__input_and_close__close",onClick:this.props.close,"aria-label":Y.t("Cancel"),"data-qa":"search_input_close"},f.a.createElement(M["b"],{type:"times"}))),this.renderMode(),this.renderCmdKHint())}}]);return t}(v["PureComponent"]);$.displayName="Search";$.defaultProps=Z;var ee=function e(t){return{interfaceMode:Object(w["g"])(t),displayQuery:Object(I["getSearchInputBoxDisplayQuery"])(t),userQuery:Object(I["getSearchInputBoxUserQuery"])(t),visible:Object(w["v"])(t),telemeter:Object(k["c"])({state:t}),isCustomTitlebarShown:Object(A["isCustomTitlebarShown"])(t),lastOpenMethod:Object(w["i"])(t),isIATopNavEnabled:Object(V["f"])(t)}};var te={searchAutocompleteSuggestionAccept:L["a"],searchPrecache:function e(){return F["s"].apply(void 0,arguments)},setRequestFromEditableRequest:function e(){return y["setRequestFromEditableRequest"].apply(void 0,arguments)},setSearchInputBoxUserQuery:function e(){return T["a"].apply(void 0,arguments)},close:function e(){return P["a"].apply(void 0,arguments)}};var ae=Object(g["connect"])(ee,te)($);var re="IMPROVED_SEARCH";var ne=function(e){h()(t,e);function t(e){var a;n()(this,t);a=l()(this,u()(t).call(this,e));a.state={hasError:false};a.retryRender=Object(_["throttle"])(a.retryRender.bind(p()(a)),100,{leading:false});return a}s()(t,[{key:"componentDidUpdate",value:function e(){this.state.hasError&&this.retryRender()}},{key:"componentDidCatch",value:function e(t,a){this.props.telemeter.count("search_full_render_fail",1);this.props.logger.error(re,"Error caught by ProtectedSearch "+a.componentStack,t,{subtype:"search"});this.setState(function(){return{hasError:true}});this.props.resetSearchAfterUnknownUIError()}},{key:"retryRender",value:function e(){this.setState(function(){return{hasError:false}})}},{key:"render",value:function e(){if(this.state.hasError)return null;return f.a.createElement(ae,null)}}]);return t}(v["PureComponent"]);ne.displayName="ProtectedSearch";var ie=function e(t){return{logger:Object(O["a"])({state:t}),telemeter:Object(k["c"])({state:t})}};var se={resetSearchAfterUnknownUIError:function e(){return y["resetSearchAfterUnknownUIError"].apply(void 0,arguments)}};var oe=Object(g["connect"])(ie,se)(ne);var le=t["a"]=oe},,function(e,t,a){"use strict";var r=a(196);var n=a.n(r);var i=a(245);var s=a.n(i);var o=a(110);var l=a.n(o);var c=a(135);var u=a.n(c);var d=a(169);var p=a.n(d);var m=a(138);var h=a.n(m);var v=a(147);var f=a.n(v);var b=a(185);var g=a.n(b);var _=a(1);var y=a.n(_);var O=a(0);var k=a(12);var E=a(2);var C=a(30);var S=a(603);var w=a(18);var j=a(297);var I=a(137);var T=a(77);var A=a(38);var N=a(1442);var P=a(62);var M=a(17);var D=a(289);var x=a(1068);var R=10;var F=100;var L=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.searchQuery,r=void 0===a?"":a,n=t.marker,i=void 0===n?"":n,s=t.index,o=void 0===s?"":s,l=t.filter,c=void 0===l?"":l;var u=Object(I["a"])(c)||Object(I["b"])(c);var d={count:r?F:R,index:o,locale:Object(T["f"])(),external_team:u?c:void 0,filter:u?"people":c};if(r){d.query=r;d.search_profile_fields=true}else d.marker=i;return d};var U=Object(w["b"])("Fetch and upsert membersIds displayed in member directory flexpane",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var r=a.isNonExactMatchMembersSearch,n=void 0!==r&&r,i=s()(a,["isNonExactMatchMembersSearch"]);var o=t();var l=Object(N["a"])(o)&&Object(P["a"])(o,"display_email_addresses");var c=i.searchQuery||"";var u=c.indexOf("@")>0||c.indexOf("\uff20")>0;var d=L(i);return e(Object(j["e"])({query:d})).then(function(t){var a=t.members,r=void 0===a?[]:a,s=t.next_marker;var o=r;"deactivated"===i.filter&&(o=r.filter(function(e){return e&&!e.is_bot}));if(l&&u){var d=Object(D["a"])(c);o=r.filter(function(e){return Object(D["a"])(Object(M["getMemberEmail"])(e)).startsWith(d)})}var p=o.map(function(e){return e.id});e(n?Object(S["b"])(p):Object(S["a"])(p));s&&e(Object(S["e"])(s));return{members:r,nextMarker:s}})});U.meta={name:"listAndUpsertMembers",key:"memberDirectoryFlexpaneStoreMemberDirectoryFlexpaneThunksListAndUpsertMembers",description:"Fetch and upsert membersIds displayed in member directory flexpane"};U.propTypes={searchQuery:O["default"].string,marker:O["default"].string,index:O["default"].string,filter:O["default"].string,isNonExactMatchMembersSearch:O["default"].bool};var B=Object(w["b"])("Fetch and upsert members",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.isNonExactMatchMembersSearch,n=void 0!==r&&r;var i=t();var s=Object(x["f"])(i);var o=Object(x["d"])(i);var l=n?"people":Object(x["a"])(i);var c=Object(A["l"])(i)?"users_by_realname":"users_by_display_name";return e(U({searchQuery:s,marker:o,index:c,filter:l,isNonExactMatchMembersSearch:n}))});B.meta={name:"fetchMembersPost",key:"memberDirectoryFlexpaneStoreMemberDirectoryFlexpaneThunksFetchMembersPost",description:"Fetch and upsert members"};B.propTypes={isNonExactMatchMembersSearch:O["default"].bool};var q={};Object.defineProperty(q,"buildQueryParams",{get:function e(){return L}});var G=a(33);var H=a(25);var W=a(86);var V=a(786);var K=a(27);var z=a(266);var Q=a(6);var Y=a(35);var J=a(646);var X=a(457);var Z=a(783);var $=a(760);var ee=a(486);var te=a(104);var ae=a(219);var re=a(316);var ne=a(1382);var ie=a(98);var se={member:void 0};var oe=function e(t){var a=t.memberId,r=t.member,n=t.width,i=t.dispatch;var s=Object(_["useCallback"])(function(){i(Object(te["k"])({memberId:a}))},[i,a]);return y.a.createElement("div",{className:"p-directory_page__member",role:"presentation",onClick:s,style:{width:n}},y.a.createElement(ae["b"],{userId:a,size:n,isInteractive:false,showBadge:false}),y.a.createElement("div",{className:"p-directory_page__member__info"},y.a.createElement(ie["a"],{className:"p-directory_page__member__name"},y.a.createElement(re["a"],{id:a}),y.a.createElement(ne["a"],{memberId:a})),y.a.createElement("div",{className:"p-directory_page__member__title"},Object(M["getMemberTitle"])(r))))};oe.displayName="DirectoryPageMember";oe.defaultProps=se;var le=function e(t,a){var r=a.memberId;return{member:Object(H["e"])(t,r)}};var ce=Object(k["connect"])(le)(oe);var ue=a(1864);var de=a(1604);var pe={showMemberProfile:E["noop"],saveScrollmarkForKey:E["noop"],featureFantailNurture:false};var me=function(e){g()(t,e);function t(e){var a;l()(this,t);a=p()(this,h()(t).call(this,e));a.onClick=a.onClick.bind(f()(a));return a}u()(t,[{key:"onClick",value:function e(){var t=this.props,a=t.id,r=t.member,n=t.searchQuery,i=t.featureFantailNurture,s=t.clogger;this.props.showMemberProfile({memberId:a});this.props.saveScrollmarkForKey(a);var o=new ue["a"]({query:n,options:{entities:{members:{matchEmailField:i}},sort:{preferExactMatch:true}}});var l=o.scoreMember(r),c=l.scoreDetails;var u=o.isMemberExactMatch(r);var d=o.getMemberExactMatchDetails(r);s.track("ORGANIZATION_DIRECTORY_CLICK",{organization_directory_query_length:n.length,organization_directory_results_length:this.props.numResults,organization_directory_selected_position:this.props.index,organization_directory_selected_id:r.id,organization_directory_selected_match_details:{is_exact_match:u,exact_match_details:d,score_details:c}})}},{key:"render",value:function e(){var t=this.props.id;return y.a.createElement("div",{className:"p-member_directory__member_row","data-qa":"member_directory_show_profile","data-qa-member":t,role:"presentation",onClick:this.onClick},y.a.createElement(de["a"],{id:t}))}}]);return t}(_["Component"]);me.displayName="SearchableMemberListMember";me.defaultProps=pe;var he=function e(t,a){var r=a.id;return{clogger:Object(Y["a"])({state:t}),member:Object(H["e"])(t,r),searchQuery:Object(x["f"])(t),featureFantailNurture:Object(N["a"])(t)}};var ve={showMemberProfile:function e(){return te["k"].apply(void 0,arguments)},saveScrollmark:function e(){return S["c"].apply(void 0,arguments)}};var fe=Object(k["connect"])(he,ve)(me);var be=a(3710);var ge=new Q["b"]("member_directory");var _e={memberIds:[],scrollmark:void 0,searchQuery:void 0,setSearchQuery:E["noop"],filter:"people",setFilter:E["noop"],fetchMembersPost:E["noop"],saveScrollmark:E["noop"],nonExactMatchMemberIds:[],isEnterprise:false,isFreeTeamAdmin:false,"aria-label":void 0,openFromOrgDirectory:E["noop"],featureFantailNurture:false,onItemTabWithin:E["noop"],displayEmailAddresses:false,isIAP1Enabled:false};var ye=100;var Oe="SearchInProductEducation";var ke=function(e){g()(t,e);function t(e){var a;l()(this,t);a=p()(this,h()(t).call(this,e));Object(C["a"])(f()(a),["onScroll","onClearSearch","onClickSearchInProductEducation","onViewMatchesClick","onPricingClick","saveScrollmarkForKey","fetchPost","fetchAround","fetchMembers","fetchNonExactMatchMembers","renderRow","getListKeys","shouldFetchNonExactMembers","isFocusableItem","focus"]);a.requestPost=null;a.requestNonExactMatchMembers=null;a.keys=null;a.list=y.a.createRef();a.layout=new Z["a"];a.layout.heightCache.DEFAULT_HEIGHT=60;a.width=0;a.state={reachedEnd:false,columns:3};a.debouncedFetchPost=Object(E["debounce"])(a.fetchPost,ye);a.debouncedResize=Object(E["debounce"])(a.onResize,20);return a}u()(t,[{key:"componentDidMount",value:function e(){if(!this.props.scrollmark)return;var t=this.props.scrollmark,a=t.key,r=t.offset;this.layout.setAnchor(a,r);this.props.saveScrollmark(null)}},{key:"componentDidUpdate",value:function e(t){var a=this.props,r=a.searchQuery,n=a.filter,i=a.clogger;if(t.searchQuery===r&&t.filter===n)return;this.requestPost&&this.requestPost.cancel();this.requestNonExactMatchMembers&&this.requestNonExactMatchMembers.cancel();this.requestPost=null;this.requestNonExactMatchMembers=null;this.layout&&this.layout.setAnchor(false);this.setReachedEnd(false,this.fetchAround);t.searchQuery!==r&&i.track("ORGANIZATION_DIRECTORY_KEYPRESS",{});t.filter!==n&&i.track("ORGANIZATION_DIRECTORY_FILTER",{organization_directory_filter:n})}},{key:"componentWillUnmount",value:function e(){this.requestPost&&this.requestPost.cancel();this.requestNonExactMatchMembers&&this.requestNonExactMatchMembers.cancel()}},{key:"onClearSearch",value:function e(){this.props.setSearchQuery("");this.props.setFilter("people")}},{key:"onClickSearchInProductEducation",value:function e(){this.props.openFromOrgDirectory({query:this.props.searchQuery})}},{key:"onPricingClick",value:function e(){this.props.clogger.track("GROWTH_PRICING",{contexts:{ui_context:{ui_element:"pricing_link",step:"team_directory",action:"click"}}})}},{key:"onResize",value:function e(t){var a=this;if(this.props.isIAP1Enabled&&t!==this.width){this.width=t;this.setState(function(){return{columns:a.getIAColumns()}})}}},{key:"onScroll",value:function e(){this.layout.anchor&&this.layout.setAnchor(false)}},{key:"onViewMatchesClick",value:function e(){this.props.setFilter("people")}},{key:"getIAColumns",value:function e(){var t=200;return Math.floor(this.width/t)}},{key:"getListKeys",value:function e(){var t=this.props.memberIds.filter(function(e){return"L"!==e[0]});this.rows=this.props.isIAP1Enabled&&Object(E["chunk"])(t,this.state.columns);return this.props.isIAP1Enabled?this.rows.map(function(e){return e[0]}):t}},{key:"getNonExactMatchEmptyStateLabel",value:function e(){var t=this.props,a=t.filter,r=t.isEnterprise,n=t.searchQuery;var i={query:y.a.createElement("strong",null,n)};switch(a){case"admins":if(r)return ge.rt("No workspace admins match {query}, but there are other members who do.",i);return ge.rt("No admins match {query}, but there are other members who do.",i);case"bots":return ge.rt("No bots match {query}, but there are other members who do.",i);case"org_members":return ge.rt("No members match {query}, but there are other members who do.",i);case"org_admins":return ge.rt("No org admins match {query}, but there are other members who do.",i);case"guests":return ge.rt("No guests match {query}, but there are other members who do.",i);case"deactivated":return ge.rt("No deactivated members match {query}, but there are other members who do.",i);default:return ge.rt("No members match {query}, but there are other members who do.",i)}}},{key:"setReachedEnd",value:function e(t,a){this.setState(function(){return{reachedEnd:t}},a)}},{key:"fetchAround",value:function e(){if(this.requestPost||this.state.reachedEnd)return false;return this.debouncedFetchPost()}},{key:"fetchMembers",value:function e(){var t=this;var a=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.props.fetchMembersPost({isNonExactMatchMembersSearch:a}).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.nextMarker,r=e.members;!t.props.searchQuery&&a||t.setReachedEnd(true);t.shouldFetchNonExactMembers(r)&&t.fetchNonExactMatchMembers()})}},{key:"fetchNonExactMatchMembers",value:function e(){var t=this;if(this.requestNonExactMatchMembers)return false;var a=true;this.requestNonExactMatchMembers=this.fetchMembers(a);return this.requestNonExactMatchMembers.finally(function(){t.requestNonExactMatchMembers=null})}},{key:"fetchPost",value:function e(){var t=this;if(this.requestPost)return false;if(this.state.reachedEnd)return false;this.requestPost=this.fetchMembers();return this.requestPost.finally(function(){t.requestPost=null})}},{key:"focus",value:function e(){var t=this.list.current;t&&t.focus()}},{key:"isFocusableItem",value:function e(t){var a=t.key;return a!==this.loadingIndicatorKey&&a!==Oe}},{key:"saveScrollmarkForKey",value:function e(t){var a=this.list.current;if(!a)return;if(!t)return;this.props.saveScrollmark({key:t,offset:this.layout.getOffsetForKey(t)-a.getScrollTop()})}},{key:"shouldFetchNonExactMembers",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];var a=this.props,r=a.filter,n=a.searchQuery;return!Object(E["isEmpty"])(n)&&"people"!==r&&0===t.length}},{key:"renderEmptyListView",value:function e(){var t=this;var a=this.props,r=a.searchQuery,n=a.nonExactMatchMemberIds,i=a.filter,s=a.isFreeTeamAdmin,o=a.clogger;var l=ge.t("Clear Search");var c=ge.t("View Matches");if(n.length)return y.a.createElement($["a"],{className:"p-member-directory__empty_list",description:this.getNonExactMatchEmptyStateLabel(),primaryActionText:c,onClickPrimaryAction:this.onViewMatchesClick,secondaryActionText:l,onClickSecondaryAction:this.onClearSearch});if(!r&&"guests"===i&&s){var u=ge.rt("Workspaces on paid plans can invite guests, like contractors, vendors, or clients. <a>See pricing plans</a>",null,function(e){var a=e.key,r=e.text;return y.a.createElement(ee["a"],{key:a,href:Object(W["j"])({entryPoint:"flexpane_search_members"}),class:"no_underline",target:"_blank",onClick:t.onPricingClick},r)});o.track("GROWTH_PRICING",{contexts:{ui_context:{step:"team_directory",action:"impression"}}});return y.a.createElement($["a"],{className:"p-member-directory__empty_list",description:u,primaryActionText:l,onClickPrimaryAction:this.onClearSearch})}return this.renderSearchInProductEducation()}},{key:"renderMember",value:function e(t){var a=t.id,r=t.index;return y.a.createElement(fe,{key:a,id:a,index:r,numResults:this.keys.length,saveScrollmarkForKey:this.saveScrollmarkForKey})}},{key:"renderRow",value:function e(t){var a=this;var r=this.keys[t];if(!r)return null;if(r===this.loadingIndicatorKey)return y.a.createElement("div",{className:"p-member-directory__loading"},ge.t("Loading\u2026"));if(r===Oe)return this.renderSearchInProductEducation();if(this.props.isIAP1Enabled){var n=20;var i=this.rows[t];var s=i.map(function(e){return y.a.createElement(ce,{memberId:e,key:e,width:Math.floor((a.width-n)/a.state.columns-n)})});return y.a.createElement("div",{className:"p-directory_page__row",key:r},s)}return this.renderMember({id:r,index:t})}},{key:"renderSearchInProductEducation",value:function e(){var t=this.props.searchQuery.indexOf("@")>0;if(this.props.featureFantailNurture&&!this.props.displayEmailAddresses&&t)return y.a.createElement($["a"],{"data-qa":"workspace-directory-search-email-hint",className:"p-member-directory__empty_list",description:ge.t("Searching for people by email has been disabled in this workspace. Questions? Contact a Workspace Admin.",{ns:"search"})});return y.a.createElement($["a"],{"data-qa":"workspace-directory-search-in-product-education",className:"p-member-directory__empty_list",description:ge.t("No luck? You can also search for people based on the topics they talk about.",{ns:"search"}),primaryActionText:ge.t("Search by Topic",{ns:"search"}),onClickPrimaryAction:this.onClickSearchInProductEducation})}},{key:"render",value:function e(){var t=this;this.keys=this.getListKeys();if(!this.keys.length&&this.state.reachedEnd)return this.renderEmptyListView();if(this.state.reachedEnd)this.keys.push(Oe);else{this.loadingIndicatorKey="Loading"+this.keys.length;this.keys.push(this.loadingIndicatorKey)}return y.a.createElement(J["a"],null,function(e){var a=e.measureRef,r=e.width,n=e.height;t.debouncedResize(r);return y.a.createElement("div",{className:"p-member_directory__member_list",ref:a},y.a.createElement(X["a"],{width:r,height:n,keys:t.keys,layout:t.layout,rowRenderer:t.renderRow,onScroll:t.onScroll,ref:t.list,loadAround:t.fetchAround,loadPost:t.debouncedFetchPost,isFocusableItem:t.isFocusableItem,onItemTabWithin:t.props.onItemTabWithin,"aria-label":t.props["aria-label"]}))})}}]);return t}(_["PureComponent"]);ke.displayName="SearchableMemberList";ke.defaultProps=_e;var Ee=function e(t){return{scrollmark:Object(x["e"])(t),searchQuery:Object(x["f"])(t),filter:Object(x["a"])(t),memberIds:Object(x["b"])(t),nonExactMatchMemberIds:Object(x["c"])(t),isEnterprise:Object(z["f"])(t),isFreeTeamAdmin:!Object(K["isPaidTeam"])(Object(G["d"])(t))&&Object(M["isAdmin"])(t,Object(H["b"])(t)),clogger:Object(Y["a"])({state:t}),featureFantailNurture:Object(N["a"])(t),displayEmailAddresses:Object(P["a"])(t,"display_email_addresses")}};var Ce={fetchMembersPost:B,saveScrollmark:S["c"],setSearchQuery:S["f"],setFilter:S["d"],openFromOrgDirectory:V["g"]};var Se=Object(k["connect"])(Ee,Ce)(function(e){var t=e.refToForward,a=s()(e,["refToForward"]);return y.a.createElement(ke,n()({ref:t},a))});var we=t["a"]=y.a.forwardRef(function(e,t){return y.a.createElement(Se,n()({refToForward:t},e))})},function(e,t,a){"use strict";var r=a(110);var n=a.n(r);var i=a(135);var s=a.n(i);var o=a(169);var l=a.n(o);var c=a(138);var u=a.n(c);var d=a(185);var p=a.n(d);var m=a(1);var h=a.n(m);var v=a(12);var f=a(13);var b=a.n(f);var g=a(0);var _=a(33);var y=a(20);var O=a(27);var k=a(9);var E=a(35);var C=a(14);var S=a(3750);var w=a(6);var j=a(357);var I=new w["b"]("unavailable_channel");var T={isThread:false};var A=function e(t){var a=t.isThread,r=t.isImOrMpim,n=t.unavailableTeamId;var i;var s=h.a.createElement(j["a"],{id:n});i=a?I.t("This thread is currently unavailable"):I.rt("{teamName} is making changes to their workspace",{teamName:s});var o;o=a?I.rt("{teamName} is making changes to their workspace, and this thread will be unavailable until that process is complete.",{teamName:s}):r?I.t("This conversation will be unavailable until this process is complete."):I.t("This channel will be unavailable until this process is complete.");var l=cdn_url+"/80588/img/enterprise/unavailable_channel.png";return h.a.createElement(h.a.Fragment,null,h.a.createElement("img",{className:"p-unavailable_channel_image",src:l,srcSet:l+", "+l.replace(".png","@2x.png")+" 2x",alt:""}),h.a.createElement("h2",{className:"p-unavailable_channel_title"},i),h.a.createElement("div",{className:"p-unavailable_channel_content"},o))};A.defaultProps=T;var N=A;var P=a(147);var M=a.n(P);var D=a(288);var x=a(58);var R=a(324);var F=new w["b"]("unavailable_channel");var L={isThread:false};var U=function(e){p()(t,e);function t(e){var a;n()(this,t);a=l()(this,u()(t).call(this,e));a.state={loading:false};a.handleReload=a.handleReload.bind(M()(a));return a}s()(t,[{key:"handleReload",value:function e(){var t=this.props,a=t.channelId,r=t.channelPrivacyType,n=t.unavailableTeamId,i=t.clogger,s=t.isThread;this.setState(function(){return{loading:true}});var o="UnavailableChannelReload: Remote team "+n+" has migrated their data, user triggered client reload";var l="unavailable_channel_reload";Object(x["a"])()?Object(R["a"])({reason:o,reasonKey:l}):Object(R["b"])({reason:o,reasonKey:l,noCache:true});i.track(C["EventId"].CHANNEL_UNAVAILABLE,{channel_id:a,channel_type:a?a.charAt(0):null,channel_privacy_type:r,unavailable_team_id:n,contexts:{ui_context:{action:C["UiAction"].CLICK,step:s?C["UiStep"].THREAD:C["UiStep"].MESSAGE_PANE,ui_element:C["UiElement"].BTN_RELOAD}}});i.sendDataAndEmptyQueue()}},{key:"render",value:function e(){var t=this.props,a=t.isThread,r=t.isImOrMpim,n=t.unavailableTeamId;var i;i=a?F.t("Reload Slack to view this thread"):r?F.t("Reload Slack to view this conversation"):F.t("Reload Slack to view this channel");var s=h.a.createElement(j["a"],{id:n});var o;o=a?F.rt("{teamName} has made some changes to their workspace, so you\u2019ll need to reload Slack to keep working in this thread.",{teamName:s}):r?F.rt("{teamName} has made some changes to their workspace, so you\u2019ll need to reload Slack to keep working in this conversation.",{teamName:s}):F.rt("{teamName} has made some changes to their workspace, so you\u2019ll need to reload Slack to keep working in this channel.",{teamName:s});var l=cdn_url+"/80588/img/enterprise/unavailable_channel_reload.png";return h.a.createElement(h.a.Fragment,null,h.a.createElement("img",{className:"p-unavailable_channel_image p-unavailable_channel_image--reload",src:l,srcSet:l+", "+l.replace(".png","@2x.png")+" 2x",alt:""}),h.a.createElement("h2",{className:"p-unavailable_channel_title"},i),h.a.createElement("div",{className:"p-unavailable_channel_content"},h.a.createElement("p",null,o),h.a.createElement("div",{className:"align_center"},h.a.createElement(D["a"],{type:"primary",size:"large",onClick:this.handleReload,disabled:this.state.loading,loading:this.state.loading},F.t("Reload Slack")))))}}]);return t}(m["PureComponent"]);U.displayName="UnavailableChannelReload";U.defaultProps=L;var B=U;var q={isThread:false};var G="reload";var H="blocker";var W=function(e){p()(t,e);function t(){n()(this,t);return l()(this,u()(t).apply(this,arguments))}s()(t,[{key:"componentDidMount",value:function e(){this.clogImpression()}},{key:"componentDidUpdate",value:function e(t){t.isReloadRequired===this.props.isReloadRequired&&t.channelId===this.props.channelId||this.clogImpression()}},{key:"clogImpression",value:function e(){var t=this.props,a=t.channelId,r=t.channelPrivacyType,n=t.unavailableTeamId,i=t.clogger,s=t.isThread,o=t.isReloadRequired;i.track(C["EventId"].CHANNEL_UNAVAILABLE,{channel_id:a,channel_type:a?a.charAt(0):null,channel_privacy_type:r,unavailable_team_id:n,contexts:{ui_context:{action:C["UiAction"].IMPRESSION,step:s?C["UiStep"].THREAD:C["UiStep"].MESSAGE_PANE,ui_properties:{element_name:o?G:H}}}})}},{key:"render",value:function e(){var t=this.props,a=t.isReloadRequired,r=t.isThread;var n=b()("p-unavailable_channel",{"p-unavailable_channel_thread":r});return h.a.createElement("div",{className:n},a?h.a.createElement(B,this.props):h.a.createElement(N,this.props))}}]);return t}(m["PureComponent"]);W.displayName="UnavailableChannel";W.defaultProps=q;var V=function e(t,a){var r=a.unavailableTeamId,n=a.channelId;var i=Object(_["k"])(t,r);var s=Object(y["e"])(t,n);return{isReloadRequired:Object(O["externalOrgMigrated"])(i),isImOrMpim:Object(k["isIm"])(s)||Object(k["isMpim"])(s),clogger:Object(E["a"])({state:t}),channelId:s.id,channelPrivacyType:Object(k["getChannelPrivacyType"])(s)}};var K=Object(v["connect"])(V)(W);var z=t["a"]=K},,function(e,t,a){"use strict";var r=a(18);var n=a(0);var i=a(21);var s=a(756);var o=a(61);var l=a(2779);var c=a(16);var u=a(35);var d=a(90);var p={};var m=Object(r["b"])("launch workflow builder",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.subPath,n=void 0===r?"":r,m=a.source,h=void 0===m?"":m;var v=t();if(Object(l["b"])(v)){var f=Object(i["b"])(v);var b=Object(o["c"])({state:v});var g=Object(c["a"])({label:"WORKFLOW-BUILDER",state:v});var _="/"===n.charAt(0)?n.slice(1):n;var y=p[f];if(y&&y.focus&&y.isClosed&&!y.isClosed())try{y.focus();b.count(h?"workflow_builder_focused_from_client__"+h:"workflow_builder_focused_from_client");g.debug("Workflow Builder window focused");return}catch(e){g.error("Unable to focus existing Workflow Builder window. Will try opening a new one.",e)}try{var O=e(Object(s["c"])({pathname:"/workflow-builder/"+f+"/"+_,windowOptions:{height:700,width:1024}}));p[f]=O;b.count(h?"workflow_builder_launched_from_client__"+h:"workflow_builder_launched_from_client");g.debug("Workflow Builder window opened");Object(u["a"])({state:v}).track("OPEN_WORKFLOW_BUILDER_FROM_CLIENT",{is_iap1:Object(d["e"])(v)})}catch(e){g.error("Unable to open new Workflow Builder window.",e)}}});m.meta={name:"launchWorkflowBuilder",key:"actionsLaunchWorkflowBuilderLaunchWorkflowBuilder",description:"launch workflow builder"};m.propTypes={subPath:n["default"].string,source:n["default"].string};t["a"]=m;var h={workflowBuilderWindowsByTeam:p}},,,,,function(e,t,a){"use strict";var r=a(88);var n=a.n(r);var i=a(110);var s=a.n(i);var o=a(135);var l=a.n(o);var c=a(169);var u=a.n(c);var d=a(138);var p=a.n(d);var m=a(147);var h=a.n(m);var v=a(185);var f=a.n(v);var b=a(2);var g=a.n(b);var _=a(0);var y=a(1);var O=a.n(y);var k=a(12);var E=a(332);var C=a.n(E);var S=a(11);var w=a(2962);var j=a(21);var I=a(39);var T=a(73);var A=a(20);var N=a(62);var P=a(1030);var M=a(38);var D=a(25);var x=a(349);var R=a(1316);var F=a(2001);var L=a(2002);var U=a(1890);var B=a(22);var q=a(1037);var G=a(18);var H=a(819);var W=Object(G["b"])("Count the number of characters over the message length limit",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelId,n=a.text,i=a.delta;var s=Object(H["b"])(t(),{channelId:r,text:n,delta:i}),o=s.processedDelta;return Math.max(0,Object(q["a"])(o)-B["MAX_MESSAGE_INPUT_WYSIWYG_LENGTH"])});W.meta={name:"countCharsOverLimit",key:"actionsCountCharsOverMessageLimitCountCharsOverLimit",description:"Count the number of characters over the message length limit"};W.propTypes={channelId:_["default"].string,text:_["default"].string};var V=W;var K=a(9);var z=a(17);var Q=a(41);var Y=a(24);var J=a(220);var X=a(23);var Z=a(495);var $=a(851);var ee=a(6);var te=a(189);var ae=a(2613);function re(e,t){return Object(ae["a"])(new C.a(e),new C.a(t))}var ne=a(2786);var ie=a(1049);var se=a(372);var oe=a(392);var le=a(1446);var ce=a(388);var ue=a(751);var de=a(35);var pe=a(14);function me(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function he(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?me(Object(a),true).forEach(function(t){n()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):me(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var ve=60;var fe=1e3;var be=new ee["b"]("message");var ge={saveMessageEdit:g.a.noop,channelId:null,teamId:void 0,viewContext:B["MESSAGE_CONTAINERS"].MESSAGE_PANE,isSelfIm:false,setDidRequestToStopEditing:g.a.noop,updateEditState:g.a.noop,stopEditingMessage:g.a.noop,updateHasUnsavedChanges:g.a.noop,canDelete:true,canUnbroadcast:false,initialEditOps:void 0,initialContents:void 0,didRequestToStopEditing:false,editWindowMin:-1,isAdminUser:false,useJumbomoji:false,messageContainerType:void 0,openModal:g.a.noop,countCharsOverMessageLimit:g.a.identity,completedMessageAction:g.a.noop,featureContextualMessageShortcuts:false,featureWysiwygAnchorText:false,featureMsgEditWarnModal:false,screenReaderIsEnabled:false,hasKeyboardFocus:false};var _e=function(e){f()(t,e);function t(e){var a;s()(this,t);a=u()(this,p()(t).call(this,e));a.setTextyRef=a.setTextyRef.bind(h()(a));a.maybeSave=a.maybeSave.bind(h()(a));a.onTimerInterval=a.onTimerInterval.bind(h()(a));a.renderTimeoutErrorDialog=a.renderTimeoutErrorDialog.bind(h()(a));a.renderLengthErrorDialog=a.renderLengthErrorDialog.bind(h()(a));a.renderUnknownErrorDialog=a.renderUnknownErrorDialog.bind(h()(a));a.stopEditingMessage=a.stopEditingMessage.bind(h()(a));a.handleSaveEditError=a.handleSaveEditError.bind(h()(a));a.onEnter=a.onEnter.bind(h()(a));a.onTextChange=a.onTextChange.bind(h()(a));a.renderInput=a.renderInput.bind(h()(a));a.texty=null;a.syncEditStateOnUnmount=true;a.editWindowTimeout=null;a.componentDidUnmount=false;a.enableBroadcastKeywords=!(a.props.messageContainerType===B["MESSAGE_CONTAINERS"].THREADS_FLEXPANE||a.props.messageContainerType===B["MESSAGE_CONTAINERS"].THREADS_VIEW);a.state={editSecondsRemaining:a.countRemainingSeconds(),numCharsOverLimit:a.props.countCharsOverMessageLimit({channelId:a.props.channelId,delta:new C.a(a.props.originalMessageContents.contents)})};a.getComputedModules=Object(ie["a"])(function(e,t,a){var r=Object(le["a"])({featureWysiwygAnchorText:a});return he({},e,{composer:he({},r,{teamId:t}),slacklink:{convertImages:false,disableLinksWithLabels:!a},slackmarkdown:{convertHeaders:false,convertHorizontalRule:false}})});return a}l()(t,[{key:"componentDidMount",value:function e(){var t=this.props,a=t.isSelfIm,r=t.editWindowMin;r>=0&&!a&&(this.editWindowTimeout=setInterval(this.onTimerInterval,fe))}},{key:"UNSAFE_componentWillReceiveProps",value:function e(t){t.didRequestToStopEditing&&!this.hasUnsavedChanges()&&this.stopEditingMessage()}},{key:"UNSAFE_componentWillUpdate",value:function e(t,a){var r=a.editSecondsRemaining;r<=0&&clearInterval(this.editWindowTimeout)}},{key:"componentWillUnmount",value:function e(){if(this.syncEditStateOnUnmount){var t=this.texty.getContents();var a=this.hasUnsavedChanges();this.props.updateEditState({editOps:t.contents,hasUnsavedChanges:a})}this.editWindowTimeout&&clearInterval(this.editWindowTimeout);this.componentDidUnmount=true}},{key:"onEnter",value:function e(){this.maybeSave();return false}},{key:"onTextChange",value:function e(){var t=this.props,a=t.didRequestToStopEditing,r=t.channelId;var n=this.state.numCharsOverLimit;var i=this.props.countCharsOverMessageLimit({channelId:r,delta:new C.a(this.getEditContents().contents)});(i>0||n>0)&&this.setState(function(){return{numCharsOverLimit:i}});this.props.updateHasUnsavedChanges(this.hasUnsavedChanges());a&&!this.hasUnsavedChanges()&&this.props.setDidRequestToStopEditing(false)}},{key:"onTimerInterval",value:function e(){var t=this;this.setState(function(){return{editSecondsRemaining:t.countRemainingSeconds()}})}},{key:"getEditContents",value:function e(){var t=this.props.initialEditOps;if(this.texty)return this.texty.getContents();if(t)return{contents:t};return{contents:[]}}},{key:"setTextyRef",value:function e(t){this.texty=t&&t.getWrappedInstance?t.getWrappedInstance():t}},{key:"countRemainingSeconds",value:function e(){var t=this.props,a=t.isSelfIm,r=t.editWindowMin,n=t.ts;if(r<0||a)return null;var i=Object(te["l"])(n);var s=60*r*1e3;var o=i.getTime()+s;return Math.round((o-Date.now())/1e3)}},{key:"handleSaveEditError",value:function e(t){var a=t.message;switch(a){case"edit_window_closed":this.renderTimeoutErrorDialog();break;case"msg_too_long":this.renderLengthErrorDialog();break;default:this.renderUnknownErrorDialog()}}},{key:"hasUnsavedChanges",value:function e(){var t=this.props,a=t.initialEditOps,r=t.originalMessageContents;if(this.texty)return!re(this.texty.getContents.contents,r.contents);return!a||!(a&&re(a,r.contents))}},{key:"isSavingDisabled",value:function e(){var t=this.state.editSecondsRemaining;var a=g.a.isNumber(t)&&t<=0;return a||this.shouldShowLengthWarning()}},{key:"maybeSave",value:function e(){var t=this.props,a=t.channelId,r=t.ts,i=t.viewContext,s=t.screenReaderIsEnabled,o=t.hasKeyboardFocus,l=t.clogger;var c=this.state,u=c.editSecondsRemaining,d=c.numCharsOverLimit;if(d>0)return false;if(g.a.isNumber(u)&&u<=0)return false;if(this.texty.isEmpty({doIgnoreWhitespace:true})){var p,m;l.track(pe["EventId"].MSG_EMPTY_EDIT_DELETE_DIALOG,{contexts:n()({},pe["ClientEventKeys"].ui_context,(m={},n()(m,pe["UiContextKeys"].action,pe["UiAction"].EDIT),n()(m,pe["UiContextKeys"].ui_properties,(p={},n()(p,pe["UiPropertiesKeys"].view_context,i||B["MESSAGE_CONTAINERS"].MESSAGE_PANE),n()(p,pe["UiPropertiesKeys"].is_screen_reader_enabled,s),n()(p,pe["UiPropertiesKeys"].client_has_keyboard_focus,o),p)),m))});this.startDelete();return false}this.props.saveMessageEdit({channelId:a,delta:new C.a(this.getEditContents().contents),viewContext:i,ts:r}).catch(this.handleSaveEditError);return true}},{key:"shouldShowLengthWarning",value:function e(){var t=this.state.numCharsOverLimit;return t>0}},{key:"shouldShowTimeoutWarning",value:function e(){var t=this.state.editSecondsRemaining;return g.a.isNumber(t)&&t<ve}},{key:"shouldShowUnsavedWarning",value:function e(){var t=this.props.didRequestToStopEditing;return t&&this.hasUnsavedChanges()}},{key:"startDelete",value:function e(){var t=this.props,a=t.channelId,r=t.originalMessageContents,n=t.canDelete,i=t.canUnbroadcast,s=t.ts,o=t.viewContext;if(n){this.props.openModal({element:O.a.createElement(L["a"],{channelId:a,ts:s})});return}if(i){this.props.openModal({element:O.a.createElement(F["a"],{channelId:a,ts:s})});return}var l=new C.a(r.contents);var c=l.compose((new C.a).retain(l.length(),{strike:true}));this.props.saveMessageEdit({channelId:a,delta:c,viewContext:o,ts:s}).catch(this.handleSaveEditError)}},{key:"stopEditingMessage",value:function e(){var t=this.props,a=t.channelId,r=t.ts,n=t.viewContext,i=t.featureContextualMessageShortcuts,s=t.completedMessageAction;this.syncEditStateOnUnmount=false;this.props.stopEditingMessage({viewContext:n,channelId:a,ts:r});i&&s({viewContext:n,channelId:a,ts:r,focusOnInput:true})}},{key:"renderInput",value:function e(){var t=this;var a=this.props,r=a.initialContents,n=a.messageHasText,i=a.useJumbomoji,s=a.channelId,o=a.featureWysiwygAnchorText,l=a.teamId;var c=n?be.t("Edit message"):be.t("Add message");return O.a.createElement($["a"],{completeOnChannels:true,completeOnEmoji:true,completeOnMembers:true,shouldCompleteOnTab:true,channelId:this.props.channelId,renderInput:function e(a){var n=a.isOpen,u=a.modules;var d=t.getComputedModules(u,l,o);return O.a.createElement(Z["g"],{ref:t.setTextyRef,className:"c-message__editor__input",modules:d,ariaLabel:c,placeholder:c,initialText:r,onEnter:t.onEnter,onEscape:t.stopEditingMessage,onTextChange:t.onTextChange,enableJumbomoji:i,isAutocompleteOpen:n,focusOnMount:true,channelId:s,enableBroadcastKeywords:t.enableBroadcastKeywords,enableEmojiButton:true,enableComposerButton:true,enableSendButton:false,useFocusRing:false})}})}},{key:"renderLengthErrorDialog",value:function e(){var t=be.t("Message editing failed");var a=be.t("Sorry, your message is too long. Please shorten it and try again.");this.props.openModal({element:O.a.createElement(se["a"],{title:t},a)})}},{key:"renderLengthWarning",value:function e(){var t=be.t("text is too long!");return O.a.createElement("span",{className:"c-message__editor__warning","data-js":"length_warning"},t)}},{key:"renderTimeoutErrorDialog",value:function e(){var t=this.props,a=t.editWindowMin,r=t.isAdminUser;var n=Object(te["p"])(a,{units:"minutes"});var i=be.t("Message editing failed");var s=be.rt("Sorry, but messages can only be edited for {duration} after posting.",{duration:O.a.createElement("b",null,n)});var o;r&&(o=be.rt("(To adjust the message editing window, visit <a>Workspace Settings</a>)",null,function(e){var t=e.text;return O.a.createElement(J["a"],{href:"/admin/settings#message_editing",target:"_new"},t)}));this.props.openModal({element:O.a.createElement(se["a"],{title:i},O.a.createElement("p",null,s),o)})}},{key:"renderTimeoutWarning",value:function e(){var t=this.state.editSecondsRemaining;var a;t<=0?a=be.t("(your time to edit ran out)"):t<=ve&&(a=be.rt("(you have <b>{seconds, number}</b> {seconds, plural, =1{second}other{seconds}})",{seconds:t}));return O.a.createElement("span",{className:"c-message__editor__warning","data-js":"timeout_warning"},a)}},{key:"renderUnknownErrorDialog",value:function e(){var t=be.t("Message editing failed");var a=be.t("Sorry, something went wrong with editing your message. Try again in a moment.");this.props.openModal({element:O.a.createElement(se["a"],{title:t},a)})}},{key:"renderUnsavedWarning",value:function e(){var t=be.rt("Finish editing this message first! Or press <b>escape</b> if you\u2019ve changed your mind.");return O.a.createElement("span",{className:"c-message__editor__info","data-js":"unsaved_warning"},t)}},{key:"renderWarningMessages",value:function e(){var t=!this.props.featureMsgEditWarnModal&&this.shouldShowUnsavedWarning()&&this.renderUnsavedWarning();var a=this.shouldShowTimeoutWarning()&&this.renderTimeoutWarning();var r=this.shouldShowLengthWarning()&&this.renderLengthWarning();if(!t&&!a&&!r)return null;return O.a.createElement("div",{role:"alert",className:"c-message__editor__messages"},t,a,r)}},{key:"render",value:function e(){return O.a.createElement("div",{className:"c-message__editor","data-qa":"message_editor"},O.a.createElement("div",{className:"c-message__editor__input_container"},this.renderInput()),O.a.createElement("div",{className:"c-message__editor__footer"},O.a.createElement(Y["d"],{type:"outline",size:"small",onClick:this.stopEditingMessage},be.t("Cancel")),O.a.createElement(Y["d"],{size:"small",className:"c-message__editor__save",onClick:this.maybeSave,disabled:this.isSavingDisabled()},O.a.createElement(X["a"],{type:"enter",className:"margin_right_50"}),be.t("Save Changes")),this.renderWarningMessages()))}}]);return t}(y["PureComponent"]);_e.displayName="BaseEditMessage";_e.defaultProps=ge;function ye(e,t){var a=t.ts,r=t.channelId,n=t.viewContext,i=t.messageContainerType;var s=Object(T["a"])(e,r,a);if(!s)return{};var o=Object(A["e"])(e,r);var l=Object(N["a"])(e,"msg_edit_window_mins");var c=Object(D["b"])(e);var u=Object(P["a"])(e);var d=Object(Q["canDeleteMessage"])(e,{message:s,channel:o,messageContainerType:i});var p=Object(Q["canRemoveBroadcast"])(e,{message:s,channel:o,messageContainerType:i});var m=Object(x["getMessageEditData"])(e,{viewContext:n,channelId:r,ts:a})||{},h=m.editOps,v=m.didRequestToStopEditing;var f=Object(M["k"])(e,"plain_text_mode");var b={contents:Object(ne["a"])(e,s,{usePlainTextMode:f}).ops};var _;_=h?{contents:h}:b;return{channelId:o.id,teamId:Object(j["b"])(e),isSelfIm:Object(K["isYou"])(c.id,o),canDelete:d,canUnbroadcast:p,originalMessageContents:b,initialEditOps:h,initialContents:_,ts:a,messageHasText:!!(s.text||!g.a.isEmpty(s.blocks)),editWindowMin:l,isAdminUser:Object(z["isAdmin"])(e,c),didRequestToStopEditing:v,useJumbomoji:u,featureContextualMessageShortcuts:Object(S["isFeatureEnabled"])(e,"feature_contextual_message_shortcuts"),featureWysiwygAnchorText:Object(w["a"])(e),featureMsgEditWarnModal:Object(S["isFeatureEnabled"])(e,"feature_msg_edit_warn_modal"),screenReaderIsEnabled:Object(ue["isScreenReaderEnabled"])(e),clogger:Object(de["a"])({state:e})}}var Oe={saveMessageEdit:U["a"],setDidRequestToStopEditing:x["setDidRequestToStopEditing"],updateEditState:x["updateEditState"],stopEditingMessage:x["cancelEditingMessage"],updateHasUnsavedChanges:x["updateHasUnsavedChanges"],openModal:I["openModal"],countCharsOverMessageLimit:V,completedMessageAction:R["a"]};var ke=Object(oe["b"])(Object(k["connect"])(ye,Oe)(Object(ce["a"])(_e)));ke.propTypes={ts:_["default"].string.isRequired,channelId:_["default"].string.isRequired};var Ee=t["a"]=ke},function(e,t,a){"use strict";var r=a(0);var n=a(88);var i=a.n(n);var s=a(31);var o=a(29);var l=a(41);function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function u(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(Object(a),true).forEach(function(t){i()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var d=1.75;var p=100;var m=10;var h=Object(o["a"])("Deletes a message",function(e,t,a){var r=a.channelId,n=a.ts,i=a.broadcastDelete,o=a.attempts,c=void 0===o?0:o,v=a.reason;if(Object(l["isTempTs"])(n))return Promise.reject(new Error("message_not_found"));var f={channel:r,ts:n};i&&(f.broadcast_delete=true);return e(Object(s["a"])({method:"chat.delete",args:f,reason:v})).catch(function(t){var r=t.data,n=void 0===r?{}:r;if("message_not_found"===n.error&&c<m){var i=p*d;return Promise.delay(i).then(function(){return e(h(u({},a,{attempts:c+1})))})}return Promise.reject(new Error(n.error||"unknown_error"))})});h.meta={name:"chatDeleteApi",key:"fetchersChatDeleteApiChatDeleteApi",description:"Deletes a message"};h.propTypes={channelId:r["default"].string,ts:r["default"].string,broadcastDelete:r["default"].bool,attempts:r["default"].number,reason:r["default"].string.isRequired};var v=h;var f=Object(o["a"])("Deletes a join/leave message rollup",function(e,t,a){var r=a.channelId,n=a.firstMessageTs,i=a.lastMessageTs;var o={channel_id:r,first_message_ts:n,last_message_ts:i};return e(Object(s["a"])({method:"chat.deleteBulkJoinLeave",args:o}))});f.meta={name:"chatDeleteApi",key:"fetchersChatBulkDeleteApiChatDeleteApi",description:"Deletes a join/leave message rollup"};f.propTypes={channelId:r["default"].string,firstMessageTs:r["default"].string,lastMessageTs:r["default"].string};var b=f;var g=a(18);var _=a(20);var y=a(148);var O=a(183);var k=a(73);var E=a(484);var C=a(411);var S=Object(g["b"])("Animate a message deletion as well as calling the delete API endpoint",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelId,n=a.ts,i=a.broadcastDelete,s=void 0!==i&&i,o=a.rollupTimestamps;var c=t();var u=Object(k["a"])(c,r,n);var d=o&&o.length>1;if(!u)return Promise.resolve();d||Object(l["getReplyCount"])(u)||s||e(Object(E["animateDeleteMessage"])({channelId:r,ts:n}));if(Object(l["isTempTs"])(n)||Object(l["isEphemeral"])(u))return Promise.resolve();if(d){var p=o[0];var m=o.pop();return e(b({channelId:r,firstMessageTs:p,lastMessageTs:m}))}return e(v({channelId:r,ts:n,broadcastDelete:s,reason:"animateAndDeleteMessageApi"})).then(function(){if(Object(l["isReply"])(u)&&!s){var e=Object(_["e"])(t(),r);Object(C["g"])(e,u)}}).catch(function(t){if("message_not_found"!==t.message){e(Object(E["animateDeleteMessage"])({channelId:r,ts:n,isDeleting:false}));if(s)e(Object(O["k"])({channelId:r,ts:n}));else{e(Object(y["addTimestamps"])({channelId:r,timestamps:[n]}));e(Object(O["a"])([u]))}}throw t})});S.meta={name:"animateAndDeleteMessageApi",key:"actionsAnimateAndDeleteMessageApiAnimateAndDeleteMessageApi",description:"Animate a message deletion as well as calling the delete API endpoint"};S.propTypes={channelId:r["default"].string.isRequired,ts:r["default"].string.isRequired,broadcastDelete:r["default"].bool,rollupTimestamps:r["default"].array};var w=t["a"]=S;var j={animateAndDeleteMessageApi:S}},,function(e,t,a){"use strict";var r=a(25);var n=a(33);var i=a(17);var s=a(27);var o=a(11);var l=a(62);var c=a(2);var u=a(371);var d=function e(t,a){var n=Object(r["b"])(t);var s=Object(i["isRestricted"])(n);var o=Object(u["getCurrentMemberUserGroupMembership"])(t);var d=Object(l["a"])(t,a);var p=Object(c["get"])(d,"type",[]);var m=Object(c["get"])(d,"subteam",[]);var h=Object(c["get"])(d,"user",[]);if(p.includes("regular")&&!s)return true;if(p.includes("admin")&&Object(i["isAdmin"])(t,n))return true;if(p.includes("owner")&&Object(i["isOwner"])(t,n))return true;if(h.includes(n.id))return true;if(Object(c["intersection"])(m,o).length>0)return true;if(0===p.length)return!s;return false};a.d(t,"b",function(){return p});a.d(t,"a",function(){return m});var p=function e(t){var a=Object(r["b"])(t);var n=Object(i["isRestricted"])(a);var s=Object(o["isFeatureEnabled"])(t,"feature_builder_can_access");if(n)return false;if(!s)return false;return true};var m=function e(t){var a=Object(n["d"])(t);var r=Object(o["isFeatureEnabled"])(t,"feature_builder_can_access");if(!r)return false;if(!Object(s["isPaidTeam"])(a))return false;var i=Object(s["isEnterpriseTeam"])(a)&&false===Object(l["a"])(t,"workflow_builder_enabled");if(i)return false;return d(t,"who_can_create_workflows")};var h=function e(t){var a=Object(o["isFeatureEnabled"])(t,"feature_builder_webhook_trigger");var r=Object(l["a"])(t,"workflows_webhook_trigger_enabled");return a&&r};var v=function e(t){var a=Object(o["isFeatureEnabled"])(t,"feature_builder_display_export_form_csv");var r=Object(l["a"])(t,"workflows_export_csv_enabled");return a&&r}},,function(e,t,a){"use strict";var r=a(1);var n=a.n(r);var i=a(18);var s=a(39);var o=a(110);var l=a.n(o);var c=a(135);var u=a.n(c);var d=a(169);var p=a.n(d);var m=a(138);var h=a.n(m);var v=a(147);var f=a.n(v);var b=a(185);var g=a.n(b);var _=a(12);var y=a(0);var O=a(40);var k=a.n(O);var E=a(2);var C=a(6);var S=a(117);var w=a(1191);var j=a(839);var I=a(98);var T=a(50);var A=a(35);var N=a(14);var P=a(1201);var M=a(1348);var D=a(189);var x=a(38);var R=a(652);var F=a(233);var L=a(1870);var U=new C["b"]("do_not_disturb");var B={do24hrTime:false,inDnd:false,clogger:{track:E["noop"]}};var q=function(e){g()(t,e);function t(e){var a;l()(this,t);a=p()(this,h()(t).call(this,e));var r=k()().add(1,"hour").startOf("hour");var n=r.format("YYYY-MM-DD");var i=r.format("HH:mm");var s=k()(n+" "+i).unix();a.state={snoozeEndDate:n,snoozeEndTime:i,snoozeEndTs:s};a.onDateChange=a.onDateChange.bind(f()(a));a.onTimeChange=a.onTimeChange.bind(f()(a));a.onGo=a.onGo.bind(f()(a));return a}u()(t,[{key:"onDateChange",value:function e(t){var a=this.state.snoozeEndTime;this.setState(function(){return{snoozeEndDate:t,snoozeEndTs:k()(t+" "+a).unix()}})}},{key:"onGo",value:function e(){var t=this.props,a=t.clogger,r=t.inDnd;var n=this.state.snoozeEndTs;var i=Object(M["a"])(n);if(i<=0)return;this.props.snoozeNotifications({duration:i,reason:"DndDialog:onGo"});a.track(N["EventId"].DND_SNOOZE_NOTIFICATIONS,{dnd_duration:i,dnd_preset:N["DndPreset"].DURATION_CUSTOM,dnd_snooze_type:r?N["DndSnoozeType"].SNOOZE_ADJUST:N["DndSnoozeType"].SNOOZE_INITIAL})}},{key:"onTimeChange",value:function e(t){var a=this.state.snoozeEndDate;this.setState(function(){return{snoozeEndTime:t,snoozeEndTs:k()(a+" "+t).unix()}})}},{key:"getTimeSelectOptions",value:function e(){var t=this.props.do24hrTime;var a=this.state.snoozeEndDate;var r=a===k()().format("YYYY-MM-DD");var n=k()().format("HH:mm");var i=Object.keys(P["a"]).filter(function(e){return!(r&&e<n)}).map(function(e){return{value:e,label:t?e:P["a"][e]}});return i}},{key:"render",value:function e(){var t=this.state,a=t.snoozeEndDate,r=t.snoozeEndTime,i=t.snoozeEndTs;var s=Object(M["a"])(i)<=0;var o=Object(D["i"])(i);var l=U.t("Pause notifications until\u2026");var c=k()().format("YYYY-MM-DD");var u=k()().add(1,"year").format("YYYY-MM-DD");return n.a.createElement(S["a"],{title:l,goButtonText:U.t("Pause Notifications"),goButtonType:"primary",goButtonIsDisabled:s,onGo:this.onGo,showCancelButton:false},n.a.createElement(T["a"],{htmlFor:"dnd_dialog_date_button",text:U.t("Date")},n.a.createElement(w["b"],{position:"bottom",offsetX:67,dateFormat:"YYYY-MM-DD",selectedDate:a,onDateChange:this.onDateChange,disableDatesBefore:c,disableDatesAfter:u},n.a.createElement(I["a"],{id:"dnd_dialog_date_button",className:"p-dnd_dialog__date_picker_trigger","aria-label":U.t("Date to snooze notifications until")},o))),n.a.createElement(T["a"],{htmlFor:"dnd_dialog_time_select",text:U.t("Time")},n.a.createElement(j["b"],{id:"dnd_dialog_time_select",options:this.getTimeSelectOptions(),onChange:this.onTimeChange,value:r,useFilteredInput:false,usePlaceholderOption:false})))}}]);return t}(r["PureComponent"]);q.displayName="DndDialog";q.defaultProps=B;var G=function e(t){return{do24hrTime:Object(x["k"])(t,"time24"),inDnd:!!Object(F["getCurrentMemberDnd"])(t),clogger:Object(A["a"])({state:t})}};var H={snoozeNotifications:R["e"]};var W=Object(_["connect"])(G,H)(q);var V=Object(i["b"])("Opens the DND dialog",function(e,t,a){e(Object(s["openModal"])({element:n.a.createElement(W,a)}))});V.meta={name:"openDndDialog",key:"actionsOpenDndDialogOpenDndDialog",description:"Opens the DND dialog"};V.propTypes=null;var K=t["a"]=V},function(e,t,a){"use strict";var r=a(1);var n=a.n(r);var i=a(0);var s=a(39);var o=a(18);var l=a(25);var c=a(17);var u=a(6);var d=a(35);var p=a(117);var m=a(110);var h=a.n(m);var v=a(135);var f=a.n(v);var b=a(169);var g=a.n(b);var _=a(138);var y=a.n(_);var O=a(147);var k=a.n(O);var E=a(185);var C=a.n(E);var S=a(296);var w=a(12);var j=a(261);var I=a(356);var T=a(9);var A=a(166);var N=a(343);var P=a(20);var M=a(118);var D=a(1460);var x=a(93);var R=a(3091);var F=new u["b"]("channel_invite");var L={DISABLED:"disabled",LOADING:"loading",ENABLED:"enabled"};var U={channels:[]};var B=function(e){C()(t,e);function t(e){var a;h()(this,t);a=g()(this,y()(t).call(this,e));a.state={addButtonState:L.DISABLED,isAlreadyMember:false,selectedChannelId:void 0};a.onChannelSelected=a.onChannelSelected.bind(k()(a));a.onAddToChannel=a.onAddToChannel.bind(k()(a));return a}f()(t,[{key:"onAddToChannel",value:function e(){var t=this.state.selectedChannelId;var a=this.props.member;var r=a.id;Object(c["isAppUser"])(a)?this.props.addAppToChannel({appUserId:r,channelId:t,referringEventId:"INVITE_TO_CHANNEL_DIALOG",referringUiContext:{action:"IMPRESSION"}}):this.props.submitInviteToChannel({channelId:t,users:r})}},{key:"onChannelSelected",value:function e(){var t=this;var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=a.value;var n=this.props.member;var i=n.id;this.setState(function(){return{selectedChannelId:r,addButtonState:L.LOADING}});return this.props.getChannelMembershipInfoForUsers({channelId:r,userIds:[i]}).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.membershipInfo;var r=a[i].isMember;t.setState(function(){return{addButtonState:r?L.DISABLED:L.ENABLED,isAlreadyMember:r}});return a})}},{key:"renderChannelOption",value:function e(t){return n.a.createElement(A["a"],{channelId:t.value})}},{key:"renderChannelPicker",value:function e(){var t=this.props,a=t.channels,r=t.memberName;var i=this.state.isAlreadyMember;var s=a.map(function(e){return{label:Object(T["getName"])(e),value:e.id}});return n.a.createElement(n.a.Fragment,null,n.a.createElement(I["f"],{options:s,placeholderText:F.t("Select a channel"),ariaLabel:F.t("Select a channel"),selectId:"searchSelectChannelOptions",size:"medium",selectDataQa:"search-select-channel-options",renderOption:this.renderChannelOption,renderSelectedOption:this.renderChannelOption,onOptionSelected:this.onChannelSelected}),i&&n.a.createElement(x["a"],{type:"inline",level:"error",className:"p-invite_member_to_channel_dialog__error"},n.a.createElement("span",null,F.t("{name} is already a member of this channel.",{name:r,__react:true}))))}},{key:"render",value:function e(){var t=this.props.memberName;var a=this.state.addButtonState;var r=F.t("Add {name} to a channel",{name:t,__react:true});return n.a.createElement(p["a"],{title:r,goButtonIsDisabled:a===L.DISABLED,goButtonIsPending:a===L.LOADING,goButtonText:F.t("Add"),onGo:this.onAddToChannel},n.a.createElement("div",{className:"p-invite_member_to_channel_dialog__body"},this.renderChannelPicker()))}}]);return t}(n.a.Component);B.displayName="BaseInviteMemberToChannelDialog";B.defaultProps=U;var q=function e(t,a){var r=a.member;return{channels:Object(P["v"])(t).sort(Object(j["b"])("name")),memberName:Object(c["getPrefCompliantMemberName"])(t,r,false)}};var G=function e(t){return Object(S["bindActionCreators"])({getChannelMembershipInfoForUsers:N["getChannelMembershipInfoForUsers"],submitInviteToChannel:M["L"],addAppToChannel:D["a"]},t)};var H=Object(w["connect"])(q,G)(B);a.d(t,"a",function(){return K});var W=new u["b"]("channel_invite");function V(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.title,a=e.body;return Object(s["openModal"])({element:n.a.createElement(p["a"],{title:t,goButtonText:W.t("OK",{fallbackHash:"9ce3bd4224c8c1780db56b4125ecf3f24bf748b7",fallbackHashNs:"fullscreen_modal"}),showCancelButton:false},a)})}var K=Object(o["b"])("Opens app dialog",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.memberId;var i=t();var o=Object(l["b"])(i);var u=Object(l["e"])(i,r);var p=Object(d["a"])({state:i});var m=Object(c["getPrefCompliantMemberName"])(i,u,false);var h=W.t("Add {name} to a channel",{name:m,__react:true});p.track("INVITE_TO_CHANNEL_DIALOG",{contexts:{ui_context:{action:"IMPRESSION"}}});Object(c["isUltraRestricted"])(o)?e(V({title:h,body:W.t("You are not allowed to add other members to channels.")})):Object(c["isUltraRestricted"])(u)?e(V({title:h,body:W.t("{name} cannot be added to any new channels.",{name:m,__react:true})})):Object(c["isRestricted"])(u)&&!Object(c["isAdmin"])(i,o)?e(V({title:h,body:W.t("Only a Workspace Admin can add {name} into new channels.",{name:m,__react:true})})):e(Object(s["openModal"])({element:n.a.createElement(H,{member:u})}))});K.meta={name:"openInviteMemberToChannelDialog",key:"actionsOpenInviteMemberToChannelDialogOpenInviteMemberToChannelDialog",description:"Opens app dialog"};K.propTypes={memberId:i["default"].string.isRequired};var z={openSimpleModal:V}},,,,,,,,,function(e,t,a){"use strict";var r=a(110);var n=a.n(r);var i=a(135);var s=a.n(i);var o=a(169);var l=a.n(o);var c=a(138);var u=a.n(c);var d=a(147);var p=a.n(d);var m=a(185);var h=a.n(m);var v=a(0);var f=a(1);var b=a.n(f);var g=a(12);var _=a(2);var y=a(30);var O=a(193);var k=a(18);var E=a(114);var C=a(16);var S="IMPROVED_SEARCH";var w=Object(k["b"])("Clog a search open event using data from redux",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.tab;e(Object(E["L"])({tab:r}));Object(C["a"])({getState:t}).info(S,'Switching to tab "'+r+'"')});w.meta={name:"setTab",key:"actionsUniversalSearchSetTabSetTab",description:"Clog a search open event using data from redux"};w.propTypes={method:v["default"].string};var j=w;var I=a(6);var T=a(2476);var A=a(777);var N=a(227);var P=a(236);var M=new I["b"]("search");var D={counts:{messages:NaN,files:NaN,channels:NaN,people:NaN},clogSearchOpen:_["noop"]};var x=function(e){h()(t,e);function t(e){var a;n()(this,t);a=l()(this,u()(t).call(this,e));Object(y["a"])(p()(a),["getClickHandler"]);return a}s()(t,[{key:"getClickHandler",value:function e(t){var a=this;return function(){a.props.setTab({tab:t});a.props.clogSearchOpen({method:"search_tab"})}}},{key:"isSortReady",value:function e(t){return Number.isFinite(t.channels)&&Number.isFinite(t.people)&&Number.isFinite(t.files)}},{key:"render",value:function e(){var t=[{id:"messages",title:M.t("Messages"),titleCount:this.props.counts.messages,isLoading:"messages"!==this.props.tab&&!this.isSortReady(this.props.counts),isCountLoading:!Number.isFinite(this.props.counts.messages),onClick:this.getClickHandler("messages"),"data-qa":"search_tab_messages","aria-label":M.t("Messages, {numResults} {numResults, plural, =1 {result} other {results}}",{numResults:this.props.counts.messages||0})},{id:"files",title:M.t("Files"),titleCount:this.props.counts.files,isLoading:"files"!==this.props.tab&&!this.isSortReady(this.props.counts),isCountLoading:!Number.isFinite(this.props.counts.files),onClick:this.getClickHandler("files"),"data-qa":"search_tab_files","aria-label":M.t("Files, {numResults} {numResults, plural, =1 {result} other {results}}",{numResults:this.props.counts.files||0})},{id:"channels",title:M.t("Channels"),titleCount:this.props.counts.channels,isLoading:"channels"!==this.props.tab&&!this.isSortReady(this.props.counts),isCountLoading:!Number.isFinite(this.props.counts.channels),onClick:this.getClickHandler("channels"),"data-qa":"search_tab_channels","aria-label":M.t("Channels, {numResults} {numResults, plural, =1 {result} other {results}}",{numResults:this.props.counts.channels||0})},{id:"people",title:M.t("People"),titleCount:this.props.counts.people,isLoading:"people"!==this.props.tab&&!this.isSortReady(this.props.counts),isCountLoading:!Number.isFinite(this.props.counts.people),onClick:this.getClickHandler("people"),"data-qa":"search_tab_people","aria-label":M.t("People, {numResults} {numResults, plural, =1 {result} other {results}}",{numResults:this.props.counts.people||0})}];t.sort(function(e,t){if("messages"===e.id)return-1;if("messages"===t.id)return 1;if(!Number.isFinite(e.titleCount))return 1;if(!Number.isFinite(t.titleCount))return-1;return t.titleCount-e.titleCount});return b.a.createElement("div",{className:"c-search__tabs c-tabs__tab_menu"},b.a.createElement(A["a"],{currentTabId:this.props.tab,tabs:t,formatCount:true}))}}]);return t}(f["PureComponent"]);x.displayName="SearchTypeSwitch";x.defaultProps=D;var R=function e(t){return{counts:Object(N["getResponseModuleCounts"])(t),tab:Object(O["u"])(t)}};var F={setTab:function e(){return j.apply(void 0,arguments)},clogSearchOpen:function e(){return P["k"].apply(void 0,arguments)}};var L=t["a"]=Object(g["connect"])(R,F)(x)},,,function(e,t,a){"use strict";var r=a(110);var n=a.n(r);var i=a(135);var s=a.n(i);var o=a(169);var l=a.n(o);var c=a(138);var u=a.n(c);var d=a(147);var p=a.n(d);var m=a(185);var h=a.n(m);var v=a(1);var f=a.n(v);var b=a(12);var g=a(2);var _=a(1152);var y=a(20);var O=a(35);var k=a(1415);var E=a(0);var C=a(57);var S=a(17);var w=a(9);var j=a(25);var I=a(927);var T=a(196);var A=a.n(T);var N=a(218);var P=a.n(N);var M=a(304);var D=a(1082);var x=a(1040);var R=a(6);var F=a(421);var L=a(2866);var U=a(3412);var B=new R["b"]("calls");var q={channel:"channel",im:"im",mpim:"mpim",none:"none"};var G={type:q.none,value:null,phoneNumber:null};var H=function e(t,a,r,n){var i=Object(y["e"])(t,a);if(Object(w["isChannel"])(i)&&Object(w["isIm"])(i))return{type:q.im,value:r,phoneNumber:n};if(Object(w["isMpim"])(i)){var s=Object(M["getMemberCounts"])(t,i.id);var o=Object(g["get"])(s,"counts.member_count")||0;return{type:q.mpim,value:o}}if(Object(w["isChannel"])(i))return{type:q.channel,value:Object(w["getName"])(i)};if(r)return{type:q.im,value:r,phoneNumber:n};return G};var W=function e(t,a,r){if("video"===a){if(r.type===q.mpim)return B.t("Use {appName} to start a video and audio call with {conversationContext} people",{appName:t,conversationContext:r.value});if(r.type===q.channel)return B.t("Use {appName} to start a video and audio call with #{conversationContext}",{appName:t,conversationContext:r.value});if(r.type===q.im)return B.t("Use {appName} to start a video and audio call with {conversationContext}",{appName:t,conversationContext:r.value});return B.t("Use {appName} to start a video and audio call",{appName:t})}if(r.type===q.mpim)return B.t("Use {appName} to start a phone call with {conversationContext} people",{appName:t,conversationContext:r.value});if(r.type===q.channel)return B.t("Use {appName} to start a phone call with #{conversationContext}",{appName:t,conversationContext:r.value});if(r.type===q.im)return B.t("Use {appName} to start a phone call with {conversationContext}",{appName:t,conversationContext:r.value});return B.t("Use {appName} to start a phone call",{appName:t})};var V={appsById:{},callsApp:{video:[],phone:[]},conversationContext:G,cloggerContext:{},channel:void 0,hideAudioApps:false,hideVideoApps:false,memberPhoneNumber:void 0,memberRealName:void 0,menuProps:{},onSelected:g["noop"]};var K=function e(t,a,r,n,i,s,o,l){return f.a.createElement(C["b"],{dataQa:r+"-"+l.id,key:r+"-"+l.id,className:"display_flex flex_direction_row",onSelected:function e(){t({appId:l.id,type:r,phoneNumber:n.phoneNumber});Object(L["b"])({clogger:i,cloggerContext:s,channel:o,appId:l.id,callType:r})}},f.a.createElement("div",{className:"display_flex flex_direction_row"},f.a.createElement("div",{className:"c-menu_item__icon"},f.a.createElement(x["a"],{className:"p-classic_nav__call-menu_icon",src:a[l.id]&&a[l.id].image?a[l.id].image:F["a"],height:"20",width:"20",alt:l.name})),f.a.createElement("div",{"aria-label":W(l.name,r,n)},l.name)))};K.displayName="addMenuItem";var z=function e(t){var a=t.appsById,r=t.callsApp,n=t.conversationContext,i=t.hideAudioApps,s=t.hideVideoApps,o=t.isPhoneIntegrationAdminExperimentOn,l=t.memberPhoneNumber,c=t.menuProps,u=t.onSelected,d=t.clogger,p=t.cloggerContext,m=t.channel;if(!o)return null;var h=[];if(!s&&r.video&&r.video.length>0){h.push(f.a.createElement(C["c"],{label:B.t("Video & Audio"),key:"video_audio"}));h.push.apply(h,P()(r.video.map(K.bind(null,u,a,I["a"].video,n,d,p,m))))}if(!i&&Object(k["a"])(l)&&r.audio&&r.audio.length>0){!s&&r.video&&r.video.length>0&&h.push(f.a.createElement(C["d"],{key:"phone_separator"}));h.push(f.a.createElement(C["c"],{label:B.t("Phone {phone}",{phone:l}),key:"phone"}));h.push.apply(h,P()(r.audio.map(K.bind(null,u,a,I["a"].audio,n,d,p,m))))}return f.a.createElement(C["f"],A()({width:"auto"},c),h)};z.displayName="CallMenu";z.defaultProps=V;var Q=function e(t,a){var r=a.channelId,n=a.memberRealName,i=a.memberPhoneNumber;var s=Object(I["d"])(t);var o=Object(I["c"])(t);var l=H(t,r,n,i);return{isPhoneIntegrationAdminExperimentOn:Object(D["c"])(t),callsApp:s,appsById:o,conversationContext:l,clogger:Object(O["a"])({state:t})}};var Y={getMenuItemAriaLabel:W};var J=Object(b["connect"])(Q,null)(z);var X={callsApp:{video:[],audio:[]},channelId:null,childFunctionComponent:g["noop"],memberPhoneNumber:null,memberRealName:null,onMenuItemSelected:g["noop"],onRenderMenuCallback:g["noop"],onCloseMenuCallback:g["noop"],channel:void 0,cloggerContext:{},hideVideoApps:false};var Z=function(e){h()(t,e);function t(e){var a;n()(this,t);a=l()(this,u()(t).call(this,e));a.renderMenu=a.renderMenu.bind(p()(a));return a}s()(t,[{key:"renderMenu",value:function e(t){var a=this.props,r=a.channelId,n=a.cloggerContext,i=a.channel,s=a.memberPhoneNumber,o=a.memberRealName,l=a.onMenuItemSelected,c=a.onRenderMenuCallback,u=a.hideVideoApps;c&&c();return f.a.createElement(J,{channelId:r,onSelected:l,memberPhoneNumber:s,memberRealName:o,menuProps:t,cloggerContext:n,channel:i,hideAudioApps:Object(w["isChannel"])(r)||!Object(k["a"])(s),hideVideoApps:u})}},{key:"render",value:function e(){var t=this.props,a=t.callsApp,r=t.memberPhoneNumber,n=t.childFunctionComponent,i=t.onMenuItemSelected,s=t.onCloseMenuCallback,o=t.clogger,l=t.channel,c=t.cloggerContext,u=t.hideVideoApps;var d=Object(I["g"])(a,r,u);if(0===d)return null;var p;if(1===d){var m=Object(I["f"])(a,r,u);p=n(function(){i({appId:m&&m.callApp.id,type:m&&m.type,phoneNumber:r});Object(L["b"])({clogger:o,cloggerContext:c,channel:l,appId:m.callApp.id,callType:m.type})})}else p=f.a.createElement(C["e"],{isOpen:true,onClick:function e(){Object(L["c"])({clogger:o,cloggerContext:c,channel:l})},onClose:s,position:"bottom",renderMenu:this.renderMenu},n());return f.a.createElement(_["b"],{subtype:"with-call-menu"},p)}}]);return t}(v["PureComponent"]);Z.displayName="WithCallMenu";Z.defaultProps=X;var $=function e(t,a){var r=a.channelId,n=a.member,i=a.memberId;var s=Object(y["e"])(t,r);var o=Object(I["d"])(t,Object(w["isChannel"])(r));var l;i&&(l=Object(j["e"])(t,i));var c=Object(S["getMemberPhone"])(l||n);var u=Object(S["getMemberRealName"])(l||n);return{callsApp:o,memberPhoneNumber:c,memberRealName:u,clogger:Object(O["a"])({state:t}),channel:s}};var ee=t["a"]=Object(b["connect"])($,null)(Z)},function(e,t,a){"use strict";var r=a(196);var n=a.n(r);var i=a(110);var s=a.n(i);var o=a(135);var l=a.n(o);var c=a(169);var u=a.n(c);var d=a(138);var p=a.n(d);var m=a(185);var h=a.n(m);var v=a(0);var f=a(1);var b=a.n(f);var g=a(2);var _=a(390);var y=a(2426);var O={action:null};var k=function(e){h()(t,e);function t(){s()(this,t);return u()(this,p()(t).apply(this,arguments))}l()(t,[{key:"render",value:function e(){return b.a.createElement("div",{className:"margin_left_75"},this.props.action)}}]);return t}(f["PureComponent"]);k.displayName="ActionBarItem";k.defaultProps=O;var E=k;var C={actions:[],"data-qa":void 0};var S=function(e){h()(t,e);function t(){s()(this,t);return u()(this,p()(t).apply(this,arguments))}l()(t,[{key:"renderActionItems",value:function e(){var t=this.props.actions;var a=Object(g["map"])(t,function(e,t){return b.a.createElement(E,{key:t,action:e})});return a}},{key:"render",value:function e(){return b.a.createElement("div",{className:"p-action_bar display_flex align_items_center justify_content_between sk_off_white_bg"},b.a.createElement("span",n()({},Object(_["a"])(this.props),{className:"p-action_bar_title black"}),this.props.title),b.a.createElement("div",{className:"display_flex align_items_center"},this.renderActionItems()))}}]);return t}(f["PureComponent"]);S.displayName="ActionBar";S.defaultProps=C;var w=t["a"]=S},function(e,t,a){"use strict";var r=a(110);var n=a.n(r);var i=a(169);var s=a.n(i);var o=a(138);var l=a.n(o);var c=a(147);var u=a.n(c);var d=a(135);var p=a.n(d);var m=a(185);var h=a.n(m);var v=a(1);var f=a(0);var b=a(16);var g=function(e){h()(t,e);p()(t,null,[{key:"getDerivedStateFromProps",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.store;return a.getState()}}]);function t(e){var a;n()(this,t);a=s()(this,l()(t).call(this,e));var r=e.store;a.state=r.getState();a.logger=Object(b["a"])({getState:r.getState,label:"CONNECT-IMMEDIATE"});a.unsubscribe=null;a.update=a.update.bind(u()(a));return a}p()(t,[{key:"componentDidMount",value:function e(){this.subscribeToStore()}},{key:"componentDidUpdate",value:function e(t){if(this.props.store!==t.store){this.unsubscribeFromStore();this.subscribeToStore()}}},{key:"componentWillUnmount",value:function e(){this.unsubscribeFromStore()}},{key:"subscribeToStore",value:function e(){var t=this.props.store;var a=t.subscribeImmediate;if(!a){this.logger.warn("subscribeImmediate not found on store");a=t.subscribe}this.unsubscribe=a(this.update)}},{key:"unsubscribeFromStore",value:function e(){this.unsubscribe&&this.unsubscribe()}},{key:"update",value:function e(){var t=this;this.setState(function(){return t.props.store.getState()})}},{key:"render",value:function e(){return this.props.render(this.state)}}]);return t}(v["PureComponent"]);g.displayName="ConnectImmediate";var _=g;var y=t["a"]=_},function(e,t,a){"use strict";var r=a(110);var n=a.n(r);var i=a(135);var s=a.n(i);var o=a(169);var l=a.n(o);var c=a(138);var u=a.n(c);var d=a(147);var p=a.n(d);var m=a(185);var h=a.n(m);var v=a(1);var f=a.n(v);var b=a(0);var g=a(12);var _=a(2);var y=a(30);var O=a(6);var k=a(353);var E=a(192);var C=a(97);var S=a(93);var w=a(89);var j=a(21);var I=a(25);var T=a(17);var A=a(420);var N=a(866);var P=a(2341);var M=a(266);var D=new O["b"]("user_groups");var x={onSelectedItemsChange:_["noop"],getMemberById:_["noop"],userGroupMemberIds:[],isEnterprise:null,teamId:null};var R=32;var F=148;var L=function(e){h()(t,e);function t(e){var a;n()(this,t);a=l()(this,u()(t).call(this,e));Object(y["a"])(p()(a),["getSelectedMembers","renderMemberOption","filterMembers"]);return a}s()(t,[{key:"getSelectedMembers",value:function e(t){var a=this;return t.map(function(e){return a.formatMemberOption(a.props.getMemberById(e))})}},{key:"filterMembers",value:function e(t){if(this.props.isEnterprise&&!Object(T["filterTeamsForMember"])(t,[this.props.teamId]).length)return false;return true}},{key:"formatMemberOption",value:function e(t){if(!t)return null;return{label:Object(T["getMemberProfileFieldDisplayName"])(t),value:t.id}}},{key:"renderMemberOption",value:function e(t){return f.a.createElement(N["a"],{id:t.value})}},{key:"render",value:function e(){var t=this.props.userGroupMemberIds;var a=this.getSelectedMembers(t);return f.a.createElement(A["d"],{isRequired:true,focusOnMount:true,key:"user_group_member_select",selectId:"user_group_member_select",renderOption:this.renderMemberOption,selectedOptions:a,onSelectedItemsChange:this.props.onSelectedItemsChange,placeholderText:D.t("Search by name"),width:"100%",size:"large",maxHeight:F,optionsRowHeight:R,searcherOptions:{entities:{members:{includeSelf:true,onlyLocalTeam:true,includeSlackbot:false,includeBots:false,includeDeleted:false,includeGuests:false}},allowEmptyQuery:true,sort:{frecency:false,selfFirst:false},limit:40,filter:this.filterMembers}})}}]);return t}(v["PureComponent"]);L.displayName="UserGroupMemberSelector";L.defaultProps=x;var U=function e(t,a){var r=a.groupId;var n=Object(E["f"])(t,r);var i=Object(C["g"])(n);return{userGroupMemberIds:i,getMemberById:function e(a){return Object(I["e"])(t,a)},isEnterprise:Object(M["f"])(t),teamId:Object(j["b"])(t)}};var B=Object(g["connect"])(U)(L);var q=new O["b"]("user_groups");var G={groupId:void 0,onSelectedItemsChange:_["noop"],userGroupMemberIds:[],fetchAndUpsertUserGroupMembers:_["noop"]};var H=function(e){h()(t,e);function t(e){var a;n()(this,t);a=l()(this,u()(t).call(this,e));a.state={updatedGroupMembers:e.userGroupMemberIds,displayNoMemberError:false,haveUpsertedExistingMembers:false};Object(y["a"])(p()(a),["setAllMembers","onSelectedItemsChange"]);return a}s()(t,[{key:"componentDidMount",value:function e(){var t=this;var a=this.props.groupId;a&&this.props.fetchAndUpsertUserGroupMembers({groupId:a}).then(function(e){t.setState(function(){return{haveUpsertedExistingMembers:true}});Object(_["isEmpty"])(e)||t.setState(function(){return{updatedGroupMembers:e}})})}},{key:"componentWillUnmount",value:function e(){this.keyCommands&&this.keyCommands.reset()}},{key:"onSelectedItemsChange",value:function e(t){this.setDisplayNoMemberError(!t.length);this.setAllMembers(t.map(function(e){return e.value}));this.props.onSelectedItemsChange(t)}},{key:"getUpdatedUserGroupMembers",value:function e(){return this.state.updatedGroupMembers}},{key:"setAllMembers",value:function e(t){this.setState(function(){return{updatedGroupMembers:t}})}},{key:"setDisplayNoMemberError",value:function e(t){this.setState(function(){return{displayNoMemberError:t}})}},{key:"maybeRenderNoMembersAlert",value:function e(){if(!this.state.displayNoMemberError)return null;return f.a.createElement(S["a"],{type:"inline",level:"error",className:"margin_right_150 margin_left_150 margin_bottom_100","data-qa-user-group-error":true},q.t("User groups need to have at least one member."))}},{key:"validateUpdatedGroupMemberCount",value:function e(){var t=this.state.updatedGroupMembers.length>0;t||this.setDisplayNoMemberError(true);return t}},{key:"renderLoadingSpinner",value:function e(){return f.a.createElement("div",{className:"full_height full_width display_flex align_items_center","data-qa-user-group-loading":true},f.a.createElement(w["a"],{size:"jumbo",className:"inline_block full_width margin_top_200"}))}},{key:"renderUserGroupMemberSelector",value:function e(){var t=this.state.haveUpsertedExistingMembers;var a=this.props.groupId;return f.a.createElement("div",{className:"p-user_group_member_selector","data-qa-user-group-member-management-body":true},!a||t?f.a.createElement("div",null,this.maybeRenderNoMembersAlert(),f.a.createElement(B,{groupId:this.props.groupId,onSelectedItemsChange:this.onSelectedItemsChange})):f.a.createElement("div",{className:"p-user_group_member_selector_loading_spinner_container"},this.renderLoadingSpinner()))}},{key:"render",value:function e(){return this.renderUserGroupMemberSelector()}}]);return t}(v["PureComponent"]);H.displayName="UserGroupMemberManagement";H.defaultProps=G;var W=function e(t,a){var r=a.groupId;var n=Object(E["f"])(t,r);var i=Object(C["g"])(n);return{userGroupMemberIds:i}};var V={fetchAndUpsertUserGroupMembers:k["j"]};var K=t["a"]=Object(g["connect"])(W,V,null,{withRef:true})(H)},function(e,t,a){"use strict";var r=a(110);var n=a.n(r);var i=a(135);var s=a.n(i);var o=a(169);var l=a.n(o);var c=a(138);var u=a.n(c);var d=a(147);var p=a.n(d);var m=a(185);var h=a.n(m);var v=a(2);var f=a(1);var b=a.n(f);var g=a(0);var _=a(12);var y=a(6);var O=a(121);var k=a(20);var E=a(11);var C=a(9);var S=a(63);var w=a(107);var j=a(93);var I=a(24);var T=a(166);var A=a(2738);var N=a(30);var P=a(13);var M=a.n(P);var D=a(332);var x=a.n(D);var R=a(73);var F=a(38);var L=a(187);var U=a(856);var B=a(555);var q=a(1885);var G=a(1406);var H=a(819);var W=a(2735);var V=a(22);var K=a(108);var z=a(23);var Q=a(50);var Y=a(1925);var J=a(2736);var X=a(2008);var Z=a(54);var $=a(4676);var ee=a(41);var te=a(176);var ae=a(775);var re=a(34);var ne=a(202);var ie=a(1049);var se=a(915);var oe=a(3785);var le=a(3482);var ce=new y["b"]("threads");var ue=40;var de=150;var pe={channelType:"channel",prepareAndSendMessage:function e(){return Promise.resolve()},editLastMessageInChannel:v["noop"],viewContext:void 0,useSendButton:false,focusInputOnMount:false,featureComposeFlowSend:false,featureContextBarScalable:false,featureUnifiedDrafts:false,featureFilesInInput:false,unifiedDraft:void 0,pendingFileIds:void 0,setComposerDraft:v["noop"],clearDrafts:v["noop"],enableStickyComposer:false,replyCount:0,clogThreadEvent:v["noop"],onFocus:v["noop"],onUpArrow:v["noop"],onDownArrowWhenEmpty:v["noop"]};var me=function(e){h()(t,e);function t(e){var a;n()(this,t);a=l()(this,u()(t).call(this,e));a.inputRef=b.a.createRef();a.reactionPopoverRef=b.a.createRef();a.state={textyValue:"",hasFocus:false,broadcast:false,broadcastControlsHeight:0,hasDoubleDecker:false,isContextBarShowing:false};Object(N["a"])(p()(a),["onBroadcastChange","onBroadcastControlsMouseDown","onTextChange","onFocus","onBlur","sendMessage","editLastMessage","onExpandAnimationTick","onExpandAnimationEnd","handleDraftRestore","onDoubleDeckerToggled","handleIsContextBarShowing"]);a.getAdditionalDraftContent=Object(ie["a"])(function(e){return{broadcast:e}});return a}s()(t,[{key:"componentDidMount",value:function e(){var t=this;var a=this.props,r=a.channelId,n=a.threadTs,i=a.viewContext;if(!Object(re["a"])()&&this.inputRef.current){var s=Object(se["c"])(r,n);if(s){var o;var l=(null===(o=this.inputRef.current)||void 0===o?void 0:o.getWrappedInstance)?this.inputRef.current.getWrappedInstance():this.inputRef.current;(null===l||void 0===l?void 0:l.value)&&l.value(s)}}Object(ne["c"])({viewContext:i,channelId:r,threadTs:n,functions:{clear:function e(){var a=t.getInputRef();a&&a.clear();t.state.broadcast&&t.setState(function(){return{broadcast:false}})},isEmpty:function e(){var a=t.getInputRef();return a?a.isEmpty():null},prependContents:function e(a){var r=t.getInputRef();r&&r.prependContents(a)},setContents:function e(a){var r=t.getInputRef();r&&r.setContents(a)},getContents:function e(){var a=t.getInputRef();return a?a.getContents():null},setText:function e(a){var r=t.getInputRef();r&&r.value(a)},getText:function e(){var a=t.getInputRef();return a?a.value():null},getDisplayValue:function e(){var a=t.getInputRef();return a?a.displayValue():null},setBroadcast:function e(a){return t.setState(function(){return{broadcast:a}})},getBroadcast:function e(){return t.state.broadcast},focus:function e(){var a=t.getInputRef();a&&a.setCursorAtEnd()},clearHistory:function e(){var a=t.getInputRef();a&&a.clearHistory()},setCursorAtEnd:function e(){var a=t.getInputRef();a&&a.setCursorAtEnd()},getContentsForCurrentSelection:function e(){var a=t.getInputRef();if(!a)return null;var r=a.getSelection();if(!r)return null;return a.getContentsForRange(r.index,r.length)},openReactionPopoverForLastMessage:function e(){if(t.reactionPopoverRef.current){var a;var r=(null===(a=t.reactionPopoverRef.current)||void 0===a?void 0:a.getWrappedInstance)?t.reactionPopoverRef.current.getWrappedInstance():t.reactionPopoverRef.current;(null===r||void 0===r?void 0:r.startReactionPopoverForLastMessage)&&r.startReactionPopoverForLastMessage()}},isCursorAtBeginning:function e(){var a=t.getInputRef();if(!a)return false;var r=a.getSelection();return r&&0===r.index},isCursorAtEnd:function e(){var a=t.getInputRef();if(!a)return false;var r=a.getSelection();return r&&r.index===a.getLength()},setCursor:function e(a,r){var n=t.getInputRef();n&&n.setCursor(a,r)},scrollIntoView:function e(){var a=t.getInputRef();a&&a.container.scrollIntoView()}}})}},{key:"componentDidUpdate",value:function e(t,a){var r=this.state.hasFocus||!!this.state.textyValue||this.hasFiles(this.props);var n=a.hasFocus||!!a.textyValue||this.hasFiles(t);r&&!n?this.startExpandAnimation(0,ue):!r&&n&&this.startExpandAnimation(ue,0)}},{key:"componentWillUnmount",value:function e(){var t=this.props,a=t.channelId,r=t.threadTs,n=t.viewContext;Object(ne["d"])({viewContext:n,channelId:a,threadTs:r});this.expandAnimation&&this.expandAnimation.cancel()}},{key:"onBlur",value:function e(){if(this.preventUnfocus){this.preventUnfocus=false;return}this.setState(function(){return{hasFocus:false}})}},{key:"onBroadcastChange",value:function e(t){var a=t.target.checked;this.setState(function(){return{broadcast:!!a}});if(!this.state.textyValue){var r;var n=(null===(r=this.inputRef.current)||void 0===r?void 0:r.getWrappedInstance)?this.inputRef.current.getWrappedInstance():this.inputRef.current;(null===n||void 0===n?void 0:n.focus)&&n.focus();this.preventUnfocus=false}}},{key:"onBroadcastControlsMouseDown",value:function e(t){t.preventDefault();this.state.textyValue||(this.preventUnfocus=true)}},{key:"onExpandAnimationEnd",value:function e(){this.expandAnimation=null}},{key:"onExpandAnimationTick",value:function e(t){var a=t.value,r=t.nextTick;this.setState(function(){return{broadcastControlsHeight:a}},r)}},{key:"onFocus",value:function e(){this.setState(function(){return{hasFocus:true}})}},{key:"onTextChange",value:function e(t){this.setState(function(){return{textyValue:t}});var a=this.props,r=a.channelId,n=a.threadTs;Object(re["a"])()||Object(se["g"])(r,n,t)}},{key:"onDoubleDeckerToggled",value:function e(t){this.setState(function(){return{hasDoubleDecker:t}})}},{key:"getInputRef",value:function e(){return this.inputRef.current.getWrappedInstance?this.inputRef.current.getWrappedInstance():this.inputRef.current}},{key:"editLastMessage",value:function e(t){var a=t.keyboardShortcut,r=t.hasKeyboardFocus;this.props.editLastMessageInChannel({channelId:this.props.channelId,threadTs:this.props.threadTs,viewContext:this.props.viewContext,keyboardShortcut:a,hasKeyboardFocus:r})}},{key:"handleDraftRestore",value:function e(t){var a=this.props,r=a.channelId,n=a.threadTs;var i=t.broadcast;if(this.props.featureUnifiedDrafts){var s=Object(te["h"])(t);var o=Object(v["find"])(s,{channel_id:r,thread_ts:n});i=o&&o.broadcast}this.setState(function(e){var a=e.broadcastControlsHeight;return{broadcast:!!i,broadcastControlsHeight:t.ops?ue:a}})}},{key:"hasFiles",value:function e(t){var a=t.featureFilesInInput,r=t.pendingFileIds,n=t.unifiedDraft;var e=false;a&&(e=!Object(v["isEmpty"])(r)||!Object(v["isEmpty"])(Object(te["i"])(n)));return e}},{key:"isSendingDisabled",value:function e(){var t=this.props,a=t.featureFilesInInput,r=t.pendingFileIds,n=t.unifiedDraft;var i=this.state.textyValue;if(a){if(!Object(v["isEmpty"])(r))return true;var s=!!Object(v["trim"])(i);var o=!Object(v["isEmpty"])(Object(te["i"])(n));var l=o&&Object(te["i"])(n).length>V["MAX_FILE_UPLOAD_COUNT"];if(l)return true;return!s&&!o}return!Object(v["trim"])(i)}},{key:"sendMessage",value:function e(){var t=this;var a=this.props,r=a.channelId,n=a.threadTs,i=a.replyCount,s=a.clogThreadEvent,o=a.featureFilesInInput,l=a.unifiedDraft;var c=this.state.broadcast;this.setState(function(){return{broadcast:false}});var u=this.getInputRef();var d=u.value();var p=u.getContents();var m=o&&l?Object(te["i"])(l):null;var h=Object(X["a"])(p);if(o){if(!h&&Object(v["isEmpty"])(m))return null}else if(!h)return null;var f=c?"THREADS_REPLY_BROADCAST_CLICKED":"THREADS_REPLY";var b={num_msg_in_thread:i+1};s({event:f,metadata:b});o&&l?this.props.clearDrafts({ids:[Object(U["d"])({channelId:r,threadTs:n})]}):u.clear();u.focus();return this.props.prepareAndSendMessage({channelId:r,text:d,delta:new x.a(p.contents),fileIds:m,replyToTs:n,shouldBroadcast:c}).then(function(){var e=t.getInputRef();e&&e.clearHistory()}).catch(function(){u.isEmpty()&&(o?t.props.setComposerDraft(l):u.setContents(p))})}},{key:"startExpandAnimation",value:function e(t,a){var r=this.state.broadcastControlsHeight;if(r===a)return;this.expandAnimation&&this.expandAnimation.cancel();this.expandAnimation=Object(ae["a"])({fromValue:t,toValue:a,duration:de,easing:"easeInOutQuad",onTick:this.onExpandAnimationTick,onComplete:this.onExpandAnimationEnd})}},{key:"handleIsContextBarShowing",value:function e(t){this.setState(function(){return{isContextBarShowing:t}})}},{key:"render",value:function e(){var t=this.props,a=t.channelId,r=t.threadTs,n=t.viewContext,i=t.channelType,s=t.useSendButton,o=t.focusInputOnMount,l=t.userCanPost,c=t.onFocus,u=t.featureComposeFlowSend,d=t.featureUnifiedDrafts,p=t.enableStickyComposer,m=t.featureContextBarScalable;var h=this.state,f=h.broadcast,g=h.textyValue,_=h.hasFocus,y=h.broadcastControlsHeight,O=h.hasDoubleDecker,k=h.isContextBarShowing;var E=!!g||_||this.hasFiles(this.props);var C=M()("p-threads_footer__broadcast_controls",{"p-threads_footer__broadcast_controls--visible":E});var S={height:y};var j="";j="mpim"===i?ce.t("Also send to the group"):"im"===i?ce.t("Also send as direct message"):ce.rt("Also send to <span></span>",null,function(){return b.a.createElement(T["a"],{channelId:a,inline:true,className:"p-threads_footer__broadcast_channel"})});var I="";I="mpim"===i||"im"===i?ce.t("Choose this if you\u2019d like your reply to post in the main conversation, too"):ce.t("Choose this if you\u2019d like your reply to post in the channel, too");var A="p-thread_footer__broadcast_checkbox--"+Object(w["getThreadKey"])(a,r)+"--"+n;var N=b.a.createElement(Y["c"],{className:"p-threads_footer__input",channelId:a,threadTs:r,viewContext:n,placeholder:ce.t("Reply\u2026",{fallbackHash:"fefcf598b8ea8332c1557b2ee245e83e5c8b0aef"}),enableEmojiButton:true,enableComposerButton:true,enableSendButton:u,isSendingDisabled:this.isSendingDisabled(),enableBroadcastKeywords:false,onTextChange:this.onTextChange,onFocus:this.onFocus,onBlur:this.onBlur,sendMessage:this.sendMessage,editLastMessage:this.editLastMessage,ref:this.inputRef,maxLines:8,useSendButton:s,focusOnMount:o,maxLength:V["MAX_MESSAGE_INPUT_WYSIWYG_LENGTH"],onDraftRestore:this.handleDraftRestore,additionalDraftContent:this.getAdditionalDraftContent(f),onUpArrow:this.props.onUpArrow,onDownArrowWhenEmpty:this.props.onDownArrowWhenEmpty,unifiedDraftId:d?Object(U["d"])({channelId:a,threadTs:r}):null,onDoubleDeckerToggled:this.onDoubleDeckerToggled});Object(re["a"])()&&(N=b.a.createElement(J["a"],{ref:this.reactionPopoverRef,channelId:a,threadTs:r},N));var P=m&&l;var D=M()("p-threads_footer__input_container",{"p-threads_footer__input_container--sticky_composer":p||O,"p-threads_footer__input_container--context_bar_showing":P&&k});return b.a.createElement("div",{className:D,"data-qa":"reply_container",onFocus:c},P&&b.a.createElement($["a"],{key:a,channelId:a,onIsContextBarShowing:this.handleIsContextBarShowing,className:"p-threads_footer__context_bar"}),N,b.a.createElement("div",{className:C,style:S},b.a.createElement("div",{className:"p-threads_footer__broadcast_controls_inner"},l&&b.a.createElement(b.a.Fragment,null,b.a.createElement(Q["a"],{className:"p-threads_footer__broadcast_label",text:j,htmlFor:A,type:"inline",onMouseDown:this.onBroadcastControlsMouseDown},b.a.createElement(K["a"],{className:"p-threads_footer__broadcast_checkbox",id:A,checked:f,onChange:this.onBroadcastChange,"data-qa":"threads_footer_broadcast_checkbox",disabled:!E})),b.a.createElement(Z["c"],{tip:I},b.a.createElement(z["b"],{className:"p-threads_footer__info_tooltip",type:"question_circle",inline:true,size:"inherit"}))),!u&&b.a.createElement(Y["b"],{isDisabled:!Object(v["trim"])(g),className:"p-threads_footer__send_button",sendMessage:this.sendMessage,buttonSize:"small",tabIndex:0}))))}}]);return t}(f["Component"]);me.displayName="InputContainer";me.defaultProps=pe;function he(e,t){var a=t.channelId,r=t.threadTs;var n=Object(k["e"])(e,a);var i=Object(R["a"])(e,a,r);return{channelType:Object(C["getChannelType"])(n),featureComposeFlowSend:Object(L["h"])(e),featureUnifiedDrafts:Object(L["k"])(e),featureFilesInInput:Object(L["j"])(e),unifiedDraft:Object(L["d"])(e,Object(U["d"])({channelId:a,threadTs:r})),pendingFileIds:Object(L["j"])(e)?Object(G["a"])(e,{draftId:Object(U["d"])({channelId:a,threadTs:r})}):null,enableStickyComposer:Object(F["k"])(e,"msg_input_sticky_composer"),useSendButton:Object(F["k"])(e,"msg_input_send_btn"),replyCount:Object(ee["getReplyCount"])(i),userCanPost:Object(S["r"])(e,a),featureContextBarScalable:Object(E["isFeatureEnabled"])(e,"feature_context_bar_scalable")}}var ve={prepareAndSendMessage:function e(){return H["a"].apply(void 0,arguments)},editLastMessageInChannel:function e(){return W["a"].apply(void 0,arguments)},setComposerDraft:function e(){return B["g"].apply(void 0,arguments)},clearDrafts:function e(){return q["a"].apply(void 0,arguments)}};var fe=Object(_["connect"])(he,ve)(me);var be=a(3787);var ge=new y["b"]("threads");var _e={channel:void 0,unknown:false,archived:false,frozen:false,imWithDeletedMember:false,cannotReply:false,nonMember:false,canJoin:false,focusInputOnMount:true,joinConversationApi:v["noop"],featureAnnounceOnly:false,viewContext:void 0,clogThreadEvent:v["noop"],onFocus:v["noop"],onUpArrow:v["noop"],onDownArrowWhenEmpty:v["noop"]};var ye=function(e){h()(t,e);function t(e){var a;n()(this,t);a=l()(this,u()(t).call(this,e));a.joinChannel=a.joinChannel.bind(p()(a));a.onUpArrow=a.onUpArrow.bind(p()(a));a.onDownArrowWhenEmpty=a.onDownArrowWhenEmpty.bind(p()(a));return a}s()(t,[{key:"onDownArrowWhenEmpty",value:function e(){var t=this.props,a=t.channelId,r=t.threadTs;this.props.onDownArrowWhenEmpty({channelId:a,threadTs:r})}},{key:"onUpArrow",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var a=this.props,r=a.channelId,n=a.threadTs;this.props.onUpArrow({cmd:t,channelId:r,threadTs:n})}},{key:"joinChannel",value:function e(){var t=this.props.channelId;this.props.joinConversationApi({channelId:t})}},{key:"render",value:function e(){var t=this.props,a=t.channel,r=t.channelId,n=t.threadTs,i=t.unknown,s=t.archived,o=t.frozen,l=t.imWithDeletedMember,c=t.cannotReply,u=t.nonMember,d=t.canJoin,p=t.focusInputOnMount,m=t.featureAnnounceOnly,h=t.viewContext,v=t.clogThreadEvent,f=t.onFocus;if(i||l&&!o)return null;if(s||o){var g="";g=o?Object(C["isIm"])(a)?ge.t("Your two organizations are no longer connected."):Object(C["isMpim"])(a)?ge.t("These organizations are no longer connected."):ge.t("This channel is no longer shared with your organization."):ge.t("You are viewing a thread from an archived channel");return b.a.createElement(j["a"],{level:"default",type:"inline",align:"center",className:"p-threads_footer_alert p-threads_footer_alert--archived"},g)}if(m&&c){var _=ge.t("Posting to this thread has been restricted to select members");return b.a.createElement(A["a"],{tooltip:_,featureAnnounceOnly:m})}if(c)return b.a.createElement(j["a"],{level:"default",type:"inline",align:"center",className:"p-threads_footer_alert p-threads_footer_alert--no_reply"},ge.rt("Your Workspace Owners have limited who can post to <ChannelName></ChannelName>",null,function(){return b.a.createElement(T["a"],{channelId:r,inline:true,iconProps:{inherit:true}})}));if(u){if(!d)return null;return b.a.createElement("div",{className:"p-threads_footer_join_container"},b.a.createElement(I["d"],{type:"primary",size:"medium",onClick:this.joinChannel},ge.t("Join Channel")),!m&&b.a.createElement("p",{className:"p-threads_footer_join_label"},ge.rt("You\u2019ll need to join <ChannelName></ChannelName> to reply",null,function(){return b.a.createElement(T["a"],{channelId:r,inline:true,iconProps:{inherit:true}})})))}return b.a.createElement(fe,{channelId:r,threadTs:n,key:Object(w["getThreadKey"])(r,n),focusInputOnMount:p,viewContext:h,clogThreadEvent:v,onFocus:f,onUpArrow:this.onUpArrow,onDownArrowWhenEmpty:this.onDownArrowWhenEmpty})}}]);return t}(f["Component"]);ye.displayName="ThreadFooter";ye.defaultProps=_e;function Oe(e,t){var a=t.channelId;var r=Object(k["e"])(e,a);return{unknown:Object(C["isUnknownOrNonExistent"])(r),archived:Object(C["isArchived"])(r),frozen:Object(C["isFrozen"])(r),imWithDeletedMember:Object(C["isImWithDeletedMember"])(e,r),cannotReply:!Object(C["canThread"])(e,r),nonMember:Object(C["isPublicChannel"])(r)&&!Object(C["isMemberOfChannel"])(r),canJoin:Object(S["f"])(e,a),featureAnnounceOnly:Object(E["isFeatureEnabled"])(e,"feature_announce_only"),channel:r}}var ke=t["a"]=Object(_["connect"])(Oe,{joinConversationApi:O["joinConversationApi"]})(ye)},,function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(12);var s=a(85);var o=a.n(s);var l=a(156);var c=a(26);var u=a(110);var d=a.n(u);var p=a(135);var m=a.n(p);var h=a(169);var v=a.n(h);var f=a(138);var b=a.n(f);var g=a(147);var _=a.n(g);var y=a(185);var O=a.n(y);var k=a(0);var E=a(2);var C=a(30);var S=a(6);var w=a(22);var j=a(895);var I=a(760);var T=a(34);var A=a(1057);var N=a(245);var P=a.n(N);var M=a(196);var D=a.n(M);var x=a(218);var R=a.n(x);var F=a(286);var L=a(163);var U=a(13);var B=a.n(U);var q=a(1324);var G=a(2722);var H=a(922);var W=a(457);var V=a(1329);var K=a(1033);var z=a(2009);var Q=a(144);var Y=a(90);var J=a(590);var X=a(521);var Z=a(838);var $=a(433);var ee=a(1189);var te=a(445);var ae=a(515);var re=a(861);var ne=a(750);var ie=a(1150);var se=a(816);var oe=a(2398);var le=a(911);var ce=a(1299);var ue=a(1655);var de=a(1657);var pe=a(359);var me=a(384);var he=a(41);var ve={hasReactionOrReplies:false};var fe=function(e){O()(t,e);function t(){d()(this,t);return v()(this,b()(t).apply(this,arguments))}m()(t,[{key:"render",value:function e(){var t=this.props,a=t.hasReactionOrReplies,r=t.msg;if(!a)return null;return n.a.createElement("div",{className:"p-starred_item_message__reactions_and_replies","data-qa":"starred-item-reaction-reply-bar"},n.a.createElement(ue["a"],{msg:r}),n.a.createElement(de["a"],{msg:r,flexOrigin:"starred_items"}))}}]);return t}(n.a.PureComponent);fe.displayName="StarredItemReactionReplyBar";fe.defaultProps=ve;var be=function e(t,a){var r=a.msg;var n=Object(me["b"])(r);var i=Object(pe["getReactionsForKey"])(t,n);var s=Object(he["getReplyCount"])(r);return{hasReactionOrReplies:!!(s>0||i&&i.length)}};var ge=Object(i["connect"])(be)(fe);var _e=a(1914);var ye={className:void 0,"data-qa":void 0,isIAP1Enabled:false};var Oe=function(e){O()(t,e);function t(){d()(this,t);return v()(this,b()(t).apply(this,arguments))}m()(t,[{key:"render",value:function e(){var t=this.props,a=t.msg,r=t["data-qa"];var i=B()("p-starred_item__message",this.props.className);var s=n.a.createElement(se["a"],{className:i,"data-qa":r},n.a.createElement(le["a"],{msg:a,position:"inside",className:"p-starred_item__message_actions",showComment:false,showShare:false,showReact:false,showJump:true,showMoreActions:false,jumpOrigin:"starred_items"},n.a.createElement(ie["a"],{msg:a},n.a.createElement(ne["a"],{light:n.a.createElement(J["a"],{msg:a,size:36})},n.a.createElement(X["a"],{msg:a}),"\xa0\xa0",n.a.createElement(Z["a"],{msg:a,full:true}),n.a.createElement("br",null),n.a.createElement($["a"],{msg:a}),n.a.createElement(ae["a"],{msg:a,blocksContainerContext:Q["a"].starred_message}),n.a.createElement(ee["a"],{msg:a}),n.a.createElement(te["b"],{msg:a}),n.a.createElement(re["a"],{msg:a}),n.a.createElement(oe["a"],{flexOrigin:"starred_items",msg:a}),n.a.createElement(ge,{msg:a})))));return this.props.isIAP1Enabled?n.a.createElement(ce["a"],{className:"p-starred_item__message__pillow"},s):s}}]);return t}(r["Component"]);Oe.displayName="StarredItemMessage";Oe.defaultProps=ye;var ke=function e(t){return{isIAP1Enabled:Object(Y["e"])(t)}};var Ee=Object(i["connect"])(ke)(Oe);var Ce=a(104);var Se=a(129);var we=a(1450);var je={className:void 0,useRowAction:true,previewFile:E["noop"],"data-qa":void 0,isIAP1Enabled:false};var Ie=function(e){O()(t,e);function t(e){var a;d()(this,t);a=v()(this,b()(t).call(this,e));a.onFileClick=a.onFileClick.bind(_()(a));return a}m()(t,[{key:"onFileClick",value:function e(t,a){if(!a)return;var r="starred_items";this.props.previewFile({fileId:a.id,flexOrigin:r})}},{key:"render",value:function e(){var t=B()("p-starred_item__message",this.props.className);var a=this.props,r=a["data-qa"],i=a.isIAP1Enabled;if(!this.props.file)return null;return n.a.createElement(we["a"],{file:this.props.file,className:t,key:this.props.id,useRowAction:this.props.useRowAction,includeRootDownloadAction:false,includeRootStarAction:true,fullWidth:!i,onClick:this.onFileClick,"data-qa":r})}}]);return t}(r["PureComponent"]);Ie.displayName="StarredItemFile";Ie.defaultProps=je;var Te=function e(t,a){var r=a.id;return{file:Object(Se["getFileById"])(t,r),isIAP1Enabled:Object(Y["e"])(t)}};var Ae=Object(i["connect"])(Te,{previewFile:Ce["c"]})(Ie);var Ne={comment:void 0,fileId:void 0,className:void 0,"data-qa":void 0};var Pe=function(e){O()(t,e);function t(){d()(this,t);return v()(this,b()(t).apply(this,arguments))}m()(t,[{key:"render",value:function e(){var t=this.props,a=t.comment,r=t.fileId,i=t.className,s=t["data-qa"];if(!a)return null;var o={user:a.user,ts:a.timestamp.toString(),subtype:"file_comment",comment:a,files:[r]};return n.a.createElement(Ee,{msg:o,className:i,"data-qa":s})}}]);return t}(r["PureComponent"]);Pe.displayName="StarredItemFileComment";Pe.defaultProps=Ne;var Me=function e(t,a){var r=a.fileId,n=a.commentId;return{comment:Object(Se["getFileCommentById"])(t,r,n)}};var De=Object(i["connect"])(Me)(Pe);var xe=new S["b"]("starred_items");var Re=Object(H["b"])(Ee);var Fe={fetchMoreItems:E["noop"],isLoading:false,items:void 0,onItemTabWithin:E["noop"],focusKey:null,setFocusKey:E["noop"]};var Le={MESSAGE:"message",FILE:"file",FILE_COMMENT:"file_comment"};var Ue=function(e){O()(t,e);function t(e){var a;d()(this,t);a=v()(this,b()(t).call(this,e));Object(C["a"])(_()(a),["renderItem","isFocusableItem","getAriaLabelForRow","onFocusEnter","onFocusLeave"]);a.getItemKeys=Object(L["createSelector"])(function(e){var t=e.items;return t},function(e){var t=e.isLoading;return t},function(e,t){var r=["top-anchor-hack"];var n=e.map(function(e){return a.getStarredItemId(e)});r.push.apply(r,R()(n));t&&r.push("loader");return r});a.list=n.a.createRef();a.state={hasKeyboardFocus:false};return a}m()(t,[{key:"componentDidMount",value:function e(){var t=this.props,a=t.focusKey,r=t.items;"stars"===a&&r.length&&this.setFocusOnFirstItem()}},{key:"onFocusEnter",value:function e(t){this.setState(function(){return{hasKeyboardFocus:t.isKeyboardFocus}})}},{key:"onFocusLeave",value:function e(){this.setState(function(){return{hasKeyboardFocus:false}})}},{key:"getAriaLabelForRow",value:function e(t){var a=t.index;var r=this.props.items;var n=this.state.hasKeyboardFocus;var i=r[a-1];if(!i||!i.type)return;if(i.type===Le.MESSAGE)return{"aria-label":this.props.makeMessageSummary({channelId:i.channel,ts:i.ts,hasFocus:n,viewContext:w["MESSAGE_CONTAINERS"].STARS_FLEXPANE})};return{"aria-label":this.props.makeFileSummary({fileId:i.id,hasFocus:n})}}},{key:"getStarredItemId",value:function e(t){switch(t.type){case Le.MESSAGE:return t.channel+t.ts;case Le.FILE:return t.id;case Le.FILE_COMMENT:return t.id;default:return null}}},{key:"setFocusOnFirstItem",value:function e(){var t=this.props,a=t.isLoading,r=t.items;var n=this.getItemKeys({isLoading:a,items:r});var i=n[1];var s=this.list.current;s&&s.focusOnKey(i);this.props.setFocusKey(null)}},{key:"focus",value:function e(){var t=this.list.current;t&&t.focus()}},{key:"isFocusableItem",value:function e(t){var a=t.index;var r=this.props,n=r.isLoading,i=r.items;var s=this.getItemKeys({isLoading:n,items:i});var o=s[a];if(!o)return false;if("top-anchor-hack"===o)return false;if("loader"===o)return false;return true}},{key:"renderItem",value:function e(t){var a=this.props,r=a.isLoading,i=a.items;var s=this.getItemKeys({isLoading:r,items:i});if("top-anchor-hack"===s[t])return n.a.createElement("div",{className:"p-starred_item__top_anchor_item_hack"});if("loader"===s[t])return n.a.createElement(z["a"],null);var o=i[t-1];var l={key:this.getStarredItemId(o),className:B()("c-message_kit__message","p-starred_item",{"p-starred_item--first":o===i[0]}),"data-qa":"starred_item_"+o.type};switch(o.type){case Le.MESSAGE:return n.a.createElement(Re,D()({},l,{channelId:o.channel,ts:o.ts}));case Le.FILE:return n.a.createElement(Ae,D()({},l,{id:o.id}));case Le.FILE_COMMENT:return n.a.createElement(De,D()({},l,{fileId:o.fileId,commentId:o.id}));default:return null}}},{key:"render",value:function e(){var t=this;var a=this.props,r=a.isLoading,i=a.items,s=a.onItemTabWithin;return n.a.createElement(F["a"],null,function(e){var a=e.width,o=e.height;return n.a.createElement(W["a"],{ref:t.list,width:a,height:o,keys:t.getItemKeys({isLoading:r,items:i}),rowRenderer:t.renderItem,loadPost:t.props.fetchMoreItems,animateOnScroll:false,"aria-label":xe.t("Starred Items"),getPropsForItem:t.getAriaLabelForRow,isFocusableItem:t.isFocusableItem,onFocusEnter:t.onFocusEnter,onFocusLeave:t.onFocusLeave,onItemTabWithin:s})})}}]);return t}(r["PureComponent"]);Ue.displayName="StarredItemsList";Ue.defaultProps=Fe;var Be=function e(t){return{focusKey:Object(V["a"])(t)}};function qe(e){return{makeMessageSummary:function t(){return e(q["a"].apply(void 0,arguments))},makeFileSummary:function t(){return e(G["a"].apply(void 0,arguments))},setFocusKey:function t(a){return e(Object(K["a"])(a))}}}var Ge=Object(i["connect"])(Be,qe)(function(e){var t=e.refToForward,a=P()(e,["refToForward"]);return n.a.createElement(Ue,D()({ref:t},a))});var He=n.a.forwardRef(function(e,t){return n.a.createElement(Ge,D()({refToForward:t},e))});var We=new S["b"]("starred_items");var Ve={fetchStarsList:E["noop"],isLoading:false,starredItems:void 0,cursorMark:void 0};var Ke=function(e){O()(t,e);function t(e){var a;d()(this,t);a=v()(this,b()(t).call(this,e));Object(C["a"])(_()(a),["fetchMoreStarredItems","renderEmpty","focus","fetchStarredItems","onItemTabWithin"]);a.list=n.a.createRef();a.flexpane=n.a.createRef();a.requestStars=null;return a}m()(t,[{key:"componentDidUpdate",value:function e(t){var a=this.props,r=a.starredItems,n=a.cursorMark;!Object(E["isEmpty"])(t.starredItems)&&Object(E["isEmpty"])(r)&&n&&this.fetchStarredItems(n)}},{key:"onItemTabWithin",value:function e(){var t=this.flexpane.current;t&&t.setInitialActiveSection()}},{key:"fetchMoreStarredItems",value:function e(){var t=this.props,a=t.isLoading,r=t.cursorMark;if(a)return;if(!r)return;this.fetchStarredItems(r)}},{key:"fetchStarredItems",value:function e(t){var a=this;if(this.requestStars)return false;this.requestStars=this.props.fetchStarsList({exclude:"Ch,Gh,Dh",limit:20,cursor:t});return this.requestStars.finally(function(){a.requestStars=null})}},{key:"focus",value:function e(){var t=this.list.current;t&&t.focus()}},{key:"renderEmpty",value:function e(t){var a=t.isOffline;if(a)return n.a.createElement(I["a"],{title:We.t("Couldn\u2019t load your Starred Items"),description:We.t("Try again when you\u2019re online"),primaryActionText:We.t("Retry"),onClickPrimaryAction:this.fetchStarredItems});return n.a.createElement(I["a"],{imageUrl:cdn_url+"/80588/img/posts.png",imageUrl2x:cdn_url+"/80588/img/posts@2x.png",title:We.t("No starred items",{fallbackHash:"d46c3b7fbafdaa0aee845d35ce59b0d5f6de8b70"}),description:We.t("Star a message or file to save it here. Mark your to-dos, or save something for later \u2014 only you can see your starred items, so use them however you like!",{fallbackHash:"02f88652fff0da938a523c5543e133eefa38b085"})})}},{key:"render",value:function e(){var t=this;var a=We.t("Starred Items");return n.a.createElement(A["b"],{"aria-label":a,ref:this.flexpane,focus:this.focus,className:"p-starred_items_flexpane",isEmpty:Object(E["isEmpty"])(this.props.starredItems),isLoading:this.props.isLoading,renderBody:function e(){return n.a.createElement(He,{ref:t.list,fetchMoreItems:t.fetchMoreStarredItems,isLoading:t.props.isLoading,items:t.props.starredItems,onItemTabWithin:t.onItemTabWithin})},renderEmpty:this.renderEmpty,title:a,viewId:w["MESSAGE_CONTAINERS"].STARS_FLEXPANE,kbNavOrder:Object(T["a"])()?void 0:4.3})}}]);return t}(r["PureComponent"]);Ke.displayName="StarredItemsFlexpane";Ke.defaultProps=Ve;var ze=function e(t){return{isLoading:Object(j["getLoadingState"])(t),starredItems:Object(j["getAllStarredItems"])(t),totalPages:Object(j["getTotalPages"])(t),cursorMark:Object(j["getCursorMark"])(t)}};var Qe={fetchStarsList:function e(){return j["fetchStarsList"].apply(void 0,arguments)}};var Ye=Object(i["connect"])(ze,Qe)(Ke);var Je=Ye;var Xe=a(197);var Ze=function e(t,a){if(!t)throw new Error("mountStarredItemsFlexpane must be called with a teamId parameter");var r=Object(c["f"])(t);Object(l["a"])(n.a.createElement(i["Provider"],{store:r},n.a.createElement(Xe["a"],null,n.a.createElement(Je,null))),a)};var $e=function e(t){o.a.unmountComponentAtNode(t)};var et=a(52);Object(et["a"])("interop.mountStarredItemsFlexpane",Ze);Object(et["a"])("interop.unmountStarredItemsFlexpane",$e)},function(e,t,a){"use strict";var r=a(110);var n=a.n(r);var i=a(135);var s=a.n(i);var o=a(169);var l=a.n(o);var c=a(138);var u=a.n(c);var d=a(147);var p=a.n(d);var m=a(185);var h=a.n(m);var v=a(1);var f=a.n(v);var b=a(2);var g=a(13);var _=a.n(g);var y=a(0);var O=a(6);var k=a(30);var E=a(2186);var C=a(120);var S=a(877);var w=a(2727);var j=a(821);var I=a(3691);var T=new O["b"]("search");var A=function(e){h()(t,e);function t(){var e;n()(this,t);e=l()(this,u()(t).call(this));e.onChange=e.onChange.bind(p()(e));return e}s()(t,[{key:"onChange",value:function e(t){this.props.onChannelTypeChange({type:t.value})}},{key:"render",value:function e(){var t=this;var a=this.props.sharedTeams;var r="ready"===a.state&&a.teams.length>1;var n=["all","private","archived"];r&&n.push("shared");var i={all:T.t("All channels"),private:T.t("Private channels"),archived:T.t("Archived channels"),shared:T.t("Shared channels")};var s=n.map(function(e){return{label:i[e],value:e}});var o=s.find(function(e){return e.value===t.props.channelType});return f.a.createElement(j["a"],{key:s.toString(),width:"100%",selectId:"channel_filter_type",options:s,selectedOption:o,onOptionSelected:this.onChange})}}]);return t}(v["Component"]);A.displayName="ChannelsFilterChannelType";A.defaultProps={channelType:C["a"].all,sharedTeams:{state:"ready",teams:[]},onChannelTypeChange:b["noop"]};var N=a(2010);var P=a(2728);a.d(t,"a",function(){return D});var M=new O["b"]("search");var D=function(e){h()(t,e);function t(e){var a;n()(this,t);a=l()(this,u()(t).call(this,e));Object(k["a"])(p()(a),["onOnlySearchWorkspaceChange","onHideMemberChannelsChange","onChannelTypeChange","onSearchLimitTeamFilterDropdownChange"]);return a}s()(t,[{key:"componentDidMount",value:function e(){this.props.onMount()}},{key:"onChannelTypeChange",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.type;this.props.clogSearchFilterAdded({filter_channel_type:a});this.props.setType({type:a})}},{key:"onHideMemberChannelsChange",value:function e(t){t.target.checked?this.props.clogSearchFilterAdded({filter_other:"hide_my_channels"}):this.props.clogSearchFilterRemoved({filter_other:"hide_my_channels"});this.props.setChannelSearchHideMemberChannels({value:t.target.checked})}},{key:"onOnlySearchWorkspaceChange",value:function e(t){t.target.checked?this.props.clogSearchFilterAdded({filter_other:"workspace_only"}):this.props.clogSearchFilterRemoved({filter_other:"workspace_only"});this.props.setSearchOnlySearchWorkspace({value:t.target.checked})}},{key:"onSearchLimitTeamFilterDropdownChange",value:function e(t){this.props.searchOnlyByEnterpriseTeamId({value:t.value})}},{key:"renderPrefs",value:function e(){var t=this.props,a=t.showEnterpriseOptions,r=t.filterWorkspaceOnly,n=t.hideMemberChannels,i=t.currentTeam,s=t.featureSearchLimitTeamFilter,o=t.searchOnlyWorkspaceTeamId,l=t.selfEnterpriseOrgName,c=t.loggedInEnterpriseTeams;return f.a.createElement(f.a.Fragment,null,a&&s?f.a.createElement(S["a"],{title:M.t("Workspace"),"data-qa":"search-filter-workspace-section"},f.a.createElement("div",{className:"p-search_filter__select"},f.a.createElement(N["a"],{loggedInEnterpriseTeams:c,selfEnterpriseOrgName:l,searchOnlyWorkspaceTeamId:o,onChange:this.onSearchLimitTeamFilterDropdownChange,featureSearchLimitTeamFilter:s}))):null,f.a.createElement(S["a"],{title:M.t("More options")},a&&!s?f.a.createElement(P["a"],{currentTeam:i,filterWorkspaceOnly:r,checkOnlySearchWorkspace:this.onOnlySearchWorkspaceChange,featureSearchLimitTeamFilter:s}):null,f.a.createElement("label",{className:_()("p-search_filter__checkbox_label",{"p-search_filter__checkbox_label--selected":n}),htmlFor:this.props.namespace+"-channel-filter-hide-member-channels"},f.a.createElement("input",{type:"checkbox",checked:n,onChange:this.onHideMemberChannelsChange,id:this.props.namespace+"-channel-filter-hide-member-channels"}),M.t("Hide my channels")," ")))}},{key:"render",value:function e(){var t=this.props,a=t.channelType,r=t.sharedTeams,n=t.filters,i=t.filterSuggestions;return f.a.createElement("div",{className:"p-search_filters"},f.a.createElement(S["a"],{title:M.t("Channel type")},f.a.createElement("div",{className:"p-search_filter__select"},f.a.createElement(A,{sharedTeams:r,channelType:a,onChannelTypeChange:this.onChannelTypeChange}))),r.teams.length>0&&f.a.createElement(w["a"],{namespace:this.props.namespace,context:"channels",sharedTeams:r,filters:n,filterSuggestions:i,toggleSearchOrgFilter:this.props.toggleChannelSearchOrgFilter,clogSearchFilterAdded:this.props.clogSearchFilterAdded,clogSearchFilterRemoved:this.props.clogSearchFilterRemoved}),this.renderPrefs())}}]);return t}(v["Component"]);D.displayName="ChannelsFilterUIBase";D.defaultProps={channelType:C["a"].all,sharedTeams:{state:"ready",teams:[]},filters:[],filterSuggestions:[],clogSearchFilterAdded:b["noop"],clogSearchFilterRemoved:b["noop"],selfEnterpriseOrgName:"",loggedInEnterpriseTeams:[],searchOnlyByEnterpriseTeamId:b["noop"],setSearchOnlySearchWorkspace:b["noop"]}},function(e,t,a){"use strict";var r=a(196);var n=a.n(r);var i=a(110);var s=a.n(i);var o=a(135);var l=a.n(o);var c=a(169);var u=a.n(c);var d=a(138);var p=a.n(d);var m=a(147);var h=a.n(m);var v=a(185);var f=a.n(v);var b=a(0);var g=a(1);var _=a.n(g);var y=a(2);var O=a(30);var k=a(12);var E=a(757);var C=a(6);var S=a(292);var w=a(293);var j=a(323);var I=a(75);var T=a.n(I);var A=a(32);var N=a(11);var P=a(1063);var M=a(59);var D=a(1147);var x=a(21);var R=a(61);var F=a(34);var L=a(150);var U=a(1898);var B=a(1701);var q=a(23);var G=a(1220);var H=new C["b"]("search");var W={shouldShowOfflineNotice:false,shouldShowFeedbackLink:false};var V=function e(t){var a=t.shouldShowOfflineNotice,r=t.shouldShowFeedbackLink,n=t.onFeedbackClick;return(a||r)&&_.a.createElement("footer",null,_.a.createElement(B["a"],null,_.a.createElement("span",{className:"c-search_autocomplete__footer_offline_notice",id:"footer-instructions"},H.rt("{iconOffline} <strong>No connection.</strong> Search is not available while offline, and navigating to conversations may be limited.",{iconOffline:_.a.createElement(q["b"],{type:"cloud-offline",size:"inherit",className:"c-icon--inline"})}))),_.a.createElement(G["a"],{className:"c-search_autocomplete__footer_feedback",onClick:n}))};V.defaultProps=W;var K=V;var z=a(3670);var Q=new C["b"]("search");var Y=new C["b"]("view");var J={selectedIndex:null,onAccept:y["noop"],onDelete:y["noop"],onSelectedIndexChange:y["noop"],displayQuery:null,userQuery:null,telemeter:R["d"]};var X=function e(t,a){return(t%a+a)%a};var Z=function(e){f()(t,e);function t(e){var a;s()(this,t);a=u()(this,p()(t).call(this,e));Object(O["a"])(h()(a),["onKeydown","onUserQueryChange","onSuggestionAccept","onSuggestionDelete","onSuggestionSelected","onMouseLeaveList","onFeedbackClick"]);a.searchAutocompleteSuggestionsPromise=void 0;a.markAutocompleteRenderStart=Object(y["throttle"])(P["b"].bind(null,e.telemeter),2e3,{leading:true});a.populateChannelNameCounts();a.listRef=_.a.createRef();a.listItemRefs={};return a}l()(t,[{key:"componentDidMount",value:function e(){document.body.addEventListener("keydown",this.onKeydown);this.onUserQueryChange();Object(D["e"])(this.props.teamId);var t=Object(F["a"])()?"omniswitcher-open-sonic":"omniswitcher-open-legacy";this.props.telemeter.measureAndClear("omniswitcher-open-mark",t)}},{key:"shouldComponentUpdate",value:function e(t){return t.selectedIndex!==this.props.selectedIndex||t.suggestions!==this.props.suggestions||t.shouldShowOfflineNotice!==this.props.shouldShowOfflineNotice}},{key:"componentDidUpdate",value:function e(t){t.userQuery!==this.props.userQuery&&this.onUserQueryChange();this.populateChannelNameCounts()}},{key:"componentWillUnmount",value:function e(){document.body.removeEventListener("keydown",this.onKeydown)}},{key:"onFeedbackClick",value:function e(){this.props.openSearchFeedbackDialog({query:this.props.userQuery})}},{key:"onKeydown",value:function e(t){var a=function e(){t.preventDefault();t.stopPropagation();return false};var r=t.shiftKey;var n=t.which;var i=E["codes"].up,s=E["codes"].tab,o=E["codes"].down;if(!r&&n===i||r&&n===s){this.decrementSelectedIndex();return a()}if(!r&&n===o||n===s){this.incrementSelectedIndex();return a()}return true}},{key:"onMouseLeaveList",value:function e(){this.props.setSearchAutocompleteSelection({selectedIndex:null,setText:false})}},{key:"onSuggestionAccept",value:function e(){this.props.onAccept()}},{key:"onSuggestionDelete",value:function e(t){this.props.setSearchAutocompleteSuggestions({suggestions:Object(y["filter"])(this.props.suggestions,function(e){return t.key!==e.key})});this.props.onDelete()}},{key:"onSuggestionSelected",value:function e(t,a){this.props.setSearchAutocompleteSelection({selectedIndex:t,setText:!a})}},{key:"onUserQueryChange",value:function e(){Object(P["a"])(this.props.telemeter)}},{key:"getListItemRef",value:function e(t){this.listItemRefs[t]||(this.listItemRefs[t]=_.a.createRef());return this.listItemRefs[t]}},{key:"decrementSelectedIndex",value:function e(){var t=X(this.props.selectedIndex-1,this.props.suggestions.length);this.props.setSearchAutocompleteSelection({selectedIndex:t,setText:true});this.scrollToListItemIndex(t)}},{key:"incrementSelectedIndex",value:function e(){var t=this.props.suggestions&&this.props.suggestions[this.props.selectedIndex||0];if(t&&t.type===M["b"].QUERY&&t.suggestion_replacement!==this.props.displayQuery){this.props.setSearchAutocompleteSelection({selectedIndex:this.props.selectedIndex,setText:true});return}var a=X((null===this.props.selectedIndex?-1:this.props.selectedIndex)+1,this.props.suggestions.length);this.props.setSearchAutocompleteSelection({selectedIndex:a,setText:true});this.scrollToListItemIndex(a)}},{key:"populateChannelNameCounts",value:function e(){var t=this;this.channelNameCounts={};this.props.suggestions.forEach(function(e){e.is_type_channel&&(t.channelNameCounts[e.channel.name]=(t.channelNameCounts[e.channel.name]||0)+1)})}},{key:"propsForSuggestion",value:function e(t,a){var r=a.is_type_channel&&this.channelNameCounts[a.channel.name]>1;return{index:t,suggestion:a,key:a.key,isSelected:t===this.props.selectedIndex,onSelected:this.onSuggestionSelected,onAccept:this.onSuggestionAccept,onDelete:this.onSuggestionDelete,hasChannelNameCollision:r}}},{key:"scrollToListItemIndex",value:function e(t){if(!this.listRef||!this.listRef.current||!this.listItemRefs[t]||!this.listItemRefs[t].current)return;var a=this.listRef.current;if(0===t){a.scrollTop=0;return}var r=this.listItemRefs[t].current.getWrappedInstance?this.listItemRefs[t].current.getWrappedInstance():this.listItemRefs[t].current;var n=r.offsetTop-a.offsetTop;var i=n+r.offsetHeight;n<a.scrollTop&&(a.scrollTop=n);i>a.scrollTop+a.clientHeight&&(a.scrollTop=i-a.clientHeight)}},{key:"renderBlankSlate",value:function e(){var t=this;var a=this.props,r=a.shouldShowOfflineNotice,i=a.featureTinyspeck;var s=Object(y["some"])(this.props.suggestions,function(e){return e.is_type_query_history});var o=_.a.createElement("header",null,_.a.createElement("span",{className:"c-search_autocomplete__header_label"},_.a.createElement("span",{className:"c-search_autocomplete__header_label_text"},Q.t("Recent searches"))));var l=this.props.suggestions.map(function(e,a){return e.is_type_query_history&&_.a.createElement(U["a"],n()({listItemRef:t.getListItemRef(a)},t.propsForSuggestion(a,e)))});var c=Object(y["some"])(this.props.suggestions,function(e){return e.is_type_navigational});var u=_.a.createElement("header",null,_.a.createElement("span",{className:"c-search_autocomplete__header_label"},_.a.createElement("span",{className:"c-search_autocomplete__header_label_text"},Y.t("Unreads & drafts",{fallbackHash:"95ed8c1c63175388741df85c038e3dc99d8ac375"}))));var d=this.props.suggestions.map(function(e,a){return e.is_type_navigational&&_.a.createElement(U["a"],n()({listItemRef:t.getListItemRef(a)},t.propsForSuggestion(a,e)))});var p=this.renderScreenReaderWorkaround();var m=_.a.createElement(_.a.Fragment,null,c&&_.a.createElement("li",{role:"presentation"},u),d);var h=_.a.createElement(_.a.Fragment,null,s&&_.a.createElement("li",{role:"presentation"},o),l);return _.a.createElement("div",{className:"c-search_autocomplete"},p,_.a.createElement("ol",{ref:this.listRef,className:"c-search_autocomplete__suggestion_list",role:"listbox",id:"c-search_autocomplete__suggestion_list",onMouseLeave:this.onMouseLeaveList},m,h),_.a.createElement(K,{shouldShowFeedbackLink:i,shouldShowOfflineNotice:r,onFeedbackClick:this.onFeedbackClick}))}},{key:"renderScreenReaderWorkaround",value:function e(){var t=this;if(!(T.a.chrome&&T.a.version<67)||!Object(A["isSSB"])())return null;var a=this.props.selectedIndex;var r=Object(y["last"])(this.props.suggestions.map(function(e,r){return(e.is_type_navigational||e.is_type_action)&&r===a?_.a.createElement(U["a"],t.propsForSuggestion(r,e)):null}).filter(function(e){return e}));return _.a.createElement("div",{"aria-live":"polite",className:"offscreen"},r)}},{key:"render",value:function e(){var t=this;var a=this.props,r=a.shouldShowOfflineNotice,i=a.featureTinyspeck;var s=!this.props.userQuery;if(s)return this.renderBlankSlate();this.markAutocompleteRenderStart();var o=this.renderScreenReaderWorkaround();return _.a.createElement("div",{className:"c-search_autocomplete"},o,_.a.createElement("ol",{ref:this.listRef,className:"c-search_autocomplete__suggestion_list",role:"listbox",id:"c-search_autocomplete__suggestion_list",onMouseLeave:this.onMouseLeaveList},this.props.suggestions.map(function(e,a){return _.a.createElement(U["a"],n()({listItemRef:t.getListItemRef(a)},t.propsForSuggestion(a,e)))})),_.a.createElement(K,{shouldShowOfflineNotice:r,shouldShowFeedbackLink:i,onFeedbackClick:this.onFeedbackClick}))}}]);return t}(g["Component"]);Z.displayName="SearchAutocomplete";Z.defaultProps=J;var $=function e(t){return{suggestions:Object(w["getSearchAutocompleteSuggestions"])(t),selectedIndex:Object(w["getSearchAutocompleteSelectedIndex"])(t),userQuery:Object(S["getSearchInputBoxUserQuery"])(t),displayQuery:Object(S["getSearchInputBoxDisplayQuery"])(t),teamId:Object(x["b"])(t),telemeter:Object(R["c"])({state:t}),shouldShowOfflineNotice:Object(N["isFeatureEnabled"])(t,"feature_offline_mode")&&!Object(L["c"])(t),featureTinyspeck:Object(N["isFeatureEnabled"])(t,"feature_tinyspeck")}};var ee={setSearchAutocompleteSelection:function e(){return w["setSearchAutocompleteSelection"].apply(void 0,arguments)},setSearchAutocompleteSuggestions:function e(){return w["setSearchAutocompleteSuggestions"].apply(void 0,arguments)},fetchSearchAutocompleteSuggestions:function e(){return j["b"].apply(void 0,arguments)},openSearchFeedbackDialog:function e(){return j["l"].apply(void 0,arguments)}};var te=t["a"]=Object(k["connect"])($,ee)(Z)},function(e,t,a){"use strict";var r=a(110);var n=a.n(r);var i=a(135);var s=a.n(i);var o=a(169);var l=a.n(o);var c=a(138);var u=a.n(c);var d=a(147);var p=a.n(d);var m=a(185);var h=a.n(m);var v=a(6);var f=a(0);var b=a(1);var g=a.n(b);var _=a(495);var y=a(12);var O=a(2);var k=a(30);var E=a(23);var C=a(24);var S=a(292);var w=a(293);var j=a(1686);function I(e){var t=/<@([A-Z0-9a-z]+)\|([^>]+)>/g;return e.replace(t,function(e,t,a){var r=Object(O["unescape"])(a);return"<@"+t+"|"+r+">"})}var T=a(831);var A=a(3672);var N=a(1898);var P=new v["b"]("search");var M={autoFocus:false,queryIsUserGenerated:false,onBlur:O["noop"],onEnter:O["noop"],onEscape:O["noop"],onFocus:O["noop"],autocompleteSelectedIndex:void 0};var D=null;var x=0;var R=function(e){h()(t,e);function t(e){var a;n()(this,t);a=l()(this,u()(t).call(this,e));a.texty=null;Object(k["a"])(p()(a),["onClickClear","getTextyString","onEnter","onUserQueryChange","setTextyRef","updateDisplayQuery"]);a.queryHasChanged=false;a.queryHasBeeenSubmitted=false;a.onUserInput=Object(O["debounce"])(a.onUserInput,100);a.placeholderCopy=a.lazyInitializeShuffledPlaceholderCopy();return a}s()(t,[{key:"componentDidMount",value:function e(){var t=this.props,a=t.autoFocus,r=t.usePrimarySearch,n=t.isSearchAutocompleteOpen;if(a||r&&n){var i=window._searchAutocompleteCatch;if(i){delete window._searchAutocompleteCatch;var s=i.value;this.texty.value(this.texty.value()+s);i.parentNode.removeChild(i)}this.texty.setCursorAtEnd()}}},{key:"shouldComponentUpdate",value:function e(t){var a=this.props.usePrimarySearch&&t.isSearchAutocompleteOpen!==this.props.isSearchAutocompleteOpen;return a||this.props.displayQuery!==t.displayQuery||this.props.autocompleteSelectedIndex!==t.autocompleteSelectedIndex}},{key:"componentDidUpdate",value:function e(t){this.texty&&this.props.usePrimarySearch&&!t.isSearchAutocompleteOpen&&this.props.isSearchAutocompleteOpen&&this.texty.focus();this.props.queryIsUserGenerated||t.displayQuery===this.props.displayQuery||this.updateDisplayQuery()}},{key:"onClickClear",value:function e(){this.props.clearSearchInput();this.texty&&this.texty.focus()}},{key:"onEnter",value:function e(){if(null!==this.props.autocompleteSelectedIndex){this.queryHasBeeenSubmitted=true;this.onUserInput()}}},{key:"onUserInput",value:function e(){var t=this;if(this.queryHasChanged){this.queryHasChanged=false;this.props.searchInputChanged({textyString:this.getTextyString()}).then(function(){if(t.queryHasBeeenSubmitted){t.props.onEnter();t.queryHasBeeenSubmitted=false}})}else if(this.queryHasBeeenSubmitted){this.props.onEnter();this.queryHasBeeenSubmitted=false}}},{key:"onUserQueryChange",value:function e(){this.queryHasChanged=true;this.onUserInput()}},{key:"getTextyString",value:function e(){if(!this.texty)return this.props.displayQuery;return I(this.texty.value())}},{key:"setTextyRef",value:function e(t){var a=!!(t&&t.getWrappedInstance);this.texty=a?t.getWrappedInstance():t}},{key:"focusTexty",value:function e(){this.texty&&this.texty.focus()}},{key:"lazyInitializeShuffledPlaceholderCopy",value:function e(){var t=[P.t("Search for comments, asides, eurekas, and more"),P.t("Search for messages, replies, or even insightful asides"),P.t("Search for files, facts, figures, and stats"),P.t("Search for files, for people, for half-remembered fragments of conversation"),P.t("Search for a missing link"),P.t("Search for whatever; let\u2019s find it together"),P.t("Search discussions, directories, data, and more"),P.t("Search messages, files, around corners, under rugs, etc."),P.t("Search all across Slack"),P.t("Search far and wide"),P.t("Search high and low"),P.t("Search the Log of All Conversation and Knowledge"),P.t("Search because it\u2019s faster than scrolling"),P.t("Type what you want to search for. Slack will do the rest."),P.t("What do you want to search for today?"),P.t("Surely that\u2019s around here somewhere\u2026"),P.t("You\u2019re digging in the right place"),P.t("Input search. Beep boop."),P.t("Search for something. Anything. You have the window open now anyway."),P.t("Delve into your archives, seize upon the answers. Rejoice.")];null===D&&(D=Object(O["shuffle"])(t.map(function(e,t){return t})));x=(x+1)%D.length;return t[D[x]]}},{key:"updateDisplayQuery",value:function e(){this.texty&&this.props.displayQuery!==this.getTextyString()&&this.texty.value(this.props.displayQuery)}},{key:"render",value:function e(){var t=P.t("Search");var a={tabcomplete:{completers:[]}};var r=this.props.displayQuery?"c-search__input_box__clear":"c-search__input_box__clear c-search__input_box__clear__hidden";var n="number"===typeof this.props.autocompleteSelectedIndex?Object(N["b"])(this.props.autocompleteSelectedIndex):void 0;var i={autocomplete:"list",owns:"c-search_autocomplete__suggestion_list",expanded:true,activedescendant:n};var s;s=this.placeholderCopy?this.placeholderCopy:P.t("Search messages, files, and channels",{fallbackHash:"2c741ca32c78642194b2b88f355b5ebb8d3ea849"});return g.a.createElement("div",{className:"c-search__input_box","data-qa":"search_input_box"},g.a.createElement(E["b"],{type:"search-medium",className:"c-search__input_box__icon"}),g.a.createElement(_["g"],{className:"c-search__input_box__input",modules:a,ref:this.setTextyRef,ariaLabel:t,ariaDescribedBy:"footer-instructions",unsafeAriaProps:i,initialText:this.props.displayQuery,placeholder:s,onFocus:this.props.onFocus,onBlur:this.props.onBlur,onEnter:this.onEnter,onTextChange:this.onUserQueryChange,onEscape:this.props.onEscape,isSingleLine:true,focusOnMount:this.props.autoFocus,isJumbomojiEnabled:false,showMentionTooltips:false,enableBroadcastKeywords:false,useFocusRing:false,"data-qa":"focusable_search_input"}),g.a.createElement(C["c"],{className:r,onClick:this.onClickClear,label:P.t("Clear"),"data-qa":"search_input_clear"},P.t("Clear")))}}]);return t}(b["Component"]);R.displayName="SearchInputBox";R.defaultProps=M;var F=function e(t){return{usePrimarySearch:Object(T["a"])(t),isSearchAutocompleteOpen:Object(w["isSearchAutocompleteOpen"])(t),displayQuery:Object(S["getSearchInputBoxDisplayQuery"])(t),queryIsUserGenerated:Object(S["getSearchInputBoxQueryIsUserGenerated"])(t),autocompleteSelectedIndex:Object(w["getSearchAutocompleteSelectedIndex"])(t)}};var L={searchInputChanged:function e(){return S["searchInputChanged"].apply(void 0,arguments)},clearSearchInput:function e(){return j["a"].apply(void 0,arguments)}};var U=t["a"]=Object(y["connect"])(F,L,null,{withRef:true})(R)},,,,function(e,t,a){"use strict";var r=a(1);var n=a.n(r);var i=a(39);var s=a(18);var o=a(11);var l=a(88);var c=a.n(l);var u=a(110);var d=a.n(u);var p=a(135);var m=a.n(p);var h=a(169);var v=a.n(h);var f=a(138);var b=a.n(f);var g=a(147);var _=a.n(g);var y=a(185);var O=a.n(y);var k=a(12);var E=a(2);var C=a(0);var S=a(6);var w=a(30);var j=a(44);var I=a(253);var T=a(152);var A=a(1025);var N=a(104);var P=a(35);var M=a(14);var D=new S["b"]("contextual_shortcuts");var x={showKeyboardShortcuts:E["noop"],featureContextualMessageShortcuts:false,closeModal:E["noop"]};var R=function(e){O()(t,e);function t(e){var a;d()(this,t);a=v()(this,b()(t).call(this,e));a.state={isOpen:true};Object(w["a"])(_()(a),["closeModal","openShortcutsPanel"]);return a}m()(t,[{key:"componentDidMount",value:function e(){var t;this.props.clogger.track(M["EventId"].CLIENT_KEYBOARD_SHORTCUTS,{contexts:c()({},M["ClientEventKeys"].ui_context,(t={},c()(t,M["UiContextKeys"].action,M["UiAction"].KEYDOWN),c()(t,M["UiContextKeys"].step,M["UiStep"].CONTEXTUAL_SHORTCUTS_EDUCATION),c()(t,M["UiContextKeys"].ui_properties,c()({},M["UiPropertiesKeys"].element_type,M["ElementType"].MODAL)),t))})}},{key:"closeModal",value:function e(){this.setState(function(){return{isOpen:false}});this.props.closeModal()}},{key:"openShortcutsPanel",value:function e(t){var a=null;var r=t&&t.nativeEvent&&!t.nativeEvent.detail;r&&(a="keyboard_shortcuts-message_shortcuts");this.props.showKeyboardShortcuts({focusKey:a});this.closeModal()}},{key:"render",value:function e(){var t=this.props.featureContextualMessageShortcuts;if(!t)return null;var a=D.t("Keyboard shortcuts for messages");var r=n.a.createElement(T["a"],{onClick:this.openShortcutsPanel},D.t("full list of shortcuts"));return n.a.createElement(j["a"],{isOpen:this.state.isOpen,centered:true,fullscreen:false,closeModal:this.closeModal},n.a.createElement(j["h"],null,n.a.createElement(j["j"],{title:a})),n.a.createElement(j["d"],null,n.a.createElement(j["e"],null,n.a.createElement("div",{className:"margin_bottom_100"},D.rt("Now when you select a message with {f6_key} or the {up_arrow_key}{down_arrow_key} keys, you can use shortcuts to take different actions on it. Try these helpful shortcuts for taking different actions on messages:",{f6_key:n.a.createElement(A["a"],{label:"F6",slim:true}),up_arrow_key:n.a.createElement(A["a"],{label:"\u2191",slim:true}),down_arrow_key:n.a.createElement(A["a"],{label:"\u2193",slim:true})})),n.a.createElement("ul",{className:"no_bullets margin_left_0"},n.a.createElement("li",{className:"margin_bottom_50"},D.rt("{shortcut} to add an emoji reaction",{shortcut:n.a.createElement(A["a"],{label:"R",className:"nudge_bottom_1"})})),n.a.createElement("li",{className:"margin_bottom_50"},D.rt("{shortcut} to edit one of your messages",{shortcut:n.a.createElement(A["a"],{label:"E",className:"nudge_bottom_1"})})),n.a.createElement("li",{className:"margin_bottom_50"},D.rt("{right_shortcut} or {t_shortcut} to open a thread",{right_shortcut:n.a.createElement(A["a"],{label:"\u2192",className:"nudge_bottom_1"}),t_shortcut:n.a.createElement(A["a"],{label:"T",className:"nudge_bottom_1"})})),n.a.createElement("li",{className:"margin_bottom_50"},D.rt("{shortcut} from an empty text input to start navigating to messages",{shortcut:n.a.createElement(A["a"],{label:"\u2191",className:"nudge_bottom_1"})}))),n.a.createElement("div",null,D.rt("Check out the {keyboardShortcutsLink}.",{keyboardShortcutsLink:r})))),n.a.createElement(j["f"],null,n.a.createElement(j["g"],null,n.a.createElement(I["c"],{onClick:this.openShortcutsPanel},D.t("OK")))))}}]);return t}(n.a.Component);R.displayName="ContextualShortcutsModal";R.defaultProps=x;var F=function e(t){return{featureContextualMessageShortcuts:Object(o["isFeatureEnabled"])(t,"feature_contextual_message_shortcuts"),featureAppViewsReminders:Object(o["isFeatureEnabled"])(t,"feature_app_views_reminders"),clogger:Object(P["a"])({state:t})}};var L=function e(t){return{showKeyboardShortcuts:function e(){return t(N["i"].apply(void 0,arguments))},closeModal:function e(){return t(i["closeModal"].apply(void 0,arguments))}}};var U=Object(k["connect"])(F,L)(R);var B=Object(s["b"])("Open the contextual message shortcuts modal",function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var a=t();var r=Object(o["isFeatureEnabled"])(a,"feature_contextual_message_shortcuts");if(!r)return;e(Object(i["openModal"])({element:n.a.createElement(U,null)}))});B.meta={name:"openContextualMessageShortcutsModal",key:"actionsUiOpenContextualMessageShortcutsModalOpenContextualMessageShortcutsModal",description:"Open the contextual message shortcuts modal"};var q=t["a"]=B},function(e,t,a){"use strict";var r=a(88);var n=a.n(r);var i=a(110);var s=a.n(i);var o=a(135);var l=a.n(o);var c=a(169);var u=a.n(c);var d=a(138);var p=a.n(d);var m=a(147);var h=a.n(m);var v=a(185);var f=a.n(v);var b=a(1);var g=a.n(b);var _=a(0);var y=a(12);var O=a(2);var k=a.n(O);var E=a(30);var C=a(13);var S=a.n(C);var w=a(102);var j=a(14);var I=a(35);var T=a(298);var A=a(563);var N=a(11);var P=a(129);var M=a(20);var D=a(73);var x=a(448);var R=a(1337);var F=a(150);var L=a(1153);var U=a(1318);var B=a(1644);var q=a(1316);var G=a(90);var H=a(2742);var W=a(32);var V=a(1025);var K=a(2707);var z=a(41);var Q=a(62);var Y=a(787);var J=a(257);var X=a(6);var Z=a(34);var $=a(1053);var ee=a(28);var te=Object(ee["b"])("TS.replies.promiseToGetSubscriptionState",function(){return Promise.resolve()});var ae=Object(ee["b"])("TS.replies.setSubscriptionState");var re=Object(ee["b"])("TS.replies.getSubscriptionState");var ne=Object(ee["b"])("TS.replies.canReplyToMsg");var ie=Object(ee["b"])("TS.replies.requestOfflineThread");var se=Object(ee["b"])("TS.replies.dispatchThreadSyncedSig");var oe=a(419);var le=a(1213);var ce=a(2001);var ue=a(2002);var de=a(892);var pe=a(22);var me=a(39);var he=a(57);var ve=a(4961);var fe=a(250);var be=a(2751);var ge=a(1858);var _e=a(1294);var ye=new X["b"]("message");var Oe={reactionKey:null,fileId:null,fileIds:null,comment:null,replies:[],replyCount:0,ts:null,rollup:void 0,threadTs:null,channel:null,file:null,subtype:null,channelId:null,theme:"light",isStarred:false,isPinned:false,isEphemeral:false,isFileAuthorExternal:false,isReply:false,canUserReplyToMessage:false,messageContainerType:pe["MESSAGE_CONTAINERS"].MESSAGE_PANE,editHandler:k.a.noop,unreadHandler:k.a.noop,onMenuOpen:k.a.noop,onMenuClose:k.a.noop,onEmojiPickerOpen:k.a.noop,onEmojiPickerClose:k.a.noop,showComment:true,showShare:true,showReact:true,showJump:false,showStar:true,showMoreActions:true,canEditMessage:false,canPin:false,canMarkUnread:false,canAddReminder:false,canDeleteMessage:false,changeReactionFromUserAction:k.a.noop,pinMessage:k.a.noop,unpinMessage:k.a.noop,updateStar:k.a.noop,renderMenuBelowTrigger:true,openModal:k.a.noop,showThreadOrRefresh:k.a.noop,addReminderForMessage:k.a.noop,openShareDialog:k.a.noop,jumpToMessage:k.a.noop,featureOfflineMode:false,wasRecentlyOnline:false,featureSonicEmoji:false,clogLinkClick:k.a.noop,clogThreadEvent:k.a.noop,featureContextualMessageShortcuts:false,parentId:void 0,featureAppViewsReminders:false,featureMessageActionsRefresh:false,setViewContextToRestoreFocus:k.a.noop,completedMessageAction:k.a.noop,featureDangerouslyGuardIATranslations:false,togglePinWithUnpinConfirmation:k.a.noop,featureMessageKitInMessagePane:false};var ke={x:0,y:-8};var Ee={x:4,y:-16};var Ce={x:50,y:0};var Se={EDIT:["e"],REACT:["r"],COMMENT:["t"],PIN:["p"],SHARE:["s"],STAR:["a"],MARK_UNREAD:["u"],REMIND:["m"],DELETE:["Delete","del","backspace"]};var we=function(e){f()(t,e);function t(e){var a;s()(this,t);a=u()(this,p()(t).call(this,e));a.state={moreActionsMenuOpen:false,subscribed:"loading",shouldReturnFocusAfterEmojiPickerClose:true,ariaLiveMessage:void 0};Object(E["a"])(h()(a),["onAddReaction","onEmojiSelected","onEmojiPickerClose","onComment","onCopyLink","onDelete","onEdit","onMarkUnread","onMenuSelectAction","onMoreActionsMenuClose","onMoreActionsMenuOpen","onPin","onRemind","onRemoveBroadcast","onShare","onStar","onJump","onSubscribe","renderMoreActionsMenu","onMenuKeyDown","restoreFocusInTheFuture","restoreFocusImmediately","onEscapeKey"]);a.reactionBtnRef=g.a.createRef();return a}l()(t,[{key:"componentDidMount",value:function e(){var t=this.props.featureContextualMessageShortcuts;t&&this.bindContextualShortcuts()}},{key:"componentDidUpdate",value:function e(t,a){var r=this.props.featureContextualMessageShortcuts;var n=this.state.ariaLiveMessage;r&&a.ariaLiveMessage!==n&&n&&this.eventuallyRemoveAriaLiveMessage()}},{key:"componentWillUnmount",value:function e(){var t=this.props.featureContextualMessageShortcuts;if(t){this.unbindContextualShortcuts();this.timerId&&clearTimeout(this.timerId)}}},{key:"onAddReaction",value:function e(t){if(!this.props.reactionKey)return;Object($["a"])({e:t,rxn_key:this.props.reactionKey});this.trackAction(j["UiElement"].ADD_REACTION_BUTTON)}},{key:"onComment",value:function e(t){if(!this.canCommentOnMessage())return;var a=false;if(this.props.featureContextualMessageShortcuts&&t&&"keydown"===t.type){if(t.target!==t.currentTarget)return;t.stopPropagation();a=true;this.trackShortcut(Se.COMMENT[0])}var r=this.props.threadTs||this.props.ts;this.props.showThreadOrRefresh({channelId:this.props.channel.id,threadTs:r,requestFocus:a});var n=this.state.subscribed?j["UiElement"].REPLY_TO_THREAD_BUTTON:j["UiElement"].START_A_THREAD_BUTTON;this.trackAction(n)}},{key:"onCopyLink",value:function e(){var t=this.props,a=t.channel,r=t.ts,n=t.threadTs,i=t.file,s=t.subtype;var o=Object(oe["a"])(a.id,r,n);i&&"file_comment"!==s&&(o=i.permalink);Object(J["writeText"])(o);this.trackAction(j["UiElement"].COPY_LINK_BUTTON,true)}},{key:"onDelete",value:function e(t){if(!this.props.canDeleteMessage)return;if(this.props.featureContextualMessageShortcuts&&t&&"keydown"===t.type){if(t.target!==t.currentTarget)return;t.stopPropagation();this.restoreFocusInTheFuture();this.trackShortcut(Se.DELETE[0])}var a=this.props,r=a.channelId,n=a.ts,i=a.messageContainerType;this.props.openModal({element:g.a.createElement(ue["a"],{channelId:r,ts:n,viewContext:i})});this.trackAction(j["UiElement"].DELETE_MESSAGE_BUTTON,true)}},{key:"onEdit",value:function e(t){if(!this.props.canEditMessage)return;if(this.props.featureContextualMessageShortcuts&&t&&"keydown"===t.type&&"Enter"!==t.key){if(t.target!==t.currentTarget)return;t.stopPropagation();this.restoreFocusInTheFuture();this.trackShortcut(Se.EDIT[0])}this.props.onMenuClose();this.props.editHandler();t.stopPropagation();this.trackAction(j["UiElement"].EDIT_MESSAGE_BUTTON,true)}},{key:"onEmojiPickerClose",value:function e(t){this.state.shouldReturnFocusAfterEmojiPickerClose||this.setState(function(){return{shouldReturnFocusAfterEmojiPickerClose:true}});this.props.featureContextualMessageShortcuts&&this.dispatchActionMessageCompleted();this.props.onEmojiPickerClose(t)}},{key:"onEmojiSelected",value:function e(t,a){var r=this.props.reactionKey;this.props.changeReactionFromUserAction({key:r,name:a})}},{key:"onEscapeKey",value:function e(t){t.stopPropagation();this.dispatchActionMessageCompleted({focusOnInput:true})}},{key:"onJump",value:function e(){var t=this.props,a=t.channel,r=t.ts,n=t.isReply,i=t.clogLinkClick;var s=this.props.threadTs||this.props.ts;this.props.jumpToMessage({channelId:a&&a.id,ts:r,threadTs:n&&s});this.props.messageContainerType===pe["MESSAGE_CONTAINERS"].THREADS_VIEW&&i("OPEN_IN_CHANNEL")}},{key:"onMarkUnread",value:function e(t){if(!this.props.canMarkUnread)return;if(this.props.featureContextualMessageShortcuts&&t&&"keydown"===t.type){if(t.target!==t.currentTarget)return;t.stopPropagation();this.trackShortcut(Se.MARK_UNREAD[0])}this.props.featureMessageKitInMessagePane?this.props.unreadHandler({channel:this.props.channel.id,ts:this.props.ts}):this.props.unreadHandler({channelId:this.props.channel.id,unreadTs:this.props.ts});this.props.featureContextualMessageShortcuts&&this.setState(function(){return{ariaLiveMessage:ye.t("Conversation marked as unread from this message")}});this.trackAction(j["UiElement"].MARK_UNREAD_BUTTON,true)}},{key:"onMenuKeyDown",value:function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=a.isCurrentItemSubmenu,n=void 0!==r&&r,i=a.closeMenu,s=void 0===i?k.a.noop:i;if(!this.props.featureContextualMessageShortcuts)return;switch(t.key){case Se.EDIT[0]:this.onEdit(t);s(t);break;case Se.PIN[0]:this.onPin(t);s(t);break;case Se.MARK_UNREAD[0]:this.onMarkUnread(t);s(t);break;case Se.SHARE[0]:this.onShare(t);s(t);break;case Se.DELETE[0]:case Se.DELETE[1]:this.onDelete(t);break;case Se.DELETE[2]:if(!Object(W["isMac"])())break;this.onDelete(t);s(t);break;case Se.REMIND[0]:if(!n||!this.props.featureAppViewsReminders)return;this.restoreFocusInTheFuture();this.trackShortcut(Se.REMIND[0]);this.onRemind("Custom")();s(t);break;default:break}}},{key:"onMenuSelectAction",value:function e(t,a){if(a.id===pe["SLACK_ACTION_IDS"].editMessage){this.onEdit(t);return true}return false}},{key:"onMoreActionsMenuClose",value:function e(){this.setState(function(){return{moreActionsMenuOpen:false}});this.props.onMenuClose()}},{key:"onMoreActionsMenuOpen",value:function e(){this.setState(function(){return{moreActionsMenuOpen:true}});this.props.onMenuOpen();this.trackAction(j["UiElement"].MORE_ACTIONS_BUTTON)}},{key:"onPin",value:function e(t){if(!this.props.canPin)return;var a=this.props,r=a.ts,n=a.channel,i=a.isPinned,s=a.pinMessage,o=a.unpinMessage,l=a.messageContainerType,c=a.featureContextualMessageShortcuts;if(c&&t&&"keydown"===t.type){if(t.target!==t.currentTarget)return;t.stopPropagation();this.trackShortcut(Se.PIN[0]);i?this.restoreFocusInTheFuture():this.restoreFocusImmediately()}if(c)this.props.togglePinWithUnpinConfirmation({ts:r,channelId:n.id,viewContext:l});else if(i){o({ts:r,channelId:n.id});this.trackAction(j["UiElement"].UNPIN_FROM_THIS_CONVERSATION_BUTTON,true)}else{s({ts:r,channelId:n.id});this.trackAction(j["UiElement"].PIN_TO_THIS_CONVERSATION_BUTTON,true)}}},{key:"onRemind",value:function e(t){var a=this;var r=this.props,n=r.channel,i=r.ts,s=r.subtype,o=r.messageContainerType,l=r.featureContextualMessageShortcuts;this.trackAction(j["UiElement"].REMIND_ME_BUTTON,true);return function(){a.props.addReminderForMessage({time:t,message_channel:n.id,message_ts:i,respond_in_channel:"thread_broadcast"===s,viewContext:o,featureContextualMessageShortcuts:l})}}},{key:"onRemoveBroadcast",value:function e(){var t=this.props,a=t.channelId,r=t.ts;this.props.openModal({element:g.a.createElement(ce["a"],{channelId:a,ts:r})});this.trackAction(j["UiElement"].REMOVE_FROM_CONVERSATION_BUTTON,true)}},{key:"onShare",value:function e(t){if(!this.canShareMessage())return;if(this.props.featureContextualMessageShortcuts&&t&&"keydown"===t.type){if(t.target!==t.currentTarget)return;t.stopPropagation();this.restoreFocusInTheFuture();this.trackShortcut(Se.SHARE[0])}var a=this.props,r=a.ts,n=a.channelId,i=a.fileId,s=a.messageContainerType;this.props.fileId&&"file_comment"!==this.props.subtype?this.props.openShareDialog({fileId:i,initialChannelId:n,viewContext:s}):this.props.openShareDialog({ts:r,channelId:n,viewContext:s});this.trackAction(j["UiElement"].SHARE_MESSAGE_BUTTON)}},{key:"onStar",value:function e(t){if(!this.canStarMessage())return;if(this.props.featureContextualMessageShortcuts&&t&&"keydown"===t.type){if(t.target!==t.currentTarget)return;t.stopPropagation();this.restoreFocusImmediately()}var a=this.props,r=a.channelId,n=a.ts,i=a.fileId,s=a.fileIds,o=a.comment,l=a.subtype,c=a.isStarred;var u={channel:r,timestamp:n};i&&(u={file:i});if(o&&"file_comment"===l){var d=s&&s[0]||i;u={file_comment:o,file_comment_file:d}}this.props.updateStar(!c,u);var p=c?j["UiElement"].UNSTAR_MESSAGE_BUTTON:j["UiElement"].STAR_MESSAGE_BUTTON;this.trackAction(p);n&&Object(Z["a"])()&&this.clogMsgStarClick()}},{key:"onSubscribe",value:function e(){var t=this.props,a=t.replies,r=t.ts,n=t.channel;var i=this.state.subscribed;var s=a.length&&a[a.length-1].ts;ae(n.id,r,!i,s);var o=i?j["UiElement"].UNFOLLOW_MESSAGE_BUTTON:j["UiElement"].FOLLOW_MESSAGE_BUTTON;this.trackAction(o,true)}},{key:"getContextualShortcutCommands",value:function e(){var t=this;var a=[];a.push({keys:Se.EDIT,handler:this.onEdit,action:"keydown"});a.push({keys:Se.REACT,handler:function e(a){if(a.target!==a.currentTarget)return;a.stopPropagation();a.preventDefault();if(t.reactionBtnRef&&t.reactionBtnRef.current){t.setState(function(){return{shouldReturnFocusAfterEmojiPickerClose:false}});t.restoreFocusInTheFuture();t.reactionBtnRef.current.click();t.trackShortcut(Se.REACT[0])}},action:"keydown"});a.push({keys:Se.COMMENT,handler:this.onComment,action:"keydown"});a.push({keys:Se.PIN,handler:this.onPin,action:"keydown"});a.push({keys:Se.SHARE,handler:this.onShare,action:"keydown"});a.push({keys:Se.STAR,handler:this.onStar,action:"keydown"});a.push({keys:Se.MARK_UNREAD,handler:this.onMarkUnread,action:"keydown"});a.push({keys:Se.REMIND,handler:function e(a){if(a.target!==a.currentTarget||!t.props.canAddReminder||!t.props.featureAppViewsReminders)return;a.stopPropagation();t.restoreFocusInTheFuture();t.onRemind("Custom")();t.trackShortcut(Se.REMIND[0])},action:"keydown"});a.push({keys:Se.DELETE,handler:this.onDelete,action:"keydown"});this.props.messageContainerType!==pe["MESSAGE_CONTAINERS"].UNREAD_VIEW&&a.push({keys:"esc",handler:this.onEscapeKey,action:"keydown"});return a}},{key:"getTooltipFocusText",value:function e(t,a){if(!this.props.featureContextualMessageShortcuts)return t;return g.a.createElement(g.a.Fragment,null,t," ",g.a.createElement("br",null),ye.rt('<span class="c-message_actions__button-hover--text">Press</span> {keyShortcut}',{keyShortcut:g.a.createElement(V["a"],{label:a,tooltip:true})}))}},{key:"getType",value:function e(){var t=this.props,a=t.fileId,r=t.subtype;if(!a)return"message";if("file_comment"===r)return"file comment";return"file"}},{key:"eventuallyRemoveAriaLiveMessage",value:function e(){var t=this;this.timerId&&clearTimeout(this.timerId);this.timerId=setTimeout(function(){t.setState(function(){return{ariaLiveMessage:void 0}});t.timerId=null},3e3)}},{key:"bindContextualShortcuts",value:function e(){var t=this.props.parentId;if(t){var a=document.getElementById(t);if(a){this.keyCommands=new fe["a"](a);this.keyCommands.bindAll(this.getContextualShortcutCommands())}}}},{key:"canCommentOnMessage",value:function e(){var t=this.props,a=t.replyCount,r=t.subtype,n=t.isEphemeral,i=t.canUserReplyToMessage;var s=a||"thread_broadcast"===r;if(this.props.isFileAuthorExternal)return false;if(this.isAutomated()||this.isTemp()||n)return false;if(!i&&!s)return false;return true}},{key:"canShareMessage",value:function e(){var t=this.props,a=t.ts,r=t.subtype,n=t.isEphemeral;if(n||"tombstone"===r||Object(z["isTempTs"])(a))return false;if("file_comment"===r)return false;return true}},{key:"canStarMessage",value:function e(){var t=this.props,a=t.subtype,r=t.isStarred,n=t.isEphemeral;if(n||"tombstone"===a&&!r)return false;return true}},{key:"clogMsgStarClick",value:function e(){var t=this.props,a=t.channelId,r=t.isStarred,n=t.messageContainerType,i=t.threadTs,s=t.clogger,o=t.clogThreadEvent;var l=r?j["EventId"].STAR_REMOVE_CLICKED:j["EventId"].STAR_ADD_CLICKED;var c={channel_id:a,parent_message_id:i};n===pe["MESSAGE_CONTAINERS"].THREADS_VIEW?o({event:l,metadata:c}):s.track(l,c)}},{key:"dispatchActionMessageCompleted",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.focusOnInput,r=void 0!==a&&a;if(!this.props.featureContextualMessageShortcuts)return;var n=this.props,i=n.messageContainerType,s=n.channelId,o=n.ts;this.props.completedMessageAction({viewContext:i,channelId:s,ts:o,focusOnInput:r})}},{key:"isAutomated",value:function e(){return Object(Y["a"])(this.props.subtype)}},{key:"isTemp",value:function e(){return this.props.ts.indexOf("x")>-1}},{key:"makeAriaLabelForShortcutKey",value:function e(t,a){if(!this.props.featureContextualMessageShortcuts)return t;return t+" "+ye.t("Press {key}",{key:a})}},{key:"restoreFocusImmediately",value:function e(){if(!this.props.featureContextualMessageShortcuts)return;this.props.setViewContextToRestoreFocus(this.props.messageContainerType);this.dispatchActionMessageCompleted()}},{key:"restoreFocusInTheFuture",value:function e(){if(!this.props.featureContextualMessageShortcuts)return;this.props.setViewContextToRestoreFocus(this.props.messageContainerType)}},{key:"trackAction",value:function e(t){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var r={action:j["UiAction"].CLICK,ui_element:t};a&&(r.step=j["UiStep"].MORE_ACTIONS_MENU);var n=this.props.clogger;n.track(j["EventId"].MSG_ACTION,{contexts:{ui_context:r}})}},{key:"trackShortcut",value:function e(t){var a=this.props,r=a.clogger,i=a.featureContextualMessageShortcuts,s=a.messageContainerType;if(i){var o,l;r.track(j["EventId"].CLIENT_KEYBOARD_SHORTCUTS,{contexts:n()({},j["ClientEventKeys"].ui_context,(l={},n()(l,j["UiContextKeys"].action,j["UiAction"].KEYDOWN),n()(l,j["UiContextKeys"].ui_properties,(o={},n()(o,j["UiPropertiesKeys"].key,t),n()(o,j["UiPropertiesKeys"].view_context,s),o)),l))})}}},{key:"unbindContextualShortcuts",value:function e(){if(this.keyCommands){this.keyCommands.reset();this.keyCommands=null}}},{key:"renderAriaLabelForStar",value:function e(){var t=this.props.featureDangerouslyGuardIATranslations;var a=this.getType();var r={file:t?ye.t("Save"):ye.t("Star file"),"file comment":t?ye.t("Save"):ye.t("Star file comment"),message:t?ye.t("Save"):ye.t("Star message")};return r[a]}},{key:"renderComment",value:function e(){var t=this.props,a=t.replyCount,r=t.subtype,n=t.canUserReplyToMessage,i=t.messageContainerType,s=t.featureOfflineMode,o=t.wasRecentlyOnline,l=t.showComment;if(!l||!this.canCommentOnMessage())return null;var c=a||"thread_broadcast"===r;var u;if(i===pe["MESSAGE_CONTAINERS"].THREADS_VIEW)u=ye.t("View thread in sidebar");else if(!n&&c)u=ye.t("View thread");else if(c){u=ye.t("Reply to thread");s&&!o&&(u=g.a.createElement(de["a"],{tooltipLabel:u}))}else{u=ye.t("Start a thread");s&&!o&&(u=g.a.createElement(de["a"],{tooltipLabel:u}))}var d=this.props.featureContextualMessageShortcuts?ye.t("T"):"";var p=this.getTooltipFocusText(u,d);return g.a.createElement(_e["a"],{iconType:this.props.featureMessageActionsRefresh?"comment-alt":"small-reply",label:function e(t){var a=t.hasKeyboardFocus;return a?p:u},ariaLabel:this.makeAriaLabelForShortcutKey(u,d),onClick:this.onComment,ariaHasPopup:null,"data-qa":"start_thread",shortcutKey:this.props.featureContextualMessageShortcuts?Se.COMMENT[0]:null})}},{key:"renderEllipsis",value:function e(){var t=this.props,a=t.renderMenuBelowTrigger,r=t.channel,n=t.featureOfflineMode,i=t.featureMessageActionsRefresh,s=t.wasRecentlyOnline,o=t.showMoreActions;if(!r||!o)return null;var l=ye.t("More actions",{fallbackHash:"3a91b1007dce1af87db6afdb266966dd5d7a3df1"});n&&!s&&(l=g.a.createElement(de["a"],{tooltipLabel:ye.t("More actions")}));return g.a.createElement(he["e"],{renderMenu:this.renderMoreActionsMenu,position:a?"right-bottom":"top-right",allowanceX:a?Ce.x:0,offsetX:a?Ee.x:ke.x,offsetY:a?Ee.y:ke.y,onOpen:this.onMoreActionsMenuOpen,onClose:this.onMoreActionsMenuClose},g.a.createElement(_e["a"],{iconType:i?"vertical-ellipsis":"small-ellipsis",label:l,tooltipPosition:"top-right","data-qa":"more_message_actions"}))}},{key:"renderJump",value:function e(){if(!this.props.showJump)return null;if(!this.props.channel)return null;var t=ye.t("Jump");this.props.messageContainerType!==pe["MESSAGE_CONTAINERS"].THREADS_VIEW&&this.props.messageContainerType!==pe["MESSAGE_CONTAINERS"].THREADS_FLEXPANE||(t=ye.t("Open in channel",{fallbackHash:"1eba140fdd9c6860a1730c408e3064aa417ca2a3"}));return g.a.createElement(_e["a"],{iconType:"jump",label:t,onClick:this.onJump,"data-qa":"jump_to_message"})}},{key:"renderMoreActionsMenu",value:function e(t){var a=this.props,r=a.channel,n=a.ts,i=a.threadTs,s=a.messageContainerType,o=a.rollup;var l=t.onTriggerClose,c=t.onMenuItemSelected;return g.a.createElement(ve["a"],{rollup:o,ts:n,threadTs:i,channelId:r.id,onSelectAction:this.onMenuSelectAction,onTriggerClose:l,onMenuItemSelected:c,messageContainerType:s,onMenuKeyDown:this.onMenuKeyDown})}},{key:"renderReaction",value:function e(){if(!this.props.showReact)return null;if("tombstone"===this.props.subtype||this.props.isEphemeral)return null;if("file_comment"===this.props.subtype)return null;var t=ye.t("Add reaction",{fallbackHash:"9203ff94f6bef40e4d9c9db045937b74c11957f1"});var a=this.props.featureContextualMessageShortcuts?ye.t("R"):"";var r=this.getTooltipFocusText(t,a);if(this.props.featureSonicEmoji)return g.a.createElement(le["a"],{onEmojiSelected:this.onEmojiSelected,onClick:this.props.onEmojiPickerOpen,onClose:this.onEmojiPickerClose,showHandyReactions:true,shouldReturnFocusAfterClose:this.state.shouldReturnFocusAfterEmojiPickerClose},g.a.createElement(_e["a"],{iconType:this.props.featureMessageActionsRefresh?"add-reaction":"small-reaction",label:function e(a){var n=a.hasKeyboardFocus;return n?r:t},ariaLabel:this.makeAriaLabelForShortcutKey(t,a),"data-qa":"add_reaction_action",btnRef:this.reactionBtnRef,shortcutKey:this.props.featureContextualMessageShortcuts?Se.REACT[0]:null}));return g.a.createElement(_e["a"],{iconType:this.props.featureMessageActionsRefresh?"add-reaction":"small-reaction",label:ye.t("Add reaction",{fallbackHash:"9203ff94f6bef40e4d9c9db045937b74c11957f1"}),onClick:this.onAddReaction,"data-qa":"add_reaction_action"})}},{key:"renderShare",value:function e(){var t=this.props,a=t.subtype,r=t.featureOfflineMode,n=t.wasRecentlyOnline,i=t.showShare;if(!i||!this.canShareMessage())return null;var s="file_share"===a||"file_mention"===a?ye.t("Share file\u2026",{fallbackHash:"9056b6c934805611f8d5a90ad5c937b656be6641"}):ye.t("Share message\u2026",{fallbackHash:"587f9ecd03b16e92d064f4fbbfd4ba7e76e29807"});r&&!n&&(s=g.a.createElement(de["a"],{tooltipLabel:s}));var o=this.props.featureContextualMessageShortcuts?ye.t("S"):"";var l=this.getTooltipFocusText(s,o);return g.a.createElement(_e["a"],{iconType:this.props.featureMessageActionsRefresh?"share-square-o":"share-action",label:function e(t){var a=t.hasKeyboardFocus;return a?l:s},ariaLabel:this.makeAriaLabelForShortcutKey(s,o),onClick:this.onShare,"data-qa":"share_message",shortcutKey:this.props.featureContextualMessageShortcuts?Se.SHARE[0]:null})}},{key:"renderStar",value:function e(){var t=this;var a=this.props,r=a.isStarred,n=a.channel,i=a.showStar,s=a.featureDangerouslyGuardIATranslations,o=a.featureMessageActionsRefresh;if(!i||!this.canStarMessage())return null;var l=this.props.featureContextualMessageShortcuts?ye.t("A"):"";var c=this.renderAriaLabelForStar();var u;u=s?r?"bookmark-filled":"bookmark":o?r?"star":"star-o":r?"small-star-filled":"small-star";return g.a.createElement(_e["a"],{iconType:u,label:function e(a){var r=a.hasKeyboardFocus;return r?t.getTooltipFocusText(c,l):t.renderTextForStarTooltip()},ariaLabel:this.makeAriaLabelForShortcutKey(c,l),onClick:this.onStar,"data-qa":"star_message",tooltipPosition:n?"top":"top-right",shortcutKey:this.props.featureContextualMessageShortcuts?Se.STAR[0]:null,"aria-pressed":r,hideFromScreenReader:true})}},{key:"renderTextForStarTooltip",value:function e(){var t={file:ye.t("Unstar file"),"file comment":ye.t("Unstar file comment"),message:ye.t("Unstar message")};var a={file:ye.t("Star file"),"file comment":ye.t("Star file comment"),message:ye.t("Star message")};if(this.props.featureDangerouslyGuardIATranslations){t={file:"Remove from saved","file comment":"Remove from saved",message:"Remove from saved"};a={file:ye.t("Save"),"file comment":ye.t("Save"),message:ye.t("Save")}}var r=this.props.isStarred?t:a;var n=this.getType();return r[n]}},{key:"render",value:function e(){var t=S()("c-message__actions",{"c-message__actions--menu-showing":this.state.moreActionsMenuOpen,"c-message__actions--dense":"dense"===this.props.theme,"c-message__actions--offscreen":this.props.renderOffscreen});var a=ye.t("Message actions");var r=this.props.featureContextualMessageShortcuts;return g.a.createElement(g.a.Fragment,null,r?g.a.createElement(be["a"],null,this.state.ariaLiveMessage):null,g.a.createElement(ge["a"],{className:t,ariaLabel:a},this.renderReaction(),this.renderJump(),this.renderComment(),this.renderShare(),this.renderStar(),this.renderEllipsis()))}}]);return t}(b["PureComponent"]);we.displayName="MessageActions";we.defaultProps=Oe;var je=function e(t,a){var r=a.fileId,n=a.channelId,i=a.ts,s=a.showReact,o=a.messageContainerType;var l=Object(M["e"])(t,n);var c=Object(D["a"])(t,n,i);var u=Object(N["getCurrentUserId"])(t);var d=Object(Q["a"])(t,"msg_edit_window_mins");return{channel:l,file:Object(P["getFileById"])(t,r),isFileAuthorExternal:Object(P["isFileAuthorExternal"])(t,r),featureSonicEmoji:Object(N["isFeatureEnabled"])(t,"feature_sonic_emoji"),clogger:Object(I["a"])({state:t}),featureOfflineMode:Object(N["isFeatureEnabled"])(t,"feature_offline_mode"),wasRecentlyOnline:Object(F["h"])(t),canUserReplyToMessage:Object(z["canReplyOrComment"])(t,{message:c,channel:l}),showReact:Object(z["canAddReaction"])(t,c)&&s,canEditMessage:Object(z["canEditMessage"])(t,u,c,l,d),canPin:Object(z["canPin"])(t,{message:c,channel:l}),canMarkUnread:Object(z["canMarkUnread"])(t,{message:c,channel:l}),canAddReminder:Object(z["canAddReminder"])(t,{message:c,channel:l}),canDeleteMessage:Object(z["canDeleteMessage"])(t,{message:c,channel:l,messageContainerType:o}),featureContextualMessageShortcuts:Object(N["isFeatureEnabled"])(t,"feature_contextual_message_shortcuts"),featureAppViewsReminders:Object(N["isFeatureEnabled"])(t,"feature_app_views_reminders"),featureMessageActionsRefresh:Object(N["isFeatureEnabled"])(t,"feature_message_actions_refresh"),featureDangerouslyGuardIATranslations:Object(G["e"])(t),featureMessageKitInMessagePane:Object(N["isFeatureEnabled"])(t,"feature_message_kit_in_message_pane")}};var Ie={changeReactionFromUserAction:R["a"],pinMessage:T["pinMessage"],unpinMessage:T["unpinMessage"],updateStar:A["a"],openModal:me["openModal"],showThreadOrRefresh:function e(){return x["showThreadOrRefresh"].apply(void 0,arguments)},addReminderForMessage:K["a"],openShareDialog:L["a"],jumpToMessage:function e(){return U["a"].apply(void 0,arguments)},setViewContextToRestoreFocus:function e(){return B["a"].apply(void 0,arguments)},completedMessageAction:function e(){return q["a"].apply(void 0,arguments)},togglePinWithUnpinConfirmation:function e(){return H["a"].apply(void 0,arguments)}};var Te=t["a"]=Object(y["connect"])(je,Ie)(we)},function(e,t,a){"use strict";var r=a(110);var n=a.n(r);var i=a(135);var s=a.n(i);var o=a(169);var l=a.n(o);var c=a(138);var u=a.n(c);var d=a(147);var p=a.n(d);var m=a(185);var h=a.n(m);var v=a(2);var f=a.n(v);var b=a(0);var g=a(1);var _=a.n(g);var y=a(12);var O=a(13);var k=a.n(O);var E=a(11);var C=a(38);var S=a(6);var w=a(1313);var j=a(229);var I=a(643);var T=a(383);var A=a(128);var N=new S["b"]("threads");function P(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.latestReply,a=e.replyCount,r=e.do24hrTime;if(Object(T["a"])(Object(A["a"])(t),new Date)){if(1===a)return N.t("Today at {time}",{time:Object(j["a"])(t,{do24hrTime:r})});return N.t("Last reply today at {time}",{time:Object(j["a"])(t,{do24hrTime:r})})}if(1===a)return Object(I["a"])(t);return N.t("Last reply {time_ago}",{time_ago:Object(I["a"])(t)})}var M=a(219);var D=a(23);var x=a(220);var R=a(17);var F=a(419);var L=a(586);var U=new S["b"]("threads");var B={replies:null,do24hrTime:false,replyUsers:[],replyUsersCount:0,latestReply:null,showThreadIfThreadable:f.a.noop,featureNewRepliesAfterBcast:false,isThreadExpanded:void 0,threadListId:void 0,className:void 0,hasKeyboardFocusWithin:false,onFocus:f.a.noop,onBlur:f.a.noop};var q=function(e){h()(t,e);function t(e){var a;n()(this,t);a=l()(this,u()(t).call(this,e));a.openThread=a.openThread.bind(p()(a));return a}s()(t,[{key:"getLastReplyTs",value:function e(){if(this.props.latestReply)return this.props.latestReply;if(this.props.replies){var t=f.a.last(this.props.replies);if(t)return t.ts}return null}},{key:"openThread",value:function e(t){t.preventDefault();this.props.showThreadIfThreadable({channelId:this.props.channelId,threadTs:this.props.threadTs,requestFocus:this.props.hasKeyboardFocusWithin})}},{key:"renderFaces",value:function e(){var t=this;var a;a=this.props.replyUsers&&this.props.replyUsers.length?f.a.reject(this.props.replyUsers,function(e){return"B00"===e}):f.a.uniq(f.a.reject(f.a.map(this.props.replies,"user"),function(e){return"B00"===e}));var r=this.props.replyUsersCount?this.props.replyUsersCount:a.length;if(a.length>5)return f.a.concat(f.a.map(f.a.take(a,4),function(e){return t.renderSingleAvatar(e)}),this.renderSingleAvatar(a[4],r-5));return f.a.map(a,function(e){return t.renderSingleAvatar(e)})}},{key:"renderSingleAvatar",value:function e(t,a){var r=Object(L["a"])(t);var n=!Object(R["isEKMAccessDenied"])({id:t});return _.a.createElement(M["b"],{key:t,userId:r?null:t,botId:r?t:null,size:24,additionalOverlay:a,showCard:true,isInteractive:n})}},{key:"render",value:function e(){var t=this.props,a=t.replyCount,r=t.channelId,n=t.threadTs,i=t.do24hrTime,s=t.featureNewRepliesAfterBcast,o=t.isThreadExpanded,l=t.onFocus,c=t.onBlur,u=t.hasKeyboardFocusWithin,d=t.threadListId;var p=U.t("{replyCount, plural, =1 {# reply} other {# replies}}",{replyCount:a});var m=Object(F["b"])(r,n);var h=this.getLastReplyTs();var v="";v=s?P({latestReply:h,replyCount:a,do24hrTime:i}):Object(T["a"])(Object(A["a"])(h),new Date)?1===a?U.t("Today at {time}",{time:Object(j["a"])(h,{do24hrTime:i})}):U.t("Last reply today at {time}",{time:Object(j["a"])(h,{do24hrTime:i})}):1===a?Object(I["a"])(h):U.t("Last reply {time_ago}",{time_ago:Object(I["a"])(h)});var f=k()("c-message__reply_bar",this.props.className,{"c-message__reply_bar--focus-within":u});var b=true===o?d:void 0;return _.a.createElement("div",{role:"presentation",className:f,onClick:this.openThread,"data-qa":"reply_bar",onFocus:l,onBlur:c},this.renderFaces(),_.a.createElement(x["a"],{className:"c-message__reply_count",href:m,target:"_blank",rel:"noopener noreferrer","aria-expanded":o,"aria-controls":b},p),_.a.createElement("div",{className:"c-message__reply_bar_description"},_.a.createElement("span",{className:"c-message__reply_bar_last_reply"},v),_.a.createElement("span",{className:"c-message__reply_bar_view_thread"},U.t("View thread"))),_.a.createElement(D["a"],{type:"chevron_right",className:"c-message__reply_bar_arrow",align:"baseline","aria-hidden":true}))}}]);return t}(_.a.PureComponent);q.displayName="ReplyBar";q.defaultProps=B;function G(e){return{do24hrTime:Object(C["k"])(e,"time24"),featureNewRepliesAfterBcast:Object(E["isFeatureEnabled"])(e,"feature_new_replies_after_bcast")}}var H=t["a"]=Object(w["a"])(Object(y["connect"])(G)(q))},function(e,t,a){"use strict";var r=a(12);var n=a(2);var i=a(370);var s=a(73);var o=a(129);var l=a(21);var c=a(33);var u=a(41);var d=a(27);var p=a(104);var m=a(110);var h=a.n(m);var v=a(135);var f=a.n(v);var b=a(169);var g=a.n(b);var _=a(138);var y=a.n(_);var O=a(147);var k=a.n(O);var E=a(185);var C=a.n(E);var S=a(13);var w=a.n(S);var j=a(0);var I=a(1);var T=a.n(I);var A=a(6);var N=a(145);var P=a(220);var M=a(2236);var D=a(1648);var x=new A["b"]("threads");var R={className:null,theme:"light",showThread:n["noop"],rootFile:void 0};var F=function(e){C()(t,e);function t(e){var a;h()(this,t);a=g()(this,y()(t).call(this,e));a.openThread=a.openThread.bind(k()(a));return a}f()(t,[{key:"openThread",value:function e(t){var a=this.props,r=a.showThread,n=a.channelId,i=a.threadTs,s=a.ts;t.preventDefault();r({channelId:n,threadTs:i,highlightTs:s})}},{key:"renderRootText",value:function e(){var t=this.props,a=t.rootMsg,r=t.rootFile;if("tombstone"===Object(u["getMessageSubtype"])(a))return null;if(Object(u["isRichTextMessage"])(a)&&!Object(u["isSimpleMessageUnfurl"])(a))return T.a.createElement(D["a"],{richTextBlock:a.blocks[0]});var n=Object(u["getMessageRootText"])(a,r);if(!n)return null;return T.a.createElement(N["a"],{text:n,noHighlights:true,noHexColors:true,noJumbomoji:true,noLinking:true,noCode:true,noQuotes:true,customLineEnding:"\u2026",maxNewlines:1})}},{key:"render",value:function e(){var t=this;var a=this.props,r=a.rootMsg,n=a.teamDomain,i=a.channelId,s=a.ts,o=a.threadTs,l=a.theme;if(!r)return null;var c=Object(u["constructAbsoluteMsgPermalink"])({teamDomain:n,channelId:i,ts:s,threadTs:o});var d=w()("c-message__broadcast_preamble",this.props.className);var p=!!(r&&r.blocks&&r.blocks.length&&!Object(u["isRichTextMessage"])(r));var m=p?null:this.renderRootText();var h;if(m)h=T.a.createElement("div",{className:d},T.a.createElement("span",{"data-qa":"thread-broadcast-preamble-with-text",className:"c-message__broadcast_preamble_meta"},Object(M["a"])()),T.a.createElement(P["a"],{className:"c-message__broadcast_preamble_link",href:c,target:"_blank",rel:"noopener noreferrer",onClick:this.openThread,dir:"auto"},m));else{var v=x.rt("replied to <a>a thread</a>",null,function(e){var a=e.key,r=e.text;return T.a.createElement(P["a"],{className:"c-message__broadcast_preamble_link",key:a,href:c,target:"_blank",rel:"noopener noreferrer",onClick:t.openThread},r)});h=T.a.createElement("div",{className:d},v)}if("light"===l)return T.a.createElement("div",{className:"c-message__broadcast_preamble_outer"},h);return h}}]);return t}(I["PureComponent"]);F.displayName="ThreadBroadcastPreamble";F.defaultProps=R;var L=F;function U(e,t){var a=t.threadTs,r=t.channelId;var p=Object(s["a"])(e,r,a);if(!p)return{};var m;if(p.files&&p.files.length){var h=Object(n["first"])(p.files);m=Object(o["getFileById"])(e,h)}var v=Object(u["getSourceTeamId"])(p)||Object(l["b"])(e);var f=Object(c["k"])(e,v);var b=Object(d["getTeamDomain"])(f);return{rootMsg:p,rootFile:m,teamDomain:b,theme:Object(i["a"])(e)}}var B={showThread:p["m"]};var q=t["a"]=Object(r["connect"])(U,B)(L)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){},,function(e,t,a){},,function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(0);var s=a(12);var o=a(2);var l=a.n(o);var c=a(20);var u=a(304);var d=a(39);var p=a(460);var m=a(1212);var h=a(9);var v=a(24);var f=a(44);var b={channelId:void 0,channel:void 0,callConfirmationStrings:{},appId:void 0,type:void 0,phoneNumber:void 0};var g=function e(t){var a=t.channelId,i=t.channel,s=t.callConfirmationStrings,o=t.dispatch,l=t.appId,c=t.type,u=t.phoneNumber;var m=Object(r["useCallback"])(function(){o(Object(d["closeModal"])())},[o]);var b=Object(r["useCallback"])(function(){o(Object(d["closeModal"])());o(Object(p["d"])({appId:l,type:c,phoneNumber:u,channelId:a}))},[l,o,u,c,a]);return n.a.createElement(f["a"],{closeModal:m,isOpen:true,centered:true},n.a.createElement(f["h"],null,n.a.createElement(f["j"],{title:s.title})),n.a.createElement(f["d"],null,n.a.createElement(f["e"],null,n.a.createElement("p",null,Object(h["isImOrMpim"])(i)?s.descriptionMPIM:s.description))),n.a.createElement(f["f"],null,n.a.createElement(f["g"],null,n.a.createElement(f["c"],{type:"outline",onClick:m},s.cancel),n.a.createElement(v["d"],{type:"primary",onClick:b},s.confirm))))};g.displayName="StartCallConfirmationModal";g.defaultProps=b;var _=function e(t,a){var r=a.channelId;var n=Object(c["e"])(t,r);var i=Object(u["getMemberCounts"])(t,n.id);var s=Object(o["get"])(i,"counts.member_count")||0;return{channel:n,callConfirmationStrings:Object(m["b"])(s)}};t["default"]=Object(s["connect"])(_)(g)},function(e,t,a){"use strict";a.r(t);var r=a(52);var n=a(413);Object(r["a"])("interop.company_address_validation_utils",{showIsBusinessPurchase:n["q"]})},,,,,function(e,t,a){"use strict";a.d(t,"a",function(){return o});a.d(t,"c",function(){return c});a.d(t,"b",function(){return u});var r=a(88);var n=a.n(r);var i=a(14);var s=a(9);var o={channelNavBar:"channel-nav-bar",mpimNavBar:"mpim-nav-bar",imNavBar:"im-nav-bar",profilePhoneField:"profile-phone-field",profileSideBar:"profile-side-bar",miniProfileCard:"mini-profile-card"};var l=function e(t){var a=t.cloggerContext,r=t.channel;if(Object(s["isIm"])(r))return o.imNavBar;if(Object(s["isMpim"])(r))return o.mpimNavBar;if(Object(s["isChannel"])(r))return o.channelNavBar;return a.entryPoint};var c=function e(t){var a;var r=t.clogger,s=t.cloggerContext,o=t.channel;r.track(i["EventId"].CALLS_MENU_PHONE_INTEGRATION,{contexts:{ui_context:(a={},n()(a,i["UiContextKeys"].step,i["UiStep"].CALLS_MENU_OPEN),n()(a,i["UiContextKeys"].action,i["UiAction"].OPEN),n()(a,i["UiContextKeys"].entry_point,l({cloggerContext:s,channel:o})),a)}})};var u=function e(t){var a,r,s;var o=t.clogger,c=t.cloggerContext,u=t.channel,d=t.appId,p=t.callType;o.track(i["EventId"].CALLS_MENU_PHONE_INTEGRATION,{contexts:n()({ui_context:(r={},n()(r,i["UiContextKeys"].step,i["UiStep"].CALLS_MENU_ITEM_CLICK),n()(r,i["UiContextKeys"].action,i["UiAction"].CLICK),n()(r,i["UiContextKeys"].entry_point,l({cloggerContext:c,channel:u})),n()(r,i["UiContextKeys"].ui_properties,(a={},n()(a,i["UiPropertiesKeys"].element_type,i["ElementType"].MENU),n()(a,i["UiPropertiesKeys"].element_name,"calls_menu_phone_integration"),a)),r)},i["ClientEventKeys"].core,(s={},n()(s,i["CoreKeys"].app_id,d),n()(s,i["CoreKeys"].item_type,p),s))})}},,,function(e,t,a){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.r(t);var r=a(52);var n=a(124);var i=a(153);var s=a(137);var o=a(833);var l=a(341);var c=a(1367);var u=a(558);var d=a(765);var p=a(586);var m=a(2072);var h=a(2032);var v=a(602);var f=a(2);var b=a(69);function g(e){var t=e.bot_id?[e.bot_id]:[];Object(f["values"])(e).forEach(function(e){if(Object(f["isObject"])(e)){t.push(g(e));return}if(!Object(f["isString"])(e))return;var a=Object(f["compact"])(Object(b["findUrlsInString"])(e).map(d["a"]));t.push(a)});return Object(f["uniq"])(Object(f["flatten"])(t))}var _=a(350);var y=a.n(_);var O=a(584);function k(e){var t=[];var a=[];function r(e){return["user","inviter","accepted_user","created_by"].indexOf(e)>=0}function n(e){if(!Object(f["isObject"])(e))return;a.push(e);var s;Object.keys(e).forEach(function(a){s=e[a];if("string"!==typeof s)return;if(!r(a)){Object(O["b"])(s).m_ids.forEach(function(e){Object(f["includes"])(t,e)||t.push(e)});return}if(!Object(i["a"])(s))return;if(Object(f["includes"])(t,s))return;t.push(s)});Object.keys(e).forEach(function(r){s=e[r];if("object"!==y()(s))return;if(-1!==a.indexOf(s))return;if(!Object(f["isArray"])(s)||"members"!==r&&"users"!==r){n(s);return}s.forEach(function(e){if(!Object(i["a"])(e)&&e&&"object"===y()(e)&&e.id){Object(i["a"])(e.id)&&!Object(f["includes"])(t,e.id)&&t.push(e.id);return}if(!Object(i["a"])(e))return;if(Object(f["includes"])(t,e))return;t.push(e)})})}n(e);return Object(f["uniq"])(t)}function E(e){var t=[];var a=[];function r(e,t){if("channel"===e||"channel_id"===e)return true;if("id"===e&&"channel"===t)return true;return false}function i(e,s){if("object"!==y()(e))return;a.push(e);Object(f["forOwn"])(e,function(e,a){if("string"!==typeof e)return;r(a,s)?Object(n["a"])(e)&&!Object(f["includes"])(t,e)&&t.push(e):Object(O["b"])(e).c_ids.forEach(function(e){Object(f["includes"])(t,e)||t.push(e)})});Object(f["forOwn"])(e,function(e,r){if("object"!==y()(e))return;if("previous_message"===r)return;if(-1!==a.indexOf(e))return;!Object(f["isArray"])(e)||"string"!==typeof e[0]||"channels"!==r&&"ims"!==r&&"groups"!==r?i(e,r):e.forEach(function(e){Object(n["a"])(e)&&!Object(f["includes"])(t,e)&&t.push(e)})})}i(e);return t}function C(e){var t=[];Object(f["forOwn"])(e,function(e,a){Object(f["isArray"])(e)?"messages"!==a&&"teams"!==a&&"users"!==a&&"channels"!==a||e.forEach(function(e){t.push(C(e))}):Object(f["isObject"])(e)?t.push(C(e)):Object(f["isString"])(e)&&("team"!==a&&"source_team"!==a&&"user_team"!==a&&"team_id"!==a||Object(s["a"])(e)&&t.push(e))});return Object(f["uniq"])(Object(f["flatten"])(t))}var S=a(1344);function w(){return["Build Something People Want","We know that we have built something which is genuinely useful: almost any team which adopts Slack as their central application for communication would be significantly better off than they were before.","That means we have something people want.","However, almost all of them have no idea that they want Slack.","How could they?","They\u2019ve never heard of it.","And only a vanishingly small number will have imagined it on their own.","They think they want something different (if they think they want anything at all).","They definitely are not looking for Slack.","(But then no-one was looking for Post-it notes or GUIs either.)","Just as much as our job is to build something genuinely useful, something which really does make people\u2019s working lives simpler, more pleasant and more productive, our job is also to understand what people think they want and then translate the value of Slack into their terms.","A good part of that is \u201cjust marketing,\u201d but even the best slogans, ads, landing pages, PR campaigns, etc., will fall down if they are not supported by the experience people have when they hit our site, when they sign up for an account, when they first begin using the product and when they start using it day in, day out.","Therefore, \u201cunderstanding what people think they want and then translating the value of Slack into their terms\u201d is something we all work on.","It is the sum of the exercise of all our crafts.","We do it with copy accompanying signup forms, with fast-loading pages, with good welcome emails, with comprehensive and accurate search, with purposeful loading screens, and with thoughtfully implemented and well-functioning features of all kinds.","Marketing from Both Ends","Much has been written about \u201cproduct-market fit\u201d in the last few years, probably as a result of the popularity of the lean startup movement (though the idea has been around much longer).","The term refers to the degree to which a product could be successful, given sufficient promotion, appropriate pricing, adequate customer support and so on (before you find that fit, all the pushing in the world won\u2019t get you up the hill).","In this classic post on Marc Andreessen\u2019s old blog, he calls getting to product-market fit the \u201conly thing that matters\u201d for startups and offers a way of thinking about the life of the startup that divides it into two distinct phases: before product-market fit and after.","Once the product fits the market, a company is able to step on the gas, spending to promote a product that will actually sell.","The things you need to do before are very different from the things you need to do after (generally test & iterate vs scale & optimize).","We are right in the middle of that first phase.","It seems we are doing well and there are many encouraging signs, but we\u2019re definitely still in the first phase and it is very, very hard to tell how far we have to go to cross over into the promised land (the last 10% is 90% of the work, etc.)","So, we should be working carefully from both the product end and the market end:","Doing a better and better job of providing what people want (whether they know it or not)","Communicating the above more and more effectively (so that they know they want it)","In the best case, there is a dialectic at play here: the product itself and the way people use it should suggest new ways of articulating the value\u200a\u2014\u200aand refinements to how we communicate the value should lead to principles which clarify decision-making around product features and design.","Our position is different than the one many new companies find themselves in: we are not battling it out in a large, well-defined market with clear incumbents (which is why we can\u2019t get away with \u201cOther group chat products are poisonous. Slack is toasted.\u201d).","Despite the fact that there are a handful of direct competitors and a muddled history of superficially similar tools, we are setting out to define a new market.","And that means we can\u2019t limit ourselves to tweaking the product; we need to tweak the market too.","Sell the innovation, not the product","The best\u200a\u2014\u200amaybe the only?\u200a\u2014\u200areal, direct measure of \u201cinnovation\u201d is change in human behaviour.","In fact, it is useful to take this way of thinking as definitional: innovation is the sum of change across the whole system, not a thing which causes a change in how people behave.","No small innovation ever caused a large shift in how people spend their time and no large one has ever failed to do so.","By that measure, Slack is a real and large innovation.","It is not as eye-catching as self-driving cars or implantable chips\u200a\u2014\u200ait is not basic research-y kind of stuff.","But, for organizations that adopt it, there will be a dramatic shift in how time is spent, how communication happens, and how the team\u2019s archives are utilized.","There will be changes in how team members relate to one another and, hopefully, significant changes in productivity.","We are unlikely to be able to sell \u201ca group chat system\u201d very well: there are just not enough people shopping for group chat system (and, as pointed out elsewhere, our current fax machine works fine).","That\u2019s why what we\u2019re selling is organizational transformation.","What we are selling is not the software product\u200a\u2014\u200athe set of all the features, in their specific implementation\u200a\u2014\u200abecause there are just not many buyers for this software product.","(People buy \u201csoftware\u201d to address a need they already know they have or perform some specific task they need to perform, whether that is tracking sales contacts or editing video.)","However, if we are selling \u201ca reduction in the cost of communication\u201d or \u201czero effort knowledge management\u201d or \u201cmaking better decisions, faster\u201d or \u201call your team communication, instantly searchable, available wherever you go\u201d or \u201c75% less email\u201d or some other valuable result of adopting Slack, we will find many more buyers.","That\u2019s why what we\u2019re selling is organizational transformation.","The software just happens to be the part we\u2019re able to build & ship (and the means for us to get our cut).","We\u2019re selling a reduction in information overload, relief from stress, and a new ability to extract the enormous value of hitherto useless corporate archives.","We\u2019re selling better organizations, better teams.","That\u2019s a good thing for people to buy and it is a much better thing for us to sell in the long run.","We will be successful to the extent that we create better teams.","To see why, consider the hypothetical Acme Saddle Company.","They could just sell saddles, and if so, they\u2019d probably be selling on the basis of things like the quality of the leather they use or the fancy adornments their saddles include; they could be selling on the range of styles and sizes available, or on durability, or on price.","Or, they could sell horseback riding.","Being successful at selling horseback riding means they grow the market for their product while giving the perfect context for talking about their saddles.","It lets them position themselves as the leader and affords them different kinds of marketing and promotion opportunities (e.g., sponsoring school programs to promote riding to kids, working on land conservation or trail maps).","It lets them think big and potentially be big.","Because the best possible way to find product-market fit is to define your own market.","This isn\u2019t a new idea.","There are many brands whose marketing activities or positioning has them selling something other than (and usually larger than) their product: Harley Davidson sells motorcycle riding, but it especially sells freedom and independence.","Most luxury brands sell something that comes down to \u201cbeing better than you are\u201d (richer, better looking, more attractive to those you find desirable, etc.)","My favorite recent example is Lululemon: when they started, there was not a large market for yoga-specific athletic wear and accessories.","They sold yoga like crazy: helping people find yoga studios near their homes, hosting free classes, sponsorships and scholarships, local ambassadors and training, etc.","And as a result, they sold just under $1.4 billion worth of yoga-specific athletic wear and accessories in their most recent fiscal year.","But going back to the Acme Saddle Company, the better analogy to what we are doing now is to imagine them selling horseback riding \u2026 about 4,000 years ago.","It is almost inevitable that centralized internal communication systems will gradually replace email for most organizations over the next 10-20 years and we should do what we can to accelerate the trend and \u201cown it\u201d.","We are at the beginning of a transition.","We have an opportunity to both define the category and push hard for the whole market\u2019s growth.","We\u2019d be crazy not to take it, because the best possible way to find product-market fit is to define your own market."]}var j=a(2400);var I=a(1350);var T=a(57);var A=a(117);var N=a(864);var P=a(1235);var M=a(1169);var D=a(1967);var x=a(88);var R=a.n(x);function F(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function L(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?F(Object(a),true).forEach(function(t){R()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):F(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var U="_GA";var B=function e(t){return""+U+t};var q=function e(t){return L({},t,{is_app_action:true,originalId:t.id,id:B(t.id)})};var G=function e(t){return t.startsWith(U)};var H=function e(t){if(!G(t))return null;return t.slice(U.length)};var W=a(168);var V=a(591);var K=a(595);var z=a(594);var Q=a(2793);var Y=a(562);var J=a(848);var X=a(1066);var Z=a(1800);var $=a(519);var ee=a(203);var te=a(318);var ae=a(2557);var re=a(22);function ne(e){if(!e)return Promise.resolve();return new Promise(function(t,a){e.then(t).catch(a)})}var ie=a(16);var se=a(1436);var oe=a(438);var le=a(597);var ce=a(325);var ue=a(77);var de=a(853);var pe=a(1471);Object(r["a"])("interop.utility",{addJitter:V["a"],looksLikeChannelId:n["a"],looksLikeMemberId:i["a"],looksLikeTeamId:s["a"],looksLikeEnterpriseTeamId:s["b"],looksLikeFileId:o["a"],looksLikeGlobalActionFrecencyId:G,extractAllBotIds:g,extractAllMemberIds:k,extractAllModelObIds:E,extractAllTeamIds:C,formatThemeColorsArray:function e(t){return Object(X["c"])(t)},getGlobalNavTheme:J["a"],getStringLength:c["a"],getIconSizeToFit:u["a"],getBotIdFromUrl:d["a"],getTombstonedMessageTitle:se["a"],getHelpCenterUrl:ce["a"],getZendeskLocale:ue["a"],getLogger:ie["a"],looksLikeBotId:p["a"],looksLikeUserGroupId:l["a"],isVisible:m["a"],ipsum:w,isFileSubtype:N["b"],inTabFlow:h["a"],firstFocusableChild:v["c"],lastFocusableChild:v["d"],snakeCaseKeys:S["a"],isMenuVisible:T["g"],isDialogVisible:A["b"],isFSModalVisible:P["b"],normalize:I["a"],cleanChannelName:ae["a"],convertFilesize:M["a"],getSystemTextPreferences:D["a"],decodeGlobalActionFrecencyId:H,getGlobalActionForFrecency:q,FILE_SUBTYPES:N["a"],PRIMARY_VIEWS:oe["a"],uuidv4:W["a"],formatNumberWithAbbreviation:K["a"],isCmdKey:Y["a"],getColonsRx:ee["c"],getEmoticonsRx:ee["d"],getNativeEmojiRx:ee["e"],requestIdleCallback:pe["b"],cancelIdleCallback:pe["a"],emojiTranslation:{addTranslationMap:te["b"],getLocalizedEmojiName:te["g"],getCanonicalEmojiName:te["e"],convertEmojiInStringToLocalized:te["d"],convertEmojiInStringToCanonical:te["c"],testEmojiTranslations:te["j"]},replaceEmoticonsWithColons:ee["h"],replaceTextEmojiWithNative:function e(t){return Object(z["a"])(TS.redux.getState(),{messageText:t,teamId:TS.model.team.id})},replaceNativeEmojiWithText:function e(t){return Object(Q["a"])(t)},getEmoticonMap:function e(){return re["EMOTICON_MAP"]},setCachedRefererPolicy:de["d"],getRefererHidingWhiteList:de["a"],getRefererPolicy:de["b"],urlNeedsRefererHiding:de["e"],isInputElement:function e(t){var a=window.jQuery&&t instanceof window.jQuery?t[0]:t;return Object($["a"])(a)},isContentEditableElement:function e(t){var a=window.jQuery&&t instanceof window.jQuery?t[0]:t;return Object(Z["a"])(a)},getImgProxyUrl:function e(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return le["a"].apply(void 0,[TS.redux.getState()].concat(a))},makeSafeForTimeout:ne,isModelObjectExternal:function e(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return j["a"].apply(void 0,[TS.redux.getState()].concat(a))}})},,function(e,t,a){"use strict";a.d(t,"a",function(){return r});function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.text,a=e.type;if(t&&!t.trim())return true;if("paragraph_break"===a)return true;if("line_break"===a)return true;if("space_hard"===a)return true;return false}},,function(e,t,a){"use strict";var r=a(196);var n=a.n(r);var i=a(110);var s=a.n(i);var o=a(135);var l=a.n(o);var c=a(169);var u=a.n(c);var d=a(138);var p=a.n(d);var m=a(185);var h=a.n(m);var v=a(1);var f=a.n(v);var b=a(332);var g=a.n(b);var _=a(12);var y=a(6);var O=a(1438);var k=a(851);var E=a(495);var C=a(11);var S=a(2962);var w=a(1446);var j=a(1030);var I=a(1037);var T=a(22);var A=a(35);var N=a(33);var P=a(24);var M=a(38);var D=a(2786);var x=a(214);var R=new y["b"]("welcome_place");var F=new y["b"]("member_actions");var L=new y["b"]("calls_settings");var U=function(e){h()(t,e);function t(e){var a;s()(this,t);a=u()(this,p()(t).call(this,e));a.setTextyRef=function(e){a.texty=e&&e.getWrappedInstance?e.getWrappedInstance():e};a.onTextChange=function(){var e=a.state.numCharsOverLimit;var t=a.getTextContentsAsBlocks();var r=a.countCharsOverLimit();var n=r>0||e>0;n&&a.setState(function(){return{numCharsOverLimit:r}});a.props.onTextChange({blocks:t,overLimit:n})};a.renderInput=function(e){var t=e.modules;var r=a.props,n=r.featureNewxp3279,i=r.originalMessageContents,s=r.isDisabled;var o=a.getComputedModules({modules:t});return f.a.createElement(E["g"],{ariaLabel:"",id:"welcome-place-message-input",className:"p-welcome_place_message_input",ref:a.setTextyRef,modules:o,placeholder:n?R.t("e.g. Let\u2019s try using Slack for\u2026"):"",enableBroadcastKeywords:false,enableJumbomoji:a.props.useJumbomoji,onTextChange:a.onTextChange,onEnter:a.onEnter,initialText:i,isDisabled:s,focusOnMount:false,enableEmojiButton:true,enableMentionButton:true,maxLines:8,minLines:3,maxLength:T["MAX_MESSAGE_INPUT_WYSIWYG_LENGTH"]})};a.state={numCharsOverLimit:a.countCharsOverLimit()};return a}l()(t,[{key:"focus",value:function e(){this.texty&&this.texty.focus()}},{key:"onEnter",value:function e(){return true}},{key:"countCharsOverLimit",value:function e(){var t=this.getTextContents();var a=Object(I["a"])(new g.a(t));return Math.max(0,a-T["MAX_MESSAGE_INPUT_WYSIWYG_LENGTH"])}},{key:"getTextContents",value:function e(){if(!this.texty)return;var t=this.texty.getContents();return t&&t.contents}},{key:"getTextContentsAsBlocks",value:function e(){var t=this.props,a=t.initialContents,r=t.onboardingChannelId;var n=this.getTextContents();var i=n?this.props.convertMsgOpsToRichTextMessage({msgOps:n,channelId:r}):a;return i}},{key:"getComputedModules",value:function e(t){var a=t.modules;var r=this.props,i=r.teamId,s=r.featureWysiwygAnchorText;var o=n()(n()({},Object(w["a"])({featureWysiwygAnchorText:s})),{teamId:i});return n()(n()({},a),{composer:o,slacklink:{convertImages:false,disableLinksWithLabels:!s},slackmarkdown:{convertHeaders:false,convertHorizontalRule:false}})}},{key:"render",value:function e(){var t=this.props,a=t.onClickBack,r=t.onClickSave,n=t.featureNewxp3279,i=t.hasButtons,s=t.isDisabled;var o=n?f.a.createElement("p",{className:"margin_top_50"},R.t("You can edit this message however you\u2019d like.")):f.a.createElement("p",null);return f.a.createElement(f.a.Fragment,null,f.a.createElement(k["a"],{completeOnMembers:true,completeOnChannels:true,completeOnEmoji:true,position:"top",renderInput:this.renderInput}),o,i?f.a.createElement("div",{className:"welcome-message-input__buttons"},f.a.createElement(P["d"],{className:"margin_right_25",type:"outline",onClick:a},F.t("Back")),f.a.createElement(P["d"],{disabled:s,type:"primary",onClick:r},L.t("Save"))):null)}}]);return t}(f.a.PureComponent);U.displayName="WelcomeMessageInput";function B(e,t){var a;var r=Object(N["d"])(e);var n=null===(a=r)||void 0===a?void 0:a.id;var i=Object(M["k"])(e,"plain_text_mode");var s={contents:Object(D["a"])(e,{blocks:t.initialContents},{usePlainTextMode:i}).ops};return{teamId:n,clogger:Object(A["a"])({state:e}),useJumbomoji:Object(j["a"])(e),featureWysiwygAnchorText:Object(S["a"])(e),featureNewxp3279:Object(C["isFeatureEnabled"])(e,"feature_newxp_3279"),originalMessageContents:s,onboardingChannelId:Object(x["i"])(e)}}function q(e){return{convertMsgOpsToRichTextMessage:function t(a){return e(Object(O["a"])(a))}}}t["a"]=Object(_["connect"])(B,q,null,{withRef:true})(U)},,,function(e,t,a){},,,function(e,t,a){"use strict";a.d(t,"d",function(){return f});a.d(t,"e",function(){return b});a.d(t,"f",function(){return g});a.d(t,"b",function(){return _});a.d(t,"g",function(){return y});a.d(t,"c",function(){return O});var r=a(88);var n=a.n(r);var i=a(0);var s=a(94);var o=a(244);var l=a(3376);var c;function u(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(Object(a),true).forEach(function(t){n()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var p=Object(s["a"])("Sets the member ids associated with an org user group");p.meta={name:"setSSOAuthPrefs",key:"orgAdminSsoAuthSetSSOAuthPrefs",description:"Sets the member ids associated with an org user group"};p.propTypes={prefs:i["default"].objectOf(i["default"].any)};var m=Object(s["a"])("Sets the saml config and test saml config");m.meta={name:"setSSOAuthSAMLConfigs",key:"orgAdminSsoAuthSetSSOAuthSAMLConfigs",description:"Sets the saml config and test saml config"};m.propTypes={samlConfig:i["default"].objectOf(i["default"].any),testSamlConfig:i["default"].objectOf(i["default"].any)};var h={prefs:{},samlConfig:{},testSamlConfig:{}};var v=Object(s["c"])((c={},n()(c,p,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.prefs,r=void 0===a?{}:a;return d({},e,{prefs:r})}),n()(c,m,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.samlConfig,r=void 0===a?{}:a,n=t.testSamlConfig,i=void 0===n?{}:n;return d({},e,{samlConfig:Object(o["a"])(r),testSamlConfig:Object(o["a"])(i)})}),c),h,{storeKey:"ssoAuth",persistenceEnabled:true});v.meta={name:"ssoAuth",key:"orgAdminSsoAuthSsoAuth"};v.propTypes=i["default"].shape({prefs:i["default"].objectOf(i["default"].any)});t["a"]=v;var f=Object(s["d"])(function(e,t){return e&&e.ssoAuth&&e.ssoAuth.prefs&&e.ssoAuth.prefs[t]});f.meta={name:"getSSOAuthPref",key:"orgAdminSsoAuthGetSSOAuthPref"};var b=Object(s["d"])(function(e){return e&&e.ssoAuth&&e.ssoAuth.samlConfig});b.meta={name:"getSSOSAMLConfig",key:"orgAdminSsoAuthGetSSOSAMLConfig"};var g=Object(s["d"])(function(e){return e&&e.ssoAuth&&e.ssoAuth.testSamlConfig});g.meta={name:"getSSOTestSAMLConfig",key:"orgAdminSsoAuthGetSSOTestSAMLConfig"};var _=Object(s["e"])("Gets and updates enterprise sso auth data",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.reason;return e(Object(l["b"])({reason:r})).then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.sso;return e(p({prefs:a}))})});_.meta={name:"fetchAndUpsertSSOAuthPrefs",key:"orgAdminSsoAuthFetchAndUpsertSSOAuthPrefs",description:"Gets and updates enterprise sso auth data"};_.propTypes={reason:i["default"].string.isRequired};var y=Object(s["e"])("Sets and updates sso auth prefs",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.reason,n=a.prefs;return e(Object(l["c"])(d({},n,{reason:r}))).then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.sso;return e(p({prefs:a}))})});y.meta={name:"setAndUpsertSSOAuthPrefs",key:"orgAdminSsoAuthSetAndUpsertSSOAuthPrefs",description:"Sets and updates sso auth prefs"};y.propTypes={prefs:i["default"].object.isRequired,reason:i["default"].string};var O=Object(s["e"])("Gets and updates enterprise sso auth saml config",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.reason;return e(Object(l["a"])({reason:r})).then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e(m({samlConfig:t.saml_config,testSamlConfig:t.test_saml_config}))})});O.meta={name:"fetchAndUpsertSSOAuthSAMLConfigs",key:"orgAdminSsoAuthFetchAndUpsertSSOAuthSAMLConfigs",description:"Gets and updates enterprise sso auth saml config"};O.propTypes={reason:i["default"].string.isRequired}},function(e,t,a){"use strict";var r=a(110);var n=a.n(r);var i=a(135);var s=a.n(i);var o=a(169);var l=a.n(o);var c=a(138);var u=a.n(c);var d=a(185);var p=a.n(d);var m=a(1);var h=a.n(m);var v=a(0);var f=a(12);var b=a(300);var g=a(1852);var _=a(88);var y=a.n(_);var O=a(147);var k=a.n(O);var E=a(30);var C=a(33);var S=a(27);var w=a(6);var j=a(35);var I=a(14);var T=a(2);var A=a(13);var N=a.n(A);var P=a(90);var M=a(873);var D=a(456);var x=a(24);var R=a(237);var F=a(4741);var L=new w["b"]("notification_banner");var U={bannerAriaLabel:"",headingIconPath:void 0,bannerContainerClass:"",primaryCTAText:void 0,onPrimaryCTAClick:T["noop"],primaryCTAHref:void 0,primaryCTATarget:void 0,secondaryCTAText:void 0,onSecondaryCTAClick:T["noop"],secondaryCTAHref:void 0,secondaryCTATarget:void 0,onCloseIconClick:T["noop"],isPersistent:false};var B=function(e){p()(t,e);function t(){n()(this,t);return l()(this,u()(t).apply(this,arguments))}s()(t,[{key:"renderBody",value:function e(){var t=this.props.bodyText;return h.a.createElement("div",{className:"p-global_banner__body","data-qa":"global_banner_body"},t)}},{key:"renderSecondaryCTAButton",value:function e(){var t=this.props,a=t.secondaryCTAHref,r=t.secondaryCTATarget,n=t.onSecondaryCTAClick,i=t.secondaryCTAText;var s=N()("p-global_banner__button","p-global_banner__button--secondary");return h.a.createElement(x["b"],{className:s,onClick:n,href:a,target:r,size:"medium",type:"outline","data-qa":"global_banner_secondaryCTA_button"},i)}},{key:"renderCloseIcon",value:function e(){var t=this.props.onCloseIconClick;return h.a.createElement(R["a"],{icon:"times",onClick:t,"aria-label":L.t("Close"),className:"p-global_banner__close_icon","data-qa":"global_banner_close_icon"})}},{key:"renderPrimaryCTAButton",value:function e(){var t=this.props,a=t.primaryCTAText,r=t.primaryCTAHref,n=t.primaryCTATarget,i=t.onPrimaryCTAClick;var s=N()("p-global_banner__button ","p-global_banner__button--primary");return h.a.createElement(x["b"],{className:s,onClick:i,href:r,target:n,size:"medium","data-qa":"global_banner_primaryCTA_button"},a)}},{key:"renderHeadingIcon",value:function e(){var t=this.props.headingIconPath;if(!t)return null;var a={backgroundImage:"url("+t+")"};return h.a.createElement("div",{className:"p-global_banner__heading_icon",style:a})}},{key:"renderHeading",value:function e(){var t=this.props.headingText;return h.a.createElement("div",{className:"p-global_banner__heading display_flex"},this.renderHeadingIcon(),h.a.createElement("h1",{className:"p-global_banner__heading_text","data-qa":"global_banner_heading_text"},t))}},{key:"renderBanner",value:function e(){var t=this.props,a=t.primaryCTAText,r=t.secondaryCTAText,n=t.bannerAriaLabel,i=t.bannerContainerClass,s=t.isPersistent;var o=s?"p-global_banner--persistent":"p-global_banner--ephemeral";var l=N()("p-global_banner",o,i);return h.a.createElement("div",{className:l,"data-qa":"global_banner",role:"banner","aria-label":n},this.renderHeading(),this.renderBody(),h.a.createElement("div",{className:"p-global_banner__buttons"},a&&this.renderPrimaryCTAButton(),r&&this.renderSecondaryCTAButton()),!s&&this.renderCloseIcon())}},{key:"render",value:function e(){if(this.props.isPersistent)return this.renderBanner();return h.a.createElement("div",{className:"p-global_banner__container"},this.renderBanner())}}]);return t}(m["PureComponent"]);B.displayName="GlobalBanner";B.defaultProps=U;var q=B;var G=a(3547);var H=new w["b"]("notification_banner");var W={imgSrc:"",imgAlt:"",bannerAriaLabel:"",headerText:"",bodyText:"",focusOnHeader:false,bodyClass:"",bodyIcon:"",bannerContainerClass:"",goButtonText:"",goButtonClass:"",onGo:T["noop"],showGoButton:true,isLearnMoreButton:false,shouldCloseOnGo:true,cancelButtonText:void 0,cancelButtonClass:"",onCancel:T["noop"],cancelHref:void 0,cancelTarget:void 0,showCancelButton:true,shouldCloseOnCancel:true,showCloseIcon:false,onCloseIcon:T["noop"],onCloseBanner:T["noop"],forceDisableIA:false,bannerPrefs:{}};var V=function(e){p()(t,e);function t(e){var a;n()(this,t);a=l()(this,u()(t).call(this,e));a.headerRef=h.a.createRef();Object(E["a"])(k()(a),["handleGoButton","handleCancelButton","handleCloseIcon"]);return a}s()(t,[{key:"componentDidMount",value:function e(){this.props.focusOnHeader&&this.headerRef.current&&this.headerRef.current.focus()}},{key:"closeBanner",value:function e(){var t=this.props,a=t.onCloseBanner,r=t.bannerPrefs;this.props.closeBanner({bannerPrefs:r});a()}},{key:"handleCancelButton",value:function e(){var t=this.props,a=t.onCancel,r=t.shouldCloseOnCancel;r&&this.closeBanner();a()}},{key:"handleCloseIcon",value:function e(){var t=this.props.onCloseIcon;this.closeBanner();t()}},{key:"handleGoButton",value:function e(){var t=this.props,a=t.onGo,r=t.shouldCloseOnGo;r&&this.closeBanner();a()}},{key:"renderBody",value:function e(){var t=this.props,a=t.bodyText,r=t.bodyClass,n=t.bodyIcon;if(!a)return null;var i=N()("p-message_pane_banner__body",r);return h.a.createElement("div",{className:i},n&&h.a.createElement(D["a"],{type:n,size:"inherit",className:"p-message_pane_banner__body_icon"}),a)}},{key:"renderCancelButton",value:function e(){var t=this.props,a=t.cancelButtonClass,r=t.cancelHref,n=t.cancelTarget;var i=N()("p-message_pane_banner__button","p-message_pane_banner__button--cancel",a);var s=this.props.cancelButtonText||H.t("Skip for Now");return h.a.createElement(x["b"],{className:i,onClick:this.handleCancelButton,href:r,target:n,size:"small",type:"outline","data-qa":"message_pane_banner_cancel_button"},s)}},{key:"renderCloseIcon",value:function e(){return h.a.createElement(x["c"],{"aria-label":H.t("Close"),className:"p-message_pane_banner__close_icon",onClick:this.handleCloseIcon,"data-qa":"message_pane_banner_close_icon"},h.a.createElement(D["a"],{type:"times"}))}},{key:"renderGoButton",value:function e(){var t=this.props,a=t.goButtonText,r=t.goButtonClass,n=t.isLearnMoreButton;var i=n?H.t("Learn More"):H.t("Show Me");var s=N()("p-message_pane_banner__button ","p-message_pane_banner__button--go",r);return h.a.createElement(x["b"],{className:s,onClick:this.handleGoButton,size:"small","data-qa":"message_pane_banner_go_button"},a||i)}},{key:"renderHeader",value:function e(){var t=this.props,a=t.headerText,r=t.imgSrc,n=t.imgAlt;if(!a)return null;return h.a.createElement("div",{className:"p-message_pane_banner__header"},r&&h.a.createElement("div",{className:"p-message_pane_banner__header_img_container"},h.a.createElement("img",{src:r,alt:n,className:"p-message_pane_banner__header_img","data-qa":"message_pane_banner_header_img"})),h.a.createElement("div",{className:"display_flex justify_content_center"},h.a.createElement("h1",{className:"p-message_pane_banner__header_text",ref:this.headerRef,tabIndex:-1},a)))}},{key:"render",value:function e(){var t=this.props,a=t.headerText,r=t.bodyText,n=t.bannerAriaLabel,i=t.goButtonText,s=t.cancelButtonText,o=t.showGoButton,l=t.showCancelButton,c=t.showCloseIcon,u=t.bannerContainerClass,d=t.forceDisableIA,p=t.isIAP1Enabled;var m=N()("p-message_pane_banner",u);if(!d&&p)return h.a.createElement(q,{bannerAriaLabel:n,headingText:a,bodyText:r,primaryCTAText:i,onPrimaryCTAClick:this.handleGoButton,secondaryCTAText:s,onSecondaryCTAClick:this.handleCancelButton,secondaryCTAHref:this.secondaryCTAHref,secondaryCTATarget:this.secondaryCTATarget,onCloseIconClick:this.handleCloseIcon});return h.a.createElement("div",{className:m,role:"banner","aria-label":n},this.renderHeader(),this.renderBody(),h.a.createElement("div",{className:"p-message_pane_banner__button_container"},l&&this.renderCancelButton(),o&&this.renderGoButton()),c&&this.renderCloseIcon())}}]);return t}(m["PureComponent"]);V.displayName="MessagePaneBanner";V.defaultProps=W;var K=function e(t){return{isIAP1Enabled:Object(P["e"])(t)}};var z={closeBanner:M["closeBanner"]};var Q=Object(f["connect"])(K,z)(V);function Y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function J(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(a),true).forEach(function(t){y()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Y(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var X=new w["b"]("client");var Z="btn_show_me";var $="btn_close";var ee={countPref:"activation_msg_limit_banner_cta_count",tsPref:"activation_msg_limit_banner_cta_last_ts"};var te=["keydown","mousedown","touchstart"];var ae=function(e){p()(t,e);function t(e){var a;n()(this,t);a=l()(this,u()(t).call(this,e));a.teamMenuEl=null;a.menuItemEls=null;a.limitMeterMenuItemEl=null;a.limitMeterInitialStyles=null;a.teamMenuInitialStyles=null;Object(E["a"])(k()(a),["onGo","onClose","removeLimitMeterHighlight"]);return a}s()(t,[{key:"componentDidMount",value:function e(){this.clog({action:I["UiAction"].IMPRESSION})}},{key:"onClose",value:function e(){this.clog({action:I["UiAction"].CLICK,ui_properties:{element_type:I["ElementType"].BUTTON,element_name:$}})}},{key:"onGo",value:function e(){var t=this;this.clog({action:I["UiAction"].CLICK,ui_properties:{element_type:I["ElementType"].BUTTON,element_name:Z}});var a=document.querySelector("#team-menu-trigger");if(!a){Object(S["openAuthenticatedUrlInBrowser"])(this.props.team,"/admin/stats");return}a.click();setTimeout(function(){t.addLimitMeterHighlight()},100)}},{key:"addLimitMeterHighlight",value:function e(){var t=this;this.teamMenuEl=document.querySelector(".p-classic_nav__team_menu");this.menuItemEls=document.getElementsByClassName("c-menu_item__li");var a=document.querySelector(".p-classic_nav__team_messages_limit_meter");this.limitMeterMenuItemEl=a&&a.closest(".c-menu_item__li");if(!this.teamMenuEl||!this.menuItemEls.length||!this.limitMeterMenuItemEl)return;this.limitMeterInitialStyles=this.limitMeterMenuItemEl.getAttribute("style");this.teamMenuInitialStyles=this.teamMenuEl.getAttribute("style");this.limitMeterMenuItemEl.style.boxShadow="0 0 0 99999px rgba(0, 0, 0, .4)";this.limitMeterMenuItemEl.style.position="relative";this.limitMeterMenuItemEl.style.zIndex=99999;this.teamMenuEl.style.overflow="visible";for(var r=0;r<this.menuItemEls.length;r++)this.menuItemEls.item(r).style.pointerEvents="none";this.limitMeterMenuItemEl.style.pointerEvents="auto";te.forEach(function(e){document.addEventListener(e,t.removeLimitMeterHighlight)})}},{key:"clog",value:function e(t){var a=this.props,r=a.clogger,n=a.messagesCount,i=a.totalUsers,s=a.totalChannels;var o=J({step:I["UiStep"].BANNER_ACTIVATION_MSG_LIMIT},t);r.track(I["EventId"].UPGRDEXP_MSG_LIM_ACTIVATION_BANNER,{limit_meter_messages_count:n,num_members_minus_bots:i,num_of_channels:s,contexts:{ui_context:o}})}},{key:"removeLimitMeterHighlight",value:function e(){var t=this;this.teamMenuEl.setAttribute("style",this.teamMenuInitialStyles);this.limitMeterMenuItemEl.setAttribute("style",this.limitMeterInitialStyles);for(var a=0;a<this.menuItemEls.length;a++)this.menuItemEls.item(a).style.pointerEvents="auto";te.forEach(function(e){document.removeEventListener(e,t.removeLimitMeterHighlight)})}},{key:"render",value:function e(){var t=this.props,a=t.totalUsers,r=t.totalChannels,n=t.messagesCount,i=t.teamName;var s=X.t("{name_of_workspace} is on a roll",{name_of_workspace:Object(w["q"])(i)});var o=X.rt("Your team\u2019s now <b>{num_of_members} members</b> strong, with <b>{num_of_messages} messages</b> sent across <b>{num_of_channels} channels</b>. You can track your team\u2019s progress via the main menu.",{num_of_members:a,num_of_messages:n,num_of_channels:r});var l=X.t("Show Me");return h.a.createElement(Q,{headerText:s,bodyText:o,goButtonText:l,onGo:this.onGo,showCancelButton:false,showCloseIcon:true,onCloseIcon:this.onClose,bannerPrefs:ee})}}]);return t}(m["PureComponent"]);ae.displayName="ActivationMsgLimitBanner";var re=function e(t){return{team:Object(C["d"])(t),clogger:Object(j["a"])({state:t})}};var ne=Object(f["connect"])(re)(ae);var ie=a(38);var se=a(784);var oe=a(32);var le=a(43);var ce=new w["b"]("send_btn");var ue={countPref:"i18n_japan_beta_send_btn_banner_cta_count",tsPref:"i18n_japan_beta_send_btn_banner_cta_last_ts"};var de=I["UiStep"].BANNER_JAPAN_BETA_SEND_BTN;var pe=I["EventId"].UPGRDEXP_I18N_BANNER;var me=function(e){p()(t,e);function t(e){var a;n()(this,t);a=l()(this,u()(t).call(this,e));a.onPrefLinkClick=a.onPrefLinkClick.bind(k()(a));return a}s()(t,[{key:"componentDidMount",value:function e(){var t=this.props.clogger;t.track(pe,{contexts:{ui_context:{step:de,action:I["UiAction"].IMPRESSION}}})}},{key:"UNSAFE_componentWillUpdate",value:function e(t){var a=this.props,r=a.hasSendButton,n=a.sendButtonAutoSet;n===t.sendButtonAutoSet&&r===t.hasSendButton||this.props.closeBanner()}},{key:"onPrefLinkClick",value:function e(){var t=this.props.clogger;t.track(pe,{contexts:{ui_context:{step:de,action:I["UiAction"].CLICK,ui_element:I["UiElement"].PREFS_BUTTON}}});this.props.openPrefsModal({activeSection:"advanced",activeSubsection:"msg_input_send_btn_label"});this.props.closeBanner()}},{key:"renderBodyText",value:function e(){var t=this;return h.a.createElement("div",null,ce.rt("Send a message with a quick click, or by pressing <Keys>keys</Keys>",{},function(){return h.a.createElement("div",{className:"inline_block"},h.a.createElement("span",{className:"c-keyboard_key c-keyboard_key--slim"},Object(oe["isMac"])()?"\u2318":"Ctrl"),h.a.createElement("span",{className:"c-keyboard_key c-keyboard_key--slim"},"Enter"))}),h.a.createElement("br",null),ce.rt("Don\u2018t like the change? You can always switch back in <Link>your preferences</Link>.",{},function(e){var a=e.text;return h.a.createElement(le["a"],{onClick:t.onPrefLinkClick},a)}))}},{key:"render",value:function e(){var t=ce.t("Just for Japan: a button for sending");var a=ce.t("Got It");var r="p-message_pane_banner__body--taller-line-height";return h.a.createElement(Q,{headerText:t,bodyText:this.renderBodyText(),bodyClass:r,goButtonText:a,showCancelButton:false,showCloseIcon:true,bannerPrefs:ue})}}]);return t}(m["PureComponent"]);me.displayName="I18nJapanBetaSendBtnBanner";var he=function e(t){return{hasSendButton:Object(ie["k"])(t,"msg_input_send_btn"),sendButtonAutoSet:Object(ie["k"])(t,"msg_input_send_btn_auto_set"),clogger:Object(j["a"])({state:t})}};function ve(e){return{closeBanner:M["closeBanner"],openPrefsModal:function t(){return e(se["a"].apply(void 0,arguments))}}}var fe={CLOG_STEP:de,CLOG_EVENT_ID:pe};var be=Object(f["connect"])(he,ve)(me);var ge=a(1707);var _e=a(80);var ye=a(86);var Oe=new w["b"]("notification_banner");var ke={countPref:"local_discount_awareness_banner_cta_count",tsPref:"local_discount_awareness_banner_cta_last_ts",hidePref:"local_discount_awareness_banner_cta_hide"};var Ee=I["UiStep"].BANNER_LOCAL_DISCOUNT_AWARENESS_BANNER;var Ce=function(e){p()(t,e);function t(e){var a;n()(this,t);a=l()(this,u()(t).call(this,e));Object(E["a"])(k()(a),["onGo","onCloseIcon","onCancel"]);return a}s()(t,[{key:"componentDidMount",value:function e(){this.clog({action:I["UiAction"].IMPRESSION,ui_properties:{element_type:I["ElementType"].BANNER,element_name:"local_discount_awareness_banner"}})}},{key:"onCancel",value:function e(){this.clog({action:I["UiAction"].CLOSE,ui_element:I["UiElement"].SKIP_FOR_NOW_BUTTON,ui_properties:{element_type:I["ElementType"].BUTTON,element_name:"skip_for_now_button"}})}},{key:"onCloseIcon",value:function e(){this.clog({action:I["UiAction"].CLOSE,ui_element:I["UiElement"].BTN_CLOSE,ui_properties:{element_type:I["ElementType"].X,element_name:"btn_close"}})}},{key:"onGo",value:function e(){var t=this.props.goToPlansPage;this.clog({action:I["UiAction"].CLICK,ui_element:I["UiElement"].PRICING_BUTTON,is_primary_cta:true,ui_properties:{element_type:I["ElementType"].BUTTON,element_name:"pricing_button"}},true);t()}},{key:"getContent",value:function e(){var t=this.props,a=t.discountPercent,r=t.country,n=t.localDiscountAwarenessExperiment;var i=N()("p-message_pane_banner__header_icon","p-message_pane_banner__header_icon--"+r.toLowerCase());var s=h.a.createElement("div",null,h.a.createElement("div",{className:i}),"treatment1"===n?Oe.rt("Get a {discountPercent}% discount on a paid plan",{discountPercent:a}):Oe.rt("Upgrade to access paid features \u2014 at {discountPercent}% off",{discountPercent:a}));return{headerText:s,bodyText:Oe.rt("For a limited time, teams in {country} can get {discountPercent}% off when upgrading to a paid plan. Once you upgrade, your team will be able to see and search all past messages and files, add guests to your workspace, and more.",{country:ge["a"][r].name,discountPercent:a}),cancelButtonText:Oe.t("Not Now"),goButtonText:Oe.t("See Upgrade Options")}}},{key:"clog",value:function e(t,a){var r=this.props.clogger;var n=Object(T["defaults"])(t,{step:Ee});r.track(I["EventId"].GROWTH_LOCAL_DISCOUNT,{contexts:{ui_context:n}});a&&r.track(I["EventId"].GROWTH_PRICING,{contexts:{ui_context:n}})}},{key:"render",value:function e(){var t=this.getContent();return h.a.createElement(Q,{headerText:t.headerText,bodyClass:"p-message_pane_banner__body--widest-text",bodyText:t.bodyText,cancelButtonText:t.cancelButtonText,goButtonText:t.goButtonText,showCloseIcon:true,onGo:this.onGo,onCancel:this.onCancel,onCloseIcon:this.onCloseIcon,bannerPrefs:ke})}}]);return t}(m["PureComponent"]);Ce.displayName="LocalDiscountAwarenessBanner";var Se=function e(t){return{clogger:Object(j["a"])({state:t}),goToPlansPage:function e(){return Object(S["openAuthenticatedUrlInBrowser"])(Object(C["d"])(t),Object(ye["j"])({entryPoint:"local_discount_awareness_banner"}))},localDiscountAwarenessExperiment:Object(_e["getGroupForUser"])(t,"local_discount_awareness")}};var we=Object(f["connect"])(Se)(Ce);var je=a(295);var Ie=a(11);function Te(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function Ae(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Te(Object(a),true).forEach(function(t){y()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Te(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Ne=function(e){p()(t,e);function t(e){var a;n()(this,t);a=l()(this,u()(t).call(this,e));Object(E["a"])(k()(a),["onGo","onCloseIcon","onCancel"]);return a}s()(t,[{key:"componentDidMount",value:function e(){this.clog({action:I["UiAction"].IMPRESSION,ui_properties:{element_type:I["ElementType"].BANNER,element_name:this.props.clogData.elementName}})}},{key:"onCancel",value:function e(){this.clog({action:I["UiAction"].CLOSE,ui_properties:{element_type:I["ElementType"].BUTTON,element_name:"skip_for_now_button"}})}},{key:"onCloseIcon",value:function e(){this.clog({action:I["UiAction"].CLOSE,ui_properties:{element_type:I["ElementType"].X,element_name:"btn_close"}})}},{key:"onGo",value:function e(){var t=this.props.goToPlansPage;this.clog({action:I["UiAction"].CLICK,is_primary_cta:true,ui_properties:{element_type:I["ElementType"].BUTTON,element_name:"pricing_button"}},true);t()}},{key:"clog",value:function e(t,a){var r=this.props,n=r.clogData,i=r.clogger;var s=Ae({step:n.step},t);i.track(n.eventId,{contexts:{ui_context:s}});a&&i.track(I["EventId"].GROWTH_PRICING,{contexts:{ui_context:s}})}},{key:"render",value:function e(){var t=this.props,a=t.cancelButtonText,r=t.goButtonText,n=t.headerText,i=t.bodyText,s=t.bannerPrefs;return h.a.createElement(Q,{bodyClass:"p-message_pane_banner__body--widest-text",bodyText:i,headerText:n,cancelButtonText:a,goButtonText:r,showCloseIcon:true,onGo:this.onGo,onCancel:this.onCancel,onCloseIcon:this.onCloseIcon,bannerPrefs:s})}}]);return t}(m["Component"]);Ne.displayName="DiscountBanner";var Pe=function e(t,a){return{clogger:Object(j["a"])({state:t}),goToPlansPage:function e(){return Object(S["openAuthenticatedUrlInBrowser"])(Object(C["d"])(t),Object(ye["j"])({entryPoint:a.clogData.elementName}))}}};var Me=Object(f["connect"])(Pe)(Ne);var De=new w["b"]("notification_banner");var xe={step:I["UiStep"].TENURED_TEAMS_DISCOUNT_AWARENESS_BANNER,eventId:I["EventId"].GROWTH_PRICING,elementName:"tenured_discount_awareness_banner"};var Re={countPref:"tenured_discount_awareness_banner_cta_count",tsPref:"tenured_discount_awareness_banner_cta_last_ts",hidePref:"tenured_discount_awareness_banner_cta_hide"};var Fe=function(e){p()(t,e);function t(){n()(this,t);return l()(this,u()(t).apply(this,arguments))}s()(t,[{key:"getContent",value:function e(){var t=N()("p-message_pane_banner__header_icon","p-message_pane_banner__header_icon--tenured-team");var a=this.props,r=a.discountPercent,n=a.expirationTs,i=a.featureTargetedPromotionalDiscounts;if(!i)return null;var s=h.a.createElement("div",null,h.a.createElement("div",{className:t}),De.rt("Get {discountPercent}% off our Standard and Plus plans",{discountPercent:r}));var o=De.rt("As a thank you for the time your team\u2019s been on Slack, here\u2019s {discountPercent}% off your upgrade, available through {expirationDate}. Your team will have access to features like group video calls, shared channels, and an unlimited, searchable message history.",{discountPercent:r,expirationDate:Object(je["a"])(n,"{date_long}")});return{headerText:s,bodyText:o}}},{key:"render",value:function e(){if(!this.props.featureTargetedPromotionalDiscounts)return null;var t=this.getContent();return h.a.createElement(Me,{goButtonText:De.t("See Upgrade Options"),cancelButtonText:De.t("Not Now"),headerText:t.headerText,bodyText:t.bodyText,bannerPrefs:Re,clogData:xe})}}]);return t}(m["PureComponent"]);Fe.displayName="TenuredDiscountAwarenessBanner";var Le=function e(t){return{featureTargetedPromotionalDiscounts:Object(Ie["isFeatureEnabled"])(t,"feature_targeted_promotional_discounts")}};var Ue=Object(f["connect"])(Le)(Fe);var Be=new w["b"]("notification_banner");var qe={step:I["UiStep"].TENURED_TEAMS_DISCOUNT_ONE_WEEK_LEFT_BANNER,eventId:I["EventId"].GROWTH_PRICING,elementName:"tenured_discount_one_week_left_banner"};var Ge={countPref:"one_week_left_tenured_discount_banner_cta_count",tsPref:"one_week_left_tenured_discount_banner_cta_last_ts",hidePref:"one_week_left_tenured_discount_banner_cta_hide"};var He=function(e){p()(t,e);function t(){n()(this,t);return l()(this,u()(t).apply(this,arguments))}s()(t,[{key:"getContent",value:function e(){var t=this.props,a=t.discountPercent,r=t.expirationTs,n=t.featureTargetedPromotionalDiscounts;var i=N()("p-message_pane_banner__header_icon","p-message_pane_banner__header_icon--tenured-team");if(!n)return null;var s=h.a.createElement("div",null,h.a.createElement("div",{className:i}),Be.rt("Just for you: {discountPercent}% off Standard and Plus plans",{discountPercent:a}));var o=Be.rt("As a thank you for the time your team\u2019s been on Slack, here\u2019s {discountPercent}% off your upgrade, available through {expirationDate}. Your team will have access to features like group video calls, shared channels, and an unlimited, searchable message history.",{discountPercent:a,expirationDate:Object(je["a"])(r,"{date_long}")});return{headerText:s,bodyText:o}}},{key:"render",value:function e(){if(!this.props.featureTargetedPromotionalDiscounts)return null;var t=this.getContent();return h.a.createElement(Me,{goButtonText:Be.t("See Upgrade Options"),cancelButtonText:Be.t("Not Now"),headerText:t.headerText,bodyText:t.bodyText,bannerPrefs:Ge,clogData:qe})}}]);return t}(m["PureComponent"]);He.displayName="OneWeekLeftTenuredDiscountBanner";var We=function e(t){return{featureTargetedPromotionalDiscounts:Object(Ie["isFeatureEnabled"])(t,"feature_targeted_promotional_discounts")}};var Ve=Object(f["connect"])(We)(He);var Ke=new w["b"]("notification_banner");var ze={step:I["UiStep"].TENURED_TEAMS_DISCOUNT_ONE_DAY_LEFT_BANNER,eventId:I["EventId"].GROWTH_PRICING,elementName:"tenured_discount_one_day_left_banner"};var Qe={countPref:"one_day_left_tenured_discount_banner_cta_count",tsPref:"one_day_left_tenured_discount_banner_cta_last_ts",hidePref:"one_day_left_tenured_discount_banner_cta_hide"};var Ye=function(e){p()(t,e);function t(){n()(this,t);return l()(this,u()(t).apply(this,arguments))}s()(t,[{key:"getContent",value:function e(){var t=this.props,a=t.discountPercent,r=t.expirationTs,n=t.featureTargetedPromotionalDiscounts;var i=N()("p-message_pane_banner__header_icon","p-message_pane_banner__header_icon--tenured-team");if(!n)return null;var s=h.a.createElement("div",null,h.a.createElement("div",{className:i}),Ke.rt("Last day to get {discountPercent}% off Standard and Plus plans",{discountPercent:a}));var o=Ke.rt("As a thank you for the time your team\u2019s been on Slack, here\u2019s {discountPercent}% off your upgrade, available through {expirationDate}. Your team will have access to features like group video calls, shared channels, and an unlimited, searchable message history.",{discountPercent:a,expirationDate:Object(je["a"])(r,"{date_long}")});return{headerText:s,bodyText:o}}},{key:"render",value:function e(){if(!this.props.featureTargetedPromotionalDiscounts)return null;var t=this.getContent();return h.a.createElement(Me,{goButtonText:Ke.t("See Upgrade Options"),cancelButtonText:Ke.t("Not Now"),headerText:t.headerText,bodyText:t.bodyText,bannerPrefs:Qe,clogData:ze})}}]);return t}(m["PureComponent"]);Ye.displayName="OneDayLeftTenuredDiscountBanner";var Je=function e(t){return{featureTargetedPromotionalDiscounts:Object(Ie["isFeatureEnabled"])(t,"feature_targeted_promotional_discounts")}};var Xe=Object(f["connect"])(Je)(Ye);var Ze=a(87);var $e=a(20);var et=a(9);var tt=a(780);function at(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function rt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?at(Object(a),true).forEach(function(t){y()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):at(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var nt={isSharedChannel:false,sharedTeamNames:[],bodyClass:"",bodyIcon:"",bannerContainerClass:"",onGoUrl:"",goButtonText:"",headerText:"",showCloseIcon:true,showGoButton:true,renderBodyText:T["noop"],onCloseBanner:T["noop"]};var it=function(e){p()(t,e);function t(e){var a;n()(this,t);a=l()(this,u()(t).call(this,e));Object(E["a"])(k()(a),["onGo","onCloseIcon","renderBodyText"]);return a}s()(t,[{key:"componentDidMount",value:function e(){this.clog({action:I["UiAction"].IMPRESSION})}},{key:"onCloseIcon",value:function e(){this.clog({action:I["UiAction"].CLICK,ui_properties:{element_type:I["ElementType"].BUTTON,element_name:"close"}})}},{key:"onGo",value:function e(){var t=this.props,a=t.onGoUrl,r=t.team;this.clog({action:I["UiAction"].CLICK,ui_properties:{element_type:I["ElementType"].BUTTON,element_name:"upgrade"}});Object(S["openAuthenticatedUrlInBrowser"])(r,a)}},{key:"clog",value:function e(t){var a=this.props,r=a.clogStep,n=a.clogEvent,i=a.clogger;var s=[I["EventId"].GROWTH_PRICING,n];var o=rt({step:r},t);s.forEach(function(e){i.track(e,{contexts:{ui_context:o}})})}},{key:"renderBodyText",value:function e(){var t=this.props,e=t.renderBodyText,a=t.sharedTeamNames;return e(a)}},{key:"render",value:function e(){var t=this.props,a=t.isSharedChannel,r=t.headerText,n=t.goButtonText,i=t.bannerPrefs,s=t.bodyClass,o=t.bodyIcon,l=t.bannerContainerClass,c=t.showCloseIcon,u=t.showGoButton,d=t.onCloseBanner;if(!a)return null;return h.a.createElement(Q,{headerText:r,bodyText:this.renderBodyText(),goButtonText:n,showCancelButton:false,showCloseIcon:c,onGo:this.onGo,onCloseIcon:this.onCloseIcon,onCloseBanner:d,bannerPrefs:i,bodyClass:s,bannerContainerClass:l,bodyIcon:o,showGoButton:u,forceDisableIA:true})}}]);return t}(m["PureComponent"]);it.displayName="EscTrialBanner";it.defaultProps=nt;var st=function e(t){var a=Object(Ze["a"])(t);var r=Object($e["e"])(t,a);var n=Object(et["isExternallySharedChannel"])(r);var i=[];if(n){var s=Object(et["getPendingAndConnectedTeamIds"])(t,r);Object(T["isEmpty"])(s)||(i=Object(T["map"])(s,function(e){var a=Object(C["k"])(t,e);return Object(S["isUnknown"])(a)?h.a.createElement(tt["a"],{type:"unknown"}):Object(S["getTeamDisplayName"])(a)}))}return{isSharedChannel:n,sharedTeamNames:i,clogger:Object(j["a"])({state:t}),team:Object(C["d"])(t)}};var ot=Object(f["connect"])(st)(it);var lt=new w["b"]("trial_expiration_banners");var ct={countPref:"two_weeks_left_esc_trial_cta_count",tsPref:"two_weeks_left_esc_trial_cta_last_ts"};var ut=function(e){p()(t,e);function t(e){var a;n()(this,t);a=l()(this,u()(t).call(this,e));Object(E["a"])(k()(a),["renderBodyText","renderHeaderText"]);return a}s()(t,[{key:"renderBodyText",value:function e(t){var a=this.props.expirationDate;var r=Object(w["i"])(t,{noEscape:true,react:true});return lt.rt("When the trial ends, this channel will <b>no longer be shared</b> with {shared_team_name}. Upgrade by {expiration_date} to keep all the features of the Standard plan.",{expiration_date:a,shared_team_name:r})}},{key:"renderHeaderText",value:function e(){var t=this.props.numDaysLeft;return lt.t("Heads up: you have {num_of_days} more days on your free trial",{num_of_days:t})}},{key:"render",value:function e(){var t=this.props.productId;var a=lt.t("Upgrade Now");return h.a.createElement(ot,{bannerPrefs:ct,clogStep:I["UiStep"].BANNER_SHARED_CHANNELS_TRIAL_TWO_WEEK_REMINDER,clogEvent:I["EventId"].UPGRDEXP_FREE_TRIAL_FOR_SC,onGoUrl:ye["a"]+"?s=1&p="+t+"&entry_point=two_weeks_left_esc_banner",goButtonText:a,headerText:this.renderHeaderText(),renderBodyText:this.renderBodyText})}}]);return t}(m["PureComponent"]);ut.displayName="TwoWeeksLeftEscTrialBanner";var dt={CHECKOUT_URL:ye["a"]};var pt=ut;var mt=new w["b"]("trial_expiration_banners");var ht={countPref:"one_week_left_esc_trial_cta_count",tsPref:"one_week_left_esc_trial_cta_last_ts"};var vt=function(e){p()(t,e);function t(e){var a;n()(this,t);a=l()(this,u()(t).call(this,e));Object(E["a"])(k()(a),["renderBodyText","renderHeaderText"]);return a}s()(t,[{key:"renderBodyText",value:function e(t){var a=this.props.expirationDate;var r=Object(w["i"])(t,{noEscape:true,react:true});return mt.rt("<b>You won\u2019t be able to use this channel with {shared_team_name}</b> afterward, even if you upgrade later. To keep sharing this channel, upgrade before <span>{expiration_date}.</span>",{expiration_date:a,shared_team_name:r,fallbackHash:"decd823ab360b2e8c20d6fbcd615ae1c1c450d9e"},function(e){var t=e.text,a=e.tag;if("b"===a)return h.a.createElement("strong",{className:"sk_raspberry_red"},t);return h.a.createElement("span",{className:"nowrap"},t)})}},{key:"renderHeaderText",value:function e(){var t=this.props.numDaysLeft;return mt.t("Only {num_of_days} days left on your free trial",{num_of_days:t})}},{key:"render",value:function e(){var t=this.props.productId;var a=mt.t("Upgrade Now");return h.a.createElement(ot,{bannerPrefs:ht,clogStep:I["UiStep"].BANNER_SHARED_CHANNELS_TRIAL_ONE_WEEK_REMINDER,clogEvent:I["EventId"].UPGRDEXP_FREE_TRIAL_FOR_SC,onGoUrl:ye["a"]+"?s=1&p="+t+"&entry_point=one_week_left_esc_trial_banner",goButtonText:a,headerText:this.renderHeaderText(),renderBodyText:this.renderBodyText})}}]);return t}(m["PureComponent"]);vt.displayName="OneWeekLeftEscTrialBanner";var ft={CHECKOUT_URL:ye["a"]};var bt=vt;function gt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function _t(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?gt(Object(a),true).forEach(function(t){y()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):gt(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var yt=new w["b"]("trial_expiration_banners");var Ot="add_payments_details";var kt="close";var Et="get_quote";var Ct={countPref:"seven_days_left_trial_cta_count",tsPref:"seven_days_left_trial_cta_last_ts"};var St=function(e){p()(t,e);function t(e){var a;n()(this,t);a=l()(this,u()(t).call(this,e));Object(E["a"])(k()(a),["onGo","onClose","onCancel"]);return a}s()(t,[{key:"componentDidMount",value:function e(){this.clog({action:I["UiAction"].IMPRESSION})}},{key:"onCancel",value:function e(){this.clog({action:I["UiAction"].CLICK,is_primary_cta:false,ui_properties:{element_type:I["ElementType"].BUTTON,element_name:Et}})}},{key:"onClose",value:function e(){this.clog({action:I["UiAction"].CLICK,is_primary_cta:false,ui_properties:{element_type:I["ElementType"].BUTTON,element_name:kt}})}},{key:"onGo",value:function e(){var t=this.props,a=t.team,r=t.productId;this.clog({action:I["UiAction"].CLICK,is_primary_cta:true,ui_properties:{element_type:I["ElementType"].BUTTON,element_name:Ot}});Object(S["openAuthenticatedUrlInBrowser"])(a,ye["a"]+"?s=1&p="+r+"&entry_point=seven_days_left_trial_banner")}},{key:"getHeaderText",value:function e(){var t=this.props,a=t.numDaysLeft,r=t.team;var n=Object(S["isOnStandardPlan"])(r)?yt.t("Slack Standard"):yt.t("Slack Plus");return a<7?yt.rt("Your trial of {plan_level} ends in less than a week",{plan_level:n}):yt.rt("Your trial of {plan_level} ends in 1 week",{plan_level:n})}},{key:"clog",value:function e(t){var a=this.props,r=a.clogger,n=a.team;var i=Object(S["isOnStandardPlan"])(n)?"standard_trial":"plus_trial";var s=_t({step:I["UiStep"].BANNER_TRIAL_ONE_WEEK_REMINDER,step_variant:i,entry_point:"client_boot"},t);r.track(I["EventId"].UPGRDEXP_TRIAL,{contexts:{ui_context:s}})}},{key:"render",value:function e(){var t=this.props.team;var a=Object(S["isOnStandardPlan"])(t);var r=this.getHeaderText();var n=a?"p-message_pane_banner--bg_standard":"p-message_pane_banner--bg_plus";var i=yt.rt("Get a quote to see how much Slack will cost for your team.{break}Ready to buy? Just add your payment details.",{break:h.a.createElement("br",null)});var s=yt.t("Add Payment Details");var o=yt.t("Get Quote");var l="plans/estimate?level="+(a?"std":"plus");return h.a.createElement(Q,{headerText:r,bodyText:i,goButtonText:s,onGo:this.onGo,shouldCloseOnGo:false,cancelHref:l,cancelTarget:"_self",shouldCloseOnCancel:false,bannerContainerClass:n,showCancelButton:true,onCancel:this.onCancel,cancelButtonText:o,showCloseIcon:true,onCloseIcon:this.onClose,bannerPrefs:Ct})}}]);return t}(m["PureComponent"]);St.displayName="SevenDaysLeftTrialBanner";var wt=function e(t){return{team:Object(C["d"])(t),clogger:Object(j["a"])({state:t})}};var jt=Object(f["connect"])(wt)(St);var It=new w["b"]("trial_expiration_banners");var Tt={countPref:"three_days_left_esc_trial_cta_count",tsPref:"three_days_left_esc_trial_cta_last_ts"};var At=function(e){p()(t,e);function t(e){var a;n()(this,t);a=l()(this,u()(t).call(this,e));Object(E["a"])(k()(a),["renderBodyText"]);return a}s()(t,[{key:"renderBodyText",value:function e(t){return It.rt("Upgrade before your free trial ends on {expiration_date} to keep sharing this channel with {shared_team_name}. Otherwise, this channel will be permanently disconnected. (You can start a new shared channel if you decide to upgrade later.)",{expiration_date:this.props.expirationDate,shared_team_name:Object(w["i"])(t,{noEscape:true,react:true})})}},{key:"render",value:function e(){var t=this.props.productId;return h.a.createElement(ot,{bannerPrefs:Tt,clogStep:I["UiStep"].BANNER_SHARED_CHANNELS_TRIAL_THREE_DAY_REMINDER,onGoUrl:ye["a"]+"?s=1&p="+t+"&entry_point=three_days_left_esc_trial_banner",clogEvent:I["EventId"].GROWTH_PLANS_PAGE_TRIALS,goButtonText:It.t("Upgrade Now"),headerText:It.t("Upgrade your workspace to keep sharing this channel"),renderBodyText:this.renderBodyText,bodyClass:"p-message_pane_banner__body--widest-text"})}}]);return t}(m["PureComponent"]);At.displayName="ThreeDaysLeftEscTrialBanner";var Nt=At;function Pt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function Mt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Pt(Object(a),true).forEach(function(t){y()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Pt(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Dt=new w["b"]("trial_expiration_banners");var xt="add_payments_details";var Rt="close";var Ft="get_quote";var Lt={countPref:"three_days_left_trial_cta_count",tsPref:"three_days_left_trial_cta_last_ts"};var Ut=function(e){p()(t,e);function t(e){var a;n()(this,t);a=l()(this,u()(t).call(this,e));Object(E["a"])(k()(a),["onGo","onClose","onCancel"]);return a}s()(t,[{key:"componentDidMount",value:function e(){this.clog({action:I["UiAction"].IMPRESSION})}},{key:"onCancel",value:function e(){this.clog({action:I["UiAction"].CLICK,is_primary_cta:false,ui_properties:{element_type:I["ElementType"].BUTTON,element_name:Ft}})}},{key:"onClose",value:function e(){this.clog({action:I["UiAction"].CLICK,is_primary_cta:false,ui_properties:{element_type:I["ElementType"].BUTTON,element_name:Rt}})}},{key:"onGo",value:function e(){var t=this.props,a=t.team,r=t.productId;this.clog({action:I["UiAction"].CLICK,is_primary_cta:true,ui_properties:{element_type:I["ElementType"].BUTTON,element_name:xt}});Object(S["openAuthenticatedUrlInBrowser"])(a,ye["a"]+"?s=1&p="+r+"&entry_point=three_days_left_trial_banner")}},{key:"getPropsForPlan",value:function e(){var t=this.props,a=t.team,r=t.numDaysLeft;if(Object(S["isOnStandardPlan"])(a))return{headerText:Dt.t("Your trial of Slack Standard ends in {number_days_left} days",{number_days_left:r}),bodyText:Dt.t("Add your payment details to keep features like group video calls, shared channels, and an unlimited, searchable message history"),bannerContainerClass:"p-message_pane_banner--bg_standard",cancelHref:"plans/estimate?level=std"};return{headerText:Dt.t("Your trial of Slack Plus ends in {number_days_left} days",{number_days_left:r}),bodyText:Dt.t("Add your payment details to keep features like group video calls, shared channels, and SAML-based SSO."),bannerContainerClass:"p-message_pane_banner--bg_plus",cancelHref:"plans/estimate?level=plus"}}},{key:"clog",value:function e(t){var a=this.props,r=a.clogger,n=a.team;var i=Object(S["isOnStandardPlan"])(n)?"standard_trial":"plus_trial";var s=Mt({step:I["UiStep"].BANNER_TRIAL_THREE_DAY_REMINDER,step_variant:i,entry_point:"client_boot"},t);r.track(I["EventId"].UPGRDEXP_TRIAL,{contexts:{ui_context:s}})}},{key:"render",value:function e(){var t=this.getPropsForPlan(),a=t.headerText,r=t.bodyText,n=t.bannerContainerClass,i=t.cancelHref;return h.a.createElement(Q,{headerText:a,bodyText:r,goButtonText:Dt.t("Add Payment Details"),onGo:this.onGo,shouldCloseOnGo:false,bannerContainerClass:n,showCancelButton:true,cancelButtonText:Dt.t("Get Quote"),cancelHref:i,cancelTarget:"_self",onCancel:this.onCancel,shouldCloseOnCancel:false,showCloseIcon:true,onCloseIcon:this.onClose,bannerPrefs:Lt})}}]);return t}(m["PureComponent"]);Ut.displayName="ThreeDaysLeftTrialBanner";var Bt=function e(t){return{team:Object(C["d"])(t),clogger:Object(j["a"])({state:t})}};var qt=Object(f["connect"])(Bt)(Ut);var Gt=new w["b"]("free_trial_banners");var Ht={countPref:"in_prod_trial_banner_cta_count",tsPref:"in_prod_trial_banner_cta_last_ts"};var Wt=205;var Vt="UPGRDEXP_FREE_TRIAL_IN_PROD";var Kt="trial";var zt=function(e){p()(t,e);function t(e){var a;n()(this,t);a=l()(this,u()(t).call(this,e));Object(E["a"])(k()(a),["onGo","onCloseIcon"]);return a}s()(t,[{key:"componentDidMount",value:function e(){var t=this.props.clogger;t.track(Vt,{contexts:{ui_context:{step:Wt,action:"impression"}}})}},{key:"onCloseIcon",value:function e(){var t=this.props.clogger;t.track(Vt,{contexts:{ui_context:{step:Wt,action:"close",ui_element:"btn_close"}}})}},{key:"onGo",value:function e(){var t=this.props,a=t.clogger,r=t.team;a.track(Vt,{contexts:{ui_context:{step:Wt,action:"click",ui_element:"learn_more_btn"}}});Object(S["openAuthenticatedUrlInBrowser"])(r,Kt)}},{key:"getContent",value:function e(){return{headerText:Gt.t("Start your free trial of the Standard plan"),bodyText:Gt.t("With unlimited searchable messages, you\u2019ll never lose access to your conversations \u2014 or to things like project details, important docs, and key decisions made along the way.")}}},{key:"render",value:function e(){var t=this.getContent();if(Object(T["isEmpty"])(t))return null;return h.a.createElement(Q,{headerText:t.headerText,bodyText:t.bodyText,showCancelButton:false,showCloseIcon:true,isLearnMoreButton:true,onGo:this.onGo,onCloseIcon:this.onCloseIcon,bannerPrefs:Ht})}}]);return t}(m["PureComponent"]);zt.displayName="InProdTrialMessagePaneBanner";var Qt=function e(t){return{clogger:Object(j["a"])({state:t}),team:Object(C["d"])(t)}};var Yt=Object(f["connect"])(Qt)(zt);var Jt=new w["b"]("free_trial_banners");var Xt={countPref:"in_prod_trial_reminder_banner_cta_count",tsPref:"in_prod_trial_reminder_banner_cta_last_ts"};var Zt=207;var $t="UPGRDEXP_FREE_TRIAL_IN_PROD";var ea="trial";var ta=function(e){p()(t,e);function t(e){var a;n()(this,t);a=l()(this,u()(t).call(this,e));Object(E["a"])(k()(a),["onGo","onCloseIcon"]);return a}s()(t,[{key:"componentDidMount",value:function e(){var t=this.props.clogger;t.track($t,{contexts:{ui_context:{step:Zt,action:"impression"}}})}},{key:"onCloseIcon",value:function e(){var t=this.props.clogger;t.track($t,{contexts:{ui_context:{step:Zt,action:"close",ui_element:"btn_close"}}})}},{key:"onGo",value:function e(){var t=this.props,a=t.clogger,r=t.team;a.track($t,{contexts:{ui_context:{step:Zt,action:"click",ui_element:"learn_more_btn"}}});Object(S["openAuthenticatedUrlInBrowser"])(r,ea)}},{key:"getContent",value:function e(){var t=this.props.expirationDate;return{headerText:Jt.t("Your free trial offer is about to expire"),bodyText:Jt.rt("You still have time to try out the <b>Standard plan</b>. Start your trial by <b>{expiration_date}</b> to explore features like unlimited searchable messages, guest accounts, screen sharing, and more \u2014 free for 30 days. ",{expiration_date:t})}}},{key:"render",value:function e(){var t=this.getContent();return h.a.createElement(Q,{headerText:t.headerText,bodyText:t.bodyText,showCancelButton:false,showCloseIcon:true,isLearnMoreButton:true,onGo:this.onGo,onCloseIcon:this.onCloseIcon,bannerPrefs:Xt})}}]);return t}(m["PureComponent"]);ta.displayName="InProdTrialReminderBanner";var aa=function e(t){return{clogger:Object(j["a"])({state:t}),team:Object(C["d"])(t)}};var ra=Object(f["connect"])(aa)(ta);var na=a(104);var ia=a(653);var sa=new w["b"]("notification_banner");var oa={countPref:"approaching_file_limit_banner_cta_count",tsPref:"approaching_file_limit_banner_cta_last_ts"};var la=200;var ca="UPGRDEXP_ENFORCE_FILE_LIMITS";var ua=function(e){p()(t,e);function t(e){var a;n()(this,t);a=l()(this,u()(t).call(this,e));Object(E["a"])(k()(a),["onGo","onCloseIcon","onDeleteFilesLinkClicked"]);return a}s()(t,[{key:"componentDidMount",value:function e(){var t=this.props.clogger;t.track(ca,{contexts:{ui_context:{step:la,action:"impression"}}})}},{key:"onCloseIcon",value:function e(){var t=this.props.clogger;t.track(ca,{contexts:{ui_context:{step:la,action:"close",ui_element:"btn_close"}}})}},{key:"onDeleteFilesLinkClicked",value:function e(){var t=this.props,a=t.userId,r=t.clogger;this.props.closeBanner({bannerPrefs:oa});this.props.isIAP1Enabled?this.props.openFileBrowser({filters:{from:[a]}}):this.props.showFileList({user:a});r.track(ca,{contexts:{ui_context:{step:la,action:"click",ui_element:"file_storage_link"}}})}},{key:"onGo",value:function e(){var t=this.props,a=t.clogger,r=t.team;a.track(ca,{contexts:{ui_context:{step:la,action:"click",ui_element:"pricing_button"}}});a.track("GROWTH_PRICING",{contexts:{ui_context:{step:la,action:"click",ui_element:"pricing_button"}}});var n=Object(ye["j"])({entryPoint:"approaching_file_limit_banner"});Object(S["openAuthenticatedUrlInBrowser"])(r,n)}},{key:"getBodyText",value:function e(){return sa.rt('If your workspace goes over the free plan\u2019s <span class="bold">5 GB storage limit,</span> older files will no longer be viewable. To access all your files, you can upgrade to a paid plan.')}},{key:"getHeaderText",value:function e(){var t=this.props.team;return sa.rt("{name_of_workspace} is almost out of space",{name_of_workspace:t.name})}},{key:"render",value:function e(){var t=sa.t("See Plans");return h.a.createElement(Q,{headerText:this.getHeaderText(),bodyText:this.getBodyText(),goButtonText:t,showCancelButton:false,showCloseIcon:true,onGo:this.onGo,onCloseIcon:this.onCloseIcon,bannerPrefs:oa})}}]);return t}(m["PureComponent"]);ua.displayName="ApproachingFileLimitBanner";var da=function e(t){return{team:Object(C["d"])(t),userId:Object(Ie["getCurrentUserId"])(t),clogger:Object(j["a"])({state:t}),isIAP1Enabled:Object(P["e"])(t)}};var pa={closeBanner:M["closeBanner"],showFileList:na["h"],openFileBrowser:ia["p"]};var ma=Object(f["connect"])(da,pa)(ua);var ha=new w["b"]("client");var va={countPref:"approaching_msg_limit_banner_cta_count",tsPref:"approaching_msg_limit_banner_cta_last_ts"};var fa=63;var ba="GROWTH_PRICING";var ga=function(e){p()(t,e);function t(e){var a;n()(this,t);a=l()(this,u()(t).call(this,e));Object(E["a"])(k()(a),["onGo","onCloseBanner"]);return a}s()(t,[{key:"componentDidMount",value:function e(){var t=this.props,a=t.messagesCount,r=t.clogger;r.track(ba,{limit_meter_messages_count:a,contexts:{ui_context:{step:fa,action:"impression"}}})}},{key:"onCloseBanner",value:function e(){var t=this.props,a=t.messagesCount,r=t.clogger;r.track(ba,{limit_meter_messages_count:a,contexts:{ui_context:{step:fa,action:"close",ui_element:"skip_for_now_button"}}})}},{key:"onGo",value:function e(){var t=this.props,a=t.messagesCount,r=t.clogger,n=t.goToPlansPage;r.track(ba,{limit_meter_messages_count:a,contexts:{ui_context:{step:fa,action:"click",ui_element:"pricing_button"}}});n()}},{key:"getContent",value:function e(){return{headerText:ha.t("Unlock unlimited messages for your team"),bodyText:ha.t("Your workspace is getting close to the 10,000 message limit for free teams. On Slack\u2019s paid plans, you can see and search unlimited messages.")}}},{key:"render",value:function e(){var t=this.getContent();return h.a.createElement(Q,{headerText:t.headerText,bodyText:t.bodyText,isLearnMoreButton:true,onGo:this.onGo,onCloseBanner:this.onCloseBanner,bannerPrefs:va})}}]);return t}(m["PureComponent"]);ga.displayName="ApproachingMsgLimitBanner";var _a=function e(t){return{clogger:Object(j["a"])({state:t}),goToPlansPage:function e(){return Object(S["openAuthenticatedUrlInBrowser"])(Object(C["d"])(t),Object(ye["j"])({entryPoint:"approaching_msg_limit_banner"}))}}};var ya=Object(f["connect"])(_a)(ga);var Oa=new w["b"]("client");var ka={countPref:"just_reached_msg_limit_banner_cta_count",tsPref:"just_reached_msg_limit_banner_cta_last_ts"};var Ea=64;var Ca="GROWTH_PRICING";var Sa=function(e){p()(t,e);function t(e){var a;n()(this,t);a=l()(this,u()(t).call(this,e));Object(E["a"])(k()(a),["onGo","onCloseBanner"]);return a}s()(t,[{key:"componentDidMount",value:function e(){var t=this.props,a=t.messagesCount,r=t.clogger;r.track(Ca,{limit_meter_messages_count:a,contexts:{ui_context:{step:Ea,action:"impression"}}})}},{key:"onCloseBanner",value:function e(){var t=this.props,a=t.messagesCount,r=t.clogger;r.track(Ca,{limit_meter_messages_count:a,contexts:{ui_context:{step:Ea,action:"close",ui_element:"skip_for_now_button"}}})}},{key:"onGo",value:function e(){var t=this.props,a=t.messagesCount,r=t.clogger,n=t.goToPlansPage;r.track(Ca,{limit_meter_messages_count:a,contexts:{ui_context:{step:Ea,action:"click",ui_element:"pricing_button"}}});n()}},{key:"getCancelButtonText",value:function e(){return Oa.t("Not Now")}},{key:"getContent",value:function e(){return{headerText:Oa.t("You\u2019ve just reached the 10k message limit"),bodyText:Oa.t("Your workspace has over 10,000 messages in it! That\u2019s a lot of conversation and history. Upgrade to a paid plan to make sure you can access all of it whenever you need it.")}}},{key:"render",value:function e(){var t=this.getContent();return h.a.createElement(Q,{headerText:t.headerText,bodyText:t.bodyText,isLearnMoreButton:true,onGo:this.onGo,onCloseBanner:this.onCloseBanner,bannerPrefs:ka,cancelButtonText:this.getCancelButtonText()})}}]);return t}(m["PureComponent"]);Sa.displayName="JustReachedMsgLimitBanner";var wa=function e(t){return{clogger:Object(j["a"])({state:t}),goToPlansPage:function e(){return Object(S["openAuthenticatedUrlInBrowser"])(Object(C["d"])(t),Object(ye["j"])({entryPoint:"just_reached_msg_limit_banner"}))}}};var ja=Object(f["connect"])(wa)(Sa);var Ia=a(595);var Ta=new w["b"]("client");var Aa={countPref:"thirty_days_after_msg_limit_banner_cta_count",tsPref:"thirty_days_after_msg_limit_banner_cta_last_ts"};var Na=65;var Pa="GROWTH_PRICING";var Ma=function(e){p()(t,e);function t(e){var a;n()(this,t);a=l()(this,u()(t).call(this,e));Object(E["a"])(k()(a),["onGo","onCloseBanner"]);return a}s()(t,[{key:"componentDidMount",value:function e(){var t=this.props,a=t.messagesCount,r=t.clogger;r.track(Pa,{limit_meter_messages_count:a,contexts:{ui_context:{step:Na,action:"impression"}}})}},{key:"onCloseBanner",value:function e(){var t=this.props,a=t.messagesCount,r=t.clogger;r.track(Pa,{limit_meter_messages_count:a,contexts:{ui_context:{step:Na,action:"close",ui_element:"skip_for_now_button"}}})}},{key:"onGo",value:function e(){var t=this.props,a=t.messagesCount,r=t.clogger,n=t.goToPlansPage;r.track(Pa,{limit_meter_messages_count:a,contexts:{ui_context:{step:Na,action:"click",ui_element:"pricing_button"}}});n()}},{key:"getContent",value:function e(){var t=this.props.messagesCount;var a=t-1e4;var r=this.roundNumOfMsgsBeyondLimit(a);if(!r||r<0)return null;return{headerText:Ta.t("Your workspace has {num_msgs_beyond_limit} messages more than the 10k limit",{num_msgs_beyond_limit:r}),bodyText:Ta.t("That\u2019s more than {num_msgs_beyond_limit} messages you can\u2019t see or search. On a paid plan, you can easily find and view all past messages \u2014 plus features like guest accounts for contractors, group video calls, and unlimited apps.",{num_msgs_beyond_limit:r})}}},{key:"roundNumOfMsgsBeyondLimit",value:function e(t){if(t>9&&t<100)return 10*Math.floor(t/10);if(t>=100&&t<=999999){var a=100*Math.floor(t/100);return Object(w["n"])(a)}if(t>999999)return Object(Ia["a"])(t);return t}},{key:"render",value:function e(){var t=this.getContent();if(!t)return null;return h.a.createElement(Q,{headerText:t.headerText,bodyText:t.bodyText,isLearnMoreButton:true,onGo:this.onGo,onCloseBanner:this.onCloseBanner,bannerPrefs:Aa})}}]);return t}(m["PureComponent"]);Ma.displayName="ThirtyDaysAfterMsgLimitBanner";var Da=function e(t){return{clogger:Object(j["a"])({state:t}),goToPlansPage:function e(){return Object(S["openAuthenticatedUrlInBrowser"])(Object(C["d"])(t),Object(ye["j"])({entryPoint:"thirty_days_after_msg_limit_banner"}))}}};var xa=Object(f["connect"])(Da)(Ma);var Ra=a(196);var Fa=a.n(Ra);var La=a(16);var Ua=a(34);var Ba=a(21);var qa=a(39);var Ga=a(287);var Ha=a(25);var Wa=a(283);var Va=a(214);var Ka=a(211);var za=a(2089);var Qa=a(589);var Ya=a(2758);var Ja=a(1052);var Xa=a(119);var Za=function(e){p()(t,e);function t(){var e;n()(this,t);e=l()(this,u()(t).apply(this,arguments));e.onClick=function(){e.props.closeBanner();e.props.onButtonClick()};return e}s()(t,[{key:"componentDidMount",value:function e(){"function"===typeof this.props.onMount&&this.props.onMount()}},{key:"render",value:function e(){var t=this.props,a=t.bannerAriaLabel,r=t.imgSrc,n=t.imgAlt,i=t.headerText,s=t.bodyText,o=t.buttonText,l=t.onButtonClick,c=t.isFlexpaneOpen;return h.a.createElement("div",{className:N()("p-message_pane_banner_small",{"p-message_pane_banner_small--with_flex_pane":c}),role:"banner","aria-label":a},h.a.createElement("div",{className:"p-message_pane_banner_small__image_container"},h.a.createElement("img",{className:"p-message_pane_banner_small__image",src:r,alt:n})),h.a.createElement("div",{className:"p-message_pane_banner_small__content"},h.a.createElement("div",{className:"p-message_pane_banner_small__content_header"},i),h.a.createElement("div",null,s)),h.a.createElement("div",{className:"p-message_pane_banner_small__button_container"},h.a.createElement(x["d"],{type:"primary",size:"medium",onClick:l},o)))}}]);return t}(m["PureComponent"]);Za.displayName="MessagePaneBannerSmall";function $a(e){return{isFlexpaneOpen:!!Object(Xa["j"])(e)}}var er={closeBanner:M["closeBanner"]};var tr=Object(f["connect"])($a,er)(Za);function ar(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function rr(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ar(Object(a),true).forEach(function(t){y()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ar(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var nr=new w["b"]("team_creation");var ir={countPref:"team_creation_account_setup_banner_cta_count",tsPref:"team_creation_account_setup_banner_cta_last_ts"};var sr="team_creation_dialog_mount_point";var or={hasInvited:false,workflow:null,activeWorkflowTask:"",completeWorkflowTask:T["noop"],openTeamCreatorOnboardingDialog:T["noop"],currentChannelId:"",showSecondBanner:T["noop"],openInviteDialog:T["noop"],clientTheme:"light",fetchWorkflow:T["noop"],hasWelcomePlacePage:false,isWelcomePlaceOnboarding:false,onboardingChannelId:"",onboardingChannelName:"",featureNewxp3279:false,goToWelcomePlace:T["noop"],featureSharedChannelsNewUserTrial:false,pendingApprovalInvitingTeamName:""};var lr=function(e){p()(t,e);function t(e){var a;n()(this,t);a=l()(this,u()(t).call(this,e));Object(E["a"])(k()(a),["openInviteDialog","openTeamCreatorDialog","onClickWelcomePlaceBannerButton"]);return a}s()(t,[{key:"componentDidMount",value:function e(){var t=this.props,a=t.activeWorkflowTask,r=t.workflow,n=t.fetchWorkflow,i=t.isWelcomePlaceOnboarding;"start_team_creator_account_setup"===a&&this.props.completeWorkflowTask({taskSubtype:"start_team_creator_account_setup"});if(!i){this.loadFirstImageForDialog();this.clogBannerChanges({action:"impression"})}r||n()}},{key:"componentDidUpdate",value:function e(t){var a=this.props,r=a.activeWorkflowTask,n=a.currentChannelId,i=a.showSecondBanner,s=a.isWelcomePlaceOnboarding;s||r!==t.activeWorkflowTask&&this.clogBannerChanges({action:"impression"});n!==t.currentChannelId&&i()}},{key:"onClickWelcomePlaceBannerButton",value:function e(t){var a=this.props,r=a.goToWelcomePlace,n=a.hasWelcomePlacePage;this.props.clogger.track(I["EventId"].GROWTH_BANNER_TRACTOR,{contexts:{ui_context:{action:I["UiAction"].CLICK,ui_element:I["UiElement"].BANNER_TRACTOR_WELCOME_PLACE_PRIMARY_CTA,step_variant:n?"open_welcome_place":"open_invite_modal",step:t?I["UiStep"].BANNER_TRACTOR_WELCOME_PLACE_ONBOARDING_CHANNEL:I["UiStep"].BANNER_TRACTOR_WELCOME_PLACE}}});n?r():this.props.openInviteDialog()}},{key:"clogWelcomePlaceBannerImpression",value:function e(t){this.props.clogger.track(I["EventId"].GROWTH_BANNER_TRACTOR,{contexts:{ui_context:{action:I["UiAction"].IMPRESSION,step:t?I["UiStep"].BANNER_TRACTOR_WELCOME_PLACE_ONBOARDING_CHANNEL:I["UiStep"].BANNER_TRACTOR_WELCOME_PLACE}}})}},{key:"clogBannerChanges",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var a=this.props,r=a.activeWorkflowTask,n=a.clogger,i=a.pendingApprovalInvitingTeamName,s=a.featureSharedChannelsNewUserTrial;var o=r;"start_team_creator_account_setup"!==r&&"complete_team_creator_account_setup"!==r&&(o="invite_team_creator_account_setup");var l;var c=i&&s;c&&(l="with_shared_channel_context");n.track(I["EventId"].GROWTH_BANNER_TRACTOR,{contexts:{ui_context:rr({},t,{step:Qa["a"][o],step_variant:l})}})}},{key:"loadFirstImageForDialog",value:function e(){var t=new Image;var a=new Image;var r=Qa["b"][this.props.clientTheme].profile;t.src=r;a.src=r.replace(".png","@2x.png")}},{key:"openInviteDialog",value:function e(){var e=this.props.openInviteDialog;this.clogBannerChanges({action:"click",ui_element:I["UiElement"].BANNER_TRACTOR_PRIMARY_CTA});return e({source:"team_creation_account_setup_banner"})}},{key:"openTeamCreatorDialog",value:function e(){var t=this.props,a=t.teamId,r=t.openTeamCreatorOnboardingDialog;this.clogBannerChanges({action:"click",ui_element:I["UiElement"].BANNER_TRACTOR_PRIMARY_CTA});if(Object(Ua["a"])())return r();return Object(za["a"])(a,document.getElementById(sr))}},{key:"render",value:function e(){var t=this;var a=this.props,r=a.hasInvited,n=a.workflow,i=a.activeWorkflowTask,s=a.featureNewxp3279,o=a.isWelcomePlaceOnboarding,l=a.currentChannelId,c=a.onboardingChannelId,u=a.onboardingChannelName,d=a.featureSharedChannelsNewUserTrial,p=a.pendingApprovalInvitingTeamName;if(null===n||"completed"===n.state&&(r||this.props.nonBotMembersCount>1))return null;if(s&&o){if(!r){var m=c&&l===c;return h.a.createElement(tr,{key:m?"onboarding_channel_variant":"regular_channel_variant",headerText:nr.t("Ready to loop in your team?"),bodyText:m?nr.t("To start using Slack for the #{channelName} project, add some of the people you regularly email about it.",{channelName:u}):nr.t("Slack gives your team a faster, more organized way to communicate \u2014 add a few people to see it in action."),imgSrc:cdn_url+"/876e7/img/tractor/banners/small-banner-tractor-icon.svg",imgAlt:"",bannerAriaLabel:"",buttonText:nr.t("Invite Teammates"),onButtonClick:function e(){return t.onClickWelcomePlaceBannerButton(m)},onMount:function e(){return t.clogWelcomePlaceBannerImpression(m)}})}return null}var v={bodyClass:"p-message_pane_banner__body--wider-text",showCancelButton:false,bannerPrefs:ir,shouldCloseOnGo:false};var f=nr.rt("An admin from <strong>{pendingApprovalInvitingTeamName}</strong> needs to approve this shared channel \u2014 we\u2019ll let you know as soon as that\u2019s done. In the meantime, finish signing up so you\u2019re ready to get to work.",{pendingApprovalInvitingTeamName:p,fallbackHash:"94936558675678d69fe0fe10af6c19589f3aa2da"});var b;if("start_team_creator_account_setup"===i){var g=nr.t("Here it is! The first channel in your team\u2019s Slack workspace");if(p&&d){b=f;g=nr.t("Welcome to Slack!")}else b=r?nr.t("You can send messages here right away \u2014 but to get the most out of Slack, the next steps are to save your account and then get the conversation started."):nr.t("You can send messages here right away \u2013 but to get the most out of Slack, the next step is to save your account and invite a few people to join the conversation.");return h.a.createElement(Q,Fa()({},v,{bannerAriaLabel:nr.t("Account setup banner"),headerText:g,focusOnHeader:true,bodyText:b,onGo:this.openTeamCreatorDialog,imgSrc:cdn_url+"/80588/img/tractor/banners/first_setup@2x.png",goButtonText:nr.t("Finish Signing Up")}))}if("complete_team_creator_account_setup"===i){b=p&&d?f:r?nr.t("To see what teamwork is like in Slack, take a moment to save your account."):nr.t("To see what teamwork is like in Slack, take a moment to save your account and invite some teammates to join your workspace.");return h.a.createElement(Q,Fa()({},v,{bannerAriaLabel:nr.t("Account setup banner"),headerText:nr.t("Save your account and start collaborating"),focusOnHeader:true,bodyText:b,onGo:this.openTeamCreatorDialog,imgSrc:cdn_url+"/80588/img/tractor/banners/second_setup@2x.png",goButtonText:nr.t("Finish Signing Up")}))}if(!r)return h.a.createElement(Q,Fa()({},v,{bannerAriaLabel:nr.t("Invite teammates banner"),headerText:nr.t("Bring your team into Slack"),bodyText:nr.t("Slack is better with teammates \u2013 invite them to start collaborating."),onGo:this.openInviteDialog,imgSrc:cdn_url+"/80588/img/tractor/banners/invite_others@2x.png",goButtonText:nr.t("Add People")}));return null}}]);return t}(m["PureComponent"]);lr.displayName="TeamCreationAccountSetupBanner";lr.defaultProps=or;var cr=function e(t){var a=Object(Ze["a"])(t);var r=false;var n=a&&Object($e["e"])(t,a,r);var i=Object(et["isChannel"])(n)?a:"";var s="";var o=Object(Va["i"])(t);var l=o&&Object($e["e"])(t,o);l&&(s=Object(et["getName"])(l));return{clogger:Object(j["a"])({state:t}),logger:Object(La["a"])({state:t}),teamId:Object(Ba["b"])(t),hasInvited:Object(ie["k"])(t,"has_invited"),workflow:Object(Ga["getWorkflow"])(t),activeWorkflowTask:Object(Ga["getActiveWorkflowTask"])(t),nonBotMembersCount:Object(T["size"])(Object(T["filter"])(Object(Ha["a"])(t),function(e){return!e.is_bot&&!e.is_slackbot})),currentChannelId:i,clientTheme:Object(Wa["getClientTheme"])(t),isWelcomePlaceOnboarding:Object(Va["v"])(t),hasWelcomePlacePage:Object(Va["w"])(t),onboardingChannelId:o,onboardingChannelName:s,featureNewxp3279:Object(Ie["isFeatureEnabled"])(t,"feature_newxp_3279"),featureSharedChannelsNewUserTrial:Object(Ie["isFeatureEnabled"])(t,"feature_shared_channels_new_user_trial")}};var ur=function e(t){return{completeWorkflowTask:function e(){return t(Ga["completeWorkflowTask"].apply(void 0,arguments))},fetchWorkflow:function e(){return t(Object(Ga["fetchTeamCreationWorkflow"])({onlyActive:false}))},showSecondBanner:function e(){return t(Ga["showSecondAccountSetupBanner"].apply(void 0,arguments))},openTeamCreatorOnboardingDialog:function e(){t(Object(qa["openModal"])({element:h.a.createElement(Ya["a"]),name:"team-creator-onboarding-dialog"}))},openInviteDialog:function e(){return t(Ja["a"].apply(void 0,arguments))},goToWelcomePlace:function e(){return t(Object(Ka["a"])({id:"Pwelcome",fromHistory:false,replaceHistoryState:false}))}}};var dr=Object(f["connect"])(cr,ur)(lr);var pr=a(2095);var mr=a(40);var hr=a.n(mr);function vr(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function fr(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?vr(Object(a),true).forEach(function(t){y()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):vr(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var br=new w["b"]("trial_expiration_banners");var gr={countPref:"shared_channel_trial_banner_cta_count",tsPref:"shared_channel_trial_banner_cta_last_ts"};function _r(){return Object(T["once"])(function(e,t){e.track(I["EventId"].CHANNEL_CREATE_FLOW,{contexts:{ui_context:{step:t,action:I["UiAction"].IMPRESSION}}})})}var yr=function(e){p()(t,e);function t(e){var a;n()(this,t);a=l()(this,u()(t).call(this,e));Object(E["a"])(k()(a),["renderBodyText","renderPersistentBodyText","onCloseBanner","onUpgradeLinkClick"]);a.logImpression=_r();return a}s()(t,[{key:"componentDidUpdate",value:function e(){var t=this.props.clogger;var a;a=this.showDismissibleBanner()?this.getDismissibleBannerUiStep():I["UiStep"].SHARED_CHANNEL_TRIAL_PERSISTENT_BANNER;this.logImpression(t,a)}},{key:"onCloseBanner",value:function e(){var t=this.props.bannerData;this.props.updateBanner({name:"shared_channel_trial_banner",data:t})}},{key:"onUpgradeLinkClick",value:function e(){var t=this.props,a=t.productId,r=t.team;var n=ye["a"]+"?s=1&p="+a+"&entry_point=shared_channel_trial_banner";Object(S["openAuthenticatedUrlInBrowser"])(r,n);this.clogUpgradeLink()}},{key:"getDismissibleBannerUiStep",value:function e(){if(this.getNumDaysLeft()<=3)return I["UiStep"].SHARED_CHANNEL_TRIAL_THREE_DAYS_LEFT_BANNER;return I["UiStep"].SHARED_CHANNEL_TRIAL_WELCOME_BANNER}},{key:"getNumDaysLeft",value:function e(){var t=this.props.expirationTs;var a=hr.a.unix(t);var r=hr()();return a.diff(r,"days")}},{key:"clogUpgradeLink",value:function e(){var t=this.props.clogger;var a={step:I["UiStep"].SHARED_CHANNEL_TRIAL_PERSISTENT_BANNER,action:I["UiAction"].CLICK,is_primary_cta:true,ui_properties:{element_type:I["ElementType"].LINK,element_name:"upgrade"}};t.track(I["EventId"].CHANNEL_CREATE_FLOW,{contexts:{ui_context:a}})}},{key:"clogLearnMoreLink",value:function e(t){var a=this.props.clogger;var r={step:t,action:I["UiAction"].CLICK,is_primary_cta:false,ui_properties:{element_type:I["ElementType"].LINK,element_name:"learn_more"}};a.track(I["EventId"].CHANNEL_CREATE_FLOW,{contexts:{ui_context:r}})}},{key:"showDismissibleBanner",value:function e(){var t=this.props,a=t.lastDismissTs,r=t.expirationTs;if(0===a)return true;var n=hr.a.unix(r).subtract(3,"d");var i=hr.a.unix(a);var s=hr()();if(i.isBefore(n)&&s.isAfter(n))return true;return false}},{key:"renderBodyText",value:function e(t){var a=this;var r=this.props.expirationTs;var n=Object(w["i"])(t,{noEscape:true,react:true});if(this.getNumDaysLeft()<=3){var i=hr.a.unix(r).subtract(1,"d").format("MMM DD, YYYY");return br.rt("Once your trial ends, you won\u2019t be able to use this channel with <strong>{sharedTeamNameString}</strong>. Upgrade by {upgradeByDate} to stay connected. <a><strong>Learn More</strong></a>",{sharedTeamNameString:n,upgradeByDate:i,fallbackHash:"a6081dce017fd9204682548170dbb922ed911eaf"},function(e){var t=e.text,r=e.key,n=e.tag;if("a"===n){var i="https://slack.com/help/articles/115004151203";return h.a.createElement(le["a"],{target:"_blank",href:i,key:r,onClick:function e(){return a.clogLearnMoreLink(I["UiStep"].SHARED_CHANNEL_TRIAL_THREE_DAYS_LEFT_BANNER)}},t)}return""})}return br.rt("After your 14-day trial ends, this channel will <strong>no longer be shared</strong> with <strong>{sharedTeamNameString}</strong>. Upgrade to keep this channel and all the features in the Standard plan. <a><strong>Learn More</strong></a>",{sharedTeamNameString:n,fallbackHash:"3e3e4795a66286a28a5d1361c35783235c2bc3fb"},function(e){var t=e.text,r=e.key,n=e.tag;if("a"===n){var i="https://slack.com/help/articles/115004151203";return h.a.createElement(le["a"],{target:"_blank",href:i,key:r,onClick:function e(){return a.clogLearnMoreLink(I["UiStep"].SHARED_CHANNEL_TRIAL_WELCOME_BANNER)}},t)}return""})}},{key:"renderHeaderText",value:function e(){if(this.getNumDaysLeft()<=3)return br.t("Your shared channel is ending soon");return br.t("Welcome to your shared channel")}},{key:"renderPersistentBodyText",value:function e(){var t=this;return br.rt("<strong>Trial ends in {numDaysLeft, plural, =1 {1 day} other {# days}} - </strong> Upgrade to keep this shared channel. <a><strong>Upgrade</strong></a>",{numDaysLeft:this.getNumDaysLeft()},function(e){var a=e.text,r=e.key,n=e.tag;if("a"===n)return h.a.createElement(le["a"],{key:r,onClick:t.onUpgradeLinkClick,"data-qa":"shared_channel_persistent_banner_upgrade_link"},a);return""})}},{key:"render",value:function e(){var t=this.props.productId;var a={bannerPrefs:gr,clogEvent:I["EventId"].CHANNEL_CREATE_FLOW};if(this.showDismissibleBanner()){var r=br.t("Upgrade Now");a=fr({},a,{clogStep:this.getDismissibleBannerUiStep(),onGoUrl:ye["a"]+"?s=1&p="+t+"&entry_point=shared_channel_trial_banner",goButtonText:r,headerText:this.renderHeaderText(),renderBodyText:this.renderBodyText,onCloseBanner:this.onCloseBanner,showCloseIcon:true})}else a=fr({},a,{clogStep:I["UiStep"].SHARED_CHANNEL_TRIAL_PERSISTENT_BANNER,renderBodyText:this.renderPersistentBodyText,bannerContainerClass:"p-message_pane_banner--persistent",bodyClass:"p-message_pane_banner__body--persistent",bodyIcon:"clock-o",showCloseIcon:false,showGoButton:false});return h.a.createElement(ot,a)}}]);return t}(m["PureComponent"]);yr.displayName="SharedChannelTrialBanner";var Or=function e(t){return{lastDismissTs:Object(b["g"])(t),bannerData:Object(b["e"])(t),team:Object(C["d"])(t),clogger:Object(j["a"])({state:t})}};var kr=function e(t){return{updateBanner:function e(){t(pr["o"].apply(void 0,arguments))}}};var Er={CHECKOUT_URL:ye["a"]};var Cr=Object(f["connect"])(Or,kr)(yr);var Sr=a(42);function wr(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function jr(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?wr(Object(a),true).forEach(function(t){y()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):wr(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Ir=new w["b"]("notification_banner");var Tr="upgrade";var Ar="close";var Nr="cancel";var Pr="learn_more";var Mr={countPref:"partner_promo_awareness_banner_cta_count",tsPref:"partner_promo_awareness_banner_cta_last_ts"};var Dr=function(e){p()(t,e);function t(e){var a;n()(this,t);a=l()(this,u()(t).call(this,e));Object(E["a"])(k()(a),["onGo","onClose","onCancel","onLearnMoreClick"]);return a}s()(t,[{key:"componentDidMount",value:function e(){this.clog({action:I["UiAction"].IMPRESSION})}},{key:"onCancel",value:function e(){this.clog({action:I["UiAction"].CLICK,is_primary_cta:false,ui_properties:{element_type:I["ElementType"].BUTTON,element_name:Nr}})}},{key:"onClose",value:function e(){this.clog({action:I["UiAction"].CLICK,is_primary_cta:false,ui_properties:{element_type:I["ElementType"].BUTTON,element_name:Ar}})}},{key:"onGo",value:function e(){var t=this.props.team;this.clog({action:I["UiAction"].CLICK,is_primary_cta:true,ui_properties:{element_type:I["ElementType"].BUTTON,element_name:Tr}});Object(S["openAuthenticatedUrlInBrowser"])(t,Object(ye["j"])({entryPoint:"partner_discount_banner"}))}},{key:"onLearnMoreClick",value:function e(){this.clog({action:I["UiAction"].CLICK,is_primary_cta:false,ui_properties:{element_type:I["ElementType"].LINK,element_name:Pr}})}},{key:"clog",value:function e(t){var a=this.props,r=a.clogger,n=a.shouldShowPartnerPromo;if(!n)return;var i=jr({step:I["UiStep"].PARTNER_PROMO_BANNER,entry_point:"client_boot"},t);r.track(I["EventId"].UPGRDEXP_PARTNER_PROMO_BANNER,{contexts:{ui_context:i}})}},{key:"render",value:function e(){var t=this;var a=this.props.shouldShowPartnerPromo;if(!a)return null;var r=Ir.t("Get up to 50% off top work tools");var n="https://slack.com/help/articles/360041347694";var i=Ir.rt("For a limited time, new teams that upgrade to a yearly Standard or Plus plan will get discounts on Dropbox Business, Google Drive, and Jira Software. <a>Learn more</a>",null,function(e){var a=e.text;return h.a.createElement(le["a"],{href:n,onClick:t.onLearnMoreClick},a)});var s=Ir.t("See Upgrade Options");var o=Ir.t("Not Now");var l="p-message_pane_banner--bg_confetti";var c="p-message_pane_banner__body--wider-text";return h.a.createElement(Q,{headerText:r,bodyText:i,bodyClass:c,goButtonText:s,onGo:this.onGo,shouldCloseOnGo:false,bannerContainerClass:l,showCancelButton:true,onCancel:this.onCancel,shouldCloseOnCancel:true,cancelButtonText:o,showCloseIcon:true,onCloseIcon:this.onClose,bannerPrefs:Mr})}}]);return t}(m["PureComponent"]);Dr.displayName="PartnerDiscountBanner";var xr=function e(t){return{team:Object(C["d"])(t),clogger:Object(j["a"])({state:t}),shouldShowPartnerPromo:!Object(Sr["isAppStoreBuild"])()&&"treatment"===Object(_e["getGroupForUser"])(t,"partner_promos")}};var Rr=Object(f["connect"])(xr)(Dr);var Fr=a(77);var Lr=a(325);function Ur(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function Br(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ur(Object(a),true).forEach(function(t){y()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ur(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var qr=new w["b"]("notification_banner");var Gr={countPref:"education_discount_promo_banner_cta_count",tsPref:"education_discount_promo_banner_last_ts"};var Hr=function(e){p()(t,e);function t(e){var a;n()(this,t);a=l()(this,u()(t).call(this,e));Object(E["a"])(k()(a),["onGo","onClose","onLearnMore"]);return a}s()(t,[{key:"componentDidMount",value:function e(){this.shouldRender()&&this.clog({action:I["UiAction"].IMPRESSION})}},{key:"onLearnMore",value:function e(){this.clog({action:I["UiAction"].CLICK,ui_properties:{element_type:I["ElementType"].BUTTON,element_name:"learn_more"}})}},{key:"onClose",value:function e(){this.clog({action:I["UiAction"].CLICK,ui_properties:{element_type:I["ElementType"].X,element_name:"close"}})}},{key:"onGo",value:function e(){var t=this.props.team;Object(S["openAuthenticatedUrlInBrowser"])(t,"education");this.clog({action:I["UiAction"].CLICK,is_primary_cta:true,ui_properties:{element_type:I["ElementType"].BUTTON,element_name:"apply_now"}})}},{key:"clog",value:function e(t){var a=this.props.clogger;a.track(I["EventId"].UPGRDEXP_EDUCATION_DISCOUNT_PROMO_BANNER,{contexts:{ui_context:Br({step:I["UiStep"].EDUCATION_DISCOUNT_PROMO_BANNER},t)}})}},{key:"shouldRender",value:function e(){return!Object(Sr["isAppStoreBuild"])()}},{key:"render",value:function e(){var t=this.props.featureEducationDiscountPromoBanner;if(!t||!this.shouldRender())return null;var a=qr.t("See if you qualify for an 85% discount on a paid plan");var r=qr.t("The Slack for Education program offers qualifying teams a discount on paid plans. Once you upgrade, your team will get an unlimited message archive, guest accounts for your workspace, and more.");var n=qr.t("Apply Now");var i=qr.t("Learn More");var s="p-message_pane_banner__body--widest-text";var o=Object(Lr["a"])({articleId:206646877,zdLocale:Object(Fr["a"])()});return h.a.createElement(Q,{headerText:a,bodyText:r,bodyClass:s,goButtonText:n,cancelButtonText:i,cancelHref:o,shouldCloseOnCancel:false,showCloseIcon:true,onGo:this.onGo,onCancel:this.onLearnMore,onCloseIcon:this.onClose,bannerPrefs:Gr})}}]);return t}(m["PureComponent"]);Hr.displayName="EducationDiscountPromoBanner";var Wr=function e(t){return{team:Object(C["d"])(t),featureEducationDiscountPromoBanner:Object(Ie["isFeatureEnabled"])(t,"feature_education_discount_promo_banner"),clogger:Object(j["a"])({state:t})}};var Vr=Object(f["connect"])(Wr)(Hr);var Kr={bannerName:"",bannerData:{}};var zr=function(e){p()(t,e);function t(){n()(this,t);return l()(this,u()(t).apply(this,arguments))}s()(t,[{key:"render",value:function e(){var t=this.props,a=t.bannerName,r=t.bannerData;switch(a){case g["e"].JAPAN_SEND_BUTTON:return h.a.createElement(be,null);case g["e"].TENURED_TEAM_DISCOUNT_ONE_WEEK_LEFT:return h.a.createElement(Ve,r);case g["e"].TENURED_TEAM_DISCOUNT_ONE_DAY_LEFT:return h.a.createElement(Xe,r);case g["e"].TENURED_TEAM_DISCOUNT_AWARENESS:return h.a.createElement(Ue,r);case g["e"].EDUCATION_TEAM_DISCOUNT:return h.a.createElement(Vr,null);case g["e"].LOCAL_DISCOUNT_AWARENESS:return h.a.createElement(we,r);case g["e"].ESC_TRIAL:return h.a.createElement(Cr,r);case g["e"].ESC_TRIAL_TWO_WEEKS_LEFT:return h.a.createElement(pt,r);case g["e"].ESC_TRIAL_ONE_WEEK_LEFT:return h.a.createElement(bt,r);case g["e"].ESC_TRIAL_THREE_DAYS_LEFT:return h.a.createElement(Nt,r);case g["e"].TRIAL_SEVEN_DAYS_LEFT:return h.a.createElement(jt,r);case g["e"].TRIAL_THREE_DAYS_LEFT:return h.a.createElement(qt,r);case g["e"].FILE_LIMIT_APPROACHING:return h.a.createElement(ma,null);case g["e"].MESSAGE_LIMIT_ACTIVATION:return h.a.createElement(ne,r);case g["e"].MESSAGE_LIMIT_APPROACHING:return h.a.createElement(ya,r);case g["e"].MESSAGE_LIMIT_JUST_REACHED:return h.a.createElement(ja,r);case g["e"].MESSAGE_LIMIT_THIRTY_DAYS_AFTER:return h.a.createElement(xa,r);case g["e"].TEAM_CREATION_ACCOUNT_SETUP:return h.a.createElement(dr,r);case g["e"].PARTNER_PROMO:return h.a.createElement(Rr,null);case g["e"].IN_PRODUCT_TRIAL:return h.a.createElement(Yt,null);case g["e"].IN_PRODUCT_TRIAL_REMINDER:return h.a.createElement(ra,r);default:return null}}}]);return t}(m["PureComponent"]);zr.displayName="MessagePaneBannerContainer";zr.defaultProps=Kr;var Qr=function e(t){return{bannerName:Object(b["f"])(t),bannerData:Object(b["e"])(t)}};var Yr=t["a"]=Object(f["connect"])(Qr)(zr)},function(e,t,a){"use strict";a.r(t);var r={};a.r(r);a.d(r,"orgUserGroups",function(){return k});a.d(r,"channelMgmt",function(){return T});a.d(r,"mandatoryMobileBrowsers",function(){return A["a"]});a.d(r,"ssoAuth",function(){return N["a"]});var n=a(88);var i=a.n(n);var s=a(1161);var o=a(1162);var l=a(1456);var c=a(1710);var u=a(218);var d=a.n(u);var p=a(2);var m=a(0);var h=a(46);var v=a(16);var f=a(540);var b;function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function _(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(Object(a),true).forEach(function(t){i()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var y=Object(v["b"])();var O=Object(h["b"])((b={},i()(b,f["c"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.groups,r=void 0===a?[]:a;if(!r.length){y.warn("upsertOrgUserGroups: missing groups array");return e}var n;r.forEach(function(t){var a=e[t.id]||{};if(!a)return;n=n||_({},e);n[t.id]=_({},a,{},t)});return n||e}),i()(b,f["l"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.groupId,r=t.memberIds;if(!a||!r){y.warn("setMemberIdsForOrgUserGroupPage: missing groupId and/or memberIds array");return e}var n=e[a]||{};return _({},e,i()({},a,_({},n,{memberIds:d()(r)})))}),i()(b,f["a"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.groupId,r=t.memberIds;if(!a||!r||!r.length){y.warn("addMemberIdsForOrgUserGroupPage: missing groupId and/or memberIds array");return e}var n=e[a]||{};var s=n.memberIds&&n.memberIds.length?Object(p["union"])(n.memberIds,r):d()(r);return _({},e,i()({},a,_({},n,{memberIds:s})))}),i()(b,f["n"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.groupIds;if(!a){y.warn("setUserGroupIdsForGroupList: missing list of groupids");return e}return a.reduce(function(e,t){e[t]={};return e},{})}),i()(b,f["o"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.groupId,r=t.workspaceIds;if(!a||!r){y.warn("setWorkspaceIdsForOrgUserGroup: missing groupId and/or workspaceIds array");return e}var n=e[a]||{};return _({},e,i()({},a,_({},n,{teams:d()(r)})))}),i()(b,f["j"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.groupId,r=t.autoProvisionedTeams,n=void 0===r?[]:r;if(!a||!n){y.warn("setAutoProvisionedTeams: missing groupId and/or teamIds array");return e}var s=e[a]||{};var o=s.autoProvisionedTeams||[];if(!s.autoProvisionedTeams||0===s.autoProvisionedTeams.length)return _({},e,i()({},a,_({},s,{autoProvisionedTeams:d()(n)})));var l=o.map(function(e){return e.team_id});n.forEach(function(e){var t=e&&e.team_id;var a=l.indexOf(t);if(-1===a){o.push(e);return}o[a]=_({},o[a],{},e)});return _({},e,i()({},a,_({},s,{autoProvisionedTeams:d()(o)})))}),i()(b,f["k"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.groupId,r=t.channels,n=void 0===r?[]:r;if(!a||!n)return e;var s=e[a]||{};return _({},e,i()({},a,_({},s,{channels:n})))}),i()(b,f["p"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.autoProvision,r=t.teamId,n=t.userGroupId;if(!r||void 0===a||!n){y.warn("updateAutoProvisionFlag: missing groupId, autoprovision flag and/or teamIds array");return e}var s=e[n]||{};var o=s.autoProvisionedTeams||[];o=o.map(function(e){if(e.team_id===r)return _({},e,{auto_provision:a});return e});return _({},e,i()({},n,_({},s,{autoProvisionedTeams:o})))}),i()(b,f["b"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.groupId,r=t.teamIds;if(!a||!r||!e[a]||!r.length)return e;var n=_({},e[a]);return _({},e,i()({},a,_({},n,{teams:[].concat(d()(n.teams),d()(r))})))}),b),{},{storeKey:"orgUserGroups",persistenceEnabled:false});O.meta={name:"orgUserGroups",key:"orgAdminOrgUserGroupsReducerOrgUserGroups"};O.propTypes=m["default"].objectOf(m["default"].shape({groupIds:m["default"].arrayOf(m["default"].string)}));var k=O;var E=a(5104);var C;function S(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?S(Object(a),true).forEach(function(t){i()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):S(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var j={channels:[],filter:"all",teamId:null,searchQuery:null,sortBy:null,sortDir:null,cursorMark:null,numTotalResults:null,isLoadingNewPage:false,isLoadingNewQuery:null,includePrivate:false};var I=Object(h["b"])((C={},i()(C,E["f"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.channels,r=t.cursorMark,n=t.numTotalResults;var i=w({},e,{channels:[].concat(d()(e.channels),d()(a)),cursorMark:r,numTotalResults:n});return i}),i()(C,E["e"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.channelId,r=t.channelGuestCount;var n=Object(p["find"])(e.channels,{id:a});var i=w({},n,{guest_count:r});var s=w({},e,{channels:e.channels.map(function(e){return e.id===a?i:e})});return s}),i()(C,E["l"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.sortBy,r=t.sortDir,n=t.channels,i=t.cursorMark,s=t.numTotalResults;var o=w({},e,{sortBy:a,sortDir:r,channels:n,cursorMark:i,numTotalResults:s});return o}),i()(C,E["k"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.channels,r=t.cursorMark,n=t.numTotalResults,i=t.searchQuery;var s=w({},e,{searchQuery:i,channels:a,cursorMark:r,numTotalResults:n});return s}),i()(C,E["g"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.channels,r=t.cursorMark,n=t.numTotalResults;var i=w({},e,{channels:a,cursorMark:r,numTotalResults:n});return i}),i()(C,E["i"],function(e,t){var a=w({},e,{isLoadingNewPage:t});return a}),i()(C,E["j"],function(e,t){var a=w({},e,{isLoadingNewQuery:t});return a}),i()(C,E["d"],function(e,t){var a=w({},e,{filter:t});return a}),i()(C,E["m"],function(e,t){var a=w({},e,{teamId:t});return a}),i()(C,E["h"],function(e,t){var a=w({},e,{includePrivate:t});return a}),C),j,{storeKey:"channelMgmt",persistenceEnabled:false});I.meta={name:"channelMgmt",key:"orgAdminChannelMgmtReducerChannelMgmt"};I.propTypes={channels:m["default"].array,filter:m["default"].string,teamId:m["default"].string,searchQuery:m["default"].string,sortBy:m["default"].string,sortDir:m["default"].string,cursorMark:m["default"].string,numTotalResults:m["default"].number,isLoadingNewPage:m["default"].bool,isLoadingNewQuery:m["default"].bool,includePrivate:m["default"].bool};var T=I;var A=a(4239);var N=a(2955);function P(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function M(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?P(Object(a),true).forEach(function(t){i()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):P(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function D(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.orgId;return Object(l["a"])({teamId:t,reducers:M({},c,{},r),middlewares:Object(s["a"])(o["a"])})}var x=a(52);Object(x["a"])("interop.orgAdmin",{configureOrgAdminStore:D})},,,function(e,t,a){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";var r=a(6);var n=new r["b"]("files_types");var i={apl:{mimeType:"text/apl",label:function e(){return"APL"},loader:function e(){return Promise.all([a.e(1),a.e(246)]).then(a.t.bind(null,2874,7))}},applescript:{mimeType:"text/applescript",label:function e(){return n.t("AppleScript")}},asciiarmor:{mimeType:"application/pgp",label:function e(){return"PGP"},loader:function e(){return Promise.all([a.e(1),a.e(247)]).then(a.t.bind(null,2875,7))}},"asn.1":{mimeType:"asn.1",label:function e(){return"ASN.1"},loader:function e(){return Promise.all([a.e(1),a.e(248)]).then(a.t.bind(null,2876,7))}},aspx:{mimeType:"application/x-aspx",label:function e(){return"ASP.NET"},loader:function e(){return Promise.all([Promise.all([a.e(1),a.e(3),a.e(5),a.e(266)]).then(a.t.bind(null,2871,7)),i.csharp.loader()])}},asterisk:{mimeType:"text/x-asterisk",label:function e(){return"Asterisk"},loader:function e(){return Promise.all([a.e(1),a.e(249)]).then(a.t.bind(null,2877,7))}},brainfuck:{mimeType:"text/x-brainfuck",label:function e(){return"Bf"},loader:function e(){return Promise.all([a.e(1),a.e(250)]).then(a.t.bind(null,2878,7))}},c:{mimeType:"text/x-csrc",label:function e(){return n.t("C")},loader:function e(){return Promise.all([a.e(1),a.e(4)]).then(a.t.bind(null,1606,7))}},cfm:{mimeType:"text/plain",label:function e(){return n.t("ColdFusion")}},clojure:{mimeType:"text/x-clojure",label:function e(){return n.t("Clojure")},loader:function e(){return Promise.all([a.e(1),a.e(197)]).then(a.t.bind(null,4602,7))}},cmake:{mimeType:"text/x-cmake",label:function e(){return"CMake"},loader:function e(){return Promise.all([a.e(1),a.e(251)]).then(a.t.bind(null,2879,7))}},cobol:{mimeType:"text/x-cobol",label:function e(){return"Cobol"},loader:function e(){return Promise.all([a.e(1),a.e(252)]).then(a.t.bind(null,2880,7))}},coffeescript:{mimeType:"text/x-coffeescript",label:function e(){return n.t("CoffeeScript")},loader:function e(){return Promise.all([a.e(1),a.e(198)]).then(a.t.bind(null,4603,7))}},cpp:{mimeType:"text/x-c++src",label:function e(){return n.t("C++")},loader:function e(){return Promise.all([a.e(1),a.e(4)]).then(a.t.bind(null,1606,7))}},crystal:{mimeType:"text/x-crystal",label:function e(){return n.t("Crystal")},loader:function e(){return Promise.all([a.e(1),a.e(200)]).then(a.t.bind(null,4604,7))}},csharp:{mimeType:"text/x-csharp",label:function e(){return n.t("C#")},loader:function e(){return Promise.all([a.e(1),a.e(4)]).then(a.t.bind(null,1606,7))}},css:{mimeType:"text/css",label:function e(){return n.t("CSS")},loader:function e(){return Promise.all([a.e(1),a.e(3)]).then(a.t.bind(null,4600,7))}},csv:{mimeType:"text/csv",label:function e(){return n.t("CSV")}},cypher:{mimeType:"application/x-cypher-query",label:function e(){return n.t("Cypher")},loader:function e(){return Promise.all([a.e(1),a.e(201)]).then(a.t.bind(null,4605,7))}},d:{mimeType:"text/x-d",label:function e(){return n.t("D")},loader:function e(){return Promise.all([a.e(1),a.e(202)]).then(a.t.bind(null,4606,7))}},dart:{mimeType:"application/dart",label:function e(){return n.t("Dart")},loader:function e(){return Promise.all([a.e(1),a.e(4),a.e(203)]).then(a.t.bind(null,4607,7))}},diff:{mimeType:"text/x-diff",label:function e(){return n.t("Diff")},loader:function e(){return Promise.all([a.e(1),a.e(204)]).then(a.t.bind(null,4608,7))}},django:{mimeType:"text/x-django",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.featureSnippetModesI18n;return a?n.t("Django Template"):"Django"},loader:function e(){return Promise.all([a.e(1),a.e(3),a.e(5),a.e(309)]).then(a.t.bind(null,2881,7))}},dockerfile:{mimeType:"text/x-dockerfile",label:function e(){return n.t("Docker")},loader:function e(){return Promise.all([a.e(1),a.e(205)]).then(a.t.bind(null,4609,7))}},dtd:{mimeType:"application/xml-dtd",label:function e(){return"DTD"},loader:function e(){return Promise.all([a.e(1),a.e(253)]).then(a.t.bind(null,2882,7))}},dylan:{mimeType:"text/x-dylan",label:function e(){return"Dylan"},loader:function e(){return Promise.all([a.e(1),a.e(254)]).then(a.t.bind(null,2883,7))}},ebnf:{mimeType:"text/x-ebnf",label:function e(){return"EBNF"},loader:function e(){return Promise.all([a.e(1),a.e(255)]).then(a.t.bind(null,2884,7))}},ecl:{mimeType:"text/x-ecl",label:function e(){return"ECL"},loader:function e(){return Promise.all([a.e(1),a.e(256)]).then(a.t.bind(null,2885,7))}},eiffel:{mimeType:"text/x-eiffel",label:function e(){return"Eiffel"},loader:function e(){return Promise.all([a.e(1),a.e(257)]).then(a.t.bind(null,2886,7))}},ejs:{mimeType:"application/x-ejs",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.featureSnippetModesI18n;return a?n.t("Embedded JavaScript"):"EJS"},loader:function e(){return Promise.all([Promise.all([a.e(1),a.e(3),a.e(5),a.e(266)]).then(a.t.bind(null,2871,7)),i.javascript.loader()])}},elixir:{mimeType:"text/x-elixir",label:function e(){return"Elixir"},loader:function e(){return Promise.all([a.e(1),a.e(258)]).then(a.bind(null,2887))}},elm:{mimeType:"text/x-elm",label:function e(){return"Elm"},loader:function e(){return Promise.all([a.e(1),a.e(259)]).then(a.t.bind(null,2888,7))}},erb:{mimeType:"application/x-erb",label:function e(){return"ERB"},loader:function e(){return Promise.all([Promise.all([a.e(1),a.e(3),a.e(5),a.e(266)]).then(a.t.bind(null,2871,7)),i.ruby.loader()])}},erlang:{mimeType:"text/x-erlang",label:function e(){return n.t("Erlang")},loader:function e(){return Promise.all([a.e(1),a.e(206)]).then(a.t.bind(null,4610,7))}},factor:{mimeType:"text/x-factor",label:function e(){return"Factor"},loader:function e(){return Promise.all([a.e(1),a.e(260)]).then(a.t.bind(null,2889,7))}},fcl:{mimeType:"text/x-fcl",label:function e(){return"FCL"},loader:function e(){return Promise.all([a.e(1),a.e(261)]).then(a.t.bind(null,2890,7))}},forth:{mimeType:"text/x-forth",label:function e(){return"Forth"},loader:function e(){return Promise.all([a.e(1),a.e(262)]).then(a.t.bind(null,2891,7))}},fortran:{mimeType:"text/x-fortran",label:function e(){return n.t("Fortran")},loader:function e(){return Promise.all([a.e(1),a.e(207)]).then(a.t.bind(null,4611,7))}},fsharp:{mimeType:"text/x-fsharp",label:function e(){return n.t("F#")},loader:function e(){return Promise.all([a.e(1),a.e(219)]).then(a.t.bind(null,2511,7))}},gas:{mimeType:"gas",label:function e(){return"Gas"},loader:function e(){return Promise.all([a.e(1),a.e(263)]).then(a.t.bind(null,2892,7))}},gherkin:{mimeType:"text/x-feature",label:function e(){return n.t("Gherkin")},loader:function e(){return Promise.all([a.e(1),a.e(208)]).then(a.t.bind(null,4612,7))}},go:{mimeType:"text/x-go",label:function e(){return n.t("Go")},loader:function e(){return Promise.all([a.e(1),a.e(209)]).then(a.t.bind(null,4613,7))}},graphql:{mimeType:"graphql",label:function e(){return"GraphQL"},loader:function e(){return Promise.all([a.e(1),a.e(264)]).then(a.t.bind(null,2893,7))}},groovy:{mimeType:"text/x-groovy",label:function e(){return n.t("Groovy")},loader:function e(){return Promise.all([a.e(1),a.e(210)]).then(a.t.bind(null,4614,7))}},gss:{mimeType:"text/x-gss",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.featureSnippetModesI18n;return a?n.t("Closure Stylesheets (GSS)"):"GSS"},loader:function e(){return Promise.all([a.e(1),a.e(3)]).then(a.t.bind(null,4600,7))}},haml:{mimeType:"text/x-haml",label:function e(){return"HAML"},loader:function e(){return Promise.all([a.e(1),a.e(3),a.e(5),a.e(310)]).then(a.t.bind(null,2894,7))}},handlebars:{mimeType:"text/x-handlebars-template",label:function e(){return n.t("Handlebars")},loader:function e(){return Promise.all([a.e(1),a.e(211)]).then(a.t.bind(null,4615,7))}},haskell:{mimeType:"text/x-haskell",label:function e(){return n.t("Haskell")},loader:function e(){return Promise.all([a.e(1),a.e(212)]).then(a.t.bind(null,4616,7))}},haskell_literate:{mimeType:"text/x-literate-haskell",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.featureSnippetModesI18n;return a?n.t("Literate Haskell"):"LHS"},loader:function e(){return Promise.all([a.e(1),a.e(265)]).then(a.t.bind(null,2896,7))}},haxe:{mimeType:"text/x-haxe",label:function e(){return n.t("Haxe")},loader:function e(){return Promise.all([a.e(1),a.e(213)]).then(a.t.bind(null,4617,7))}},html:{mimeType:"text/html",label:function e(){return n.t("HTML")},loader:function e(){return Promise.all([a.e(1),a.e(3),a.e(5),a.e(214)]).then(a.t.bind(null,4601,7))}},http:{mimeType:"message/http",label:function e(){return"HTTP"},loader:function e(){return Promise.all([a.e(1),a.e(267)]).then(a.t.bind(null,2897,7))}},idl:{mimeType:"text/x-idl",label:function e(){return"IDL"},loader:function e(){return Promise.all([a.e(1),a.e(268)]).then(a.t.bind(null,2898,7))}},java:{mimeType:"text/x-java",label:function e(){return n.t("Java")},loader:function e(){return Promise.all([a.e(1),a.e(4)]).then(a.t.bind(null,1606,7))}},javascript:{mimeType:"text/javascript",label:function e(){return n.t("JavaScript/JSON")},loader:function e(){return Promise.all([a.e(1),a.e(5),a.e(215)]).then(a.t.bind(null,2102,7))}},jinja2:{mimeType:"text/jinja2",label:function e(){return"Jinja2"},loader:function e(){return Promise.all([a.e(1),a.e(269)]).then(a.t.bind(null,2899,7))}},jsp:{mimeType:"application/x-jsp",label:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.featureSnippetModesI18n;return a?"JavaServer Pages":"JSP"},loader:function e(){return Promise.all([Promise.all([a.e(1),a.e(3),a.e(5),a.e(266)]).then(a.t.bind(null,2871,7)),i.java.loader()])}},jsx:{mimeType:"text/jsx",label:function e(){return n.t("JSX")},loader:function e(){return Promise.all([a.e(1),a.e(5),a.e(215)]).then(a.t.bind(null,2512,7))}},julia:{mimeType:"text/x-julia",label:function e(){return n.t("Julia")},loader:function e(){return Promise.all([a.e(1),a.e(216)]).then(a.t.bind(null,4618,7))}},kotlin:{mimeType:"text/x-kotlin",label:function e(){return n.t("Kotlin")},loader:function e(){return Promise.all([a.e(1),a.e(4)]).then(a.t.bind(null,1606,7))}},latex:{mimeType:"text/x-stex",label:function e(){return n.t("LaTeX/sTeX")},loader:function e(){return Promise.all([a.e(1),a.e(235)]).then(a.t.bind(null,4619,7))}},less:{mimeType:"text/x-less",label:function e(){return"LESS"},loader:function e(){return Promise.all([a.e(1),a.e(3)]).then(a.t.bind(null,4600,7))}},lisp:{mimeType:"text/x-common-lisp",label:function e(){return n.t("Lisp")},loader:function e(){return Promise.all([a.e(1),a.e(199)]).then(a.t.bind(null,4620,7))}},livescript:{mimeType:"text/x-livescript",label:function e(){return"LiveScript"},loader:function e(){return Promise.all([a.e(1),a.e(270)]).then(a.t.bind(null,2900,7))}},lua:{mimeType:"text/x-lua",label:function e(){return n.t("Lua")},loader:function e(){return Promise.all([a.e(1),a.e(217)]).then(a.t.bind(null,4621,7))}},markdown:{mimeType:"yaml-frontmatter",label:function e(){return n.t("Markdown (raw)")},loader:function e(){return Promise.all([Promise.all([a.e(1),a.e(307)]).then(a.t.bind(null,2901,7)),Promise.all([a.e(1),a.e(462)]).then(a.t.bind(null,2902,7))])}},mathematica:{mimeType:"text/x-mathematica",label:function e(){return n.t("Mathematica")},loader:function e(){return Promise.all([a.e(1),a.e(218)]).then(a.t.bind(null,4623,7))}},matlab:{mimeType:"text/x-octave",label:function e(){return n.t("MATLAB")},loader:function e(){return Promise.all([a.e(1),a.e(221)]).then(a.t.bind(null,4624,7))}},mbox:{mimeType:"application/mbox",label:function e(){return"mbox"},loader:function e(){return Promise.all([a.e(1),a.e(271)]).then(a.t.bind(null,2903,7))}},mirc:{mimeType:"text/mirc",label:function e(){return"mIRC"},loader:function e(){return Promise.all([a.e(1),a.e(272)]).then(a.t.bind(null,2904,7))}},modelica:{mimeType:"modelica",label:function e(){return"Modelica"},loader:function e(){return Promise.all([a.e(1),a.e(273)]).then(a.t.bind(null,2905,7))}},mscgen:{mimeType:"text/x-mscgen",label:function e(){return"MscGen"},loader:function e(){return Promise.all([a.e(1),a.e(274)]).then(a.t.bind(null,2906,7))}},mumps:{mimeType:"text/x-mumps",label:function e(){return n.t("MUMPS")},loader:function e(){return Promise.all([a.e(1),a.e(220)]).then(a.t.bind(null,4625,7))}},mysql:{mimeType:"text/x-mysql",label:function e(){return"SQLite"},loader:function e(){return Promise.all([a.e(1),a.e(464)]).then(a.t.bind(null,4640,7))}},nginx:{mimeType:"text/x-nginx-conf",label:function e(){return"Nginx"},loader:function e(){return Promise.all([a.e(1),a.e(275)]).then(a.t.bind(null,2907,7))}},nsis:{mimeType:"text/x-nsis",label:function e(){return"NSIS"},loader:function e(){return Promise.all([a.e(1),a.e(276)]).then(a.t.bind(null,2908,7))}},ntriples:{mimeType:"application/n-triples",label:function e(){return"NTriples"},loader:function e(){return Promise.all([a.e(1),a.e(277)]).then(a.t.bind(null,2909,7))}},objc:{mimeType:"text/x-objectivec",label:function e(){return n.t("Objective-C")},loader:function e(){return Promise.all([a.e(1),a.e(4)]).then(a.t.bind(null,1606,7))}},ocaml:{mimeType:"text/x-ocaml",label:function e(){return n.t("OCaml")},loader:function e(){return Promise.all([a.e(1),a.e(219)]).then(a.t.bind(null,2511,7))}},oz:{mimeType:"text/x-oz",label:function e(){return"Oz"},loader:function e(){return Promise.all([a.e(1),a.e(278)]).then(a.t.bind(null,2910,7))}},pascal:{mimeType:"text/x-pascal",label:function e(){return n.t("Pascal")},loader:function e(){return Promise.all([a.e(1),a.e(222)]).then(a.t.bind(null,4626,7))}},pegjs:{mimeType:"pegjs",label:function e(){return"PEG.js"},loader:function e(){return Promise.all([a.e(1),a.e(5),a.e(279)]).then(a.t.bind(null,2911,7))}},perl:{mimeType:"text/x-perl",label:function e(){return n.t("Perl")},loader:function e(){return Promise.all([a.e(1),a.e(463)]).then(a.t.bind(null,4627,7))}},php:{mimeType:"application/x-httpd-php",label:function e(){return n.t("PHP")},loader:function e(){return Promise.all([a.e(1),a.e(3),a.e(5),a.e(4),a.e(223)]).then(a.t.bind(null,4628,7))}},pig:{mimeType:"text/x-pig",label:function e(){return n.t("Pig")},loader:function e(){return Promise.all([a.e(1),a.e(224)]).then(a.t.bind(null,4629,7))}},powershell:{mimeType:"application/x-powershell",label:function e(){return n.t("PowerShell")},loader:function e(){return Promise.all([a.e(1),a.e(225)]).then(a.t.bind(null,4630,7))}},properties:{mimeType:"text/x-ini",label:function e(){return"INI"},loader:function e(){return Promise.all([a.e(1),a.e(280)]).then(a.t.bind(null,2912,7))}},protobuf:{mimeType:"text/x-protobuf",label:function e(){return"ProtoBuf"},loader:function e(){return Promise.all([a.e(1),a.e(281)]).then(a.t.bind(null,2913,7))}},pug:{mimeType:"text/x-pug",label:function e(){return"Pug/Jade"},loader:function e(){return Promise.all([a.e(1),a.e(3),a.e(5),a.e(311)]).then(a.t.bind(null,2872,7))}},puppet:{mimeType:"text/x-puppet",label:function e(){return n.t("Puppet")},loader:function e(){return Promise.all([a.e(1),a.e(226)]).then(a.t.bind(null,4631,7))}},python:{mimeType:"text/x-python",label:function e(){return n.t("Python")},loader:function e(){return Promise.all([a.e(1),a.e(227)]).then(a.t.bind(null,4632,7))}},q:{mimeType:"text/x-q",label:function e(){return"Q"},loader:function e(){return Promise.all([a.e(1),a.e(282)]).then(a.t.bind(null,2914,7))}},r:{mimeType:"text/x-rsrc",label:function e(){return n.t("R")},loader:function e(){return Promise.all([a.e(1),a.e(228)]).then(a.t.bind(null,4633,7))}},rpm:{mimeType:"text/x-rpm-spec",label:function e(){return"RPM"},loader:function e(){return Promise.all([a.e(1),a.e(283)]).then(a.t.bind(null,2915,7))}},rst:{mimeType:"text/x-rst",label:function e(){return"reStructuredText"},loader:function e(){return Promise.all([a.e(1),a.e(312)]).then(a.t.bind(null,2916,7))}},ruby:{mimeType:"text/x-ruby",label:function e(){return n.t("Ruby")},loader:function e(){return Promise.all([a.e(1),a.e(229)]).then(a.t.bind(null,4634,7))}},rust:{mimeType:"text/x-rustsrc",label:function e(){return n.t("Rust")},loader:function e(){return Promise.all([a.e(1),a.e(230)]).then(a.t.bind(null,4635,7))}},sas:{mimeType:"text/x-sas",label:function e(){return"SAS"},loader:function e(){return Promise.all([a.e(1),a.e(284)]).then(a.t.bind(null,2917,7))}},sass:{mimeType:"text/x-sass",label:function e(){return n.t("Sass")},loader:function e(){return Promise.all([a.e(1),a.e(3),a.e(231)]).then(a.t.bind(null,4636,7))}},scala:{mimeType:"text/x-scala",label:function e(){return n.t("Scala")},loader:function e(){return Promise.all([a.e(1),a.e(4)]).then(a.t.bind(null,1606,7))}},scheme:{mimeType:"text/x-scheme",label:function e(){return n.t("Scheme")},loader:function e(){return Promise.all([a.e(1),a.e(232)]).then(a.t.bind(null,4637,7))}},scss:{mimeType:"text/x-scss",label:function e(){return"SCSS"},loader:function e(){return Promise.all([a.e(1),a.e(3)]).then(a.t.bind(null,4600,7))}},shell:{mimeType:"text/x-sh",label:function e(){return n.t("Shell")},loader:function e(){return Promise.all([a.e(1),a.e(233)]).then(a.t.bind(null,4638,7))}},sieve:{mimeType:"application/sieve",label:function e(){return"Sieve"},loader:function e(){return Promise.all([a.e(1),a.e(285)]).then(a.t.bind(null,2918,7))}},slim:{mimeType:"text/x-slim",label:function e(){return"Slim"},loader:function e(){return Promise.all([a.e(1),a.e(3),a.e(5),a.e(313)]).then(a.t.bind(null,2919,7))}},smalltalk:{mimeType:"text/x-stsrc",label:function e(){return n.t("Smalltalk")},loader:function e(){return Promise.all([a.e(1),a.e(234)]).then(a.t.bind(null,4639,7))}},smarty:{mimeType:"text/x-smarty",label:function e(){return"Smarty"},loader:function e(){return Promise.all([a.e(1),a.e(286)]).then(a.t.bind(null,2920,7))}},solr:{mimeType:"text/x-solr",label:function e(){return"Solr"},loader:function e(){return Promise.all([a.e(1),a.e(287)]).then(a.t.bind(null,2921,7))}},soy:{mimeType:"text/x-soy",label:function e(){return"Soy"},loader:function e(){return Promise.all([a.e(1),a.e(3),a.e(5),a.e(314)]).then(a.t.bind(null,2922,7))}},sparql:{mimeType:"application/sparql-query",label:function e(){return"SPARQL"},loader:function e(){return Promise.all([a.e(1),a.e(289)]).then(a.t.bind(null,2923,7))}},spreadsheet:{mimeType:"text/x-spreadsheet",label:function e(){return"Spreadsheet"},loader:function e(){return Promise.all([a.e(1),a.e(290)]).then(a.t.bind(null,2924,7))}},sql:{mimeType:"text/x-mysql",label:function e(){return n.t("SQL")},loader:function e(){return Promise.all([a.e(1),a.e(464)]).then(a.t.bind(null,4640,7))}},stylus:{mimeType:"text/x-styl",label:function e(){return"Stylus"},loader:function e(){return Promise.all([a.e(1),a.e(245)]).then(a.t.bind(null,2873,7))}},swift:{mimeType:"text/x-swift",label:function e(){return n.t("Swift")},loader:function e(){return Promise.all([a.e(1),a.e(236)]).then(a.t.bind(null,4641,7))}},tcl:{mimeType:"text/x-tcl",label:function e(){return"Tcl"},loader:function e(){return Promise.all([a.e(1),a.e(291)]).then(a.t.bind(null,2925,7))}},textile:{mimeType:"text/x-textile",label:function e(){return"Textile"},loader:function e(){return Promise.all([a.e(1),a.e(292)]).then(a.t.bind(null,2926,7))}},tiddlywiki:{mimeType:"text/x-tiddlywiki",label:function e(){return"TiddlyWiki "},loader:function e(){return Promise.all([a.e(1),a.e(293)]).then(a.t.bind(null,2927,7))}},tiki:{mimeType:"text/tiki",label:function e(){return"Tiki Wiki"},loader:function e(){return Promise.all([a.e(1),a.e(294)]).then(a.t.bind(null,2928,7))}},toml:{mimeType:"text/x-toml",label:function e(){return"TOML"},loader:function e(){return Promise.all([a.e(1),a.e(295)]).then(a.t.bind(null,2929,7))}},tornado:{mimeType:"text/x-tornado",label:function e(){return"Tornado"},loader:function e(){return Promise.all([a.e(1),a.e(3),a.e(5),a.e(296)]).then(a.t.bind(null,2930,7))}},troff:{mimeType:"text/troff",label:function e(){return"Troff"},loader:function e(){return Promise.all([a.e(1),a.e(297)]).then(a.t.bind(null,2931,7))}},tsv:{mimeType:"text/tab-separated-values",label:function e(){return n.t("TSV")}},tsx:{mimeType:"text/typescript-jsx",label:function e(){return n.t("TSX")},loader:function e(){return Promise.all([a.e(1),a.e(5),a.e(215)]).then(a.t.bind(null,2512,7))}},ttcn:{mimeType:"ttcn",label:function e(){return"TTCN"},loader:function e(){return Promise.all([a.e(1),a.e(298)]).then(a.t.bind(null,2932,7))}},ttcn_cfg:{mimeType:"ttcn-cfg",label:function e(){return"TTCN_CFG"},loader:function e(){return Promise.all([a.e(1),a.e(299)]).then(a.t.bind(null,2933,7))}},turtle:{mimeType:"text/turtle",label:function e(){return"Turtle"},loader:function e(){return Promise.all([a.e(1),a.e(300)]).then(a.t.bind(null,2934,7))}},twig:{mimeType:"text/x-twig",label:function e(){return"Twig"},loader:function e(){return Promise.all([a.e(1),a.e(301)]).then(a.t.bind(null,2935,7))}},typescript:{mimeType:"text/typescript",label:function e(){return n.t("TypeScript")},loader:function e(){return Promise.all([a.e(1),a.e(5),a.e(215)]).then(a.t.bind(null,2102,7))}},vb:{mimeType:"text/x-vb",label:function e(){return n.t("VB.NET")},loader:function e(){return Promise.all([a.e(1),a.e(237)]).then(a.t.bind(null,4642,7))}},vbscript:{mimeType:"text/vbscript",label:function e(){return n.t("VBScript")},loader:function e(){return Promise.all([a.e(1),a.e(238)]).then(a.t.bind(null,4643,7))}},velocity:{mimeType:"text/velocity",label:function e(){return n.t("Velocity")},loader:function e(){return Promise.all([a.e(1),a.e(239)]).then(a.t.bind(null,4644,7))}},verilog:{mimeType:"text/x-verilog",label:function e(){return n.t("Verilog")},loader:function e(){return Promise.all([a.e(1),a.e(240)]).then(a.t.bind(null,4645,7))}},vhdl:{mimeType:"text/x-vhdl",label:function e(){return"VHDL"},loader:function e(){return Promise.all([a.e(1),a.e(302)]).then(a.t.bind(null,2936,7))}},vue:{mimeType:"script/x-vue",label:function e(){return"Vue.js"},loader:function e(){return Promise.all([a.e(1),a.e(3),a.e(5),a.e(245),a.e(303)]).then(a.t.bind(null,2937,7))}},webidl:{mimeType:"text/x-webidl",label:function e(){return"Web IDL"},loader:function e(){return Promise.all([a.e(1),a.e(304)]).then(a.t.bind(null,2938,7))}},xml:{mimeType:"text/xml",label:function e(){return n.t("XML")},loader:function e(){return Promise.all([a.e(1),a.e(241)]).then(a.t.bind(null,4599,7))}},xquery:{mimeType:"application/xquery",label:function e(){return"XQuery"},loader:function e(){return Promise.all([a.e(1),a.e(305)]).then(a.t.bind(null,2939,7))}},yacas:{mimeType:"yacas",label:function e(){return"Yacas"},loader:function e(){return Promise.all([a.e(1),a.e(306)]).then(a.t.bind(null,2940,7))}},yaml:{mimeType:"text/x-yaml",label:function e(){return n.t("YAML")},loader:function e(){return Promise.all([a.e(1),a.e(242)]).then(a.t.bind(null,4646,7))}},z80:{mimeType:"text/x-z80",label:function e(){return"Z80"},loader:function e(){return Promise.all([a.e(1),a.e(308)]).then(a.t.bind(null,2941,7))}}};t["a"]=i},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){},,function(e,t,a){},,,,,,,,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,,function(e,t,a){},,,function(e,t,a){},,function(e,t,a){},,function(e,t,a){var r={"./actions.js":5168,"./activity-session.js":4896,"./add-app-to-channel.js":4138,"./add-ephemeral-feedback.js":4139,"./all-unreads.js":4140,"./api-unauthed.js":4141,"./api.js":4836,"./app-actions.js":4142,"./apps.js":4143,"./automount.js":4144,"./bots.js":4145,"./calls.js":4146,"./channels.js":4147,"./connectivity.js":4148,"./console.js":4149,"./constants.js":4150,"./emoji.js":4151,"./emojiComponent.js":4152,"./enterprise/configure-org-admin-store.js":2957,"./enterprise/enterprise-analytics-util.js":4815,"./enterprise/mount-channels-admin-settings.jsx":4987,"./enterprise/mount-create-workspace-modal.jsx":4794,"./enterprise/mount-dashboard-analytics-apps.jsx":4155,"./enterprise/mount-dashboard-app-management.jsx":4508,"./enterprise/mount-dashboard-audit-logs.jsx":4860,"./enterprise/mount-dashboard-billing-overview.jsx":4802,"./enterprise/mount-dashboard-channel-management.jsx":4673,"./enterprise/mount-dashboard-data-location.jsx":4861,"./enterprise/mount-dashboard-ekm-status.jsx":4795,"./enterprise/mount-dashboard-nav.jsx":4761,"./enterprise/mount-dashboard-org-level-group-details.jsx":5166,"./enterprise/mount-dashboard-org-level-user-groups.jsx":4775,"./enterprise/mount-dashboard-security-preferences.jsx":4783,"./enterprise/mount-dashboard-shared-channels.jsx":4762,"./enterprise/mount-dashboard-sso-preferences.jsx":4679,"./enterprise/mount-dashboard-sso-settings.jsx":4677,"./enterprise/mount-dashboard-team-apps.jsx":4785,"./enterprise/mount-dashboard-team-overview.jsx":4767,"./enterprise/mount-migration-table.jsx":4759,"./enterprise/mount-move-channels-custom-message.jsx":4862,"./enterprise/mount-org-wide-settings-pane.jsx":4693,"./enterprise/mount-session-reset-modal.jsx":4156,"./enterprise/mount-terms-of-service.jsx":4898,"./enterprise/mount-workspace-directory.jsx":4899,"./eventlog.js":4157,"./experiments-unauthed.js":4158,"./experiments.js":4159,"./flannel.js":4160,"./fuzzy-matcher.js":4161,"./greetings-earth.js":4900,"./history-navigation.js":4162,"./ia.js":1833,"./infra/app-subdomain-check.js":4901,"./infra/beacon-api-call.js":4163,"./infra/boot/index.js":4865,"./infra/connectivity.js":4164,"./infra/debug.js":4165,"./infra/failover-proxy-check.js":4904,"./infra/register-global-error-handler.js":4166,"./infra/rtm.js":4167,"./infra/socket-manager.js":4168,"./infra/telemeter.js":5027,"./infra/token-to-team-id.js":4169,"./infra/upload-queue.js":4170,"./lazy-filter-select.jsx":2565,"./member-counts.js":4172,"./members.js":4905,"./membership.js":4173,"./message-input-registry.js":4174,"./message-pane-input.js":4175,"./message-pane.js":4829,"./messages.js":4176,"./metrics-responsiveness.js":4177,"./mount-admin-invite-settings.js":4840,"./mount-admin-invites-table.js":5057,"./mount-admin-shared-channels-settings.js":5167,"./mount-browser-incoming-call.js":4768,"./mount-channel-create-modal.js":4906,"./mount-channel-invite-modal.js":4907,"./mount-channel-options-dialog.js":4870,"./mount-channel-sidebar.js":4730,"./mount-custom-status-input.js":4908,"./mount-dnd-preferences.js":4877,"./mount-document-title.js":4796,"./mount-download-access-logs-button.js":4843,"./mount-download-blocked-toast.js":4178,"./mount-downloads-view.js":4732,"./mount-emoji-picker.js":4909,"./mount-favicon.js":4798,"./mount-file-upload-banner.js":4910,"./mount-files-flexpane.js":4760,"./mount-global-nav.js":5165,"./mount-help-modal.js":4911,"./mount-image-viewer.js":4912,"./mount-invite-modal.js":4913,"./mount-keyboard-shortcuts.js":4777,"./mount-lazy-filter-select.js":4914,"./mount-manage-shared-channels-modal.js":4179,"./mount-member-directory-flexpane.js":4845,"./mount-menu.js":4917,"./mount-message-actions-menu.js":4919,"./mount-message-pane-banner.js":4921,"./mount-message-pane-drag-overlay.js":4922,"./mount-message-pane-input.js":4034,"./mount-message-pane.js":4171,"./mount-migration-blocker.js":4849,"./mount-modal-container.js":4923,"./mount-new-file-menu.js":4924,"./mount-notification-bar.js":4925,"./mount-oauth-confirm.jsx":4851,"./mount-org-retention-request.js":4764,"./mount-pages.js":4807,"./mount-profile-flexpane.js":4853,"./mount-scrollbar.js":4927,"./mount-service-import-mapping-form.js":4789,"./mount-starred-items-flexpane.js":2800,"./mount-team-creator-onboarding-dialog.js":4180,"./mount-thread-drag-overlay.js":4928,"./mount-threads-flexpane.js":5028,"./mount-threads-view.js":4752,"./mount-toast.js":4181,"./mount-tooltip-tip.js":4930,"./mount-user-calendar-flexpane.jsx":4857,"./mount-user-groups-flexpane.js":4942,"./mount-user-groups-list.js":4946,"./mount_team_blurb.js":4878,"./mpims.js":4182,"./onboarding.js":4808,"./open-app-management-modal.js":4183,"./open-apps-browser-modal.js":4184,"./open-invite-member-to-channel-dialog.js":4185,"./pages.js":4186,"./plans_page.js":4187,"./prefs.js":4948,"./presence-manager.js":4188,"./reactions.js":4189,"./redux.js":4800,"./remove-app-from-channel.js":4190,"./rules.js":4191,"./rules/files.js":4192,"./rules/notifications.js":4193,"./search.js":4882,"./searcher.js":4949,"./self-team-ids.js":4194,"./send-message.js":4195,"./set-app-element-for-react-modal.js":4196,"./slash-command.js":2378,"./sonic-calls-supported-clients.js":4198,"./stars.js":4199,"./teams.js":4200,"./texty.js":4201,"./topics.js":4202,"./typing.js":4203,"./user-groups.js":4204,"./utility/a11y.js":4205,"./utility/broadcast-keywords.js":4206,"./utility/client-action-token.js":4207,"./utility/clipboard.js":4208,"./utility/clog-types.js":4209,"./utility/clog.js":4210,"./utility/company-address/company-address-validation-utils.js":2861,"./utility/currency.js":4211,"./utility/date-time.js":4212,"./utility/desktop.js":2581,"./utility/environment.js":4213,"./utility/format.js":4950,"./utility/i18n.js":4214,"./utility/permalink.js":4215,"./utility/search/autocomplete-suggestions.js":4216,"./utility/search/autocomplete.js":4217,"./utility/search/conversions.js":4218,"./utility/threads.js":4219,"./utility/url.js":4220,"./utility/utility.js":2945,"./utility/versions.js":4221,"./welcome-place.js":4222,"./workspace.js":4223,"./zendesk-widget.js":4224};function n(e){var t=i(e);return a(t)}function i(e){if(!a.o(r,e)){var t=new Error("Cannot find module '"+e+"'");t.code="MODULE_NOT_FOUND";throw t}return r[e]}n.keys=function e(){return Object.keys(r)};n.resolve=i;e.exports=n;n.id=3105},,,,,,,,,,,,,,,,function(e,t,a){},,function(e,t,a){},,,function(e,t,a){},,,,function(e,t,a){},,,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,,,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,,,,,function(e,t,a){},,function(e,t,a){var r=a(3172),n=a(1783);var i=Array.prototype.push;function s(e,t){return 2==t?function(t,a){return e.apply(void 0,arguments)}:function(t){return e.apply(void 0,arguments)}}function o(e,t){return 2==t?function(t,a){return e(t,a)}:function(t){return e(t)}}function l(e){var t=e?e.length:0,a=Array(t);while(t--)a[t]=e[t];return a}function c(e){return function(t){return e({},t)}}function u(e,t){return function(){var a=arguments.length,r=a-1,n=Array(a);while(a--)n[a]=arguments[a];var s=n[t],o=n.slice(0,t);s&&i.apply(o,s);t!=r&&i.apply(o,n.slice(t+1));return e.apply(this,o)}}function d(e,t){return function(){var a=arguments.length;if(!a)return;var r=Array(a);while(a--)r[a]=arguments[a];var n=r[0]=t.apply(void 0,r);e.apply(void 0,r);return n}}function p(e,t,a,i){var m="function"==typeof t,h=t===Object(t);if(h){i=a;a=t;t=void 0}if(null==a)throw new TypeError;i||(i={});var v={cap:!("cap"in i)||i.cap,curry:!("curry"in i)||i.curry,fixed:!("fixed"in i)||i.fixed,immutable:!("immutable"in i)||i.immutable,rearg:!("rearg"in i)||i.rearg};var f=m?a:n,b="curry"in i&&i.curry,g="fixed"in i&&i.fixed,_="rearg"in i&&i.rearg,y=m?a.runInContext():void 0;var O=m?a:{ary:e.ary,assign:e.assign,clone:e.clone,curry:e.curry,forEach:e.forEach,isArray:e.isArray,isError:e.isError,isFunction:e.isFunction,isWeakMap:e.isWeakMap,iteratee:e.iteratee,keys:e.keys,rearg:e.rearg,toInteger:e.toInteger,toPath:e.toPath};var k=O.ary,E=O.assign,C=O.clone,S=O.curry,w=O.forEach,j=O.isArray,I=O.isError,T=O.isFunction,A=O.isWeakMap,N=O.keys,P=O.rearg,M=O.toInteger,D=O.toPath;var x=N(r.aryMethod);var R={castArray:function(e){return function(){var t=arguments[0];return j(t)?e(l(t)):e.apply(void 0,arguments)}},iteratee:function(e){return function(){var t=arguments[0],a=arguments[1],r=e(t,a),n=r.length;if(v.cap&&"number"==typeof a){a=a>2?a-2:1;return n&&n<=a?r:o(r,a)}return r}},mixin:function(e){return function(t){var a=this;if(!T(a))return e(a,Object(t));var r=[];w(N(t),function(e){T(t[e])&&r.push([e,a.prototype[e]])});e(a,Object(t));w(r,function(e){var t=e[1];T(t)?a.prototype[e[0]]=t:delete a.prototype[e[0]]});return a}},nthArg:function(e){return function(t){var a=t<0?1:M(t)+1;return S(e(t),a)}},rearg:function(e){return function(t,a){var r=a?a.length:0;return S(e(t,a),r)}},runInContext:function(t){return function(a){return p(e,t(a),i)}}};function F(e,t){if(v.cap){var a=r.iterateeRearg[e];if(a)return V(t,a);var n=!m&&r.iterateeAry[e];if(n)return W(t,n)}return t}function L(e,t,a){return b||v.curry&&a>1?S(t,a):t}function U(e,t,a){if(v.fixed&&(g||!r.skipFixed[e])){var n=r.methodSpread[e],i=n&&n.start;return void 0===i?k(t,a):u(t,i)}return t}function B(e,t,a){return v.rearg&&a>1&&(_||!r.skipRearg[e])?P(t,r.methodRearg[e]||r.aryRearg[a]):t}function q(e,t){t=D(t);var a=-1,r=t.length,n=r-1,i=C(Object(e)),s=i;while(null!=s&&++a<r){var o=t[a],l=s[o];null==l||T(l)||I(l)||A(l)||(s[o]=C(a==n?l:Object(l)));s=s[o]}return i}function G(e){return Q.runInContext.convert(e)(void 0)}function H(e,t){var a=r.aliasToReal[e]||e,n=r.remap[a]||a,s=i;return function(e){var r=m?y:O,i=m?y[n]:t,o=E(E({},s),e);return p(r,a,i,o)}}function W(e,t){return K(e,function(e){return"function"==typeof e?o(e,t):e})}function V(e,t){return K(e,function(e){var a=t.length;return s(P(o(e,a),t),a)})}function K(e,t){return function(){var a=arguments.length;if(!a)return e();var r=Array(a);while(a--)r[a]=arguments[a];var n=v.rearg?0:a-1;r[n]=t(r[n]);return e.apply(void 0,r)}}function z(e,t,a){var n,i=r.aliasToReal[e]||e,s=t,o=R[i];o?s=o(t):v.immutable&&(r.mutate.array[i]?s=d(t,l):r.mutate.object[i]?s=d(t,c(t)):r.mutate.set[i]&&(s=d(t,q)));w(x,function(e){w(r.aryMethod[e],function(t){if(i==t){var a=r.methodSpread[i],o=a&&a.afterRearg;n=o?U(i,B(i,s,e),e):B(i,U(i,s,e),e);n=F(i,n);n=L(i,n,e);return false}});return!n});n||(n=s);n==t&&(n=b?S(n,1):function(){return t.apply(this,arguments)});n.convert=H(i,t);n.placeholder=t.placeholder=a;return n}if(!h)return z(t,a,f);var Q=a;var Y=[];w(x,function(e){w(r.aryMethod[e],function(e){var t=Q[r.remap[e]||e];t&&Y.push([e,z(e,t,Q)])})});w(N(Q),function(e){var t=Q[e];if("function"==typeof t){var a=Y.length;while(a--)if(Y[a][0]==e)return;t.convert=H(e,t);Y.push([e,t])}});w(Y,function(e){Q[e[0]]=e[1]});Q.convert=G;Q.placeholder=Q;w(N(Q),function(e){w(r.realToAlias[e]||[],function(t){Q[t]=Q[e]})});return Q}e.exports=p},function(e,t){t.aliasToReal={each:"forEach",eachRight:"forEachRight",entries:"toPairs",entriesIn:"toPairsIn",extend:"assignIn",extendAll:"assignInAll",extendAllWith:"assignInAllWith",extendWith:"assignInWith",first:"head",conforms:"conformsTo",matches:"isMatch",property:"get",__:"placeholder",F:"stubFalse",T:"stubTrue",all:"every",allPass:"overEvery",always:"constant",any:"some",anyPass:"overSome",apply:"spread",assoc:"set",assocPath:"set",complement:"negate",compose:"flowRight",contains:"includes",dissoc:"unset",dissocPath:"unset",dropLast:"dropRight",dropLastWhile:"dropRightWhile",equals:"isEqual",identical:"eq",indexBy:"keyBy",init:"initial",invertObj:"invert",juxt:"over",omitAll:"omit",nAry:"ary",path:"get",pathEq:"matchesProperty",pathOr:"getOr",paths:"at",pickAll:"pick",pipe:"flow",pluck:"map",prop:"get",propEq:"matchesProperty",propOr:"getOr",props:"at",symmetricDifference:"xor",symmetricDifferenceBy:"xorBy",symmetricDifferenceWith:"xorWith",takeLast:"takeRight",takeLastWhile:"takeRightWhile",unapply:"rest",unnest:"flatten",useWith:"overArgs",where:"conformsTo",whereEq:"isMatch",zipObj:"zipObject"};t.aryMethod={1:["assignAll","assignInAll","attempt","castArray","ceil","create","curry","curryRight","defaultsAll","defaultsDeepAll","floor","flow","flowRight","fromPairs","invert","iteratee","memoize","method","mergeAll","methodOf","mixin","nthArg","over","overEvery","overSome","rest","reverse","round","runInContext","spread","template","trim","trimEnd","trimStart","uniqueId","words","zipAll"],2:["add","after","ary","assign","assignAllWith","assignIn","assignInAllWith","at","before","bind","bindAll","bindKey","chunk","cloneDeepWith","cloneWith","concat","conformsTo","countBy","curryN","curryRightN","debounce","defaults","defaultsDeep","defaultTo","delay","difference","divide","drop","dropRight","dropRightWhile","dropWhile","endsWith","eq","every","filter","find","findIndex","findKey","findLast","findLastIndex","findLastKey","flatMap","flatMapDeep","flattenDepth","forEach","forEachRight","forIn","forInRight","forOwn","forOwnRight","get","groupBy","gt","gte","has","hasIn","includes","indexOf","intersection","invertBy","invoke","invokeMap","isEqual","isMatch","join","keyBy","lastIndexOf","lt","lte","map","mapKeys","mapValues","matchesProperty","maxBy","meanBy","merge","mergeAllWith","minBy","multiply","nth","omit","omitBy","overArgs","pad","padEnd","padStart","parseInt","partial","partialRight","partition","pick","pickBy","propertyOf","pull","pullAll","pullAt","random","range","rangeRight","rearg","reject","remove","repeat","restFrom","result","sampleSize","some","sortBy","sortedIndex","sortedIndexOf","sortedLastIndex","sortedLastIndexOf","sortedUniqBy","split","spreadFrom","startsWith","subtract","sumBy","take","takeRight","takeRightWhile","takeWhile","tap","throttle","thru","times","trimChars","trimCharsEnd","trimCharsStart","truncate","union","uniqBy","uniqWith","unset","unzipWith","without","wrap","xor","zip","zipObject","zipObjectDeep"],3:["assignInWith","assignWith","clamp","differenceBy","differenceWith","findFrom","findIndexFrom","findLastFrom","findLastIndexFrom","getOr","includesFrom","indexOfFrom","inRange","intersectionBy","intersectionWith","invokeArgs","invokeArgsMap","isEqualWith","isMatchWith","flatMapDepth","lastIndexOfFrom","mergeWith","orderBy","padChars","padCharsEnd","padCharsStart","pullAllBy","pullAllWith","rangeStep","rangeStepRight","reduce","reduceRight","replace","set","slice","sortedIndexBy","sortedLastIndexBy","transform","unionBy","unionWith","update","xorBy","xorWith","zipWith"],4:["fill","setWith","updateWith"]};t.aryRearg={2:[1,0],3:[2,0,1],4:[3,2,0,1]};t.iterateeAry={dropRightWhile:1,dropWhile:1,every:1,filter:1,find:1,findFrom:1,findIndex:1,findIndexFrom:1,findKey:1,findLast:1,findLastFrom:1,findLastIndex:1,findLastIndexFrom:1,findLastKey:1,flatMap:1,flatMapDeep:1,flatMapDepth:1,forEach:1,forEachRight:1,forIn:1,forInRight:1,forOwn:1,forOwnRight:1,map:1,mapKeys:1,mapValues:1,partition:1,reduce:2,reduceRight:2,reject:1,remove:1,some:1,takeRightWhile:1,takeWhile:1,times:1,transform:2};t.iterateeRearg={mapKeys:[1],reduceRight:[1,0]};t.methodRearg={assignInAllWith:[1,0],assignInWith:[1,2,0],assignAllWith:[1,0],assignWith:[1,2,0],differenceBy:[1,2,0],differenceWith:[1,2,0],getOr:[2,1,0],intersectionBy:[1,2,0],intersectionWith:[1,2,0],isEqualWith:[1,2,0],isMatchWith:[2,1,0],mergeAllWith:[1,0],mergeWith:[1,2,0],padChars:[2,1,0],padCharsEnd:[2,1,0],padCharsStart:[2,1,0],pullAllBy:[2,1,0],pullAllWith:[2,1,0],rangeStep:[1,2,0],rangeStepRight:[1,2,0],setWith:[3,1,2,0],sortedIndexBy:[2,1,0],sortedLastIndexBy:[2,1,0],unionBy:[1,2,0],unionWith:[1,2,0],updateWith:[3,1,2,0],xorBy:[1,2,0],xorWith:[1,2,0],zipWith:[1,2,0]};t.methodSpread={assignAll:{start:0},assignAllWith:{start:0},assignInAll:{start:0},assignInAllWith:{start:0},defaultsAll:{start:0},defaultsDeepAll:{start:0},invokeArgs:{start:2},invokeArgsMap:{start:2},mergeAll:{start:0},mergeAllWith:{start:0},partial:{start:1},partialRight:{start:1},without:{start:1},zipAll:{start:0}};t.mutate={array:{fill:true,pull:true,pullAll:true,pullAllBy:true,pullAllWith:true,pullAt:true,remove:true,reverse:true},object:{assign:true,assignAll:true,assignAllWith:true,assignIn:true,assignInAll:true,assignInAllWith:true,assignInWith:true,assignWith:true,defaults:true,defaultsAll:true,defaultsDeep:true,defaultsDeepAll:true,merge:true,mergeAll:true,mergeAllWith:true,mergeWith:true},set:{set:true,setWith:true,unset:true,update:true,updateWith:true}};t.realToAlias=function(){var e=Object.prototype.hasOwnProperty,a=t.aliasToReal,r={};for(var n in a){var i=a[n];e.call(r,i)?r[i].push(n):r[i]=[n]}return r}();t.remap={assignAll:"assign",assignAllWith:"assignWith",assignInAll:"assignIn",assignInAllWith:"assignInWith",curryN:"curry",curryRightN:"curryRight",defaultsAll:"defaults",defaultsDeepAll:"defaultsDeep",findFrom:"find",findIndexFrom:"findIndex",findLastFrom:"findLast",findLastIndexFrom:"findLastIndex",getOr:"get",includesFrom:"includes",indexOfFrom:"indexOf",invokeArgs:"invoke",invokeArgsMap:"invokeMap",lastIndexOfFrom:"lastIndexOf",mergeAll:"merge",mergeAllWith:"mergeWith",padChars:"pad",padCharsEnd:"padEnd",padCharsStart:"padStart",propertyOf:"get",rangeStep:"range",rangeStepRight:"rangeRight",restFrom:"rest",spreadFrom:"spread",trimChars:"trim",trimCharsEnd:"trimEnd",trimCharsStart:"trimStart",zipAll:"zip"};t.skipFixed={castArray:true,flow:true,flowRight:true,iteratee:true,mixin:true,rearg:true,runInContext:true};t.skipRearg={add:true,assign:true,assignIn:true,bind:true,bindKey:true,concat:true,difference:true,divide:true,eq:true,gt:true,gte:true,isEqual:true,lt:true,lte:true,matchesProperty:true,merge:true,multiply:true,overArgs:true,partial:true,partialRight:true,propertyOf:true,random:true,range:true,rangeRight:true,subtract:true,zip:true,zipObject:true,zipObjectDeep:true}},function(e,t,a){e.exports={ary:a(3174),assign:a(2443),clone:a(3197),curry:a(3225),forEach:a(2318),isArray:a(522),isError:a(3226),isFunction:a(930),isWeakMap:a(3228),iteratee:a(3229),keys:a(2415),rearg:a(3253),toInteger:a(2320),toPath:a(3255)}},function(e,t,a){var r=a(2312);var n=128;function i(e,t,a){t=a?void 0:t;t=e&&null==t?e.length:t;return r(e,n,void 0,void 0,void 0,void 0,t)}e.exports=i},function(e,t,a){var r=a(1905),n=a(389);var i=1;function s(e,t,a){var s=t&i,o=r(e);function l(){var t=this&&this!==n&&this instanceof l?o:e;return t.apply(s?a:this,arguments)}return l}e.exports=s},function(e,t,a){var r=a(2313),n=a(1905),i=a(2432),s=a(2435),o=a(2442),l=a(2319),c=a(389);function u(e,t,a){var u=n(e);function d(){var n=arguments.length,p=Array(n),m=n,h=o(d);while(m--)p[m]=arguments[m];var v=n<3&&p[0]!==h&&p[n-1]!==h?[]:l(p,h);n-=v.length;if(n<a)return s(e,t,i,d.placeholder,void 0,p,v,void 0,void 0,a-n);var f=this&&this!==c&&this instanceof d?u:e;return r(f,this,p)}return d}e.exports=u},function(e,t){function a(e,t){var a=e.length,r=0;while(a--)e[a]===t&&++r;return r}e.exports=a},function(e,t){function a(){}e.exports=a},function(e,t){var a={};e.exports=a},function(e,t,a){var r=a(2314),n=a(2317),i=a(2315),s=a(522),o=a(592),l=a(3181);var c=Object.prototype;var u=c.hasOwnProperty;function d(e){if(o(e)&&!s(e)&&!(e instanceof r)){if(e instanceof n)return e;if(u.call(e,"__wrapped__"))return l(e)}return new n(e)}d.prototype=i.prototype;d.prototype.constructor=d;e.exports=d},function(e,t,a){var r=a(2314),n=a(2317),i=a(1907);function s(e){if(e instanceof r)return e.clone();var t=new n(e.__wrapped__,e.__chain__);t.__actions__=i(e.__actions__);t.__index__=e.__index__;t.__values__=e.__values__;return t}e.exports=s},function(e,t){var a=/\{\n\/\* \[wrapped with (.+)\] \*/,r=/,? & /;function n(e){var t=e.match(a);return t?t[1].split(r):[]}e.exports=n},function(e,t){var a=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;function r(e,t){var r=t.length;if(!r)return e;var n=r-1;t[n]=(r>1?"& ":"")+t[n];t=t.join(r>2?", ":" ");return e.replace(a,"{\n/* [wrapped with "+t+"] */\n")}e.exports=r},function(e,t,a){var r=a(3185),n=a(2411),i=a(1850);var s=n?function(e,t){return n(e,"toString",{configurable:true,enumerable:false,value:r(t),writable:true})}:i;e.exports=s},function(e,t){function a(e){return function(){return e}}e.exports=a},function(e,t,a){var r=a(2318),n=a(3187);var i=1,s=2,o=8,l=16,c=32,u=64,d=128,p=256,m=512;var h=[["ary",d],["bind",i],["bindKey",s],["curry",o],["curryRight",l],["flip",m],["partial",c],["partialRight",u],["rearg",p]];function v(e,t){r(h,function(a){var r="_."+a[0];t&a[1]&&!n(e,r)&&e.push(r)});return e.sort()}e.exports=v},function(e,t,a){var r=a(3188);function n(e,t){var a=null==e?0:e.length;return!!a&&r(e,t,0)>-1}e.exports=n},function(e,t,a){var r=a(3189),n=a(3190),i=a(3191);function s(e,t,a){return t===t?i(e,t,a):r(e,n,a)}e.exports=s},function(e,t){function a(e,t,a,r){var n=e.length,i=a+(r?1:-1);while(r?i--:++i<n)if(t(e[i],i,e))return i;return-1}e.exports=a},function(e,t){function a(e){return e!==e}e.exports=a},function(e,t){function a(e,t,a){var r=a-1,n=e.length;while(++r<n)if(e[r]===t)return r;return-1}e.exports=a},function(e,t,a){var r=a(1907),n=a(1849);var i=Math.min;function s(e,t){var a=e.length,s=i(t.length,a),o=r(e);while(s--){var l=t[s];e[s]=n(l,a)?o[l]:void 0}return e}e.exports=s},function(e,t,a){var r=a(2313),n=a(1905),i=a(389);var s=1;function o(e,t,a,o){var l=t&s,c=n(e);function u(){var t=-1,n=arguments.length,s=-1,d=o.length,p=Array(d+n),m=this&&this!==i&&this instanceof u?c:e;while(++s<d)p[s]=o[s];while(n--)p[s++]=arguments[++t];return r(m,l?a:this,p)}return u}e.exports=o},function(e,t,a){var r=a(2433),n=a(2434),i=a(2319);var s="__lodash_placeholder__";var o=1,l=2,c=4,u=8,d=128,p=256;var m=Math.min;function h(e,t){var a=e[1],h=t[1],v=a|h,f=v<(o|l|d);var b=h==d&&a==u||h==d&&a==p&&e[7].length<=t[8]||h==(d|p)&&t[7].length<=t[8]&&a==u;if(!(f||b))return e;if(h&o){e[2]=t[2];v|=a&o?0:c}var g=t[3];if(g){var _=e[3];e[3]=_?r(_,g,t[4]):g;e[4]=_?i(e[3],s):t[4]}g=t[5];if(g){_=e[5];e[5]=_?n(_,g,t[6]):g;e[6]=_?i(e[5],s):t[6]}g=t[7];g&&(e[7]=g);h&d&&(e[8]=null==e[8]?t[8]:m(e[8],t[8]));null==e[9]&&(e[9]=t[9]);e[0]=t[0];e[1]=v;return e}e.exports=h},function(e,t,a){var r=a(3196);var n=1/0,i=1.7976931348623157e308;function s(e){if(!e)return 0===e?e:0;e=r(e);if(e===n||e===-n){var t=e<0?-1:1;return t*i}return e===e?e:0}e.exports=s},function(e,t,a){var r=a(539),n=a(1784);var i=NaN;var s=/^\s+|\s+$/g;var o=/^[-+]0x[0-9a-f]+$/i;var l=/^0b[01]+$/i;var c=/^0o[0-7]+$/i;var u=parseInt;function d(e){if("number"==typeof e)return e;if(n(e))return i;if(r(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(s,"");var a=l.test(e);return a||c.test(e)?u(e.slice(2),a?2:8):o.test(e)?i:+e}e.exports=d},function(e,t,a){var r=a(2444);var n=4;function i(e){return r(e,n)}e.exports=i},function(e,t,a){var r=a(903);function n(){this.__data__=new r;this.size=0}e.exports=n},function(e,t){function a(e){var t=this.__data__,a=t["delete"](e);this.size=t.size;return a}e.exports=a},function(e,t){function a(e){return this.__data__.get(e)}e.exports=a},function(e,t){function a(e){return this.__data__.has(e)}e.exports=a},function(e,t,a){var r=a(903),n=a(1023),i=a(1022);var s=200;function o(e,t){var a=this.__data__;if(a instanceof r){var o=a.__data__;if(!n||o.length<s-1){o.push([e,t]);this.size=++a.size;return this}a=this.__data__=new i(o)}a.set(e,t);this.size=a.size;return this}e.exports=o},function(e,t,a){var r=a(1908),n=a(2445);function i(e,t){return e&&r(t,n(t),e)}e.exports=i},function(e,t,a){var r=a(539),n=a(2211),i=a(3205);var s=Object.prototype;var o=s.hasOwnProperty;function l(e){if(!r(e))return i(e);var t=n(e),a=[];for(var s in e)"constructor"==s&&(t||!o.call(e,s))||a.push(s);return a}e.exports=l},function(e,t){function a(e){var t=[];if(null!=e)for(var a in Object(e))t.push(a);return t}e.exports=a},function(e,t,a){(function(e){var r=a(389);var n=(true,t)&&!t.nodeType&&t;var i=n&&"object"==typeof e&&e&&!e.nodeType&&e;var s=i&&i.exports===n;var o=s?r.Buffer:void 0,l=o?o.allocUnsafe:void 0;function c(e,t){if(t)return e.slice();var a=e.length,r=l?l(a):new e.constructor(a);e.copy(r);return r}e.exports=c}).call(this,a(281)(e))},function(e,t,a){var r=a(1908),n=a(2322);function i(e,t){return r(e,n(e),t)}e.exports=i},function(e,t){function a(e,t){var a=-1,r=null==e?0:e.length,n=0,i=[];while(++a<r){var s=e[a];t(s,a,e)&&(i[n++]=s)}return i}e.exports=a},function(e,t,a){var r=a(1908),n=a(2447);function i(e,t){return r(e,n(e),t)}e.exports=i},function(e,t,a){var r=a(2449),n=a(2447),i=a(2445);function s(e){return r(e,i,n)}e.exports=s},function(e,t,a){var r=a(567),n=a(389);var i=r(n,"DataView");e.exports=i},function(e,t,a){var r=a(567),n=a(389);var i=r(n,"Promise");e.exports=i},function(e,t,a){var r=a(567),n=a(389);var i=r(n,"Set");e.exports=i},function(e,t){var a=Object.prototype;var r=a.hasOwnProperty;function n(e){var t=e.length,a=new e.constructor(t);if(t&&"string"==typeof e[0]&&r.call(e,"index")){a.index=e.index;a.input=e.input}return a}e.exports=n},function(e,t,a){var r=a(2324),n=a(3216),i=a(3217),s=a(3218),o=a(3219);var l="[object Boolean]",c="[object Date]",u="[object Map]",d="[object Number]",p="[object RegExp]",m="[object Set]",h="[object String]",v="[object Symbol]";var f="[object ArrayBuffer]",b="[object DataView]",g="[object Float32Array]",_="[object Float64Array]",y="[object Int8Array]",O="[object Int16Array]",k="[object Int32Array]",E="[object Uint8Array]",C="[object Uint8ClampedArray]",S="[object Uint16Array]",w="[object Uint32Array]";function j(e,t,a){var j=e.constructor;switch(t){case f:return r(e);case l:case c:return new j(+e);case b:return n(e,a);case g:case _:case y:case O:case k:case E:case C:case S:case w:return o(e,a);case u:return new j;case d:case h:return new j(e);case p:return i(e);case m:return new j;case v:return s(e)}}e.exports=j},function(e,t,a){var r=a(2324);function n(e,t){var a=t?r(e.buffer):e.buffer;return new e.constructor(a,e.byteOffset,e.byteLength)}e.exports=n},function(e,t){var a=/\w*$/;function r(e){var t=new e.constructor(e.source,a.exec(e));t.lastIndex=e.lastIndex;return t}e.exports=r},function(e,t,a){var r=a(593);var n=r?r.prototype:void 0,i=n?n.valueOf:void 0;function s(e){return i?Object(i.call(e)):{}}e.exports=s},function(e,t,a){var r=a(2324);function n(e,t){var a=t?r(e.buffer):e.buffer;return new e.constructor(a,e.byteOffset,e.length)}e.exports=n},function(e,t,a){var r=a(1906),n=a(2323),i=a(2211);function s(e){return"function"!=typeof e.constructor||i(e)?{}:r(n(e))}e.exports=s},function(e,t,a){var r=a(3222),n=a(2209),i=a(2210);var s=i&&i.isMap;var o=s?n(s):r;e.exports=o},function(e,t,a){var r=a(1785),n=a(592);var i="[object Map]";function s(e){return n(e)&&r(e)==i}e.exports=s},function(e,t,a){var r=a(3224),n=a(2209),i=a(2210);var s=i&&i.isSet;var o=s?n(s):r;e.exports=o},function(e,t,a){var r=a(1785),n=a(592);var i="[object Set]";function s(e){return n(e)&&r(e)==i}e.exports=s},function(e,t,a){var r=a(2312);var n=8;function i(e,t,a){t=a?void 0:t;var s=r(e,n,void 0,void 0,void 0,void 0,void 0,t);s.placeholder=i.placeholder;return s}i.placeholder={};e.exports=i},function(e,t,a){var r=a(553),n=a(592),i=a(3227);var s="[object DOMException]",o="[object Error]";function l(e){if(!n(e))return false;var t=r(e);return t==o||t==s||"string"==typeof e.message&&"string"==typeof e.name&&!i(e)}e.exports=l},function(e,t,a){var r=a(553),n=a(2323),i=a(592);var s="[object Object]";var o=Function.prototype,l=Object.prototype;var c=o.toString;var u=l.hasOwnProperty;var d=c.call(Object);function p(e){if(!i(e)||r(e)!=s)return false;var t=n(e);if(null===t)return true;var a=u.call(t,"constructor")&&t.constructor;return"function"==typeof a&&a instanceof a&&c.call(a)==d}e.exports=p},function(e,t,a){var r=a(1785),n=a(592);var i="[object WeakMap]";function s(e){return n(e)&&r(e)==i}e.exports=s},function(e,t,a){var r=a(2444),n=a(2451);var i=1;function s(e){return n("function"==typeof e?e:r(e,i))}e.exports=s},function(e,t,a){var r=a(3231),n=a(3242),i=a(2455);function s(e){var t=n(e);if(1==t.length&&t[0][2])return i(t[0][0],t[0][1]);return function(a){return a===e||r(a,e,t)}}e.exports=s},function(e,t,a){var r=a(2321),n=a(2452);var i=1,s=2;function o(e,t,a,o){var l=a.length,c=l,u=!o;if(null==e)return!c;e=Object(e);while(l--){var d=a[l];if(u&&d[2]?d[1]!==e[d[0]]:!(d[0]in e))return false}while(++l<c){d=a[l];var p=d[0],m=e[p],h=d[1];if(u&&d[2]){if(void 0===m&&!(p in e))return false}else{var v=new r;if(o)var f=o(m,h,p,e,t,v);if(!(void 0===f?n(h,m,i|s,o,v):f))return false}}return true}e.exports=o},function(e,t,a){var r=a(2321),n=a(2453),i=a(3238),s=a(3241),o=a(1785),l=a(522),c=a(2208),u=a(2414);var d=1;var p="[object Arguments]",m="[object Array]",h="[object Object]";var v=Object.prototype;var f=v.hasOwnProperty;function b(e,t,a,v,b,g){var _=l(e),y=l(t),O=_?m:o(e),k=y?m:o(t);O=O==p?h:O;k=k==p?h:k;var E=O==h,C=k==h,S=O==k;if(S&&c(e)){if(!c(t))return false;_=true;E=false}if(S&&!E){g||(g=new r);return _||u(e)?n(e,t,a,v,b,g):i(e,t,O,a,v,b,g)}if(!(a&d)){var w=E&&f.call(e,"__wrapped__"),j=C&&f.call(t,"__wrapped__");if(w||j){var I=w?e.value():e,T=j?t.value():t;g||(g=new r);return b(I,T,a,v,g)}}if(!S)return false;g||(g=new r);return s(e,t,a,v,b,g)}e.exports=b},function(e,t,a){var r=a(1022),n=a(3234),i=a(3235);function s(e){var t=-1,a=null==e?0:e.length;this.__data__=new r;while(++t<a)this.add(e[t])}s.prototype.add=s.prototype.push=n;s.prototype.has=i;e.exports=s},function(e,t){var a="__lodash_hash_undefined__";function r(e){this.__data__.set(e,a);return this}e.exports=r},function(e,t){function a(e){return this.__data__.has(e)}e.exports=a},function(e,t){function a(e,t){var a=-1,r=null==e?0:e.length;while(++a<r)if(t(e[a],a,e))return true;return false}e.exports=a},function(e,t){function a(e,t){return e.has(t)}e.exports=a},function(e,t,a){var r=a(593),n=a(2450),i=a(901),s=a(2453),o=a(3239),l=a(3240);var c=1,u=2;var d="[object Boolean]",p="[object Date]",m="[object Error]",h="[object Map]",v="[object Number]",f="[object RegExp]",b="[object Set]",g="[object String]",_="[object Symbol]";var y="[object ArrayBuffer]",O="[object DataView]";var k=r?r.prototype:void 0,E=k?k.valueOf:void 0;function C(e,t,a,r,k,C,S){switch(a){case O:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return false;e=e.buffer;t=t.buffer;case y:if(e.byteLength!=t.byteLength||!C(new n(e),new n(t)))return false;return true;case d:case p:case v:return i(+e,+t);case m:return e.name==t.name&&e.message==t.message;case f:case g:return e==t+"";case h:var w=o;case b:var j=r&c;w||(w=l);if(e.size!=t.size&&!j)return false;var I=S.get(e);if(I)return I==t;r|=u;S.set(e,t);var T=s(w(e),w(t),r,k,C,S);S["delete"](e);return T;case _:if(E)return E.call(e)==E.call(t)}return false}e.exports=C},function(e,t){function a(e){var t=-1,a=Array(e.size);e.forEach(function(e,r){a[++t]=[r,e]});return a}e.exports=a},function(e,t){function a(e){var t=-1,a=Array(e.size);e.forEach(function(e){a[++t]=e});return a}e.exports=a},function(e,t,a){var r=a(2448);var n=1;var i=Object.prototype;var s=i.hasOwnProperty;function o(e,t,a,i,o,l){var c=a&n,u=r(e),d=u.length,p=r(t),m=p.length;if(d!=m&&!c)return false;var h=d;while(h--){var v=u[h];if(!(c?v in t:s.call(t,v)))return false}var f=l.get(e);if(f&&l.get(t))return f==t;var b=true;l.set(e,t);l.set(t,e);var g=c;while(++h<d){v=u[h];var _=e[v],y=t[v];if(i)var O=c?i(y,_,v,t,e,l):i(_,y,v,e,t,l);if(!(void 0===O?_===y||o(_,y,a,i,l):O)){b=false;break}g||(g="constructor"==v)}if(b&&!g){var k=e.constructor,E=t.constructor;k!=E&&"constructor"in e&&"constructor"in t&&!("function"==typeof k&&k instanceof k&&"function"==typeof E&&E instanceof E)&&(b=false)}l["delete"](e);l["delete"](t);return b}e.exports=o},function(e,t,a){var r=a(2454),n=a(1714);function i(e){var t=n(e),a=t.length;while(a--){var i=t[a],s=e[i];t[a]=[i,s,r(s)]}return t}e.exports=i},function(e,t,a){var r=a(2452),n=a(3244),i=a(3247),s=a(2325),o=a(2454),l=a(2455),c=a(1786);var u=1,d=2;function p(e,t){if(s(e)&&o(t))return l(c(e),t);return function(a){var s=n(a,e);return void 0===s&&s===t?i(a,e):r(t,s,u|d)}}e.exports=p},function(e,t,a){var r=a(2456);function n(e,t,a){var n=null==e?void 0:r(e,t);return void 0===n?a:n}e.exports=n},function(e,t,a){var r=a(776);var n=500;function i(e){var t=r(e,function(e){a.size===n&&a.clear();return e});var a=t.cache;return t}e.exports=i},function(e,t,a){var r=a(593),n=a(2326),i=a(522),s=a(1784);var o=1/0;var l=r?r.prototype:void 0,c=l?l.toString:void 0;function u(e){if("string"==typeof e)return e;if(i(e))return n(e,u)+"";if(s(e))return c?c.call(e):"";var t=e+"";return"0"==t&&1/e==-o?"-0":t}e.exports=u},function(e,t,a){var r=a(3248),n=a(3249);function i(e,t){return null!=e&&n(e,t,r)}e.exports=i},function(e,t){function a(e,t){return null!=e&&t in Object(e)}e.exports=a},function(e,t,a){var r=a(2457),n=a(2103),i=a(522),s=a(1849),o=a(2104),l=a(1786);function c(e,t,a){t=r(t,e);var c=-1,u=t.length,d=false;while(++c<u){var p=l(t[c]);if(!(d=null!=e&&a(e,p)))break;e=e[p]}if(d||++c!=u)return d;u=null==e?0:e.length;return!!u&&o(u)&&s(p,u)&&(i(e)||n(e))}e.exports=c},function(e,t,a){var r=a(3251),n=a(3252),i=a(2325),s=a(1786);function o(e){return i(e)?r(s(e)):n(e)}e.exports=o},function(e,t){function a(e){return function(t){return null==t?void 0:t[e]}}e.exports=a},function(e,t,a){var r=a(2456);function n(e){return function(t){return r(t,e)}}e.exports=n},function(e,t,a){var r=a(2312),n=a(2460);var i=256;var s=n(function(e,t){return r(e,i,void 0,void 0,void 0,t)});e.exports=s},function(e,t,a){var r=a(2313);var n=Math.max;function i(e,t,a){t=n(void 0===t?e.length-1:t,0);return function(){var i=arguments,s=-1,o=n(i.length-t,0),l=Array(o);while(++s<o)l[s]=i[t+s];s=-1;var c=Array(t+1);while(++s<t)c[s]=i[s];c[t]=a(l);return r(e,this,c)}}e.exports=i},function(e,t,a){var r=a(2326),n=a(1907),i=a(522),s=a(1784),o=a(2458),l=a(1786),c=a(2459);function u(e){if(i(e))return r(e,l);return s(e)?[e]:n(o(c(e)))}e.exports=u},function(e,t,a){var r=a(3257);var n=r();e.exports=n},function(e,t,a){var r=a(2317),n=a(2460),i=a(2316),s=a(2437),o=a(522),l=a(2436);var c="Expected a function";var u=8,d=32,p=128,m=256;function h(e){return n(function(t){var a=t.length,n=a,h=r.prototype.thru;e&&t.reverse();while(n--){var v=t[n];if("function"!=typeof v)throw new TypeError(c);if(h&&!f&&"wrapper"==s(v))var f=new r([],true)}n=f?n:a;while(++n<a){v=t[n];var b=s(v),g="wrapper"==b?i(v):void 0;f=g&&l(g[0])&&g[1]==(p|u|d|m)&&!g[4].length&&1==g[9]?f[s(g[0])].apply(f,g[3]):1==v.length&&l(v)?f[b]():f.thru(v)}return function(){var e=arguments,r=e[0];if(f&&1==e.length&&o(r))return f.plant(r).value();var n=0,i=a?t[n].apply(this,e):r;while(++n<a)i=t[n].call(this,i);return i}})}e.exports=h},function(e,t,a){var r=a(2326),n=a(2451),i=a(3259),s=a(522);function o(e,t){var a=s(e)?r:i;return a(e,n(t,3))}e.exports=o},function(e,t,a){var r=a(3260),n=a(1715);function i(e,t){var a=-1,i=n(e)?Array(e.length):[];r(e,function(e,r,n){i[++a]=t(e,r,n)});return i}e.exports=i},function(e,t,a){var r=a(2412),n=a(3261);var i=n(r);e.exports=i},function(e,t,a){var r=a(1715);function n(e,t){return function(a,n){if(null==a)return a;if(!r(a))return e(a,n);var i=a.length,s=t?i:-1,o=Object(a);while(t?s--:++s<i)if(false===n(o[s],s,o))break;return a}}e.exports=n},function(e,t){var a=Array.prototype;var r=a.join;function n(e,t){return null==e?"":r.call(e,t)}e.exports=n},function(e,t,a){var r=a(3264),n=a(3265),i=a(2320);function s(e,t,a){var s=null==e?0:e.length;if(!s)return[];if(a&&"number"!=typeof a&&n(e,t,a)){t=0;a=s}else{t=null==t?0:i(t);a=void 0===a?s:i(a)}return r(e,t,a)}e.exports=s},function(e,t){function a(e,t,a){var r=-1,n=e.length;t<0&&(t=-t>n?0:n+t);a=a>n?n:a;a<0&&(a+=n);n=t>a?0:a-t>>>0;t>>>=0;var i=Array(n);while(++r<n)i[r]=e[r+t];return i}e.exports=a},function(e,t,a){var r=a(901),n=a(1715),i=a(1849),s=a(539);function o(e,t,a){if(!s(a))return false;var o=typeof t;if("number"==o?n(a)&&i(t,a.length):"string"==o&&t in a)return r(a[t],e);return false}e.exports=o},function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,,,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,,,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,,,,,function(e,t,a){},,function(e,t,a){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.r(t);var r=a(110);var n=a.n(r);var i=a(135);var s=a.n(i);var o=a(169);var l=a.n(o);var c=a(138);var u=a.n(c);var d=a(147);var p=a.n(d);var m=a(185);var h=a.n(m);var v=a(1);var f=a.n(v);var b=a(0);var g=a(12);var _=a(2);var y=a(30);var O=a(44);var k=a(24);var E=a(11);var C=a(33);var S=a(1193);var w=a(122);var j=a(27);var I=a(39);var T=a(16);var A=a(35);var N=a(1956);var P=a(6);var M=a(86);var D=a(14);var x=a(23);var R=a(13);var F=a.n(R);var L=a(456);var U=a(486);var B=a(2628);var q=new P["b"]("shared_channels");var G={className:"",onHelpClick:_["noop"]};function H(e){var t=e.featureSonicEscCreation,a=e.onHelpClick,r=e.className;if(!t)return null;var n=q.t("Have questions about shared channels?");var i=q.rt("<a>Learn more</a>",{},function(e){var t=e.text;return f.a.createElement(U["a"],{onClick:a,href:"https://slack.com/features/shared-channels?utm_medium=in-prod&utm_source=in-prod&utm_campaign=cd_in-prod_in-prod_all_en_all_cr-button_ym-201909","data-qa":"shared_channel_learn_more_link"},t)});return f.a.createElement("div",{className:F()("p-shared_channels_helpful_footer_content",r)},f.a.createElement(L["a"],{type:"book",className:"p-shared_channels_helpful_footer_content__icon"}),f.a.createElement("div",{className:"p-shared_channels_helpful_footer_content__text"},n,f.a.createElement("br",null),i))}H.displayName="HelpfulFooterContent";H.defaultProps=G;var W=function e(t){return{featureSonicEscCreation:Object(E["isFeatureEnabled"])(t,"feature_sonic_esc_creation")}};var V=Object(g["connect"])(W)(H);var K=a(3402);var z=new P["b"]("shared_channels");var Q={featureSonicEscCreation:false,sharedChannelsIsEnabled:false,isFreeTeam:false,openSharedChannelCreationModal:_["noop"],closeModal:_["noop"],setUserPrefByApi:_["noop"],entryPoint:void 0};var Y="ESC-INTRO-MODAL";var J=function(e){h()(t,e);function t(e){var a;n()(this,t);a=l()(this,u()(t).call(this,e));Object(y["a"])(p()(a),["onCreateChannel","onUpgrade","onCancel","onGetHelp"]);return a}s()(t,[{key:"componentDidMount",value:function e(){this.clogEvent({action:D["UiAction"].IMPRESSION,elementType:D["ElementType"].MODAL})}},{key:"onCancel",value:function e(){this.clogEvent({action:D["UiAction"].CLICK,elementType:D["ElementType"].BUTTON,elementName:"close"});this.props.closeModal()}},{key:"onCreateChannel",value:function e(){this.clogEvent({action:D["UiAction"].CLICK,elementType:D["ElementType"].BUTTON,elementName:"create_shared_channel"});this.props.openSharedChannelCreationModal({showOpenTransition:false,entryPoint:"team_menu"})}},{key:"onGetHelp",value:function e(){this.clogEvent({action:D["UiAction"].CLICK,elementType:D["ElementType"].LINK,elementName:"learn_more"})}},{key:"onUpgrade",value:function e(){var t=this.props.logger;this.clogEvent({eventId:D["EventId"].GROWTH_PRICING,action:D["UiAction"].CLICK,isPrimaryCta:true,elementType:D["ElementType"].BUTTON,elementName:"pricing"});t.info(Y,"Setting user pref to opt team into ESC beta post-checkout.");this.props.setUserPrefByApi({pref:"enable_esc_post_checkout",value:true});t.info(Y,"Opening authenticated pricing plans page.");t.info(Y,"Closing the introduction modal.");this.props.closeModal()}},{key:"clogEvent",value:function e(t){var a=this;var r=t.eventId,n=t.action,i=t.isPrimaryCta,s=void 0!==i&&i,o=t.elementType,l=t.elementName;var c=this.props,u=c.entryPoint,d=c.clogStepVariant;var p=[D["EventId"].GROWTH_INTRO_SHARED_CHANNEL];r&&p.push(r);p.forEach(function(e){a.props.clogger.track(e,{contexts:{ui_context:{step:D["UiStep"].SHARED_CHANNEL_MODAL,step_variant:d,action:n,is_primary_cta:s,ui_properties:{element_type:o,element_name:l},entry_point:u}}})})}},{key:"render",value:function e(){var t=this.props,a=t.featureSonicEscCreation,r=t.sharedChannelsIsEnabled,n=t.isFreeTeam;if(!a)return null;if(!r&&!n)return null;var i;var s;var o;if(r){i=z.t("Create a Shared Channel");s=this.onCreateChannel}else if(!r&&n){i=z.t("See Upgrade Options");s=this.onUpgrade;o=Object(M["j"])({entryPoint:"shared_channel_modal"})}var l=z.rt("<strong>A new way to work.</strong> Now, two organizations can work together in the same Slack channel. Talk in real time with everyone on a project, whether they\u2019re down the hall or at a different company entirely.");var c=z.rt("<strong>One place for everything.</strong> Get all of your work done in Slack, without going back and forth between external emails and internal Slack channels.");var u=z.rt("<strong>Secure and controlled.</strong> Rest easy \u2014 you have full control and visibility over which channels are being shared with other organizations, and only admins can share a channel. ");var d=f.a.createElement("div",{className:"p-shared_channel_introduction_modal__content"},f.a.createElement("div",{className:"p-shared_channel_introduction_modal__image__ga"}),f.a.createElement("h2",{className:"p-shared_channel_introduction_modal__header"},n?z.t("Upgrade to share channels with other companies"):z.t("Introducing Shared Channels")),f.a.createElement("div",{className:"p-shared_channel_introduction_modal__body"},f.a.createElement("p",{className:"p-shared_channel_introduction_modal__bullet"},f.a.createElement(x["b"],{type:"check-small-bold"}),f.a.createElement("span",null,l)),!n&&f.a.createElement("p",{className:"p-shared_channel_introduction_modal__bullet"},f.a.createElement(x["b"],{type:"check-small-bold"}),f.a.createElement("span",null,c)),f.a.createElement("p",{className:"p-shared_channel_introduction_modal__bullet"},f.a.createElement(x["b"],{type:"check-small-bold"}),f.a.createElement("span",null,u)),n&&f.a.createElement("p",{className:"p-shared_channel_introduction_modal__bullet"},f.a.createElement(x["b"],{type:"check-small-bold"}),f.a.createElement("span",null,z.rt("<strong>Get more when you upgrade.</strong> Shared channels are just one of the features you\u2019ll get with a paid plan.")))),f.a.createElement(V,{className:"p-shared_channel_introduction_modal__helper p-shared_channel_introduction_modal__helper--mobile",onHelpClick:this.onGetHelp}));var p="p-shared_channel_introduction_modal__content_section p-shared_channel_introduction_modal__content_section--ga";return f.a.createElement(O["a"],{fullscreen:true,centered:true,closeModal:this.onCancel},f.a.createElement(O["h"],null),f.a.createElement(O["d"],null,f.a.createElement(O["e"],{className:p,"data-qa":"shared-channel-introduction-modal"},d)),f.a.createElement(O["f"],null,f.a.createElement(V,{className:"p-shared_channel_introduction_modal__helper p-shared_channel_introduction_modal__helper--desktop",onHelpClick:this.onGetHelp}),f.a.createElement(O["g"],null,f.a.createElement(k["d"],{href:o,type:"primary",onClick:s,"data-qa":"create_action"},i))))}}]);return t}(v["Component"]);J.displayName="SharedChannelIntroductionModal";J.defaultProps=Q;var X=function e(t){var a=Object(C["d"])(t);var r=Object(j["isOnFreePlan"])(a);var n=r?"free":"paid";return{featureSonicEscCreation:Object(E["isFeatureEnabled"])(t,"feature_sonic_esc_creation"),sharedChannelsIsEnabled:Object(j["isSharedChannelsEnabled"])(t,a),isEnterprise:Object(j["isEnterpriseTeam"])(a),isFreeTeam:r,logger:Object(T["a"])({state:t}),clogger:Object(A["a"])({state:t}),clogStepVariant:n}};var Z=function e(t){return{openSharedChannelCreationModal:function e(){return t(N["a"].apply(void 0,arguments))},setTeamPrefByApi:function e(){return t(S["c"].apply(void 0,arguments))},setUserPrefByApi:function e(){return t(w["d"].apply(void 0,arguments))},closeModal:function e(){return t(I["closeModal"].apply(void 0,arguments))}}};var $=t["default"]=Object(g["connect"])(X,Z)(J)},function(e,t,a){"use strict";a.d(t,"b",function(){return c});a.d(t,"c",function(){return u});a.d(t,"a",function(){return d});var r=a(0);var n=a(31);var i=a(29);var s=a(16);var o=a(2);var l=a.n(o);var c=Object(i["a"])("Get Entereprise Auth SSO preferences",function(e,t,a){var r=a.reason;return e(Object(n["a"])({method:"enterprise.auth.sso.get",reason:r})).catch(function(e){var a="failed to get enterprise auth sso preferences";Object(s["a"])({getState:t}).error("Enterprise",a);throw e})});c.meta={name:"getEnterpriseAuthSSOPrefs",key:"fetchersEnterpriseSsoPreferencesApiGetEnterpriseAuthSSOPrefs",description:"Get Entereprise Auth SSO preferences"};c.propTypes={reason:r["default"].string};var u=Object(i["a"])("Set Entereprise Auth SSO preferences",function(e,t,a){var r=a.syncWithProvider,i=a.changeEmail,l=a.chooseUsername,c=a.authRestrictions,u=a.samlProviderLabel,d=a.reason;var p=Object(o["omitBy"])({sync_with_provider:r,change_email:i,choose_username:l,auth_restrictions:c,saml_provider_label:u},o["isUndefined"]);return e(Object(n["a"])({method:"enterprise.auth.sso.set",args:p,reason:d})).catch(function(e){var a="failed to set enterprise auth SSO preferences";Object(s["a"])({getState:t}).error("Enterprise",a);throw e})});u.meta={name:"setEnterpriseAuthSSOPrefs",key:"fetchersEnterpriseSsoPreferencesApiSetEnterpriseAuthSSOPrefs",description:"Set Entereprise Auth SSO preferences"};u.propTypes={syncWithProvider:r["default"].bool,changeEmail:r["default"].bool,chooseUsername:r["default"].bool,authRestrictions:r["default"].number,reason:r["default"].string};var d=Object(i["a"])("Get Entereprise Auth SAML Config",function(e,t,a){var r=a.reason;return e(Object(n["a"])({method:"enterprise.auth.saml.get",reason:r})).catch(function(e){var a="failed to get enterprise auth saml config";Object(s["a"])({getState:t}).error("Enterprise",a);throw e})});d.meta={name:"getEnterpriseAuthSAMLConfigs",key:"fetchersEnterpriseSsoPreferencesApiGetEnterpriseAuthSAMLConfigs",description:"Get Entereprise Auth SAML Config"};d.propTypes={reason:r["default"].string}},,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){},,,,,,,,function(e,t,a){},,function(e,t,a){},,,,,,function(e,t,a){},,function(e,t,a){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){},,,,,,function(e,t,a){},,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){},,,function(e,t,a){},,function(e,t,a){},,,,,function(e,t,a){},,,,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,,,,,,,,,function(e,t,a){},,function(e,t,a){},,,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,,,,,,,,,,,,,,,,,function(e,t,a){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){},,function(e,t,a){},,,function(e,t,a){},,function(e,t,a){},,,,function(e,t,a){},,,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,,,,,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,,function(e,t,a){},,,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,,,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,,,,function(e,t,a){},,,,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,,,,,,,,,,,,,,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,,,,,,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,,function(e,t,a){},,function(e,t,a){},,,,,,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,,,,function(e,t,a){},,,,,,,,,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,,function(e,t,a){},,,function(e,t,a){},,,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,,function(e,t,a){},,function(e,t,a){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(12);var s=a(156);var o=a(26);var l=a(110);var c=a.n(l);var u=a(135);var d=a.n(u);var p=a(169);var m=a.n(p);var h=a(138);var v=a.n(h);var f=a(147);var b=a.n(f);var g=a(185);var _=a.n(g);var y=a(2);var O=a(30);var k=a(0);var E=a(85);var C=a.n(E);var S=a(332);var w=a.n(S);var j=a(6);var I=a(77);var T=a(9);var A=a(63);var N=a(87);var P=a(20);var M=a(819);var D=a(822);var x=a(25);var R=a(38);var F=a(2715);var L=a(187);var U=a(555);var B=a(1885);var q=a(856);var G=a(176);var H=a(1406);var W=a(859);var V=a(450);var K=a(214);var z=a(443);var Q=a(21);var Y=a(2735);var J=a(182);var X=a(373);var Z=a(57);var $=a(17);var ee=a(34);var te=a(485);var ae=a(1925);var re=a(2736);var ne=a(2008);var ie=a(2025);var se=a(1236);var oe=a(924);var le=new j["b"]("coachmarks");var ce={anchorElement:k["default"].instanceOf(Element),completeJoinerOnboarding:k["default"].func};var ue={anchorElement:null,completeJoinerOnboarding:false};var de=function(e){_()(t,e);function t(){c()(this,t);return m()(this,v()(t).apply(this,arguments))}d()(t,[{key:"render",value:function e(){var t=this.props,a=t.anchorElement,r=t.completeJoinerOnboarding;return n.a.createElement("div",{className:"position_relative"},n.a.createElement(oe["a"],{anchorElement:a,isOpen:true,onClickPrimaryButton:r,closeCoachmark:r,coachmarkClassNames:"c-joiner-coachmark",qa:"joiner-coachmark",arrowPosition:10,offsetX:30,offsetY:45,primaryCallToActionText:le.t("Got It",{fallbackHash:"8297bb17c6aa1537d802e8ab86dcd018ffb7b6d0"}),orientation:"top"},n.a.createElement("h3",null,le.rt("Say hello!",{fallbackHash:"ff30242209ddac7a521de4f37aabe952bc39165f"})),n.a.createElement("p",null,le.rt("Type a message to let your team know you\u2019re here.",{fallbackHash:"cacc432d26db2e0a0a36a197f329204ee25e63e1"}))))}}]);return t}(oe["a"]);de.displayName="JoinerOnboardingCoachmark";de.propTypes=ce;de.defaultProps=ue;var pe=new j["b"]("coachmarks");var me={anchorElement:k["default"].instanceOf(Element),setTractorMessageCoachmarkVisibility:k["default"].func};var he={anchorElement:null,setTractorMessageCoachmarkVisibility:y["noop"]};var ve=function(e){_()(t,e);function t(){c()(this,t);return m()(this,v()(t).apply(this,arguments))}d()(t,[{key:"render",value:function e(){var t=this.props,a=t.anchorElement,r=t.setTractorMessageCoachmarkVisibility;return n.a.createElement("div",{className:"position_relative"},n.a.createElement(oe["a"],{anchorElement:a,"data-qa":"coachmark",isOpen:true,orientation:"top",offsetX:30,offsetY:45,arrowPosition:10,closeCoachmark:function e(){return r(false)}},n.a.createElement("h3",null,pe.t("Just type and press Enter")),n.a.createElement("p",null,pe.t("Your Slack teammates will see your messages when they join. Feel free to use your own words instead!"))))}}]);return t}(oe["a"]);ve.displayName="TractorSendMessageCoachmark";ve.propTypes=me;ve.defaultProps=he;var fe=a(1273);var be=a(22);var ge=a(202);var _e=a(1556);var ye=a(2737);var Oe=a(1037);var ke=a(61);var Ee=a(1296);var Ce=a(755);var Se=a(906);var we=a(1157);var je=a(1158);var Ie=a(35);var Te=a(486);var Ae=a(211);var Ne=a(1670);var Pe=a(1991);var Me=new j["b"]("welcome_place");function De(e){var t;t=e.hasMessages?Me.rt("<b>Send your first message</b> to let your teammates know you're here."):Me.rt("<b>Be the first to post a message</b> and help get the conversation started.");return n.a.createElement("p",{className:"padding_top_125"},t)}var xe=function e(t){return{hasMessages:Object(Ne["a"])(t,Object(N["a"])(t))}};var Re=Object(i["connect"])(xe)(De);var Fe=a(174);var Le=a(98);var Ue=a(23);var Be=a(14);var qe=new j["b"]("welcome_place");var Ge=function(e){_()(t,e);function t(e){var a;c()(this,t);a=m()(this,v()(t).call(this,e));a.shouldRenderWrapper=function(){var e=a.props,t=e.isEligibleForWrapper,r=e.isSendMessageBannerDismissed;var n=a.state.isTaskCompleteAtStart;return t&&!n&&!r};a.onClickClose=function(){a.props.dismissWrapper()};a.onClickGetStartedLink=function(){var e=a.props.goToWelcomePlace;e()};a.state={isTaskCompleteAtStart:e.isTaskComplete};return a}d()(t,[{key:"componentDidMount",value:function e(){var t=this.props,a=t.clogger,r=t.pageViewingSessionId;this.shouldRenderWrapper()&&a.track("WELCOME_PLACE",{contexts:{ui_context:{action:Be["UiAction"].IMPRESSION,ui_element:Be["UiElement"].WELCOME_PLACE_CHANNEL_MESSAGE_BANNER},welcome_place:{welcome_session_id:r}}})}},{key:"render",value:function e(){var t=this.props,a=t.channelId,r=t.children,i=t.hasMessagesToRender,s=t.prefillMessageInput,o=t.isTaskComplete,l=t.shouldShowSuccessfulSent;if(!this.shouldRenderWrapper())return r;var c=n.a.createElement(Le["a"],{onClick:this.onClickClose},n.a.createElement(Ue["b"],{type:"times-medium"}));if(o||l)return n.a.createElement("div",{className:"p-message_pane_input__wrapper--welcome-place","data-qa":"welcome_place_input_wrapper"},n.a.createElement("div",{className:"display_flex justify_content_between"},n.a.createElement("p",{className:"padding_top_125"},n.a.createElement("span",{role:"img","aria-label":qe.t("Tada!")},"\ud83c\udf89"),qe.rt("<b>Sent!</b> Ready to learn more about Slack?")," ",n.a.createElement(Te["a"],{onClick:this.onClickGetStartedLink},qe.rt("Head to <b>Get Started</b>"))),c),r);return n.a.createElement("div",{className:"p-message_pane_input__wrapper--welcome-place","data-qa":"welcome_place_input_wrapper"},n.a.createElement("div",{className:"display_flex justify_content_between"},n.a.createElement(Re,{channelId:a}),c),r,n.a.createElement("div",{className:"p-message_pane_input__message-suggestions-container"},n.a.createElement(Pe["a"],{hasMessagesToRender:i,prefillMessageInput:s})))}}]);return t}(r["Component"]);Ge.displayName="WelcomeMessageWrapper";var He=function e(t,a){var r=a.channelId;var n=Object(P["e"])(t,r);var i=Object(x["b"])(t);return{hasMessagesToRender:Object(Ne["a"])(t,n),isEligibleForWrapper:Object(K["w"])(t)&&!Object(T["isImOrMpim"])(n)&&!Object(T["isReadOnly"])(n)&&!Object(T["isYou"])(i.id,n)&&Object(T["isMemberOfChannel"])(n)&&Object(A["r"])(t,n.id)&&!Object(T["isOrgShared"])(n)&&!Object(T["isExternallySharedChannel"])(n)&&!Object(T["isArchived"])(n)&&!Object(T["isSlackbot"])(n),isTaskComplete:Object(K["u"])(t),isSendMessageBannerDismissed:!Object(K["n"])(t),clogger:Object(Ie["a"])({state:t}),pageViewingSessionId:Object(K["m"])(t)}};var We=function e(t){return{dismissWrapper:function e(){return t(Object(Fe["b"])())},goToWelcomePlace:function e(){return t(Object(Ae["a"])({id:"Pwelcome",fromHistory:false,replaceHistoryState:false}))}}};var Ve=Object(i["connect"])(He,We)(Ge);var Ke=a(1817);var ze=a(11);var Qe=a(915);var Ye=a(447);var Je=a(4676);var Xe=a(88);var Ze=a.n(Xe);var $e=a(121);var et=a(33);var tt=a(1078);var at=a(505);var rt=a(27);var nt=a(86);var it=a(2738);var st=a(24);var ot=a(166);var lt=new j["b"]("view");var ct={showCloseButton:false,channelIsIMWithDeletedMember:false,prevChannelId:void 0,member:void 0,featureAnnounceOnly:false};var ut=function(e){_()(t,e);function t(){var e;c()(this,t);e=m()(this,v()(t).call(this));Object(O["a"])(b()(e),["onCloseButtonClicked","renderSharedChannelFreeTrialUpgradePane","onUpgradeButtonClicked"]);return e}d()(t,[{key:"componentDidMount",value:function e(){var t=this.props,a=t.clogger,r=t.isChannelFrozenAndInGracePeriod;if(r){var n,i;a.track(Be["EventId"].CHANNEL_CREATE_FLOW,{contexts:Ze()({},Be["ClientEventKeys"].ui_context,(i={},Ze()(i,Be["UiContextKeys"].step,Be["UiStep"].SHARED_CHANNEL_TRIAL_EXPIRED),Ze()(i,Be["UiContextKeys"].action,Be["UiAction"].IMPRESSION),Ze()(i,Be["UiContextKeys"].ui_properties,(n={},Ze()(n,Be["UiPropertiesKeys"].element_type,Be["ElementType"].BANNER),Ze()(n,Be["UiPropertiesKeys"].element_name,"frozen_message_pane"),n)),i))})}}},{key:"onCloseButtonClicked",value:function e(){Object(T["isIm"])(this.props.channel)?this.props.closeChannelApi({channelId:this.props.channelId}):this.props.archiveChannel({id:this.props.channelId,wasArchivedThisSession:false});this.props.displayModelOrViewById({id:this.props.prevChannelId})}},{key:"onUpgradeButtonClicked",value:function e(){var t=this.props,a=t.team,r=t.clogger,n=t.isChannelFrozenAndInGracePeriod;if(n){var i,s;r.track(Be["EventId"].CHANNEL_CREATE_FLOW,{contexts:Ze()({},Be["ClientEventKeys"].ui_context,(s={},Ze()(s,Be["UiContextKeys"].step,Be["UiStep"].SHARED_CHANNEL_TRIAL_EXPIRED),Ze()(s,Be["UiContextKeys"].action,Be["UiAction"].CLICK),Ze()(s,Be["UiContextKeys"].ui_properties,(i={},Ze()(i,Be["UiPropertiesKeys"].element_type,Be["ElementType"].BUTTON),Ze()(i,Be["UiPropertiesKeys"].element_name,"frozen_message_pane_upgrade"),i)),s))})}Object(rt["openAuthenticatedUrlInBrowser"])(a,nt["a"]+"?s=1&p=std_y&entry_point=shared_channels_free_trial_frozen_pane")}},{key:"renderSharedChannelFreeTrialUpgradePane",value:function e(){return n.a.createElement("div",{className:"p-message_pane_input__disabled"},n.a.createElement("span",{className:"p-message_pane_input__disabled_text"},lt.rt("Upgrade to reconnect this shared channel for your organization.")),n.a.createElement(st["d"],{pillarClassName:"p-message_pane_input__disabled_button",onClick:this.onUpgradeButtonClicked,type:"outline-primary",size:"small"},lt.t("Upgrade")))}},{key:"render",value:function e(){var t=this.props,a=t.channel,r=t.showCloseButton,i=t.channelIsIMWithDeletedMember,s=t.member,o=t.featureAnnounceOnly,l=t.isChannelFrozenAndInGracePeriod;if(!a)return null;var c=Object(T["isChannel"])(a)?lt.t("Close Channel"):lt.t("Close");var u=null;var d="";if(l)return this.renderSharedChannelFreeTrialUpgradePane();if(Object(T["isFrozen"])(a))d=Object(T["isIm"])(a)?lt.rt("Your two organizations are no longer connected."):Object(T["isMpim"])(a)?lt.rt("These organizations are no longer connected."):lt.rt("This channel is no longer shared with your organization.");else if(Object(T["isArchived"])(a)&&!Object(T["isIm"])(a))d=Object(T["getIsChannelMoved"])(a)?lt.rt("{channel_or_group} was moved to another workspace.",{channel_or_group:n.a.createElement("strong",null,n.a.createElement(ot["a"],{channel:a})),fallbackHash:"27c083b405e96387febe1099064dd930b6696124",fallbackHashNs:"view"}):lt.rt("You are viewing {channel_or_group}, an archived channel",{channel_or_group:n.a.createElement("strong",null,n.a.createElement(ot["a"],{channel:a}))});else if(i&&s&&Object($["isAppUser"])(s))d=lt.t("You are viewing messages from {app_name} which has been removed from your workspace",{app_name:Object($["getMemberRealName"])(s)});else if(i){u=n.a.createElement(Ue["b"],{type:"archive"});d=lt.rt("You are viewing the archives of a deactivated account",{fallbackHash:"a2f3df2a30993d2303ac6a87adcd41cb35c1799f"})}else{if(o){var p=lt.t("Posting to this channel has been restricted to select members");return n.a.createElement(it["a"],{tooltip:p,featureAnnounceOnly:o,border:true,padding:"large"})}d=lt.rt("Your Workspace Owners have limited who can post to {channel_or_group}",{channel_or_group:n.a.createElement("strong",null,n.a.createElement(ot["a"],{channel:a}))})}return n.a.createElement("div",{className:"p-message_pane_input__disabled"},n.a.createElement("span",{className:"p-message_pane_input__disabled_text"},u," ",d),r&&n.a.createElement(st["d"],{pillarClassName:"p-message_pane_input__disabled_button",onClick:this.onCloseButtonClicked,type:"outline",size:"small"},c))}}]);return t}(r["Component"]);ut.displayName="MessagePaneInputDisabled";ut.defaultProps=ct;var dt=function e(t,a){var r=a.teamId,n=a.channelId;var i=Object(et["k"])(t,r);var s=Object(P["e"])(t,n);var o=Object(T["isIm"])(s)?Object(x["e"])(t,Object(T["getMemberIdFromIm"])(s)):null;var l=Object(T["isImWithDeletedMember"])(t,s);var c=Object(tt["a"])(t);return{team:i,channel:s,member:o,channelIsIMWithDeletedMember:l,prevChannelId:c,showCloseButton:!Object(T["isFrozen"])(s)&&(Object(T["isArchived"])(s)||l),featureAnnounceOnly:Object(ze["isFeatureEnabled"])(t,"feature_announce_only"),isChannelFrozenAndInGracePeriod:Object(T["isFrozenAndInGracePeriod"])(r,s),clogger:Object(Ie["a"])({state:t})}};var pt={closeChannelApi:$e["closeChannelApi"],archiveChannel:$e["archiveChannel"],displayModelOrViewById:at["a"]};var mt=Object(i["connect"])(dt,pt)(ut);var ht=a(119);var vt=a(104);var ft=a(235);var bt=a(512);var gt=a(150);var _t=a(189);var yt=a(519);var Ot=a(892);var kt=a(54);var Et=a(299);var Ct=a(316);var St=a(524);var wt=a(123);var jt=new j["b"]("archives");var It={channelCreatedBySelf:false,channelDetailsVisible:false,dateCreated:void 0,createdById:void 0,userAttentionIsOnChat:false,previousChannelId:void 0};var Tt=function(e){_()(t,e);function t(){var e;c()(this,t);e=m()(this,v()(t).call(this));e.onJoinButtonClicked=e.onJoinButtonClicked.bind(b()(e));e.onDetailsButtonClicked=e.onDetailsButtonClicked.bind(b()(e));e.handleKeyDown=e.handleKeyDown.bind(b()(e));return e}d()(t,[{key:"componentDidMount",value:function e(){document.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function e(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"onDetailsButtonClicked",value:function e(){this.props.showDetails()}},{key:"onJoinButtonClicked",value:function e(){this.props.joinConversationApi({channelId:this.props.channelId})}},{key:"handleKeyDown",value:function e(t){var a=this.props,r=a.userAttentionIsOnChat,n=a.previousChannelId;if(t.metaKey||t.ctrlKey||t.altKey||t.shiftKey)return;if(Object(yt["a"])(document.activeElement))return;if(Object(ee["a"])()&&!r)return;if(!Object(ee["a"])()&&!Object(ft["f"])())return;if(t.keyCode===wt["e"]){this.onJoinButtonClicked();return}if(t.keyCode===wt["f"]){if(Object(ee["a"])()){this.props.displayModelOrViewById({id:n});return}Object(bt["a"])()}}},{key:"render",value:function e(){var t=this.props,a=t.channel,r=t.dateCreated,i=t.createdById,s=t.channelCreatedBySelf,o=t.channelDetailsVisible,l=t.featureOfflineMode,c=t.isOffline;var u=n.a.createElement(St["a"],{type:"unknown"});r&&(u=Object(_t["i"])(r));var d=n.a.createElement(St["a"],{type:"unknown"});i&&(d=n.a.createElement(Ct["a"],{id:i}));var p=jt.rt("You are viewing {channel_name}",{channel_name:n.a.createElement("strong",null,n.a.createElement(Et["a"],{channel:a,boldIcon:true}))});var m="";m=s?jt.rt("Created by you on {created_at}",{created_at:u}):jt.rt("Created by {name} on {created_at}",{name:d,created_at:u});var h=n.a.createElement(st["d"],{pillarClassName:"p-message_pane_input__preview_join",onClick:this.onJoinButtonClicked,type:"primary",size:"medium",disabled:l&&c,dataQA:"join-channel"},jt.t("Join Channel"));if(l&&c){var v=n.a.createElement(Ot["a"],{tooltipLabel:jt.t("Go online to join this channel")});h=n.a.createElement(kt["c"],{tip:v},n.a.createElement("div",{className:"inline_block"},h))}return n.a.createElement("div",{className:"p-message_pane_input__preview"},n.a.createElement("div",{className:"p-message_pane_input__preview_subtitle"},p),n.a.createElement("div",{className:"p-message_pane_input__preview_metadata"},m),n.a.createElement("div",null,h,!o&&n.a.createElement(st["d"],{pillarClassName:"p-message_pane_input__preview_details",onClick:this.onDetailsButtonClicked,type:"outline",size:"medium"},jt.t("See More Details"))))}}]);return t}(r["Component"]);Tt.displayName="MessagePaneInputPreview";Tt.defaultProps=It;var At=function e(t,a){var r=a.channelId;var n=Object(P["e"])(t,r);var i=Object(ht["j"])(t);return{channel:n,channelDetailsVisible:"details"===i||"channel_info"===i,createdById:n.creator,dateCreated:n.created,channelCreatedBySelf:n.creator===Object(ze["getCurrentUserId"])(t),userAttentionIsOnChat:Object(te["e"])(t),previousChannelId:Object(tt["a"])(t),featureOfflineMode:Object(ze["isFeatureEnabled"])(t,"feature_offline_mode"),isOffline:!Object(gt["c"])(t)}};var Nt={joinConversationApi:$e["joinConversationApi"],showDetails:vt["f"],displayModelOrViewById:at["a"]};var Pt=Object(i["connect"])(At,Nt)(Tt);var Mt=a(840);var Dt=a(1995);var xt={isSelfDm:false,channelName:void 0,memberId:void 0,showStatus:false,forcePlaceholderText:void 0};var Rt=function(e){_()(t,e);function t(){c()(this,t);return m()(this,v()(t).apply(this,arguments))}d()(t,[{key:"render",value:function e(){var t=this.props,a=t.channelName,r=t.isSelfDm,i=t.showStatus,s=t.memberId,o=t.forcePlaceholderText;var l=o||Object(Dt["a"])({channelName:a,isSelfDm:r});var c=!o&&i&&n.a.createElement(Mt["b"],{memberId:s,tooltip:false});return n.a.createElement("div",{className:"c-texty_input__placeholder"},l,c)}}]);return t}(r["Component"]);Rt.displayName="MessagePaneInputPlaceholder";Rt.defaultProps=xt;var Ft=function e(t,a){var r=a.channelId,n=a.isSelfDm;var i=Object(P["e"])(t,r);var s=Object(T["getMemberIdFromIm"])(i);var o=s?Object(x["e"])(t,s):null;return{memberId:s||void 0,showStatus:Object(T["isIm"])(i)&&!n&&Object($["hasCustomStatusSet"])(o)}};var Lt=Object(i["connect"])(Ft)(Rt);var Ut=a(2479);var Bt={channel:void 0,channelId:void 0,isSelfDm:false,channelName:void 0,prepareAndSendMessage:function e(){return Promise.resolve()},currentUserStartedTyping:y["noop"],currentUserEndedTyping:y["noop"],editLastMessageInChannel:y["noop"],useSendButton:false,userCanPost:true,typingNames:[],teamId:void 0,featureAtMentionInvites:false,featureUnifiedDrafts:false,featureComposeFlowSend:false,isUnavailable:false,shouldShowJoinerLandingPlaceCoachmark:false,completeJoinerOnboardingCallback:y["noop"],shouldShowTractorMessageCoachmark:false,setTractorMessageCoachmarkVisibility:y["noop"],userAttentionIsOnChat:false,composerVisible:false,removeFromSectionNavigation:y["noop"],addToSectionNavigation:y["noop"],resetSectionNavigation:y["noop"],shouldShowWorkflowItemCoachmark:false,featureMessageNavigationShortcuts:false,setFocusLastVisibleMessageInChannel:y["noop"],focusMessageInput:false,setFocusMessageInput:y["noop"],featureFilesInInput:false,setComposerDraft:y["noop"],clearDrafts:y["noop"],unifiedDraft:void 0,pendingFileIds:void 0};var qt=function(e){_()(t,e);function t(){var e;c()(this,t);e=m()(this,v()(t).call(this));Object(O["a"])(b()(e),["handleKeyDown","onTextChange","onSelectionChange","sendMessage","editLastMessage","startListeningToKeydown","stopListeningToKeydown","registerInput","unregisterInput","focus","blur","onFocus","onBlur","onUpArrow","prefillMessageInput"]);e.textyRef=n.a.createRef();e.reactionPopoverRef=n.a.createRef();e.state={textyValue:"",textyWysiwygLength:0,hasKeyboardFocus:false,showSentSuccessfullyWrapper:false};return e}d()(t,[{key:"componentDidMount",value:function e(){this.updatePlaceholder();this.registerInput();this.restoreLegacyDraft()}},{key:"shouldComponentUpdate",value:function e(t){var a=this.props,r=a.userCanPost,n=a.channel;(r&&!t.userCanPost||!Object(T["isPreview"])(n)&&Object(T["isPreview"])(t.channel))&&this.unmountPlaceholder();return true}},{key:"componentDidUpdate",value:function e(t){var a=this.props,r=a.userAttentionIsOnChat,n=a.channelId,i=a.userCanPost,s=a.channel,o=a.focusMessageInput,l=a.featureMessageNavigationShortcuts;var c={prevUserAttentionIsOnChat:t.userAttentionIsOnChat,prevComposerVisible:t.composerVisible,currentUserAttentionIsOnChat:this.props.userAttentionIsOnChat,currentComposerVisible:this.props.composerVisible};Object(we["a"])(c)&&this.props.addToSectionNavigation();Object(je["a"])(c)&&this.props.removeFromSectionNavigation();t.userAttentionIsOnChat&&!r?this.stopListeningToKeydown():!t.userAttentionIsOnChat&&r&&this.startListeningToKeydown();if(t.channelId!==n){t.channelId&&this.unregisterInput(t.channelId);if(n){this.registerInput();this.restoreLegacyDraft()}}(n&&t.channelId!==n||!t.userCanPost&&i||(!t.channel||Object(T["isPreview"])(t.channel))&&!Object(T["isPreview"])(s))&&this.updatePlaceholder();var u=t.focusMessageInput!==o&&o;if(l&&u){var d=this.getInputRef();d&&d.focus();this.props.setFocusMessageInput(null)}}},{key:"componentWillUnmount",value:function e(){var t=this.props.channelId;this.stopListeningToKeydown();this.unmountPlaceholder();this.unregisterInput(t);this.shouldNotListenToKeyDownAgain=true}},{key:"onBlur",value:function e(){this.startListeningToKeydown();var t=this.getInputRef();t&&this.setState(function(){return{hasKeyboardFocus:false}})}},{key:"onFocus",value:function e(){this.stopListeningToKeydown();this.props.resetSectionNavigation()}},{key:"onSelectionChange",value:function e(){var t=this.state.cursorInCodeBlock;var a=this.getInputRef();if(a){var r=a.getFormat();var n=r&&r["code-block"];t!==n&&this.setState(function(){return{cursorInCodeBlock:n}})}}},{key:"onTextChange",value:function e(t,a){var r=this.props.channelId;var n=this.getInputRef();var i=false;if(n){var s=n.getFormat();i=s&&s["code-block"]}this.setState(function(){return{textyValue:t,textyWysiwygLength:Object(Oe["a"])(new w.a(a)),cursorInCodeBlock:i}});Object(ee["a"])()||Object(Ye["g"])(t);t&&0!==t.indexOf("/")&&Object(y["trim"])(t).length?this.props.currentUserStartedTyping({channelId:r}):this.props.currentUserEndedTyping({channelId:r})}},{key:"onUpArrow",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.props.featureMessageNavigationShortcuts&&!t&&this.props.setFocusLastVisibleMessageInChannel(true)}},{key:"getInputRef",value:function e(){if(!this.textyRef.current)return null;return this.textyRef.current.getWrappedInstance?this.textyRef.current.getWrappedInstance():this.textyRef.current}},{key:"blur",value:function e(){var t=this.getInputRef();t&&t.blur();this.onBlur()}},{key:"editLastMessage",value:function e(t){var a=t.keyboardShortcut,r=t.hasKeyboardFocus;this.props.editLastMessageInChannel({channelId:this.props.channelId,keyboardShortcut:a,hasKeyboardFocus:r})}},{key:"focus",value:function e(){var t=this.getInputRef();if(t){t.setCursorAtEnd();this.setState(function(){return{hasKeyboardFocus:true}})}}},{key:"handleKeyDown",value:function e(t){if(!Object(ye["a"])({e:t,isMenuVisible:Object(Z["g"])()}))return;var a=Object(_e["a"])(t.target,function(e){return e.classList.contains("p-threads_flexpane")});if(a)return;var r=this.getInputRef();Object(I["c"])()?setTimeout(function(){return r.focus()},0):r&&r.focus()}},{key:"prefillMessageInput",value:function e(t){var a=this.getInputRef();a.value(Object(z["b"])(t));a.setCursorAtEnd()}},{key:"registerInput",value:function e(){var t=this;var a=this.props.channelId;if(!a)return;Object(ge["c"])({viewContext:be["MESSAGE_CONTAINERS"].MESSAGE_PANE,channelId:a,functions:{getContainer:function e(){var a=t.getInputRef();return a?a.container:null},isEmpty:function e(){var a=t.getInputRef();return a?a.isEmpty():null},clear:function e(){var a=t.getInputRef();a&&a.clear()},prependContents:function e(a){var r=t.getInputRef();r&&r.prependContents(a)},setContents:function e(a){var r=t.getInputRef();r&&r.setContents(a)},getContents:function e(){var a=t.getInputRef();return a?a.getContents():null},setText:function e(a){var r=t.getInputRef();r&&r.value(a)},getText:function e(){var a=t.getInputRef();return a?a.value():null},getLength:function e(){var a=t.getInputRef();return a?a.getLength():null},getDisplayValue:function e(){var a=t.getInputRef();return a?a.displayValue():null},focus:function e(){var a=t.getInputRef();a&&a.setCursorAtEnd()},focusWithoutSettingCursor:function e(){var a=t.getInputRef();a&&a.focus()},hasFocus:function e(){var a=t.getInputRef();return!!a&&a.hasFocus()},isEnabled:function e(){var a=t.getInputRef();return!!a&&a.isEnabled()},getSelection:function e(){var a=t.getInputRef();return a?a.getSelection():null},insertContentsAtCursor:function e(a){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"user";var i=t.getInputRef();i&&i.insertContentsAtCursor(a,r,n)},setCursor:function e(a,r){var n=t.getInputRef();n&&n.setCursor(a,r)},setCursorAtEnd:function e(){var a=t.getInputRef();a&&a.setCursorAtEnd()},setPlaceholder:function e(a){t.updatePlaceholder(a)},getContentsForCurrentSelection:function e(){var a=t.getInputRef();if(!a)return null;var r=a.getSelection();if(!r)return null;return a.getContentsForRange(r.index,r.length)},openReactionPopoverForLastMessage:function e(){if(t.reactionPopoverRef.current){var a;var r=(null===(a=t.reactionPopoverRef.current)||void 0===a?void 0:a.getWrappedInstance)?t.reactionPopoverRef.current.getWrappedInstance():t.reactionPopoverRef.current;(null===r||void 0===r?void 0:r.startReactionPopoverForLastMessage)&&r.startReactionPopoverForLastMessage()}},isCursorAtBeginning:function e(){var a=t.getInputRef();if(!a)return false;var r=a.getSelection();return r&&0===r.index},isCursorAtEnd:function e(){var a=t.getInputRef();if(!a)return false;var r=a.getSelection();return r&&r.index===a.getLength()}}})}},{key:"restoreLegacyDraft",value:function e(){var t=this.props.channelId;var a=this.getInputRef();if(!t)return;if(Object(ee["a"])())return;if(!a)return;var r=Object(Qe["a"])(t);a.value(r||"");var n=Object(Ye["b"])(t);n?a.setCursor(n.start,n.length):a.setCursorAtEnd()}},{key:"isSendingDisabled",value:function e(){var t=this.props,a=t.featureFilesInInput,r=t.pendingFileIds,n=t.unifiedDraft;var i=this.state.textyValue;if(a){if(!Object(y["isEmpty"])(r))return true;var s=!!Object(y["trim"])(i);var o=!Object(y["isEmpty"])(Object(G["i"])(n));var l=o&&Object(G["i"])(n).length>be["MAX_FILE_UPLOAD_COUNT"];if(l)return true;return!s&&!o}return!Object(y["trim"])(i)}},{key:"sendMessage",value:function e(){var t=this;var a=this.props,r=a.channelId,n=a.useSendButton,i=a.telemeter,s=a.featureFilesInInput,o=a.unifiedDraft;var l=this.getInputRef();var c=l.value();var u=l.getContents();var d=s&&o?Object(G["i"])(o):null;var p=Object(ne["a"])(u);if(s){if(!p&&Object(y["isEmpty"])(d))return null}else if(!p)return null;Object(Ke["a"])()&&i.mark("msg_input_try_to_submit");s&&o?this.props.clearDrafts({ids:[Object(q["d"])({channelId:r})]}):l.clear();this.setState(function(){return{cursorInCodeBlock:false,showSentSuccessfullyWrapper:true}});n&&l.focus();return this.props.prepareAndSendMessage({channelId:r,text:c,delta:new w.a(u.contents),fileIds:d,includeBroadcastKeywordWarning:true,includeAtMentionInviteWarning:true,includePrivateFileReshareWarning:true}).then(function(){var e=t.getInputRef();e&&e.clearHistory()}).catch(function(){l.isEmpty()&&(s?t.props.setComposerDraft(o):l.setContents(u))})}},{key:"startListeningToKeydown",value:function e(){if(this.shouldNotListenToKeyDownAgain)return;var t=this.props.userAttentionIsOnChat;if(!t)return;document.addEventListener("keydown",this.handleKeyDown)}},{key:"stopListeningToKeydown",value:function e(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"unmountPlaceholder",value:function e(){var t=this.getInputRef();if(!t)return;var a=t.container.querySelector(".ql-placeholder");a&&C.a.unmountComponentAtNode(a)}},{key:"unregisterInput",value:function e(t){if(!t)return;Object(ge["d"])({viewContext:be["MESSAGE_CONTAINERS"].MESSAGE_PANE,channelId:t})}},{key:"updatePlaceholder",value:function e(t){var a=this.props,r=a.channelName,s=a.isSelfDm,l=a.teamId,c=a.channelId;var u=this.getInputRef();if(!u)return;var d=u.container.querySelector(".ql-placeholder");if(d){C.a.render(n.a.createElement(i["Provider"],{store:Object(o["f"])(l)},n.a.createElement(Lt,{channelId:c,channelName:r,forcePlaceholderText:t,isSelfDm:s})),d);var p=t||Object(Dt["a"])({channelName:r,isSelfDm:s});var m=u.container.querySelector(".ql-editor");m.setAttribute("aria-label",p)}}},{key:"renderContextBar",value:function e(){var t=this.props.channelId;return n.a.createElement(Je["a"],{key:t,channelId:t})}},{key:"renderInput",value:function e(){var t=this.props,a=t.channelId,r=t.useSendButton,i=t.featureUnifiedDrafts,s=t.featureComposeFlowSend;var o=this.state.hasKeyboardFocus;var l="context-bar-text";var c=n.a.createElement(ae["c"],{channelId:a,viewContext:be["MESSAGE_CONTAINERS"].MESSAGE_PANE,className:"p-workspace__input",sendMessage:this.sendMessage,editLastMessage:this.editLastMessage,useSendButton:r,ref:this.textyRef,enableEmojiButton:true,enableMentionButton:true,enableComposerButton:true,enableSendButton:s&&r,isSendingDisabled:this.isSendingDisabled(),focusOnMount:true,focusOnPaste:true,onTextChange:this.onTextChange,onSelectionChange:this.onSelectionChange,onFocus:this.onFocus,onBlur:this.onBlur,maxLines:null,maxLength:be["MAX_MESSAGE_INPUT_WYSIWYG_LENGTH"],showFocusOutline:o,ariaDescribedBy:l,onUpArrow:this.onUpArrow,unifiedDraftId:i?Object(q["d"])({channelId:a}):null});if(Object(ee["a"])())return n.a.createElement(re["a"],{ref:this.reactionPopoverRef,channelId:a},c);return c}},{key:"render",value:function e(){var t=this.props,a=t.typingNames,r=t.useSendButton,i=t.completeJoinerOnboardingCallback,s=t.userCanPost,o=t.channel,l=t.channelId,c=t.teamId,u=t.shouldShowTractorMessageCoachmark,d=t.setTractorMessageCoachmarkVisibility,p=t.shouldShowJoinerLandingPlaceCoachmark,m=t.shouldShowWorkflowItemCoachmark,h=t.featureAtMentionInvites,v=t.featureComposeFlowSend,f=t.channelName,b=t.isSelfDm;var g=this.state,_=g.textyValue,O=g.textyWysiwygLength,k=g.cursorInCodeBlock;var E=null;p?E=n.a.createElement(de,{completeJoinerOnboarding:i}):u?E=n.a.createElement(ve,{setTractorMessageCoachmarkVisibility:d}):m&&(E=n.a.createElement(de,{completeJoinerOnboarding:function e(){return Object(V["c"])(false)}}));if(this.props.isUnavailable)return null;if(l&&Object(T["isPreview"])(o))return n.a.createElement(Pt,{channelId:this.props.channelId});if(l&&!s)return n.a.createElement(mt,{teamId:c,channelId:this.props.channelId});var C=Object(Dt["a"])({channelName:f,isSelfDm:b});var S=n.a.createElement(Ve,{channelId:l,prefillMessageInput:this.prefillMessageInput,shouldShowSuccessfulSent:this.state.showSentSuccessfullyWrapper},n.a.createElement("div",{className:"p-message_pane_input",role:"complementary","aria-label":C},n.a.createElement("div",{className:"p-message_pane_input_inner"},this.renderContextBar(),this.renderInput(),n.a.createElement(ie["a"],{typingNames:a,textLength:O,cursorInCodeBlock:k})),!v&&r&&n.a.createElement(ae["b"],{isDisabled:!Object(y["trim"])(_),sendMessage:this.sendMessage,className:"p-workspace__message_pane_send"})));if(Object(ee["a"])()){if(h||E)return n.a.createElement(fe["a"],{coachmarkElement:E,orientation:"top",style:{width:"100%"}},S);return S}return n.a.createElement(se["a"],{component:this,order:2},S)}}]);return t}(r["Component"]);qt.displayName="MessagePaneInput";qt.defaultProps=Bt;var Gt=function e(t){var a=Object(N["a"])(t);var r=Object(P["e"])(t,a);var n=Object(y["map"])(Object(D["getTyperIdsInChannel"])(t,a),function(e){return Object(x["e"])(t,e)});n.sort(function(e,a){return Object(j["r"])(Object($["getPrefCompliantMemberNameLowerCase"])(t,e),Object($["getPrefCompliantMemberNameLowerCase"])(t,a))});var i=Object(A["r"])(t,a)||Object(ze["isFeatureEnabled"])(t,"feature_announce_only_websocket")&&Object(T["getHasReadOnlyDraft"])(t,r);var s=n.map(function(e){return Object($["getPrefCompliantMemberName"])(t,e)});var o=Object(ze["getCurrentUserId"])(t);return{channelId:a,channel:r,channelName:Object(T["getDisplayNameForChannel"])(t,r,{imIncludeAtSign:false}),isSelfDm:Object(T["isYou"])(o,r),userCanPost:i&&!Object(T["isArchived"])(r),typingNames:s.length>0?s:Ee["a"],useSendButton:Object(R["k"])(t,"msg_input_send_btn"),userAttentionIsOnChat:Object(te["e"])(t),composerVisible:Object(Se["isComposerVisible"])(t),teamId:Object(Q["b"])(t),featureAtMentionInvites:Object(ze["isFeatureEnabled"])(t,"feature_at_mention_invites"),featureUnifiedDrafts:Object(L["k"])(t),featureComposeFlowSend:Object(L["h"])(t),isUnavailable:Object(T["isUnavailable"])(t,r),telemeter:Object(ke["c"])({state:t}),shouldShowTractorMessageCoachmark:Object(W["c"])(t),shouldShowJoinerLandingPlaceCoachmark:Object(W["a"])(t),shouldShowWorkflowItemCoachmark:Object(K["q"])(t),featureMessageNavigationShortcuts:Object(ze["isFeatureEnabled"])(t,"feature_message_navigation_shortcuts"),focusMessageInput:Object(X["d"])(t),featureFilesInInput:Object(L["j"])(t),unifiedDraft:Object(L["k"])(t)?Object(L["d"])(t,Object(q["d"])({channelId:a})):null,pendingFileIds:Object(L["j"])(t)?Object(H["a"])(t,{draftId:Object(q["d"])({channelId:a})}):null}};var Ht={prepareAndSendMessage:function e(){return M["a"].apply(void 0,arguments)},currentUserStartedTyping:function e(){return D["currentUserStartedTyping"].apply(void 0,arguments)},currentUserEndedTyping:function e(){return D["currentUserEndedTyping"].apply(void 0,arguments)},editLastMessageInChannel:function e(){return Y["a"].apply(void 0,arguments)},completeJoinerOnboardingCallback:function e(){return F["a"].apply(void 0,arguments)},setTractorMessageCoachmarkVisibility:function e(){return V["g"].apply(void 0,arguments)},setFocusLastVisibleMessageInChannel:function e(){return J["h"].apply(void 0,arguments)},setFocusMessageInput:function e(){return J["i"].apply(void 0,arguments)},setComposerDraft:function e(){return U["g"].apply(void 0,arguments)},clearDrafts:function e(){return B["a"].apply(void 0,arguments)}};var Wt=Object(ee["a"])()?Object(Ce["a"])(qt,"MessagePaneInput",{index:7}):qt;var Vt=Object(i["connect"])(Gt,Ht)(Wt);var Kt=Vt;var zt=a(197);var Qt=function e(t,a){if(!t)throw new Error("mountMessagePaneInput must be called with a teamId parameter");var r=Object(o["f"])(t);Object(s["a"])(n.a.createElement(i["Provider"],{store:r},n.a.createElement(zt["a"],null,n.a.createElement(Kt,null))),a)};var Yt=Qt;var Jt=a(52);Object(Jt["a"])("interop.mountMessagePaneInput",Yt)},,function(e,t,a){"use strict";var r=a(88);var n=a.n(r);var i=a(2);var s=a.n(i);var o=a(18);var l=a(0);var c=a(21);var u=a(756);var d=a(42);var p=a(606);var m=a(32);var h=a(16);function v(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function f(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?v(Object(a),true).forEach(function(t){n()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):v(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var b={url:l["default"].string.isRequired,windowFeatures:l["default"].object,hidden:l["default"].bool,processEvent:l["default"].func};var g={width:590,height:520};var _="REMOTE-FILE-PICKER";var y="fp_";var O=function e(t,a){return function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.resolve,i=r.reject;if(!Object(m["isSSB"])()||Object(d["isContextIsolationEnabled"])()){if(e.source!==t)return;if(e.origin!==window.location.origin)return}if(!e.data||e.data._sourceId!==a)return;e.data.ok&&n(e.data);var s=new Error("Data not OK");s.data=e.data;i(s)}};var k=function e(t){return new Promise(function(e,a,r){var n;var i=function r(i){var s=function t(a){e(a);n()};var o=function e(t){a(t);n()};try{t(i,{resolve:s,reject:o})}catch(e){o(e)}};n=function e(){return window.removeEventListener("message",i)};r(n);window.addEventListener("message",i)})};var E=Object(o["b"])("Open third-party file picker window and handle callback",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.hidden,n=a.url,s=a.windowFeatures,o=a.processEvent;var l=Object(h["a"])({getState:t,label:_});var v=t();var b=Object(c["b"])(v);var E=f({},g,{},s,{parentTeamId:b,allowNavigation:true,disposition:"desktop-window"});Object(m["isSSB"])()&&(p["a"].canOpenURLInWindow(v,n)||l.error(_,"Trying to open remote file picker URL in SSB but URL is not whitelisted: "+n));var C=Object(i["uniqueId"])(y);var S=n+(n.includes("?")?"&":"?")+"source_id="+C;var w;var j=function e(){return w.cancel()};var I;var T;try{if(Object(m["isSSB"])()&&!Object(d["isContextIsolationEnabled"])()){I=r?Object(u["d"])(S,{disposition:"desktop-window",show:false,skipTaskbar:true,frame:false,opacity:0,transparent:true,focusable:false,parentTeamId:b}):Object(u["d"])(S,E);I.addListener("close",j)}else if(r){T=document.createElement("iframe");T.setAttribute("data-qa","picker-frame");T.src=S;T.style.cssText="display:none";document.body.appendChild(T);I=T.contentWindow}else{I=Object(u["d"])(S,E);I&&!Object(d["isContextIsolationEnabled"])()&&I.addEventListener("beforeunload",j)}if(!I)return Promise.reject(new Error("Unable to open window"))}catch(e){return Promise.reject(e)}w=k(o||O(I,C));w.finally(function(){T?T.remove():I&&I.close()}).catch(i["noop"]);return w});E.meta={name:"openRemoteFilePicker",key:"actionsCloudFilePickersOpenRemoteFilePickerOpenRemoteFilePicker",description:"Open third-party file picker window and handle callback"};E.propTypes=b;t["a"]=E},function(e,t,a){"use strict";a.d(t,"b",function(){return C});var r=a(88);var n=a.n(r);var i=a(18);var s=a(0);var o=a(1429);var l=a(317);var c=a(21);var u=a(33);var d=a(32);var p=a(27);var m=a(335);var h=a(35);var v=a(16);var f=a(6);var b=a(14);var g=a(532);var _=a(4036);var y=new f["b"]("files");var O={channelId:s["default"].string.isRequired,threadTs:s["default"].string,metadata:s["default"].shape({fileUploadAction:s["default"].oneOfType([s["default"].number,s["default"].string]),fileUploadSrc:s["default"].oneOfType([s["default"].number,s["default"].string])}),reason:s["default"].string};var k="A0BDLPR2L";var E="A6NL8MJ6Q";var C=function e(t){var a=Object(u["d"])(t);return Object(p["getTeamUrl"])(a,"apps/"+(d["isDev"]?k:E))};var S=Object(i["b"])("Open a window to pick a GDrive file",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelId,i=a.threadTs,s=a.metadata,u=a.reason;var d=t();var p=Object(c["b"])(d);var f=location.origin+"/files/import/gdrive?team="+p;return fetch(f,{cache:"no-store",mode:"same-origin",credentials:"same-origin"}).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.status;if(403===t)throw new Error(g["a"].AUTH_REQUIRED)}).then(function(){return e(Object(_["a"])({url:f,windowFeatures:{height:675}}))}).then(function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=a.chosen_files;var c=Date.now();return Promise.map(o,function(a){return e(Object(l["o"])({channels:r,threadTs:i,link:a.url,reason:u||"open-gdrive-file-picker"})).then(function(){var e;var r=Object(h["a"])({getState:t});r.track(b["EventId"].FILE_COMPLETE_UPLOAD_SUCCESS,(e={},n()(e,b["CoreKeys"].type,b["FileUploadType"].EXTERNAL),n()(e,b["CoreKeys"].duration,Date.now()-c),n()(e,b["CoreKeys"].has_upload_message,false),n()(e,b["CoreKeys"].file_count,1),n()(e,b["CoreKeys"].retry_count,0),n()(e,b["CoreKeys"].upload_size,a.sizeBytes?a.sizeBytes:0),n()(e,b["CoreKeys"].retry_reason,""),n()(e,b["CoreKeys"].did_disconnect_during_upload,false),n()(e,b["CoreKeys"].file_upload_action,s&&s.fileUploadAction),n()(e,b["CoreKeys"].file_upload_src,s&&s.fileUploadSrc),e))})})}).catch(function(a){var n=function t(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=a.text,s=a.ephemeralType;return e(Object(m["addOrFlashEphemeralBotMsg"])({ephemeralType:s||m["EphemeralTypes"].gdriveShareFileError,message:{channel:r,thread_ts:i,slackbot_feels:"sad_surprise",text:n||y.t("Hmm, something went wrong. Try again?",{fallbackHash:"83743049d08a764e93ca79d5621ee1e19f02bc75",fallbackHashNs:"app_management_modal"})}}))};var s=a&&(a.data&&a.data.error||a.message);if(s===g["a"].FILENAME_TOO_LONG)return n({text:y.t("Sorry! The name of that file is too long for us to handle. Please try importing a file with a shorter filename.")});var l=[g["a"].FILE_TYPE_HAS_NO_HANDLER,g["a"].UNIDENTIFIED_EXTERNAL_URL];if(l.includes(s)&&a.args&&a.args.link)return e(Object(o["a"])({channel:r,thread_ts:i,text:a.args.link,unfurl_links:false,unfurl_media:false})).then(function(){return n({ephemeralType:m["EphemeralTypes"].fileTypeHasNoHandler,text:y.t("We don\u2019t currently support importing that type of Google Drive file, but we included the link so that others can access it.")})}).catch(n);if(s===g["a"].AUTH_REQUIRED)return n({text:y.t("Looks like you\u2019re trying to add a Google Drive file \u2014 first you\u2019ll need to connect <{url}|Google Drive to Slack>.\n\n Once your account is connected, you\u2019ll be able to easily share files, see file previews, and even find your files later as you search in Slack. <{url}|Learn more about using Google Drive in Slack>.",{url:C(t())})});Object(v["a"])({getState:t}).error(g["b"],a);return n()})});S.meta={name:"openGdriveFilePicker",key:"actionsCloudFilePickersOpenGdriveFilePickerOpenGdriveFilePicker",description:"Open a window to pick a GDrive file"};S.propTypes=O;t["a"]=S},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.r(t);var r=a(1460);var n=a(52);Object(n["a"])("interop.addAppToChannel",function(e){return TS.redux.dispatch(Object(r["a"])(e))})},function(e,t,a){"use strict";a.r(t);var r=a(364);var n=a(52);Object(n["a"])("interop.addEphemeralFeedback",function(e){return TS.redux.dispatch(Object(r["b"])(e))})},function(e,t,a){"use strict";a.r(t);var r=a(52);var n=a(2752);Object(r["a"])("interop.allUnreads",{getMessageForLocale:n["a"]})},function(e,t,a){"use strict";a.r(t);var r=a(865);var n=a(52);Object(n["a"])("interop.api_unauthed",{callSlackApiUnauthed:r["a"]})},function(e,t,a){"use strict";a.r(t);var r=a(52);var n=a(1402);Object(r["a"])("interop.appActions",{selectGlobalActions:function e(){return Object(n["b"])(TS.redux.getState())},selectGlobalActionsCache:function e(){return Object(n["c"])(TS.redux.getState())}})},function(e,t,a){"use strict";a.r(t);var r=a(52);var n=a(226);var i=a(2662);var s=a(1039);var o=a(1403);Object(r["a"])("interop.apps",{getAppById:function e(t){return Object(n["getAppById"])(TS.redux.getState(),t)},ingestApps:function e(t){return TS.redux.dispatch(Object(n["bulkAddApps"])(t))},clearApps:function e(){return TS.redux.dispatch(Object(n["clearApps"])())},isGlobalActionsEnabled:function e(){return Object(n["isGlobalActionsEnabled"])(TS.redux.getState())},promiseToGetLegacyAppProfileByServiceId:function e(t){return TS.redux.dispatch(Object(s["promiseToGetLegacyAppProfileByServiceId"])({serviceId:t}))},loadAppActions:function e(){return TS.redux.dispatch(Object(i["a"])())},runAppAction:function e(t){return TS.redux.dispatch(Object(o["c"])(t))}})},function(e,t,a){"use strict";a.r(t);var r=a(52);var n=a(367);Object(r["a"])("interop.automount.mountAllWithStore",n["b"])},function(e,t,a){"use strict";a.r(t);var r=a(88);var n=a.n(r);var i=a(517);var s=a(52);var o=a(262);function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),true).forEach(function(t){n()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}Object(s["a"])("interop.bots",c({},i,{getBotState:function e(){return Object(o["getBotState"])(TS.redux.getState())},getBotById:function e(t){return Object(o["getBotById"])(TS.redux.getState(),t)},getBotNameById:function e(t){return Object(o["getBotNameById"])(TS.redux.getState(),t)},getBotInfoByMsg:function e(t){return Object(o["getBotInfoByMsg"])(TS.redux.getState(),t)},isBotExternal:function e(t){return Object(o["isBotExternal"])(TS.redux.getState(),t)},ensureBotsArePresent:function e(t){return Object(o["ensureBotsArePresent"])(TS.redux.getState(),TS.redux.dispatch,t)}}))},function(e,t,a){"use strict";a.r(t);var r=a(52);var n=a(460);var i=a(790);Object(r["a"])("interop.calls",{startOrJoinCall:n["e"],handleCallInvite:i["d"],handleCallInviteResponse:i["f"],handleCallInviteCancel:i["e"]})},function(e,t,a){"use strict";a.r(t);var r=a(239);var n=a(121);var i=a(20);var s=a(242);var o=a(604);var l=a(21);var c=a(2663);var u=a(1276);var d=a(118);var p=a(9);var m=a(52);var h=a(847);var v=a(184);function f(e,t){var a=TS.redux.getState();var r=Object(i["e"])(a,e,t);return TS.redux.channels.interop.maybeWrapEntity(r)}function b(e,t){if(!e)return null;var a=f(e,t);if(a&&a.is_channel)return a;return null}function g(e,t){if(!e)return null;var a=f(e,t);if(a&&a.is_group&&!a.is_mpim)return a;return null}function _(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return null;var a=TS.redux.channels.getEntityById(e,t);if(a&&a.is_group&&a.is_mpim)return a;return null}function y(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return null;var a=TS.redux.channels.getEntityById(e,t);if(Object(p["isIm"])(a))return a;return null}function O(){return TS.redux.dispatch(Object(n["getGeneralChannel"])())}function k(e,t){return TS.redux.dispatch(Object(s["a"])({channel:e,isBulkUpsert:t}))}function E(e){return TS.redux.dispatch(Object(d["f"])(e))}function C(e){return TS.redux.dispatch(Object(d["i"])(e))}function S(e){return TS.redux.dispatch(Object(d["h"])(e))}function w(e){return TS.redux.dispatch(Object(d["g"])(e))}function j(e){var t=TS.redux.getState();return Object(i["w"])(t,e)}function I(e,t){return TS.redux.dispatch(Object(d["H"])({channelId:e,topic:t}))}function T(e){var t=TS.redux.getState();var a=Object(l["b"])(t);Object(o["c"])(a,e)}function A(e){var t=TS.redux.getState();var a=Object(l["b"])(t);return Object(o["b"])(a,e)}function N(){return v["b"].pauseRefetch()}function P(e,t){return TS.redux.dispatch(Object(c["a"])({channel:e,user:t}))}function M(){return TS.redux.dispatch(n["markMostRecentMsgRead"].apply(void 0,arguments))}function D(){return TS.redux.dispatch(n["setChannelTopic"].apply(void 0,arguments))}function x(e){return Object(i["r"])(TS.redux.getState(),e)}function R(){return Object(i["s"])(TS.redux.getState())}function F(){return Object(i["b"])(TS.redux.getState())}function L(){return TS.redux.dispatch(n["addChannel"].apply(void 0,arguments))}function U(){return TS.redux.dispatch(n["setChannelPurpose"].apply(void 0,arguments))}function B(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return i["q"].apply(void 0,[TS.redux.getState()].concat(t))}function q(){return TS.redux.dispatch(r["d"].apply(void 0,arguments))}function G(){return TS.redux.dispatch(n["bulkAddChannels"].apply(void 0,arguments))}function H(){return TS.redux.dispatch(n["updateOneKeyForChannel"].apply(void 0,arguments))}function W(){return Object(i["u"])(TS.redux.getState())}function V(){return TS.redux.dispatch(Object(n["clearAllShowInListEvenThoughUnreadsFlags"])())}function K(){return TS.redux.dispatch(n["bulkUpdateChannels"].apply(void 0,arguments))}function z(){return Object(i["p"])(TS.redux.getState())}function Q(){return Object(i["n"])(TS.redux.getState())}function Y(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return i["f"].apply(void 0,[TS.redux.getState()].concat(t))}function J(){return TS.redux.dispatch(n["leaveChannel"].apply(void 0,arguments))}function X(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return i["m"].apply(void 0,[TS.redux.getState()].concat(t))}Object(m["a"])("interop.channels",{disconnectChannel:d["e"],getPublicChannelById:b,getEntityById:f,getGeneralChannel:O,getGroupById:g,getImById:y,getMpimById:_,getNeedsCreatedMessageState:function e(t){return Object(u["getNeedsCreatedMessageState"])(TS.redux.getState(),t)},isImWithDeletedMember:function e(t){return Object(p["isImWithDeletedMember"])(TS.redux.getState(),t)},openConversationBetweenMembers:Object(m["b"])(d["w"]),submitChannelPurpose:d["G"],submitChannelTopic:I,createChannel:n["createChannel"],declineSharedChannelInvite:function e(){return TS.redux.dispatch(d["d"].apply(void 0,arguments))},submitLeave:d["O"],isMemberOfChannel:p["isMemberOfChannel"],joinConversationApi:n["joinConversationApi"],startImByMemberId:n["startImByMemberId"],closeChannelApi:n["closeChannelApi"],updateOrgAccessForChannelApi:n["updateOrgAccessForChannelApi"],updateOrgAccessForChannel:n["updateOrgAccessForChannel"],upsertChannel:k,getChannelPinnedItemByMessage:p["getChannelPinnedItemByMessage"],channelTopicExceedsLimit:p["channelTopicExceedsLimit"],getChannelTopicError:p["getChannelTopicError"],getChannelPurposeError:p["getChannelPurposeError"],updateChannelLastTrigger:h["updateChannelLastTrigger"],getPendingAndConnectedTeamIds:p["getPendingAndConnectedTeamIds"],getInternalTeamIds:p["getInternalTeamIds"],fetchAndUpsertChannelsById:E,fetchAndUpsertChannelsWithQuery:C,fetchAndUpsertChannelsFromAPI:w,fetchAndUpsertChannelsFromFlannel:S,hasChannelWithId:j,markObjectsAsFresh:T,pauseRefetch:N,isObjectFresh:A,shouldStopChannelMentions:function e(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return p["shouldStopChannelMentions"].apply(void 0,[TS.redux.getState()].concat(a))},setConversationOpen:P,getUnarchivedPublicAndPrivateChannelsUserIsIn:function e(){return Object(i["v"])(TS.redux.getState())},markMostRecentMsgRead:M,setChannelTopic:D,getPublicChannels:x,getPublicChannelsUserIsIn:R,getAllChannels:F,addChannel:L,getChannelById:function e(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return i["e"].apply(void 0,[TS.redux.getState()].concat(a))},setChannelPurpose:U,getPrivateChannels:B,removeChannels:q,bulkAddChannels:G,updateOneKeyForChannel:H,getUnarchivedPublicAndPrivateChannels:W,clearAllShowInListEvenThoughUnreadsFlags:V,bulkUpdateChannels:K,getMpims:z,getIms:Q,getChannelByName:Y,leaveChannel:J,getImIdByMemberId:X})},function(e,t,a){"use strict";a.r(t);var r=a(52);var n=a(556);var i=a(150);function s(){return Object(i["d"])(TS.redux.getState())}function o(){return Object(i["b"])(TS.redux.getState())}Object(r["a"])("interop.connectivity",{isOnline:s,getMaximumSocketWait:o,waitForNetworkConnection:n["e"],setClientOnline:function e(){return TS.redux.dispatch(n["a"].apply(void 0,arguments))}})},function(e,t,a){"use strict";a.r(t);var r=a(52);var n=a(91);Object(r["a"])("interop.console",n)},function(e,t,a){"use strict";a.r(t);var r=a(88);var n=a.n(r);var i=a(52);var s=a(22);function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),true).forEach(function(t){n()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}Object(i["a"])("interop.constants",l({},s))},function(e,t,a){"use strict";a.r(t);var r=a(52);var n=a(238);Object(r["a"])("interop.emoji",{isValidEmojiText:function e(t){return Object(n["isValidEmojiText"])(TS.redux.getState(),{teamId:TS.model.team.id,text:t})},isEmojiNameSkinToneModifiable:function e(t){return Object(n["isEmojiNameSkinToneModifiable"])(TS.redux.getState(),{teamId:TS.model.team.id,text:t})},getCanonicalEmojiName:function e(t){return Object(n["getCanonicalEmojiName"])(TS.redux.getState(),{teamId:TS.model.team.id,text:t})},getEmojiUrl:function e(t){var a=t.text,r=t.emojiSize,i=t.emojiMode;return Object(n["getEmojiUrl"])(TS.redux.getState(),{teamId:TS.model.team.id,text:a,emojiMode:i,emojiSize:r})},getEmojiFrecencyIdFromName:n["getEmojiFrecencyIdFromName"],test:n["test"]})},function(e,t,a){"use strict";a.r(t);var r=a(52);var n=a(99);Object(r["a"])("interop.emojiComponent",{EmojiSizes:n["a"],mapStateToProps:function e(t){return Object(n["c"])(TS.redux.getState(),t)}})},,,function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(85);var s=a.n(i);var o=a(12);var l=a(26);var c=a(52);Object(c["a"])("interop.enterpriseAnalyticsAppsTab",{render:function e(t,a){if(!t)throw new Error("enterpriseAnalyticsAppsTab render must be called with a teamId parameter");var r=Object(l["f"])(t);s.a.render(n.a.createElement(o["Provider"],{store:r},n.a.createElement("div",null,"APPS!")),a)},stop:function e(t){s.a.unmountComponentAtNode(t)}})},function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(85);var s=a.n(i);var o=a(12);var l=a(26);var c=a(52);var u=a(444);var d=a(2071);Object(c["a"])("interop.sessionResetModal",{render:function e(t,a,r){if(!t)throw new Error("sessionResetModal render must be called with a teamId parameter");var i=Object(l["f"])(t);s.a.render(n.a.createElement(o["Provider"],{store:i},n.a.createElement(u["a"],null,n.a.createElement(d["a"],r))),a)},stop:function e(t){s.a.unmountComponentAtNode(t)}})},function(e,t,a){"use strict";a.r(t);var r=a(1485);var n=a(52);Object(n["a"])("interop.Eventlog",{createInstanceForTeam:r["a"],getInstanceForTeam:r["b"]})},function(e,t,a){"use strict";a.r(t);var r=a(1170);var n=a(52);Object(n["a"])("interop.experiments_unauthed",{fetchInviteAssignments:r["a"],fetchLeadAssignments:r["b"],fetchVisitorAssignments:r["d"],fetchUserAssignments:r["c"],getGroup:r["e"]})},function(e,t,a){"use strict";a.r(t);var r=a(80);var n=a(52);Object(n["a"])("interop.experiments",{getGroupForUser:function e(t){return Object(r["getGroupForUser"])(TS.redux.getState(),t)},getAllAssignmentsForDebugging:function e(){return Object(r["getAllAssignmentsForDebugging"])(TS.redux.getState())}})},function(e,t,a){"use strict";a.r(t);var r=a(11);var n=a(249);var i=a(1334);var s=a(52);var o=a(513);Object(s["a"])("interop.Flannel",{query:function e(t,a){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return TS.redux.dispatch(Object(n["g"])({method:t,args:a,attemptNumber:r}))},call:function e(t,a,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return TS.redux.dispatch(Object(i["a"])({method:t,args:a,reason:r,EXPEDITED:n}))},fetchRawMembersWithQuery:function e(t,a){return TS.redux.dispatch(Object(o["f"])({query:t,limit:a}))},fetchRawChannelsWithQuery:function e(t,a){return TS.redux.dispatch(Object(o["d"])({query:t,limit:a}))},fetchRawMembersByIds:function e(t){return TS.redux.dispatch(Object(o["e"])({ids:t}))},fetchRawChannelsByIds:function e(t){return TS.redux.dispatch(Object(o["c"])({ids:t}))},getSocketStartArgs:function e(){return Object(n["f"])(TS.redux.getState())},useSocket:function e(){return Object(r["shouldUseSocket"])(TS.redux.getState())},getFlannelConnectionUrl:n["e"],METHODS:n["c"],COMMANDS:n["a"],MAX_RETRY_COUNT:n["b"]})},function(e,t,a){"use strict";a.r(t);var r=a(1036);var n=a(52);Object(n["a"])("interop.FuzzyMatcher",r["b"])},function(e,t,a){"use strict";a.r(t);var r=a(52);var n=a(1617);var i=a(921);Object(r["a"])("interop.history",{triggerNavigateBack:n["a"],triggerNavigateForward:n["b"],isHistoryNavigationEnabled:i["a"]})},function(e,t,a){"use strict";a.r(t);var r=a(1829);var n=a(52);Object(n["a"])("interop.beaconApiCall",r["a"])},function(e,t,a){"use strict";a.r(t);var r=a(1064);var n=a(52);Object(n["a"])("interop.BandwidthChecker",r["a"])},function(e,t,a){"use strict";a.r(t);var r=a(52);var n=a(68);Object(r["a"])("interop.debug",n)},function(e,t,a){"use strict";a.r(t);var r=a(52);var n=a(2061);Object(r["a"])("interop.registerGlobalErrorHandler",function(){return Object(n["a"])()})},function(e,t,a){"use strict";a.r(t);var r=a(52);var n=a(105);Object(r["a"])("interop.rtm",{debugGetHandlers:n["b"],debugGetPendingMessages:function e(){return Object(n["c"])(TS.boot_data.team_id)}})},function(e,t,a){"use strict";a.r(t);var r=a(360);var n=a(2695);var i=a(52);function s(e){if(!r[e])throw new Error("There is no Socket Manager action called '"+e+"'");return function(){var t=r[e].apply(r,arguments);return TS.redux.dispatch(t)}}Object(i["a"])("interop.SocketManager",{clearFastReconnectUrl:s("clearFastReconnectUrl"),debugGetInstance:s("debugGetInstance"),debugGetState:s("debugGetState"),debugResetRateLimit:s("debugResetRateLimit"),debugSetFastReconnectsEnabled:s("debugSetFastReconnectsEnabled"),debugSetSocketConnectFlakiness:s("debugSetSocketConnectFlakiness"),debugSetSocketSendFlakiness:s("debugSetSocketSendFlakiness"),debugTriggerError:s("debugTriggerError"),disconnect:s("disconnect"),finalizeProvisionalConnection:s("finalizeProvisionalConnection"),reconnectImmediately:s("reconnectImmediately"),send:s("send"),sleep:s("sleep"),start:s("start"),wake:s("wake"),maybeTickleMS:function e(){return TS.redux.dispatch(Object(n["a"])({reason:"legacy"}))}})},function(e,t,a){"use strict";a.r(t);var r=a(889);var n=a(52);Object(n["a"])("interop.setTeamIdForToken",r["c"])},function(e,t,a){"use strict";a.r(t);var r=a(52);var n=a(919);Object(r["a"])("interop.uploadQueue",{getInstance:function e(){return Object(n["a"])(TS.boot_data.team_id)}})},function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(12);var s=a(156);var o=a(26);var l=a(2);var c=a.n(l);var u=a(163);var d=a(61);var p=a(16);var m=a(35);var h=a(90);var v=a(373);var f=a(1038);var b=a(1989);var g=a(182);var _=a(0);var y=a(18);var O=a(20);var k=a(9);var E=Object(y["b"])("Save the scrollmark if the current user is viewing a public channel that they are a member of",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelId,n=a.scrollmark;var i=t();var s=Object(O["e"])(i,r);if(Object(k["isPublicChannel"])(s)&&!Object(k["isMemberOfChannel"])(s))return;e(Object(g["d"])({channelId:r,scrollmark:n}))});E.meta={name:"maybeSaveScrollmark",key:"messagePaneStoreThunksMaybeSaveScrollmark",description:"Save the scrollmark if the current user is viewing a public channel that they are a member of"};E.propTypes={channelId:_["default"].string,scrollmark:_["default"].object};var C=a(221);var S=a(484);var w=a(148);var j=a(80);var I=a(121);var T=a(73);var A=a(370);var N=a(758);var P=a(11);var M=a(847);var D=a(87);var x=a(448);var R=a(1324);var F=a(1879);var L=a(394);var U=a(150);var B=a(485);var q=a(283);var G=a(359);var H=a(300);var W=a(41);var V=a(384);var K=a(34);var z=function e(t){var a=t.featureReactjiAwarenessV2,r=t.inProductCoachmark,n=t.channel;if(!Object(K["a"])())return false;if(!a)return false;if(!r||"reactji_awareness_coachmark"!==r.name)return false;if(!n||!Object(k["isPublicChannel"])(n)&&!Object(k["isPrivateChannel"])(n))return false;return true};var Q=a(107);var Y=a(63);var J=a(165);var X=a(21);var Z=a(302);var $=a(751);var ee=function e(t,a){return Object(k["isImWithApp"])(t,a)};var te=ee;var ae=a(906);var re=a(1240);var ne=a(88);var ie=a.n(ne);var se=a(110);var oe=a.n(se);var le=a(135);var ce=a.n(le);var ue=a(169);var de=a.n(ue);var pe=a(138);var me=a.n(pe);var he=a(147);var ve=a.n(he);var fe=a(185);var be=a.n(fe);var ge=a(13);var _e=a.n(ge);var ye=a(75);var Oe=a.n(ye);var ke=a(102);var Ee=a(1207);var Ce=a(846);var Se=a(1360);var we=a(14);var je=a(22);var Ie=a(202);var Te=a(235);var Ae=a(1631);var Ne=a(196);var Pe=a.n(Ne);var Me=a(245);var De=a.n(Me);var xe=a(286);var Re=a(2807);var Fe=a(122);var Le=a(38);var Ue=a(547);var Be=a(195);var qe=a(519);var Ge=a(886);var He=a(1416);var We=a(1834);var Ve=a(1999);var Ke=a(33);var ze=a(27);var Qe=a(859);var Ye={channelId:null,channelType:null,hasLimitedHistory:false,isSlackbotIm:false,newxpOnboardingStep:null,hasTeamMessageLimit:false,isMsgLimitBannerUpgrd1131BugTreatment:false,clientTheme:"light",inCreatorOnboarding:false};var Je=function(e){be()(t,e);function t(){oe()(this,t);return de()(this,me()(t).apply(this,arguments))}ce()(t,[{key:"render",value:function e(){var t=this.props,a=t.channelId,r=t.channelType,i=t.hasLimitedHistory,s=t.isSlackbotIm,o=t.newxpOnboardingStep,l=t.hasTeamMessageLimit,c=t.isMsgLimitBannerUpgrd1131BugTreatment,u=t.logger;if(s){if(o&&o!==nr.COMPLETE)return n.a.createElement(sr,{step:o,clientTheme:this.props.clientTheme});return n.a.createElement(er,null)}if(c){if(i&&l)return n.a.createElement(Pa,{channelId:a,clientTheme:this.props.clientTheme})}else if(i){l||u.error("Foreword Component: Rendering `LimitedHistoryForeword` component when channel history is limited but team message limit is not.",{subtype:"MESSAGE_PANE_FOREWORD"});return n.a.createElement(Pa,{channelId:a,clientTheme:this.props.clientTheme})}if("im"===r)return n.a.createElement(Ea,{channelId:a});if("mpim"===r)return n.a.createElement(Ja,{channelId:a});if("channel"===r||"private"===r)return!this.props.inCreatorOnboarding&&n.a.createElement(ia,{channelId:a});Object(p["b"])().warn('Unknown foreword type "'+r+'"');return null}}]);return t}(r["PureComponent"]);Je.displayName="Foreword";Je.defaultProps=Ye;function Xe(e,t){var a=t.channelId;var r=Object(O["e"])(e,a);if(!r)return null;var n=Object(Ke["d"])(e);return{isSlackbotIm:Object(k["isSlackbot"])(r),newxpOnboardingStep:Object(v["l"])(e),hasTeamMessageLimit:Object(ze["getTeamMessageLimitTimestamp"])(n)>0,isMsgLimitBannerUpgrd1131BugTreatment:"treatment"===Object(j["getGroupForUser"])(e,"lc_msg_limit_banner_upgrd_1131_bug"),logger:Object(p["a"])({state:e}),inCreatorOnboarding:Object(Qe["e"])(e)}}var Ze=Object(i["connect"])(Xe)(Je);var $e=a(25);var et=a(6);var tt=a(189);var at=a(17);var rt=a(524);var nt=a(561);var it=a(166);var st=a(299);var ot=a(118);var lt=a(117);var ct=a(1679);var ut=a(851);var dt=a(1336);var pt=a(3744);var mt=new et["b"]("dialogs_purpose");var ht={currentRawPurpose:void 0,currentFormattedPurpose:void 0,featureM11nChannelDetails:false,submitChannelPurpose:l["noop"]};var vt=function(e){be()(t,e);function t(e){var a;oe()(this,t);a=de()(this,me()(t).call(this,e));a.onSubmit=a.onSubmit.bind(ve()(a));a.renderInput=a.renderInput.bind(ve()(a));a.input=n.a.createRef();return a}ce()(t,[{key:"onSubmit",value:function e(){var t;var a=(null===(t=this.input.current)||void 0===t?void 0:t.getWrappedInstance)?this.input.current.getWrappedInstance():this.input.current;var r=a&&a.value&&a.value();if(void 0===r||null===r){this.props.logger.error("Channel Description dialog submitted with undefined value");return}if(r===this.props.currentRawPurpose)return;this.props.submitChannelPurpose({channelId:this.props.channelId,purpose:r})}},{key:"renderInput",value:function e(t){var a=t.modules,r=t.isOpen;var i=this.props.currentFormattedPurpose;return n.a.createElement(ct["a"],{initialText:i,focusOnMount:true,minLines:3,modules:a,isAutocompleteOpen:r,maxLength:k["CHANNEL_PURPOSE_MAX_LENGTH"],ariaLabel:mt.t("Edit channel description"),ref:this.input,onEnter:function e(){return true}})}},{key:"render",value:function e(){if(!this.props.featureM11nChannelDetails)return null;return n.a.createElement(lt["a"],Pe()({className:"p-channel_purpose_dialog",title:mt.t("Edit channel description"),goButtonText:mt.t("Update description"),onGo:this.onSubmit,footerText:mt.t("Describe what this channel is for.")},this.props),n.a.createElement(ut["a"],{renderInput:this.renderInput,completeOnMembers:true,completeOnChannels:true,completeOnEmoji:true,shouldCompleteOnTab:false}))}}]);return t}(r["Component"]);vt.displayName="ChannelPurposeDialog";vt.defaultProps=ht;var ft=function e(t,a){var r=a.channelId;var n=Object(p["a"])({label:"CHANNEL-PURPOSE",state:t});var i=Object(O["e"])(t,r);var s=i&&i.purpose&&i.purpose.value;var o=s&&Object(dt["a"])(t,{text:s});return{channelId:i.id,currentRawPurpose:s,currentFormattedPurpose:o,featureM11nChannelDetails:Object(P["isFeatureEnabled"])(t,"feature_m11n_channel_details"),logger:n}};var bt=function e(t){return{submitChannelPurpose:function e(){return t(ot["G"].apply(void 0,arguments))}}};var gt=Object(i["connect"])(ft,bt)(vt);var _t=a(28);var yt=Object(_t["b"])("TS.ui.purpose_dialog.start",c.a.noop);var Ot=a(1333);var kt=a(1650);var Et=a(1826);var Ct=a(39);var St=a(23);var wt=a(152);var jt=new et["b"]("message_pane_foreword");var It={onClick:c.a.noop};var Tt=function(e){be()(t,e);function t(){oe()(this,t);return de()(this,me()(t).apply(this,arguments))}ce()(t,[{key:"render",value:function e(){var t=this.props.onClick;return n.a.createElement(wt["a"],{className:"p-message_pane__foreword__button",onClick:t},n.a.createElement(St["b"],{type:"bolt-add",size:"inherit"})," ",jt.t("Add an app"))}}]);return t}(r["PureComponent"]);Tt.displayName="AppButton";Tt.defaultProps=It;var At=Tt;var Nt=new et["b"]("message_pane_foreword");var Pt={onClick:c.a.noop};var Mt=function(e){be()(t,e);function t(){oe()(this,t);return de()(this,me()(t).apply(this,arguments))}ce()(t,[{key:"render",value:function e(){var t=this.props.onClick;var a=Nt.t("Add people",{fallbackHashNs:"channel_invite",fallbackHash:"b9c735ea3637189c3033255e1dd2387bf8c60ef0"});return n.a.createElement(wt["a"],{className:"p-message_pane__foreword__button",onClick:t},n.a.createElement(St["b"],{type:"add-user",size:"inherit"})," ",a)}}]);return t}(r["PureComponent"]);Mt.displayName="InviteButton";Mt.defaultProps=Pt;var Dt=Mt;var xt=new et["b"]("message_pane_foreword");var Rt={onClick:c.a.noop};var Ft=function(e){be()(t,e);function t(){oe()(this,t);return de()(this,me()(t).apply(this,arguments))}ce()(t,[{key:"render",value:function e(){var t=this.props.onClick;return n.a.createElement(wt["a"],{className:"p-message_pane__foreword__button",onClick:t},n.a.createElement(St["b"],{type:"pencil",size:"inherit"})," ",xt.t("Add description",{fallbackHash:"9173f05e2a5a24be9b2031bd1271014489984f1f"}))}}]);return t}(r["PureComponent"]);Ft.displayName="PurposeButton";Ft.defaultProps=Rt;var Lt=Ft;var Ut=new et["b"]("message_pane_foreword");var Bt={onClick:c.a.noop};var qt=function(e){be()(t,e);function t(){oe()(this,t);return de()(this,me()(t).apply(this,arguments))}ce()(t,[{key:"render",value:function e(){var t=this.props.onClick;var a=Ut.t("Share channel",{fallbackHashNs:"channel_share",fallbackHash:"3451c6bb79c5de52aebf4586dd3bad13e9950247"});return n.a.createElement(wt["a"],{className:"p-message_pane__foreword__button",onClick:t},n.a.createElement(St["b"],{type:"link",size:"inherit"})," ",a)}}]);return t}(r["PureComponent"]);qt.displayName="ShareButton";qt.defaultProps=Bt;var Gt=qt;var Ht={channelId:null,purpose:null,canAddAppsToChannel:false,canInviteToChannel:false,canSetPurpose:false,canShareChannel:false,startChannelInviteModal:l["noop"],openModal:l["noop"],openAppsBrowserModal:l["noop"],openChannelShareChannelModal:l["noop"]};var Wt=function(e){be()(t,e);function t(e){var a;oe()(this,t);a=de()(this,me()(t).call(this,e));a.onAppButtonClick=a.onAppButtonClick.bind(ve()(a));a.onInviteButtonClick=a.onInviteButtonClick.bind(ve()(a));a.onPurposeButtonClick=a.onPurposeButtonClick.bind(ve()(a));a.onShareButtonClick=a.onShareButtonClick.bind(ve()(a));return a}ce()(t,[{key:"onAppButtonClick",value:function e(){var t;var a=this.props,r=a.channelId,n=a.clogger;var i=we["EventId"].CHANNEL_FOREWORD;var s=(t={},ie()(t,we["UiContextKeys"].action,we["UiAction"].CLICK),ie()(t,we["UiContextKeys"].ui_element,we["UiElement"].BTN_ADD_APPS),t);n.track(i,{contexts:ie()({},we["ClientEventKeys"].ui_context,s)});this.props.openAppsBrowserModal({addAppsVariant:true,referringEventId:i,referringUiContext:s,channelId:r})}},{key:"onInviteButtonClick",value:function e(){var t=this.props,a=t.channelId,r=t.clogger;r.track(we["EventId"].CHANNEL_FOREWORD,{contexts:{ui_context:{action:"click",ui_properties:{element_type:"button",element_name:"channel_foreword_add"}}}});this.props.startChannelInviteModal({channelId:a})}},{key:"onPurposeButtonClick",value:function e(){var t=this.props.channelId;Object(K["a"])()?this.props.openModal({element:n.a.createElement(gt,{channelId:t})}):yt(t)}},{key:"onShareButtonClick",value:function e(){var t=this.props.channelId;this.props.openChannelShareChannelModal({channelId:t,entryPoint:"channel_foreword_share"})}},{key:"render",value:function e(){var t=this.props,a=t.purpose,r=t.canAddAppsToChannel,i=t.canInviteToChannel,s=t.canSetPurpose,o=t.canShareChannel;var l;!a&&s&&(l=n.a.createElement(Lt,{onClick:this.onPurposeButtonClick}));var c;r&&(c=n.a.createElement(At,{onClick:this.onAppButtonClick}));var u;i&&(u=n.a.createElement(Dt,{onClick:this.onInviteButtonClick}));var d;o&&(d=n.a.createElement(Gt,{onClick:this.onShareButtonClick}));return n.a.createElement("div",{className:"p-message_pane__foreword__buttons"},l,c,u,d)}}]);return t}(r["PureComponent"]);Wt.displayName="ChannelForewordButtons";Wt.defaultProps=Ht;function Vt(e,t){var a=t.channelId;var r=Object(O["e"])(e,a);if(!r)return{};var n=r.purpose?r.purpose.value:null;var i=Object(Y["A"])(e,a);var s=Object(Y["N"])(e,a);var o=Object(Y["w"])(e,a).ok;var l=Object(Y["U"])(e,a);return{purpose:n,clogger:Object(m["a"])({state:e}),canAddAppsToChannel:i,canInviteToChannel:s,canSetPurpose:o,canShareChannel:l}}var Kt=function e(t){return{startChannelInviteModal:function e(){return t(kt["b"].apply(void 0,arguments))},openAppsBrowserModal:function e(){return t(Ot["a"].apply(void 0,arguments))},openChannelShareChannelModal:function e(){return t(Et["a"].apply(void 0,arguments))},openModal:function e(){return t(Ct["openModal"].apply(void 0,arguments))}}};var zt=Object(i["connect"])(Vt,Kt)(Wt);var Qt=a(145);var Yt=new et["b"]("message_pane_foreword");var Jt={channelId:null,description:null,purpose:null,isUserRestricted:false,userCanSetPurposeForChannel:true,openModal:l["noop"]};var Xt=function(e){be()(t,e);function t(e){var a;oe()(this,t);a=de()(this,me()(t).call(this,e));a.onPurposeButtonClick=a.onPurposeButtonClick.bind(ve()(a));return a}ce()(t,[{key:"onPurposeButtonClick",value:function e(){var t=this.props.channelId;Object(K["a"])()?this.props.openModal({element:n.a.createElement(gt,{channelId:t})}):yt(t)}},{key:"maybeRenderPurpose",value:function e(){var t=this.props.purpose;if(!t)return null;return n.a.createElement("span",null," ",Yt.t("Description:")," ",n.a.createElement(Qt["a"],{text:t}))}},{key:"maybeRenderPurposeEditLink",value:function e(){var t=this.props,a=t.purpose,r=t.isUserRestricted,i=t.userCanSetPurposeForChannel;if(!a||r||!i)return null;return n.a.createElement("span",{className:"no_wrap"}," ","(",n.a.createElement(wt["a"],{onClick:this.onPurposeButtonClick},Yt.t("edit")),")")}},{key:"render",value:function e(){var t=this.props.description;return n.a.createElement("div",{className:"p-message_pane__foreword__description","data-qa":"im_foreword_description"},t,this.maybeRenderPurpose(),this.maybeRenderPurposeEditLink())}}]);return t}(r["PureComponent"]);Xt.displayName="ChannelForewordDescription";Xt.defaultProps=Jt;var Zt=function e(t,a){var r=Object(Y["w"])(t,a.channelId),n=r.ok;return{userCanSetPurposeForChannel:n}};var $t=function e(t){return{openModal:function e(){return t(Ct["openModal"].apply(void 0,arguments))}}};var ea=Object(i["connect"])(Zt,$t)(Xt);var ta=new et["b"]("message_pane_foreword");var aa={channelId:null,purpose:null,creatorIsYou:false,createdById:null,dateCreated:null,isPrivate:false,isUserRestricted:false};var ra=function(e){be()(t,e);function t(){oe()(this,t);return de()(this,me()(t).apply(this,arguments))}ce()(t,[{key:"renderDescription",value:function e(){var t=this.props,a=t.channelId,r=t.createdById,i=t.creatorIsYou,s=t.dateCreated,o=t.isPrivate,l=t.purpose,c=t.isUserRestricted,u=t.featureLongerChannelNames;var d;if(s){d=Object(tt["j"])(s);d=Object(tt["e"])(s)||Object(tt["f"])(s)?d.toLowerCase():ta.t("on {date}",{date:d})}else d=ta.rt("on {date}",{date:n.a.createElement(rt["a"],{type:"unknown"})});var p={inherit:true,align:"baseline"};var m=u?n.a.createElement("strong",null,n.a.createElement(st["a"],{channelId:a,boldIcon:true})):n.a.createElement(it["a"],{channelId:a,inline:true,iconProps:p,className:"bold"});var h;if(i)h=o?ta.rt("You created this private channel {date}. This is the very beginning of the {name} channel.",{date:d,name:m}):ta.rt("You created this channel {date}. This is the very beginning of the {name} channel.",{date:d,name:m});else{var v=r?n.a.createElement(nt["a"],{id:r,showTooltip:true}):n.a.createElement(rt["a"],{type:"unknown"});h=o?ta.rt("{creator} created this private channel {date}. This is the very beginning of the {name} channel.",{creator:v,date:d,name:m}):ta.rt("{creator} created this channel {date}. This is the very beginning of the {name} channel.",{creator:v,date:d,name:m})}return n.a.createElement(ea,{channelId:a,description:h,purpose:l,isUserRestricted:c})}},{key:"renderTitle",value:function e(){var t=this.props,a=t.channelId,r=t.featureLongerChannelNames;var i=_e()("p-message_pane__foreword__title",{"p-message_pane__foreword__title--truncate":!r});var s={inherit:true,align:"baseline"};return n.a.createElement("h1",{className:i},r?n.a.createElement(st["a"],{channelId:a}):n.a.createElement(it["a"],{channelId:a,inline:true,iconProps:s}))}},{key:"render",value:function e(){var t=this.props,a=t.channelId,r=t.isPrivate;var i=_e()("p-message_pane__foreword",{"p-message_pane__foreword--private":r});return n.a.createElement("div",{className:i},this.renderTitle(),this.renderDescription(),n.a.createElement(zt,{channelId:a}))}}]);return t}(r["PureComponent"]);ra.displayName="ChannelForeword";ra.defaultProps=aa;function na(e,t){var a=t.channelId;var r=Object(O["e"])(e,a);if(!r)return{};var n=Object($e["b"])(e);var i=r.purpose?r.purpose.value:null;var s=Object(k["isPrivateChannel"])(r);return{purpose:i,creatorIsYou:n&&n.id===r.creator,createdById:r.creator,dateCreated:r.created,isPrivate:s,isUserRestricted:Object(at["isRestricted"])(n),featureLongerChannelNames:Object(P["isFeatureEnabled"])(e,"feature_longer_channel_names")}}var ia=Object(i["connect"])(na)(ra);var sa=a(104);var oa=a(1481);var la=a(1135);var ca=a(24);var ua=a(43);var da=new et["b"]("message_pane_foreword");var pa={botName:null,botId:null,openAboutAppWithMemberId:void 0};var ma=function(e){be()(t,e);function t(e){var a;oe()(this,t);a=de()(this,me()(t).call(this,e));a.onClick=a.onClick.bind(ve()(a));return a}ce()(t,[{key:"onClick",value:function e(){var t=this.props.botId;this.props.openAboutAppWithMemberId({memberId:t});var a=this.props.clogger;a.track("APP_SPACE_ABOUT_CLICKED",{about_clicked_from_bot_dm:true})}},{key:"render",value:function e(){var t=this.props.botName;return n.a.createElement(wt["a"],{className:"p-message_pane__foreword__button",onClick:this.onClick},n.a.createElement(St["b"],{type:"lightbulb-o",size:"inherit"})," ",da.t("How does {name} work?",{name:Object(et["q"])(t)}))}}]);return t}(r["PureComponent"]);ma.displayName="AppHelpButton";ma.defaultProps=pa;function ha(e,t){var a=t.botId;var r=Object($e["e"])(e,a);var n=Object(m["a"])({state:e});if(!r)return{clogger:n};var i=Object(at["getMemberMentionName"])(r);return{botName:i,clogger:n}}var va=function e(t){return{openAboutAppWithMemberId:function e(){return t(oa["c"].apply(void 0,arguments))}}};var fa=Object(i["connect"])(ha,va)(ma);var ba=new et["b"]("message_pane_foreword");var ga={memberId:null,prefWhoCanSeeThis:false,openAboutAppWithMemberId:l["noop"]};var _a=function(e){be()(t,e);function t(e){var a;oe()(this,t);a=de()(this,me()(t).call(this,e));a.onMemberClick=a.onMemberClick.bind(ve()(a));return a}ce()(t,[{key:"onMemberClick",value:function e(t){t.preventDefault();var a=this.props.memberId;this.canAppSpaceBeUsed()?this.props.openAboutAppWithMemberId({memberId:a}):this.props.showMemberProfile({memberId:a})}},{key:"canAppSpaceBeUsed",value:function e(){var t=this.props.type;return"bot"===t}},{key:"renderAvatar",value:function e(){var t=this.props.memberId;return n.a.createElement("div",{className:"p-message_pane__foreword__avatars"},n.a.createElement(ca["c"],{onClick:this.onMemberClick},n.a.createElement(la["a"],{id:t,size:"large",showPresence:true,showStatus:true,showAvatar:true})))}},{key:"renderButtons",value:function e(){var t=this.props.memberId;if(this.canAppSpaceBeUsed())return n.a.createElement("div",{className:"p-message_pane__foreword__buttons"},n.a.createElement(fa,{botId:t}));return null}},{key:"renderDescription",value:function e(){var t=this.props,a=t.memberId,r=t.type;if("self"===r)return n.a.createElement("div",{className:"p-message_pane__foreword__description","data-qa":"im_foreword_description"},ba.rt("<b>This is your space.</b> Draft messages, list your to-dos, or keep links and files handy. You can also talk to yourself here, but please bear in mind you\u2019ll have to supply both sides of the conversation."));var i=ba.rt("This is the very beginning of your direct message history with {name}",{name:n.a.createElement(nt["a"],{id:a,showTooltip:true})});this.props.prefWhoCanSeeThis&&(i=ba.rt("This is the very beginning of your direct message history with {name}. Only the two of you are in this conversation, and no one else can join it. <a>Learn more</a>",{name:n.a.createElement(nt["a"],{id:a,showTooltip:true})},function(e){var t=e.text,a=e.key;return n.a.createElement(ua["a"],{key:a,href:"https://get.slack.help/hc/articles/360002063088",rel:"noopener noreferrer"},t)}));return n.a.createElement("div",{className:"p-message_pane__foreword__description","data-qa":"im_foreword_description"},i)}},{key:"render",value:function e(){return n.a.createElement("div",{className:"p-message_pane__foreword"},this.renderAvatar(),this.renderDescription(),this.renderButtons())}}]);return t}(r["PureComponent"]);_a.displayName="BaseImForeword";_a.defaultProps=ga;function ya(e,t){var a=t.channelId;var r=Object(O["e"])(e,a);if(!r)return{};var n=Object(k["getMemberIdFromIm"])(r);var i=Object($e["e"])(e,n);var s=Object(P["getCurrentUserId"])(e);var o;o=n===s?"self":Object(at["isAppOrBot"])(i)?"bot":"member";return{memberId:n,type:o,prefWhoCanSeeThis:Object(Le["k"])(e,"whocanseethis_dm_mpdm_badge")}}var Oa=function e(t){return{openAboutAppWithMemberId:function e(){return t(oa["c"].apply(void 0,arguments))},showMemberProfile:function e(){return t(sa["k"].apply(void 0,arguments))}}};var ka=Object(i["connect"])(ya,Oa)(_a);ka.propTypes={channelId:_["default"].string};ka.defaultProps={channelId:null};var Ea=ka;var Ca=a(99);var Sa=a(86);var wa=a(252);var ja=a(295);var Ia=new et["b"]("message_pane_foreword");var Ta={channelName:"",workspaceName:"",teamMessageLimitInSeconds:0,clientTheme:"light"};var Aa=function(e){be()(t,e);function t(e){var a;oe()(this,t);a=de()(this,me()(t).call(this,e));a.onClickLearnMore=a.onClickLearnMore.bind(ve()(a));return a}ce()(t,[{key:"componentDidMount",value:function e(){var t=this.props.clogger;t.track("GROWTH_PRICING",{contexts:{ui_context:{step:"history",action:"impression",ui_element:this.getClogUiElementVal()}}})}},{key:"onClickLearnMore",value:function e(){var t=this.props.clogger;t.track("GROWTH_PRICING",{contexts:{ui_context:{step:"history",action:"click",ui_element:this.getClogUiElementVal()}}})}},{key:"getClogUiElementVal",value:function e(){var t=this.props.channelType;if("mpim"===t||"im"===t)return 33;return 34}},{key:"render",value:function e(){var t=this.props,a=t.channelName,r=t.channelType,i=t.clientTheme,s=t.workspaceName,o=t.teamMessageLimitInSeconds;var l=true;var c="";var u="";var d=Ia.t("See Upgrade Options");if(o){l=false;c=Ia.t("Unlock messages prior to {priorToDate} in {workspaceName}",{priorToDate:Object(ja["a"])(o,"{date}"),workspaceName:Object(et["q"])(s)});u=Ia.t("To view and search all the messages in your workspace\u2019s history, rather than just the {maxMesssageLimitCount} most recent, upgrade to one of our paid plans.",{maxMesssageLimitCount:Object(wa["a"])(1e4)})}else if("mpim"===r||"im"===r){u=Ia.t("To see and search this conversation\u2019s full history, upgrade to one of our paid plans.");c=Ia.t("There\u2019s more to this conversation")}else{c=Ia.t("There\u2019s more to the conversation in {name}",{name:a});u=Ia.t("To see and search this channel\u2019s full history, upgrade to one of our paid plans.")}var p=_e()("p-message_pane__limited_history_foreword",ie()({},"p-message_pane__limited_history_foreword--"+i,"light"!==i));return n.a.createElement("div",{className:p,"data-qa":"msg_lim_header"},n.a.createElement("div",{className:"p-message_pane__limited_history_foreword_headline","data-qa":"msg_lim_headline"},l&&n.a.createElement(n.a.Fragment,null,n.a.createElement(Ca["b"],{text:":speech_balloon:",emojiSize:Ca["a"].MEDIUM,className:"p-message_pane__limited_history_speech_emoji"}),"\xa0"),c),n.a.createElement("div",{className:"p-message_pane__limited_history_foreword_subheading","data-qa":"msg_lim_subheading"},u),n.a.createElement(ca["d"],{onClick:this.onClickLearnMore,href:Object(Sa["j"])({entryPoint:"limited_history_foreword"}),"data-qa":"see_upgrade_options_btn",size:"small"},d))}}]);return t}(r["PureComponent"]);Aa.displayName="LimitedHistoryForeword";Aa.defaultProps=Ta;function Na(e,t){var a=t.channelId;var r=Object(O["e"])(e,a);if(!r)return{};var n=Object(Ke["d"])(e);var i=n?Object(ze["getTeamDisplayName"])(n):"";var s=Object(ze["getTeamMessageLimitTimestamp"])(n);var o=0;s>0&&(o=s/1e6);return{channelType:Object(k["getChannelType"])(r),channelName:Object(k["getDisplayNameForChannel"])(e,r),clogger:Object(m["a"])({state:e}),workspaceName:i,teamMessageLimitInSeconds:o}}var Pa=Object(i["connect"])(Na)(Aa);var Ma=a(1624);var Da=a(354);var xa=a(219);var Ra=a(220);var Fa=a(1338);var La=a(784);var Ua=a(781);var Ba=a(261);var qa=new et["b"]("message_pane_foreword");var Ga={memberIds:[],notificationPermission:"na",notificationSetting:"everything",prefWhoCanSeeThis:false,openChannelNotificationPrefsModal:l["noop"],openPrefsModal:l["noop"]};var Ha=function(e){be()(t,e);function t(e){var a;oe()(this,t);a=de()(this,me()(t).call(this,e));a.openPrefsDialog=a.openPrefsDialog.bind(ve()(a));a.openChannelPrefsDialog=a.openChannelPrefsDialog.bind(ve()(a));a.state=Object(Da["m"])();return a}ce()(t,[{key:"UNSAFE_componentWillReceiveProps",value:function e(t){this.props.notificationPermission!==t.notificationPermission&&this.setState(function(){return Object(Da["m"])()})}},{key:"getNotificationWarningText",value:function e(){var t=this;var a=this.state,r=a.notificationsEnabled,i=a.notificationDisabledType;if(r)return null;switch(i){case"not_yet_allowed":return qa.rt("You have not yet allowed desktop notifications. Open the <button>Preferences Dialog</button> and follow the instructions to set them up.",null,function(e){var a=e.key,r=e.text;return n.a.createElement(wt["a"],{onClick:t.openPrefsDialog,key:a},r)});case"not_allowed":return qa.t("You\u2019ve disallowed notifications in your browser. You\u2019ll need to open your browser preferences to change that.");case"impossible":return qa.rt("Your browser does not support desktop notifications. <a>Try one of our apps?</a>",{},function(e){var t=e.key,a=e.text;return n.a.createElement(Ra["a"],{target:"_blank",key:t,href:"/downloads"},a)});default:return null}}},{key:"openChannelPrefsDialog",value:function e(){this.props.openChannelNotificationPrefsModal({channelId:this.props.channelId,entryPoint:"foreward"})}},{key:"openPrefsDialog",value:function e(){this.props.openPrefsModal({activeSection:"notifications"})}},{key:"renderAvatars",value:function e(){var t=this.props.memberIds;var a=t.map(function(e){return n.a.createElement(xa["b"],{key:e,className:"p-message_pane__foreword__avatar",userId:e,size:56,showCard:true})});return n.a.createElement("div",{className:"p-message_pane__foreword__avatars"},a)}},{key:"renderDescription",value:function e(){var t=this.props.memberIds;var a=t.map(function(e){return n.a.createElement(nt["a"],{id:e,showTooltip:true})});var r=qa.rt("This is the very beginning of your direct message history with {names}",{names:Object(et["i"])(a,{noEscape:true,react:true})});this.props.prefWhoCanSeeThis&&(r=qa.rt("This is the very beginning of your direct message history with {names}. Only the {number} of you are in this conversation, and no one else can join it. <a>Learn more</a>",{names:Object(et["i"])(a,{noEscape:true,react:true}),number:a.length+1},function(e){var t=e.text,a=e.key;return n.a.createElement(Ra["a"],{key:a,href:"https://get.slack.help/hc/articles/360002063088",target:"_blank",rel:"noopener noreferrer"},t)}));return n.a.createElement("div",{className:"p-message_pane__foreword__description","data-qa":"im_foreword_description"},r,this.renderDescriptionActions())}},{key:"renderDescriptionActions",value:function e(){var t=this.getNotificationWarningText();if(t)return n.a.createElement("div",{className:"p-message_pane__foreword__notification_warning"},t);var a=this.props.notificationSetting;if("everything"===a)return n.a.createElement("div",{className:"p-message_pane__foreword__notification_setting"},qa.rt("You\u2019ll be notified for <strong>every new message</strong> in this conversation.",{fallbackHash:"d74e681b9c224e38f01310015fd4ae63f9c3ba9c"})," ",this.renderEditButton());if("mentions_dms"===a)return n.a.createElement("div",{className:"p-message_pane__foreword__notification_setting"},qa.rt("You\u2019ll be notified when <strong>a teammate mentions you or uses one of your keywords</strong>.")," ",this.renderEditButton());return n.a.createElement("div",{className:"p-message_pane__foreword__notification_setting"},qa.rt("You won\u2019t receive notifications.")," ",this.renderEditButton())}},{key:"renderEditButton",value:function e(){return n.a.createElement(wt["a"],{onClick:this.openChannelPrefsDialog},qa.rt("Change this setting",{fallbackHash:"5301648dcf6b53cefc9ed52999aaa92d4603cae0"}))}},{key:"render",value:function e(){return n.a.createElement("div",{className:"p-message_pane__foreword"},this.renderAvatars(),this.renderDescription())}}]);return t}(r["PureComponent"]);Ha.displayName="BaseMpimForeword";Ha.defaultProps=Ga;var Wa=Object(u["createSelector"])(function(e,t){var a=t.channelId;return Object(O["e"])(e,a)},P["getCurrentUserId"],function(e,t){var a=Object(k["getMemberIdsFromMpim"])(e);return Object(l["without"])(a,t)});var Va=Object(u["createSelectorCreator"])(u["defaultMemoize"],J["a"]);var Ka=Va(function(e,t){var a=t.channelId;return Object(O["e"])(e,a)},P["getCurrentUserId"],function(e,t){var a=t.channelId;var r=Object(O["e"])(e,a);if(!r)return null;var n=Object(k["getMemberIdsFromMpim"])(r);return n.map(function(t){return{id:t,name:Object(at["getPrefCompliantMemberNameById"])(e,t)}}).sort(function(e,t){return Object(Ba["a"])(e.name,t.name)}).map(function(e){return e.id})},function(e,t,a){return Object(l["without"])(a,t)});function za(e,t){var a=t.channelId;var r=Object(O["e"])(e,a);if(!r)return null;return{memberIds:Object(Ua["e"])(e)?Ka(e,{channelId:a}):Wa(e,{channelId:a}),notificationPermission:Object(Ma["getNotificationPermission"])(e),notificationSetting:Object(Da["f"])(e,a),prefWhoCanSeeThis:Object(Le["k"])(e,"whocanseethis_dm_mpdm_badge")}}function Qa(e){return{openChannelNotificationPrefsModal:function t(){return e(Fa["a"].apply(void 0,arguments))},openPrefsModal:function t(){return e(La["a"].apply(void 0,arguments))}}}var Ya=Object(i["connect"])(za,Qa)(Ha);Ya.propTypes={channelId:_["default"].string};Ya.defaultProps={channelId:null};var Ja=Ya;var Xa=new et["b"]("message_pane_foreword");var Za="USLACKBOT";var $a=function(e){be()(t,e);function t(){oe()(this,t);return de()(this,me()(t).apply(this,arguments))}ce()(t,[{key:"shouldComponentUpdate",value:function e(){return false}},{key:"render",value:function e(){var t=n.a.createElement("h1",{className:"p-message_pane__foreword__title"},Xa.t("Hi, Slackbot here!"));var a=n.a.createElement("div",{className:"p-message_pane__foreword__description display_flex","data-qa":"im_foreword_description"},n.a.createElement(xa["b"],{userId:Za,size:48,className:"p-message_pane__foreword__avatar"}),n.a.createElement("div",null,n.a.createElement("p",null,Xa.rt("You can ask me simple questions about how Slack works, or just type a few keywords. I\u2019ll search the <a>Help Center</a> to help you find more info.",{fallbackHash:"0d892d295ed431c242e406d752976a0f4d8d8b38"},function(e){var t=e.key,a=e.text;return n.a.createElement(ua["a"],{key:t,rel:"noopener noreferrer",href:"https://get.slack.help/hc/en-us"},a)})),n.a.createElement("p",{className:"margin_0"},Xa.rt("For example: <b>Can I edit a message I\u2019ve posted?</b> Or simply: <b>edit message</b>.",{fallbackHash:"bb42704f8751d2e3be33f3dd809a406c5a787d1e"},function(e){var t=e.key,a=e.text;return n.a.createElement(ua["a"],{key:t,rel:"noopener noreferrer",href:"https://get.slack.help/hc/en-us"},a)}))));var r=_e()("p-message_pane__foreword","p-message_pane__foreword--slackbot");return n.a.createElement("div",{className:r},t,a)}}]);return t}(r["Component"]);$a.displayName="SlackbotForeword";var er=$a;var tr=a(1293);var ar=new et["b"]("newxp_onboarding");var rr={step:null,clientTheme:"light"};var nr={START:"onboarding_start",CANCELLED:"onboarding_cancelled",SLACKBOT:"onboarding_slackbot_conversation",COMPLETE:"onboarding_complete"};var ir=function(e){be()(t,e);function t(){oe()(this,t);return de()(this,me()(t).apply(this,arguments))}ce()(t,[{key:"renderFooter",value:function e(){if(this.props.step!==nr.START)return null;return n.a.createElement("div",{className:"p-message_pane__newxp_foreword__footer"},n.a.createElement(ca["d"],{type:"primary",size:"large",className:"p-message_pane__newxp_foreword__explore",onClick:tr["g"]},ar.rt("Explore Slack")),n.a.createElement("div",{className:"p-message_pane__newxp_foreword__pre_skip"},ar.rt("Not your first Slack workspace? <a>Skip the tutorial</a>",null,function(e){var t=e.key,a=e.text;return n.a.createElement(ua["a"],{key:t,onClick:tr["a"],"data-qa":"skip_tutorial"},a)})))}},{key:"renderHeaderAction",value:function e(){if(this.props.step===nr.CANCELLED)return ar.rt("I changed my mind. <a>Take the tutorial.</a>",null,function(e){var t=e.key,a=e.text;return n.a.createElement(ua["a"],{key:t,onClick:tr["b"]},a)});if(this.props.step===nr.SLACKBOT)return ar.rt("Got the hang of Slack already? <a>Skip the tutorial.</a>",null,function(e){var t=e.key,a=e.text;return n.a.createElement(ua["a"],{key:t,onClick:tr["a"]},a)});return null}},{key:"render",value:function e(){var t=this.props,a=t.step,r=t.clientTheme;var i=_e()("p-message_pane__newxp_foreword",{"p-message_pane__newxp_foreword--start":"onboarding_start"===a});var s=_e()("p-message_pane__newxp_foreword__welcome_text",ie()({},"p-message_pane__newxp_foreword__welcome_text--"+r,"light"!==r));return n.a.createElement("div",{className:i},n.a.createElement("div",{className:"p-message_pane__newxp_foreword__header"},n.a.createElement("div",{className:s},ar.rt("Welcome!")),n.a.createElement("div",{className:"p-message_pane__newxp_foreword__welcome_message"},ar.t("Slack is a collaboration hub for teams.",{fallbackHash:"2548745b7be53c916d085ad9d7a6350c53b003b3"})),n.a.createElement("div",{className:"p-message_pane__newxp_foreword__skip_messaging"},this.renderHeaderAction())),this.renderFooter())}}]);return t}(r["PureComponent"]);ir.displayName="NewxpForeword";ir.defaultProps=rr;var sr=ir;var or=Ze;var lr=new et["b"]("message_pane_foreword");var cr={clientTheme:"light"};var ur=35;var dr=function(e){be()(t,e);function t(){oe()(this,t);return de()(this,me()(t).apply(this,arguments))}ce()(t,[{key:"componentDidMount",value:function e(){var t=this.props.clogger;t.track("GROWTH_PRICING",{contexts:{ui_context:{step:"history",action:"impression",ui_element:ur}}})}},{key:"render",value:function e(){var t=this.props.clientTheme;var a=Object(Sa["j"])({entryPoint:"limited_history_alert"});var r=_e()("p-message_pane__limited_history_alert",ie()({},"p-message_pane__limited_history_alert--"+t,"light"!==t));return n.a.createElement("div",{className:r},n.a.createElement(Ca["b"],{text:":speech_balloon:",emojiSize:Ca["a"].MEDIUM,className:"p-message_pane__limited_history_speech_emoji"}),"\xa0",lr.rt("<b>There\u2019s more to this conversation.</b> To see and search this conversation\u2019s full history, upgrade to one of our paid plans."),"\xa0",n.a.createElement(ua["a"],{href:a,target:"_blank",rel:"noopener noreferrer","data-clog-event":"GROWTH_PRICING","data-clog-ui-element":"slackbot_message_limit_header","data-clog-ui-action":"click","data-clog-ui-step":"history"},lr.t("Learn More")))}}]);return t}(r["PureComponent"]);dr.displayName="LimitedHistoryAlert";dr.defaultProps=cr;var pr=function e(t){return{clogger:Object(m["a"])({state:t})}};var mr=Object(i["connect"])(pr)(dr);var hr=a(1452);var vr=a(2718);var fr=a(2719);var br=a(1473);var gr=a(2006);var _r=a(2720);var yr=a(1340);var Or=a(2007);var kr=a(1157);var Er=a(1158);var Cr=a(2021);var Sr=Cr["a"];var wr=a(922);var jr=a(1998);var Ir={setUnreadPoint:l["noop"]};var Tr=function(e){be()(t,e);function t(e){var a;oe()(this,t);a=de()(this,me()(t).call(this,e));a.markMsgUnread=a.markMsgUnread.bind(ve()(a));return a}ce()(t,[{key:"markMsgUnread",value:function e(t){var a=t.channel,r=t.ts;this.props.setUnreadPoint({channelId:a,unreadTs:r})}},{key:"render",value:function e(){return n.a.createElement(jr["a"],Pe()({markMsgUnread:this.markMsgUnread},this.props))}}]);return t}(r["Component"]);Tr.displayName="MessageWrapper";Tr.defaultProps=Ir;function Ar(e){return{setUnreadPoint:function t(){return e(I["setUnreadPoint"].apply(void 0,arguments))}}}var Nr=Object(wr["a"])(Object(i["connect"])(null,Ar)(Tr));var Pr=a(516);var Mr=a(2004);var Dr=a(1618);var xr=a(3748);var Rr=br["a"];var Fr=gr["a"];var Lr={channelId:_["default"].string,timestamps:_["default"].arrayOf(_["default"].string),requestHistory:_["default"].func,lastReadTs:_["default"].string,isGhostLastRead:_["default"].bool,startTs:_["default"].string,startTsOffset:_["default"].number,highlightTs:_["default"].string,focusRequestedTs:_["default"].string,rollups:_["default"].objectOf(ke["a"].Rollup()),setUnreadPoint:_["default"].func,isLoading:_["default"].bool,isLoadingOlder:_["default"].bool,reachedStart:_["default"].bool,reachedEnd:_["default"].bool,prevReachedEnd:_["default"].bool,oldest:_["default"].string,latest:_["default"].string,onScroll:_["default"].func,onVisibleRowsChanged:_["default"].func,doneHighlighting:_["default"].func,isFileExpanding:_["default"].bool,isLimited:_["default"].bool,isSlackbotIm:_["default"].bool,useStickyDayDividers:_["default"].bool,shouldIgnoreScrollKeys:_["default"].func,shouldIgnoreArrowKeys:_["default"].func,channelSessionId:_["default"].string,theme:_["default"].string,firstUnreadTs:_["default"].string,featureTinyspeck:_["default"].bool,featureAriaApplicationMode:_["default"].bool,messageContainerType:_["default"].string,"aria-label":_["default"].string.isRequired,teamId:_["default"].string,enterpriseId:_["default"].string,sessionId:_["default"].string,msgTriggers:_["default"].object,currentUserId:_["default"].string,jumpToTimestamp:_["default"].func,makeMessageSummary:_["default"].func,isScreenReaderEnabled:_["default"].bool,windowLastFocusEvent:_["default"].number,onFocusEnter:_["default"].func,onFocusLeave:_["default"].func,isBannerVisible:_["default"].bool,setFocusRequestedTs:_["default"].func,showThreadIfThreadable:_["default"].func,currentThreadKey:_["default"].string,isThreadable:_["default"].func,threadListId:_["default"].string,telemeter:_["default"].object,featureOfflineMode:_["default"].bool,isOffline:_["default"].bool,userAttentionIsOnChat:_["default"].bool,clientTheme:_["default"].string,featureMessageNavigationShortcuts:_["default"].bool,featureContextualMessageShortcuts:_["default"].bool,latestMessageTsWithReactions:_["default"].string,openContextualMessageShortcutsModal:_["default"].func,contextualMessageShortcutsModalWasSeen:_["default"].bool,featureMessageKitInMessagePane:_["default"].bool,showingContextBar:_["default"].bool,upToBrowseKbShortcutPref:_["default"].bool,isIAP1Enabled:_["default"].bool,removeFromSectionNavigation:_["default"].func,addToSectionNavigation:_["default"].func,setInitialActiveSection:_["default"].func,focusLastVisibleMessageInChannel:_["default"].bool,setFocusLastVisibleMessageInChannel:_["default"].func,setFocusMessageInput:_["default"].func};var Ur={channelId:null,timestamps:[],requestHistory:c.a.noop,lastReadTs:void 0,isGhostLastRead:false,startTs:null,startTsOffset:null,highlightTs:null,focusRequestedTs:void 0,rollups:null,setUnreadPoint:c.a.noop,isFileExpanding:false,isLoading:false,isLoadingOlder:false,reachedStart:false,reachedEnd:false,prevReachedEnd:false,oldest:void 0,latest:void 0,onScroll:c.a.noop,onVisibleRowsChanged:c.a.noop,doneHighlighting:c.a.noop,isLimited:false,isSlackbotIm:false,useStickyDayDividers:true,shouldIgnoreScrollKeys:function e(){return false},shouldIgnoreArrowKeys:function e(){return false},channelSessionId:null,theme:"light",firstUnreadTs:null,featureTinyspeck:false,featureAriaApplicationMode:false,messageContainerType:void 0,teamId:null,enterpriseId:null,sessionId:null,msgTriggers:null,currentUserId:null,jumpToTimestamp:c.a.noop,makeMessageSummary:void 0,isScreenReaderEnabled:false,windowLastFocusEvent:null,onFocusEnter:c.a.noop,onFocusLeave:c.a.noop,isBannerVisible:false,setFocusRequestedTs:c.a.noop,showThreadIfThreadable:c.a.noop,currentThreadKey:void 0,isThreadable:c.a.noop,threadListId:void 0,telemeter:{store:c.a.noop,measure:c.a.noop},featureOfflineMode:false,isOffline:false,userAttentionIsOnChat:false,clientTheme:"light",latestMessageTsWithReactions:null,removeFromSectionNavigation:c.a.noop,addToSectionNavigation:c.a.noop,setInitialActiveSection:c.a.noop,focusLastVisibleMessageInChannel:false,setFocusLastVisibleMessageInChannel:c.a.noop,setFocusMessageInput:c.a.noop,featureMessageNavigationShortcuts:false,featureContextualMessageShortcuts:false,openContextualMessageShortcutsModal:c.a.noop,contextualMessageShortcutsModalWasSeen:false,featureMessageKitInMessagePane:false,showingContextBar:false,upToBrowseKbShortcutPref:false,isIAP1Enabled:false};var Br=80;var qr=60;var Gr=64;var Hr=120;var Wr=28;var Vr="MESSAGE-LIST";var Kr=864e5;var zr={ABOVE:1,VISIBLE:2,BELOW:3};var Qr="0000000000.000001";var Yr=function e(t){var a=Math.floor(t/1e3);return a+".000000"};var Jr=function(e){be()(t,e);function t(e){var a;oe()(this,t);a=de()(this,me()(t).call(this,e));var r=Object(Or["a"])();a.state={degraded:r,isLoading:e.isLoading,isLoadingOlder:e.isLoadingOlder,isSelecting:false,hasKeyboardFocus:false,isFileExpanding:false};a.DEFAULT_ROW_HEIGHT="light"===e.theme?Br:qr;a.STICKY_EPSILON=a.DEFAULT_ROW_HEIGHT/2;a.ANCHOR_OFFSET=r?Hr:Gr;a.heightCache=new yr["a"]({DEFAULT_HEIGHT:a.DEFAULT_ROW_HEIGHT});a.layout=new _r["a"]({heightCache:a.heightCache,stickToBottom:!e.isFileExpanding||e.reachedEnd||e.prevReachedEnd,shouldExcludeFirstItemFromGravity:a.isFirstRowLimitedHistoryForeword.bind(ve()(a)),STICKY_EPSILON:a.STICKY_EPSILON,STICKY_EPSILON_SETHEIGHT:2,ANCHOR_OFFSET:a.ANCHOR_OFFSET});a.keys=[];a.rows=[];a.visibleRows=[];a.partiallyVisibleRows=[];a.unreadIndex=null;a.list=null;a.useAnchor=true;a.keyToScrollTo=null;a.width=0;a.hasRenderedOneMessage=false;a.requestAround=a.requestAround.bind(ve()(a));a.requestOlder=a.requestOlder.bind(ve()(a));a.requestNewer=a.requestNewer.bind(ve()(a));a.renderRow=a.renderRow.bind(ve()(a));a.setListRef=a.setListRef.bind(ve()(a));a.getAriaLabelForRow=a.getAriaLabelForRow.bind(ve()(a));a.isItemAriaExpanded=a.isItemAriaExpanded.bind(ve()(a));a.getPropsForItem=a.getPropsForItem.bind(ve()(a));a.onScroll=a.onScroll.bind(ve()(a));a.onListScrolled=a.onListScrolled.bind(ve()(a));a.onFocusEnter=a.onFocusEnter.bind(ve()(a));a.onFocusLeave=a.onFocusLeave.bind(ve()(a));a.onItemTabWithin=a.onItemTabWithin.bind(ve()(a));a.onItemKeyDown=a.onItemKeyDown.bind(ve()(a));a.debouncedOnListScrolled=Object(Ge["a"])(a.onListScrolled,150);a.isMessage=a.isMessage.bind(ve()(a));a.onSelectionChange=a.onSelectionChange.bind(ve()(a));a.onJumpToUnreadShortcut=a.onJumpToUnreadShortcut.bind(ve()(a));a.focus=a.focus.bind(ve()(a));a.onShiftPageUp=a.onShiftPageUp.bind(ve()(a));a.onShiftPageDown=a.onShiftPageDown.bind(ve()(a));a.onEnd=a.onEnd.bind(ve()(a));a.onArrowKeyRight=a.onArrowKeyRight.bind(ve()(a));a.scrollToOffset=c.a.throttle(a.scrollToOffset.bind(ve()(a)),200);a.messagesRendered={};a.loadingHistoriesSeen=0;a.loadingHistoriesSeenHighEnd=0;a.loadingHistoriesPerHowManyMessages=84;a.loadingHistoriesPerHowManyMessagesHighEnd=500;a.scrollMetricsGatheringEnabled=Object(Be["a"])(1)||a.props.featureTinyspeck;if(a.scrollMetricsGatheringEnabled){var n=Object(o["d"])(e.teamId);var i=Object(d["c"])({state:n});a.debounceBatchMessagesSeen=c.a.debounce(function(){i.store("modern_history_load_seen_per_84_messages",a.loadingHistoriesSeen,{allow_zero:true});a.loadingHistoriesSeen=0},1e3);a.debounceBatchMessagesSeenHighEnd=c.a.debounce(function(){i.store("modern_history_load_seen_per_500_messages",a.loadingHistoriesSeenHighEnd,{allow_zero:true});a.loadingHistoriesSeenHighEnd=0},1e3)}a.debounceCountHistoryLoadSeen=c.a.debounce(function(){a.loadingHistoriesSeen+=1;a.loadingHistoriesSeenHighEnd+=1},1e3);a.prqMetrics={channelSwitch:{}};return a}ce()(t,[{key:"componentDidMount",value:function e(){this.props.isScreenReaderEnabled&&this.shouldSwitchUpArrowBehavior()&&this.switchUpArrowBehavior()}},{key:"componentDidUpdate",value:function e(t){if(this.keyToScrollTo&&this.list){this.list.scrollToKey(this.keyToScrollTo,{lazy:this.lazyScroll});this.keyToScrollTo=null}var a=this.props.isLoading||this.props.isLoadingOlder;if(c.a.isFunction(this.onJump)&&!a&&this.props.timestamps.length){this.onJump();this.onJump=null}var r=!!t.isFileExpanding&&!this.props.isFileExpanding;r?this.layout.setStickToBottom(false):this.layout.setStickToBottom(this.props.reachedEnd||this.props.prevReachedEnd);this.onListScrolled();this.maybeLogChannelSwitch(t);var n={prevUserAttentionIsOnChat:t.userAttentionIsOnChat,prevComposerVisible:t.composerVisible,currentUserAttentionIsOnChat:this.props.userAttentionIsOnChat,currentComposerVisible:this.props.composerVisible};Object(kr["a"])(n)&&this.props.addToSectionNavigation();Object(Er["a"])(n)&&this.props.removeFromSectionNavigation();this.props.featureMessageNavigationShortcuts&&this.maybeFocusOnLastVisibleMessage(t)}},{key:"maybeFocusOnLastVisibleMessage",value:function e(t){var a=this.props.focusLastVisibleMessageInChannel;if(a&&t.focusLastVisibleMessageInChannel!==a){this.list.focusLastItemInView();this.props.setFocusLastVisibleMessageInChannel(null)}}},{key:"maybeLogChannelSwitch",value:function e(t){if(!navigator.onLine)return;if("undefined"===typeof this.props.msgTriggers[this.props.channelId]||this.props.windowLastFocusEvent!==this.props.msgTriggers[this.props.channelId].lastFocus){this.prqMetrics.channelSwitch={};return}if(t.channelId!==this.props.channelId)this.trackChannelSwitchWithoutSync(t.channelId);else if(this.prqMetrics.channelSwitch.duration&&this.prqMetrics.channelSwitch.nextChannelId===this.props.channelId&&false===t.isLoading&&true===this.props.isLoading&&true!==this.props.isLoadingOlder&&false===this.prqMetrics.channelSwitch.hasLoggedVisible&&false===this.prqMetrics.channelSwitch.hasLoggedUsable){var a=false;this.trackChannelSwitchWithSync(Ce["g"],a)}else if(this.prqMetrics.channelSwitch.duration&&this.prqMetrics.channelSwitch.nextChannelId===this.props.channelId&&true===t.isLoading&&false===this.props.isLoading&&true!==this.props.isLoadingOlder&&true===this.prqMetrics.channelSwitch.hasLoggedVisible){var r=true;this.trackChannelSwitchWithSync(Ce["f"],r)}}},{key:"trackChannelSwitchWithoutSync",value:function e(t){if(this.prqMetrics.channelSwitch.duration){Object(Ce["f"])(this.prqMetrics.channelSwitch.duration,this.props.msgTriggers[this.prqMetrics.channelSwitch.nextChannelId].trigger,this.prqMetrics.channelSwitch.nextChannelId,this.prqMetrics.channelSwitch.fetchHistoryState,this.props.teamId,this.props.enterpriseId,this.props.sessionId,this.props.currentUserId);Object(Ce["g"])(this.prqMetrics.channelSwitch.duration,this.props.msgTriggers[this.prqMetrics.channelSwitch.nextChannelId].trigger,this.prqMetrics.channelSwitch.nextChannelId,this.prqMetrics.channelSwitch.fetchHistoryState,this.props.teamId,this.props.enterpriseId,this.props.sessionId,this.props.currentUserId)}var a=Object(o["d"])(this.props.teamId);var r=Object(d["c"])({state:a});var n="start_channel_change_"+this.props.channelId;var i=r.measure(n,"channel_change_react_msgs",null,{return_unprocessed:true}).unprocessed;this.prqMetrics.channelSwitch={duration:i,prevChannelId:t,nextChannelId:this.props.channelId,fetchHistoryState:Ce["c"],hasLoggedVisible:false,hasLoggedUsable:false}}},{key:"trackChannelSwitchWithSync",value:function e(t,a){var r="start_channel_change_"+this.prqMetrics.channelSwitch.nextChannelId;var n=Object(o["d"])(this.props.teamId);var i=Object(d["c"])({state:n});t(i.measure(r,"channel_change_not_stored",null,{ephemeral:true,return_unprocessed:true}).unprocessed,this.props.msgTriggers[this.prqMetrics.channelSwitch.nextChannelId].trigger,this.prqMetrics.channelSwitch.nextChannelId,Ce["a"],this.props.teamId,this.props.enterpriseId,this.props.sessionId,this.props.currentUserId);if(a){this.prqMetrics.channelSwitch={};this.prqMetrics.channelSwitch.hasLoggedUsable=true}else this.prqMetrics.channelSwitch.hasLoggedVisible=true}},{key:"findTimestampClosestToStartTs",value:function e(){var t=this.props,a=t.startTs,r=t.timestamps;if(!r.length)return false;if(!a)return null;return c.a.find(r,function(e){return e>=a})}},{key:"focus",value:function e(){this.list.focus();this.shouldSwitchUpArrowBehavior()&&this.switchUpArrowBehavior()}},{key:"blur",value:function e(){this.list.blur()}},{key:"setListRef",value:function e(t){this.list=t}},{key:"jumpToUnread",value:function e(t){var a=this;var r=this.props,n=r.lastReadTs,i=r.isScreenReaderEnabled,s=r.firstUnreadTs;var o=t&&"keydown"===t.type&&(i||this.state.hasKeyboardFocus);var l=c.a.isNumber(this.unreadIndex)&&this.keys[this.unreadIndex];if(l){if(o){this.list.setActiveItem(s);this.list.scrollToKey(s)}else this.list.scrollToKey(l);return}this.jumpToTimestamp({ts:n,onJump:function e(){a.state.hasKeyboardFocus&&a.list.setActiveItem(a.props.firstUnreadTs)}})}},{key:"isAtBottom",value:function e(){if(!this.list)return false;var t=this.list.getScrollTop();var a=this.layout.getTotalHeight();var r=this.height;return t+r>=Math.floor(a)-this.STICKY_EPSILON}},{key:"getUnreadLinePlacement",value:function e(){if("number"!==typeof this.unreadIndex)return zr.ABOVE;if(!this.list)return zr.ABOVE;var t=this.list.getVisibleRange(),a=t.start,r=t.end;if(this.unreadIndex<a)return zr.ABOVE;if(this.unreadIndex<r)return zr.VISIBLE;return zr.BELOW}},{key:"getVisibleRows",value:function e(t){if(!this.list)return[];var a=this.list.getVisibleRange(void 0,t),r=a.start,n=a.end;var i=this.rows.slice(r,n);return i}},{key:"getScrollmarkForFocusedItem",value:function e(t){var a=t===Qr?this.props.timestamps[0]:t;return{mark:t,offset:this.layout.getTop(a)-this.list.getScrollTop()}}},{key:"getScrollmark",value:function e(){if(!this.list||!this.layout)return null;var t=this.state.hasKeyboardFocus?this.list.getActiveItem():this.previouslyActiveItem;this.previouslyActiveItem=null;if(t)return this.getScrollmarkForFocusedItem(t);var a=this.list.getScrollTop();if(this.layout.shouldStickToBottom(a))return null;var r=this.props.timestamps;var n=this.layout.findAnchor(r,r,a+this.ANCHOR_OFFSET);var i=this.layout.getTop(n)-a;return{mark:n,offset:i}}},{key:"onScroll",value:function e(){this.useAnchor=false;this.layout.setAnchor(false);this.debouncedOnListScrolled();this.props.onScroll()}},{key:"onSelectionChange",value:function e(t){if(!this.node)return;this.setState(function(){return{isSelecting:t}})}},{key:"isMessage",value:function e(t){var a=this.rows[t.index];return a&&("message"===a.type||"foreword"===a.type)}},{key:"onListScrolled",value:function e(){var t=this.getVisibleRows(false);var a=this.getVisibleRows(true);if(c.a.isEqual(t,this.visibleRows)&&c.a.isEqual(a,this.partiallyVisibleRows))return;this.visibleRows=t;this.partiallyVisibleRows=a;this.props.onVisibleRowsChanged(t,a)}},{key:"onShiftPageUp",value:function e(){var t=this;var a=this.getTimestampOfPrevDay();if(!a)return;var r=this.state.hasKeyboardFocus;if(this.list.isScrolledToTop()&&this.props.reachedStart&&r){this.list.setActiveItem(this.getTimestampOfFirstMessageForDay(a));return}var n=Yr(a);var i=this.props.isBannerVisible?Gr:Wr;this.jumpToTimestamp({ts:n,offset:i,onJump:function e(){var n=t.getTimestampOfFirstMessageForDay(a);r&&t.list.setActiveItem(n);t.list.scrollToKey(n,{lazy:t.lazyScroll})}})}},{key:"onShiftPageDown",value:function e(){var t=this;var a=this.getTimestampOfNextDay();if(!a)return;var r=this.state.hasKeyboardFocus;if(this.list.isScrolledToBottom()&&this.props.reachedEnd&&r){this.list.setActiveItem(this.getTimestampOfFirstMessageForDay(a));return}var n=Yr(a);var i=this.props.isBannerVisible?Gr:Wr;this.jumpToTimestamp({ts:n,offset:i,onJump:function e(){var n=t.getTimestampOfFirstMessageForDay(a);r&&t.list.setActiveItem(n);t.list.scrollToKey(n,{lazy:t.lazyScroll})}})}},{key:"onEnd",value:function e(){var t=this;var a=this.props,r=a.reachedEnd,n=a.timestamps;var i=r?n[n.length-1]:null;this.jumpToTimestamp({ts:i,onJump:function e(){if(!t.state.hasKeyboardFocus)return;var a=t.rows;var r=a[a.length-1];var n=r&&r.type;"message"===n&&t.list.setActiveItem(r.ts)}});return false}},{key:"onArrowKeyRight",value:function e(t){var a=t.target;if(Object(qe["a"])(a))return;var r=this.props,n=r.channelId,i=r.timestamps;if(!this.state.hasKeyboardFocus)return;var s=this.list.getInitialActiveItem();if(!s||!c.a.includes(i,s))return;var o=this.props.showThreadIfThreadable({channelId:n,threadTs:s,requestFocus:true});o&&this.blur()}},{key:"onItemKeyDown",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.key,r=t.id;if(this.props.featureMessageNavigationShortcuts&&"ArrowDown"===a){var n=this.rows[this.rows.length-1];n&&r===n.ts&&this.props.setFocusMessageInput(true)}}},{key:"onJumpToUnreadShortcut",value:function e(t){if(!Pr["a"])return;this.jumpToUnread(t)}},{key:"onFocusEnter",value:function e(t){var a=this;this.setState(function(){return{hasKeyboardFocus:t.isKeyboardFocus}},function(){a.props.onFocusEnter(t);var e=a.props,r=e.focusRequestedTs,n=e.setFocusRequestedTs;r&&r===a.list.getActiveItem()&&n(null)})}},{key:"onFocusLeave",value:function e(t){var a=this;this.state.hasKeyboardFocus&&(this.previouslyActiveItem=t.activeItem);this.setState(function(){return{hasKeyboardFocus:false}},function(){a.props.onFocusLeave(t)})}},{key:"onItemTabWithin",value:function e(){this.props.setInitialActiveSection()}},{key:"scrollToOffset",value:function e(){var t;if(!this.list)return;(t=this.list).scrollToOffset.apply(t,arguments)}},{key:"shouldSwitchUpArrowBehavior",value:function e(){var t=this.props,a=t.featureMessageNavigationShortcuts,r=t.contextualMessageShortcutsModalWasSeen,n=t.upToBrowseKbShortcutPref;if(!a)return false;if(r)return false;if(n)return false;return true}},{key:"shouldShowLimitedHistoryAlert",value:function e(){var t=this.props,a=t.isLimited,r=t.isSlackbotIm;return a&&r}},{key:"shouldShowLimitedHistoryForeword",value:function e(){var t=this.props,a=t.isLimited,r=t.isSlackbotIm;return a&&!r}},{key:"isFirstRowLimitedHistoryForeword",value:function e(){if(!this.shouldShowLimitedHistoryForeword())return false;var t=c.a.first(this.rows);return t&&"foreword"===t.type}},{key:"informUserAboutUpArrowChange",value:function e(){this.props.openContextualMessageShortcutsModal();this.props.setUserPrefByApi({pref:"contextual_message_shortcuts_modal_was_seen",value:true})}},{key:"switchUpArrowBehavior",value:function e(){this.props.setUserPrefByApi({pref:"up_to_browse_kb_shortcut",value:true});this.informUserAboutUpArrowChange()}},{key:"requestAround",value:function e(){var t=this;if(this.state.isLoading)return false;if(this.props.reachedEnd)return this.requestOlder();if(this.props.reachedStart)return this.requestNewer();Object(p["a"])({teamId:this.props.teamId}).info(Vr,"requestAround channelId: "+this.props.channelId+" isLoading: "+this.state.isLoading+" timestamps: "+c.a.size(this.props.timestamps)+" reachedStart: "+this.props.reachedStart+" reachedEnd: "+this.props.reachedEnd);var a=this.props,r=a.oldest,n=a.latest,i=a.timestamps,s=a.startTs;if(c.a.isEmpty(i)&&!s)return this.props.requestHistory({});var o=r||i&&c.a.first(i)||s;var l=n||i&&c.a.last(i)||s;var u=this.props.requestHistory({latest:o,oldest:l});if(u){this.prqMetrics.channelSwitch.fetchHistoryState!==Ce["a"]&&(this.prqMetrics.channelSwitch.fetchHistoryState=Ce["b"]);u.then(function(){t.prqMetrics.channelSwitch.fetchHistoryState=Ce["a"]});this.setState(function(){return{isLoading:true,isLoadingOlder:false}})}return u}},{key:"requestOlder",value:function e(){var t=this;if(this.state.isLoading)return false;var a=this.props,r=a.oldest,n=a.timestamps,i=a.startTs;var s=r||n&&c.a.first(n)||i;var o=this.props.requestHistory({latest:s});if(o){this.prqMetrics.channelSwitch.fetchHistoryState!==Ce["a"]&&(this.prqMetrics.channelSwitch.fetchHistoryState=Ce["b"]);o.then(function(){t.prqMetrics.channelSwitch.fetchHistoryState=Ce["a"]});this.setState(function(){return{isLoading:true,isLoadingOlder:true}})}return o}},{key:"requestNewer",value:function e(){var t=this;if(this.state.isLoading)return false;var a=this.props,r=a.latest,n=a.timestamps,i=a.startTs;var s=r||n&&c.a.last(n)||i;var o=this.props.requestHistory({oldest:s});if(o){this.prqMetrics.channelSwitch.fetchHistoryState!==Ce["a"]&&(this.prqMetrics.channelSwitch.fetchHistoryState=Ce["b"]);o.then(function(){t.prqMetrics.channelSwitch.fetchHistoryState=Ce["a"]});this.setState(function(){return{isLoading:true,isLoadingOlder:false}})}return o}},{key:"renderMessage",value:function e(t,a){var r=a.hasFocus,i=a.isHovered,s=a.isExpanded,o=a.itemId;var l=t.ts,u=t.previousMessageTs;var d=c.a.last(this.props.timestamps);var p=l&&l===this.props.highlightTs;if(this.scrollMetricsGatheringEnabled){this.messagesRendered[t.ts]=true;var m=c.a.keys(this.messagesRendered).length;m%this.loadingHistoriesPerHowManyMessages===0&&this.debounceBatchMessagesSeen();m%this.loadingHistoriesPerHowManyMessagesHighEnd===0&&this.debounceBatchMessagesSeenHighEnd()}if(this.props.featureMessageKitInMessagePane)return n.a.createElement(Nr,{channelId:this.props.channelId,ts:l,key:l,prevTs:u,focused:r,renderActionsOffscreen:this.state.hasKeyboardFocus,theme:this.props.theme,rollup:this.props.rollups[l],parentId:o,isLast:l===d,showingContextBar:this.props.showingContextBar,highlight:p,clearHighlight:this.props.doneHighlighting,latestMessageTsWithReactions:this.props.latestMessageTsWithReactions});return n.a.createElement(Sr,{ts:l,key:l,channelId:this.props.channelId,previousMessageTs:u,isLast:l===d,rollup:this.props.rollups[l],setUnreadPoint:this.props.setUnreadPoint,fadeAwayHighlight:p,doneHighlighting:this.props.doneHighlighting,channelType:this.props.channelType,channelSessionId:this.props.channelSessionId,latestMessageTsWithReactions:this.props.latestMessageTsWithReactions,isHovered:i,isThreadExpanded:s,threadListId:this.props.threadListId,messageContainerType:this.props.messageContainerType,renderActions:i||r,hasFocus:r,renderActionsOffscreen:this.state.hasKeyboardFocus,showThreadIfThreadable:this.props.showThreadIfThreadable,parentId:o})}},{key:"renderForeword",value:function e(){return n.a.createElement(or,{key:"message-list-foreword",channelType:this.props.channelType,channelId:this.props.channelId,clientTheme:this.props.clientTheme,hasLimitedHistory:this.shouldShowLimitedHistoryForeword()})}},{key:"renderRow",value:function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=a.hasFocus,i=a.isHovered,s=a.isExpanded,o=a.itemId;var l=this.rows[t];if(!l||!l.type)return null;switch(l.type){case"message":return this.renderMessage(l,{hasFocus:r,isHovered:i,isExpanded:s,itemId:o});case"dayDividerLabel":return n.a.createElement(Dr["b"],{key:l.day,date:l.day,sticky:this.props.useStickyDayDividers});case"dayDivider":return n.a.createElement(Dr["a"],{key:l.day,date:l.day,isUnread:l.showDayDividerAsUnread,ghost:this.props.isGhostLastRead,isIAP1Enabled:this.props.isIAP1Enabled});case"unread":return n.a.createElement(Mr["a"],{key:"unread",ghost:this.props.isGhostLastRead,isIAP1Enabled:this.props.isIAP1Enabled});case"loading":this.debounceCountHistoryLoadSeen();return n.a.createElement(fr["a"],null);case"loadingSpinner":return n.a.createElement(vr["a"],null);case"foreword":return this.renderForeword({hasFocus:r});case"limited_history":return n.a.createElement(mr,{clientTheme:this.props.clientTheme});default:return null}}},{key:"isItemAriaExpanded",value:function e(t,a){var r=this.props,n=r.channelId,i=r.isThreadable,s=r.currentThreadKey;if(!i)return;var o=this.rows[a];if(!o||!o.type)return;if("message"!==o.type)return;var l=Object(Q["decodeThreadKey"])(s),c=l.threadTs,u=l.channelId;var d=c===t&&n===u;if(i({channelId:n,threadTs:t}))return d;return}},{key:"getAriaLabelForRow",value:function e(t){var a=t.index,r=t.includeDate;var n=this.props,i=n.channelId,s=n.makeMessageSummary,o=n.isScreenReaderEnabled;if(!s)return null;var l=this.rows[a];if(!l||!l.type)return null;if("message"!==l.type)return null;var c=l.ts,u=l.previousMessageTs,d=l.isFirstMsgForDay,p=l.isLastMsgForDay,m=l.isFirstUnreadMsg,h=l.day;var v=this.props.rollups[c];if(!this.state.hasKeyboardFocus&&!o)return null;return s({channelId:i,ts:c,isFirstUnreadMsg:m,isFirstMsgForDay:d,isLastMsgForDay:p,previousMessageTs:u,day:h,rollup:v,hasFocus:this.state.hasKeyboardFocus,viewContext:je["MESSAGE_CONTAINERS"].MESSAGE_PANE,includeDate:r})}},{key:"UNSAFE_componentWillReceiveProps",value:function e(t){var a=this;this.setState(function(e){if(t.isLoading===e.isLoading&&t.isLoadingOlder===e.isLoadingOlder)return null;Object(p["a"])({teamId:a.props.teamId}).info(Vr,"componentWillReceiveProps isLoading: "+t.isLoading+" isLoadingOlder: "+t.isLoadingOlder+" timestamps: "+c.a.size(t.timestamps));return{isLoading:t.isLoading,isLoadingOlder:t.isLoadingOlder}});if(t.channelId!==this.props.channelId||t.startTs!==this.props.startTs||t.highlightTs&&t.highlightTs!==this.props.highlightTs||t.timestamps.length&&!this.props.timestamps.length){this.useAnchor=true;var r=t.startTs;var n=this.props.timestamps;var i=t.timestamps;if(c.a.inRange(r,c.a.floor(c.a.first(n)),c.a.ceil(c.a.last(n)))&&t.channelId===this.props.channelId){var s=c.a.findLast(i,function(e){return e<=t.startTs});this.keyToScrollTo=s;this.lazyScroll=t.highlightLazy;this.useAnchor=false}}if(t.channelId!==this.props.channelId){this.heightCache.invalidate();this.list&&this.list.resetRendered&&this.list.resetRendered();Object(p["a"])({teamId:this.props.teamId}).info(Vr,"Switching channels: "+t.channelId+" timestamps: "+c.a.size(t.timestamps))}t.lastReadTs!==this.props.lastReadTs&&(this.unreadIndex=null)}},{key:"groupTimestampsByDay",value:function e(t){return c.a.groupBy(t,function(e){return Object(He["a"])(e)})}},{key:"getTimestampsForDays",value:function e(t){return c.a.keys(this.groupTimestampsByDay(t)).sort()}},{key:"getTimestampOfDayClosestToTop",value:function e(){var t=this.list.getVisibleRange(),a=t.start;var r=this.rows[a];if(!r)return;if("dayDivider"===r.type)return r.day.toString();if("dayDividerLabel"===r.type)return r.day.toString();if("message"===r.type)return r.day.ts.toString();return}},{key:"getStartTimestampForDayNavigation",value:function e(){if(this.state.hasKeyboardFocus)return Object(He["a"])(this.list.getInitialActiveItem());return this.getTimestampOfDayClosestToTop()}},{key:"getTimestampOfPrevDay",value:function e(){var t=this.getStartTimestampForDayNavigation();var a=this.getTimestampOfFirstMessageForDay(t);if(!a)return t;if(a&&!this.list.isItemInView(a))return t;var r=this.getTimestampsForDays(this.props.timestamps);var n=c.a.indexOf(r,t);var i=n-1;return r[i]}},{key:"getTimestampOfNextDay",value:function e(){var t=this.getStartTimestampForDayNavigation();var a=this.getTimestampsForDays(this.props.timestamps);var r=c.a.indexOf(a,t);var n=a[r+1];if(n)return n;return(parseInt(t,10)+Kr).toString()}},{key:"getTimestampOfFirstMessageForDay",value:function e(t){var a=this.getTimestampsForDays(this.props.timestamps);var r=c.a.indexOf(a,t);if(r<0)return;if(0===r&&!this.props.reachedStart)return;var n=this.groupTimestampsByDay(this.props.timestamps);var i=n[t];return i?i[0]:void 0}},{key:"jumpToTimestamp",value:function e(t){var a=t.ts,r=t.offset,n=t.onJump;c.a.isFunction(n)&&(this.onJump=n);this.props.jumpToTimestamp({ts:a,offset:r})}},{key:"getPropsForItem",value:function e(t){var a=t.key,r=t.index,n=t.isInitialFocusInRange;var i=this.rows[r];return i&&i.type?{"aria-label":this.getAriaLabelForRow({index:r,includeDate:n}),"aria-expanded":this.isItemAriaExpanded(a,r)}:void 0}},{key:"render",value:function e(){var t=this;if(this.props.featureOfflineMode&&this.props.isOffline&&c.a.isEmpty(this.props.timestamps))return n.a.createElement(hr["a"],null);var a=this.groupTimestampsByDay(this.props.timestamps);var r=c.a.keys(a).sort();var i=[];var s=[];var o=[];var l=this.findTimestampClosestToStartTs();var u=this.props.firstUnreadTs;var d=l;if(this.props.reachedStart){s.push(Qr);i.push({type:"foreword",ts:Qr});if(this.shouldShowLimitedHistoryAlert()){s.push("limited_history");i.push({type:"limited_history"})}}this.unreadIndex=null;var p=c.a.first(this.props.timestamps)<=this.props.lastReadTs||this.props.reachedStart;c.a.forEach(r,function(e,r){var n=parseInt(e,10);var l=a[e];var m=e+"."+t.props.channelId;var h=p&&c.a.first(l)===u;if(h){t.unreadIndex=i.length;t.props.startTs===t.props.lastReadTs&&(d=m)}i.push({type:"dayDividerLabel",day:n,showDayDividerAsUnread:h});t.props.useStickyDayDividers&&o.push({key:m,index:s.length});s.push(m);if(r>0||t.props.reachedStart||t.state.degraded){i.push({type:"dayDivider",day:n,showDayDividerAsUnread:h});s.push(e+"divider")}if(!t.state.degraded&&!t.state.isSelecting&&0===r&&t.state.isLoadingOlder){s.push("loading");i.push({type:"loading"})}var v;c.a.forEach(l,function(e,a){if(p&&0!==a&&e===u){t.unreadIndex=i.length;var r="unreadDivider";s.push(r);i.push({type:"unread",day:n});t.props.startTs===t.props.lastReadTs&&(d=u)}var o=0===a;var c=a===l.length-1;var m=u===e;i.push({type:"message",ts:e,previousMessageTs:v,isFirstMsgForDay:o,isLastMsgForDay:c,isFirstUnreadMsg:m,day:{ts:n}});s.push(e);v=e})});if(this.state.isLoading&&!this.state.isLoadingOlder&&!this.props.reachedEnd&&!this.props.prevReachedEnd){s.push("loadingSpinner");i.push({type:"loadingSpinner"})}this.layout.setAnchor(this.useAnchor&&d,this.useAnchor&&this.props.startTsOffset);!this.useAnchor&&this.keyToScrollTo&&c.a.isNumber(this.props.startTsOffset)&&(this.layout.anchorOffset=this.props.startTsOffset);this.keys=s;this.rows=i;var m={firstVisibleUnreadTs:u,isGhostLastRead:this.props.isGhostLastRead,highlightTs:this.props.highlightTs,lastTimestamp:c.a.last(this.props.timestamps),reachedEnd:this.props.reachedEnd,isLimited:this.props.isLimited,isSlackbotIm:this.props.isSlackbotIm,useStickyDayDividers:this.props.useStickyDayDividers};var h=this.state.degraded?Fr:Rr;var v=this.props.shouldIgnoreScrollKeys;var f=[{keys:["command+j","ctrl+j"],handler:this.onJumpToUnreadShortcut},{keys:["shift+pagedown"],handler:this.onShiftPageDown.bind(this),filter:v},{keys:["shift+pageup"],handler:this.onShiftPageUp.bind(this),filter:v},{keys:["right"],handler:this.onArrowKeyRight,filter:this.props.shouldIgnoreArrowKeys}];var b=function(){if(t.state.isLoading)return null;var e=i[i.length-1];var a=e&&e.type;var r=t.props.startTs===Qr||false===l&&"foreword"===a;if(r)return Qr;if(null===l&&"message"===a)return e.ts;if(u)return u;if(l)return l;return null}();return n.a.createElement(xe["a"],null,function(e){var a=e.width,r=e.height;if(0===a||0===r)return null;if(a!==t.width){t.heightCache.invalidate();t.width=a}t.height=r;var i=_e()("c-message_list",{"c-message_list--context_bar_showing":t.props.showingContextBar});return n.a.createElement(h,{ref:t.setListRef,className:i,id:t.listId,"aria-label":t.props["aria-label"],height:r,width:a,keys:s,rowRenderer:t.renderRow,layout:t.layout,stickyItems:o,stickyOffsetTop:t.props.isIAP1Enabled?0:-21,stickyZIndex:t.props.isIAP1Enabled?199:200,loadAround:t.requestAround,loadPre:t.requestOlder,loadPost:t.requestNewer,isLoading:t.state.isLoading,reachedStart:t.props.reachedStart,reachedEnd:t.props.reachedEnd||t.props.prevReachedEnd,fadeScrollbar:true,onScroll:t.onScroll,onSelectionChange:t.onSelectionChange,onEnd:t.onEnd,onFocusEnter:t.onFocusEnter,onItemTabWithin:t.onItemTabWithin,onFocusLeave:t.onFocusLeave,keyCommands:f,shouldIgnoreScrollKeys:t.props.shouldIgnoreScrollKeys,shouldIgnoreArrowKeys:t.props.shouldIgnoreArrowKeys,isFocusableItem:t.isMessage,unrelatedUpdateProps:m,activeItem:t.props.focusRequestedTs,initialActiveItem:b,useAriaApplicationMode:t.props.featureAriaApplicationMode,getPropsForItem:t.getPropsForItem,featureOfflineMode:t.props.featureOfflineMode,isOffline:t.props.isOffline,onItemKeyDown:t.onItemKeyDown})})}}]);return t}(Ue["a"]);Jr.displayName="MessageList";var Xr=function e(t,a){var r=a.channelId;return{focusLastVisibleMessageInChannel:Object(v["c"])(t),featureMessageNavigationShortcuts:Object(P["isFeatureEnabled"])(t,"feature_message_navigation_shortcuts"),featureContextualMessageShortcuts:Object(P["isFeatureEnabled"])(t,"feature_contextual_message_shortcuts"),contextualMessageShortcutsModalWasSeen:Object(Le["k"])(t,"contextual_message_shortcuts_modal_was_seen"),featureMessageKitInMessagePane:Object(P["isFeatureEnabled"])(t,"feature_message_kit_in_message_pane"),upToBrowseKbShortcutPref:Object(Le["k"])(t,"up_to_browse_kb_shortcut"),showingContextBar:!!Object(We["b"])(t,r),isIAP1Enabled:Object(h["e"])(t)}};var Zr=function e(t){return{setFocusLastVisibleMessageInChannel:function e(){return t(g["h"].apply(void 0,arguments))},setFocusMessageInput:function e(){return t(g["i"].apply(void 0,arguments))},openContextualMessageShortcutsModal:function e(){return t(Re["a"].apply(void 0,arguments))},setUserPrefByApi:function e(){return t(Fe["d"].apply(void 0,arguments))}}};Jr.propTypes=Lr;Jr.defaultProps=Ur;var $r=Object(Ve["a"])(Jr);var en=Object(i["connect"])(Xr,Zr)(function(e){var t=e.refToForward,a=De()(e,["refToForward"]);return n.a.createElement($r,Pe()({ref:t},a))});var tn=n.a.forwardRef(function(e,t){return n.a.createElement(en,Pe()({refToForward:t},e))});var an=tn;var rn=a(1997);var nn=a(1689);var sn=a(1236);var on=a(1183);var ln=a(883);var cn=a(1676);var un=a(2769);var dn=a(755);var pn=a(1672);var mn=a(1673);var hn=a(2005);var vn=a(208);var fn=a(2480);var bn=new et["b"]("messages");var gn={};var _n=function(e){be()(t,e);function t(){oe()(this,t);return de()(this,me()(t).apply(this,arguments))}ce()(t,[{key:"render",value:function e(){var t=Object(vn["a"])(this.props.firstTimestamp,{shortenMonth:true});var a=Object(vn["a"])(this.props.lastTimestamp,{shortenMonth:true});return n.a.createElement("div",{className:"p-archives_banner"},!this.props.isIAP1Enabled&&n.a.createElement("span",{className:"p-archives_banner__date_range"},bn.t("Viewing archives from {rangeStart} - {rangeEnd}",{rangeStart:t,rangeEnd:a})),n.a.createElement(ca["c"],{className:"p-archives_banner__jump",onClick:this.props.jumpToRecent,"data-qa":"archives_banner"},this.props.isIAP1Enabled&&n.a.createElement(St["b"],{type:"arrow-down-medium",inline:true,className:"p-message_pane__banner__icon"}),this.props.isIAP1Enabled?bn.t("Latest messages",{note:'Label on archive banner shown at bottom of message list when viewing history. Formerly "Jump to recent messages".',fallbackHash:"f7b7a48cdb86656094ebbba2551928988e3630d4"}):bn.t("Jump to recent messages"),!this.props.isIAP1Enabled&&n.a.createElement(St["a"],{type:"arrow_down"})))}}]);return t}(r["PureComponent"]);_n.displayName="ArchivesBanner";_n.defaultProps=gn;var yn=a(54);var On=a(1025);var kn=a(229);var En=a(775);var Cn=a(123);var Sn=a(32);var wn=a(4678);var jn=new et["b"]("messages");var In=3e3;var Tn=1e3;var An=80;var Nn={displayCount:0,since:null,do24hrTime:false,known:false,channelId:null,ghost:false,unreadPlacement:zr.VISIBLE,jumpToUnread:l["noop"],markMostRecentMsgRead:l["noop"],onHide:l["noop"],isIAP1Enabled:false,featureDangerouslyGuardIATranslations:false,featureKeyboardKeyTooltip:false};var Pn=function(e){be()(t,e);function t(e){var a;oe()(this,t);a=de()(this,me()(t).call(this,e));a.startFade=a.startFade.bind(ve()(a));a.onAnimationTick=a.onAnimationTick.bind(ve()(a));a.onAnimationEnd=a.onAnimationEnd.bind(ve()(a));a.onKeyDown=a.onKeyDown.bind(ve()(a));a.jumpOrMark=a.jumpOrMark.bind(ve()(a));a.markAsRead=a.markAsRead.bind(ve()(a));a.animation=null;a.state={hasUnreads:e.hasUnreads,displayCount:e.displayCount,since:e.since,unreadPlacement:e.unreadPlacement,opacity:1};return a}ce()(t,[{key:"UNSAFE_componentWillReceiveProps",value:function e(t){t.channelId!==this.props.channelId&&this.animation&&this.animation.cancel();if(this.state.hasUnreads&&!t.hasUnreads){var a=t.isIAP1Enabled?Tn:In;var r=t.ghost?a:0;this.startFade(r);return}this.setState(function(){return{hasUnreads:t.hasUnreads,displayCount:t.displayCount,since:t.since,unreadPlacement:t.unreadPlacement,opacity:1}})}},{key:"componentWillUnmount",value:function e(){this.animation&&this.animation.cancel()}},{key:"onAnimationEnd",value:function e(){var t=this;this.setState(function(){return{hasUnreads:false,opacity:1}},function(){t.props.onHide()})}},{key:"onAnimationTick",value:function e(t){var a=t.value,r=t.nextTick;if(!this.animation)return;this.setState(function(){return{opacity:a}});r()}},{key:"onKeyDown",value:function e(t){var a=[Cn["e"],Cn["l"]];Object(l["includes"])(a,t.keyCode)&&this.jumpOrMark(t)}},{key:"jumpOrMark",value:function e(t){this.state.unreadPlacement===zr.VISIBLE?this.markAsRead(t):this.props.jumpToUnread(t)}},{key:"makeJumpAriaLabel",value:function e(){if(!Object(Pr["a"])())return;var t=Object(Sn["isMac"])()?jn.t("Cmd"):jn.t("Ctrl");return jn.t("Jump to first unread message ({cmdButton} J)",{cmdButton:t,fallbackHash:"1eba140fdd9c6860a1730c408e3064aa417ca2a3"})}},{key:"makeJumpLabel",value:function e(){var t=this.props.featureKeyboardKeyTooltip;if(!Object(Pr["a"])())return jn.t("Jump");var a=Object(Sn["isMac"])()?jn.t("Cmd"):jn.t("Ctrl");return t?n.a.createElement(wn["a"],{isInline:true,mainKey:"J",modifiers:[a],title:jn.t("Jump")}):jn.rt("Jump <span>({cmdButton} + J)</span>",{cmdButton:a},function(e){var t=e.text,a=e.key;return n.a.createElement("span",{key:a,className:"normal"},t)})}},{key:"markAsRead",value:function e(t){t.stopPropagation();Object(p["b"])().action("UNREAD-BANNER","Mark "+this.props.channelId+" read");this.props.markMostRecentMsgRead({channelId:this.props.channelId,reason:je["MARKED_REASONS"].CLICKED});this.animation&&this.animation.cancel();this.onAnimationEnd()}},{key:"startFade",value:function e(t){this.animation=Object(En["a"])({delay:t,fromValue:1,toValue:0,duration:An,easing:"easeInQuad",onTick:this.onAnimationTick,onComplete:this.onAnimationEnd})}},{key:"renderClose",value:function e(){var t=this.props.featureKeyboardKeyTooltip;var a=_e()("p-message_pane__unread_banner__close",{"p-message_pane__unread_banner__close--detached":this.state.unreadPlacement!==zr.VISIBLE});return n.a.createElement(yn["c"],{tip:function e(){return t?n.a.createElement(wn["a"],{title:"Mark as read",mainKey:"esc"}):jn.t("Mark as read (esc)")},position:"bottom-right"},n.a.createElement(ca["c"],{className:a,onClick:this.markAsRead,"aria-label":jn.t("Mark as read")},n.a.createElement("span",{className:"p-message_pane__unread_banner__close__label"},jn.t("Mark as read")),n.a.createElement(St["a"],{type:"times_small",className:"p-message_pane__unread_banner__close__icon"})))}},{key:"renderJump",value:function e(){var t=this.state.unreadPlacement;if(t===zr.VISIBLE)return null;var a=t===zr.ABOVE?"arrow_up":"arrow_down";var r=this.makeJumpLabel();var i=this.makeJumpAriaLabel();return n.a.createElement(ca["c"],{"aria-label":i,onMouseDown:this.jumpOrMark,onKeyDown:this.onKeyDown,className:"p-message_pane__unread_banner__jump"},n.a.createElement(St["a"],{type:a,className:"p-message_pane__unread_banner__jump__arrow"}),r)}},{key:"render",value:function e(){var t=this.state,a=t.hasUnreads,r=t.since,i=t.displayCount,s=t.unreadPlacement;var o=this.props,l=o.do24hrTime,c=o.known,u=o.isIAP1Enabled,d=o.featureDangerouslyGuardIATranslations;if(!a||!r)return null;var p=Math.floor(parseFloat(r));if(!p)return null;var m=Object(vn["a"])(p,{excludeYear:true});var h=Object(kn["a"])(p,{do24hrTime:l});var v=c?"":"+";var f=i;!c&&f>10&&(f=10*Math.floor(f/10));var b=jn.t("{count, plural, =1 {#{certainty} new message} other {#{certainty} new messages}} since {time} on {date}",{certainty:v,count:f,time:h,date:m});u&&d&&(b=jn.t("{count, plural, =1 {#{certainty} new message} other {#{certainty} new messages}}",{certainty:v,count:f}));if(!f||1===f&&!c){b=jn.t("New messages since {time} on {date}",{time:h,date:m});u&&d&&(b=jn.t("New messages",{time:h,date:m}))}if(u&&d){if(s===zr.VISIBLE)return null;var g=s===zr.ABOVE?"arrow-up-medium":"arrow-down-medium";var _="";var y="";if(Object(Pr["a"])())if(Object(Sn["isMac"])()){_=jn.t("\u2318J");y=n.a.createElement(n.a.Fragment,null,n.a.createElement(On["a"],{label:"\u2318",tooltip:true,className:"margin_left_25"}),n.a.createElement(On["a"],{label:"J",tooltip:true}))}else{_=jn.t("Ctrl+J");y=n.a.createElement(n.a.Fragment,null,n.a.createElement(On["a"],{label:"Ctrl",tooltip:true,className:"margin_left_25"}),n.a.createElement(On["a"],{label:"J",tooltip:true}))}var O=n.a.createElement(n.a.Fragment,null,n.a.createElement("br",null),n.a.createElement(On["a"],{label:"esc",tooltip:true}));return n.a.createElement("div",{className:"p-message_pane__unread_banner p-message_pane__banner"},n.a.createElement("div",{className:"p-message_pane__unread_banner__banner"},n.a.createElement(yn["c"],{tip:jn.rt("Jump {jumpShortcutKeys}",{jumpShortcutKeys:y}),position:"bottom",delay:yn["a"]},n.a.createElement(ca["c"],{className:"p-message_pane__unread_banner__msg",onMouseDown:this.jumpOrMark,onKeyDown:this.jumpOrMark,style:{opacity:this.state.opacity},"aria-label":jn.t("Jump to first unread message ({jumpShortcut})",{jumpShortcut:_})},n.a.createElement(St["b"],{type:g,className:"p-message_pane__banner__icon"}),b)),n.a.createElement(yn["c"],{tip:jn.rt("Mark as read {markAsReadShorcutKeys}",{markAsReadShorcutKeys:O}),position:"bottom",delay:yn["a"]},n.a.createElement(ca["c"],{className:"p-message_pane__unread_banner__close_icon",onClick:this.markAsRead,"aria-label":jn.t("Mark as read (esc)")},n.a.createElement(St["b"],{type:"times-small"})))))}return n.a.createElement("div",{className:"p-message_pane__unread_banner p-message_pane__banner"},n.a.createElement("div",{className:"p-message_pane__unread_banner__banner"},this.renderJump(),n.a.createElement(ca["c"],{className:"p-message_pane__unread_banner__msg",onMouseDown:this.jumpOrMark,onKeyDown:this.jumpOrMark,style:{opacity:this.state.opacity}},u&&n.a.createElement(St["b"],{type:"arrow-up-medium",className:"p-message_pane__banner__icon"}),b)),this.renderClose())}}]);return t}(r["PureComponent"]);Pn.displayName="UnreadBanner";Pn.defaultProps=Nn;var Mn=function e(t,a){var r=a.since;if("0000000000.000000"===r){var n=Object(O["e"])(t,a.channelId);r=n.created}var i=Object(h["e"])(t);return{do24hrTime:Object(Le["k"])(t,"time24"),since:r,isIAP1Enabled:i,featureDangerouslyGuardIATranslations:i,featureKeyboardKeyTooltip:Object(P["isFeatureEnabled"])(t,"feature_keyboard_key_tooltip")}};var Dn=Object(i["connect"])(Mn)(Pn);var xn=a(30);var Rn=a(786);var Fn=a(1070);var Ln=a(323);var Un=a(250);var Bn=a(3753);var qn=new et["b"]("search");var Gn={searchInProductEducationDismiss:l["noop"],channelForCurrentInFilterQuery:null,openFromScrollSearchTipBanner:l["noop"],incrementScrollerSearchInProductEducationDismissalCount:l["noop"],recordLastDismissedScrollSearchTooltipTimestamp:l["noop"],refocusList:l["noop"],messageListRef:null,featureDangerouslyGuardIATranslations:false};var Hn=function(e){be()(t,e);function t(e){var a;oe()(this,t);a=de()(this,me()(t).call(this,e));Object(xn["a"])(ve()(a),["onClose","onClickBannerContent","onKeyPressedUp"]);a.searchTipBannerRef=n.a.createRef();return a}ce()(t,[{key:"componentDidMount",value:function e(){this.keyCommands=this.initKeyCommands()}},{key:"componentDidUpdate",value:function e(t){this.props.showSearchScrollbackTip&&!t.showSearchScrollbackTip&&this.props.clogger.track("SEARCH_SCROLL_TIP",{channel_id:this.props.channelForCurrentInFilterQuery&&this.props.channelForCurrentInFilterQuery.id})}},{key:"componentWillUnmount",value:function e(){this.keyCommands&&this.keyCommands.reset()}},{key:"onClickBannerContent",value:function e(t){t.stopPropagation();t.preventDefault();this.props.clogger.track("SEARCH_SCROLL_TIP_CLICK",{channel_id:this.props.channelForCurrentInFilterQuery&&this.props.channelForCurrentInFilterQuery.id});this.props.openFromScrollSearchTipBanner()}},{key:"onClose",value:function e(t){t.stopPropagation();t.preventDefault();this.props.clogger.track("SEARCH_SCROLL_TIP_DISMISS",{channel_id:this.props.channelForCurrentInFilterQuery&&this.props.channelForCurrentInFilterQuery.id});this.previousFocus&&document.activeElement!==this.previousFocus&&this.previousFocus.focus();this.props.recordLastDismissedScrollSearchTooltipTimestamp();this.props.incrementScrollerSearchInProductEducationDismissalCount();this.props.searchInProductEducationDismiss();this.props.refocusList()}},{key:"onEscape",value:function e(t){"Escape"===t.key&&this.onClose(t)}},{key:"onKeyPressedUp",value:function e(){if(this.props.showSearchScrollbackTip&&this.searchTipBannerRef.current&&!this.searchTipBannerRef.current.contains(document.activeElement)&&this.props.messageListRef.current.contains(document.activeElement)){this.previousFocus=document.activeElement;this.searchTipBannerRef.current.focus()}}},{key:"initKeyCommands",value:function e(){var t=new Un["a"];t.bindAll([{keys:["up"],handler:this.onKeyPressedUp}]);return t}},{key:"render",value:function e(){var t=this;var a=this.props,r=a.showSearchScrollbackTip,i=a.featureDangerouslyGuardIATranslations;return r&&n.a.createElement("div",{ref:this.searchTipBannerRef,className:"p-message_pane__search_tip_banner",role:"presentation",tabIndex:0,onKeyDown:function e(a){return t.onEscape(a)},"aria-label":qn.t("Tip: Try command F to search this channel.")},n.a.createElement(ca["c"],{className:"p-message_pane__search_tip_banner_content",onClick:this.onClickBannerContent,tabIndex:-1,role:"presentation"},i?qn.rt("<strong>Tip</strong>: Try {command} {f} to search this channel",{fallbackHash:"b1a1bd337266ac6343679251715d1a66915e5935",command:n.a.createElement(On["a"],{label:Object(Sn["isMac"])()?"Cmd":"Ctrl",slim:true}),f:n.a.createElement(On["a"],{label:"F",slim:true})}):qn.rt("<strong>Tip</strong>: Try {command}{f} to search this channel.",{fallbackHash:"b1a1bd337266ac6343679251715d1a66915e5935",command:n.a.createElement(On["a"],{label:Object(Sn["isMac"])()?"Cmd":"Ctrl",slim:true}),f:n.a.createElement(On["a"],{label:"F",slim:true})})),n.a.createElement(yn["c"],{tip:qn.t("Close",{fallbackHash:"1f863990d6ec5b308a2330f10e271f087ccf0bf7"}),position:"bottom"},n.a.createElement(ca["c"],{className:"p-message_pane__search_tip_banner_action","aria-label":qn.t("Close",{ns:"toast"}),onClick:this.onClose,onKeyDown:function e(a){return t.onEscape(a)}},n.a.createElement(St["b"],{inline:true,type:i?"times-small":"times"}))))}}]);return t}(r["PureComponent"]);Hn.displayName="SearchTipBanner";Hn.defaultProps=Gn;var Wn=function e(t){return{showSearchScrollbackTip:Object(f["searchInProductEducationShouldDisplay"])(t),clogger:Object(m["a"])({state:t}),channelForCurrentInFilterQuery:Object(Fn["a"])(t),appearedTime:Object(f["getSearchInProductEducationAppeared"])(t),featureDangerouslyGuardIATranslations:Object(h["e"])(t)}};var Vn={searchInProductEducationDismiss:f["searchInProductEducationDismiss"],openFromScrollSearchTipBanner:Rn["i"],incrementScrollerSearchInProductEducationDismissalCount:Ln["f"],recordLastDismissedScrollSearchTooltipTimestamp:Ln["m"],setFocusRequestedTs:g["j"]};var Kn=Object(i["connect"])(Wn,Vn)(Hn);var zn=a(1996);var Qn=a(505);var Yn=new et["b"]("messages");var Jn={isHighlightsBackButtonVisible:false};var Xn=function(e){be()(t,e);function t(e){var a;oe()(this,t);a=de()(this,me()(t).call(this,e));a.backToBriefings=a.backToBriefings.bind(ve()(a));return a}ce()(t,[{key:"backToBriefings",value:function e(){this.props.displayModelOrViewById({id:"Vall_unreads"})}},{key:"render",value:function e(){if(!this.props.isHighlightsBackButtonVisible)return null;return n.a.createElement(ca["d"],{type:"outline",size:"small",className:"p-message_pane__briefings_back_button",onClick:this.backToBriefings},n.a.createElement(St["b"],{className:"p-message_pane__briefings_back_button_icon",type:"arrow-left"}),Yn.t("Back to my highlights"))}}]);return t}(r["PureComponent"]);Xn.displayName="BriefingsBackButton";Xn.defaultProps=Jn;var Zn=function e(t){return{isHighlightsBackButtonVisible:Object(v["q"])(t)}};var $n=function e(t){return{displayModelOrViewById:function e(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=a.id;return t(Object(Qn["a"])({id:r}))}}};var ei=Object(i["connect"])(Zn,$n)(Xn);function ti(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function ai(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ti(Object(a),true).forEach(function(t){ie()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ti(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var ri=Object(K["a"])()?Object(dn["a"])(an,"MessagePane",{index:0}):an;var ni={logger:{error:c.a.noop},clogger:{track:c.a.noop},channelId:null,channelDisplayName:void 0,type:"channel",theme:"light",timestamps:[],reachedStart:false,reachedEnd:false,prevReachedEnd:false,oldest:void 0,latest:void 0,fetchHistory:c.a.noop,fetchSliHighlights:c.a.noop,callAppHomeOpenEventByChannelId:c.a.noop,lastReadTs:void 0,isGhostLastRead:false,unreadCount:0,unreadCountKnown:false,startTs:null,startTsOffset:null,highlightTs:null,highlightLazy:void 0,focusRequestedTs:void 0,rollups:null,isLoading:false,isLoadingOlder:false,setUnreadPoint:c.a.noop,markMostRecentMsgRead:c.a.noop,setUnreadLineVisibility:c.a.noop,clearHighlightTs:c.a.noop,jumpToTimestamp:c.a.noop,saveScrollmark:c.a.noop,isArchived:false,isLimited:false,isSlackbotIm:false,isAppIm:false,overlayVisible:false,channelSessionId:null,prevChannelSwitchTs:null,newxpOnboardingStep:null,firstUnreadTs:null,featureTinyspeck:false,featureClassicNav:false,featureAriaApplicationMode:false,teamId:null,enterpriseId:null,sessionId:null,msgTriggers:null,hasMessagePaneUnmounted:false,setMessagePaneHasUnmounted:c.a.noop,currentUserId:null,isAppSpaceOpen:false,isShared:false,isOrgShared:false,isYou:false,isMuted:false,hasUnreads:false,hasDraft:false,badgeCount:0,screenReaderOverride:void 0,windowLastBlurEvent:null,windowLastFocusEvent:null,makeMessageSummary:void 0,isScreenReaderEnabled:false,setFocusRequestedTs:c.a.noop,showThreadIfThreadable:c.a.noop,currentThreadKey:void 0,isThreadable:c.a.noop,unavailableTeamId:"",canPostInChannel:true,featureAnnounceOnly:false,featureSonicInputs:false,searchInProductEducationReset:c.a.noop,bootInFlight:false,bootType:null,isFileExpanding:false,featureOfflineMode:false,isOffline:false,userAttentionIsOnChat:false,composerVisible:false,clientTheme:"light",impressionLoggingWebGroup:"control",latestMessageTsWithReactions:null,isIAP1Enabled:false,showSearchScrollbackTip:false};var ii=function(e){be()(t,e);function t(e){var a;oe()(this,t);a=de()(this,me()(t).call(this,e));a.list=null;a.onFocusEnter=a.onFocusEnter.bind(ve()(a));a.onFocusLeave=a.onFocusLeave.bind(ve()(a));a.onVisibleRowsChanged=a.onVisibleRowsChanged.bind(ve()(a));a.onUnreadBannerHide=a.onUnreadBannerHide.bind(ve()(a));a.setListRef=a.setListRef.bind(ve()(a));a.shouldIgnoreScrollKeys=a.shouldIgnoreScrollKeys.bind(ve()(a));a.shouldIgnoreArrowKeys=a.shouldIgnoreArrowKeys.bind(ve()(a));a.requestHistory=a.requestHistory.bind(ve()(a));a.jumpToMostRecent=a.jumpToMostRecent.bind(ve()(a));a.jumpToUnread=a.jumpToUnread.bind(ve()(a));a.focus=a.focus.bind(ve()(a));a.renderSearchScrollbackTip=a.renderSearchScrollbackTip.bind(ve()(a));a.messageListRef=n.a.createRef();a.state={showingArchiveBanner:false,showingUnreadBanner:false,unreadPlacement:zr.VISIBLE};a.historyRateLimiter=new hn["a"];a.prqMetrics={usableVisible:{}};a.sendSessionFrameStats=a.sendSessionFrameStats.bind(ve()(a));a.recordSessionFrameStats=a.recordSessionFrameStats.bind(ve()(a));a.attachMessageImpressionsLogger(e.teamId,e.impressionLoggingWebGroup,e.clogger);return a}ce()(t,[{key:"componentDidMount",value:function e(){var t=this;var a=!!this.props.timestamps.length;var r=!!(this.props.unreadCount||this.props.unreadCountKnown);a&&r&&("channel"===this.props.type||"private"===this.props.type)&&this.props.fetchSliHighlights({channelId:this.props.channelId,timestamps:c.a.filter(this.props.timestamps,function(e){return e>t.props.lastReadTs}),lastReadTs:this.props.lastReadTs,prevChannelSwitchTs:this.props.prevChannelSwitchTs});this.props.isAppIm&&this.logAppHomeRequest(this.props.channelId,"messages");this.recordAndTrackTimeToVisible();document.hasFocus()?this.recordSessionFrameStats():window.addEventListener("focus",this.recordSessionFrameStats)}},{key:"UNSAFE_componentWillReceiveProps",value:function e(t){var a=this;var r=this.props.channelId;this.setState(function(e){var r=a.getUnreadLinePlacement();if(!t.isLoading&&!c.a.isEmpty(t.timestamps)){var n=false===t.reachedEnd&&!t.prevReachedEnd;if(n!==e.showingArchiveBanner)return ai({},e,{unreadPlacement:r,showingArchiveBanner:n})}if(e.unreadPlacement!==r)return ai({},e,{unreadPlacement:r});return e});this.setState(function(e){var t=a.getUnreadBannerDisplayCount();var r=t>0;return ai({},e,{showingUnreadBanner:r})});this.setState(function(e){var t=a.getUnreadBannerDisplayCount();var r=t>0;return ai({},e,{showingUnreadBanner:r})});if(r&&t.channelId!==r){try{this.messageImpressionLogger.flushAllVisibleMessages()}catch(e){this.props.logger.error("message_pane_unable_log_message_impressions","MessagePane unable to log message impressions",e)}var n=this.list&&this.list.getScrollmark();this.props.saveScrollmark({channelId:r,scrollmark:n});this.historyRateLimiter.reset();this.recordAndTrackTimeToUsable(we["TimingStatus"].ABANDONED);this.state.caughtError&&this.setState(function(){return{caughtError:false}});t.isAppIm&&this.logAppHomeRequest(t.channelId,"messages")}t.channelId===r&&t.isAppIm!==this.props.isAppIm&&t.isAppIm&&this.logAppHomeRequest(t.channelId,"messages");var i=this.props.timestamps.length!==t.timestamps.length;var s=this.props.unreadCount!==t.unreadCount||this.props.unreadCountKnown!==t.unreadCountKnown;!t.channelId||!i&&!s||"channel"!==t.type&&"private"!==t.type||this.props.fetchSliHighlights({channelId:t.channelId,timestamps:c.a.filter(t.timestamps,function(e){return e>t.lastReadTs}),lastReadTs:t.lastReadTs,prevChannelSwitchTs:this.props.prevChannelSwitchTs});t.teamId!==this.props.teamId&&this.attachMessageImpressionsLogger(t.teamId,t.impressionLoggingWebGroup,t.clogger)}},{key:"componentDidUpdate",value:function e(){if(this.list){var t=this.isUnreadLineVisible();this.props.setUnreadLineVisibility(t)}(true===this.props.reachedStart&&true===this.props.reachedEnd||this.props.timestamps.length>0)&&this.recordAndTrackTimeToUsable(we["TimingStatus"].COMPLETED)}},{key:"componentDidCatch",value:function e(t){this.setState(function(){return{caughtError:true}});this.props.logger.error("MessagePane componentDidCatch:",t,"message_pane_componentDidCatch")}},{key:"componentWillUnmount",value:function e(){if(Object(K["a"])()){var t=this.list&&this.list.getScrollmark();var a=this.props.channelId;this.props.saveScrollmark({channelId:a,scrollmark:t})}this.sendSessionFrameStats();window.removeEventListener("focus",this.recordSessionFrameStats);this.props.setMessagePaneHasUnmounted(true);try{this.messageImpressionLogger.flushAllVisibleMessages()}catch(e){this.props.logger.error("message_pane_unable_log_message_impressions","MessagePane unable to log message impressions",e)}}},{key:"onFocusEnter",value:function e(t){this.hasFocus=true;this.hasKeyboardFocus=t.isKeyboardFocus}},{key:"onFocusLeave",value:function e(){this.hasFocus=false;this.hasKeyboardFocus=false}},{key:"onUnreadBannerHide",value:function e(){this.setState(function(){return{showingUnreadBanner:false}})}},{key:"onVisibleRowsChanged",value:function e(t,a){var r=this;if(!this.list)return;var n=this.getUnreadLinePlacement();this.setState(function(){return{unreadPlacement:n}});var i=this.isUnreadLineVisible();this.props.setUnreadLineVisibility(i);try{this.messageImpressionLogger.setCurrentlyVisibleMessages(a.filter(function(e){return"message"===e.type}).map(function(e){return{ts:e.ts,channel:r.props.channelId}}))}catch(e){this.props.logger.error("message_pane_unable_log_message_impressions","MessagePane unable to log message impressions",e)}this.list.isAtBottom()&&this.props.searchInProductEducationReset()}},{key:"getUnreadBannerDisplayCount",value:function e(){var t=this.props,a=t.timestamps,r=t.lastReadTs,n=t.unreadCount,i=t.reachedEnd;return a.length&&i?a.filter(function(e){return e>r}).length:n}},{key:"getUnreadLinePlacement",value:function e(){if(1===this.props.unreadCount&&!this.props.unreadCountKnown||!this.list)return zr.VISIBLE;return this.list.getUnreadLinePlacement()}},{key:"setListRef",value:function e(t){this.list=t}},{key:"attachMessageImpressionsLogger",value:function e(t,a,r){if(this.messageImpressionLogger)try{this.messageImpressionLogger.flushAllVisibleMessages()}catch(e){this.props.logger.error("message_pane_unable_log_message_impressions","MessagePane unable to log message impressions",e)}this.messageImpressionLogger=new pn["a"]({teamId:t,experimentGroup:a,clogger:r,messageViewLocation:mn["a"].CHANNEL})}},{key:"blur",value:function e(){this.list.blur()}},{key:"focus",value:function e(){this.list.focus()}},{key:"isUnreadLineVisible",value:function e(){var t=this.props,a=t.isGhostLastRead,r=t.unreadCount,n=t.reachedEnd,i=t.isLoading;if(i)return false;if(!a&&this.list.getUnreadLinePlacement()===zr.VISIBLE)return true;if(!r&&n&&this.list.isAtBottom())return true;return false}},{key:"jumpToMostRecent",value:function e(){this.props.jumpToTimestamp({ts:null})}},{key:"jumpToUnread",value:function e(t){this.list.jumpToUnread(t)}},{key:"logAppHomeRequest",value:function e(t,a){Object(K["a"])()||this.props.callAppHomeOpenEventByChannelId({channelId:t,appHomeSection:a})}},{key:"recordAndTrackTimeToUsable",value:function e(t){if(Object(K["a"])()&&this.props.bootInFlight){this.staleTimestamps||(this.staleTimestamps=this.props.timestamps);return}if(0===Object.keys(this.prqMetrics.usableVisible).length)return;if(0!==this.props.windowLastBlurEvent){this.prqMetrics.usableVisible={};return}if(Object(K["a"])()){if(!Object(Ee["shouldLogTTUMetrics"])(Object(o["e"])()))return;Object(o["a"])(Object(Ee["setShouldLogTTUMetrics"])(false))}var a=this.props.telemeter.measure("navigationStart","prq_time_to_usable",null,{return_unprocessed:true}).unprocessed;Object(K["a"])()&&this.props.telemeter.store("prq_time_to_usable_"+this.props.bootType,a);this.props.isIAP1Enabled&&this.props.telemeter.store("prq_time_to_usable_iap1",a);var r=!!this.staleTimestamps&&!c.a.isEqual(this.props.timestamps.sort(),this.staleTimestamps.sort());r&&this.props.telemeter.count("prq_time_to_usable_required_sync");Object(Ce["i"])(a,"APP_ICON",true,this.props.teamId,this.props.enterpriseId,this.props.sessionId,this.props.currentUserId,t);this.prqMetrics.usableVisible={};this.props.logger.info("PERF","Logged time to usable (TTU): "+a)}},{key:"recordAndTrackTimeToVisible",value:function e(){if(this.props.hasMessagePaneUnmounted&&!this.props.bootInFlight)return;if(0!==this.props.windowLastBlurEvent){this.prqMetrics.usableVisible={};return}if(Object(K["a"])()){if(!Object(Ee["shouldLogTTVMetrics"])(Object(o["e"])()))return;Object(o["a"])(Object(Ee["setShouldLogTTVMetrics"])(false))}var t=this.props.telemeter.measure("navigationStart","prq_time_to_visible",null,{return_unprocessed:true}).unprocessed;Object(K["a"])()&&this.props.telemeter.store("prq_time_to_visible_"+this.props.bootType,t);this.prqMetrics.usableVisible=ie()({},this.props.channelId,t);Object(Ce["j"])(t,"APP_ICON",false,this.props.teamId,this.props.enterpriseId,this.props.sessionId,this.props.currentUserId);this.props.setMessagePaneHasUnmounted(true);this.props.logger.info("PERF","Logged time to visible (TTV): "+t)}},{key:"recordSessionFrameStats",value:function e(){window.removeEventListener("focus",this.recordSessionFrameStats);window.addEventListener("blur",this.sendSessionFrameStats);window.addEventListener("beforeunload",this.sendSessionFrameStats);Object(Ce["e"])(this.props.teamId,this.props.enterpriseId,we["EventId"].PRQ_SESSION_FRAME_STATS)&&Object(Se["g"])()}},{key:"requestHistory",value:function e(t){var a=t.oldest,r=t.latest;var n=this.props,i=n.channelId,s=n.type,o=n.reachedStart,l=n.reachedEnd,c=n.logger;if(o&&l)return false;var u=a;var d=r;if(d&&o){if(!u)return false;d=null}if(u&&l){if(!d)return false;u=null}if(this.historyRateLimiter.isRequestPending({oldest:a,latest:r}))return false;if(this.historyRateLimiter.shouldPreventHistoryRequest({oldest:a,latest:r})){if(this.beaconedRateLimit)c.warn("MESSAGE_PANE","message_pane_request_rate_limited "+i+" "+a+"_"+r);else{c.error({channelId:i,latestTs:d,oldestTs:u},"message_pane_request_rate_limited");this.beaconedRateLimit=true}return false}this.beaconedRateLimit=false;var p="message-pane/requestHistory";var m=this.props.fetchHistory({channelId:i,type:s,oldest:u,latest:d,reason:p});m&&this.historyRateLimiter.logHistoryRequest({oldest:u,latest:d,promise:m});return m}},{key:"sendSessionFrameStats",value:function e(){window.addEventListener("focus",this.recordSessionFrameStats);window.removeEventListener("blur",this.sendSessionFrameStats);window.removeEventListener("beforeunload",this.sendSessionFrameStats);if(!Object(Se["e"])())return;Object(Se["i"])();var t=Object(Se["a"])();if(0===t.durationMs)return;Object(Ce["h"])(t.durationMs,t.histFrameRenderTime,t.histJankyWindows,this.props.teamId,this.props.enterpriseId,this.props.sessionId,this.props.currentUserId)}},{key:"shouldIgnoreArrowKeys",value:function e(t){var a=t.target;var r=document.querySelector(".client_channels_list_container");var n=document.getElementById("col_flex");var i=r&&r.contains(a);var s=n&&n.contains(a);var o=this.props.featureSonicInputs?this.props.userAttentionIsOnChat:Object(Te["f"])();return!o||s||i||Object(ln["b"])()||!this.hasKeyboardFocus}},{key:"shouldIgnoreScrollKeys",value:function e(t){var a=t.target;var r=a===document.body;var n=this.hasFocus;var i=Object(Te["e"])();var s=this.props,o=s.channelId,l=s.featureSonicInputs;if(l){var c=Object(Ie["a"])({viewContext:je["MESSAGE_CONTAINERS"].MESSAGE_PANE,channelId:o});i=!!c&&c.hasFocus()}return!(r||n||i)}},{key:"renderArchivesBanner",value:function e(){if(!this.state.showingArchiveBanner)return null;var t=this.props,a=t.timestamps,r=t.isIAP1Enabled;if(c.a.isEmpty(a))return null;return n.a.createElement(_n,{firstTimestamp:c.a.first(a),lastTimestamp:c.a.last(a),jumpToRecent:this.jumpToMostRecent,isIAP1Enabled:r})}},{key:"renderDegradedBanner",value:function e(){var t=this.props,a=t.newxpOnboardingStep,r=t.overlayVisible;if(r)return null;if(a)return null;return n.a.createElement(Ae["a"],null,n.a.createElement(zn["a"],null))}},{key:"renderMessagePaneBannerContainer",value:function e(){var t=this.props,a=t.newxpOnboardingStep,r=t.overlayVisible;if(r)return null;if(a)return null;return n.a.createElement(rn["a"],null)}},{key:"renderSearchScrollbackTip",value:function e(){var t=this;return n.a.createElement(Kn,{messageListRef:this.messageListRef,refocusList:function e(){return t.focus()}})}},{key:"renderUnreadBanner",value:function e(){var t=this.props,a=t.unreadCount,r=t.unreadCountKnown,i=t.lastReadTs,s=t.channelId,o=t.isGhostLastRead,l=t.markMostRecentMsgRead,c=t.newxpOnboardingStep,u=t.overlayVisible,d=t.isArchived,p=t.showSearchScrollbackTip;if(u)return null;if(c&&c!==nr.CANCELLED&&c!==nr.COMPLETE)return null;if(d)return null;if(p)return null;return n.a.createElement(Dn,{channelId:s,hasUnreads:a>0,displayCount:this.getUnreadBannerDisplayCount(),known:r,since:i,ghost:o,unreadPlacement:this.state.unreadPlacement,jumpToUnread:this.jumpToUnread,markMostRecentMsgRead:l,onHide:this.onUnreadBannerHide})}},{key:"render",value:function e(){if(this.props.isAppSpaceOpen)return null;if(this.state.caughtError)return null;if(this.props.newxpOnboardingStep===nr.START)return n.a.createElement(sr,{step:this.props.newxpOnboardingStep});if(this.props.unavailableTeamId)return n.a.createElement(un["a"],{channelId:this.props.channelId,unavailableTeamId:this.props.unavailableTeamId});if(!this.props.channelId)return null;var t=this.props,a=t.type,r=t.channelDisplayName,i=t.isShared,s=t.isOrgShared,o=t.isYou,l=t.isMuted,c=t.hasUnreads,u=t.hasDraft,d=t.isArchived,p=t.unreadCount,m=t.badgeCount,h=t.canPostInChannel,v=t.featureAnnounceOnly,f=t.isFileExpanding,b=t.userAttentionIsOnChat,g=t.composerVisible,_=t.clientTheme,y=t.latestMessageTsWithReactions,O=t.isIAP1Enabled,k=t.showSearchScrollbackTip;var E=Oe.a.msie||Oe.a.msedge;var C=O?(!c||this.state.unreadPlacement===zr.VISIBLE)&&!this.props.overlayVisible&&!E&&!k:!this.props.overlayVisible&&!E;var S=_e()("p-message_pane",{"p-message_pane--ie":E,"p-message_pane--classic-nav":Object(K["a"])()&&this.props.featureClassicNav});var w=Object(cn["a"])({type:a,displayName:r,isShared:i,isOrgShared:s,isYou:o,isMuted:l,hasUnreads:c,hasDraft:u,isArchived:d,unreadCount:p,badgeCount:m,canPost:h,featureAnnounceOnly:v,isSelected:false,userActive:false,isTyping:false});var j=Object(Q["makeIdForThreadList"])(this.props.currentThreadKey);var I=n.a.createElement("div",{ref:this.messageListRef,className:S,"data-qa":"message_pane"},n.a.createElement("div",{className:"p-message_pane__top_banners"},n.a.createElement(nn["a"],null),this.renderDegradedBanner(),n.a.createElement(ei,null),this.renderUnreadBanner(),this.renderSearchScrollbackTip()),this.renderMessagePaneBannerContainer(),n.a.createElement(ri,{ref:this.setListRef,channelId:this.props.channelId,"aria-label":w,timestamps:this.props.timestamps,startTs:this.props.startTs,startTsOffset:this.props.startTsOffset,shouldIgnoreScrollKeys:this.shouldIgnoreScrollKeys,shouldIgnoreArrowKeys:this.shouldIgnoreArrowKeys,highlightTs:this.props.highlightTs,highlightLazy:this.props.highlightLazy,focusRequestedTs:this.props.focusRequestedTs,requestHistory:this.requestHistory,lastReadTs:this.props.lastReadTs,isGhostLastRead:this.props.isGhostLastRead,rollups:this.props.rollups,isLoading:this.props.isLoading,isLoadingOlder:this.props.isLoadingOlder,setUnreadPoint:this.props.setUnreadPoint,reachedStart:this.props.reachedStart,reachedEnd:this.props.reachedEnd,prevReachedEnd:this.props.prevReachedEnd,oldest:this.props.oldest,latest:this.props.latest,onVisibleRowsChanged:this.onVisibleRowsChanged,doneHighlighting:this.props.clearHighlightTs,channelType:this.props.type,isLimited:this.props.isLimited,isSlackbotIm:this.props.isSlackbotIm,useStickyDayDividers:C,theme:this.props.theme,channelSessionId:this.props.channelSessionId,firstUnreadTs:this.props.firstUnreadTs,messageContainerType:je["MESSAGE_CONTAINERS"].MESSAGE_PANE,featureTinyspeck:this.props.featureTinyspeck,featureAriaApplicationMode:this.props.featureAriaApplicationMode,teamId:this.props.teamId,enterpriseId:this.props.enterpriseId,sessionId:this.props.sessionId,msgTriggers:this.props.msgTriggers,windowLastFocusEvent:this.props.windowLastFocusEvent,currentUserId:this.props.currentUserId,screenReaderOverride:this.props.screenReaderOverride,jumpToTimestamp:this.props.jumpToTimestamp,makeMessageSummary:this.props.makeMessageSummary,isScreenReaderEnabled:this.props.isScreenReaderEnabled,onFocusEnter:this.onFocusEnter,onFocusLeave:this.onFocusLeave,isBannerVisible:this.state.showingUnreadBanner,setFocusRequestedTs:this.props.setFocusRequestedTs,showThreadIfThreadable:this.props.showThreadIfThreadable,currentThreadKey:this.props.currentThreadKey,isThreadable:this.props.isThreadable,threadListId:j,isFileExpanding:f,featureOfflineMode:this.props.featureOfflineMode,isOffline:this.props.isOffline,userAttentionIsOnChat:b,composerVisible:g,clientTheme:_,latestMessageTsWithReactions:y}),this.renderArchivesBanner());if(Object(K["a"])())return I;return n.a.createElement(sn["a"],{component:this,order:0},I)}}]);return t}(r["PureComponent"]);ii.displayName="BaseMessagePane";ii.defaultProps=ni;var si=Object(on["a"])(ii,{updateStore:function e(t){var a=t.instance,r=t.dispatch;var n=a.list&&a.list.getScrollmark();r(E({channelId:a.props.channelId,scrollmark:n}))}});var oi=a(1448);var li=Object(u["createSelectorCreator"])(u["defaultMemoize"],J["a"]);var ci=20;var ui=li([function(e){return e},function(e,t){return t},function(e,t,a){return a}],function(e,t,a){var r=e.timestamps,n=e.start,i=e.end,s=e.reachedStart,o=e.reachedEnd,l=e.prevReachedEnd;if(!o&&!l&&r&&r.length-c.a.sortedLastIndex(r,a)<ci)return{messages:[],rollups:{},reachedStart:false,reachedEnd:false};var u=c.a.reject(c.a.map(r,function(e){return t[e]}),W["isHidden"]);var d=Object(oi["a"])(u),p=d.rollups,m=d.messages;return{messages:m,timestamps:c.a.map(m,function(e){return e.ts}),rollups:p,reachedStart:s,reachedEnd:o,prevReachedEnd:l,oldest:n,latest:i}});function di(e){var t=e.state,a=e.channelId,r=e.timestamps,n=e.rollups,i=e.lastReadTs;return c.a.find(r,function(e){var r=Object(T["a"])(t,a,e);var s=Object(P["getCurrentUserId"])(t);if(!r)return false;if(n[e]){var o=c.a.values(n[e]);var l=c.a.map(o,"ts");var u=c.a.map(l,function(e){return Object(T["a"])(t,a,e)});return c.a.some(u,function(e){return Object(W["isMessageUnread"])(e,i,s)})}return Object(W["isMessageUnread"])(r,i,s)})}function pi(e){var t=e.state,a=e.channel,r=e.rolledMessages;var n=Object(P["isFeatureEnabled"])(t,"feature_reactji_awareness_v2");var i=Object(H["d"])(t);var s=z({featureReactjiAwarenessV2:n,inProductCoachmark:i,channel:a});if(!s)return null;var o=c.a.findLast(r,function(e){var a=Object(V["b"])(e);var r=Object(G["getReactionsForKey"])(t,a);if(!r)return false;return!!r.length});return o?o.ts:null}var mi=function e(t,a){var r=a.channelId||Object(D["a"])(t);var n=Object(O["e"])(t,r);var i=Object(j["getGroupForUser"])(t,"context_bar");var s=Object(P["isFeatureEnabled"])(t,"feature_tinyspeck");var o=Object(P["isFeatureEnabled"])(t,"feature_classic_nav");var l=Object(P["isFeatureEnabled"])(t,"feature_aria_application_mode");var u=Object(P["getCurrentUserId"])(t);var b=Object(X["b"])(t);var g=Object(X["a"])(t);var _=Object(v["b"])(t);var y=Object(M["getChannelTriggers"])(t);var E=Object(v["g"])(t);var S=Object(Z["getWindowLastBlurEvent"])(t);var I=Object(Z["getWindowLastFocusEvent"])(t);var x=Object(Q["getCurrentThreadKey"])(t);var R=Object(d["c"])({state:t});var F=Object(p["a"])({state:t});var G=Object(m["a"])({state:t});var H=Object(L["isBootInFlight"])(t);var W=Object(Z["getBootType"])(t);var V=Object(j["getGroupForUser"])(t,"impression_logging_web");var K=Object(h["e"])(t);if(!n)return{featureTinyspeck:s,featureClassicNav:o,impressionLoggingWebGroup:V,currentUserId:u,teamId:b,enterpriseId:g,sessionId:_,msgTriggers:y,hasMessagePaneUnmounted:E,windowLastBlurEvent:S,windowLastFocusEvent:I,telemeter:R,logger:F,clogger:G,bootInFlight:H,bootType:W,isIAP1Enabled:K};var z=Object(N["isChannelLoading"])(t,r);var J=Object(N["isChannelLoadingOlder"])(t,r);var ee=Object(k["getLastReadTs"])(n);var ne=false;var ie=Object(v["f"])(t);if(ie&&ie!==ee){ee=ie;ne=true}var se=Object(v["j"])(t);var oe=Object(v["k"])(t);var le=Object(v["i"])(t);var ce=Object(v["h"])(t);var ue=Object(k["getUnreadCount"])(n);var de=Object(w["getTimestampsByChannelId"])(t,r,ee);var pe=de&&de.reachedEnd;var me=Object(v["b"])(t);var he=Object(v["n"])(t);var ve=Object(A["a"])(t);var fe=Object(w["getPotentiallyOutdatedTimestamps"])(t,r,se);var be=Object(T["d"])(t,r,fe.timestamps);var ge=ui(fe,be,se),_e=ge.timestamps,ye=ge.messages,Oe=ge.rollups,ke=ge.reachedStart,Ee=ge.reachedEnd,Ce=ge.prevReachedEnd,Se=ge.oldest,we=ge.latest;(Object(k["isPublicChannel"])(n)&&!Object(k["isMemberOfChannel"])(n)||Object(k["isArchived"])(n))&&(ee=c.a.last(_e));var je=di({state:t,channelId:r,timestamps:_e,rollups:Oe,lastReadTs:ee});var Ie=Object($["isScreenReaderEnabled"])(t);var Te=Object(v["p"])(t)&&te(t,r);var Ae;Object(k["isUnavailable"])(t,n)&&(Ae=Object(k["getUnavailableTeamId"])(t,n));var Ne=Object(re["isAnyFileExpanding"])(t);var Pe=Object(B["e"])(t);var Me=pi({state:t,channel:n,rolledMessages:ye});return{isFileExpanding:Ne,channelId:r,type:Object(k["getChannelType"])(n),channelDisplayName:Object(k["getDisplayNameForChannel"])(t,n,{publicChannelIncludeHashSign:false,imIncludeAtSign:false}),timestamps:_e,reachedStart:ke,reachedEnd:Ee,prevReachedEnd:Ce,oldest:Se,latest:we,lastReadTs:ee,isGhostLastRead:ne,unreadCount:ue,unreadCountKnown:pe,startTs:se,startTsOffset:oe,highlightTs:le,highlightLazy:ce,focusRequestedTs:Object(v["e"])(t),rollups:Oe,isAppSpaceOpen:Te,isArchived:Object(k["isArchived"])(n),isLoading:z,isLoadingOlder:J,isLimited:Object(w["getIsLimited"])(t,r),isSlackbotIm:Object(k["isSlackbot"])(n),isAppIm:Object(k["isImWithApp"])(t,r),overlayVisible:c.a.isBoolean(a.overlayVisible)?a.overlayVisible:Object(v["r"])(t),channelSessionId:me,prevChannelSwitchTs:he,theme:ve,newxpOnboardingStep:Object(v["l"])(t),firstUnreadTs:je,featureTinyspeck:s,featureClassicNav:o,featureAriaApplicationMode:l,teamId:b,enterpriseId:g,sessionId:_,msgTriggers:y,hasMessagePaneUnmounted:E,windowLastBlurEvent:S,windowLastFocusEvent:I,currentUserId:u,badgeCount:Object(O["d"])(t,n),isShared:Object(k["isExternallySharedChannel"])(n),isOrgShared:Object(k["isOrgShared"])(n),isYou:Object(k["isYou"])(t,n),isMuted:Object(C["isChannelMutedById"])(t,r),hasUnreads:!!Object(k["getUnreadCount"])(n),hasDraft:Object(k["getHasDraft"])(t,r),isScreenReaderEnabled:Ie,currentThreadKey:x,unavailableTeamId:Ae,canPostInChannel:Object(Y["r"])(t,r),featureAnnounceOnly:Object(P["isFeatureEnabled"])(t,"feature_announce_only"),featureSonicInputs:Object(P["isFeatureEnabled"])(t,"feature_sonic_inputs"),telemeter:R,logger:F,clogger:G,bootInFlight:H,bootType:W,featureOfflineMode:Object(P["isFeatureEnabled"])(t,"feature_offline_mode"),isOffline:!Object(U["c"])(t),userAttentionIsOnChat:Pe,contextBarExperimentGroup:i,composerVisible:Object(ae["isComposerVisible"])(t),clientTheme:Object(q["getClientTheme"])(t),impressionLoggingWebGroup:V,latestMessageTsWithReactions:Me,isIAP1Enabled:K,showSearchScrollbackTip:Object(f["searchInProductEducationShouldDisplay"])(t)}};function hi(e){return function(t,a){var r=Object(v["s"])(a());if(r!==e){Object(p["a"])({getState:a}).info("CHECK-UNREADS","unreadLineVisible updated: "+r+" -> "+e);t(Object(g["p"])(e))}}}var vi=function e(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return function(e,t){return W["isThreadable"].apply(void 0,[t()].concat(a))}};var fi={fetchHistory:b["a"],fetchSliHighlights:S["fetchSliHighlights"],setUnreadPoint:I["setUnreadPoint"],markMostRecentMsgRead:I["markMostRecentMsgRead"],setUnreadLineVisibility:hi,clearHighlightTs:g["a"],jumpToTimestamp:g["c"],saveScrollmark:E,setMessagePaneHasUnmounted:g["m"],makeMessageSummary:R["a"],setFocusRequestedTs:g["j"],callAppHomeOpenEventByChannelId:F["b"],isThreadable:vi,showThreadIfThreadable:x["showThreadIfThreadable"],searchInProductEducationReset:f["searchInProductEducationReset"]};var bi=Object(i["connect"])(mi,fi)(si);var gi=bi;var _i=a(197);var yi=function e(t,a){if(!t)throw new Error("mountMessagePane must be called with a teamId parameter");Object(s["a"])(n.a.createElement(i["Provider"],{store:Object(o["f"])(t)},n.a.createElement(_i["a"],null,n.a.createElement(gi,null))),a)};var Oi=yi;var ki=a(52);Object(ki["a"])("interop.mountMessagePane",Oi)},function(e,t,a){"use strict";a.r(t);var r=a(52);var n=a(1375);var i=a(304);function s(e){var t=TS.redux.dispatch(Object(i["getOrFetchMemberCounts"])({channelId:e}));if(t.promise)return t.promise.then(function(){return Object(i["getCachedMemberCounts"])(TS.redux.getState(),e).counts});return Promise.resolve(t.counts)}Object(r["a"])("interop.memberCounts",{getOrFetchMemberCounts:function e(t){return TS.redux.dispatch(Object(i["getOrFetchMemberCounts"])({channelId:t}))},promiseToGetMemberCounts:s,fetchMemberCountsForTeam:function e(){return TS.redux.dispatch(Object(n["b"])())}})},function(e,t,a){"use strict";a.r(t);var r=a(343);var n=a(52);var i=a(1344);function s(e){return function(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return e.apply(void 0,[TS.redux.getState()].concat(a))}}function o(e){var t=Object(i["a"])(e);if(!t.is_known){t.is_known=false;Object.defineProperty(t,"is_member",{get:function e(){throw new Error("Value for is_member is not known; check is_known before accessing this field")}})}return t}Object(n["a"])("interop.membership",{ensureChannelMembershipIsKnownForUsers:s(r["ensureChannelMembershipIsKnownForUsers"]),getCachedChannelMembershipInfoForUser:function e(){for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];var i=r["getCachedChannelMembershipInfoForUser"].apply(void 0,[TS.redux.getState()].concat(a));return o(i)}})},function(e,t,a){"use strict";a.r(t);var r=a(52);var n=a(202);Object(r["a"])("interop.message_input_registry",{getInputProxy:n["a"]})},function(e,t,a){"use strict";a.r(t);var r=a(2);var n=a.n(r);var i=a(52);var s=a(202);var o=a(22);Object(i["a"])("interop.message_pane_input",{focus:function e(t){var a=Object(s["a"])({viewContext:o["MESSAGE_CONTAINERS"].MESSAGE_PANE,channelId:t});if(!a)return;a.focus()},focusWithoutSettingCursor:function e(t){var a=Object(s["a"])({viewContext:o["MESSAGE_CONTAINERS"].MESSAGE_PANE,channelId:t});if(!a)return;a.focusWithoutSettingCursor()},hasFocus:function e(t){var a=Object(s["a"])({viewContext:o["MESSAGE_CONTAINERS"].MESSAGE_PANE,channelId:t});return!!a&&a.hasFocus()},isEnabled:function e(t){var a=Object(s["a"])({viewContext:o["MESSAGE_CONTAINERS"].MESSAGE_PANE,channelId:t});return!!a&&a.isEnabled()},value:function e(t,a){var n=Object(s["a"])({viewContext:o["MESSAGE_CONTAINERS"].MESSAGE_PANE,channelId:t});if(!n)return"";if(!Object(r["isUndefined"])(a)){n.setText(a);return""}return n.getText(a)},displayValue:function e(t){var a=Object(s["a"])({viewContext:o["MESSAGE_CONTAINERS"].MESSAGE_PANE,channelId:t});return a?a.getDisplayValue():""},setPlaceholder:function e(t,a){var r=Object(s["a"])({viewContext:o["MESSAGE_CONTAINERS"].MESSAGE_PANE,channelId:t});if(!r)return;r.setPlaceholder(a)},insertContentsAtCursor:function e(t,a){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"user";var i=Object(s["a"])({viewContext:o["MESSAGE_CONTAINERS"].MESSAGE_PANE,channelId:t});i&&i.insertContentsAtCursor(a,r,n)},getSelection:function e(t){var a=Object(s["a"])({viewContext:o["MESSAGE_CONTAINERS"].MESSAGE_PANE,channelId:t});return a?a.getSelection():""},setCursor:function e(t,a,r){var n=Object(s["a"])({viewContext:o["MESSAGE_CONTAINERS"].MESSAGE_PANE,channelId:t});n&&n.setCursor(a,r)}})},function(e,t,a){"use strict";a.r(t);var r=a(850);var n=a(11);var i=a(424);var s=a(21);var o=a(412);var l=a(183);var c=a(73);var u=a(1448);var d=a(41);var p=a(1380);var m=a(820);var h=a(52);Object(h["a"])("interop.messages",{addMessages:function e(){return TS.redux.dispatch(l["a"].apply(void 0,arguments))},getMessageByTimestamp:function e(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return c["a"].apply(void 0,[TS.redux.getState()].concat(a))},getMessagesByChannelId:function e(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return c["b"].apply(void 0,[TS.redux.getState()].concat(a))},getMessagesByProps:function e(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return c["c"].apply(void 0,[TS.redux.getState()].concat(a))},computeRollups:u["a"],getExpandableKey:r["a"],canCountAsUnreadForCurrentUser:d["canCountAsUnreadForCurrentUser"],preprocessImsg:function e(t,a){return TS.redux.dispatch(Object(o["a"])({imsgs:[t],channelId:a}))[0]},preprocessImsgs:function e(t,a){return TS.redux.dispatch(Object(o["a"])({imsgs:t,channelId:a}))},containsMention:function e(t){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];var l=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return Object(d["containsMention"])(t,Object(n["getCurrentUserId"])(TS.redux.getState()),Object(i["a"])(TS.redux.getState()),Object(s["b"])(TS.redux.getState()),{ignoreAtHereMentions:a,ignoreHighlightWords:r,ignoreAtEveryoneMentions:o,ignoreAtChannelMentions:l})},isReply:d["isReply"],canEditMessage:function e(t,a,r,n){return Object(d["canEditMessage"])(TS.redux.getState(),t,a,r,n)},shouldRenderFileThread:function e(t){return Object(d["shouldRenderFileThread"])(t,{featureFileThreads:true,featureFileThreadsDarkLaunch:true})},shouldIgnoreHighlightWords:d["shouldIgnoreHighlightWords"],isAppMessage:function e(t){return Object(d["isAppMessage"])(TS.redux.getState(),t)},atEveryoneRegExp:d["atEveryoneRegExp"],atChannelRegExp:d["atChannelRegExp"],atGroupRegExp:d["atGroupRegExp"],atHereRegExp:d["atHereRegExp"],getClogUIStepFromContext:d["getClogUIStepFromContext"],canChannelHaveAtChannelMentions:p["a"],markObjectsAsFresh:m["b"]})},function(e,t,a){"use strict";a.r(t);var r=a(52);var n=a(1360);Object(r["a"])("interop.metricsResponsiveness",{startMonitoringResponsiveness:n["f"],stopMonitoringResponsiveness:n["h"],storeResponsiveStats:n["j"],isEnabled:n["d"],getTotalBeachballCount:n["b"],getTotalStutterCount:n["c"]})},function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(106);var s=a(1948);var o=a(52);Object(o["a"])("interop.mountDownloadBlockedToast",function(){return TS.redux.dispatch(Object(i["enqueueToast"])({element:n.a.createElement(s["a"])}))})},function(e,t,a){"use strict";a.r(t);var r=a(2092);var n=a(52);Object(n["a"])("interop.mountManageSharedChannelsModal",r["a"]);Object(n["a"])("interop.unmountManageSharedChannelsModal",r["b"])},function(e,t,a){"use strict";a.r(t);var r=a(2089);var n=a(52);Object(n["a"])("interop.mountTeamCreatorOnboardingDialog",r["a"]);Object(n["a"])("interop.unmountTeamCreatorOnboardingDialog",r["b"])},function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(106);var s=a(1842);var o=a(52);Object(o["a"])("interop.mountToast",function(e){return TS.redux.dispatch(Object(i["enqueueToast"])({element:n.a.createElement(s["a"],e)}))})},function(e,t,a){"use strict";a.r(t);var r=a(118);var n=a(9);var i=a(52);Object(i["a"])("interop.mpims",{convertToPrivateChannel:r["b"],makeNameForMpim:function e(t){return Object(n["makeNameForMpim"])(TS.redux.getState(),t)},getMembersInDisplayOrder:function e(t){return Object(n["getMembersInDisplayOrder"])(TS.redux.getState(),t)}})},function(e,t,a){"use strict";a.r(t);var r=a(2747);var n=a(52);Object(n["a"])("interop.openAppManagementModal",r["a"])},function(e,t,a){"use strict";a.r(t);var r=a(1333);var n=a(52);Object(n["a"])("interop.openAppsBrowserModal",function(){return TS.redux.dispatch(r["a"].apply(void 0,arguments))})},function(e,t,a){"use strict";a.r(t);var r=a(52);var n=a(2782);Object(r["a"])("interop.openInviteMemberToChannelDialog",function(e){return TS.redux.dispatch(Object(n["a"])(e))})},function(e,t,a){"use strict";a.r(t);var r=a(52);var n=a(422);Object(r["a"])("interop.pages",{isValidPagePath:n["h"],isValidPageId:n["g"],isPageEnabled:n["e"],isPageEnabledById:n["f"],getAllPages:n["a"],getPageById:n["b"],getPageByPath:n["c"]})},function(e,t,a){"use strict";a.r(t);var r=a(52);var n=a(86);Object(r["a"])("interop.plansPage",{getPlansPageUrl:n["j"]})},function(e,t,a){"use strict";a.r(t);var r=a(52);var n=a(1042);Object(r["a"])("interop.presenceManager",{addMemberToPresenceSubscription:n["a"],removeMemberFromPresenceSubscription:n["c"]})},function(e,t,a){"use strict";a.r(t);var r=a(52);var n=a(1395);var i=a(2614);Object(r["a"])("interop.reactions",{fetchReactions:n["a"],getApiArgsFromReactionKey:n["b"],submitAddOrRemoveReaction:n["d"],maybeReactToLastMessageInChannel:i["a"]})},function(e,t,a){"use strict";a.r(t);var r=a(1968);var n=a(52);Object(n["a"])("interop.removeAppFromChannel",function(e){return TS.redux.dispatch(Object(r["a"])(e))})},function(e,t,a){"use strict";a.r(t);var r=a(88);var n=a.n(r);var i=a(2098);var s=a(9);var o=a(844);var l=a(82);var c=a(180);var u=a(566);var d=a(17);var p=a(41);var m=a(787);var h=a(27);var v=a(107);var f=a(1204);var b=a(240);var g=a(63);var _=a(97);var y=a(52);function O(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?O(Object(a),true).forEach(function(t){n()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):O(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}Object(y["a"])("interop.rules",{channels:k({},s,{shouldSuppressOrgChannel:o["a"],canThread:function e(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return s["canThread"].apply(s,[TS.redux.getState()].concat(a))},isReadOnly:function e(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return s["isReadOnly"].apply(s,[TS.redux.getState()].concat(a))},isThreadOnly:function e(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return s["isThreadOnly"].apply(s,[TS.redux.getState()].concat(a))},getHasReadOnlyDraft:function e(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return s["getHasReadOnlyDraft"].apply(s,[TS.redux.getState()].concat(a))},shouldStopChannelMentions:function e(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return s["shouldStopChannelMentions"].apply(s,[TS.redux.getState()].concat(a))},getDisplayNameForChannel:function e(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return s["getDisplayNameForChannel"].apply(s,[TS.redux.getState()].concat(a))},isYou:function e(t){return s["isYou"](TS.model.user.id,t)},shouldShowAtChannelWarning:function e(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return s["shouldShowAtChannelWarning"].apply(s,[TS.redux.getState()].concat(a))},checkForBlockedAtChannelKeyword:function e(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return s["checkForBlockedAtChannelKeyword"].apply(s,[TS.redux.getState()].concat(a))}}),messages:k({isAutomatedSubtype:m["a"]},p),files:{extendFileWithPinnedInfo:l["extendFileWithPinnedInfo"],getFileType:l["getFileType"]},user:{canLeaveChannel:g["k"],canNonAdminsAtMentionEveryoneBySettings:function e(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return g["p"].apply(void 0,[TS.redux.getState()].concat(a))},canNonAdminsAtChannelOrGroupBySettings:function e(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return g["o"].apply(void 0,[TS.redux.getState()].concat(a))},canAtMentionEveryone:function e(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return g["e"].apply(void 0,[TS.redux.getState()].concat(a))},canAtChannelOrGroup:function e(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return g["d"].apply(void 0,[TS.redux.getState()].concat(a))},canPostInGeneral:function e(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return g["s"].apply(void 0,[TS.redux.getState()].concat(a))},canPostInChannel:function e(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return g["r"].apply(void 0,[TS.redux.getState()].concat(a))},canUserArchiveChannel:function e(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return g["C"].apply(void 0,[TS.redux.getState()].concat(a))},canUserApproveExternalSharedChannels:function e(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return g["B"].apply(void 0,[TS.redux.getState()].concat(a))},canUserDenyExternalSharedChannelRequests:function e(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return g["I"].apply(void 0,[TS.redux.getState()].concat(a))},canUserSeeArchiveChannelOption:function e(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return g["S"].apply(void 0,[TS.redux.getState()].concat(a))},canUserManagePostingPermissions:function e(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return g["O"].apply(void 0,[TS.redux.getState()].concat(a))},canSetPurposeForChannel:function e(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return g["w"].apply(void 0,[TS.redux.getState()].concat(a))},canSetTopicForChannel:function e(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return g["x"].apply(void 0,[TS.redux.getState()].concat(a))},canUserCreatePrivateChannels:function e(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return g["F"].apply(void 0,[TS.redux.getState()].concat(a))},canUserCreatePublicChannels:function e(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return g["G"].apply(void 0,[TS.redux.getState()].concat(a))},canTriggerCustomResponses:function e(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return g["y"].apply(void 0,[TS.redux.getState()].concat(a))},canKickFromPublicChannels:function e(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return g["j"].apply(void 0,[TS.redux.getState()].concat(a))},canKickFromPrivateChannels:function e(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return g["i"].apply(void 0,[TS.redux.getState()].concat(a))},canKickFromChannel:function e(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return g["g"].apply(void 0,[TS.redux.getState()].concat(a))},canJoinChannel:function e(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return g["f"].apply(void 0,[TS.redux.getState()].concat(a))},canUserConvertChannelToPrivate:function e(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return g["E"].apply(void 0,[TS.redux.getState()].concat(a))},canUserDeleteChannel:function e(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return g["H"].apply(void 0,[TS.redux.getState()].concat(a))},canUserSetDataRetentionForChannel:function e(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return g["T"].apply(void 0,[TS.redux.getState()].concat(a))},canUserManageTeamAccessToChannel:function e(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return g["P"].apply(void 0,[TS.redux.getState()].concat(a))},canUserRequestSharedChannel:function e(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return g["R"].apply(void 0,[TS.redux.getState()].concat(a))},canUserExportMessageHistory:function e(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return g["M"].apply(void 0,[TS.redux.getState()].concat(a))},canUserInviteToChannel:function e(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return g["N"].apply(void 0,[TS.redux.getState()].concat(a))},canManageParticipationInSharedChannelsOpenBeta:function e(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return g["m"].apply(void 0,[TS.redux.getState()].concat(a))},canUserDisconnectExternalSharedChannel:function e(){return g["J"].apply(void 0,arguments)},canUserRenameChannel:function e(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return g["Q"].apply(void 0,[TS.redux.getState()].concat(a))},canUserViewExternalSharedChannelRelationships:function e(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return g["V"].apply(void 0,[TS.redux.getState()].concat(a))},canUserAccessChannelMgmt:function e(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return g["z"].apply(void 0,[TS.redux.getState()].concat(a))}},unreads:k({},f),user_groups:{isUnknownOrNonExistent:function e(){return _["t"].apply(void 0,arguments)},isNonExistent:_["r"],isUnknown:_["s"]},emoji:{getEmojiMode:function e(t){return c["h"](TS.redux.getState(),t)},shouldRenderEmojiAsText:function e(){return c["n"](TS.redux.getState())},getEmojiUrlPrefix:c["i"],isEmojiNameSafe:c["j"]},teams:k({},h),members:k({},d,{isAdmin:function e(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return d["isAdmin"].apply(d,[TS.redux.getState()].concat(a))},isOwner:function e(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return d["isOwner"].apply(d,[TS.redux.getState()].concat(a))},isAdminOrOwner:function e(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return d["isAdminOrOwner"].apply(d,[TS.redux.getState()].concat(a))},isPrimaryOwner:function e(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return d["isPrimaryOwner"].apply(d,[TS.redux.getState()].concat(a))}}),admin:k({},i),invites:k({},u),threads:k({},v),prefs:k({},b)})},function(e,t,a){"use strict";a.r(t);var r=a(88);var n=a.n(r);var i=a(21);var s=a(329);var o=a(857);var l=a(82);var c=a(317);var u=a(52);var d=a(2075);var p=a(2023);function m(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function h(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?m(Object(a),true).forEach(function(t){n()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):m(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function v(e){var t=TS.redux.getState();var a=Object(i["b"])(t);Object(o["c"])(a,e)}function f(e){var t=TS.redux.getState();var a=Object(i["b"])(t);return Object(o["b"])(a,e)}Object(u["a"])("interop.files",h({},l,{processFileForUpserting:function e(t){return Object(s["b"])(TS.redux.getState(),t)},fetchAndUpsertFileById:c["e"],fetchAndUpsertFilesById:c["f"],getFileMetaTemplate:d["b"],markObjectsAsFresh:v,isObjectFresh:f,deleteFile:function e(){return TS.redux.dispatch(c["c"].apply(void 0,arguments))},openDeleteFileDialog:function e(){return TS.redux.dispatch(p["a"].apply(void 0,arguments))}}))},function(e,t,a){"use strict";a.r(t);var r=a(354);var n=a(213);var i=a(1166);var s=a(52);Object(s["a"])("interop.notifications",{shouldShowNotificationForChannelMessage:function e(){for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];return r["n"].apply(void 0,[TS.redux.getState()].concat(a))},shouldShowNotificationForDirectMessage:function e(){for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];return r["p"].apply(void 0,[TS.redux.getState()].concat(a))},shouldShowNotificationForDesktopNotification:function e(){for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];return r["o"].apply(void 0,[TS.redux.getState()].concat(a))},showNotification:function e(t,a){return TS.redux.dispatch(Object(i["e"])({message:t,modelObject:a}))},messageForSuppressedNotification:n["b"],getCalculatedDesktopNotifySetting:r["f"],getCalculatedMobileNotifySetting:r["g"],getDefaultDesktopNotifySetting:r["i"],getDefaultMobileNotifySetting:r["j"]})},function(e,t,a){"use strict";a.r(t);var r=a(52);var n=a(21);Object(r["a"])("interop.selfTeamIds",{getEnterpriseId:n["a"],getTeamId:n["b"],getTopLevelTeamId:n["c"]})},function(e,t,a){"use strict";a.r(t);var r=a(819);var n=a(52);Object(n["a"])("interop.sendMessage.resolveMessage",r["c"])},function(e,t,a){"use strict";a.r(t);var r=a(342);var n=a.n(r);var i=a(52);Object(i["a"])("interop.setAppElementForReactModal",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#client-ui";n.a.setAppElement(e)})},,function(e,t,a){"use strict";a.r(t);var r=a(810);var n=a(52);Object(n["a"])("interop.useGantryCallsInLegacySlack",function(){return Object(r["f"])(TS.redux.getState())})},function(e,t,a){"use strict";a.r(t);var r=a(52);var n=a(895);function i(e){return TS.redux.dispatch(Object(n["fetchStarsList"])(e))}Object(r["a"])("interop.stars",{getStarsList:i})},function(e,t,a){"use strict";a.r(t);var r=a(1374);var n=a(21);var i=a(33);var s=a(588);var o=a(1610);var l=a(1532);var c=a(429);var u=a(52);var d=a(1077);var p=a(184);function m(e){var t=TS.redux.getState();var a=Object(n["b"])(t);Object(r["a"])(a,e)}function h(){return p["b"].pauseRefetch()}function v(e){return TS.redux.dispatch(Object(d["c"])(e))}function f(e,t){return TS.redux.dispatch(Object(s["g"])({teamId:e,fields:t}))}function b(e,t){var a=TS.redux.getState();return Object(i["k"])(a,e,t)}function g(){var e=TS.redux.getState();return Object(i["c"])(e)}function _(){var e=TS.redux.getState();return Object(i["d"])(e)}function y(){var e=TS.redux.getState();return Object(i["e"])(e)}function O(e){var t=TS.redux.getState();return Object(i["j"])(t,e)}function k(){return TS.redux.dispatch(s["c"].apply(void 0,arguments))}function E(){return TS.redux.dispatch(l["c"].apply(void 0,arguments))}function C(){return TS.redux.dispatch(c["b"].apply(void 0,arguments))}function S(){return TS.redux.dispatch(s["h"].apply(void 0,arguments))}Object(u["a"])("interop.teams",{getTeamById:b,getAllTeams:g,getCurrentTeam:_,getCurrentTopLevelTeam:y,getTeamByDomain:O,getSelfEnterpriseTeam:i["i"],getSelfEnterpriseOrgName:i["g"],getSelfEnterpriseOrgUrl:i["h"],getAllExternalTeams:i["b"],ensureEnterpriseTeamIsKnown:k,removeTeam:E,upsertTeam:C,markObjectsAsFresh:m,pauseRefetch:h,fetchAndUpsertTeamsWithQuery:v,reorderTeamProfileFields:f,updateSelfEnterpriseName:s["h"],legacyUpdateSelfEnterpriseName:S,upsertSelfTeam:s["o"],fetchAndUpsertEnterpriseOrgInfo:o["a"],getPotentiallyUnknownEnterprise:o["b"],upsertSelfEnterprise:s["n"]})},function(e,t,a){"use strict";a.r(t);var r=a(52);var n=a(495);var i=a(162);var s=a(443);var o=a(1050);var l=a(582);var c=a(1950);var u=a(1034);var d=a(1972);var p=a(1952);var m=a(1951);var h=a(1942);var v=a(1249);var f=a(1418);var b=a(1603);var g=a(1941);var _=a(2299);var y=a(2556);var O=a(1447);var k=a(1446);Object(r["a"])("interop.texty",{Delta:n["a"],PlainClipboardModule:n["b"],Quill:n["c"],SlackKeyboardModule:n["d"],TabCompleteModule:n["e"],TextyClass:n["f"],isRangeInCode:i["k"],convertContentsStringToContents:s["b"],convertContentsToString:o["a"],convertContentsToStringForDisplay:l["a"],getMemberAsContentsString:c["a"],shouldHighlightMention:u["a"],convertContentsStringForSlashCommands:d["b"],convertContentsStringForEncodedMembers:p["a"],CONTENTS_STRING_MENTION_REGEX:s["a"],convertContentsStringToDisplayString:m["a"],TRAILING_PUNCTUATION_CHARACTERS:i["b"],getBroadcastMatch:v["a"],getDisplayTextForSearchResult:f["a"],trimAllowedMatchPrefix:b["a"],getContentsFromClipboard:h["a"],detachInvalidMentionsFromContents:g["a"],replacePotentialMentionsSynchronously:_["a"],shouldInsertNewline:y["a"],getBroadcastKeywordsFromContents:O["a"],getDefaultComposerConfig:k["a"]})},function(e,t,a){"use strict";a.r(t);var r=a(600);var n=a(52);function i(){return TS.redux.dispatch(Object(r["b"])())}Object(n["a"])("interop.topics",{resynced:i})},function(e,t,a){"use strict";a.r(t);var r=a(2);var n=a.n(r);var i=a(52);var s=a(822);var o=a(25);var l=a(17);function c(e){var t=TS.redux.getState();var a=Object(r["map"])(Object(s["getTyperIdsInChannel"])(t,e),function(e){return Object(o["e"])(t,e)});a.sort(function(e,a){return TS.interop.i18n.sorter(Object(l["getPrefCompliantMemberNameLowerCase"])(t,e),Object(l["getPrefCompliantMemberNameLowerCase"])(t,a))});return a}Object(i["a"])("interop.typing",{currentUserStartedTyping:s["currentUserStartedTyping"],currentUserEndedTyping:s["currentUserEndedTyping"],getTypersInChannel:c,memberStartedTyping:s["memberStartedTyping"],memberEndedTyping:s["memberEndedTyping"]})},function(e,t,a){"use strict";a.r(t);var r=a(353);var n=a(192);var i=a(319);var s=a(97);var o=a(874);var l=a(371);var c=a(11);var u=a(52);function d(e){var t=TS.redux.getState();var a=Object(n["f"])(t,e);if(!a)return null;return a}function p(e){return TS.redux.dispatch(Object(i["h"])({ids:[e]})).catch(function(){return{userGroups:[]}}).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.userGroups,a=void 0===t?[]:t;TS.redux.dispatch(Object(r["q"])({userGroups:a}));return a&&a[0]})}function m(e){return TS.redux.dispatch(Object(i["i"])({subteam:e,reason:"legacyPromiseToGetUserGroupMembers"})).then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.users;var n=d(e);if(!n||Object(s["t"])(n))return;TS.redux.dispatch(Object(r["e"])({groupId:e,users:a}))}).then(function(){return d(e)})}function h(e,t){TS.redux.dispatch(Object(i["i"])({subteam:e,reason:"legacyGetUserGroupMembers"})).then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.users;var n=d(e);if(!n||Object(s["t"])(n))return;TS.redux.dispatch(Object(r["e"])({groupId:e,users:a}))}).then(function(){var a=d(e);a&&t&&t(a)})}function v(e){var t=TS.redux.getState();TS.redux.dispatch(Object(l["upsertUserGroupMembership"])({groupId:e,isMember:true}));var a=d(e);if(a&&!Object(s["t"])(a)&&Object(s["v"])(a)){var n=Object(c["getCurrentUserId"])(t);TS.redux.dispatch(Object(r["b"])({groupId:e,memberId:n}))}}function f(e){var t=TS.redux.getState();var a=Object(n["a"])(t,e);return a}function b(e){return TS.redux.dispatch(Object(r["p"])({userGroup:e}))}function g(e){return TS.redux.dispatch(Object(r["q"])({userGroups:e}))}function _(e){return TS.redux.dispatch(Object(i["f"])(e))}function y(){return Object(l["getCurrentMemberUserGroupMembership"])(TS.redux.getState())}function O(e){return Object(n["k"])(TS.redux.getState(),e)}function k(){return Object(n["d"])(TS.redux.getState())}Object(u["a"])("interop.userGroups",{getUserGroupById:d,fetchUserGroupById:p,getActiveUserGroups:f,getKnownUserGroups:k,getUserGroupMembers:h,promiseToGetUserGroupMembers:m,upsertSelfUserGroup:v,upsertUserGroup:b,upsertUserGroups:g,getCurrentMemberUserGroupMembership:y,isUserGroupFromAnotherTeam:O,createUserGroup:i["a"],bulkAddGroups:r["d"],updateUserGroup:i["k"],updateMembersOfUserGroup:i["j"],enableUserGroup:i["d"],disableUserGroup:i["c"],deleteUserGroup:i["b"],getAllUserGroups:function e(){return Object(n["b"])(TS.redux.getState())},USER_GROUP_MSG_REGEX:s["a"],isUserGroupActive:s["v"],searchLocalUserGroups:function e(){return TS.redux.dispatch(Object(o["searchLocalUserGroups"])())},getSearchQuery:function e(){return Object(o["getSearchQuery"])(TS.redux.getState())},setSearchQuery:function e(t){return TS.redux.dispatch(Object(o["setSearchQuery"])(t))},bulkAddUserGroupMembership:function e(t){return TS.redux.dispatch(Object(l["bulkAddUserGroupMembership"])(t))},fetchAndUpsertUserGroupsWithQuery:_,canEditUserGroups:function e(){return Object(s["c"])(TS.redux.getState())},canCreateAndDeleteUserGroups:function e(){return Object(s["b"])(TS.redux.getState())},clearAllUserGroupMembership:function e(){return TS.redux.dispatch(Object(l["clearAllUserGroupMembership"])())},isUserGroupMember:function e(t){return Object(l["isUserGroupMember"])(TS.redux.getState(),t)}})},function(e,t,a){"use strict";a.r(t);var r=a(52);var n=a(2697);var i=a(1988);var s=a(1669);var o=a(42);var l=a(1236);Object(r["a"])("interop.a11y",{makeAriaLabelForMPIM:n["a"],makeAriaLabelForChannel:i["a"],makeAriaLabelForMember:s["a"],isScreenReaderEnabled:o["isScreenReaderEnabled"],focusableSectionManager:l["b"]})},function(e,t,a){"use strict";a.r(t);var r=a(88);var n=a.n(r);var i=a(2);var s=a.n(i);var o=a(22);var l=a(362);var c=a(52);function u(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(Object(a),true).forEach(function(t){n()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function p(){return Object(i["map"])(o["BROADCAST_KEYWORDS"],function(e,t){return d({alias:"BKchannel"===t?"group":null},Object(l["a"])(t))})}function m(e,t){return Object(i["map"])(Object(l["c"])(e,t),function(e){return d({id:e.id,alias:"BKchannel"===e.id?"group":null},e)})}Object(c["a"])("interop.broadcast_keywords",{getAllBroadcastKeywords:p,getBroadcastKeywordsForUser:function e(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return m.apply(void 0,[TS.redux.getState()].concat(a))}})},function(e,t,a){"use strict";a.r(t);var r=a(52);var n=a(489);var i=n["a"].generateAndEnqueue,s=n["a"].check,o=n["a"].list,l=n["a"].getTimeDelta;Object(r["a"])("interop.client_action_token",{generateAndEnqueue:function e(){return i(TS.redux.getState())},list:function e(){return o(TS.redux.getState())},check:function e(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return s.apply(void 0,[TS.redux.getState()].concat(a))},getTimeDelta:l})},function(e,t,a){"use strict";a.r(t);var r=a(52);var n=a(257);Object(r["a"])("interop.clipboard",n)},function(e,t,a){"use strict";a.r(t);var r=a(52);var n=a(14);Object(r["a"])("interop.clogTypes",{EventId:n["EventId"],UiAction:n["UiAction"],UiStep:n["UiStep"],ElementType:n["ElementType"],CoreKeys:n["CoreKeys"],FileUploadType:n["FileUploadType"],FileUploadAction:n["FileUploadAction"],FileUploadSrc:n["FileUploadSrc"]})},function(e,t,a){"use strict";a.r(t);var r=a(2);var n=a.n(r);var i=a(52);var s=a(35);var o=a(16);var l=a(234);var c=null;function u(e){var t=e.userId,a=e.teamId,r=e.enterpriseId,n=e.locale;if(null!==c)return c;c=Object(s["a"])({userId:t,teamId:a,enterpriseId:r,locale:n});return c}function d(){Object(l["a"])()||Object(o["b"])("CLOG SETUP").error("You must call TS.interop.clog.setup() before attempting to track clogs");return r["noop"]}Object(i["a"])("interop.clog",{setup:u,getInstance:function e(){return c},track:function e(){if(c){var t;return(t=c).track.apply(t,arguments)}return d()},trackClick:function e(){if(c){var t;return(t=c).trackClick.apply(t,arguments)}return d()},trackClickWithContext:function e(){if(c){var t;return(t=c).trackClickWithContext.apply(t,arguments)}return d()},trackForm:function e(){if(c){var t;return(t=c).trackForm.apply(t,arguments)}return d()}})},function(e,t,a){"use strict";a.r(t);var r=a(52);var n=a(1205);Object(r["a"])("interop.currency",{formatCurrency:n["a"]})},function(e,t,a){"use strict";a.r(t);var r=a(52);var n=a(128);var i=a(560);var s=a(229);var o=a(1541);var l=a(1370);var c=a(1543);var u=a(1149);var d=a(458);var p=a(1542);var m=a(770);var h=a(1535);var v=a(769);var f=a(1174);var b=a(1075);var g=a(1260);var _=a(383);var y=a(1537);var O=a(1261);var k=a(843);var E=a(1540);var C=a(1536);var S=a(208);var w=a(579);var j=a(1538);var I=a(1539);var T=a(1028);var A=a(1368);var N=a(643);var P=a(1534);var M=a(1369);var D=a(771);var x=a(1298);var R=a(1103);var F=a(768);var L=a(295);var U=a(581);var B=a(95);Object(r["a"])("interop.datetime",{toDateObject:n["a"],toDate:i["a"],toTime:s["a"],toHourAmount:o["a"],toDayAmount:l["a"],toWeekAmount:c["a"],toTimeAmount:u["a"],timeDurationConverter:d["a"],toTimeDuration:p["a"],dateDifference:m["a"],distanceInDays:h["a"],distanceInMinutes:v["a"],distanceInSeconds:f["a"],isToday:b["a"],isYesterday:g["a"],isSameDay:_["a"],sameHour:y["a"],shouldExcludeYear:O["a"],toDayOfTheWeek:k["a"],toHour:E["a"],getActivityDayStamp:C["a"],toCalendarDate:S["a"],toCalendarDateOrNamedDay:w["a"],toCalendarDateIfYesterdayOrToday:j["a"],toFilenameFriendlyDate:I["a"],toHumanReadableDateAndTime:function e(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return T["a"].apply(void 0,[TS.redux.getState()].concat(a))},convertISOtoUTCReadableDate:A["a"],toTimeAgo:N["a"],addDays:P["a"],daysToYearsPretty:M["a"],maybeGetRelativeDay:D["a"],millisecondsToPrettifiedTime:x["a"],prettifyDateString:R["a"],makeTsStamp:F["a"],formatDate:L["a"],memberLocalTime:U["a"],setLocale:B["b"]})},function(e,t,a){"use strict";a.r(t);var r=a(88);var n=a.n(r);var i=a(52);var s=a(32);function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),true).forEach(function(t){n()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var c=s["desktopVersionFields"](),u=c.windowsAppVersion,d=c.windowsAppVersionMinor,p=c.macAppVersion,m=c.macAppVersionMinor,h=c.linuxAppVersion,v=c.linuxAppVersionMinor,f=c.desktopAppVersion;Object(i["a"])("interop.environment",l({},s,{win_ssb_version:u,win_ssb_version_minor:d,mac_ssb_version:p,mac_ssb_version_minor:m,lin_ssb_version:h,lin_ssb_version_minor:v,desktop_app_version:f}))},function(e,t,a){"use strict";a.r(t);var r=a(88);var n=a.n(r);var i=a(52);var s=a(6);var o=a(32);var l=a(77);var c=a(322);var u=a(252);function d(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function p(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?d(Object(a),true).forEach(function(t){n()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var m=new s["b"]("ns");var h={defaultNamespace:"ns",t:m.t.bind(m)};var v=[];var f=function e(t,a){var r=function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return h.t(t,p({},r,{ns:a}))};o["isDev"]&&(r.toString=function(){var e=a+"."+t;if(v.indexOf(e)>=0)return"";v.push(e);var r="Dev-only alert: tried to use an i18n function as a string!\nSee console for stack trace.\n\n\t\t\tNamespace: "+a+"\n\t\t\tString: "+t;alert(r);return""});return r};Object(i["a"])("interop.i18n",{t:f,number:s["n"],percent:s["o"],deburr:s["a"],listify:s["i"],possessive:s["p"],fullPossessiveString:s["c"],safeString:s["q"],sorter:s["r"],mappedSorter:s["k"],localesEnabled:l["e"],supportedKeyboards:c["f"],keyCodeEquivalent:c["c"],keyEquivalent:c["d"],getReverseKeyCodeMap:c["b"],normalizeKeyboardFromDesktop:c["e"],locale:Object(l["f"])(),isPseudoLocale:l["d"],isLocaleCJK:l["c"],zdLocale:l["a"],number_abbreviations:u["d"],locales_number_formatting:u["c"],DEFAULT_LOCALE:s["b"].DEFAULT_LOCALE})},function(e,t,a){"use strict";a.r(t);var r=a(52);var n=a(1035);Object(r["a"])("interop.permalink",{getPermalink:n["a"],getPermalinkIdentifier:n["b"],parsePermalink:n["c"]})},function(e,t){},function(e,t,a){"use strict";a.r(t);var r=a(52);var n=a(1147);var i=a(59);var s=a(762);var o=a(2080);var l=a(1478);var c=a(2097);var u=a(21);Object(r["a"])("interop.search_autocomplete",{suggestions:n["c"],AutocompleteQuerySuggestion:s["g"],AutocompleteSuggestionType:i["b"],warmQuerySuggestionCache:function e(){var t=Object(u["b"])(TS.redux.getState());var a=Object(c["a"])(t);a.get()},clearQueryHistoryCache:function e(){var t=Object(u["b"])(TS.redux.getState());var a=Object(l["b"])(t);a.flushAll()},warmFileSuggestionCache:function e(){var t=Object(u["b"])(TS.redux.getState());var a=Object(o["a"])(t);a.get()}})},function(e,t,a){"use strict";a.r(t);var r=a(52);var n=a(1647);Object(r["a"])("interop.search_conversions",{convertContentsStringForEncodedChannels:n["a"]})},function(e,t,a){"use strict";a.r(t);var r=a(107);var n=a(1574);var i=a(202);var s=a(22);var o=a(52);Object(o["a"])("interop.threads",{getThreadKey:r["getThreadKey"],populateThreadInputs:n["a"],populateReplyInput:function e(t,a,r){var n=Object(i["a"])({viewContext:s["MESSAGE_CONTAINERS"].THREADS_FLEXPANE,channelId:a,threadTs:r});n&&n.setText(t)},clearHistory:function e(t,a){var r=Object(i["a"])({viewContext:s["MESSAGE_CONTAINERS"].THREADS_FLEXPANE,channelId:t,threadTs:a});r&&r.clearHistory()},focus:function e(t,a){var r=Object(i["a"])({viewContext:s["MESSAGE_CONTAINERS"].THREADS_FLEXPANE,channelId:t,threadTs:a});r&&r.focus()},setBroadcast:function e(t,a,r){var n=Object(i["a"])({viewContext:s["MESSAGE_CONTAINERS"].THREADS_FLEXPANE,channelId:t,threadTs:a});n&&n.setBroadcast(r)},getBroadcast:function e(t,a){var r=Object(i["a"])({viewContext:s["MESSAGE_CONTAINERS"].THREADS_FLEXPANE,channelId:t,threadTs:a});return r&&r.getBroadcast()},getText:function e(t,a){var r=Object(i["a"])({viewContext:s["MESSAGE_CONTAINERS"].THREADS_FLEXPANE,channelId:t,threadTs:a});return r&&r.getText()}})},function(e,t,a){"use strict";a.r(t);var r=a(88);var n=a.n(r);var i=a(52);var s=a(69);var o=a(649);var l=a(2611);function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function u(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(Object(a),true).forEach(function(t){n()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}Object(i["a"])("interop.url",u({buildWorkspaceUrl:o["c"],getFileIdFromUrlWithState:l["a"]},s))},function(e,t,a){"use strict";a.r(t);var r=a(52);var n=a(347);Object(r["a"])("interop.versions",n)},function(e,t,a){"use strict";a.r(t);var r=a(52);var n=a(214);Object(r["a"])("interop.welcomePlace",{isWelcomePlacePageEnabled:function e(){return Object(n["w"])(TS.redux.getState())}})},function(e,t,a){"use strict";a.r(t);var r=a(52);var n=a(87);var i=a(211);var s=a(366);Object(r["a"])("interop.workspace",{getPrimaryView:function e(){return Object(n["a"])(TS.redux.getState())},setSecondaryView:function e(){return TS.redux.dispatch(s["a"].apply(void 0,arguments))},setPrimaryView:function e(){return TS.redux.dispatch(i["a"].apply(void 0,arguments))}})},function(e,t,a){"use strict";a.r(t);var r=a(52);var n=a(1356);Object(r["a"])("interop.zendeskWidget",{initWidget:n["b"],openChat:n["g"],onHideChat:n["e"],onShowChat:n["f"],enableChat:n["a"],onChatStart:n["d"],onChatEnd:n["c"]})},,,,,,,,,,,,,,,function(e,t,a){"use strict";var r=a(88);var n=a.n(r);var i=a(0);var s=a(2);var o=a(31);var l=a(29);var c=a(16);var u=Object(l["a"])("Get Entereprise supported mobile browsers info",function(e,t,a){var r=a.reason;return e(Object(o["a"])({method:"enterprise.browserInfo",reason:r})).catch(function(e){var a="failed to get enterprise browser info";Object(c["a"])({getState:t}).error("Enterprise",a);throw e})});u.meta={name:"getSupportedMandatoryMobileBrowsers",key:"fetchersEnterpriseBrowserInfoGetSupportedMandatoryMobileBrowsers",description:"Get Entereprise supported mobile browsers info"};u.propTypes={reason:i["default"].string};var d=a(94);a.d(t,"b",function(){return f});a.d(t,"c",function(){return b});a.d(t,"d",function(){return g});a.d(t,"e",function(){return _});var p=Object(d["a"])("Sets browsers");p.meta={name:"setBrowsers",key:"orgAdminMandatoryMobileBrowsersSetBrowsers",description:"Sets browsers"};p.propTypes=i["default"].objectOf(i["default"].shape({browser_id:i["default"].string.isRequired,browser_display_name:i["default"].string.isRequired,app_icon_url:i["default"].string.isRequired}));var m={};var h=Object(d["c"])(n()({},p,function(e,t){if(void 0===t)return e;return t}),m,{storeKey:"mandatoryMobileBrowsers",persistenceEnabled:true});h.meta={name:"mandatoryMobileBrowsers",key:"orgAdminMandatoryMobileBrowsersMandatoryMobileBrowsers"};h.propTypes=i["default"].objectOf(i["default"].shape({browser_id:i["default"].string.isRequired,browser_display_name:i["default"].string.isRequired,app_icon_url:i["default"].string.isRequired}));var v=t["a"]=h;var f=Object(d["d"])(function(e){if(null===e||void 0===e?void 0:e.mandatoryMobileBrowsers)return Object(s["map"])(Object(s["sortBy"])(Object(s["reject"])(e.mandatoryMobileBrowsers,"is_mdm_browser"),["browser_display_name"]),"browser_id");return[]});f.meta={name:"getAlphabetizedNonMDMBrowsers",key:"orgAdminMandatoryMobileBrowsersGetAlphabetizedNonMDMBrowsers"};var b=Object(d["d"])(function(e,t){var a;if(null===e||void 0===e?void 0:null===(a=e.mandatoryMobileBrowsers)||void 0===a?void 0:a[t])return e.mandatoryMobileBrowsers[t].browser_display_name;return""});b.meta={name:"getBrowserDisplayName",key:"orgAdminMandatoryMobileBrowsersGetBrowserDisplayName"};var g=Object(d["d"])(function(e,t){var a;if(null===e||void 0===e?void 0:null===(a=e.mandatoryMobileBrowsers)||void 0===a?void 0:a[t])return e.mandatoryMobileBrowsers[t].app_icon_url;return""});g.meta={name:"getBrowserIcon",key:"orgAdminMandatoryMobileBrowsersGetBrowserIcon"};var _=Object(d["e"])("Maybe fetches and sets browsers",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.reason;var n=t();if(Object(s["isEmpty"])(null===n||void 0===n?void 0:n.mandatoryMobileBrowsers))return e(u({reason:r})).then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.browsers;return e(p(Object(s["reduce"])(a,function(e,t){e[t.browser_id]=t;return e},{})))});return Promise.resolve()});_.meta={name:"maybeFetchBrowsers",key:"orgAdminMandatoryMobileBrowsersMaybeFetchBrowsers",description:"Maybe fetches and sets browsers"};_.propTypes={reason:i["default"].string.isRequired}},function(e,t,a){"use strict";var r=a(245);var n=a.n(r);var i=a(196);var s=a.n(i);var o=a(110);var l=a.n(o);var c=a(135);var u=a.n(c);var d=a(169);var p=a.n(d);var m=a(138);var h=a.n(m);var v=a(147);var f=a.n(v);var b=a(185);var g=a.n(b);var _=a(1);var y=a.n(_);var O=a(12);var k=a(0);var E=a(2);var C=a(30);var S=a(286);var w=a(13);var j=a.n(w);var I=a(1345);var T=a(6);var A=a(303);var N=a(1329);var P=a(1033);var M=a(11);var D=a(21);var x=a(1445);var R=a(102);var F=a(1215);var L=a(1216);var U=a(4241);var B={clogLinkClick:E["noop"],fullWidth:false,onClick:E["noop"],showActions:true,useRowAction:false,includeRootDownloadAction:true,includeRootStarAction:false,teamId:void 0,"data-qa":void 0};var q=function(e){g()(t,e);function t(e){var a;l()(this,t);a=p()(this,h()(t).call(this,e));a.onClick=a.onClick.bind(f()(a));return a}u()(t,[{key:"onClick",value:function e(t){t.preventDefault();this.props.onClick(t,this.props.file)}},{key:"render",value:function e(){var t=this.props,a=t.file,r=t.clogLinkClick,n=t.fullWidth,i=t.showActions,s=t.includeRootDownloadAction,o=t.includeRootStarAction,l=t.useRowAction,c=t.teamId,u=t["data-qa"];return y.a.createElement(F["a"],{file:a,className:"c-pillow_file_container--download",fullWidth:n,clogLinkClick:r,showActions:i,useRowAction:l,includeRootDownloadAction:s,includeRootStarAction:o,isDownloadFile:true,"data-qa":u},y.a.createElement(L["a"],{file:a,onClick:this.onClick},y.a.createElement(U["a"],{file:a,action:"show",teamId:c})))}}]);return t}(_["PureComponent"]);q.displayName="DownloadFile";q.defaultProps=B;var G=q;var H=a(95);var W=a(1040);var V=a(23);var K=a(152);var z=a(237);var Q=a(32);var Y=a(1169);var J=a(1313);var X=a(3650);var Z=new T["b"]("downloads");var $={downloadPath:"",downloadState:"",startTime:0,progress:0,fileName:"",imageSource:"",fileType:"",prettyType:"",fileSize:0,highlight:false,openDownload:E["noop"],showDownload:E["noop"],cancelDownload:E["noop"],retryDownload:E["noop"],removeDownload:E["noop"],pauseDownload:E["noop"],resumeDownload:E["noop"],hasKeyboardFocusWithin:false,onFocus:E["noop"],onBlur:E["noop"]};var ee=function(e){g()(t,e);u()(t,null,[{key:"getEstimatedTimeRemaining",value:function e(t){var a=t.downloadState,r=t.progress,n=t.startTime;if(!["progressing","paused"].includes(a))return"";if(r>=1)return"";if(-1===r)return"";if(!r)return"";var i=Date.now()-n;var s=i*(1/r);var o=s-i;return Z.t("{duration} remaining",{duration:H["a"].duration(o,"milliseconds").humanize()})}}]);function t(e){var a;l()(this,t);a=p()(this,h()(t).call(this,e));Object(C["a"])(f()(a),["onOpenClick","onShowClick","onCancel","onRetry","onRemove","onPause","onResume"]);return a}u()(t,[{key:"onCancel",value:function e(t){t.stopPropagation();this.props.cancelDownload(this.props.id)}},{key:"onOpenClick",value:function e(t){t.stopPropagation();this.props.openDownload(this.props.id)}},{key:"onPause",value:function e(t){t.stopPropagation();this.props.pauseDownload(this.props.id)}},{key:"onRemove",value:function e(t){t.stopPropagation();this.props.removeDownload(this.props.id)}},{key:"onResume",value:function e(t){t.stopPropagation();this.props.resumeDownload(this.props.id)}},{key:"onRetry",value:function e(t){t.stopPropagation();this.props.retryDownload(this.props.id)}},{key:"onShowClick",value:function e(t){t.stopPropagation();this.props.showDownload(this.props.id)}},{key:"renderDownloadIcon",value:function e(){var t=this.props,a=t.fileType,r=t.imageSource;var n=function e(){return y.a.createElement(V["b"],{type:a,file:true})};if(r)return y.a.createElement(W["a"],{src:r,renderPending:n,width:"32",height:"32",className:"p-download_item__image",alt:""});return n()}},{key:"renderExtraActions",value:function e(){var t="paused"===this.props.downloadState?y.a.createElement(K["a"],{className:"p-download_item__link--resume",onClick:this.onResume},Z.t("Resume")):y.a.createElement(K["a"],{className:"p-download_item__link--pause",onClick:this.onPause},Z.t("Pause"));return y.a.createElement("span",{className:"p-download_item__extra_actions"},t,y.a.createElement(K["a"],{className:"p-download_item__link--cancel",onClick:this.onCancel},Z.t("Cancel")))}},{key:"render",value:function e(){var a=this.props,r=a.downloadPath,n=a.downloadState,i=a.fileName,s=a.imageSource,o=a.fileType,l=a.prettyType,c=a.fileSize,u=a.highlight,d=a.hasKeyboardFocusWithin;var p=Math.max(this.props.progress,0);var m=i||r.split(/\/|\\/).reverse()[0];var h="completed"===n?100:100*p;var v=["progressing","paused"].includes(n)&&p?p*c:void 0;var f;f=v?Z.t("{partialSize} of {size} {prettyType}",{partialSize:Object(Y["a"])(v,{decimalPlaces:2}),size:Object(Y["a"])(c),prettyType:l}):Object(Y["a"])(c)+" "+l;var b=t.getEstimatedTimeRemaining(this.props);var g=j()("p-download_item",n,{highlight:u,"p-download_item--focus-within":d});var _=j()({"p-download_item__action_icon":true,"p-download_item__action_icon--image":!!s,fileType:o});var O=Object(Q["isMac"])()?Z.t("Show in Finder"):Z.t("Open containing folder");var k={width:h+"%"};var E=Z.t("Remove {file}",{file:m,fallbackHash:"e963907dac5cd5c017869b4c96c18021c9bd058b",fallbackHashNs:"admin"});return y.a.createElement("div",{role:"presentation",className:g,onFocus:this.props.onFocus,onBlur:this.props.onBlur,onClick:this.onOpenClick},y.a.createElement("div",{className:"p-download_item__icon_container"},this.renderDownloadIcon(),y.a.createElement(V["b"],{className:_})),y.a.createElement("div",{className:"p-download_item__container"},y.a.createElement("div",{className:"p-download_item__name_row"},y.a.createElement("span",{className:"p-download_item__name overflow_ellipsis"},m),this.renderExtraActions()),y.a.createElement("div",{className:"p-download_item__size_row"},y.a.createElement("span",{className:"p-download_item__size overflow_ellipsis"},y.a.createElement("span",{className:"p-download_item__partial_size"},f)),y.a.createElement("span",{className:"p-download_item__actions"},y.a.createElement(K["a"],{className:"p-download_item__link--show",onClick:this.onShowClick},O),y.a.createElement(K["a"],{className:"p-download_item__link--retry",onClick:this.onRetry},Z.t("Retry"))),y.a.createElement("span",{className:"p-download_item__time_remaining"},b)),y.a.createElement("div",{className:"p-download_item__progress_row progress_bar"},y.a.createElement("div",{className:"p-download_item__progress progress_bar_progress",style:k}))),y.a.createElement(z["a"],{"aria-label":E,icon:"close-filled",className:"p-download_item__link--remove",onClick:this.onRemove}))}}]);return t}(y.a.Component);ee.displayName="DownloadItem";ee.defaultProps=$;var te={openDownload:A["openDesktopDownload"],showDownload:A["showDesktopDownload"],cancelDownload:A["cancelDesktopDownload"],retryDownload:A["retryDesktopDownload"],removeDownload:A["removeDesktopDownload"],pauseDownload:A["pauseDesktopDownload"],resumeDownload:A["resumeDesktopDownload"]};var ae=Object(J["a"])(Object(O["connect"])(null,te)(ee));var re=new T["b"]("page_client");var ne={items:void 0,onItemTabWithin:E["noop"],openDownload:E["noop"],showDesktopDownload:E["noop"],retryDownload:E["noop"],focusKey:null,setFocusKey:E["noop"],layout:void 0,featureIap1Downloads:false,teamId:void 0};var ie=function(e){g()(t,e);function t(e){var a;l()(this,t);a=p()(this,h()(t).call(this,e));Object(C["a"])(f()(a),["renderItem","onFileClick","focus"]);a.list=y.a.createRef();return a}u()(t,[{key:"componentDidMount",value:function e(){var t=this.props,a=t.focusKey,r=t.items;if("downloads"===a&&r.length){this.setFocusOnFirstItem();this.clearFocusKey()}}},{key:"componentDidUpdate",value:function e(t){var a=t.focusKey;var r=this.props,n=r.focusKey,i=r.items;if("downloads"===n&&n!==a&&i.length){this.setFocusOnFirstItem();this.clearFocusKey()}}},{key:"onFileClick",value:function e(t){var a=t.id;var r=this.getItemKeys();var n=Object(E["indexOf"])(r,a);var i=this.props.items[n];if(!i)return;var s=i.downloadState;if("completed"===s){this.props.openDownload(a);return}"cancelled"!==s&&"interrupted"!==s||this.props.retryDownload(a)}},{key:"getItemKeys",value:function e(){return this.props.items.map(function(e){return e.id})}},{key:"setFocusOnFirstItem",value:function e(){var t=this.getItemKeys()[0];var a=this.list.current;a&&a.focusOnKey(t)}},{key:"clearFocusKey",value:function e(){this.props.setFocusKey(null)}},{key:"focus",value:function e(){var t=this.list.current;t&&t.focus()}},{key:"renderItem",value:function e(t){var a=this;var r=this.props.items[t];if(!this.props.featureIap1Downloads)return y.a.createElement(ae,s()({key:r.id},r));return y.a.createElement(G,{key:r.id,file:r,includeRootDownloadAction:false,featureIap1Downloads:this.props.featureIap1Downloads,fullWidth:true,teamId:this.props.teamId,onClick:function e(t,r){a.props.showDesktopDownload(r.id)}})}},{key:"render",value:function e(){var t=this;var a=this.getItemKeys();var r=j()({"p-downloads_modal__list_container":this.props.featureIap1Downloads});return y.a.createElement(S["a"],null,function(e){var n=e.width,i=e.height;return y.a.createElement(I["a"],{ref:t.list,width:n,height:i,keys:a,containerClassName:r,rowRenderer:t.renderItem,animateOnScroll:false,"aria-label":re.t("Downloads"),onItemTabWithin:t.props.onItemTabWithin,onItemClick:t.onFileClick,layout:t.props.layout})})}}]);return t}(_["PureComponent"]);ie.displayName="DownloadsList";ie.defaultProps=ne;var se=function e(t){return{focusKey:Object(N["a"])(t),featureIap1Downloads:Object(M["isFeatureEnabled"])(t,"feature_iap1_downloads"),teamId:Object(D["b"])(t)}};var oe=function e(t){return{showDesktopDownload:function e(){return t(A["showDesktopDownload"].apply(void 0,arguments))},openDownload:function e(){return t(A["openDesktopDownload"])},retryDownload:function e(){return t(A["retryDesktopDownload"])},setFocusKey:function e(a){return t(Object(P["a"])(a))}}};var le=Object(O["connect"])(se,oe)(function(e){var t=e.refToForward,a=n()(e,["refToForward"]);return y.a.createElement(ie,s()({ref:t},a))});var ce=t["a"]=y.a.forwardRef(function(e,t){return y.a.createElement(le,s()({refToForward:t},e))})},,function(e,t,a){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){},,,,,,,,,,,function(e,t,a){"use strict";var r=function(e,t,a,r,n,i,s,o){false;if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[a,r,n,i,s,o];var u=0;l=new Error(t.replace(/%s/g,function(){return c[u++]}));l.name="Invariant Violation"}l.framesToPop=1;throw l}};e.exports=r},,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(85);var s=a.n(i);var o=a(12);var l=a(26);var c=a(52);var u=a(444);var d=a(110);var p=a.n(d);var m=a(135);var h=a.n(m);var v=a(169);var f=a.n(v);var b=a(138);var g=a.n(b);var _=a(147);var y=a.n(_);var O=a(185);var k=a.n(O);var E=a(2);var C=a(0);var S=a(13);var w=a.n(S);var j=a(6);var I=a(777);var T=a(196);var A=a.n(T);var N=a(649);var P=a(11);var M=a(1342);var D=a(860);var x=a(93);var R=a(191);var F=a(247);var L=a(39);var U=a(23);var B=function(e){k()(t,e);function t(){p()(this,t);return f()(this,g()(t).apply(this,arguments))}h()(t,[{key:"render",value:function e(){return n.a.createElement("div",{className:"margin_left_75"},this.props.action)}}]);return t}(r["PureComponent"]);B.displayName="AppProfileHeaderActionItem";var q=B;var G=a(3126);var H={appName:null,appImageSrc:null,appByline:"",headerActions:[],onBackClick:E["noop"]};var W=function(e){k()(t,e);function t(e){var a;p()(this,t);a=f()(this,g()(t).call(this,e));a.onBackArrowClick=a.onBackArrowClick.bind(y()(a));return a}h()(t,[{key:"onBackArrowClick",value:function e(){var t=this.props.onBackClick;t();Object(R["b"])(Object(R["a"])().apps.setAppDetailViewOpen(false))}},{key:"renderActionItems",value:function e(){var t=this.props.headerActions;var a=Object(E["map"])(t,function(e,t){return n.a.createElement(q,{key:t,action:e})});return a}},{key:"render",value:function e(){var t=this;var a=this.props,r=a.appName,i=a.appImageSrc,s=a.appByline;return n.a.createElement("div",{className:"p-app_profile_header margin_bottom_150 display_flex align_items_center justify_content_between"},n.a.createElement("div",{className:"display_flex justify_content_start align_items_center"},n.a.createElement(U["a"],{onClick:function e(){return t.onBackArrowClick()},type:"chevron_medium_left",className:"p-app_profile_header__back_arrow position_absolute"}),i&&n.a.createElement("img",{className:"p-app_profile_header__app_image margin_left_100",src:i,alt:r}),n.a.createElement("div",{className:"display_flex flex_direction_column"},n.a.createElement("h3",{className:"margin_left_100 black"},r),n.a.createElement("span",{className:"p-app_profile_header__app_byline margin_left_100 sk_foreground_max"},s))),n.a.createElement("div",{className:"display_flex"},this.renderActionItems()))}}]);return t}(r["PureComponent"]);W.displayName="AppProfileHeader";W.defaultProps=H;var V=W;var K=V;var z=a(24);var Q=a(57);var Y=a(88);var J=a.n(Y);var X=a(912);var Z=a(33);var $=a(218);var ee=a.n($);var te=a(44);var ae=a(356);var re=a(1160);var ne=new j["b"]("enterprise_dashboard");var ie={status:{},app:{},onAppStatusFetched:null};var se=function(e){k()(t,e);function t(){p()(this,t);return f()(this,g()(t).apply(this,arguments))}h()(t,[{key:"componentDidMount",value:function e(){var t=this.props,a=t.onAppStatusFetched,r=t.status;a&&r.id&&a(r)}},{key:"componentDidUpdate",value:function e(t){var a=this.props.status;var r=this.props.onAppStatusFetched;r&&a!==t.status&&a.id&&r(a)}},{key:"render",value:function e(){var t=this.props,a=t.app,r=t.status;var i=w()("p-app_management_modal_search_result",{"p-app_management_modal_search_result--disabled":r.isApproved||r.isRestricted});return n.a.createElement("div",{className:i},r.isApproved&&n.a.createElement("span",{className:"p-app_management_modal_search_result--already_approved"},ne.t("Already approved")),r.isRestricted&&n.a.createElement("span",{className:"p-app_management_modal_search_result--already_restricted"},ne.t("Already restricted")),a.icons&&a.icons.image_72&&n.a.createElement("img",{src:a.icons.image_72,style:{float:"left",width:"36px",height:"36px",verticalAlign:"middle",marginTop:"5px",marginRight:"1rem"},alt:""}),n.a.createElement("div",{className:"p-app_management_modal_search_name"},n.a.createElement("strong",null,a.name)))}}]);return t}(r["PureComponent"]);se.displayName="AppManagementSearchRow";se.defaultProps=ie;var oe=function e(t,a){return{status:Object(F["g"])(t,a.app.id)||{}}};var le=Object(o["connect"])(oe)(se);function ce(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function ue(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(a),true).forEach(function(t){J()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ce(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var de=66;var pe="search_select_default_option";var me=new j["b"]("enterprise_dashboard");var he={mode:re["b"].APPROVE,switchPane:E["noop"],fetchInstallableApps:E["noop"],setCommonAppInfoById:E["noop"],setSearchSelectedAppId:E["noop"]};var ve=function(e){k()(t,e);function t(e){var a;p()(this,t);a=f()(this,g()(t).call(this,e));var r=a.props.mode;a.state={emptyImgSrc:vvv(r===re["b"].APPROVE?"/img/enterprise/app_approval_empty@2x.jpg":"/img/enterprise/app_restriction_empty@2x.jpg"),isLoading:false,selectState:{filterQuery:"",options:null,selectId:"apps-list-select",isExpanded:true,selectedOption:null}};a.inputRef=n.a.createRef();a.fetchApps=a.fetchApps.bind(y()(a));a.debouncedFetchApps=Object(E["debounce"])(a.fetchApps,250);a.setSelectState=a.setSelectState.bind(y()(a));a.handleSelectApp=a.handleSelectApp.bind(y()(a));a.onAppStatusFetched=a.onAppStatusFetched.bind(y()(a));a.renderSearchSelectOption=a.renderSearchSelectOption.bind(y()(a));a.renderEmptyStateMessage=a.renderEmptyStateMessage.bind(y()(a));return a}h()(t,[{key:"componentDidMount",value:function e(){var t=this;this.setSelectState(function(){return t.state.selectState})}},{key:"onAppStatusFetched",value:function e(t){var a=t.id;if(!a||!t.isApproved&&!t.isRestricted)return;var r=this.state.selectState;var n=r.options;if(!n||!n.length)return;var i=n.findIndex(function(e){return e.id===a});if(-1===i)return;var s=ee()(n);s[i].isDisabled=true;var o={selectState:ue({},r,{options:s})};this.setState(function(){return o})}},{key:"setSelectState",value:function e(t,a){var r=t();var n=this.state.selectState;if(void 0!==r.filterQuery&&r.filterQuery!==this.state.filterQuery)if(""===r.filterQuery){r.options=null;this.setState(function(){return{isLoading:false}})}else this.fetchApps(r.filterQuery);this.setState(function(){return{selectState:ue({},n,{},r)}},a)}},{key:"fetchApps",value:function e(t){var a=this;if(!t)return;var r=this.props,n=r.fetchInstallableApps,i=r.setCommonAppInfoById;this.setState(function(){return{isLoading:true}});n({query:t}).then(function(e){var r=a.state.selectState.filterQuery;if(t!==r)return;var n=e.apps;i(n);var s=n.map(function(e){var t=e.id;return{id:t,label:e.name,value:t,name:e.name,icons:e.icons,installedOn:[],isSlackOwned:e.is_slack_owned,isDisabled:false}});var o=ue({},a.state.selectState,{options:s,optionsRowHeight:de});a.setState(function(){return{isLoading:false,optionsRowHeight:de,selectState:o}})})}},{key:"handleSelectApp",value:function e(t){this.props.setSearchSelectedAppId(t.id);this.props.switchPane(re["d"].CONFIRM)}},{key:"renderEmptyStateMessage",value:function e(){var t=this.inputRef&&this.inputRef.current;if(t&&void 0!==t.value&&!t.value.length)return null;return me.t("No items")}},{key:"renderSearchBar",value:function e(){var t=this.props.mode;var a;var r=me.t("Search apps");a=t===re["b"].APPROVE?me.t("Search for an app to approve"):me.t("Search for an app to restrict");var i=this.state,s=i.isLoading,o=i.optionsRowHeight,l=i.selectState;return n.a.createElement("div",{className:"p-app_management_modal_search_select"},n.a.createElement(ae["b"],{emptyStateMessage:this.renderEmptyStateMessage,isLoading:s,selectState:l,setSelectState:this.setSelectState,optionsRowHeight:o,renderOption:this.renderSearchSelectOption,inputRef:this.inputRef,ariaLabel:r,placeholderText:a,selectId:l.selectId,focusOnMount:true,width:"100%",maxOptionsListHeight:250,classPrefix:"p-app_management",selectDataQa:"app_management_modal_search_input",onOptionSelected:this.handleSelectApp,showDropdownIcon:false}))}},{key:"renderSearchSelectOption",value:function e(t){if(t.value===pe)return n.a.createElement("div",null,t.label);return n.a.createElement(le,{app:t,onAppStatusFetched:this.onAppStatusFetched})}},{key:"render",value:function e(){var t=this.props.mode;var a;var r;if(t===re["b"].APPROVE)a=me.t("Approve an app for anyone to install");else{a=me.t("Restrict an app to block installation");r=n.a.createElement(U["b"],{type:"warning-filled",className:"sk_raspberry_red"})}return n.a.createElement(n.a.Fragment,null,n.a.createElement(te["h"],null,n.a.createElement(te["j"],{className:"p-app_management_modal__title_bar",title:a,icon:r})),n.a.createElement(te["d"],{"data-qa":"app_management_modal_search",className:"padding_bottom_100"},n.a.createElement(te["e"],{className:"margin_top_100 margin_bottom_200"},this.renderSearchBar()),n.a.createElement(te["e"],null,n.a.createElement(te["i"],{width:470,height:194,alt:"",src:this.state.emptyImgSrc}))))}}]);return t}(r["PureComponent"]);ve.displayName="AppManagementModalSearch";ve.defaultProps=he;var fe=function e(t){return{fetchAppManagementStatus:function e(){return t(D["a"].apply(void 0,arguments))},fetchInstallableApps:function e(){return t(D["d"].apply(void 0,arguments))},setCommonAppInfoById:function e(a){return t(Object(F["u"])(a))}}};var be=Object(o["connect"])(null,fe)(ve);var ge=a(106);var _e=a(544);var ye=a(131);var Oe=a(288);var ke=a(98);var Ee=a(3664);var Ce={appName:"",appIcon:null,appURL:"",workspaceInstallations:420};var Se=new j["b"]("enterprise_dashboard");var we=function(e){k()(t,e);function t(e){var a;p()(this,t);a=f()(this,g()(t).call(this,e));a.renderMenu=a.renderMenu.bind(y()(a));return a}h()(t,[{key:"renderMenu",value:function e(){var t=this.props.appURL;return n.a.createElement(Q["f"],{width:"auto"},n.a.createElement(Q["b"],{key:"app_summary_menuitem_0",label:Se.t("View in App Directory"),href:t,className:"p-app_management_app_summary__menu_app_dir_link"}))}},{key:"render",value:function e(){var t=this.props,a=t.appName,r=t.appIcon,i=t.workspaceInstallations;return n.a.createElement("div",{className:"p-app_management_app_summary"},n.a.createElement("div",{className:"p-app_management_app_summary__menu"},n.a.createElement(Q["e"],{renderMenu:this.renderMenu,position:"bottom-right",offsetX:20,onClick:this.onClick,onClose:this.onClose},n.a.createElement(ke["a"],{className:"p-app_management_app_summary__menu_trigger","aria-label":Se.t("Actions for {appName}",{appName:a})},n.a.createElement(U["b"],{type:"ellipsis"})))),r&&n.a.createElement("div",{className:"p-app_management_app_summary__icon"},n.a.createElement("img",{src:r,alt:Se.t("Icon for {appName}",{appName:a})})),n.a.createElement("div",{className:"p-app_management_app_summary__app_name"},n.a.createElement("strong",null,a)),n.a.createElement("div",{className:"p-app_management_app_summary__app_details"},i>0&&n.a.createElement("div",null,Se.rt("{workspaceInstallations, plural, =1 {# workspace installation} other {# workspace installations}}",{workspaceInstallations:i}))))}}]);return t}(r["PureComponent"]);we.displayName="AppManagementAppSummary";we.defaultProps=Ce;var je=we;var Ie=a(1458);var Te=a(89);var Ae={appId:"",fetchScopeInfo:E["noop"]};var Ne=function(e){k()(t,e);function t(e){var a;p()(this,t);a=f()(this,g()(t).call(this,e));a.state={scopeInfo:{},isLoading:true};return a}h()(t,[{key:"componentDidMount",value:function e(){this.fetchScopes()}},{key:"fetchScopes",value:function e(){var t=this;var a=this.props,r=a.appId,n=a.fetchScopeInfo;var i={app_id:r};n(i).then(function(e){t.setState(function(){return{scopeInfo:e.scope_info}})}).finally(function(){return t.setState(function(){return{isLoading:false}})})}},{key:"render",value:function e(){var t=this.state,a=t.scopeInfo,r=t.isLoading;return n.a.createElement("div",{className:"p-app_management_modal_permissions"},r?n.a.createElement(Te["a"],{color:"blue",size:"jumbo"}):n.a.createElement(Ie["a"],{scopeInfo:a}))}}]);return t}(r["PureComponent"]);Ne.displayName="AppManagementPermissions";Ne.defaultProps=Ae;var Pe=function e(t){return{fetchScopeInfo:function e(){return t(D["h"].apply(void 0,arguments))}}};var Me=Object(o["connect"])(null,Pe)(Ne);var De={orgId:"",appId:"",appName:"",appIcon:"",featureEntAdminApprovedAppsV2:false,mode:re["b"].APPROVE,switchPane:E["noop"],isSlackOwned:false,workspaceInstallations:0,fetchApproveApp:E["noop"],submitRestrictApp:E["noop"],closeModal:E["noop"],enqueueToast:E["noop"],setActiveTab:E["noop"],activeTab:null,setApprovedAppsNeedUpdate:E["noop"],setRestrictedAppsNeedUpdate:E["noop"],setHighlightId:E["noop"],unsetAppStatus:E["noop"]};var xe=new j["b"]("enterprise_dashboard");var Re=function(e){k()(t,e);function t(e){var a;p()(this,t);a=f()(this,g()(t).call(this,e));a.state={pendingApiCall:false};a.onClickConfirm=a.onClickConfirm.bind(y()(a));a.onClickRestrict=a.onClickRestrict.bind(y()(a));return a}h()(t,[{key:"onClickConfirm",value:function e(){var t=this;var a=this.props,r=a.appId,i=a.orgId,s=a.fetchApproveApp,o=a.closeModal,l=a.enqueueToast,c=a.appName,u=a.setActiveTab,d=a.setApprovedAppsNeedUpdate,p=a.activeTab,m=a.setHighlightId,h=a.unsetAppStatus;var v={pendingApiCall:true};this.setState(function(){return v});var f={enterprise_id:i,app_id:r,reason:"admin_app_management"};s(f).then(function(){var e=xe.t("{appName} is approved for installation",{appName:c});l({element:n.a.createElement(ye["b"],{position:"bottom-right",icon:"check-circle-o"},e)});var a={pendingApiCall:false};t.setState(function(){return a});m(r);o();h(r);if(p===re["g"].APPROVED)d(true);else{u(re["g"].APPROVED);Object(R["b"])(Object(R["a"])().router.navigateTo("/organization/apps/"+re["g"].APPROVED))}})}},{key:"onClickRestrict",value:function e(){var t=this;var a=this.props,r=a.appId,i=a.orgId,s=a.submitRestrictApp,o=a.closeModal,l=a.enqueueToast,c=a.appName,u=a.setActiveTab,d=a.setRestrictedAppsNeedUpdate,p=a.activeTab,m=a.setHighlightId,h=a.unsetAppStatus;var v={pendingApiCall:true};this.setState(function(){return v});var f={enterprise_id:i,app_id:r,reason:"admin_app_management"};s(f).then(function(){var e=xe.t("{appName} is now restricted from being installed",{appName:c});l({element:n.a.createElement(ye["b"],{position:"bottom-right",icon:"check-circle-o"},e)});var a={pendingApiCall:false};t.setState(function(){return a});m(r);h(r);o();if(p===re["g"].RESTRICTED)d(true);else{u(re["g"].RESTRICTED);Object(R["b"])(Object(R["a"])().router.navigateTo("/organization/apps/"+re["g"].RESTRICTED))}})}},{key:"maybeSwitchPane",value:function e(t){var a=this.props,r=a.closeModal,n=a.switchPane;t?n(t):r()}},{key:"render",value:function e(){var t=this;var a=this.props,r=a.appName,i=a.appId,s=a.appIcon,o=a.featureEntAdminApprovedAppsV2,l=a.isSlackOwned,c=a.mode,u=a.workspaceInstallations;var d;var p;var m;var h;var v;var f;var b=c===re["b"].APPROVE?null:re["d"].SEARCH;var g=this.state.pendingApiCall;if(c===re["b"].APPROVE){d=xe.t("Approve this app for installation?");v=xe.t("Approve");f="primary"}else{d=xe.t("Restrict this app from installation?");p=n.a.createElement("p",null,xe.rt("No one in your organization will be able to install or request installation of this app."));o&&u&&(m=u&&n.a.createElement(x["a"],{type:"boxed",level:"warning",align:"left",className:"p-app_management_modal_workspace_alert margin_top_100"},xe.rt("<b>This will not affect existing installations.</b><br></br>You can remove existing installations at the workspace level.")));v=xe.t("Restrict");f="danger"}var _={appName:r,appIcon:s,appURL:"/apps/"+i,isSlackOwned:l,workspaceInstallations:u};return n.a.createElement(n.a.Fragment,null,n.a.createElement(te["h"],null,n.a.createElement(_e["a"],{title:d})),n.a.createElement(te["d"],{"data-qa":"app_management_modal_confirm",className:"padding_bottom_100"},p&&n.a.createElement(te["e"],null,p),n.a.createElement(te["e"],null,n.a.createElement(je,_)),c===re["b"].APPROVE&&n.a.createElement(Me,{appId:i}),m&&n.a.createElement(te["e"],null,m),h),n.a.createElement(te["f"],null,n.a.createElement(te["g"],null,n.a.createElement(z["d"],{type:"outline",onClick:function e(){return t.maybeSwitchPane(b)}},xe.t("Back")),n.a.createElement(Oe["a"],{type:f,onClick:c===re["b"].APPROVE?this.onClickConfirm:this.onClickRestrict,loading:g},v))))}}]);return t}(r["PureComponent"]);Re.displayName="AppManagementModalConfirm";Re.defaultProps=De;var Fe=function e(t,a){var r=Object(Z["e"])(t);var n=Object(F["i"])(t,a.appId)||{};return{appName:n.name,appIcon:n.icons&&n.icons.image_72,workspaceInstallations:n.teams_installed_on&&n.teams_installed_on.count,orgName:r.name,orgIcon:r.icon&&r.icon.image_102,orgId:r.id,activeTab:Object(F["f"])(t),featureEntAdminApprovedAppsV2:Object(P["isFeatureEnabled"])(t,"feature_ent_admin_approved_apps_v2")}};var Le=function e(t){return{closeModal:function e(){return t(L["closeModal"].apply(void 0,arguments))},fetchApproveApp:function e(){return t(D["b"].apply(void 0,arguments))},submitRestrictApp:function e(){return t(D["k"].apply(void 0,arguments))},enqueueToast:function e(){return t(ge["enqueueToast"].apply(void 0,arguments))},setActiveTab:function e(){return t(F["s"].apply(void 0,arguments))},setApprovedAppsNeedUpdate:function e(){return t(F["t"].apply(void 0,arguments))},setRestrictedAppsNeedUpdate:function e(){return t(F["y"].apply(void 0,arguments))},setHighlightId:function e(){return t(F["v"].apply(void 0,arguments))},unsetAppStatus:function e(){return t(F["C"].apply(void 0,arguments))}}};var Ue=Object(o["connect"])(Fe,Le)(Re);var Be={appId:"",appName:"",orgId:"",mode:re["b"].REMOVE_APPROVAL,closeModal:E["noop"],enqueueToast:E["noop"],activeTab:null,setInstalledAppsNeedUpdate:E["noop"],setApprovedAppsNeedUpdate:E["noop"],setRestrictedAppsNeedUpdate:E["noop"],setHighlightId:E["noop"],fetchResetApp:E["noop"],unsetAppStatus:E["noop"]};var qe=new j["b"]("enterprise_dashboard");var Ge=function(e){k()(t,e);function t(e){var a;p()(this,t);a=f()(this,g()(t).call(this,e));a.state={pendingApiCall:false};a.onConfirmClick=a.onConfirmClick.bind(y()(a));return a}h()(t,[{key:"onConfirmClick",value:function e(){var t=this;var a=this.props,r=a.appId,i=a.appName,s=a.closeModal,o=a.enqueueToast,l=a.mode,c=a.setHighlightId,u=a.fetchResetApp,d=a.orgId,p=a.unsetAppStatus;var m={pendingApiCall:true};this.setState(function(){return m});var h={app_id:r,enterprise_id:d};u(h).then(function(){var e;e=l===re["b"].REMOVE_APPROVAL?qe.t("{appName} has been unapproved.",{appName:i}):qe.t("{appName} has been unrestricted.",{appName:i});p(r);o({element:n.a.createElement(ye["b"],{position:"bottom-right",icon:"check-circle-o"},e)});var a={pendingApiCall:false};t.setState(function(){return a});c(r);s();t.maybeRefreshActiveTab()})}},{key:"maybeRefreshActiveTab",value:function e(){var t=this.props,a=t.activeTab,r=t.setInstalledAppsNeedUpdate,n=t.setApprovedAppsNeedUpdate,i=t.setRestrictedAppsNeedUpdate;a===re["g"].INSTALLED?r(true):a===re["g"].APPROVED?n(true):a===re["g"].RESTRICTED&&i(true)}},{key:"render",value:function e(){var t=this.props,a=t.appName,r=t.closeModal,i=t.mode;var s;var o;var l;var c;var u;var d;var p=this.state.pendingApiCall;if(i===re["b"].REMOVE_APPROVAL){s=qe.rt("Unapprove {appName}?",{appName:a});o=n.a.createElement("p",null,qe.rt("By unapproving <b>{appName}</b>, members will be required to request installations from their workspace admins.",{appName:a}));u=qe.t("Unapprove");d="danger"}else{s=qe.rt("Unrestrict {appName}?",{appName:a});o=n.a.createElement("p",null,qe.rt("By unrestricting <b>{appName}</b>, members will be able to install or request its installation on workspaces where it hasn\u2019t been explicitly restricted.",{appName:a}));u=qe.t("Remove restriction");d="danger"}return n.a.createElement(n.a.Fragment,null,n.a.createElement(te["h"],null,n.a.createElement(_e["a"],{title:s})),n.a.createElement(te["d"],{"data-qa":"app_management_modal_confirm",className:"padding_bottom_100"},n.a.createElement(te["e"],null,o),n.a.createElement(te["e"],null,l),c),n.a.createElement(te["f"],null,n.a.createElement(te["g"],null,n.a.createElement(z["d"],{type:"outline",onClick:r},qe.t("Back")),n.a.createElement(Oe["a"],{type:d,onClick:this.onConfirmClick,loading:p},u))))}}]);return t}(r["PureComponent"]);Ge.displayName="AppManagementModalConfirmRemove";Ge.defaultProps=Be;var He=function e(t,a){var r=Object(Z["e"])(t);var n=Object(F["i"])(t,a.appId);return{appName:n.name,appIcon:n.icons&&n.icons.image_72,orgName:r.name,orgIcon:r.icon&&r.icon.image_102,orgId:r.id,activeTab:Object(F["f"])(t)}};var We=function e(t){return{closeModal:function e(){return t(L["closeModal"].apply(void 0,arguments))},enqueueToast:function e(){return t(ge["enqueueToast"].apply(void 0,arguments))},setActiveTab:function e(){return t(F["s"].apply(void 0,arguments))},setInstalledAppsNeedUpdate:function e(){return t(F["x"].apply(void 0,arguments))},setApprovedAppsNeedUpdate:function e(){return t(F["t"].apply(void 0,arguments))},setRestrictedAppsNeedUpdate:function e(){return t(F["y"].apply(void 0,arguments))},setHighlightId:function e(){return t(F["v"].apply(void 0,arguments))},fetchResetApp:function e(){return t(D["f"].apply(void 0,arguments))},unsetAppStatus:function e(a){return t(Object(F["C"])(a))}}};var Ve=Object(o["connect"])(He,We)(Ge);var Ke={mode:re["a"].APPROVE,orgName:"",orgIcon:"",clearSelectedAppId:E["noop"],appId:""};var ze=function(e){k()(t,e);function t(e){var a;p()(this,t);a=f()(this,g()(t).call(this,e));a.state={searchSelectedAppId:""};a.onCloseModal=a.onCloseModal.bind(y()(a));a.setSearchSelectedAppId=a.setSearchSelectedAppId.bind(y()(a));return a}h()(t,[{key:"onCloseModal",value:function e(){var t=this.props.closeModal;t()}},{key:"getPanes",value:function e(){var t=this;var a=this.props,r=a.mode,i=a.appId;var s=this.state.searchSelectedAppId;var o=i||s;var l={};l[re["d"].SEARCH]={render:function e(a){return n.a.createElement(be,A()({mode:r,setSearchSelectedAppId:t.setSearchSelectedAppId},a))}};l[re["d"].CONFIRM]={render:function e(t){return n.a.createElement(Ue,A()({mode:r,appId:o},t))}};l[re["d"].CONFIRM_REMOVE_APPROVAL]={render:function e(t){return n.a.createElement(Ve,A()({mode:r,appId:i},t))}};l[re["d"].CONFIRM_REMOVE_RESTRICTION]={render:function e(t){return n.a.createElement(Ve,A()({mode:r,appId:i},t))}};return l}},{key:"setSearchSelectedAppId",value:function e(t){this.setState(function(){return{searchSelectedAppId:t}})}},{key:"render",value:function e(){var t=this.getPanes();var a=this.props,r=a.mode,i=a.appId;var s=re["d"].SEARCH;i&&(r===re["a"].APPROVE||r===re["a"].RESTRICT?s=re["d"].CONFIRM:r===re["a"].REMOVE_APPROVAL?s=re["d"].CONFIRM_REMOVE_APPROVAL:r===re["a"].REMOVE_RESTRICTION&&(s=re["d"].CONFIRM_REMOVE_RESTRICTION));return n.a.createElement(X["b"],{closeModal:this.onCloseModal,defaultPane:s,panes:t,dataQa:"app-management-approve-apps-modal"})}}]);return t}(r["PureComponent"]);ze.displayName="AppManagementModal";ze.defaultProps=Ke;var Qe=function e(t){var a=Object(Z["e"])(t);return{orgName:a.name,orgIcon:a.icon&&a.icon.image_102}};var Ye=function e(t){return{closeModal:function e(){return t(L["closeModal"].apply(void 0,arguments))},clearSelectedAppId:function e(){return t(Object(F["d"])())}}};var Je=Object(o["connect"])(Qe,Ye)(ze);var Xe=Je;var Ze=a(878);var $e=a(2029);var et=a(1957);var tt=a(43);var at=new j["b"]("enterprise_dashboard");var rt={appId:null,workspaces:[],selectedWorkspaces:[],excludedWorkspaces:[],selectedApp:{},apiCursor:"",apiTotal:null,selectionMode:re["f"].DEFAULT,switchPane:E["noop"],setIsLoading:E["noop"],addSelectedWorkspaces:E["noop"],addExcludedWorkspaces:E["noop"],setSelectionMode:E["noop"],setWorkspaces:E["noop"],setSearchQuery:E["noop"],setFirstLoad:E["noop"],isLoading:false,firstLoad:false,setSortDir:E["noop"],setApiCursor:E["noop"],setApiTotal:E["noop"],setSortBy:E["noop"],getWorkspacesByApp:E["noop"],searchWorkspacesByApp:E["noop"],pageSize:5,sortBy:"name",sortDir:"asc",searchQuery:"",rowHeaderItemClassName:"p-app_management_search_workspaces_header_item",rowClassName:"p-app_management_search_workspaces_table_view_row",featureOrgAppsDashboard:false,removeMode:false,prevPane:void 0};var nt="asc";var it="desc";var st="caret_up";var ot="caret_down";var lt={};lt[nt]=st;lt[it]=ot;var ct=function(e){k()(t,e);function t(e){var a;p()(this,t);a=f()(this,g()(t).call(this,e));var r=a.props.featureOrgAppsDashboard;a.state={rowListItems:[],alreadyGrantedWorkspaces:[],offset:0};a.tableViewControllerRef=null;a.headerItemOnClick=a.headerItemOnClick.bind(y()(a));a.clickPermissionsPane=a.clickPermissionsPane.bind(y()(a));a.onRequestNextPage=a.onRequestNextPage.bind(y()(a));a.renderInstalled=a.renderInstalled.bind(y()(a));a.renderRowName=a.renderRowName.bind(y()(a));a.handleSelectWorkspace=a.handleSelectWorkspace.bind(y()(a));a.renderSelectionLabels=a.renderSelectionLabels.bind(y()(a));a.onSearchInputChange=a.onSearchInputChange.bind(y()(a));a.resetWorkspacesByAppsState=a.resetWorkspacesByAppsState.bind(y()(a));a.searchWorkspaces=a.searchWorkspaces.bind(y()(a));a.debouncedSearchApps=Object(E["debounce"])(a.searchWorkspaces,1500,{trailing:true});a.resetSearch=a.resetSearch.bind(y()(a));var i={teamName:{id:"name",value:r?at.t("Workspace"):"",sortable:true,"data-qa":"p-app_management_search_workspaces-header-name"},installed:{id:"installed",value:r?at.t("Installed"):"",sortable:false,className:"p-app_management_search_workspaces_installed_label_col"}};var s={teamName:{value:function e(t){return a.renderRowName(t)}},installed:{value:function e(t){return a.renderInstalled(t)},className:"p-app_management_search_workspaces_installed_label_col"}};a.emptyRowTemplate={items:[{value:function e(){var t=r&&a.props.searchQuery?at.t("No workspaces matching {searchQuery} were found",{searchQuery:a.props.searchQuery}):at.t("No workspaces were found");return n.a.createElement("div",{className:"align_center"},t)}}]};a.headerData=[];a.rowTemplate={items:[]};if(e.removeMode){a.headerData.push(i.teamName);a.rowTemplate.items.push(s.teamName)}else{a.headerData.push(i.teamName,i.installed);a.rowTemplate.items.push(s.teamName,s.installed)}return a}h()(t,[{key:"componentDidMount",value:function e(){var t=this.props,a=t.workspaces,r=t.sortBy;var n=this.state.offset;this.props.setSortBy(r);a.length?this.updateRowListItemsData(n):this.fetchNewPage()}},{key:"componentDidUpdate",value:function e(t){this.maybeUpdateListRowItems(t)}},{key:"onRequestNextPage",value:function e(t){var a=this.props,r=a.workspaces,n=a.apiTotal,i=a.isLoading;if(n&&r.length>=n||i)return;this.props.setSelectionMode(re["f"].DEFAULT);this.props.addExcludedWorkspaces([]);this.fetchNewPage();var s={offset:t};this.setState(s)}},{key:"onSearchInputChange",value:function e(t){var a=t.target.value;if(null!==a&&void 0!==a&&this.props.searchQuery!==a){this.props.setSearchQuery(a);this.props.setIsLoading(true);this.resetWorkspacesByAppsState();this.debouncedSearchApps.cancel();this.debouncedSearchApps(a)}}},{key:"searchWorkspaces",value:function e(t){var a=this.props,r=a.pageSize,n=a.appId,i=a.sortBy,s=a.sortDir;var o={limit:r,app:n};i&&(o.sort=i);s&&(o.sort_dir=s);o.query=t;this.props.searchWorkspacesByApp(o)}},{key:"handleSelectWorkspace",value:function e(t,a){var r=this.props,n=r.selectionMode,i=r.apiTotal,s=r.workspaces,o=r.excludedWorkspaces,l=r.searchQuery;var c=s.length;if(0===t.length){this.props.setSelectionMode(re["f"].DEFAULT);this.props.addSelectedWorkspaces(t)}else if(n===re["f"].ALL_ITEMS_SELCTED||n===re["f"].ALL_ITEMS_MATCHING_SEARCH_QUERY_SELECTED){Object(E["includes"])(o,a)?this.props.addExcludedWorkspaces(Object(E["without"])(o,a)):this.props.addExcludedWorkspaces([].concat(ee()(o),[a]));this.props.addSelectedWorkspaces(t)}else if(t.length===c){c!==i||l?c===i&&l?this.props.setSelectionMode(re["f"].ALL_ITEMS_MATCHING_SEARCH_QUERY_SELECTED):this.props.setSelectionMode(re["f"].All_ITEMS_IN_VIEW_SELECTED):this.props.setSelectionMode(re["f"].ALL_ITEMS_SELCTED);this.props.addSelectedWorkspaces(t)}else{this.props.setSelectionMode(re["f"].DEFAULT);this.props.addSelectedWorkspaces(t)}}},{key:"clickPermissionsPane",value:function e(){this.props.switchPane(re["d"].CONFIRM_MODAL)}},{key:"determineSortState",value:function e(t,a){var r=this.props,n=r.sortBy,i=r.sortDir;var s=a.defaultSortType||nt;var o=lt[s];if(!n||n!==t)return o;var l;l=i?i===nt?st:ot:lt[s];return l}},{key:"fetchNewPage",value:function e(){var t=this.props,a=t.pageSize,r=t.apiCursor,n=t.sortBy,i=t.sortDir,s=t.searchQuery,o=t.appId;var l={limit:a,app:o};n&&(l.sort=n);i&&(l.sort_dir=i);s&&(l.query=s);r&&(l.cursor=r);this.props.setIsLoading(true);this.props.getWorkspacesByApp(l)}},{key:"resetSearch",value:function e(){this.props.setSearchQuery("");this.props.setIsLoading(true);this.resetWorkspacesByAppsState();this.debouncedSearchApps.cancel();this.searchWorkspaces("")}},{key:"headerItemOnClick",value:function e(t){var a=this.props,r=a.sortBy,n=a.sortDir,i=a.appId,s=a.pageSize,o=a.searchQuery;var l=r;var c=n;this.resetWorkspacesByAppsState();if(t.id===r){c=n&&n!==nt?nt:it;this.props.setSortDir(c)}else{l=t.id;c=t.defaultSortType?t.defaultSortType===nt?it:nt:it;this.props.setSortDir(c);this.props.setSortBy(l)}var u={limit:s,app:i};l&&(u.sort=l);c&&(u.sort_dir=c);o&&(u.query=o);this.props.setIsLoading(true);this.props.getWorkspacesByApp(u)}},{key:"makeHeader",value:function e(t){var a={id:t.id,value:t.value,className:t.className,"data-qa":t["data-qa"]};if(t.sortable){a.iconType=this.determineSortState(a.id,t);a.onClick=this.headerItemOnClick;t.defaultSortType&&(a.defaultSortType=t.defaultSortType)}return a}},{key:"makeHeaders",value:function e(t){var a=this;return t.map(function(e){return a.makeHeader(e)})}},{key:"maybeUpdateListRowItems",value:function e(t){var a=this.state.offset;var r=this.props,n=r.workspaces,i=r.isLoading,s=r.selectedWorkspaces,o=r.searchQuery;t.workspaces===n&&t.isLoading===i&&t.selectedWorkspaces===s&&t.searchQuery===o||this.updateRowListItemsData(a)}},{key:"resetWorkspacesByAppsState",value:function e(){this.props.setApiCursor("");this.props.setApiTotal(null);this.props.setWorkspaces([]);this.props.setSelectionMode(re["f"].DEFAULT);this.props.addSelectedWorkspaces([]);this.props.addExcludedWorkspaces([])}},{key:"updateRowListItemsData",value:function e(){var t=this;var a=this.props,r=a.workspaces,n=a.isLoading,i=a.removeMode;var s=[];var o=[];if(r&&r.length){var l=i?r.filter(function(e){return e.is_installed}):r;s=l.map(function(e){var a=e.id;var r=true;if(e.is_installed&&!i){r=false;o.push(a)}return{id:""+a,items:t.rowTemplate.items.map(function(t,r){return{id:"row_"+a+"__"+r,value:t.value(e),className:t.className}}),selectable:r}})}else n||(s=[{id:"row_search_query",items:[{id:"row_search_query_col",value:this.emptyRowTemplate.items[0].value()}]}]);this.setState(function(){return{rowListItems:s,alreadyGrantedWorkspaces:o}})}},{key:"renderInstalled",value:function e(t){if(this.props.featureOrgAppsDashboard)return t.is_installed?at.t("Installed"):at.t("Not Installed");return""}},{key:"renderRowName",value:function e(t){var a=t&&t.icons&&t.icons.image_68;return n.a.createElement(ke["a"],{className:"p-app_management_search_workspaces_workspace_name","data-qa":"p-app_management_search_workspaces-row-name",onClick:E["noop"]},a&&n.a.createElement("img",{src:a,style:{width:"34px",height:"34px",verticalAlign:"middle",marginRight:"1rem"},alt:t.name}),n.a.createElement("span",{className:"bold"},t.name))}},{key:"renderSelectionLabels",value:function e(){var t=this;var a=this.props,r=a.selectionMode,i=a.searchQuery,s=a.selectedWorkspaces,o=a.excludedWorkspaces,l=a.featureOrgAppsDashboard;var c="";var u="";var d=l?at.t("Clear Selection"):"";var p=l?at.t("Select all that match this search critera."):"";var m=l?at.t("Select all workspaces in this organization."):"";var h=l?at.t("All workspaces in this organization are now selected."):"";var v=l?at.t("All the workspaces that match this search critera are now selected."):"";var f=l?at.rt("{selectedWorkspaces} workspaces selected.",{selectedWorkspaces:s.length}):"";var b=l?at.rt("All {selectedWorkspaces} workspaces in view are selected.",{selectedWorkspaces:s.length}):"";var g;if(r===re["f"].DEFAULT&&s.length>0){c=f;u=d;g=function e(){t.props.addSelectedWorkspaces([]);t.props.setSelectionMode(re["f"].DEFAULT)}}else if(r===re["f"].All_ITEMS_IN_VIEW_SELECTED){c=b;if(i){u=p;g=function e(){t.props.setSelectionMode(re["f"].ALL_ITEMS_MATCHING_SEARCH_QUERY_SELECTED)}}else{u=m;g=function e(){t.props.setSelectionMode(re["f"].ALL_ITEMS_SELCTED)}}}else if(r===re["f"].ALL_ITEMS_SELCTED){c=0===o.length?h:f;u=d;g=function e(){t.props.addSelectedWorkspaces([]);t.props.setSelectionMode(re["f"].DEFAULT)}}else if(r===re["f"].ALL_ITEMS_MATCHING_SEARCH_QUERY_SELECTED){c=0===o.length?v:f;c=v;u=d;g=function e(){t.props.addSelectedWorkspaces([]);t.props.setSelectionMode(re["f"].DEFAULT)}}return n.a.createElement("div",{className:"p-app_management_search_workspaces_modal_label_section"},n.a.createElement("span",null,n.a.createElement("b",{"data-qa":"p-app_management_search_workspaces_primary_selection_label"},c),n.a.createElement(tt["a"],{key:"secondary_selection",className:"p-app_management_search_workspaces_modal_secondary_label","data-qa":"p-app_management_search_workspaces_secondary_selection_label",onClick:g},u)))}},{key:"renderAppFilterInput",value:function e(){var t=this.props,a=t.searchQuery,r=t.isLoading,i=t.apiTotal,s=t.featureOrgAppsDashboard,o=t.removeMode;var l;i&&s&&(l=o?at.t("Search {apiTotal} installations",{apiTotal:i}):at.t("Search {apiTotal} available workspaces...",{apiTotal:i}));var c=!!a&&r;return n.a.createElement(et["a"],{placeholder:i&&l,icon:"search",autoFocus:false,isLoading:c,onReset:this.resetSearch,onChange:this.onSearchInputChange,className:"p-workspace_modal_filter_search_bar",value:this.props.searchQuery,"data-qa":"p_workspace_modal_filter_search_bar"})}},{key:"render",value:function e(){var t=this;var a=this.state,r=a.rowListItems,i=a.offset;var s=this.props,o=s.sortBy,l=s.sortDir,c=s.rowHeaderItemClassName,u=s.rowClassName,d=s.switchPane,p=s.isLoading,m=s.selectedApp,h=s.firstLoad,v=s.searchQuery,f=s.apiTotal,b=s.workspaces,g=s.featureOrgAppsDashboard,_=s.removeMode,y=s.prevPane,O=s.onCloseModal;if(!g)return null;var k=this.makeHeaders(this.headerData);var E=p&&0===b.length?"0px":"330px";var C={rowHeaderItemClassName:c,rows:r,headers:k,rowClassName:u,headerItemOnClick:this.headerItemOnClick,onRequestNextPage:this.onRequestNextPage,sortBy:o,sortDir:l,height:E,newQuery:!i,ref:function e(a){t.tableViewControllerRef=a}};var S;v&&f&&(S=at.t("{apiTotal} {plural} found",{apiTotal:f,plural:f>1?"workspaces":"workspace"}));var w=[].concat(ee()(this.state.alreadyGrantedWorkspaces),ee()(this.props.selectedWorkspaces));var I=_?at.t("Remove {appName} from workspaces",{appName:Object(j["q"])(m.name)}):at.t("Add {appName} to workspaces",{appName:Object(j["q"])(m.name)});return n.a.createElement(n.a.Fragment,null,n.a.createElement(te["h"],null,n.a.createElement(te["j"],{title:I})),n.a.createElement(te["d"],{"data-qa":"p-app_management_modal_search_workspaces"},n.a.createElement(te["e"],null,h&&this.renderAppFilterInput(),n.a.createElement("div",{className:"p-app_management_search_workspaces_label"},S),h&&n.a.createElement($e["a"],A()({},C,{id:"workspace-table",selectedRows:w,onSelect:function e(a,r){return t.handleSelectWorkspace(a,r)},allowSelectAll:true})),p&&n.a.createElement(Te["a"],{"data-qa":"p_workspace_modal_loading_indicator",color:"blue",size:"jumbo"}))),!p&&this.renderSelectionLabels(),n.a.createElement(te["f"],null,n.a.createElement(te["g"],null,n.a.createElement(z["d"],{type:"outline",onClick:y?function(){return d(y)}:O},y?at.t("Back"):at.t("Cancel")),n.a.createElement(z["d"],{type:"outline",onClick:this.clickPermissionsPane},at.t("Next")))))}}]);return t}(r["PureComponent"]);ct.displayName="AppManagementInstallModalSearchWorkspaces";var ut=function e(t,a){var r=a.appId;var n=Object(P["isFeatureEnabled"])(t,"feature_org_apps_dashboard");var i=Object(F["p"])(t);var s=r||i;var o=n?s&&Object(F["i"])(t,s):null;return{selectedWorkspaces:Object(Ze["j"])(t),excludedWorkspaces:Object(Ze["f"])(t),workspaces:Object(Ze["n"])(t),isLoading:Object(Ze["h"])(t),apiCursor:Object(Ze["d"])(t),apiTotal:Object(Ze["e"])(t),firstLoad:Object(Ze["g"])(t),sortBy:Object(Ze["l"])(t),sortDir:Object(Ze["m"])(t),searchQuery:Object(Ze["i"])(t),selectionMode:Object(Ze["k"])(t),selectedApp:o,featureOrgAppsDashboard:n}};var dt=function e(t){return{addSelectedWorkspaces:function e(){return t(Ze["b"].apply(void 0,arguments))},addExcludedWorkspaces:function e(){return t(Ze["a"].apply(void 0,arguments))},setWorkspaces:function e(){return t(Ze["z"].apply(void 0,arguments))},setApiTotal:function e(){return t(Ze["s"].apply(void 0,arguments))},setApiCursor:function e(){return t(Ze["r"].apply(void 0,arguments))},setIsLoading:function e(){return t(Ze["u"].apply(void 0,arguments))},setFirstLoad:function e(){return t(Ze["t"].apply(void 0,arguments))},setSelectionMode:function e(){return t(Ze["w"].apply(void 0,arguments))},setSortBy:function e(){return t(Ze["x"].apply(void 0,arguments))},setSortDir:function e(){return t(Ze["y"].apply(void 0,arguments))},setSearchQuery:function e(){return t(Ze["v"].apply(void 0,arguments))},searchWorkspacesByApp:function e(){return t(Ze["q"].apply(void 0,arguments))},getWorkspacesByApp:function e(){return t(Ze["o"].apply(void 0,arguments))}}};ct.defaultProps=rt;var pt=Object(o["connect"])(ut,dt)(ct);var mt=a(2617);function ht(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function vt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ht(Object(a),true).forEach(function(t){J()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ht(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var ft=66;var bt="search_select_default_option";var gt=new j["b"]("enterprise_dashboard");var _t={featureOrgAppsDashboard:false,switchPane:E["noop"],setSearchSelectedAppId:E["noop"],searchForInstallableApps:E["noop"]};var yt=function(e){k()(t,e);function t(e){var a;p()(this,t);a=f()(this,g()(t).call(this,e));a.inputRef=n.a.createRef();a.debouncedSearchForInstallableApps=Object(E["debounce"])(e.searchForInstallableApps,250);a.setSelectState=a.setSelectState.bind(y()(a));a.handleSelectApp=a.handleSelectApp.bind(y()(a));a.renderSearchSelectOption=a.renderSearchSelectOption.bind(y()(a));a.renderEmptyStateMessage=a.renderEmptyStateMessage.bind(y()(a));a.state={selectedState:{filterQuery:"",isExpanded:false,selectedOption:null}};return a}h()(t,[{key:"setSelectState",value:function e(t,a){var r=t();r.filterQuery&&this.debouncedSearchForInstallableApps(r.filterQuery);this.setState(function(e){return vt({},e,{},r)},a)}},{key:"prepareSelectState",value:function e(t){return vt({filterQuery:"",options:null,selectId:"apps-list-select",isExpanded:true,selectedOption:null},t)}},{key:"handleSelectApp",value:function e(t){this.props.setSearchSelectedAppId(t.id);this.props.setSelectedApp(t);var a=t.org_status===re["c"].READY;var r=t.org_status===re["c"].WORKSPACE;if(a||r){this.props.switchPane(re["d"].OAUTH_SPEEDBUMP);return}this.props.switchPane(re["d"].SEARCH_WORKSPACE)}},{key:"renderEmptyStateMessage",value:function e(){if(!this.props.featureOrgAppsDashboard)return null;var t=this.inputRef&&this.inputRef.current;if(t&&void 0!==t.value&&!t.value.length)return null;return gt.t("No items")}},{key:"renderSearchBar",value:function e(){if(!this.props.featureOrgAppsDashboard)return null;var t=gt.t("Search for an app...");var a=gt.t("Search apps");var r=this.props.installableApps;var i=this.state,s=i.filterQuery,o=i.selectedOption;var l=this.prepareSelectState({filterQuery:s,selectedOption:o,options:r.apps});return n.a.createElement("div",{className:"p-app_management_modal_search_select"},n.a.createElement(ae["b"],{emptyStateMessage:this.renderEmptyStateMessage,isLoading:r.isLoading,selectState:l,setSelectState:this.setSelectState,optionsRowHeight:ft,renderOption:this.renderSearchSelectOption,inputRef:this.inputRef,ariaLabel:a,placeholderText:t,selectId:l.selectId,focusOnMount:true,width:"100%",maxOptionsListHeight:250,classPrefix:"p-app_management",selectDataQa:"app_management_modal_search_input",onOptionSelected:this.handleSelectApp,showDropdownIcon:false}))}},{key:"renderSearchSelectOption",value:function e(t){var a=this.props.featureOrgAppsDashboard;if(!a)return null;var r=a?gt.t("Built by Slack"):"Built by Slack";var i=a?gt.t("Not Built by Slack"):"Not Built by Slack";if(t.value===bt)return n.a.createElement("div",null,t.label);return n.a.createElement("div",{className:"p-app_management_modal_search_result"},t.icons&&t.icons.image_72&&n.a.createElement("img",{src:t.icons.image_72,className:"p-app_management_install_modal_search",alt:t.label}),n.a.createElement("div",null,n.a.createElement("strong",null,t.name)),n.a.createElement("div",null,t.isSlackOwned?n.a.createElement("span",null,r):n.a.createElement("span",null,i)))}},{key:"render",value:function e(){if(!this.props.featureOrgAppsDashboard)return null;var t=gt.t("Find an app to install");return n.a.createElement(n.a.Fragment,null,n.a.createElement(te["h"],null,n.a.createElement(te["j"],{className:"p-app_management_modal__title_bar",title:t})),n.a.createElement(te["d"],{"data-qa":"app_management_modal_search",className:"padding_bottom_100"},n.a.createElement(te["e"],{className:"margin_top_100 margin_bottom_200"},this.renderSearchBar()),n.a.createElement(te["e"],null,n.a.createElement(te["i"],{width:470,height:194,alt:"Girl Searching for Apps",src:cdn_url+"/996f4/img/enterprise/girl-searching-goat.png"}))))}}]);return t}(r["PureComponent"]);yt.displayName="AppManagementInstallModalSearchBase";yt.defaultProps=_t;var Ot=function e(t){return{setSelectedApp:function e(a){return t(Object(F["z"])(a))},searchForInstallableApps:function e(a){return t(Object(F["r"])(a))}}};var kt=function e(t){return{installableApps:Object(F["l"])(t)}};var Et=Object(o["connect"])(kt,Ot)(yt);var Ct=a(2632);var St={appName:"",appIcon:null,appURL:"",featureOrgAppsDashboard:false,isSlackOwned:false};var wt=new j["b"]("org_apps_dashboard");var jt=function e(t){var a=t.appName,r=t.appIcon,i=t.featureOrgAppsDashboard,s=t.isSlackOwned,o=t.appURL;var l=function e(){if(!i)return null;return n.a.createElement(Q["f"],{width:"auto"},n.a.createElement(Q["b"],{key:"app_summary_menuitem_0",label:wt.t("View in App Directory"),href:o,className:"p-app_management_install_app_summary__menu_app_dir_link"}))};if(!i)return null;var c=i?wt.t("Built by Slack"):"Built by Slack";var u=i?wt.t("Not Built by Slack"):"Not Built by Slack";return n.a.createElement("div",{className:"p-app_management_install_app_summary"},n.a.createElement("div",{className:"p-app_management_install_app_summary__menu"},n.a.createElement(Q["e"],{renderMenu:l,position:"bottom-right",offsetX:20},n.a.createElement(ke["a"],{className:"p-app_management_install_app_summary__menu_trigger","aria-label":wt.t("Actions for {appName}",{appName:a})},n.a.createElement(U["b"],{type:"ellipsis"})))),r&&n.a.createElement("div",{className:"p-app_management_install_app_summary__icon"},n.a.createElement("img",{src:r,alt:wt.t("Icon for {appName}",{appName:a})})),n.a.createElement("div",{className:"p-app_management_install_app_summary__app_name"},n.a.createElement("strong",null,a)),n.a.createElement("div",{className:"p-app_management_install_app_summary__app_details"},n.a.createElement("div",null,s?n.a.createElement("span",null,c):n.a.createElement("span",null,u))))};jt.displayName="AppManagementInstallAppSummary";jt.defaultProps=St;var It=jt;var Tt={appId:"",appName:"",appIcon:"",featureOrgAppsDashboard:true,switchPane:E["noop"],isSlackOwned:false,closeModal:E["noop"],clearSelectedApp:E["noop"],selectedWorkspaces:[]};var At=new j["b"]("org_apps_dashboard");var Nt=function e(t){var a=function e(a){var r=t.clearSelectedApp,n=t.closeModal,i=t.switchPane;if(a)i(a);else{n();r()}};var r=t.appName,i=t.appId,s=t.appIcon,o=t.featureOrgAppsDashboard,l=t.isSlackOwned,c=t.selectedWorkspaces;if(!o)return null;var u=re["d"].SEARCH_WORKSPACE;var d=o?At.t("Review this app\u2019s requested permissions"):"";var p=n.a.createElement("p",null,c.length>1?At.rt("Adding this app to multiple workspaces will update this app\u2019s access to be same across all the workspaces you\u2019ve selected."):"");var m={appName:r,appIcon:s,appURL:"/apps/"+i,featureOrgAppsDashboard:o,isSlackOwned:l};return n.a.createElement(n.a.Fragment,null,n.a.createElement(te["h"],null,n.a.createElement(_e["a"],{title:d})),n.a.createElement(te["d"],{"data-qa":"app_management_modal_permissions"},n.a.createElement(te["e"],{className:"margin_bottom_100"},n.a.createElement(It,m)),p&&n.a.createElement(te["e"],null,p),n.a.createElement(Me,{appId:i})),n.a.createElement(te["f"],null,n.a.createElement(te["g"],null,n.a.createElement(z["d"],{type:"outline",onClick:function e(){return a(u)}},At.t("Back")))))};Nt.defaultProps=Tt;var Pt=function e(t){var a=Object(F["o"])(t);var r=Object(Ze["j"])(t);return{appId:a.id,appName:a.name,appIcon:a.icons&&a.icons.image_72,selectedApp:a,selectedWorkspaces:r}};var Mt=Object(o["connect"])(Pt,null)(Nt);var Dt=a(246);var xt=a.n(Dt);var Rt=a(50);var Ft=a(108);var Lt={appId:null,appName:"",appIcon:"",apiTotal:0,featureOrgAppsDashboard:true,switchPane:E["noop"],isSlackOwned:false,closeModal:E["noop"],clearSelectedApp:E["noop"],selectedWorkspaces:[],excludedWorkspaces:[],setHighlightId:E["noop"],setHighlightTeams:E["noop"],enqueueToast:E["noop"],initialConfirmState:true,type:re["g"].INSTALLED,selectionMode:re["f"].DEFAULT,searchQuery:void 0};var Ut=new j["b"]("org_apps_dashboard");var Bt=function e(t){var a=Object(r["useState"])(t.initialConfirmState),i=xt()(a,2),s=i[0],o=i[1];var l=function e(a){var r=t.clearSelectedApp,n=t.closeModal,i=t.switchPane;if(a)i(a);else{n();r()}};var c=t.appName,u=t.appId,d=t.appIcon,p=t.featureOrgAppsDashboard,m=t.isSlackOwned,h=t.selectedWorkspaces,v=t.closeModal,f=t.setHighlightId,b=t.setHighlightTeams,g=t.enqueueToast,_=t.grantAppTeamAccess,y=t.selectionMode,O=t.excludedWorkspaces,k=t.searchQuery,E=t.apiTotal;if(!p)return null;var C=re["d"].SEARCH_WORKSPACE;var S=function e(){l(re["d"].PERMISSIONS)};var w=function e(){o(!s)};var j=y===re["f"].ALL_ITEMS_SELCTED?E-O.length:h.length;var I=p?Ut.t("Add {appName} to {count, plural, =1 {# workspace} other {# workspaces}}?",{count:j,appName:c}):"";var T=n.a.createElement("p",null,p?Ut.rt("Before adding this app, you may want to review what it can see and do. <a>Review app permissions</a>",null,function(e){var t=e.key,a=e.text;return n.a.createElement("a",{key:t,role:"button",tabIndex:0,onClick:S},a)}):"");var A=h.length>50&&n.a.createElement(x["a"],{className:"margin_left_175 margin_right_175 margin_bottom_100",type:"boxed",level:"info",align:"left"},n.a.createElement("span",null,Ut.rt("<strong>Note:</strong> This is a large number of workspaces. By continuing, you\u2019ll be updating this app for those workspaces.")));var N={appName:c,appIcon:d,appURL:"/apps/"+u,featureOrgAppsDashboard:p,isSlackOwned:m};var P=function e(){var a=Ut.t("{appName} is now available now on {workspacesCount, plural, =1 {# workspace} other {# workspaces}}",{appName:c,workspacesCount:j});_({allTeams:y===re["f"].ALL_ITEMS_SELCTED,appId:u,excludedTeamIds:O,teamIds:h,query:k}).then(function(){g({element:n.a.createElement(ye["b"],{position:"bottom-right",icon:"check-circle-o"},a)});if(t.type===re["g"].INSTALLED_PROFILE){var e=h.filter(function(e){return e.id});b(e)}else f(u)});v()};var M=Ut.t("I\u2019m ready to add this app");return n.a.createElement(n.a.Fragment,null,n.a.createElement(te["h"],null,n.a.createElement(_e["a"],{title:I})),n.a.createElement(te["d"],{"data-qa":"app_management_modal_confirm"},n.a.createElement(te["e"],{className:"margin_bottom_100"},n.a.createElement(It,N)),T&&n.a.createElement(te["e"],null,T),A,n.a.createElement(Rt["a"],{className:"padding_left_175",type:"inline",cursor:"pointer",text:M},n.a.createElement(Ft["a"],{onChange:w}))),n.a.createElement(te["f"],null,n.a.createElement(te["g"],null,n.a.createElement(z["d"],{type:"outline",onClick:function e(){return l(C)}},Ut.t("Back")),n.a.createElement(z["d"],{disabled:s,onClick:function e(){return P()}},Ut.t("Add App")))))};Bt.defaultProps=Lt;var qt=function e(t){var a=Object(F["o"])(t);var r=Object(Ze["j"])(t);var n=Object(Ze["f"])(t);var i=Object(Ze["e"])(t);var s=Object(Ze["k"])(t);var o=Object(Ze["i"])(t);return{apiTotal:i,appId:a.id,appName:a.name,appIcon:a.icons&&a.icons.image_72,excludedWorkspaces:n,searchQuery:o,selectedApp:a,selectedWorkspaces:r,selectionMode:s}};var Gt=function e(t){return{closeModal:function e(){return t(L["closeModal"].apply(void 0,arguments))},setHighlightId:function e(){return t(F["v"].apply(void 0,arguments))},setHighlightTeams:function e(){return t(F["w"].apply(void 0,arguments))},enqueueToast:function e(){return t(ge["enqueueToast"].apply(void 0,arguments))},grantAppTeamAccess:function e(){return t(D["i"].apply(void 0,arguments))}}};var Ht=Object(o["connect"])(qt,Gt)(Bt);var Wt={app:void 0,featureOrgAppsDashboard:false,prevPane:void 0};var Vt=new j["b"]("org_apps_dashboard");var Kt=function e(t){var a=t.switchPane,r=t.prevPane,i=t.app,s=t.featureOrgAppsDashboard,o=t.onCloseModal;if(!i)return null;var l=i.name,c=i.id,u=i.icons,d=i.isSlackOwned,p=i.links;var m="/apps/"+c;var h={appName:l,appIcon:u.image_72,appURL:(null===p||void 0===p?void 0:p.detail)||m,featureOrgAppsDashboard:s,isSlackOwned:d};return n.a.createElement(n.a.Fragment,null,n.a.createElement(te["h"],null,n.a.createElement(_e["a"],{title:s?Vt.t("Leaving Admin Dashboard to install {name}",{name:l}):""})),n.a.createElement(te["d"],{"data-qa":"app_management_modal_oauth"},n.a.createElement(te["e"],{className:"margin_bottom_100"},n.a.createElement(It,h)),n.a.createElement(te["e"],null,s?Vt.t("A new tab will be opened to complete the installation process. When your installation is finished, navigate back to the Admin Dashboard."):"")),n.a.createElement(te["f"],null,n.a.createElement(te["g"],null,n.a.createElement(z["d"],{type:"outline",onClick:r?function(){return a(r)}:o,"data-qa":"app_management_modal_back_button"},r?Vt.t("Back"):Vt.t("Cancel")),n.a.createElement(z["d"],{type:"primary",href:(null===p||void 0===p?void 0:p.install)||m,onClick:o,"data-qa":"app_management_modal_continue_button"},s?Vt.t("Continue"):""))))};Kt.defaultProps=Wt;var zt=Kt;var Qt=function e(t,a){var r=a.appId;return{app:Object(F["i"])(t,r)}};var Yt=Object(o["connect"])(Qt)(Kt);var Jt={featureOrgAppsDashboard:false,mode:re["a"].INSTALL,orgName:"",orgIcon:"",appId:"",clearSelectedApp:E["noop"],type:re["g"].INSTALLED};var Xt=function(e){k()(t,e);function t(e){var a;p()(this,t);a=f()(this,g()(t).call(this,e));a.onCloseModal=a.onCloseModal.bind(y()(a));a.setSearchSelectedAppId=a.setSearchSelectedAppId.bind(y()(a));a.state={searchSelectedAppId:""};return a}h()(t,[{key:"onCloseModal",value:function e(){var t=this.props,a=t.closeModal,r=t.clearSelectedApp,n=t.resetOrgAppsSearchWorkspaces;r();n();a()}},{key:"setSearchSelectedAppId",value:function e(t){this.setState(function(){return{searchSelectedAppId:t}})}},{key:"getPanes",value:function e(){var t=this;var a=this.props,r=a.mode,i=a.featureOrgAppsDashboard,s=a.appId,o=a.type;var l=this.state.searchSelectedAppId;var c={};var u=s||l;c[re["d"].SEARCH_WORKSPACE]={render:function e(a){return n.a.createElement(pt,A()({featureOrgAppsDashboard:i,mode:r,appId:u,prevPane:l?re["d"].APP_INSTALL:void 0,onCloseModal:t.onCloseModal},a))},modalProps:{fullscreen:true}};c[re["d"].APP_INSTALL]={render:function e(a){return n.a.createElement(Et,A()({featureOrgAppsDashboard:i,setSearchSelectedAppId:t.setSearchSelectedAppId,mode:r},a))}};c[re["d"].PERMISSIONS]={render:function e(t){return n.a.createElement(Mt,A()({featureOrgAppsDashboard:i,mode:r},t))}};c[re["d"].CONFIRM_MODAL]={render:function e(t){return n.a.createElement(Ht,A()({featureOrgAppsDashboard:i,mode:r,type:o},t))}};c[re["d"].OAUTH_SPEEDBUMP]={render:function e(a){return n.a.createElement(Yt,A()({featureOrgAppsDashboard:i,mode:r,appId:u,prevPane:r===re["a"].OAUTH?void 0:re["d"].APP_INSTALL,onCloseModal:t.onCloseModal},a))}};return c}},{key:"render",value:function e(){var t=this.getPanes();var a=this.props,r=a.mode,i=a.appId;var s=re["d"].APP_INSTALL;var o=this.state.searchSelectedAppId;var l=i||o;if(l){r===re["a"].INSTALL&&(s=re["d"].SEARCH_WORKSPACE);r===re["a"].OAUTH&&(s=re["d"].OAUTH_SPEEDBUMP)}return n.a.createElement(X["b"],{closeModal:this.onCloseModal,defaultPane:s,panes:t,className:"p-app_management_install_apps_modal",dataQa:"app_management_install_apps_modal"})}}]);return t}(r["PureComponent"]);Xt.displayName="AppManagementInstallModal";Xt.defaultProps=Jt;var Zt=function e(t,a){var r=a.appId;var n=Object(P["isFeatureEnabled"])(t,"feature_org_apps_dashboard");var i=Object(Z["e"])(t);var s=Object(F["p"])(t);var o=s||r;var l=n?o&&Object(F["i"])(t,o):null;return{orgName:i.name,orgIcon:i.icon&&i.icon.image_102,selectedApp:l}};var $t=function e(t){return{closeModal:function e(){return t(L["closeModal"].apply(void 0,arguments))},clearSelectedApp:function e(){return t(Object(F["c"])())},resetOrgAppsSearchWorkspaces:function e(){return t(Object(Ze["p"])())}}};var ea=Object(o["connect"])(Zt,$t)(Xt);var ta=ea;var aa=a(296);var ra={appId:null,appName:"",appIcon:"",featureOrgAppsDashboard:true,isSlackOwned:false,closeModal:E["noop"],clearSelectedApp:E["noop"],setHighlightId:E["noop"],enqueueToast:E["noop"],type:re["g"].INSTALLED,workspaceCount:0};var na=new j["b"]("org_apps_dashboard");var ia=function e(t){var a=t.appName,i=t.appId,s=t.appIcon,o=t.clearSelectedApp,l=t.featureOrgAppsDashboard,c=t.isSlackOwned,u=t.closeModal,d=t.setHighlightId,p=t.enqueueToast,m=t.type,h=t.uninstallOrgApp,v=t.workspaceCount;var f=l?na.t("Uninstall this app from your org?"):"";var b=l?na.t("{appName} has been uninstalled",{appName:a}):"";var g=l?na.t("I want to uninstall this app from my org"):"";var _=l?na.t("Cancel"):"";var y=l?na.t("Uninstall"):"";var O=l?na.rt("This app will also be removed from <strong>your organization</strong> and <strong>{workspaceCount, plural, =1 {# workspace} other {# workspaces}}</strong>. Admins and owners of these workspaces will notified that this app will be removed.",{workspaceCount:v},function(e){var t=e.text;return n.a.createElement("strong",null,t)}):"";var k=Object(r["useState"])(true),E=xt()(k,2),C=E[0],S=E[1];var w=Object(r["useCallback"])(function(){h({appId:i}).then(function(){p({element:n.a.createElement(ye["b"],{position:"bottom-right"},b)})});m===re["g"].INSTALLED_PROFILE&&Object(R["b"])(Object(R["a"])().apps.setAppDetailViewOpen(false));d(i);o();u()},[i,o,u,p,d,b,m,h]);var j=Object(r["useCallback"])(function(){o();u()},[o,u]);var I=function e(){S(!C)};var T={appName:a,appIcon:s,appURL:"/apps/"+i,featureOrgAppsDashboard:l,isSlackOwned:c};return n.a.createElement(te["a"],{closeModal:u},n.a.createElement(te["h"],null,n.a.createElement(_e["a"],{title:f})),n.a.createElement(te["d"],{"data-qa":"app_management_modal_confirm"},n.a.createElement(te["e"],{className:"margin_bottom_100"},n.a.createElement(It,T)),n.a.createElement(te["e"],null,n.a.createElement("p",null,O)),n.a.createElement(Rt["a"],{className:"padding_left_175",type:"inline",cursor:"pointer",text:g},n.a.createElement(Ft["a"],{"data-qa":"app_management_uninstall_checkbox",onChange:I}))),n.a.createElement(te["f"],null,n.a.createElement(te["g"],null,n.a.createElement(z["d"],{type:"outline",onClick:j},_),n.a.createElement(z["d"],{"data-qa":"app_management_uninstall_confirm",disabled:C,onClick:w},y))))};ia.displayName="AppManagementUninstallModal";ia.defaultProps=ra;var sa=function e(t){var a;var r=Object(F["o"])(t);if(!r)return{};var n=null===r||void 0===r?void 0:null===(a=r.teams_installed_on)||void 0===a?void 0:a.count;return{appId:r.id,appName:r.name,appIcon:r.icons&&r.icons.image_72,selectedApp:r,workspaceCount:n}};var oa=function e(t){return Object(aa["bindActionCreators"])({clearSelectedApp:F["c"],closeModal:L["closeModal"],setHighlightId:F["v"],setInstalledAppsNeedUpdate:F["x"],enqueueToast:ge["enqueueToast"],uninstallOrgApp:D["l"]},t)};var la=Object(o["connect"])(sa,oa)(ia);var ca={appId:null,appName:"",appIcon:"",apiTotal:0,featureOrgAppsDashboard:true,switchPane:E["noop"],isSlackOwned:false,closeModal:E["noop"],clearSelectedApp:E["noop"],selectedWorkspaces:[],excludedWorkspaces:[],setHighlightId:E["noop"],setHighlightTeams:E["noop"],enqueueToast:E["noop"],initialConfirmState:true,type:re["g"].INSTALLED,selectionMode:re["f"].DEFAULT,searchQuery:void 0};var ua=new j["b"]("org_apps_dashboard");var da=function e(t){var a=t.appName,i=t.appId,s=t.appIcon,o=t.featureOrgAppsDashboard,l=t.isSlackOwned,c=t.selectedWorkspaces,u=t.closeModal,d=t.setHighlightId,p=t.setHighlightTeams,m=t.enqueueToast,h=t.revokeAppTeamAccess,v=t.selectionMode,f=t.excludedWorkspaces,b=t.searchQuery,g=t.switchPane,_=t.apiTotal,y=t.type;var O=v===re["f"].ALL_ITEMS_SELCTED?_-f.length:c.length;var k=o?ua.t("Remove {appName} from {count, plural, =1 {# workspace} other {# workspaces}}?",{appName:a,count:O}):"";var E=o?ua.t("{appName} has been removed from {count, plural, =1 {# workspace} other {# workspaces}}",{appName:a,count:O}):"";var C=o?ua.t("Admins and owners of these workspaces will be notified that this app will be removed."):"";var S=o?ua.t("I\u2019m ready to remove this app"):"";var w=o?ua.t("Back"):"";var j=o?ua.t("Remove App"):"";var I=Object(r["useState"])(true),T=xt()(I,2),A=T[0],N=T[1];var P=Object(r["useCallback"])(function(){g(re["d"].SEARCH_WORKSPACE)},[g]);var M=function e(){N(!A)};var D=Object(r["useCallback"])(function(){h({allTeams:v===re["f"].ALL_ITEMS_SELCTED,appId:i,excludedTeamIds:f,teamIds:c,query:b}).then(function(){m({element:n.a.createElement(ye["b"],{position:"bottom-right"},E)})});if(y===re["g"].INSTALLED_PROFILE){if(v===re["f"].ALL_ITEMS_SELCTED){var e=c.filter(function(e){return e.id});p(e)}}else d(i);u()},[i,u,m,f,h,b,c,v,d,p,E,y]);var x={appName:a,appIcon:s,appURL:"/apps/"+i,featureOrgAppsDashboard:o,isSlackOwned:l};return n.a.createElement(n.a.Fragment,null,n.a.createElement(te["h"],null,n.a.createElement(_e["a"],{title:k})),n.a.createElement(te["d"],{"data-qa":"app_management_modal_confirm"},n.a.createElement(te["e"],{className:"margin_bottom_100"},n.a.createElement(It,x)),n.a.createElement(te["e"],{className:"margin_bottom_100"},n.a.createElement("p",null,C)),n.a.createElement(Rt["a"],{className:"padding_left_175",type:"inline",cursor:"pointer",text:S},n.a.createElement(Ft["a"],{onChange:M,"data-qa":"app_management_uninstall_checkbox"}))),n.a.createElement(te["f"],null,n.a.createElement(te["g"],null,n.a.createElement(z["d"],{type:"outline",onClick:P},w),n.a.createElement(z["d"],{disabled:A,onClick:D,type:"danger","data-qa":"app_management_uninstall_confirm"},j))))};da.defaultProps=ca;var pa=function e(t){var a=Object(F["o"])(t);var r=Object(Ze["j"])(t);var n=Object(Ze["f"])(t);var i=Object(Ze["e"])(t);var s=Object(Ze["k"])(t);var o=Object(Ze["i"])(t);return{apiTotal:i,appId:a.id,appName:a.name,appIcon:a.icons&&a.icons.image_72,excludedWorkspaces:n,searchQuery:o,selectedApp:a,selectedWorkspaces:r,selectionMode:s}};var ma=function e(t){return Object(aa["bindActionCreators"])({setHighlightId:F["v"],setHighlightTeams:F["w"],enqueueToast:ge["enqueueToast"],revokeAppTeamAccess:D["j"]},t)};var ha=Object(o["connect"])(pa,ma)(da);var va={appId:void 0,clearSelectedApp:E["noop"]};var fa=function e(t,a){var r={};r[re["d"].SEARCH_WORKSPACE]={render:function e(r){return n.a.createElement(pt,A()({removeMode:true,appId:t,onCloseModal:a},r))},modalProps:{fullscreen:true}};r[re["d"].CONFIRM_MODAL]={render:function e(t){return n.a.createElement(ha,A()({closeModal:a},t))}};return r};var ba=function e(t){var a=t.appId,i=t.closeModal,s=t.clearSelectedApp,o=t.resetOrgAppsSearchWorkspaces;var l=Object(r["useCallback"])(function(){s();o();i()},[s,i,o]);return n.a.createElement(X["b"],{closeModal:l,defaultPane:re["d"].SEARCH_WORKSPACE,panes:fa(a,l),className:"p-app_management_uninstall_apps_modal","data-qa":"app_management_uinstall_apps_modal"})};ba.displayName="AppManagementUninstallModal";ba.defaultProps=va;var ga=function e(t){var a=Object(P["isFeatureEnabled"])(t,"feature_org_apps_dashboard");var r=Object(Z["e"])(t);var n=Object(F["p"])(t);var i=a?n&&Object(F["i"])(t,n):null;return{orgName:r.name,orgIcon:r.icon&&r.icon.image_102,selectedApp:i}};var _a=function e(t){return{closeModal:function e(){return t(L["closeModal"].apply(void 0,arguments))},clearSelectedApp:function e(){return t(Object(F["c"])())},resetOrgAppsSearchWorkspaces:function e(){return t(Object(Ze["p"])())}}};var ya=Object(o["connect"])(ga,_a)(ba);function Oa(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function ka(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Oa(Object(a),true).forEach(function(t){J()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Oa(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Ea=new j["b"]("enterprise_dashboard");var Ca={app:{},openModal:E["noop"],setSelectedAppId:E["noop"],featureOrgAppsDashboard:false,setSelectedApp:E["noop"],status:{},menuProps:{},type:null};var Sa=function e(t){var a=t.app,r=t.featureOrgAppsDashboard,i=t.menuProps,s=t.openModal,o=t.setSelectedApp,l=t.setSelectedAppId,c=t.status,u=t.type;var d=function e(){o(a);l(a.id);s({element:n.a.createElement(Xe,{mode:re["a"].APPROVE,appId:a.id})})};var p=function e(){o(a);l(a.id);s({element:n.a.createElement(Xe,{mode:re["a"].RESTRICT,appId:a.id})})};var m=function e(){o(a);l(a.id);s({element:n.a.createElement(Xe,{mode:re["a"].REMOVE_APPROVAL,appId:a.id})})};var h=function e(){o(a);l(a.id);s({element:n.a.createElement(Xe,{mode:re["a"].REMOVE_RESTRICTION,appId:a.id})})};var v=function e(){o(a);l(a.id);s({element:n.a.createElement(ta,{featureOrgAppsDashboard:r,mode:re["a"].OAUTH,type:u,appId:a.id})})};var f=function e(){o(a);l(a.id);s({element:n.a.createElement(ta,{featureOrgAppsDashboard:r,mode:re["a"].INSTALL,type:u,appId:a.id})})};var b=function e(){o(a);l(a.id);s({element:n.a.createElement(ya,{type:u,appId:a.id})})};var g=function e(){o(a);l(a.id);s({element:n.a.createElement(la,{type:u})})};var _=null===a||void 0===a?void 0:a.org_status;var y=re["e"].NO_POLICY;u===re["g"].APPROVED?y=re["e"].APPROVED:u===re["g"].RESTRICTED?y=re["e"].RESTRICTED:c&&(c.isApproved?y=re["e"].APPROVED:c.isRestricted&&(y=re["e"].RESTRICTED));var O=ka({},i,{width:"15rem",kbNavActive:true,stripTerminalSeparators:true});var k=r?Ea.t("View in app directory"):Ea.t("View in App Directory");var E=r?Ea.t("Approve this app"):Ea.t("Approve this app...");var C=r?Ea.t("Restrict this app"):Ea.t("Restrict this app...");var S=r?Ea.t("Unapprove app"):Ea.t("Unapprove app...");var w=r?Ea.t("Unrestrict app"):Ea.t("Unrestrict app...");var j=r?Ea.t("Add to more workspaces"):Ea.t("Add to more workspaces...");var I=r?Ea.t("Remove from a workspace"):Ea.t("Remove from a workspace...");var T=r?Ea.t("Uninstall from your org"):Ea.t("Uninstall from your org...");var N=r?Ea.t("Install on your org"):Ea.t("Install on your org...");var P={viewInAppDir:n.a.createElement(Q["b"],{label:k,href:"/apps/"+a.id,target:"_blank",key:"org-app-menu_view-in-app-dir","data-qa":"org-app-menu_view-in-app-dir"}),approveThisApp:n.a.createElement(Q["b"],{label:E,onSelected:d,key:"org-app-menu_approve-app","data-qa":"org-app-menu_approve-app"}),restrictThisApp:n.a.createElement(Q["b"],{label:C,onSelected:p,key:"org-app-menu_restrict-app","data-qa":"org-app-menu_restrict-app"}),unapproveApp:n.a.createElement(Q["b"],{label:S,onSelected:m,key:"org-app-menu_remove-approval","data-qa":"org-app-menu_remove-approval",danger:true}),unrestrictApp:n.a.createElement(Q["b"],{label:w,onSelected:h,key:"org-app-menu_remove-restriction","data-qa":"org-app-menu_remove-restriction",danger:true}),separator:n.a.createElement(Q["d"],{key:"org-app-menu_separator","data-qa":"org-app-menu_separator"}),addToMoreWorkspaces:n.a.createElement(Q["b"],{onSelected:f,label:j,key:"org-app-menu_add_to_more_workspaces","data-qa":"org-app-menu_add_to_more_workspaces"}),removeFromAWorkspace:n.a.createElement(Q["b"],{onSelected:b,label:I,key:"org-app-menu_remove_from_a_workspace","data-qa":"org-app-menu_remove_from_a_workspace"}),uninstallFromYourOrg:n.a.createElement(Q["b"],{onSelected:g,label:T,key:"org-app-menu_uninstall_from_your_org","data-qa":"org-app-menu_uninstall_from_your_org",danger:true}),installOnYourOrg:n.a.createElement(Q["b"],{onSelected:v,label:N,key:"org-app-menu_install_on_your_org","data-qa":"org-app-menu_install_on_your_org"})};var M;var D;var x;r&&(_===re["c"].READY?D=[P.installOnYourOrg]:_===re["c"].INSTALLED?D=[P.addToMoreWorkspaces,P.removeFromAWorkspace,P.uninstallFromYourOrg]:_===re["c"].WORKSPACE&&(D=[]));y===re["e"].NO_POLICY?M=[!r&&P.viewInAppDir,!r&&P.separator,P.approveThisApp,P.restrictThisApp]:y===re["e"].APPROVED?M=[!r&&P.viewInAppDir,P.separator,P.unapproveApp]:y===re["e"].RESTRICTED&&(M=[!r&&P.viewInAppDir,P.separator,P.unrestrictApp]);r&&(x=[P.separator,P.viewInAppDir]);var R=r?Ea.t("Install Menu"):"";return n.a.createElement("div",{className:"p-app_management_menu_container","data-qa":"menu-wrapper"},n.a.createElement(Q["f"],A()({},O,{"aria-label":R}),r&&D,r&&n.a.createElement(Q["d"],{key:"org-app-menu_separator","data-qa":"org-app-menu_separator"}),M,r&&x))};Sa.displayName="OrgAppMenu";Sa.defaultProps=Ca;var wa=function e(t,a){return{status:Object(F["g"])(t,a.app&&a.app.id)}};var ja=function e(t){return{setSelectedAppId:function e(a){return t(Object(F["A"])(a))}}};var Ia=Object(o["connect"])(wa,ja)(Sa);var Ta=new j["b"]("enterprise_dashboard");var Aa=5;var Na={app:{}};var Pa=function e(t){var a=t.app;if(!a||!a.id)return null;var r=function e(r){return n.a.createElement(Ia,A()({app:a},t,{menuProps:r}))};var i=Ta.t("Manage");return n.a.createElement(Q["e"],{position:"bottom-right",offsetY:Aa,renderMenu:r,shouldAnchorAtInitialPosition:true,"data-qa":"app-profile-menu_trigger"},n.a.createElement(z["d"],{type:"outline","data-qa":"manage_btn"},i," ",n.a.createElement(U["b"],{type:"chevron-medium-down"})))};Pa.displayName="AppProfileHeaderManageMenu";Pa.defaultProps=Na;var Ma=Pa;var Da=a(245);var xa=a.n(Da);var Ra=a(2795);var Fa=a(232);var La=a(910);var Ua=a(1630);var Ba=a(2427);var qa=new j["b"]("enterprise_dashboard");var Ga={orgName:""};var Ha=function(e){k()(t,e);function t(){p()(this,t);return f()(this,g()(t).apply(this,arguments))}h()(t,[{key:"render",value:function e(){var t=this.props.orgName;var a=cdn_url+"/80588/img/enterprise/empty_apps_state.png";var r=qa.t("This app hasn\u2019t been installed on {orgName}.",{orgName:t});return n.a.createElement("div",{className:"p-app_profile_empty_state_container"},n.a.createElement("img",{src:a,alt:"",className:"auto_width margin_bottom_100"}),n.a.createElement("h3",{className:"black margin_bottom_75"},r))}}]);return t}(r["PureComponent"]);Ha.displayName="AppProfileInstallationsEmptyState";Ha.defaultProps=Ga;var Wa=Ha;var Va=new j["b"]("enterprise_dashboard");var Ka={appId:null,workspacesByApp:[],workspacesByAppApiCursor:"",workspacesByAppApiTotal:null,workspacesByAppLoading:false,headerItemOnClick:E["noop"],pageSize:50,sortBy:"team_name",sortDir:null,searchQuery:"",rowHeaderItemClassName:"p-app_management_table_view_header_item",rowClassName:"p-app_management_table_view_row",columns:[],isSelectionBarShowing:false,fetchWorkspacesByApp:E["noop"],setWorkspacesByAppAAA:E["noop"],orgName:"",highlightTeams:[],feature_use_new_list_teams_response:false};var za="asc";var Qa="desc";var Ya="caret_down";var Ja="caret_up";var Xa={};Xa[za]=Ya;Xa[Qa]=Ja;var Za=function(e){k()(t,e);function t(e){var a;p()(this,t);a=f()(this,g()(t).call(this,e));var r=a.props,i=r.sortBy,s=r.sortDir;a.state={rowListItems:[],sortBy:i,sortDir:s,offset:0,height:null,paddingBottom:null,isLoading:false};a._isMounted=false;a.tableViewControllerRef=null;a.headerItemOnClick=a.headerItemOnClick.bind(y()(a));a.onRequestNextPage=a.onRequestNextPage.bind(y()(a));a.refreshTableHeight=a.refreshTableHeight.bind(y()(a));a.refreshTableHeightPolitely=a.refreshTableHeightPolitely.bind(y()(a));a.emptyRowTemplate={items:[{value:function e(t){var a=t.searchQuery;var r=Va.rt("No workspaces were found matching <b>{query}</b>",{query:a});return n.a.createElement("div",{className:"align_center"},r)}}]};return a}h()(t,[{key:"componentDidMount",value:function e(){this._isMounted=true;this.refreshTableHeightPolitely();window.addEventListener("resize",this.refreshTableHeightPolitely);var t=this.props,a=t.workspacesByApp,r=t.workspacesByAppApiCursor;a&&a.length||r?this.updateRowListItemsData():this.fetchNewPage()}},{key:"UNSAFE_componentWillReceiveProps",value:function e(t){this.maybeUpdateSearchQuery(t)}},{key:"componentDidUpdate",value:function e(t){t.isSelectionBarShowing!==this.props.isSelectionBarShowing&&this.refreshTableHeightPolitely();this.maybeUpdateListRowItems(t);this.maybeFetchNextPage(t)}},{key:"componentWillUnmount",value:function e(){this._isMounted=false;window.removeEventListener("resize",this.refreshTableHeightPolitely)}},{key:"onRequestNextPage",value:function e(t){if(!this._isMounted)return;var a=this.props,r=a.workspacesByApp,n=a.workspacesByAppApiTotal;if(n&&r.length>=n)return;this.fetchNewPage();var i={offset:t};this.setState(i)}},{key:"determineSortState",value:function e(t,a){var r=this.state,n=r.sortBy,i=r.sortDir;var s=a.defaultSortType||za;var o=Xa[s];if(!n||n!==t)return o;var l;l=i?i===za?Ya:Ja:Xa[s];return l}},{key:"fetchNewPage",value:function e(){var t=this;if(!this._isMounted)return;var a=this.state,r=a.sortBy,n=a.sortDir;var i=this.props,s=i.appId,o=i.fetchWorkspacesByApp,l=i.setWorkspacesByAppAAA,c=i.workspacesByApp,u=i.pageSize,d=i.searchQuery,p=i.workspacesByAppApiCursor;if(!s)return;var m={limit:u,app:s};this.props.feature_use_new_list_teams_response&&(m.use_new_list_teams_response=true);r&&(m.sort=r);n&&(m.sort_dir=n);null!==d&&void 0!==d&&Object(E["trim"])(d).length&&(m.query=d);p&&(m.cursor=p);var h={isLoading:true};this.setState(function(){return h});o(m).then(function(e){if(!t._isMounted)return;var a={isLoading:false};t.setState(function(){return a});var r=p&&e.next_cursor&&e.next_cursor!==p;var n=!c||!c.length;var i;i=n&&!r?e.teams:c.concat(e.teams);l({id:s,teams:i,workspacesByAppApiCursor:e.next_cursor,workspacesByAppApiTotal:e.count})})}},{key:"headerItemOnClick",value:function e(t){var a=this;var r=this.state,n=r.sortBy,i=r.sortDir;var e=this.props.headerItemOnClick;var s=n;var o=i;if(t.id===n)o=i&&i!==za?za:Qa;else{s=t.id;o=t.defaultSortType?t.defaultSortType===za?Qa:za:Qa}var l={sortBy:s,sortDir:o};this.setState(function(){return l},function(){a.resetWorkspacesByAppsState();e&&e(t)})}},{key:"makeHeader",value:function e(t){var a={id:t.id,value:t.header.value,className:t.header.className,"data-qa":t.header["data-qa"]};if(t.header.sortable){a.iconType=this.determineSortState(a.id,t.header);a.onClick=this.headerItemOnClick;t.header.defaultSortType&&(a.defaultSortType=t.header.defaultSortType)}return a}},{key:"makeHeaders",value:function e(t){var a=this;return t.map(function(e){return a.makeHeader(e)})}},{key:"maybeFetchNextPage",value:function e(t){var a=this.props,r=a.appId,n=a.workspacesByAppLoading;var i=n&&!t.workspacesByAppLoading;var s=r&&r!==t.appId;r&&(i||s)&&this.fetchNewPage()}},{key:"maybeUpdateListRowItems",value:function e(t){var a=this.state.offset;var r=this.props,n=r.searchQuery,i=r.workspacesByApp,s=r.workspacesByAppLoading,o=r.columns,l=r.highlightTeams;t.workspacesByApp===i&&t.searchQuery===n&&t.workspacesByAppLoading===s&&t.columns===o&&t.highlightTeams===l||this.updateRowListItemsData(a)}},{key:"maybeUpdateSearchQuery",value:function e(t){var a=this.props.searchQuery;t.searchQuery!==a&&this.resetWorkspacesByAppsState()}},{key:"refreshTableHeight",value:function e(){var t=window.innerHeight;if(!this.tableViewControllerRef||!this.tableViewControllerRef.tableViewContainerNode)return;var a=this.tableViewControllerRef.tableViewContainerNode.querySelectorAll(".c-table_view_all_rows_container")[0];if(!a)return;var r=a.getBoundingClientRect();var n=this.props.isSelectionBarShowing?Ua["a"]:1;var i=t-(r&&r.top);var s=64;var o=Math.max(s,i-n);var l={height:o+"px",paddingBottom:n};this.setState(l)}},{key:"refreshTableHeightPolitely",value:function e(){window.requestAnimationFrame(this.refreshTableHeight)}},{key:"resetWorkspacesByAppsState",value:function e(){var t=this.props,a=t.appId,r=t.setWorkspacesByAppAAA;r({id:a,teams:[],workspacesByAppApiCursor:null,workspacesByAppApiTotal:null,workspacesByAppLoading:true})}},{key:"updateRowListItemsData",value:function e(){var t=this;if(!this._isMounted)return;var a=this.props,r=a.workspacesByApp,n=a.workspacesByAppLoading,i=a.columns,s=a.highlightTeams;var o=[];if(r&&r.length)o=r.map(function(e,a){var r=a;var n;n=t.props.feature_use_new_list_teams_response?e.id:e.team_id;return{id:"row_"+n,items:i.map(function(a){return{id:"row_"+n+"_col_"+a.id,value:a.rowTemplate.value(e,t.props.feature_use_new_list_teams_response),className:a.rowTemplate.className}}),highlight:s[r]===n}});else if(!n){var l=this.props.searchQuery;if(null===l||void 0===l||!l.length){this.setState(function(){return{rowListItems:o}});return}o=[{id:"row_search_query",items:[{id:"row_search_query_col",value:this.emptyRowTemplate.items[0].value({searchQuery:l})}]}]}this.setState(function(){return{rowListItems:o}})}},{key:"render",value:function e(){var t=this;var a=this.state,r=a.sortBy,i=a.sortDir,s=a.height,o=a.rowListItems,l=a.offset,c=a.paddingBottom,u=a.isLoading;var d=this.props,p=d.rowHeaderItemClassName,m=d.rowClassName,h=d.columns,v=d.workspacesByAppApiTotal,f=d.searchQuery,b=d.orgName;if(0===v&&!f&&!u)return n.a.createElement("div",{className:"c-app_management_indent_half"},n.a.createElement(Wa,{orgName:b}));var g=this.makeHeaders(h);return n.a.createElement("div",{style:{paddingBottom:c}},n.a.createElement(La["a"],{rows:o,headers:g,rowHeaderItemClassName:p,rowClassName:m,headerItemOnClick:this.headerItemOnClick,onRequestNextPage:this.onRequestNextPage,sortBy:r,sortDir:i,height:s,isLoading:u,newQuery:!l,ref:function e(a){t.tableViewControllerRef=a}}))}}]);return t}(r["PureComponent"]);Za.displayName="WorkspacesByAppList";Za.defaultProps=Ka;var $a=function e(t){return{feature_use_new_list_teams_response:Object(P["isFeatureEnabled"])(t,"feature_use_new_list_teams_response")}};var er=function e(t){return{fetchWorkspacesByApp:function e(a){return t(Object(Fa["q"])(a))},setWorkspacesByAppAAA:function e(a){return t(Object(F["B"])(a))}}};var tr=Object(o["connect"])($a,er)(Za);var ar=new j["b"]("enterprise_dashboard");var rr={orgName:"",appId:null,workspacesByApp:[],workspacesByAppApiCursor:void 0,workspacesByAppApiTotal:void 0,workspacesByAppLoading:void 0,workspacesByAppSortBy:void 0,workspacesByAppSortDir:void 0,searchQuery:"",highlightTeams:[]};var nr=function(e){k()(t,e);function t(){p()(this,t);return f()(this,g()(t).apply(this,arguments))}h()(t,[{key:"getWorkspacesByAppListProps",value:function e(){var t=this.props,a=t.columns,r=t.appId,n=t.workspacesByApp,i=t.workspacesByAppApiCursor,s=t.workspacesByAppApiTotal,o=t.workspacesByAppLoading,l=t.searchQuery,c=t.orgName,u=t.highlightTeams;return{columns:a,appId:r,workspacesByApp:n,workspacesByAppApiCursor:i,workspacesByAppApiTotal:s,workspacesByAppLoading:o,searchQuery:l,orgName:c,highlightTeams:u}}},{key:"renderAppFilterInput",value:function e(){var t=this.props,a=t.searchQuery,r=t.workspacesByAppLoading,i=t.actions;var s=ar.t("Filter by name...");var o=!!a&&r;return n.a.createElement(et["a"],{placeholder:s,icon:"search",autoFocus:false,isLoading:o,onChange:i.onSearchInputChange,className:"p-app_management_filter_search_bar",value:a,"data-qa":"ent-app-profile-installations-filter"})}},{key:"render",value:function e(){var t=[this.renderAppFilterInput()];var a=this.props.workspacesByAppApiTotal;var r=this.getWorkspacesByAppListProps();var i=null===a||isNaN(a)?null:parseInt(a,10);var s=ar.t("{total, plural, =0 {Workspace Installations} =1 {# Workspace Installation} other {# Workspace Installations}}",{total:i});return n.a.createElement("div",{className:"c-selection_bar_container c-selection_bar_container--position_relative"},n.a.createElement(Ra["a"],{"data-qa":"ent-app-profile-installations-action-bar",title:s,actions:t}),n.a.createElement("div",{className:"c-app_management_indent_half p-app_management_workspaces_by_app_list"},n.a.createElement(tr,r)))}}]);return t}(r["PureComponent"]);nr.displayName="AppManageWorkspaces";nr.defaultProps=rr;var ir=function e(t,a){var r=a.appId;var n=Object(F["q"])(t,r)||{};var i=Object(F["k"])(t);var s=n.workspacesByAppApiCursor,o=n.workspacesByAppApiTotal,l=n.workspacesByAppLoading;var c=n.teams;return{workspacesByApp:c,workspacesByAppApiCursor:s,workspacesByAppApiTotal:o,workspacesByAppLoading:l,highlightTeams:i}};var sr=Object(o["connect"])(ir,null)(nr);var or=a(270);function lr(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function cr(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?lr(Object(a),true).forEach(function(t){J()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):lr(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var ur=new j["b"]("enterprise_dashboard");function dr(e){var t=e.onWorkspaceNameClick;var a=[mr({onWorkspaceNameClick:t}),hr(),vr()];return{columns:a}}function pr(e,t){var a=t.actions,r=t.dispatch;var n=a.apps;var i=333;var s=Object(aa["bindActionCreators"])(n[e],r);var o=Object(E["debounce"])(function(e){var t=null!==e&&void 0!==e&&e.length?e:"";s.setWorkspacesByAppSearchQuery(t)},i,{trailing:true});function l(e){var t=e.target.value;o(t)}return cr({},s,{onSearchInputChange:l})}function mr(e){var t=e.onWorkspaceNameClick;return{id:"team_name",header:{value:ur.t("Workspace"),sortable:true,"data-qa":"ent-app-profile-installations-header-name"},rowTemplate:{value:function e(a,r){var i=a&&a.icons&&a.icons.image_68;if(!r)return n.a.createElement(ke["a"],{className:"p-app_management_table_view_workspace_name","data-qa":"ent-app-profile-installations-row-name",onClick:function e(){return t(a.team_id)}},i&&n.a.createElement("img",{src:i,style:{width:"34px",height:"34px",verticalAlign:"middle",marginRight:"1rem"},alt:a.name}),n.a.createElement("span",{className:"bold"},a.team_name));return n.a.createElement(ke["a"],{className:"p-app_management_table_view_workspace_name","data-qa":"ent-app-profile-installations-row-name",onClick:function e(){return t(a.id)}},i&&n.a.createElement("img",{src:i,style:{width:"34px",height:"34px",verticalAlign:"middle",marginRight:"1rem"},alt:a.name}),n.a.createElement("span",{className:"bold"},a.name))}}}}function hr(){return{id:"installed_on",header:{value:ur.t("Installed On"),sortable:true,"data-qa":"ent-app-profile-installations-header-installed_on"},rowTemplate:{value:function e(t){var a=t.installed_by&&t.installed_by&&t.installed_by.first_installation&&t.installed_by&&t.installed_by.first_installation.date;var r=new Date(1e3*a).toLocaleDateString();return n.a.createElement("div",null,r)}}}}function vr(){return{id:"installed_by",header:{value:ur.t("Installed By"),sortable:true,"data-qa":"ent-app-profile-installations-header-installed_by"},rowTemplate:{value:function e(t){var a=t.installed_by&&t.installed_by.count||1;var r=ur.t("{userCount, plural, =1 {# user} other {# users}}",{userCount:a});return n.a.createElement("div",null,r)}}}}var fr=Object(or["a"])("feature_use_new_list_teams_response")(mr);var br={orgName:"",appId:null,workspacesByApp:[],workspacesByAppApiCursor:null,workspacesByAppApiTotal:null,workspacesByAppLoading:null,workspacesByAppSortBy:null,workspacesByAppSortDir:null,searchQuery:""};var gr=function(e){k()(t,e);function t(e){var a;p()(this,t);a=f()(this,g()(t).call(this,e));var r=e.actions,n=e.dispatch;a.actions=pr("installations",{actions:r,dispatch:n});a.onWorkspaceNameClick=a.onWorkspaceNameClick.bind(y()(a));return a}h()(t,[{key:"onWorkspaceNameClick",value:function e(t){var a=this.props,r=a.actions,n=a.dispatch;return n(r.router.navigateTo("/organization/teams/"+t))}},{key:"render",value:function e(){var t=this.props,a=t.actions,r=t.dispatch,i=xa()(t,["actions","dispatch"]);var s=dr({workspacesByApp:i.workspacesByApp,onWorkspaceNameClick:this.onWorkspaceNameClick});return n.a.createElement(sr,A()({},s,i,{actions:this.actions}))}}]);return t}(r["PureComponent"]);gr.displayName="AppProfileInstallations";gr.defaultProps=br;var _r=gr;var yr=a(1292);var Or=new j["b"]("enterprise_dashboard");var kr=function e(){var t=cdn_url+"/80588/img/enterprise/empty_apps_state_restricted.png";var a=Or.t("Permissions can\u2019t be shown for this app");var r=Or.rt("This app was not installed via the App Directory, which means Slack has not reviewed this app and can\u2019t confirm the permissions it requests.");var i=Or.rt("If you have questions about the type of data this app can access, reach out to the person who installed it.");return n.a.createElement("div",{className:"p-app_profile_empty_state_container p-app_profile_permissions_empty_state_container"},n.a.createElement("img",{src:t,alt:"",className:"auto_width margin_bottom_100 margin_top_100"}),n.a.createElement("h3",{className:"black margin_bottom_75"},a),n.a.createElement("p",{className:"margin_left_200 margin_right_200"},r),n.a.createElement("p",{className:"margin_left_200 margin_right_200"},i))};kr.displayName="AppProfilePermissionsEmptyState";var Er=kr;var Cr=new j["b"]("enterprise_dashboard");var Sr={permissionsItems:[],isDirectoryPublished:false,isXoxaApp:false,appId:""};var wr=function(e){k()(t,e);function t(e){var a;p()(this,t);a=f()(this,g()(t).call(this,e));a.state={permissions:[],channelScopePermissions:[]};a.formatPermissions=a.formatPermissions.bind(y()(a));return a}h()(t,[{key:"componentDidMount",value:function e(){this.formatPermissions(this.props.permissionsItems)}},{key:"UNSAFE_componentWillReceiveProps",value:function e(t){this.props.permissionsItems!==t.permissionsItems&&this.formatPermissions(t.permissionsItems)}},{key:"formatPermissions",value:function e(t){var a=0;function r(){a+=1;return"scope_"+a+"_row"}var n=[];var i=[];t.forEach(function(e){if(!e.short_description&&!e.long_description)return;var t=r();e.is_channel_scope?i.push({key:t,scopes:[e.scope],short_description:e.short_description,long_description:e.long_description,is_dangerous:e.is_dangerous}):n.push({key:t,scopes:[e.scope],short_description:e.short_description,long_description:e.long_description,is_dangerous:e.is_dangerous})});var s={permissions:n,channelScopePermissions:i};this.setState(s)}},{key:"render",value:function e(){var t=this.props.isXoxaApp;var a=this.state,r=a.channelScopePermissions,i=a.permissions;if(!this.props.isDirectoryPublished&&"A02"!==this.props.appId)return n.a.createElement(Er,null);var s;s=t?Cr.t("On workspaces, this app will be able to:"):Cr.t("This app will be able to:");var o=Cr.t("When added to a channel, this app will also be able to:");if(r.length)return n.a.createElement("div",{className:"p-app_profile_permission"},n.a.createElement("h2",{className:"padding_top_250 padding_bottom_100 padding_left_100"},s),n.a.createElement(yr["a"],{scopeInfo:i,key:"permissions"}),n.a.createElement("h2",{className:"padding_top_400 padding_bottom_100 padding_left_100"},o),n.a.createElement(yr["a"],{scopeInfo:r,key:"channelScopePermissions"}));return n.a.createElement("div",{className:"p-app_profile_permission"},n.a.createElement("h2",{className:"padding_top_150 padding_bottom_100 padding_left_100"},s),n.a.createElement(yr["a"],{scopeInfo:i}))}}]);return t}(r["PureComponent"]);wr.displayName="AppProfilePermissions";wr.defaultProps=Sr;var jr=wr;var Ir=a(2052);var Tr=new j["b"]("enterprise_dashboard");function Ar(){var e=cdn_url+"/4f28/img/slack_logo_mark.svg";var t=Tr.t("Slack logo");return n.a.createElement("div",{className:"p-app_profile__slack_owned_empty_state_container"},n.a.createElement("div",{className:"p-app_profile__slack_owned_empty_state"},n.a.createElement("img",{src:e,alt:t,className:"p-app_profile__slack_owned_empty_state_icon"}),n.a.createElement("h3",{className:"margin_bottom_75"},n.a.createElement("b",null,Tr.t("This app was made by Slack."))),n.a.createElement("p",null,Tr.rt("This app was made by a member of the Slack team to help connect Slack with a third-party service; these apps may not be tested, documented, or supported by Slack in the way we support our core offerings, like Slack and Slack Enterprise Grid. You may provide feedback about these apps at <Link>feedback@slack.com</Link>.",null,function(e){var t=e.key,a=e.text;return n.a.createElement(tt["a"],{key:t,href:"mailto:feedback@slack.com"},a)})),n.a.createElement("p",null,Tr.rt("It only uses data Slack already has access to (view our <Link>Privacy Policy</Link> to learn more). By enabling and/or using this app, you may be connecting with a service that is not part of Slack.",null,function(e){var t=e.key,a=e.text;return n.a.createElement(tt["a"],{key:t,href:"https://my.slack.com/privacy-policy"},a)}))))}Ar.displayName="AppProfileSlackOwnedEmptyState";var Nr=Ar;var Pr={isSlackIntegration:false};var Mr=function e(t){var a=t.appId,r=t.isDirectoryPublished,i=t.scopeInfo,s=t.isSlackIntegration;if(!r&&"A02"!==a)return n.a.createElement(Er,null);if(s)return n.a.createElement(Nr,null);return n.a.createElement("div",{className:"p-app_profile_permission padding_top_175"},n.a.createElement(Ie["a"],{scopeInfo:i,smallHeadings:true}))};Mr.displayName="AppProfileScopeInfo";Mr.defaultProps=Pr;var Dr=Mr;var xr=new j["b"]("enterprise_dashboard");var Rr={activeTab:"",appId:"",appScope:[],userIsCreationTeamMember:false,headerActions:[],isOpen:true,isInstalledEverywhere:false,orgName:"",installations:{workspacesByAppLoading:null,workspacesByAppSortBy:null,workspacesByAppSortDir:null,searchQuery:""},appsDetailViewSelectedTab:"installations",appsDetailViewWorkspaceDomain:null,appsDetailViewWorkspaceContext:null,currentUserTeams:[],isXoxaApp:false,isDistributedApp:true,orgTeams:null,featureOrgAppsDashboard:false,setSelectedApp:E["noop"],setSelectedAppId:E["noop"],openModal:E["noop"],installType:"org_installed",status:{},selectedApp:null,selectedAppId:null,setWorkspacesByAppAAA:E["noop"],fetchAppsByIds:E["noop"],setCommonAppInfoById:E["noop"],fetchScopeInfo:E["noop"]};var Fr=function(e){k()(t,e);function t(e){var a;p()(this,t);a=f()(this,g()(t).call(this,e));a.navigateToProfileTab=a.navigateToProfileTab.bind(y()(a));a.navigateToAppDirectory=a.navigateToAppDirectory.bind(y()(a));a.onBackClick=a.onBackClick.bind(y()(a));return a}h()(t,[{key:"componentDidMount",value:function e(){var t=this.props,a=t.appId,r=t.fetchAppsByIds,n=t.setCommonAppInfoById,i=t.setSelectedApp;a&&r&&r([a]).then(function(e){if(e&&e[0]){n(e);i(e[0])}})}},{key:"onBackClick",value:function e(){var t=this.props,a=t.activeTab,r=t.setSelectedApp,n=t.setSelectedAppId;r(null);n(null);var i=this.props,s=i.selectedAppId,o=i.setWorkspacesByAppAAA;o({id:s,teams:[],workspacesByAppApiCursor:"",workspacesByAppApiTotal:null});Object(R["b"])(Object(R["a"])().router.navigateTo("/organization/apps/"+a))}},{key:"maybeFetchScopeInfo",value:function e(){var t=this.props,a=t.appId,r=t.fetchScopeInfo,n=t.selectedApp,i=t.setCommonAppInfoById;if(n&&void 0!==n.scope_info)return;var s={app_id:a};r(s).then(function(e){i([{id:a,scope_info:e.scope_info}])})}},{key:"maybeRenderAlert",value:function e(){var t=this.props.status;if(!t)return null;if(t.isApproved)return n.a.createElement("div",{className:"p-app_profile_alert","data-qa":"alert_app_is_approved"},n.a.createElement(x["a"],{level:"success",heading:xr.t("This app is approved for anyone to install"),type:"boxed",icon:"check-circle-o-large",className:"margin_bottom_25"},n.a.createElement("span",null,xr.t("Members can install this app on any workspace in your organization."))));if(t.isRestricted)return n.a.createElement("div",{className:"p-app_profile_alert","data-qa":"alert_app_is_restricted"},n.a.createElement(x["a"],{level:"error",heading:xr.t("This app is restricted and installation is blocked"),type:"boxed",icon:"warning",className:"margin_bottom_25"},n.a.createElement("span",null,xr.t("Members will not be able to install this app on their workspaces."))));return null}},{key:"navigateToAppDirectory",value:function e(){var t=this.props,a=t.appId,r=t.appsDetailViewWorkspaceContext,n=t.appsDetailViewWorkspaceDomain,i=t.userIsCreationTeamMember,s=t.currentUserTeams,o=t.rootURL,l=t.orgTeams,c=t.selectedAppId;var u=Object(N["a"])({appId:c||a,appsDetailViewWorkspaceContext:r,appsDetailViewWorkspaceDomain:n,userIsCreationTeamMember:i,currentUserTeams:s,rootURL:o,orgTeams:l});window.open(u,"_blank")}},{key:"navigateToProfileTab",value:function e(t){var a=this.props,r=a.appId,n=a.selectedAppId;return Object(R["b"])(Object(R["a"])().router.navigateTo("/organization/apps/profile/"+(n||r)+"/"+t))}},{key:"renderHeaderActions",value:function e(){var t=this.props,a=t.appId,r=t.installType,i=t.headerActions,s=t.featureOrgAppsDashboard,o=t.setSelectedApp,l=t.selectedApp,c=t.openModal;return i.concat(n.a.createElement(Ma,{app:l,featureOrgAppsDashboard:s,appId:a,setSelectedApp:o,openModal:c,installType:r,type:re["g"].INSTALLED_PROFILE}))}},{key:"renderInstallationsContent",value:function e(){var t=this.props,a=t.installations,r=t.orgName,i=t.appId,s=t.selectedAppId;return n.a.createElement(_r,A()({},a,{orgName:r,appId:s||i,actions:Object(R["a"])(),dispatch:R["b"]}))}},{key:"renderPermissionsContent",value:function e(){var t=this.props,a=t.appId,r=t.isXoxaApp,i=t.selectedApp,s=t.selectedAppId;var o=s||a;if(!o)return null;var l=i&&i.scope_info||{};var c=i&&i.is_directory_published||false;var u=i&&i.is_slack_integration||false;this.maybeFetchScopeInfo();if(!r)return n.a.createElement(Dr,{appId:o,isDirectoryPublished:c,isSlackIntegration:u,scopeInfo:l});return n.a.createElement(jr,{permissionsItems:l,isDirectoryPublished:c,isXoxaApp:r,appId:o})}},{key:"render",value:function e(){var t=this.props,a=t.currentUserTeams,r=t.isDistributedApp,i=t.isOpen,s=t.userIsCreationTeamMember,o=t.selectedApp;var l=r&&a&&a.length||s;var c=[{title:xr.t("Installations"),id:"installations",content:this.renderInstallationsContent(),onClick:this.navigateToProfileTab}];o&&o.teams_installed_on&&o.teams_installed_on.count&&c.push({title:xr.t("Permissions"),id:"permissions",content:this.renderPermissionsContent(),onClick:this.navigateToProfileTab});l&&c.push({title:xr.t("App Details"),icon:"external-link",id:"details",content:"",isExternalLink:true,onClick:this.navigateToAppDirectory});var u={appByline:o&&o.description,appImageSrc:o&&o.icons&&o.icons.image_72,appName:o&&o.name,headerActions:this.renderHeaderActions(),onBackClick:this.onBackClick,isOpen:i};return n.a.createElement("div",{className:"p-app_profile","data-qa":"ent-app-profile"},n.a.createElement(K,u),this.maybeRenderAlert(),n.a.createElement(I["a"],{tabs:c,defaultTabId:this.props.appsDetailViewSelectedTab}))}}]);return t}(r["PureComponent"]);Fr.displayName="BaseAppProfile";Fr.defaultProps=Rr;var Lr=function e(t,a){var r=a.appId;var n=Object(P["isFeatureEnabled"])(t,"feature_org_apps_dashboard");var i=Object(F["f"])(t);var s=Object(F["p"])(t);var o=s||r;var l=o&&Object(F["i"])(t,o);return{activeTab:i,featureOrgAppsDashboard:n,selectedApp:l,selectedAppId:s,status:o&&Object(F["g"])(t,o)}};var Ur=function e(t){return{setCommonAppInfoById:function e(){return t(F["u"].apply(void 0,arguments))},setSelectedApp:function e(){return t(F["z"].apply(void 0,arguments))},setSelectedAppId:function e(){return t(F["A"].apply(void 0,arguments))},openModal:function e(){return t(L["openModal"].apply(void 0,arguments))},setWorkspacesByAppAAA:function e(){return t(F["B"].apply(void 0,arguments))},fetchAppsByIds:function e(){return t(M["a"].apply(void 0,arguments))},fetchScopeInfo:function e(){return t(D["h"].apply(void 0,arguments))}}};var Br=Object(o["connect"])(Lr,Ur)(Fr);var qr=a(387);var Gr=new j["b"]("enterprise_dashboard");var Hr={featureOrgAppsDashboard:false};var Wr=function(e){k()(t,e);function t(e){var a;p()(this,t);a=f()(this,g()(t).call(this,e));a.renderMenu=a.renderMenu.bind(y()(a));return a}h()(t,[{key:"renderMenu",value:function e(t){var a=this.props,r=a.openApproveAppsModal,i=a.openRestrictAppsModal,s=a.openInstallAppsModal,o=a.featureOrgAppsDashboard;var l;var c;var u;if(o){l=Gr.t("Install an app");c=Gr.t("Approve an app");u=Gr.t("Restrict an app")}var d=[{type:"default",label:l,click:s,dataQa:"app_management_manage_apps_install_an_app_btn",key:"app-management-manage-apps-install-an-app-btn"},{type:"separator"},{type:"default",label:c,click:r,dataQa:"app_management_manage_apps_approve_apps_button",key:"app-management-manage-apps-approve-apps-button"},{type:"default",label:u,click:i,dataQa:"app_management_manage_apps_restrict_apps_button",key:"app-management-manage-apps-rectrict-apps-button"}];return n.a.createElement(Q["a"],A()({},t,{template:d}))}},{key:"render",value:function e(){var t=this.props.featureOrgAppsDashboard;var a=t?Gr.t("Manage Apps"):"";return n.a.createElement(Q["e"],{position:"bottom-left",offsetY:5,offsetX:-163,renderMenu:this.renderMenu,shouldAnchorAtInitialPosition:true},n.a.createElement(z["d"],{type:"outline","data-qa":"manage_apps_btn"},a," ",n.a.createElement(U["b"],{type:"chevron-medium-down"})))}}]);return t}(r["Component"]);Wr.displayName="AppManagementManageAppsMenu";Wr.defaultProps=Hr;var Vr=Wr;var Kr=new j["b"]("enterprise_dashboard");var zr={featureOrgAppsDashboard:false};var Qr=function(e){k()(t,e);function t(){p()(this,t);return f()(this,g()(t).apply(this,arguments))}h()(t,[{key:"shouldComponentUpdate",value:function e(){return false}},{key:"renderApproveAppsBtn",value:function e(){var t=Kr.t("Approve");return n.a.createElement(z["d"],{onClick:this.props.openApproveAppsModal,type:"outline","data-qa":"approve_apps_button"},t)}},{key:"renderEntAdminApprovedAppsBtns",value:function e(){return n.a.createElement("div",null,this.renderApproveAppsBtn(),this.renderRestrictAppsBtn())}},{key:"renderManageAppsBtn",value:function e(){var t=this.props,a=t.openApproveAppsModal,r=t.openRestrictAppsModal,i=t.openInstallAppsModal,s=t.featureOrgAppsDashboard;return n.a.createElement(Vr,{featureOrgAppsDashboard:s,openApproveAppsModal:a,openRestrictAppsModal:r,openInstallAppsModal:i})}},{key:"renderRestrictAppsBtn",value:function e(){var t=Kr.t("Restrict");return n.a.createElement(z["d"],{onClick:this.props.openRestrictAppsModal,type:"outline",className:"margin_left_50","data-qa":"restrict_apps_button"},t)}},{key:"render",value:function e(){var t=this.props.featureOrgAppsDashboard;var a=Kr.t("Apps");return n.a.createElement("div",{className:"c-app_management_indent display_flex align_items_center justify_content_between"},n.a.createElement("h1",null,a),n.a.createElement("div",{className:"display_flex align_items_center","data-qa":"manage-apps"},t?this.renderManageAppsBtn():this.renderEntAdminApprovedAppsBtns()))}}]);return t}(r["Component"]);Qr.displayName="AppManagementHeader";Qr.defaultProps=zr;var Yr=Qr;var Jr=a(428);var Xr=a(21);var Zr=a(2428);var $r={onDownloadClick:E["noop"],contextCaption:"",onContextBlur:E["noop"]};var en=function(e){k()(t,e);function t(e){var a;p()(this,t);a=f()(this,g()(t).call(this,e));a.handleOnContextUnfocus=a.handleOnContextUnfocus.bind(y()(a));return a}h()(t,[{key:"UNSAFE_componentWillReceiveProps",value:function e(t){t.isOpen?document.addEventListener("click",this.handleOnContextUnfocus,false):document.removeEventListener("click",this.handleOnContextUnfocus,false)}},{key:"handleOnContextUnfocus",value:function e(t){this.props.onContextBlur(t,this.node)}},{key:"render",value:function e(){var t=this;var a=this.props,r=a.isOpen,i=a.title,s=a.subtext,o=a.contextButtonLabel,l=a.onDownloadClick,c=a.contextCaption;var u=w()("p-export_csv_context","menu",{"p-export_csv_context--hidden":!r});return n.a.createElement("div",{className:u,ref:function e(a){t.node=a}},n.a.createElement("div",{className:"p-export_csv_context_subtext"},n.a.createElement("h4",{className:"black"},i),n.a.createElement("p",{className:"break_word"},s),n.a.createElement(z["d"],{onClick:l,className:"p-export_csv_context_button"},o)),c&&n.a.createElement("div",{className:"p-export_csv_context_caption"},c))}}]);return t}(r["PureComponent"]);en.displayName="ExportContext";en.defaultProps=$r;var tn=en;var an=new j["b"]("enterprise_dashboard");var rn={onDownloadClick:E["noop"],contextCaption:"",buttonSize:"medium"};var nn=function(e){k()(t,e);function t(e){var a;p()(this,t);a=f()(this,g()(t).call(this,e));a.onButtonClick=a.onButtonClick.bind(y()(a));a.onDownloadButtonClick=a.onDownloadButtonClick.bind(y()(a));a.onContextBlur=a.onContextBlur.bind(y()(a));a.state={contextIsOpen:false};return a}h()(t,[{key:"onButtonClick",value:function e(){this.setState(function(e){return{contextIsOpen:!e.contextIsOpen}})}},{key:"onContextBlur",value:function e(t,a){a&&!a.contains(t.target)&&this.setState(function(){return{contextIsOpen:false}})}},{key:"onDownloadButtonClick",value:function e(){this.props.onDownloadClick();this.onButtonClick()}},{key:"render",value:function e(){var t=this.props,a=t.title,r=t.subtext,i=t.contextButtonLabel,s=t.contextCaption,o=t.buttonSize;var l=an.t("Export CSV");return n.a.createElement("div",null,n.a.createElement(z["d"],{type:"outline",onClick:this.onButtonClick,size:o,className:"p-export_csv_button"},l,n.a.createElement(U["a"],{type:"caret_down",className:"p-export_csv_button_caret"})),n.a.createElement(tn,{isOpen:this.state.contextIsOpen,title:a,subtext:r,contextButtonLabel:i,onDownloadClick:this.onDownloadButtonClick,contextCaption:s,onContextBlur:this.onContextBlur}))}}]);return t}(r["PureComponent"]);nn.displayName="ExportCSVButton";nn.defaultProps=rn;var sn=nn;var on=sn;var ln=new j["b"]("enterprise_dashboard");var cn={onDownloadClick:E["noop"],buttonSize:"small"};var un=function(e){k()(t,e);function t(){p()(this,t);return f()(this,g()(t).apply(this,arguments))}h()(t,[{key:"render",value:function e(){var t=this.props.buttonSize;var a=ln.t("Your CSV may take a bit of time to generate. It\u2019ll be sent to you in Slack as soon as it\u2019s ready.");var r=ln.t("Includes everything");var i=ln.t("Generate CSV");return n.a.createElement(on,{onDownloadClick:this.props.onDownloadClick,title:this.props.title,subtext:r,contextButtonLabel:i,contextCaption:a,buttonSize:t,className:"p-app_management_csv_popup"})}}]);return t}(r["PureComponent"]);un.displayName="AppManagementCSVPopup";un.defaultProps=cn;var dn=un;var pn=dn;var mn=a(760);var hn=new j["b"]("enterprise_dashboard");var vn={type:"",orgName:""};var fn=function(e){k()(t,e);function t(){p()(this,t);return f()(this,g()(t).apply(this,arguments))}h()(t,[{key:"renderApproved",value:function e(){var t=Object(j["q"])(this.props.orgName);var a=hn.t("Approve an app to allow anyone to install it");var r=hn.rt("Have an app that\u2019s safe for anyone to use? Approve it and anyone in {orgName} can install it \u2014 on any workspace.",{orgName:t});return n.a.createElement("div",{className:"p-app_management_empty_state_container"},n.a.createElement(mn["a"],{title:a,description:r}))}},{key:"renderInstalled",value:function e(){var t=cdn_url+"/80588/img/enterprise/empty_apps_state.png";var a=Object(j["q"])(this.props.orgName);var r=hn.t("{orgName} has no apps installed.",{orgName:a});return n.a.createElement("div",{className:"p-app_management_empty_state_container"},n.a.createElement("img",{src:t,alt:"",className:"auto_width margin_bottom_100"}),n.a.createElement("h3",{className:"black margin_bottom_75"},r))}},{key:"renderRestricted",value:function e(){var t=hn.t("Restrict an app to block installation");var a=hn.t("Restricting apps will prevent members from installing them on any workspace. Restrict apps you don\u2019t want anyone in your organization to use.");return n.a.createElement("div",{className:"p-app_management_empty_state_container"},n.a.createElement(mn["a"],{title:t,description:a}))}},{key:"render",value:function e(){var t=this.props.type;if(t===re["g"].INSTALLED)return this.renderInstalled();if(t===re["g"].APPROVED)return this.renderApproved();if(t===re["g"].RESTRICTED)return this.renderRestricted();return null}}]);return t}(r["PureComponent"]);fn.displayName="AppManagementEmptyState";fn.defaultProps=vn;var bn=fn;var gn=a(54);var _n=a(16);var yn=a(189);var On=a(1940);var kn=-16;var En={app:{}};var Cn=function e(t){var a=function e(a){return n.a.createElement(Ia,A()({},t,{menuProps:a}))};var r=t.app;if(!r||!r.id)return null;return n.a.createElement(Q["e"],{renderMenu:a,position:"left",offsetX:kn,"data-qa":"org-app-menu_trigger"},n.a.createElement(ke["a"],{className:"c-app_management_menu_trigger","data-app-id":r.id},n.a.createElement(U["b"],{type:"ellipsis"})))};Cn.displayName="OrgAppListMenu";Cn.defaultProps=En;var Sn=Cn;var wn=new j["b"]("enterprise_dashboard");var jn={status:{}};var In=function(e){k()(t,e);function t(){p()(this,t);return f()(this,g()(t).apply(this,arguments))}h()(t,[{key:"render",value:function e(){var t=this.props.status;if(!t||t.isNonExistent)return n.a.createElement(Te["a"],{color:"blue",size:"small",className:"margin_left_250"});var a={set_by_workspace:{iconType:"circle-minus-filled",label:wn.t("Set by workspace"),className:"p-app_management_permission_icon--set_by_workspace"},approved:{iconType:"circle-checkbox-checked",label:wn.t("Approved"),className:"p-app_management_permission_icon--approved"},restricted:{iconType:"warning-filled",label:wn.t("Restricted"),className:"p-app_management_permission_icon--restricted"}};var r=a.set_by_workspace;t.isApproved?r=a.approved:t.isRestricted&&(r=a.restricted);var i="p-app_management_permission_icon "+r.className;return n.a.createElement("div",null,n.a.createElement(U["b"],{type:r.iconType,className:i})," ",r.label," ")}}]);return t}(r["PureComponent"]);In.displayName="OrgAppStatus";In.defaultProps=jn;var Tn=function e(t,a){return{status:Object(F["g"])(t,a.appId)}};var An=Object(o["connect"])(Tn)(In);var Nn=a(2085);var Pn=a(4786);var Mn=new j["b"]("enterprise_dashboard");var Dn=1e3;var xn={orgApps:[],orgAppsLoading:false,sortBy:"name",sortDir:null,searchQuery:"",showInstallationPolicy:false,rowHeaderItemClassName:"p-app_management_table_view_header_item",rowClassName:"p-app_management_table_view_row",type:re["g"].INSTALLED,highlightId:void 0,featureOrgAppsDashboard:false,fetchNewPage:E["noop"],onUpdateSort:E["noop"],openModal:E["noop"],setSelectedApp:E["noop"],setSelectedAppId:E["noop"],clearHighlightId:E["noop"]};var Rn="asc";var Fn="desc";var Ln="caret_down";var Un="caret_up";var Bn={};Bn[Rn]=Ln;Bn[Fn]=Un;var qn=function(e){k()(t,e);function t(e){var a;p()(this,t);a=f()(this,g()(t).call(this,e));var r=a.props,i=r.showInstallationPolicy,s=r.sortBy,o=r.sortDir,l=r.type;a.state={rowListItems:[],sortBy:s,sortDir:o,offset:0,activeMenuForAppId:null};a.tableViewControllerRef=null;a.headerItemOnClick=a.headerItemOnClick.bind(y()(a));a.onRequestNextPage=a.onRequestNextPage.bind(y()(a));a.updateActiveMenu=a.updateActiveMenu.bind(y()(a));a.appSources={internal:Mn.t("Internal"),"app directory":Mn.t("App Directory"),unknown:Mn.t("Unknown")};a.sourceTooltipStrings={"app directory":Mn.t("This app has been installed from the Slack App Directory."),internal:Mn.t("This app was created by someone within your organization."),unknown:Mn.t("This app was installed from an unknown external source.")};var c={name:{value:function e(t){return a.renderRowName(t)}},numInstalled:{value:function e(t){return a.renderRowWorkspaceInstalledCount(t)}},source:{value:function e(t){return a.renderRowAppSource(t)}},automaticInstall:{value:function e(t){return a.maybeRenderAutomaticInstall(t)}},installPolicy:{value:function e(t){return a.maybeRenderInstallationPolicy(t)}},menu:{value:function e(t){return n.a.createElement(Sn,{app:t,activeMenuForAppId:a.state.activeMenuForAppId,updateActiveMenu:a.updateActiveMenu,type:l,openModal:a.props.openModal,setSelectedApp:a.props.setSelectedApp,featureOrgAppsDashboard:a.props.featureOrgAppsDashboard,installType:t.org_status})},className:"p-app_management_table_menu"},approvedOn:{value:function e(t){return a.maybeRenderApprovedOrRestrictedOn(t.approvedOn)}},approvedBy:{value:function e(t){return a.maybeRenderApprovedOrRestrictedBy(t.approvedBy)}},restrictedOn:{value:function e(t){return a.maybeRenderApprovedOrRestrictedOn(t.restrictedOn)}},restrictedBy:{value:function e(t){return a.maybeRenderApprovedOrRestrictedBy(t.restrictedBy)}},addInBulk:{value:function e(t){return a.renderAddinBulk(t)}}};a.rowTemplate={items:[]};if(l===re["g"].INSTALLED){var u;(u=a.rowTemplate.items).push.apply(u,[c.name,c.numInstalled,c.source].concat(ee()(i?[c.installPolicy]:[]),ee()(a.props.featureOrgAppsDashboard?[c.addInBulk]:[]),ee()(i?[c.menu]:[])))}else l===re["g"].APPROVED?a.rowTemplate.items.push(c.name,c.approvedOn,c.approvedBy,c.source,c.menu):l===re["g"].RESTRICTED&&a.rowTemplate.items.push(c.name,c.restrictedOn,c.restrictedBy,c.source,c.menu);a.emptyRowTemplate={items:[{value:function e(t){var a=t.searchQuery;var r=Mn.rt("No apps were found matching <b>{query}</b>",{query:a});return n.a.createElement("div",{className:"align_center"},r)}}]};var d=true;l!==re["g"].APPROVED&&l!==re["g"].RESTRICTED||(d=false);var m=true;var h=true;var v={name:{id:"name",value:Mn.t("Name"),sortable:d,noHover:!d,className:"p-app_management_table_header_name"},numInstalled:{id:"num_installed",value:Mn.t("Installed On"),sortable:m,className:"p-app_management_table_header_installed_on"},source:{id:"source",value:Mn.t("Source"),sortable:d,noHover:!d,className:"p-app_management_table_header_source"},installPolicy:{id:"installation_policy",value:Mn.t("Installation policy"),noHover:h},menu:{id:"menu",value:"",noHover:h,className:"p-app_management_table_header_menu"},approvedOn:{id:"approved_on",value:Mn.t("Approved On"),noHover:h},approvedBy:{id:"approved_by",value:Mn.t("Approved By"),noHover:h},restrictedOn:{id:"restricted_on",value:Mn.t("Restricted On"),noHover:h},restrictedBy:{id:"restricted_by",value:Mn.t("Restricted By"),noHover:h},addInBulk:{id:"add_in_bulk",value:a.props.featureOrgAppsDashboard?Mn.t("Add in Bulk"):"",sortable:m}};a.headerData=[];if(l===re["g"].INSTALLED){var b;(b=a.headerData).push.apply(b,[v.name,v.numInstalled,v.source].concat(ee()(i?[v.installPolicy]:[]),ee()(a.props.featureOrgAppsDashboard?[v.addInBulk]:[]),ee()(i?[v.menu]:[])))}else l===re["g"].APPROVED?a.headerData.push(v.name,v.approvedOn,v.approvedBy,v.source,v.menu):l===re["g"].RESTRICTED&&a.headerData.push(v.name,v.restrictedOn,v.restrictedBy,v.source,v.menu);return a}h()(t,[{key:"UNSAFE_componentWillMount",value:function e(){if(!this.isViewingInstalledTab())return;var t=this.props,a=t.orgApps,r=t.sortBy;var n=this.state.offset;a.length&&this.updateRowListItemsData(n);Object(R["b"])(Object(R["a"])().apps.setOrgAppsSortBy(r))}},{key:"componentDidUpdate",value:function e(t,a){this.maybeUpdateListRowItems(t,a)}},{key:"onAppNameClick",value:function e(t){this.props.setSelectedAppId(t);return Object(R["b"])(Object(R["a"])().router.navigateTo("/organization/apps/profile/"+t))}},{key:"onRequestNextPage",value:function e(){this.props.fetchNewPage({fetchNewPage:true})}},{key:"onRestrictAppClick",value:function e(t){Object(_n["b"])().warn("onRestrictAppClick",t);this.hideMenu()}},{key:"determineSortState",value:function e(t,a){var r=this.state,n=r.sortBy,i=r.sortDir;var s=a.defaultSortType||Rn;var o=Bn[s];if(!n||n!==t)return o;var l;l=i?i===Rn?Ln:Un:Bn[s];return l}},{key:"headerItemOnClick",value:function e(t){var a=this.state,r=a.sortBy,n=a.sortDir;var i=this.props.onUpdateSort;var s=r;var o=n;if(t.id===r){o=n&&n!==Rn?Rn:Fn;this.setState(function(){return{sortBy:s,sortDir:o}});i(s,o);return}s=t.id;o=t.defaultSortType?t.defaultSortType===Rn?Fn:Rn:Fn;this.setState(function(){return{sortBy:s,sortDir:o}});i(s,o)}},{key:"hideMenu",value:function e(){var t={activeMenuForAppId:null};this.setState(t)}},{key:"isViewingInstalledTab",value:function e(){return this.props.type===re["g"].INSTALLED}},{key:"makeHeader",value:function e(t){var a={id:t.id,value:t.value,noHover:t.noHover,className:t.className};if(t.sortable){a.iconType=this.determineSortState(t.id,t);a.onClick=this.headerItemOnClick;t.defaultSortType&&(a.defaultSortType=t.defaultSortType)}return a}},{key:"makeHeaders",value:function e(t){var a=this;var r=[];t.forEach(function(e){r.push(a.makeHeader(e))});return r}},{key:"maybeRenderApprovedOrRestrictedBy",value:function e(t){if(!t)return null;return n.a.createElement(On["a"],{className:"p-app_management_approved_or_restricted_by",id:t,forceRealName:true,useShortMode:true,showAvatar:false,showPresence:false,showTooltip:false,showUnreadCount:false,showStatus:false,showDraftIcon:false})}},{key:"maybeRenderApprovedOrRestrictedOn",value:function e(t){if(!t)return null;var a=Object(yn["l"])(t,{returnMoment:true});var r=Object(yn["i"])(a);return n.a.createElement("div",null,r)}},{key:"maybeRenderAutomaticInstall",value:function e(t){return t.automatic_install_enabled?Mn.t("Yes"):Mn.t("No")}},{key:"maybeRenderInstallationPolicy",value:function e(t){return n.a.createElement(An,{appId:t.id})}},{key:"maybeUpdateListRowItems",value:function e(t,a){var r=this.state,n=r.offset,i=r.activeMenuForAppId;var s=this.props,o=s.searchQuery,l=s.orgApps,c=s.orgAppsLoading,u=s.highlightId;t.orgApps===l&&t.searchQuery===o&&t.orgAppsLoading===c&&a.activeMenuForAppId===i&&t.highlightId===u||this.updateRowListItemsData(n)}},{key:"updateActiveMenu",value:function e(t){this.setState(function(){return{activeMenuForAppId:t}})}},{key:"updateRowListItemsData",value:function e(t){var a=this;var r=this.props,n=r.orgApps,i=r.orgAppsLoading,s=r.highlightId,o=r.clearHighlightId;var l=[];var c=t||0;var u=0;var d={rowListItems:l};function p(){u+=1;return"row_"+c+"_item"+u}function m(e,t){if(!e||!t||!t.items)return[];var a={id:"row_"+c,items:[],highlight:s===e.id};t.items.forEach(function(t){var r={value:t.value(e),id:p()};t.className&&(r.className=t.className);a.items.push(r)});c+=1;return a}if(null===n||void 0===n?void 0:n.length)n.forEach(function(e){l.push(m(e,a.rowTemplate));e.id===s&&setTimeout(o,Dn)});else if(!i){var h=this.props.searchQuery;if(null===h||void 0===h||!h.length){this.setState(d);return}var v=[{searchQuery:h}];v.forEach(function(e){l.push(m(e,a.emptyRowTemplate))})}this.setState(d)}},{key:"renderAddinBulk",value:function e(t){var a=this.props.featureOrgAppsDashboard;var r={org_installed:a?Mn.t("Available"):"",org_ready:a?Mn.t("Action required"):"",workspace_only:a?Mn.t("Not Available"):""};var i={org_installed:a?Mn.t("Add this app to multiple workspaces with just a few clicks"):"",org_ready:a?Mn.t("Once you\u2019ve installed this app on your org, you can add it to multiple workspaces"):"",workspace_only:a?Mn.t("This app can only be installed on one workspace at a time"):""};var s=r[t.org_status];var o=i[t.org_status];var l="org_ready"===t.org_status;var c=l?"strong":"span";var u=""+c;return n.a.createElement("div",null,n.a.createElement(gn["c"],{tip:o,position:"top"},n.a.createElement(u,null,n.a.createElement("span",{className:"org_status_label"},s),l&&n.a.createElement(U["b"],{type:"info-circle",size:"inherit"}))))}},{key:"renderRowAppSource",value:function e(t){var a=this.sourceTooltipStrings[t.source];var r=this.appSources[t.source]||this.appSources.unknown;return n.a.createElement("div",null,n.a.createElement(gn["c"],{tip:a,position:"top"},n.a.createElement("span",null,r)))}},{key:"renderRowName",value:function e(t){var a=this;var r=t&&t.icons&&t.icons.image_72;return n.a.createElement(ke["a"],{className:"p-app_management_table_view_app_name","data-qa":"ent-apps-installed-row-name",onClick:function e(){return a.onAppNameClick(t.id)}},r&&n.a.createElement("img",{src:r,className:"p-app_management_table_view_app_icon",alt:t.name}),t.name)}},{key:"renderRowWorkspaceInstalledCount",value:function e(t){var a=t.teams_installed_on&&t.teams_installed_on.count||0;return Mn.t("{count, plural, =1 {# workspace} other {# workspaces}}",{count:a})}},{key:"render",value:function e(){var t=this;var a=this.state,r=a.sortBy,i=a.sortDir,s=a.rowListItems,o=a.offset;var l=this.props,c=l.orgAppsLoading,u=l.searchQuery,d=l.rowHeaderItemClassName,p=l.rowClassName;var m=this.makeHeaders(this.headerData);return n.a.createElement("div",null,n.a.createElement(La["a"],{autoHeight:true,rows:s,headers:m,rowHeaderItemClassName:d,rowClassName:p,headerItemOnClick:this.headerItemOnClick,onRequestNextPage:this.onRequestNextPage,sortBy:r,sortDir:i,searchQuery:u,isLoading:c,newQuery:!o,ref:function e(a){t.tableViewControllerRef=a}}))}}]);return t}(r["PureComponent"]);qn.displayName="OrgAppsList";qn.defaultProps=xn;var Gn=function e(t){return{openModal:function e(){return t(L["openModal"].apply(void 0,arguments))},setSelectedApp:function e(){return t(F["z"].apply(void 0,arguments))},setSelectedAppId:function e(){return t(F["A"].apply(void 0,arguments))},clearHighlightId:function e(){return t(F["b"].apply(void 0,arguments))}}};var Hn=function e(t){var a=Object(P["isFeatureEnabled"])(t,"feature_org_apps_dashboard");return{featureOrgAppsDashboard:a}};var Wn=Object(o["connect"])(Hn,Gn)(qn);var Vn=a(1987);var Kn=new j["b"]("enterprise_dashboard");var zn={isLoading:false,onChange:E["noop"],value:"",orgAppsSortDir:null,orgAppsSortBy:null,searchQuery:"",teamId:""};var Qn=function(e){k()(t,e);function t(e){var a;p()(this,t);a=f()(this,g()(t).call(this,e));a.generateAppsCSV=a.generateAppsCSV.bind(y()(a));return a}h()(t,[{key:"generateAppsCSV",value:function e(){var t=this.props,a=t.orgAppsSortDir,r=t.orgAppsSortBy,n=t.searchQuery,i=t.teamId;var s={type:"apps",team_id:i};n&&(s.query=n);if(r){s.sort_prefix=r;a&&(s.sort_dir=a)}Object(R["b"])(Object(R["a"])().apps.generateAppsCSVForSlackbotDM(s))}},{key:"maybeRenderExportCSVButton",value:function e(){var t=this.props,a=t.orgAppCount,r=t.type;var i=Kn.t("Installed Apps");if(r!==re["g"].INSTALLED||!a)return null;return n.a.createElement(pn,{title:i,query:this.props.value,onDownloadClick:this.generateAppsCSV})}},{key:"renderSearch",value:function e(){var t=this.props,a=t.type,r=t.orgAppCount,i=t.value,s=t.isLoading,o=t.onChange;var l;a===re["g"].INSTALLED?l=Kn.t("Search {orgAppCount, plural, =1 {# installed app...} other {# installed apps...}}",{orgAppCount:r}):a===re["g"].APPROVED?l=Kn.t("Search {orgAppCount, plural, =1 {# approved app...} other {# approved apps...}}",{orgAppCount:r}):a===re["g"].RESTRICTED&&(l=Kn.t("Search {orgAppCount, plural, =1 {# restricted app...} other {# restricted apps...}}",{orgAppCount:r}));return n.a.createElement(Jr["a"],{placeholder:l,icon:"search",autoFocus:false,isLoading:s,onChange:o,value:i,size:"small",className:"p-app_management_app_search_bar"})}},{key:"render",value:function e(){var t=this.props.type;var a=[this.maybeRenderExportCSVButton()];return n.a.createElement(Vn["a"],{title:this.renderSearch(),actions:a,"data-qa":"ent-apps-"+t+"-list-header"})}}]);return t}(r["Component"]);Qn.displayName="AppManagementListHeader";Qn.defaultProps=zn;var Yn=Qn;var Jn=new j["b"]("enterprise_dashboard");var Xn=333;var Zn={orgApps:[],orgAppsApiCursor:null,orgAppsApiTotal:null,orgAppsLoading:false,orgAppsSortDir:null,orgAppsSortBy:null,searchQuery:"",fetchInstalledApps:E["noop"],fetchAppManagementStatus:E["noop"],bulkSetAppStatus:E["noop"],setCommonAppInfoById:E["noop"],orgId:"",teamId:"",needsUpdate:false,setInstalledAppsNeedUpdate:E["noop"],highlightId:null};var $n=function(e){k()(t,e);h()(t,null,[{key:"getDerivedStateFromProps",value:function e(t,a){if(t.orgAppsApiTotal&&""===a.searchValue)return{initialAppCount:t.orgAppsApiTotal};return null}}]);function t(e){var a;p()(this,t);a=f()(this,g()(t).call(this,e));a._isMounted=false;a.state={searchValue:"",initialAppCount:0,cursor:"",apps:[],isLoading:false,appStatus:[],queryCount:null,sortBy:"name",sortDir:"",debouncedQuery:""};a.onSearchInputChange=a.onSearchInputChange.bind(y()(a));a.onSearchInputChangeDelayed=Object(E["debounce"])(a.onSearchInputChangeDelayed,Xn,{trailing:true}).bind(y()(a));a.generateAppsCSV=a.generateAppsCSV.bind(y()(a));a.fetchApps=a.fetchApps.bind(y()(a));a.onUpdateSort=a.onUpdateSort.bind(y()(a));return a}h()(t,[{key:"componentDidMount",value:function e(){this._isMounted=true;this.fetchApps({isFirstFetch:true})}},{key:"componentDidUpdate",value:function e(t){var a=this.props.needsUpdate;!t.needsUpdate&&a&&this.fetchApps()}},{key:"componentWillUnmount",value:function e(){this._isMounted=false}},{key:"onSearchInputChange",value:function e(t){var a=t.target.value;this.onSearchInputChangeDelayed(a);this.setState(function(){return{searchValue:a}})}},{key:"onSearchInputChangeDelayed",value:function e(t){var a=null!==t&&void 0!==t&&t.length?t:null;this.setState(function(){return{debouncedQuery:t}},this.fetchApps);Object(R["b"])(Object(R["a"])().apps.setOrgAppsSearchQuery(a))}},{key:"onUpdateSort",value:function e(t,a){this.setState(function(){return{sortBy:t,sortDir:a}},this.fetchApps)}},{key:"getOrgAppsListProps",value:function e(){var t=this.state,a=t.apps,r=t.cursor,n=t.initialAppCount,i=t.isLoading,s=t.searchValue,o=t.appStatus;return{orgApps:a,orgAppsApiCursor:r,orgAppsApiTotal:n,orgAppsLoading:i,searchQuery:s,showInstallationPolicy:true,fetchNewPage:this.fetchApps,appStatus:o,highlightId:this.props.highlightId,onUpdateSort:this.onUpdateSort}}},{key:"fetchApps",value:function e(){var t=this;var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this._isMounted)return;var r=this.props,n=r.fetchInstalledApps,i=r.setInstalledAppsNeedUpdate,s=r.setCommonAppInfoById,o=r.needsUpdate;var l=this.state,c=l.cursor,u=l.apps,d=l.initialAppCount,p=l.queryCount,m=l.sortBy,h=l.sortDir,v=l.debouncedQuery;if(p&&u.length===p&&!o&&a.fetchNewPage)return;this.setState(function(){return{isLoading:true}});var f={limit:50};v&&(f.query=v);m&&(f.sort=m);h&&(f.sort_dir=h);a.fetchNewPage&&(f.cursor=c);n(f).then(function(e){if(!t._isMounted)return;s(e.apps);var r;r=a.fetchNewPage?u.concat(e.apps):e.apps;var n=e.count>d?e.count:d;t.setState(function(){return{initialAppCount:n,cursor:e.next_cursor,apps:r,isLoading:false,queryCount:e.count}});i(false)})}},{key:"formatTitleString",value:function e(t){if(null!==t&&!Number.isNaN(t)&&t>0)return Jn.t("{orgAppsApiTotal, plural, =1 {# Installed App} other {# Installed Apps}}",{orgAppsApiTotal:t});return Jn.t("Installed Apps")}},{key:"generateAppsCSV",value:function e(){var t=this.props,a=t.orgAppsSortDir,r=t.orgAppsSortBy,n=t.searchQuery;var i={type:"apps"};n&&(i.query=n);if(r){i.sort_prefix=r;a&&(i.sort_dir=a)}Object(R["b"])(Object(R["a"])().apps.generateAppsCSVForSlackbotDM(i))}},{key:"renderAppFilterInput",value:function e(){var t=Jn.t("Filter by name...");return n.a.createElement("div",null,n.a.createElement(Jr["a"],{placeholder:t,icon:"search",autoFocus:false,isLoading:this.props.orgAppsLoading,onChange:this.onSearchInputChange,className:"p-app_management_filter_search_bar",value:this.props.searchQuery||"",size:"small"}))}},{key:"renderExportButton",value:function e(){var t=this.props.orgAppsApiTotal;var a=Jn.t("Installed Apps");if(!t)return null;return n.a.createElement(pn,{title:a,query:this.props.searchQuery,onDownloadClick:this.generateAppsCSV})}},{key:"renderHeader",value:function e(){var t=this.props.teamId;var a=this.state,r=a.initialAppCount,i=a.sortBy,s=a.sortDir,o=a.searchValue;return n.a.createElement(Yn,{type:re["g"].INSTALLED,orgAppCount:r,value:this.state.searchValue,onChange:this.onSearchInputChange,orgAppsSortDir:s,orgAppsSortBy:i,searchQuery:o,teamId:t})}},{key:"render",value:function e(){var t=this.props,a=t.orgAppsApiTotal,r=t.orgAppsLoading,i=t.searchQuery,s=t.orgAppsApiCursor;var o=this.getOrgAppsListProps();if(0===a&&!i&&!r&&s)return n.a.createElement("div",{className:"p-app_management_installed_apps"},this.renderHeader(),n.a.createElement(bn,{orgName:this.props.orgName,type:re["g"].INSTALLED}));return n.a.createElement("div",{className:"p-app_management_installed_apps"},this.renderHeader(),n.a.createElement("div",{className:"c-app_management_indent_half"},n.a.createElement(Wn,o)))}}]);return t}(r["PureComponent"]);$n.displayName="AppManagementInstalledApps";$n.defaultProps=Zn;var ei=function e(t){var a=Object(Z["e"])(t);var r=Object(Xr["b"])(t);return{needsUpdate:Object(F["m"])(t),orgId:a.id,teamId:r,highlightId:Object(F["j"])(t)}};var ti=function e(t){return{fetchInstalledApps:function e(){return t(D["e"].apply(void 0,arguments))},fetchAppManagementStatus:function e(){return t(D["a"].apply(void 0,arguments))},setInstalledAppsNeedUpdate:function e(){return t(F["x"].apply(void 0,arguments))},bulkSetAppStatus:function e(){return t(F["a"].apply(void 0,arguments))},setCommonAppInfoById:function e(a){return t(Object(F["u"])(a))}}};var ai=Object(o["connect"])(ei,ti)($n);var ri=ai;function ni(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function ii(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ni(Object(a),true).forEach(function(t){J()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ni(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var si=1e3;var oi={fetchRestrictedAppsList:E["noop"],enterpriseId:"",needsUpdate:false,setRestrictedAppsNeedUpdate:E["noop"],highlightId:null,clearHighlightId:E["noop"],setCommonAppInfoById:E["noop"],bulkSetAppStatus:E["noop"]};var li=function(e){k()(t,e);function t(e){var a;p()(this,t);a=f()(this,g()(t).call(this,e));a.state={orgApps:[],orgAppsLoading:false,orgAppsApiCursor:null,hasReachedEnd:false};a.fetchApps=a.fetchApps.bind(y()(a));return a}h()(t,[{key:"componentDidMount",value:function e(){this.fetchApps()}},{key:"componentDidUpdate",value:function e(t){var a=this.props.needsUpdate;!t.needsUpdate&&a&&this.refetchApps()}},{key:"getOrgAppsListProps",value:function e(){var t=this.state,a=t.orgApps,r=t.orgAppsApiCursor,n=t.orgAppsLoading,i=t.searchQuery;var s=this.props.highlightId;var o={orgApps:a,orgAppsApiCursor:r,orgAppsLoading:n,searchQuery:i,showInstallationPolicy:true,type:re["g"].RESTRICTED,highlightId:s,fetchNewPage:this.fetchApps};return o}},{key:"setCursor",value:function e(t){this.setState(function(){return{orgAppsApiCursor:t}})}},{key:"setHasReachedEnd",value:function e(t){this.setState(function(){return{hasReachedEnd:t}})}},{key:"fetchApps",value:function e(t){var a=this;var r=this.state,n=r.orgApps,i=r.hasReachedEnd,s=r.orgAppsApiCursor;var o=this.props,l=o.bulkSetAppStatus,c=o.enterpriseId,u=o.fetchRestrictedAppsList,d=o.highlightId,p=o.clearHighlightId,m=o.setCommonAppInfoById;if(i)return;this.setState(function(){return{orgAppsLoading:true}});var h=ii({limit:50,enterprise_id:c,cursor:this.state.orgAppsApiCursor||""},t);u(h).then(function(e){var t=e.response_metadata;if(t){t.next_cursor&&s!==t.next_cursor||a.setHasReachedEnd(true);a.setCursor(t.next_cursor)}var r=e.restricted_apps.map(function(e){return e.app});m(r);var i=[];var o=[];e.restricted_apps.forEach(function(e){var t=e.app;i.push({id:t.id,isApproved:false,isRestricted:true,isNonExistent:false});t.id===d&&setTimeout(p,si);o.push({name:t.name,id:t.id,icons:t.icons,restrictedOn:e.date_updated,appDirectoryUrl:t.app_directory_url,source:t.is_internal?"internal":"app directory",restrictedBy:e.last_resolved_by&&e.last_resolved_by.actor_id})});l(i);a.setState(function(){return{orgApps:[].concat(ee()(n),o),orgAppsLoading:false}})})}},{key:"maybeRenderTable",value:function e(){var t=this.state,a=t.orgApps,r=t.orgAppsLoading;if(!a||!a.length&&!r)return n.a.createElement(bn,{type:re["g"].RESTRICTED});return n.a.createElement(Wn,A()({},this.getOrgAppsListProps(),{"data-qa":"org-apps-list"}))}},{key:"refetchApps",value:function e(){var t=this;this.resetState(function(){t.fetchApps({reason:"restrictedAppsNeedUpdate"});t.props.setRestrictedAppsNeedUpdate(false)})}},{key:"resetState",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E["noop"];var a={orgApps:[],orgAppsApiCursor:"",hasReachedEnd:false};this.setState(function(){return a},t)}},{key:"render",value:function e(){return n.a.createElement("div",{className:"p-app_management_approved_apps"},n.a.createElement("div",{className:"c-app_management_indent_half"},this.maybeRenderTable()))}}]);return t}(r["PureComponent"]);li.displayName="AppManagementRestrictedApps";li.defaultProps=oi;var ci=function e(t){var a=Object(Z["i"])(t);return{enterpriseId:a.id,needsUpdate:Object(F["n"])(t),highlightId:Object(F["j"])(t)}};var ui=function e(t){return{fetchRestrictedAppsList:function e(){return t(D["g"].apply(void 0,arguments))},setRestrictedAppsNeedUpdate:function e(){return t(F["y"].apply(void 0,arguments))},clearHighlightId:function e(){return t(F["b"].apply(void 0,arguments))},setCommonAppInfoById:function e(a){return t(Object(F["u"])(a))},bulkSetAppStatus:function e(){return t(F["a"].apply(void 0,arguments))}}};var di=Object(o["connect"])(ci,ui)(li);var pi=di;var mi=a(4813);function hi(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function vi(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?hi(Object(a),true).forEach(function(t){J()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):hi(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var fi=1e3;var bi={fetchApprovedAppsList:E["noop"],enterpriseId:"",needsUpdate:false,setApprovedAppsNeedUpdate:E["noop"],highlightId:null,clearHighlightId:E["noop"],orgName:"",setCommonAppInfoById:E["noop"],bulkSetAppStatus:E["noop"]};var gi=function(e){k()(t,e);function t(e){var a;p()(this,t);a=f()(this,g()(t).call(this,e));a.state={orgApps:[],orgAppsApiCursor:null,orgAppsLoading:false,searchQuery:"",hasReachedEnd:false};a.fetchApps=a.fetchApps.bind(y()(a));return a}h()(t,[{key:"componentDidMount",value:function e(){this.fetchApps()}},{key:"componentDidUpdate",value:function e(t){!t.needsUpdate&&this.props.needsUpdate&&this.refetchApps()}},{key:"getOrgAppsListProps",value:function e(){var t=this.state,a=t.orgApps,r=t.orgAppsApiCursor,n=t.orgAppsLoading,i=t.searchQuery;var s=this.props.highlightId;var o={orgApps:a,orgAppsApiCursor:r,orgAppsLoading:n,searchQuery:i,showInstallationPolicy:true,type:re["g"].APPROVED,highlightId:s,fetchNewPage:this.fetchApps};return o}},{key:"setCursor",value:function e(t){this.setState(function(){return{orgAppsApiCursor:t}})}},{key:"setHasReachedEnd",value:function e(t){this.setState(function(){return{hasReachedEnd:t}})}},{key:"fetchApps",value:function e(t){var a=this;var r=this.state,n=r.orgApps,i=r.hasReachedEnd,s=r.orgAppsApiCursor;var o=this.props,l=o.bulkSetAppStatus,c=o.highlightId,u=o.clearHighlightId,d=o.enterpriseId,p=o.setCommonAppInfoById;if(i)return;var m=vi({limit:50,enterprise_id:d,cursor:s||""},t);this.setState(function(){return{orgAppsLoading:true}});this.props.fetchApprovedAppsList(m).then(function(e){var t=e.response_metadata;if(t){t.next_cursor&&s!==t.next_cursor||a.setHasReachedEnd(true);a.setCursor(t.next_cursor)}var r=e.approved_apps.map(function(e){return e.app});p(r);var i=[];var o=[];e.approved_apps.forEach(function(e){var t=e.app;t.id===c&&setTimeout(u,fi);i.push({id:t.id,isApproved:true,isRestricted:false,isNonExistent:false});o.push({name:t.name,id:t.id,icons:t.icons,approvedOn:e.date_updated,appDirectoryUrl:t.app_directory_url,source:t.is_internal?"internal":"app directory",approvedBy:e.last_resolved_by&&e.last_resolved_by.actor_id})});l(i);a.setState(function(){return{orgApps:[].concat(ee()(n),o),orgAppsLoading:false}})})}},{key:"maybeRenderTable",value:function e(){var t=this.props.orgName;var a=this.state,r=a.orgApps,i=a.orgAppsLoading;var s=this.getOrgAppsListProps();if(!r||!r.length&&!i)return n.a.createElement(bn,{type:re["g"].APPROVED,orgName:t});return n.a.createElement(Wn,A()({},s,{"data-qa":"org-apps-list"}))}},{key:"refetchApps",value:function e(){var t=this;this.resetState(function(){t.fetchApps({reason:"approvedAppsNeedUpdate"});t.props.setApprovedAppsNeedUpdate(false)})}},{key:"resetState",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E["noop"];var a={orgApps:[],orgAppsApiCursor:"",hasReachedEnd:false};this.setState(function(){return a},t)}},{key:"render",value:function e(){return n.a.createElement("div",{className:"p-app_management_approved_apps"},n.a.createElement("div",{className:"c-app_management_indent_half"},this.maybeRenderTable()))}}]);return t}(r["PureComponent"]);gi.displayName="AppManagementApprovedApps";gi.defaultProps=bi;var _i=function e(t){var a=Object(Z["i"])(t);return{enterpriseId:a.id,needsUpdate:Object(F["h"])(t),highlightId:Object(F["j"])(t),orgName:a.name}};var yi=function e(t){return{fetchApprovedAppsList:function e(){return t(D["c"].apply(void 0,arguments))},setApprovedAppsNeedUpdate:function e(){return t(F["t"].apply(void 0,arguments))},setCommonAppInfoById:function e(a){return t(Object(F["u"])(a))},clearHighlightId:function e(){return t(F["b"].apply(void 0,arguments))},bulkSetAppStatus:function e(){return t(F["a"].apply(void 0,arguments))}}};var Oi=Object(o["connect"])(_i,yi)(gi);var ki=Oi;var Ei=new j["b"]("enterprise_dashboard");var Ci={defaultTabId:"",profileIsOpen:false,openModal:E["noop"],orgApps:[],orgAppsApiCursor:null,orgAppsApiTotal:null,orgAppsLoading:false,orgAppsSortDir:null,orgAppsSortBy:null,searchQuery:"",featureOrgAppsDashboard:false,appProfile:null,activeTab:null,setActiveTab:E["noop"]};var Si=function(e){k()(t,e);function t(e){var a;p()(this,t);a=f()(this,g()(t).call(this,e));a.openApproveAppsModal=a.openApproveAppsModal.bind(y()(a));a.openRestrictAppsModal=a.openRestrictAppsModal.bind(y()(a));a.openInstallAppsModal=a.openInstallAppsModal.bind(y()(a));a.handleTabActionClick=a.handleTabActionClick.bind(y()(a));return a}h()(t,[{key:"componentDidMount",value:function e(){var t=this.props,a=t.defaultTabId,r=t.setActiveTab;a&&r(a)}},{key:"componentDidUpdate",value:function e(t){var a=this.props.setActiveTab;var r=this.props.defaultTabId;r!==t.defaultTabId&&a(r)}},{key:"getAppProps",value:function e(){var t={orgName:this.props.orgName,orgApps:this.props.orgApps,orgAppsApiCursor:this.props.orgAppsApiCursor,orgAppsApiTotal:this.props.orgAppsApiTotal,orgAppsLoading:this.props.orgAppsLoading,orgAppsSortDir:this.props.orgAppsSortDir,orgAppsSortBy:this.props.orgAppsSortBy,searchQuery:this.props.searchQuery};return t}},{key:"handleTabActionClick",value:function e(t){var a=this.props.setActiveTab;a(t);Object(R["b"])(Object(R["a"])().router.navigateTo("/organization/apps/"+t))}},{key:"openApproveAppsModal",value:function e(){var t=this.props.openModal;t({element:n.a.createElement(Xe,{mode:re["a"].APPROVE})})}},{key:"openInstallAppsModal",value:function e(){var t=this.props,a=t.featureOrgAppsDashboard,r=t.openModal;r({element:n.a.createElement(ta,{featureOrgAppsDashboard:a,mode:re["a"].INSTALL,type:re["g"].INSTALLED})})}},{key:"openRestrictAppsModal",value:function e(){var t=this.props.openModal;t({element:n.a.createElement(Xe,{mode:re["a"].RESTRICT})})}},{key:"renderApprovedAppsContent",value:function e(){return n.a.createElement(ki,null)}},{key:"renderInstalledAppsContent",value:function e(){return n.a.createElement(ri,this.getAppProps())}},{key:"renderRestrictedAppsContent",value:function e(){return n.a.createElement(pi,null)}},{key:"render",value:function e(){var t=this.props,a=t.appProfile,r=t.featureOrgAppsDashboard,i=t.profileIsOpen,s=t.activeTab;var o=[{title:Ei.t("Installed Apps"),id:"installed",content:this.renderInstalledAppsContent(),onClick:this.handleTabActionClick},{title:Ei.t("Approved Apps"),id:"approved",content:this.renderApprovedAppsContent(),onClick:this.handleTabActionClick},{title:Ei.t("Restricted Apps"),id:"restricted",content:this.renderRestrictedAppsContent(),onClick:this.handleTabActionClick}];var l=w()("p-app-panel",{open:i});return n.a.createElement("div",{className:"p-app_management padding_top_200"},n.a.createElement(Yr,{openApproveAppsModal:this.openApproveAppsModal,openRestrictAppsModal:this.openRestrictAppsModal,openInstallAppsModal:this.openInstallAppsModal,featureOrgAppsDashboard:r}),n.a.createElement(I["a"],{tabs:o,defaultTabId:s}),n.a.createElement("div",{className:l},a?n.a.createElement(Br,a):null),n.a.createElement(qr["a"],null))}}]);return t}(r["PureComponent"]);Si.displayName="AppManagement";Si.defaultProps=Ci;var wi=function e(t){return{openModal:function e(){return t(L["openModal"].apply(void 0,arguments))},setActiveTab:function e(){return t(F["s"].apply(void 0,arguments))}}};var ji=function e(t){var a=Object(P["isFeatureEnabled"])(t,"feature_org_apps_dashboard");return{featureOrgAppsDashboard:a,activeTab:Object(F["f"])(t)}};var Ii=Object(o["connect"])(ji,wi)(Si);var Ti=Ii;Object(c["a"])("interop.appManagement",{render:function e(t,a,r){if(!t)throw new Error("appManagement render must be called with a teamId parameter");var i=Object(l["f"])(t);s.a.render(n.a.createElement(o["Provider"],{store:i},n.a.createElement(u["a"],null,n.a.createElement(Ti,r))),a)},stop:function e(t){s.a.unmountComponentAtNode(t)}})},,,,,,,,,,,,,,,,,,,function(e,t,a){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){},,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(85);var s=a.n(i);var o=a(12);var l=a(26);var c=a(52);var u=a(444);var d=a(88);var p=a.n(d);var m=a(110);var h=a.n(m);var v=a(135);var f=a.n(v);var b=a(169);var g=a.n(b);var _=a(138);var y=a.n(_);var O=a(147);var k=a.n(O);var E=a(185);var C=a.n(E);var S=a(2);var w=a(0);var j=a(6);var I=a(30);var T=a(11);var A=a(5104);var N=a(5105);var P=a(277);var M=a(13);var D=a.n(M);var x=a(89);var R=a(494);var F=a(23);var L=a(316);var U={all:"all",archived:"archived",externalShared:"external_shared",publicChannels:"private_exclude"};var B="any_workspace";var q=-1;var G={channel:null};function H(e){var t=e.channel;var a=t&&t.creator_id;if(!a||a===q)return n.a.createElement(F["b"],{type:"minus"});return n.a.createElement(L["a"],{id:a})}H.displayName="ChannelMgmtCreatedBy";H.defaultProps=G;var W=H;var V=a(9);var K=a(295);var z={channel:null};function Q(e){var t=e.channel;var a=Object(V["getChannelCreatedTime"])(t);if(!a||a===q)return n.a.createElement(F["b"],{type:"minus"});return n.a.createElement("span",null,Object(K["a"])(a,"{date_short}"))}Q.displayName="ChannelMgmtCreationDate";Q.defaultProps=z;var Y=Q;var J=a(189);var X={channel:null};function Z(e){var t=e.channel;var a=Object(V["getChannelLastActivityTs"])(t);var r=Math.floor(a/1e3);if(!r||r===q)return n.a.createElement(F["b"],{type:"minus"});return n.a.createElement("div",null,n.a.createElement("div",null,Object(J["c"])(r,"{date_short}")))}Z.displayName="ChannelMgmtLastActivity";Z.defaultProps=X;var $=Z;var ee=a(1609);var te={channel:null};function ae(e){var t=e.channel;if(Object(V["isExternallySharedChannel"])(t)){var a=t.connected_team_ids;var r=Object(V["getPendingConnectedTeamIds"])(t);var i=a.concat(r);if(!Object(S["isEmpty"])(i)&&i!==q)return n.a.createElement("div",{"data-qa":"ch_mgmt_list_row_ext_org"},n.a.createElement(ee["a"],{id:i[0]}));return n.a.createElement("div",{"data-qa":"ch_mgmt_list_row_ext_org_none"},n.a.createElement(F["b"],{type:"minus"}))}return n.a.createElement("div",{"data-qa":"ch_mgmt_list_row_ext_org_none"},n.a.createElement(F["b"],{type:"minus"}))}ae.displayName="ChannelMgmtExternalOrgs";ae.defaultProps=te;var re=ae;var ne={channel:null};function ie(e){var t=e.channel;var a=Object(V["getChannelGuestCount"])(t);if(!a||a===q)return n.a.createElement(F["b"],{type:"minus"});return n.a.createElement("div",null,a)}ie.displayName="ChannelGuests";ie.defaultProps=ne;var se=ie;var oe=a(252);var le={channel:null};function ce(e){var t=e.channel;var a=Object(V["getChannelMemberCount"])(t);if(!a||a===q)return n.a.createElement(F["b"],{type:"minus"});return n.a.createElement("div",null,n.a.createElement("span",null,n.a.createElement(F["b"],{className:"margin_right_25",type:"user",size:"inherit",inline:true}),Object(oe["b"])(a)))}ce.displayName="ChannelGuests";ce.defaultProps=le;var ue=ce;var de=a(270);var pe=new j["b"]("enterprise_dashboard");var me={channel:null};function he(e){var t=e.channel,a=e.featureChannelMgmtPhaseOne;if(!a)return null;if(Object(V["isOrgWide"])(t))return n.a.createElement("b",null,pe.t("All workspaces"));var r=t.internal_team_ids||[];if(Object(S["isEmpty"])(r))return n.a.createElement(F["b"],{type:"minus"});if(Object(V["isOrgShared"])(t)||r&&r.length>1)return n.a.createElement("b",null,pe.t("{numWorkspaces} workspaces",{numWorkspaces:r.length}));var i=r[0];return n.a.createElement(ee["a"],{id:i})}he.displayName="ChannelWorkspaces";he.defaultProps=me;var ve=Object(de["a"])("feature_channel_mgmt_phase_one")(he);var fe=a(1444);var be={channel:null};function ge(e){var t=e.channel;var a;a=Object(V["isPrivateChannel"])(t)?"ch_mgmt_list_row_channel_private":Object(V["isExternallySharedChannel"])(t)?"ch_mgmt_list_row_channel_ext_shared":Object(V["isOrgShared"])(t)?"ch_mgmt_list_row_channel_shared":Object(V["isArchived"])(t)?"ch_mgmt_list_row_channel_archived":"ch_mgmt_list_row_channel_public";return n.a.createElement("div",{"data-qa":a},n.a.createElement(fe["a"],{className:"p-channel_mgmt__name_list_entity overflow_ellipsis",channelId:t.id,channel:t}))}ge.displayName="ChannelMgmtChannel";ge.defaultProps=be;var _e=ge;function ye(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function Oe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ye(Object(a),true).forEach(function(t){p()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ye(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var ke=new j["b"]("enterprise_dashboard");var Ee={channels:[],searchQuery:"",sortBy:"channel_name",sortDir:"desc",isLoading:false,isSearching:false,numTotalResults:null};var Ce="default";var Se="asc";var we="desc";var je="sort";var Ie="arrow-down-medium";var Te="arrow-up-medium";var Ae={};Ae[Ce]=je;Ae[Se]=Ie;Ae[we]=Te;var Ne=function(e){C()(t,e);function t(e){var a;h()(this,t);a=g()(this,y()(t).call(this,e));Object(I["a"])(k()(a),["makeHeader","makeHeaders","makeRowTemplate","makeRows","getHeaders","onRequestNextPage","headerItemOnClick","determineSortIcon","sortableHeaderItemOnClick"]);return a}f()(t,[{key:"onRequestNextPage",value:function e(t){if(this.props.numTotalResults===t)return;this.props.fetchChannels()}},{key:"getHeaders",value:function e(){var t=this.props,a=t.featureChannelMgmtPhaseOne,r=t.sortDir;if(!a)return null;return[{id:"name",value:ke.t("Name"),sortable:true,noHover:false,className:"p-channel_mgmt__table_header--name","data-qa":"ch_mgmt_list_col_name_sort_btn_"+r},{id:"workspaces",value:ke.t("Workspaces"),noHover:true,className:"p-channel_mgmt__table_header--teams","data-qa":"ch_mgmt_list_col_ws"},{id:"member_count",value:ke.t("Members"),sortable:true,noHover:false,className:"p-channel_mgmt__table_header--users","data-qa":"ch_mgmt_list_col_members_sort_btn_"+r},{id:"guest_count",value:ke.t("Guests"),noHover:true,className:"p-channel_mgmt__table_header--guests","data-qa":"ch_mgmt_list_col_guests"},{id:"ext_orgs",value:ke.t("External Organizations"),noHover:true,className:"p-channel_mgmt__table_header--ext_orgs","data-qa":"ch_mgmt_list_col_ext_org_sort_btn_"+r},{id:"last_activity",value:ke.t("Last activity"),noHover:true,className:"p-channel_mgmt__table_header--activity","data-qa":"ch_mgmt_list_col_last_activity"},{id:"created",value:ke.t("Creation date"),sortable:true,noHover:false,className:"p-channel_mgmt__table_header--created","data-qa":"ch_mgmt_list_col_created_sort_btn_"+r},{id:"creator",value:ke.t("Created by"),noHover:true,className:"p-channel_mgmt__table_header--creator","data-qa":"ch_mgmt_list_col_creator_sort_btn_"+r}]}},{key:"determineSortIcon",value:function e(t){var a=this.props,r=a.sortBy,n=a.sortDir;var i=je;t===r&&(i=n===Se?Ie:Te);return i}},{key:"headerItemOnClick",value:function e(t){t.sortable&&this.sortableHeaderItemOnClick(t)}},{key:"sortableHeaderItemOnClick",value:function e(t){var a=this.props,r=a.sortBy,n=a.sortDir;var i=r;var s=n;if(t.id===r)s=n&&n!==Se?Se:we;else{i=t.id;s=Se}this.props.sortChannels({sortBy:i,sortDir:s})}},{key:"makeHeader",value:function e(t){var a=this.props.sortBy;var r=Oe({},t,{onClick:this.headerItemOnClick});t.sortable&&(r.iconType=this.determineSortIcon(t.id,t));a===t.id&&(r.className=D()(r.className,"p-channel_mgmt__table_header--actve"));return r}},{key:"makeHeaders",value:function e(t){var a=this;var r=[];t.forEach(function(e){r.push(a.makeHeader(e))});return r}},{key:"makeRowTemplate",value:function e(){var t=this.props.featureChannelMgmtPhaseOne;if(!t)return null;return{items:[{value:function e(t){return n.a.createElement(_e,{channel:t})},className:"p-channel_mgmt__table_row_item--name"},{value:function e(t){return n.a.createElement(ve,{channel:t})},className:"p-channel_mgmt__table_row_item--teams",dataQa:"ch_mgmt_list_row_ws"},{value:function e(t){return n.a.createElement(ue,{channel:t})},className:"p-channel_mgmt__table_row_item--users",dataQa:"ch_mgmt_list_row_members"},{value:function e(t){return n.a.createElement(se,{channel:t})},className:"p-channel_mgmt__table_row_item--guests",dataQa:"ch_mgmt_list_row_guests"},{value:function e(t){return n.a.createElement(re,{channel:t})},className:"p-channel_mgmt__table_row_item--ext_orgs"},{value:function e(t){return n.a.createElement($,{channel:t})},className:"p-channel_mgmt__table_row_item--activity",dataQa:"ch_mgmt_list_row_last_activity"},{value:function e(t){return n.a.createElement(Y,{channel:t})},className:"p-channel_mgmt__table_row_item--created",dataQa:"ch_mgmt_list_row_created"},{value:function e(t){return n.a.createElement(W,{channel:t})},className:"p-channel_mgmt__table_row_item--creator",dataQa:"ch_mgmt_list_row_creator"},{value:function e(){return null},className:"p-channel_mgmt__table_row_item--actions"}]}}},{key:"makeRows",value:function e(){var t=this;var a=this.props,r=a.channels,n=a.isLoading,i=a.isSearching,s=a.searchQuery;var o=0;if(!Object(S["isEmpty"])(s)&&!n&&!i&&Object(S["isEmpty"])(r))return[];var l=r&&r.map(function(e){o+=1;var a="channel"+o;var r=0;return{id:o,items:t.makeRowTemplate().items.map(function(t){r+=1;return{id:"row_"+a+"_col_"+r,value:t.value(e),className:t.className}}),selectable:true}});return l}},{key:"maybeRenderNoResultsMessage",value:function e(){var t=this.props,a=t.isLoading,r=t.featureChannelMgmtPhaseOne,i=t.channels,s=t.searchQuery,o=t.isSearching;if(!r)return null;if(Object(S["isEmpty"])(i)&&!a&&!o){var l=s?ke.rt("No results found matching <b>{searchQuery}</b>.",{searchQuery:s}):ke.rt("No results found.");return n.a.createElement("div",{className:"p-channel_mgmt__no_results_message"},l)}return null}},{key:"maybeRenderLoadingSpinner",value:function e(){var t=this.props,a=t.isLoading,r=t.isSearching,i=t.channels;if(Object(S["isEmpty"])(i)&&a||r)return n.a.createElement("div",{className:"p-channel_mgmt__loading_spinner_overlay"},n.a.createElement("div",{className:"p-channel_mgmt__loading_spinner"},n.a.createElement(x["a"],null)));return null}},{key:"render",value:function e(){var t=this.props,a=t.isLoading,r=t.featureChannelMgmtPhaseOne,i=t.channels;if(!r)return null;var s=this.makeRows();var o=this.getHeaders();var l=this.makeHeaders(o);return n.a.createElement("div",{className:"p-channel_mgmt__table_wrapper"},n.a.createElement("div",{className:"p-channel_mgmt__table_scroller"},n.a.createElement("div",{className:"p-channel_mgmt__table","data-qa":"ch_mgmt_list_table"},n.a.createElement(R["b"],{id:"channel-mgmt-table",autoHeight:true,headers:l,headerItemOnClick:this.headerItemOnClick,rows:s,onRequestNextPage:this.onRequestNextPage,isLoading:!Object(S["isEmpty"])(i)&&a,useKeyboardNavigableTable:true,rowClassName:"p-channel_mgmt__row",rowHeaderItemClassName:"p-channel_mgmt__row_header",rowDataQa:"ch_mgmt_list_rows"}))),this.maybeRenderLoadingSpinner(),this.maybeRenderNoResultsMessage())}}]);return t}(n.a.PureComponent);Ne.displayName="ChannelMgmtTable";Ne.defaultProps=Ee;var Pe=function e(t){return{sortBy:Object(N["g"])(t),sortDir:Object(N["h"])(t),isLoading:Object(N["d"])(t),isSearching:Object(N["e"])(t),channels:Object(N["b"])(t),numTotalResults:Object(N["f"])(t),featureChannelMgmtPhaseOne:Object(T["isFeatureEnabled"])(t,"feature_channel_mgmt_phase_one")}};var Me=function e(t){return{fetchChannels:function e(){return t(A["a"].apply(void 0,arguments))},sortChannels:function e(){return t(A["n"].apply(void 0,arguments))}}};var De=Object(o["connect"])(Pe,Me)(Ne);var xe=a(428);var Re=a(451);var Fe=a(356);var Le=a(1586);var Ue=new j["b"]("enterprise_dashboard");var Be={searchQuery:"",selectedWorkspace:void 0};var qe=function e(t){return(t||[]).map(function(e){return{value:e.id,label:e.id,entity:e}})};function Ge(e){var t=e.searchQuery,a=e.selectedChannelFilter,r=e.selectedWorkspace,i=e.featureChannelMgmtPhaseOne,s=e.onChangeChannelFilterOption,o=e.onChangeWorkspaceOption,l=e.onSearchQueryChange,c=e.totalChannelCount,u=e.searchTeams;if(!i)return null;var d=[{label:Ue.t("All Channels"),value:U.all},{label:Ue.t("Public channels"),value:U.publicChannels},{label:Ue.t("Shared with external organizations"),value:U.externalShared},{label:Ue.t("Archived channels"),value:U.archived}];var p={label:Ue.t("Any workspace"),value:B};var m=d.find(function(e){return e.value===a});var h=null;r&&(h=r===B?p:{value:r});return n.a.createElement("div",{className:"p-channel_mgmt__filter_container"},n.a.createElement("label",{htmlFor:"channel-mgmt-search",className:"inline_flex no_margin"},n.a.createElement(xe["a"],{placeholder:Ue.t("Search {channelNumber} channels...",{channelNumber:c}),id:"channel-mgmt-search",icon:"search",size:"small",className:"margin_right_75 p-channel_mgmt__search_input",onChange:l,value:t,"data-qa":"ch_mgmt_search_input"})),n.a.createElement("label",{htmlFor:"channel-mgmt-filter",className:"inline_flex no_margin","data-qa":"ch_mgmt_all_channel_filter"},n.a.createElement(Re["d"],{options:d,className:"margin_right_75",ariaLabel:Ue.t("Channel Management Channel Filter"),selectId:"channel-mgmt-channel-filter",width:300,onOptionSelected:s,showDropdownIcon:true,selectedOption:m,size:"small"})),n.a.createElement("label",{htmlFor:"channel-mgmt-workspace-filter",className:"inline_flex no_margin"},n.a.createElement(Fe["c"],{selectDataQa:"ch_mgmt_all_workspace_filter",search:u,className:"margin_right_75",placeholderText:Ue.t("Select a workspace..."),ariaLabel:Ue.t("Workspace Filter"),selectId:"channel-mgmt-workspace-filter",width:250,onOptionSelected:o,showDropdownIcon:true,selectedOption:h,size:"small",renderOption:function e(t){return t.entity?n.a.createElement(Le["a"],{team:t.entity}):t.label},renderSelectedOption:function e(t){return t.entity?n.a.createElement(Le["a"],{team:t.entity,id:t.value}):t.label},processOptions:function e(t){return Promise.resolve([p,{label:Ue.t("Workspaces"),options:qe(t)}])}})))}Ge.displayName="ChannelMgmtSearchBar";Ge.defaultProps=Be;var He=Ge;var We=a(4821);function Ve(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function Ke(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ve(Object(a),true).forEach(function(t){p()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ve(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var ze=new j["b"]("enterprise_dashboard");var Qe=300;var Ye={entities:{teams:true},sort:{frecency:false},allowEmptyQuery:true};var Je={selectedChannelFilter:U.all,selectedWorkspace:B};var Xe=function(e){C()(t,e);function t(e){var a;h()(this,t);a=g()(this,y()(t).call(this,e));Object(I["a"])(k()(a),["onSearchQueryChange","onChangeChannelFilterOption","onChangeWorkspaceOption","searchChannels"]);a.state={searchQuery:void 0,totalChannelCount:145};a.debounceSearchChannels=Object(S["debounce"])(a.searchChannels,Qe);return a}f()(t,[{key:"componentDidMount",value:function e(){this.props.fetchChannels()}},{key:"onChangeChannelFilterOption",value:function e(t){var a=t.value;this.props.filterChannels({filter:a})}},{key:"onChangeWorkspaceOption",value:function e(t){var a=t.value;this.props.filterChannels({teamId:a})}},{key:"onSearchQueryChange",value:function e(t){var a=t.target.value||"";this.setState(function(){return{searchQuery:a}},this.debounceSearchChannels(a))}},{key:"searchChannels",value:function e(t){this.props.searchChannels({searchQuery:t})}},{key:"renderHeader",value:function e(){if(!this.props.featureChannelMgmtPhaseOne)return null;return n.a.createElement("div",{className:"p-channel_mgmt__header","data-qa":"ch_mgmt_title_text"},n.a.createElement("h1",null,ze.t("Channels")))}},{key:"render",value:function e(){var t=this.props,a=t.featureChannelMgmtPhaseOne,r=t.searchTeams,i=t.selectedChannelFilter,s=t.selectedWorkspace;var o=this.state,l=o.searchQuery,c=o.totalChannelCount;if(!a)return null;return n.a.createElement("div",{className:"p-channel_mgmt__page"},this.renderHeader(),n.a.createElement(He,{searchQuery:l,selectedChannelFilter:i,selectedWorkspace:s,onChangeChannelFilterOption:this.onChangeChannelFilterOption,onSearchQueryChange:this.onSearchQueryChange,onChangeWorkspaceOption:this.onChangeWorkspaceOption,totalChannelCount:c,searchTeams:r,featureChannelMgmtPhaseOne:true}),n.a.createElement(De,{searchQuery:l}))}}]);return t}(n.a.PureComponent);Xe.displayName="ChannelMgmt";Xe.defaultProps=Je;var Ze=function e(t){return{featureChannelMgmtPhaseOne:Object(T["isFeatureEnabled"])(t,"feature_channel_mgmt_phase_one"),selectedChannelFilter:Object(N["c"])(t),selectedWorkspace:Object(N["i"])(t)}};var $e=function e(t){return{fetchChannels:function e(){return t(A["a"].apply(void 0,arguments))},searchChannels:function e(){return t(A["c"].apply(void 0,arguments))},filterChannels:function e(){return t(A["b"].apply(void 0,arguments))},searchTeams:function e(a){return t(Object(P["e"])({query:a,options:Ke({},Ye,{limit:20})}))}}};var et=Object(o["connect"])(Ze,$e)(Xe);Object(c["a"])("interop.channelMgmt",{render:function e(t,a){if(!t)throw new Error("channelMgmt render must be called with a teamId parameter");var r=Object(l["f"])(t);s.a.render(n.a.createElement(o["Provider"],{store:r},n.a.createElement(u["a"],null,n.a.createElement(et,null))),a)},stop:function e(t){s.a.unmountComponentAtNode(t)}})},,,,function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(85);var s=a.n(i);var o=a(12);var l=a(26);var c=a(52);var u=a(444);var d=a(4697);Object(c["a"])("interop.ssoSettings",{render:function e(t,a,r){if(!t)throw new Error("ssoPreferences render must be called with a teamId parameter");var i=Object(l["f"])(t);s.a.render(n.a.createElement(o["Provider"],{store:i},n.a.createElement(u["a"],null,n.a.createElement(d["a"],r))),a)},stop:function e(t){s.a.unmountComponentAtNode(t)}})},,function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(85);var s=a.n(i);var o=a(12);var l=a(26);var c=a(52);var u=a(444);var d=a(4697);var p=a(110);var m=a.n(p);var h=a(135);var v=a.n(h);var f=a(169);var b=a.n(f);var g=a(138);var _=a.n(g);var y=a(147);var O=a.n(y);var k=a(185);var E=a.n(k);var C=a(88);var S=a.n(C);var w=a(0);var j=a(6);var I=a(3376);var T=a(387);var A=a(106);var N=a(131);var P=a(89);var M=a(50);var D=a(141);var x=a(1235);var R=a(108);var F=a(151);var L=a(269);var U=a(17);var B=a(24);var q=a(2);var G=a(30);var H=a(913);var W=a(2952);var V;function K(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function z(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?K(Object(a),true).forEach(function(t){S()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):K(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Q=new j["b"]("enterprise_dashboard");var Y={idpButtonLabel:"SAML",idpLabel:"IDP",user:{}};var J=Symbol("UPDATE_PROFILES_ON_LOGIN_SETTING");var X=Symbol("EDITABLE_EMAIL_ADDRESSES_SETTING");var Z=Symbol("EDITABLE_DISPLAY_NAME_SETTING");var $=Symbol("GUEST_ACCOUNTS_REQUIRE_SSO_SETTING");var ee=Symbol("CUSTOM_SIGN_IN_BUTTON_SETTING");var te=(V={},S()(V,J,"syncWithProvider"),S()(V,X,"changeEmail"),S()(V,Z,"chooseUsername"),S()(V,$,"authRestrictions"),S()(V,ee,"samlProviderLabel"),V);var ae="checkbox";var re="radio";var ne="button_preview";var ie=function(e){E()(t,e);function t(e){var a;m()(this,t);a=b()(this,_()(t).call(this,e));a.state={settingsItems:[{id:J,value:false,saving:false,open:false},{id:X,value:false,saving:false,open:false},{id:Z,value:false,saving:false,open:false},{id:$,value:"1",saving:false,open:false},{id:ee,value:"",saving:false,open:false}],loading:true};Object(G["a"])(O()(a),["onEdit","onCancel","saveSetting","settingClicked","onButtonPreviewChange"]);return a}v()(t,[{key:"componentDidMount",value:function e(){var t=this;this.props.getEnterpriseAuthSSOPrefs().then(function(e){var a=e.sso;var r=a.sync_with_provider;var n=a.change_email;var i=a.choose_username;var s=""+(a.auth_restrictions||0);var o=a.saml_provider_label;t.setState(function(e){var t=e.settingsItems.slice();Object(q["find"])(t,{id:J}).value=r;Object(q["find"])(t,{id:X}).value=n;Object(q["find"])(t,{id:Z}).value=i;Object(q["find"])(t,{id:$}).value=s;Object(q["find"])(t,{id:ee}).value=o;return{settingsItems:t,loading:false}})});document.body.classList.add("p-sso_preferences_view_deprecated__body-position-static")}},{key:"componentWillUnmount",value:function e(){document.body.classList.remove("p-sso_preferences_view_deprecated__body-position-static")}},{key:"onButtonPreviewChange",value:function e(t){var a=this;return function(e){a._setSettingsItemKeys(t,[{k:"tempValue",v:e}])}}},{key:"onCancel",value:function e(t){var a=this;return function(){a._setSettingsItemKeys(t,[{k:"open",v:false}])}}},{key:"onCheckboxChange",value:function e(t){var a=this;return function(e){a._setSettingsItemKeys(t,[{k:"tempValue",v:e.target.checked}])}}},{key:"onEdit",value:function e(t){var a=this;return function(){var e=a.state.settingsItems[t];a._setSettingsItemKeys(t,[{k:"open",v:true},{k:"tempValue",v:e.value}])}}},{key:"onRadioChange",value:function e(t){var a=this;return function(e){e.target.checked&&a._setSettingsItemKeys(t,[{k:"tempValue",v:e.target.value}])}}},{key:"settingClicked",value:function e(t){var a=this;return function(){return a.onEdit(t)()}}},{key:"_apiSet",value:function e(t,a){var r=this;this._setSettingsItemKeys(a,[{k:"saving",v:true}]);return this.props.setEnterpriseAuthSSOPrefs(t).then(function(){var e=r.state.settingsItems[a];r._setSettingsItemKeys(a,[{k:"value",v:e.tempValue}]);var t=Q.t("Setting saved.");t&&r.props.enqueueToast({element:n.a.createElement(N["b"],{icon:"check-circle-o-large"},n.a.createElement("strong",null,t))});r._setSettingsItemKeys(a,[{k:"saving",v:false},{k:"open",v:false}])}).catch(function(){var e=Q.t("Something went wrong.");e&&r.props.enqueueToast({element:n.a.createElement(N["b"],null,n.a.createElement("strong",null,e))})})}},{key:"_setSettingsItemKeys",value:function e(t,a){this.setState(function(e){var r=e.settingsItems.slice();var n=Object(q["reduce"])(a,function(e,t){e[t.k]=t.v;return e},{});r.splice(t,1,z({},r[t],{},n));return{settingsItems:r}})}},{key:"_toggleBooleanValue",value:function e(t,a){var r=this;var n=this.state.settingsItems[t].id;var i=Object(q["isBoolean"])(a)?a:!this.state.settingsItems[t].value;var s=S()({},te[n],n===$?Object(q["toNumber"])(!i):i);return this._apiSet(s,t).then(function(){r._setSettingsItemKeys(t,[{k:"value",v:i}])})}},{key:"saveSetting",value:function e(t){var a=this;return function(){var e=a.state.settingsItems[t];var r=e.id;var n=S()({},te[r],e.tempValue);n.authRestrictions&&(n.authRestrictions=+n.authRestrictions);return a._apiSet(n,t)}}},{key:"renderControl",value:function e(t,a,r){switch(r[t.id].type){case ae:return n.a.createElement(M["a"],{text:r[t.id].onState,subtext:r[t.id].onDescription,type:"inline",cursor:"pointer"},n.a.createElement(R["a"],{name:"checkbox-"+a,checked:t.tempValue,onChange:this.onCheckboxChange(a)}));case re:return n.a.createElement("div",null,n.a.createElement(L["a"],{field:re+"-"+a,legendText:Q.t("SSO authentication must be used by:")},n.a.createElement(M["a"],{text:Q.t("All org members"),subtext:Q.t("All accounts in the organization must sign in with SSO."),type:"inline",cursor:"pointer"},n.a.createElement(F["a"],{name:re+"-"+a,value:"0",checked:"0"===t.tempValue,onChange:this.onRadioChange(a)})),n.a.createElement(M["a"],{text:Q.t("All org members, except guests"),subtext:Q.t("Guest accounts can sign in with a Slack email and password"),type:"inline",cursor:"pointer"},n.a.createElement(F["a"],{name:re+"-"+a,value:"1",checked:"1"===t.tempValue,onChange:this.onRadioChange(a)}))));case ne:return n.a.createElement("div",null,n.a.createElement("div",{className:"p-sso_preferences_view_deprecated__custom_button_layout"},n.a.createElement(M["a"],{className:"elevation_2 rounded",text:Q.t("Button preview:"),htmlFor:"custom-text",id:"custom-text-label"},n.a.createElement(B["d"],{type:"primary",size:"medium",className:"p-sso_preferences_view_deprecated__custom_button_layout__preview_button"},Q.rt("Sign in with {label}",{label:t.tempValue||this.props.idpButtonLabel})),n.a.createElement("div",{className:"c-hint"},Q.t("This is what your button will look like."))),n.a.createElement(M["a"],{text:Q.t("Sign in button label"),htmlFor:"custom-text",id:"custom-text-label"},n.a.createElement(D["a"],{ariaDescribedby:"custom-text-label",name:"custom-text",id:"custom-text",value:t.tempValue,placeholder:Q.t("Sign in with {label}",{label:this.props.idpButtonLabel}),hintText:Q.t("Customize your button label"),onChange:this.onButtonPreviewChange(a),size:"medium",maxCharacterLimit:20,maxLength:"20"}))));default:return null}}},{key:"renderIdentitySettings",value:function e(){var t,a=this;var r=(t={},S()(t,J,{label:Q.t("User profiles"),prompt:Q.t("Choose whether profile fields are synced each time a user logs in."),onDescription:Q.t("Available user profile fields will be synced from your identity provider every time a user logs in."),offDescription:Q.t("User profile fields will not be synced from your identity provider on log in."),onState:Q.t("Update profile each time a user logs in"),offState:Q.t("Don\u2019t update profile each time a user logs in"),type:ae}),S()(t,X,{label:Q.t("Email addresses"),prompt:Q.t("Choose whether users can change their email addresses in Slack."),onDescription:Q.t("Users will be able to change their email address to something other than the one from their {idpLabel} account. They\u2019ll still log in with {idpLabel}.",{idpLabel:this.props.idpLabel}),offDescription:Q.t("Users will not be able to change their email address to something other than the one from their {idpLabel} account.",{idpLabel:this.props.idpLabel}),onState:Q.t("Allow users to change their email address"),offState:Q.t("Don\u2019t allow users to change their email address"),type:ae}),S()(t,Z,{label:Q.t("Display names"),prompt:Q.t("Choose whether users can change their display name in Slack."),onDescription:Q.t("Users will be able to change their display name to something other than the one from their {idpLabel} account.",{idpLabel:this.props.idpLabel}),offDescription:Q.t("Users will not be able to change their display name to something other than the one from their {idpLabel} account.",{idpLabel:this.props.idpLabel}),onState:Q.t("Allow users to change their display name"),offState:Q.t("Don\u2019t allow users to change their display name"),type:ae}),S()(t,$,{label:Q.t("SSO authentication"),prompt:Q.t("Choose whether guest accounts need to sign in through your SSO provider."),onDescription:Q.t("All accounts in the organization must sign in with SSO."),offDescription:Q.t("Guest accounts can sign in with a Slack email and password."),onState:Q.t("Must be used by all org members"),offState:Q.t("Must be used by all org members, except guests"),type:re}),S()(t,ee,{label:Q.t("Custom sign-in button"),prompt:Q.t("Have a nickname for your SSO system? Add it here to help your members sign in."),onDescription:Q.t("This is what your sign in button will look like"),onState:Q.t("Button preview:"),offState:Q.t("Button preview:"),type:ne}),t);var i=Q.t("Save Setting");var s=function e(t){return true===t.value||"0"===t.value};var o=function e(t){var i=r[t.id];if(i.type===ne)return n.a.createElement("div",null,n.a.createElement(B["d"],{type:"primary",size:"medium",className:"p-sso_preferences_view_deprecated__custom_button_layout__preview_button readonly"},Q.rt("Sign in with {label}",{label:t.value||a.props.idpButtonLabel})),i.onDescription);return s(t)?i.onDescription:i.offDescription};var l=Object(U["isEnterpriseOwner"])(this.props.user);return n.a.createElement("div",null,this.state.settingsItems.map(function(e,t){return n.a.createElement("div",{key:e.id.toString()},n.a.createElement(H["a"],{label:r[e.id].label,state:s(e)?r[e.id].onState:r[e.id].offState,description:o(e),onClick:a.settingClicked(t),type:"button",control:{type:"button",onEdit:a.onEdit(t),editOnly:true},readonly:!l,readonlyTooltip:l?"":Q.t("Only Org Owners can change this setting")}),n.a.createElement(x["a"],{title:r[e.id].label,isOpen:e.open,onCancel:a.onCancel(t),onGo:a.saveSetting(t),goButtonText:i,goButtonIsPending:e.saving,withHeader:true},n.a.createElement("p",null,r[e.id].prompt),a.renderControl(e,t,r)))}))}},{key:"render",value:function e(){return n.a.createElement("div",{className:"p-sso_preferences_view_deprecated"},n.a.createElement("h1",{className:"p-sso_preferences_view_deprecated__title"},Q.t("SSO Preferences")),this.state.loading?n.a.createElement(P["a"],{color:"blue",size:"jumbo"}):n.a.createElement("div",null,this.renderIdentitySettings()),n.a.createElement(T["a"],null))}}]);return t}(r["PureComponent"]);ie.displayName="SSOPreferencesView";ie.defaultProps=Y;var se=function e(t){return{enqueueToast:function e(){return t(A["enqueueToast"].apply(void 0,arguments))},getEnterpriseAuthSSOPrefs:function e(){return t(Object(I["b"])({reason:"SSOPreferencesView_getEnterpriseAuthSSOPrefs"}))},setEnterpriseAuthSSOPrefs:function e(a){return t(Object(I["c"])(z({},a,{reason:"SSOPreferencesView_setEnterpriseAuthSSOPrefs"})))}}};var oe=Object(o["connect"])(null,se)(ie);Object(c["a"])("interop.ssoPreferences",{render:function e(t,a,r){if(!t)throw new Error("ssoPreferences render must be called with a teamId parameter");var i=Object(l["f"])(t);var c=TS.boot_data.feature_sso_preferences_view_modals;s.a.render(n.a.createElement(o["Provider"],{store:i},n.a.createElement(u["a"],null,c?n.a.createElement(d["a"],r):n.a.createElement(oe,r))),a)},stop:function e(t){s.a.unmountComponentAtNode(t)}})},,,,,,,,,function(e,t,a){},,,,,function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(85);var s=a.n(i);var o=a(12);var l=a(26);var c=a(52);var u=a(444);var d=a(5060);var p=a(110);var m=a.n(p);var h=a(135);var v=a.n(h);var f=a(169);var b=a.n(f);var g=a(138);var _=a.n(g);var y=a(185);var O=a.n(y);var k=a(0);var E=a(6);var C=a(387);var S=a(3286);var w={title:"",subtitle:"",description:null};var j=function(e){O()(t,e);function t(){m()(this,t);return b()(this,_()(t).apply(this,arguments))}v()(t,[{key:"renderDescription",value:function e(){if(!this.props.description)return null;return n.a.createElement("p",{className:"padding_top_50 margin_0 sk_foreground_max"},this.props.description)}},{key:"renderSubtitle",value:function e(){if(!this.props.subtitle)return null;return n.a.createElement("h3",{className:"padding_top_150"},this.props.subtitle)}},{key:"renderTitle",value:function e(){if(!this.props.title)return null;return n.a.createElement("h1",{className:"padding_bottom_100"},this.props.title)}},{key:"render",value:function e(){return n.a.createElement("div",{className:"p-ent_settings_header padding_bottom_150"},this.renderTitle(),this.renderSubtitle(),this.renderDescription())}}]);return t}(r["PureComponent"]);j.displayName="SettingsHeader";j.defaultProps=w;var I=j;var T=a(245);var A=a.n(T);var N=a(196);var P=a.n(N);var M=a(88);var D=a.n(M);var x=a(147);var R=a.n(x);var F=a(2);var L=a(30);var U=a(2026);var B=a(39);var q=a(191);var G=a(18);var H=a(11);var W=a(656);var V=a(912);var K=a(44);var z=a(24);var Q=a(13);var Y=a.n(Q);var J=a(23);var X=a(50);var Z=a(43);var $=a(108);var ee=a(141);var te=a(530);var ae=new E["b"]("enterprise_settings");var re="members";var ne="guests";var ie="text";var se="url";var oe="/custom_tos_view";var le={guestsChecked:false,membersUrl:"",membersUrlError:"",membersText:"",membersTextError:"",membersContentType:"text",onTextChange:F["noop"],onCheckboxChange:F["noop"],onUrlChange:F["noop"],onMembersURLContentTypeChange:F["noop"],onMembersTextContentTypeChange:F["noop"]};var ce=function e(t){var a=t.type,r=t.value,i=t.label,s=t.onChange;return n.a.createElement(X["a"],{id:"tos_accept_all_"+a+"_label",htmlFor:"tos_accept_all_"+a+"_checkbox",type:"inline",cursor:"pointer",className:"p-ent_custom_tos_accept_all_form__label",text:i},n.a.createElement($["a"],{id:"tos_accept_all_"+a+"_checkbox",checked:r,onChange:s}))};ce.displayName="renderCheckbox";var ue=function(e){O()(t,e);function t(e){var a;m()(this,t);a=b()(this,_()(t).call(this,e));a.state={membersContentType:a.props.membersContentType,guestsChecked:a.props.guestsChecked};a.onMembersTextChange=a.onTextChange.bind(R()(a),re);a.onMembersUrlChange=a.onUrlChange.bind(R()(a),re);a.onMembersToggle=a.onToggle.bind(R()(a),re);a.onGuestsToggle=a.onToggle.bind(R()(a),ne);a.onCheckboxChange=a.onCheckboxChange.bind(R()(a),ne);return a}v()(t,[{key:"onCheckboxChange",value:function e(t,a){var r=a.target.checked;this.setState(function(){return{guestsChecked:r}});this.props.onCheckboxChange(t,r)}},{key:"onTextChange",value:function e(t,a){this.setState(function(){var e;return e={},D()(e,t+"Text",a),D()(e,t+"TextError",""),e});this.props.onTextChange(t,a)}},{key:"onToggle",value:function e(t){var a=t+"ContentType";this.setState(function(e){return D()({},a,e[a]===ie?se:ie)})}},{key:"onUrlChange",value:function e(t,a){this.setState(function(){var e;return e={},D()(e,t+"Url",a),D()(e,t+"UrlError",""),e});this.props.onUrlChange(t,a)}},{key:"maybeRenderMembersInput",value:function e(){if(this.state.membersContentType!==se)return null;var t={error:this.props.membersUrlError,url:this.props.membersUrl,type:re,onChange:this.onMembersUrlChange};return this.renderInput(t)}},{key:"maybeRenderMembersTextarea",value:function e(){if(this.state.membersContentType!==ie)return null;var t={error:this.props.membersTextError,text:this.props.membersText,type:re,onChange:this.onMembersTextChange};return this.renderTextarea(t)}},{key:"renderGuestsCheckbox",value:function e(){var t={type:"members",value:this.state.guestsChecked,label:ae.t("Use the same Terms of Service as Full Members"),onChange:this.onCheckboxChange};return ce(t)}},{key:"renderInput",value:function e(t){this.props.onMembersURLContentTypeChange();var a=t.error,r=t.url,i=t.type,s=t.onChange;var o=ae.t("https://\u2026");return n.a.createElement(ee["a"],{id:"tos_"+i+"_input",name:"tos_"+i+"_input",value:r,onChange:s,errorText:a,errorLevel:"error",placeholder:o})}},{key:"renderInputBar",value:function e(t){var a=t.contentType,r=t.onToggle;var i=ae.t("Terms of Service");var s=a===ie?ae.t("Enter URL"):ae.t("Enter text");var o=Y()("p-ent_custom_tos_input_form__small_text","padding_left_50");return n.a.createElement("div",{className:"p-ent_custom_tos_input_form__toggle_bar"},n.a.createElement("span",{className:"p-ent_custom_tos_input_form__label c-label__text bold"},i),this.renderPreviewButton(t),n.a.createElement(Z["a"],{onClick:r},n.a.createElement("span",{className:o},s)))}},{key:"renderMembersInputBar",value:function e(){var t=this.props,a=t.membersUrl,r=t.membersText,n=t.membersContentType;var i=!r&&n===ie||!a&&n===se;var s={previewIsDisabled:i,contentType:n,content:n===ie?r:a,type:re,onToggle:this.onMembersToggle,onChange:this.onUrlChange};return this.renderInputBar(s)}},{key:"renderPreviewButton",value:function e(t){var a=this;var r=t.previewIsDisabled,i=t.contentType,s=t.content,o=t.type;var l=ae.t("Preview");var c=i===se;var u=c?function(){var e=window.open((Object(F["startsWith"])(s.toLowerCase(),"http")?"":"http://")+s,"_blank");e.opener=null}:function(){return a["tos_preview_"+o].submit()};var d=Y()("p-ent_custom_tos_input_form__small_text","p-ent_custom_tos_input_form__small_text--right-divider","padding_right_50",{sk_foreground_max:r});var p=n.a.createElement(Z["a"],{disabled:r,onClick:u},n.a.createElement("span",{className:d},l," ",n.a.createElement(J["a"],{type:"external-link",className:"p-ent_custom_tos_input_form__icon"})));if(c)return p;return n.a.createElement("form",{action:oe,method:"POST",ref:function e(t){a["tos_preview_"+o]=t},target:"_blank"},n.a.createElement("input",{type:"hidden",name:"custom_tos_preview",value:s}),p)}},{key:"renderTextarea",value:function e(t){this.props.onMembersTextContentTypeChange();var a=t.error,r=t.text,i=t.type,s=t.onChange;var o=ae.rt('<b>*bold*</b> <i>_italics_</i> ~strike~ <span className="quote">>quote</span> and links are allowed. <a className="underline sk_foreground_max cursor_pointer">Learn more</a>',null,function(e){var t=e.tag,a=e.key,r=e.text;return"a"===t?n.a.createElement(Z["a"],{key:a,href:"https://get.slack.help/hc/articles/202288908-Format-your-messages",target:"_blank",rel:"noopener noreferrer"},r):null});return n.a.createElement(te["a"],{resize:"none",id:"tos_"+i+"_textarea",name:"tos_"+i+"_textarea",value:r,hintText:o,onChange:s,errorText:a,errorLevel:"error"})}},{key:"render",value:function e(){var t=ae.t("Set custom Terms of Service that members and guests will have to accept before using Slack. If you already have a URL for your custom Terms of Service, you can enter that instead.");var a=ae.t("Full Members");var r=ae.t("Guests");return n.a.createElement("div",null,n.a.createElement("p",null,t),n.a.createElement("h3",{className:"margin_top_200 margin_bottom_100"},a),this.renderMembersInputBar(),this.maybeRenderMembersTextarea(),this.maybeRenderMembersInput(),n.a.createElement("h3",{className:"margin_top_200 margin_bottom_100"},r),this.renderGuestsCheckbox())}}]);return t}(r["PureComponent"]);ue.displayName="CustomTOSModalInputForm";ue.defaultProps=le;var de=ue;var pe=new E["b"]("enterprise_settings");var me={switchPane:F["noop"],guestsChecked:false,onCheckboxChange:F["noop"],onTextChange:F["noop"],membersText:"",membersTextError:"",membersUrlError:"",membersUrl:"",onUrlChange:F["noop"],membersContentType:"text",onMembersURLContentTypeChange:F["noop"],onValidateNext:F["noop"],onMembersTextContentTypeChange:F["noop"]};var he=function(e){O()(t,e);function t(){m()(this,t);return b()(this,_()(t).apply(this,arguments))}v()(t,[{key:"render",value:function e(){var t=this.props,a=t.isOkayToMoveNext,r=t.switchPane;var i=pe.t("Custom Terms of Service");var s=pe.t("Next");var o=pe.t("Cancel");a&&r("accept");return n.a.createElement(n.a.Fragment,null,n.a.createElement(K["h"],null,n.a.createElement(K["j"],{id:"customTOS__title-bar",title:i,"data-qa":"dialog_header"})),n.a.createElement(K["d"],null,n.a.createElement(K["e"],{"data-qa":"dialog_body"},n.a.createElement(de,{membersText:this.props.membersText,membersTextError:this.props.membersTextError,onTextChange:this.props.onTextChange,membersUrl:this.props.membersUrl,membersUrlError:this.props.membersUrlError,onUrlChange:this.props.onUrlChange,guestsChecked:this.props.guestsChecked,onCheckboxChange:this.props.onCheckboxChange,membersContentType:this.props.membersContentType,onMembersURLContentTypeChange:this.props.onMembersURLContentTypeChange,onMembersTextContentTypeChange:this.props.onMembersTextContentTypeChange}))),n.a.createElement(K["f"],{"data-qa":"dialog_footer"},n.a.createElement("div",{className:"sk_foreground_max"},"Step 1 of 2"),n.a.createElement(K["g"],null,n.a.createElement(K["c"],{type:"outline"},o),n.a.createElement(z["d"],{type:"primary","data-qa":"validate_next_btn",onClick:this.props.onValidateNext},s))))}}]);return t}(r["PureComponent"]);he.displayName="CustomTOSInputPane";he.defaultProps=me;var ve=he;var fe=new E["b"]("enterprise_settings");var be={membersShowAll:true,guestsShowAll:true,onMembersShowAllChange:F["noop"],onGuestsShowAllChange:F["noop"]};var ge=function e(t){var a=t.type,r=t.value,i=t.label,s=t.onChange;return n.a.createElement(X["a"],{id:"tos_accept_all_"+a+"_label",htmlFor:"tos_accept_all_"+a+"_checkbox",type:"inline",cursor:"pointer",className:"p-ent_custom_tos_accept_all_form__label",text:i},n.a.createElement($["a"],{id:"tos_accept_all_"+a+"_checkbox",checked:r,onChange:s}))};ge.displayName="renderCheckbox";var _e=function(e){O()(t,e);function t(e){var a;m()(this,t);a=b()(this,_()(t).call(this,e));Object(L["a"])(R()(a),["onMembersShowAllChange","onGuestsShowAllChange"]);return a}v()(t,[{key:"onGuestsShowAllChange",value:function e(t){var a=t.target.checked;this.props.onGuestsShowAllChange(a)}},{key:"onMembersShowAllChange",value:function e(t){var a=t.target.checked;this.props.onMembersShowAllChange(a)}},{key:"renderGuestsCheckbox",value:function e(){var t={type:"guests",value:this.props.guestsShowAll,label:fe.t("Require existing Guests to accept new terms"),onChange:this.onGuestsShowAllChange};return ge(t)}},{key:"renderMembersCheckbox",value:function e(){var t={type:"members",value:this.props.membersShowAll,label:fe.t("Require existing Full Members to accept new terms"),onChange:this.onMembersShowAllChange};return ge(t)}},{key:"render",value:function e(){var t=fe.t("Require existing members to accept the new Terms of Service?");var a=fe.t("Future members will be required to accept these new terms, but you can also require existing members to accept them the next time they log in to Slack.");return n.a.createElement("div",{className:"c-ent_custom_tos_accept_all_form"},n.a.createElement("h3",{className:"margin_bottom_100"},t),n.a.createElement("p",{className:"margin_bottom_200"},a),this.renderMembersCheckbox(),this.renderGuestsCheckbox())}}]);return t}(r["PureComponent"]);_e.displayName="CustomTOSModalAcceptForm";_e.defaultProps=be;var ye=_e;var Oe=new E["b"]("enterprise_settings");var ke={membersShowAll:true,guestsShowAll:true,onMembersShowAllChange:F["noop"],onGuestsShowAllChange:F["noop"],switchPane:F["noop"],onBack:F["noop"],onSubmit:F["noop"],isSubmitted:false,closeModal:F["noop"],showEdit:false};var Ee=function(e){O()(t,e);function t(){m()(this,t);return b()(this,_()(t).apply(this,arguments))}v()(t,[{key:"render",value:function e(){var t=this;var a=this.props.featureOrgModernSettingPage;if(!a)return null;var r=Oe.t("Custom Terms of Service");var i=this.props,s=i.switchPane,o=i.isSubmitted;var l=Oe.t("Enable");var c=Oe.t("Save");var u=function e(){t.props.onBack(function(){s("input")})};o&&this.props.closeModal();return n.a.createElement(n.a.Fragment,null,n.a.createElement(K["h"],null,n.a.createElement(K["j"],{id:"customTOS__title-bar",title:r,"data-qa":"dialog_header"})),n.a.createElement(K["d"],null,n.a.createElement(K["e"],{"data-qa":"dialog_body"},n.a.createElement(ye,{onMembersShowAllChange:this.props.onMembersShowAllChange,onGuestsShowAllChange:this.props.onGuestsShowAllChange,membersShowAll:this.props.membersShowAll,guestsShowAll:this.props.guestsShowAll}))),n.a.createElement(K["f"],{"data-qa":"dialog_footer"},n.a.createElement("div",{className:"sk_foreground_max"},"Step 2 of 2"),n.a.createElement(K["g"],null,n.a.createElement(z["d"],{type:"outline",onClick:u},"Back"),n.a.createElement(z["d"],{type:"primary","data-qa":"validate_enable_btn",onClick:this.props.onSubmit},this.props.showEdit?l:c))))}}]);return t}(r["PureComponent"]);Ee.displayName="CustomTOSAcceptPane";Ee.defaultProps=ke;var Ce={closeModal:B["closeModal"]};var Se=function e(t){return{featureOrgModernSettingPage:Object(H["isFeatureEnabled"])(t,"feature_org_modern_setting_page")}};var we=Object(o["connect"])(Se,Ce)(Ee);function je(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function Ie(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?je(Object(a),true).forEach(function(t){D()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):je(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Te=new E["b"]("enterprise_settings");var Ae="text";var Ne="url";var Pe=16e3;var Me={switchPane:F["noop"],closeModal:F["noop"],membersContentType:"text",membersText:"",membersUrl:"",showEdit:false};var De=function e(t){if(!Object(W["d"])(t))return Te.t("Please enter Terms of Service for Members.");if(t.length>=Pe)return Te.t("Please enter a shorter Terms of Service (maximum {count, number} characters).",{count:Pe});return""};var xe=function e(t){if(!Object(W["d"])(t))return Te.t("Please enter Terms of Service URL for Members.");if(!Object(W["b"])(t))return Te.rt("Looks like that isn\u2019t a valid URL. If you prefer to enter your custom terms directly, select <strong>Enter text</strong> instead.");return""};var Re=function(e){O()(t,e);function t(e){var a;m()(this,t);a=b()(this,_()(t).call(this,e));a.state={membersTextError:"",guestsChecked:false,membersUrlError:"",isOkayToMoveNext:false,membersShowAll:true,guestsShowAll:true,isSubmitted:false,membersText:a.props.membersText,membersUrl:a.props.membersUrl,membersContentType:a.props.membersContentType};a.onTextChange=a.onTextChange.bind(R()(a));a.onCheckboxChange=a.onCheckboxChange.bind(R()(a));a.onUrlChange=a.onUrlChange.bind(R()(a));a.onMembersURLContentTypeChange=a.onMembersURLContentTypeChange.bind(R()(a));a.onMembersTextContentTypeChange=a.onMembersTextContentTypeChange.bind(R()(a));a.onValidateNext=a.onValidateNext.bind(R()(a));a.onBack=a.onBack.bind(R()(a));a.onMembersShowAllChange=a.onMembersShowAllChange.bind(R()(a));a.onGuestsShowAllChange=a.onGuestsShowAllChange.bind(R()(a));a.onSubmit=a.onSubmit.bind(R()(a));return a}v()(t,[{key:"onBack",value:function e(t){this.setState(function(){return{isOkayToMoveNext:false}},t)}},{key:"onCheckboxChange",value:function e(t,a){this.setState(function(){return{guestsChecked:a}})}},{key:"onGuestsShowAllChange",value:function e(t){this.setState(function(){return{guestsShowAll:t}})}},{key:"onMembersShowAllChange",value:function e(t){this.setState(function(){return{membersShowAll:t}})}},{key:"onMembersTextContentTypeChange",value:function e(){this.setState(function(){return{membersContentType:"text"}})}},{key:"onMembersURLContentTypeChange",value:function e(){this.setState(function(){return{membersContentType:"url"}})}},{key:"onSubmit",value:function e(){var t=this.state.membersText;var a=this.state.guestsChecked;var r=this.state.membersUrl;var n=this.state.membersContentType;var i=this.state.membersShowAll;var s=this.state.guestsShowAll;var o=n===Ae?t:r;var l={membersTos:o,guestsChecked:a,membersContentType:n,membersShowAll:i,guestsShowAll:s};Object(q["b"])(Object(q["a"])().settings.createOrgCustomTOSSettings(l));this.setState(function(){return{isSubmitted:true}})}},{key:"onTextChange",value:function e(t,a){this.setState(function(){return{membersText:a}})}},{key:"onUrlChange",value:function e(t,a){this.setState(function(){return{membersUrl:a}})}},{key:"onValidateNext",value:function e(t){var a=this.getTermOfServiceErrorText();if(a.membersTextError||a.membersUrlError)this.setState(function(){return a});else{var r=Ie({isOkayToMoveNext:t},a);this.setState(function(){return r})}}},{key:"getPanes",value:function e(){var t=this;return{input:{render:function e(a){return n.a.createElement(ve,P()({},a,{onTextChange:t.onTextChange,membersText:t.state.membersText,membersUrl:t.state.membersUrl,membersTextError:t.state.membersTextError,membersUrlError:t.state.membersUrlError,guestsChecked:t.state.guestsChecked,onCheckboxChange:t.onCheckboxChange,onUrlChange:t.onUrlChange,membersContentType:t.props.membersContentType,onMembersURLContentTypeChange:t.onMembersURLContentTypeChange,onMembersTextContentTypeChange:t.onMembersTextContentTypeChange,onValidateNext:t.onValidateNext,isOkayToMoveNext:t.state.isOkayToMoveNext}))}},accept:{render:function e(a){return n.a.createElement(we,P()({},a,{onBack:t.onBack,onMembersShowAllChange:t.onMembersShowAllChange,onGuestsShowAllChange:t.onGuestsShowAllChange,membersShowAll:t.state.membersShowAll,guestsShowAll:t.state.guestsShowAll,onSubmit:t.onSubmit,isSubmitted:t.state.isSubmitted,showEdit:t.props.showEdit}))}}}}},{key:"getTermOfServiceErrorText",value:function e(){var t=this.state,a=t.membersContentType,r=t.membersUrl,n=t.membersText;var i={membersTextError:"",membersUrlError:""};a===Ae?i.membersTextError=De(n):a===Ne&&(i.membersUrlError=xe(r));return i}},{key:"render",value:function e(){var t=this.props.closeModal;return n.a.createElement(V["b"],{closeModal:t,defaultPane:"input",panes:this.getPanes()})}}]);return t}(n.a.PureComponent);Re.displayName="CustomTOSModal";Re.defaultProps=Me;var Fe={closeModal:function e(){return B["closeModal"].apply(void 0,arguments)}};var Le=Object(o["connect"])(null,Fe)(Re);var Ue=Object(G["b"])("Opens the custom-tos modal",function(e,t,a){var r=t();Object(H["isFeatureEnabled"])(r,"feature_org_modern_setting_page")&&e(Object(B["openModal"])({element:n.a.createElement(Le,a)}))});Ue.meta={name:"openCustomTOSModal",key:"actionsOpenCustomTosModalOpenCustomTOSModal",description:"Opens the custom-tos modal"};Ue.propTypes=null;var Be=Ue;var qe=new E["b"]("enterprise_settings");var Ge=function e(t){var a=t.type,r=t.value,i=t.label,s=t.onChange;return n.a.createElement(X["a"],{id:"tos_accept_all_"+a+"_label",htmlFor:"tos_accept_all_"+a+"_checkbox",type:"inline",cursor:"pointer",className:"p-ent_custom_tos_accept_all_form__label",text:i},n.a.createElement($["a"],{id:"tos_accept_all_"+a+"_checkbox",checked:r,onChange:s}))};Ge.displayName="renderCheckbox";var He=function(e){O()(t,e);function t(e){var a;m()(this,t);a=b()(this,_()(t).call(this,e));a.state={membersShowAll:a.props.membersShowAll,guestsShowAll:a.props.guestsShowAll};Object(L["a"])(R()(a),["onMembersShowAllChange","onGuestsShowAllChange"]);return a}v()(t,[{key:"onGuestsShowAllChange",value:function e(t){var a=t.target.checked;this.setState(function(){return{guestsShowAll:a}})}},{key:"onMembersShowAllChange",value:function e(t){var a=t.target.checked;this.setState(function(){return{membersShowAll:a}})}},{key:"submit",value:function e(t){var a=this.state,r=a.membersShowAll,n=a.guestsShowAll;var i={membersShowAll:r,guestsShowAll:n};this.props.onSubmit(i,t)}},{key:"renderGuestsCheckbox",value:function e(){var t={type:"guests",value:this.state.guestsShowAll,label:qe.t("Require existing Guests to accept new terms"),onChange:this.onGuestsShowAllChange};return Ge(t)}},{key:"renderMembersCheckbox",value:function e(){var t={type:"members",value:this.state.membersShowAll,label:qe.t("Require existing Full Members to accept new terms"),onChange:this.onMembersShowAllChange};return Ge(t)}},{key:"render",value:function e(){var t=qe.t("Require existing members to accept the new terms of service?",{fallbackHash:"12f5577fb0c293727cec517ef3fa317bd9931be9"});var a=qe.t("Future members will be required to accept these new terms, but you can also require existing members to accept them the next time they log in to Slack.");return n.a.createElement("div",{className:"c-ent_custom_tos_accept_all_form"},n.a.createElement("h3",{className:"margin_bottom_100"},t),n.a.createElement("p",{className:"margin_bottom_200"},a),this.renderMembersCheckbox(),this.renderGuestsCheckbox())}}]);return t}(r["PureComponent"]);He.displayName="CustomTOSAcceptForm";var We=He;var Ve=a(151);var Ke=a(269);var ze=a(3290);function Qe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function Ye(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Qe(Object(a),true).forEach(function(t){D()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Qe(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Je=new E["b"]("enterprise_settings");var Xe="members";var Ze="guests";var $e="text";var et="url";var tt="all";var at="not_all";var rt="/custom_tos_view";var nt=16e3;var it={membersUrl:"",membersText:"",membersContentType:"text",guestsUrl:"",guestsText:"",guestsContentType:"text"};var st=function e(t){var a=t.error,r=t.url,i=t.type,s=t.onChange;var o=Je.t("https://\u2026");return n.a.createElement(ee["a"],{id:"tos_"+i+"_input",name:"tos_"+i+"_input",value:r,onChange:s,errorText:a,errorLevel:"error",placeholder:o})};st.displayName="renderInput";var ot=function e(t,a){if(!Object(W["d"])(a)){if(t===Xe)return Je.t("Please enter terms of service for Members.",{fallbackHash:"dc74afc478a457d48f965637629bcf312360348e"});if(t===Ze)return Je.rt("Please enter terms of service for Guests, or select <strong>Use the same terms of service as Full Members.</strong>",{fallbackHash:"c5dfd328853d6570e40cd80fb49ecb2c73082b15"})}if(a.length>=nt)return Je.t("Please enter a shorter terms of service (maximum {count, number} characters).",{count:nt,fallbackHash:"4d71fde22fed2021fe81a3a1a35146089e30727c"});return""};var lt=function e(t,a){if(!Object(W["d"])(a)){if(t===Xe)return Je.t("Please enter terms of service URL for Members.",{fallbackHash:"73710d5c9abc3d987472933428da2ba2a24b1018"});if(t===Ze)return Je.rt("Please enter terms of service URL for Guests, or select <strong>Use the same terms of service as Full Members.</strong>",{fallbackHash:"a4c6ad92467276823d26a431f0782637a7f28dba"})}if(!Object(W["b"])(a))return Je.rt("Looks like that isn\u2019t a valid URL. If you prefer to enter your custom terms directly, select <strong>Enter text</strong> instead.");return""};var ct=function(e){O()(t,e);function t(e){var a;m()(this,t);a=b()(this,_()(t).call(this,e));a.state={all:a.props.guestsText||a.props.guestsUrl?at:tt,membersUrl:a.props.membersUrl,membersText:a.props.membersText,membersContentType:a.props.membersContentType,membersUrlError:"",membersTextError:"",guestsUrl:a.props.guestsUrl,guestsText:a.props.guestsText,guestsContentType:a.props.guestsContentType,guestsUrlError:"",guestsTextError:""};a.onAllChange=a.onAllChange.bind(R()(a));a.onMembersTextChange=a.onTextChange.bind(R()(a),Xe);a.onGuestsTextChange=a.onTextChange.bind(R()(a),Ze);a.onMembersUrlChange=a.onUrlChange.bind(R()(a),Xe);a.onGuestsUrlChange=a.onUrlChange.bind(R()(a),Ze);a.onMembersToggle=a.onToggle.bind(R()(a),Xe);a.onGuestsToggle=a.onToggle.bind(R()(a),Ze);return a}v()(t,[{key:"onAllChange",value:function e(t){var a=t.target.value;this.setState(function(){return{all:a}})}},{key:"onTextChange",value:function e(t,a){this.setState(function(){var e;return e={},D()(e,t+"Text",a),D()(e,t+"TextError",""),e})}},{key:"onToggle",value:function e(t){var a=t+"ContentType";this.setState(function(e){return D()({},a,e[a]===$e?et:$e)})}},{key:"onUrlChange",value:function e(t,a){this.setState(function(){var e;return e={},D()(e,t+"Url",a),D()(e,t+"UrlError",""),e})}},{key:"isValid",value:function e(){var t=this.state,a=t.all,r=t.membersUrl,n=t.membersText,i=t.membersContentType,s=t.membersUrlError,o=t.membersTextError,l=t.guestsUrl,c=t.guestsText,u=t.guestsContentType,d=t.guestsUrlError,p=t.guestsTextError;var m=i===$e&&n&&!o||i===et&&r&&!s;if(a===tt||!m)return m;var h=u===$e&&c&&!p||u===et&&l&&!d;return h}},{key:"maybeRenderGuestsInput",value:function e(){if(this.state.all===tt)return null;if(this.state.guestsContentType!==et)return null;var t=this.state,a=t.guestsUrl,r=t.guestsUrlError;var n={error:r,url:a,type:Ze,onChange:this.onGuestsUrlChange};return st(n)}},{key:"maybeRenderGuestsInputBar",value:function e(){var t=this.state,a=t.all,r=t.guestsUrl,n=t.guestsText,i=t.guestsContentType;if(a===tt)return null;var s=!n&&i===$e||!r&&i===et;var o={previewIsDisabled:s,contentType:i,content:i===$e?n:r,type:Ze,onToggle:this.onGuestsToggle};return this.renderInputBar(o)}},{key:"maybeRenderGuestsTextarea",value:function e(){if(this.state.all===tt)return null;if(this.state.guestsContentType!==$e)return null;var t=this.state,a=t.guestsText,r=t.guestsTextError;var n={error:r,text:a,type:Ze,onChange:this.onGuestsTextChange};return this.renderTextarea(n)}},{key:"maybeRenderMembersInput",value:function e(){if(this.state.membersContentType!==et)return null;var t=this.state,a=t.membersUrl,r=t.membersUrlError;var n={error:r,url:a,type:Xe,onChange:this.onMembersUrlChange};return st(n)}},{key:"maybeRenderMembersTextarea",value:function e(){if(this.state.membersContentType!==$e)return null;var t=this.state,a=t.membersText,r=t.membersTextError;var n={error:r,text:a,type:Xe,onChange:this.onMembersTextChange};return this.renderTextarea(n)}},{key:"submit",value:function e(t){var a=this.state,r=a.all,n=A()(a,["all"]);var i=Ye({all:r===tt},n);this.props.onSubmit(i,t)}},{key:"validate",value:function e(t){var a=this.state,r=a.all,n=a.membersUrl,i=a.membersText,s=a.membersContentType,o=a.guestsUrl,l=a.guestsText,c=a.guestsContentType;var u={};s===$e&&(u.membersTextError=ot(Xe,i));s===et&&(u.membersUrlError=lt(Xe,n));if(r!==tt){c===$e&&(u.guestsTextError=ot(Ze,l));c===et&&(u.guestsUrlError=lt(Ze,o))}this.setState(function(){return u},t)}},{key:"renderInputBar",value:function e(t){var a=t.contentType,r=t.onToggle;var i=Je.t("Terms of service",{fallbackHash:"0c8a9a95e21aeb403402ed64338810d787cc5f91"});var s=a===$e?Je.t("Enter URL"):Je.t("Enter text");var o=Y()("p-ent_custom_tos_input_form__small_text","padding_left_50");return n.a.createElement("div",{className:"p-ent_custom_tos_input_form__toggle_bar"},n.a.createElement("span",{className:"p-ent_custom_tos_input_form__label c-label__text bold"},i),this.renderPreviewButton(t),n.a.createElement(Z["a"],{onClick:r},n.a.createElement("span",{className:o},s)))}},{key:"renderMembersInputBar",value:function e(){var t=this.state,a=t.membersUrl,r=t.membersText,n=t.membersContentType;var i=!r&&n===$e||!a&&n===et;var s={previewIsDisabled:i,contentType:n,content:n===$e?r:a,type:Xe,onToggle:this.onMembersToggle};return this.renderInputBar(s)}},{key:"renderPreviewButton",value:function e(t){var a=this;var r=t.previewIsDisabled,i=t.contentType,s=t.content,o=t.type;var l=Je.t("Preview");var c=i===et;var u=c?function(){var e=window.open((Object(F["startsWith"])(s.toLowerCase(),"http")?"":"http://")+s,"_blank");e.opener=null}:function(){return a["tos_preview_"+o].submit()};var d=Y()("p-ent_custom_tos_input_form__small_text","p-ent_custom_tos_input_form__small_text--right-divider","padding_right_50",{sk_foreground_max:r});var p=n.a.createElement(Z["a"],{disabled:r,onClick:u},n.a.createElement("span",{className:d},l," ",n.a.createElement(J["a"],{type:"external-link",className:"p-ent_custom_tos_input_form__icon"})));if(c)return p;return n.a.createElement("form",{action:rt,method:"POST",ref:function e(t){a["tos_preview_"+o]=t},target:"_blank"},n.a.createElement("input",{type:"hidden",name:"custom_tos_preview",value:s}),p)}},{key:"renderRadio",value:function e(t){var a=this.state.all;var r=t.value,i=t.label;return n.a.createElement("div",{key:"tos_type_"+r},n.a.createElement(X["a"],{id:"tos_type_"+r+"_label",htmlFor:"tos_type_"+r+"_radio",type:"inline",cursor:"pointer",className:"p-ent_custom_tos_input_form__label",text:i},n.a.createElement(Ve["a"],{id:"tos_type_"+r+"_radio",value:r,onChange:this.onAllChange,checked:r===a})))}},{key:"renderRadiogroup",value:function e(){var t=[{value:tt,label:Je.t("Use the same terms of service as Full Members",{fallbackHash:"1c2f55896bf06d5af31bb8e5db1f602fdd12776c"})},{value:at,label:Je.t("Use a different terms of service",{fallbackHash:"8cf226c403483e3c32a03b26b6a8133d887fc63c"})}];return n.a.createElement(Ke["a"],{field:"tos_type"},t.map(this.renderRadio,this))}},{key:"renderTextarea",value:function e(t){var a=t.error,r=t.text,i=t.type,s=t.onChange;var o=Je.rt('<b>*bold*</b> <i>_italics_</i> ~strike~ <span className="quote">>quote</span> and links are allowed. <a className="underline sk_foreground_max cursor_pointer">Learn more</a>',null,function(e){var t=e.tag,a=e.key,r=e.text;return"a"===t?n.a.createElement(Z["a"],{key:a,href:"https://get.slack.help/hc/articles/202288908-Format-your-messages",target:"_blank",rel:"noopener noreferrer"},r):null});return n.a.createElement(te["a"],{resize:"none",id:"tos_"+i+"_textarea",name:"tos_"+i+"_textarea",value:r,hintText:o,onChange:s,errorText:a,errorLevel:"error"})}},{key:"render",value:function e(){var t=Je.t("Set custom terms of service that members and guests will have to accept before using Slack. If you already have a URL for your custom terms of service, you can enter that instead.",{fallbackHash:"0ea845c8382e8e5a89bcff4897298d9dbbe5b8a2"});var a=Je.t("Full Members");var r=Je.t("Guests");return n.a.createElement("div",null,n.a.createElement("p",null,t),n.a.createElement("h3",{className:"margin_top_200 margin_bottom_100"},a),this.renderMembersInputBar(),this.maybeRenderMembersTextarea(),this.maybeRenderMembersInput(),n.a.createElement("h3",{className:"margin_top_200 margin_bottom_100"},r),this.renderRadiogroup(),this.maybeRenderGuestsInputBar(),this.maybeRenderGuestsTextarea(),this.maybeRenderGuestsInput())}}]);return t}(r["PureComponent"]);ct.displayName="CustomTOSInputForm";ct.defaultProps=it;var ut=ct;var dt=a(913);var pt=new E["b"]("enterprise_settings");var mt={closeModal:F["noop"]};var ht=function(e){O()(t,e);function t(e){var a;m()(this,t);a=b()(this,_()(t).call(this,e));a.onConfirmDisable=a.onConfirmDisable.bind(R()(a));return a}v()(t,[{key:"onConfirmDisable",value:function e(){Object(q["b"])(Object(q["a"])().settings.deactivateOrgCustomTOSSettings());this.props.closeModal()}},{key:"render",value:function e(){var t=pt.t("Disable");var a=pt.t("When Custom Terms of Service are disabled, all members and guests will only be required to accept Slack\u2019s Terms of Service");var r=pt.t("Disable Custom Terms of Service");var i=this.props.closeModal;return n.a.createElement(K["a"],{closeModal:i,centered:true},n.a.createElement(K["h"],null,n.a.createElement(K["j"],{title:r})),n.a.createElement(K["d"],null,n.a.createElement(K["e"],null,a)),n.a.createElement(K["f"],null,n.a.createElement(K["g"],null,n.a.createElement(K["c"],{type:"outline"},"Cancel"),n.a.createElement(z["d"],{type:"danger",onClick:this.onConfirmDisable},t))))}}]);return t}(r["PureComponent"]);ht.displayName="CustomTOSDisableModal";ht.defaultProps=mt;var vt={closeModal:B["closeModal"]};var ft=Object(o["connect"])(null,vt)(ht);function bt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function gt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?bt(Object(a),true).forEach(function(t){D()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):bt(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var _t=new E["b"]("enterprise_settings");var yt="text";var Ot="url";var kt={saving:false,customTos:false,membersTos:"",membersContentType:"text",guestsTos:"",guestsContentType:"text",openModal:F["noop"],openCustomTOSModal:F["noop"]};var Et=function e(t){var a=t.customTos,r=t.membersTos,n=t.membersContentType,i=t.guestsTos,s=t.guestsContentType;return{all:!i,membersUrl:n===Ot?r:"",membersText:n===yt?r:"",membersShowAll:!a,membersContentType:n,guestsUrl:s===Ot?i:"",guestsText:s===yt?i:"",guestsShowAll:!a,guestsContentType:s}};var Ct=function(e){O()(t,e);function t(e){var a;m()(this,t);a=b()(this,_()(t).call(this,e));a.state=gt({},Et(a.props),{showEnable:false,showEdit:false,isPending:false,isValid:true});Object(L["a"])(R()(a),["onClick","onEnable","onDisable","onEdit","onEnd","onCancelEnable","setFormSettings","onInputFormSubmit","onAcceptFormSubmit"]);return a}v()(t,[{key:"componentDidUpdate",value:function e(t,a){!this.props.saving&&this.state.isPending&&this.onEnd();this.dialog&&a.isPending!==this.state.isPending&&this.dialog.render({goButtonIsPending:this.state.isPending})}},{key:"onAcceptFormSubmit",value:function e(){this.acceptForm.submit(this.onConfirmEnable)}},{key:"onCancelEnable",value:function e(){this.setState(function(){return{showEnable:false,showEdit:false}},this.onEnd)}},{key:"onClick",value:function e(){var t=this.props.customTos;this.setState(function(){return t?{showEdit:true}:{showEnable:true}});var a=this.props.featureOrgModernSettingPage;a&&this.maybeRenderEnable()}},{key:"onConfirmEnable",value:function e(){this.setIsPending(true);var t=this.state,a=t.all,r=t.membersUrl,n=t.membersText,i=t.membersShowAll,s=t.membersContentType,o=t.guestsUrl,l=t.guestsText,c=t.guestsShowAll,u=t.guestsContentType;var d=s===yt?n:r;var p=this.props.customTos;var m={customTos:p,membersTos:d,membersShowAll:i,membersContentType:s,guestsShowAll:c};if(!a){var h=u===yt?l:o;m.guestsTos=h;m.guestsContentType=u}Object(q["b"])(Object(q["a"])().settings.createOrgCustomTOSSettings(m))}},{key:"onDisable",value:function e(){this.dialog=this.props.openModal({element:this.renderDisable()})}},{key:"onEdit",value:function e(){this.setState(function(){return{showEdit:true}});this.maybeRenderEnable()}},{key:"onEnable",value:function e(){this.setState(function(){return{showEnable:true}});this.maybeRenderEnable()}},{key:"onEnd",value:function e(){var t=this;this.reset(function(){t.settingsModalRef.setIndex(0);t.dialog&&t.dialog.close()})}},{key:"onInputFormSubmit",value:function e(){var t=this;this.inputForm.validate(function(){var e=t.inputForm.isValid();t.setIsValid(e);e&&t.inputForm.submit(t.settingsModalRef.goToNextStep.bind(t.settingsModalRef))})}},{key:"setFormSettings",value:function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:F["noop"];this.setState(function(){return t},a)}},{key:"setIsPending",value:function e(t){this.setState(function(){return{isPending:t}})}},{key:"setIsValid",value:function e(t){this.setState(function(){return{isValid:t}})}},{key:"buildEnableSteps",value:function e(){var t=this;var a=this.renderInputForm();var r=this.renderAcceptForm();var n=function e(){return t.props.customTos?_t.t("Edit Custom Terms of Service"):_t.t("Enable Custom Terms of Service")};var i=function e(){return t.props.customTos?_t.t("Update Custom Terms of Service"):_t.t("Enable Custom Terms of Service")};var s=_t.t("Next");var o=_t.t("Cancel");var l=this.state.isPending;return[{children:a,goButtonText:s,cancelText:o,title:n(),withHeader:true,showBackButton:false,showCancelButton:true,buttonAlignment:"right",onGo:this.onInputFormSubmit,onCancel:this.onCancelEnable},{children:r,goButtonText:i(),goButtonIsPending:l,cancelText:o,title:n(),withHeader:true,showBackButton:true,showCancelButton:true,buttonAlignment:"right",onGo:this.onAcceptFormSubmit,onCancel:this.onCancelEnable}]}},{key:"maybeRenderEnable",value:function e(){var t=this;var a=this.props.featureOrgModernSettingPage;a&&this.props.openCustomTOSModal(Et(this.props));return n.a.createElement(U["a"],{isOpen:this.state.showEnable||this.state.showEdit,onCancel:this.onCancelEnable,showCloseTransition:true,showOpenTransition:true,position:"fixed",steps:this.buildEnableSteps(),ref:function e(a){t.settingsModalRef=a},onSubmit:F["noop"]})}},{key:"reset",value:function e(t){var a=this;this.setState(function(){return gt({},Et(a.props),{showEnable:false,showEdit:false,isPending:false,isValid:true})},t)}},{key:"renderAcceptForm",value:function e(){var t=this;var a=!this.props.customTos;var r={membersShowAll:a,guestsShowAll:a,onSubmit:this.setFormSettings};return n.a.createElement(We,P()({},r,{ref:function e(a){t.acceptForm=a}}))}},{key:"renderDisable",value:function e(){return n.a.createElement(ft,null)}},{key:"renderInputForm",value:function e(){var t=this;var a=this.state,r=a.all,i=a.isValid,s=a.isPending,o=a.showEnable,l=a.showEdit,c=A()(a,["all","isValid","isPending","showEnable","showEdit"]);var u=gt({},c,{onSubmit:this.setFormSettings});return n.a.createElement(ut,P()({},u,{ref:function e(a){t.inputForm=a}}))}},{key:"renderSetting",value:function e(){var t=this.props.customTos;var a={type:"button",enabled:t,onEnable:this.onEnable,onDisable:this.onDisable,onEdit:this.onEdit};var r=_t.t("Custom terms of service",{fallbackHash:"0b7e475daca94c413bead0e900b3dc87b2deb510"});var i=t?_t.t("Enabled"):_t.t("Disabled");var s=_t.t("You can require members of your organization to accept custom terms of service before they can use Slack.",{fallbackHash:"5e53a609a877c8a4f339da9f2a119f3c88912bbc"});return n.a.createElement(dt["a"],{label:r,state:i,description:s,onClick:this.onClick,control:a,type:""})}},{key:"render",value:function e(){var t=this.props.featureOrgModernSettingPage;if(t)return n.a.createElement("div",{className:"p-ent_custom_tos_setting"},this.renderSetting());return n.a.createElement("div",{className:"p-ent_custom_tos_setting"},this.renderSetting()," ",this.maybeRenderEnable())}}]);return t}(r["PureComponent"]);Ct.displayName="CustomTOSSetting";Ct.defaultProps=kt;var St=function e(t){return{featureOrgModernSettingPage:Object(H["isFeatureEnabled"])(t,"feature_org_modern_setting_page")}};var wt={openCustomTOSModal:function e(){return Be.apply(void 0,arguments)},openModal:B["openModal"]};var jt=Object(o["connect"])(St,wt)(Ct);var It=jt;var Tt=a(106);var At=a(25);var Nt=a(352);var Pt=a(759);var Mt=a(117);var Dt=a(1467);var xt=new E["b"]("enterprise_settings");var Rt={emailIsValid:true};function Ft(e,t){if(!e&&t.length>0)return xt.t("This doesn\u2019t seem like an email address. Sorry!");return""}function Lt(e){var t=e.orgContactEmail,a=e.onSelect,r=e.onEmailChange,i=e.selected,s=e.emailIsValid;return n.a.createElement("div",null,n.a.createElement(X["a"],{htmlFor:"org_email",text:xt.t("Send to a different email address:"),cursor:"pointer",type:"inline"},n.a.createElement(Ve["a"],{id:"org_email",onChange:a,checked:i})),n.a.createElement("div",{className:"p-org_help_email__input"},n.a.createElement(ee["a"],{id:"org_email_text",ariaDescribedby:xt.t("Organization contact email"),name:"org_help_email",onChange:r,size:"medium",isDisabled:!i,value:i?t:"",placeholder:xt.t("name@example.com"),errorText:Ft(s,t)})))}Lt.displayName="CustomEmailRadio";Lt.defaultProps=Rt;var Ut=Lt;var Bt=a(518);var qt=new E["b"]("enterprise_settings");var Gt={primaryOwner:{}};function Ht(e){var t=e.onSelect,a=e.selected,r=e.primaryOwner;if(!r.profile)return null;return n.a.createElement("div",null,n.a.createElement(X["a"],{htmlFor:"org_primary_owner",text:qt.t("Send to the Org Primary Owner"),type:"inline",cursor:"pointer"},n.a.createElement(Ve["a"],{id:"org_primary_owner",onChange:t,checked:a})),n.a.createElement("div",{className:"p-org_help_email__primary_owner_info"},n.a.createElement(Bt["a"],{entityType:"member",dimension:32,entityData:r,customClasses:"p-org_help_email__primary_owner__icon"}),n.a.createElement("div",{className:"p-org_help_email__primary_owner__text"},n.a.createElement("div",{className:"p-org_help_email__primary_owner__name"},r.name),n.a.createElement("div",{className:"p-org_help_email__primary_owner__domain"},r.profile.email))))}Ht.displayName="PrimaryOwnerRadio";Ht.defaultProps=Gt;var Wt=Ht;var Vt=new E["b"]("enterprise_settings");var Kt={primaryOwner:{}};var zt="";var Qt=function(e){O()(t,e);function t(e){var a;m()(this,t);a=b()(this,_()(t).call(this,e));var r=e.orgContactEmail;a.state={radioSelection:r===zt?"primaryOwner":"custom",contactEmail:r,emailIsValid:true};a.onSave=a.onSave.bind(R()(a));a.onSelectionChange=a.onSelectionChange.bind(R()(a));a.onEmailChange=a.onEmailChange.bind(R()(a));a.validateEmailOnChange=Object(F["debounce"])(a.validateEmailOnChange,500);return a}v()(t,[{key:"onEmailChange",value:function e(t){this.setState(function(){return{contactEmail:t}});this.validateEmailOnChange(t)}},{key:"onSave",value:function e(){if(!this.state.emailIsValid)return;"primaryOwner"===this.state.radioSelection?this.props.onSave(zt):this.props.onSave(this.state.contactEmail)}},{key:"onSelectionChange",value:function e(t){"primaryOwner"===t?this.setState(function(){return{radioSelection:t,emailIsValid:true}}):this.setState(function(e){var a=e.contactEmail;return{radioSelection:t,emailIsValid:Object(Dt["a"])(a)}})}},{key:"disableOnSave",value:function e(){var t=this.props.orgContactEmail===this.state.contactEmail;var a="custom"===this.state.radioSelection;if(!a&&this.props.orgContactEmail===zt)return true;return a&&(t||!this.state.emailIsValid)}},{key:"isCustomEmailValid",value:function e(){var t="custom"===this.state.radioSelection;return!t||this.state.emailIsValid}},{key:"validateEmailOnChange",value:function e(t){this.setState(function(){return{emailIsValid:Object(Dt["a"])(t)}})}},{key:"render",value:function e(){var t=this;var a=this.props.primaryOwner;var r=this.state,i=r.radioSelection,s=r.contactEmail;return n.a.createElement(Mt["a"],{cancelText:"Cancel",goButtonText:"Save",onGo:this.onSave,title:Vt.t("Organization Contact Email"),titleAria:Vt.t("Organization Contact Email"),useSlackScrollbar:false,goButtonIsDisabled:this.disableOnSave()},n.a.createElement("div",{className:"p-org_help_email_dialog__description"},Vt.t("Choose where support requests that require contacting your organization get sent to.")),n.a.createElement(Wt,{selected:"primaryOwner"===i,onSelect:function e(){return t.onSelectionChange("primaryOwner")},primaryOwner:a}),n.a.createElement(Ut,{selected:"custom"===i,orgContactEmail:s,onSelect:function e(){return t.onSelectionChange("custom")},onEmailChange:this.onEmailChange,emailIsValid:this.isCustomEmailValid()}))}}]);return t}(n.a.Component);Qt.displayName="OrgHelpEmailDialog";Qt.defaultProps=Kt;var Yt=Qt;var Jt=a(131);var Xt=new E["b"]("enterprise_settings");var Zt=function e(t){var a=t.emailStatus;var r="check-circle-o";var i="sk_lilypad_green";var s=Xt.t("Organization contact email updated");if("error"===a){r="warning";i="sk_raspberry_red";s=Xt.t("Something\u2019s gone wrong. Mind trying again in a moment?")}return n.a.createElement(Jt["b"],{position:"bottom-right",icon:r,iconClassName:i,shouldAutoFade:true},s)};Zt.displayName="OrgHelpEmailToast";var $t=Zt;var ea=a(3292);var ta=new E["b"]("enterprise_settings");var aa={primaryOwner:{}};var ra="";function na(e){if(e===ra)return ta.t("Send to the Org Primary Owner");return ta.t("Send to {email}",{email:e})}function ia(e,t){if(e===ra)return ta.t("Email inquiries and support requests for your org will be sent to {name} ({email})",{name:t.name,email:t.profile&&t.profile.email});return ta.t("Email inquiries and support requests for your org will be sent to this address.")}var sa=function e(t){return{element:n.a.createElement($t,{emailStatus:t})}};function oa(e){var t=e.primaryOwner,a=e.orgContactEmail;var r=function t(a){e.setCustomEmailPref({email:a===ra?null:a}).then(function(){e.enqueueToast(sa("success"))}).catch(function(){e.enqueueToast(sa("error"))})};var i=function t(){e.openModal({element:n.a.createElement(Yt,{orgContactEmail:a,onSave:r,primaryOwner:e.primaryOwner})})};var s={type:"button",enabled:true,onEdit:i,editOnly:true};return n.a.createElement(dt["a"],{label:ta.t("Organization contact email"),state:na(a),description:ia(a,t),onClick:i,control:s})}oa.displayName="OrgHelpEmailPane";oa.defaultProps=aa;var la=function e(t,a){var r=a.primaryOwnerId;var n=r?Object(At["e"])(t,r):{};var i=Object(Nt["g"])(t,"custom_contact_email")||ra;return{primaryOwner:n,orgContactEmail:i}};var ca={openModal:B["openModal"],enqueueToast:Tt["enqueueToast"],setCustomEmailPref:Pt["i"]};var ua=Object(o["connect"])(la,ca)(oa);var da=a(246);var pa=a.n(da);var ma=a(288);var ha=a(348);var va=a(93);var fa=new E["b"]("enterprise_dashboard");var ba=function e(t){var a=t.title,r=t.children,i=t.confirmButton,s=t.onClose;return n.a.createElement(K["a"],{closeModal:s,isOpen:true,centered:true},n.a.createElement(K["h"],null,n.a.createElement(K["j"],{title:a})),n.a.createElement(K["d"],null,n.a.createElement(K["e"],null,r)),n.a.createElement(K["f"],null,n.a.createElement(K["g"],null,n.a.createElement(K["c"],{type:"outline"},fa.t("Cancel")),i)))};ba.displayName="WorkflowBuilderConfirmationModal";var ga=ba;var _a=a(3735);var ya=new E["b"]("enterprise_dashboard");var Oa=function e(t){var a=t.defaultWorkflowBuilderEnabled,i=t.toggleWorkflowBuilderEnabled;var s=Object(ha["a"])(),o=s.featureBuilderCanAccess;var l=Object(r["useState"])(a),c=pa()(l,2),u=c[0],d=c[1];var p=Object(r["useState"])(false),m=pa()(p,2),h=m[0],v=m[1];var f=Object(r["useState"])(false),b=pa()(f,2),g=b[0],_=b[1];var y=Object(r["useState"])(false),O=pa()(y,2),k=O[0],E=O[1];var C=Object(r["useCallback"])(function(){v(true);var e=!u;i({enabled:e}).then(function(){d(e);v(false);E(false);_(false)})},[u,i]);var S=Object(r["useCallback"])(function(e){e.stopPropagation();e.preventDefault();Object(q["b"])(Object(q["a"])().router.navigateTo("/settings/org-policies"))},[]);var w=Object(r["useCallback"])(function(){return _(false)},[]);var j=Object(r["useCallback"])(function(){return E(false)},[]);if(!o)return null;return n.a.createElement("div",null,n.a.createElement(dt["a"],{label:ya.t("Workflow Builder"),state:u?ya.t("Enabled"):ya.t("Disabled"),description:u?ya.rt("Members can create workflows with Workflow Builder. Data collected by workflows isn't encrypted through Slack Enterprise Key Management (EKM) yet. You can also <a>add a policy</a> to choose who can create workflows.",{fallbackHash:"41b4617925e29b3d9c156fc681b1f5da47ba3e55"},function(e){var t=e.key,a=e.text;return n.a.createElement("a",{key:t,href:"/manage/settings/org-policies",onClick:S},a)}):ya.rt("Members cannot create workflows with Workflow Builder. Data collected by workflows isn't encrypted through Slack Enterprise Key Management (EKM) yet. You can also <a>add a policy</a> to choose who can create workflows.",{fallbackHash:"b2a88043eb8b7da402470fd883bef05ffd6d845b"},function(e){var t=e.key,a=e.text;return n.a.createElement("a",{key:t,href:"/manage/settings/org-policies",onClick:S},a)}),onClick:u?function(){return E(true)}:function(){return _(true)},type:"button",control:{enabled:u,type:"button",toggleOnly:true,onEdit:F["noop"],onEnable:function e(){return _(true)},onDisable:function e(){return E(true)}}}),g&&n.a.createElement(ga,{title:ya.t("Enable Workflow Builder?"),confirmButton:n.a.createElement(ma["a"],{type:"primary",onClick:C,loading:h},ya.t("Enable")),onClose:w},n.a.createElement(va["a"],{level:"warning",icon:"warning",className:"p-workflow_builder_setting__enable_alert"},ya.rt("Data collected by workflows isn't encrypted through Slack Enterprise Key Management (EKM) yet. <a>Learn more</a>",null,function(e){var t=e.key,a=e.text;return n.a.createElement("a",{key:t,target:"_blank",rel:"noopener noreferrer",href:"https://get.slack.help/hc/en-us/articles/360019110974-Slack-Enterprise-Key-Management"},a)})),n.a.createElement("p",null,ya.t("Members will be able to create workflows with Workflow Builder. You can also add a policy to choose who can create workflows.",{fallbackHash:"027fe784ed9b841be26a52d594a9c8fb7a20ca2f"}))),k&&n.a.createElement(ga,{title:ya.t("Disable Workflow Builder?"),confirmButton:n.a.createElement(ma["a"],{type:"danger",onClick:C,loading:h},ya.t("Disable")),onClose:j},n.a.createElement("p",null,ya.t("When you disable Workflow Builder, members can't create new workflows. Workflows that are currently running will still be available for members to use and for creators to update.",{fallbackHash:"183bc1ed9fb596c3c91996c1ec5d8b870c805e60"}))))};Oa.displayName="WorkflowBuilderSetting";Oa.defaultProps={defaultWorkflowBuilderEnabled:false};var ka=function e(t){return{toggleWorkflowBuilderEnabled:function e(){return t(Pt["m"].apply(void 0,arguments))}}};var Ea=Object(o["connect"])(null,ka)(Oa);var Ca=Ea;var Sa=new E["b"]("enterprise_dashboard");var wa=function e(){var t=Object(ha["a"])(),a=t.featureInsightsMessageActivityAdmin;if(!a)return null;return n.a.createElement(dt["a"],{label:Sa.t("Message Activity"),state:Sa.t("All Admins and Owners can view"),description:Sa.rt("These users can view engagement statistics on any message in a public channel."),onClick:F["noop"],type:"button",control:{type:"button",editOnly:true,onEdit:F["noop"]}})};wa.displayName="MessageActivitySetting";var ja=wa;var Ia=ja;var Ta=new E["b"]("enterprise_dashboard");var Aa=function e(t){var a=t.title,r=t.children,i=t.confirmButton,s=t.onClose;return n.a.createElement(K["a"],{closeModal:s,isOpen:true,centered:true},n.a.createElement(K["h"],null,n.a.createElement(K["j"],{title:a})),n.a.createElement(K["d"],null,n.a.createElement(K["e"],null,r)),n.a.createElement(K["f"],null,n.a.createElement(K["g"],null,n.a.createElement(K["c"],{type:"outline"},Ta.t("Cancel")),i)))};Aa.displayName="ChannelEmailAddressesConfirmationModal";var Na=Aa;var Pa=new E["b"]("enterprise_dashboard");var Ma=function e(t){var a=t.defaultChannelEmailAddressesEnabled,i=t.toggleChannelEmailAddressesEnabled;var s=Object(ha["a"])(),o=s.featureChannelEmailAddresses;var l=Object(r["useState"])(a),c=pa()(l,2),u=c[0],d=c[1];var p=Object(r["useState"])(false),m=pa()(p,2),h=m[0],v=m[1];var f=Object(r["useState"])(false),b=pa()(f,2),g=b[0],_=b[1];var y=Object(r["useState"])(false),O=pa()(y,2),k=O[0],E=O[1];var C=Object(r["useCallback"])(function(){v(true);var e=!u;i({enabled:e}).then(function(){d(e);v(false);E(false);_(false)})},[u,i]);var S=Object(r["useCallback"])(function(e){e.stopPropagation();e.preventDefault();Object(q["b"])(Object(q["a"])().router.navigateTo("/settings/org-policies/team_permissions"))},[]);var w=Object(r["useCallback"])(function(){return _(false)},[]);var j=Object(r["useCallback"])(function(){return E(false)},[]);if(!o)return null;var I=o?Pa.rt("Members can create channel email addresses. You can also <a>add a policy</a> to choose who can create channel email addresses.",{},function(e){var t=e.key,a=e.text;return n.a.createElement("a",{key:t,href:"/manage/settings/org-policies/team_permissions",onClick:S},a)}):null;var T=o?Pa.rt("Members cannot create channel email addresses. You can also <a>add a policy</a> to choose who can create channel email addresses.",{},function(e){var t=e.key,a=e.text;return n.a.createElement("a",{key:t,href:"/manage/settings/org-policies/team_permissions",onClick:S},a)}):null;return n.a.createElement("div",null,n.a.createElement(dt["a"],{label:o?Pa.t("Channel email addresses"):null,state:u?Pa.t("Enabled"):Pa.t("Disabled"),description:u?I:T,onClick:u?function(){return E(true)}:function(){return _(true)},type:"button",control:{enabled:u,type:"button",toggleOnly:true,onEdit:F["noop"],onEnable:function e(){return _(true)},onDisable:function e(){return E(true)}}}),g&&n.a.createElement(Na,{title:o?Pa.t("Enable channel email addresses?"):null,confirmButton:n.a.createElement(ma["a"],{type:"primary",onClick:C,loading:h},Pa.t("Enable")),onClose:w},n.a.createElement("p",null,o?Pa.t("Members will be able to create channel email addresses. You can also add a policy to choose who can create channel email addresses."):null)),k&&n.a.createElement(Na,{title:o?Pa.t("Disable channel email addresses?"):null,confirmButton:n.a.createElement(ma["a"],{type:"danger",onClick:C,loading:h},Pa.t("Disable")),onClose:j},n.a.createElement("p",null,o?Pa.t("When you disable channel email addresses, members can\u2019t create new channel email addresses. Those that are already created will still be available for members to use."):null)))};Ma.displayName="ChannelEmailAddressesSetting";Ma.defaultProps={defaultChannelEmailAddressesEnabled:false};var Da=function e(t){return{toggleChannelEmailAddressesEnabled:function e(){return t(Pt["l"].apply(void 0,arguments))}}};var xa=Object(o["connect"])(null,Da)(Ma);var Ra=xa;var Fa=a(3294);var La=new E["b"]("enterprise_settings");var Ua={loading:true,saving:false,customTos:false,membersTos:"",guestsTos:"",membersContentType:"text",guestsContentType:"text",primaryOwnerId:"",workflowBuilderEnabled:false,featureInsightsMessageActivityAdmin:true,channelEmailAddressesEnabled:false};var Ba=function e(){return n.a.createElement("div",{className:"p-org_wide_settings_pane__loading","data-org-wide-settings-pane-loading":true})};Ba.displayName="renderLoadingContainer";var qa=function(e){O()(t,e);function t(){m()(this,t);return b()(this,_()(t).apply(this,arguments))}v()(t,[{key:"maybeRenderCustomTOS",value:function e(){if(this.props.loading)return null;var t=this.props,a=t.saving,r=t.customTos,i=t.membersTos,s=t.guestsTos,o=t.membersContentType,l=t.guestsContentType;var c={saving:a,customTos:r,membersTos:i,guestsTos:s,membersContentType:o,guestsContentType:l};return n.a.createElement(It,c)}},{key:"maybeRenderWorkflowBuilder",value:function e(){var t=this.props,a=t.loading,r=t.workflowBuilderEnabled;if(a||null===r)return null;return n.a.createElement(Ca,{defaultWorkflowBuilderEnabled:this.props.workflowBuilderEnabled})}},{key:"maybeRenderMessageActivity",value:function e(){var t=this.props,a=t.loading,r=t.featureInsightsMessageActivityAdmin;if(a||!r)return null;return n.a.createElement(Ia,null)}},{key:"maybeRenderChannelEmailAddresses",value:function e(){var t=this.props,a=t.loading,r=t.channelEmailAddressesEnabled;if(a||null===r)return null;return n.a.createElement(Ra,{defaultChannelEmailAddressesEnabled:this.props.channelEmailAddressesEnabled})}},{key:"render",value:function e(){var t=this.props.primaryOwnerId;return n.a.createElement("div",{className:"p-org_wide_settings_pane"},n.a.createElement(I,{title:La.t("Organization Settings")}),Ba(),this.maybeRenderCustomTOS(),n.a.createElement(ua,{primaryOwnerId:t}),this.maybeRenderWorkflowBuilder(),this.maybeRenderMessageActivity(),this.maybeRenderChannelEmailAddresses(),n.a.createElement(C["a"],null))}}]);return t}(r["PureComponent"]);qa.displayName="OrgWideSettingsPane";qa.defaultProps=Ua;var Ga=qa;var Ha=qa;var Wa=Ha;Object(c["a"])("interop.orgWideSettingsPane",{render:function e(t,a,r){if(!t)throw new Error("orgWideSettingsPane render must be called with a teamId parameter");var i=Object(l["f"])(t);s.a.render(n.a.createElement(o["Provider"],{store:i},n.a.createElement(u["a"],null,n.a.createElement(d["a"],null,n.a.createElement(Wa,r)))),a)},stop:function e(t){s.a.unmountComponentAtNode(t)}})},,,,function(e,t,a){"use strict";var r=a(110);var n=a.n(r);var i=a(135);var s=a.n(i);var o=a(169);var l=a.n(o);var c=a(138);var u=a.n(c);var d=a(147);var p=a.n(d);var m=a(185);var h=a.n(m);var v=a(88);var f=a.n(v);var b=a(1);var g=a.n(b);var _=a(0);var y=a(12);var O=a(6);var k=a(2955);var E=a(387);var C=a(106);var S=a(131);var w=a(89);var j=a(50);var I=a(141);var T=a(44);var A=a(24);var N=a(17);var P=a(11);var M=a(25);var D=a(33);var x=a(2);var R=a(30);var F=a(913);var L=a(530);var U=a(4700);var B=new O["b"]("enterprise_dashboard");var q={featureSSOCombineConfigPreferences:false,samlConfig:null,isOwner:false};function G(e){switch(e){case 1:return B.t("urn:oasis:names:tc:SAML:2.0:ac:classes:PasswordProtectedTransport (default)");case 2:return B.t("urn:oasis:names:tc:SAML:2.0:ac:classes:Kerberos");case 3:return B.t("urn:federation:authentication:windows (use with ADFS for internal-only authentication)");case 4:return B.t("PasswordProtectedTransport and windows (use with ADFS for internal/external authentication)");case 5:return B.t("urn:oasis:names:tc:SAML:2.0:ac:classes:X509");case 6:return B.t("urn:oasis:names:tc:SAML:2.0:ac:classes:TLSClient");default:return B.t("Don\u2019t send this value.",{fallbackHash:"f467d202df267798e57fd80ca66bb1c41a14e363"})}}function H(e){var t=e.authnRequestsSigned,a=e.authnPublicKey;if(t)return g.a.createElement(g.a.Fragment,null,B.t("Sign AuthnRequest"),a&&g.a.createElement(L["a"],{id:"authn_public_key",name:"authn_public_key",isDisabled:true,value:a,className:"p-sso_configuration_configured__pub_key"}));return B.t("Do not sign AuthnRequest")}function W(e){var t=e.responsesSigned,a=e.assertionsSigned;if(t&&a)return B.rt("Sign the <b>Response</b> and <b>Assertion</b>.");if(t)return B.rt("Sign the <b>Response</b>.");return B.rt("Sign the <b>Assertion</b>.")}function V(e){var t=e.featureSSOCombineConfigPreferences,a=e.samlConfig,r=e.isOwner;if(!t)return null;var n=a.ssoUrl,i=a.idpEntityId,s=a.spEntityId,o=a.pubCert,l=a.authnContextClassRef,c=a.authnRequestsSigned,u=a.authnPublicKey,d=a.responsesSigned,p=a.assertionsSigned;var m=[{label:B.t("SAML 2.0 Endpoint"),value:n},{label:B.t("Identity Provider Issuer"),value:i},{label:B.t("Service Provider Issuer"),value:s},{label:B.t("Public Certificate"),value:g.a.createElement(L["a"],{id:"pub_cert_config_setting",name:"pub_cert_config_setting",isDisabled:true,value:o,className:"p-sso_configuration_configured__pub_cert"})},{label:B.t("AuthnContextClassRef"),value:G(l)},{label:B.t("AuthnRequest"),value:H({authnRequestsSigned:c,authnPublicKey:u})},{label:B.t("SAML Response Signing"),value:W({responsesSigned:d,assertionsSigned:p})}];return g.a.createElement("div",{className:"margin_bottom_100"},g.a.createElement(F["a"],{label:B.t("Current Active Setup"),readonly:!r,control:{type:"button",onEdit:x["noop"],editOnly:true}}),m.map(function(e){var t=e.label,a=e.value;return g.a.createElement(F["a"],{label:t,description:a,control:{},readonly:true,key:t})}))}V.displayName="ConfigurationRows";function K(e){var t=e.featureSSOCombineConfigPreferences;if(!t)return null;return g.a.createElement(g.a.Fragment,null,g.a.createElement("h1",{className:"p-sso_configuration_configured__title"},B.t("SSO Settings")),g.a.createElement("h3",{className:"p-sso_configuration_configured__subtitle"},B.t("Configuration")),g.a.createElement(V,e))}K.defaultProps=q;V.defaultProps=q;var z=function e(t){return{featureSSOCombineConfigPreferences:Object(P["isFeatureEnabled"])(t,"feature_sso_combine_config_preferences"),samlConfig:Object(k["e"])(t),isOwner:Object(N["isEnterpriseOwner"])(Object(M["b"])(t))}};var Q=Object(y["connect"])(z)(K);var Y={featureSSOCombineConfigPreferences:false,samlIsConfigured:false,samlConfig:{},samlTestConfig:{}};var J=function(e){h()(t,e);function t(){n()(this,t);return l()(this,u()(t).apply(this,arguments))}s()(t,[{key:"renderUnconfiguredView",value:function e(){return g.a.createElement("div",null,"Unconfigured")}},{key:"renderConfiguredView",value:function e(){return g.a.createElement(Q,null)}},{key:"render",value:function e(){var t=this.props,a=t.samlIsConfigured,r=t.featureSSOCombineConfigPreferences;if(!r)return null;return a?this.renderConfiguredView():this.renderUnconfiguredView()}}]);return t}(b["PureComponent"]);J.displayName="SSOConfiguration";var X=function e(t){return{featureSSOCombineConfigPreferences:Object(P["isFeatureEnabled"])(t,"feature_sso_combine_config_preferences"),samlIsConfigured:Object(k["d"])(t,"saml_configured"),samlTestConfig:Object(k["f"])(t)}};J.defaultProps=Y;var Z=Object(y["connect"])(X,null)(J);var $=a(3268);var ee,te;function ae(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function re(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(a),true).forEach(function(t){f()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ae(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var ne=new O["b"]("enterprise_dashboard");var ie={idpLabel:"IDP",user:{},featureSsoPreferencesViewModals:false,featureSSOCombineConfigPreferences:false,updateProfilesOnLogin:false,editableEmailAddresses:false,editableDisplayName:false,guestsMustSSO:false,samlProviderLabel:"",samlIsConfigured:false,samlConfig:{}};var se=Symbol("UPDATE_PROFILES_ON_LOGIN_SETTING");var oe=Symbol("EDITABLE_EMAIL_ADDRESSES_SETTING");var le=Symbol("EDITABLE_DISPLAY_NAME_SETTING");var ce=Symbol("GUEST_ACCOUNTS_REQUIRE_SSO_SETTING");var ue=Symbol("CUSTOM_SIGN_IN_BUTTON_SETTING");var de=(ee={},f()(ee,se,"syncWithProvider"),f()(ee,oe,"changeEmail"),f()(ee,le,"chooseUsername"),f()(ee,ce,"authRestrictions"),f()(ee,ue,"samlProviderLabel"),ee);var pe=(te={},f()(te,se,"updateProfilesOnLogin"),f()(te,oe,"editableEmailAddresses"),f()(te,le,"editableDisplayName"),f()(te,ce,"guestsMustSSO"),f()(te,ue,"samlProviderLabel"),te);var me="button_preview";var he=function(e){h()(t,e);function t(e){var a;n()(this,t);a=l()(this,u()(t).call(this,e));a.state={settingsItems:[{id:se,saving:false,open:false},{id:oe,saving:false,open:false},{id:le,saving:false,open:false},{id:ce,saving:false,open:false},{id:ue,saving:false,open:false}],loading:true};Object(R["a"])(p()(a),["onEdit","onEnable","onDisable","onCancel","getItemValue","saveSetting","settingClicked","onButtonPreviewChange"]);return a}s()(t,[{key:"componentDidMount",value:function e(){var t=this;var a=[this.props.getSSOAuthPrefs()];this.props.featureSSOCombineConfigPreferences&&a.push(this.props.getSSOAuthSAMLConfigs());Promise.all(a).then(function(){return t.setState(function(){return{loading:false}})})}},{key:"onButtonPreviewChange",value:function e(t){var a=this;return function(e){a.setSettingsItemKeys(t,[{k:"tempValue",v:e}])}}},{key:"onCancel",value:function e(t){var a=this;return function(){a.resetSettingItem(t)}}},{key:"onEnable",value:function e(t){var a=this;return function(){var e=a.state.settingsItems[t];var r=e.id!==ue||a.getItemValue(e);a.setSettingsItemKeys(t,[{k:"open",v:true},{k:"tempValue",v:r}])}}},{key:"onDisable",value:function e(t){var a=this;return function(){var e=a.state.settingsItems[t];var r=e.id===ue&&"";a.setSettingsItemKeys(t,[{k:"open",v:true},{k:"editing",v:false},{k:"disabling",v:true},{k:"tempValue",v:r}])}}},{key:"onEdit",value:function e(t){var a=this;return function(){var e=a.state.settingsItems[t];a.setSettingsItemKeys(t,[{k:"open",v:true},{k:"tempValue",v:a.getItemValue(e)}])}}},{key:"onRadioChange",value:function e(t){var a=this;return function(e){e.target.checked&&a.setSettingsItemKeys(t,[{k:"tempValue",v:e.target.value}])}}},{key:"getItemValue",value:function e(t){return this.props[pe[t.id]]}},{key:"settingClicked",value:function e(t){var a=this;return function(){return a.onEdit(t)()}}},{key:"setSettingsItemKeys",value:function e(t,a){this.setState(function(e){var r=e.settingsItems.slice();var n=Object(x["reduce"])(a,function(e,t){e[t.k]=t.v;return e},{});r.splice(t,1,re({},r[t],{},n));return{settingsItems:r}})}},{key:"resetSettingItem",value:function e(t){this.setSettingsItemKeys(t,[{k:"open",v:false},{k:"editing",v:false},{k:"disabling",v:false},{k:"saving",v:false}])}},{key:"persistToApi",value:function e(t,a){var r=this;this.setSettingsItemKeys(a,[{k:"saving",v:true}]);return this.props.saveSSOAuthPrefs(t).then(function(){var e=ne.t("Setting saved.");e&&r.props.enqueueToast({element:g.a.createElement(S["b"],{icon:"check-circle-o-large"},g.a.createElement("strong",null,e))});r.resetSettingItem(a)}).catch(function(){var e=ne.t("Something went wrong.");e&&r.props.enqueueToast({element:g.a.createElement(S["b"],null,g.a.createElement("strong",null,e))});r.resetSettingItem(a)})}},{key:"saveSetting",value:function e(t){var a=this;return function(){var e=a.state.settingsItems[t];var r=e.id;var n=f()({},de[r],e.tempValue);Object(x["isBoolean"])(n.authRestrictions)&&(n.authRestrictions=+!n.authRestrictions);return a.persistToApi(n,t)}}},{key:"renderIDPButtonLabel",value:function e(){var t=this.props.idpLabel;return"IDP"!==t?t:ne.t("SAML")}},{key:"renderButtonPreview",value:function e(t,a){if(!this.props.featureSsoPreferencesViewModals)return null;if(t.disabling)return g.a.createElement("p",null,ne.t('Once disabled, the sign in button will return to the Slack default of "Sign in with {label}"',{label:this.renderIDPButtonLabel()}));return g.a.createElement("div",null,g.a.createElement("p",{className:"p-sso_preferences_view__custom_button__prompt"},ne.t("Have a nickname for your SSO system? Add it here to help your members sign in.")),g.a.createElement("div",{className:"p-sso_preferences_view__custom_button_layout"},g.a.createElement(j["a"],{className:"p-sso_preferences_view__custom_button_layout__label",text:ne.t("Sign in button label"),htmlFor:"custom-text",id:"custom-text-label",type:"inline"},g.a.createElement(I["a"],{ariaDescribedby:"custom-text-label",name:"custom-text",id:"custom-text",value:t.tempValue,placeholder:ne.t("Sign in with {label}",{label:this.renderIDPButtonLabel()}),hintText:ne.t("Customize your button label"),onChange:this.onButtonPreviewChange(a),size:"medium",maxCharacterLimit:20,maxLength:"20",className:"p-sso_preferences_view__custom_button_layout__input","data-qa":"enterprise-sso-preferences-custom-sign-in-button-input"})),g.a.createElement(j["a"],{className:"elevation_2 rounded p-sso_preferences_view__custom_button_layout__label p-sso_preferences_view__custom_button_layout__preview_label",text:ne.t("Button preview:"),htmlFor:"custom-text",id:"custom-text-label",type:"inline"},g.a.createElement(A["d"],{type:"primary",size:"medium",className:"p-sso_preferences_view__custom_button_layout__preview_button"},ne.rt("Sign in with {label}",{label:t.tempValue||this.renderIDPButtonLabel()})))))}},{key:"renderIdentitySettings",value:function e(){var t,a=this;if(!this.props.featureSsoPreferencesViewModals)return null;var r=(t={},f()(t,se,{label:ne.t("Sync user profiles"),onDescription:ne.t("Available user profile fields will be synced from your identity provider every time a user logs in."),offDescription:ne.t("User profile fields will not be synced from your identity provider on log in."),enableModalText:ne.t("Once enabled, available user profile fields will be synced from your identity provider every time a user logs in."),disableModalText:ne.t("Once disabled, user profile fields will not be synced from your identity provider when a user logs in."),dataQA:"enterprise-sso-preferences-update-profiles-on-login"}),f()(t,oe,{label:ne.t("Allow users to change their email address"),onDescription:ne.t("Users will be able to change their email address to something other than the one from their {idpLabel} account. They\u2019ll still log in with {idpLabel}.",{idpLabel:this.props.idpLabel}),offDescription:ne.t("Users will not be able to change their email address to something other than the one from their {idpLabel} account.",{idpLabel:this.props.idpLabel}),enableModalText:ne.t("Once enabled, Users will be able to change their email address to something other than the one from their {idpLabel} account.",{idpLabel:this.props.idpLabel}),disableModalText:ne.t("Once disabled, users will not be able to change their email address to something other than the one from their {idpLabel} account.",{idpLabel:this.props.idpLabel}),dataQA:"enterprise-sso-preferences-editable-email-address"}),f()(t,le,{label:ne.t("Allow users to change their display name"),onDescription:ne.t("Users will be able to change their display name to something other than the one from their {idpLabel} account.",{idpLabel:this.props.idpLabel}),offDescription:ne.t("Users will not be able to change their display name to something other than the one from their {idpLabel} account.",{idpLabel:this.props.idpLabel}),enableModalText:ne.t("Once enabled, users will be able to change their display name to something other than the one from their {idpLabel} account.",{idpLabel:this.props.idpLabel}),disableModalText:ne.t("Once disabled, users will not be able to change their display name to something other than the one from their {idpLabel} account.",{idpLabel:this.props.idpLabel}),dataQA:"enterprise-sso-preferences-editable-display-name"}),f()(t,ce,{label:ne.t("Make SSO mandatory for guests"),onDescription:ne.t("All accounts in the organization must sign in with SSO."),offDescription:ne.t("Guests may sign in with a username and password."),enableModalText:ne.t("Once enabled, guest accounts must use SSO to sign in to workspaces in your organization",{idpLabel:this.props.idpLabel}),disableModalText:ne.t("Once disabled, guests will be able to sign in to workspaces in your organization using an email and password",{idpLabel:this.props.idpLabel}),dataQA:"enterprise-sso-preferences-guest-accounts-require-sso"}),f()(t,ue,{label:ne.t("Custom sign-in button"),onDescription:ne.t("This is how your sign in button looks."),type:me,dataQA:"enterprise-sso-preferences-custom-sign-in-button"}),t);var n=ne.t("Save");var i=function e(t){return!!a.getItemValue(t)};var s=function e(t){var n=r[t.id];if(n.type===me)return g.a.createElement("div",null,g.a.createElement(A["d"],{type:"primary",size:"medium",className:"p-sso_preferences_view__custom_button_layout__preview_button readonly"},ne.rt("Sign in with {label}",{label:a.getItemValue(t)||a.renderIDPButtonLabel()})),n.onDescription);return i(t)?n.onDescription:n.offDescription};var o=function e(t){if(!t.disabling)return i(t)?n:ne.t("Enable");return ne.t("Disable")};var l=Object(N["isEnterpriseOwner"])(this.props.user);return g.a.createElement("div",null,this.state.settingsItems.map(function(e,t){var n=r[e.id].dataQA||"";return g.a.createElement("div",{key:e.id.toString(),"data-qa":n},g.a.createElement(F["a"],{label:r[e.id].label,state:i(e)?ne.t("Enabled"):ne.t("Disabled"),description:s(e),onClick:a.settingClicked(t),type:"button",control:{type:"button",enabled:i(e),onEnable:a.onEnable(t),onDisable:a.onDisable(t),onEdit:a.onEdit(t),toggleOnly:e.id!==ue,dataQAPrefix:n},readonly:!l,readonlyTooltip:l?"":ne.t("Only Org Owners can change this setting")}),g.a.createElement(T["a"],{closeModal:a.onCancel(t),isOpen:e.open,centered:true},g.a.createElement(T["h"],null,g.a.createElement(T["j"],{title:r[e.id].label})),g.a.createElement(T["d"],null,g.a.createElement(T["e"],null,e.disabling?r[e.id].disableModalText:r[e.id].enableModalText,e.id===ue&&a.renderButtonPreview(e,t))),g.a.createElement(T["f"],{"data-qa":n+"-modal-footer"},g.a.createElement(T["g"],null,g.a.createElement(T["c"],{type:"outline","data-qa":n+"-modal-close-button"},ne.t("Cancel")),g.a.createElement(A["b"],{type:e.disabling?"danger":r[e.id].modalButtonType,onClick:a.saveSetting(t),loading:e.saving,"data-qa":n+"-modal-PCTA-button"},o(e))))))}))}},{key:"render",value:function e(){if(this.props.featureSSOCombineConfigPreferences)return g.a.createElement("div",{className:"p-sso_preferences_view"},this.state.loading?g.a.createElement(w["a"],{color:"blue",size:"jumbo"}):g.a.createElement(g.a.Fragment,null,g.a.createElement(Z,null),this.props.samlIsConfigured&&g.a.createElement(g.a.Fragment,null,g.a.createElement("h3",{className:"p-sso_configuration_configured__subtitle"},ne.t("Preferences")),this.renderIdentitySettings())),g.a.createElement(E["a"],null));return g.a.createElement("div",{className:"p-sso_preferences_view"},g.a.createElement("h1",{className:"p-sso_preferences_view__title"},ne.t("SSO Preferences")),this.state.loading?g.a.createElement(w["a"],{color:"blue",size:"jumbo"}):g.a.createElement("div",null,this.renderIdentitySettings()),g.a.createElement(E["a"],null))}}]);return t}(b["PureComponent"]);he.displayName="SSOPreferencesView";he.defaultProps=ie;var ve=function e(t){return{featureSsoPreferencesViewModals:Object(P["isFeatureEnabled"])(t,"feature_sso_preferences_view_modals"),featureSSOCombineConfigPreferences:Object(P["isFeatureEnabled"])(t,"feature_sso_combine_config_preferences"),user:Object(M["b"])(t),updateProfilesOnLogin:Object(k["d"])(t,"sync_with_provider"),editableEmailAddresses:Object(k["d"])(t,"change_email"),editableDisplayName:Object(k["d"])(t,"choose_username"),guestsMustSSO:!Object(k["d"])(t,"auth_restrictions"),samlProviderLabel:Object(k["d"])(t,"saml_provider_label"),idpLabel:Object(D["f"])(t),samlIsConfigured:Object(k["d"])(t,"saml_configured"),samlConfig:Object(k["e"])(t),samlTestConfig:Object(k["f"])(t)}};var fe=function e(t){return{enqueueToast:function e(){return t(C["enqueueToast"].apply(void 0,arguments))},getSSOAuthPrefs:function e(){return t(Object(k["b"])({reason:"SSOPreferencesView_getSSOAuthPrefs"}))},saveSSOAuthPrefs:function e(a){return t(Object(k["g"])({prefs:a,reason:"SSOPreferencesView_saveSSOAuthPrefs"}))},getSSOAuthSAMLConfigs:function e(){return t(Object(k["c"])({reason:"SSOPreferencesView_getSSOAuthSAMLConfigs"}))}}};var be=Object(y["connect"])(ve,fe)(he);var ge=t["a"]=be},,,function(e,t,a){},,,,,,,,,,,,,,,function(e,t,a){},,,,,,function(e,t,a){"use strict";var r=a(110);var n=a.n(r);var i=a(135);var s=a.n(i);var o=a(169);var l=a.n(o);var c=a(138);var u=a.n(c);var d=a(185);var p=a.n(d);var m=a(1);var h=a.n(m);var v=a(0);var f=a(13);var b=a.n(f);var g=a(12);var _=a(193);var y=a(831);var O=a(34);var k=a(392);var E=a(22);var C=a(196);var S=a.n(C);var w=a(147);var j=a.n(w);var I=a(2);var T=a.n(I);var A=a(30);function N(e,t){return Object(I["has"])(t,"metadata.query_rewriting.spell_correction_context.method")}var P=a(16);var M=a(114);var D=a(541);var x=a(18);var R=a(236);var F=a(122);var L=a(323);var U=a(120);var B="IMPROVED_SEARCH";var q="search_sort";var G=Object(x["b"])("Clog a search open event using data from redux",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.messageSort;Object(P["a"])({getState:t}).info(B,"Set message sort method. messageSort: "+r);e(Object(F["d"])({pref:q,value:r}));e(Object(L["d"])({module:"messages",reason:"search-messages-sort-changed"}));e(Object(R["k"])({method:"set_sort_"+(r===U["f"].relevantMessages?"score":"timestamp")}))});G.meta={name:"setMessageSort",key:"actionsUniversalSearchSetMessageSortSetMessageSort",description:"Clog a search open event using data from redux"};G.propTypes={method:v["default"].string};var H=a(33);var W=a(227);var V=a(80);var K=a(11);var z=a(505);var Q=a(837);var Y=a(104);var J=a(42);var X=a(27);var Z=a(6);var $=a(57);var ee=a(24);var te=a(23);var ae=a(257);var re=a(1063);var ne=a(2704);var ie=a(189);function se(e,t){var a=e[0]&&e[0].ts;if(!a)return"";var r=Object(ie["l"])(a,{returnMoment:true});return Object(ie["i"])(r,{shortenMonth:t,excludeYear:Object(ie["h"])(a)})}var oe=a(1435);var le=a(1248);var ce=a(38);var ue=a(229);var de=a(137);var pe=a(9);var me=a(20);function he(e,t){if("string"===typeof t)return Object(me["e"])(e,t,true);if(Object(pe["isMpim"])(t))return Object(me["e"])(e,t.id,true);t&&t.id&&Object(me["e"])(e,t.id,true);return t}var ve=new Z["b"]("search");var fe=/[\ue000\ue001]/g;function be(e,t){if(!t)return null;var a=t.team;var r=he(e,t.channel);var n=t.messages||[];var i=Object(H["d"])(e);var s=null;if(a&&Object(de["a"])(a)&&i.id!==a){var o=Object(H["k"])(e,a||i.id);s=Object(X["getTeamDisplayName"])(o)}var l;var c=Object(pe["getDisplayNameForChannel"])(e,r,{publicChannelIncludeHashSign:false,imIncludeAtSign:false});var u=se(n);var d=n.length;var p=i&&i.id!==a&&Object(de["a"])(a);l=Object(pe["isIm"])(r)?ve.t("{count, plural, =1 {Direct} other {# messages from a direct}} message with {conversationName} on {date}:",{conversationName:c,date:u,count:d}):Object(pe["isMpim"])(r)?ve.t("{count, plural, =1 {Group} other {# messages from group}} message with {conversationName} on {date}:",{conversationName:c,date:u,count:d}):Object(pe["isPendingExternallySharedChannel"])(r)?ve.t("{count, plural, =1 {From} other {# messages in}} {conversationName}, a pending shared channel, on {date}:",{conversationName:c,date:u,count:d,fallbackHash:"24663e65e2ac4dc269e630e2237e65674bc121fd"}):Object(pe["isExternallySharedChannel"])(r)?ve.t("{count, plural, =1 {From} other {# messages in}} {conversationName}, a shared channel, on {date}:",{conversationName:c,date:u,count:d}):p?ve.t("{count, plural, =1 {From} other {# messages in}} {conversationName} in {workspaceName} on {date}:",{conversationName:c,date:u,count:d,workspaceName:s}):Object(pe["isOrgShared"])(r)?ve.t("{count, plural, =1 {From} other {# messages in}} {conversationName}, a shared channel, on {date}:",{conversationName:c,date:u,count:d}):ve.t("{count, plural, =1 {From} other {# messages in}} {conversationName} on {date}:",{conversationName:c,date:u,count:d});l=Object(I["unescape"])(l);var m=n.map(function(t){return Object(ne["a"])({day:{ts:t.ts,isFirstDay:false,isLastDay:false},name:Object(oe["a"])(e,{userId:t.user}),time:Object(ue["a"])(t.ts,{do24hrTime:Object(ce["k"])(e,"time24"),includeSeconds:false}),text:Object(le["a"])(e,t.text.replace(fe,"")),reactionCount:t.reactions&&t.reactions.length||0,replyCount:t.reply_count||0,isStarred:t.is_starred,isPinned:false,isFirstMsgForDay:false,isLastMsgForDay:false,isFirstUnreadMsg:false})});var h=m.join(". ");return l+" "+h+"."}var ge=a(751);var _e=a(1401);var ye=a(61);var Oe=a(292);var ke=a(245);var Ee=a.n(ke);var Ce=a(219);var Se=a(1059);var we=a(370);var je=a(2475);var Ie=new Z["b"]("search");var Te={featureTinyspeck:false,theme:"light"};function Ae(e){var t=e.theme,a=e.featureTinyspeck;if(a)return h.a.createElement("div",{className:"c-search_message__tinyspeck_error_message"},h.a.createElement("strong",null,"Message Group failed to render. "),"Please go to #triage-search and"," ",h.a.createElement("strong",null,"read up/search to see if this was already reported."),"If it has not been reported yet please make a report with a link to the message before this one, if this is a public channel. This message is only displayed in workspaces in the Slack org.");return h.a.createElement("div",{className:"c-message_group"},h.a.createElement("div",{className:"c-search_message c-search_message--"+t},h.a.createElement("div",{className:"c-search_message__gutter"},h.a.createElement(Ce["b"],{className:"c-search_message__avatar",size:36,tabIndex:"-1"})),h.a.createElement("div",{className:"c-search_message__content"},h.a.createElement("div",{className:"c-search_message__content_header"},h.a.createElement(Se["a"],{userId:"",isInteractive:true})),h.a.createElement("div",{className:"c-search_message__body sk_foreground_max"},Ie.t("There was an error displaying this message.")))))}Ae.displayName="ErrorSearchMessage";Ae.defaultProps=Te;var Ne=function e(t){var a="";var r=false;try{a=Object(we["a"])(t);r=Object(K["isFeatureEnabled"])(t,"feature_tinyspeck")}catch(e){}return{theme:a,featureTinyspeck:r}};var Pe=Object(g["connect"])(Ne)(Ae);var Me=a(88);var De=a.n(Me);var xe=a(815);var Re=a(165);var Fe=a(43);var Le=a(166);var Ue=a(98);var Be=new Z["b"]("search");var qe={featureTinyspeck:false,user:"",ts:"[Message timestamp (ts) missing]",channel:{},theme:"light"};function Ge(e){var t=e.user,a=e.theme,r=e.ts,n=e.channel,i=e.featureTinyspeck;if(i)return h.a.createElement("div",{className:"c-search_message__tinyspeck_error_message"},h.a.createElement("strong",null,"Message ",r," in ",n.id||"[Channel id missing]"," failed to render."," "),"Please go to #triage-search and"," ",h.a.createElement("strong",null,"read up/search to see if this was already reported."),"If it has not been reported yet please make a report with a link to the message before this one, if this is a public channel. This message is only displayed in workspaces in the Slack org.");return h.a.createElement("div",{className:"c-search_message c-search_message--"+a},h.a.createElement("div",{className:"c-search_message__gutter"},h.a.createElement(Ce["b"],{className:"c-search_message__avatar",size:36,tabIndex:"-1"})),h.a.createElement("div",{className:"c-search_message__content"},h.a.createElement("div",{className:"c-search_message__content_header"},h.a.createElement(Se["a"],{userId:t||"",isInteractive:true})),h.a.createElement("div",{className:"c-search_message__body sk_foreground_max"},Be.t("There was an error displaying this message."))))}Ge.displayName="ErrorSearchMessage";Ge.defaultProps=qe;var He=function e(t){var a="";var r=false;try{a=Object(we["a"])(t);r=Object(K["isFeatureEnabled"])(t,"feature_tinyspeck")}catch(e){}return{theme:a,featureTinyspeck:r}};var We=Object(g["connect"])(He)(Ge);var Ve=a(1654);var Ke=a(1035);var ze=a(69);var Qe=a(2063);var Ye=function e(t,a){var r=a.bot_id,n=a.bot_profile,i=a.thread_ts,s=a.teamId,o=a.ts,l=a.channel,c=a.replies,u=a.permalink,d=a.blocks,p=a.attachments;var m=Object(we["a"])(t);var h=Object(H["d"])(t);var v;h&&(v=h.domain);var f=T.a.some(a.extracts,function(e){return e.truncated_head||e.truncated_tail});var b=a.text.length>200;var g=!!(a.attachments&&a.attachments.length);var _=!!a.text;var y=f&&b||g&&_;(d||T.a.some(p,"blocks"))&&(y=false);var O=Object(H["d"])(t).id!==s;var k="";if(c&&c.length){var E=c[0].ts;var C=Object(ze["parseUrl"])(u),S=C.hostname;k="https://"+S+Object(Ke["a"])({channelId:l.id,ts:E,threadTs:o})}return{hasText:_,isCrossWorkspace:O,botId:r,botProfile:n,threadTs:i,theme:m,permalinkToMessageThread:k,hasAdHocSender:Object(Ve["a"])(a),featureTinyspeck:Object(K["isFeatureEnabled"])(t,"feature_tinyspeck"),canBeTruncated:y,teamDomain:v,channelName:Object(pe["getDisplayNameForChannel"])(t,l),wysiwygSearchHighlightingEnabled:"treatment"===Object(V["getGroupForUser"])(t,"wysiwyg_search_highlighting")}};var Je=null;var Xe=Object(g["connect"])(Ye,Je)(Qe["a"]);var Ze="IMPROVED_SEARCH";var $e=function(e){p()(t,e);function t(){var e;n()(this,t);e=l()(this,u()(t).call(this));e.state={hasError:false};return e}s()(t,[{key:"componentDidCatch",value:function e(t,a){this.props.telemeter.count("search_ui_messages_result_message_render_error");this.props.logger.error(Ze,"Error caught by ProtectedSearchMessage "+a.componentStack,t);this.setState(function(){return{hasError:true}})}},{key:"render",value:function e(){if(this.state.hasError)return h.a.createElement(We,this.props);return h.a.createElement(Xe,this.props)}}]);return t}(m["PureComponent"]);$e.displayName="ProtectedSearchMessage";var et=$e;var tt=et;var at=a(3675);function rt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function nt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?rt(Object(a),true).forEach(function(t){De()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):rt(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var it=new Z["b"]("search");var st={workspaceName:"",index:null,clogSearchMessageClick:I["noop"],clogMessageClick:I["noop"]};var ot=function(e){p()(t,e);function t(e){var a;n()(this,t);a=l()(this,u()(t).call(this,e));a.state={isExpanded:false,isHoveringOnExpandLinks:false};Object(A["a"])(j()(a),["expand","onChannelClick","onMessageJump","onFileJump","onExpandHoverStart","onExpandHoverEnd","onLinkClick","onRepliesClick"]);return a}s()(t,[{key:"onChannelClick",value:function e(){var t=this.state.isExpanded?this.props.messages:this.getCondensedMessageArray();t[0]&&this.onMessageJump({iid:t[0].iid,permalink:t[0].permalink,ts:t[0].ts,channelId:this.props.channel.id,userId:t[0].user,botId:t[0].botId})}},{key:"onExpandHoverEnd",value:function e(){this.setState(function(){return{isHoveringOnExpandLinks:false}})}},{key:"onExpandHoverStart",value:function e(){this.setState(function(){return{isHoveringOnExpandLinks:true}})}},{key:"onFileJump",value:function e(t,a){var r=a.file,n=a.iid,i=a.ts,s=a.channelId,o=a.userId,l=a.botId;this.props.onFileJump(t,{file:r,iid:n,ts:i,channelId:s,userId:o,botId:l,position:this.props.index})}},{key:"onLinkClick",value:function e(t,a){this.props.clogSearchMessageClick({iid:a.iid,ts:a.ts,channelId:a.channelId,botId:a.botId,userId:a.userId,type:a.type,position:this.props.index});a.type===R["b"].copyLink?this.props.clogMessageClick({msg:t,payload:a}):a.type===R["b"].channel&&this.props.close()}},{key:"onMessageJump",value:function e(t){var a=t.iid,r=t.permalink,n=t.ts,i=t.channelId,s=t.userId,o=t.botId;this.props.onMessageJump({teamId:this.props.currentTeam.id,permalink:r});this.props.clogSearchMessageClick({type:R["b"].messageJump,iid:a,ts:n,channelId:i,userId:s,botId:o,position:this.props.index})}},{key:"onRepliesClick",value:function e(t){this.props.onRepliesClick(t);this.props.clogSearchMessageClick({type:R["b"].repliesJump,iid:t.iid,ts:t.ts,channelId:t.channelId,userId:t.userId,botId:t.botId,position:this.props.index})}},{key:"getCondensedMessageArray",value:function e(){var t=this.props.messages;return Object(I["reduce"])(t,function(e,t){var a=e.length&&e[e.length-1].collapsedStub;t.stub&&(!t.text||t.text.length>200||a)?a?e[e.length-1].count+=1:e.push({collapsedStub:true,count:1}):e.push(t);return e},[])}},{key:"expand",value:function e(t){var a=t.iid,r=t.ts,n=t.channelId,i=t.userId,s=t.botId;this.setState(function(){return{isExpanded:true}});this.props.clogSearchMessageClick({type:R["b"].expand,iid:a,ts:r,channelId:n,userId:i,botId:s,position:this.props.index})}},{key:"formatHeaderDate",value:function e(){return se(this.props.messages,true)}},{key:"renderHeader",value:function e(){var t=this.props.channel;if(!t)return null;var a=this.formatHeaderDate();return h.a.createElement(Fe["a"],{className:"c-message_group__header",onClick:this.onChannelClick,"data-qa":"search_message_group_header"},h.a.createElement(Le["a"],{channel:t,teamIconSize:"14",showPresence:true,inline:true,showTeamIconForXwsChannels:true}),h.a.createElement("span",null,"\u2013"),h.a.createElement("span",{className:"c-message_group__header_date"},a),h.a.createElement("span",{className:"c-message_group__header_view_label"},it.t("View in channel")))}},{key:"renderMessages",value:function e(){var t=this;var a=this.state.isExpanded?this.props.messages:this.getCondensedMessageArray();return Object(I["map"])(a,function(e,a){if(e.collapsedStub&&!t.state.isExpanded)return h.a.createElement(Ue["a"],{key:a,className:"c-message_group__divider",onClick:t.expand,"aria-expanded":t.state.isExpanded},h.a.createElement("hr",{className:"c-message_group__divider_rule"}),h.a.createElement("div",{className:"c-message_group__divider_text"},it.t("+{count, plural, =1 {# message} other {# messages}}",{count:e.count})));return h.a.createElement(tt,S()({key:e.ts,index:t.props.index},e,{teamId:t.props.team,channel:t.props.channel,expanded:t.state.isExpanded,onExpand:t.expand,onClick:t.onMessageJump,onLinkClick:function a(r){t.onLinkClick(e,r)},onFileClick:t.onFileJump,onRepliesClick:t.onRepliesClick,onExpandHoverStart:t.onExpandHoverStart,onExpandHoverEnd:t.onExpandHoverEnd,logger:t.props.logger,telemeter:t.props.telemeter}))})}},{key:"render",value:function e(){var t=b()("c-message_group",{"c-message_group--hover-expand":this.state.isHoveringOnExpandLinks});return h.a.createElement("div",{className:t,"data-qa":"search_message_group"},this.renderHeader(),this.renderMessages())}}]);return t}(m["PureComponent"]);ot.displayName="SearchMessageGroup";ot.defaultProps=st;var lt=function e(t,a){var r=a.channel,n=a.team;var i=Object(H["d"])(t);var s=Object(H["k"])(t,n||i.id);var o=Object(X["getTeamDisplayName"])(s);var l=he(t,r);return{channel:nt({},l,{team_id:n}),isEnterpriseOrg:!!(i&&i.enterprise_id),workspaceName:o,currentTeam:i}};var ct={clogSearchMessageClick:function e(){return R["i"].apply(void 0,arguments)},clogMessageClick:function e(){return xe["a"].apply(void 0,arguments)},close:function e(){return Q["a"].apply(void 0,arguments)}};var ut=Object(g["connect"])(lt,ct,null,{areStatePropsEqual:function e(t,a){return Object(Re["a"])(t,a,2)}})(ot);var dt="IMPROVED_SEARCH";var pt=function(e){p()(t,e);function t(){var e;n()(this,t);e=l()(this,u()(t).call(this));e.state={hasError:false};return e}s()(t,[{key:"componentDidCatch",value:function e(t,a){this.props.telemeter.count("search_ui_messages_result_message_group_render_error");this.props.logger.error(dt,"Error caught by ProtectedMessageGroup "+a.componentStack,t);this.setState(function(){return{hasError:true}})}},{key:"render",value:function e(){var t=this.props,a=t.logger,r=Ee()(t,["logger"]);if(this.state.hasError)return h.a.createElement(Pe,r);return h.a.createElement(ut,S()({logger:a},r))}}]);return t}(m["PureComponent"]);pt.displayName="ProtectedMessageGroup";var mt=pt;var ht=a(252);var vt=a(1220);var ft={visible:true};var bt=new Z["b"]("search");function gt(e){var t=e.visible,a=e.currentPageOffset,r=e.totalPageCount,n=e.onBack,i=e.onForward,s=e.onFeedbackClick;if(!t)return null;var o=1===a;var l=a===r;var c="";var u={currentPageOffset:Object(ht["a"])(a),totalPageCount:Object(ht["a"])(r)};c=bt.t("Page {currentPageOffset} of {totalPageCount}",u,{fallbackHash:"12d107c2f54959a419ebf8a58dc959d76473b0ea"});var d=h.a.createElement(Fe["a"],{className:"c-search__pager__button_forward",onClick:i,disabled:l,"data-qa":"search_pager_forward_button"},o&&bt.t("See more")||bt.t("Next"),h.a.createElement(te["b"],{type:"chevron-medium-right",size:"inherit"}));var p=h.a.createElement(Fe["a"],{className:"c-search__pager__button__back",onClick:n,disabled:o,"data-qa":"search_pager_back_button"},h.a.createElement(te["b"],{type:"chevron-medium-left",size:"inherit"}),bt.t("Previous"));var m=h.a.createElement(vt["a"],{short:true,className:"c-search__pager_feedback",onClick:s});return h.a.createElement("div",{className:"c-search__pager"},o||p,h.a.createElement("div",null,h.a.createElement("span",{className:"c-search__pager__details"},c),m),l||d)}gt.displayName="Pager";gt.defaultProps=ft;var _t=gt;var yt=a(25);var Ot=a(21);var kt=a(266);var Et=a(218);var Ct=a.n(Et);var St=a(1411);var wt=a(1646);var jt=a(1208);function It(e,t,a){var r=Object(W["getRequest"])(t());var n=r?r.query:"";e(Object(W["clearResponse"])());e(Object(St["a"])());return e(Object(L["a"])({query:n,reason:a,fetchSuggestions:Object(jt["a"])(t())}))}var Tt=Object(x["b"])("Message/file search: exclude bots checkbox changed",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.value;e(Object(D["i"])({value:r}));It(e,t,"search-exclude-bots-changed")});Tt.meta={name:"messageAndFileSearchExcludeBotsChanged",key:"actionsUniversalSearchSearchPrefsChangedMessageAndFileSearchExcludeBotsChanged",description:"Message/file search: exclude bots checkbox changed"};Tt.propTypes={value:v["default"].bool.isRequired};var At=Object(x["b"])("Message/file search: only my channels checkbox changed",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.value;e(Object(D["j"])({value:r}));It(e,t,"search-only-my-channels-changed")});At.meta={name:"messageAndFileSearchOnlyMyChannelsChanged",key:"actionsUniversalSearchSearchPrefsChangedMessageAndFileSearchOnlyMyChannelsChanged",description:"Message/file search: only my channels checkbox changed"};At.propTypes={value:v["default"].bool.isRequired};var Nt=Object(x["b"])("Channel search: hide member channels flag changed",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.value,n=a.refetch,i=void 0===n||n;e(Object(D["g"])({value:r}));i&&It(e,t,"search-hide-member-channels-changed")});Nt.meta={name:"channelSearchHideMemberChannelsChanged",key:"actionsUniversalSearchSearchPrefsChangedChannelSearchHideMemberChannelsChanged",description:"Channel search: hide member channels flag changed"};Nt.propTypes={value:v["default"].bool.isRequired};var Pt=Object(x["b"])("File search: sort changed",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.sort;e(Object(wt["b"])({sort:r}));e(Object(L["d"])({module:"files",reason:"search-files-sort-changed"}))});Pt.meta={name:"fileSearchSortChanged",key:"actionsUniversalSearchSearchPrefsChangedFileSearchSortChanged",description:"File search: sort changed"};Pt.propTypes={sort:v["default"].oneOf(Object(I["values"])(U["c"])).isRequired};var Mt=Object(x["b"])("Channel search: sort changed",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.sort;e(Object(D["h"])({sort:r}));e(Object(L["d"])({module:"channels",reason:"search-channels-sort-changed"}))});Mt.meta={name:"channelSearchSortChanged",key:"actionsUniversalSearchSearchPrefsChangedChannelSearchSortChanged",description:"Channel search: sort changed"};Mt.propTypes={sort:v["default"].oneOf(Object(I["values"])(U["b"])).isRequired};var Dt=Object(x["b"])("People search: sort changed",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.sort;e(Object(D["l"])({sort:r}));e(Object(L["d"])({module:"people",reason:"search-people-sort-changed"}))});Dt.meta={name:"peopleSearchSortChanged",key:"actionsUniversalSearchSearchPrefsChangedPeopleSearchSortChanged",description:"People search: sort changed"};Dt.propTypes={sort:v["default"].oneOf(Object(I["values"])(U["b"])).isRequired};var xt=Object(x["b"])("Channel search: filter type changed",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.type;e(Object(M["j"])({type:r}));It(e,t,"search-channels-filter-type-changed")});xt.meta={name:"channelSearchFilterTypeChanged",key:"actionsUniversalSearchSearchPrefsChangedChannelSearchFilterTypeChanged",description:"Channel search: filter type changed"};xt.propTypes={type:v["default"].oneOf(Object(I["values"])(U["a"])).isRequired};var Rt=Object(x["b"])("All of search: search only current workspace changed",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.value,n=a.refetch,i=void 0===n||n;e(Object(D["m"])({value:r}));i&&It(e,t,"search-only-search-workspace-changed")});Rt.meta={name:"searchOnlySearchWorkspaceChanged",key:"actionsUniversalSearchSearchPrefsChangedSearchOnlySearchWorkspaceChanged",description:"All of search: search only current workspace changed"};Rt.propTypes={value:v["default"].bool.isRequired};var Ft=Object(x["b"])("All of search: search by selected enterprise team id",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.value,n=a.refetch,i=void 0===n||n;e(Object(M["g"])({selectedEnterpriseTeamId:r}));i&&It(e,t,"search-only-by-enterprise-team-id")});Ft.meta={name:"searchOnlyByEnterpriseTeamId",key:"actionsUniversalSearchSearchPrefsChangedSearchOnlyByEnterpriseTeamId",description:"All of search: search by selected enterprise team id"};Ft.propTypes={value:v["default"].string.isRequired};var Lt=Object(x["b"])("Channel search: update an external org filter",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.teamId,n=a.value;var i=t();var s=Ct()(Object(_["e"])(i));var o=Object(_["d"])(i);n?s.push(r):s=s.filter(function(e){return e!==r});e(Object(M["k"])({teamIds:Array.from(new Set([].concat(Ct()(o),[r])))}));e(Object(M["l"])({orgFilters:s}));It(e,t,"search-channels-org-filter-changed")});Lt.meta={name:"toggleChannelSearchOrgFilter",key:"actionsUniversalSearchSearchPrefsChangedToggleChannelSearchOrgFilter",description:"Channel search: update an external org filter"};Lt.propTypes={teamId:v["default"].string.isRequired,value:v["default"].bool.isRequired};var Ut=Object(x["b"])("People search: update an external org filter",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.teamId,n=a.value;var i=t();var s=Ct()(Object(_["n"])(i));var o=Object(_["m"])(i);n?s.push(r):s=s.filter(function(e){return e!==r});e(Object(M["x"])({teamIds:Array.from(new Set([].concat(Ct()(o),[r])))}));e(Object(M["y"])({orgFilters:s}));It(e,t,"search-people-org-filter-changed")});Ut.meta={name:"togglePeopleSearchOrgFilter",key:"actionsUniversalSearchSearchPrefsChangedTogglePeopleSearchOrgFilter",description:"People search: update an external org filter"};Ut.propTypes={teamId:v["default"].string.isRequired,value:v["default"].bool.isRequired};var Bt=Object(x["b"])("People search: filter type changed",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.type,n=a.teamId,i=a.refetch,s=void 0===i||i;e(Object(M["w"])({type:r,teamId:n}));s&&It(e,t,"search-people-filter-type-changed")});Bt.meta={name:"peopleSearchFilterTypeChanged",key:"actionsUniversalSearchSearchPrefsChangedPeopleSearchFilterTypeChanged",description:"People search: filter type changed"};Bt.propTypes={type:v["default"].oneOf(Object(I["values"])(U["h"])).isRequired,teamId:v["default"].string};var qt=Object(x["b"])("People search: custom filter changed",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.id,n=a.value,i=a.checked;e(Object(M["v"])({id:r,value:n,checked:i}));It(e,t,"search-people-custom-filter-changed")});qt.meta={name:"peopleSearchCustomFilterChanged",key:"actionsUniversalSearchSearchPrefsChangedPeopleSearchCustomFilterChanged",description:"People search: custom filter changed"};qt.propTypes={id:v["default"].string.isRequired,value:v["default"].string.isRequired,checked:v["default"].bool.isRequired};var Gt=Object(x["b"])("People search: hide deactivated users pref changed",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.value,n=a.refetch,i=void 0===n||n;e(Object(D["k"])({value:r}));i&&It(e,t,"search-people-hide-deactivated-users-changed")});Gt.meta={name:"peopleSearchHideDeactivatedUsersChanged",key:"actionsUniversalSearchSearchPrefsChangedPeopleSearchHideDeactivatedUsersChanged",description:"People search: hide deactivated users pref changed"};Gt.propTypes={value:v["default"].bool.isRequired};var Ht=Object(x["b"])("People search: timezone filter changed",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.label,n=a.value,i=a.checked;e(Object(M["C"])({label:r,value:n,checked:i}));It(e,t,"search-people-timezone-filter-changed")});Ht.meta={name:"peopleSearchTimezoneFilterChanged",key:"actionsUniversalSearchSearchPrefsChangedPeopleSearchTimezoneFilterChanged",description:"People search: timezone filter changed"};Ht.propTypes={label:v["default"].string.isRequired,value:v["default"].string.isRequired,checked:v["default"].bool.isRequired};var Wt=a(124);var Vt=a(277);var Kt=a(153);var zt=a(1296);var Qt=a(4750);var Yt=function e(t){var a=Object(W["getEditableRequestQueryFilter"])(t)||zt["b"];var r=Object(W["getFilterSuggestions"])(t)||zt["b"];var n=Object(W["getFilterSuggestionsForFiles"])(t)||zt["b"];var i=Object(K["getCurrentUserId"])(t);var s=Object(H["d"])(t);var o=!!s.enterprise_id;var l=$t(t,a.in);var c=Object(_["j"])(t,"suggestions")||zt["b"];var u=c.loading;var d=Object(_["j"])(t,"suggestionsForFiles")||{loading:false};var p=d.loading;var m="solr_rank_debug"===Object(V["getGroupForUser"])(t,"solr_rank_debug");var h=Object(Ot["a"])(t);var v=Object(K["getAllLoggedInAccountsNormalized"])(t).filter(function(e){return!!e.enterprise_id&&e.enterprise_id===h});var f={searchOnlyCurrentTeam:Object(ce["k"])(t,U["n"]),searchExcludeBots:Object(ce["k"])(t,U["k"]),searchOnlyMyChannels:Object(ce["k"])(t,U["o"])};return{suggestions:{in:(r.in||zt["a"]).map(function(e){return Zt(t,e)}).filter(function(e){return!!e}),from:(r.from||zt["a"]).map(function(e){return Zt(t,e)}).filter(function(e){return!!e})},fileSuggestions:{in:(n.in||zt["a"]).map(function(e){return Zt(t,e)}).filter(function(e){return!!e}),from:(n.from||zt["a"]).map(function(e){return Zt(t,e)}).filter(function(e){return!!e})},currentTeam:s,isEnterpriseOrg:o,myUserId:i,filters:{in:a.in||zt["a"],from:a.from||zt["a"],before:a.before,after:a.after,fileType:a.fileType},imToUserMap:l,searchPrefs:f,loading:u,loadingFileSuggestions:p,logInfo:Object(P["a"])({state:t}).info,isDebugInfoVisible:Object(_["h"])(t),showDebugOption:m,filterWorkspaceOnly:Object(D["f"])(t),loggedInEnterpriseTeams:v.map(function(e){return Object(H["k"])(t,e.id)}),featureSearchLimitTeamFilter:Object(K["isFeatureEnabled"])(t,"feature_search_limit_team_filter"),searchOnlyWorkspaceTeamId:Object(_["r"])(t),selfEnterpriseOrgName:Object(H["g"])(t),showEnterpriseOptions:Object(kt["f"])(t)}};var Jt={onAfterFilterChange:function e(){return W["setEditableRequestQueryFilterAfter"].apply(void 0,arguments)},onBeforeFilterChange:function e(){return W["setEditableRequestQueryFilterBefore"].apply(void 0,arguments)},onFileTypeChange:function e(){return W["setEditableRequestQueryFilterFileType"].apply(void 0,arguments)},onMemberSelect:function e(){return W["toggleEditableRequestQueryFilterFromItem"].apply(void 0,arguments)},onChannelSelect:function e(){return W["toggleEditableRequestQueryFilterInItem"].apply(void 0,arguments)},search:function e(){return Vt["e"].apply(void 0,arguments)},toggleDebugInfoVisible:function e(){return M["N"].apply(void 0,arguments)},clogSearchFilterAdded:function e(){return R["g"].apply(void 0,arguments)},clogSearchFilterRemoved:function e(){return R["h"].apply(void 0,arguments)},searchOnlySearchWorkspaceChanged:function e(){return Rt.apply(void 0,arguments)},messageAndFileSearchExcludeBotsChanged:function e(){return Tt.apply(void 0,arguments)},messageAndFileSearchOnlyMyChannelsChanged:function e(){return At.apply(void 0,arguments)},searchOnlyByEnterpriseTeamId:function e(){return Ft.apply(void 0,arguments)}};var Xt=Object(g["connect"])(Yt,Jt,null,{areStatePropsEqual:function e(t,a){return Object(Re["a"])(t,a,2)}})(Qt["a"]);function Zt(e,t){if(Object(Wt["a"])(t))return Object(me["e"])(e,t);if(Object(Kt["a"])(t))return Object(yt["e"])(e,t);return null}function $t(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t.reduce(function(t,a){if(Object(Kt["a"])(a)){var r=Object(me["m"])(e,a);r&&(t[r]=a)}return t},{})}var ea=a(14);var ta=a(86);var aa=a(35);var ra=Object(x["b"])("Clog clicks on the message/storage limit banner that appears in search for free teams",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.elementName,n=a.uiAction,i=a.elementType;var s=Object(aa["a"])({state:t()});s.track(ea["EventId"].GROWTH_PRICING,{contexts:{ui_context:{step:ea["UiStep"].SEARCH_PANE,action:n,element_name:r,element_type:i}}})});ra.meta={name:"clogLimitBannerInteraction",key:"actionsUniversalSearchClogLimitBannerInteractionClogLimitBannerInteraction",description:"Clog clicks on the message/storage limit banner that appears in search for free teams"};ra.propTypes={elementName:v["default"].string.isRequired,uiAction:v["default"].number.isRequired,elementType:v["default"].number.isRequired};var na=ra;var ia=a(3683);var sa=new Z["b"]("search");var oa=function(e){p()(t,e);function t(e){var a;n()(this,t);a=l()(this,u()(t).call(this,e));a.clogLinkClick=a.clogLinkClick.bind(j()(a));return a}s()(t,[{key:"componentDidMount",value:function e(){this.isVisible()&&this.props.clogLimitBannerInteraction({uiAction:ea["UiAction"].IMPRESSION,elementName:this.getClogElementName(),elementType:ea["ElementType"].BANNER})}},{key:"getClogElementName",value:function e(){return this.props.overStorageLimit?"storage_limit_banner":"message_limit_banner"}},{key:"getClogUIElement",value:function e(){return this.props.overStorageLimit?ea["UiElement"].FILE_SEARCH_PRICING_LINK:ea["UiElement"].MESSAGE_SEARCH_LINK_TOP}},{key:"clogLinkClick",value:function e(){this.props.clogLimitBannerInteraction({uiAction:ea["UiAction"].CLICK,elementName:this.getClogElementName(),elementType:ea["ElementType"].LINK})}},{key:"isVisible",value:function e(){var t=this.props,a=t.overMessageLimit,r=t.overStorageLimit,n=t.type;return a||r&&"files"===n}},{key:"render",value:function e(){if(!this.isVisible())return null;var t=this.props,a=t.type,r=t.overStorageLimit;var n;var i;if(r&&"files"===a){n=sa.t("Some additional results aren\u2019t visible because your workspace has passed the free plan\u2019s 5 GB storage limit.");i=sa.t("See paid plans")}else{n="messages"===a?sa.t("Some older messages may not be shown because your workspace has over 10,000 messages."):sa.t("Some older files may not be shown because your workspace has over 10,000 messages.");i=sa.t("Learn more")}return h.a.createElement("div",{className:"p-message_limit_banner"},h.a.createElement("div",{className:"p-message_limit_banner__graphic"},h.a.createElement(te["b"],{type:"eye-closed"})),h.a.createElement("div",{className:"p-message_limit_banner__content"},n,"\xa0",h.a.createElement(Fe["a"],{href:Object(ta["j"])({entryPoint:"message_limit_banner"}),onClick:this.clogLinkClick,target:"new","data-qa":"message-limit-banner_pricing-link"},i)))}}]);return t}(m["PureComponent"]);oa.displayName="MessageLimitBanner";var la=function e(t){var a=Object(H["d"])(t);return{overMessageLimit:Object(X["isOverMessageLimit"])(a),overStorageLimit:Object(X["isOverStorageLimit"])(a)}};var ca={clogLimitBannerInteraction:na};var ua=Object(g["connect"])(la,ca)(oa);var da=a(1339);var pa=a(250);var ma=a(757);var ha=a.n(ma);var va=function(e){p()(t,e);function t(){var e;n()(this,t);e=l()(this,u()(t).call(this));Object(A["a"])(j()(e),["setContainerRef","onFocusEnter","onKeyDown","onFocusLeave"]);e.focusedAfterUpdate=false;return e}s()(t,[{key:"componentDidUpdate",value:function e(t){if(!t.focused&&this.props.focused&&this.container){this.focusedAfterUpdate=true;this.container.focus()}}},{key:"onFocusEnter",value:function e(t){var a=t.relatedEvent;if(a&&"mousedown"===a.type)return;this.props.onFocusEnter({id:this.props.id,isLifeCycleUpdate:this.focusedAfterUpdate});this.focusedAfterUpdate&&(this.focusedAfterUpdate=false)}},{key:"onFocusLeave",value:function e(){this.props.onFocusLeave({id:this.props.id})}},{key:"onKeyDown",value:function e(t){t.keyCode===ma["codes"].enter&&t.target===this.container&&this.props.onSelect(t,this.props.id)}},{key:"setContainerRef",value:function e(t){this.container=t}},{key:"focus",value:function e(){this.container&&this.container.focus()}},{key:"render",value:function e(){var t=this.props,a=t.ariaLabel,r=t.focused,n=t.children;return h.a.createElement(da["a"],{onFocusEnter:this.onFocusEnter,onFocusLeave:this.onFocusLeave,onFocusWithin:this.onFocusLeave},h.a.createElement("div",{tabIndex:"-1",className:b()("c-focus_manage_list__item",{"c-focus_manage_list__item--focus":r}),ref:this.setContainerRef,role:"listitem","aria-label":a,onKeyDown:this.onKeyDown},n))}}]);return t}(m["PureComponent"]);va.displayName="FocusManagedListItem";var fa=va;function ba(e,t,a,r){if(0===e.length)return null;if(null===t&&null!==a)return a;var n=e.indexOf(t);var i=n+r;i>=e.length?i=e.length-1:-1===n&&r<0?i=e.length-1:i<0&&(i=0);return e[i]}var ga=a(3685);var _a={onSelectItem:I["noop"]};var ya=function(e){p()(t,e);function t(e){var a;n()(this,t);a=l()(this,u()(t).call(this,e));Object(A["a"])(j()(a),["onFocusLeave","onItemFocusEnter","onItemFocusLeave","onArrowKeyDown","setContainerRef"]);a.state={activeItem:null};a.inferredActiveItem=null;a.containerRef=null;a.keyCommands=null;a.itemRefs={};return a}s()(t,[{key:"onArrowKeyDown",value:function e(t){var a=this;t.preventDefault();var r=0;t.keyCode===ma["codes"].up&&(r=-1);t.keyCode===ma["codes"].down&&(r=1);0!==r&&this.setState(function(e){return{activeItem:ba(a.props.ids,e.activeItem,a.inferredActiveItem,r)}})}},{key:"onFocusLeave",value:function e(){this.setState(function(){return{activeItem:null}});this.inferredActiveItem=null}},{key:"onItemFocusEnter",value:function e(t){var a=t.id,r=t.isLifeCycleUpdate;if(r)return;this.inferredActiveItem=a;this.setState(function(){return{activeItem:null}})}},{key:"onItemFocusLeave",value:function e(t){var a=t.id;this.setState(function(e){var t=e.activeItem;return{activeItem:t===a?null:t}})}},{key:"setContainerRef",value:function e(t){this.containerRef=t;if(this.keyCommands){this.keyCommands.reset();this.keyCommands=null}if(this.containerRef){var a=[{keys:["up","down"],handler:this.onArrowKeyDown,ignoreInputs:true}];this.keyCommands=new pa["a"](this.containerRef);this.keyCommands.bindAll(a)}}},{key:"setItemRef",value:function e(t,a){this.itemRefs[t]=a}},{key:"focus",value:function e(){this.containerRef&&this.containerRef.focus()}},{key:"focusItem",value:function e(t){if(this.itemRefs[t]){this.itemRefs[t].focus();this.inferredActiveItem=t}}},{key:"render",value:function e(){var t=this;var a=this.props,r=a.ids,n=a.itemAriaLabel,i=a.renderItem,s=a.onSelectItem;return h.a.createElement(da["a"],{onFocusLeave:this.onFocusLeave},h.a.createElement("div",{role:"list",ref:this.setContainerRef,className:"c-search_focus_managed_list",tabIndex:"-1"},r.map(function(e){return h.a.createElement(fa,{ref:function a(r){return t.setItemRef(e,r)},key:e,id:e,ariaLabel:n(e),focused:t.state.activeItem===e,onFocusEnter:t.onItemFocusEnter,onFocusLeave:t.onItemFocusLeave,onSelect:s},i(e))})))}}]);return t}(m["PureComponent"]);ya.displayName="FocusManagedList";ya.defaultProps=_a;var Oa=ya;var ka=Oa;var Ea=a(286);var Ca=a(886);var Sa=a(89);var wa=a(119);var ja=a(914);var Ia=a(1445);var Ta=a(1340);var Aa=a(1612);var Na=new Z["b"]("search");function Pa(e){return h.a.createElement("div",{className:"c-search__back_to_filters"},h.a.createElement(ee["d"],{type:"outline",size:"small",className:"padding_left_50",onClick:e.onClick},h.a.createElement(te["b"],{type:"arrow-up-medium"}),"\xa0",Na.t("Back to Filters",{fallbackHash:"2e2575b332e9f936eb1d97f0ef2c04e7ec73cefe"})))}Pa.displayName="BackToFiltersButton";var Ma=Pa;var Da=new Z["b"]("search");var xa="IMPROVED_SEARCH";var Ra=300;var Fa=function(e){p()(t,e);function t(e){var a;n()(this,t);a=l()(this,u()(t).call(this,e));a.state={isScrolledTop:e.scrollPosition<Ra};a.scrollPosition=a.props.scrollPosition;a.wrapperRef=h.a.createRef();a.keyboardNavigableListRef=h.a.createRef();a.virtualizedContainerScrollTop=0;a.filterUIPositionTop=0;a.topScrollElementRef=h.a.createRef();a.virtualListWidth=0;a.heightCache=new Ta["a"]({heights:a.props.heightCache});a.layout=new Ia["a"]({heightCache:a.heightCache});Object(A["a"])(j()(a),["onScroll","scrollTop","onVirtualizedContainerScroll","onResize","setKeyboardNavigableListScrollTop","setHeightCache"]);a.debouncedOnVirtualizedContainerScroll=Object(Ca["a"])(a.onVirtualizedContainerScroll,150);return a}s()(t,[{key:"componentDidMount",value:function e(){!this.props.featureSearchResultsVirtualized&&this.props.scrollPosition&&(this.wrapperRef.current.scrollTop=this.props.scrollPosition);this.logTelemetry()}},{key:"componentDidUpdate",value:function e(t){t.loading===this.props.loading&&t.errorType===this.props.errorType||this.logTelemetry()}},{key:"componentWillUnmount",value:function e(){this.props.setScrollPosition(this.scrollPosition);this.props.featureSearchResultsVirtualized&&this.setHeightCache(this.layout.heightCache.heights)}},{key:"onItemKeyDown",value:function e(t){var a=t.keyCode;if(a===ha()("enter")){var r=t.currentTarget.querySelector("a,button");if(!r)return;r.click()}}},{key:"onResize",value:function e(t){var a=t.width;a!==this.virtualListWidth&&this.heightCache.invalidate();this.virtualListWidth=a}},{key:"onScroll",value:function e(){this.updateScrollPosition(this.wrapperRef.current.scrollTop)}},{key:"onVirtualizedContainerScroll",value:function e(t,a){var r=a.scrollTop;this.updateScrollPosition(r)}},{key:"getToastOffset",value:function e(){var t=window.innerWidth;var a=window.innerHeight;var r=this.wrapperRef.current?this.wrapperRef.current.getBoundingClientRect():{right:t,top:a};return{offsetX:24+t-r.right,offsetY:24+a-r.bottom}}},{key:"setHeightCache",value:function e(t){this.props.setHeightCache({heights:t})}},{key:"setKeyboardNavigableListScrollTop",value:function e(t){if(!this.keyboardNavigableListRef||!this.keyboardNavigableListRef.current||!this.keyboardNavigableListRef.current.node||!this.keyboardNavigableListRef.current.node.scroller)return;this.keyboardNavigableListRef.current.node.scroller.scrollTop=t}},{key:"logTelemetry",value:function e(){var t=this.props.module.replace(/\./g,"_");if(this.props.loading)this.props.telemeter.count("search_ui_"+t+"_view_loading");else switch(this.props.errorType){case U["g"].None:this.props.telemeter.count("search_ui_"+t+"_view");break;case U["g"].NoQuery:this.props.telemeter.count("search_ui_"+t+"_error_noquery");break;case U["g"].Timeout:this.props.telemeter.count("search_ui_"+t+"_error_timeout");break;case U["g"].RenderErrorCaught:this.props.telemeter.count("search_ui_"+t+"_error_render");break;case U["g"].Unknown:this.props.telemeter.count("search_ui_"+t+"_error_unknown");break;default:this.props.telemeter.count("search_ui_"+t+"_unknown");break}}},{key:"scrollTop",value:function e(){this.props.logInfo(xa,"Scrolling to top of results page");if(this.topScrollElementRef.current){this.updateScrollPosition(0);this.props.featureSearchResultsVirtualized?this.setKeyboardNavigableListScrollTop(0):this.wrapperRef.current.scrollTop=0}}},{key:"updateScrollPosition",value:function e(t){var a=this;this.scrollPosition=t;this.setState(function(e){var t=a.scrollPosition<Ra;if(e.isScrolledTop!==t)return{isScrolledTop:t};return null})}},{key:"render",value:function e(){var t=this;var a=this.props,r=a.errorType,n=a.loading,i=a.filterUI,s=a.id,o=a.children,l=a.emptyResultsTitle,c=a.numResults,u=a.sortDropdown,d=a.onClickRefreshSearch,p=a.alertHeader,m=a.userQuery,v=a.useFuzzyMatch;var f=!this.props.usePrimarySearch||!this.props.secondaryView;var g=this.state.isScrolledTop;if(this.props.featureSearchResultsVirtualized)return h.a.createElement("div",{className:"c-search__results--virtualized"},h.a.createElement(Ea["a"],{onResize:this.onResize},function(e){var a=e.width,r=e.height;return h.a.createElement(ja["b"],{containerClassName:"c-search__results_container--virtualized",ref:t.keyboardNavigableListRef,keys:t.props.rowKeys,layout:t.layout,rowRenderer:t.props.rowRenderer,isFocusableItem:t.props.rowFocusability,height:r,width:a,onScroll:t.debouncedOnVirtualizedContainerScroll,initialScrollTop:t.props.scrollPosition,onItemKeyDown:t.onItemKeyDown,onFocusEnter:t.props.onFocusEnter,onFocusLeave:t.props.onFocusLeave,getPropsForItem:t.props.getPropsForItem,siblingNode:f&&h.a.createElement("div",{className:"c-search__extras--virtualized",ref:t.topScrollElementRef},h.a.createElement("div",{className:"c-search__section"},h.a.createElement("h4",{className:b()("c-search__section_header","c-search__section_header--compact")},Da.t("Filter by")),i)),hideHiddenStopTabs:true})}),!g&&h.a.createElement(Ma,{onClick:this.scrollTop}));var _=!n&&r===U["g"].NoQuery;var y=!n&&!_&&r!==U["g"].None;var O=!!m;var k=!n&&!_&&!y&&!c;var E=!n&&!_&&!y&&c>0;var C=n||c>0;var S=c;var w=Object(Aa["a"])(S||0);return h.a.createElement("div",{className:"c-search__results",onScroll:this.onScroll,ref:this.wrapperRef},p,h.a.createElement("div",{className:b()("c-search__view",{"c-search__view--hide_filters":!f}),id:s,role:"tabpanel"},h.a.createElement("div",{className:"c-search__section c-search__main"},h.a.createElement("h4",{className:b()("c-search__section_header","c-search__section_header--compact")},_&&Da.t("Search for messages, files, and more",{fallbackHash:"8d886c0ba6f2b683daba5f19568a316226ce3e4c"}),y&&Da.t("Something went wrong"),k&&l,!k&&v&&Da.t("No exact matches"),C&&!v&&h.a.createElement("div",{className:"c-search__section_more_link","data-qa":"search_sort_toggle"},u)),n&&h.a.createElement(Sa["a"],{size:"large"}),_&&h.a.createElement("p",null,Da.t("To start your search, simply type into the box above.",{fallbackHash:"e0a09e2db4a36cd1de53ef2d911b8faa689b8983"})),v&&E&&h.a.createElement(h.a.Fragment,null,h.a.createElement("p",{"data-qa":"fuzzy-match-no-results"},Da.t("You may want to try using different keywords, checking for typos, or adjusting your filters.")),h.a.createElement("h4",{className:"c-search__section_header"},Da.rt("{totalItemCount, plural, =1 {{totalItemCountStr} related result} other {{totalItemCountStr} related results}}",{totalItemCount:S,totalItemCountStr:w}))),y&&h.a.createElement("p",null,Da.t("For some reason, Slack wasn\u2019t able to complete your search."),"\xa0",O&&h.a.createElement(Fe["a"],{"data-qa":"search-retry",onClick:d},Da.t("Try again"))),k&&o,E&&o),f&&h.a.createElement("div",{className:"c-search__extras",ref:this.topScrollElementRef},h.a.createElement("div",{className:"c-search__section"},h.a.createElement("h4",{className:b()("c-search__section_header","c-search__section_header--compact")},Da.t("Filter by")),i)),!g&&h.a.createElement(Ma,{onClick:this.scrollTop})))}}]);return t}(m["Component"]);Fa.displayName="SearchResultsContainerBase";Fa.defaultProps={id:void 0,children:void 0,filterUI:void 0,numResults:void 0,emptyResultsTitle:void 0,sortDropdown:void 0,alertHeader:void 0,loading:false,module:"unknown",errorType:U["g"].None,secondaryView:void 0,setScrollPosition:I["noop"],onClickRefreshSearch:I["noop"],scrollPosition:0,userQuery:void 0,logInfo:I["noop"],usePrimarySearch:false,telemeter:ye["d"],featureSearchResultsVirtualized:false,rowRenderer:I["noop"],rowKeys:[],rowFocusability:I["noop"],heightCache:{},setHeightCache:I["noop"],onFocusEnter:I["noop"],onFocusLeave:I["noop"],getPropsForItem:I["noop"],useFuzzyMatch:false};var La=function e(t){return{logInfo:Object(P["a"])({state:t}).info,usePrimarySearch:Object(y["a"])(t),userQuery:Object(Oe["getSearchInputBoxUserQuery"])(t),secondaryView:Object(wa["j"])(t),telemeter:Object(ye["c"])({state:t}),featureSearchResultsVirtualized:Object(K["isFeatureEnabled"])(t,"feature_search_results_virtualized"),heightCache:Object(_["f"])(t)}};var Ua={setHeightCache:function e(){return M["p"].apply(void 0,arguments)}};var Ba=Object(g["connect"])(La,Ua,null,{withRef:true})(Fa);var qa=a(246);var Ga=a.n(qa);var Ha=a(17);var Wa=a(595);var Va=a(93);var Ka=a(561);var za=a(3687);var Qa=new Z["b"]("search");var Ya=1e4;var Ja=3;var Xa={hiddenMessagesCount:void 0,hiddenUsers:[],currentUser:{}};var Za=function(e){p()(t,e);function t(e){var a;n()(this,t);a=l()(this,u()(t).call(this,e));Object(A["a"])(j()(a),["getBannerData","clogClick"]);a.impressionClogged=false;return a}s()(t,[{key:"getBannerData",value:function e(){var t=this.props,a=t.currentUser,r=void 0===a?{}:a,n=t.hiddenUsers,i=void 0===n?[]:n;var s=i.slice(0,Ja);var o;var l=[];var c=0;var u=false;s.forEach(function(e){e.id===r.id?o=e:l.push(e);Object(Ha["hasCustomProfilePhoto"])(e)&&(c+=1)});u=c===Ja;return{currentUserToDisplay:o,otherUsersToDisplay:l,shouldDisplayAvatars:u}}},{key:"getClogStepVariantString",value:function e(){var t=this.getBannerData(),a=t.currentUserToDisplay,r=t.shouldDisplayAvatars;var n="";switch(this.props.hiddenUsers.length){case 0:n="0_users";break;case 1:n="1_user";break;case 2:n="2_users";break;case 3:n="3_users";break;default:n="more_than_3_users"}a&&(n+="_incl_current");r&&(n+="_with_avatars");return n}},{key:"getFormattedMessagesCount",value:function e(){var t=this.props.hiddenMessagesCount;var a=t<Ya?Object(ht["a"])(t):Object(Wa["a"])(t,{precision:4,decimal_places:0,lowercase:true});return h.a.createElement("span",{"data-qa":"banner_hidden_messages_message_count"},a)}},{key:"clog",value:function e(t,a,r){this.props.clogger.track(ea["EventId"].GROWTH_PRICING,{contexts:{ui_context:{step:ea["UiStep"].SEARCH_PANE,action:t,ui_component:ea["UiComponent"].HIDDEN_MESSAGES_BANNER,ui_properties:{element_type:a,element_name:r,step_variant:this.getClogStepVariantString()}}}})}},{key:"clogClick",value:function e(){this.clog(ea["UiAction"].CLICK,ea["ElementType"].LINK,"cta")}},{key:"clogImpression",value:function e(){if(this.impressionClogged)return;this.clog(ea["UiAction"].IMPRESSION,ea["ElementType"].BANNER,"banner");this.impressionClogged=true}},{key:"renderAvatars",value:function e(t){var a=t.currentUserToDisplay,r=t.otherUsersToDisplay;var n=a?[].concat(Ct()(r),[a]):r;var i=n.map(function(e){var t=e.id;return h.a.createElement(Ce["b"],{key:t,userId:t,ariaHidden:"true",size:36,isInteractive:false,tabIndex:"-1",className:"p-hidden_messages_banner__avatar","data-qa":"banner_hidden_messages_avatar"})});return h.a.createElement("div",{className:"p-hidden_messages_banner__avatars","data-qa":"banner_hidden_messages_avatars"},i)}},{key:"renderBannerMessage",value:function e(t){var a=this;var r=t.currentUserToDisplay,n=t.otherUsersToDisplay;var i=this.props,s=i.hiddenMessagesCount,o=i.hiddenUsers;var l=n.map(function(e){var t=e.id;return h.a.createElement(Ka["a"],{key:t,id:t,noLinking:true})}),c=Ga()(l,3),u=c[0],d=c[1],p=c[2];var m=function e(t){var r=t.tag,n=t.text;if("a"!==r)return null;var i=Object(ta["j"])({entryPoint:"hidden_messages_banner"});return h.a.createElement(Fe["a"],{href:i,onClick:a.clogClick,"data-qa":"banner_hidden_messages_upgrade_cta"},n)};var v;switch(o.length){case 0:v=Qa.rt("<a>Upgrade to a paid plan</a> to see <strong>{formattedHiddenMessagesCount} additional {hiddenMessagesCount, plural, =1 {message} other {messages}}</strong> that {hiddenMessagesCount, plural, =1 {matches} other {match}} your search.",{hiddenMessagesCount:s,formattedHiddenMessagesCount:this.getFormattedMessagesCount(),fallbackHash:"49cf70bf4860e256ac4ad7c39249c1d905e1278b"},m);break;case 1:v=r?Qa.rt("<a>Upgrade to a paid plan</a> to see <strong>{formattedHiddenMessagesCount} additional {hiddenMessagesCount, plural, =1 {message} other {messages}}</strong> that {hiddenMessagesCount, plural, =1 {matches} other {match}} your search.",{hiddenMessagesCount:s,formattedHiddenMessagesCount:this.getFormattedMessagesCount(),fallbackHash:"49cf70bf4860e256ac4ad7c39249c1d905e1278b"},m):Qa.rt("<a>Upgrade to a paid plan</a> to see <strong>{formattedHiddenMessagesCount} additional {hiddenMessagesCount, plural, =1 {message} other {messages}}</strong> from {user1Handle} that {hiddenMessagesCount, plural, =1 {matches} other {match}} your search.",{hiddenMessagesCount:s,formattedHiddenMessagesCount:this.getFormattedMessagesCount(),user1Handle:u,fallbackHash:"e0e00b306fcf1dc9be2f8968aba4c663a998fdd2"},m);break;case 2:v=r?Qa.rt("<a>Upgrade to a paid plan</a> to see <strong>{formattedHiddenMessagesCount} additional {hiddenMessagesCount, plural, =1 {message} other {messages}}</strong> that {hiddenMessagesCount, plural, =1 {matches} other {match}} your search, from {user1Handle} and yourself.",{hiddenMessagesCount:s,formattedHiddenMessagesCount:this.getFormattedMessagesCount(),user1Handle:u,fallbackHash:"db9c908e896007c4ca03a95d22a348bfdc3606b3"},m):Qa.rt("<a>Upgrade to a paid plan</a> to see <strong>{formattedHiddenMessagesCount} additional {hiddenMessagesCount, plural, =1 {message} other {messages}}</strong> that {hiddenMessagesCount, plural, =1 {matches} other {match}} your search, from {user1Handle} and {user2Handle}.",{hiddenMessagesCount:s,formattedHiddenMessagesCount:this.getFormattedMessagesCount(),user1Handle:u,user2Handle:d,fallbackHash:"f75fc3a0de5cbbd8192386c8f8dbad5c6aefc555"},m);break;case 3:v=r?Qa.rt("<a>Upgrade to a paid plan</a> to see <strong>{formattedHiddenMessagesCount} additional {hiddenMessagesCount, plural, =1 {message} other {messages}}</strong> that {hiddenMessagesCount, plural, =1 {matches} other {match}} your search, from {user1Handle}, {user2Handle}, and yourself.",{hiddenMessagesCount:s,formattedHiddenMessagesCount:this.getFormattedMessagesCount(),user1Handle:u,user2Handle:d,fallbackHash:"027a3831dd2785910794440ff4a2fdf825866666"},m):Qa.rt("<a>Upgrade to a paid plan</a> to see <strong>{formattedHiddenMessagesCount} additional {hiddenMessagesCount, plural, =1 {message} other {messages}}</strong> that {hiddenMessagesCount, plural, =1 {matches} other {match}} your search, from {user1Handle}, {user2Handle}, and {user3Handle}.",{hiddenMessagesCount:s,formattedHiddenMessagesCount:this.getFormattedMessagesCount(),user1Handle:u,user2Handle:d,user3Handle:p,fallbackHash:"0834aed47d2f532db9ac4251f198eb17d1e60de4"},m);break;default:v=r?Qa.rt("<a>Upgrade to a paid plan</a> to see <strong>{formattedHiddenMessagesCount} additional {hiddenMessagesCount, plural, =1 {message} other {messages}}</strong> that {hiddenMessagesCount, plural, =1 {matches} other {match}} your search, from {user1Handle}, {user2Handle}, yourself, and other teammates.",{hiddenMessagesCount:s,formattedHiddenMessagesCount:this.getFormattedMessagesCount(),user1Handle:u,user2Handle:d,fallbackHash:"1b18372df292c706b9c8e6b0344379fc91fb2cb4"},m):Qa.rt("<a>Upgrade to a paid plan</a> to see <strong>{formattedHiddenMessagesCount} additional {hiddenMessagesCount, plural, =1 {message} other {messages}}</strong> that {hiddenMessagesCount, plural, =1 {matches} other {match}} your search, from {user1Handle}, {user2Handle}, {user3Handle}, and other teammates.",{hiddenMessagesCount:s,formattedHiddenMessagesCount:this.getFormattedMessagesCount(),user1Handle:u,user2Handle:d,user3Handle:p,fallbackHash:"fe9326538241a04ce8b934d622e15e3cee334dc2"},m)}return h.a.createElement("div",{className:"p-hidden_messages_banner__text","data-qa":"banner_hidden_messages_text"},v)}},{key:"render",value:function e(){if(!(this.props.hiddenMessagesCount>0))return null;var t=this.getBannerData();this.clogImpression();return h.a.createElement(Va["a"],{type:"custom",level:"warning",className:"p-hidden_messages_banner","data-qa":"banner_hidden_messages"},h.a.createElement("div",{className:"p-hidden_messages_banner__content"},t.shouldDisplayAvatars&&this.renderAvatars(t),this.renderBannerMessage(t)))}}]);return t}(m["PureComponent"]);Za.displayName="HiddenMessagesBanner";Za.defaultProps=Xa;var $a=function e(t){var a=Object(W["getHiddenMessages"])(t)||{from:[]};var r=[];a.from.forEach(function(e){r.push(Object(yt["e"])(t,e.id))});return{currentUser:Object(yt["b"])(t),hiddenUsers:r,hiddenMessagesCount:a.count,clogger:Object(aa["a"])({state:t})}};var er=Object(g["connect"])($a)(Za);var tr=a(1587);var ar=a(145);var rr=a(54);var nr=a(99);var ir=a(1136);var sr=a(2389);var or=a(2760);var lr=a(63);var cr=a(3689);function ur(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function dr(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ur(Object(a),true).forEach(function(t){De()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ur(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var pr=new Z["b"]("search");var mr="IMPROVED_SEARCH";var hr={joinState:"",leaveState:"",justification:null,onClickLeave:I["noop"],onClickJoin:I["noop"],onClickChannel:I["noop"],canJoinChannel:true,canLeaveChannel:true,canLeaveChannelReason:"",channelPreviousName:null,useChannelEntity:false,iid:"unknown",logger:{error:I["noop"]},telemeter:{count:I["noop"]}};var vr=function(e){p()(t,e);s()(t,null,[{key:"getDerivedStateFromError",value:function e(){return{didCatch:true}}}]);function t(e){var a;n()(this,t);a=l()(this,u()(t).call(this,e));Object(A["a"])(j()(a),["onFocus","onBlur","onClickJoin","onClickLeave","onActionButtonFocus","onActionButtonBlur","onActionsMouseEnter","onActionsMouseLeave","onInteractionButtonClick","onInteractionButtonFocus","onInteractionButtonBlur"]);a.state={didCatch:false,hasFocus:false,hasActionFocus:false,hasActionHover:false};a.interactionTooltipRef=h.a.createRef();a.rootRef=h.a.createRef();a.hasRenderedNonexistentChannel=false;return a}s()(t,[{key:"componentDidCatch",value:function e(t,a){this.props.telemeter.count("search_ui_channels_result_channel_render_error");this.props.logger.error(mr,"Error caught by ChannelSearchResult "+a.componentStack,t)}},{key:"onActionButtonBlur",value:function e(){this.setState(function(){return{hasActionFocus:false}})}},{key:"onActionButtonFocus",value:function e(t){this.setState(function(){return{hasActionFocus:true}});t.target.parentNode.scrollTop=0}},{key:"onActionsMouseEnter",value:function e(){this.setState(function(){return{hasActionHover:true}})}},{key:"onActionsMouseLeave",value:function e(){this.setState(function(){return{hasActionHover:false}})}},{key:"onBlur",value:function e(){this.setState(function(){return{hasFocus:false}})}},{key:"onClickJoin",value:function e(t){var a=this;this.props.onClickJoin(t).then(function(){a.updateFocusState()})}},{key:"onClickLeave",value:function e(t){var a=this;this.props.onClickLeave(t).then(function(){a.updateFocusState()})}},{key:"onFocus",value:function e(){this.setState(function(){return{hasFocus:true}})}},{key:"onInteractionButtonBlur",value:function e(){this.interactionTooltipRef.current&&this.interactionTooltipRef.current.hideTip()}},{key:"onInteractionButtonClick",value:function e(t){t.preventDefault();t.stopPropagation()}},{key:"onInteractionButtonFocus",value:function e(){this.interactionTooltipRef.current&&this.interactionTooltipRef.current.showTip()}},{key:"trackNonExistentChannelRender",value:function e(){if(this.hasRenderedNonexistentChannel)return;this.hasRenderedNonexistentChannel=true;this.props.telemeter.count("search_channels_nonexistent_channel_rendered",1);this.props.logger.error("Channel search displayed nonexistent channel",{channelId:this.props.channel.id,iid:this.props.iid},{subtype:"search_channels"})}},{key:"updateFocusState",value:function e(){var t=this;this.rootRef&&this.rootRef.current&&this.setState(function(){return{hasFocus:t.rootRef.current.contains(document.activeElement)}})}},{key:"renderError",value:function e(){var t=this.props.onClickChannel;return h.a.createElement("div",{className:"c-channel_search_result","data-qa":"channel_search_result"},h.a.createElement("div",{role:"presentation",onClick:t},h.a.createElement("div",{className:"c-channel_search_result__channel"},h.a.createElement("div",{className:"c-channel_search_result__name_error"},h.a.createElement(ir["a"],{type:"unknown"})),h.a.createElement("div",null,pr.t("For some reason, Slack wasn\u2019t able to fetch info about this channel.")))))}},{key:"render",value:function e(){if(this.state.didCatch)return this.renderError();var t=this.props,a=t.channel,r=t.channelTeamName,n=t.channelPreviousName,i=t.memberCount,s=t.joinState,o=t.leaveState,l=t.justification,c=t.onClickChannel,u=t.useChannelEntity;var d=pr.t("Required");var p=pr.t("Archived");var m=pr.t("Can\u2019t leave");var v=pr.t("Another workspace");var f=pr.t("Can\u2019t leave");var g=pr.t("Your organization requires everyone to be in this channel.");var _=pr.t("You can\u2019t join an archived channel, but you can view and search its contents.");var y=pr.t("To join this channel, you\u2019ll need to switch to the {channelTeamName} workspace.",{channelTeamName:r});var O=pr.t("To leave this channel, you\u2019ll need to switch to the {channelTeamName} workspace.",{channelTeamName:r});var k=pr.t("For some reason, you can\u2019t currently change your membership for {channelName}.",{channelName:this.props.channelName});var E=pr.t("As a guest, you can\u2019t leave the channel you were invited to.");var C=pr.t("As a guest, you need to be in at least one channel.");var S=Object(pe["isMemberOfChannel"])(a);var w="loading"===s;var j="loading"===o;var I=S&&this.props.canLeaveChannel;var T=null;var A=null;if(S&&!I){switch(this.props.canLeaveChannelReason){case lr["b"].LAST_MEMBER:break;case lr["b"].USER_IS_RESTRICTED:T=m;A=E;break;case lr["b"].USER_IS_RESTRICTED_LAST_CHANNEL:case lr["b"].USER_IS_ULTRA_RESTRICTED:T=m;A=C;break;case lr["b"].CANT_LEAVE_GENERAL:case lr["b"].CANT_LEAVE_MANDATORY_SHARED_CHANNEL:T=d;A=g;break;case lr["b"].USER_NOT_FOUND:case lr["b"].CHANNEL_NOT_FOUND:default:T=f;A=k}if(Object(pe["isFromAnotherTeam"])(a)){T=v;A=O}}else if(Object(pe["isArchived"])(a)){T=p;A=_}else if(Object(pe["isFromAnotherTeam"])(a))if(S){T=v;A=O}else{T=v;A=y}else if(!S&&!this.props.canJoinChannel){T=f;A=k}var N=!Object(pe["isUnknownOrNonExistent"])(a)&&T&&A;var P=!Object(pe["isUnknownOrNonExistent"])(a)&&!(T&&A);var M=Object(pe["isNonExistent"])(a);if(M){this.trackNonExistentChannelRender();return this.renderError()}return h.a.createElement("div",{className:b()("c-channel_search_result",{"c-channel_search_result--focused":this.state.hasFocus,"c-channel_search_result--show_suffix":!(this.state.hasActionFocus||this.state.hasActionHover),"c-channel_search_result--can_leave":I}),ref:this.rootRef,onFocus:this.onFocus,onBlur:this.onBlur,"data-qa":"channel_search_result"},h.a.createElement("div",{role:"presentation",onClick:c},!M&&(u?h.a.createElement(sr["a"],{className:"c-channel_search_result__channel",channel:a,bestFormerName:n,onClick:c,inlineNameSuffix:pr.t("View channel"),nameSuffix:N&&h.a.createElement("div",{className:"c-channel_search_result__inaction_label","data-qa":"channel_search_result_inaction_label"},h.a.createElement(rr["c"],{tip:A,ref:this.interactionTooltipRef},h.a.createElement(ee["c"],{"aria-disabled":"true",className:"c-channel_search_result__inaction_label_button",onClick:this.onInteractionButtonClick,onFocus:this.onInteractionButtonFocus,onBlur:this.onInteractionButtonBlur},T," ",h.a.createElement(te["b"],{type:"info-circle",size:"inherit"})))),showUnreadBadge:true,metadata:h.a.createElement("div",{className:"c-channel_search_result__metadata","data-qa":"channel_search_result_metadata"},pr.t("{count, plural, =1 {# member} other {# members}}",{count:i}),l&&h.a.createElement(h.a.Fragment,null,h.a.createElement("span",{className:"c-channel_search_result__vline"}),h.a.createElement(te["b"],{type:"sparkles-filled",size:"inherit",className:"c-channel_search_result__justification_icon"})," ",h.a.createElement(ar["a"],{className:"c-channel_search_result__justification",text:l,emojiSize:nr["a"].MEDIUM,showTooltips:false,noHighlights:true})))}):h.a.createElement(or["a"],{size:"medium",className:"c-channel_search_result__channel",channel:a,bestFormerName:n,onClick:c,inlineNameSuffix:pr.t("View channel"),nameSuffix:N&&h.a.createElement("div",{className:"c-channel_search_result__inaction_label","data-qa":"channel_search_result_inaction_label"},h.a.createElement(rr["c"],{tip:A,ref:this.interactionTooltipRef},h.a.createElement(ee["c"],{"aria-disabled":"true",className:"c-channel_search_result__inaction_label_button",onClick:this.onInteractionButtonClick,onFocus:this.onInteractionButtonFocus,onBlur:this.onInteractionButtonBlur},T," ",h.a.createElement(te["b"],{type:"info-circle",size:"inherit"})))),showUnreadBadge:true,metadata:h.a.createElement("div",{className:"c-channel_search_result__metadata","data-qa":"channel_search_result_metadata"},pr.t("{count, plural, =1 {# member} other {# members}}",{count:i}),l&&h.a.createElement(h.a.Fragment,null,h.a.createElement("span",{className:"c-channel_search_result__vline"}),h.a.createElement(te["b"],{type:"sparkles-filled",size:"inherit",className:"c-channel_search_result__justification_icon"})," ",h.a.createElement(ar["a"],{className:"c-channel_search_result__justification",text:l,emojiSize:nr["a"].MEDIUM,showTooltips:false,noHighlights:true})))}))),P&&h.a.createElement("div",{className:"c-channel_search_result__actions","data-qa":"channel_search_result_actions",onMouseEnter:this.onActionsMouseEnter,onMouseLeave:this.onActionsMouseLeave},h.a.createElement(ee["b"],{type:"danger",className:"c-channel_search_result__action_leave","data-qa":"leave-channel",loading:j,onClick:this.onClickLeave,onFocus:this.onActionButtonFocus,onBlur:this.onActionButtonBlur},j?pr.t("Leaving..."):pr.t("Leave")),h.a.createElement("div",{className:b()("c-button","c-button--medium","c-button--primary","c-channel_search_result__joined_indicator")},pr.t("Joined")),h.a.createElement(ee["b"],{type:"outline-primary",className:"c-channel_search_result__action_join","data-qa":"join-channel",loading:w,onClick:this.onClickJoin,onFocus:this.onActionButtonFocus,onBlur:this.onActionButtonBlur},w?pr.t("Joining..."):pr.t("Join")),h.a.createElement("div",{className:"c-button c-button--medium c-button--primary c-channel_search_result__width_placeholder"},pr.t("Joined")),h.a.createElement("div",{className:"c-button c-button--medium c-button--outline-primary c-channel_search_result__width_placeholder"},pr.t("Join")),h.a.createElement("div",{className:"c-button c-button--medium c-button--danger c-channel_search_result__width_placeholder"},pr.t("Leave")),h.a.createElement(ee["b"],{type:"danger",className:"c-channel_search_result__width_placeholder",loading:true,role:"presentation"},pr.t("Leaving...")),h.a.createElement(ee["b"],{type:"outline-primary",className:"c-channel_search_result__width_placeholder",loading:true,role:"presentation"},pr.t("Joining..."))))}}]);return t}(h.a.Component);vr.displayName="ChannelSearchResult";vr.defaultProps=hr;var fr=function e(t,a){var r=a.channel,n=a.channelData;var i=dr({},r,{name:n.name,purpose:n.purpose});var s=Object(lr["l"])(t,n.id);var o=Object(H["d"])(t);return{useChannelEntity:"channel_search_new_entity"===Object(V["getGroupForUser"])(t,"channel_search_new_entity"),channel:Object(pe["isUnknownOrNonExistent"])(r)?r:i,channelName:Object(pe["getDisplayNameForChannel"])(t,r),channelPreviousName:n.previous_name,channelTeamName:Object(X["getTeamDisplayName"])(Object(pe["isFromAnotherTeam"])(r)?Object(H["k"])(t,Object(pe["teamIdForChannelFromAnotherTeam"])(t,r)):o),isMember:Object(pe["isFromAnotherTeam"])(r)?Object(pe["isMemberOfChannel"])(r):n.is_member,memberCount:n.member_count,justification:n.justification,joinState:Object(_["a"])(t,n.id),leaveState:Object(_["b"])(t,n.id),canJoinChannel:Object(lr["f"])(t,n.id),canLeaveChannel:s.ok,canLeaveChannelReason:s.reason,logger:Object(P["a"])({state:t}),telemeter:Object(ye["c"])({state:t})}};var br=Object(g["connect"])(fr)(vr);var gr=a(346);var _r=a(486);var yr=a(1400);var Or=a(1653);var kr=a(492);var Er=a(418);var Cr=a(483);var Sr=a(55);var wr=a(1070);var jr=a(1188);var Ir=Object(x["b"])("People search result top terms clicked",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.member;var n=t();var i=Object(Oe["getSearchInputBoxDisplayQuery"])(n);var s=Object(wr["b"])(n,r);var o=i+" "+s;return e(Object(jr["a"])({textyString:o,queryIsUserGenerated:false})).then(function(){e(Object(M["L"])({tab:"messages"}));return e(Object(W["setEditableRequestQueryThenRequest"])({query:o}))})});Ir.meta={name:"peopleSearchRefineTopTerms",key:"actionsUniversalSearchPeopleSearchTopTermsPeopleSearchRefineTopTerms",description:"People search result top terms clicked"};Ir.propTypes={member:v["default"].object.isRequired};var Tr=a(1927);var Ar=a(3695);var Nr=new Z["b"]("member_profile");var Pr="IMPROVED_SEARCH";var Mr={iid:"",teamId:"",displayQuery:"",onClickMember:I["noop"],clogSearchPeopleClick:I["noop"],startImByMemberId:I["noop"],closeSearch:I["noop"],onClickTopTerms:I["noop"],showMemberProfile:I["noop"],onNavigateError:I["noop"],onViewProfileError:I["noop"],logger:{error:I["noop"]},telemeter:ye["d"]};var Dr=function e(t){return h.a.createElement(ar["a"],{emojiSize:nr["a"].SMALL,text:t,noJumbomoji:true,noLinking:true,noSpecials:true,noEmojiText:true,noHexColors:true,noCode:true,noQuotes:true,noHighlights:true})};Dr.displayName="renderSearchHighlightText";var xr=function(e){p()(t,e);s()(t,null,[{key:"getDerivedStateFromError",value:function e(){return{didCatch:true}}}]);function t(e){var a;n()(this,t);a=l()(this,u()(t).call(this,e));Object(A["a"])(j()(a),["onClickMemberName","onClickMember","onFocusResult","onBlurResult","onFocusPerson","onBlurPerson","onClickShowMore","onClickNavigate","onClickViewProfile","onInfoTooltipClick","onInfoTooltipFocus","onInfoTooltipBlur","onClickTopTerms"]);a.infoTooltipRef=h.a.createRef();a.state={didCatch:false,resultHasFocus:false,personHasFocus:false,isExpanded:false};return a}s()(t,[{key:"shouldComponentUpdate",value:function e(t,a){return!Object(I["isEqual"])(this.props,t)||!Object(I["isEqual"])(this.state,a)}},{key:"componentDidCatch",value:function e(t,a){this.props.telemeter.count("search_ui_people_result_people_render_error");this.props.logger.error(Pr,"Error caught by PeopleSearchResult "+a.componentStack,t)}},{key:"onBlurPerson",value:function e(){this.setState(function(){return{personHasFocus:false}})}},{key:"onBlurResult",value:function e(){this.setState(function(){return{resultHasFocus:false}})}},{key:"onClickMember",value:function e(t){t.isDefaultPrevented()||this.props.onClickMember(t)}},{key:"onClickMemberName",value:function e(t){t.preventDefault();t.stopPropagation();this.props.clogSearchPeopleClick({type:R["c"].avatar,iid:this.props.iid,userId:this.props.member.id})}},{key:"onClickNavigate",value:function e(t){var a=this;t.preventDefault();t.stopPropagation();this.props.clogSearchPeopleClick({type:R["c"].navigateToMessages,iid:this.props.iid,userId:this.props.member.id});this.props.startImByMemberId({memberId:this.props.member.id}).then(function(){a.props.closeSearch()}).catch(function(e){a.props.onNavigateError(function(){return a.onClickNavigate(t)});throw e})}},{key:"onClickShowMore",value:function e(t){t.preventDefault();t.stopPropagation();this.props.clogSearchPeopleClick({type:R["c"].showMore,iid:this.props.iid,userId:this.props.member.id});this.setState(function(){return{isExpanded:true}})}},{key:"onClickTopTerms",value:function e(t){t.preventDefault();t.stopPropagation();this.props.clogSearchPeopleClick({type:R["c"].topTerms,iid:this.props.iid,userId:this.props.member.id});this.props.onClickTopTerms({member:this.props.member})}},{key:"onClickViewProfile",value:function e(t){var a=this;t.preventDefault();t.stopPropagation();this.props.clogSearchPeopleClick({type:R["c"].viewProfile,iid:this.props.iid,userId:this.props.member.id});this.props.showMemberProfile({memberId:this.props.member.id}).then(function(){a.props.closeSearch()}).catch(function(e){a.props.onViewProfileError(function(){return a.onClickViewProfile(t)});throw e})}},{key:"onFocusPerson",value:function e(){this.setState(function(){return{personHasFocus:true}})}},{key:"onFocusResult",value:function e(){this.setState(function(){return{resultHasFocus:true}})}},{key:"onInfoTooltipBlur",value:function e(){this.infoTooltipRef.current&&this.infoTooltipRef.current.hideTip()}},{key:"onInfoTooltipClick",value:function e(t){t.preventDefault();t.stopPropagation()}},{key:"onInfoTooltipFocus",value:function e(){this.infoTooltipRef.current&&this.infoTooltipRef.current.showTip()}},{key:"getRenderingData",value:function e(){var t=this.props,a=t.member,r=t.memberWithHighlights,n=t.teamCustomProfileFields,i=t.customProfileFieldMemberNamesById;var s=Object(Ha["isInvitedUser"])(a);var o=!!r.top_terms;var l=Object(Ha["getMemberRealName"])(r);var c=Object(Ha["getMemberProfileFieldDisplayName"])(r);var u=Object(Ha["getMemberTitle"])(r);var d=Object(Ha["getMemberPhone"])(r);var p=Object(Ha["getMemberEmail"])(r);var m=Object(Ha["getMemberProfileFields"])(r);var v=Object(Ha["getMemberProfile"])(r);var f=v&&v.status_emoji;var b=v&&v.status_text;if(s)return{rows:[],realName:l,memberTitle:u};var g=[];c&&l!==c&&Object(Tr["a"])(c)&&g.push({className:null,key:"displayname",term:Nr.t("Display name",{ns:"member_profile"}),valueAsText:c,node:Dr(c)});p&&Object(Tr["a"])(p)&&g.push({className:null,key:"email",term:Nr.t("Email address",{ns:"member_profile"}),valueAsText:p,node:Dr(p)});d&&Object(Tr["a"])(d)&&g.push({className:null,key:"phone",term:Nr.t("Phone number",{ns:"member_profile"}),valueAsText:d,node:Dr(d)});if(f&&Object(Tr["a"])(f)||b&&Object(Tr["a"])(b)){var _=[];f&&_.push(f);b&&_.push(b);var y=_.join(" ");g.push({className:null,key:"status",term:Nr.t("Status",{ns:"member_profile"}),valueAsText:y,node:Dr(y)})}n.forEach(function(e){var t=e.name;if(m&&m[t]&&m[t].value&&Object(Tr["a"])(m[t].value))if("user"===e.type){var a=m[t].value.split(",");var r=Object(Cr["a"])(a.map(function(e){var t=Object(Tr["a"])(e);var a=e.replace(Object(Tr["b"])(),"");var r=t?"\ue000"+i[a]+"\ue001":i[a];return r}),{noConj:true}).join("");g.push({className:null,key:t,term:e.label,valueAsText:r,node:Dr(r)})}else"link"!==e.type&&g.push({className:null,key:t,term:e.label,valueAsText:m[t].value,node:Dr(m[t].value)})});o&&g.push({className:"p-people_search_result__row--top_terms",key:"top_terms",term:null,valueAsText:"top_terms",node:h.a.createElement("span",{className:"p-people_search_result__top_terms"},h.a.createElement(te["b"],{className:"p-people_search_result__top_terms_sparkles",type:"sparkles_filled",inline:true,size:"inherit"}),h.a.createElement(_r["a"],{className:"p-people_search_result__top_terms_link","data-qa":"people_search_result__top_terms_link",onClick:this.onClickTopTerms},Nr.rt("Talks about \u201c{query}\u201d",{query:h.a.createElement(ar["a"],{className:"p-people_search_result__top_terms_term",emojiSize:nr["a"].SMALL,text:this.props.displayQuery,noJumbomoji:true,noLinking:true,noSpecials:true,noHexColors:true,noCode:true,noQuotes:true,noHighlights:true})})),h.a.createElement(rr["c"],{tip:Nr.t("Based on public channels and conversations with you"),ref:this.infoTooltipRef},h.a.createElement(Ue["a"],{"aria-disabled":"true",className:"p-people_search_result__top_terms_info",onClick:this.onInfoTooltipClick,onFocus:this.onInfoTooltipFocus,onBlur:this.onInfoTooltipBlur},h.a.createElement(te["b"],{type:"info-circle",inline:true,size:"inherit"}))))});g=Object(I["uniqWith"])(g,function(e,t){return e.term===t.term&&e.valueAsText===t.valueAsText});return{rows:g,realName:l,memberTitle:u}}},{key:"render",value:function e(){var t=this.props,a=t.member,r=t.teamId;var n=Object(Ha["isAppOrBot"])(a);var i=Object(Ha["isDeleted"])(a);var s=Object(Ha["isSuspended"])(a);var o=Object(Ha["isExternal"])(a);var l=Object(Ha["isSelf"])(a);var c=Object(Sr["c"])(a);var u=Object(Sr["d"])(a);var d=Object(Ha["isInvitedUser"])(a);if(this.state.didCatch||c)return h.a.createElement("div",{className:"p-people_search_result p-people_search_result--non_existent"},h.a.createElement("div",{className:"p-people_search_result__person"},h.a.createElement("div",{className:"p-people_search_result__avatar_placeholder"}),h.a.createElement("div",{className:"p-people_search_result__body"},Nr.t("For some reason, Slack wasn\u2019t able to display this result."))));if(u)return h.a.createElement("div",{className:"p-people_search_result p-people_search_result--unknown"},h.a.createElement("div",{className:"p-people_search_result__person"},h.a.createElement("div",{className:"p-people_search_result__avatar_placeholder"}),h.a.createElement("div",{className:"p-people_search_result__body"},h.a.createElement("div",{className:"p-people_search_result__row"},h.a.createElement(gr["b"],{size:"random"})),h.a.createElement("div",{className:"p-people_search_result__row"},h.a.createElement(gr["b"],{size:"random"})))));var p;p=i||s?Nr.t("View History"):Nr.t("Message");var m=this.getRenderingData(),v=m.rows,f=m.realName,g=m.memberTitle;var _=!!g||d;var y=v.length>0;var O=_?v.length>1:v.length>2;var k=this.state.isExpanded?v.length:3;var E=!this.state.isExpanded&&v.length>k;return h.a.createElement("div",{className:b()("p-people_search_result",{"p-people_search_result--has-focus":this.state.resultHasFocus}),onFocus:this.onFocusResult,onBlur:this.onBlurResult},h.a.createElement("div",{role:"presentation",onClick:this.onClickMember,"data-qa":"people_search_result"},h.a.createElement("div",{className:b()("p-people_search_result__person",{"p-people_search_result__person--has-focus":this.state.personHasFocus,"p-people_search_result__person--deactivated":i}),onFocus:this.onFocusPerson,onBlur:this.onBlurPerson},h.a.createElement(Ce["b"],{className:"p-people_search_result__avatar",size:70,user:a,userId:a.id,isExternal:o,teamId:r,isInteractive:true,showCard:true,showTooltip:true,showBadge:false,ariaHidden:"true",tabIndex:"-1"}),h.a.createElement("div",{className:b()("p-people_search_result__body",{"p-people_search_result__body--many_rows":O,"p-people_search_result__body--no_title":!_})},h.a.createElement("div",{className:"p-people_search_result__name","data-qa":"people_search_result__name"},h.a.createElement(kr["a"],{userId:a.id,onClick:this.onClickMemberName},h.a.createElement(Ue["a"],{className:"p-people_search_result__name_button","data-qa":"people_search_result__name_button"},h.a.createElement(yr["a"],{"data-qa":"name",name:Dr(f),isAppOrBot:n,isDeleted:i,isSelf:l,isNonExistent:c,isUnknown:u}))),!i&&h.a.createElement(Er["a"],{memberId:a.id,"data-qa":"people_search_result__presence",className:"c-member__presence"})),_&&h.a.createElement("div",{className:"p-people_search_result__title","data-qa":"people_search_result__title"},d?Nr.t("Invited member",{fallbackHash:"c4649618a3f5b67c775775107529f167c8d739e5",fallbackHashNs:"members"}):Dr(g)),y&&h.a.createElement("div",{className:"p-people_search_result__rows","data-qa":"people_search_result__rows"},v.slice(0,k).map(function(e){return h.a.createElement("div",{key:e.key,className:b()("p-people_search_result__row",e.className),"data-qa":"people_search_result__row"},e.term&&h.a.createElement("b",{"data-qa":"people_search_result__term",className:"p-people_search_result__term"},e.term,":"," "),h.a.createElement("span",{"data-qa":"people_search_result__definition",className:"p-people_search_result__definition"},e.node))})),E&&!this.state.isExpanded&&h.a.createElement(_r["a"],{className:"p-people_search_result__show_more","data-qa":"people_search_result__show_more",onClick:this.onClickShowMore,"aria-expanded":"false"},Nr.t("Show more\u2026"))))),h.a.createElement("div",{className:"p-people_search_result__actions"},h.a.createElement(ee["d"],{className:"p-people_search_result__action_button",type:"outline",size:"medium",onClick:this.onClickNavigate,"data-qa":"people_search_result__message-button"},p),h.a.createElement(ee["d"],{className:"p-people_search_result__action_button",type:"outline",size:"medium",onClick:this.onClickViewProfile,"data-qa":"people_search_result__profile-button"},Nr.t("View Profile"))))}}]);return t}(h.a.Component);xr.displayName="PeopleSearchResult";xr.defaultProps=Mr;var Rr=function e(t,a){var r=a.member,n=a.memberWithHighlights;var i=Object(Ha["getTeamIdForMember"])(t,r);var s=Object(H["d"])(t);var o=Object(Or["a"])(s);var l=Object(Ha["getMemberProfileFields"])(n);var c={};l&&o.forEach(function(e){if("user"===e.type){var a=l&&l[e.name];a&&a.value&&a.value.split(",").forEach(function(e){var a=e.replace(/[\ue000\ue001]/g,"");var r=Object(yt["e"])(t,a);c[a]=Object(Ha["getMemberRealName"])(r)})}});return{teamId:i,teamCustomProfileFields:o,customProfileFieldMemberNamesById:c,displayQuery:Object(Oe["getSearchInputBoxDisplayQuery"])(t),logger:Object(P["a"])({state:t}),telemeter:Object(ye["c"])({state:t})}};var Fr=function e(t){return{clogSearchPeopleClick:function e(){return t(R["l"].apply(void 0,arguments))},closeSearch:function e(){return t(Q["a"].apply(void 0,arguments))},onClickTopTerms:function e(){return t(Ir.apply(void 0,arguments))}}};var Lr=Object(g["connect"])(Rr,Fr)(xr);function Ur(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function Br(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ur(Object(a),true).forEach(function(t){De()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ur(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var qr=new Z["b"]("search");var Gr="listitem";var Hr="presentation";var Wr={HEADER:"search-result-header",RELATED_RESULTS_HEADER:"search-related-results-header",LOADING:"search-loading",BLANK:"search-blank",ERROR:"search-error",ERROR_RETRY:"search-error-retry",DEBUG:"search-debug-info",HIDDEN_MESSAGES:"search-hidden-messages-banner",MESSAGE_LIMIT_MESSAGES:"search-message-limit-banner-messages",MESSAGE_LIMIT_FILES:"search-message-limit-banner-files",NO_MESSAGE_RESULTS:"search-no-message-results",NO_MESSAGE_RESULTS_FUZZY_MATCH:"search-no-message-results-fuzzy-match",NO_FILE_RESULTS:"search-no-file-results",NO_CHANNEL_RESULTS:"search-no-channel-results",NO_PEOPLE_RESULTS:"search-no-people-results",MESSAGE_RESULT:"search-message-result",PAGER:"search-pager",FEEDBACK_LINK:"search-feedback-link",FILE_RESULT:"search-file-result",CHANNEL_RESULT:"search-channel-result",PEOPLE_RESULT:"search-people-result",PEOPLE_DISCOVERY:"search-people-discovery"};var Vr=function e(t){var a=t.moduleName,r=t.messageResults,n=void 0===r?[]:r,i=t.fileResults,s=void 0===i?[]:i,o=t.peopleResults,l=void 0===o?[]:o,c=t.channelSearchResults,u=void 0===c?[]:c,d=t.channelFlannelMap,p=void 0===d?{}:d,m=t.isLoading,h=t.errorType,v=t.isDebugInfoVisible,f=t.debugInfo,b=t.bannerType,g=t.isFuzzyMatchEnabled,_=t.totalItemCount,y=t.isPagerVisible,O=t.userQuery,k=t.showPeopleDiscovery;var E=[];var C=!m&&h===U["g"].NoQuery;var S=!m&&!C&&h!==U["g"].None;var w=!!O;var j=!m&&!C&&!S;E.push({key:"search-result-header",type:Wr.HEADER,data:null,role:Hr});m&&E.push({key:"search-loading",type:Wr.LOADING,data:null,role:Hr});C&&E.push({key:"search-blank",type:Wr.BLANK,data:null,role:Hr});S&&!w&&E.push({key:"error",type:Wr.ERROR,data:null,role:Hr});S&&w&&E.push({key:"error-retry",type:Wr.ERROR_RETRY,data:null,role:Hr});if(j&&"messages"===a){v&&f&&E.push({key:"solr-debug-info",type:Wr.DEBUG,data:JSON.stringify(f,null,2),role:Hr});b===U["d"]&&E.push({key:"hidden-messages-banner",type:Wr.HIDDEN_MESSAGES,data:null,role:Hr});b===U["e"]&&E.push({key:"message-limit-banner",type:Wr.MESSAGE_LIMIT_MESSAGES,data:null,role:Hr});if(g){E.push({key:"no-results-fuzzy-match",type:Wr.NO_MESSAGE_RESULTS_FUZZY_MATCH,data:null,role:Hr});_>0&&E.push({key:"related-results-header",type:Wr.RELATED_RESULTS_HEADER,data:_,role:Hr})}E.push.apply(E,Ct()(n.map(function(e,t){return{key:"messages-result-"+e.iid,type:Wr.MESSAGE_RESULT,data:Br({},e,{index:t}),role:Gr}})));!g&&_<=0&&E.push({key:"no-results",type:Wr.NO_MESSAGE_RESULTS,data:null,role:Hr});b===U["d"]&&n.length>10&&E.push({key:"hidden-messages-banner",type:Wr.HIDDEN_MESSAGES,data:null,role:Hr})}if(j&&"files"===a){E.push({key:"message-limit-banner",type:Wr.MESSAGE_LIMIT_FILES,data:null,role:Hr});E.push.apply(E,Ct()(s.map(function(e,t){return{key:"files-result-"+e.iid,type:Wr.FILE_RESULT,data:Br({},e,{index:t}),role:Gr}})));_<=0&&E.push({key:"no-file-results",type:Wr.NO_FILE_RESULTS,data:null,role:Hr})}if(j&&"channels"===a){E.push.apply(E,Ct()(u.map(function(e,t){return{key:"channels-result-"+e.iid,type:Wr.CHANNEL_RESULT,data:{flannelData:p[e.id],searchData:e,id:e.id,index:t},role:Gr}})));_<=0&&E.push({key:"no-channel-results",type:Wr.NO_CHANNEL_RESULTS,data:null,role:Hr})}if("people"===a){k&&E.push({key:"people-search-discovery",type:Wr.PEOPLE_DISCOVERY,data:null,role:Hr});if(j){E.push.apply(E,Ct()(l.map(function(e,t){return{key:"people-result-"+e.iid,type:Wr.PEOPLE_RESULT,data:{member:e.member,highlightData:e.highlightData,id:e.member.id,index:t},role:Gr}})));_<=0&&E.push({key:"no-people-results",type:Wr.NO_PEOPLE_RESULTS,data:null,role:Hr})}}j&&(y?E.push({key:"pager",type:Wr.PAGER,data:null,role:Hr}):E.push({key:"feedback-link",type:Wr.FEEDBACK_LINK,data:_,role:Hr}));return E};var Kr=function e(t,a){var r=a.isLoading,n=a.errorType,i=a.numResults,s=a.emptyResultsTitle,o=a.jumpToMessage,l=a.jumpToFile,c=a.onRepliesClick,u=a.sortDropdown,d=a.onClickRefreshSearch,p=a.onFeedbackClick,m=a.pageForward,v=a.pageBack,f=a.totalPageCount,b=a.currentPageOffset,g=a.onFileClick,_=a.clogLinkClick,y=a.onChannelClick,O=a.onChannelJoin,k=a.onChannelLeave,E=a.displayEmailAddresses,C=a.currentDisplayQuery,w=a.featureFantailNurture,j=a.startImByMemberId,I=a.showMemberProfile,T=a.onViewProfileError,A=a.onPeopleSearchResultNavigateError,N=a.getMemberClickHandler,M=a.telemeter,D=a.logger;return function(e){var a=t[e];switch(a.type){case Wr.MESSAGE_RESULT:return h.a.createElement(mt,S()({key:a.data.iid},a.data,{onMessageJump:o,onFileJump:l,onRepliesClick:c,telemeter:M,logger:D,index:a.data.index}));case Wr.FILE_RESULT:return h.a.createElement(tr["a"],{key:a.data.id,index:a.data.index,file:a.data,onClick:g,clickLinkClick:_});case Wr.CHANNEL_RESULT:return h.a.createElement(br,{key:a.data.searchData.id,channel:a.data.flannelData,channelData:a.data.searchData,iid:a.data.searchData.iid,onClickChannel:y(a.data.searchData.iid,a.data.flannelData),onClickJoin:O(a.data.searchData.id),onClickLeave:k(a.data.searchData.id)});case Wr.PEOPLE_RESULT:return h.a.createElement(Lr,{key:a.data.member.id,iid:a.data.highlightData.iid,member:a.data.member,memberWithHighlights:a.data.highlightData,onClickMember:N(a.data.member.id),startImByMemberId:j,showMemberProfile:I,onViewProfileError:T,onNavigateError:A});case Wr.PEOPLE_DISCOVERY:return h.a.createElement("div",{className:"c-channel_search__new_feature_alert"},h.a.createElement(te["b"],{className:"c-channel_search__new_feature_icon",type:"sparkles_filled"}),h.a.createElement("div",null,qr.rt("<strong>Find people at your organization</strong>. Now you can search for people by their name, profile info, or even the topics they talk about.",{fallbackHash:"07cbc99aff3e533e8b10d9bf430890987c65f7ae"})));case Wr.HEADER:return Qr({isLoading:r,errorType:n,numResults:i,emptyResultsTitle:s,sortDropdown:u});case Wr.LOADING:return h.a.createElement(Sa["a"],{size:"large"});case Wr.BLANK:return h.a.createElement("p",null,qr.t("To start your search, simply type into the box above.",{fallbackHash:"e0a09e2db4a36cd1de53ef2d911b8faa689b8983"}));case Wr.ERROR:return h.a.createElement("p",null,qr.t("For some reason, Slack wasn\u2019t able to complete your search."));case Wr.ERROR_RETRY:return h.a.createElement("p",null,qr.t("For some reason, Slack wasn\u2019t able to complete your search."),"\xa0",h.a.createElement(Fe["a"],{"data-qa":"search-retry",onClick:d},qr.t("Try again")));case Wr.DEBUG:return h.a.createElement("div",{className:"c-search__debug"},h.a.createElement("h4",{className:"c-search__section_header"},"Solr debug info"),h.a.createElement("pre",{className:"c-search__debug_json"},a.data),h.a.createElement(ee["d"],{className:"c-search__debug_copy",size:"small",type:"outline",onClick:function e(){return Object(ae["writeText"])(a.data)}},"Copy to clipboard"));case Wr.HIDDEN_MESSAGES:return h.a.createElement(er,null);case Wr.MESSAGE_LIMIT_MESSAGES:return h.a.createElement(ua,{type:"messages"});case Wr.MESSAGE_LIMIT_FILES:return h.a.createElement(ua,{type:"files"});case Wr.NO_MESSAGE_RESULTS:return Yr(false);case Wr.NO_MESSAGE_RESULTS_FUZZY_MATCH:return Yr(true);case Wr.NO_FILE_RESULTS:return Jr();case Wr.NO_CHANNEL_RESULTS:return Xr();case Wr.NO_PEOPLE_RESULTS:return Zr({displayEmailAddresses:E,currentDisplayQuery:C,featureFantailNurture:w});case Wr.RELATED_RESULTS_HEADER:return h.a.createElement("h4",{className:"c-search__section_header--virtualized"},qr.rt("{totalItemCount, plural, =1 {{totalItemCountStr} related result} other {{totalItemCountStr} related results}}",{totalItemCount:a.data,totalItemCountStr:Object(Aa["a"])(a.data)}));case Wr.PAGER:return h.a.createElement(_t,{currentPageOffset:b,totalPageCount:f,onForward:m,onBack:v,onFeedbackClick:p});case Wr.FEEDBACK_LINK:return h.a.createElement(vt["a"],{className:a.data>0?"c-search__feedback_small":"c-search__feedback",onClick:p});default:Object(P["b"])().warn("Row type "+a.type+" is not implemented for Search virtualization",a);M.count("search_ui__result_row_render_error");return null}}};var zr=function e(t){return function(e){var a=e.index;var r=t[a];return"presentation"!==r.role}};function Qr(e){var t=e.isLoading,a=e.errorType,r=e.numResults,n=e.emptyResultsTitle,i=e.sortDropdown;var s=!t&&a===U["g"].NoQuery;var o=!t&&!s&&a!==U["g"].None;var l=!t&&!s&&!o&&!r;var c=t||r>0;return h.a.createElement("h4",{className:b()("c-search__section_header--virtualized","c-search__section_header--compact")},s&&qr.t("Search for messages, files, and more",{fallbackHash:"8d886c0ba6f2b683daba5f19568a316226ce3e4c"}),o&&qr.t("Something went wrong"),l&&n,c&&h.a.createElement("div",{className:"c-search__section_more_link","data-qa":"search_sort_toggle"},i))}Qr.displayName="renderHeader";function Yr(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(e)return h.a.createElement("p",null,qr.t("You may want to try using different keywords, checking for typos, or adjusting your filters.",{fallbackHash:"4a81ec18521572e71c7085ea0c159585442445d6"}));return h.a.createElement(h.a.Fragment,null,h.a.createElement("p",null,qr.t("Slack couldn\u2019t find any messages related to your search. You may want to try\u2026")),$r())}function Jr(){return h.a.createElement(h.a.Fragment,null,h.a.createElement("p",null,qr.t("Slack couldn\u2019t find any files related to your search. You may want to try\u2026")),$r())}function Xr(){return h.a.createElement(h.a.Fragment,null,h.a.createElement("p",null,qr.t("Slack couldn\u2019t find any channels related to your search. You may want to try\u2026")),$r())}function Zr(e){var t=e.displayEmailAddresses,a=e.currentDisplayQuery,r=e.featureFantailNurture;var n=a.replace(/<@[^>]*>/g,"").indexOf("@")>-1;return!t&&n&&r?h.a.createElement(h.a.Fragment,null,h.a.createElement("p",null,qr.t("Slack couldn\u2019t find any people related to your search.")),h.a.createElement("p",null,qr.t("Searching for people by email has been disabled in this workspace. Questions? Contact a Workspace Admin."))):h.a.createElement(h.a.Fragment,null,h.a.createElement("p",null,qr.t("Slack couldn\u2019t find any people related to your search. You may want to try\u2026")),$r())}Zr.defaultProps={displayEmailAddresses:true,currentDisplayQuery:"",featureFantailNurture:false};function $r(){return h.a.createElement("ul",null,h.a.createElement("li",null,qr.t("Using different keywords.")),h.a.createElement("li",null,qr.t("Checking for typos.")),h.a.createElement("li",null,qr.t("Adjusting your filters.")))}$r.displayName="makeNoResultsSuggestions";Qr.defaultProps={isLoading:false,errorType:void 0,numResults:void 0,emptyResultsTitle:void 0,sortDropdown:I["noop"]};var en=Vr;var tn=new Z["b"]("search");var an="IMPROVED_SEARCH";var rn="HIDDEN_MESSAGES_BANNER";var nn="MESSAGE_LIMIT_BANNER";var sn={results:{},uiState:{},logInfo:I["noop"],setTab:I["noop"],telemeter:ye["d"],logger:{},openSearchFeedbackDialog:I["noop"],bannerType:"",useFuzzyMatch:false,featureSearchResultsVirtualized:false,userQuery:"",isScreenReaderEnabled:false};var on=function(e){p()(t,e);function t(e){var a;n()(this,t);a=l()(this,u()(t).call(this,e));Object(A["a"])(j()(a),["pageForward","pageBack","jumpToMessage","jumpToFile","onSelectItem","onRepliesClick","setListRef","renderResultRow","renderSortToggleMenu","onFeedbackClick","setScrollPosition","getPropsForItem","onResultsFocusEnter","onResultsFocusLeave"]);a.state={hasKeyboardFocus:false};a.searchResultsContainerRef=h.a.createRef();a.markSearchModuleRenderStart=Object(I["throttle"])(function(){var t=a.props.results;Object(re["f"])("messages","messages",t&&t.pagination&&t.pagination.page||1,e.telemeter)},2e3,{leading:true});return a}s()(t,[{key:"componentDidMount",value:function e(){this.logTelemetry()}},{key:"componentDidUpdate",value:function e(t){t.uiState.loading===this.props.uiState.loading&&t.uiState.error===this.props.uiState.error&&t.uiState.page===this.props.uiState.page||this.logTelemetry()}},{key:"onFeedbackClick",value:function e(){this.props.openSearchFeedbackDialog({module:"messages"})}},{key:"onRepliesClick",value:function e(t){var a=this;var r=t.channelId,n=t.ts,i=t.permalink;this.props.logInfo(an,"Jumping to message replies. channel: "+r+" ts: "+n);this.props.openPermalink({permalink:i}).then(function(){return a.props.close()})}},{key:"onResultsFocusEnter",value:function e(){this.setState(function(){return{hasKeyboardFocus:true}})}},{key:"onResultsFocusLeave",value:function e(){this.setState(function(){return{hasKeyboardFocus:false}})}},{key:"onSelectItem",value:function e(t,a){var r=this.getVisibleMessages()[a];if(r&&r.messages&&r.messages.length){var n=r.messages[0];this.jumpToMessage({permalink:n.permalink,teamId:this.props.currentTeam.id})}}},{key:"getPropsForItem",value:function e(t){var a=this;return function(e){var r=e.index;var n=t[r];var i={};n.type===Wr.MESSAGE_RESULT&&(a.props.isScreenReaderEnabled||a.state.hasKeyboardFocus)&&(i["aria-label"]=a.props.getMessageResultSummary(n.data));return i}}},{key:"getVisibleMessages",value:function e(){return this.props.results.items[this.props.uiState.page]||[]}},{key:"setListRef",value:function e(t){this.listEl=t}},{key:"setScrollPosition",value:function e(t){this.props.setViewScrollPosition({view:"messages",position:t})}},{key:"jumpToFile",value:function e(t,a){var r=a.file,n=a.iid,i=a.ts,s=a.channelId,o=a.userId,l=a.botId,c=a.index;this.props.logInfo(an,"Jumping to file. file: "+r.id);this.props.clogSearchFileClick({iid:n,ts:i,channelId:s,userId:o,botId:l,fileId:r.id,position:c});this.props.previewFile({fileId:r.id});this.props.close()}},{key:"jumpToMessage",value:function e(t){var a=this;var r=t.teamId,n=t.permalink;this.props.logInfo(an,"Jumping to message. team: "+r+" permalink: "+n);this.props.openPermalink({permalink:n}).then(function(){return a.props.close()}).catch(function(){return a.props.logInfo(an,"FAILED:(")})}},{key:"logTelemetry",value:function e(){if(!this.props.uiState.loading&&this.props.uiState.error===U["g"].None){var t=this.getVisibleMessages();t&&this.props.telemeter.count("search_ui_messages_results_view_count",t.length)}}},{key:"makeNoResultsFragment",value:function e(t){if(t<=0)return h.a.createElement(h.a.Fragment,null,h.a.createElement("p",null,tn.t("Slack couldn\u2019t find any messages related to your search. You may want to try\u2026")),h.a.createElement("ul",null,h.a.createElement("li",null,tn.t("Using different keywords.")),h.a.createElement("li",null,tn.t("Checking for typos.")),h.a.createElement("li",null,tn.t("Adjusting your filters."))));return null}},{key:"pageBack",value:function e(){var t;this.listEl&&this.listEl.focus();var a=(null===(t=this.searchResultsContainerRef.current)||void 0===t?void 0:t.getWrappedInstance)?this.searchResultsContainerRef.current.getWrappedInstance():this.searchResultsContainerRef.current;(null===a||void 0===a?void 0:a.scrollTop)&&a.scrollTop();this.props.logInfo(an,"Page backwards in search results");this.props.clogSearchPreviousPage();this.pageSearchResults(-1)}},{key:"pageForward",value:function e(){var t;this.listEl&&this.listEl.focus();var a=(null===(t=this.searchResultsContainerRef.current)||void 0===t?void 0:t.getWrappedInstance)?this.searchResultsContainerRef.current.getWrappedInstance():this.searchResultsContainerRef.current;(null===a||void 0===a?void 0:a.scrollTop)&&a.scrollTop();this.props.logInfo(an,"Page forwards in search results");this.props.clogSearchNextPage();this.pageSearchResults(1)}},{key:"pageSearchResults",value:function e(t){var a=this.props,r=a.results,n=a.uiState;var i=Math.max(n.page+t,1);if(r.items[i])this.props.setPageForModule({moduleType:"messages",page:i});else{this.props.logInfo(an,"Fetching more results to display on next page");this.props.fetchSearchResultsByModule({module:"messages",reason:"search-messages-page",page:i})}}},{key:"shouldRenderBottomHiddenMessagesBanner",value:function e(){var t=this.props,a=t.bannerType,r=t.uiState;var n=this.getVisibleMessages()||[];return a===rn&&!r.loading&&n.length>10}},{key:"renderDebug",value:function e(){var t=this.props,a=t.isDebugInfoVisible,r=t.results;var n=a&&r.debug;var i=n&&JSON.stringify(r.debug,null,2);return n&&h.a.createElement("div",{className:"c-search__debug"},h.a.createElement("h4",{className:"c-search__section_header"},"Solr debug info"),h.a.createElement("pre",{className:"c-search__debug_json"},i),h.a.createElement(ee["d"],{className:"c-search__debug_copy",size:"small",type:"outline",onClick:function e(){return Object(ae["writeText"])(i)}},"Copy to clipboard"))}},{key:"renderHiddenMessagesBanner",value:function e(){var t=this.props.uiState;if(t.loading)return null;return h.a.createElement(er,null)}},{key:"renderMessageLimitBanner",value:function e(){var t=this.props.uiState;if(t.loading)return null;return h.a.createElement(ua,{type:"messages"})}},{key:"renderResultRow",value:function e(t){var a=this;return function(e){return h.a.createElement(mt,S()({key:t[e].iid,index:e},t[e],{onMessageJump:a.jumpToMessage,onFileJump:a.jumpToFile,onRepliesClick:a.onRepliesClick,logger:a.props.logger,telemeter:a.props.telemeter}))}}},{key:"renderResults",value:function e(){var t=this;var a=this.props.uiState;var r=[];var n=[];if(!a.loading){r=this.getVisibleMessages();n=Object(I["map"])(r,function(e,t){return t})||[]}return h.a.createElement(ka,{ref:this.setListRef,ids:n,onSelectItem:this.onSelectItem,itemAriaLabel:function e(a){if(!t.props.isScreenReaderEnabled&&!t.state.hasKeyboardFocus)return null;return t.props.getMessageResultSummary(r[a])},renderItem:this.renderResultRow(r)})}},{key:"renderSearchResults",value:function e(){var t=this.props,a=t.results,r=t.uiState,n=t.bannerType;var i=a&&a.pagination&&a.pagination.total_count||0;var s=a&&a.pagination&&a.pagination.page_count||0;var o=s>1&&!r.loading;var l=r.page||1;return h.a.createElement(h.a.Fragment,null,this.renderDebug(),n===rn&&this.renderHiddenMessagesBanner(),n===nn&&this.renderMessageLimitBanner(),this.makeNoResultsFragment(i),i>0&&this.renderResults(),this.shouldRenderBottomHiddenMessagesBanner()&&this.renderHiddenMessagesBanner(),!o&&h.a.createElement(vt["a"],{className:i>0?"c-search__feedback_small":"c-search__feedback",onClick:this.onFeedbackClick}),h.a.createElement(_t,{visible:o,currentPageOffset:l,totalPageCount:s,onForward:this.pageForward,onBack:this.pageBack,onFeedbackClick:this.onFeedbackClick}))}},{key:"renderSortToggle",value:function e(){var t=this.props.messageSort;var a;var r;if(t===U["f"].recentMessages){a=tn.t("most recent",{fallbackHash:"88ac2cf7230bd7f626ef49e4e5c391c6fb6b620e"});r=tn.t("Most recent")}else{a=tn.t("most relevant",{fallbackHash:"71b35d44d5b8790ce001fcd485b57fa927e93b01"});r=tn.t("Most relevant")}return h.a.createElement($["e"],{renderMenu:this.renderSortToggleMenu,position:"bottom-right",width:180,offsetX:0,offsetY:0},h.a.createElement(ee["c"],{"aria-label":tn.t("Message results sorted by {sortName}",{sortName:a}),className:"c-search__section_header--compact"},r,h.a.createElement(te["b"],{type:"chevron-down",inline:true})))}},{key:"renderSortToggleMenu",value:function e(t){var a=this;return h.a.createElement($["f"],t,h.a.createElement($["b"],{key:"recent",label:tn.t("Most recent"),onSelected:function e(){return a.props.setMessageSort({messageSort:U["f"].recentMessages})}}),h.a.createElement($["b"],{key:"relevant",label:tn.t("Most relevant"),onSelected:function e(){return a.props.setMessageSort({messageSort:U["f"].relevantMessages})}}))}},{key:"render",value:function e(){var t=this.props,a=t.results,r=t.uiState,n=t.scrollPosition,i=t.useFuzzyMatch,s=t.isDebugInfoVisible,o=t.bannerType,l=t.userQuery;r.loading||this.markSearchModuleRenderStart();var c=a&&a.pagination&&a.pagination.total_count||0;var u=tn.t("No results",{fallbackHash:"09e2b0361ef96f7c05039903cace2ab512999989"});var d=this.getVisibleMessages();var p=r.loading;var m=r.error;var v=a&&a.pagination&&a.pagination.page_count||0;var f=r.page||1;var b=v>1&&!r.loading;var g=en({messageResults:d,moduleName:"messages",isLoading:p,errorType:m,isDebugInfoVisible:s,debugInfo:a.debug,bannerType:o,isFuzzyMatchEnabled:i,totalItemCount:c,isPagerVisible:b,userQuery:l});var _=g.map(function(e){return e.key});var y=this.renderSortToggle();var O=Kr(g,{isLoading:p,errorType:m,totalItemCount:c,emptyResultsTitle:u,jumpToMessage:this.jumpToMessage,jumpToFile:this.jumpToFile,onRepliesClick:this.onRepliesClick,sortDropdown:y,onClickRefreshSearch:this.props.onClickRefreshSearch,pageForward:this.pageForward,pageBack:this.pageBack,onFeedbackClick:this.onFeedbackClick,totalPageCount:v,currentPageOffset:f,telemeter:this.props.telemeter,logger:this.props.logger});var k=zr(g);var E=this.getPropsForItem(g);if(this.props.featureSearchResultsVirtualized)return h.a.createElement(Ba,{id:"c-search__tab__messages",module:"messages",scrollPosition:n,loading:p,setScrollPosition:this.setScrollPosition,filterUI:h.a.createElement(Xt,{namespace:"message-search"}),ref:this.searchResultsContainerRef,rowRenderer:O,rowKeys:_,rowFocusability:k,onFocusEnter:this.onResultsFocusEnter,onFocusLeave:this.onResultsFocusLeave,getPropsForItem:E,persistentKeys:[Wr.HEADER,Wr.PAGER,Wr.FEEDBACK_LINK],useFuzzyMatch:i,numResults:c});return h.a.createElement(Ba,{id:"c-search__tab__messages",module:"messages",scrollPosition:n,loading:r.loading,errorType:r.error,setScrollPosition:this.setScrollPosition,filterUI:h.a.createElement(Xt,{namespace:"message-search"}),numResults:c,emptyResultsTitle:u,sortDropdown:this.renderSortToggle(),onClickRefreshSearch:this.props.onClickRefreshSearch,ref:this.searchResultsContainerRef,useFuzzyMatch:i},this.renderSearchResults())}}]);return t}(m["PureComponent"]);on.displayName="MessageView";on.defaultProps=sn;var ln=function e(t){var a=Object(H["d"])(t);var r=Object(P["a"])({state:t});var n=Object(W["getResponseModule"])(t,{module:"messages"})||{items:{}};var i=Object(_["j"])(t,"messages");var s=Object(D["c"])(t);var o=Object(W["getResponseModule"])(t,{module:"files"})||{items:{}};var l=o.pagination&&o.pagination.total_count;var c=Object(ge["isScreenReaderEnabled"])(t);var u=function e(a){return be(t,a)};var d=Object(W["getHiddenMessages"])(t)||{},p=d.count;var m;void 0!==p&&(p>0&&!Object(J["isAppStoreBuild"])()&&"treatment"===Object(V["getGroupForUser"])(t,"pers_search_msg_limit_warning")?m=rn:Object(X["isOverMessageLimit"])(a)&&(m=nn));return{results:n,uiState:i,messageSort:s,currentTeam:a,numOfFileResults:l,getMessageResultSummary:u,logInfo:r.info,logger:r,isScreenReaderEnabled:c,isDebugInfoVisible:Object(_["h"])(t),scrollPosition:Object(_["q"])(t).messages,telemeter:Object(ye["c"])({state:t}),bannerType:m,useFuzzyMatch:N(t,n),featureSearchResultsVirtualized:Object(K["isFeatureEnabled"])(t,"feature_search_results_virtualized"),userQuery:Object(Oe["getSearchInputBoxUserQuery"])(t)}};var cn={clogSearchNextPage:function e(){return R["j"].apply(void 0,arguments)},clogSearchPreviousPage:function e(){return R["m"].apply(void 0,arguments)},clogSearchFileClick:function e(){return R["f"].apply(void 0,arguments)},previewFile:function e(){return Y["c"].apply(void 0,arguments)},displayModelOrViewById:z["a"],fetchSearchResultsByModule:function e(){return L["d"].apply(void 0,arguments)},setMessageSort:G,setPageForModule:function e(){return M["u"].apply(void 0,arguments)},setViewScrollPosition:function e(){return M["M"].apply(void 0,arguments)},showThread:function e(){return Y["m"].apply(void 0,arguments)},close:function e(){return Q["a"].apply(void 0,arguments)},openPermalink:function e(){return _e["a"].apply(void 0,arguments)},openSearchFeedbackDialog:function e(){return L["r"].apply(void 0,arguments)}};var un=Object(g["connect"])(ln,cn)(on);var dn=a(1218);var pn=new Z["b"]("search");var mn=/[\ue000\ue001]/g;function hn(e,t){if(!t)return null;var a=t.pretty_type,r=t.name,n=t.timestamp,i=t.user;var s=Object(ie["i"])(Object(ie["l"])(n,{returnMoment:true}),{shortenMonth:false,excludeYear:Object(ie["h"])(n)});return Object(I["unescape"])(pn.t("{type} file \u201c{fileName}\u201d shared by {user} on {date}",{type:a,fileName:r.replace(mn,""),user:Object(oe["a"])(e,{userId:i}),date:s}))}var vn=new Z["b"]("search");var fn="IMPROVED_SEARCH";var bn={clogFileClick:I["noop"],clogSearchFileClick:I["noop"],clogSearchNextPage:I["noop"],clogSearchPreviousPage:I["noop"],close:I["noop"],error:"",fetchSearchResultsByModule:I["noop"],fileResults:{},fileSearchSortChanged:I["noop"],fileSort:U["c"].relevant,fileState:{},getFileResultSummary:I["noop"],loading:false,logInfo:I["noop"],onClickRefreshSearch:I["noop"],previewFile:I["noop"],scrollPosition:0,setPageForModule:I["noop"],setViewScrollPosition:I["noop"],telemeter:ye["d"],openSearchFeedbackDialog:I["noop"],featureSearchResultsVirtualized:false,isScreenReaderEnabled:false};var gn=function(e){p()(t,e);function t(e){var a;n()(this,t);a=l()(this,u()(t).call(this,e));Object(A["a"])(j()(a),["pageForward","pageBack","pageSearchResults","setListRef","onFileClick","onSelectItem","setScrollPosition","clogLinkClick","onFeedbackClick","renderSortToggle","onResultsFocusEnter","onResultsFocusLeave"]);a.searchResultsContainerRef=h.a.createRef();a.state={hasKeyboardFocus:false};a.markSearchModuleRenderStart=Object(I["throttle"])(function(){var t=a.props.fileResults;Object(re["f"])("files","score",t&&t.pagination&&t.pagination.page||1,e.telemeter)},2e3,{leading:true});return a}s()(t,[{key:"componentDidMount",value:function e(){this.logTelemetry()}},{key:"componentDidUpdate",value:function e(t){t.loading===this.props.loading&&t.error===this.props.error&&t.fileState.page===this.props.fileState.page||this.logTelemetry()}},{key:"onFeedbackClick",value:function e(){this.props.openSearchFeedbackDialog({module:"files"})}},{key:"onFileClick",value:function e(t,a){var r=a.file,n=a.index;this.props.logInfo(fn,"Jumping to file. file: "+r.id);this.props.clogSearchFileClick({iid:r.iid,userId:r.user,fileId:r.id,position:n});this.props.previewFile({fileId:r.id});this.props.close()}},{key:"onResultsFocusEnter",value:function e(){this.setState(function(){return{hasKeyboardFocus:true}})}},{key:"onResultsFocusLeave",value:function e(){this.setState(function(){return{hasKeyboardFocus:false}})}},{key:"onSelectItem",value:function e(t,a){var r=this.getVisibleFiles()[a];this.onFileClick(t,{file:r,index:a})}},{key:"getClogLinkClickHandler",value:function e(t){var a=this;return function(e){a.clogLinkClick(t[0],e)}}},{key:"getPropsForItem",value:function e(t){var a=this;return function(e){var r=e.index;var n=t[r];var i={};n.type===Wr.FILE_RESULT&&(a.state.hasKeyboardFocus||a.props.isScreenReaderEnabled)&&(i["aria-label"]=a.props.getFileResultSummary(n.data));return i}}},{key:"getVisibleFiles",value:function e(){return this.props.fileResults.items[this.props.fileState.page]||[]}},{key:"setListRef",value:function e(t){this.listEl=t}},{key:"setScrollPosition",value:function e(t){this.props.setViewScrollPosition({view:"files",position:t})}},{key:"clogLinkClick",value:function e(t,a){this.props.clogFileClick({file:t,payload:a})}},{key:"logTelemetry",value:function e(){if(!this.props.loading&&this.props.error===U["g"].None){var t=this.getVisibleFiles();t&&this.props.telemeter.count("search_ui_files_results_view_count",t.length)}}},{key:"pageBack",value:function e(){var t;this.listEl&&this.listEl.focus();var a=(null===(t=this.searchResultsContainerRef.current)||void 0===t?void 0:t.getWrappedInstance)?this.searchResultsContainerRef.current.getWrappedInstance():this.searchResultsContainerRef.current;(null===a||void 0===a?void 0:a.scrollTop)&&a.scrollTop();this.props.logInfo(fn,"Page backwards in search results");this.props.clogSearchPreviousPage();this.pageSearchResults(-1)}},{key:"pageForward",value:function e(){var t;this.listEl&&this.listEl.focus();var a=(null===(t=this.searchResultsContainerRef.current)||void 0===t?void 0:t.getWrappedInstance)?this.searchResultsContainerRef.current.getWrappedInstance():this.searchResultsContainerRef.current;(null===a||void 0===a?void 0:a.scrollTop)&&a.scrollTop();this.props.logInfo(fn,"Page forwards in search results");this.props.clogSearchNextPage();this.pageSearchResults(1)}},{key:"pageSearchResults",value:function e(t){var a=this.props,r=a.fileState,n=a.fileResults;var i=Math.max(r.page+t,1);n.items[i]?this.props.setPageForModule({moduleType:"files",page:i}):this.props.fetchSearchResultsByModule({module:"files",reason:"search-files-page",page:i})}},{key:"renderFiles",value:function e(){var t=this;var a=this.props,r=a.fileState,n=a.fileResults;var i=[];var s=[];if(n.items[r.page||1]){this.markSearchModuleRenderStart();i=this.getVisibleFiles();s=i.map(function(e,t){return t})}return h.a.createElement(ka,{ref:this.setListRef,ids:s,onSelectItem:this.onSelectItem,renderItem:function e(a){return h.a.createElement(tr["a"],{key:i[a].id,index:a,file:i[a],onClick:t.onFileClick,clogLinkClick:function e(a){t.clogLinkClick(i[0],a)}})},itemAriaLabel:function e(a){if(!t.props.isScreenReaderEnabled&&!t.state.hasKeyboardFocus)return false;return t.props.getFileResultSummary(i[a])}})}},{key:"renderSearchResults",value:function e(){var t=this.props,a=t.fileState,r=t.fileResults,n=t.loading;var i=r&&r.pagination&&r.pagination.total_count||0;var s=r&&r.pagination&&r.pagination.page_count||0;var o=s>1&&!this.props.loading;var l=a.page||1;return h.a.createElement(h.a.Fragment,null,!n&&h.a.createElement(ua,{type:"files"}),i>0&&this.renderFiles(),i<=0&&h.a.createElement(h.a.Fragment,null,h.a.createElement("p",null,vn.t("Slack couldn\u2019t find any files related to your search. You may want to try\u2026")),h.a.createElement("ul",null,h.a.createElement("li",null,vn.t("Using different keywords.")),h.a.createElement("li",null,vn.t("Checking for typos.")),h.a.createElement("li",null,vn.t("Adjusting your filters.")))),!o&&h.a.createElement(vt["a"],{className:i>0?"c-search__feedback_small":"c-search__feedback",onClick:this.onFeedbackClick}),h.a.createElement(_t,{visible:o,currentPageOffset:l,totalPageCount:s,onForward:this.pageForward,onBack:this.pageBack,onFeedbackClick:this.onFeedbackClick}))}},{key:"renderSortToggle",value:function e(){var t=this;var a;var r;if(this.props.fileSort===U["c"].recent){r=vn.t("most recent",{fallbackHash:"88ac2cf7230bd7f626ef49e4e5c391c6fb6b620e"});a=vn.t("Most recent")}else{r=vn.t("most relevant",{fallbackHash:"71b35d44d5b8790ce001fcd485b57fa927e93b01"});a=vn.t("Most relevant")}return h.a.createElement($["e"],{"data-qa":"file_sort_toggle",renderMenu:function e(a){var r=a.onTriggerClose;return h.a.createElement($["f"],null,h.a.createElement($["b"],{"data-qa-sort":U["c"].recent,onSelected:function e(){t.props.fileSearchSortChanged({sort:U["c"].recent});r()}},vn.t("Most recent")),h.a.createElement($["b"],{"data-qa-sort":U["c"].relevant,onSelected:function e(){t.props.fileSearchSortChanged({sort:U["c"].relevant});r()}},vn.t("Most relevant")))},position:"bottom-right",width:180,offsetX:0,offsetY:0},h.a.createElement(ee["c"],{"data-qa":"file_sort_selection","aria-label":vn.t("File results sorted by {sortName}",{sortName:r}),className:"c-search__section_header--compact"},a,h.a.createElement(te["b"],{type:"chevron-down",inline:true})))}},{key:"render",value:function e(){this.props.loading||this.markSearchModuleRenderStart();var t=this.props,a=t.scrollPosition,r=t.loading,n=t.fileResults,i=t.fileState,s=t.error;var o=n&&n.pagination&&n.pagination.total_count||0;var l=vn.t("No results",{fallbackHash:"7cded9ea830e64e87819b27ea57209379f4858af"});if(this.props.featureSearchResultsVirtualized){var c=n&&n.pagination&&n.pagination.page_count||0;var u=this.getVisibleFiles();var d=c>1&&!this.props.loading;var p=i.page||1;var m=en({moduleName:"files",fileResults:u,isLoading:r,totalItemCount:o,isPagerVisible:d,errorType:s});var v=m.map(function(e){return e.key});var f=Kr(m,{isLoading:r,errorType:s,numResults:o,emptyResultsTitle:l,onFileClick:this.onFileClick,clogLinkClick:this.getClogLinkClickHandler(u),onFeedbackClick:this.onFeedbackClick,pageForward:this.pageForward,pageBack:this.pageBack,totalPageCount:c,currentPageOffset:p,sortDropdown:this.renderSortToggle(),telemeter:this.props.telemeter});var b=zr(m);var g=this.getPropsForItem(m);return h.a.createElement(Ba,{id:"c-search__tab_file",module:"files",scrollPosition:a,ref:this.searchResultsContainerRef,setScrollPosition:this.setScrollPosition,filterUI:h.a.createElement(Xt,{showFileFilters:true,namespace:"file-search"}),rowKeys:v,rowRenderer:f,rowFocusability:b,onFocusEnter:this.onResultsFocusEnter,onFocusLeave:this.onResultsFocusLeave,getPropsForItem:g})}return h.a.createElement(Ba,{id:"c-search__tab_file",module:"files",scrollPosition:a,loading:r,setScrollPosition:this.setScrollPosition,filterUI:h.a.createElement(Xt,{showFileFilters:true,namespace:"file-search"}),numResults:o,emptyResultsTitle:l,errorType:this.props.error,onClickRefreshSearch:this.props.onClickRefreshSearch,ref:this.searchResultsContainerRef,sortDropdown:this.renderSortToggle()},this.renderSearchResults())}}]);return t}(m["PureComponent"]);gn.displayName="FileViewBase";gn.defaultProps=bn;var _n=function e(t){var a=Object(W["getResponseModule"])(t,{module:"files"})||{items:[]};var r=Object(_["j"])(t,"files");var n=Object(W["getResponseModule"])(t,{module:"messages"})||{items:{}};var i=n.pagination&&n.pagination.total_count;var s=Object(ge["isScreenReaderEnabled"])(t);var o=function e(a){return hn(t,a)};return{fileResults:a,fileState:r,numOfMessageResults:i,getFileResultSummary:o,isScreenReaderEnabled:s,scrollPosition:Object(_["q"])(t).files,loading:r&&r.loading,error:r&&r.error,logInfo:Object(P["a"])({state:t}).info,fileSort:Object(wt["a"])(t),telemeter:Object(ye["c"])({state:t}),featureSearchResultsVirtualized:Object(K["isFeatureEnabled"])(t,"feature_search_results_virtualized")}};var yn={setPageForModule:function e(){return M["u"].apply(void 0,arguments)},setViewScrollPosition:function e(){return M["M"].apply(void 0,arguments)},fetchSearchResultsByModule:function e(){return L["d"].apply(void 0,arguments)},clogSearchFileClick:function e(){return R["f"].apply(void 0,arguments)},clogFileClick:function e(){return dn["a"].apply(void 0,arguments)},clogSearchNextPage:function e(){return R["j"].apply(void 0,arguments)},clogSearchPreviousPage:function e(){return R["m"].apply(void 0,arguments)},previewFile:function e(){return Y["c"].apply(void 0,arguments)},close:function e(){return Q["a"].apply(void 0,arguments)},fileSearchSortChanged:function e(){return Pt.apply(void 0,arguments)},openSearchFeedbackDialog:function e(){return L["r"].apply(void 0,arguments)}};var On=Object(g["connect"])(_n,yn)(gn);var kn=a(68);var En=a(152);var Cn=a(131);var Sn=a(106);var wn=a(211);var jn=a(2093);var In=a(1988);var Tn=new Z["b"]("search");function An(e,t){var a=Object(me["e"])(e,t.id);var r=Object(H["k"])(e,Object(pe["isFromAnotherTeam"])(a)?Object(pe["teamIdForChannelFromAnotherTeam"])(e,a):a.team_id);var n=Object(X["getTeamDisplayName"])(r);var i=Object(X["isEnterpriseTeam"])(r)?Object(H["g"])(e):null;var s=Object(pe["getDisplayNameForChannel"])(e,a,{publicChannelIncludeHashSign:false});var o=Object(In["a"])({channelName:s,workspaceName:n,orgName:i,isOrgGlobalSharedPublicOrPrivateChannel:Object(pe["isOrgGlobalSharedPublicOrPrivateChannel"])(a),isOrgSharedPublicOrPrivateChannel:Object(pe["isOrgSharedPublicOrPrivateChannel"])(a),isExternallySharedChannel:Object(pe["isExternallySharedChannel"])(a),isArchived:Object(pe["isArchived"])(a),isPrivate:Object(pe["isPrivateChannel"])(a),isNotMember:!Object(pe["isMemberOfChannel"])(a)});var l=Object(le["a"])(e,Object(pe["getPurpose"])(a));return Tn.t("{channelDescription}, {memberCount, plural, =1 {# member} other {# members}}, {channelPurpose}",{channelDescription:o,memberCount:t.member_count,channelPurpose:l})}var Nn=a(58);var Pn=a(118);var Mn=Object(x["b"])("Channel/people search: fetch shared teams",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.reason;var n=Object(_["s"])(t());var i=36e5;var s=3;var o="ready"===n.state&&n.refreshed<=Date.now()-i||"error"===n.state;if(o){e(Object(M["H"])());return e(Object(Pn["o"])({reason:r})).then(function(a){if(!a.ok)throw new Error(a);var r=Object(I["uniq"])(a.channels.map(function(e){return e.team.id}));var n=t();var i=De()({},Object(Ot["b"])(n),true);if(Object(kt["f"])(n)){i[Object(Ot["a"])(n)]=true;Object(H["a"])(n).forEach(function(e){i[e.id]=true})}var o=r.filter(function(e){return!i[e]});e(Object(M["I"])({teamIds:o}));e(Object(M["k"])({teamIds:o.slice(0,s)}));e(Object(M["x"])({teamIds:o.slice(0,s)}))}).catch(function(){e(Object(M["G"])())})}return Promise.resolve()});Mn.meta={name:"fetchSharedTeams",key:"actionsUniversalSearchFetchSharedTeamsFetchSharedTeams",description:"Channel/people search: fetch shared teams"};Mn.propTypes={reason:v["default"].string};var Dn=Object(x["b"])("Channel search filter select is opened",function(e){return e(Mn({reason:"channel_search_open"}))});Dn.meta={name:"channelSearchOpened",key:"actionsUniversalSearchChannelSearchOpenedChannelSearchOpened",description:"Channel search filter select is opened"};Dn.propTypes=null;var xn=a(2801);var Rn=function e(t){var a=Object(_["s"])(t);var r=Object(_["d"])(t);var n=Object(H["d"])(t);var i=Object(_["c"])(t);var s=Object(Ot["a"])(t);var o=Object(K["getAllLoggedInAccountsNormalized"])(t).filter(function(e){return!!e.enterprise_id&&e.enterprise_id===s});return{channelType:i,filters:Object(_["e"])(t),filterSuggestions:Object(H["l"])(t,r).map(function(e){return e.id}),currentTeam:n,showEnterpriseOptions:Object(kt["f"])(t),filterWorkspaceOnly:Object(D["f"])(t),hideMemberChannels:Object(D["a"])(t),sharedTeams:{state:a.state,teams:Object(H["l"])(t,a.teamIds).map(function(e){return{id:e.id,name:Object(X["getTeamDisplayName"])(e)}})},loggedInEnterpriseTeams:o.map(function(e){return Object(H["k"])(t,e.id)}),featureSearchLimitTeamFilter:Object(K["isFeatureEnabled"])(t,"feature_search_limit_team_filter"),searchOnlyWorkspaceTeamId:Object(_["r"])(t),selfEnterpriseOrgName:Object(H["g"])(t)}};var Fn={setType:function e(){return xt.apply(void 0,arguments)},setSearchOnlySearchWorkspace:function e(){return Rt.apply(void 0,arguments)},setChannelSearchHideMemberChannels:function e(){return Nt.apply(void 0,arguments)},onMount:function e(){return Dn.apply(void 0,arguments)},toggleChannelSearchOrgFilter:function e(){return Lt.apply(void 0,arguments)},clogSearchFilterAdded:function e(){return R["g"].apply(void 0,arguments)},clogSearchFilterRemoved:function e(){return R["h"].apply(void 0,arguments)},searchOnlyByEnterpriseTeamId:function e(){return Ft.apply(void 0,arguments)}};var Ln=Object(g["connect"])(Rn,Fn)(xn["a"]);var Un=a(3693);var Bn=new Z["b"]("search");var qn="IMPROVED_SEARCH";function Gn(e){var t=e.channelName,a=e.onRetry,r=Ee()(e,["channelName","onRetry"]);return h.a.createElement(Cn["b"],S()({position:"bottom-right",icon:"warning",showCloseButton:true},r),h.a.createElement("span",null,h.a.createElement("strong",null,Bn.rt("Couldn\u2019t join {channelName}.",{channelName:t}))," ",Bn.t("This could be a connection issue, or just a little blip.")," ",h.a.createElement(En["a"],{onClick:a},Bn.t("Try again"))))}Gn.displayName="ErrorToastCannotJoinBlip";function Hn(e){var t=e.channelName,a=Ee()(e,["channelName"]);return h.a.createElement(Cn["b"],S()({position:"bottom-right",icon:"warning",showCloseButton:true},a),h.a.createElement("span",null,h.a.createElement("strong",null,Bn.rt("Couldn\u2019t leave {channelName}.",{channelName:t}))," ",Bn.t("Your organization requires everyone to be in it, so no one misses important info.")," "))}Hn.displayName="ErrorToastCannotLeaveRestricted";function Wn(e){var t=e.channelName,a=e.onRetry,r=Ee()(e,["channelName","onRetry"]);return h.a.createElement(Cn["b"],S()({position:"bottom-right",icon:"warning",showCloseButton:true},r),h.a.createElement("span",null,h.a.createElement("strong",null,Bn.rt("Couldn\u2019t leave {channelName}.",{channelName:t}))," ",Bn.t("This could be a connection issue, or just a little blip.")," ",h.a.createElement(En["a"],{onClick:a},Bn.t("Try again"))))}Wn.displayName="ErrorToastCannotLeaveBlip";var Vn=function(e){p()(t,e);function t(e){var a;n()(this,t);a=l()(this,u()(t).call(this,e));Object(A["a"])(j()(a),["setScrollPosition","pageForward","pageBack","pageSearchResults","setListRef","onFeedbackClick","renderSortToggle","onChannelClick","onChannelJoin","onChannelLeave","onResultsFocusEnter","onResultsFocusLeave","getPropsForItem"]);a.searchResultsContainerRef=h.a.createRef();a.state={hasKeyboardFocus:false};return a}s()(t,[{key:"componentDidMount",value:function e(){this.logTelemetry()}},{key:"componentDidUpdate",value:function e(t){t.moduleState.loading===this.props.moduleState.loading&&t.moduleState.error===this.props.moduleState.error&&t.moduleState.page===this.props.moduleState.page||this.logTelemetry()}},{key:"onChannelClick",value:function e(t,a){var r=this;return function(e){var n=e.target;var i=false;while(n&&n!==e.currentTarget){"A"===n.tagName&&n.href&&(i=true);n=n.parentNode}if(i)r.props.clogSearchChannelClick({type:R["a"].channelPurposeLink,iid:t,channelId:a.id});else{e.preventDefault();r.onNavigateChannel(a)}}}},{key:"onChannelJoin",value:function e(t){var a=this;return function(e){e.preventDefault();return a.onJoinChannelId(t)}}},{key:"onChannelLeave",value:function e(t){var a=this;return function(e){e.preventDefault();return a.onLeaveChannelId(t)}}},{key:"onFeedbackClick",value:function e(){this.props.openSearchFeedbackDialog({module:"channels"})}},{key:"onJoinChannelId",value:function e(t){var a=this;this.props.clogSearchChannelClick({type:R["a"].channelJoin,iid:this.props.iidMap[t],channelId:t});return this.props.joinChannelFromSearch({channelId:t}).then(function(){a.listEl&&a.listEl.focusItem(t)}).catch(function(){var e=a.props.getDisplayNameForChannel(a.props.flannelChannelMap[t]);a.props.enqueueToast({element:h.a.createElement(Gn,S()({channelName:e,onRetry:function e(){return a.onJoinChannelId(t)}},a.getToastOffset()))})})}},{key:"onLeaveChannelId",value:function e(t){var a=this;this.props.clogSearchChannelClick({type:R["a"].channelLeave,iid:this.props.iidMap[t],channelId:t});return this.props.leaveChannelFromSearch({channelId:t}).then(function(){a.listEl&&a.listEl.focusItem(t)}).catch(function(){var e=a.props.getDisplayNameForChannel(a.props.flannelChannelMap[t]);var r=a.props.canLeaveChannelWithReason(t),n=r.ok,i=r.reason;var s=!n&&[lr["b"].CANT_LEAVE_GENERAL,lr["b"].CANT_LEAVE_MANDATORY_SHARED_CHANNEL].includes(i);a.props.enqueueToast({element:s?h.a.createElement(Hn,S()({channelName:e},a.getToastOffset())):h.a.createElement(Wn,S()({channelName:e,onRetry:function e(){return a.onLeaveChannelId(t)}},a.getToastOffset()))})})}},{key:"onNavigateChannel",value:function e(t){var a=this;this.props.clogSearchChannelClick({type:R["a"].channel,iid:this.props.iidMap[t.id],channelId:t.id});var r;if(Object(pe["isFromAnotherTeam"])(t)){var n=this.props.teamIdForChannelFromAnotherTeam(t);r=Object(Nn["a"])()?this.props.setPrimaryView({id:t.id,teamId:n}):this.props.openChannelFromAnotherTeam({channelId:t.id,teamId:n})}else r=this.props.setPrimaryView({id:t.id,teamId:t.team_id});return r.then(function(){return a.props.close()})}},{key:"onResultsFocusEnter",value:function e(){this.setState(function(){return{hasKeyboardFocus:true}})}},{key:"onResultsFocusLeave",value:function e(){this.setState(function(){return{hasKeyboardFocus:false}})}},{key:"getPropsForItem",value:function e(t){var a=this;return function(e){var r=e.index;var n=t[r];var i={};n.type===Wr.CHANNEL_RESULT&&(a.state.hasKeyboardFocus||a.props.isScreenReaderEnabled)&&(i["aria-label"]=a.props.channelSummaryLabels[n.data.id]);return i}}},{key:"getToastOffset",value:function e(){if(this.searchResultsContainerRef.current){var t;var a=(null===(t=this.searchResultsContainerRef.current)||void 0===t?void 0:t.getWrappedInstance)?this.searchResultsContainerRef.current.getWrappedInstance():this.searchResultsContainerRef.current;var r=(null===a||void 0===a?void 0:a.getToastOffset)&&a.getToastOffset();return r}return{}}},{key:"getVisibleChannels",value:function e(){return this.props.channelsResponse.items[this.props.moduleState.page||1]}},{key:"setListRef",value:function e(t){this.listEl=t}},{key:"setScrollPosition",value:function e(t){this.props.setViewScrollPosition({view:"channels",position:t})}},{key:"logTelemetry",value:function e(){if(!this.props.moduleState.loading&&this.props.moduleState.error===U["g"].None){var t=this.getVisibleChannels();t&&this.props.telemeter.count("search_ui_channels_results_view_count",t.length)}}},{key:"pageBack",value:function e(){var t;this.listEl&&this.listEl.focus();var a=(null===(t=this.searchResultsContainerRef.current)||void 0===t?void 0:t.getWrappedInstance)?this.searchResultsContainerRef.current.getWrappedInstance():this.searchResultsContainerRef.current;(null===a||void 0===a?void 0:a.scrollTop)&&a.scrollTop();this.props.logInfo(qn,"Page backwards in channel results");this.props.clogSearchPreviousPage();this.pageSearchResults(-1)}},{key:"pageForward",value:function e(){var t;this.listEl&&this.listEl.focus();var a=(null===(t=this.searchResultsContainerRef.current)||void 0===t?void 0:t.getWrappedInstance)?this.searchResultsContainerRef.current.getWrappedInstance():this.searchResultsContainerRef.current;(null===a||void 0===a?void 0:a.scrollTop)&&a.scrollTop();this.props.logInfo(qn,"Page forward in channel results");this.props.clogSearchNextPage();this.pageSearchResults(1)}},{key:"pageSearchResults",value:function e(t){var a=this.props,r=a.moduleState,n=a.channelsResponse,i=a.sort;var s=Math.max(r.page+t,1);n.items[s]?this.props.setPageForModule({moduleType:"channels",page:s}):this.props.fetchSearchResultsByModule({module:"channels",sort:i,reason:"search-channels-page",page:s})}},{key:"renderSortToggle",value:function e(){var t=this.props,a=t.sort,r=t.setSort;var n=[[U["b"].relevant,{uppercase:Bn.t("Most relevant"),lowercase:Bn.t("most relevant",{fallbackHash:"71b35d44d5b8790ce001fcd485b57fa927e93b01"})}],[U["b"].created,{uppercase:Bn.t("Date created (newest to oldest)"),lowercase:Bn.t("date created (newest to oldest)",{fallbackHash:"a02a13d5dfbf8c3838a8ee189079acede35b2a47"})}],[U["b"].name,{uppercase:Bn.t("Name (A to Z)"),lowercase:Bn.t("name (A to Z)",{fallbackHash:"e53a5982ee84aaa2d647582a947002c97d33552d"})}],[U["b"].memberCount,{uppercase:Bn.t("Members (most to least)"),lowercase:Bn.t("members (most to least)",{fallbackHash:"6bae871504502b91e5730a1574b493e167d09f62"})}]];var i=Object(I["fromPairs"])(n);return h.a.createElement($["e"],{"data-qa":"channel_sort_toggle",renderMenu:function e(t){var a=t.onTriggerClose;return h.a.createElement($["f"],null,n.map(function(e){var t=Ga()(e,2),n=t[0],i=t[1];return h.a.createElement($["b"],{"data-qa-sort":n,key:n,onSelected:function e(){r({sort:n});a()}},i.uppercase)}))},position:"bottom-right",width:180,offsetX:0,offsetY:0},h.a.createElement(ee["c"],{"data-qa":"channel_sort_selection","aria-label":Bn.t("Channel results sorted by {sortName}",{sortName:i[a].lowercase}),className:"c-search__section_header--compact"},i[a].uppercase,h.a.createElement(te["b"],{type:"chevron-down",inline:true})))}},{key:"render",value:function e(){var t=this;var a=this.props,r=a.scrollPosition,n=a.moduleState,i=a.channelsResponse,s=a.channelSummaryLabels,o=a.flannelChannelMap,l=a.useFuzzyMatch;var c=this.getVisibleChannels()||[];var u=c.reduce(function(e,t){e[t.id]=t;return e},{});var d=i.pagination&&i.pagination.total_count;var p=d>0;i.debug&&Object(kn["exportToGlobalDebugger"])("channelSearchExplain",Object(I["sortBy"])(i.debug.features,function(e){return-e.total_score}));var m=i&&i.pagination&&i.pagination.page_count||0;var v=m>1&&!n.loading;var f=n.page||1;if(this.props.featureSearchResultsVirtualized){var b=en({moduleName:"channels",channelSearchResults:c,channelFlannelMap:o,isLoading:n.loading,totalItemCount:d,isPagerVisible:v,errorType:n.error});var g=b.map(function(e){return e.key});var _=Kr(b,{isLoading:n.loading,errorType:n.error,numResults:d,emptyResultsTitle:Bn.t("No results"),pageForward:this.pageForward,pageBack:this.pageBack,onFeedbackClick:this.onFeedbackClick,totalPageCount:m,currentPageOffset:f,sortDropdown:this.renderSortToggle(),onChannelClick:this.onChannelClick,onChannelJoin:this.onChannelJoin,onChannelLeave:this.onChannelLeave,telemeter:this.props.telemeter});var y=zr(b);var O=this.getPropsForItem(b);return h.a.createElement(Ba,{id:"c-search__tab_channel",module:"channels",scrollPosition:r,ref:this.searchResultsContainerRef,setScrollPosition:this.setScrollPosition,filterUI:h.a.createElement(Ln,{namespace:"channel-search"}),rowKeys:g,rowRenderer:_,rowFocusability:y,onFocusEnter:this.onResultsFocusEnter,onFocusLeave:this.onResultsFocusLeave,getPropsForItem:O,useFuzzyMatch:l})}return h.a.createElement(Ba,{id:"c-search__tab_channel",module:"channels",loading:n.loading,errorType:n.error,scrollPosition:r,setScrollPosition:this.setScrollPosition,filterUI:h.a.createElement(Ln,{namespace:"channel-search"}),numResults:d,emptyResultsTitle:Bn.t("No results"),ref:this.searchResultsContainerRef,onClickRefreshSearch:this.props.onClickRefreshSearch,sortDropdown:this.renderSortToggle(),useFuzzyMatch:l},p&&h.a.createElement(ka,{ref:this.setListRef,ids:c.map(function(e){return e.id}),onSelectItem:function e(a,r){return t.onNavigateChannel(o[r])},itemAriaLabel:function e(t){return s[t]},renderItem:function e(a){return h.a.createElement(br,{key:a,channel:o[a],channelData:u[a],iid:t.props.iidMap[a],onClickChannel:t.onChannelClick(t.props.iidMap[a],o[a]),onClickJoin:t.onChannelJoin(a),onClickLeave:t.onChannelLeave(a)})}}),!p&&h.a.createElement(h.a.Fragment,null,h.a.createElement("p",null,Bn.t("Slack couldn\u2019t find any channels related to your search. You may want to try\u2026")),h.a.createElement("ul",null,h.a.createElement("li",null,Bn.t("Using different keywords.")),h.a.createElement("li",null,Bn.t("Checking for typos.")),h.a.createElement("li",null,Bn.t("Adjusting your filters.")))),!v&&h.a.createElement(vt["a"],{className:d>0?"c-search__feedback_small":"c-search__feedback",onClick:this.onFeedbackClick}),h.a.createElement(_t,{visible:v,currentPageOffset:f,totalPageCount:m,onForward:this.pageForward,onBack:this.pageBack,onFeedbackClick:this.onFeedbackClick}))}}]);return t}(m["Component"]);Vn.displayName="ChannelViewBase";Vn.defaultProps={sort:U["b"].relevant,setSort:I["noop"],scrollPosition:0,setViewScrollPosition:I["noop"],moduleState:{},channelsResponse:{items:{}},setPageForModule:I["noop"],fetchSearchResultsByModule:I["noop"],logInfo:I["noop"],setPrimaryView:I["noop"],openChannelFromAnotherTeam:I["noop"],close:I["noop"],teamIdForChannelFromAnotherTeam:I["noop"],clogSearchChannelClick:I["noop"],clogSearchNextPage:I["noop"],clogSearchPreviousPage:I["noop"],channelSummaryLabels:{},iidMap:{},joinChannelFromSearch:I["noop"],leaveChannelFromSearch:I["noop"],flannelChannelMap:{},getDisplayNameForChannel:I["noop"],enqueueToast:I["noop"],canLeaveChannelWithReason:I["noop"],onClickRefreshSearch:I["noop"],openSearchFeedbackDialog:I["noop"],telemeter:ye["d"],featureSearchResultsVirtualized:false,isScreenReaderEnabled:false,useFuzzyMatch:false};var Kn=function e(t){var a=Object(_["j"])(t,"channels")||{};var r=Object(W["getResponseModule"])(t,{module:"channels"})||{items:{}};var n=r.items[a.page||1]||[];var i={};var s={};var o={};var l=Object(ge["isScreenReaderEnabled"])(t);n.forEach(function(e){s[e.id]=An(t,e);var a=Object(me["e"])(t,e.id);o[e.id]=a;i[e.id]=e.iid});return{sort:Object(D["b"])(t),scrollPosition:Object(_["q"])(t).channels,moduleState:a,channelsResponse:r,iidMap:i,isScreenReaderEnabled:l,channelSummaryLabels:s,flannelChannelMap:o,logInfo:Object(P["a"])({state:t}).info,teamIdForChannelFromAnotherTeam:function e(){for(var a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return pe["teamIdForChannelFromAnotherTeam"].apply(void 0,[t].concat(r))},getDisplayNameForChannel:function e(){for(var a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return pe["getDisplayNameForChannel"].apply(void 0,[t].concat(r))},canLeaveChannelWithReason:function e(){for(var a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return lr["l"].apply(void 0,[t].concat(r))},telemeter:Object(ye["c"])({state:t}),featureSearchResultsVirtualized:Object(K["isFeatureEnabled"])(t,"feature_search_results_virtualized"),useFuzzyMatch:N(t,r)}};var zn=function e(t){return{setSort:function e(){return t(Mt.apply(void 0,arguments))},setViewScrollPosition:function e(){return t(M["M"].apply(void 0,arguments))},setPageForModule:function e(){return t(M["u"].apply(void 0,arguments))},fetchSearchResultsByModule:function e(){return t(L["d"].apply(void 0,arguments))},setPrimaryView:function e(){return t(wn["a"].apply(void 0,arguments))},openChannelFromAnotherTeam:function e(){return t(jn["a"].apply(void 0,arguments))},close:function e(){return t(Q["a"].apply(void 0,arguments))},clogSearchChannelClick:function e(){return t(R["d"].apply(void 0,arguments))},clogSearchNextPage:function e(){return t(R["j"].apply(void 0,arguments))},clogSearchPreviousPage:function e(){return t(R["m"].apply(void 0,arguments))},joinChannelFromSearch:function e(){return t(L["h"].apply(void 0,arguments))},leaveChannelFromSearch:function e(){return t(L["i"].apply(void 0,arguments))},enqueueToast:function e(){return t(Sn["enqueueToast"].apply(void 0,arguments))},openSearchFeedbackDialog:function e(){return t(L["r"].apply(void 0,arguments))}}};var Qn=Object(g["connect"])(Kn,zn)(Vn);var Yn=a(278);var Jn=a.n(Yn);var Xn=a(121);var Zn=a(62);var $n=a(1442);var ei=a(1669);var ti=a(588);var ai=36e5;var ri=Object(x["b"])("people search: tab opened, initializing data",function(e,t){var a=t();var r=Object(H["d"])(a);var n=Object(yt["b"])(a);var i=Object(Or["a"])(r);var s=Object(Ha["getMemberProfileFields"])(n);var o=Object(_["k"])(a);i.forEach(function(t){if(t.options&&t.options.length>1){var a=t.name;var r=[];if(s&&s[a]){var n=t.options.find(function(e){return e.value===s[a].value});n&&r.push(n.value)}r.push.apply(r,Ct()(t.options.slice(0,3).map(function(e){return e.value})));Object(I["uniq"])(r).slice(0,3).forEach(function(t){var r=o&&o[a]&&o[a].find(function(e){return e.value===t});e(Object(M["v"])({id:a,value:t,checked:!!r&&r.checked}))})}})});ri.meta={name:"populateVisibleOptions",key:"actionsUniversalSearchPeopleSearchOpenedPopulateVisibleOptions",description:"people search: tab opened, initializing data"};var ni=Object(x["b"])("people search: tab opened, initializing data",function(e,t){var a=t();var r=Object(_["o"])(a);var n=!(r&&"ready"===r.state&&r.refreshed>=Date.now()-ai);if(!n){e(ri());return Promise.resolve()}e(Object(M["A"])());return e(Object(ti["e"])({reason:"people_search_open"})).then(function(){e(ri());e(Object(M["B"])())}).catch(function(){e(Object(M["z"])())})});ni.meta={name:"updatePeopleSearchProfileFieldValues",key:"actionsUniversalSearchPeopleSearchOpenedUpdatePeopleSearchProfileFieldValues",description:"people search: tab opened, initializing data"};var ii=Object(x["b"])("people search: tab opened, initializing data",function(e,t){var a=t();if(Object(K["isFeatureEnabled"])(a,"feature_steeple_church_ext"))return Promise.all([e(Mn({reason:"people_search_open"})),e(ni())]);return e(ni())});ii.meta={name:"peopleSearchOpened",key:"actionsUniversalSearchPeopleSearchOpenedPeopleSearchOpened",description:"people search: tab opened, initializing data"};ii.propTypes={};var si=ii;var oi=a(4989);var li=function e(t){var a=Object(_["l"])(t);var r=Object(_["s"])(t);var n=Object(_["m"])(t);var i=Object(Ot["a"])(t);var s=Object(K["getAllLoggedInAccountsNormalized"])(t).filter(function(e){return!!e.enterprise_id&&e.enterprise_id===i});return{accountType:a,currentTeam:Object(H["d"])(t),visibleFilterState:Object(_["k"])(t),sharedTeams:{state:r.state,teams:Object(H["l"])(t,r.teamIds).map(function(e){return{id:e.id,name:Object(X["getTeamDisplayName"])(e)}})},filters:Object(_["n"])(t),filterSuggestions:Object(H["l"])(t,n).map(function(e){return e.id}),showEnterpriseOptions:Object(kt["f"])(t),filterWorkspaceOnly:Object(D["f"])(t),hideDeactivatedUsers:Object(D["d"])(t),timezoneSuggestions:Object(_["p"])(t),teamProfileState:Object(_["o"])(t),featureSearchLimitTeamFilter:Object(K["isFeatureEnabled"])(t,"feature_search_limit_team_filter"),loggedInEnterpriseTeams:s.map(function(e){return Object(H["k"])(t,e.id)}),searchOnlyWorkspaceTeamId:Object(_["r"])(t),selfEnterpriseOrgName:Object(H["g"])(t)}};var ci={setPeopleSearchFilterType:function e(){return Bt.apply(void 0,arguments)},peopleSearchCustomFilterChanged:function e(){return qt.apply(void 0,arguments)},peopleSearchTimezoneFilterChanged:function e(){return Ht.apply(void 0,arguments)},clogSearchFilterAdded:function e(){return R["g"].apply(void 0,arguments)},clogSearchFilterRemoved:function e(){return R["h"].apply(void 0,arguments)},peopleSearchOpened:function e(){return si.apply(void 0,arguments)},togglePeopleSearchOrgFilter:function e(){return Ut.apply(void 0,arguments)},setSearchOnlySearchWorkspace:function e(){return Rt.apply(void 0,arguments)},setPeopleSearchHideDeactivatedUsers:function e(){return Gt.apply(void 0,arguments)},searchOnlyByEnterpriseTeamId:function e(){return Ft.apply(void 0,arguments)}};var ui=Object(g["connect"])(li,ci)(oi["a"]);var di=a(3697);var pi=new Z["b"]("search");var mi="IMPROVED_SEARCH";var hi={sort:U["i"].relevant,setSort:I["noop"],scrollPosition:0,setViewScrollPosition:I["noop"],moduleState:{},peopleResponse:{items:{}},setPageForModule:I["noop"],fetchSearchResultsByModule:I["noop"],logger:{error:I["noop"],info:I["noop"]},telemeter:ye["d"],clogSearchPeopleClick:I["noop"],clogSearchNextPage:I["noop"],clogSearchPreviousPage:I["noop"],memberSummaryLabels:{},iidMap:{},showNewPeopleSearch:false,displayEmailAddresses:false,currentDisplayQuery:"",featureFantailNurture:false,markPeopleSearchSeen:I["noop"],incrementPeopleSearchSeenCount:I["noop"],onClickRefreshSearch:I["noop"],showMemberProfile:I["noop"],closeSearch:I["noop"],startImByMemberId:I["noop"],enqueueToast:I["noop"],openSearchFeedbackDialog:I["noop"],shouldIncrementPeopleSearchSeenCount:false,featureSearchResultsVirtualized:false,isScreenReaderEnabled:false,useFuzzyMatch:false};var vi=function(e){p()(t,e);function t(e){var a;n()(this,t);a=l()(this,u()(t).call(this,e));Object(A["a"])(j()(a),["setScrollPosition","pageForward","pageBack","pageSearchResults","setListRef","onNavigateError","onViewProfileError","onFeedbackClick","getMemberClickHandler","renderSortToggle","onResultsFocusEnter","onResultsFocusLeave","getPropsForItem"]);a.searchResultsContainerRef=h.a.createRef();a.state={hasKeyboardFocus:false};return a}s()(t,[{key:"componentDidMount",value:function e(){this.logTelemetry()}},{key:"componentDidUpdate",value:function e(t){t.moduleState.loading===this.props.moduleState.loading&&t.moduleState.error===this.props.moduleState.error&&t.moduleState.page===this.props.moduleState.page||this.logTelemetry()}},{key:"componentWillUnmount",value:function e(){this.props.showNewPeopleSearch&&this.props.markPeopleSearchSeen();this.props.shouldIncrementPeopleSearchSeenCount&&this.props.incrementPeopleSearchSeenCount()}},{key:"onFeedbackClick",value:function e(){this.props.openSearchFeedbackDialog({module:"people"})}},{key:"onNavigateError",value:function e(t){this.props.enqueueToast({element:h.a.createElement(Cn["b"],S()({position:"bottom-right",icon:"warning",showCloseButton:true},this.getToastOffset()),h.a.createElement("span",null,pi.rt("<strong>Couldn\u2019t open conversation</strong>. This could be a connection issue or just a temporary blip. <a>Try again</a>",null,function(e){var a=e.tag,r=e.key,n=e.text;switch(a){case"strong":return h.a.createElement("strong",{key:r},n);case"a":return h.a.createElement(Fe["a"],{key:r,onClick:t},n);default:return null}})))})}},{key:"onResultsFocusEnter",value:function e(){this.setState(function(){return{hasKeyboardFocus:true}})}},{key:"onResultsFocusLeave",value:function e(){this.setState(function(){return{hasKeyboardFocus:false}})}},{key:"onSelectItem",value:function(){var e=Jn()(regeneratorRuntime.mark(function e(t){var a=this;return regeneratorRuntime.wrap(function e(r){while(1)switch(r.prev=r.next){case 0:this.props.clogSearchPeopleClick({type:R["c"].people,iid:this.props.iidMap[t.id],userId:t.id});r.prev=1;r.next=4;return this.props.startImByMemberId({memberId:t.id});case 4:r.next=10;break;case 6:r.prev=6;r.t0=r["catch"](1);this.onNavigateError(function(){return a.onSelectItem(t)});throw r.t0;case 10:r.prev=10;r.next=13;return this.props.showMemberProfile({memberId:t.id});case 13:r.next=19;break;case 15:r.prev=15;r.t1=r["catch"](10);this.onViewProfileError(function(){return a.onSelectItem(t)});throw r.t1;case 19:this.props.closeSearch();case 20:case"end":return r.stop()}},e,this,[[1,6],[10,15]])}));function t(t){return e.apply(this,arguments)}return t}()},{key:"onViewProfileError",value:function e(t){this.props.enqueueToast({element:h.a.createElement(Cn["b"],S()({position:"bottom-right",icon:"warning",showCloseButton:true},this.getToastOffset()),h.a.createElement("span",null,pi.rt("<strong>Couldn\u2019t open profile</strong>. This could be a connection issue or just a temporary blip. <a>Try again</a>",null,function(e){var a=e.tag,r=e.key,n=e.text;switch(a){case"strong":return h.a.createElement("strong",{key:r},n);case"a":return h.a.createElement(Fe["a"],{key:r,onClick:t},n);default:return null}})))})}},{key:"getMemberClickHandler",value:function e(t){var a=this;return function(e){e.preventDefault();a.onSelectItem(a.props.getMemberById(t))}}},{key:"getPropsForItem",value:function e(t){var a=this;return function(e){var r=e.index;var n=t[r];var i={};n.type===Wr.PEOPLE_RESULT&&(a.state.hasKeyboardFocus||a.props.isScreenReaderEnabled)&&(i["aria-label"]=a.props.memberSummaryLabels[n.data.id]);return i}}},{key:"getToastOffset",value:function e(){if(this.searchResultsContainerRef.current){var t;var a=(null===(t=this.searchResultsContainerRef.current)||void 0===t?void 0:t.getWrappedInstance)?this.searchResultsContainerRef.current.getWrappedInstance():this.searchResultsContainerRef.current;var r=(null===a||void 0===a?void 0:a.getToastOffset)&&a.getToastOffset();return r}return{}}},{key:"getVisiblePeople",value:function e(){return this.props.peopleResponse.items[this.props.moduleState.page||1]||[]}},{key:"setListRef",value:function e(t){this.listEl=t}},{key:"setScrollPosition",value:function e(t){this.props.setViewScrollPosition({view:"people",position:t})}},{key:"logTelemetry",value:function e(){if(!this.props.moduleState.loading&&this.props.moduleState.error===U["g"].None){var t=this.getVisiblePeople();t&&this.props.telemeter.count("search_ui_people_results_view_count",t.length)}}},{key:"pageBack",value:function e(){var t;this.listEl&&this.listEl.focus();var a=(null===(t=this.searchResultsContainerRef.current)||void 0===t?void 0:t.getWrappedInstance)?this.searchResultsContainerRef.current.getWrappedInstance():this.searchResultsContainerRef.current;(null===a||void 0===a?void 0:a.scrollTop)&&a.scrollTop();this.props.logger.info(mi,"Page backwards in people results");this.props.clogSearchPreviousPage();this.pageSearchResults(-1)}},{key:"pageForward",value:function e(){var t;this.listEl&&this.listEl.focus();var a=(null===(t=this.searchResultsContainerRef.current)||void 0===t?void 0:t.getWrappedInstance)?this.searchResultsContainerRef.current.getWrappedInstance():this.searchResultsContainerRef.current;(null===a||void 0===a?void 0:a.scrollTop)&&a.scrollTop();this.props.logger.info(mi,"Page forward in people results");this.props.clogSearchNextPage();this.pageSearchResults(1)}},{key:"pageSearchResults",value:function e(t){var a=this.props,r=a.moduleState,n=a.peopleResponse,i=a.sort;var s=Math.max(r.page+t,1);n.items[s]?this.props.setPageForModule({moduleType:"people",page:s}):this.props.fetchSearchResultsByModule({module:"people",sort:i,reason:"search-people-page",page:s})}},{key:"renderEmptyResults",value:function e(){var t=this.props,a=t.displayEmailAddresses,r=t.currentDisplayQuery,n=t.featureFantailNurture;var i=r.replace(/<@[^>]*>/g,"").indexOf("@")>-1;return!a&&i&&n?h.a.createElement(h.a.Fragment,null,h.a.createElement("p",null,pi.t("Slack couldn\u2019t find any people related to your search.")),h.a.createElement("p",null,pi.t("Searching for people by email has been disabled in this workspace. Questions? Contact a Workspace Admin."))):h.a.createElement(h.a.Fragment,null,h.a.createElement("p",null,pi.t("Slack couldn\u2019t find any people related to your search. You may want to try\u2026")),h.a.createElement("ul",null,h.a.createElement("li",null,pi.t("Using different keywords.")),h.a.createElement("li",null,pi.t("Checking for typos.")),h.a.createElement("li",null,pi.t("Adjusting your filters."))))}},{key:"renderSortToggle",value:function e(){var t=this.props,a=t.sort,r=t.setSort;var n=[[U["i"].relevant,{uppercase:pi.t("Most relevant"),lowercase:pi.t("most relevant",{fallbackHash:"71b35d44d5b8790ce001fcd485b57fa927e93b01"})}],[U["i"].name,{uppercase:pi.t("Name (A to Z)"),lowercase:pi.t("name (A to Z)",{fallbackHash:"e53a5982ee84aaa2d647582a947002c97d33552d"})}]];var i=Object(I["fromPairs"])(n);return h.a.createElement($["e"],{"data-qa":"people_sort_toggle",renderMenu:function e(t){var a=t.onTriggerClose;return h.a.createElement($["f"],null,n.map(function(e){var t=Ga()(e,2),n=t[0],i=t[1];return h.a.createElement($["b"],{"data-qa-sort":n,key:n,onSelected:function e(){r({sort:n});a()}},i.uppercase)}))},position:"bottom-right",width:180,offsetX:0,offsetY:0},h.a.createElement(ee["c"],{"data-qa":"people_sort_selection","aria-label":pi.t("Channel results sorted by {sortName}",{sortName:i[a].lowercase}),className:"c-search__section_header--compact"},i[a].uppercase,h.a.createElement(te["b"],{type:"chevron-down",inline:true})))}},{key:"render",value:function e(){var t=this;var a=this.props,r=a.scrollPosition,n=a.moduleState,i=a.peopleResponse,s=a.memberSummaryLabels,o=a.displayEmailAddresses,l=a.currentDisplayQuery,c=a.featureFantailNurture,u=a.useFuzzyMatch;var d=this.getVisiblePeople();var p=d.reduce(function(e,t){e[t.id]=t;return e},{});var m=i.pagination&&i.pagination.total_count;var v=m>0;i.debug&&Object(kn["exportToGlobalDebugger"])("peopleSearchExplain",Object(I["sortBy"])(i.debug.features,function(e){return-e.total_score}));var f=i&&i.pagination&&i.pagination.page_count||0;var b=f>1&&!n.loading;var g=n.page||1;var _=d.map(function(e){return{highlightData:e,member:t.props.getMemberById(e.id),iid:e.iid}});if(this.props.featureSearchResultsVirtualized){var y=en({moduleName:"people",peopleResults:_,isLoading:n.loading,errorType:n.error,totalItemCount:m,isPagerVisible:b,showPeopleDiscovery:this.props.showNewPeopleSearch});var O=y.map(function(e){return e.key});var k=Kr(y,{isLoading:n.loading,errorType:n.error,numResults:m,emptyResultsTitle:pi.t("No results"),pageForward:this.pageForward,pageBack:this.pageBack,onFeedbackClick:this.onFeedbackClick,totalPageCount:f,currentPageOffset:g,sortDropdown:this.renderSortToggle(),displayEmailAddresses:o,currentDisplayQuery:l,featureFantailNurture:c,startImByMemberId:this.props.startImByMemberId,showMemberProfile:this.props.showMemberProfile,onViewProfileError:this.onViewProfileError,onNavigateError:this.onNavigateError,getMemberClickHandler:this.getMemberClickHandler,telemeter:this.props.telemeter});var E=zr(y);var C=this.getPropsForItem(y);return h.a.createElement(Ba,{id:"c-search__tab_people",module:"people",scrollPosition:r,setScrollPosition:this.setScrollPosition,filterUI:h.a.createElement(ui,{namespace:"people-search"}),ref:this.searchResultsContainerRef,rowKeys:O,rowRenderer:k,rowFocusability:E,onFocusEnter:this.onResultsFocusEnter,onFocusLeave:this.onResultsFocusLeave,getPropsForItem:C,useFuzzyMatch:u})}return h.a.createElement(Ba,{id:"c-search__tab_people",module:"people",loading:n.loading,errorType:n.error,scrollPosition:r,setScrollPosition:this.setScrollPosition,filterUI:h.a.createElement(ui,null),numResults:m,emptyResultsTitle:pi.t("No results"),ref:this.searchResultsContainerRef,onClickRefreshSearch:this.props.onClickRefreshSearch,sortDropdown:this.renderSortToggle(),alertHeader:this.props.showNewPeopleSearch&&h.a.createElement("div",{className:"c-channel_search__new_feature_alert"},h.a.createElement(te["b"],{className:"c-channel_search__new_feature_icon",type:"sparkles_filled"}),h.a.createElement("div",null,pi.rt("<strong>Find people at your organization</strong>. Now you can search for people by their name, profile info, or even the topics they talk about.",{fallbackHash:"07cbc99aff3e533e8b10d9bf430890987c65f7ae"}))),useFuzzyMatch:u},v?h.a.createElement(ka,{ref:this.setListRef,ids:d.map(function(e){return e.id}),onSelectItem:function e(a,r){return t.onSelectItem(t.props.getMemberById(r))},itemAriaLabel:function e(t){return s[t]},renderItem:function e(a){return h.a.createElement(Lr,{key:a,iid:t.props.iidMap[a],member:t.props.getMemberById(a),memberWithHighlights:p[a],onClickMember:function e(r){r.preventDefault();t.onSelectItem(t.props.getMemberById(a))},startImByMemberId:t.props.startImByMemberId,showMemberProfile:t.props.showMemberProfile,onViewProfileError:t.onViewProfileError,onNavigateError:t.onNavigateError})}}):this.renderEmptyResults(),!b&&h.a.createElement(vt["a"],{className:m>0?"c-search__feedback_small":"c-search__feedback",onClick:this.onFeedbackClick}),h.a.createElement(_t,{visible:b,currentPageOffset:g,totalPageCount:f,onForward:this.pageForward,onBack:this.pageBack,onFeedbackClick:this.onFeedbackClick}))}}]);return t}(m["Component"]);vi.displayName="PeopleViewBase";vi.defaultProps=hi;var fi=function e(t){var a=Object(_["j"])(t,"people")||{};var r=Object(W["getResponseModule"])(t,{module:"people"})||{items:{}};var n=r.items[a.page||1]||[];var i={};var s={};var o=Object(ge["isScreenReaderEnabled"])(t);n.forEach(function(e){var a=Object(yt["e"])(t,e.id);s[e.id]=Object(ei["a"])({name:Object(Ha["getMemberRealName"])(a),isGuest:Object(Ha["isGuest"])(a),isSelf:Object(Ha["isSelf"])(a),isDeleted:Object(Ha["isDeleted"])(a),isAppOrBot:Object(Ha["isAppOrBot"])(a)});i[e.id]=e.iid});return{sort:Object(D["e"])(t),scrollPosition:Object(_["q"])(t).people,moduleState:a,peopleResponse:r,iidMap:i,memberSummaryLabels:s,isScreenReaderEnabled:o,getMemberById:function e(a){return Object(yt["e"])(t,a)},logger:Object(P["a"])({state:t}),telemeter:Object(ye["c"])({state:t}),showNewPeopleSearch:!Object(ce["k"])(t,"seen_people_search"),displayEmailAddresses:Object(Zn["a"])(t,"display_email_addresses"),currentDisplayQuery:Object(Oe["getSearchInputBoxDisplayQuery"])(t),featureFantailNurture:Object($n["a"])(t),shouldIncrementPeopleSearchSeenCount:Object(ce["f"])(t),featureSearchResultsVirtualized:Object(K["isFeatureEnabled"])(t,"feature_search_results_virtualized"),useFuzzyMatch:N(t,r)}};var bi=function e(t){return{setSort:function e(){return t(Dt.apply(void 0,arguments))},setViewScrollPosition:function e(){return t(M["M"].apply(void 0,arguments))},setPageForModule:function e(){return t(M["u"].apply(void 0,arguments))},fetchSearchResultsByModule:function e(){return t(L["d"].apply(void 0,arguments))},clogSearchPeopleClick:function e(){return t(R["l"].apply(void 0,arguments))},clogSearchNextPage:function e(){return t(R["j"].apply(void 0,arguments))},clogSearchPreviousPage:function e(){return t(R["m"].apply(void 0,arguments))},markPeopleSearchSeen:function e(){return t(L["j"].apply(void 0,arguments))},incrementPeopleSearchSeenCount:function e(){return t(L["e"].apply(void 0,arguments))},showMemberProfile:function e(){return t(Y["k"].apply(void 0,arguments))},closeSearch:function e(){return t(Q["a"].apply(void 0,arguments))},startImByMemberId:function e(){return t(Xn["startImByMemberId"].apply(void 0,arguments))},enqueueToast:function e(){return t(Sn["enqueueToast"].apply(void 0,arguments))},openSearchFeedbackDialog:function e(){return t(L["r"].apply(void 0,arguments))}}};var gi=Object(g["connect"])(fi,bi)(vi);var _i=a(2791);var yi=a(2476);var Oi={usePrimarySearch:false};var ki=function(e){p()(t,e);function t(){n()(this,t);return l()(this,u()(t).apply(this,arguments))}s()(t,[{key:"renderCurrentView",value:function e(){switch(this.props.tab){case"messages":return h.a.createElement(un,{onClickRefreshSearch:this.props.onClickRefreshSearch});case"files":return h.a.createElement(On,{onClickRefreshSearch:this.props.onClickRefreshSearch});case"channels":return h.a.createElement(Qn,{onClickRefreshSearch:this.props.onClickRefreshSearch});case"people":return h.a.createElement(gi,{onClickRefreshSearch:this.props.onClickRefreshSearch});default:return null}}},{key:"render",value:function e(){var t=b()("c-search__container",{"c-search__container--primary_search_sonic":this.props.usePrimarySearch&&Object(O["a"])(),"c-search__container--primary_search_legacy":this.props.usePrimarySearch&&!Object(O["a"])()});return h.a.createElement(k["a"],{id:E["MESSAGE_CONTAINERS"].SEARCH},h.a.createElement("div",{className:t},h.a.createElement("div",{className:b()("c-search"),"data-qa":"search_view"},!this.props.usePrimarySearch&&h.a.createElement(_i["a"],null),this.renderCurrentView())))}}]);return t}(m["PureComponent"]);ki.displayName="SearchView";ki.defaultProps=Oi;var Ei=function e(t){return{tab:Object(_["u"])(t),usePrimarySearch:Object(y["a"])(t)}};var Ci=t["a"]=Object(g["connect"])(Ei)(ki)},function(e,t,a){"use strict";a.d(t,"b",function(){return n});a.d(t,"c",function(){return i});a.d(t,"a",function(){return s});var r=a(1145);function n(e){return e===r["d"].REQUESTS}function i(e){return e===r["d"].PENDING}function s(e){return e===r["d"].ACCEPTED}},function(e,t,a){},,,function(e,t,a){"use strict";a.d(t,"a",function(){return i});var r=a(80);var n=a(187);function i(e){return"treatment"===Object(r["getGroupForUser"])(e,"live_unfurls")&&Object(n["k"])(e)&&Object(n["g"])(e)}},,function(e,t,a){},,function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(12);var s=a(156);var o=a(26);var l=a(121);var c=a(505);var u=a(80);var d=a(88);var p=a.n(d);var m=a(2);var h=a.n(m);var v=a(365);var f=a.n(v);function b(e){b="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};return b(e)}function g(e){return"function"===typeof e}function _(){}function y(e){return"object"===b(e)&&null!==e}function O(e){if(!y(e))return false;if(null===Object.getPrototypeOf(e))return true;var t=e;while(null!==Object.getPrototypeOf(t))t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function k(e,t,a){var r=a.getRegistry();var n=r.addTarget(e,t);return[n,function(){return r.removeTarget(n)}]}function E(e,t,a){var r=a.getRegistry();var n=r.addSource(e,t);return[n,function(){return r.removeSource(n)}]}function C(e){C="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};return C(e)}function S(e,t){return"string"===typeof e||"symbol"===C(e)||!!t&&Array.isArray(e)&&e.every(function(e){return S(e,false)})}var w=a(4897);var j=a.n(w);function I(e,t){"function"===typeof e?e(t):e.current=t}function T(e,t){var a=e.ref;f()("string"!==typeof a,"Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://facebook.github.io/react/docs/more-about-refs.html#the-ref-callback-attribute");return a?Object(r["cloneElement"])(e,{ref:function e(r){I(a,r);I(t,r)}}):Object(r["cloneElement"])(e,{ref:t})}function A(e){if("string"===typeof e.type)return;var t=e.type.displayName||e.type.name||"the component";throw new Error("Only native element nodes can now be passed to React DnD connectors."+"You can either wrap ".concat(t," into a <div>, or turn it into a ")+"drag source or a drop target itself.")}function N(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!Object(r["isValidElement"])(t)){var n=t;e(n,a);return n}var i=t;A(i);var s=a?function(t){return e(t,a)}:e;return T(i,s)}}function P(e){var t={};Object.keys(e).forEach(function(a){var r=e[a];if(a.endsWith("Ref"))t[a]=e[a];else{var n=N(r);t[a]=function(){return n}}});return t}function M(e){M="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};return M(e)}function D(e){return null!==e&&"object"===M(e)&&e.hasOwnProperty("current")}function x(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function R(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||false;r.configurable=true;"value"in r&&(r.writable=true);Object.defineProperty(e,r.key,r)}}function F(e,t,a){t&&R(e.prototype,t);a&&R(e,a);return e}var L=function(){function e(t){var a=this;x(this,e);this.hooks=P({dropTarget:function e(t,r){a.clearDropTarget();a.dropTargetOptions=r;D(t)?a.dropTargetRef=t:a.dropTargetNode=t;a.reconnect()}});this.handlerId=null;this.dropTargetRef=null;this.dropTargetOptionsInternal=null;this.lastConnectedHandlerId=null;this.lastConnectedDropTarget=null;this.lastConnectedDropTargetOptions=null;this.backend=t}F(e,[{key:"reconnect",value:function e(){var t=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();t&&this.disconnectDropTarget();var a=this.dropTarget;if(!this.handlerId)return;if(!a){this.lastConnectedDropTarget=a;return}if(t){this.lastConnectedHandlerId=this.handlerId;this.lastConnectedDropTarget=a;this.lastConnectedDropTargetOptions=this.dropTargetOptions;this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,a,this.dropTargetOptions)}}},{key:"receiveHandlerId",value:function e(t){if(t===this.handlerId)return;this.handlerId=t;this.reconnect()}},{key:"didHandlerIdChange",value:function e(){return this.lastConnectedHandlerId!==this.handlerId}},{key:"didDropTargetChange",value:function e(){return this.lastConnectedDropTarget!==this.dropTarget}},{key:"didOptionsChange",value:function e(){return!j()(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}},{key:"disconnectDropTarget",value:function e(){if(this.unsubscribeDropTarget){this.unsubscribeDropTarget();this.unsubscribeDropTarget=void 0}}},{key:"clearDropTarget",value:function e(){this.dropTargetRef=null;this.dropTargetNode=null}},{key:"connectTarget",get:function e(){return this.dropTarget}},{key:"dropTargetOptions",get:function e(){return this.dropTargetOptionsInternal},set:function e(t){this.dropTargetOptionsInternal=t}},{key:"dropTarget",get:function e(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}}]);return e}();function U(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function B(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||false;r.configurable=true;"value"in r&&(r.writable=true);Object.defineProperty(e,r.key,r)}}function q(e,t,a){t&&B(e.prototype,t);a&&B(e,a);return e}var G=false;var H=function(){function e(t){U(this,e);this.targetId=null;this.internalMonitor=t.getMonitor()}q(e,[{key:"receiveHandlerId",value:function e(t){this.targetId=t}},{key:"getHandlerId",value:function e(){return this.targetId}},{key:"subscribeToStateChange",value:function e(t,a){return this.internalMonitor.subscribeToStateChange(t,a)}},{key:"canDrop",value:function e(){if(!this.targetId)return false;f()(!G,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{G=true;return this.internalMonitor.canDropOnTarget(this.targetId)}finally{G=false}}},{key:"isOver",value:function e(t){if(!this.targetId)return false;return this.internalMonitor.isOverTarget(this.targetId,t)}},{key:"getItemType",value:function e(){return this.internalMonitor.getItemType()}},{key:"getItem",value:function e(){return this.internalMonitor.getItem()}},{key:"getDropResult",value:function e(){return this.internalMonitor.getDropResult()}},{key:"didDrop",value:function e(){return this.internalMonitor.didDrop()}},{key:"getInitialClientOffset",value:function e(){return this.internalMonitor.getInitialClientOffset()}},{key:"getInitialSourceClientOffset",value:function e(){return this.internalMonitor.getInitialSourceClientOffset()}},{key:"getSourceClientOffset",value:function e(){return this.internalMonitor.getSourceClientOffset()}},{key:"getClientOffset",value:function e(){return this.internalMonitor.getClientOffset()}},{key:"getDifferenceFromInitialOffset",value:function e(){return this.internalMonitor.getDifferenceFromInitialOffset()}}]);return e}();function W(e){var t=e.current;return null==t?null:t.decoratedRef?t.decoratedRef.current:t}function V(e){return e&&e.prototype&&"function"===typeof e.prototype.render}function K(e){return e&&e.$$typeof&&"Symbol(react.forward_ref)"===e.$$typeof.toString()}function z(e){return V(e)||K(e)}function Q(e,t){var a,r;false}var Y=a(4979);var J=a.n(Y);var X=a(296);var Z="dnd-core/INIT_COORDS";var $="dnd-core/BEGIN_DRAG";var ee="dnd-core/PUBLISH_DRAG_SOURCE";var te="dnd-core/HOVER";var ae="dnd-core/DROP";var re="dnd-core/END_DRAG";var ne=function e(t,a){return t===a};function ie(e,t){return!e&&!t||!(!e||!t)&&(e.x===t.x&&e.y===t.y)}function se(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ne;if(e.length!==t.length)return false;for(var r=0;r<e.length;++r)if(!a(e[r],t[r]))return false;return true}function oe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function le(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(a),true).forEach(function(t){ce(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):oe(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function ce(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:true,configurable:true,writable:true}):e[t]=a;return e}var ue={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function de(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue;var t=arguments.length>1?arguments[1]:void 0;var a=t.payload;switch(t.type){case Z:case $:return{initialSourceClientOffset:a.sourceClientOffset,initialClientOffset:a.clientOffset,clientOffset:a.clientOffset};case te:if(ie(e.clientOffset,a.clientOffset))return e;return le({},e,{clientOffset:a.clientOffset});case re:case ae:return ue;default:return e}}var pe="dnd-core/ADD_SOURCE";var me="dnd-core/ADD_TARGET";var he="dnd-core/REMOVE_SOURCE";var ve="dnd-core/REMOVE_TARGET";function fe(e){return{type:pe,payload:{sourceId:e}}}function be(e){return{type:me,payload:{targetId:e}}}function ge(e){return{type:he,payload:{sourceId:e}}}function _e(e){return{type:ve,payload:{targetId:e}}}function ye(e){ye="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};return ye(e)}function Oe(e,t,a){return t.split(".").reduce(function(e,t){return e&&e[t]?e[t]:a||null},e)}function ke(e,t){return e.filter(function(e){return e!==t})}function Ee(e){return"string"===typeof e}function Ce(e){return"object"===ye(e)}function Se(e,t){var a=new Map;var r=function e(t){return a.set(t,a.has(t)?a.get(t)+1:1)};e.forEach(r);t.forEach(r);var n=[];a.forEach(function(e,t){1===e&&n.push(t)});return n}function we(e,t){return e.filter(function(e){return t.indexOf(e)>-1})}function je(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function Ie(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?je(Object(a),true).forEach(function(t){Te(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):je(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function Te(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:true,configurable:true,writable:true}):e[t]=a;return e}var Ae={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:false,isSourcePublic:null};function Ne(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ae;var t=arguments.length>1?arguments[1]:void 0;var a=t.payload;switch(t.type){case $:return Ie({},e,{itemType:a.itemType,item:a.item,sourceId:a.sourceId,isSourcePublic:a.isSourcePublic,dropResult:null,didDrop:false});case ee:return Ie({},e,{isSourcePublic:true});case te:return Ie({},e,{targetIds:a.targetIds});case ve:if(-1===e.targetIds.indexOf(a.targetId))return e;return Ie({},e,{targetIds:ke(e.targetIds,a.targetId)});case ae:return Ie({},e,{dropResult:a.dropResult,didDrop:true,targetIds:[]});case re:return Ie({},e,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:false,isSourcePublic:null,targetIds:[]});default:return e}}function Pe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;var t=arguments.length>1?arguments[1]:void 0;switch(t.type){case pe:case me:return e+1;case he:case ve:return e-1;default:return e}}var Me=[];var De=[];Me.__IS_NONE__=true;De.__IS_ALL__=true;function xe(e,t){if(e===Me)return false;if(e===De||"undefined"===typeof t)return true;var a=we(t,e);return a.length>0}function Re(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Me;var t=arguments.length>1?arguments[1]:void 0;switch(t.type){case te:break;case pe:case me:case ve:case he:return Me;case $:case ee:case re:case ae:default:return De}var a=t.payload,r=a.targetIds,n=void 0===r?[]:r,i=a.prevTargetIds,s=void 0===i?[]:i;var o=Se(n,s);var l=o.length>0||!se(n,s);if(!l)return Me;var c=s[s.length-1];var u=n[n.length-1];if(c!==u){c&&o.push(c);u&&o.push(u)}return o}function Fe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e+1}function Le(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function Ue(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Le(Object(a),true).forEach(function(t){Be(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Le(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function Be(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:true,configurable:true,writable:true}):e[t]=a;return e}function qe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t=arguments.length>1?arguments[1]:void 0;return{dirtyHandlerIds:Re(e.dirtyHandlerIds,{type:t.type,payload:Ue({},t.payload,{prevTargetIds:Oe(e,"dragOperation.targetIds",[])})}),dragOffset:de(e.dragOffset,t),refCount:Pe(e.refCount,t),dragOperation:Ne(e.dragOperation,t),stateId:Fe(e.stateId)}}var Ge=a(4488);var He=a.n(Ge);function We(e,t){return{type:Z,payload:{sourceClientOffset:t||null,clientOffset:e||null}}}var Ve={type:Z,payload:{clientOffset:null,sourceClientOffset:null}};function Ke(e){return function t(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{publishSource:true};var n=r.publishSource,i=void 0===n||n,s=r.clientOffset,o=r.getSourceClientOffset;var l=e.getMonitor();var c=e.getRegistry();e.dispatch(We(s));ze(a,l,c);var u=Je(a,l);if(null===u){e.dispatch(Ve);return}var d=null;if(s){Qe(o);d=o(u)}e.dispatch(We(s,d));var p=c.getSource(u);var m=p.beginDrag(l,u);Ye(m);c.pinSource(u);var h=c.getSourceType(u);return{type:$,payload:{itemType:h,item:m,sourceId:u,clientOffset:s||null,sourceClientOffset:d||null,isSourcePublic:!!i}}}}function ze(e,t,a){He()(!t.isDragging(),"Cannot call beginDrag while dragging.");e.forEach(function(e){He()(a.getSource(e),"Expected sourceIds to be registered.")})}function Qe(e){He()("function"===typeof e,"When clientOffset is provided, getSourceClientOffset must be a function.")}function Ye(e){He()(Ce(e),"Item must be an object.")}function Je(e,t){var a=null;for(var r=e.length-1;r>=0;r--)if(t.canDragSource(e[r])){a=e[r];break}return a}function Xe(e){return function t(){var a=e.getMonitor();if(a.isDragging())return{type:ee}}}function Ze(e,t){if(null===t)return null===e;return Array.isArray(e)?e.some(function(e){return e===t}):e===t}function $e(e){return function t(a){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.clientOffset;et(a);var i=a.slice(0);var s=e.getMonitor();var o=e.getRegistry();tt(i,s,o);var l=s.getItemType();at(i,o,l);rt(i,s,o);return{type:te,payload:{targetIds:i,clientOffset:n||null}}}}function et(e){He()(Array.isArray(e),"Expected targetIds to be an array.")}function tt(e,t,a){He()(t.isDragging(),"Cannot call hover while not dragging.");He()(!t.didDrop(),"Cannot call hover after drop.");for(var r=0;r<e.length;r++){var n=e[r];He()(e.lastIndexOf(n)===r,"Expected targetIds to be unique in the passed array.");var i=a.getTarget(n);He()(i,"Expected targetIds to be registered.")}}function at(e,t,a){for(var r=e.length-1;r>=0;r--){var n=e[r];var i=t.getTargetType(n);Ze(i,a)||e.splice(r,1)}}function rt(e,t,a){e.forEach(function(e){var r=a.getTarget(e);r.hover(t,e)})}function nt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function it(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?nt(Object(a),true).forEach(function(t){st(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):nt(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function st(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:true,configurable:true,writable:true}):e[t]=a;return e}function ot(e){return function t(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var r=e.getMonitor();var n=e.getRegistry();lt(r);var i=dt(r);i.forEach(function(t,i){var s=ct(t,i,n,r);var o={type:ae,payload:{dropResult:it({},a,{},s)}};e.dispatch(o)})}}function lt(e){He()(e.isDragging(),"Cannot call drop while not dragging.");He()(!e.didDrop(),"Cannot call drop twice during one drag operation.")}function ct(e,t,a,r){var n=a.getTarget(e);var i=n?n.drop(r,e):void 0;ut(i);"undefined"===typeof i&&(i=0===t?{}:r.getDropResult());return i}function ut(e){He()("undefined"===typeof e||Ce(e),"Drop result must either be an object or undefined.")}function dt(e){var t=e.getTargetIds().filter(e.canDropOnTarget,e);t.reverse();return t}function pt(e){return function t(){var a=e.getMonitor();var r=e.getRegistry();mt(a);var n=a.getSourceId();var i=r.getSource(n,true);i.endDrag(a,n);r.unpinSource();return{type:re}}}function mt(e){He()(e.isDragging(),"Cannot call endDrag while not dragging.")}function ht(e){return{beginDrag:Ke(e),publishDragSource:Xe(e),hover:$e(e),drop:ot(e),endDrag:pt(e)}}function vt(e,t){return{x:e.x+t.x,y:e.y+t.y}}function ft(e,t){return{x:e.x-t.x,y:e.y-t.y}}function bt(e){var t=e.clientOffset,a=e.initialClientOffset,r=e.initialSourceClientOffset;if(!t||!a||!r)return null;return ft(vt(t,r),a)}function gt(e){var t=e.clientOffset,a=e.initialClientOffset;if(!t||!a)return null;return ft(t,a)}function _t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yt(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||false;r.configurable=true;"value"in r&&(r.writable=true);Object.defineProperty(e,r.key,r)}}function Ot(e,t,a){t&&yt(e.prototype,t);a&&yt(e,a);return e}var kt=function(){function e(t,a){_t(this,e);this.store=t;this.registry=a}Ot(e,[{key:"subscribeToStateChange",value:function e(t){var a=this;var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{handlerIds:void 0};var n=r.handlerIds;He()("function"===typeof t,"listener must be a function.");He()("undefined"===typeof n||Array.isArray(n),"handlerIds, when specified, must be an array of strings.");var i=this.store.getState().stateId;var s=function e(){var r=a.store.getState();var s=r.stateId;try{var o=s===i||s===i+1&&!xe(r.dirtyHandlerIds,n);o||t()}finally{i=s}};return this.store.subscribe(s)}},{key:"subscribeToOffsetChange",value:function e(t){var a=this;He()("function"===typeof t,"listener must be a function.");var r=this.store.getState().dragOffset;var n=function e(){var n=a.store.getState().dragOffset;if(n===r)return;r=n;t()};return this.store.subscribe(n)}},{key:"canDragSource",value:function e(t){if(!t)return false;var a=this.registry.getSource(t);He()(a,"Expected to find a valid source.");if(this.isDragging())return false;return a.canDrag(this,t)}},{key:"canDropOnTarget",value:function e(t){if(!t)return false;var a=this.registry.getTarget(t);He()(a,"Expected to find a valid target.");if(!this.isDragging()||this.didDrop())return false;var r=this.registry.getTargetType(t);var n=this.getItemType();return Ze(r,n)&&a.canDrop(this,t)}},{key:"isDragging",value:function e(){return Boolean(this.getItemType())}},{key:"isDraggingSource",value:function e(t){if(!t)return false;var a=this.registry.getSource(t,true);He()(a,"Expected to find a valid source.");if(!this.isDragging()||!this.isSourcePublic())return false;var r=this.registry.getSourceType(t);var n=this.getItemType();if(r!==n)return false;return a.isDragging(this,t)}},{key:"isOverTarget",value:function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shallow:false};if(!t)return false;var r=a.shallow;if(!this.isDragging())return false;var n=this.registry.getTargetType(t);var i=this.getItemType();if(i&&!Ze(n,i))return false;var s=this.getTargetIds();if(!s.length)return false;var o=s.indexOf(t);return r?o===s.length-1:o>-1}},{key:"getItemType",value:function e(){return this.store.getState().dragOperation.itemType}},{key:"getItem",value:function e(){return this.store.getState().dragOperation.item}},{key:"getSourceId",value:function e(){return this.store.getState().dragOperation.sourceId}},{key:"getTargetIds",value:function e(){return this.store.getState().dragOperation.targetIds}},{key:"getDropResult",value:function e(){return this.store.getState().dragOperation.dropResult}},{key:"didDrop",value:function e(){return this.store.getState().dragOperation.didDrop}},{key:"isSourcePublic",value:function e(){return this.store.getState().dragOperation.isSourcePublic}},{key:"getInitialClientOffset",value:function e(){return this.store.getState().dragOffset.initialClientOffset}},{key:"getInitialSourceClientOffset",value:function e(){return this.store.getState().dragOffset.initialSourceClientOffset}},{key:"getClientOffset",value:function e(){return this.store.getState().dragOffset.clientOffset}},{key:"getSourceClientOffset",value:function e(){return bt(this.store.getState().dragOffset)}},{key:"getDifferenceFromInitialOffset",value:function e(){return gt(this.store.getState().dragOffset)}}]);return e}();var Et=a(4982);var Ct=a.n(Et);var St=0;function wt(){return St++}var jt;(function(e){e["SOURCE"]="SOURCE";e["TARGET"]="TARGET"})(jt||(jt={}));function It(e){It="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};return It(e)}function Tt(e){He()("function"===typeof e.canDrag,"Expected canDrag to be a function.");He()("function"===typeof e.beginDrag,"Expected beginDrag to be a function.");He()("function"===typeof e.endDrag,"Expected endDrag to be a function.")}function At(e){He()("function"===typeof e.canDrop,"Expected canDrop to be a function.");He()("function"===typeof e.hover,"Expected hover to be a function.");He()("function"===typeof e.drop,"Expected beginDrag to be a function.")}function Nt(e,t){if(t&&Array.isArray(e)){e.forEach(function(e){return Nt(e,false)});return}He()("string"===typeof e||"symbol"===It(e),t?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}function Pt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Mt(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||false;r.configurable=true;"value"in r&&(r.writable=true);Object.defineProperty(e,r.key,r)}}function Dt(e,t,a){t&&Mt(e.prototype,t);a&&Mt(e,a);return e}function xt(e,t){return Lt(e)||Ft(e,t)||Rt()}function Rt(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function Ft(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var a=[];var r=true;var n=false;var i=void 0;try{for(var s=e[Symbol.iterator](),o;!(r=(o=s.next()).done);r=true){a.push(o.value);if(t&&a.length===t)break}}catch(e){n=true;i=e}finally{try{r||null==s["return"]||s["return"]()}finally{if(n)throw i}}return a}function Lt(e){if(Array.isArray(e))return e}function Ut(e){var t=wt().toString();switch(e){case jt.SOURCE:return"S".concat(t);case jt.TARGET:return"T".concat(t);default:throw new Error("Unknown Handler Role: ".concat(e))}}function Bt(e){switch(e[0]){case"S":return jt.SOURCE;case"T":return jt.TARGET;default:He()(false,"Cannot parse handler ID: ".concat(e))}}function qt(e,t){var a=e.entries();var r=false;do{var n=a.next(),i=n.done,s=xt(n.value,2),o=s[1];if(o===t)return true;r=!!i}while(!r);return false}var Gt=function(){function e(t){Pt(this,e);this.types=new Map;this.dragSources=new Map;this.dropTargets=new Map;this.pinnedSourceId=null;this.pinnedSource=null;this.store=t}Dt(e,[{key:"addSource",value:function e(t,a){Nt(t);Tt(a);var r=this.addHandler(jt.SOURCE,t,a);this.store.dispatch(fe(r));return r}},{key:"addTarget",value:function e(t,a){Nt(t,true);At(a);var r=this.addHandler(jt.TARGET,t,a);this.store.dispatch(be(r));return r}},{key:"containsHandler",value:function e(t){return qt(this.dragSources,t)||qt(this.dropTargets,t)}},{key:"getSource",value:function e(t){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];He()(this.isSourceId(t),"Expected a valid source ID.");var r=a&&t===this.pinnedSourceId;var n=r?this.pinnedSource:this.dragSources.get(t);return n}},{key:"getTarget",value:function e(t){He()(this.isTargetId(t),"Expected a valid target ID.");return this.dropTargets.get(t)}},{key:"getSourceType",value:function e(t){He()(this.isSourceId(t),"Expected a valid source ID.");return this.types.get(t)}},{key:"getTargetType",value:function e(t){He()(this.isTargetId(t),"Expected a valid target ID.");return this.types.get(t)}},{key:"isSourceId",value:function e(t){var a=Bt(t);return a===jt.SOURCE}},{key:"isTargetId",value:function e(t){var a=Bt(t);return a===jt.TARGET}},{key:"removeSource",value:function e(t){var a=this;He()(this.getSource(t),"Expected an existing source.");this.store.dispatch(ge(t));Ct()(function(){a.dragSources.delete(t);a.types.delete(t)})}},{key:"removeTarget",value:function e(t){He()(this.getTarget(t),"Expected an existing target.");this.store.dispatch(_e(t));this.dropTargets.delete(t);this.types.delete(t)}},{key:"pinSource",value:function e(t){var a=this.getSource(t);He()(a,"Expected an existing source.");this.pinnedSourceId=t;this.pinnedSource=a}},{key:"unpinSource",value:function e(){He()(this.pinnedSource,"No source is pinned at the time.");this.pinnedSourceId=null;this.pinnedSource=null}},{key:"addHandler",value:function e(t,a,r){var n=Ut(t);this.types.set(n,a);t===jt.SOURCE?this.dragSources.set(n,r):t===jt.TARGET&&this.dropTargets.set(n,r);return n}}]);return e}();function Ht(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Wt(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||false;r.configurable=true;"value"in r&&(r.writable=true);Object.defineProperty(e,r.key,r)}}function Vt(e,t,a){t&&Wt(e.prototype,t);a&&Wt(e,a);return e}function Kt(e){var t="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__;return Object(X["createStore"])(qe,e&&t&&t({name:"dnd-core",instanceId:"dnd-core"}))}var zt=function(){function e(){var t=this;var a=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Ht(this,e);this.isSetUp=false;this.handleRefCountChange=function(){var e=t.store.getState().refCount>0;if(t.backend)if(e&&!t.isSetUp){t.backend.setup();t.isSetUp=true}else if(!e&&t.isSetUp){t.backend.teardown();t.isSetUp=false}};var r=Kt(a);this.store=r;this.monitor=new kt(r,new Gt(r));r.subscribe(this.handleRefCountChange)}Vt(e,[{key:"receiveBackend",value:function e(t){this.backend=t}},{key:"getMonitor",value:function e(){return this.monitor}},{key:"getBackend",value:function e(){return this.backend}},{key:"getRegistry",value:function e(){return this.monitor.registry}},{key:"getActions",value:function e(){var t=this;var a=this.store.dispatch;function r(e){return function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];var s=e.apply(t,n);"undefined"!==typeof s&&a(s)}}var n=ht(this);return Object.keys(n).reduce(function(e,t){var a=n[t];e[t]=r(a);return e},{})}},{key:"dispatch",value:function e(t){this.store.dispatch(t)}}]);return e}();function Qt(e,t,a,r){var n=new zt(r);var i=e(n,t,a);n.receiveBackend(i);return n}var Yt=r["createContext"]({dragDropManager:void 0});function Jt(e,t,a,r){return{dragDropManager:Qt(e,t,a,r)}}function Xt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Zt(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||false;r.configurable=true;"value"in r&&(r.writable=true);Object.defineProperty(e,r.key,r)}}function $t(e,t,a){t&&Zt(e.prototype,t);a&&Zt(e,a);return e}var ea=function(){function e(t){Xt(this,e);this.isDisposed=false;this.action=g(t)?t:_}$t(e,[{key:"dispose",value:function e(){if(!this.isDisposed){this.action();this.isDisposed=true}}}],[{key:"isDisposable",value:function e(t){return t&&g(t.dispose)}},{key:"_fixup",value:function t(a){return e.isDisposable(a)?a:e.empty}},{key:"create",value:function t(a){return new e(a)}}]);return e}();ea.empty={dispose:_};var ta=function(){function e(){Xt(this,e);this.isDisposed=false;for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];this.disposables=a}$t(e,[{key:"add",value:function e(t){this.isDisposed?t.dispose():this.disposables.push(t)}},{key:"remove",value:function e(t){var a=false;if(!this.isDisposed){var r=this.disposables.indexOf(t);if(-1!==r){a=true;this.disposables.splice(r,1);t.dispose()}}return a}},{key:"clear",value:function e(){if(!this.isDisposed){var t=this.disposables.length;var a=new Array(t);for(var r=0;r<t;r++)a[r]=this.disposables[r];this.disposables=[];for(var n=0;n<t;n++)a[n].dispose()}}},{key:"dispose",value:function e(){if(!this.isDisposed){this.isDisposed=true;var t=this.disposables.length;var a=new Array(t);for(var r=0;r<t;r++)a[r]=this.disposables[r];this.disposables=[];for(var n=0;n<t;n++)a[n].dispose()}}}]);return e}();var aa=function(){function e(){Xt(this,e);this.isDisposed=false}$t(e,[{key:"getDisposable",value:function e(){return this.current}},{key:"setDisposable",value:function e(t){var a=this.isDisposed;if(!a){var r=this.current;this.current=t;r&&r.dispose()}a&&t&&t.dispose()}},{key:"dispose",value:function e(){if(!this.isDisposed){this.isDisposed=true;var t=this.current;this.current=void 0;t&&t.dispose()}}}]);return e}();function ra(e){ra="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};return ra(e)}function na(e,t){return oa(e)||sa(e,t)||ia()}function ia(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function sa(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var a=[];var r=true;var n=false;var i=void 0;try{for(var s=e[Symbol.iterator](),o;!(r=(o=s.next()).done);r=true){a.push(o.value);if(t&&a.length===t)break}}catch(e){n=true;i=e}finally{try{r||null==s["return"]||s["return"]()}finally{if(n)throw i}}return a}function oa(e){if(Array.isArray(e))return e}function la(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ca(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||false;r.configurable=true;"value"in r&&(r.writable=true);Object.defineProperty(e,r.key,r)}}function ua(e,t,a){t&&ca(e.prototype,t);a&&ca(e,a);return e}function da(e,t){if(t&&("object"===ra(t)||"function"===typeof t))return t;return pa(e)}function pa(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ma(e){ma=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return ma(e)}function ha(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});t&&va(e,t)}function va(e,t){va=Object.setPrototypeOf||function e(t,a){t.__proto__=a;return t};return va(e,t)}function fa(e){var t=e.DecoratedComponent,a=e.createHandler,n=e.createMonitor,i=e.createConnector,s=e.registerHandler,o=e.containerDisplayName,l=e.getType,c=e.collect,u=e.options;var d=u.arePropsEqual,p=void 0===d?j.a:d;var m=t;var h=t.displayName||t.name||"Component";var v=function(e){ha(t,e);function t(e){var a;la(this,t);a=da(this,ma(t).call(this,e));a.decoratedRef=r["createRef"]();a.handleChange=function(){var e=a.getCurrentState();j()(e,a.state)||a.setState(e)};a.disposable=new aa;a.receiveProps(e);a.dispose();return a}ua(t,[{key:"getHandlerId",value:function e(){return this.handlerId}},{key:"getDecoratedComponentInstance",value:function e(){f()(this.decoratedRef.current,"In order to access an instance of the decorated component, it must either be a class component or use React.forwardRef()");return this.decoratedRef.current}},{key:"shouldComponentUpdate",value:function e(t,a){return!p(t,this.props)||!j()(a,this.state)}},{key:"componentDidMount",value:function e(){this.disposable=new aa;this.currentType=void 0;this.receiveProps(this.props);this.handleChange()}},{key:"componentDidUpdate",value:function e(t){if(!p(this.props,t)){this.receiveProps(this.props);this.handleChange()}}},{key:"componentWillUnmount",value:function e(){this.dispose()}},{key:"receiveProps",value:function e(t){if(!this.handler)return;this.handler.receiveProps(t);this.receiveType(l(t))}},{key:"receiveType",value:function e(t){if(!this.handlerMonitor||!this.manager||!this.handlerConnector)return;if(t===this.currentType)return;this.currentType=t;var a=s(t,this.handler,this.manager),r=na(a,2),n=r[0],i=r[1];this.handlerId=n;this.handlerMonitor.receiveHandlerId(n);this.handlerConnector.receiveHandlerId(n);var o=this.manager.getMonitor();var l=o.subscribeToStateChange(this.handleChange,{handlerIds:[n]});this.disposable.setDisposable(new ta(new ea(l),new ea(i)))}},{key:"dispose",value:function e(){this.disposable.dispose();this.handlerConnector&&this.handlerConnector.receiveHandlerId(null)}},{key:"getCurrentState",value:function e(){if(!this.handlerConnector)return{};var t=c(this.handlerConnector.hooks,this.handlerMonitor,this.props);false;return t}},{key:"render",value:function e(){var t=this;return r["createElement"](Yt.Consumer,null,function(e){var a=e.dragDropManager;t.receiveDragDropManager(a);"undefined"!==typeof requestAnimationFrame&&requestAnimationFrame(function(){return t.handlerConnector.reconnect()});return r["createElement"](m,Object.assign({},t.props,t.getCurrentState(),{ref:z(m)?t.decoratedRef:null}))})}},{key:"receiveDragDropManager",value:function e(t){if(void 0!==this.manager)return;f()(void 0!==t,"Could not find the drag and drop manager in the context of %s. Make sure to render a DndProvider component in your top-level component. Read more: http://react-dnd.github.io/react-dnd/docs/troubleshooting#could-not-find-the-drag-and-drop-manager-in-the-context",h,h);if(void 0===t)return;this.manager=t;this.handlerMonitor=n(t);this.handlerConnector=i(t.getBackend());this.handler=a(this.handlerMonitor,this.decoratedRef)}}]);return t}(r["Component"]);v.DecoratedComponent=t;v.displayName="".concat(o,"(").concat(h,")");return J()(v,t)}function ba(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ga(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||false;r.configurable=true;"value"in r&&(r.writable=true);Object.defineProperty(e,r.key,r)}}function _a(e,t,a){t&&ga(e.prototype,t);a&&ga(e,a);return e}var ya=["canDrop","hover","drop"];var Oa=function(){function e(t,a,r){ba(this,e);this.props=null;this.spec=t;this.monitor=a;this.ref=r}_a(e,[{key:"receiveProps",value:function e(t){this.props=t}},{key:"receiveMonitor",value:function e(t){this.monitor=t}},{key:"canDrop",value:function e(){if(!this.spec.canDrop)return true;return this.spec.canDrop(this.props,this.monitor)}},{key:"hover",value:function e(){if(!this.spec.hover)return;this.spec.hover(this.props,this.monitor,W(this.ref))}},{key:"drop",value:function e(){if(!this.spec.drop)return;var t=this.spec.drop(this.props,this.monitor,this.ref.current);false;return t}}]);return e}();function ka(e){Object.keys(e).forEach(function(t){f()(ya.indexOf(t)>-1,'Expected the drop target specification to only have some of the following keys: %s. Instead received a specification with an unexpected "%s" key. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target',ya.join(", "),t);f()("function"===typeof e[t],"Expected %s in the drop target specification to be a function. Instead received a specification with %s: %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target",t,t,e[t])});return function t(a,r){return new Oa(e,a,r)}}function Ea(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};Q("DropTarget","type, spec, collect[, options]",e,t,a,r);var n=e;if("function"!==typeof e){f()(S(e,true),'Expected "type" provided as the first argument to DropTarget to be a string, an array of strings, or a function that returns either given the current props. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target',e);n=function t(){return e}}f()(O(t),'Expected "spec" provided as the second argument to DropTarget to be a plain object. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target',t);var i=ka(t);f()("function"===typeof a,'Expected "collect" provided as the third argument to DropTarget to be a function that returns a plain object of props to inject. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target',a);f()(O(r),'Expected "options" provided as the fourth argument to DropTarget to be a plain object when specified. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target',a);return function e(t){return fa({containerDisplayName:"DropTarget",createHandler:i,registerHandler:k,createMonitor:function e(t){return new H(t)},createConnector:function e(t){return new L(t)},DecoratedComponent:t,getType:n,collect:a,options:r})}}var Ca=a(16);var Sa=a(61);var wa=a(104);var ja=a(439);var Ia=a(1146);var Ta=a(38);var Aa=a(187);var Na=a(122);var Pa=a(20);var Ma=a(9);var Da=a(17);var xa=a(221);var Ra=a(214);var Fa=a(520);var La=a(285);var Ua=a(25);var Ba=a(11);var qa=a(847);var Ga=a(87);var Ha=a(211);var Wa=a(302);var Va=a(35);var Ka=a(14);function za(e){var t={};e.forEach(function(e){t[e.channelSectionId]=e.channelIds});return t}var Qa=a(566);var Ya=a(647);var Ja=a(18);var Xa=a(34);var Za=a(915);var $a=Object(Ja["b"])("Ensure channels with drafts exist in our model",function(e,t){var a=t();var r=Object(Ca["a"])({state:a,label:"DRAFTS"});var n=Object(Xa["a"])()?Object(Aa["a"])(a):Object(Za["e"])();if(Object(m["isEmpty"])(n)){r.info("There are no channels with drafts");return}r.info("Ensuring we have channel objects for all channels with drafts");n.forEach(function(e){Object(Pa["e"])(a,e)})});$a.meta={name:"ensureDraftChannelObjects",key:"actionsEnsureDraftChannelObjectsEnsureDraftChannelObjects",description:"Ensure channels with drafts exist in our model"};$a.propTypes=null;var er=$a;var tr=a(21);var ar=a(906);var rr=a(195);var nr=a(921);var ir=a(831);var sr=a(774);function or(e){return Object(sr["a"])(e)&&!Object(Da["isRestricted"])(Object(Ua["b"])(e))}var lr=a(459);var cr=a(1426);var ur=a(0);var dr=a(6);var pr=a(94);var mr=a(106);var hr=a(90);var vr=a(218);var fr=a.n(vr);var br=a(4687);var gr=a(4869);var _r=a(334);var yr=a(161);var Or=function e(t,a){var r=Object(cr["b"])(t);var n={};a.forEach(function(e){n[e]=Object(cr["f"])(t,e)});var i={};a.forEach(function(e){var a=Object(Pa["e"])(t,e);i[e]=Object(Ma["isStarred"])(a)});var s={};a.forEach(function(e){(n[e]||[]).forEach(function(t){s[t]||(s[t]={channelSectionId:t,channelIds:[]});s[t].channelIds.push(e)})});var o=a.filter(function(e){return i[e]});return Object(m["union"])(Object.values(s),0===o.length?[]:Object.values(r).filter(function(e){return e.type===yr["h"]}).map(function(e){return{channelSectionId:e.id,channelIds:o}}))};var kr=a(168);function Er(){return"local-"+Object(kr["a"])()}var Cr=a(5066);var Sr=a(68);var wr=a(563);var jr=a(925);var Ir=a(440);var Tr=a(1148);function Ar(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function Nr(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ar(Object(a),true).forEach(function(t){p()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ar(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Pr="CHANNEL-SECTIONS";var Mr=Object(m["debounce"])(function(e,t,a){e(Object(jr["f"])({pref:"channel_sections",value:JSON.stringify(t)})).catch(function(){e(Object(Ir["b"])({pref:"channel_sections",value:a}))})},3e3);var Dr=Object(Ja["b"])("Channel Sections: UI action when the collapsed state of a custom section is toggled",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelSectionId,n=a.isCollapsed;var i=t();var s=Object(Ta["k"])(i,"channel_sections");var o=Object(Tr["a"])(Object(Ta["k"])(i,"channel_sections"))||{};o[r]||(o[r]={});o[r][Cr["a"]]=n?"1":"0";e(Object(Ir["b"])({pref:"channel_sections",value:JSON.stringify(o)}));Mr.cancel();Mr(e,o,s)});Dr.meta={name:"setCustomSectionCollapsed",key:"channelSectionsStoreChannelSectionsThunksSetCustomSectionCollapsed",description:"Channel Sections: UI action when the collapsed state of a custom section is toggled"};Dr.propTypes={channelSectionId:ur["default"].string,isCollapsed:ur["default"].bool.isRequired};var xr=Object(Ja["b"])("Channel Sections: UI action when the collapsed state of a custom or default section is toggled",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelSectionId,n=a.defaultSectionName,i=a.isCollapsed;e(n?Object(_r["f"])({defaultSectionName:n,isCollapsed:i}):Dr({channelSectionId:r,isCollapsed:i}))});xr.meta={name:"setSectionCollapsed",key:"channelSectionsStoreChannelSectionsThunksSetSectionCollapsed",description:"Channel Sections: UI action when the collapsed state of a custom or default section is toggled"};xr.propTypes={defaultSectionName:ur["default"].oneOf(yr["a"]),channelSectionId:ur["default"].string,isCollapsed:ur["default"].bool.isRequired};var Rr=Object(Ja["b"])("Channel Sections: bulk delete and add channels to channel sections section",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.remove,n=void 0===r?[]:r,i=a.insert,s=void 0===i?[]:i;var o=t();var l={};var c={};n.forEach(function(e){e.channelIds.forEach(function(t){l[t]||(l[t]={});l[t][e.channelSectionId]=true})});s.forEach(function(e){e.channelIds.forEach(function(t){if(l[t]&&l[t][e.channelSectionId]){c[e.channelSectionId]||(c[e.channelSectionId]=new Set);c[e.channelSectionId].add(t)}})});var u=n.map(function(e){if(c[e.channelSectionId])return Nr({},e,{channelIds:e.channelIds.filter(function(t){return!c[e.channelSectionId].has(t)})});return e}).filter(function(e){return e.channelIds.length>0});var d=s.map(function(e){if(c[e.channelSectionId])return Nr({},e,{channelIds:e.channelIds.filter(function(t){return!c[e.channelSectionId].has(t)})});return e}).filter(function(e){return e.channelIds.length>0});var p=function e(t,a){var r=Object(cr["h"])(o,a.channelSectionId);if(r&&r.type){t[r.type]||(t[r.type]=[]);t[r.type].push(a)}return t};var m=u.reduce(p,{});var h=d.reduce(p,{});var v=m[yr["g"]]||[];var f=h[yr["g"]]||[];var b=m[yr["h"]]||[];var g=h[yr["h"]]||[];v.forEach(function(a){var r=a.channelSectionId,n=a.channelIds;var i=new Set(n);var s=Object(cr["i"])(t(),r);e(Object(_r["e"])({channelSectionId:r,channelIds:s.filter(function(e){return!i.has(e)})}))});f.forEach(function(t){e(Object(_r["m"])(t))});var _=[];var y=[];b.forEach(function(t){var a=t.channelIds;_.push.apply(_,fr()(a.map(function(t){var a=e(Object(wr["a"])(false,{channel:t}));a.then(function(){y.push(function(){return e(Object(wr["a"])(true,{channel:t}))})});return a})))});g.forEach(function(t){var a=t.channelIds;_.push.apply(_,fr()(a.map(function(t){var a=e(Object(wr["a"])(true,{channel:t}));a.then(function(){y.push(function(){return e(Object(wr["a"])(false,{channel:t}))})});return a})))});if(v.length+f.length>0){var O=e(Object(gr["a"])({remove:v,insert:f})).catch(function(a){f.forEach(function(a){var r=a.channelSectionId,n=a.channelIds;var i=new Set(n);var s=Object(cr["i"])(t(),r);e(Object(_r["e"])({channelSectionId:r,channelIds:s.filter(function(e){return!i.has(e)})}))});v.forEach(function(t){e(Object(_r["m"])(t))});throw a}).then(function(){y.push(function(){return e(Object(gr["a"])({remove:f,insert:v}))})});_.push(O)}var k=Promise.all(_).catch(function(e){Object(Ca["a"])({getState:t}).error(Pr,"Failure while performing moveManyChannels",e);throw e});var E=function e(){return Promise.all(y.map(function(e){return e()}))};return{resultPromise:k,undo:E}});Rr.meta={name:"moveManyChannels",key:"channelSectionsStoreChannelSectionsThunksMoveManyChannels",description:"Channel Sections: bulk delete and add channels to channel sections section"};Rr.propTypes={remove:ur["default"].arrayOf(ur["default"].shape({channelSectionId:ur["default"].string.isRequired,channelIds:ur["default"].arrayOf(ur["default"].string).isRequired})),insert:ur["default"].arrayOf(ur["default"].shape({channelSectionId:ur["default"].string.isRequired,channelIds:ur["default"].arrayOf(ur["default"].string).isRequired}))};var Fr=Object(Ja["b"])("Channel Sections: delete a channel section",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelSectionId;var n=t();var i=Object(cr["h"])(n,r);var s=Object(cr["i"])(n,r);e(Object(_r["b"])({channelSectionId:r}));var o=e(Object(gr["e"])({channelSectionId:r})).catch(function(a){var r;if("section_not_found"===(null===(r=a.data)||void 0===r?void 0:r.error))return;Object(Ca["a"])({getState:t}).error(Pr,"Failure while performing deleteChannelSection",a);e(Object(_r["l"])({channelSection:i}));e(Object(_r["m"])({channelSectionId:i.id,channelIds:s}));throw a});var l=i.type!==yr["g"]?void 0:function(){o.cancel();return e(Lr({name:i.name,emoji:i.emoji,nextChannelSectionId:i.nextChannelSectionId})).resultPromise.then(function(t){return e(Rr({insert:[{channelSectionId:t.id,channelIds:s}],delete:[]})).resultPromise})};return{resultPromise:o,undo:l}});Fr.meta={name:"deleteChannelSection",key:"channelSectionsStoreChannelSectionsThunksDeleteChannelSection",description:"Channel Sections: delete a channel section"};Fr.propTypes={channelSectionId:ur["default"].string.isRequired};var Lr=Object(Ja["b"])("Channel Sections: create a new channel section",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.name,n=a.emoji,i=a.nextChannelSectionId,s=void 0===i?null:i;var o=n.startsWith(":")&&n.endsWith(":")?n.slice(1,-1):n;var l={id:Er(),type:yr["g"],name:r,emoji:o,nextChannelSectionId:s};e(Object(_r["l"])({channelSection:l}));var c=e(Object(gr["d"])({name:r,emoji:o,nextChannelSectionId:s})).catch(function(a){Object(Ca["a"])({getState:t}).error(Pr,"Failure while performing createChannelSection",a);e(Object(_r["b"])({channelSectionId:l.id}));throw a});var u;var d=c.then(function(a){u=a.channel_section_id;e(Object(_r["b"])({channelSectionId:l.id}));e(Object(_r["l"])({channelSection:{id:a.channel_section_id,type:yr["g"],name:r,emoji:o,nextChannelSectionId:s}}));return Promise.resolve(Object(cr["h"])(t(),u))});var p=function t(){e(Object(_r["b"])({channelSectionId:l.id}));c.cancel();if(u)return e(Fr({channelSectionId:u})).resultPromise;return Promise.resolve()};return{resultPromise:d,undo:p}});Lr.meta={name:"createChannelSection",key:"channelSectionsStoreChannelSectionsThunksCreateChannelSection",description:"Channel Sections: create a new channel section"};Lr.propTypes={name:ur["default"].string.isRequired,emoji:ur["default"].string.isRequired,nextChannelSectionId:ur["default"].string};var Ur=Object(Ja["b"])("Channel Sections: create a new channel section and move zero or more channels into it",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.name,n=a.emoji,i=a.channelIds;var s=function e(t){return function(e){var a=new br["a"](e.message,{name:e.name,stack:e.stack});a.wrapped=e;a.failureContext=t;throw a}};var o=Object(cr["k"])(t());var l=e(Lr({emoji:n,name:r,nextChannelSectionId:o}));var c;var u=l.resultPromise.catch(s("create")).then(function(a){c=e(Rr({remove:Or(t(),i),insert:[{channelSectionId:a.id,channelIds:i}]}));return c.resultPromise.catch(s("move")).then(function(){return Promise.resolve(a)})});return{resultPromise:u,undo:function e(){if(c){c.resultPromise.cancel();return c.undo().then(function(){return l.undo()})}l.resultPromise.cancel();return l.undo()}}});Ur.meta={name:"moveManyChannelsToNewSection",key:"channelSectionsStoreChannelSectionsThunksMoveManyChannelsToNewSection",description:"Channel Sections: create a new channel section and move zero or more channels into it"};Ur.propTypes={channelIds:ur["default"].arrayOf(ur["default"].string).isRequired,name:ur["default"].string.isRequired,emoji:ur["default"].string.isRequired};var Br=function e(t){if(!t)return t;return t.startsWith(":")&&t.endsWith(":")?t.slice(1,-1):t};var qr=Object(Ja["b"])("Channel Sections: update a channel section",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelSection;var n=t();var i=Object(cr["h"])(n,r.id);var s=Nr({},r,{emoji:Br(r.emoji)});e(Object(_r["l"])({channelSection:s}));var o={channelSectionId:s.id,nextChannelSectionId:s.nextChannelSectionId};s.nextChannelSectionId!==i.nextChannelSectionId&&(o.nextChannelSectionId=s.nextChannelSectionId);if(s.name!==i.name||s.emoji!==i.emoji){o.name=s.name;o.emoji=s.emoji}return e(Object(gr["g"])(o)).catch(function(a){Object(Ca["a"])({getState:t}).error(Pr,"Failure while performing updateChannelSection",a);e(Object(_r["l"])({channelSection:i}));throw a})});qr.meta={name:"updateChannelSection",key:"channelSectionsStoreChannelSectionsThunksUpdateChannelSection",description:"Channel Sections: update a channel section"};qr.propTypes={channelSection:yr["p"].isRequired};var Gr=Object(Ja["b"])("Channel Sections: rename a sidebar section",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelSectionId,n=a.name,i=a.emoji;var s=Object(cr["h"])(t(),r);var o=s.name;var l=s.emoji;var c=e(qr({channelSection:Nr({},s,{name:n,emoji:i})}));var u=function a(){c.cancel();return e(qr({channelSection:Nr({},Object(cr["h"])(t(),r),{name:o,emoji:l})}))};return{resultPromise:c,undo:u}});Gr.meta={name:"renameChannelSection",key:"channelSectionsStoreChannelSectionsThunksRenameChannelSection",description:"Channel Sections: rename a sidebar section"};Gr.propTypes={channelSectionId:ur["default"].string.isRequired,name:ur["default"].string.isRequired,emoji:ur["default"].string.isRequired};var Hr=Object(Ja["b"])("Channel Sections: move a sidebar section to before a target channel/section",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelSectionId,n=a.nextChannelSectionId,i=void 0===n?null:n;var s=Object(cr["h"])(t(),r);var o=s.nextChannelSectionId;var l=e(qr({channelSection:Nr({},s,{nextChannelSectionId:i})}));var c=function a(){l.cancel();return e(qr({channelSection:Nr({},Object(cr["h"])(t(),r),{nextChannelSectionId:o})}))};return{resultPromise:l,undo:c}});Hr.meta={name:"moveChannelSection",key:"channelSectionsStoreChannelSectionsThunksMoveChannelSection",description:"Channel Sections: move a sidebar section to before a target channel/section"};Hr.propTypes={channelSectionId:ur["default"].string.isRequired,nextChannelSectionId:ur["default"].string};var Wr=Object(Ja["b"])("Channel Sections: insert or update a channel within a channel section",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelSectionId,n=a.channelId;var i=Object(cr["h"])(t(),r);if(i.type===yr["h"])return e(Object(wr["a"])(true,{channel:n}));var s=Object(cr["i"])(t());e(Object(_r["m"])({channelSectionId:r,channelIds:[n]}));return e(Object(gr["b"])({channelSectionId:r,channelId:n})).catch(function(){e(Object(_r["e"])({channelSectionId:r,channelIds:s}))})});Wr.meta={name:"upsertChannelSectionChannel",key:"channelSectionsStoreChannelSectionsThunksUpsertChannelSectionChannel",description:"Channel Sections: insert or update a channel within a channel section"};Wr.propTypes={channelSectionId:ur["default"].string.isRequired,channelId:ur["default"].string.isRequired};var Vr=Object(Ja["b"])("Channel Sections: remove a channel from a channel section",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelSectionId,n=a.channelId;var i=Object(cr["h"])(t(),r);if(i.type===yr["h"])return e(Object(wr["a"])(false,{channel:n}));var s=Object(cr["i"])(t());e(Object(_r["d"])({channelSectionId:r,channelIds:[n]}));return e(Object(gr["c"])({channelSectionId:r,channelId:n})).catch(function(){e(Object(_r["e"])({channelSectionId:r,channelIds:s}))})});Vr.meta={name:"removeChannelSectionChannel",key:"channelSectionsStoreChannelSectionsThunksRemoveChannelSectionChannel",description:"Channel Sections: remove a channel from a channel section"};Vr.propTypes={channelSectionId:ur["default"].string.isRequired,channelId:ur["default"].string.isRequired};Object(Sr["exportToGlobalDebugger"])("channelSections",{create:function e(t,a,r,n){return Object(o["b"])(t,Lr({name:a,emoji:r,nextChannelSectionId:n}))},update:function e(t,a,r){return Object(o["b"])(t,qr({channelSectionId:a,channelSection:r}))},deleteSection:function e(t,a){return Object(o["b"])(t,Fr({channelSectionId:a}))},upsertChannel:function e(t,a,r){return Object(o["b"])(t,Wr({channelSectionId:a,channelId:r}))},removeChannel:function e(t,a,r){return Object(o["b"])(t,Vr({channelSectionId:a,channelId:r}))}});var Kr=a(43);var zr=a(2017);var Qr=100;var Yr=500;var Jr=function e(t){var a=Object.keys(Object(cr["b"])(t)).length;return a<Qr};var Xr=a(131);var Zr=new dr["b"]("channel_sidebar");var $r="unknown";var en="too_many_channels";var tn="too_many_operations";var an="unable_to_load";function rn(){return n.a.createElement("span",null,n.a.createElement("strong",null,Zr.rt("Something went wrong.",{fallbackHash:"8d886c0ba6f2b683daba5f19568a316226ce3e4c",fallbackHashNs:"error_boundary"})),Zr.rt(" Reloading Slack might clear things up. If it doesn\u2019t, <a>drop us a line</a>.",{fallbackHash:"99f46a29f44c67fe08e8e384332c3aa38db94c24",fallbackHashNs:"manage_shared_channels"},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.text,a=e.key;return n.a.createElement(Kr["a"],{href:"https://slack.com/help/contact",rel:"noopener noreferrer",key:a},t)}))}rn.displayName="renderGenericError";var nn=Object(pr["e"])("create a channel section and send a toast with undo support",function(e,t){var a;var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=r.error;var s=Object(hr["e"])(t());if(!s)return Promise.resolve();var o=(a={},p()(a,en,function(){return Zr.t("Unfortunately, you can have up to {numMaxChannelsPerSection} conversations in a section \u2014\xa0but no more.",{numMaxChannelsPerSection:Object(dr["n"])(Yr)})}),p()(a,tn,rn),p()(a,$r,rn),p()(a,an,rn),a);var l=o[i];if(!l)return e(Object(zr["a"])());var c=i!==an;return e(Object(mr["enqueueToast"])({element:n.a.createElement(Xr["b"],{position:"bottom-right",fadeDelay:5e3,shouldAutoFade:c,icon:"warning-filled",iconClassName:"sk_raspberry_red margin_right_75"},l())}))});nn.meta={name:"enqueueChannelSectionErrorToast",key:"actionsUiChannelSectionsEnqueueChannelSectionErrorToastEnqueueChannelSectionErrorToast",description:"create a channel section and send a toast with undo support"};var sn=nn;var on=a(110);var ln=a.n(on);var cn=a(135);var un=a.n(cn);var dn=a(169);var pn=a.n(dn);var mn=a(138);var hn=a.n(mn);var vn=a(147);var fn=a.n(vn);var bn=a(185);var gn=a.n(bn);var _n=a(2725);var yn=new dr["b"]("channel_sidebar");var On={undo:void 0,featureDangerouslyGuardIATranslations:false};var kn=function(e){gn()(t,e);function t(e){var a;ln()(this,t);a=pn()(this,hn()(t).call(this,e));a.onClickUndo=a.onClickUndo.bind(fn()(a));a.toastRef=n.a.createRef();return a}un()(t,[{key:"onClickUndo",value:function e(){var t;var a=(null===(t=this.toastRef.current)||void 0===t?void 0:t.getWrappedInstance)?this.toastRef.current.getWrappedInstance():this.toastRef.current;(null===a||void 0===a?void 0:a.hideToast)&&a.hideToast();this.props.undo()}},{key:"render",value:function e(){var t=this.props,a=t.children,r=t.undo,i=t.featureDangerouslyGuardIATranslations;if(!i)return null;return n.a.createElement(Xr["b"],{toastClasses:"p-channel_section_confirmation_toast",ref:this.toastRef,position:"bottom-right",fadeDelay:5e3},n.a.createElement("div",{className:"p-channel_section_confirmation_toast__message"},a,r&&n.a.createElement(n.a.Fragment,null," ",n.a.createElement(Kr["a"],{onClick:this.onClickUndo},yn.t("Undo",{fallbackHash:"39fc72124884d6573e4f9f89585f071ed0782696",fallbackHashNs:"workflow_builder"})))))}}]);return t}(r["PureComponent"]);kn.displayName="ChannelSectionConfirmationToast";kn.defaultProps=On;var En=function e(t){return{featureDangerouslyGuardIATranslations:Object(hr["e"])(t)}};var Cn=Object(i["connect"])(En)(kn);var Sn=Cn;var wn=a(299);var jn=a(99);var In=a(5169);var Tn={};function An(e){var t=e.channelSection;var a=t.name;var r=a.split(" ");var i=r[0];var s=r.length>1?" "+r.slice(1).join(" "):null;return n.a.createElement("span",{className:"p-inline_channel_section"},t.emoji?n.a.createElement(n.a.Fragment,null,n.a.createElement("span",{className:"p-inline_channel_section__lockup"},n.a.createElement(jn["b"],{className:"margin_right_25",text:t.emoji,stopAnimations:true,obeyEmojiMode:false,emojiSize:jn["a"].SMALL,forceDisplay:true,isEmojiInlineWithText:true}),i),s):a)}An.displayName="InlineChannelSection";An.defaultProps=Tn;var Nn=new dr["b"]("channel_sidebar");var Pn=Object(pr["e"])("move channels to different sections with toast & undo support",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.insert,i=a.remove;var s=Object(hr["e"])(t());if(!s)return Promise.resolve();var o=new Set;var l=new Set;var c=new Set;r&&r.forEach(function(e){e.channelIds.forEach(function(e){return c.add(e)});o.add(e.channelSectionId)});i&&i.forEach(function(e){e.channelIds.forEach(function(e){return c.add(e)});l.add(e.channelSectionId)});var u=1===l.size?Object(cr["h"])(t(),Array.from(l)[0]):null;var d=1===o.size?Object(cr["h"])(t(),Array.from(o)[0]):null;var m=1===c.size?Object(Pa["e"])(t(),Array.from(c)[0]):null;var h=e(Rr({insert:r,remove:i})),v=h.resultPromise,f=h.undo;v.catch(function(t){var a;var r={too_many_channels:en,too_many_operations:tn};var n=r[null===(a=t.data)||void 0===a?void 0:a.error]||$r;e(sn({error:n}))});return v.then(function(){var a;a=!m||Object(Ma["isIm"])(m)||Object(Ma["isMpim"])(m)?!d||d.type!==yr["g"]&&d.type!==yr["h"]?!u||u.type!==yr["g"]&&u.type!==yr["h"]?Nn.rt("Moved {numChannels, plural, =1{conversation} other {# conversations}}.",{numChannels:c.size}):Nn.rt("Removed {numChannels, plural, =1{conversation} other {# conversations}} from {channelSection}.",{numChannels:c.size,channelSection:n.a.createElement("strong",null,n.a.createElement(An,{channelSection:u}))}):Nn.rt("Moved {numChannels, plural, =1{conversation} other {# conversations}} to {channelSection}.",{numChannels:c.size,channelSection:n.a.createElement("strong",null,n.a.createElement(An,{channelSection:d}))}):!d||d.type!==yr["g"]&&d.type!==yr["h"]?!u||u.type!==yr["g"]&&u.type!==yr["h"]?Nn.rt("Moved {channel}.",{channel:n.a.createElement(wn["a"],{channel:m})}):Nn.rt("Removed {channel} from {channelSection}.",{channel:n.a.createElement(wn["a"],{channel:m}),channelSection:n.a.createElement("strong",null,n.a.createElement(An,{channelSection:u}))}):Nn.rt("Moved {channel} to {channelSection}.",{channel:n.a.createElement(wn["a"],{channel:m}),channelSection:n.a.createElement("strong",null,n.a.createElement(An,{channelSection:d}))});var s=function e(){var a,n;f();Object(Va["a"])({state:t()}).track(Ka["EventId"].CHANNEL_SECTIONS_CHANNELS_MOVE,(n={context:{ui_context:(a={},p()(a,Ka["UiContextKeys"].action,Ka["UiAction"].UNDO),p()(a,Ka["UiContextKeys"].ui_component_name,"PerformBulkChannelMove"),a)}},p()(n,Ka["ChannelSectionsKeys"].remove,za(i||{})),p()(n,Ka["ChannelSectionsKeys"].insert,za(r||{})),n))};e(Object(mr["enqueueToast"])({element:n.a.createElement(Sn,{undo:s},a)}))})});Pn.meta={name:"performBulkChannelMove",key:"actionsUiChannelSectionsPerformBulkChannelMovePerformBulkChannelMove",description:"move channels to different sections with toast & undo support"};var Mn=Pn;var Dn=new dr["b"]("channel_sidebar");var xn=Object(pr["e"])("move channel section to different location with toast & undo support",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelSectionId,i=a.nextChannelSectionId;var s=Object(hr["e"])(t());if(!s)return Promise.resolve();if(r===i)return Promise.resolve();var o=Object(cr["h"])(t(),r);var l=e(Hr({channelSectionId:r,nextChannelSectionId:i})),c=l.resultPromise,u=l.undo;c.catch(function(){e(sn({error:$r}))});var d=function e(){var a,n;u();Object(Va["a"])({state:t()}).track(Ka["EventId"].CHANNEL_SECTIONS_MOVE,{context:(n={ui_context:(a={},p()(a,Ka["UiContextKeys"].action,Ka["UiAction"].UNDO),p()(a,Ka["UiContextKeys"].ui_component_name,"PerformChannelSectionMove"),a)},p()(n,Ka["ChannelSectionsKeys"].channel_section_id,r),p()(n,Ka["ChannelSectionsKeys"].next_channel_section_id,i),n)})};return c.then(function(){e(Object(mr["enqueueToast"])({element:n.a.createElement(Sn,{undo:d},Dn.rt("Moved {channelSection}.",{channelSection:n.a.createElement("strong",null,n.a.createElement(An,{channelSection:o}))}))}))})});xn.meta={name:"performChannelSectionMove",key:"actionsUiChannelSectionsPerformChannelSectionMovePerformChannelSectionMove",description:"move channel section to different location with toast & undo support"};var Rn=xn;var Fn=a(485);var Ln=a(422);var Un=a(2612);var Bn="DRAG_CHANNEL_SIDEBAR_CHANNEL";var qn="DRAG_CHANNEL_SIDEBAR_SECTION_HEADING";var Gn=a(4692);var Hn=a(165);var Wn=a(886);var Vn=a(859);var Kn=a(653);var zn=a(27);var Qn=a(33);var Yn=a(1988);var Jn=a(2697);var Xn=a(1669);var Zn=a(751);var $n=a(340);function ei(e){var t=Object(Ln["b"])(e),a=t.path;if(a)return $n["o"][a];return null}var ti=a(163);var ai=a(153);var ri=a(920);var ni=a(856);function ii(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function si(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ii(Object(a),true).forEach(function(t){p()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ii(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var oi=12;var li=20;var ci=28;var ui=36;var di=8;var pi=28;var mi=0;var hi=/^channel_draft-/;var vi=/^composer_draft-/;var fi="presentation";var bi="group";var gi="treeitem";var _i=new dr["b"]("channel_sidebar");var yi={drafts:function e(){return _i.t("Drafts")},starred:function e(){return _i.t("Starred")},channels:function e(){return _i.t("Channels")},sharedChannels:function e(){return _i.t("Shared Channels")},ims:function e(){return _i.t("Messages",{fallbackHash:"f1b1f5c277f7954dfbed1eddb8517dad1651b04b"})},apps:function e(){return _i.t("Recent apps",{fallbackHash:"eb537ca7589d275fa9d031a9a211ad476b691e63"})}};var Oi={id:null,type:"spacer",height:oi,key:null,role:fi};var ki={id:null,type:"divider",height:li,key:null,role:fi};var Ei={id:"Vall_threads",type:"allThreadsLink",height:pi,key:"Vall_threads",role:gi,"aria-level":1};var Ci={id:"Punreads",type:"pageLink",height:pi,key:"Punreads",role:gi,"aria-level":1};var Si={id:null,type:"sectionHeading",name:"",height:ui,role:gi,"aria-level":1};var wi={id:null,type:"sectionHeadingAriaGroup",name:"",height:mi,role:bi};var ji={id:null,type:"channel",index:null,height:ci,role:gi,"aria-level":2};var Ii=si({},ji,{type:"composer_draft",role:gi,"aria-level":2});var Ti=si({},ji,{type:"channel_draft",role:gi,"aria-level":2});var Ai={id:null,type:"appDmSuggestion",index:null,height:ci,role:gi,"aria-level":2};function Ni(e,t){var a=Object(ri["a"])(e&&e.id);if(!e||!a)return null;var r=a.sidebar&&a.sidebar.rowHeight||pi;return{id:e.id,key:e.id,type:e.type||"pageLink",height:r,scrollTop:t,scrollBottom:t+r,role:gi,"aria-level":1,indented:a.indented}}var Pi=Object(ti["createSelector"])([function(e){return e&&e.sidebarSectionsOrdered},function(e){return e&&e.sidebarSections},function(e){return e&&e.pages},function(e){return e&&e.hasAllUnreadsLink},function(e){return e&&e.hasThreadsLink},function(e){return e&&e.showDraftsPageSidebar},function(e){return e&&e.primaryView},function(e){return e&&e.isPagesetExpanded},function(e){return e&&e.shouldUseChannelSections},function(e){return e&&e.isOrganizing}],function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];var n=arguments.length>4&&void 0!==arguments[4]&&arguments[4];var i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];var s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"";var o=arguments.length>7&&void 0!==arguments[7]&&arguments[7];var l=arguments.length>8&&void 0!==arguments[8]&&arguments[8];var c=arguments.length>9&&void 0!==arguments[9]&&arguments[9];var u=[];var d={};var p=[];function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];u.push(e);if(e.id){d[e.id]=e;p.push(e.id)}t.forEach(function(t){d[t]=e;p.push(t)})}var v=0;h(si({},Oi,{id:"top-padding-spacer",key:"top-padding-spacer",height:12,scrollTop:v,scrollBottom:v+=12}));var f=a.find(function(e){return"Pwelcome"===e.id});if(f){var b=Ni(f,v);h(b);v=b.scrollBottom}var g=!(l&&c);var _=a.find(function(e){return"Phome"===e.id});if(_){var y=Ni(_,v);h(y);v=y.scrollBottom}g&&r&&h(si({},Ci,{scrollTop:v,scrollBottom:v+=Ci.height}));g&&n&&h(si({},Ei,{scrollTop:v,scrollBottom:v+=Ei.height}));var O=Ni(Object(m["find"])(a,{id:"Pactivity"}),v);if(g&&O){h(O);v=O.scrollBottom}if(g&&i){var k=Ni(Object(m["find"])(a,{id:"Pdrafts"}),v);if(k){h(k);v=k.scrollBottom}}if(g){var E=["Pstars","Pbrowse-channels","Pbrowse-people","Papps","Pbrowse-files"];E.filter(function(e){return o||s===e}).forEach(function(e){var t=Ni(Object(m["find"])(a,{id:e}),v);if(t){h(t);v=t.scrollBottom}});h(si({},Si,{name:"browse",scrollTop:v,scrollBottom:v+=Si.height,sectionName:"browse",key:"sectionHeading-browse","aria-expanded":o}));h(si({},ki,{scrollTop:v,scrollBottom:v+=ki.height,key:"sectionHeading-divider-pages"}))}var C=0;e.forEach(function(a,r){var n=t[a]||{};var i=n.channelsOrdered||[];var o=l&&n.isCollapsed;if(!l){var c=Object(m["last"])(u);("sectionHeading"!==c.type&&"sectionHeadingAriaGroup"!==c.type||i.length>0)&&h(si({},Oi,{scrollTop:v,scrollBottom:v+=Oi.height,key:"sectionHeading-spacer-"+a}))}var d=n.channelsOrdered.reduce(function(e,t){if(vi.test(t)){e[t]=t.replace(vi,"");return e}if(hi.test(t)){e[t]=t.replace(hi,"");return e}e[t]=t;return e},{});if(n.hasHeading){var p;if(l&&n.channelSection){var f=n.channelSection,b=f.emoji,g=f.name;p=b?b+" "+g:g}else p=yi[a]();var _;if(l){var y=r>0&&e[r-1];var O=y&&t[y];_=O?O.channelSection:void 0}h(si({},Si,{"aria-label":p,name:a,scrollTop:v,scrollBottom:v+=Si.height,sectionName:a,key:"sectionHeading-"+a,"aria-expanded":!o,id:"sectionHeading-"+a,channelIds:l?n.channelsOrdered:void 0,channelSection:n.channelSection,priorDisplayedChannelSection:_}),l&&o?n.channelsOrdered:[]);h(si({},wi,{"aria-label":p,scrollTop:v,scrollBottom:v+=wi.height,key:"sectionHeadingAriaGroup-"+a,"aria-owns":l&&n.isCollapsed?"":Object.values(d).join(" "),channelSection:n.channelSection}))}var k=false;n.channelsOrdered.forEach(function(e){var t=d[e];var r;var i;if(vi.test(e))r=Ii;else if(hi.test(e)){r=Ti;var o=Object(ni["c"])(t),c=o.channelId,u=o.threadTs;i={draftId:t,channelId:c,threadTs:u}}else r=ji;if(!(l&&n.isCollapsed&&s!==t)){h(si({},r,{id:t,index:C,scrollTop:v,scrollBottom:v+=r.height,sectionName:a,channelSection:n.channelSection,channelSectionChannelIds:l?n.channelsOrdered:void 0,key:e,params:i}));k=true}C+=1});l&&!n.isCollapsed&&k&&h(si({},Oi,{height:di,scrollTop:v,scrollBottom:v+=di,key:"sectionHeading-spacer-"+a}));if("apps"===a){n.membersOrdered&&n.membersOrdered.forEach(function(e){var t=Object(ai["a"])(e)?Ai:ji;h(si({},t,{id:e,index:C,scrollTop:v,scrollBottom:v+=t.height,sectionName:a,key:e}));C+=1});n.membersOrdered&&n.membersOrdered.length>0&&h(si({},Oi,{scrollTop:v,scrollBottom:v+=Oi.height,key:"spacer-apps"}))}});h(si({},Oi,{scrollTop:v,scrollBottom:v+=Oi.height,key:"spacer-footer-1"}));h(si({},Oi,{scrollTop:v,scrollBottom:v+=Oi.height,key:"spacer-footer-2"}));u.push(si({},Oi,{scrollTop:v,scrollBottom:v+=Oi.height,key:"spacer-footer-3"}));u.push(si({},Oi,{scrollTop:v,scrollBottom:v+=Oi.height,key:"spacer-footer-4"}));return{rows:u,rowIds:Object(m["map"])(u,"id"),rowForItemId:d,allItemIds:p}});var Mi=Pi;var Di=a(176);var xi=a(1475);var Ri=a(39);var Fi=a(300);var Li=a(1663);var Ui=a(5083);var Bi=a(345);var qi=a(246);var Gi=a.n(qi);var Hi=a(15);var Wi=Object(Hi["b"])(function(e){var t=Object(Qn["d"])(e);if(!Object(zn["isPaidTeam"])(t))return"alphabetical";return Object(Ta["k"])(e,"channel_sort")});Wi.meta={name:"getChannelSortPref",key:"prefsStoreUserDerivedSelectorsGetChannelSortPrefGetChannelSortPref"};var Vi=Wi;var Ki=a(63);var zi=a(1454);var Qi=a(1049);var Yi=a(5084);function Ji(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function Xi(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ji(Object(a),true).forEach(function(t){p()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ji(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Zi=[yr["k"],yr["o"],yr["n"],yr["j"],yr["m"],yr["l"],yr["i"]];var $i=["defaultMentions","default","sharedMentions","shared","privateMentions","private","slackbot","you","imsMentions","ims"];var es=function e(){return{channelsOrdered:{default:$i.map(function(){return[]}),muted:$i.map(function(){return[]}),suggested:$i.map(function(){return[]})},hasHeading:true,isCollapsed:false,channelSection:null}};var ts=h.a.invert($i);var as=function e(t){return t&&t.has_draft};var rs=function e(t){var a=t.channel,r=t.members,n=t.isCurrentlySelected,i=t.shouldHideReadChannels,s=t.shouldHideReadChannelsUnlessStarred,o=t.hasDraft,l=t.teamId,c=t.isSuggested,u=t.showAppDmSuggestions,d=t.isInAnyCustomChannelSection,p=t.isOrganizing;if(Object(Ma["isFromAnotherTeam"])(a))return false;if(Object(Ma["isUnknownOrNonExistent"])(a))return false;if(n)return true;if(Object(Ma["isFrozenAndInGracePeriod"])(l,a))return true;if(Object(Ma["isArchived"])(a))return false;if(Object(Ma["isImAndIsMemberDeleted"])(a,r[Object(Ma["getMemberIdFromIm"])(a)]))return false;if(!Object(Ma["isMemberOfChannel"])(a)&&!c)return false;if((Object(Ma["isIm"])(a)||Object(Ma["isMpim"])(a))&&!Object(Ma["isOpen"])(a)&&Object(Ma["isRead"])(a)&&!o)return false;var m={members:r,selfTeamIds:{teamId:l},dangerouslyOverrideCreateSelectorSanityCheck:true};if(Object(Ma["isIm"])(a)){var h=[Object(Ma["getMemberIdFromIm"])(a)];h[0]||Object(Ca["a"])({teamId:l}).error("SIDEBAR-SECTIONS","IM "+a.id+" is missing its associated user");if(!Object(Da["haveMembersForIds"])(m,h)){l&&Object(Ua["h"])(m,h);return false}}if(Object(Ma["isMpim"])(a)){var v=Object(Ma["getMemberIdsFromMpim"])(a);v&&v.length||Object(Ca["a"])({teamId:l}).error("SIDEBAR-SECTIONS","MPIM "+a.id+" is missing its associated members");if(!Object(Da["haveMembersForIds"])(m,v)){l&&Object(Ua["h"])(m,v);return false}}if(p)return true;if(s&&(Object(Ma["isStarred"])(a)||d))return true;if(o)return true;if(u&&i&&Object(Ma["isAppChannel"])(a,r)&&Object(Ma["isStarred"])(a)&&Object(Ma["isRead"])(a))return false;if(u&&Object(Ma["isAppChannel"])(a,r))return true;if((s||i)&&Object(Ma["isRead"])(a))return false;return true};var ns={};var is={};var ss={};var os=function e(t){var a=t.channel,r=t.isApp,n=t.isGuest,i=t.shouldSeparateSharedChannels,s=t.shouldSeparateOrgWideChannels,l=t.draftChannelIds,c=t.featureChannelSidebarDraftsSection,u=t.featureComposeFlowSidebar,d=t.currentlySelectedId,p=t.teamId,m=t.hasStarredSection;var v=Object(o["d"])(p);if(!u&&c&&(h.a.includes(l,a.id)||as(a))&&(Object(Ba["isFeatureEnabled"])(v,"feature_announce_only_websocket")||Object(Ki["r"])(v,a.id))){d!==a.id||h.a.includes(is[p],a.id)||ns[p]||(ss[p]=a.id);ss[p]&&d!==ss[p]&&delete ss[p];if(a.id!==ss[p])return yr["k"]}if(Object(Ma["isStarred"])(a)&&m)return yr["o"];if((Object(Ma["isSharedPublicOrPrivateChannel"])(a)||Object(Ma["isFrozenAndInGracePeriod"])(p,a))&&i)return yr["n"];if(Object(Ma["isOrgGlobalSharedPublicOrPrivateChannel"])(a)&&!Object(Ma["isPrivateChannel"])(a)&&s)return yr["m"];if(r&&!n)return yr["i"];if(Object(Ma["isIm"])(a)||Object(Ma["isMpim"])(a))return yr["l"];return yr["j"]};var ls=function e(t){var a=t.channel,r=t.currentUserId,n=t.shouldSeparatePrivateChannels,i=t.shouldSeparateSharedChannels,s=t.shouldBumpMention;if(Object(Ma["isSlackbot"])(a))return ts.slackbot;if(Object(Ma["isUserId"])(a,r))return ts.you;if(Object(Ma["isIm"])(a)||Object(Ma["isMpim"])(a))return s?ts.imsMentions:ts.ims;if(n&&Object(Ma["isPrivateChannel"])(a))return s?ts.privateMentions:ts.private;if(i&&Object(Ma["isSharedPublicOrPrivateChannel"])(a))return s?ts.sharedMentions:ts.shared;return s?ts.defaultMentions:ts.default};var cs=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.channels,r=t.currentlySelectedId,n=t.mutedChannels,i=t.members,s=t.sidebarBehaviorPref,o=t.draftChannelIds,l=t.teamId,c=t.suggestedChannelIds,u=t.showAppDmSuggestions,d=t.channelSectionIdsByChannelId,p=t.isOrganizing,m=t.channelSectionPrefs,h=t.orderedChannelSections;var v="hide_read_channels"===s;var f="hide_read_channels_unless_starred"===s;var b=[];var g=false;var _=false;var y=false;var O=Object.keys(a);for(var k=0;k<O.length;k+=1){var E,C,S,w;var j=a[O[k]];var I=-1!==o.indexOf(j.id);Object(Xa["a"])()||(I=as(j));var T=null===h||void 0===h?void 0:null===(E=h.find(function(e){return e.type===yr["h"]}))||void 0===E?void 0:E.id;var A=(null===d||void 0===d?void 0:d[j.id])||Object(Ma["isStarred"])(j)&&T;var N=Object(Ma["isStarred"])(j)||(null===d||void 0===d?void 0:null===(C=d[j.id])||void 0===C?void 0:C.length)>0;var P=(null===m||void 0===m?void 0:null===(S=m[A])||void 0===S?void 0:S[Cr["b"]])===Cr["d"];var M=(null===m||void 0===m?void 0:null===(w=m[A])||void 0===w?void 0:w[Cr["b"]])===Cr["c"];var D=rs({channel:j,members:i,isCurrentlySelected:r===j.id,isMuted:!!n[j.id],shouldHideReadChannels:!M&&(P||v),shouldHideReadChannelsUnlessStarred:!M&&!P&&f,hasDraft:I,teamId:l,isSuggested:-1!==c.indexOf(j.id),showAppDmSuggestions:u,isInAnyCustomChannelSection:N,isOrganizing:p});D&&b.push(j);g||(g=Object(Ma["isFrozenAndInGracePeriod"])(l,j)||Object(Ma["isSharedPublicOrPrivateChannel"])(j)&&(Object(Ma["isMemberOfChannel"])(j)||r===j.id));_||(_=Object(Ma["isOrgGlobalSharedPublicOrPrivateChannel"])(j)&&!Object(Ma["isPrivateChannel"])(j));y||(y=Object(Ma["isStarred"])(j))}return{channelsVisible:b,belongsToOrPreviewingAnySharedChannels:g,belongsToAnyOrgChannels:_,hasAStarredChannel:y}};var us=Object(Qi["a"])(cs,2);var ds=function e(t){var a;var r=t.channelsSorted,n=t.belongsToOrPreviewingAnySharedChannels,i=t.members,s=t.mutedChannels,o=t.draftChannelIds,l=t.visibleUnifiedDrafts,c=t.withheldDraftIds,u=t.suggestedChannelIds,d=t.currentUserId,p=t.currentlySelectedId,m=t.teamId,v=t.sortPref,f=t.isGuest,b=t.shouldSeparateSharedChannels,g=t.shouldSeparateOrgWideChannels,_=t.shouldSeparatePrivateChannels,y=t.dismissedAppMembers,O=t.featureChannelSidebarDraftsSection,k=t.featureSilenceAppDMs,E=t.featureComposeFlowSidebar,C=t.shouldUseChannelSections,S=t.defaultChannelSectionsCollapsed,w=t.customChannelSectionsCollapsed,j=t.orderedChannelSections,I=t.channelSectionIdIsExclusivelyFromAnotherTeam,T=t.allChannelSectionChannels,A=t.showAppDmSuggestions,N=t.showDraftsPageSidebar;var P={};var M=[];var D=[];var x={};var R={};var F={};var L={};if(C){D.push(yr["k"]);P[yr["k"]]=es();P[yr["k"]].channelSection=null;j.forEach(function(e){var t=T[e.id];t.forEach(function(t){F[t]||(F[t]=[]);F[t].push(e.id)});var a="custom-"+e.id;x[e.id]=a;R[a]=e.id;var r;switch(e.type){case yr["b"]:r=yr["j"];L[yr["j"]]=a;break;case yr["c"]:r=yr["l"];L[yr["l"]]=a;break;case yr["d"]:r=yr["m"];L[yr["m"]]=a;break;case yr["e"]:r=yr["i"];L[yr["i"]]=a;break;case yr["f"]:r=yr["n"];L[yr["n"]]=a;break;case yr["h"]:r=yr["o"];L[yr["o"]]=a;break;case yr["g"]:default:r=a;break}D.push(r);P[r]=es();P[r].channelSection=e});Zi.forEach(function(e){if(!P[e]&&e!==yr["o"]){D.push(e);P[e]=es()}})}else Zi.forEach(function(e){D.push(e);P[e]=es()});var U=[];var B=[];var q=yr["o"]in P;r.forEach(function(e){Object(Ma["isIm"])(e)&&U.push(Object(Ma["getMemberIdFromIm"])(e));var t=Object(Ma["isAppChannel"])(e,i);var a=os({channel:e,isApp:t,isGuest:f,shouldSeparateSharedChannels:b,shouldSeparateOrgWideChannels:g,draftChannelIds:o,featureChannelSidebarDraftsSection:O,featureComposeFlowSidebar:E,currentlySelectedId:p,teamId:m,hasStarredSection:q});t&&M.push(e);var r=!!s[e.id];var n=Object(Ma["getBadgeCountWithMuted"])(e,r,k,Object(Ma["isAppChannel"])({channel:e,members:i}));var l=n>0;var c=ls({channel:e,currentUserId:d,shouldSeparatePrivateChannels:_,shouldSeparateSharedChannels:b,shouldBumpMention:"priority"===v&&l});var h;h=-1!==u.indexOf(e.id)?"suggested":r?"muted":"default";if(F[e.id])F[e.id].forEach(function(t){var a=x[t];var r=P[a].channelsOrdered[h][c];r.push(e.id)});else{var y=P[a].channelsOrdered[h][c];y.push(e.id)}Object(Xa["a"])()||as(e)&&B.push(e.id)});var G={};u.forEach(function(e,t){G[e]=t});P.channels.channelsOrdered.suggested.forEach(function(e){e.sort(function(e,t){return G[e]>G[t]?1:-1})});is[m]=[].concat(fr()(o),B);var H=h.a.mapValues(P,function(e){return Xi({},e,{channelsOrdered:h.a.flatten([].concat(fr()(e.channelsOrdered.default),fr()(e.channelsOrdered.muted),fr()(e.channelsOrdered.suggested)))})});if(E){var W=Object(Di["v"])(l);var V=[];W.forEach(function(e){var t=Object(Di["d"])(e);Object(Di["r"])(e)?V.push("composer_draft-"+t):h.a.includes(c,t)||V.push("channel_draft-"+t)});H[yr["k"]].channelsOrdered=V}if(!O||N||H[yr["k"]].channelsOrdered.length<1){delete H[yr["k"]];h.a.remove(D,function(e){return e===yr["k"]})}if((null===H||void 0===H?void 0:null===(a=H[yr["o"]])||void 0===a?void 0:a.channelsOrdered.length)<1){delete H[yr["o"]];h.a.remove(D,function(e){return e===yr["o"]})}if(!b||!n){delete H[yr["n"]];h.a.remove(D,function(e){return e===yr["n"]})}if(!g||H[yr["m"]].channelsOrdered.length<1){delete H[yr["m"]];h.a.remove(D,function(e){return e===yr["m"]})}if(f){delete H[yr["i"]];h.a.remove(D,function(e){return e===yr["i"]})}else A&&(H[yr["i"]]={hasHeading:true,channelsOrdered:[],membersOrdered:ps({members:i,appChannels:M,flatSidebarSections:H,dismissedAppMembers:y})});if(C){Object.entries(L).forEach(function(e){var t=Gi()(e,2),a=t[0],r=t[1];if(H[a]){H[r]=H[a];delete H[a]}});var K=D.map(function(e){return L[e]||e}).filter(function(e){var t=P[e];if(!t||!I||!t.channelSection||!t.channelSection.id||void 0===I[t.channelSection.id])return true;return!I[t.channelSection.id]});K.forEach(function(e){var t=e===yr["k"]?!!S[yr["k"]]:!!w[R[e]];H[e].isCollapsed=t});Object.entries(x).forEach(function(e){var t=Gi()(e,2),a=t[0],r=t[1];if(H[r]){var n=!!w[a];H[r].isCollapsed=n}});return{sidebarSectionsOrdered:K,sidebarSections:H,orderedChannelSections:j,idsNeedingPresenceSubscription:U}}return{sidebarSectionsOrdered:D,sidebarSections:H,orderedChannelSections:j,idsNeedingPresenceSubscription:U}};function ps(e){var t=e.members,a=e.appChannels,r=e.flatSidebarSections,n=e.dismissedAppMembers,i=e.maxSuggestionsCount,s=void 0===i?10:i;var o=h.a.keyBy(a,Ma["getMemberIdFromIm"]);var l=a.reduce(function(e,t){r[yr["o"]]&&-1!==r[yr["o"]].channelsOrdered.indexOf(t.id)||e.push(t.id);return e},[]);var c=[];var u=s-l.length;if(u>0){var d=Object.values(t).reduce(function(e,t){var a=t.is_bot,r=t.id;!a||o[r]||n[r]||Object(Da["isDeleted"])(t)||e.push(t);return e},[]);d.sort(function(e,t){return Object(dr["r"])(e.name,t.name)});c=d.map(function(e){return e.id}).slice(0,u)}return l.concat(c)}var ms=Object(Qi["a"])(ds,3);var hs=function e(t){return Object(Ta["k"])(t,"sidebar_behavior")};var vs=function e(t){return Object(Ta["k"])(t,"separate_private_channels")};var fs=function e(t){return!Object(Ba["isFeatureEnabled"])(t,"feature_channel_is_remove_create_shared_channel")&&Object(Ta["k"])(t,"separate_shared_channels")};var bs=function e(t){return Object(Ta["k"])(t,"ent_org_wide_channels_sidebar")};var gs=function e(t){return Object(Ba["isFeatureEnabled"])(t,"feature_channel_sidebar_drafts_section")};var _s=function e(t){var a=Object(tr["b"])(t);var r=Object(Pa["b"])(t);var n=Object(xa["getMutedChannels"])(t);var i=Object(Ua["a"])(t);var s=Object(Aa["a"])(t);var o=Object(zi["a"])(t);var l=Object(Aa["f"])(t);var c=Object(Ma["getSuggestedChannels"])(t);var d=Object(Ga["a"])(t);var p=Object(Ba["getCurrentUserId"])(t);var m=hs(t);var v=!Object(hr["e"])(t)&&vs(t);var f=!Object(hr["e"])(t)&&fs(t);var b=!Object(hr["e"])(t)&&bs(t);var g=Object(Ta["e"])(t);var _=Object(Ua["m"])(t);var y=Object(Ba["shouldSilenceAppDMs"])(t);var O=gs(t);var k=Object(Aa["i"])(t);var E="variant"===Object(u["getGroupForUser"])(t,"show_more_apps_in_sidebar_new_and_free");var C=Object(lr["a"])(t);var S=C?Object(cr["d"])(t):null;var w=C?Object(cr["c"])(t):null;var j=C?Object(cr["p"])(t):null;var I=C?Object(cr["a"])(t):{};var T=Object(cr["l"])(t);var A=Object(Aa["l"])(t);var N=C?Object(Yi["a"])(t):null;void 0===ns[a]?ns[a]=true:ns[a]&&(ns[a]=false);var P=C&&Object(cr["j"])(t);var M=us({channels:r,currentlySelectedId:d,mutedChannels:n,members:i,sidebarBehaviorPref:m,draftChannelIds:s,teamId:a,suggestedChannelIds:c,showAppDmSuggestions:E,channelSectionIdsByChannelId:P,isOrganizing:T,channelSectionPrefs:N,orderedChannelSections:j}),D=M.channelsVisible,x=M.belongsToOrPreviewingAnySharedChannels;var R={};D.forEach(function(e){if(!e||!e.id)return;R[e.id]=Object(Ma["getDisplayNameForChannel"])(t,e,{publicChannelIncludeHashSign:false,imIncludeAtSign:false})});var F=function e(t,a){return Object(dr["r"])(t&&R[t.id],a&&R[a.id])};var L=function e(t,a){var r=t.priority||-1;var n=a.priority||-1;if(r===n)return F(t,a);return n-r};var U=function e(t){if("priority"===t)return L;return F};var B=Vi(t);var q=D.sort(U(B));var G=C?h.a.fromPairs(j.map(function(e){var a=Object(cr["a"])(t)[e.id];return[e.id,e.type===yr["g"]&&!h.a.isEmpty(a)&&a.reduce(function(e,a){return e&&Object(Ma["isFromAnotherTeam"])(Object(Pa["e"])(t,a))},true)]})):{};return ms({channelsSorted:q,belongsToOrPreviewingAnySharedChannels:x,members:i,mutedChannels:n,draftChannelIds:s,visibleUnifiedDrafts:o,withheldDraftIds:l,suggestedChannelIds:c,currentUserId:p,currentlySelectedId:d,teamId:a,sortPref:B,isGuest:_,shouldSeparateSharedChannels:f,shouldSeparateOrgWideChannels:b,shouldSeparatePrivateChannels:v,dismissedAppMembers:g,featureChannelSidebarDraftsSection:O,featureSilenceAppDMs:y,featureComposeFlowSidebar:k,shouldUseChannelSections:C,defaultChannelSectionsCollapsed:S,customChannelSectionsCollapsed:w,orderedChannelSections:j,channelSectionIdIsExclusivelyFromAnotherTeam:G,allChannelSectionChannels:I,showAppDmSuggestions:E,showDraftsPageSidebar:A})};var ys=_s;var Os={getVisibleChannelsMemoized:us};Object(Sr["exportToGlobalDebugger"])("channelSidebar",{getDraftChannelToWithhold:function e(){return ss}});function ks(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function Es(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ks(Object(a),true).forEach(function(t){p()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ks(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Cs=12;var Ss=6;var ws=18;var js=26;var Is=52;var Ts=0;var As=/^channel_draft-/;var Ns=/^composer_draft-/;var Ps="presentation";var Ms="group";var Ds="treeitem";var xs=new dr["b"]("channel_sidebar");var Rs={drafts:function e(){return xs.t("Drafts")},starred:function e(){return xs.t("Starred")},sharedChannels:function e(){return xs.t("Shared Channels")},channels:function e(){return xs.t("Channels")},orgWideChannels:function e(){return xs.t("Organization Channels")},ims:function e(){return xs.t("Direct Messages")},apps:function e(){return xs.t("Recent Apps")}};var Fs={id:null,type:"topPadding",height:Cs,key:null,role:Ps};var Ls={id:null,type:"spacer",height:ws,key:null,role:Ps};var Us={id:null,type:"spacer",height:Ss,key:null,role:Ps};var Bs={id:"Vquick_switcher",type:"quickswitcherButton",height:Is,key:"Vquick_switcher",role:Ds,"aria-level":1};var qs={id:"Vall_threads",type:"allThreadsLink",height:js,key:"Vall_threads",role:Ds,"aria-level":1};var Gs={id:"Punreads",type:"pageLink",height:js,key:"Punreads",role:Ds,"aria-level":1};var Hs={id:"Vsearch",type:"searchLink",height:js,key:"Vsearch",role:Ds,"aria-level":1};var Ws={id:null,type:"sectionHeading",name:"",height:js,role:Ds,"aria-level":1};var Vs={id:null,type:"sectionHeadingAriaGroup",name:"",height:Ts,role:Ms};var Ks={id:null,type:"folderHeading",name:"",height:js,role:Ds,"aria-level":1};var zs={id:null,type:"channel",index:null,height:js,role:Ds,"aria-level":2};var Qs=Es({},zs,{type:"composer_draft",role:Ds,"aria-level":2});var Ys=Es({},zs,{type:"channel_draft",role:Ds,"aria-level":2});var Js={id:null,type:"appDmSuggestion",index:null,height:js,role:Ds,"aria-level":2};var Xs={id:null,type:"addAChannelLink",dim:false,height:js,key:"addAChannelLink",role:Ds,"aria-level":1};var Zs={id:null,type:"invitePeopleLink",dim:false,height:js,key:"invitePeopleLink",role:Ds,"aria-level":1};var $s={id:null,type:"installAppsLink",dim:false,height:js,key:"installAppsLink",role:Ds,"aria-level":1};var eo={id:null,type:"appSuggestionLinks",dim:false,height:js,key:"appSuggestionLinks",role:Ds,"aria-level":1};var to={id:null,type:"upgradeSlackCTA",height:js,key:"upgradeSlackCTA",role:Ds,"aria-level":1};var ao={id:null,type:"emptyState",index:null,height:js,key:null,role:Ps};function ro(e,t){var a=Object(ri["a"])(e.id);var r=a.sidebar&&a.sidebar.rowHeight||js;return{id:e.id,key:e.id,type:"pageLink",height:r,scrollTop:t,scrollBottom:t+r,role:Ds,"aria-level":1}}var no=Object(ti["createSelector"])([function(e){return e&&e.hasQuickswitcherButton},function(e){return e&&e.hasAllUnreadsLink},function(e){return e&&e.hasSearchLink},function(e){return e&&e.hasAddAChannelLink},function(e){return e&&e.hasInvitePeopleLink},function(e){return e&&e.appSuggestionsCount},function(e){return e&&e.hasUpgradeSlackCTA},function(e){return e&&e.hasThreadsLink},function(e){return e&&e.hasAppsLink},function(e){return e&&e.hasInstallAppsLink},function(e){return e&&e.sidebarSectionsOrdered},function(e){return e&&e.sidebarSections},function(e){return e&&e.sidebarFoldersIsEnabled},function(e){return e&&e.sidebarFolders},function(e){return e&&e.pages},function(e){return e&&e.featureComposeFlow},function(e){return e&&e.shouldUseChannelSections},function(e){return e&&e.shouldHideForWelcomePlace},function(e){return e&&e.showDraftsPageSidebar}],function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];var n=arguments.length>4&&void 0!==arguments[4]&&arguments[4];var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;var s=arguments.length>6&&void 0!==arguments[6]&&arguments[6];var o=!(arguments.length>7&&void 0!==arguments[7])||arguments[7];var l=arguments.length>8&&void 0!==arguments[8]&&arguments[8];var c=arguments.length>9&&void 0!==arguments[9]&&arguments[9];var u=arguments.length>10&&void 0!==arguments[10]?arguments[10]:[];var d=arguments.length>11&&void 0!==arguments[11]?arguments[11]:{};var p=arguments.length>12&&void 0!==arguments[12]&&arguments[12];var h=arguments.length>13&&void 0!==arguments[13]?arguments[13]:[];var v=arguments.length>14&&void 0!==arguments[14]?arguments[14]:[];var f=arguments.length>15&&void 0!==arguments[15]&&arguments[15];var b=arguments.length>16&&void 0!==arguments[16]&&arguments[16];var g=arguments.length>17&&void 0!==arguments[17]&&arguments[17];var _=arguments.length>18&&void 0!==arguments[18]&&arguments[18];var y=[];var O={};var k=0;!g&&e?y.push(Es({},Bs,{scrollTop:k,scrollBottom:k+=Bs.height})):y.push(Es({},Fs,{scrollTop:k,scrollBottom:k+=Fs.height,key:"top-padding"}));var E=v.find(function(e){return"Pwelcome"===e.id});if(E){var C=ro(E,k);y.push(C);k=C.scrollBottom}var S=v.find(function(e){return"Phome"===e.id});if(!g&&S){var w=ro(S,k);y.push(w);k=w.scrollBottom}t&&y.push(Es({},Gs,{scrollTop:k,scrollBottom:k+=js}));o&&y.push(Es({},qs,{scrollTop:k,scrollBottom:k+=qs.height}));a&&y.push(Es({},Hs,{scrollTop:k,scrollBottom:k+=Hs.height}));var j=v.find(function(e){return"Papps"===e.id});if(!g&&l){var I=ro(j,k);y.push(I);k=I.scrollBottom}var T=["Punreads","Pwelcome","Phome","Pcomposer","Papps","Ppaid-benefits"];_||T.push("Pdrafts");var A=v.filter(function(e){return-1===T.indexOf(e.id)});var N=A.length;A.forEach(function(e,t){var a=ro(e,k);y.push(Es({},a,{"aria-setsize":N,"aria-posinset":t+1}));k=a.scrollBottom});var P=0;p&&h.forEach(function(e){"folderHeading"!==Object(m["last"])(y).type&&"sectionHeadingAriaGroup"!==Object(m["last"])(y).type&&y.push(Es({},Ls,{scrollTop:k,scrollBottom:k+=Ls.height,key:"spacer-"+e.name}));y.push(Es({},Ks,{"aria-label":e.name,id:e.name,name:e.name,key:"folder-"+e.name,"aria-expanded":!e.isCollapsed}));y.push(Es({},Vs,{"aria-label":e.name,scrollTop:k,scrollBottom:k+=Vs.height,"aria-owns":e.channelIds.join(" "),key:"aria-group-"+e.name}));var t=e.channelIds.length;e.channelIds.forEach(function(a,r){var n=false;u.forEach(function(e){var t=d[e]||{};var r=t.channelsOrdered||[];n=n||r.filter(function(e){return e===a}).length>0});if(!n)return;if(!e.isCollapsed){y.push(Es({},zs,{id:a,index:P,scrollTop:k,scrollBottom:k+=zs.height,sectionName:e.name,key:a,"aria-setsize":t,"aria-posinset":r+1}));P+=1}O[a]=true})});u.forEach(function(e,t){var a=d[e]||{};if(!b&&a.channelSection)return;var s=a.channelsOrdered||[];var o=b&&a.isCollapsed;if(b)y.push(Es({},Us,{scrollTop:k,scrollBottom:k+=Us.height,key:"sectionHeading-spacer-"+e}));else{var l=Object(m["last"])(y);("sectionHeading"!==l.type&&"sectionHeadingAriaGroup"!==l.type||s.length>0)&&y.push(Es({},Ls,{scrollTop:k,scrollBottom:k+=Ls.height,key:"sectionHeading-spacer-"+e}))}var p=a.channelsOrdered.reduce(function(e,t){if(Ns.test(t)){e[t]=t.replace(Ns,"");return e}if(As.test(t)){e[t]=t.replace(As,"");return e}e[t]=t;return e},{});if(a.hasHeading){var h;if(b&&a.channelSection){var v=a.channelSection,f=v.emoji,_=v.name;h=f?f+" "+_:_}else h=Rs[e]();var E;if(b){var C=t>0&&u[t-1];var S=C&&d[C];E=S?S.channelSection:void 0}y.push(Es({},Ws,{"aria-label":h,name:e,scrollTop:k,scrollBottom:k+=Ws.height,sectionName:e,key:"sectionHeading-"+e,"aria-expanded":!o,channelIds:b?a.channelsOrdered:void 0,channelSection:a.channelSection,priorDisplayedChannelSection:E}));y.push(Es({},Vs,{"aria-label":h,scrollTop:k,scrollBottom:k+=Vs.height,key:"sectionHeadingAriaGroup-"+e,"aria-owns":b&&a.isCollapsed?"":Object.values(p).join(" "),channelSection:a.channelSection}))}var w=a.channelsOrdered.length;a.channelsOrdered.forEach(function(t,r){if(O[t])return;var n=p[t];var i;var s;if(Ns.test(t))i=Qs;else if(As.test(t)){i=Ys;var o=Object(ni["c"])(n),l=o.channelId,c=o.threadTs;s={draftId:n,channelId:l,threadTs:c}}else i=zs;if(!(b&&a.isCollapsed)){y.push(Es({},i,{id:n,index:P,scrollTop:k,scrollBottom:k+=i.height,sectionName:e,channelSection:a.channelSection,channelSectionChannelIds:b?a.channelsOrdered:void 0,key:t,params:s,"aria-setsize":w,"aria-posinset":r+1}));P+=1}});if(!g&&"channels"===e&&r){y.push(Es({},Ls,{scrollTop:k,scrollBottom:k+=Ls.height,key:"spacer-addAChannelLink"}));y.push(Es({},Xs,{dim:true,height:Xs.height,scrollTop:k,scrollBottom:k+=Xs.height}))}if("ims"===e&&n){y.push(Es({},Ls,{scrollTop:k,scrollBottom:k+=Ls.height,key:"spacer-invite-people"}));y.push(Es({},Zs,{dim:"dim"===n,height:Zs.height,scrollTop:k,scrollBottom:k+=Zs.height}))}var j="apps"===e&&a.membersOrdered;var I=j&&j.length;if("apps"===e){a.membersOrdered&&a.membersOrdered.forEach(function(t,a){var r=Object(ai["a"])(t)?Js:zs;y.push(Es({},r,{id:t,index:P,scrollTop:k,scrollBottom:k+=r.height,sectionName:e,key:t,"aria-posinset":a+1,"aria-setsize":I}));P+=1});a.membersOrdered&&a.membersOrdered.length>0&&y.push(Es({},Ls,{scrollTop:k,scrollBottom:k+=Ls.height,key:"spacer-apps"}));if(!g&&Number.isFinite(i)&&i>0){var T=i*eo.height;y.push(Es({},eo,{height:T,scrollTop:k,scrollBottom:k+=T}))}!g&&c&&y.push(Es({},$s,{height:$s.height,scrollTop:k,scrollBottom:k+=$s.height}))}});var M=v.find(function(e){return"Ppaid-benefits"===e.id});if(M){y.push(Es({},ao,{scrollTop:k,scrollBottom:k+=ao.height,key:"benefits-page-empty-state-1"}));var D=ro(M,k);y.push(D);k=D.scrollBottom}if(s){y.push(Es({},ao,{scrollTop:k,scrollBottom:k+=ao.height,key:"upgrade-slack-cta-empty-state-1"}));y.push(Es({},to,{height:to.height,scrollTop:k,scrollBottom:k+=to.height}));y.push(Es({},ao,{scrollTop:k,scrollBottom:k+=ao.height,key:"upgrade-slack-cta-empty-state-2"}))}y.push(Es({},Ls,{scrollTop:k,scrollBottom:k+=Ls.height,key:"spacer-footer-1"}));y.push(Es({},Ls,{scrollTop:k,scrollBottom:k+=Ls.height,key:"spacer-footer-2"}));if(f){y.push(Es({},Ls,{scrollTop:k,scrollBottom:k+=Ls.height,key:"spacer-footer-3"}));y.push(Es({},Ls,{scrollTop:k,scrollBottom:k+=Ls.height,key:"spacer-footer-4"}))}var x=y.filter(function(e){return 1===e["aria-level"]});var R=x.length;var F=x.reduce(function(e,t,a){e[t.key]=a+1;return e},{});y=y.map(function(e){return 1===e["aria-level"]?Es({},e,{"aria-setsize":R,"aria-posinset":F[e.key]}):e});return{rows:y,rowsMap:Object(m["keyBy"])(y,"id"),rowIds:Object(m["map"])(y,"id")}});var io=no;var so=a(1487);var oo=new dr["b"]("channel_sidebar");var lo=function e(t,a){var r=Object(ja["getAppSuggestionPrompt"])(t,a);return Object(so["d"])(r)};var co=function e(t,a){var r=Object(ja["getAppSuggestionPrompt"])(t,a);return Object(so["a"])(r)};var uo=function e(t,a){var r=Object(ja["getAppSuggestionPrompt"])(t,a);var n=Object(so["c"])(r);var i=Object(so["e"])(r);var s=lo(t,a);var o=Object(Qn["d"])(t);if(!n||!i)return{};var l="";var c=Object(so["b"])(r)||"";if(!s&&c){l=c;l.startsWith("/")&&(l=Object(zn["getTeamUrl"])(o,l))}return{appId:n,isInstall:s,href:l||Object(zn["getTeamUrl"])(o,"/apps/"+n),text:s?oo.t("Install {name}",{name:i}):oo.t("Connect {name}",{name:i}),label:oo.t("Dismiss {name} suggestion",{name:i}),dismissKey:s?a+"_install_prompt_dismissed":a+"_connect_prompt_dismissed",clogUiElement:s?"app_install_prompt":"app_connect_prompt"}};var po=function e(t){return Object(ja["getEnabledAppSuggestionPromptsKeyList"])(t).length};var mo=a(196);var ho=a.n(mo);var vo=a(13);var fo=a.n(vo);var bo=a(58);var go=a(202);var _o=a(1832);var yo=a(447);var Oo=a(573);var ko=a(235);var Eo=a(1339);var Co=a(250);var So=a(519);var wo=a(292);var jo=a(1675);var Io=a(786);var To=a(1686);var Ao=a(24);var No=a(456);var Po=a(32);var Mo=a(1248);var Do=a(4879);var xo={query:void 0,plainTextQuery:void 0,shouldUseChannelSections:false,isOrganizing:false};var Ro=function(e){gn()(t,e);function t(e){var a;ln()(this,t);a=pn()(this,hn()(t).call(this,e));a.onClick=a.onClick.bind(fn()(a));a.onClearClick=a.onClearClick.bind(fn()(a));return a}un()(t,[{key:"onClearClick",value:function e(){this.props.clearSearchInput()}},{key:"onClick",value:function e(){this.props.query?this.props.openFromClick():this.props.maybeShowOmniSwitcher()}},{key:"render",value:function e(){var t=this.props,a=t.teamName,r=t.query,i=t.plainTextQuery,s=t.isOrganizing;var o=this.props.shouldUseChannelSections&&s;var l=fo()("p-ia__omniswitcher_button",{"p-ia__omniswitcher_button--organizing":o});if(r)return n.a.createElement("div",{className:"p-ia__omniswitcher_button__search_container"},n.a.createElement(Ao["c"],{onClick:this.onClick,className:l},n.a.createElement(No["a"],{type:"search-medium",size:"inherit",className:"p-ia__omniswitcher_button__icon"})," ",n.a.createElement("span",{className:"p-ia__omniswitcher_button__text"},"Search: ",i)),n.a.createElement(Ao["c"],{onClick:this.onClearClick,className:"p-ia__omniswitcher_button__search_clear"},n.a.createElement(No["a"],{type:"times-medium"})));return n.a.createElement(Ao["c"],{onClick:this.onClick,className:l,disabled:o,"aria-disabled":o},n.a.createElement(No["a"],{type:"search-medium",size:"inherit",className:"p-ia__omniswitcher_button__icon"})," ",n.a.createElement("span",{className:"p-ia__omniswitcher_button__text"},"Search ",a),n.a.createElement("div",{className:"p-ia__omniswitcher_button__shortcut"},Object(Po["isMac"])()?"\u2318K":"Ctrl+K"))}}]);return t}(r["Component"]);Ro.displayName="OmniswitcherButton";Ro.defaultProps=xo;var Fo=function e(t){var a=Object(wo["getSearchInputBoxDisplayQuery"])(t);var r=Object(Qn["d"])(t);var n=Object(zn["isEnterpriseTeam"])(r)?Object(Qn["g"])(t):Object(zn["getTeamDisplayName"])(r);return{query:a,teamName:n,plainTextQuery:a?Object(Mo["a"])(t,a):void 0,shouldUseChannelSections:Object(lr["a"])(t),isOrganizing:Object(cr["l"])(t)}};var Lo=function e(t){return{maybeShowOmniSwitcher:function e(){return t(jo["a"].apply(void 0,arguments))},openFromClick:function e(){return t(Io["a"].apply(void 0,arguments))},clearSearchInput:function e(){return t(To["a"].apply(void 0,arguments))}}};var Uo=Object(i["connect"])(Fo,Lo)(Ro);var Bo=a(5106);var qo={className:void 0};function Go(e){var t=e.className;var a=fo()("p-ia_edu_throbber",t);return n.a.createElement("svg",{viewBox:"-100 -100 200 200",xmlns:"http://www.w3.org/2000/svg",className:a},n.a.createElement("circle",{cx:"0",cy:"0",r:"20"}),n.a.createElement("circle",{cx:"0",cy:"0",r:"20",className:"p-ia_edu_throbber__pulse"}))}Go.displayName="IaEduThrobber";Go.defaultProps=qo;var Ho=Go;var Wo=a(23);var Vo=a(85);var Ko=a(385);var zo=a(3141);var Qo=new dr["b"]("coachmarks");var Yo=150;var Jo=-500;var Xo={children:void 0,className:void 0,position:"right",delay:0,content:"",zIndex:"above_fs",onContinue:m["noop"],onShow:m["noop"],onSkip:m["noop"],hasCloseButton:true,hasSkipLink:true,hasSkipButton:false,skipButtonText:"",skipLinkPre:"",skipLinkText:"",continueButtonText:"",title:"",shouldShow:false};var Zo=function(e){gn()(t,e);function t(){var e;ln()(this,t);e=pn()(this,hn()(t).call(this));e.state={isShowing:false,contentsRect:null};e.setCoachmarkedContentRef=e.setCoachmarkedContentRef.bind(fn()(e));e.setCoachmarkRef=e.setCoachmarkRef.bind(fn()(e));e.maybeShowCoachmark=e.maybeShowCoachmark.bind(fn()(e));e.measureContents=e.measureContents.bind(fn()(e));e.onSkipClick=e.onSkipClick.bind(fn()(e));e.onCloseClick=e.onCloseClick.bind(fn()(e));e.onContinueClick=e.onContinueClick.bind(fn()(e));e.containClickEvents=e.containClickEvents.bind(fn()(e));e.onResize=Object(m["debounce"])(e.measureContentsAndSetState.bind(fn()(e)),Yo,{maxWait:Yo});return e}un()(t,[{key:"UNSAFE_componentWillMount",value:function e(){this.delayTimer=window.setTimeout(this.maybeShowCoachmark,this.props.delay)}},{key:"UNSAFE_componentWillReceiveProps",value:function e(t){this.props.shouldShow!==t.shouldShow&&true===t.shouldShow?this.delayTimer=window.setTimeout(this.maybeShowCoachmark,this.props.delay):this.props.shouldShow!==t.shouldShow&&false===t.shouldShow&&this.hideCoachmark()}},{key:"componentWillUnmount",value:function e(){this.hideCoachmark();window.clearTimeout(this.delayTimer);this.onResize.cancel();if(this.listenerInstalled){window.removeEventListener("resize",this.onResize);this.listenerInstalled=false}}},{key:"onCloseClick",value:function e(t){this.hideCoachmark();this.props.onSkip(t,"CLOSE")}},{key:"onContinueClick",value:function e(t){this.hideCoachmark();this.props.onContinue(t)}},{key:"onSkipClick",value:function e(t){this.hideCoachmark();this.props.onSkip(t,"SKIP")}},{key:"setCoachmarkRef",value:function e(t){this.coachmark=t}},{key:"setCoachmarkedContentRef",value:function e(t){this.coachmarkedContent=t}},{key:"containClickEvents",value:function e(t){t.stopPropagation()}},{key:"hideCoachmark",value:function e(){this.setState(function(){return{isShowing:false,contentsRect:null}});window.removeEventListener("resize",this.onResize);this.listenerInstalled=false}},{key:"maybeShowCoachmark",value:function e(){var t=this;var a=Object(m["isFunction"])(this.props.shouldShow)?this.props.shouldShow():this.props.shouldShow;if(a){this.setState(function(){return{isShowing:true,contentsRect:t.measureContents()}});window.addEventListener("resize",this.onResize);this.listenerInstalled=true;this.props.onShow()}else this.hideCoachmark()}},{key:"measureContents",value:function e(){if(this.coachmarkedContent)return Object(Vo["findDOMNode"])(this.coachmarkedContent).getBoundingClientRect();return null}},{key:"measureContentsAndSetState",value:function e(){var t=this;this.setState(function(){return{contentsRect:t.measureContents()}})}},{key:"renderCloseButton",value:function e(){if(!this.props.hasCloseButton)return null;return n.a.createElement(Ao["c"],{className:"p-coachmark__close_btn","data-qa":"coachmark_close_btn",onClick:this.onCloseClick,"aria-label":Qo.t("Close")},n.a.createElement(Wo["a"],{type:"times"}))}},{key:"renderContent",value:function e(){return n.a.createElement("div",{className:"p-coachmark__content"},this.props.content)}},{key:"renderFooter",value:function e(){var t=this.props.hasSkipLink?"p-coachmark__footer":fo()("p-coachmark__footer","margin_top_100");var a=this.props.continueButtonText||Qo.t("Got It",{fallbackHash:"8297bb17c6aa1537d802e8ab86dcd018ffb7b6d0"});return n.a.createElement("div",{className:t},this.renderSkipLink(),this.renderSkipButton(),n.a.createElement(Ao["d"],{onClick:this.onContinueClick,className:"p-coachmark__continue_button","data-qa":"coachmark_continue_btn"},a))}},{key:"renderSkipButton",value:function e(){if(!this.props.hasSkipButton)return null;return n.a.createElement(Ao["d"],{onClick:this.onSkipClick,type:"outline",className:"p-coachmark__skip_button margin_right_50","data-qa":"coachmark_skip_btn"},this.props.skipButtonText)}},{key:"renderSkipLink",value:function e(){if(!this.props.hasSkipLink)return null;var t=this.props.skipLinkPre||Qo.t("Done?");var a=this.props.skipLinkText||Qo.t("Click here to skip");return n.a.createElement("div",{className:"p-coachmark__skip_link"},n.a.createElement("span",null,t),t&&" ",n.a.createElement(Ao["c"],{className:"p-coachmark__skip_link_button","data-qa":"coachmark_skip_link",onClick:this.onSkipClick},a))}},{key:"renderTitle",value:function e(){return n.a.createElement("h3",{className:"p-coachmark__title"},this.props.title)}},{key:"render",value:function e(){var t=this.props,a=t.children,r=t.position,i=t.zIndex;var s=this.state,o=s.isShowing,l=s.contentsRect;var c=fo()("p-coachmark","p-coachmark--"+r,this.props.className);var u=o&&n.a.createElement(Ko["a"],{isOpen:o,position:r,targetBounds:l,allowanceX:Jo,allowanceY:Jo,zIndex:i,key:"coachmark-popover",onClose:this.onCloseClick},n.a.createElement("div",{className:c,"data-qa":"coachmark",onClick:this.containClickEvents,ref:this.setCoachmarkRef,role:"presentation"},n.a.createElement("div",{className:"p-coachmark__callout"}),this.renderCloseButton(),this.renderTitle(),this.renderContent(),this.renderFooter()));return n.a.cloneElement(a,{ref:this.setCoachmarkedContentRef},[].concat(fr()(n.a.Children.toArray(a.props.children)),[u]))}}]);return t}(r["PureComponent"]);Zo.displayName="DeprecatedCoachmark";Zo.defaultProps=Xo;var $o=Zo;var el=$o;var tl=a(1912);var al=new dr["b"]("channel_sidebar");var rl={coachmarkState:void 0,setJumperCoachmarkState:m["noop"],setUserPrefByApi:m["noop"],maybeShowOmniSwitcher:m["noop"],openFromQuickSwitcherCmd:m["noop"],historyNavigationEnabled:false,useHistoryNavigation:false};var nl=function(e){gn()(t,e);function t(e){var a;ln()(this,t);a=pn()(this,hn()(t).call(this,e));a.hideCoachmark=a.hideCoachmark.bind(fn()(a));a.hideButton=a.hideButton.bind(fn()(a));a.onShowContinue=a.onShowContinue.bind(fn()(a));a.onShowSkip=a.onShowSkip.bind(fn()(a));a.onHideContinue=a.onHideContinue.bind(fn()(a));a.onHideSkip=a.onHideSkip.bind(fn()(a));a.onButtonClick=a.onButtonClick.bind(fn()(a));return a}un()(t,[{key:"onButtonClick",value:function e(){this.props.openFromQuickSwitcherCmd({key:"button"})}},{key:"onHideContinue",value:function e(t){t.stopPropagation();this.clog("OK");this.hideButton()}},{key:"onHideSkip",value:function e(t,a){t.stopPropagation();switch(a){case"SKIP":this.clog("SKIP");return this.hideCoachmark();case"CLOSE":this.clog("CLOSE");return this.hideButton();default:return null}}},{key:"onShowContinue",value:function e(t){t.stopPropagation();this.clog("OK");this.hideCoachmark()}},{key:"onShowSkip",value:function e(t,a){t.stopPropagation();switch(a){case"SKIP":this.clog("SKIP");return this.hideButton();case"CLOSE":this.clog("CLOSE");return this.hideCoachmark();default:return null}}},{key:"clog",value:function e(t){var a=this.props,r=a.clogger,n=a.coachmarkState;var i={SHOW_BUTTON:"SIDEBAR_JUMPER_BUTTON_SHOW",HIDE_BUTTON:"SIDEBAR_JUMPER_BUTTON_HIDE"}[n];r.track("SIDEBAR_JUMPER_COACHMARK",{contexts:{ui_context:{action:t,step:i}}})}},{key:"hideButton",value:function e(){this.hideCoachmark();this.props.setUserPrefByApi({pref:"show_sidebar_quickswitcher_button",value:false});this.props.setUserPrefByApi({pref:"k_key_omnibox_auto_hide_count",value:5})}},{key:"hideCoachmark",value:function e(){this.props.setJumperCoachmarkState(null)}},{key:"maybeRenderCoachmark",value:function e(t){var a={SHOW:{title:al.rt("Get around Slack faster <sparkles></sparkles>",null,function(e){var t=e.tag,a=e.key;if("sparkles"===t)return n.a.createElement(jn["b"],{key:a,text:":sparkles:",emojiSize:jn["a"].MEDIUM});return null}),content:al.rt("To jump to a channel, person, or file \u2014 or even kick off a Slack search \u2014 try using the <strong>Quick Switcher</strong>. Summon it with this button or {shortcut}.",{shortcut:Object(Po["isMac"])()?"\u2318K":"Ctrl+K",fallbackHash:"e5c4c0b492d4a5244f99eabd8b8d5bc558e93e55"}),skipLinkText:al.t("Hide the sidebar button"),continueButtonText:al.t("OK")},HIDE:{title:al.t("You\u2019re a pro at keyboard shortcuts"),content:al.rt("Looks like you\u2019ve gotten the hang of using {shortcut} to summon the Quick Switcher. If you\u2019d like, you can gain back some sidebar space by hiding the <strong>Jump to</strong> button.",{shortcut:Object(Po["isMac"])()?"\u2318K":"Ctrl+K"}),skipLinkText:al.t("No thanks, I like the button"),continueButtonText:al.t("Hide Button")}};var r={skipLinkPre:"",position:"right-bottom",shouldShow:true,hasCloseButton:false,className:"p-channel_sidebar__jumper_coachmark"};switch(this.props.coachmarkState){case"SHOW_BUTTON":this.clog("IMPRESSION");return n.a.createElement(el,ho()({},r,a.SHOW,{onContinue:this.onShowContinue,onSkip:this.onShowSkip}),t);case"HIDE_BUTTON":this.clog("IMPRESSION");return n.a.createElement(el,ho()({},r,a.HIDE,{onContinue:this.onHideContinue,onSkip:this.onHideSkip}),t);default:return t}}},{key:"render",value:function e(){var t=this.props,a=t.historyNavigationEnabled,r=t.useHistoryNavigation;var i=Object(Po["isMac"])()?"\u2318K":"Ctrl+K";var s=al.t("Quick Switcher ({keyboardShortcut})",{keyboardShortcut:i,fallbackHash:"66d3ce0aa57a3b14881f5588807ccbd726af7a15",fallbackHashNs:"quick_switcher"});var o=n.a.createElement(Ao["c"],{className:"p-channel_sidebar__jumper",onClick:this.onButtonClick,"aria-label":s},n.a.createElement("div",{className:"p-channel_sidebar__jumper_left"},n.a.createElement(Wo["a"],{type:"filter",inherit:true,align:"baseline",className:"p-channel_sidebar__jumper_icon"}),al.t("Jump to...",{note:"This label should be brief. It needs to fit in a 192px wide container."})),!r&&n.a.createElement("span",{className:"p-channel_sidebar__jumper_keys"},i));return a?o:this.maybeRenderCoachmark(o)}}]);return t}(r["Component"]);nl.displayName="QuickswitcherButton";nl.defaultProps=rl;var il=function e(t){return{coachmarkState:Object(ja["getJumperCoachmarkState"])(t),clogger:Object(Va["a"])({state:t}),historyNavigationEnabled:Object(nr["a"])(t),useHistoryNavigation:Object(nr["b"])(t)}};var sl=function e(t){return{setJumperCoachmarkState:function e(){return t(ja["setJumperCoachmarkState"].apply(void 0,arguments))},setUserPrefByApi:function e(){return t(Na["d"].apply(void 0,arguments))},maybeShowOmniSwitcher:function e(){return t(jo["a"].apply(void 0,arguments))},openFromQuickSwitcherCmd:function e(){return t(Io["h"].apply(void 0,arguments))}}};var ol=Object(i["connect"])(il,sl)(nl);var ll=a(1617);var cl=function e(){if(Object(Po["isWindows"])()&&Object(Po["isSSB"])())return n.a.createElement("svg",{width:"16px",height:"16px",viewBox:"0 0 20 20",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},n.a.createElement("polygon",{className:"p-top_nav__windows_icon",points:"9.24804688 19.1894531 10.1269531 18.3105469 2.44140625 10.625 20 10.625 20 9.375 2.44140625 9.375 10.1269531 1.68945312 9.24804688 0.810546875 0.05859375 10"}));return n.a.createElement(No["a"],{type:"arrow-large-left"})};cl.displayName="HistoryBackIcon";var ul=cl;var dl=function e(){if(Object(Po["isWindows"])()&&Object(Po["isSSB"])())return n.a.createElement("svg",{width:"16px",height:"16px",viewBox:"0 0 20 20",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},n.a.createElement("polygon",{className:"p-top_nav__windows_icon",points:"10.7519531 19.1894531 19.9414062 10 10.7519531 0.810546875 9.87304688 1.68945312 17.5585938 9.375 0 9.375 0 10.625 17.5585938 10.625 9.87304688 18.3105469"}));return n.a.createElement(No["a"],{type:"arrow-large-right"})};dl.displayName="HistoryForwardIcon";var pl=dl;var ml=a(4678);var hl=a(1488);var vl=a(835);var fl={tooltip:void 0,tooltipPosition:void 0,ariaLabel:void 0,className:void 0};var bl=n.a.forwardRef(function(e,t){var a=e.iconType,r=e.onClick,i=e.isDisabled,s=e.tooltip,o=e.tooltipPosition,l=e.ariaLabel,c=e.className;var u=fo()("p-channel_sidebar__history_button",c,{"p-channel_sidebar__history_button--disabled":i});var d=Object(m["isString"])(a)?n.a.createElement(Wo["b"],{type:a}):a;return n.a.createElement(vl["c"],{tip:s,position:o||"bottom",delay:vl["a"]},n.a.createElement(Ao["c"],{className:u,onClick:r,"aria-label":l,"aria-disabled":i,tabIndex:i?-1:void 0,ref:t},d))});bl.defaultProps=fl;var gl=bl;var _l=new dr["b"]("navigation");var yl={historyNavigationEnabled:false,isIAP1Enabled:false,closeModal:m["noop"],isModalOpen:false};var Ol=function(e){gn()(t,e);function t(e){var a;ln()(this,t);a=pn()(this,hn()(t).call(this,e));a.onBackClick=a.onBackClick.bind(fn()(a));a.onForwardClick=a.onForwardClick.bind(fn()(a));a.focus=a.focus.bind(fn()(a));a.backButtonRef=n.a.createRef();a.forwardButtonRef=n.a.createRef();return a}un()(t,[{key:"componentDidMount",value:function e(){Object(hl["c"])()}},{key:"componentDidUpdate",value:function e(t){if(this.props.primaryView===t.primaryView)return;Object(hl["c"])()}},{key:"onBackClick",value:function e(){var t=this.props.isIAP1Enabled;if(t&&this.props.isModalOpen)return this.props.closeModal();return this.props.triggerNavigateBack({fromKeyboardShortcut:false})}},{key:"onForwardClick",value:function e(){var t=this.props.isIAP1Enabled;if(t&&this.props.isModalOpen)return this.props.closeModal();return this.props.triggerNavigateForward({fromKeyboardShortcut:false})}},{key:"focus",value:function e(){if(!Object(hl["a"])()){var t=this.backButtonRef.current;if(t){t.focus();return true}}if(!Object(hl["b"])()){var a=this.forwardButtonRef.current;if(a){a.focus();return true}}return false}},{key:"render",value:function e(){var t=this.props,a=t.historyNavigationEnabled,r=t.isIAP1Enabled;if(!a)return null;var i=_l.t("Previous conversation");var s=_l.t("Next conversation");var o=Object(Po["isMac"])()?"\u2318":"Ctrl";if(r){i=n.a.createElement(ml["a"],{title:"Previous",mainKey:Object(Po["isMac"])()?"[":"\u2190",modifiers:[o]});s=n.a.createElement(ml["a"],{title:"Next",mainKey:Object(Po["isMac"])()?"]":"\u2192",modifiers:[o]})}return n.a.createElement(n.a.Fragment,null,n.a.createElement(gl,{onClick:this.onBackClick,tooltip:i,tooltipPosition:r?"bottom-left":"bottom",ariaLabel:_l.t("Move to the previous conversation"),className:"p-channel_sidebar__history_button-left",iconType:r?n.a.createElement(ul,null):"chevron-medium-left",isDisabled:Object(hl["a"])(),ref:this.backButtonRef}),n.a.createElement(gl,{onClick:this.onForwardClick,tooltip:s,ariaLabel:_l.t("Move to the next conversation"),className:"p-channel_sidebar__history_button-right",iconType:r?n.a.createElement(pl,null):"chevron-medium-right",isDisabled:Object(hl["b"])(),ref:this.forwardButtonRef}))}}]);return t}(r["Component"]);Ol.displayName="History";Ol.defaultProps=yl;var kl=function e(t){return{historyNavigationEnabled:Object(nr["a"])(t),primaryView:Object(Ga["a"])(t),isModalOpen:Object(Ri["isModalOpen"])(t)}};var El=function e(t){return{triggerNavigateForward:function e(a){return t(Object(ll["b"])(a))},triggerNavigateBack:function e(a){return t(Object(ll["a"])(a))},closeModal:function e(){return t(Object(Ri["closeModal"])())}}};var Cl=Object(i["connect"])(kl,El,null,{pure:false,withRef:true})(Ol);var Sl=new dr["b"]("channel_sidebar");var wl={useHistoryNavigation:false,shouldUseChannelSections:false,isOrganizing:false};var jl=function e(t){var a=Sl.t("Navigation",{fallbackHash:"cf03cf2e9cdf95a20af09137dfb9071db0c31bf2",fallbackHashNs:"shortcuts_flexpane"});return n.a.createElement("div",{className:"p-channel_sidebar__navigation_bar",role:"toolbar","aria-orientation":"vertical","aria-label":a},!(t.shouldUseChannelSections&&t.isOrganizing)&&n.a.createElement(n.a.Fragment,null,n.a.createElement(ol,null),t.useHistoryNavigation&&n.a.createElement(Cl,null)))};jl.displayName="NavigationBar";jl.defaultProps=wl;var Il=function e(t){return{shouldUseChannelSections:Object(lr["a"])(t),isOrganizing:Object(cr["l"])(t)}};var Tl={};var Al=Object(i["connect"])(Il,Tl)(jl);var Nl=a(30);var Pl=a(286);var Ml=a(757);var Dl=a.n(Ml);var xl=a(775);var Rl=a(852);var Fl=a(1207);var Ll=a(42);var Ul=a(846);var Bl=a(755);var ql=a(1345);var Gl=a(1157);var Hl=a(1158);var Wl=a(388);var Vl={shouldUseChannelSections:false,isOrganizing:false};var Kl=function e(t){if(t.shouldUseChannelSections&&t.isOrganizing)return null;return n.a.createElement(Ao["c"],{className:"p-channel_sidebar__section_heading p-channel_sidebar__section-heading--pages-drawer",role:"group",onClick:function e(){return t.setIAPagesetExpanded(!t.isPagesetExpanded)}},n.a.createElement(Wo["b"],{type:t.isPagesetExpanded?"arrow-large-up":"arrow-large-down",size:"inherit",inline:true,className:"p-channel_sidebar__section-heading--pages-drawer-icon"}),t.isPagesetExpanded?"Show less":"Show more")};Kl.displayName="BrowseHeading";Kl.defaultProps=Vl;var zl=function e(t){return{isPagesetExpanded:Object(Un["b"])(t),shouldUseChannelSections:Object(lr["a"])(t),isOrganizing:Object(cr["l"])(t)}};var Ql=function e(t){return{setIAPagesetExpanded:function e(){return t(Un["c"].apply(void 0,arguments))}}};var Yl=Object(i["connect"])(zl,Ql)(Kl);var Jl=a(1662);var Xl=a(123);var Zl=a(220);var $l=a(418);var ec=a(54);var tc=a(1822);var ac=a(1180);var rc={};function nc(e,t){var a=rc[e.teamId];if(!a){a={};rc[e.teamId]=a}return function(){var r=t({eventId:arguments.length<=0?void 0:arguments[0],payload:arguments.length<=1?void 0:arguments[1]});if(!a[r]){a[r]=true;e.track.apply(e,arguments)}}}var ic=Object(m["memoize"])(nc);var sc={clearCache:function e(){Object.keys(rc).forEach(function(e){rc[e]={}})}};var oc=new dr["b"]("channel_sidebar");var lc={selectItem:m["noop"],dismissInstalledAppDmSuggestion:m["noop"],featureSidebarVirtualized:false,clogger:{track:m["noop"]}};var cc=function e(t){var a=t.eventId,r=t.payload;return a+"-"+r.contexts.ui_context.action+"-"+r.contexts.core.app_id};var uc=function e(t){var a=t.action,r=t.appId;return{contexts:{ui_context:{action:a},core:{app_id:r}}}};function dc(e){var t=e.id,a=e.name,i=e.appId,s=e.teamDomain,o=e.startImByMemberId,l=e.dismissInstalledAppDmSuggestion,c=e.featureSidebarContextMenu,u=e.featureSidebarVirtualized,d=e.clogger;Object(r["useEffect"])(function(){var e=ic(d,cc);e(Ka["EventId"].APP_SIDEBAR,uc({action:Ka["UiAction"].IMPRESSION,appId:i}))});var p=Object(r["useState"])(false),m=Gi()(p,2),h=m[0],v=m[1];var f=Object(r["useCallback"])(function(e){e.preventDefault();d.track(Ka["EventId"].APP_SIDEBAR,uc({action:Ka["UiAction"].CLICK,appId:i}));o({memberId:t})},[d,i,o,t]);var b=Object(r["useCallback"])(function(){return l({memberId:t,appId:i})},[i,l,t]);var g=Object(r["useCallback"])(function(){return[{label:oc.t("Dismiss app"),click:b}]},[b]);var _=Object(r["useCallback"])(function(e){e.target.offsetWidth<e.target.scrollWidth&&v(true)},[v]);var y=u?-1:void 0;var O=n.a.createElement(Ao["c"],{onClick:b,className:"p-channel_sidebar__close","aria-label":u?void 0:oc.t("Dismiss app"),"aria-hidden":!!u||void 0,tabIndex:y},n.a.createElement(Wo["a"],{type:"times-circle-medium"}));var k=n.a.createElement("div",{className:"p-channel_sidebar__close_container"},n.a.createElement(Zl["a"],{href:Object(Ma["constructAbsoluteChannelPermalink"])({channelId:t,teamDomain:s}),className:"p-channel_sidebar__channel p-channel_sidebar__channel--suggested",onClick:f,"data-qa-channel-sidebar-channel":true,"data-qa-channel-sidebar-channel-id":t,draggable:false,"data-drag-type":"channel","data-drag-id":t,tabIndex:y,role:u?"presentation":void 0},n.a.createElement($l["a"],{className:"p-channel_sidebar__presence_icon",memberId:t,enablePresenceSubscriptions:false,inline:false}),n.a.createElement(ec["c"],{delay:ec["a"],position:"top-left",tip:a,tipClassName:fo()({hidden:!h})},n.a.createElement("span",{className:"p-channel_sidebar__name","data-qa":"channel_sidebar_name",onMouseEnter:_},a))),O);if(c)return n.a.createElement(ac["a"],{getTemplate:g},k);return k}dc.defaultProps=lc;var pc=function e(t,a){var r=a.id;var n=false;var i=Object(Ua["e"])(t,r,n);return{featureSidebarContextMenu:Object(Ba["isFeatureEnabled"])(t,"feature_sidebar_context_menu"),teamDomain:Object(Qn["d"])(t).domain,name:Object(Da["getPrefCompliantMemberNameById"])(t,r),appId:Object(Da["getAppIdFromMember"])(i),clogger:Object(Va["a"])({state:t}),featureSidebarVirtualized:Object(Ba["isFeatureEnabled"])(t,"feature_sidebar_virtualized")}};var mc=function e(t){return Object(X["bindActionCreators"])({dismissInstalledAppDmSuggestion:tc["a"],startImByMemberId:l["startImByMemberId"]},t)};var hc=Object(i["connect"])(pc,mc)(dc);function vc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fc(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||false;r.configurable=true;"value"in r&&(r.writable=true);Object.defineProperty(e,r.key,r)}}function bc(e,t,a){t&&fc(e.prototype,t);a&&fc(e,a);return e}var gc=false;var _c=false;var yc=function(){function e(t){vc(this,e);this.sourceId=null;this.internalMonitor=t.getMonitor()}bc(e,[{key:"receiveHandlerId",value:function e(t){this.sourceId=t}},{key:"getHandlerId",value:function e(){return this.sourceId}},{key:"canDrag",value:function e(){f()(!gc,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{gc=true;return this.internalMonitor.canDragSource(this.sourceId)}finally{gc=false}}},{key:"isDragging",value:function e(){if(!this.sourceId)return false;f()(!_c,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{_c=true;return this.internalMonitor.isDraggingSource(this.sourceId)}finally{_c=false}}},{key:"subscribeToStateChange",value:function e(t,a){return this.internalMonitor.subscribeToStateChange(t,a)}},{key:"isDraggingSource",value:function e(t){return this.internalMonitor.isDraggingSource(t)}},{key:"isOverTarget",value:function e(t,a){return this.internalMonitor.isOverTarget(t,a)}},{key:"getTargetIds",value:function e(){return this.internalMonitor.getTargetIds()}},{key:"isSourcePublic",value:function e(){return this.internalMonitor.isSourcePublic()}},{key:"getSourceId",value:function e(){return this.internalMonitor.getSourceId()}},{key:"subscribeToOffsetChange",value:function e(t){return this.internalMonitor.subscribeToOffsetChange(t)}},{key:"canDragSource",value:function e(t){return this.internalMonitor.canDragSource(t)}},{key:"canDropOnTarget",value:function e(t){return this.internalMonitor.canDropOnTarget(t)}},{key:"getItemType",value:function e(){return this.internalMonitor.getItemType()}},{key:"getItem",value:function e(){return this.internalMonitor.getItem()}},{key:"getDropResult",value:function e(){return this.internalMonitor.getDropResult()}},{key:"didDrop",value:function e(){return this.internalMonitor.didDrop()}},{key:"getInitialClientOffset",value:function e(){return this.internalMonitor.getInitialClientOffset()}},{key:"getInitialSourceClientOffset",value:function e(){return this.internalMonitor.getInitialSourceClientOffset()}},{key:"getSourceClientOffset",value:function e(){return this.internalMonitor.getSourceClientOffset()}},{key:"getClientOffset",value:function e(){return this.internalMonitor.getClientOffset()}},{key:"getDifferenceFromInitialOffset",value:function e(){return this.internalMonitor.getDifferenceFromInitialOffset()}}]);return e}();function Oc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kc(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||false;r.configurable=true;"value"in r&&(r.writable=true);Object.defineProperty(e,r.key,r)}}function Ec(e,t,a){t&&kc(e.prototype,t);a&&kc(e,a);return e}var Cc=function(){function e(t){var a=this;Oc(this,e);this.hooks=P({dragSource:function e(t,r){a.clearDragSource();a.dragSourceOptions=r||null;D(t)?a.dragSourceRef=t:a.dragSourceNode=t;a.reconnectDragSource()},dragPreview:function e(t,r){a.clearDragPreview();a.dragPreviewOptions=r||null;D(t)?a.dragPreviewRef=t:a.dragPreviewNode=t;a.reconnectDragPreview()}});this.handlerId=null;this.dragSourceRef=null;this.dragSourceOptionsInternal=null;this.dragPreviewRef=null;this.dragPreviewOptionsInternal=null;this.lastConnectedHandlerId=null;this.lastConnectedDragSource=null;this.lastConnectedDragSourceOptions=null;this.lastConnectedDragPreview=null;this.lastConnectedDragPreviewOptions=null;this.backend=t}Ec(e,[{key:"receiveHandlerId",value:function e(t){if(this.handlerId===t)return;this.handlerId=t;this.reconnect()}},{key:"reconnect",value:function e(){this.reconnectDragSource();this.reconnectDragPreview()}},{key:"reconnectDragSource",value:function e(){var t=this.dragSource;var a=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();a&&this.disconnectDragSource();if(!this.handlerId)return;if(!t){this.lastConnectedDragSource=t;return}if(a){this.lastConnectedHandlerId=this.handlerId;this.lastConnectedDragSource=t;this.lastConnectedDragSourceOptions=this.dragSourceOptions;this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,t,this.dragSourceOptions)}}},{key:"reconnectDragPreview",value:function e(){var t=this.dragPreview;var a=this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(this.handlerId){if(this.dragPreview&&a){this.lastConnectedHandlerId=this.handlerId;this.lastConnectedDragPreview=t;this.lastConnectedDragPreviewOptions=this.dragPreviewOptions;this.disconnectDragPreview();this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,t,this.dragPreviewOptions)}}else this.disconnectDragPreview()}},{key:"didHandlerIdChange",value:function e(){return this.lastConnectedHandlerId!==this.handlerId}},{key:"didConnectedDragSourceChange",value:function e(){return this.lastConnectedDragSource!==this.dragSource}},{key:"didConnectedDragPreviewChange",value:function e(){return this.lastConnectedDragPreview!==this.dragPreview}},{key:"didDragSourceOptionsChange",value:function e(){return!j()(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}},{key:"didDragPreviewOptionsChange",value:function e(){return!j()(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}},{key:"disconnectDragSource",value:function e(){if(this.dragSourceUnsubscribe){this.dragSourceUnsubscribe();this.dragSourceUnsubscribe=void 0}}},{key:"disconnectDragPreview",value:function e(){if(this.dragPreviewUnsubscribe){this.dragPreviewUnsubscribe();this.dragPreviewUnsubscribe=void 0;this.dragPreviewNode=null;this.dragPreviewRef=null}}},{key:"clearDragSource",value:function e(){this.dragSourceNode=null;this.dragSourceRef=null}},{key:"clearDragPreview",value:function e(){this.dragPreviewNode=null;this.dragPreviewRef=null}},{key:"connectTarget",get:function e(){return this.dragSource}},{key:"dragSourceOptions",get:function e(){return this.dragSourceOptionsInternal},set:function e(t){this.dragSourceOptionsInternal=t}},{key:"dragPreviewOptions",get:function e(){return this.dragPreviewOptionsInternal},set:function e(t){this.dragPreviewOptionsInternal=t}},{key:"dragSource",get:function e(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}},{key:"dragPreview",get:function e(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}}]);return e}();function Sc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wc(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||false;r.configurable=true;"value"in r&&(r.writable=true);Object.defineProperty(e,r.key,r)}}function jc(e,t,a){t&&wc(e.prototype,t);a&&wc(e,a);return e}var Ic=["canDrag","beginDrag","isDragging","endDrag"];var Tc=["beginDrag"];var Ac=function(){function e(t,a,r){var n=this;Sc(this,e);this.props=null;this.beginDrag=function(){if(!n.props)return;var e=n.spec.beginDrag(n.props,n.monitor,n.ref.current);false;return e};this.spec=t;this.monitor=a;this.ref=r}jc(e,[{key:"receiveProps",value:function e(t){this.props=t}},{key:"canDrag",value:function e(){if(!this.props)return false;if(!this.spec.canDrag)return true;return this.spec.canDrag(this.props,this.monitor)}},{key:"isDragging",value:function e(t,a){if(!this.props)return false;if(!this.spec.isDragging)return a===t.getSourceId();return this.spec.isDragging(this.props,this.monitor)}},{key:"endDrag",value:function e(){if(!this.props)return;if(!this.spec.endDrag)return;this.spec.endDrag(this.props,this.monitor,W(this.ref))}}]);return e}();function Nc(e){Object.keys(e).forEach(function(t){f()(Ic.indexOf(t)>-1,'Expected the drag source specification to only have some of the following keys: %s. Instead received a specification with an unexpected "%s" key. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source',Ic.join(", "),t);f()("function"===typeof e[t],"Expected %s in the drag source specification to be a function. Instead received a specification with %s: %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source",t,t,e[t])});Tc.forEach(function(t){f()("function"===typeof e[t],"Expected %s in the drag source specification to be a function. Instead received a specification with %s: %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source",t,t,e[t])});return function t(a,r){return new Ac(e,a,r)}}function Pc(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};Q("DragSource","type, spec, collect[, options]",e,t,a,r);var n=e;if("function"!==typeof e){f()(S(e),'Expected "type" provided as the first argument to DragSource to be a string, or a function that returns a string given the current props. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source',e);n=function t(){return e}}f()(O(t),'Expected "spec" provided as the second argument to DragSource to be a plain object. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source',t);var i=Nc(t);f()("function"===typeof a,'Expected "collect" provided as the third argument to DragSource to be a function that returns a plain object of props to inject. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source',a);f()(O(r),'Expected "options" provided as the fourth argument to DragSource to be a plain object when specified. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source',a);return function e(t){return fa({containerDisplayName:"DragSource",createHandler:i,registerHandler:E,createConnector:function e(t){return new Cc(t)},createMonitor:function e(t){return new yc(t)},DecoratedComponent:t,getType:n,collect:a,options:r})}}var Mc=a(1835);var Dc=a(239);var xc=Object(Ja["b"])("Dismiss suggested channel from channels list",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelId;e(Object(Dc["d"])({ids:[r]}));var n=Object(Ta["i"])(t()).split(",");var i=n.indexOf(r);if(-1!==i){n.splice(i,1);e(Object(Na["d"])({pref:"newxp_suggested_channels",value:n.join(",")}))}});xc.meta={name:"dismissSuggestedChannel",key:"actionsDismissSuggestedChannelDismissSuggestedChannel",description:"Dismiss suggested channel from channels list"};xc.propTypes={channelId:ur["default"].string.isRequired};var Rc=xc;var Fc=a(1222);var Lc=a(1343);var Uc=a(822);var Bc=a(5002);var qc=Object(pr["e"])("Channel Sections: Move one more more channels to a section with toast & undo",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelIds,n=a.channelSectionId;return e(Mn({remove:Or(t(),r),insert:[{channelSectionId:n,channelIds:r}]}))});qc.meta={name:"performMoveManyChannelsToSection",key:"actionsUiChannelSectionsPerformMoveManyChannelsToSectionPerformMoveManyChannelsToSection",description:"Channel Sections: Move one more more channels to a section with toast & undo"};qc.propTypes={channelIds:ur["default"].arrayOf(ur["default"].string).isRequired,channelSectionId:ur["default"].string.isRequired};var Gc=qc;var Hc=new dr["b"]("channel_sidebar");var Wc=Object(pr["e"])("create a channel section, move channels to that section, and send a toast with undo support",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelIds,i=a.name,s=a.emoji;var o=Object(hr["e"])(t());if(!o)return Promise.resolve();var l=e(Ur({channelIds:r,name:i,emoji:s})),c=l.resultPromise,u=l.undo;var d=function e(){var a;u();Object(Va["a"])({state:t()}).track(Ka["EventId"].CHANNEL_SECTIONS_CHANNELS_MOVE,{context:{ui_context:(a={},p()(a,Ka["UiContextKeys"].action,Ka["UiAction"].UNDO),p()(a,Ka["UiContextKeys"].ui_component_name,"PerformMoveManyChannelsToNewSection"),a)}})};return c.then(function(t){e(Object(mr["enqueueToast"])({element:n.a.createElement(Sn,{undo:d},Hc.rt("Moved {numChannels, plural, =1{conversation} other{# conversations}} to {channelSection}.",{numChannels:r.length,channelSection:n.a.createElement("strong",null,n.a.createElement(An,{channelSection:t}))}))}))})});Wc.meta={name:"performMoveManyChannelsToNewSection",key:"actionsUiChannelSectionsPerformMoveManyChannelsToNewSectionPerformMoveManyChannelsToNewSection",description:"create a channel section, move channels to that section, and send a toast with undo support"};var Vc=Wc;var Kc=new dr["b"]("channel_sidebar");var zc=Object(pr["e"])("create a channel section and send a toast with undo support",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.name,i=a.emoji,s=a.nextChannelSectionId;var o=Object(hr["e"])(t());if(!o)return Promise.resolve();var l=e(Lr({name:r,emoji:i,nextChannelSectionId:s})),c=l.resultPromise,u=l.undo;var d=function e(){var a;u();Object(Va["a"])({state:t()}).track(Ka["EventId"].CHANNEL_SECTIONS_CREATE,{context:{ui_context:(a={},p()(a,Ka["UiContextKeys"].action,Ka["UiAction"].UNDO),p()(a,Ka["UiContextKeys"].ui_component_name,"PerformChannelSectionCreate"),a)}})};return c.then(function(t){e(Object(mr["enqueueToast"])({element:n.a.createElement(Sn,{undo:d},Kc.rt("Created {channelSection}.",{channelSection:n.a.createElement("strong",null,n.a.createElement(An,{channelSection:t}))}))}))})});zc.meta={name:"performChannelSectionCreate",key:"actionsUiChannelSectionsPerformChannelSectionCreatePerformChannelSectionCreate",description:"create a channel section and send a toast with undo support"};var Qc=zc;var Yc=a(278);var Jc=a.n(Yc);var Xc=a(756);var Zc=a(136);var $c=Object(Ja["b"])("Opens Sonic in a new window in channel-popout mode",function(){var e=Jc()(regeneratorRuntime.mark(function e(t,a){var r,n,i,s,o,l,c,u,d=arguments;return regeneratorRuntime.wrap(function e(p){while(1)switch(p.prev=p.next){case 0:r=d.length>2&&void 0!==d[2]?d[2]:{},n=r.channelId;i=Object(tr["b"])(a());s=location.search;s=Object(Zc["f"])(s,"channel_popout","1");s=Object(Zc["f"])(s,"multi_team","0");p.next=7;return t(Object(Xc["c"])({pathname:"/client/"+i+"/"+n+s,windowOptions:{height:650,width:800,minContentHeight:400,minContentWidth:400,left:200,top:100},popupInBrowser:true}));case 7:o=p.sent;u=new Promise(function(e,t){l=e;c=t});o.onReady=function(){try{l(o.getWindow())}catch(e){c(e)}};return p.abrupt("return",u);case 11:case"end":return p.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}());$c.meta={name:"openChannelPopout",key:"actionsOpenChannelPopoutOpenChannelPopout",description:"Opens Sonic in a new window in channel-popout mode"};$c.propTypes={channelId:ur["default"].string.isRequired};var eu=$c;var tu=a(784);var au=a(781);var ru=a(547);var nu=a(1676);var iu=a(257);var su=a(117);var ou=a(1213);var lu=a(391);var cu=a(98);var uu=a(141);var du=new dr["b"]("channel_sidebar");var pu=Object(pr["e"])("rename channel section with toast & undo support",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelSectionId,i=a.name,s=a.emoji;var o=Object(hr["e"])(t());if(!o)return Promise.resolve();var l=e(Gr({channelSectionId:r,name:i,emoji:s})),c=l.resultPromise,u=l.undo;var d=function e(){var a;u();Object(Va["a"])({state:t()}).track(Ka["EventId"].CHANNEL_SECTIONS_RENAME,{context:p()({ui_context:(a={},p()(a,Ka["UiContextKeys"].action,Ka["UiAction"].UNDO),p()(a,Ka["UiContextKeys"].ui_component_name,"PerformChannelSectionRename"),a)},Ka["ChannelSectionsKeys"].channel_section_id,r)})};return c.then(function(){e(Object(mr["enqueueToast"])({element:n.a.createElement(Sn,{undo:d},du.rt("Renamed to {channelSection}.",{channelSection:n.a.createElement("strong",null,n.a.createElement(An,{channelSection:Object(cr["h"])(t(),r)}))}))}))})});pu.meta={name:"performChannelSectionRename",key:"actionsUiChannelSectionsPerformChannelSectionRenamePerformChannelSectionRename",description:"rename channel section with toast & undo support"};var mu=pu;var hu=a(1287);var vu=a(1350);var fu=a(4852);var bu=new dr["b"]("current_status");var gu={CREATE:"create",RENAME:"rename",CREATE_AND_MOVE:"move"};var _u=80;var yu=74;var Ou="name_not_allowed";var ku="name_taken";var Eu="name_empty";var Cu="name_too_long";var Su="too_many_sections";var wu="emoji_invalid";var ju="unknown";var Iu="partial_success";var Tu={emojiMenuPosition:"bottom-left",initialText:"",initialEmoji:"",closeModal:m["noop"],featureDangerouslyGuardIATranslations:false,channelSectionNameSet:{},channelSectionId:void 0,channelIds:[],onAttemptSubmit:m["noop"],nextChannelSectionId:"",firstChannelSectionId:"",canCreateChannelSection:false,firstChannelToMove:void 0};function Au(e){if(!e)return n.a.createElement("div",{className:"p-channel_section_modal_input__empty_emoji"},n.a.createElement(Wo["a"],{className:"p-channel_section_modal_input__emoji_circle_icon",type:"circle-fill"}),n.a.createElement(Wo["a"],{className:"p-channel_section_modal_input__emoji_smile_icon",type:"smile-o"}),n.a.createElement(Wo["a"],{className:"p-channel_section_modal_input__emoji_happy_icon",type:"happy-smile"}));return n.a.createElement("div",{className:"p-channel_section_modal_input__emoji"},n.a.createElement(jn["b"],{text:e,stopAnimations:true,obeyEmojiMode:false,emojiSize:jn["a"].MEDIUM,forceDisplay:true}))}Au.displayName="renderEmoji";var Nu=function(e){gn()(t,e);function t(e){var a;ln()(this,t);a=pn()(this,hn()(t).call(this,e));a.dialog=n.a.createRef();a.state={text:e.initialText,emoji:e.initialEmoji,userDidSelectEmoji:!!e.initialEmoji,selectedPresetIndex:void 0,validationState:a.getValidationStateForName(e.initialText),isPending:false};a.onTextChange=a.onTextChange.bind(fn()(a));a.onEmojiChange=a.onEmojiChange.bind(fn()(a));a.onEnter=a.onEnter.bind(fn()(a));a.onSubmit=a.onSubmit.bind(fn()(a));a.onClearIconClick=a.onClearIconClick.bind(fn()(a));a.setFocusOnTextInput=a.setFocusOnTextInput.bind(fn()(a));a.selectedPresetOptionRef=n.a.createRef();a.textComponent=n.a.createRef();return a}un()(t,[{key:"componentDidMount",value:function e(){var t=this;if(this.dialog){this.keyCommands=new Co["a"](this.dialog.node);this.keyCommands.bindAll([{keys:["enter"],handler:function e(){return t.onEnter()}}])}}},{key:"UNSAFE_componentWillReceiveProps",value:function e(t){var a=this;var r=this.props,n=r.initialEmoji,i=r.initialText;var s=t.initialEmoji,o=t.initialText;if(n===s&&i===o)return;if(this.hasUnsavedChanges())return;var l=o;this.setState(function(){return{emoji:s,text:l,validationState:a.getValidationStateForName(l)}})}},{key:"componentDidUpdate",value:function e(){this.selectedPresetOptionRef.current&&this.selectedPresetOptionRef.current.focus()}},{key:"componentWillUnmount",value:function e(){this.keyCommands&&this.keyCommands.reset()}},{key:"onClearIconClick",value:function e(){this.clearStatus()}},{key:"onEmojiChange",value:function e(t){this.setState(function(){return{emoji:t,userDidSelectEmoji:true}},this.setFocusOnTextInput)}},{key:"onEnter",value:function e(){var t=this.state.validationState;this.hasUnsavedChanges()&&t.isValid&&this.onSubmit()}},{key:"onPresetSelected",value:function e(t){var a=this;var r=t.emoji,n=t.text;this.setState(function(){return{emoji:r,text:n,userDidSelectEmoji:true,validationState:a.getValidationStateForName(n)}},this.setFocusOnTextInput)}},{key:"onSubmit",value:function e(){var t=this;var a=this.state,r=a.validationState,n=a.emoji,i=a.text;if(!this.hasUnsavedChanges()||!r.isValid)return;this.props.onAttemptSubmit();this.setState(function(){return{isPending:true}});var s;switch(this.props.action){case gu.CREATE:s=this.props.performChannelSectionCreate({emoji:n,name:i,nextChannelSectionId:this.props.nextChannelSectionId||this.props.firstChannelSectionId});break;case gu.RENAME:s=this.props.performChannelSectionRename({channelSectionId:this.props.channelSectionId,emoji:n,name:i});break;case gu.CREATE_AND_MOVE:s=this.props.performMoveManyChannelsToNewSection({channelIds:this.props.channelIds,emoji:n,name:i,nextChannelSectionId:this.props.nextChannelSectionId||this.props.firstChannelSectionId});break;default:return}s.then(function(){t.props.closeModal()}).catch(function(e){var a={too_many_sections:{reason:Su,isValid:true},emoji_invalid:{reason:wu,isValid:true},name_invalid:{reason:Ou,isValid:false},already_exists:{reason:ku,isValid:false}};var r={reason:ju,isValid:true};if("move"===e.failureContext)r={reason:Iu,isValid:false,sectionName:i};else if("create"===e.failureContext){var n;r=a[null===(n=e.wrapped.data)||void 0===n?void 0:n.error]}else{var s;r=a[null===(s=e.data)||void 0===s?void 0:s.error]}t.setState(function(){return{validationState:r||{reason:ju,isValid:true}}})}).finally(function(){t.setState(function(){return{isPending:false}})})}},{key:"onTextChange",value:function e(t){var a=this;var r=this.state,n=r.text,i=r.emoji,s=r.userDidSelectEmoji;if(t===n)return;var o=i;s||(o="");this.setState(function(){return{text:t,emoji:o,validationState:a.getValidationStateForName(t)}})}},{key:"setFocusOnTextInput",value:function e(){this.textComponent.current.focus();this.resetSelectedPresetIndex()}},{key:"setSelectedPresetIndex",value:function e(t){this.setState(function(){return{selectedPresetIndex:t}})}},{key:"getValidationStateForName",value:function e(t){var a=Object(vu["a"])(t);var r=function e(t){return{isValid:false,reason:t}};if(!t||0===a.length)return r(Eu);if(t.length>_u||a.length>_u)return r(Cu);if("ekm_access_denied"===a)return r(Ou);if(a in this.props.channelSectionNameSet)return r(ku);var n=this.props.action===gu.CREATE||this.props.action===gu.CREATE_AND_MOVE;if(n&&!this.props.canCreateChannelSection)return r(Su);return{isValid:true,reason:null}}},{key:"clearStatus",value:function e(){var t=this;var a=["","","",void 0,false],r=a[0],n=a[1],i=a[2];this.setState(function(){return{text:r,emoji:n,userDidSelectEmoji:i,validationState:t.getValidationStateForName(r)}},function(){t.setFocusOnTextInput()})}},{key:"hasInput",value:function e(){var t=this.state,a=t.emoji,r=t.text;return!!(r||a)}},{key:"hasUnsavedChanges",value:function e(){var t=this.props,a=t.initialText,r=t.initialEmoji;var n=this.state,i=n.emoji,s=n.text;return i!==r||s!==a}},{key:"maybeRenderSaveButton",value:function e(){var t=this.state.validationState;if(!this.hasUnsavedChanges())return null;var a=bu.t("Save");return n.a.createElement("div",{className:"align_right"},n.a.createElement(Ao["d"],{type:"primary",size:"small",onClick:this.onSubmit,disabled:!t.isValid,"data-qa":"channel_selection_modal_input_submit_button"},a))}},{key:"resetSelectedPresetIndex",value:function e(){this.setSelectedPresetIndex()}},{key:"renderActionButtons",value:function e(){var t=this.hasUnsavedChanges()||this.hasInput();var a=fo()("p-channel_section_modal_input__actions","p-channel_section_modal_input__actions--with_expiry",{"p-channel_section_modal_input__actions--invisible":!t});return n.a.createElement("div",{className:a},this.maybeRenderSaveButton())}},{key:"renderClearIcon",value:function e(){var t=this.state,a=t.text,r=t.emoji;if(!a&&!r)return null;var i=bu.t("Clear all");var s="top";var o=n.a.createElement(cu["a"],{className:"p-channel_section_modal_input__clear_link","aria-label":i,"data-qa":"channel_selection_modal_clear_icon",onClick:this.onClearIconClick},n.a.createElement(Wo["a"],{type:"close-filled",className:"p-channel_section_modal_input__clear_icon"}));return n.a.createElement("div",{className:"p-channel_section_modal_input__status_clear_icon_wrap"},n.a.createElement(ec["c"],{tip:i,position:s,zIndex:"above_fs"},o))}},{key:"renderEmojiPicker",value:function e(){var t=this;var a=this.props.emojiMenuPosition;var r=this.state.emoji;var i="top"===a?-5:5;return n.a.createElement(ou["a"],{onEmojiSelected:function e(a,r){return t.onEmojiChange(":"+r+":")},offsetY:i,position:a},n.a.createElement(cu["a"],{className:"p-channel_section_modal_input__emoji_picker","aria-label":bu.t("Emoji menu"),"data-qa":"channel_selection_modal_input_emoji_picker"},Au(r)))}},{key:"renderPresetOption",value:function e(t,a){var r=this;var i=this.state.selectedPresetIndex;var s=t.emoji,o=t.text,l=t.description;var c=a===i?this.selectedPresetOptionRef:void 0;return n.a.createElement(cu["a"],{className:"p-channel_section_modal_input__preset_option","data-qa":"channel_selection_modal_input_preset_option",onClick:function e(){return r.onPresetSelected({emoji:s,text:o})},key:a,onFocus:function e(){return r.setSelectedPresetIndex(a)},onBlur:function e(){return r.resetSelectedPresetIndex()},ref:c},n.a.createElement("div",{className:"p-channel_section_modal_input__preset_option_emoji"},Au(s)),n.a.createElement("div",{className:"p-channel_section_modal_input__preset_option_text"},o),n.a.createElement("div",{className:"p-channel_section_modal_input__preset_option_description"},"\xa0\u2014 ",l))}},{key:"renderPresets",value:function e(){var t=this.props.teamPresets;var a=this.state,r=a.emoji,i=a.text;if(r||i)return null;var s=t.map(this.renderPresetOption,this);return n.a.createElement("div",{className:"p-channel_section_modal_input__presets"},s)}},{key:"renderStatusTextInput",value:function e(){var t=this.props.featureDangerouslyGuardIATranslations;var a=this.state,r=a.validationState,i=a.text;if(!t)return null;var s="channel_selection_modal_input_for_channel_sections";var o=bu.t("Choose a helpful name");return n.a.createElement(uu["a"],{className:"p-channel_section_modal_input__text_input",ariaLabel:o,size:lu["a"].large,id:s,name:s,onChange:this.onTextChange,focusOnMount:true,"data-qa":"channel_selection_modal_input_text_input",value:i,maxCharacterLimit:_u,placeholder:o,counterMinimumCharacters:yu,isInvalid:!r.isValid&&r.reason!==Eu,showError:false,ref:this.textComponent,autoComplete:"off"})}},{key:"renderValidationAlert",value:function e(){var t=this.props,a=t.firstChannelToMove,r=t.featureDangerouslyGuardIATranslations;var i=this.state.validationState;if(!r)return null;if(!i.reason)return null;var s;switch(i.reason){case Eu:case Cu:return null;case ku:s=bu.t("You already have a section with this name.",{fallbackHash:"989653e08d99723b6bf6a744947a60b05fcf11f3",fallbackHashNs:"current_status"});break;case Su:s=bu.rt("Unfortunately, you can\u2019t create any more sections \u2014 {numMaxChannelSections} is the max.",{numMaxChannelSections:Object(dr["n"])(Qr)});break;case wu:s=bu.rt("Unfortunately, that emoji\u2019s been removed from your workspace.");break;case Ou:s=bu.rt("Unfortunately, that name isn\u2019t valid. Try another?");break;case Iu:s=!a||Object(Ma["isMpim"])(a)||Object(Ma["isIm"])(a)?bu.rt("{sectionName} was created, but the conversation couldn\u2019t be moved to it. If this keeps happening, try reloading.",{sectionName:i.sectionName}):bu.rt("{sectionName} was created, but {channelName} couldn\u2019t be moved to it. If this keeps happening, try reloading.",{sectionName:i.sectionName,channelName:n.a.createElement(wn["a"],{channel:a})});break;case ju:default:s=n.a.createElement(n.a.Fragment,null,n.a.createElement("strong",null,bu.rt("Something went wrong.",{fallbackHash:"8d886c0ba6f2b683daba5f19568a316226ce3e4c",fallbackHashNs:"error_boundary"})),bu.rt(" Reloading Slack might clear things up. If it doesn\u2019t, <a>drop us a line</a>.",{fallbackHash:"99f46a29f44c67fe08e8e384332c3aa38db94c24",fallbackHashNs:"manage_shared_channels"},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.text,a=e.key;return n.a.createElement(Kr["a"],{href:"https://slack.com/help/contact",rel:"noopener noreferrer",key:a},t)}))}return n.a.createElement(hu["a"],{"data-qa":"channel_section_validation_alert","data-qa-reason":i.reason},s)}},{key:"render",value:function e(){var t=this.props.featureDangerouslyGuardIATranslations;var a=this.state,r=a.validationState,i=a.isPending;if(!t)return null;var s=!this.hasUnsavedChanges()||!r.isValid;var o;var l;switch(this.props.action){case gu.CREATE:o=bu.t("Create");l=bu.t("Create sidebar section");break;case gu.RENAME:o=bu.t("Save");l=bu.t("Rename section");break;case gu.CREATE_AND_MOVE:o=bu.t("Create");l=bu.t("Create sidebar section");break;default:break}var c="primary";var u=this.onSubmit;return n.a.createElement(su["a"],{className:fo()("p-channel_section_modal_input__dialog","p-channel_section_modal_input--modern"),goButtonIsDisabled:s,goButtonIsPending:i,goButtonText:o,goButtonType:c,onGo:u,title:l,ref:this.dialog,shouldCloseOnOverlayClick:true,useSlackScrollbar:false,showTooltipOnCloseButton:true,shouldCloseOnGo:false,"data-qa":"channel_selection_modal_input"},n.a.createElement("div",{className:"p-channel_section_modal_input__input_wrap"},this.renderStatusTextInput(),this.renderEmojiPicker(),this.renderClearIcon()),n.a.createElement("div",{className:"p-channel_section_modal_input__input_wrap"},this.renderValidationAlert()),this.renderPresets())}}]);return t}(r["PureComponent"]);Nu.displayName="BaseChannelSectionModalInput";Nu.defaultProps=Tu;function Pu(e,t){var a=t.initialText,r=t.initialEmoji,n=t.channelIds;var i=Object(hr["e"])(e);var s=[];i&&(s=[{emoji:":speaker:",text:bu.t("Announcements"),description:bu.t("Company updates")},{emoji:":busts_in_silhouette:",text:bu.t("Team"),description:bu.t("Team channels and direct messages")},{emoji:":triangular_flag_on_post:",text:bu.t("Top Priority"),description:bu.t("Key conversations")},{emoji:":notebook:",text:bu.t("Low Priority"),description:bu.t("For later reading")}]);var o=Object(m["fromPairs"])(Object(m["values"])(Object(cr["b"])(e)).filter(function(e){return Object(vu["a"])(a)!==Object(vu["a"])(e.name)}).map(function(e){return[Object(vu["a"])(e.name),true]}));return{initialText:a,initialEmoji:r,teamPresets:s,featureDangerouslyGuardIATranslations:i,channelSectionNameSet:o,firstChannelSectionId:Object(cr["k"])(e),canCreateChannelSection:Jr(e),firstChannelToMove:n&&1===n.length?Object(Pa["e"])(e,n[0]):void 0}}var Mu={closeModal:Ri["closeModal"],performChannelSectionCreate:Qc,performChannelSectionRename:mu,performMoveManyChannelsToNewSection:Vc};var Du=Object(i["connect"])(Pu,Mu)(Object(Wl["a"])(Nu));function xu(e){var t=e.channelId,a=e.channelSectionChannelIds,r=e.isCollapsed;if(r)return true;var n=t?1+a.indexOf(t):0;return n<Math.floor(a.length+1)/2}var Ru="CHANNEL-SIDEBAR";var Fu={LOG_LABEL:Ru};function Lu(e){var t=e.canPostInChannel,a=e.hasDraft,r=e.isSelected;return a&&t&&!r}function Uu(e){var t=e.channel,a=e.hasDraft,r=e.isSelected,n=e.isTyping;if(!Object(Ma["isIm"])(t))return false;if(Object(Ma["isSlackbot"])(t))return false;if(a&&!r)return false;if(n&&!r)return false;if(Object(Ma["isArchived"])(t)&&!Object(Ma["isFrozen"])(t))return false;return true}var Bu={channel:ur["default"].object,featureSonicPresenceManager:ur["default"].bool,isFrozenAndInGracePeriod:ur["default"].bool,isSelected:ur["default"].bool,isTyping:ur["default"].bool,showDraft:ur["default"].bool};var qu={channel:void 0,featureSonicPresenceManager:false,isFrozenAndInGracePeriod:false,isSelected:false,isTyping:false,showDraft:false};var Gu=function(e){gn()(t,e);function t(){ln()(this,t);return pn()(this,hn()(t).apply(this,arguments))}un()(t,[{key:"render",value:function e(){var t=this.props,a=t.channel,r=t.featureSonicPresenceManager,i=t.isFrozenAndInGracePeriod,s=t.isSelected,o=t.isTyping,l=t.showDraft;var c=Uu({channel:a,hasDraft:l,isSelected:s,isTyping:o});if(c){var u=Object(Ma["getMemberIdFromIm"])(a)||a.user_id;return n.a.createElement($l["a"],{className:"p-channel_sidebar__presence_icon","data-qa":"sidebar-channel-presence-prefix",enablePresenceSubscriptions:r||Object(bo["a"])(),inline:false,memberId:u})}var d=fo()("p-channel_sidebar__channel_icon_prefix",{"p-channel_sidebar__channel_icon_prefix--im-slackbot":Object(Ma["isSlackbot"])(a),"p-channel_sidebar__channel_icon_prefix--typing":o&&!s});if(o&&!s)return n.a.createElement("div",{"data-qa":"sidebar-channel-icon-prefix",className:d});var p;if(l)p="pencil";else if(!Object(Ma["isArchived"])(a)||i||Object(Ma["isFrozen"])(a)&&Object(Ma["isImOrMpim"])(a))if(Object(Ma["isPrivateChannel"])(a))p="lock-small";else if(Object(Ma["isMpim"])(a)){var m=Object(Ma["getMpimMemberCount"])(a)||0;p="multiparty-dm-"+m}else p=Object(Ma["isSlackbot"])(a)?"heart":"channel-pane-hash";else p="archived-channel";return n.a.createElement(Wo["b"],{className:d,"data-qa":"sidebar-channel-icon-prefix",inline:true,size:"inherit",type:p})}}]);return t}(ru["a"]);Gu.displayName="ChannelPrefix";Gu.propTypes=Bu;Gu.defaultProps=qu;var Hu=Gu;var Wu=a(840);var Vu=a(316);var Ku=new dr["b"]("channel_sidebar");var zu={channel:ur["default"].object,displayName:ur["default"].string,isYou:ur["default"].bool,memberPresences:ur["default"].arrayOf(ur["default"].string),members:ur["default"].arrayOf(ur["default"].string),userActive:ur["default"].bool};var Qu={channel:void 0,displayName:"",isYou:false,memberPresences:null,members:void 0,userActive:true};var Yu=function(e){gn()(t,e);function t(e){var a;ln()(this,t);a=pn()(this,hn()(t).call(this,e));a.handleMouseEnter=a.handleMouseEnter.bind(fn()(a));a.state={isTruncated:false};return a}un()(t,[{key:"handleMouseEnter",value:function e(t){t.target.offsetWidth<t.target.scrollWidth&&this.setState(function(){return{isTruncated:true}})}},{key:"buildImName",value:function e(){var t=this.props,a=t.channel,r=t.isYou;var i=Object(Ma["getMemberIdFromIm"])(a)||a.user_id;return this.renderName(n.a.createElement(n.a.Fragment,null,n.a.createElement(Wu["b"],{memberId:i}),n.a.createElement(Vu["a"],{id:i}),r&&n.a.createElement("span",{className:"p-channel_sidebar__you_label","data-qa":"channel_sidebar_name_you"},Ku.t("(you)"))))}},{key:"buildMpimName",value:function e(){var t=this.props,a=t.channel,r=t.members,i=t.memberPresences;if(!Object(Ma["isMpim"])(a)||!r||!i)return null;var s=Object(m["flatMap"])(r,function(e,t){return[n.a.createElement(Vu["a"],{id:e,key:e}),t<r.length-1?", ":null]});return this.renderName(s)}},{key:"renderName",value:function e(t){var a=this.props,r=a.channel,i=a.userActive,s=a.displayName;var o=this.state.isTruncated;var l=s.toString().replace(/ /g,"-").toLowerCase();return n.a.createElement(ec["c"],{delay:ec["a"],position:"top-left",tip:t,tipClassName:fo()({hidden:!o})},n.a.createElement("span",{dir:"auto",className:fo()("p-channel_sidebar__name",{"p-channel_sidebar__name--away":Object(Ma["isIm"])(r)&&!i}),"data-qa":"channel_sidebar_name_"+l,onMouseEnter:this.handleMouseEnter},t))}},{key:"render",value:function e(){var t=this.props,a=t.channel,r=t.displayName;if(Object(Ma["isIm"])(a))return this.buildImName();if(Object(Ma["isMpim"])(a))return this.buildMpimName();return this.renderName(r)}}]);return t}(ru["a"]);Yu.displayName="ChannelName";Yu.propTypes=zu;Yu.defaultProps=Qu;var Ju=Yu;var Xu=a(1309);var Zu=a(891);var $u=a(332);var ed=a.n($u);var td=a(1214);var ad=a(1602);var rd=a(145);var nd=a(2947);var id=a(817);var sd={className:void 0,draftText:void 0,maxCharacters:void 0};function od(e){var t=e.className,a=e.draftText,r=e.maxCharacters;return n.a.createElement(rd["a"],{className:t,customContentHandler:function e(t){return t.map(function(e){return Object(nd["a"])(e)?{text:" "}:e})},emojiSize:id["a"].SMALL,maxCharacters:r,noHighlights:true,noJumbomoji:true,stopAnimations:true,text:a})}od.displayName="DraftPreview";od.defaultProps=sd;function ld(e,t){var a=t.draftId;var r=Object(Aa["d"])(e,a);var n;if(r){var i=Object(Di["l"])(r);var s=new ed.a(i);var o=Object(td["a"])(e,s);n=Object(ad["a"])(e,o.blocks)}return{draftText:n}}var cd=Object(i["connect"])(ld)(od);var ud=new dr["b"]("channel_sidebar");var dd={badgeCount:0,channel:void 0,featureComposeFlow:false,showSharedIcon:true,showDraft:false,hasDraftText:false,numDraftFiles:0};var pd=function(e){gn()(t,e);function t(){ln()(this,t);return pn()(this,hn()(t).apply(this,arguments))}un()(t,[{key:"renderBadge",value:function e(){var t=this.props.badgeCount;if(t<=0)return null;return n.a.createElement(Zu["b"],{count:t,className:"p-channel_sidebar__badge","data-qa":"sidebar-channel-badge-suffix"})}},{key:"renderDraft",value:function e(){var t=this.props,a=t.channel,r=t.featureComposeFlow,i=t.hasDraftText,s=t.numDraftFiles,o=t.showDraft;if(!r||!o)return null;return n.a.createElement(ec["c"],{tip:function e(){return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",null,n.a.createElement("strong",null,ud.t("Draft"))),i&&n.a.createElement("div",{className:"c-tooltip__subtitle"},Object(dr["e"])(r),n.a.createElement(cd,{draftId:a.id,maxCharacters:50}),Object(dr["d"])(r)),s>0&&n.a.createElement("div",{className:"c-tooltip__subtitle"},ud.t("{numFiles, plural, =1 {# file} other {# files}}",{numFiles:s})))}},n.a.createElement(Wo["b"],{className:"p-channel_sidebar__channel_draft_suffix",inline:true,size:"inherit",type:"pencil"}))}},{key:"renderSharedIcon",value:function e(){var t=this.props,a=t.channel,r=t.showSharedIcon;if(!r)return null;return n.a.createElement(Xu["a"],{channel:a,className:"p-channel_sidebar__channel_icon_suffix","data-qa":"sidebar-channel-icon-suffix",inherit:true,inline:true,forceNonBaseline:true})}},{key:"render",value:function e(){return n.a.createElement(n.a.Fragment,null,this.renderDraft(),this.renderSharedIcon(),this.renderBadge())}}]);return t}(n.a.PureComponent);pd.displayName="ChannelSuffix";pd.defaultProps=dd;var md=pd;function hd(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function vd(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?hd(Object(a),true).forEach(function(t){p()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):hd(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var fd=new dr["b"]("channel_sidebar");var bd={channel:ur["default"].object.isRequired,isYou:ur["default"].bool,isMuted:ur["default"].bool,isSuggested:ur["default"].bool,hasDraft:ur["default"].bool,hasDraftText:ur["default"].bool,numDraftFiles:ur["default"].number,suffix:ur["default"].node,hideCloseButton:ur["default"].bool,isFrozenAndInGracePeriod:ur["default"].bool,displayName:ur["default"].string,teamDomain:ur["default"].string,appId:ur["default"].string,botId:ur["default"].string,isSelected:ur["default"].bool,badgeCount:ur["default"].number,userActive:ur["default"].bool,selectItem:ur["default"].func,closeIM:ur["default"].func,dismissSuggestedChannel:ur["default"].func,isTyping:ur["default"].bool,members:ur["default"].arrayOf(ur["default"].string),memberPresences:ur["default"].arrayOf(ur["default"].string),onContextMenu:ur["default"].func,featureSidebarContextMenu:ur["default"].bool,index:ur["default"].number.isRequired,sidebarFoldersIsEnabled:ur["default"].bool,onDragStart:ur["default"].func,onDragEnd:ur["default"].func,onDrop:ur["default"].func,onDragOver:ur["default"].func,featureSonicPresenceManager:ur["default"].bool,featureCopyChannelLink:ur["default"].bool,featureComposeFlowSidebar:ur["default"].bool,featureComposeFlow:ur["default"].bool,showDraftsPageSidebar:ur["default"].bool,isIAP1Enabled:ur["default"].bool,clogger:ur["default"].object.isRequired,canPostInChannel:ur["default"].bool,featureAnnounceOnly:ur["default"].bool,featureSidebarVirtualized:ur["default"].bool,onItemSelected:ur["default"].func,maybeLeaveChannel:ur["default"].func,muteChannelById:ur["default"].func,unmuteChannelById:ur["default"].func,updateStar:ur["default"].func,copyChannelNameById:ur["default"].func,featureDangerouslyGuardIATranslations:ur["default"].bool,shouldUseChannelSections:ur["default"].bool,isChannelSectionsAPIOperational:ur["default"].bool,isOrganizing:ur["default"].bool,setIsOrganizing:ur["default"].func,isOrganizingSelected:ur["default"].bool,setOrganizingSectionItemSelected:ur["default"].func,channelSection:yr["p"],connectDragSource:ur["default"].func,connectDropTarget:ur["default"].func,lastActiveDropTargetForChannelDrag:ur["default"].shape({channelSectionId:ur["default"].string}),lastActiveDropTargetForChannelSectionDrag:ur["default"].shape({channelSectionId:ur["default"].string,isAfter:ur["default"].bool}),isActiveDropTargetOfChannelDrag:ur["default"].bool,featureChannelPopouts:ur["default"].bool,openChannelPopout:ur["default"].func,performMoveManyChannelsToNewSection:ur["default"].func,openModal:ur["default"].func,channelSectionChannels:ur["default"].objectOf(ur["default"].arrayOf(ur["default"].string)).isRequired,orderedChannelSections:ur["default"].arrayOf(yr["p"]),performChannelSectionCreate:ur["default"].func,performBulkChannelMove:ur["default"].func};var gd={isSelected:false,isYou:false,isMuted:false,isSuggested:false,hasDraft:false,hasDraftText:false,numDraftFiles:0,suffix:void 0,hideCloseButton:void 0,isFrozenAndInGracePeriod:false,appId:void 0,botId:void 0,displayName:"",badgeCount:0,userActive:true,selectItem:h.a.noop,closeIM:h.a.noop,dismissSuggestedChannel:h.a.noop,isTyping:false,members:null,memberPresences:null,onContextMenu:h.a.noop,teamDomain:"",featureSidebarContextMenu:false,sidebarFoldersIsEnabled:false,onDragStart:h.a.noop,onDragEnd:h.a.noop,onDrop:h.a.noop,onDragOver:h.a.noop,featureSonicPresenceManager:false,featureComposeFlow:false,featureComposeFlowSidebar:false,showDraftsPageSidebar:false,isIAP1Enabled:false,clogger:{},canPostInChannel:true,featureAnnounceOnly:false,featureSidebarVirtualized:false,onItemSelected:h.a.noop,maybeLeaveChannel:h.a.noop,muteChannelById:h.a.noop,unmuteChannelById:h.a.noop,updateStar:h.a.noop,copyChannelNameById:h.a.noop,featureDangerouslyGuardIATranslations:false,shouldUseChannelSections:false,isChannelSectionsAPIOperational:true,isOrganizing:false,setIsOrganizing:h.a.noop,isOrganizingSelected:false,setOrganizingSectionItemSelected:h.a.noop,channelSection:void 0,connectDragSource:h.a.identity,connectDropTarget:h.a.identity,lastActiveDropTargetForChannelDrag:void 0,lastActiveDropTargetForChannelSectionDrag:void 0,isActiveDropTargetOfChannelDrag:false,featureChannelPopouts:false,openChannelPopout:h.a.noop,performMoveManyChannelsToNewSection:function e(){return Promise.resolve()},openModal:h.a.noop,channelSectionChannels:{},orderedChannelSections:[],performChannelSectionCreate:h.a.noop,performBulkChannelMove:h.a.noop};var _d=Object(Ca["b"])();var yd=function(e){gn()(t,e);function t(e){var a;ln()(this,t);a=pn()(this,hn()(t).call(this,e));a.onClick=a.onClick.bind(fn()(a));a.closeIM=a.closeIM.bind(fn()(a));a.closeSuggestedChannel=a.closeSuggestedChannel.bind(fn()(a));a.getContextMenuTemplate=a.getContextMenuTemplate.bind(fn()(a));a.onSectionSelected=a.onSectionSelected.bind(fn()(a));a.linkRef=n.a.createRef();return a}un()(t,[{key:"componentDidMount",value:function e(){this.props.isSelected&&this.props.onItemSelected(this.linkRef.current)}},{key:"componentDidUpdate",value:function e(t){!t.isSelected&&this.props.isSelected&&this.props.onItemSelected(this.linkRef.current);this.props.isChannelSectionsAPIOperational&&this.props.shouldUseChannelSections&&this.props.channelSection&&!t.isChannelDraggingOverChannel&&this.props.isChannelDraggingOverChannel&&this.props.lastActiveDropTargetForChannelDrag&&this.props.lastActiveDropTargetForChannelDrag.channelSectionId!==this.props.channelSection.id&&this.props.setLastActiveDropTargetForChannelDrag({channelSectionId:this.props.channelSection.id});if(this.props.isChannelSectionsAPIOperational&&this.props.shouldUseChannelSections&&!t.isChannelSectionDraggingOverChannel&&this.props.isChannelSectionDraggingOverChannel){var a=this.props.channelSection&&this.props.channelSection.id;var r=!xu({isCollapsed:this.props.isCollapsed,channelId:this.props.channel.id,channelSectionChannelIds:this.props.channelSectionChannelIds});this.props.setLastActiveDropTargetForChannelSectionDrag({channelSectionId:a,isAfter:r})}}},{key:"onClick",value:function e(t){var a=this.props,r=a.channel,n=a.channelSection,i=a.shouldUseChannelSections,s=a.isOrganizing;t.preventDefault();_d.action(Ru,"Selected "+r.id);if(i&&s){var o=n&&n.id?n.id:"default";this.props.setOrganizingSectionItemSelected({channelSectionId:o,channelId:r.id,isSelected:!this.props.isOrganizingSelected})}else{this.props.selectItem(r.id);this.clogClick()}}},{key:"closeIM",value:function e(t){var a=this.props.channel;t.preventDefault();t.stopPropagation();_d.action(Ru,"Closed "+a.id);this.props.closeIM({channelId:a.id})}},{key:"closeSuggestedChannel",value:function e(t){var a=this.props,r=a.channel,n=a.index,i=a.isSelected,s=a.clogger,o=a.dismissSuggestedChannel;t.preventDefault();t.stopPropagation();_d.action(Ru,"Closed suggested channel "+r.id);o({channelId:r.id});s.track("SIDEBAR_ITEM_SUGGESTED_CLOSE",{item_type:r.id[0],item_id:r.id,index:n,is_selected:i})}},{key:"clogClick",value:function e(){var t=this.props,a=t.channel,r=t.index,n=t.isMuted,i=t.isSuggested,s=t.isSelected,o=t.badgeCount,l=t.appId,c=t.botId,u=t.clogger,d=t.isIAP1Enabled;u.track("SIDEBAR_ITEM_CLICK",{item_type:a.id[0],item_id:a.id,index:r,is_muted:n,is_suggested:i,is_starred:Object(Ma["isStarred"])(a),has_unreads:Object(Ma["isUnread"])(a),is_archived:Object(Ma["isArchived"])(a),is_frozen:Object(Ma["isFrozen"])(a),is_selected:s,badge_count:o,app_id:l,bot_id:c,is_iap1:d})}},{key:"shouldShowClose",value:function e(){var t=this.props,a=t.channel,r=t.isSuggested,n=t.hasDraft,i=t.hideCloseButton;if(i)return false;if(!Object(Ma["isImOrMpim"])(a)&&!r)return false;if(Object(Ma["isUnread"])(a))return false;if(n)return false;return true}},{key:"buildAriaLabel",value:function e(){var t=this.props,a=t.channel,r=t.displayName,n=t.isYou,i=t.isMuted,s=t.isSuggested,o=t.hasDraft,l=t.badgeCount,c=t.isSelected,u=t.userActive,d=t.isTyping,p=t.canPostInChannel,m=t.featureAnnounceOnly,h=t.featureSidebarVirtualized;if(h)return;return Object(nu["a"])({type:Object(Ma["getChannelType"])(a),displayName:r,isShared:Object(Ma["isExternallySharedChannel"])(a),isOrgShared:Object(Ma["isOrgShared"])(a),isYou:n,isMuted:i,isSuggested:s,hasUnreads:Object(Ma["isUnread"])(a),hasDraft:o,isArchived:Object(Ma["isArchived"])(a),unreadCount:Object(Ma["getUnreadCount"])(a),badgeCount:l,isSelected:c,userActive:u,isTyping:d,canPost:p,featureAnnounceOnly:m})}},{key:"getChannelLink",value:function e(){var t=this.props,a=t.channel,r=t.teamDomain;return Object(Ma["constructAbsoluteChannelPermalink"])({channelId:a.id,teamDomain:r,archive:true})}},{key:"getDoesSectionContainChannel",value:function e(t){var a=this.props,r=a.channel,n=a.channelSections,i=a.channelSectionChannels;var s=n[t];if(!s)return false;if(s.type===yr["h"]&&Object(Ma["isStarred"])(r))return true;if(s.type===yr["g"]&&i[t].includes(r.id))return true;return false}},{key:"onSectionSelected",value:function e(t){if(this.getDoesSectionContainChannel(t.id)){var a;this.props.performBulkChannelMove({insert:[],remove:[{channelSectionId:t.id,channelIds:[this.props.channel.id]}]});this.props.clogger.track(Ka["EventId"].CHANNEL_SECTIONS_CHANNELS_MOVE,{context:{ui_context:(a={},p()(a,Ka["UiContextKeys"].action,Ka["UiAction"].SELECT),p()(a,Ka["UiContextKeys"].ui_component_name,"Channel"),a)},remove:p()({},t.id,[this.props.channel.id])})}else this.props.performMoveManyChannelsToSection({channelIds:[this.props.channel.id],channelSectionId:t.id})}},{key:"addCloggingForMenuItems",value:function e(t){var a=this;t.forEach(function(e){var t=e.click;e.click=function(){a.props.clogger.track(Ka["EventId"].CONTEXT_MENU_ACTION,{contexts:{ui_context:{action:Ka["UiAction"].CLICK,ui_component:Ka["UiComponent"].SIDEBAR,ui_element:Ka["UiElement"].SIDEBAR_CHANNEL_ITEM}},label:e.labelToClog});return t.apply(void 0,arguments)}});return t}},{key:"getContextMenuTemplate",value:function e(){var t=this;var a=new dr["b"]("menu");var r=this.props,i=r.channel,s=r.channelSection,o=r.displayName,l=r.isMuted,c=r.canMute,u=r.maybeLeaveChannel,d=r.updateStar,m=r.muteChannelById,h=r.unmuteChannelById,v=r.copyChannelNameById,f=r.openChannelPopout,b=r.featureCopyChannelLink,g=r.featureChannelPopouts,_=r.featureDangerouslyGuardIATranslations,y=r.shouldUseChannelSections,O=r.isChannelSectionsAPIOperational,k=r.isOrganizing,E=r.setIsOrganizing,C=r.channelSections,S=r.orderedChannelSections;var w;var j;var I;var T;var A;var N;var P;var M;var D;var x;var R;var F;var L;var U;var B;if(b&&!Ll["isDesktop"]||b&&_&&y){L=_?a.t("Copy link"):a.t("Copy Channel Link");U="copy_channel_link"}Object(Ma["isMpim"])(i)||(R=_?a.t("Copy channel name"):a.t("Copy Channel Name"));if(Object(Ma["isImOrMpim"])(i)){w=_?a.t("Star conversation"):a.t("Star Conversation");j="star_conversation";I=_?a.t("Remove from {section}",{section:null===s||void 0===s?void 0:s.name}):a.t("Unstar Conversation");T="unstar_conversation";A=_?a.t("Mute conversation"):a.t("Mute Conversation");N="mute_conversation";P=_?a.t("Unmute conversation"):a.t("Unmute Conversation");M="unmute_conversation";D=_?a.t("Leave conversation"):a.t("Close Conversation",{fallbackHash:"170fcb2077d0265d1095a0f459abb40ffb9cf16f",fallbackHashNs:"menu"});x="leave_conversation";B=_?a.t("Move conversation"):null}else{w=_?a.t("Star channel"):a.t("Star Channel");j="star_channel";I=_?a.t("Remove from {section}",{section:null===s||void 0===s?void 0:s.name}):a.t("Unstar Channel");T="unstar_channel";A=_?a.t("Mute channel"):a.t("Mute {channel}",{channel:"#"+o});N="mute_channel";P=_?a.t("Unmute channel"):a.t("Unmute {channel}",{channel:"#"+o});M="unmute_channel";D=_?a.t("Leave channel"):a.t("Leave {channel}",{channel:"#"+o});x="leave_channel";F="copy_channel_name";B=_?a.t("Move channel"):null}var q=[];var G=[];if(O&&_&&y){if(!this.props.isInAnyChannelSection&&Object(Ma["canStarOrUnstarChannel"])(i)){Object(Ma["isStarred"])(i)||G.push({label:w,labelToClog:j,click:function e(){return d(true,{channel:i.id})}});Object(Ma["isStarred"])(i)||this.props.paidTeam||G.push({type:"separator"});if(Object(Ma["isStarred"])(i)&&!this.props.paidTeam){q.push({label:I,labelToClog:T,click:function e(){return d(false,{channel:i.id})}});G.push({label:I,labelToClog:T,click:function e(){return d(false,{channel:i.id})}});G.push({type:"separator"})}}var H=S.filter(function(e){return e.type===yr["g"]||e.type===yr["h"]});var W=H.map(function(e){return{key:e.id,label:n.a.createElement("div",{key:e.id,className:fo()("p-channel_sidebar__channel_section_select_menu_item",{"p-channel_sidebar__channel_section_select_menu_item--checked":t.getDoesSectionContainChannel(e.id)})},t.getDoesSectionContainChannel(e.id)?n.a.createElement(Wo["b"],{type:"check-small"}):n.a.createElement("div",{className:"p-channel_sidebar__placeholder"}),n.a.createElement(jn["b"],{text:e.emoji,stopAnimations:true,obeyEmojiMode:false,emojiSize:jn["a"].SMALL,forceDisplay:true,isEmojiInlineWithText:true})," ",e.name),click:function a(){return t.onSectionSelected(e)}}});W.push({type:"separator"});W.push({label:a.t("Move to new section"),labelToClog:"create_new_section",click:function e(){return t.props.openModal({element:n.a.createElement(Du,{action:gu.CREATE_AND_MOVE,channelIds:[i.id],onAttemptSubmit:function e(){var a;t.props.clogger.track(Ka["EventId"].CHANNEL_SECTIONS_CHANNELS_MOVE,{context:{ui_context:(a={},p()(a,Ka["UiContextKeys"].action,Ka["UiAction"].SELECT),p()(a,Ka["UiContextKeys"].ui_component_name,"Channel"),a)}})}})})}});!s||s.type!==yr["g"]&&s.type!==yr["h"]||W.push({label:a.t("Remove from {section}",{section:s.name}),labelToClog:"remove_from_section",click:function e(){var a;var r=[{channelSectionId:s.id,channelIds:[i.id]}];t.props.performBulkChannelMove({insert:[],remove:r});t.props.clogger.track(Ka["EventId"].CHANNEL_SECTIONS_CHANNELS_MOVE,{context:{ui_context:(a={},p()(a,Ka["UiContextKeys"].action,Ka["UiAction"].SELECT),p()(a,Ka["UiContextKeys"].ui_component_name,"Channel"),a)},remove:za(r)})}});if(O&&this.props.paidTeam){var V=0===Object.values(C).filter(function(e){return e.type===yr["g"]}).length;V?G.push({label:_?a.t("Move to new section"):null,labelToClog:"create_new_section",click:function e(){return t.props.openModal({element:n.a.createElement(Du,{action:gu.CREATE_AND_MOVE,channelIds:[i.id]})})}}):G.push({type:"submenu",label:B,submenu:W});G.push({type:"separator"})}}if(g){G.push({label:fd.t("Open in new window"),labelToClog:"popout_channel",click:function e(){return f({channelId:i.id})}});G.push({type:"separator"})}O&&Object(Ma["canStarOrUnstarChannel"])(i)&&(Object(Ma["isStarred"])(i)?q.push({label:I,labelToClog:T,click:function e(){return d(false,{channel:i.id})}}):q.push({label:w,labelToClog:j,click:function e(){return d(true,{channel:i.id})}}));if(Object(Ma["isMemberOfChannel"])(i)||Object(Ma["isPrivateChannel"])(i)){q.push({label:D,labelToClog:x,click:function e(){return u({channelId:i.id})}});G.push({label:D,labelToClog:x,click:function e(){return u({channelId:i.id})}})}if(c){q.push({label:l?P:A,labelToClog:l?M:N,click:function e(){return l?h(i.id):m(i.id)}});G.push({label:l?P:A,labelToClog:l?M:N,click:function e(){return l?h(i.id):m(i.id)}});G.push({type:"separator"})}if(R){q.push({label:R,labelToClog:F,click:function e(){return v(i.id)}});G.push({label:R,labelToClog:F,click:function e(){return v(i.id)}})}if(L){q.push({label:L,labelToClog:U,click:function e(){Object(iu["writeText"])(t.getChannelLink())}});G.push({label:L,labelToClog:U,click:function e(){Object(iu["writeText"])(t.getChannelLink())}})}this.props.paidTeam&&G.push({type:"separator"});if(O&&_&&y){if(this.props.paidTeam){G.push({label:a.t("Create new section"),labelToClog:"create_new_section",click:function e(){return t.props.openModal({element:n.a.createElement(Du,{action:gu.CREATE,nextChannelSectionId:t.props.channelSection.id,onAttemptSubmit:function e(){var a;t.props.clogger.track(Ka["EventId"].CHANNEL_SECTIONS_CREATE,{context:{ui_context:(a={},p()(a,Ka["UiContextKeys"].action,Ka["UiAction"].SAVE),p()(a,Ka["UiContextKeys"].ui_component_name,"Channel"),a)}})}})})}});var K={label:a.t("Done organizing sidebar"),labelToClog:"stop_organizing_sidebar",click:function e(){return E({isOrganizing:!k})}};G.push({label:a.t("Organize sidebar"),labelToClog:"organize_sidebar",click:function e(){return E({isOrganizing:!k})}});if(k)return[K]}G.push({type:"separator"});G.push({label:a.t("Sidebar settings"),click:function e(){t.props.openPrefsModal({activeSection:"sidebar",activeSubsection:"sidebar"})}});return this.addCloggingForMenuItems(G)}return this.addCloggingForMenuItems(q)}},{key:"renderOrganizingCheckbox",value:function e(){var t=this.props,a=t.featureDangerouslyGuardIATranslations,r=t.shouldUseChannelSections,i=t.isOrganizing,s=t.isOrganizingSelected;if(!a)return null;if(!r)return null;return n.a.createElement(Wo["b"],{className:fo()("p-channel_sidebar__organizing_checkbox",{"p-channel_sidebar__organizing_checkbox--not-organizing":!i,"p-channel_sidebar__organizing_checkbox--selected":s}),"data-qa":"organizing-checkbox-state",size:"inherit",inline:true,type:s?"real-checkbox-checked":"real-checkbox-empty"})}},{key:"render",value:function e(){var t=this.props,a=t.isYou,r=t.isMuted,i=t.isSuggested,s=t.badgeCount,o=t.isSelected,l=t.displayName,c=t.onContextMenu,u=t.featureSidebarContextMenu,d=t.featureSidebarVirtualized,p=t.isTyping,m=t.hasDraft,v=t.hasDraftText,f=t.numDraftFiles,b=t.isFrozenAndInGracePeriod,g=t.featureSonicPresenceManager,_=t.featureComposeFlow,y=t.featureComposeFlowSidebar,O=t.showDraftsPageSidebar,k=t.canPostInChannel,E=t.memberPresences,C=t.members,S=t.userActive,w=t.isIAP1Enabled,j=t.channel,I=t.suffix,T=t.featureDangerouslyGuardIATranslations,A=t.shouldUseChannelSections,N=t.isOrganizing,P=t.isOrganizingSelected,M=t.channelSection,D=t.lastActiveDropTargetForChannelDrag,x=t.lastActiveDropTargetForChannelSectionDrag,R=t.orderedChannelSections,F=t.channelSectionChannelIds,L=t.isAnyChannelDragging,U=t.isAnyChannelSectionDragging;var B=Lu({canPostInChannel:k,hasDraft:m,isSelected:o});var q={};if(A&&M){var G=h.a.last(F)===j.id;var H=h.a.last(R);var W=H&&H.id===M.id;q["p-channel_sidebar__channel--drop_over_section"]=L&&D&&D.channelSectionId===M.id;q["p-channel_sidebar__channel--last_in_section"]=G;q["p-channel_sidebar__channel--drop_section_below"]=U&&G&&W&&x&&x.channelSectionId===M.id&&x.isAfter}var V=fo()("p-channel_sidebar__channel",vd({"p-channel_sidebar__channel--mpim":Object(Ma["isMpim"])(j),"p-channel_sidebar__channel--im-slackbot":Object(Ma["isSlackbot"])(j),"p-channel_sidebar__channel--im-you":a,"p-channel_sidebar__channel--selected":A&&N?P:o,"p-channel_sidebar__channel--muted":r,"p-channel_sidebar__channel--suggested":i,"p-channel_sidebar__channel--unread":Object(Ma["isUnread"])(j)&&!Object(Ma["isArchived"])(j),"p-channel_sidebar__channel--draft_legacy":B&&!y,"p-channel_sidebar__channel--draft":B&&y&&O,"p-channel_sidebar__channel--typing":p&&!o},q));var K=n.a.createElement(Hu,{channel:j,featureSonicPresenceManager:g,isFrozenAndInGracePeriod:b,isSelected:o,isTyping:p,showDraft:!y&&!O&&B,"data-qa":"channel_prefix"});var z=I||n.a.createElement(md,{badgeCount:s,channel:j,featureComposeFlow:_,showSharedIcon:!w||w&&Object(Ma["isExternallySharedChannel"])(j),showDraft:O&&B,hasDraftText:v,numDraftFiles:f,"data-qa":"channel_suffix"});var Q=n.a.createElement(Ju,{channel:j,displayName:l,isYou:a,memberPresences:E,members:C,userActive:S,"data-qa":"channel_name"});var Y=this.renderOrganizingCheckbox();var J={};if(this.props.shouldUseChannelSections){this.props.connectDragSource(this.linkRef);this.props.connectDropTarget(this.linkRef)}else J={draggable:this.props.sidebarFoldersIsEnabled,"data-drag-type":"channel","data-drag-id":j.id,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragOver:this.props.onDragOver};var X=n.a.createElement(Zl["a"],ho()({href:this.getChannelLink(),ref:this.linkRef,className:V,onClick:this.onClick,onContextMenu:c,"data-user-count":Object(Ma["getMpimMemberCount"])(j)||0,"data-qa-channel-sidebar-channel":true,"data-qa-channel-sidebar-channel-is-selected":o,"data-qa-channel-sidebar-channel-id":j.id,"data-qa-channel-sidebar-channel-type":Object(Ma["getChannelType"])(j),"data-qa-channel-sidebar-is-starred":Object(Ma["isStarred"])(j),"data-qa-channel-sidebar-is-you":a,"data-qa-channel-sidebar-priority":Object(Ma["getPriority"])(j),"aria-label":this.buildAriaLabel(),tabIndex:d?-1:void 0,role:d?"presentation":void 0},J),Y,K,Q,z);if(this.shouldShowClose()){var Z=fd.t("Close Direct Message with {name}",{name:l});i&&(Z=fd.t("Dismiss suggested channel"));var $=A&&N?null:n.a.createElement(Ao["c"],{onClick:i?this.closeSuggestedChannel:this.closeIM,className:"p-channel_sidebar__close","data-qa":"channel_item_close","aria-label":d?void 0:Z,"aria-hidden":!!d||void 0,tabIndex:d?-1:void 0},n.a.createElement(Wo["a"],{type:w?"times":"times-circle-medium"}));X=n.a.createElement("div",{className:"p-channel_sidebar__close_container","data-qa":"channel_item_container"},X,$)}if(u)return n.a.createElement(ac["a"],{getTemplate:this.getContextMenuTemplate,desktopAppOnly:false,showSlackKitContextMenuOnDesktop:T&&A},X);return X}}]);return t}(ru["a"]);yd.displayName="Channel";yd.propTypes=bd;yd.defaultProps=gd;var Od=yd;var kd=Bn;var Ed={beginDrag:function e(t){var a,r;t.setLastActiveDropTargetForChannelDrag({channelSectionId:null!==(a=null===(r=t.channelSection)||void 0===r?void 0:r.id)&&void 0!==a?a:null});return{channel:t.channel,channelSection:t.channelSection}},endDrag:function e(t){t.setLastActiveDropTargetForChannelDrag({channelSectionId:null})},canDrag:function e(t){return t.isChannelSectionsAPIOperational&&t.shouldUseChannelSections&&!t.isOrganizing}};var Cd=function e(t,a){return{connectDragSource:t.dragSource(),isDragging:a.isDragging()}};var Sd=[Bn,qn];var wd={};var jd=function e(t,a){var r=a.getItemType();var n=r===Bn;var i=r===qn;var s=n&&a.isOver();var o=i&&a.isOver();return{connectDropTarget:t.dropTarget(),isAnyChannelDragging:n,isAnyChannelSectionDragging:i,isChannelDraggingOverChannel:s,isChannelSectionDraggingOverChannel:o}};var Id=Object(bo["a"])()?Pc(kd,Ed,Cd)(Od):Od;var Td=Object(bo["a"])()?Ea(Sd,wd,jd)(Id):Od;var Ad={closeIM:l["closeChannelApi"],dismissSuggestedChannel:Rc,maybeLeaveChannel:Fc["a"],muteChannelById:Lc["a"],unmuteChannelById:Lc["b"],updateStar:wr["a"],copyChannelNameById:function e(){return Mc["a"].apply(void 0,arguments)},setIsOrganizing:_r["g"],setOrganizingSectionItemSelected:_r["j"],setLastActiveDropTargetForChannelDrag:_r["h"],setLastActiveDropTargetForChannelSectionDrag:_r["i"],performMoveManyChannelsToNewSection:Vc,openModal:Ri["openModal"],performMoveManyChannelsToSection:Gc,performBulkChannelMove:Mn,performChannelSectionCreate:Qc,openChannelPopout:function e(){return eu.apply(void 0,arguments)},openPrefsModal:function e(){return tu["a"].apply(void 0,arguments)}};var Nd=function e(t,a){var r=a.id,n=a.isSelected,i=a.channelSection;var s=Object(Pa["e"])(t,r);var o=Object(lr["a"])(t);var l=Object(lr["b"])(t);if(!s)return{featureSidebarContextMenu:Object(Ba["isFeatureEnabled"])(t,"feature_sidebar_context_menu"),shouldUseChannelSections:o,isChannelSectionsAPIOperational:l};var c=Object(Ma["getChannelType"])(s);var u="im"===c&&Object(Ta["k"])(t,"show_typing")&&Object(Uc["getTyperIdsInChannel"])(t,r).length>0;var d=Object(Ma["getMemberIdFromIm"])(s);var p="im"!==c||"active"===Object(Bi["getPresenceByMemberId"])(t,d);var m=Object(Ua["e"])(t,d);var v=Object(Da["getBotIdFromMember"])(m)||void 0;var f=Object(Da["getAppIdFromMember"])(m)||void 0;var b=Object(Ba["getCurrentUserId"])(t);var g="mpim"===c&&(Object(au["e"])(t)?Object(Ma["getMpimMembersInAlphabeticalOrder"])(t,s):Object(Ma["getMemberIdsFromMpim"])(s)&&h.a.filter(Object(Ma["getMemberIdsFromMpim"])(s),function(e){return e!==b}));var _="mpim"===c&&g&&h.a.map(g,function(e){return Object(Bi["getPresenceByMemberId"])(t,e)});var y=Object(Ba["isFeatureEnabled"])(t,"feature_all_dm_mute")?Object(Ma["isMemberOfChannel"])(s)&&!Object(Ma["isImWithApp"])(t,s):Object(Ma["isMemberOfChannel"])(s)&&(Object(Ma["isPublicChannel"])(s)||Object(Ma["isPrivateChannel"])(s));var O=Object(Ma["getDisplayNameForChannel"])(t,s,{publicChannelIncludeHashSign:false,imIncludeAtSign:false});var k=Object(Qn["d"])(t);var E=Object(zn["getTeamId"])(k);var C=Object(zn["getTeamDomain"])(k);var S=Object(Aa["i"])(t);var w=Object(Aa["l"])(t);var j;j=w?Object(Aa["d"])(t,r):Object(Aa["b"])(t,{channelId:s.id});var I=Object(Qn["d"])(t);var T=Object(cr["b"])(t);return{channel:s,isSelected:h.a.isBoolean(n)?n:Object(Ga["a"])(t)===r,isYou:Object(Ma["isYou"])(b,s),isMuted:Object(xa["isChannelMutedById"])(t,r),isSuggested:!Object(Ma["isMemberOfChannel"])(s)&&Object(Ma["isSuggestedChannel"])(t,s),hasDraft:!!j,hasDraftText:Object(Di["p"])(j),numDraftFiles:Object(Di["m"])(t,j),isFrozenAndInGracePeriod:Object(Ma["isFrozenAndInGracePeriod"])(E,s),appId:f,botId:v,displayName:O,badgeCount:Object(Pa["d"])(t,s),userActive:p,isTyping:u,canPostInChannel:Object(Ki["r"])(t,r),featureAnnounceOnly:Object(Ba["isFeatureEnabled"])(t,"feature_announce_only"),members:g||null,memberPresences:_||null,canMute:y,teamDomain:C,featureSidebarContextMenu:Object(Ba["isFeatureEnabled"])(t,"feature_sidebar_context_menu"),featureCopyChannelLink:Object(Ba["isFeatureEnabled"])(t,"feature_copy_channel_link"),featureSonicPresenceManager:Object(Ba["isFeatureEnabled"])(t,"feature_sonic_presence_manager"),featureChannelPopouts:Object(Bc["b"])(t),featureComposeFlow:Object(Aa["g"])(t),featureComposeFlowSidebar:S,showDraftsPageSidebar:w,isIAP1Enabled:Object(hr["e"])(t),clogger:Object(Va["a"])({state:t}),featureSidebarVirtualized:Object(Ba["isFeatureEnabled"])(t,"feature_sidebar_virtualized"),shouldUseChannelSections:o,isChannelSectionsAPIOperational:l,featureDangerouslyGuardIATranslations:Object(hr["e"])(t),orderedChannelSections:Object(cr["p"])(t),isOrganizing:Object(cr["l"])(t),isOrganizingSelected:Object(cr["m"])(t,i&&i.id?i.id:"default",r),lastActiveDropTargetForChannelDrag:l&&o?Object(cr["n"])(t):void 0,lastActiveDropTargetForChannelSectionDrag:l&&o?Object(cr["o"])(t):void 0,paidTeam:Object(zn["isPaidTeam"])(I),channelSections:T,channelSectionChannels:Object(cr["a"])(t),isStarred:Ma["isStarred"],isInAnyChannelSection:Object(cr["g"])(t,s.id)}};var Pd=Object(i["connect"])(Nd,Ad,null,{withRef:true})(Od);var Md=Object(i["connect"])(Nd,Ad,null,{withRef:true})(Td);var Dd=a(1379);var xd=a(2716);var Rd=a(1690);var Fd=new dr["b"]("channel_sidebar");var Ld={dispatch:m["noop"],featureComposeFlow:false,isSelected:false,onItemSelected:m["noop"],selectItem:m["noop"],featureSidebarVirtualized:false};function Ud(e){var t=e.dispatch,a=e.draft,i=e.featureComposeFlow,s=e.isSelected,o=e.onItemSelected,l=e.selectItem,c=e.featureSidebarVirtualized;var u=Object(Rd["a"])();var d=Object(r["useRef"])();Object(r["useEffect"])(function(){o(d.current)},[s,o]);var p=Object(r["useMemo"])(function(){if(!i)return"";if(Object(m["isEmpty"])(a))return"("+Fd.t("unknown")+")";if(Object(Di["p"])(a))return n.a.createElement(n.a.Fragment,null,Object(dr["e"])(i),n.a.createElement(cd,{className:"p-channel_sidebar__name",draftId:Object(Di["d"])(a),maxCharacters:50}),Object(dr["d"])(i));return"("+Fd.t("New message")+")"},[a,i]);if(!i)return null;var h=c?-1:void 0;return n.a.createElement("div",{className:"p-channel_sidebar__close_container"},n.a.createElement(cu["a"],{className:fo()("p-channel_sidebar__channel","p-channel_sidebar__channel--composer_draft",{"p-channel_sidebar__channel--selected":s}),onClick:function e(){var t=Object(Di["d"])(a);l("Pcomposer",{routeParams:{draftId:Object(Dd["b"])(t)}});u.track(Ka["EventId"].COMPOSE_FLOW,{draft_id:t,draft_action_source:"sidebar",draft_type:"composer",contexts:{ui_context:{action:Ka["UiAction"].CLICK,step:Ka["UiStep"].COMPOSE_FLOW_OPEN}}})},ref:d,tabIndex:h,role:c?"presentation":void 0},n.a.createElement(Wo["b"],{size:"inherit",inline:true,className:"p-channel_sidebar__channel_icon_prefix",type:"file"}),p),n.a.createElement(ec["c"],{tip:Fd.t("Delete draft")},n.a.createElement(cu["a"],{className:"p-channel_sidebar__close",onClick:function e(){var r=Object(Di["d"])(a);t(Object(Ri["openModal"])({element:n.a.createElement(xi["a"],{draftId:r})}));u.track(Ka["EventId"].COMPOSE_FLOW,{draft_id:r,draft_action_source:"sidebar",draft_type:"composer",contexts:{ui_context:{action:Ka["UiAction"].CLICK,step:Ka["UiStep"].COMPOSE_FLOW_DELETE}}})},tabIndex:h,"aria-hidden":!!c||void 0},n.a.createElement(Wo["b"],{className:"p-channel_sidebar__delete_icon",type:"trash"}))))}Ud.displayName="ComposerDraft";Ud.defaultProps=Ld;function Bd(e,t){var a=t.id;var r=Object(Ga["a"])(e);var n=Object(xd["a"])(e);var i=Object(Aa["d"])(e,a);return{draft:i,featureComposeFlow:Object(Aa["g"])(e),isSelected:"Pcomposer"===r&&n===a,featureSidebarVirtualized:Object(Ba["isFeatureEnabled"])(e,"feature_sidebar_virtualized")}}var qd=Object(i["connect"])(Bd)(Ud);var Gd=a(1318);var Hd=new dr["b"]("channel_sidebar");var Wd;function Vd(e,t){clearInterval(Wd);var a=Object(ni["e"])(e,t);if(a)return Promise.resolve(a);return new Promise(function(a){Wd=setInterval(function(){var r=Object(ni["e"])(e,t);if(r){clearInterval(Wd);a(r)}},50)}).timeout(1e4)}var Kd={dispatch:m["noop"],draftId:void 0,onItemSelected:m["noop"],selectItem:m["noop"],threadTs:void 0,featureComposeFlowSidebar:false};function zd(e){var t=e.channelId,a=e.dispatch,i=e.draftId,s=e.featureComposeFlowSidebar,o=e.onItemSelected,l=e.selectItem,c=e.threadTs,u=e.featureSidebarVirtualized;var d=Object(Rd["a"])();var p=Object(r["useRef"])();Object(r["useEffect"])(function(){o(p.current)},[o]);if(!s)return null;return n.a.createElement("div",{className:"p-channel_sidebar__close_container"},n.a.createElement(Pd,{hideCloseButton:true,id:t,index:0,isSelected:false,suffix:c&&n.a.createElement(Wo["b"],{className:"p-channel_sidebar__icon p-channel_sidebar__reply_icon",type:"small-reply"}),selectItem:function e(){if(c){a(Object(Gd["a"])({channelId:t,threadTs:c}));Vd(t,c).then(function(e){e.scrollIntoView()})}else l(t);d.track(Ka["EventId"].COMPOSE_FLOW,{draft_id:i,draft_action_source:"sidebar",draft_type:c?"thread":"channel",contexts:{ui_context:{action:Ka["UiAction"].CLICK,step:Ka["UiStep"].COMPOSE_FLOW_OPEN}}})}}),n.a.createElement(ec["c"],{tip:Hd.t("Delete draft")},n.a.createElement(cu["a"],{className:"p-channel_sidebar__close",onClick:function e(){a(Object(Ri["openModal"])({element:n.a.createElement(xi["a"],{channelId:t,threadTs:c})}));d.track(Ka["EventId"].COMPOSE_FLOW,{draft_id:i,draft_action_source:"sidebar",draft_type:c?"thread":"channel",contexts:{ui_context:{action:Ka["UiAction"].CLICK,step:Ka["UiStep"].COMPOSE_FLOW_DELETE}}})},tabIndex:-1,"aria-hidden":!!u||void 0},n.a.createElement(Wo["b"],{className:"p-channel_sidebar__delete_icon",type:"trash"}))))}zd.displayName="ChannelDraft";zd.defaultProps=Kd;function Qd(e){return{featureComposeFlowSidebar:Object(Aa["i"])(e),featureSidebarVirtualized:Object(Ba["isFeatureEnabled"])(e,"feature_sidebar_virtualized")}}var Yd=Object(i["connect"])(Qd)(zd);var Jd=a(245);var Xd=a.n(Jd);function Zd(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function $d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Zd(Object(a),true).forEach(function(t){p()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Zd(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var ep=new dr["b"]("sonic_pilot");function tp(e){var t=e.children,a=e.featureSonicPlaceholderLabels,r=e.unstyled,i=e.tooltipPosition;if(!a)return t;if(Object(Xa["a"])()){var s=n.a.cloneElement(t,$d({},t.props,{className:fo()(t.props.className,{"c-button--sonic-placeholder":!r,"c-button-unstyled--sonic-placeholder":r})}),t.props.children);return n.a.createElement(ec["c"],{tip:n.a.createElement("div",{className:"c-tooltip__sonic_placeholder","data-qa":"sonic-placeholder-text"},ep.t("Coming soon")),position:i||"top",zIndex:"above_fs"},s)}return t}tp.defaultProps={unstyled:false,tooltipPosition:void 0};var ap=function e(t){return{featureSonicPlaceholderLabels:Object(Ba["isFeatureEnabled"])(t,"feature_sonic_placeholder_labels")}};var rp=Object(i["connect"])(ap)(tp);var np=new dr["b"]("channel_sidebar");var ip={isSelected:false,labelUnread:"",hasUnreads:false,badgeCount:0,badgeProps:void 0,icon:void 0,emoji:void 0,stopAnimations:false,selectItem:h.a.noop,isDim:false,qaLabel:"",disabledInSonic:false,onItemSelected:h.a.noop,onClick:h.a.noop,className:"",renderLinkContent:null,featureSidebarVirtualized:false};var sp=function(e){gn()(t,e);function t(e){var a;ln()(this,t);a=pn()(this,hn()(t).call(this,e));a.onClick=a.onClick.bind(fn()(a));a.linkRef=n.a.createRef();a.state={};return a}un()(t,[{key:"componentDidMount",value:function e(){this.props.isSelected&&this.props.onItemSelected(this.linkRef.current)}},{key:"componentDidUpdate",value:function e(t){!t.isSelected&&this.props.isSelected&&this.props.onItemSelected(this.linkRef.current)}},{key:"onClick",value:function e(t){Object(Ca["b"])().action(Ru,"Selected "+this.props.id);this.props.selectItem(this.props.id,t);"function"===typeof this.props.onClick&&this.props.onClick()}},{key:"render",value:function e(){var t=this.props,a=t.id,r=t.label,i=t.labelUnread,s=t.icon,o=t.emoji,l=t.stopAnimations,c=t.hasUnreads,u=t.badgeCount,d=t.badgeProps,p=t.isSelected,m=t.isDim,v=t.qaLabel,f=t.disabledInSonic,b=t.className,g=t.renderLinkContent,_=t.featureSidebarVirtualized;var y=fo()("p-channel_sidebar__link",{"p-channel_sidebar__link--all-unreads":"Vall_unreads"===a,"p-channel_sidebar__link--all-threads":"Vall_threads"===a,"p-channel_sidebar__link--search":"Vsearch"===a,"p-channel_sidebar__link--invites":"Vinvites"===a,"p-channel_sidebar__link--add-channel":"Vadd_channel"===a,"p-channel_sidebar__link--selected":p,"p-channel_sidebar__link--unread":c,"p-channel_sidebar__link--dim":m,"p-channel_sidebar__link--no_animation":l},b);var O=c&&i?i:r;var k=n.a.createElement("span",{className:"p-channel_sidebar__name","data-qa":"channel_sidebar_name_"+v.toLowerCase()},O);var E=h.a.filter([p?np.t("selected"):null,c&&!u?np.t("has unreads"):null,u?np.t("{count} {count, plural, =1 {unread highlight} other {unread highlights}}",{count:u}):null],h.a.identity);var C=O+(E.length?" ("+E.join(", ")+")":"");var S=d||{},w=S.className,j=Xd()(S,["className"]);var I=n.a.createElement(Zu["b"],ho()({className:fo()("p-channel_sidebar__badge",w),count:u},j));var T=s&&n.a.createElement(Wo["b"],{type:s,size:"inherit",className:fo()("p-channel_sidebar__link__icon",{"p-channel_sidebar__link__icon--toasting":!!o})});var A=n.a.createElement(Ao["c"],{role:_?"presentation":void 0,className:y,onClick:this.onClick,"aria-label":_?void 0:C,"data-sidebar-link-id":a,"data-qa-channel-sidebar-link-id":a,ref:this.linkRef,tabIndex:_?-1:void 0},g?g({icon:T,name:k,badge:I}):n.a.createElement(n.a.Fragment,null,o,T,k,I));if(f)return n.a.createElement(rp,null,A);return A}}]);return t}(r["PureComponent"]);sp.displayName="Link";sp.defaultProps=ip;var op=sp;var lp=new dr["b"]("channel_sidebar");var cp="Vall_threads";var up=function e(t){return{id:cp,label:lp.t("Threads"),labelUnread:lp.t("Threads"),hasUnreads:Object(Ba["isFeatureEnabled"])(t,"feature_incremental_unread_counts")?Object(La["hasUnreadThreads"])(t):Object(Fa["hasUnreadThreads"])(t),badgeCount:Object(Ba["isFeatureEnabled"])(t,"feature_incremental_unread_counts")?Object(La["getThreadsMentionCount"])(t):Object(Fa["getThreadsMentionCount"])(t),isSelected:Object(Ga["a"])(t)===cp,featureSidebarVirtualized:Object(Ba["isFeatureEnabled"])(t,"feature_sidebar_virtualized")}};var dp=Object(i["connect"])(up,null,null,{withRef:true})(op);var pp=dp;var mp=new dr["b"]("channel_sidebar");var hp="Vsearch";var vp=function e(t){var a=Object(Ba["isFeatureEnabled"])(t,"feature_primary_search")&&Object(ir["a"])(t)?mp.t("Search Results"):"";var r=Object(Ba["isFeatureEnabled"])(t,"feature_sidebar_virtualized");return{id:hp,label:a,isSelected:Object(Ga["a"])(t)===hp,featureSidebarVirtualized:r}};var fp=Object(i["connect"])(vp)(op);var bp=fp;var gp=a(754);var _p=new dr["b"]("channel_sidebar");var yp={isDim:false,qaLabel:"",onClickClose:m["noop"],featureSidebarVirtualized:false};var Op=function(e){gn()(t,e);function t(e){var a;ln()(this,t);a=pn()(this,hn()(t).call(this,e));a.onItemSelect=a.onItemSelect.bind(fn()(a));return a}un()(t,[{key:"onItemSelect",value:function e(){var t=this.props.clogger;t.track("SIDEBAR_ITEM_CLICK",{contexts:{ui_context:{step:"ADD_CHANNEL",action:"click",ui_component:"SIDEBAR"}}});this.props.openChannelBrowser()}},{key:"render",value:function e(){var t=this.props,a=t.label,r=t.qaLabel,i=t.isDim,s=t.onClickClose,o=t.featureSidebarVirtualized;var l=o?-1:void 0;var c=o?null:_p.t("Hide Add Channel button");return n.a.createElement("div",{className:"p-channel_sidebar__close_container"},n.a.createElement(op,{key:"Vadd_channel",id:"Vadd_channel",isDim:i,qaLabel:r,label:a,selectItem:this.onItemSelect,featureSidebarVirtualized:o}),n.a.createElement(cu["a"],{onClick:s,className:"p-channel_sidebar__close","aria-hidden":!!o||void 0,"aria-label":c,tabIndex:l},n.a.createElement(Wo["b"],{type:"times-circle-medium"})))}}]);return t}(n.a.Component);Op.displayName="AddChannelLink";var kp=function e(t){return{clogger:Object(Va["a"])({state:t}),featureSidebarVirtualized:Object(Ba["isFeatureEnabled"])(t,"feature_sidebar_virtualized")}};var Ep={openChannelBrowser:function e(){return gp["a"].apply(void 0,arguments)}};Op.defaultProps=yp;var Cp=Object(i["connect"])(kp,Ep)(Op);var Sp=a(1628);function wp(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function jp(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?wp(Object(a),true).forEach(function(t){p()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):wp(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Ip=3e3;var Tp=400;var Ap={currentToast:void 0,shiftToast:m["noop"],isBold:false,badgeCount:void 0,badgeProps:void 0,isSelected:false,isCloseButtonVisible:false,onClickClose:m["noop"],selectItem:m["noop"],featureSidebarVirtualized:false,isIAP1Enabled:false,stopAnimations:false,prefExcludeReactions:false};var Np=function(e){gn()(t,e);function t(e){var a;ln()(this,t);a=pn()(this,hn()(t).call(this,e));a.state={waiting:false};return a}un()(t,[{key:"componentDidMount",value:function e(){var t=this.props.currentToast&&this.props.currentToast.emoji;t&&this.startToastTimer()}},{key:"componentDidUpdate",value:function e(t,a){var r=t.currentToast&&t.currentToast.emoji;var n=this.props.currentToast&&this.props.currentToast.emoji;n&&n!==r&&this.startToastTimer();this.state.waiting&&!a.waiting&&this.startWaitTimer()}},{key:"componentWillUnmount",value:function e(){this.props.shiftToast();this.toastTimer&&clearTimeout(this.toastTimer);this.waitTimer&&clearTimeout(this.waitTimer)}},{key:"shouldShowToast",value:function e(){return this.props.currentToast&&!this.props.prefExcludeReactions&&!this.state.waiting}},{key:"startToastTimer",value:function e(){var t=this;this.toastTimer=setTimeout(function(){t.setState(function(e){return jp({},e,{waiting:true})})},Ip)}},{key:"startWaitTimer",value:function e(){var t=this;this.waitTimer=setTimeout(function(){t.setState(function(e){return jp({},e,{waiting:false})});t.props.shiftToast()},Tp)}},{key:"render",value:function e(){var t=this.props,a=t.currentToast,r=t.stopAnimations,i=t.id,s=t.views,o=t.isBold,l=t.isCloseButtonVisible,c=t.onClickClose,u=t.badgeCount,d=t.badgeProps,p=t.featureSidebarVirtualized,h=Xd()(t,["currentToast","stopAnimations","id","views","isBold","isCloseButtonVisible","onClickClose","badgeCount","badgeProps","featureSidebarVirtualized"]);var v=this.shouldShowToast()&&n.a.createElement(jn["b"],{text:":"+a.emoji+":",emojiSize:jn["a"].MEDIUM,className:"p-channel_sidebar__activity__toast"});var f=Object(m["isFunction"])(s.label)&&s.label();var b=s.sidebar||{},g=b.icon,_=b.getCloseLinkLabel;var y=n.a.createElement(op,ho()({},h,{id:i,label:f,className:fo()("p-channel_sidebar__link--page_"+i.toLowerCase()+" position_relative"),icon:g,emoji:v,stopAnimations:r,hasUnreads:o,badgeCount:u,badgeProps:d,qaLabel:"page_"+i,featureSidebarVirtualized:p}));if(!l)return y;var O=Object(m["isFunction"])(_)?_():"";var k=n.a.createElement(cu["a"],{onClick:c,className:"p-channel_sidebar__close p-channel_sidebar__close--circle","aria-label":p?void 0:O,"aria-hidden":!!p||void 0,tabIndex:p?-1:void 0},n.a.createElement(Wo["b"],{type:"times-circle-medium"}));return n.a.createElement("div",{className:"p-channel_sidebar__close_container"},y,k)}}]);return t}(r["Component"]);Np.displayName="ActivityLink";Np.defaultProps=Ap;var Pp=function e(t,a){var r=a.id;var n=Object(ri["a"])(r);var i=n.sidebar||{};var s=!Object(m["isFunction"])(i.showCloseButton)||i.showCloseButton(t);var o=s&&Object(m["isFunction"])(i.onClickClose);var l=Object(Sp["getCurrentToast"])(t);return{id:r,views:n,isBold:Object(m["isFunction"])(i.isBold)&&i.isBold(t),badgeCount:Object(m["isFunction"])(i.badgeCount)?i.badgeCount(t):void 0,badgeProps:i.badgeProps,isSelected:Object(Ga["a"])(t)===r,isCloseButtonVisible:o,featureSidebarVirtualized:Object(Ba["isFeatureEnabled"])(t,"feature_sidebar_virtualized"),currentToast:l,stopAnimations:!Object(Ta["k"])(t,"a11y_animations"),prefExcludeReactions:Object(Ta["k"])(t,"mentions_exclude_reactions")}};var Mp=function e(t,a){var r=a.id;var n=Object(ri["a"])(r);var i=n.sidebar||{};return{onClickClose:Object(m["isFunction"])(i.onClickClose)?function(){i.onClickClose(t)}:null,onClick:Object(m["isFunction"])(i.onClick)?function(){i.onClick(t)}:null,renderLinkContent:i.renderLinkContent,shiftToast:function e(){return t(Sp["shiftToast"].apply(void 0,arguments))}}};var Dp=Object(i["connect"])(Pp,Mp)(Np);var xp={isBold:false,badgeCount:void 0,badgeProps:void 0,isSelected:false,isCloseButtonVisible:false,onClickClose:m["noop"],selectItem:m["noop"],featureSidebarVirtualized:false,isIAP1Enabled:false};var Rp=function e(t){var a=t.id,r=t.views,i=t.isBold,s=t.isCloseButtonVisible,o=t.onClickClose,l=t.badgeCount,c=t.badgeProps,u=t.featureSidebarVirtualized,d=t.isIAP1Enabled,p=Xd()(t,["id","views","isBold","isCloseButtonVisible","onClickClose","badgeCount","badgeProps","featureSidebarVirtualized","isIAP1Enabled"]);var h=Object(m["isFunction"])(r.label)&&r.label();var v=r.sidebar||{},f=v.icon,b=v.getCloseLinkLabel,g=v.extraContainerStyleClass,_=void 0===g?"":g;var y=n.a.createElement(op,ho()({},p,{id:a,label:h,className:fo()("p-channel_sidebar__link--page_"+a.toLowerCase()+" position_relative"),icon:f,hasUnreads:i,badgeCount:l,badgeProps:c,qaLabel:"page_"+a,featureSidebarVirtualized:u}));if(!s)return y;var O=Object(m["isFunction"])(b)?b():"";var k=d?"times":"times-circle-medium";var E=n.a.createElement(cu["a"],{onClick:o,className:"p-channel_sidebar__close p-channel_sidebar__close--circle","aria-label":u?void 0:O,"aria-hidden":!!u||void 0,tabIndex:u?-1:void 0},n.a.createElement(Wo["b"],{type:k}));return n.a.createElement("div",{className:fo()("p-channel_sidebar__close_container "+(d?_:""))},y,E)};Rp.displayName="PageLink";Rp.defaultProps=xp;var Fp=function e(t,a){var r=a.id;var n=Object(ri["a"])(r);var i=n.sidebar||{};var s=!Object(m["isFunction"])(i.showCloseButton)||i.showCloseButton(t);var o=s&&Object(m["isFunction"])(i.onClickClose);return{id:r,views:n,isBold:Object(m["isFunction"])(i.isBold)&&i.isBold(t),badgeCount:Object(m["isFunction"])(i.badgeCount)?i.badgeCount(t):void 0,badgeProps:i.badgeProps,isSelected:Object(Ga["a"])(t)===r,isCloseButtonVisible:o,isIAP1Enabled:Object(hr["e"])(t),featureSidebarVirtualized:Object(Ba["isFeatureEnabled"])(t,"feature_sidebar_virtualized")}};var Lp=function e(t,a){var r=a.id;var n=Object(ri["a"])(r);var i=n.sidebar||{};return{onClickClose:Object(m["isFunction"])(i.onClickClose)?function(){i.onClickClose(t)}:null,onClick:Object(m["isFunction"])(i.onClick)?function(){i.onClick(t)}:null,renderLinkContent:i.renderLinkContent}};var Up=Object(i["connect"])(Fp,Lp)(Rp);var Bp=a(109);var qp=new dr["b"]("channel_sidebar");var Gp=function e(t){var a=t.selectItem,r=t.dim,i=t.label,s=t.qaLabel,o=t.showClose,l=t.onClickClose,c=t.featureSidebarVirtualized;var u=i||qp.t("Invite people",{fallbackHash:"a937c4ac396e25f4c9a290d468e33c668ec6ff69"});var d=c?-1:void 0;var p=n.a.createElement(op,{key:"Vinvites",id:"Vinvites",label:u,selectItem:a,isDim:r,qaLabel:s,featureSidebarVirtualized:c});if(!o)return p;var m=n.a.createElement(cu["a"],{onClick:l,className:"p-channel_sidebar__close","aria-label":c?void 0:qp.t("Hide Invite People button"),tabIndex:d,"aria-hidden":!!c||void 0},n.a.createElement(Wo["b"],{type:"times-circle-medium"}));return n.a.createElement("div",{className:"p-channel_sidebar__close_container"},p,m)};Gp.displayName="InvitePeopleLink";Gp.defaultProps={selectItem:h.a.noop,dim:true,label:void 0,qaLabel:"",showClose:false,onClickClose:h.a.noop,featureSidebarVirtualized:false};var Hp=Object(Bp["pure"])(Gp);var Wp=Object(Ja["b"])("Dismiss Add Apps link in sidebar",function(e){e(Object(Na["d"])({pref:"add_apps_prompt_dismissed",value:true}))});Wp.meta={name:"dismissInstallAppsPrompt",key:"actionsDismissInstallAppsPromptDismissInstallAppsPrompt",description:"Dismiss Add Apps link in sidebar"};var Vp=Wp;var Kp=a(331);var zp=a(1333);var Qp=a(1993);var Yp=new dr["b"]("channel_sidebar");var Jp={hideAppLinkPrompt:h.a.noop,dismissInstallAppsPrompt:h.a.noop,openAppsBrowserModal:h.a.noop,openAppLauncherView:h.a.noop,clogAppLauncherOpen:h.a.noop,appSuggestionsCount:0,featureAppLauncher:false,featureSidebarVirtualized:false,appLinkImpression:false,setAppLinkImpressionClogged:h.a.noop};var Xp=function(e){gn()(t,e);function t(e){var a;ln()(this,t);a=pn()(this,hn()(t).call(this,e));a.handleAppsBrowserClick=a.handleAppsBrowserClick.bind(fn()(a));a.dismissLink=a.dismissLink.bind(fn()(a));return a}un()(t,[{key:"componentDidMount",value:function e(){if(!this.props.appLinkImpression){this.clogEvent("impression");this.props.setAppLinkImpressionClogged()}}},{key:"clogEvent",value:function e(t){this.props.clogger.track("APP_ADD_APPS_PROMPT",{contexts:{ui_context:{action:t,ui_element:"ADD_APPS"}}})}},{key:"dismissLink",value:function e(){this.props.hideAppLinkPrompt();this.clogEvent("decline");this.props.dismissInstallAppsPrompt()}},{key:"handleAppsBrowserClick",value:function e(){this.clogEvent("click");var t=this.props.clogger;t.track("INSTALL_APPS_LINK_APP_BROWSER_CLICK");if(this.props.featureAppLauncher){this.props.openAppLauncherView();this.props.clogAppLauncherOpen({eventId:"APP_LAUNCHER_OPEN_FROM_ADD_APPS_CTA"})}else this.props.openAppsBrowserModal()}},{key:"render",value:function e(){var t=this.props,a=t.appSuggestionsCount,r=t.featureSidebarVirtualized;var i=a>1?Yp.t("Add more apps"):Yp.t("Add apps");var s=Yp.t('Dismiss "{promptName}" prompt',{promptName:i,fallbackHash:"839889771d0f807023cce8451c98f3a2a4eab919"});var o=r?-1:void 0;return n.a.createElement("div",{className:"p-channel_sidebar__close_container"},n.a.createElement(Ao["c"],{className:"p-channel_sidebar__link p-channel_sidebar__link--dim p-channel_sidebar__link--add-apps",onClick:this.handleAppsBrowserClick,"data-qa":"add_apps_link",role:r?"presentation":void 0,tabIndex:o},n.a.createElement("span",{className:"p-channel_sidebar__name"},i)),n.a.createElement(Ao["c"],{onClick:this.dismissLink,className:"p-channel_sidebar__close","aria-label":r?void 0:s,"data-qa":"add_apps_dismiss_link",tabIndex:o,"aria-hidden":!!r||void 0},n.a.createElement(Wo["b"],{type:"times-circle-medium"})))}}]);return t}(r["Component"]);Xp.displayName="InstallAppsLink";Xp.defaultProps=Jp;var Zp=function e(t){return{setAppLinkImpressionClogged:function e(){return t(ja["setAppLinkImpressionClogged"].apply(void 0,arguments))},hideAppLinkPrompt:function e(){return t(ja["hideAppLinkPrompt"].apply(void 0,arguments))},dismissInstallAppsPrompt:function e(){return t(Vp.apply(void 0,arguments))},openAppsBrowserModal:function e(){return t(zp["a"].apply(void 0,arguments))},openAppLauncherView:function e(){return t(Qp["a"].apply(void 0,arguments))},clogAppLauncherOpen:function e(){return t(Kp["c"].apply(void 0,arguments))}}};function $p(e){return{clogger:Object(Va["a"])({state:e}),appLinkImpression:Object(ja["getAppLinkImpressionClogged"])(e),appSuggestionsCount:(Object(ja["getEnabledAppSuggestionPromptsKeyList"])(e)||[]).length,featureAppLauncher:Object(sr["a"])(e),featureSidebarVirtualized:Object(Ba["isFeatureEnabled"])(e,"feature_sidebar_virtualized")}}var em=Object(i["connect"])($p,Zp)(Xp);var tm=a(261);function am(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function rm(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?am(Object(a),true).forEach(function(t){p()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):am(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var nm={setUserPrefByApi:m["noop"],hideAppSuggestion:m["noop"],setAppSuggestionImpressionClogged:m["noop"],onboardingRoleApps:"",featureSidebarVirtualized:false};function im(e){var t=e.appKey,a=e.appId,i=e.isInstall,s=e.setUserPrefByApi,o=e.hideAppSuggestion,l=e.dismissKey,c=e.href,u=e.text,d=e.label,p=e.clogUiElement,m=e.clogger,h=e.appSuggestionImpressions,v=e.setAppSuggestionImpressionClogged,f=e.onboardingRoleApps,b=e.featureSidebarVirtualized;var g=Object(r["useCallback"])(function(e){m.track(Ka["EventId"].APP_SIDEBAR_PROMPTS,{contexts:{ui_context:{action:e,ui_element:p},core:{app_id:a}}})},[a,m,p]);Object(r["useEffect"])(function(){if(!h[t]){v(t);g("impression")}},[h,v,g,t]);var _=Object(r["useCallback"])(function(){o(t);i||s({pref:l,value:true});g("click")},[t,o,i,g,s,l]);var y=Object(r["useCallback"])(function(){o(t);var e=(f||"").split(",");if(e.includes(a)){e.splice(e.indexOf(a),1);s({pref:"onboarding_role_apps",value:e.join(",")})}s({pref:l,value:true});g("decline")},[f,a,o,t,s,l,g]);var O=b?-1:void 0;var k=b?void 0:d;return n.a.createElement("div",{className:"p-channel_sidebar__close_container"},n.a.createElement(Kr["a"],{"data-qa":"app_suggestion_prompt_cta",className:"p-channel_sidebar__link p-channel_sidebar__link--dim p-channel_sidebar__link--add-apps",href:c,onClick:_,tabIndex:O,role:b?"presentation":void 0},n.a.createElement("span",{className:"p-channel_sidebar__name"},u)),n.a.createElement(Ao["c"],{"data-qa":"app_suggestion_prompt_dismiss",onClick:y,className:"p-channel_sidebar__close","aria-label":k,"aria-hidden":!!b||void 0,tabIndex:O},n.a.createElement(Wo["b"],{type:"times-circle-medium"})))}im.displayName="AppSuggestionLink";im.defaultProps=nm;var sm=function e(t){return{setUserPrefByApi:function e(){return t(Na["d"].apply(void 0,arguments))},hideAppSuggestion:function e(){return t(ja["hideAppSuggestion"].apply(void 0,arguments))},setAppSuggestionImpressionClogged:function e(){return t(ja["setAppSuggestionImpressionClogged"].apply(void 0,arguments))}}};var om=function e(t,a){var r=a.appKey;return rm({},uo(t,r),{clogger:Object(Va["a"])({state:t}),onboardingRoleApps:Object(Ta["k"])(t,"onboarding_role_apps"),appSuggestionImpressions:Object(ja["getAppSuggestionImpressionsClogged"])(t),featureSidebarVirtualized:Object(Ba["isFeatureEnabled"])(t,"feature_sidebar_virtualized")})};var lm=Object(i["connect"])(om,sm)(im);var cm={displayedAppSuggestionsList:[]};var um=function e(t,a){var r=t.appName;var n=a.appName;return Object(tm["a"])(r,n)};function dm(e){var t=e.displayedAppSuggestionsList;return n.a.createElement(n.a.Fragment,null,t.sort(um).map(function(e){var t=e.appKey;return n.a.createElement(lm,{appKey:t,key:t})}))}dm.defaultProps=cm;var pm=function e(t){return{displayedAppSuggestionsList:Object(ja["getEnabledAppSuggestionPromptsKeyList"])(t)}};var mm=Object(i["connect"])(pm)(dm);var hm=a(924);var vm=a(1273);var fm=a(5112);var bm=a(1155);var gm=a(1058);var _m=new dr["b"]("channel_sidebar");var ym=Object(pr["e"])("delete a channel section and send a toast with undo support",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelSectionId;var i=Object(hr["e"])(t());if(!i)return Promise.resolve();var s=Object(cr["h"])(t(),r);var o=e(Fr({channelSectionId:r})),l=o.resultPromise,c=o.undo;l.catch(function(){e(sn({error:$r}))});var u=function e(){var a;c();Object(Va["a"])({state:t()}).track(Ka["EventId"].CHANNEL_SECTIONS_DELETE,{context:p()({ui_context:(a={},p()(a,Ka["UiContextKeys"].action,Ka["UiAction"].UNDO),p()(a,Ka["UiContextKeys"].ui_component_name,"PerformChannelSectionDelete"),a)},Ka["ChannelSectionsKeys"].channel_section_id,r)})};return l.then(function(){e(Object(mr["enqueueToast"])({element:n.a.createElement(Sn,{undo:u},_m.rt("Deleted {channelSection}.",{channelSection:n.a.createElement("strong",null,n.a.createElement(An,{channelSection:s}))}))}))})});ym.meta={name:"performChannelSectionDelete",key:"actionsUiChannelSectionsPerformChannelSectionDeletePerformChannelSectionDelete",description:"delete a channel section and send a toast with undo support"};var Om=ym;var km=a(124);var Em=a(57);var Cm=new dr["b"]("channel_sidebar");var Sm={className:"",getTemplate:function e(){return[]},featureSidebarVirtualized:false,featureDangerouslyGuardIATranslations:false,openModal:m["noop"],closeModal:m["noop"]};var wm=function(e){gn()(t,e);function t(e){var a;ln()(this,t);a=pn()(this,hn()(t).call(this,e));a.renderSectionMenu=a.renderSectionMenu.bind(fn()(a));a.onSectionMenuOpen=a.onSectionMenuOpen.bind(fn()(a));a.onSectionMenuClose=a.onSectionMenuClose.bind(fn()(a));a.state={ellipsisVisible:false};return a}un()(t,[{key:"onSectionMenuClose",value:function e(){this.setState(function(){return{ellipsisVisible:false}})}},{key:"onSectionMenuOpen",value:function e(){this.setState(function(){return{ellipsisVisible:true}})}},{key:"renderSectionMenu",value:function e(t){return n.a.createElement(Em["a"],ho()({},t,{template:this.props.getTemplate()}))}},{key:"render",value:function e(){var t=this.props,a=t.className,r=t.featureSidebarVirtualized;if(!this.props.featureDangerouslyGuardIATranslations)return false;return n.a.createElement(n.a.Fragment,null,n.a.createElement(Em["e"],{renderMenu:this.renderSectionMenu,onClick:this.onSectionMenuOpen,position:"bottom-left",offsetX:-4,offsetY:4,"data-qa":"channel_section_menu_trigger",onClose:this.onSectionMenuClose},n.a.createElement(ec["c"],{tip:Cm.t("Section options"),position:"top",delay:ec["a"],key:"options-button-tooltip"},n.a.createElement(Ao["c"],{className:fo()(a,"p-channel_sidebar__section_heading_ellipsis",{"p-channel_sidebar__section_heading_ellipsis--hover":this.state.ellipsisVisible}),"aria-label":r?void 0:Cm.t("Channel Section Options"),"data-qa":"standard_channel_section_button"},n.a.createElement(Wo["b"],{"data-qa":"channel_section_ellipsis_icon",className:"p-channel_sidebar__section_heading_ellipsis_icon",type:"vertical-ellipsis",size:"inherit",inline:true})))))}}]);return t}(r["Component"]);wm.displayName="SectionMenu";var jm=function e(t){return{featureSidebarVirtualized:Object(Ba["isFeatureEnabled"])(t,"feature_sidebar_virtualized"),featureDangerouslyGuardIATranslations:Object(hr["e"])(t)}};var Im={};wm.defaultProps=Sm;var Tm=Object(i["connect"])(jm,Im)(wm);var Am=a(454);var Nm=a(93);var Pm=a(1179);var Mm=new dr["b"]("channel_browser_coachmark");var Dm={channelSection:{},featureDangerouslyGuardIATranslations:false,numOtherWorkspacesOfCurrentEnterprise:0,channelExternalTeamNamesAffected:{},numOtherChannelsAffected:0,onModalSubmit:m["noop"],onModalClose:m["noop"],labelPrefix:null,selfEnterpriseOrgName:""};var xm=function(e){gn()(t,e);function t(){ln()(this,t);return pn()(this,hn()(t).apply(this,arguments))}un()(t,[{key:"renderLabelPrefix",value:function e(){var t=this.props.labelPrefix;if(!t)return"";return t}},{key:"render",value:function e(){var t=this.props,a=t.featureDangerouslyGuardIATranslations,r=t.channelSection,i=t.channelExternalTeamNamesAffected,s=t.numOtherChannelsAffected,o=t.numOtherWorkspacesOfCurrentEnterprise,l=t.onModalSubmit,c=t.onModalClose,u=t.selfEnterpriseOrgName;if(!a)return null;var d=n.a.createElement("div",{"data-qa":"channel-section-delete-confirmation-modal-single-workspace-message"},Mm.rt("Conversations in <strong>{inlineChannelSection}</strong> will move back to the Channels and Direct messages sections in your sidebar.",{fallbackHash:"7dc6c881b901809091fa3714e99c1c60eda0a8e7",labelPrefix:this.renderLabelPrefix(),channelSectionName:r.name,inlineChannelSection:n.a.createElement(An,{channelSection:r})}));var p=n.a.createElement("div",{"data-qa":"channel-section-delete-confirmation-modal-multi-workspace-message"},Mm.rt("Conversations in <strong>{inlineChannelSection}</strong> will move back to the Channels and Direct messages sections in your sidebar.",{fallbackHash:"7dc6c881b901809091fa3714e99c1c60eda0a8e7",labelPrefix:this.renderLabelPrefix(),channelSectionName:r.name,inlineChannelSection:n.a.createElement(An,{channelSection:r})}));var m=Object.keys(i).length;var h=Object.keys(i)[0];var v=n.a.createElement(Nm["a"],{type:"inline",align:"left",level:"warning",className:"p-channel_sidebar__remove_section_modal_spacing","data-qa":"channel-section-delete-confirmation-modal-multi-workspace-warning"},Mm.rt("<strong>{numOtherChannelsAffected, plural, =1 {# channel not shown} other {# channels not shown}}</strong> (in {numTotalWorkspacesAffected, plural, =1 {{firstWorkspaceAffectedName}} =2 {{firstWorkspaceAffectedName} and 1 other workspace} other {{firstWorkspaceAffectedName} and {numTotalWorkspacesAffectedMinusOne} other workspaces}}) will also move out of this section.",{numOtherChannelsAffected:s,numTotalWorkspacesAffected:m,firstWorkspaceAffectedName:h,numTotalWorkspacesAffectedMinusOne:m-1}));var f=n.a.createElement(Nm["a"],{type:"inline",align:"left",level:"warning",className:"p-channel_sidebar__remove_section_modal_spacing","data-qa":"channel-section-delete-confirmation-modal-starred-multi-workspace-warning"},Mm.rt("<strong>Starred</strong> will be deleted across all your {orgName} workspaces.",{orgName:u}));var b=n.a.createElement(n.a.Fragment,null,o>0?p:d,n.a.createElement("div",{className:"p-channel_sidebar__remove_section_modal_spacing"},Mm.rt("And don\u2019t worry \u2014 you won\u2019t be removed from any channels when you delete this section.")),Object.keys(i).length>0?v:null,o>0&&r.type===yr["h"]&&f);return n.a.createElement(Pm["a"],{"data-qa":"remove_channel_section_modal",submitButtonText:Mm.t("Delete"),submitButtonType:"danger",cancelButtonText:Mm.t("Cancel"),onSubmit:l,onCancel:c,onClose:c,title:Mm.t("Delete this section?")},b)}}]);return t}(r["Component"]);xm.displayName="SectionHeadingConfirmationModal";xm.defaultProps=Dm;var Rm=function e(t,a){var r=a.channelSectionId;var n=Object(Ba["getOtherAccounts"])(t).filter(function(e){return!!e.enterprise_id&&e.enterprise_id===Object(tr["a"])(t)}).length;var i=Object(cr["i"])(t,r).map(function(e){return Object(Pa["e"])(t,e)}).filter(function(e){return e&&Object(Ma["isFromAnotherTeam"])(e)}).map(function(e){return Object(zn["getTeamDisplayName"])(Object(Qn["k"])(t,Object(Ma["teamIdForChannelFromAnotherTeam"])(t,e)))});var s={};i.forEach(function(e){s[e]?s[e]+=1:s[e]=1});var o=0;o=Object.values(s).reduce(function(e,t){return e+t},0);return{featureDangerouslyGuardIATranslations:Object(hr["e"])(t),numOtherWorkspacesOfCurrentEnterprise:n,channelExternalTeamNamesAffected:s,numOtherChannelsAffected:o,channelSection:Object(cr["h"])(t,r),channelSectionChannels:Object(cr["i"])(t,r),selfEnterpriseOrgName:Object(Qn["g"])(t)}};var Fm=Object(i["connect"])(Rm)(xm);function Lm(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function Um(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Lm(Object(a),true).forEach(function(t){p()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Lm(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Bm=new dr["b"]("channel_browser_coachmark");var qm={qaLabel:"",labelPrefix:null,tooltip:"",headerAriaLabel:"",tooltipClassName:null,tooltipArrowOffset:void 0,onLabelClick:m["noop"],showPlus:false,plusTooltip:null,plusAriaLabel:"",onPlusClick:m["noop"],seenChannelBrowserCoachmark:false,hasRecentlySharedAChannel:false,setUserPrefByApi:m["noop"],openChannelBrowser:m["noop"],featureChannelIsRemoveCreateSharedChannel:false,isSelected:false,secondaryContent:void 0,clogger:{track:m["noop"]},featureSidebarVirtualized:false,defaultSectionName:void 0,channelSectionId:void 0,channelSection:{},shouldUseChannelSections:false,isChannelSectionsAPIOperational:true,isCollapsed:false,setSectionCollapsed:m["noop"],badgeCount:0,hasUnreads:false,connectDropTarget:m["identity"],connectDragSource:m["identity"],isChannelDraggingOverHeading:false,isChannelSectionDraggingOverHeading:false,lastActiveDropTargetForChannelDrag:void 0,lastActiveDropTargetForChannelSectionDrag:void 0,priorDisplayedChannelSectionId:void 0,setLastActiveDropTargetForChannelDrag:m["noop"],setLastActiveDropTargetForChannelSectionDrag:m["noop"],orderedChannelSections:[],isAnyChannelDragging:false,isAnyChannelSectionDragging:false,channelIds:[],performChannelSectionDelete:m["noop"],openModal:m["noop"],closeModal:m["noop"],channelSectionChannels:[],isIAP1Enabled:false,openChannelCreateModal:m["noop"],canUserCreateChannels:false,openDmBrowserModal:m["noop"],featureDangerouslyGuardIATranslations:false,setChannelSectionPrefByApi:m["noop"],setIsOrganizing:m["noop"],isOrganizing:false,sidebarBehaviorPref:null,isPaidTeam:false,enqueueToast:m["noop"],openPrefsModal:m["noop"]};var Gm={defaultSectionName:ur["default"].oneOf(yr["a"]),channelIds:ur["default"].arrayOf(ur["default"].string)};var Hm={defaultSectionName:void 0,channelIds:[]};var Wm=Object(Ca["b"])();var Vm=function(e){gn()(t,e);function t(e){var a;ln()(this,t);a=pn()(this,hn()(t).call(this,e));a.onLabelClick=a.onLabelClick.bind(fn()(a));a.onPlusClick=a.onPlusClick.bind(fn()(a));a.setTooltipRef=a.setTooltipRef.bind(fn()(a));a.setPlusTooltipRef=a.setPlusTooltipRef.bind(fn()(a));a.onCollapseToggleClick=a.onCollapseToggleClick.bind(fn()(a));a.sectionHeadingRef=n.a.createRef();a.getContextMenuTemplate=a.getContextMenuTemplate.bind(fn()(a));a.onRenameSectionSelected=a.onRenameSectionSelected.bind(fn()(a));a.onRemoveSectionSelected=a.onRemoveSectionSelected.bind(fn()(a));a.onCreateNewSection=a.onCreateNewSection.bind(fn()(a));a.onSetSidebarBehavior=a.onSetSidebarBehavior.bind(fn()(a));a.onSetIsOrganizing=a.onSetIsOrganizing.bind(fn()(a));a.renderContextMenu=a.renderContextMenu.bind(fn()(a));a.renderSectionHeading=a.renderSectionHeading.bind(fn()(a));a.onModalSubmit=a.onModalSubmit.bind(fn()(a));a.onModalClose=a.onModalClose.bind(fn()(a));a.renderChannelAddMenu=a.renderChannelAddMenu.bind(fn()(a));return a}un()(t,[{key:"componentDidUpdate",value:function e(t){this.props.isChannelSectionsAPIOperational&&this.props.shouldUseChannelSections&&!t.isChannelDraggingOverHeading&&this.props.isChannelDraggingOverHeading&&this.props.lastActiveDropTargetForChannelDrag&&this.props.lastActiveDropTargetForChannelDrag.channelSectionId!==this.props.channelSectionId&&this.props.setLastActiveDropTargetForChannelDrag({channelSectionId:this.props.channelSectionId});if(this.props.isChannelSectionsAPIOperational&&this.props.shouldUseChannelSections&&!t.isChannelSectionDraggingOverHeading&&this.props.isChannelSectionDraggingOverHeading){var a=this.props.channelSectionId;var r=!xu({isCollapsed:this.props.isCollapsed,channelSectionChannelIds:this.props.channelIds,channelId:null});this.props.setLastActiveDropTargetForChannelSectionDrag({channelSectionId:a,isAfter:r})}}},{key:"onCollapseToggleClick",value:function e(t){t.preventDefault();Wm.action(Ru,"Toggled collapsed state of heading "+this.props.qaLabel);var a=this.props,r=a.channelSectionId,n=a.defaultSectionName,i=a.isCollapsed;this.props.setSectionCollapsed({channelSectionId:r,defaultSectionName:n,isCollapsed:!i})}},{key:"onLabelClick",value:function e(t){if(this.props.shouldUseChannelSections){this.onCollapseToggleClick(t);return}t.preventDefault();Wm.action(Ru,"Selected heading "+this.props.qaLabel);this.props.onLabelClick();this.tooltip&&this.tooltip.hideTip()}},{key:"onModalClose",value:function e(){this.props.closeModal()}},{key:"onModalSubmit",value:function e(){var t;this.props.performChannelSectionDelete({channelSectionId:this.props.channelSectionId}).finally(this.onModalClose);this.props.clogger.track(Ka["EventId"].CHANNEL_SECTIONS_DELETE,{context:{ui_context:(t={},p()(t,Ka["UiContextKeys"].action,Ka["UiAction"].CONFIRM),p()(t,Ka["UiContextKeys"].ui_component_name,"SectionHeading"),t)},channel_section_id:this.props.channelSectionId})}},{key:"onPlusClick",value:function e(t){t.preventDefault();Wm.action(Ru,"Clicked plus button for "+this.props.qaLabel);this.props.onPlusClick();this.plusTooltip&&this.plusTooltip.hideTip();this.props.clogger.track(Ka["EventId"].SIDEBAR_PLUS_CLICK,{label:this.props.qaLabel,is_iap1:this.props.isIAP1Enabled})}},{key:"onRemoveSectionSelected",value:function e(){var t=this.props,a=t.featureDangerouslyGuardIATranslations,r=t.channelSectionChannels,i=t.channelSection;if(!a)return;if(r.length>0||i.type===yr["h"])this.props.openModal({element:n.a.createElement(Fm,{onModalSubmit:this.onModalSubmit,onModalClose:this.onModalClose,channelSectionId:this.props.channelSectionId,labelPrefix:this.props.labelPrefix})});else if(0===this.props.channelSectionChannels.length){var s;this.props.performChannelSectionDelete({channelSectionId:this.props.channelSectionId});this.props.clogger.track(Ka["EventId"].CHANNEL_SECTIONS_DELETE,{context:{ui_context:(s={},p()(s,Ka["UiContextKeys"].action,Ka["UiAction"].SELECT),p()(s,Ka["UiContextKeys"].ui_component_name,"SectionHeading"),s)},channel_section_id:this.props.channelSectionId})}}},{key:"onCreateNewSection",value:function e(){var t=this;this.props.openModal({element:n.a.createElement(Du,{action:gu.CREATE,nextChannelSectionId:this.props.channelSection.id,onAttemptSubmit:function e(){var a;t.props.clogger.track(Ka["EventId"].CHANNEL_SECTIONS_CREATE,{context:{ui_context:(a={},p()(a,Ka["UiContextKeys"].action,Ka["UiAction"].SAVE),p()(a,Ka["UiContextKeys"].ui_component_name,"SectionHeading"),a)}})}})})}},{key:"onSetSidebarBehavior",value:function e(t){var a,r;var n=this.props.channelSectionId;this.props.setChannelSectionPrefByApi({channelSectionId:n,pref:Cr["b"],value:t});this.props.clogger.track(Ka["EventId"].CHANNEL_SECTIONS_PREFERENCES_SET,(r={context:{ui_context:(a={},p()(a,Ka["UiContextKeys"].action,Ka["UiAction"].SELECT),p()(a,Ka["UiContextKeys"].ui_component_name,"SectionHeading"),a)}},p()(r,Ka["ChannelSectionsKeys"].channel_section_id,n),p()(r,Ka["ChannelSectionsKeys"].pref,Cr["b"]),p()(r,Ka["ChannelSectionsKeys"].value,t),r))}},{key:"onSetIsOrganizing",value:function e(t){this.props.setIsOrganizing({isOrganizing:t})}},{key:"onRenameSectionSelected",value:function e(){var t=this;this.props.openModal({element:n.a.createElement(Du,{action:gu.RENAME,channelSectionId:this.props.channelSectionId,initialText:this.props.channelSection.name,initialEmoji:this.props.channelSection.emoji,onAttemptSubmit:function e(){var a;t.props.clogger.track(Ka["EventId"].CHANNEL_SECTIONS_RENAME,{context:{ui_context:(a={},p()(a,Ka["UiContextKeys"].action,Ka["UiAction"].SELECT),p()(a,Ka["UiContextKeys"].ui_component_name,"SectionHeading"),a)},channel_section_id:t.props.channelSectionId})}})})}},{key:"getContextMenuTemplate",value:function e(t){var a=this;var r=t.isContextMenu;var i=new dr["b"]("menu");var s=this.props,o=s.channelSection,l=s.featureDangerouslyGuardIATranslations,c=s.isOrganizing,u=s.sidebarBehaviorPref;if(!l)return[];if(o.type!==yr["g"]&&o.type!==yr["h"])return[];var d=[];o.type!==yr["h"]&&d.push({label:i.t("Rename section"),click:function e(){return a.onRenameSectionSelected()},dataQa:"channel_section_menu_rename_channel_section"});d.push({label:i.t("Delete section"),click:function e(){return a.onRemoveSectionSelected()},dataQa:"channel_section_menu_remove_channel_section",danger:true});!r&&this.props.isPaidTeam&&d.push({type:Am["a"].separator},{type:Am["a"].header,label:i.t("Show\u2026")},{label:n.a.createElement(n.a.Fragment,null,u===Cr["c"]?n.a.createElement(Wo["b"],{type:"check-small",role:"presentation"}):n.a.createElement("div",{className:"p-channel_sidebar__placeholder"})," ",i.t("All conversations")),value:Cr["c"],key:Cr["c"],dataQa:"channel_section_menu_sidebar_behavior_everything",className:fo()({"p-channel_sidebar__channel_section_select_menu_item--checked":u===Cr["c"]}),click:function e(){return a.onSetSidebarBehavior(Cr["c"])}},{label:n.a.createElement(n.a.Fragment,null,u===Cr["d"]?n.a.createElement(Wo["b"],{type:"check-small",role:"presentation"}):n.a.createElement("div",{className:"p-channel_sidebar__placeholder"}),Bm.t("Unread conversations only")),value:Cr["d"],key:Cr["d"],dataQa:"channel_section_menu_sidebar_behavior_unreads",className:fo()({"p-channel_sidebar__channel_section_select_menu_item--checked":u===Cr["d"]}),click:function e(){return a.onSetSidebarBehavior(Cr["d"])}});this.props.isPaidTeam&&d.push({type:Am["a"].separator},{dataQa:"channel_section_menu_create_new_section",label:i.t("Create new section"),click:function e(){return a.onCreateNewSection()}},{dataQa:"channel_section_menu_organize_sidebar",label:c?i.t("Done organizing sidebar"):i.t("Organize sidebar"),click:function e(){return a.onSetIsOrganizing(!c)}});this.props.isPaidTeam||d.push({type:Am["a"].separator},{type:Am["a"].header,label:i.t("Upgrade to...")},{dataQa:"channel_section_menu_create_new_section",label:i.t("Create new section"),disabled:true});d.push({type:Am["a"].separator},{label:i.t("Sidebar settings"),click:function e(){a.props.openPrefsModal({activeSection:"sidebar",activeSubsection:"sidebar"})}});return d}},{key:"setPlusTooltipRef",value:function e(t){this.plusTooltip=t}},{key:"setTooltipRef",value:function e(t){this.tooltip=t}},{key:"determineTabIndexForPlus",value:function e(){var t=this.props,a=t.onPlusClick,r=t.onLabelClick,n=t.featureSidebarVirtualized;if(n)return-1;var i=a===r;return i?"-1":void 0}},{key:"renderCollapseToggle",value:function e(){if(!this.props.isChannelSectionsAPIOperational||!this.props.shouldUseChannelSections||!(this.props.defaultSectionName||this.props.channelSectionId))return null;return n.a.createElement("span",{role:"presentation","aria-hidden":"true",onClick:this.onCollapseToggleClick},n.a.createElement(Wo["b"],{"data-qa":"channel-section-collapse",className:"p-channel_sidebar__section_heading_expand",type:"caret-right",size:"inherit",inline:true}))}},{key:"renderChannelAddMenu",value:function e(t){var a=this;var r=this.props.featureDangerouslyGuardIATranslations;if(!r)return null;var i=new dr["b"]("menu");this.props.clogger.track("SIDEBAR_PLUS_CLICK",{is_iap1:this.props.isIAP1Enabled,label:"channels"});var s=[{label:i.t("Browse channels"),click:function e(){return a.props.openChannelBrowser({initialBrowsePageFilter:{filter:"channelType",value:"all"}})}},{label:i.t("Create a channel"),click:function e(){return a.props.openChannelCreateModal({entryPoint:"channel_sidebar"})}}];return n.a.createElement(Em["a"],ho()({},t,{template:s}))}},{key:"renderContextMenu",value:function e(){var t=this;return n.a.createElement(ac["a"],{width:200,getTemplate:function e(){return t.getContextMenuTemplate({isContextMenu:true})},desktopAppOnly:false},this.renderSectionHeading())}},{key:"renderLabelPrefix",value:function e(){var t=this.props.labelPrefix;if(!t)return null;return t}},{key:"renderSectionHeading",value:function e(){var t=this.props,a=t.label,r=t.qaLabel,i=t.tooltip,s=t.headerAriaLabel,o=t.tooltipClassName,l=t.tooltipArrowOffset,c=t.onLabelClick,u=t.isSelected,d=t.isCollapsed,p=t.isAnyChannelSectionDragging,h=t.secondaryContent,v=t.featureSidebarVirtualized,f=t.shouldUseChannelSections,b=t.isChannelSectionsAPIOperational,g=t.hasUnreads,_=t.channelIds,y=t.isAnyChannelDragging;var O=v?-1:void 0;var k=f&&!(Object(Po["isMac"])()&&Object(Po["isChrome"])());var E=k?"presentation":void 0;var C;var S=b&&(c!==m["noop"]||f);C=S?n.a.createElement(Ao["c"],{className:fo()("p-channel_sidebar__section_heading_label","p-channel_sidebar__section_heading_label--clickable",{"p-channel_sidebar__section_heading_label--unreads":g}),onClick:this.onLabelClick,"aria-label":v?void 0:s,"aria-expanded":f&&!k?!d:void 0,"data-qa":"channel_sidebar__section_heading_label__"+r,role:E,tabIndex:O},this.renderLabelPrefix()," ",a):n.a.createElement("span",{role:v?void 0:"heading","aria-level":v?void 0:"2",className:fo()("p-channel_sidebar__section_heading_label",{"p-channel_sidebar__section_heading_label--unreads":g}),"data-qa":"channel_sidebar__section_heading_label__"+r},this.renderLabelPrefix()," ",a);var w=i&&!f?n.a.createElement(ec["c"],{tip:i,tipClassName:o,position:"top-left",tipArrowOffset:l,ref:this.setTooltipRef,delay:ec["a"]},this.renderSharedChannelsCoachmarkMaybe(C)):C;var j=S&&!v?n.a.createElement("h2",{className:"offscreen"},a):null;var I=!v&&this.props.onPlusClick!==this.props.onLabelClick;var T=I?"group":void 0;var A=I?a:void 0;var N={};if(b&&f){this.props.connectDropTarget(this.sectionHeadingRef);this.props.connectDragSource(this.sectionHeadingRef);var P=this.props.orderedChannelSections.length>0&&this.props.orderedChannelSections[this.props.orderedChannelSections.length-1].id===this.props.channelSectionId;var M=d||0===_.length;N["p-channel_sidebar__section_heading--collapsed"]=d;N["p-channel_sidebar__section_heading--empty"]=M;N["p-channel_sidebar__section_heading--unreads"]=g;N["p-channel_sidebar__section_heading--drop_over_section"]=y&&this.props.lastActiveDropTargetForChannelDrag&&this.props.lastActiveDropTargetForChannelDrag.channelSectionId===this.props.channelSectionId;var D=p&&this.props.lastActiveDropTargetForChannelSectionDrag&&this.props.priorDisplayedChannelSectionId&&this.props.lastActiveDropTargetForChannelSectionDrag.channelSectionId===this.props.priorDisplayedChannelSectionId&&this.props.lastActiveDropTargetForChannelSectionDrag.isAfter;var x=p&&this.props.lastActiveDropTargetForChannelSectionDrag&&this.props.lastActiveDropTargetForChannelSectionDrag.channelSectionId===this.props.channelSectionId&&!this.props.lastActiveDropTargetForChannelSectionDrag.isAfter;N["p-channel_sidebar__section_heading--drop_target_before"]=x||D;var R=p&&this.props.lastActiveDropTargetForChannelSectionDrag&&this.props.lastActiveDropTargetForChannelSectionDrag.channelSectionId===this.props.channelSectionId&&this.props.lastActiveDropTargetForChannelSectionDrag.isAfter;N["p-channel_sidebar__section_heading--drop_target_after"]=P&&M&&R}return n.a.createElement("div",{className:fo()("p-channel_sidebar__section_heading",Um({"p-channel_sidebar__section_heading--selected":u},N)),ref:this.sectionHeadingRef,"data-qa-channel-sidebar-section-heading":r,"data-qa":r,role:T,"aria-label":A},this.renderCollapseToggle(),j,w,this.renderSectionHeadingRightMaybe(),h)}},{key:"renderSectionHeadingRightMaybe",value:function e(){var t=this;var a=this.props,r=a.shouldUseChannelSections,i=a.showPlus,s=a.plusTooltip,o=a.plusAriaLabel,l=a.qaLabel,c=a.onPlusClick,u=a.onLabelClick,d=a.featureSidebarVirtualized,p=a.isCollapsed,m=a.badgeCount,h=a.isIAP1Enabled,v=a.canUserCreateChannels;var f=[];r&&p&&m&&f.push(n.a.createElement(Zu["b"],{className:"p-channel_sidebar__badge p-channel_sidebar__section_heading_right_item",style:Zu["a"].red,count:m,key:"badge"}));if(!this.props.shouldUseChannelSections||this.props.channelSection.type!==yr["g"]&&this.props.channelSection.type!==yr["h"]){if(i){var b=this.determineTabIndexForPlus();var g=c===u;var _=g||d?"true":void 0;var y=n.a.createElement(Ao["c"],{className:"p-channel_sidebar__section_heading_right_item p-channel_sidebar__section_heading_plus",onClick:this.onPlusClick,"aria-label":d?void 0:o,"aria-hidden":_,tabIndex:b,"data-qa":"channel_sidebar__plus__"+l,key:"plus-button"});s&&(y=n.a.createElement(ec["c"],{tip:s,position:"top",ref:this.setPlusTooltipRef,delay:ec["a"],key:"plus-button-tooltip"},y));h&&v&&("channels"===this.props.qaLabel||this.props.channelSection.type===yr["b"])&&(y=n.a.createElement(Em["e"],{position:"right-bottom",renderMenu:this.renderChannelAddMenu,key:"plus-button-tooltip"},y));f.push(y)}}else f.push(n.a.createElement(Tm,{className:"p-channel_sidebar__section_heading_right_item",getTemplate:function e(){return t.getContextMenuTemplate({isContextMenu:false})},key:"section-menu"}));if(!f.length)return null;return n.a.createElement("div",{className:"p-channel_sidebar__section_heading_right"},f)}},{key:"renderSharedChannelsCoachmarkMaybe",value:function e(t){var a=this;var r=this.props,i=r.seenChannelBrowserCoachmark,s=r.hasRecentlySharedAChannel,o=r.qaLabel,l=r.featureChannelIsRemoveCreateSharedChannel;if("shared_channels"!==o&&!l||"channels"!==o&&l||i||!s)return t;var c=function e(){a.props.setUserPrefByApi({pref:"seen_channel_browser_admin_coachmark",value:true})};var u=function e(){c();a.props.openChannelBrowser({initialBrowsePageFilter:{filter:"channelType",value:"shared"}})};var d=n.a.createElement(hm["a"],{secondaryCallToActionText:Bm.t("Close"),primaryCallToActionText:Bm.t("Show Me"),title:Bm.t("View and manage shared channels"),content:Bm.t("Access the shared channels in your workspace, and any pending invitations, right from the sidebar."),isOpen:true,onClickSecondaryButton:c,onClickPrimaryButton:u,orientation:"right",closeCoachmark:c},n.a.createElement("h3",{className:"margin_bottom_50"},Bm.t("View and manage shared channels")),n.a.createElement("p",null,Bm.t("Access the shared channels in your workspace, and any pending invitations, right from the sidebar.")));return n.a.createElement("div",null,n.a.createElement(vm["a"],{orientation:"right",coachmarkElement:d},t))}},{key:"render",value:function e(){var t=this.props,a=t.channelSection,r=t.shouldUseChannelSections;return n.a.createElement(n.a.Fragment,null,r&&Object(Xa["a"])()&&(a.type===yr["h"]||a.type===yr["g"])?this.renderContextMenu():this.renderSectionHeading())}}]);return t}(n.a.PureComponent);Vm.displayName="SectionHeading";Vm.defaultProps=qm;var Km=qn;var zm={beginDrag:function e(t){var a,r;t.setLastActiveDropTargetForChannelSectionDrag({channelSectionId:null!==(a=null===(r=t.channelSection)||void 0===r?void 0:r.id)&&void 0!==a?a:null,isAbove:true});return{channelSection:t.channelSection}},endDrag:function e(t){t.setLastActiveDropTargetForChannelSectionDrag({channelSectionId:null,isAbove:false})},canDrag:function e(t){return t.isChannelSectionsAPIOperational&&t.shouldUseChannelSections&&!t.isOrganizing}};var Qm=function e(t){return{connectDragSource:t.dragSource()}};var Ym=Object(bo["a"])()?Pc(Km,zm,Qm)(Vm):Vm;var Jm=[Bn,qn];var Xm={};var Zm=function e(t,a){var r=a.getItemType();var n=r===Bn;var i=r===qn;var s=n&&a.isOver();var o=i&&a.isOver();return{connectDropTarget:t.dropTarget(),isAnyChannelDragging:n,isAnyChannelSectionDragging:i,isChannelDraggingOverHeading:s,isChannelSectionDraggingOverHeading:o}};var $m=Object(bo["a"])()?Ea(Jm,Xm,Zm)(Ym):Vm;var eh=function e(t,a){var r=a.channelSectionId,n=a.defaultSectionName,i=a.channelIds;var s=Object(lr["b"])(t);var o=Object(lr["a"])(t);var l=false;r?l=Object(cr["r"])(t,r):n&&(l=Object(cr["s"])(t,n));var c=Object(Ga["a"])(t);var u=false;var d=0;o&&l&&i.forEach(function(e){if(Object(km["a"])(e)){var a=Object(Pa["e"])(t,e);if(!(Object(Ma["isMutedChannel"])(a)||Object(xa["isChannelMutedById"])(t,a.id))){var r=Object(Ma["getUnreadCount"])(a);var n=Object(Pa["d"])(t,a);u=u||c!==e&&r>0;d+=c!==a.id?n:0}}});var p=Object(hr["e"])(t);return{seenChannelBrowserCoachmark:Object(Ta["k"])(t,"seen_channel_browser_admin_coachmark"),hasRecentlySharedAChannel:Object(Ta["k"])(t,"has_recently_shared_a_channel"),featureChannelIsRemoveCreateSharedChannel:Object(Ba["isFeatureEnabled"])(t,"feature_channel_is_remove_create_shared_channel"),clogger:Object(Va["a"])({state:t}),featureSidebarVirtualized:Object(Ba["isFeatureEnabled"])(t,"feature_sidebar_virtualized"),isCollapsed:o&&l,shouldUseChannelSections:o,isChannelSectionsAPIOperational:s,hasUnreads:u,badgeCount:d,channelSection:Object(cr["h"])(t,r),isOrganizing:Object(cr["l"])(t),orderedChannelSections:Object(cr["p"])(t),lastActiveDropTargetForChannelDrag:s&&o?Object(cr["n"])(t):null,lastActiveDropTargetForChannelSectionDrag:s&&o?Object(cr["o"])(t):null,currentEnterpriseTeam:Object(Qn["i"])(t),channelSectionChannels:Object(cr["i"])(t,r),isIAP1Enabled:p,canUserCreateChannels:Object(Ki["G"])(t)||Object(Ki["F"])(t),sidebarBehaviorPref:Object(Yi["d"])(t,r),featureDangerouslyGuardIATranslations:p,isPaidTeam:Object(zn["isPaidTeam"])(Object(Qn["d"])(t))}};var th={setUserPrefByApi:function e(){return Na["d"].apply(void 0,arguments)},openChannelBrowser:function e(){return gp["a"].apply(void 0,arguments)},setSectionCollapsed:function e(){return xr.apply(void 0,arguments)},performChannelSectionDelete:function e(){return Om.apply(void 0,arguments)},setChannelSectionPrefByApi:function e(){return fm["a"].apply(void 0,arguments)},setIsOrganizing:function e(){return _r["g"].apply(void 0,arguments)},openModal:function e(){return Ri["openModal"].apply(void 0,arguments)},closeModal:function e(){return Ri["closeModal"].apply(void 0,arguments)},setLastActiveDropTargetForChannelDrag:function e(){return _r["h"].apply(void 0,arguments)},setLastActiveDropTargetForChannelSectionDrag:function e(){return _r["i"].apply(void 0,arguments)},openChannelCreateModal:function e(){return bm["a"].apply(void 0,arguments)},openDmBrowserModal:function e(){return gm["a"].apply(void 0,arguments)},enqueueToast:function e(){return mr["enqueueToast"].apply(void 0,arguments)},openPrefsModal:function e(){return tu["a"].apply(void 0,arguments)}};var ah=Object(i["connect"])(eh,th)(Vm);ah.propTypes=Gm;ah.defaultProps=Hm;var rh=ah;var nh=Object(i["connect"])(eh,th,null,{withRef:true})($m);nh.propTypes=Gm;nh.defaultProps=Hm;var ih=new dr["b"]("channel_sidebar");var sh={clogger:{track:m["noop"]},featureChannelSidebarDraftsSection:false,featureComposeFlow:false,isSelected:false,selectItem:m["noop"],setUserPrefByApi:m["noop"],showDraftsSectionCoachmark:false,scrollToTopOfChannelList:m["noop"],channelIds:[]};var oh=function(e){gn()(t,e);function t(e){var a;ln()(this,t);a=pn()(this,hn()(t).call(this,e));a.state={showCoachmark:e.showDraftsSectionCoachmark};a.markCoachmarkSeen=a.markCoachmarkSeen.bind(fn()(a));a.onShow=a.onShow.bind(fn()(a));return a}un()(t,[{key:"componentDidMount",value:function e(){this.props.showDraftsSectionCoachmark&&this.props.scrollToTopOfChannelList()}},{key:"onShow",value:function e(){if(!this.state.showCoachmark)return;this.props.setUserPrefByApi({pref:"seen_drafts_section_coachmark",value:true})}},{key:"markCoachmarkSeen",value:function e(){this.setState(function(){return{showCoachmark:false}})}},{key:"render",value:function e(){var t=this.props,a=t.featureChannelSidebarDraftsSection,r=t.featureComposeFlow,i=t.isSelected,s=t.selectItem,o=t.channelIds,l=t.clogger;var c=this.state.showCoachmark;if(!a)return null;var u={};if(r){var d=ih.t("View all drafts");u.onLabelClick=function(){s("Pdrafts");l.track(Ka["EventId"].COMPOSE_FLOW,{draft_action_source:"sidebar",contexts:{ui_context:{action:Ka["UiAction"].CLICK,step:Ka["UiStep"].COMPOSE_FLOW_DRAFTS_OPEN}}})};u.headerAriaLabel=d;u.tooltip=d;u.tooltipArrowOffset=20;u.isSelected=i}var p=n.a.createElement(rh,ho()({},u,{label:ih.t("Drafts"),defaultSectionName:yr["k"],qaLabel:"drafts",channelIds:o}));if(c){this.onShow();var m=ih.t("Pick up where you left off");var h=ih.t("Your drafts are now collected in one place, so you can jump right back whenever you're ready to hit send.");var v=n.a.createElement(hm["a"],{orientation:"right",onClickPrimaryButton:this.markCoachmarkSeen,closeCoachmark:this.markCoachmarkSeen,primaryCallToActionText:ih.t("Got it",{fallbackHash:"8297bb17c6aa1537d802e8ab86dcd018ffb7b6d0",fallbackHashNs:"coachmarks"}),isOpen:true,"data-qa":"drafts-coachmark"},n.a.createElement("h3",{className:"margin_bottom_50"},m),n.a.createElement("p",null,h));return n.a.createElement(vm["a"],{orientation:"right",coachmarkElement:v},n.a.createElement("div",null,p))}return p}}]);return t}(r["Component"]);oh.displayName="DraftsHeading";oh.defaultProps=sh;var lh=function e(t){return{clogger:Object(Va["a"])({state:t}),featureChannelSidebarDraftsSection:Object(Ba["isFeatureEnabled"])(t,"feature_channel_sidebar_drafts_section"),featureComposeFlow:Object(Aa["g"])(t),isSelected:"Pdrafts"===Object(Ga["a"])(t),showDraftsSectionCoachmark:!Object(Ta["k"])(t,"seen_drafts_section_coachmark")}};var ch=function e(t){return{setUserPrefByApi:function e(a){return t(Object(Na["d"])(a))}}};var uh=Object(i["connect"])(lh,ch)(oh);var dh=a(86);var ph=new dr["b"]("channel_sidebar");var mh={featureSidebarVirtualized:false};var hh=function(e){gn()(t,e);function t(e){var a;ln()(this,t);a=pn()(this,hn()(t).call(this,e));a.onClick=a.onClick.bind(fn()(a));return a}un()(t,[{key:"componentDidMount",value:function e(){this.clog(Ka["UiAction"].IMPRESSION)}},{key:"onClick",value:function e(){this.clog(Ka["UiAction"].CLICK)}},{key:"clog",value:function e(t){this.props.clogger.track(Ka["EventId"].GROWTH_PRICING,{contexts:{ui_context:{step:Ka["UiStep"].SIDEBAR,action:t,ui_properties:{element_type:Ka["ElementType"].LINK,element_name:"upgrade_link"}}}})}},{key:"render",value:function e(){var t=this.props.featureSidebarVirtualized;var a=n.a.createElement("span",{className:"p-channel_sidebar__name"},ph.t("Upgrade"));var r=t?-1:void 0;var i=t?"presentation":void 0;return n.a.createElement(Kr["a"],{className:"p-channel_sidebar__link p-channel_sidebar__link--upgrade-slack","data-qa":"upgrade-slack-cta",onClick:this.onClick,href:Object(dh["j"])({entryPoint:"channel_sidebar_upgrade_cta"}),tabIndex:r,role:i},a)}}]);return t}(r["PureComponent"]);hh.displayName="UpgradeSlackCTA";hh.defaultProps=mh;function vh(e){return{clogger:Object(Va["a"])({state:e}),featureSidebarVirtualized:Object(Ba["isFeatureEnabled"])(e,"feature_sidebar_virtualized")}}var fh=Object(i["connect"])(vh)(hh);var bh=new dr["b"]("channel_sidebar");var gh=function e(t){return n.a.createElement(rh,ho()({},t,{label:bh.t("Starred"),qaLabel:"starred",defaultSectionName:yr["o"]}))};gh.displayName="StarredHeading";var _h=Object(Bp["pure"])(gh);var yh=a(150);var Oh=a(892);var kh=new dr["b"]("channel_sidebar");var Eh={openChannelCreateModal:m["noop"],featureOfflineMode:false,wasRecentlyOnline:false,canUserCreateChannels:false,openDmBrowserModal:m["noop"],clogger:null,isIAP1Enabled:false,openChannelBrowser:m["noop"],openAppLauncherView:m["noop"],clogAppLauncherOpen:m["noop"]};var Ch=function(e){gn()(t,e);function t(e){var a;ln()(this,t);a=pn()(this,hn()(t).call(this,e));a.onCreateChannelClick=a.onCreateChannelClick.bind(fn()(a));a.onDMBrowserModalClick=a.onDMBrowserModalClick.bind(fn()(a));a.onAppLauncherClick=a.onAppLauncherClick.bind(fn()(a));return a}un()(t,[{key:"onCreateChannelClick",value:function e(){this.props.openChannelCreateModal({entryPoint:"channel_sidebar"});this.props.clogger.track("SIDEBAR_PLUS_CLICK",{is_iap1:this.props.isIAP1Enabled,label:"channels"})}},{key:"onDMBrowserModalClick",value:function e(){this.props.openDmBrowserModal();this.props.clogger.track("SIDEBAR_PLUS_CLICK",{is_iap1:this.props.isIAP1Enabled,label:"ims"})}},{key:"onAppLauncherClick",value:function e(){this.props.openAppLauncherView();this.props.clogAppLauncherOpen({eventId:"APP_LAUNCHER_OPEN_FROM_PLUS_BUTTON"});this.props.clogger.track("SIDEBAR_PLUS_CLICK",{is_iap1:this.props.isIAP1Enabled,label:"apps"})}},{key:"render",value:function e(){var t=this.props,a=t.channelSection,r=t.featureOfflineMode,i=t.wasRecentlyOnline,s=t.canUserCreateChannels,o=t.isIAP1Enabled;var l=false;var c;var u;var d=m["noop"];var p=o;var h=a.type===yr["g"]?"custom-"+a.id:a.type;if(a.type===yr["b"]){l=!!o||s;var v=s?"Add channels":"Browse channels";var f=o?v:kh.t("Create a channel");u=f;c=f;var b=s?m["noop"]:this.props.openChannelBrowser;d=o?b:this.onCreateChannelClick;r&&!i&&(c=n.a.createElement(Oh["a"],{tooltipLabel:f}))}if(a.type===yr["c"]){var g=Object(Po["isMac"])()?n.a.createElement(n.a.Fragment,null,n.a.createElement(ml["a"],{mainKey:"K",modifiers:["\u2318","\u21e7"]})):n.a.createElement(n.a.Fragment,null,n.a.createElement(ml["a"],{mainKey:"K",modifiers:["Shift","K"]}));l=true;c=o&&p?kh.rt("Open a direct message<br></br>{dmBrowserShortcut}",{dmBrowserShortcut:g}):kh.t("Open a direct message");u=kh.t("Open a direct message");d=this.onDMBrowserModalClick}if(a.type===yr["e"]){l=o;c=kh.t("Browse apps");u=kh.t("Browse apps");d=this.onAppLauncherClick}return n.a.createElement(nh,ho()({},this.props,{showPlus:l,plusAriaLabel:u,plusTooltip:c,onPlusClick:d,labelPrefix:a.emoji&&n.a.createElement(jn["b"],{text:a.emoji,stopAnimations:true,obeyEmojiMode:false,emojiSize:jn["a"].SMALL,forceDisplay:true,isEmojiInlineWithText:true}),label:a.name,qaLabel:h,channelSectionId:a.id}))}}]);return t}(r["PureComponent"]);Ch.displayName="ChannelSectionHeading";Ch.defaultProps=Eh;var Sh=function e(t){return{featureOfflineMode:Object(Ba["isFeatureEnabled"])(t,"feature_offline_mode"),wasRecentlyOnline:Object(yh["h"])(t),canUserCreateChannels:Object(Ki["G"])(t)||Object(Ki["F"])(t),clogger:Object(Va["a"])({state:t}),isIAP1Enabled:Object(hr["e"])(t)}};var wh={openChannelCreateModal:bm["a"],openDmBrowserModal:gm["a"],openChannelBrowser:gp["a"],openAppLauncherView:Qp["a"],clogAppLauncherOpen:Kp["c"]};var jh=Object(i["connect"])(Sh,wh)(Ch);var Ih=a(1956);var Th=new dr["b"]("channel_sidebar");var Ah={canOpenChannelBrowser:true,showPlusButton:false,openSharedChannelCreationModal:m["noop"],openChannelCreateModal:m["noop"],canUserRequestSharedChannel:false,openDmBrowserModal:m["noop"],clogger:{}};var Nh=function e(t){var a=t.canOpenChannelBrowser,r=t.showPlusButton;var i;a&&(i=Th.t("Browse all shared channels"));var s=a?function(){return t.openChannelBrowser({initialFilter:"shared",initialBrowsePageFilter:{filter:"channelType",value:"shared"}})}:m["noop"];var o=t.openSharedChannelCreationModal.bind(null,{entryPoint:"shared_channel_sidebar"});var l=function e(){return o.apply(void 0,arguments)};return n.a.createElement(rh,ho()({},t,{onLabelClick:s,tooltip:i,headerAriaLabel:Th.t("Browse all shared channels"),tooltipArrowOffset:50,label:Th.t("Shared Channels"),qaLabel:"shared_channels",showPlus:r,plusTooltip:Th.t("Create a shared channel"),onPlusClick:l,defaultSectionName:yr["n"]}))};Nh.displayName="SharedChannelsHeading";Nh.defaultProps=Ah;var Ph=function e(t){return{canOpenChannelBrowser:!Object(Da["isUltraRestricted"])(Object(Ua["b"])(t)),featureSonicEscCreation:Object(Ba["isFeatureEnabled"])(t,"feature_sonic_esc_creation"),showPlusButton:Rh(t),canUserRequestSharedChannel:Object(Ki["R"])(t)}};var Mh={openSharedChannelCreationModal:function e(){return Ih["a"].apply(void 0,arguments)},openChannelBrowser:function e(){return gp["a"].apply(void 0,arguments)},openDmBrowserModal:function e(){return gm["a"].apply(void 0,arguments)},openChannelCreateModal:function e(){return bm["a"].apply(void 0,arguments)}};var Dh=Object(Bp["pure"])(Nh);var xh=Object(i["connect"])(Ph,Mh)(Dh);function Rh(e){if(!Object(Ki["G"])(e)&&!Object(Ki["F"])(e))return false;return Object(Ki["R"])(e)}var Fh=new dr["b"]("coachmarks");var Lh={currentMember:m["noop"],currentMemberIsAdmin:false,firstListedChannel:null,inSinglePublicChannel:false,inSinglePrivateChannel:false,anchorElement:null};var Uh=function(e){gn()(t,e);function t(e){var a;ln()(this,t);a=pn()(this,hn()(t).call(this,e));a.onClose=a.onClose.bind(fn()(a));a.renderCoachmarkContent=a.renderCoachmarkContent.bind(fn()(a));return a}un()(t,[{key:"onClose",value:function e(t){t.preventDefault();this.props.setAboutChannelsCoachmarkIsVisible(false)}},{key:"renderCoachmarkContent",value:function e(){var t=this.props,a=t.currentMember,r=t.currentMemberIsAdmin,i=t.inSinglePublicChannel,s=t.inSinglePrivateChannel,o=t.firstListedChannel;var l="";l=r?Fh.t("Channels bring order and searchability to your team\u2019s conversations. Organize by topic (#research), working group (#sales), or specific project (#sales-tv-ad)."):Object(Da["isRestricted"])(a)?i?Fh.rt("Channels organize your team\u2019s conversations by topic or working group. As a guest, you can send messages and browse archives in one channel, {channelName}.",{channelName:n.a.createElement("strong",null,o),fallbackHash:"714a97c13fc44eebbf3c57a94f5e275f6c6da22f",fallbackHashNs:"coachmarks"}):s?Fh.rt("Channels organize your team\u2019s conversations by topic or working group. As a guest, you can access one channel, {channelName}. This is a private, invitation-only channel.",{channelName:n.a.createElement("strong",null,o),fallbackHash:"6b2988717e064c5abfcad7bc9ba9187458753ac3",fallbackHashNs:"coachmarks"}):Fh.t("Channels organize your team\u2019s conversations by topic or working group. As a guest, you can send messages and browse archives in the channels listed here."):Fh.t("Channels bring order and searchability to your team\u2019s conversations. They\u2019re organized by topic (#research), working group (#sales), or specific project (#sales-tv-ad).");return l}},{key:"render",value:function e(){var t=this.props.anchorElement;return n.a.createElement(hm["a"],{anchorElement:t,orientation:"right",onClickPrimaryButton:this.onClose,closeCoachmark:this.onClose,primaryCallToActionText:Fh.t("Got it!"),isOpen:true},n.a.createElement("h3",{className:"margin_bottom_50"},Fh.t("Messaging happens in channels")),n.a.createElement("p",null,this.renderCoachmarkContent()))}}]);return t}(r["Component"]);Uh.displayName="ChannelHeadingCoachmark";Uh.defaultProps=Lh;var Bh=function e(t){var a=Object(Pa["v"])(t);var r=a.filter(Ma["isPrivateChannel"]);var n=a.filter(Ma["isPublicChannel"]);var i=Object(Ua["b"])(t);return{currentMember:i,currentMemberIsAdmin:Object(Da["isAdmin"])(t,i),inSinglePrivateChannel:1===a.length&&1===r.length,inSinglePublicChannel:1===a.length&&1===n.length,firstListedChannel:a.length?a[0].name:""}};var qh={setAboutChannelsCoachmarkIsVisible:function e(){return ja["setAboutChannelsCoachmarkIsVisible"].apply(void 0,arguments)}};var Gh=Object(i["connect"])(Bh,qh)(Uh);var Hh=new dr["b"]("channel_sidebar");var Wh={showPlus:true,canOpenChannelBrowser:true};var Vh=function e(t){var a=t.featureOfflineMode,r=t.showPlus,i=t.canOpenChannelBrowser,s=t.wasRecentlyOnline,o=t.aboutChannelsCoachmarkIsVisible,l=t.iAPhase1Enabled;var c=Hh.t("Create a channel");a&&!s&&(c=n.a.createElement(Oh["a"],{tooltipLabel:Hh.t("Create a channel")}));var u;var d;if(i&&!l){u=t.openChannelBrowser;d=Hh.t("Browse all channels")}var p=n.a.createElement(rh,ho()({},t,{onLabelClick:u,label:Hh.t("Channels"),qaLabel:"channels",tooltip:d,headerAriaLabel:Hh.t("Browse all channels"),tooltipArrowOffset:30,showPlus:r,plusTooltip:c,plusAriaLabel:Hh.t("Create a channel"),defaultSectionName:yr["j"]}));if(o)return n.a.createElement(vm["a"],{orientation:"right",coachmarkElement:n.a.createElement(Gh,null)},p);return p};Vh.defaultProps=Wh;var Kh=function e(t){return{showPlus:Object(Ki["G"])(t)||Object(Ki["F"])(t),canOpenChannelBrowser:!Object(Da["isUltraRestricted"])(Object(Ua["b"])(t)),featureOfflineMode:Object(Ba["isFeatureEnabled"])(t,"feature_offline_mode"),wasRecentlyOnline:Object(yh["h"])(t),aboutChannelsCoachmarkIsVisible:Object(ja["getAboutChannelsCoachmarkIsVisible"])(t),iAPhase1Enabled:Object(hr["e"])(t)}};var zh={openChannelBrowser:function e(){return gp["a"].apply(void 0,arguments)}};var Qh=Object(i["connect"])(Kh,zh)(Vh);var Yh={name:"",setIsRenaming:h.a.noop,saveFolderData:h.a.noop,renameFolder:h.a.noop,toggleFolderCollapse:h.a.noop,setFolderCollapse:h.a.noop,badgeCount:0,hasUnreads:false,isCollapsed:false,isRenaming:false,onDragStart:h.a.noop,onDragEnd:h.a.noop,onDrop:h.a.noop,onDragOver:h.a.noop,featureSidebarVirtualized:false};var Jh=function(e){gn()(t,e);function t(e){var a;ln()(this,t);a=pn()(this,hn()(t).call(this,e));a.toggleFolderCollapse=a.toggleFolderCollapse.bind(fn()(a));a.renameFolder=a.renameFolder.bind(fn()(a));a.showRenameBox=a.showRenameBox.bind(fn()(a));a.setRenamingLabel=a.setRenamingLabel.bind(fn()(a));a.setInputRef=a.setInputRef.bind(fn()(a));a.onBlur=a.onBlur.bind(fn()(a));a.state={renamingLabel:a.props.name,hasTyped:false};return a}un()(t,[{key:"onBlur",value:function e(t){if(this.props.isRenaming){var a=this.props.name;var r=t.target.value;this.props.renameFolder({oldName:a,newName:r});this.props.saveFolderData()}}},{key:"setInputRef",value:function e(t){if(t&&!this.state.hasTyped){t.select();t.focus()}}},{key:"setRenamingLabel",value:function e(t){var a=t.target.value;this.setState(function(){return{renamingLabel:a,hasTyped:true}})}},{key:"renameFolder",value:function e(t){var a=this.props.name;var r;"Enter"===t.key&&(r=t.target.value);"Escape"===t.key&&(r=this.props.name);if(void 0!==r){this.props.renameFolder({oldName:a,newName:r});this.props.saveFolderData()}}},{key:"showRenameBox",value:function e(){var t=this.props.name;this.props.setIsRenaming({name:t});this.setState(function(){return{renamingLabel:t,hasTyped:false}})}},{key:"toggleFolderCollapse",value:function e(t){t.altKey?this.props.setFolderCollapse({isCollapsed:!this.props.isCollapsed}):this.props.toggleFolderCollapse({name:this.props.name});this.props.saveFolderData()}},{key:"render",value:function e(){var t=this.props.featureSidebarVirtualized;var a=this.props.isRenaming?"":n.a.createElement(Ao["c"],{"aria-hidden":!!t||void 0,tabIndex:t?-1:void 0,className:fo()("p-channel_sidebar__folder_heading_icon",{"p-channel_sidebar__folder_heading_icon_collapsed":this.props.isCollapsed}),onClick:this.toggleFolderCollapse});var r="";var i;i=this.props.isRenaming?n.a.createElement("input",{type:"text",className:"p-channel_sidebar__folder_heading_label_rename",value:this.state.renamingLabel,onChange:this.setRenamingLabel,onKeyDown:this.renameFolder,ref:this.setInputRef,onBlur:this.onBlur}):h.a.includes(this.props.name,"<")?n.a.createElement(Ao["c"],{className:fo()("p-channel_sidebar__folder_heading_label",{"p-channel_sidebar__folder_heading_label--unread":this.props.hasUnreads&&this.props.isCollapsed},{"p-channel_sidebar__section_heading_label--unreads":this.props.hasUnreads&&this.props.isCollapsed}),onClick:this.toggleFolderCollapse,onDoubleClick:this.showRenameBox,"aria-label":t?r:void 0,tabIndex:t?-1:void 0},this.props.name):n.a.createElement(Ao["c"],{className:fo()("p-channel_sidebar__folder_heading_label",{"p-channel_sidebar__folder_heading_label--unread":this.props.hasUnreads&&this.props.isCollapsed},{"p-channel_sidebar__section_heading_label--unreads":this.props.hasUnreads&&this.props.isCollapsed}),onClick:this.toggleFolderCollapse,onDoubleClick:this.showRenameBox,"aria-label":t?r:void 0,tabIndex:t?-1:void 0},n.a.createElement(rd["a"],{text:this.props.name,noJumbomoji:true,noHighlights:true}));var s=this.props.isCollapsed?n.a.createElement(Ao["c"],{className:"p-channel_sidebar__folder_heading_badge",onClick:this.toggleFolderCollapse,"aria-hidden":!!t||void 0,tabIndex:t?-1:void 0},n.a.createElement(Zu["b"],{count:this.props.badgeCount,className:"p-channel_sidebar__badge"})):"";return n.a.createElement("div",{className:"p-channel_sidebar__folder_heading","data-qa-channel-sidebar-section-heading":"folder",draggable:true,"data-drag-type":"folder","data-drag-id":this.props.name,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragOver:this.props.onDragOver},i,s,a)}}]);return t}(n.a.PureComponent);Jh.displayName="FolderHeading";Jh.defaultProps=Yh;var Xh=function e(t,a){var r=a.name;var n=Object(Ia["getFolderByName"])(t,r);var i=n?h.a.map(n.channelIds,function(e){return Object(Pa["e"])(t,e)}):[];var s=!!n&&n.isCollapsed;var o=!!n&&n.isRenaming;var l=i.length>0?h.a.sum(h.a.map(i,function(e){return Object(Pa["d"])(t,e)})):0;var c=i.length>0&&!!h.a.find(i,function(e){return Object(Ma["isUnread"])(e)&&!Object(xa["isChannelMutedById"])(t,e.id)});return{isCollapsed:s,isRenaming:o,hasUnreads:c,badgeCount:l,featureSidebarVirtualized:Object(Ba["isFeatureEnabled"])(t,"feature_sidebar_virtualized")}};var Zh={toggleFolderCollapse:Ia["toggleFolderCollapse"],setFolderCollapse:Ia["setFolderCollapse"],saveFolderData:Ia["saveFolderData"],renameFolder:Ia["renameFolder"],setIsRenaming:Ia["setIsRenaming"]};var $h=Object(i["connect"])(Xh,Zh)(Jh);var ev=new dr["b"]("channel_sidebar");var tv=function e(t){return n.a.createElement(rh,ho()({},t,{tooltipClassName:"p-channel_sidebar__section_heading_tip--short",label:ev.t("Organization Channels"),qaLabel:"org_wide_channels",tooltip:ev.t("Shared with all workspaces at {orgName}",{orgName:t.orgName}),tooltipArrowOffset:50,defaultSectionName:yr["m"]}))};tv.displayName="OrgWideChannelsHeading";var av=Object(Bp["pure"])(tv);var rv=function e(t){var a=Object(Qn["g"])(t);return{orgName:a}};var nv=Object(i["connect"])(rv)(av);var iv=new dr["b"]("channel_sidebar");var sv=function e(t){return n.a.createElement(rh,ho()({},t,{label:t.label,qaLabel:"ims",tooltip:t.isIAP1Enabled?void 0:iv.t("Open a direct message"),headerAriaLabel:t.isIAP1Enabled?void 0:iv.t("Open a direct message"),tooltipArrowOffset:50,showPlus:true,plusTooltip:iv.t("Open a direct message"),plusAriaLabel:iv.t("Open a direct message"),onLabelClick:t.isIAP1Enabled?void 0:t.openDmBrowserModal,onPlusClick:t.openDmBrowserModal,defaultSectionName:yr["l"]}))};sv.displayName="DirectMessagesHeading";sv.defaultProps={openDmBrowserModal:m["noop"]};var ov=function e(t){var a=Object(hr["e"])(t);var r=a;var n=r?iv.t("Direct messages"):iv.t("Direct Messages");return{label:n,isIAP1Enabled:a}};var lv={openDmBrowserModal:function e(){return Object(gm["a"])()}};var cv=Object(i["connect"])(ov,lv)(sv);var uv=new dr["b"]("channel_sidebar");var dv=function e(t){var a=uv.t("Browse Apps");var r=t.openAppsBrowserModal;var i=t.featureAppLauncher?uv.t("Recent Apps"):uv.t("Apps");t.iAPhase1Enabled&&(i="Recent apps");return n.a.createElement(rh,ho()({},t,{onLabelClick:t.featureAppLauncher?m["noop"]:r,onPlusClick:t.featureAppLauncher?m["noop"]:r,label:i,qaLabel:"apps",tooltip:t.featureAppLauncher?"":a,headerAriaLabel:uv.t("Browse apps"),tooltipArrowOffset:16,showPlus:t.showPlus,plusTooltip:t.featureAppLauncher?"":a,plusAriaLabel:uv.t("Browse apps"),defaultSectionName:yr["i"]}))};dv.displayName="AppsHeading";dv.defaultProps={featureAppLauncher:false,iAPhase1Enabled:false};var pv=dv;var mv=function e(t){var a=Object(sr["a"])(t);return{featureAppLauncher:a,showPlus:!Object(hr["e"])(t)&&!a,iAPhase1Enabled:Object(hr["e"])(t)}};var hv=function e(t){return Object(X["bindActionCreators"])({openAppsBrowserModal:zp["a"]},t)};var vv=Object(i["connect"])(mv,hv)(dv);var fv=a(1445);var bv=function(e){gn()(t,e);function t(){var e;var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=a.getHeight,n=a.keys,i=void 0===n?[]:n;ln()(this,t);e=pn()(this,hn()(t).call(this,{keys:i}));e.getHeight=r;e.layout();return e}un()(t,[{key:"getHeightValidity",value:function e(){return true}},{key:"setHeight",value:function e(){return}}]);return t}(fv["a"]);function gv(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function _v(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?gv(Object(a),true).forEach(function(t){p()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):gv(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var yv={},Ov=yv.getLastTeamSwitchTimestamp;var kv={},Ev=kv.getFocusedWorkspace;var Cv=Dl()("enter");var Sv=Dl()("delete");var wv=Dl()("backspace");var jv=new dr["b"]("channel_sidebar");var Iv={onItemSelect:h.a.noop,onInviteClick:h.a.noop,onCreateChannelClick:h.a.noop,onCreateSharedChannelClick:h.a.noop,onResize:h.a.noop,onScroll:h.a.noop,sidebarFoldersIsEnabled:false,onDragStart:h.a.noop,onDragEnd:h.a.noop,onDrop:h.a.noop,onDragOver:h.a.noop,onCreateFolder:h.a.noop,shouldTrackTTFMP:true,logger:null,clogger:null,bootType:null,setHideInviteButton:h.a.noop,setHideAddChannelButton:h.a.noop,teamId:null,featureSeeMoreChannels:false,removeFromSectionNavigation:h.a.noop,addToSectionNavigation:h.a.noop,userAttentionIsOnChat:false,composerVisible:false,featureSidebarVirtualized:false,selectedItemId:void 0,closeIM:h.a.noop,getAriaLabelForRow:h.a.noop,shouldUseChannelSections:false,isScreenReaderEnabled:false,hasKeyboardFocus:false,deleteComposerDraft:h.a.noop,deleteChannelDraft:h.a.noop,bannerHeight:void 0,isTopBannerVisible:false,isBottomBannerVisible:false,keyboardLocale:void 0,isIAPhase1Enabled:false,shouldOpenActivityAsPage:true,setActivityFocus:h.a.noop,openActivityFlexpane:h.a.noop,showSidebarThrobber:false};var Tv=function(e){gn()(t,e);function t(e){var a;ln()(this,t);a=pn()(this,hn()(t).call(this,e));Object(Nl["a"])(fn()(a),["setScrollbarRef","getCurrentScrollTop","resetCurrentScrollTopMaybe","onResize","onScroll","onListFocusEnter","onInviteClick","onInviteCloseClick","onAddChannelCloseClick","onItemKeyDown","renderRow","renderRowWithWrapper","isRowFocusable","getAriaAttributesForRow","onActivityItemSelect","onItemSelected","scrollToTopOfChannelList","focus","getPropsForItem"]);a.currentScrollTop=0;a.height=0;a.keyboardNavigableListRef=n.a.createRef();var r=function e(t){return a.rowHeightByKey[t]};a.layout=new bv({getHeight:r});var i=Object(Jl["b"])({keyboardLocale:a.props.keyboardLocale});a.keyboardShortcuts=Object.keys(i).reduce(function(e,t){e[t]=i[t].keys.map(function(e){return e.replace("key_","")}).join(" ");return e},{});return a}un()(t,[{key:"componentDidMount",value:function e(){var t=this;if(!h.a.get(window,"performance.timing.fetchStart"))return;var a=this.props.shouldTrackTTFMP;if(a&&Object(Xa["a"])()){var r=Object(o["e"])();a=Object(Fl["shouldLogAppBootMetrics"])(r);a&&Object(o["a"])(Object(Fl["setShouldLogAppBootMetrics"])(false))}var n=Promise.resolve();Object(Po["isSSB"])()&&Object(Ll["legacyHasDeviceStorage"])()&&(n=Object(Ll["getItem"])("shouldLogFirstMeaningfulPaint").then(function(e){"false"===e&&(a=false)}));(Po["isDev"]||Po["isQa"]||Po["isJsPath"])&&(a=false);var i=Object(Ul["d"])();var s=Object(Po["isReload"])()?"_reload":"";var l=Date.now()-(window.performance.timing.fetchStart+i);var c=Object(Xa["a"])()?"ttfmp_sonic_"+this.props.bootType+s:"ttfmp_legacy"+s;n.then(function(){if(a){t.shouldLogFirstMeaningfulPaint=false;Object(Po["isSSB"])()&&Object(Ll["legacyHasDeviceStorage"])()&&Object(Ll["setItem"])("shouldLogFirstMeaningfulPaint","false");t.props.logger.info("PERF","First meaningful paint: "+l+"ms");window.performance.timing.fetchStart>0&&t.props.telemeter.store(c,l)}});this.clogInvitePeopleButton()}},{key:"componentDidUpdate",value:function e(t){if(Object(Xa["a"])()){var a=Object(o["e"])();var r=Ev(a);if(Object(Fl["shouldLogTeamSwitchMetrics"])(a)&&r===this.props.teamId){var n=Ov();var i=Date.now()-n;this.props.telemeter.store("team_switch_sonic",i);Object(o["a"])(Object(Fl["setShouldLogTeamSwitchMetrics"])(false))}}var s={prevUserAttentionIsOnChat:t.userAttentionIsOnChat,prevComposerVisible:t.composerVisible,currentUserAttentionIsOnChat:this.props.userAttentionIsOnChat,currentComposerVisible:this.props.composerVisible};Object(Gl["a"])(s)&&this.props.addToSectionNavigation();Object(Hl["a"])(s)&&this.props.removeFromSectionNavigation();if(this.restoreFocusOnUpdate){this.focus();this.restoreFocusOnUpdate=false}this.props.showSidebarThrobber&&!t.showSidebarThrobber&&this.jumpToOffset(0)}},{key:"onAddChannelCloseClick",value:function e(){this.props.setHideAddChannelButton()}},{key:"onDeleteKeyPressed",value:function e(t){this.restoreFocusOnUpdate=true;var a=this.props,r=a.rows,n=a.closeIM,i=a.deleteComposerDraft,s=a.deleteChannelDraft;var o=t.id;var l=h.a.indexOf(this.rowKeys,o);var c=r[l];if(!c)return;var u=c.id,d=c.params,p=void 0===d?{}:d;var m=p.channelId,v=p.threadTs;var f=c.type;if("composer_draft"===f){i(u);return}if("channel_draft"===f){s(m,v);return}"channel"===f&&n(u)}},{key:"onEnterKeyPressed",value:function e(t){var a=t.currentTarget.querySelector("a,button");if(!a)return;a.click()}},{key:"onLeftKeyPressed",value:function e(t){var a;var r=this.props.rows;var n=r.find(function(e){return e.key===t.id});var i=null===(a=this.keyboardNavigableListRef)||void 0===a?void 0:a.current;if(!n||!i)return;if("sectionHeading"===n.type&&n["aria-expanded"]){var s;var o=null===(s=n.channelSection)||void 0===s?void 0:s.id;this.props.setSectionCollapsed({channelSectionId:o,isCollapsed:true})}if("channel"===n.type){var l;var c=null===(l=n.channelSection)||void 0===l?void 0:l.id;var u=r.find(function(e){return e.key==="sectionHeading-custom-"+c});if(void 0===u)return;i.focusOnKey(u.key)}}},{key:"onRightKeyPressed",value:function e(t){var a;var r=this.props.rows;var n=r.find(function(e){return e.key===t.id});var i=null===(a=this.keyboardNavigableListRef)||void 0===a?void 0:a.current;if(!n||!i)return;if("sectionHeading"===n.type){var s=r.find(function(e){return e.key===n.channelIds[0]});if(!n["aria-expanded"]){var o;var l=null===(o=n.channelSection)||void 0===o?void 0:o.id;this.props.setSectionCollapsed({channelSectionId:l,isCollapsed:false})}n["aria-expanded"]&&s&&i.focusOnKey(s.key)}}},{key:"onShiftKeyAndPageDirectionPressed",value:function e(t){var a;var r=this.props.rows;var n=r.find(function(e){return e.key===t.id});var i=t.keyCode;var s=null===(a=this.keyboardNavigableListRef)||void 0===a?void 0:a.current;if(!n||!s)return;var o=r.filter(function(e){return e.channelSection&&"sectionHeading"===e.type});var l;var c;if("sectionHeading"===n.type){c=o.indexOf(n);switch(i){case Xl["j"]:l=o[c-1];break;case Xl["i"]:l=o[c+1];break;default:l=void 0}}if("channel"===n.type){var u;var d=null===(u=n.channelSection)||void 0===u?void 0:u.id;var p=r.find(function(e){return e.key==="sectionHeading-custom-"+d});if(void 0===p)return;c=o.indexOf(p);switch(i){case Xl["j"]:l=p;break;case Xl["i"]:l=o[c+1];break;default:l=void 0}}if(void 0===l)return;s.focusOnKey(l.key)}},{key:"onInviteClick",value:function e(t,a){this.props.onInviteClick(a)}},{key:"onInviteCloseClick",value:function e(){this.props.setHideInviteButton()}},{key:"onItemKeyDown",value:function e(t){var a=t.keyCode;var r=this.props,n=r.isIAPhase1Enabled,i=r.featureSidebarVirtualized;if(a===Cv){this.onEnterKeyPressed(t);return}(a===Sv||Object(Po["isMac"])()&&a===wv)&&this.onDeleteKeyPressed(t);if(n&&i){!t.shiftKey||a!==Xl["j"]&&a!==Xl["i"]||this.onShiftKeyAndPageDirectionPressed(t);a===Xl["k"]&&this.onRightKeyPressed(t);a===Xl["h"]&&this.onLeftKeyPressed(t)}}},{key:"onActivityItemSelect",value:function e(t,a){var r=this.props,n=r.isIAPhase1Enabled,i=r.shouldOpenActivityAsPage,s=r.onItemSelect,o=r.setActivityFocus,l=r.openActivityFlexpane;var c="keydown"===(null===a||void 0===a?void 0:a.type)||!(null===a||void 0===a?void 0:a.detail);var u=n&&!i;o({shouldFocus:c,isDocked:u});return u?l():s(t,a)}},{key:"onItemSelected",value:function e(t){this.selectedItemRef=t}},{key:"onListFocusEnter",value:function e(){var t=this.props,a=t.selectedItemId,r=t.bannerHeight,n=t.isTopBannerVisible,i=t.isBottomBannerVisible,s=t.hasKeyboardFocus;var o=this.keyboardNavigableListRef.current;var l=o.getActiveItem();if(!s)return;l!==a&&o.focusOnKey(a);var c=n||i;if(!c)return;this.ensureItemInView(a,r+10)}},{key:"onResize",value:function e(t){var a=t.height;this.resetCurrentScrollTopMaybe(a);this.height=a;this.props.onResize({height:a})}},{key:"onScroll",value:function e(t,a){var r=a.scrollTop;this.currentScrollTop=r;this.props.onScroll&&this.props.onScroll(r)}},{key:"getAriaAttributesForRow",value:function e(t){var a=this.props.shouldUseChannelSections&&!(Object(Po["isMac"])()&&Object(Po["isChrome"])());var r=a||"treeitem"!==t.role?t.role:"listitem";if("sectionHeading"===t.type)return{role:r,"aria-expanded":a?t["aria-expanded"]:void 0,"aria-level":t["aria-level"],"aria-label":t["aria-label"],"aria-describedby":t.key+"-description"};if("folderHeading"===t.type)return{role:r,"aria-level":t["aria-level"],"aria-expanded":a?t["aria-expanded"]:void 0,"aria-label":t.name};if("sectionHeadingAriaGroup"===t.type)return{role:r,"aria-owns":t["aria-owns"],"aria-label":t["aria-label"]};return{role:r,"aria-level":t["aria-level"]}}},{key:"getAriaDescriptionSectionHeaderRow",value:function e(t){var a=this.props.featureSidebarVirtualized;if(!a)return;if("channels"===t)return jv.t("Press {keys} to find or create a channel",{keys:this.keyboardShortcuts.browse_channels,note:'Contextual instructions visible only for customers using screen readers. Applied to the "Channels" button in the Channel List. "keys" is a space-delimited list of keys for the keyboard shortcut.'});if("drafts"===t)return jv.t("Press delete to delete a draft",{note:'Contextual instructions visible only for customers using screen readers. Applied to the "Drafts" header in the Channel List. "keys" is a space-delimited list of keys for the keyboard shortcut.'});if("app"===t)return jv.t("Press delete to remove messages from an app from the sidebar",{note:'Contextual instructions visible only for customers using screen readers. Applied to the "Apps" header in the Channel List. "keys" is a space-delimited list of keys for the keyboard shortcut.'});if("ims"===t)return jv.t("Press {keys} to find or create a direct message. Press delete to remove a direct message from the sidebar",{keys:this.keyboardShortcuts.browse_dms,note:'Contextual instructions visible only for customers using screen readers. Applied to the "Direct Messages" header in the Channel List. "keys" is a space-delimited list of keys for the keyboard shortcut.',fallbackHash:"ecef6e86976ffd3db7281a50c55bad652a3f3438"})}},{key:"getAriaLabelForRow",value:function e(t){var a=this.props,r=a.isScreenReaderEnabled,n=a.hasKeyboardFocus;return t&&"channel"===t.type&&(n||r)?this.props.getAriaLabelForRow(t.id):void 0}},{key:"getBoundingClientRect",value:function e(){var t;if(this.props.featureSidebarVirtualized){var a;return null===(a=this.keyboardNavigableListRef.current)||void 0===a?void 0:a.getBoundingClientRect()}return null===(t=this.Scrollbar)||void 0===t?void 0:t.getBoundingClientRect()}},{key:"getContentHeight",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.rows;return t.length?t[t.length-1].scrollBottom:0}},{key:"getCurrentScrollTop",value:function e(){return this.currentScrollTop}},{key:"getPropsForItem",value:function e(t){var a=t.key,r=t.index;var n=this.props,i=n.rows,s=n.selectedItemId;var o=i[r];if(!o)return;var l={className:"p-channel_sidebar__static_list__item",tabIndex:-1};if("presentation"===o.role)return _v({},l,{role:o.role});var c=this.getAriaAttributesForRow(o);if("group"===c.role)return _v({},l,{},c);var u=s===a;var d=u?0:-1;return _v({},l,{},c,{tabIndex:d,"aria-label":o["aria-label"]||this.getAriaLabelForRow(o),"aria-selected":u,"aria-setsize":o["aria-setsize"],"aria-posinset":o["aria-posinset"]})}},{key:"setScrollbarRef",value:function e(t){this.Scrollbar=t&&t.getWrappedInstance?t.getWrappedInstance():t}},{key:"clogInvitePeopleButton",value:function e(){var t=this.props.clogger;t.track("SIDEBAR_INVITE_PEOPLE",{contexts:{ui_context:{step:"invite_people",action:"impression",ui_properties:{element_type:"button",element_name:"invite_people"}}}});t.track("INAPP_INVITES",{contexts:{ui_context:{step:"invite_people",action:"impression",ui_properties:{element_type:"button",element_name:"invite_people"}}}});t.track("SIDEBAR_INVITE_PEOPLE",{contexts:{ui_context:{step:"invite_people",action:"impression",ui_properties:{element_type:"button",element_name:"hide_invite_people"}}}});t.track("INAPP_INVITES",{contexts:{ui_context:{step:"invite_people",action:"impression",ui_properties:{element_type:"button",element_name:"hide_invite_people"}}}})}},{key:"ensureItemInView",value:function e(t,a){var r=this.keyboardNavigableListRef&&this.keyboardNavigableListRef.current;if(!r)return;if(r.isItemInView(t,a))return;var n=r.getContainerHeight();var i=this.layout.getTotalHeight();var s=this.layout.getOffsetForKey(t);var o=this.layout.getHeight(t);r.isItemAboveView(t,a)&&r.scrollToOffset(Math.max(0,s-a),{animate:true});r.isItemBelowView(t,a)&&r.scrollToOffset(Math.min(i,s-n+o+a),{animate:true})}},{key:"focus",value:function e(){var t=this.props,a=t.featureSidebarVirtualized,r=t.selectedItemId;if(a){this.keyboardNavigableListRef.current.focusOnKey(r);return}this.selectedItemRef&&this.selectedItemRef.focus()}},{key:"isItemAboveView",value:function e(t){var a=this.keyboardNavigableListRef&&this.keyboardNavigableListRef.current;if(!a)return false;return a.isItemAboveView(t)}},{key:"isItemBelowView",value:function e(t){var a=this.keyboardNavigableListRef&&this.keyboardNavigableListRef.current;if(!a)return false;return a.isItemBelowView(t)}},{key:"isItemInView",value:function e(t){var a=this.keyboardNavigableListRef&&this.keyboardNavigableListRef.current;if(!a)return false;return a.isItemInView(t)}},{key:"isRowFocusable",value:function e(t){var a=t.index;var r=this.props.rows[a];return"presentation"!==r.role&&"group"!==r.role}},{key:"jumpToOffset",value:function e(t){this.Scrollbar&&this.Scrollbar.scrollTop(t);this.keyboardNavigableListRef.current&&this.keyboardNavigableListRef.current.scrollToOffset(t)}},{key:"resetCurrentScrollTopMaybe",value:function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props.rows;t>this.getContentHeight(a)&&(this.currentScrollTop=0)}},{key:"scrollToTarget",value:function e(t){var a=this;var r=Math.max(0,Math.min(this.getContentHeight()-this.height,t));Object(xl["a"])({fromValue:this.currentScrollTop,toValue:r,duration:200,easing:"easeOutQuad",onTick:function e(t){var r=t.value,n=t.nextTick;a.jumpToOffset(r);n()}})}},{key:"scrollToTopOfChannelList",value:function e(){this.jumpToOffset(0)}},{key:"renderAppDmSuggestion",value:function e(t,a){return n.a.createElement(hc,{id:t,index:a})}},{key:"renderChannel",value:function e(t){var a=t.id,r=t.index,i=t.channelSection,s=t.channelSectionChannelIds;if(this.props.shouldUseChannelSections)return n.a.createElement(Md,{key:a,id:a,selectItem:this.props.onItemSelect,onItemSelected:this.onItemSelected,index:r,channelSection:i,channelSectionChannelIds:s});if(this.props.sidebarFoldersIsEnabled)return n.a.createElement(Pd,{key:a,id:a,selectItem:this.props.onItemSelect,onItemSelected:this.onItemSelected,index:r,sidebarFoldersIsEnabled:true,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragOver:this.props.onDragOver});var o=n.a.createElement(Pd,{key:a,id:a,selectItem:this.props.onItemSelect,onItemSelected:this.onItemSelected,index:r,channelSection:i});return o}},{key:"renderChannelDraft",value:function e(t){var a=t.id,r=t.params,i=void 0===r?{}:r;var s=i.draftId,o=i.channelId,l=i.threadTs;return n.a.createElement(Yd,{draftId:s,channelId:o,threadTs:l,key:a,onItemSelected:this.onItemSelected,selectItem:this.props.onItemSelect})}},{key:"renderComposerDraft",value:function e(t){var a=t.id;return n.a.createElement(qd,{id:a,key:a,onItemSelected:this.onItemSelected,selectItem:this.props.onItemSelect})}},{key:"renderDraftsHeading",value:function e(t){var a=t.channelIds;return n.a.createElement(uh,{selectItem:this.props.onItemSelect,scrollToTopOfChannelList:this.scrollToTopOfChannelList,channelIds:a})}},{key:"renderFolderHeading",value:function e(t){return n.a.createElement($h,{name:t,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragOver:this.props.onDragOver})}},{key:"renderRow",value:function e(t){var a=this.props,r=a.onItemSelect,i=a.featureSeeMoreChannels,s=a.featureSidebarVirtualized,o=a.rows,l=a.isIAPhase1Enabled;var c=o[t];if(!c)return null;switch(c.type){case"quickswitcherButton":return n.a.createElement(ol,null);case"allThreadsLink":return n.a.createElement(pp,{qaLabel:"all_thread_link",selectItem:this.props.onItemSelect,onItemSelected:this.onItemSelected});case"searchLink":return n.a.createElement(bp,{selectItem:r});case"activityLink":if(l)return n.a.createElement(Dp,{id:c.id,selectItem:this.onActivityItemSelect,onItemSelected:this.onItemSelected});return n.a.createElement(Up,{id:c.id,selectItem:r,onItemSelected:this.onItemSelected});case"pageLink":return n.a.createElement(Up,{id:c.id,selectItem:r,onItemSelected:this.onItemSelected});case"sectionHeading":return this.renderSectionHeading(c);case"sectionHeadingAriaGroup":return this.renderSectionHeadingAriaGroup(t);case"folderHeading":return this.renderFolderHeading(c.name);case"channel":return this.renderChannel(c);case"composer_draft":return this.renderComposerDraft(c);case"channel_draft":return this.renderChannelDraft(c);case"appDmSuggestion":return this.renderAppDmSuggestion(c.id,c.index);case"addAChannelLink":return n.a.createElement(Cp,{isDim:c.dim,qaLabel:"add_channel",label:i?jv.t("See more channels"):jv.t("Add a channel"),onClickClose:this.onAddChannelCloseClick});case"invitePeopleLink":return n.a.createElement(Hp,{selectItem:this.onInviteClick,dim:c.dim,qaLabel:"invite_people",label:jv.t("Invite people"),showClose:true,onClickClose:this.onInviteCloseClick,featureSidebarVirtualized:s});case"installAppsLink":return n.a.createElement(em,null);case"appSuggestionLinks":return n.a.createElement(mm,null);case"upgradeSlackCTA":return n.a.createElement(fh,null);case"spacer":return null;case"divider":return n.a.createElement("hr",{className:"p-channel_sidebar__divider"});case"topPadding":return null;case"emptyState":return null;default:Object(Ca["b"])().warn("Row type "+c.type+" not implemented",c)}return null}},{key:"renderRowWithWrapper",value:function e(t,a){var r=t.height,i=t.type,s=t.key;var o={quickswitcherButton:"listitem",allThreadsLink:"listitem",searchLink:"listitem",pageLink:"listitem",sectionHeading:"listitem",channel:"listitem",app:"listitem",addAChannelLink:"listitem",invitePeopleLink:"listitem",installAppsLink:"listitem",appSuggestionLinks:"listitem",upgradeSlackCTA:"listitem",spacer:"presentation",topPadding:"presentation",emptyState:"listitem"}[i];return n.a.createElement("div",{key:s,style:{height:r},role:o},this.renderRow(a))}},{key:"renderSectionHeading",value:function e(t){var a=t.name,r=t.priorDisplayedChannelSection,i=t.channelSection,s=t.channelIds;var o=this.props,l=o.shouldUseChannelSections,c=o.onCreateChannelClick,u=o.onCreateSharedChannelClick;if(l&&i){if("drafts"===a)return this.renderDraftsHeading(t);return n.a.createElement(jh,{channelSection:i,priorDisplayedChannelSectionId:r&&r.id,channelIds:s})}switch(a){case"drafts":return this.renderDraftsHeading(t);case"starred":if(!this.props.shouldUseChannelSections&&this.props.sidebarFoldersIsEnabled)return n.a.createElement(rh,{label:jv.t("Starred"),qaLabel:"starred",showPlus:true,onPlusClick:this.props.onCreateFolder,channelIds:s});return n.a.createElement(_h,{channelIds:s});case"sharedChannels":return n.a.createElement(xh,{onPlusClick:u,channelIds:s});case"channels":return n.a.createElement(Qh,{onPlusClick:c,channelIds:s});case"orgWideChannels":return n.a.createElement(nv,{channelIds:s});case"ims":return n.a.createElement(cv,{channelIds:s});case"apps":return n.a.createElement(vv,{channelIds:s});case"browse":return n.a.createElement(Yl,{label:"Browse",channelIds:s});default:return null}}},{key:"renderSectionHeadingAriaGroup",value:function e(t){var a=this.props.rows;var r=a[t-1];var i=r.name,s=r.key;var o=s+"-description";var l=this.getAriaDescriptionSectionHeaderRow(i)||" ";return n.a.createElement("div",{id:o,className:"p-channel_sidebar__group-description"},l)}},{key:"render",value:function e(){var t=this;var a=this.props,r=a.featureSidebarVirtualized,i=a.rows,s=a.shouldUseChannelSections;var o=i.map(function(e){return e.key});this.rowKeys=o;this.rowHeightByKey=i.reduce(function(e,t){e[t.key]=t.height;return e},{});var l=!s||Object(Po["isMac"])()&&Object(Po["isChrome"])()?"list":"tree";return n.a.createElement(Pl["a"],{onResize:this.onResize},function(e){var a=e.width,s=e.height;return r?n.a.createElement(ql["a"],{layout:t.layout,ref:t.keyboardNavigableListRef,width:a,height:s,className:"p-channel_sidebar__static_list",keys:o,rowRenderer:t.renderRow,"aria-label":jv.t("Channels and direct messages"),onScroll:t.onScroll,onItemKeyDown:t.onItemKeyDown,isFocusableItem:t.isRowFocusable,pageHeight:s-26,getPropsForItem:t.getPropsForItem,role:l,useStaticHeightForListItems:true,useFixedTrackHeightForScrollbar:true,onFocusEnter:t.onListFocusEnter}):n.a.createElement(Rl["a"],{width:a,height:s,contentHeight:t.getContentHeight(),onScroll:t.onScroll,ref:t.setScrollbarRef,serializationKey:"channel-list-scrollbar"},n.a.createElement("div",{className:"p-channel_sidebar__static_list","data-qa":"channel_sidebar_list","aria-label":jv.t("Channels and direct messages"),role:"list"},i.map(t.renderRowWithWrapper)))})}}]);return t}(n.a.PureComponent);Tv.displayName="ChannelList";Tv.defaultProps=Iv;var Av=Object(Xa["a"])()?Object(Bl["a"])(Tv,"ChannelList",{index:2}):Tv;var Nv=Object(Wl["a"])(Av);var Pv=new dr["b"]("channel_sidebar");var Mv={linkedId:null,isMention:false,position:"top",ensureItemInView:h.a.noop,featureSidebarVirtualized:false,clogger:{},isIAPhase1Enabled:false};var Dv=function(e){gn()(t,e);function t(){var e;ln()(this,t);e=pn()(this,hn()(t).call(this));e.onClick=e.onClick.bind(fn()(e));return e}un()(t,[{key:"onClick",value:function e(t){var a=this.props,r=a.linkedId,n=a.ensureItemInView,i=a.clogger,s=a.isIAPhase1Enabled;t.preventDefault();i.track("SIDEBAR_MORE_UNREADS_CLICK",{is_iap1:s});r&&n(r)}},{key:"render",value:function e(){var t=this.props,a=t.isShowing,r=t.position,i=t.isMention,s=t.linkedId,o=t.featureSidebarVirtualized;if(!a)return null;var l=fo()("p-channel_sidebar__banner",{"p-channel_sidebar__banner--mentions":i,"p-channel_sidebar__banner--unreads":!i,"p-channel_sidebar__banner--top":"top"===r,"p-channel_sidebar__banner--bottom":"bottom"===r});var c="top"===r?"arrow-up-medium":"arrow-down-medium";var u=i?Pv.t("Unread mentions",{fallbackHash:"d32ab10b7b52a05bcf8d782e26f3411dc15d4d78"}):Pv.t("More unreads",{fallbackHash:"cb0c880df578a8b429988cbc3c50b56fd6171205"});return n.a.createElement(Ao["c"],{className:l,onClick:this.onClick,"data-qa-linked-id":s,tabIndex:o?-1:void 0},n.a.createElement(Wo["b"],{type:c,inline:true,className:"p-channel_sidebar__banner_icon"}),u)}}]);return t}(n.a.PureComponent);Dv.displayName="UnreadBanner";Dv.defaultProps=Mv;var xv=Dv;var Rv=a(2714);var Fv=a(1680);var Lv=a(1025);var Uv=new dr["b"]("drafts");var Bv={dispatch:m["noop"],featureComposeFlow:false,hasMaxDrafts:false,isIAP1Enabled:false,showComposeThrobber:false,featureKeyboardKeyTooltip:false};var qv=function e(t){var a=t.dispatch,r=t.featureComposeFlow,i=t.hasMaxDrafts,s=t.isIAP1Enabled,o=t.showComposeThrobber,l=t.featureKeyboardKeyTooltip;var c=Object(Rd["a"])();if(!r)return null;return n.a.createElement(ec["c"],{position:s?"bottom":"top",delay:ec["a"],tip:function e(){if(i)return Uv.t("You\u2019ve reached the maximum number of drafts allowed");if(Ll["isDesktop"]){var t=Object(Po["isMac"])()?"\u2318":"Ctrl ";var a=n.a.createElement(n.a.Fragment,null,n.a.createElement("br",null),n.a.createElement(Lv["a"],{label:t,tooltip:true}),n.a.createElement(Lv["a"],{label:"N",tooltip:true}));return l?n.a.createElement(ml["a"],{title:Uv.rt("New message"),mainKey:"N",modifiers:[t]}):Uv.rt("New message {shortcut}",{shortcut:a})}return Uv.rt("New message")}},n.a.createElement(Ao["c"],{"aria-label":Uv.t("New message"),className:fo()("p-channel_sidebar__compose_button",{"p-channel_sidebar__compose_button--disabled":i,"p-channel_sidebar__compose_button--iap1":s}),"data-qa":"composer_button",disabled:i,onClick:function e(){a(Object(Fv["a"])());c.track(Ka["EventId"].COMPOSE_FLOW,{draft_action_source:"sidebar",draft_type:"composer",contexts:{ui_context:{action:Ka["UiAction"].CLICK,step:Ka["UiStep"].COMPOSE_FLOW_CREATE}},is_iap1:s})}},o&&n.a.createElement(Ho,{className:"p-channel_sidebar__ia_edu_compose_throbber"}),n.a.createElement(Wo["b"],{type:s?"compose-dm":"pencil",className:"p-channel_sidebar__compose_button_icon"})))};qv.displayName="ComposeButton";qv.defaultProps=Bv;var Gv=function e(t){return{featureKeyboardKeyTooltip:Object(Ba["isFeatureEnabled"])(t,"feature_keyboard_key_tooltip"),featureComposeFlow:Object(Aa["g"])(t),hasMaxDrafts:Object(Rv["a"])(t),isIAP1Enabled:Object(hr["e"])(t),showComposeThrobber:Object(Ui["b"])(t)}};var Hv=Object(i["connect"])(Gv)(qv);var Wv=a(2730);var Vv=new dr["b"]("channel_sidebar");var Kv={onItemSelected:m["noop"],onClick:m["noop"],onClose:m["noop"],position:"bottom",performBulkChannelMove:function e(){return Promise.resolve()},performMoveManyChannelsToNewSection:function e(){return Promise.resolve()},performMoveManyChannelsToSection:function e(){return Promise.resolve()},removeChannelSectionChannels:[],isPaidTeam:false,openModal:m["noop"]};var zv=function(e){gn()(t,e);function t(e){var a;ln()(this,t);a=pn()(this,hn()(t).call(this,e));Object(Nl["a"])(fn()(a),["onNewSectionSelected","onRemoveFromChannelSectionSelected","renderMenu"]);return a}un()(t,[{key:"shouldComponentUpdate",value:function e(t){return this.props.channelIds!==t.channelIds||this.props.onItemSelected!==t.onItemSelected||this.props.onClick!==t.onClick||this.props.onClose!==t.onClose||this.props.children!==t.children||this.props.featureDangerouslyGuardIATranslations!==t.featureDangerouslyGuardIATranslations||this.props.isPaidTeam!==t.isPaidTeam||this.props.channelSections!==t.channelSections||!Object(Hn["a"])(this.props.channelIsStarred,t.channelIsStarred,1)||!Object(Hn["a"])(this.props.channelSectionChannels,t.channelSectionChannels,1)||!Object(Hn["a"])(this.props.removeChannelSectionChannels,t.removeChannelSectionChannels,1)||this.props.clogger!==t.clogger}},{key:"onItemSelected",value:function e(t){if(this.getDoesSectionContainAllChannels(t.id))this.removeFromAllChannelSections();else{var a;this.props.performMoveManyChannelsToSection({channelIds:this.props.channelIds,channelSectionId:t.id});this.props.clogger.track(Ka["EventId"].CHANNEL_SECTIONS_CHANNELS_MOVE,p()({context:{ui_context:(a={},p()(a,Ka["UiContextKeys"].action,Ka["UiAction"].SELECT),p()(a,Ka["UiContextKeys"].ui_component_name,"ChannelSectionSelectMenuTrigger"),a)}},Ka["ChannelSectionsKeys"].insert,p()({},t.id,this.props.channelIds)))}this.props.onItemSelected()}},{key:"onNewSectionSelected",value:function e(){this.props.openModal({element:n.a.createElement(Du,{action:gu.CREATE_AND_MOVE,channelIds:this.props.channelIds})})}},{key:"onRemoveFromChannelSectionSelected",value:function e(){this.removeFromAllChannelSections();this.props.onItemSelected()}},{key:"getDoesSectionContainAllChannels",value:function e(t){var a=this.props,r=a.channelIds,n=a.channelSections,i=a.channelSectionChannels,s=a.channelIsStarred;if(0===r.length)return false;var o=n.find(function(e){return e.id===t});if(!o)return false;if(o.type===yr["h"])return r.reduce(function(e,t){return e&&s[t]},true);return Object(m["intersection"])(r,i[t]).length===r.length}},{key:"removeFromAllChannelSections",value:function e(){var t;this.props.performBulkChannelMove({remove:this.props.removeChannelSectionChannels,insert:[]});this.props.clogger.track(Ka["EventId"].CHANNEL_SECTIONS_CHANNELS_MOVE,{context:{ui_context:(t={},p()(t,Ka["UiContextKeys"].action,Ka["UiAction"].CLICK),p()(t,Ka["UiContextKeys"].ui_component_name,"ChannelSectionSelectMenuTrigger"),t)},remove:za(this.props.removeChannelSectionChannels)})}},{key:"renderMenu",value:function e(t){var a=this;var r=this.props.channelSections;if(!this.props.featureDangerouslyGuardIATranslations)return null;var i=r.filter(function(e){return e.type===yr["g"]||e.type===yr["h"]});return n.a.createElement(Em["f"],ho()({width:196,menuClassNames:"p-channel_sidebar__channel_section_select_menu"},t),i.map(function(e){return n.a.createElement(Em["b"],{key:e.id,"data-qa":"channel_section_select_menu_channel_section",onSelected:function t(){return a.onItemSelected(e)},className:fo()("p-channel_sidebar__channel_section_select_menu_item",{"p-channel_sidebar__channel_section_select_menu_item--checked":a.getDoesSectionContainAllChannels(e.id)})},a.getDoesSectionContainAllChannels(e.id)?n.a.createElement(Wo["b"],{type:"check-small"}):n.a.createElement("div",{className:"p-channel_sidebar__placeholder"}),n.a.createElement(jn["b"],{text:e.emoji,stopAnimations:true,obeyEmojiMode:false,emojiSize:jn["a"].SMALL,forceDisplay:true,isEmojiInlineWithText:true})," ",e.name)}),i.length>0&&this.props.isPaidTeam&&n.a.createElement(Em["d"],null),this.props.isPaidTeam&&n.a.createElement(Em["b"],{"data-qa":"channel_section_select_menu_new_section",onSelected:this.onNewSectionSelected},Vv.t("Move to new section")))}},{key:"render",value:function e(){return n.a.createElement(Em["e"],{"data-qa":"channel_section_select_menu_trigger",allowanceX:12,offsetY:8,position:this.props.position,renderMenu:this.renderMenu,onClick:this.props.onClick,onClose:this.props.onClose},this.props.children)}}]);return t}(r["Component"]);zv.displayName="ChannelSectionSelectMenuTrigger";zv.defaultProps=Kv;var Qv=function e(t,a){var r=a.channelIds;var n=Object(cr["p"])(t);var i={};r.forEach(function(e){var a=Object(Pa["e"])(t,e);i[e]=Object(Ma["isStarred"])(a)});var s={};n.forEach(function(e){s[e.id]=Object(cr["i"])(t,e.id)});return{channelSections:n,channelIsStarred:i,channelSectionChannels:s,featureDangerouslyGuardIATranslations:Object(hr["e"])(t),removeChannelSectionChannels:Or(t,r),isPaidTeam:Object(zn["isPaidTeam"])(Object(Qn["d"])(t)),clogger:Object(Va["a"])({state:t})}};var Yv=function e(t){return{performBulkChannelMove:function e(){return t(Mn.apply(void 0,arguments))},performMoveManyChannelsToSection:function e(){return t(Gc.apply(void 0,arguments))},performMoveManyChannelsToNewSection:function e(){return t(Vc.apply(void 0,arguments))},openModal:function e(){return Ri["openModal"].apply(void 0,arguments)}}};var Jv=Object(i["connect"])(Qv,Yv)(zv);var Xv=new dr["b"]("channel_sidebar");var Zv={featureDangerouslyGuardIATranslations:false,shouldUseChannelSections:false,isOrganizing:false,selectedItems:[],selectedItemCount:0,setIsOrganizing:m["noop"],openModal:m["noop"],clearAllOrganizingSections:m["noop"],isPaidTeam:false};function $v(e){function t(){e.clearAllOrganizingSections()}var a=e.featureDangerouslyGuardIATranslations,r=e.shouldUseChannelSections,i=e.isOrganizing,s=e.selectedItems,o=e.selectedItemCount;if(!a)return null;if(!r)return null;if(!i)return null;var l=s.length>0;var c=s.map(function(e){return e.channelId});return n.a.createElement("div",{className:"p-channel_sidebar__organize_mode_menu"},n.a.createElement("p",{"data-qa":"org_mode_count",className:"p-channel_sidebar__organize_mode_count"},Xv.t("{selectedItemCount} selected",{selectedItemCount:o}),o>0?n.a.createElement(n.a.Fragment,null,n.a.createElement("span",null," | "),n.a.createElement(Kr["a"],{invert:true,"data-qa":"org_mode_deselect",onClick:t},Xv.t("Clear selection"))):null),n.a.createElement("div",{className:"p-channel_sidebar__organize_mode_actions"},l?n.a.createElement(Jv,{channelIds:c,onItemSelected:e.clearAllOrganizingSections},n.a.createElement(Ao["d"],{type:"outline",className:"p-channel_sidebar__organize_action p-channel_sidebar__organize_action--primary","data-qa":"org_mode_action_move"},Xv.t("Move to\u2026"))):e.isPaidTeam&&n.a.createElement(Ao["d"],{type:"outline",className:"p-channel_sidebar__organize_action p-channel_sidebar__organize_action--primary","data-qa":"org_mode_action_create",onClick:function t(){return e.openModal({element:n.a.createElement(Du,{action:gu.CREATE,onAttemptSubmit:function t(){var a;e.clogger.track(Ka["EventId"].CHANNEL_SECTIONS_CREATE,{context:{ui_context:(a={},p()(a,Ka["UiContextKeys"].action,Ka["UiAction"].SAVE),p()(a,Ka["UiContextKeys"].ui_component_name,"OrganizeModeMenu"),a)}})}})})}},Xv.t("New section")),n.a.createElement(Ao["d"],{type:"outline",className:"p-channel_sidebar__organize_action","data-qa":"org_mode_action_done",onClick:function t(){return e.setIsOrganizing({isOrganizing:false})}},Xv.t("Done"))))}$v.displayName="OrganizeModeMenu";$v.defaultProps=Zv;var ef=function e(t){return{featureDangerouslyGuardIATranslations:Object(hr["e"])(t),shouldUseChannelSections:Object(lr["a"])(t),isOrganizing:Object(cr["l"])(t),selectedItems:Object(cr["e"])(t),selectedItemCount:Object(cr["q"])(t),isPaidTeam:Object(zn["isPaidTeam"])(Object(Qn["d"])(t)),clogger:Object(Va["a"])({state:t})}};var tf={setIsOrganizing:_r["g"],openModal:Ri["openModal"],clearAllOrganizingSections:_r["a"]};var af=Object(i["connect"])(ef,tf)($v);function rf(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function nf(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?rf(Object(a),true).forEach(function(t){p()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):rf(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var sf=new dr["b"]("channel_sidebar");var of="react_channel_sidebar_update";var lf=Object(rr["a"])(1);var cf=2;var uf=10;var df=24;var pf={FOCUS_WITHIN:2,CONTAINER_FOCUSED:1,NOT_FOCUSED:-1};var mf={isBooted:false,selectedItemId:null,mentionIds:[],unreadIds:[],mutedMentionIds:[],idsNeedingPresenceSubscription:[],rows:[],rowForItemId:{},allItemIds:[],rowsMap:{},rowIds:[],onItemSelect:h.a.noop,onInviteClick:h.a.noop,onCreateChannelClick:h.a.noop,jumperCoachmarkState:null,historyNavigationEnabled:false,useHistoryNavigation:false,featureClassicNav:false,sidebarFoldersIsEnabled:false,ensureDraftChannelObjects:void 0,initializeFolderData:h.a.noop,initializeAppSuggestionLinksData:h.a.noop,createFolder:h.a.noop,dragFolderOrChannel:h.a.noop,ariaLandmarkLabel:null,featureSonicPresenceManager:false,featureSonicInputs:false,telemeter:null,isWindowFocused:false,logger:null,bootType:null,teamId:null,suggestedChannelsMap:{},clogger:{},setHideInviteButton:h.a.noop,setHideAddChannelButton:h.a.noop,featureSeeMoreChannels:false,userAttentionIsOnChat:false,composerVisible:false,featureSidebarVirtualized:false,closeIM:h.a.noop,getAriaLabelForRow:h.a.noop,deleteComposerDraft:h.a.noop,deleteChannelDraft:h.a.noop,shouldUseChannelSections:false,isOrganizing:false,orderedChannelSections:[],setSectionCollapsed:h.a.noop,isScreenReaderEnabled:false,isWelcomePlaceAnimationEnabled:false,isIAPhase1Enabled:false,shouldHideForWelcomePlace:false,useIATopNav:false,connectDropTarget:h.a.identity,isChannelDraggingOverSidebar:false,isChannelSectionDraggingOverSidebar:false,keyboardLocale:void 0,shouldOpenActivityAsPage:true,setActivityFocus:h.a.noop,openActivityFlexpane:h.a.noop,showSidebarThrobber:false};var hf=function(e){gn()(t,e);function t(e){var a;ln()(this,t);a=pn()(this,hn()(t).call(this,e));a.setRef=a.setRef.bind(fn()(a));a.ensureItemInView=a.ensureItemInView.bind(fn()(a));a.onResize=a.onResize.bind(fn()(a));a.onScroll=a.onScroll.bind(fn()(a));a.onItemSelect=a.onItemSelect.bind(fn()(a));a.onDragStart=a.onDragStart.bind(fn()(a));a.onDragEnd=a.onDragEnd.bind(fn()(a));a.onDragOver=a.onDragOver.bind(fn()(a));a.onDrop=a.onDrop.bind(fn()(a));a.onCreateFolder=a.onCreateFolder.bind(fn()(a));if(!Object(Xa["a"])()){a.onFocusEnter=a.onFocusEnter.bind(fn()(a));a.onFocusLeave=a.onFocusLeave.bind(fn()(a));a.onFocusWithin=a.onFocusWithin.bind(fn()(a))}a.state=nf({scrolledBelowFirstMention:false,scrolledBelowFirstUnread:false,scrolledAboveLastMention:false,scrolledAboveLastUnread:false,listHeight:0,hasInitializedFolderData:false,hasInitializedAppSuggestionLinksData:false},a.getBannerState({listHeight:0}));Object(Xa["a"])()||(a.state.hasKeyboardFocus=pf.NOT_FOCUSED);a.presenceList=Object(_o["a"])(a.props.idsNeedingPresenceSubscription);a.commands=[{keys:["option+up"],handler:a.gotoNext.bind(fn()(a),"up",false)},{keys:["option+down"],handler:a.gotoNext.bind(fn()(a),"down",false)},{keys:["option+shift+up"],handler:a.gotoNext.bind(fn()(a),"up",true)},{keys:["option+shift+down"],handler:a.gotoNext.bind(fn()(a),"down",true)}];a.pendingEnsureItemInView=false;a.shouldTrackTTFMP=true;a.isSuggestedChannelsClogSent=false;a.hasInitializedDraftsData=false;a.autoscrollTick=a.autoscrollTick.bind(fn()(a));a.autoscrollAnimationId=null;a.autoscrollHighPrecisionScrollTop=null;a.autoscrollLastTick=null;a.autoscrollVelocity=0;return a}un()(t,[{key:"componentDidMount",value:function e(){this.keyCommands=new Co["a"];this.keyCommands.bindAll(this.commands);this.maybeLoadFolderData();this.maybeLoadDraftsData();this.maybeLoadAppSuggestionLinksData();this.shouldTrackTTFMP=this.props.isWindowFocused;this.maybeBeaconBootMountSuccess()}},{key:"UNSAFE_componentWillReceiveProps",value:function e(t){this.shouldTrackTTFMP=this.shouldTrackTTFMP&&t.isWindowFocused;if(!t.isBooted)return;if(!t.featureSonicPresenceManager&&!Object(bo["a"])()&&!Object(Hn["a"])(this.props.idsNeedingPresenceSubscription,t.idsNeedingPresenceSubscription)&&this.presenceList){this.presenceList.clear();this.presenceList.add(t.idsNeedingPresenceSubscription)}var a="SHOW_BUTTON"===t.jumperCoachmarkState||"HIDE_BUTTON"===t.jumperCoachmarkState;var r=this.props.rows.length&&t.rows.length&&("Vquick_switcher"===this.props.rows[0].id||"Vquick_switcher"===t.rows[0].id)&&this.props.rows[0].id!==t.rows[0].id;(a||r)&&this.ChannelList&&this.ChannelList.jumpToOffset(0)}},{key:"UNSAFE_componentWillUpdate",value:function e(t){lf&&t.telemeter.mark(of+"_mark")}},{key:"componentDidUpdate",value:function e(t){var a=this;var r=this.props,n=r.selectedItemId,i=r.isBooted,s=r.jumperCoachmarkState,o=r.rows,l=r.suggestedChannelsMap,c=r.clogger,u=r.telemeter,d=r.isChannelDraggingOverSidebar,p=r.isChannelSectionDraggingOverSidebar;var m="SHOW_BUTTON"===s||"HIDE_BUTTON"===s;var h=t.selectedItemId!==n;var v=i&&!t.isBooted;m||!h&&!v||this.ensureItemInView(n);this.maybeLoadFolderData();this.maybeLoadDraftsData();this.maybeLoadAppSuggestionLinksData();lf&&u.measureAndClear(of+"_mark",of);if(!this.isSuggestedChannelsClogSent&&Object.keys(l).length){var f=o.filter(function(e){return"channel"===e.type&&l[e.id]}).length;if(f&&c.track){this.isSuggestedChannelsClogSent=true;c.track("SIDEBAR_SUGGESTED_CHANNELS_RENDERED",{count:f})}}this.maybeBeaconBootMountSuccess();var b=d||p;var g=t.isChannelDraggingOverSidebar||t.isChannelSectionDraggingOverSidebar;g&&!b&&this.autoscrollStop();b&&!g&&this.autoscrollStart();t.rows===this.props.rows&&t.unreadIds===this.props.unreadIds&&t.mentionIds===this.props.mentionIds||this.setState(function(e){a.ChannelList&&a.ChannelList.resetCurrentScrollTopMaybe(e.listHeight);return nf({},e,{},a.getBannerState(e))})}},{key:"componentWillUnmount",value:function e(){this.keyCommands.reset();this.presenceList&&this.presenceList.destroy()}},{key:"onCreateFolder",value:function e(){if(!this.props.sidebarFoldersIsEnabled)return;this.props.createFolder()}},{key:"onDragEnd",value:function e(){if(!this.props.sidebarFoldersIsEnabled)return;this.props.dragFolderOrChannel(this.state.dragData);this.setState(function(){return{dragData:null}})}},{key:"onDragOver",value:function e(t){if(!this.props.sidebarFoldersIsEnabled)return;t.preventDefault()}},{key:"onDragStart",value:function e(t){if(!this.props.sidebarFoldersIsEnabled)return;var a=t.dataTransfer;a.effectAllowed="move";a.dropEffect="move";var r=t.target;while(r&&!r.attributes["data-drag-type"])r=r.parentNode;var n={src:{type:r.attributes["data-drag-type"].value,id:r.attributes["data-drag-id"].value}};this.setState(function(){return{dragData:n}})}},{key:"onDrop",value:function e(t){if(!this.props.sidebarFoldersIsEnabled)return;var a=t.target;while(a&&!a.attributes["data-drag-type"])a=a.parentNode;this.setState(function(e){return{dragData:nf({},e.dragData,{dest:{type:a.attributes["data-drag-type"].value,id:a.attributes["data-drag-id"].value}})}})}},{key:"onFocusEnter",value:function e(t){var a=t.relatedEvent,r=t.target,n=t.currentTarget;if(a&&"mousedown"===a.type)return;var i=r===n?pf.CONTAINER_FOCUSED:pf.FOCUS_WITHIN;this.setState(function(){return{hasKeyboardFocus:i}})}},{key:"onFocusLeave",value:function e(){this.setState(function(){return{hasKeyboardFocus:pf.NOT_FOCUSED}})}},{key:"onFocusWithin",value:function e(){this.setState(function(){return{hasKeyboardFocus:pf.FOCUS_WITHIN}})}},{key:"onItemSelect",value:function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=a.routeParams;return this.props.onItemSelect(t,{routeParams:r})}},{key:"onResize",value:function e(t){var a=this;var r=t.height;this.setState(function(e){var t=nf({},e,{listHeight:r});return nf({},t,{},a.getBannerState(t))},function(){false!==a.pendingEnsureItemInView&&a.ensureItemInView(a.pendingEnsureItemInView)})}},{key:"onScroll",value:function e(){this.setState(this.getBannerState)}},{key:"getBannerState",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state,a=t.listHeight;var r=this.getUnreadRows(),n=r.firstMention,i=r.firstUnread,s=r.lastMention,o=r.lastUnread;var l=this.ChannelList?this.ChannelList.getCurrentScrollTop():0;if(this.props.featureSidebarVirtualized)return this.getBannerStateFromVisibleListItems(n,i,s,o);var c=!!(i&&i.scrollBottom-uf<=l);var u=!!(o&&o.scrollTop+uf>=l+a);var d=!!(n&&n.scrollBottom-uf-(c?df:0)<=l);var p=!!(s&&s.scrollTop+uf+(u?df:0)>=l+a);return{scrolledBelowFirstMention:d,scrolledBelowFirstUnread:c,scrolledAboveLastMention:p,scrolledAboveLastUnread:u}}},{key:"getBannerStateFromVisibleListItems",value:function e(t,a,r,n){var i,s,o,l;var c=!!(a&&(null===(i=this.ChannelList)||void 0===i?void 0:i.isItemAboveView(a.key)));var u=!!(n&&(null===(s=this.ChannelList)||void 0===s?void 0:s.isItemBelowView(n.key)));var d=!!(t&&(null===(o=this.ChannelList)||void 0===o?void 0:o.isItemAboveView(t.key)));var p=!!(r&&(null===(l=this.ChannelList)||void 0===l?void 0:l.isItemBelowView(r.key)));return{scrolledBelowFirstMention:d,scrolledBelowFirstUnread:c,scrolledAboveLastMention:p,scrolledAboveLastUnread:u}}},{key:"getUnreadRows",value:function e(){var t=this.props,a=t.rowForItemId,r=t.rowsMap,n=t.unreadIds,i=t.mentionIds,s=t.isIAPhase1Enabled;if(s)return{firstUnread:a[h.a.first(n)],lastUnread:a[h.a.last(n)],firstMention:a[h.a.first(i)],lastMention:a[h.a.last(i)]};return{firstUnread:r[h.a.first(n)],lastUnread:r[h.a.last(n)],firstMention:r[h.a.first(i)],lastMention:r[h.a.last(i)]}}},{key:"getDropTargetBoundingClientRect",value:function e(){var t;return null===(t=this.ChannelList)||void 0===t?void 0:t.getBoundingClientRect()}},{key:"setRef",value:function e(t){this.ChannelList=t}},{key:"setAutoscrollVelocity",value:function e(t){this.autoscrollVelocity=t}},{key:"autoscrollStart",value:function e(){this.autoscrollAnimationId=requestAnimationFrame(this.autoscrollTick);this.autoscrollHighPrecisionScrollTop=this.ChannelList?this.ChannelList.currentScrollTop:0}},{key:"autoscrollStop",value:function e(){if(this.autoscrollAnimationId){cancelAnimationFrame(this.autoscrollAnimationId);this.autoscrollLastTick=null;this.autoscrollAnimationId=null}}},{key:"autoscrollTick",value:function e(t){null===this.autoscrollLastTick&&(this.autoscrollLastTick=t);var a=this.props.isChannelDraggingOverSidebar||this.props.isChannelSectionDraggingOverSidebar;if(a){var r=(t-this.autoscrollLastTick)/1e3;var n=this.autoscrollVelocity*r;if(n&&this.ChannelList){var i=this.ChannelList.getBoundingClientRect();var s=this.ChannelList.getContentHeight();this.autoscrollHighPrecisionScrollTop=h.a.clamp(this.autoscrollHighPrecisionScrollTop+n,0,s-i.height);this.ChannelList.jumpToOffset(this.autoscrollHighPrecisionScrollTop)}}this.autoscrollLastTick=t;this.autoscrollAnimationId=requestAnimationFrame(this.autoscrollTick)}},{key:"ensureItemInView",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.selectedItemId;var a=this.props,r=a.rows,n=a.rowForItemId,i=a.rowsMap,s=a.rowIds,o=a.featureSidebarVirtualized,l=a.isIAPhase1Enabled;var c=l?n[t]:i[t];if(!c)return;if(!this.ChannelList)return;if(o){this.ChannelList.ensureItemInView(t,df);return}var u=this.ChannelList.currentScrollTop;var d=this.state.listHeight;if(0===d){this.pendingEnsureItemInView=t;return}this.pendingEnsureItemInView=false;var p=l?r.indexOf(c):s.indexOf(t);var m=Math.max(p-cf,0);var h=r[m].scrollTop;if(h<u){this.ChannelList.scrollToTarget(h);return}var v=Math.min(p+cf,r.length-1);var f=r[v].scrollBottom-d;f>u&&this.ChannelList.scrollToTarget(f)}},{key:"gotoNext",value:function e(t,a,r){var n=this;var i=this.props,s=i.rows,o=i.rowForItemId,l=i.allItemIds,c=i.rowIds,u=i.selectedItemId,d=i.featureSonicInputs,p=i.userAttentionIsOnChat,m=i.isIAPhase1Enabled;if(Object(Xa["a"])()){if(!p)return}else if(!Object(ko["f"])())return;if(d){var v=Object(go["b"])(document.activeElement);if(v){if(!v.isEmpty()){if("up"===t&&(!v.isCursorAtBeginning||!v.isCursorAtBeginning()))return;if("down"===t&&(!v.isCursorAtEnd||!v.isCursorAtEnd()))return}}else if(Object(So["a"])(document.activeElement))return}else{var f=Object(yo["c"])();var b=Object(Oo["d"])(f);if(Object(Oo["e"])(f)&&b>0){if(Object(Oo["g"])(f))return;var g=Object(Oo["a"])(f).start;if("up"===t&&0!==g)return;if("down"===t&&g!==b)return}}var _=m?l.indexOf(u):c.indexOf(u);var y;if(m){y=[];l.forEach(function(e,t){var r=o[e];a?"channel"!==r.type&&"sectionHeading"!==r.type||!(h.a.indexOf(n.props.unreadIds,e)>=0||h.a.indexOf(n.props.mutedMentionIds,e)>=0)||y.push({id:e,index:t}):"channel"===r.type&&y.push({id:e,index:t})})}else y=h.a.filter(h.a.filter(h.a.map(s,function(e,t){return{type:e.type,id:e.id,index:t}}),function(e){return"channel"===e.type}),function(e){return!a||h.a.indexOf(n.props.unreadIds,e.id)>=0||h.a.indexOf(n.props.mutedMentionIds,e.id)>=0});if(0===y.length)return;var O;O="down"===t?h.a.find(y,function(e){return e.index>_}):h.a.findLast(y,function(e){return e.index<_});void 0===O&&(O="down"===t?h.a.first(y):h.a.last(y));this.props.onItemSelect(O.id);r&&r.preventDefault()}},{key:"maybeBeaconBootMountSuccess",value:function e(){var t=this.props,a=t.teamId,r=t.rows,n=t.telemeter,i=t.logger;if(window.clientBootMountTeam&&a===window.clientBootMountTeam&&r.length){n.count("client_boot_mount_success");window.clientBootMountTeam=void 0;i.info("BOOT","Beaconed client boot mount success")}}},{key:"maybeLoadAppSuggestionLinksData",value:function e(){if(!this.state.hasInitializedAppSuggestionLinksData&&this.props.initializeAppSuggestionLinksData!==h.a.noop){this.props.initializeAppSuggestionLinksData();this.setState(function(){return{hasInitializedAppSuggestionLinksData:true}})}}},{key:"maybeLoadDraftsData",value:function e(){if(this.props.ensureDraftChannelObjects&&!this.hasInitializedDraftsData){this.props.ensureDraftChannelObjects();this.hasInitializedDraftsData=true}}},{key:"maybeLoadFolderData",value:function e(){if(this.props.sidebarFoldersIsEnabled&&!this.state.hasInitializedFolderData){this.props.initializeFolderData();this.setState(function(e){return nf({},e,{hasInitializedFolderData:true})})}}},{key:"renderFocusOutline",value:function e(){if(this.state.hasKeyboardFocus===pf.CONTAINER_FOCUSED)return n.a.createElement("div",{className:"sectionfocusindicator"});return null}},{key:"render",value:function e(){if(!this.props.isBooted)return null;var t=this.props,a=t.rows,r=t.onInviteClick,i=t.onCreateChannelClick,s=t.selectedItemId,o=t.historyNavigationEnabled,l=t.useHistoryNavigation,c=t.featureClassicNav,u=t.sidebarFoldersIsEnabled,d=t.ariaLandmarkLabel,p=t.telemeter,m=t.logger,h=t.bootType,v=t.teamId,f=t.featureSeeMoreChannels,b=t.featureSidebarVirtualized,g=t.clogger,_=t.userAttentionIsOnChat,y=t.composerVisible,O=t.closeIM,k=t.getAriaLabelForRow,E=t.shouldUseChannelSections,C=t.isOrganizing,S=t.isScreenReaderEnabled,w=t.isWelcomePlaceAnimationEnabled,j=t.isIAPhase1Enabled,I=t.useIATopNav,T=t.shouldHideForWelcomePlace,A=t.deleteComposerDraft,N=t.deleteChannelDraft,P=t.connectDropTarget,M=t.isChannelDraggingOverSidebar,D=t.isChannelSectionDraggingOverSidebar,x=t.keyboardLocale,R=t.showSidebarThrobber;var F=this.state,L=F.scrolledBelowFirstMention,U=F.scrolledBelowFirstUnread,B=F.scrolledAboveLastMention,q=F.scrolledAboveLastUnread;var G=this.getUnreadRows(),H=G.firstMention,W=G.firstUnread,V=G.lastMention,K=G.lastUnread;var z=!Object(Xa["a"])()&&this.state.hasKeyboardFocus!==pf.NOT_FOCUSED;var Q=Object(Xa["a"])()||this.state.hasKeyboardFocus!==pf.CONTAINER_FOCUSED?null:"-1";var Y=fo()("p-channel_sidebar",{focusablesection:!Object(Xa["a"])()&&z,"p-channel_sidebar--classic_nav":c,"p-channel_sidebar--animate-channels":w,"p-channel_sidebar--iap1":j,"p-channel_sidebar--channel_dragging":M,"p-channel_sidebar--channel_section_dragging":D,"p-channel_sidebar--top_banner_showing":L||U,"p-channel_sidebar--bottom_banner_showing":B||q});var J=Object(Xa["a"])()?{}:{"data-is-focusable-section":true,tabIndex:Q};var X=T||!j||I?null:n.a.createElement(Uo,null);var Z=L&&!!H||U&&!!W;var $=B&&!!V||q&&!!K;var ee=P(n.a.createElement("nav",ho()({className:Y,"data-qa-channel-sidebar":true,"data-qa-channel-sidebar-selected-item-id":s,"aria-labelledby":d},J),n.a.createElement("h1",{id:"channel_sidebar_aria_label",className:"offscreen"},sf.t("Channel Sidebar")),n.a.createElement(Wv["a"],null),X,!T&&!j&&o&&n.a.createElement(Al,{useHistoryNavigation:l}),n.a.createElement("div",{className:"p-channel_sidebar__list"},!C&&n.a.createElement(xv,{position:"top",isShowing:Z,isMention:L,linkedId:L&&H&&H.id||U&&W&&W.id,ensureItemInView:this.ensureItemInView,featureSidebarVirtualized:b,clogger:g,isIAPhase1Enabled:j}),n.a.createElement(Nv,{rows:a,onItemSelect:this.onItemSelect,onInviteClick:r,onCreateChannelClick:i,onScroll:this.onScroll,onResize:this.onResize,sidebarFoldersIsEnabled:u,onDragStart:this.onDragStart,onDragEnd:this.onDragEnd,onDrop:this.onDrop,onDragOver:this.onDragOver,onCreateFolder:this.onCreateFolder,ref:this.setRef,telemeter:p,logger:m,shouldTrackTTFMP:this.shouldTrackTTFMP,bootType:h,teamId:v,setHideInviteButton:this.props.setHideInviteButton,setHideAddChannelButton:this.props.setHideAddChannelButton,featureSeeMoreChannels:f,featureSidebarVirtualized:b,clogger:g,userAttentionIsOnChat:_,composerVisible:y,selectedItemId:s,closeIM:O,getAriaLabelForRow:k,shouldUseChannelSections:E,isOrganizing:C,isScreenReaderEnabled:S,deleteComposerDraft:A,deleteChannelDraft:N,bannerHeight:df,isTopBannerVisible:Z,isBottomBannerVisible:$,keyboardLocale:x,isIAPhase1Enabled:j,shouldOpenActivityAsPage:this.props.shouldOpenActivityAsPage,setActivityFocus:this.props.setActivityFocus,openActivityFlexpane:this.props.openActivityFlexpane,showSidebarThrobber:R,setSectionCollapsed:this.props.setSectionCollapsed}),!C&&n.a.createElement(xv,{position:"bottom",isShowing:B||q,isMention:B,linkedId:B&&V&&V.id||q&&K&&K.id,ensureItemInView:this.ensureItemInView,featureSidebarVirtualized:b,clogger:g,isIAPhase1Enabled:j}),!C&&!j&&n.a.createElement(Hv,null)),E&&n.a.createElement(af,null),Object(Xa["a"])()?null:this.renderFocusOutline(),R&&n.a.createElement(Ho,{className:"p-channel_sidebar__ia_edu_pages_throbber"})));return Object(Xa["a"])()?ee:n.a.createElement(Eo["a"],{onFocusEnter:this.onFocusEnter,onFocusWithin:this.onFocusWithin,onFocusLeave:this.onFocusLeave},ee)}}]);return t}(r["PureComponent"]);hf.displayName="ChannelSidebar";hf.defaultProps=mf;var vf=hf;function ff(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function bf(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ff(Object(a),true).forEach(function(t){p()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ff(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var gf=10;var _f="react_channel_sidebar_selector_factory";var yf=Object(rr["a"])(1);var Of=function e(t,a){return yf&&Object(Sa["c"])({state:a}).mark(t+"_mark")};var kf=function e(t,a){return yf&&Object(Sa["c"])({state:a}).measureAndClear(t+"_mark",t)};var Ef=function e(t){if(Object(Vn["e"])(t))return false;if(Object(Ta["k"])(t,"add_channel_prompt_dismissed"))return false;if(Object(Ua["m"])(t))return false;var a=!!Object(Ta["i"])(t);if(a)return true;var r=Object(Pa["b"])(t)||{};var n=Object.keys(r);var i=0;for(var s=0;s<n.length;s++){Object(Ma["isUserInChannel"])(r[n[s]])&&(i+=1);if(i>gf)return false}return true};var Cf=function e(t){if(!Object(Qa["canUserSeeInviteModal"])(t))return false;var a=h.a.size(h.a.filter(Object(Ua["a"])(t),function(e){return!e.is_slackbot}));if(Object(Ta["k"])(t,"channel_sidebar_hide_invite"))return false;if(a>=2)return"dim";return true};var Sf=function e(t){if("Vall_threads"!==Object(Ga["a"])(t)){var a=Object(Ta["k"])(t,"has_received_threaded_message");var r=Object(Ba["isFeatureEnabled"])(t,"feature_incremental_unread_counts")?Object(La["hasUnreadThreads"])(t):Object(Fa["hasUnreadThreads"])(t);return a||r}return true};var wf=function e(t){var a=Object(nr["a"])(t);var r=ys(t),n=r.sidebarSections,i=r.sidebarSectionsOrdered,s=r.orderedChannelSections,o=r.idsNeedingPresenceSubscription;var l="enabled"===Object(u["getGroupForUser"])(t,"folders_sidebar")&&Object(Ta["k"])(t,"folders_enabled");var c=l?Object(Ia["getFolders"])(t):[];var d=!h.a.isEmpty(Object(Qn["i"])(t));var p=Object(Ta["k"])(t,"add_apps_prompt_dismissed")||Object(ja["getAppLinkIsHidden"])(t);var m=!d&&!Object(zn["isPaidTeam"])(Object(Qn["d"])(t))&&!p;var v;var f;var b;var g;var _;if(Object(hr["e"])(t)){var y=Mi({sidebarSectionsOrdered:i,sidebarSections:n,pages:Object(Ln["a"])().filter(function(e){return Object(Ln["e"])(t,e)})||[],hasAllUnreadsLink:true===Object(Ta["k"])(t,"enable_unread_view"),hasThreadsLink:Sf(t),showDraftsPageSidebar:true,primaryView:Object(Ga["a"])(t),isPagesetExpanded:Object(Un["b"])(t),shouldUseChannelSections:Object(lr["a"])(t),isOrganizing:Object(cr["l"])(t)});v=y.rows;_=y.rowIds;f=y.rowForItemId;b=y.allItemIds}else{var O=io({hasQuickswitcherButton:!a&&Object(Ta["k"])(t,"show_sidebar_quickswitcher_button")&&!Object(hr["e"])(t),hasAllUnreadsLink:true===Object(Ta["k"])(t,"enable_unread_view"),hasAddAChannelLink:Ef(t),hasInvitePeopleLink:Cf(t),hasSearchLink:Object(ir["a"])(t),hasAppsLink:or(t),hasInstallAppsLink:m,appSuggestionsCount:po(t),hasUpgradeSlackCTA:Object(Fi["l"])(t),hasThreadsLink:Sf(t),sidebarSectionsOrdered:i,sidebarSections:n,sidebarFoldersIsEnabled:l,sidebarFolders:c,pages:Object(Ln["a"])().filter(function(e){return Object(Ln["e"])(t,e)})||[],featureComposeFlow:Object(Aa["g"])(t),shouldUseChannelSections:Object(lr["a"])(t),shouldHideForWelcomePlace:Object(Ra["t"])(t),showDraftsPageSidebar:Object(Aa["l"])(t)});v=O.rows;g=O.rowsMap;_=O.rowIds}return{rows:v,rowForItemId:f,allItemIds:b,rowsMap:g,rowIds:_,orderedChannelSections:s,idsNeedingPresenceSubscription:o}};var jf=function e(t){var a;var r;var i;var s;var o;var c;var d;var p;var m;var v;var f;var b;var g;var _;var y;var O;var k;var E;var C;var S;var w;var j;var I;var T;var A;var N;var P;var M;return function(e,D){Of(_f,e);var x=Object(Ca["a"])({state:e});var R=Object(Va["a"])({state:e});var F=Object(Sa["c"])({state:e});var L=Object(Wa["isWindowFocused"])(e);var U=Object(Wa["getBootType"])(e);var B=Object(lr["a"])(e);var q=Object(Ga["a"])(e);var G=D.onItemSelect;var H=wf(e),W=H.rows,V=H.rowForItemId,K=H.allItemIds,z=H.rowsMap,Q=H.rowIds,Y=H.orderedChannelSections,J=H.idsNeedingPresenceSubscription;var X=po(e);var Z=[];var $=[];var ee=[];if(Object(Ba["isFeatureEnabled"])(e,"feature_incremental_unread_counts")){Object(La["getThreadsMentionCount"])(e)&&$.push("Vall_threads");Object(La["hasUnreadThreads"])(e)&&Z.push("Vall_threads")}else{Object(Fa["getThreadsMentionCount"])(e)&&$.push("Vall_threads");Object(Fa["hasUnreadThreads"])(e)&&Z.push("Vall_threads")}if(B)for(var te=0;te<W.length;++te){var ae=W[te];if("sectionHeading"===ae.type&&ae.channelIds)for(var re=0;re<ae.channelIds.length;++re){var ne=ae.channelIds[re];var ie=Object(Pa["y"])(e,ne);var se=Object(xa["isChannelMutedById"])(e,ne);!se&&Object(Pa["z"])(e,ne)&&Z.push(ne);!se&&ie&&$.push(ne);se&&ie&&ee.push(ne)}}else{var oe=Q.length;for(var le=0;le<oe;le++){var ce=Q[le];var ue=Object(Pa["y"])(e,ce);var de=Object(xa["isChannelMutedById"])(e,ce);!de&&Object(Pa["z"])(e,ce)&&Z.push(ce);!de&&ue&&$.push(ce);de&&ue&&ee.push(ce)}}var pe=Object(Fn["e"])(e);var me=Object(ar["isComposerVisible"])(e);var he=Object(ja["getJumperCoachmarkState"])(e);var ve=Object(Ta["k"])(e,"sidebar_behavior");var fe="enabled"===Object(u["getGroupForUser"])(e,"folders_sidebar")&&Object(Ta["k"])(e,"folders_enabled");var be=Object(nr["a"])(e);var ge=Object(nr["b"])(e);var _e=Object(Ba["isFeatureEnabled"])(e,"feature_sonic_inputs");var ye=Object(Ba["isFeatureEnabled"])(e,"feature_classic_nav");var Oe=Object(Ba["isFeatureEnabled"])(e,"feature_sonic_presence_manager");var ke=Object(Ba["isFeatureEnabled"])(e,"feature_see_more_channels");var Ee=Object(Ba["isFeatureEnabled"])(e,"feature_sidebar_virtualized");var Ce=h.a.some(W,function(e){return"addAChannelLink"===e.type});var Se=Object(tr["b"])(e);var we=Object(Ma["getSuggestedChannels"])(e);var je=we.join(",");var Ie=B&&Object(cr["n"])(e);var Te=B&&Object(cr["o"])(e);var Ae=B&&Object(cr["c"])(e);var Ne=function t(a){var r=Object(Pa["e"])(e,a);var n=Object(Ma["getChannelType"])(r);var i=Object(Ma["getDisplayNameForChannel"])(e,r,{publicChannelIncludeHashSign:false});var s=Object(Ba["getCurrentUserId"])(e);var o=Object(Ma["isYou"])(s,r);var l=Object(xa["isChannelMutedById"])(e,a);var c=!!Object(Ma["getUnreadCount"])(r);var u=Object(Ma["getHasDraft"])(e,a);var d=!!Object(Pa["d"])(e,r);var p=Object(Ma["isStarred"])(r);var m="im"===n;var h=m&&Object(Ma["getMemberIdFromIm"])(r);var v=h&&Object(Ua["e"])(e,h);var f=m&&"away"===Object(Bi["getPresenceByMemberId"])(e,h);var b=m&&Object(Ua["g"])(e,h);if(m)return Object(Xn["a"])({name:i,isSelf:o,hasNotifications:d,isStarred:p,isMuted:l,hasDraft:u,hasUnreads:c,isPrescenceAway:f,statusEmojiCode:b&&b.emoji,statusText:b&&b.text,isAppOrBot:Object(Da["isAppOrBot"])(v),isGuest:Object(Da["isGuest"])(v)});if("mpim"===n)return Object(Jn["a"])({name:i,hasNotifications:d,isStarred:p,isMuted:l,hasDraft:u,hasUnreads:c});return Object(Yn["a"])({channelName:i,isPrivate:Object(Ma["isPrivateChannel"])(r),isStarred:p,isMuted:l,hasDraft:u,hasUnreads:c})};var Pe=Object(Zn["isScreenReaderEnabled"])(e);var Me=Object(Ra["a"])(e);var De=Object(Ra["t"])(e);var xe=Object(hr["e"])(e);var Re=Object(hr["f"])(e);var Fe=Object(Ui["c"])(e);var Le=Object(Ta["k"])(e,"activity_view");var Ue=hr["e"]&&"page"===Le;if(q===r&&Object(Hn["a"])(Z,i)&&Object(Hn["a"])($,s)&&Object(Hn["a"])(ee,o)&&Object(Hn["a"])(K,c)&&Object(Hn["a"])(Q,d)&&he===p&&ve===m&&fe===v&&ye===f&&Object(Hn["a"])(D,b)&&Ce===g&&je===_&&pe===y&&me===O&&X===k&&E===Pe&&C===Me&&S===xe&&w===Re&&j===Ue&&I===De&&Object(Hn["a"])(T,Y)&&A===Ie&&Object(Hn["a"])(N,Te)&&P===Ae&&Object(Hn["a"])(P,Ae)&&Fe===M)return a;var Be=bf({},D,{isBooted:true,rows:W,rowForItemId:V,allItemIds:K,rowsMap:z,rowIds:Q,selectedItemId:q,unreadIds:Z,mentionIds:$,mutedMentionIds:ee,userAttentionIsOnChat:pe,composerVisible:me,jumperCoachmarkState:he,historyNavigationEnabled:be,useHistoryNavigation:ge,featureClassicNav:ye,idsNeedingPresenceSubscription:J,featureSonicPresenceManager:Oe,featureSonicInputs:_e,featureSeeMoreChannels:ke,sidebarFoldersIsEnabled:fe,featureSidebarVirtualized:Ee,closeIM:function a(r){var n=Object(Pa["e"])(e,r);var i=Object(Ma["getChannelType"])(n);return"im"===i||"mpim"===i?t(Object(l["closeChannelApi"])({channelId:r})):void 0},deleteComposerDraft:function a(r){var i=Object(Aa["d"])(e,r);var s=Object(Di["d"])(i);return t(Object(Ri["openModal"])({element:n.a.createElement(xi["a"],{draftId:s})}))},deleteChannelDraft:function e(a,r){return t(Object(Ri["openModal"])({element:n.a.createElement(xi["a"],{channelId:a,threadTs:r})}))},ensureDraftChannelObjects:function e(){return t(er())},initializeFolderData:function e(){return t(Object(Ia["initializeFolderData"])())},initializeAppSuggestionLinksData:function e(){return t(Object(ja["initializeAppSuggestionLinksData"])())},dragFolderOrChannel:function e(a){var r=a.src,n=a.dest;t(Object(Ia["dragFolderOrChannel"])({src:r,dest:n}));t(Object(Ia["saveFolderData"])())},createFolder:function e(){return t(Object(Ia["createFolder"])())},setHideInviteButton:function e(){R.track("SIDEBAR_INVITE_PEOPLE",{contexts:{ui_context:{step:"invite_people",action:"click",ui_properties:{element_type:"button",element_name:"hide_invite_people"}}}});R.track("INAPP_INVITES",{contexts:{ui_context:{step:"invite_people",action:"click",ui_properties:{element_type:"button",element_name:"hide_invite_people"}}}});return t(Object(Na["d"])({pref:"channel_sidebar_hide_invite",value:true}))},setHideAddChannelButton:function e(){return t(Object(Na["d"])({pref:"add_channel_prompt_dismissed",value:true}))},onItemSelect:function e(a){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.routeParams;x.info("CHANNEL-SIDEBAR","onItemSelect",a);q===a&&t(Object(Ya["a"])({channelId:a}));Object(Ln["d"])(a)&&t(Object(Kn["r"])({entity:ei(a)}));if(Object(Xa["a"])()){t(Object(Ha["a"])({id:a,routeParams:n}));t(Object(qa["updateChannelLastTrigger"])({source:"SIDE_BAR",objId:a}))}else G&&G(a).then(function(){t(Object(qa["updateChannelLastTrigger"])({source:"SIDE_BAR",objId:a}))}).catch(h.a.noop)},ariaLandmarkLabel:"channel_sidebar_aria_label",logger:x,clogger:R,telemeter:F,isWindowFocused:L,bootType:U,teamId:Se,suggestedChannelsMap:we.reduce(function(e,t){e[t]=t;return e},{}),getAriaLabelForRow:Ne,shouldUseChannelSections:B,lastActiveDropTargetForChannelDrag:Ie,lastActiveDropTargetForChannelSectionDrag:Te,performBulkChannelMove:function e(){return t(Mn.apply(void 0,arguments))},performChannelSectionMove:function e(){return t(Rn.apply(void 0,arguments))},setSectionCollapsed:function e(){return t(xr.apply(void 0,arguments))},isOrganizing:Object(cr["l"])(e),isScreenReaderEnabled:Pe,isWelcomePlaceAnimationEnabled:Me,isIAPhase1Enabled:xe,useIATopNav:Re,shouldHideForWelcomePlace:De,shouldOpenActivityAsPage:Ue,setActivityFocus:function e(){return t(Gn["c"].apply(void 0,arguments))},openActivityFlexpane:function e(){return t(wa["d"].apply(void 0,arguments))},orderedChannelSections:Y,showSidebarThrobber:Fe});a=Be;r=q;i=Z;s=$;o=ee;c=K;d=Q;p=he;m=ve;v=fe;f=ye;b=D;g=Ce;_=je;y=pe;O=me;k=X;E=Pe;S=xe;w=Re;j=Ue;C=Me;I=De;T=Y;A=Ie;N=Te;P=Ae;M=Fe;kf(_f,e);return Be}};var If={withRef:true};var Tf=Object(i["connectAdvanced"])(jf,If)(vf);var Af=Tf;var Nf=[Bn,qn];var Pf={drop:function e(t,a){var r=a.getItemType();if(r===Bn){var n=a.getItem();var i=n.channel.id;var s=n.channelSection&&n.channelSection.id;var o=t.lastActiveDropTargetForChannelDrag&&t.lastActiveDropTargetForChannelDrag.channelSectionId;if(s===o)return;var l=[];var c=[];s&&l.push({channelSectionId:s,channelIds:[i]});o&&c.push({channelSectionId:o,channelIds:[i]});if(l.length||c.length){var u,d;t.performBulkChannelMove({remove:l,insert:c});t.clogger.track(Ka["EventId"].CHANNEL_SECTIONS_CHANNELS_MOVE,(d={context:{ui_context:(u={},p()(u,Ka["UiContextKeys"].action,Ka["UiAction"].DROP),p()(u,Ka["UiContextKeys"].ui_component_name,"ConnectedChannelSidebar"),u)}},p()(d,Ka["ChannelSectionsKeys"].remove,za(l||{})),p()(d,Ka["ChannelSectionsKeys"].insert,za(c||{})),d))}}else if(r===qn){var m;var h=a.getItem();var v=h.channelSection.id;var f=t.lastActiveDropTargetForChannelSectionDrag||{},b=f.channelSectionId,g=f.isAfter;var _=t.orderedChannelSections||[];var y=b;if(g){var O=_.findIndex(function(e){return e.id===b});var k=O>=0?_[O+1]:void 0;y=k?k.id:null}t.performChannelSectionMove({channelSectionId:v,nextChannelSectionId:y});t.clogger.track(Ka["EventId"].CHANNEL_SECTIONS_MOVE,{context:{ui_context:(m={},p()(m,Ka["UiContextKeys"].action,Ka["UiAction"].DROP),p()(m,Ka["UiContextKeys"].ui_component_name,"ConnectedChannelSidebar"),m)},channel_section_id:v,next_channel_section_id:y})}},hover:Object(Wn["a"])(function(e,t,a){var r=t.getItemType();if(!r){a.setAutoscrollVelocity(0);return}var n=t.getClientOffset();var i=a.getDropTargetBoundingClientRect();var s=n.x;var o=n.y;var l=0;if(i&&i.left<=s&&s<i.right){var c=i.top;var u=i.bottom;var d=1500;var p=Math.min(200,(u-c)/3);if(o<=i.top)l=-d;else if(o>=i.bottom)l=d;else if(o<c+p){var m=c+p-o;var h=m/p;l=-Math.pow(h,2)*d}else if(o>u-p){var v=o-(u-p);var f=v/p;l=Math.pow(f,2)*d}}a.setAutoscrollVelocity(Math.round(l))},0)};var Mf=function e(t,a){var r=a.getItemType();var n=r===Bn&&a.isOver();var i=r===qn&&a.isOver();return{connectDropTarget:t.dropTarget(),isChannelDraggingOverSidebar:n,isChannelSectionDraggingOverSidebar:i}};var Df=Object(Xa["a"])()?Ea(Nf,Pf,Mf)(vf):vf;var xf=Object(Li["a"])(Object(i["connectAdvanced"])(jf,If)(Df));var Rf=Af;var Ff=a(1141);var Lf=a(1052);var Uf=a(197);var Bf="react_channel_sidebar_display_item";var qf=Object(rr["a"])(1);var Gf=function e(t,a,r){var n=Object(Sa["c"])({state:a()});qf&&n.mark(Bf+"_mark");document&&document.activeElement&&document.activeElement.blur();return t(Object(c["a"])({id:r})).catch(function(e){Object(Ff["b"])("beep");Object(Ca["a"])({getState:a}).error(e,"displayModelOrViewById errored",{subtype:"displayModelOrViewById_beep"});throw e}).finally(function(){qf&&n.measureAndClear(Bf+"_mark",Bf)})};var Hf=function e(t,a,r){if(!t)throw new Error("mountChannelSidebar must be called with a teamId parameter");var c=Object(o["f"])(t);var d=c.getState();var p=Object(u["getGroupForUser"])(d,"speedy_sidebar_boot");"experiment"===p&&c.dispatch(Object(l["bulkAddChannels"])({channels:[]}));var m=function e(t){return Gf(c.dispatch,c.getState,t)};var h=Object(Va["a"])({state:d});var v=function e(){h.track("SIDEBAR_INVITE_PEOPLE",{contexts:{ui_context:{step:"invite_people",action:"click",ui_properties:{element_type:"button",element_name:"invite_people"}}}});c.dispatch(Object(Lf["a"])({source:"channel_sidebar"}))};Object(s["a"])(n.a.createElement(i["Provider"],{store:c},n.a.createElement(Uf["a"],null,n.a.createElement(Rf,{onItemSelect:m,onInviteClick:v,ref:r}))),a)};var Wf=Hf;var Vf=a(52);Object(Vf["a"])("interop.mountChannelSidebar",Wf)},,function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(12);var s=a(2);var o=a.n(s);var l=a(156);var c=a(26);var u=a(163);var d=a(119);var p=a(303);var m=a(317);var h=a(88);var v=a.n(h);var f=a(488);function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function g(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(Object(a),true).forEach(function(t){v()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function _(e,t){var a=t||Object(f["d"])(e.id)||{};return g({},e,{fileName:a.name,imageSource:a.thumb_160||a.thumb_80,fileType:a.filetype,prettyType:a.pretty_type,fileSize:a.size})}var y=a(110);var O=a.n(y);var k=a(135);var E=a.n(k);var C=a(169);var S=a.n(C);var w=a(138);var j=a.n(w);var I=a(147);var T=a.n(I);var A=a(185);var N=a.n(A);var P=a(30);var M=a(0);var D=a(6);var x=a(34);var R=a(760);var F=a(23);var L=a(1057);var U=a(4240);var B=a(3652);var q={clearDownloads:s["noop"],isShowing:true};var G=new D["b"]("page_client");var H=function(e){N()(t,e);function t(e){var a;O()(this,t);a=S()(this,j()(t).call(this,e));Object(P["a"])(T()(a),["focus","onItemTabWithin"]);a.list=n.a.createRef();a.flexpane=n.a.createRef();return a}E()(t,[{key:"UNSAFE_componentWillUpdate",value:function e(t){var a=t.fileIdsToFetch;if(this.props.fileIdsToFetch===a)return;if(0===a.length)return;if(Object(s["isEqual"])(this.props.fileIdsToFetch,a))return;this.props.fetchFileInfo({ids:a})}},{key:"onItemTabWithin",value:function e(){var t=this.flexpane.current;t&&t.setInitialActiveSection()}},{key:"focus",value:function e(){var t=this.list.current;t&&t.focus()}},{key:"render",value:function e(){var t=this;var a=this.props,r=a.clearDownloads,i=a.downloads,o=a.isShowing;if(!o)return null;var l;Object(s["isEmpty"])(i)||(l={onOptionsClick:r,optionsIconType:"clear",optionsTooltipText:G.t("Clear all")});var c=G.t("Downloads");return n.a.createElement(L["b"],{"aria-label":c,isEmpty:Object(s["isEmpty"])(i),ref:this.flexpane,focus:this.focus,className:"p-downloads_list",title:c,renderBody:function e(){return n.a.createElement(U["a"],{ref:t.list,"aria-label":G.t("Downloads"),items:i,onItemTabWithin:t.onItemTabWithin})},renderEmpty:function e(){return n.a.createElement(R["a"],{imageUrl:cdn_url+"/80588/img/downloads_empty.png",imageUrl2x:cdn_url+"/80588/img/downloads_empty@2x.png",title:G.t("Downloaded files"),description:G.rt("You can download files by selecting the {icon} icon.",{icon:n.a.createElement(F["b"],{inline:true,type:"cloud-download"})})})},headerProps:l,viewId:"downloads-list",kbNavOrder:Object(x["a"])()?void 0:6})}}]);return t}(n.a.Component);H.displayName="DownloadsFlexpane";H.defaultProps=q;var W=H;var V=function e(t){return t.files};var K=function e(t,a){return a.startTime-t.startTime};var z=Object(u["createSelector"])([p["getTeamDownloads"],V],function(e,t){return(e||[]).map(function(e){return _(e,t[e.id])}).sort(K)});var Q=Object(u["createSelector"])([p["getTeamDownloadIds"],V],function(e,t){return(e||[]).filter(function(e){return!t[e]})});var Y=function e(t){var a=Object(d["j"])(t);return{downloads:z(t),fileIdsToFetch:Q(t),isShowing:"downloads"===a}};var J=function e(t){return{fetchFileInfo:function e(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=a.ids;return t(Object(m["f"])({fileIds:r,reason:"downloads-store.fetchFileInfo"}))},clearDownloads:function e(){return t(p["clearTeamDesktopDownloads"].apply(void 0,arguments))}}};var X=Object(i["connect"])(Y,J)(W);var Z=X;var $=a(197);var ee=function e(t,a){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.a.noop;if(!t)throw new Error("mountDownloadsView must be called with a teamId parameter");var s=Object(c["f"])(t);Object(l["a"])(n.a.createElement(i["Provider"],{store:s},n.a.createElement($["a"],null,n.a.createElement(Z,null))),a,r)};var te=ee;var ae=a(52);Object(ae["a"])("interop.mountDownloadsView",te)},,,,,,,,,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,,function(e,t,a){},,function(e,t,a){"use strict";var r=a(110);var n=a.n(r);var i=a(135);var s=a.n(i);var o=a(169);var l=a.n(o);var c=a(138);var u=a.n(c);var d=a(147);var p=a.n(d);var m=a(185);var h=a.n(m);var v=a(1);var f=a.n(v);var b=a(0);var g=a(2);var _=a(13);var y=a.n(_);var O=a(40);var k=a.n(O);var E=a(30);var C=a(43);var S=a(120);var w=a(153);function j(e){if(!e||Object(g["isEmpty"])(e))return true;if(e.in&&e.in.length)return false;if(e.from&&e.from.length)return false;if(e.to&&e.to.length)return false;if(e.before||e.after)return false;if(e.has_star||e.has_pin||e.has_link||e.has_rxn)return false;return true}var I=a(17);var T=a(9);var A=a(6);var N=a(1699);var P=a(1994);var M=a(166);var D=a(291);var x=a(357);var R=a(219);var F=a(316);var L=a(1354);var U=a(877);var B=a(189);var q=a(1191);var G=a(98);var H=a(23);var W={date:null,disableDatesBefore:null,disableDatesAfter:null,qaLabel:""};var V=-364;var K=function(e){h()(t,e);function t(e){var a;n()(this,t);a=l()(this,u()(t).call(this,e));Object(E["a"])(p()(a),["onClearDateChange"]);return a}s()(t,[{key:"onClearDateChange",value:function e(){this.props.onDateChange(null)}},{key:"render",value:function e(){var t=this.props,a=t.onDateChange,r=t.date,n=t.isDateDisabled,i=t.disableDatesBefore,s=t.disableDatesAfter,o=t.dateLabel,l=t.dateAriaLabel,c=t.removeAriaLabel,u=t.qaLabel;var d="es-ES"===Object(A["s"])()||"es-LA"===Object(A["s"])();var p=r?Object(B["i"])(k()(r),{shortenMonth:d,shortenDay:d}):"";var m=y()("p-search_filter__datepicker_trigger",{"p-search_filter__datepicker_trigger--empty":!r});return f.a.createElement("div",{className:"p-search_filter__date","data-qa":u},f.a.createElement(q["b"],{position:"bottom",offsetY:V,selectedDate:r,dateFormat:"YYYY-MM-DD",onDateChange:a,isDateDisabled:n,disableDatesBefore:i,disableDatesAfter:s},f.a.createElement(G["a"],{className:m,"aria-label":r?void 0:l,"data-qa":u+"_button"},f.a.createElement("div",{className:"p-search_filter__date_label"},o),f.a.createElement("div",{className:"p-search_filter__date_readout"},p),r?null:f.a.createElement(H["b"],{type:"calendar",className:"p-search_filter__calendar_icon"}))),r?f.a.createElement(G["a"],{"aria-label":c,className:"p-search_filter__date_close",onClick:this.onClearDateChange,"data-qa":u+"_close"},f.a.createElement(H["b"],{type:" c-icon--times-small"})):null)}}]);return t}(v["PureComponent"]);K.displayName="DateSelector";K.defaultProps=W;var z=K;var Q=new A["b"]("search");var Y={startDate:null,endDate:null,context:"messages"};var J=function(e){h()(t,e);function t(e){var a;n()(this,t);a=l()(this,u()(t).call(this,e));Object(E["a"])(p()(a),["isDateDisabledStart","isDateDisabledEnd"]);return a}s()(t,[{key:"isDateDisabledEnd",value:function e(t){var a=this.props.startDate;if(a)return t.isBefore(a)||t.isAfter(k()());return t.isAfter(k()())}},{key:"isDateDisabledStart",value:function e(t){var a=this.props.endDate;if(a)return t.isAfter(a)||t.isAfter(k()());return t.isAfter(k()())}},{key:"render",value:function e(){var t=this.props,a=t.onStartDateChange,r=t.onEndDateChange,n=t.endDate,i=t.startDate,s=t.context;return f.a.createElement(U["a"],{title:"files"===s?Q.t("Date shared",{fallbackHash:"eb9a4bc1c0c153e4e4b042a79113b815b7e3021d"}):Q.t("Date")},f.a.createElement("div",{className:"p-search_filter__dates"},f.a.createElement(z,{date:i,onDateChange:function e(t){a(t?k()(t):null)},isDateDisabled:this.isDateDisabledStart,disableDatesAfter:n||k()().format("YYYY-MM-DD"),dateLabel:Q.t("Start",{fallbackHash:"7725e05476ed2d82c0f887aff3382e0fb31309ae"}),dateAriaLabel:Q.t("Starting date"),removeAriaLabel:Q.t("Remove starting date"),qaLabel:"search_starting_date"}),f.a.createElement(z,{date:n,onDateChange:function e(t){r(t?k()(t):null)},isDateDisabled:this.isDateDisabledEnd,disableDatesBefore:i,disableDatesAfter:k()().format("YYYY-MM-DD"),dateLabel:Q.t("End",{fallbackHash:"89a8a63d7a95ab276ba0429ed3d1d9b3ded3a6f8"}),dateAriaLabel:Q.t("Ending date"),removeAriaLabel:Q.t("Remove ending date"),qaLabel:"search_ending_date"})))}}]);return t}(v["PureComponent"]);J.displayName="DateRangeFilter";J.defaultProps=Y;var X=J;var Z=a(2743);var $=a(2010);var ee=a(3681);a.d(t,"a",function(){return ne});var te=new A["b"]("search");var ae="IMPROVED_SEARCH";var re={showOnlyActiveFilters:false,showFileFilters:false,logInfo:g["noop"],clogSearchFilterAdded:g["noop"],clogSearchFilterRemoved:g["noop"],searchOnlyWorkspaceTeamId:"",selfEnterpriseOrgName:"",searchOnlyByEnterpriseTeamId:g["noop"]};var ne=function(e){h()(t,e);function t(e){var a;n()(this,t);a=l()(this,u()(t).call(this,e));Object(E["a"])(p()(a),["onChannelSelect","onMemberSelect","onEndDateSelect","onStartDateSelect","onFileTypeChange","loadInFilterOptions","loadFromFilterOptions","onSearchLimitTeamFilterDropdownChange"]);a.onStartDateSelect=a.onStartDateSelect.bind(p()(a));a.onEndDateSelect=a.onEndDateSelect.bind(p()(a));return a}s()(t,[{key:"onChannelSelect",value:function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=a.offset;if(!t)return;var n={filter_in:true,filter_position:r};Object(w["a"])(t)?n.click_user_id=t:n.click_channel_id=t;this.props.filters.in.indexOf(t)>-1?this.props.clogSearchFilterRemoved(n):this.props.clogSearchFilterAdded(n);var i=t;this.props.imToUserMap[t]&&(i=this.props.imToUserMap[t]);this.props.onChannelSelect({channelId:i})}},{key:"onEndDateSelect",value:function e(t){var a=t&&t.add(1,"days").format(L["a"]);a?this.props.clogSearchFilterAdded({filter_before:a}):this.props.clogSearchFilterRemoved({filter_before:""});this.props.onBeforeFilterChange({dateString:a})}},{key:"onFileTypeChange",value:function e(t){this.props.clogSearchFilterAdded({filter_file_type:t});this.props.onFileTypeChange({fileType:t})}},{key:"onMemberSelect",value:function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=a.offset;if(!t)return;this.props.filters.from.indexOf(t)>-1?this.props.clogSearchFilterRemoved({click_user_id:t,filter_from:true,filter_position:r}):this.props.clogSearchFilterAdded({click_user_id:t,filter_from:true,filter_position:r});this.props.onMemberSelect({memberId:t})}},{key:"onSearchLimitTeamFilterDropdownChange",value:function e(t){this.props.searchOnlyByEnterpriseTeamId({value:t.value})}},{key:"onSearchPrefChange",value:function e(t){var a=this.props.searchPrefs,r=a.searchOnlyCurrentTeam,n=a.searchExcludeBots,i=a.searchOnlyMyChannels;this.props.logInfo(ae,"Changing search pref. pref: "+t);var s;switch(t){case S["n"]:s=!r;this.props.searchOnlySearchWorkspaceChanged({value:s});break;case S["k"]:s=!n;this.props.messageAndFileSearchExcludeBotsChanged({value:s});break;case S["o"]:s=!i;this.props.messageAndFileSearchOnlyMyChannelsChanged({value:s});break;default:return}s?this.props.clogSearchFilterAdded({filter_other:t}):this.props.clogSearchFilterRemoved({filter_other:t})}},{key:"onStartDateSelect",value:function e(t){var a=t&&t.subtract(1,"days").format(L["a"]);a?this.props.clogSearchFilterAdded({filter_after:a}):this.props.clogSearchFilterRemoved({filter_after:""});this.props.onAfterFilterChange({dateString:a})}},{key:"loadFromFilterOptions",value:function e(t){var a=this;if(!t||t.length<=1)return Promise.resolve({options:[],emptyMessage:null});return this.props.search({query:t,options:{entities:{members:{includeSelf:true,includeSlackbot:true,includeBots:true,includeDeleted:true}}}}).then(function(e){var t=e.filter(function(e){return-1===a.props.suggestions.from.indexOf(e.id)});return{options:t.map(function(e){return{label:null,model:e,member:Object(I["isMember"])(e)&&e,mpim:Object(T["isMpim"])(e)&&e,channel:Object(T["isChannel"])(e)&&e,value:e.id}})}})}},{key:"loadInFilterOptions",value:function e(t){var a=this;if(!t||t.length<=1)return Promise.resolve({options:[],emptyMessage:null});return this.props.search({query:t,options:{limit:150,entities:{channels:{includeArchived:true,onlyIfMember:this.props.searchPrefs.searchOnlyMyChannels,includeFromAnotherTeam:!this.props.searchPrefs.searchOnlyCurrentTeam,includeMpims:true},members:{includeSelf:true,includeSlackbot:!this.props.searchPrefs.searchExcludeBots,includeBots:!this.props.searchPrefs.searchExcludeBots,includeDeleted:true}}}}).then(function(e){var t=e.filter(function(e){var t=Object(g["findIndex"])(a.props.suggestions.in,function(t){return t.id===e.id});return-1===t});var r={};a.props.suggestions.in.forEach(function(e){r[e.name]=(r[e.name]||0)+1});t.forEach(function(e){r[e.name]=(r[e.name]||0)+1});return{options:t.map(function(e){return{label:null,model:e,member:Object(I["isMember"])(e)&&e,mpim:Object(T["isMpim"])(e)&&e,channel:Object(T["isChannel"])(e)&&e,value:e.id}})}})}},{key:"shouldRenderDateFilter",value:function e(){var t=this.props,a=t.filters,r=t.showOnlyActiveFilters;if(j(a)&&r)return false;return!r||a.before&&a.after}},{key:"renderFileTypeFilter",value:function e(){var t=this.props,a=t.filters,r=t.showOnlyActiveFilters,n=t.showFileFilters;if(!n||r&&!a.fileType)return null;return f.a.createElement(U["a"],{title:te.t("File type")},f.a.createElement(P["a"],{filetype:a.fileType,onChange:this.onFileTypeChange}))}},{key:"renderFromFilter",value:function e(){var t=this;var a=this.props,r=a.filters,n=a.suggestions,i=a.fileSuggestions,s=a.loading,o=a.loadingFileSuggestions,l=a.showFileFilters;if(s&&!l||o&&l)return this.renderFromPlaceholder();var c=l?i:n;var u=[];var d={};c.from.forEach(function(e){var t=r.from.indexOf(e.id)>-1;t&&(d[e.id]=true);u.push({label:null,model:e,member:Object(I["isMember"])(e)&&e,mpim:Object(T["isMpim"])(e)&&e,channel:Object(T["isChannel"])(e)&&e,value:e.id,checked:t})});return f.a.createElement(U["a"],{title:te.t("Shared by",{fallbackHash:"b37554f695b15005fd23907b9488e0a8ad4bca5f"})},f.a.createElement(N["a"],{namespace:this.props.namespace,checkboxName:"from_filter",placeholderText:te.t("Enter a teammate\u2019s name",{fallbackHash:"670ca2ba897531a14d0d51f4b85583c58e9b03dc"}),showMoreOptionsAriaLabel:te.t("More people to filter by"),loadOptions:this.loadFromFilterOptions,renderVisibleOption:function e(t){return f.a.createElement(f.a.Fragment,null,f.a.createElement(R["b"],{className:"p-search_filter__from_avatar",userId:t.model.id,size:18,ariaHidden:"true",tabIndex:"-1",isInteractive:false}),f.a.createElement(F["a"],{className:"p-search_filter__from_name",id:t.model.id}))},renderOption:function e(t){return f.a.createElement(f.a.Fragment,null,f.a.createElement(R["b"],{className:"p-search_filter__from_avatar",userId:t.model.id,size:18,ariaHidden:"true",tabIndex:"-1",isInteractive:false}),f.a.createElement(F["a"],{className:"p-search_filter__from_name",id:t.model.id}))},visibleOptions:u,onOptionChange:function e(a){t.onMemberSelect(a.value,{offset:u.indexOf(a)})},onOptionAdd:function e(a){t.onMemberSelect(a.value,{offset:null})},filterOptions:function e(t,a){return a.filter(function(e){return!d[e.value]})}}))}},{key:"renderFromPlaceholder",value:function e(){return f.a.createElement(U["a"],{title:te.t("Shared by",{fallbackHash:"b37554f695b15005fd23907b9488e0a8ad4bca5f"})},f.a.createElement(Z["a"],{includeAvatar:true,variation:0}),f.a.createElement(Z["a"],{includeAvatar:true,variation:1}),f.a.createElement(C["a"],{className:"p-search_filter__more_link",disabled:true,"aria-label":te.t("More people to filter by"),"aria-expanded":"false"},te.t("More\u2026")))}},{key:"renderInFilter",value:function e(){var t=this;var a=this.props,r=a.filters,n=a.suggestions,i=a.fileSuggestions,s=a.loading,o=a.loadingFileSuggestions,l=a.showFileFilters;if(s&&!l||o&&l)return this.renderInPlaceholder();var c=l?i:n;var u=c.in;var d={};u.forEach(function(e){d[e.name]=(d[e.name]||0)+1});var p=[];var m={};u.forEach(function(e){var t=r.in.indexOf(e.id)>-1;t&&(m[e.id]=true);p.push({label:null,model:e,member:Object(I["isMember"])(e)&&e,mpim:Object(T["isMpim"])(e)&&e,channel:Object(T["isChannel"])(e)&&e,value:e.id,checked:t})});return f.a.createElement(U["a"],{title:te.t("Shared in",{fallbackHash:"69ecb3ce8045f77f734385ef657ab0fbd8f7d6bf"})},f.a.createElement(N["a"],{namespace:this.props.namespace,checkboxName:"in_filter",placeholderText:te.t("Enter a channel or direct message",{fallbackHash:"f95c98e247b782d3e4650fac888dac7c9ca383a9"}),showMoreOptionsAriaLabel:te.t("More channels or direct messages to filter by"),loadOptions:this.loadInFilterOptions,renderVisibleOption:function e(t){return f.a.createElement(M["a"],{className:"p-search_filter__in_channel",channel:t.model,showTeamIconForLocalChannels:d[t.model.name]>1,showTeamIconForXwsChannels:true})},renderOption:function e(t){return t.member?f.a.createElement(F["a"],{className:"p-search_filter__in_member",id:t.member.id}):f.a.createElement(M["a"],{className:"p-search_filter__in_channel",channel:t.model,teamIconSize:18,showTeamIconForLocalChannels:d[t.model.name]>1,showTeamIconForXwsChannels:true})},visibleOptions:p,onOptionChange:function e(a){t.onChannelSelect(a.value,{offset:p.indexOf(a)})},onOptionAdd:function e(a){t.onChannelSelect(a.value,{offset:null})},filterOptions:function e(t,a){return a.filter(function(e){return!m[e.value]})}}))}},{key:"renderInPlaceholder",value:function e(){return f.a.createElement(U["a"],{title:te.t("Shared in",{fallbackHash:"69ecb3ce8045f77f734385ef657ab0fbd8f7d6bf"})},f.a.createElement(Z["a"],{variation:0}),f.a.createElement(Z["a"],{variation:1}),f.a.createElement(C["a"],{className:"p-search_filter__more_link",disabled:true,"aria-label":te.t("More channels or direct messages to filter by"),"aria-expanded":"false"},te.t("More\u2026")))}},{key:"renderPrefs",value:function e(){var t=this;var a=this.props,r=a.showOnlyActiveFilters,n=a.isEnterpriseOrg,i=a.showDebugOption,s=a.isDebugInfoVisible,o=a.currentTeam,l=a.featureSearchLimitTeamFilter,c=a.searchOnlyWorkspaceTeamId,u=a.selfEnterpriseOrgName,d=a.loggedInEnterpriseTeams,p=a.showEnterpriseOptions;var m=this.props.searchPrefs,h=m.searchOnlyCurrentTeam,v=m.searchExcludeBots,b=m.searchOnlyMyChannels;if(r)return null;return f.a.createElement(f.a.Fragment,null,p&&l?f.a.createElement(U["a"],{title:te.t("Workspace"),"data-qa":"search-filter-workspace-section"},f.a.createElement("div",{className:"p-search_filter__select"},f.a.createElement($["a"],{loggedInEnterpriseTeams:d,selfEnterpriseOrgName:u,searchOnlyWorkspaceTeamId:c,onChange:this.onSearchLimitTeamFilterDropdownChange,featureSearchLimitTeamFilter:l}))):null,f.a.createElement(U["a"],{title:te.t("More options")},n&&!l?f.a.createElement("label",{className:y()("p-search_filter__checkbox_label",{"p-search_filter__checkbox_label--selected":h}),htmlFor:this.props.namespace+"-search_only_current_team"},f.a.createElement("input",{type:"checkbox",className:"flex_shrink_none",id:this.props.namespace+"-search_only_current_team",checked:h,onChange:function e(){return t.onSearchPrefChange(S["n"])}}),te.rt("Only search {currentTeamNameAndIcon}",{fallbackHash:"b326da02faf635a430ceb2bda81e5803542e7b21",currentTeamNameAndIcon:f.a.createElement(f.a.Fragment,null,f.a.createElement(D["b"],{className:"p-search_filter__workspace_only_team_icon",team:o,size:18})," ",f.a.createElement(x["a"],{id:o.id,bold:h}))})):null,f.a.createElement("label",{className:y()("p-search_filter__checkbox_label",{"p-search_filter__checkbox_label--selected":b}),htmlFor:this.props.namespace+"-search_only_my_channels"},f.a.createElement("input",{type:"checkbox",className:"flex_shrink_none",id:this.props.namespace+"-search_only_my_channels",checked:b,onChange:function e(){return t.onSearchPrefChange(S["o"])}}),te.t("Only search my channels")," "),f.a.createElement("label",{className:y()("p-search_filter__checkbox_label",{"p-search_filter__checkbox_label--selected":v}),htmlFor:this.props.namespace+"-search_exclude_bots"},f.a.createElement("input",{type:"checkbox",className:"flex_shrink_none",id:this.props.namespace+"-search_exclude_bots",checked:v,onChange:function e(){return t.onSearchPrefChange(S["k"])}}),te.t("Hide apps and bots")," "),i&&f.a.createElement("label",{className:y()("p-search_filter__checkbox_label",{"p-search_filter__checkbox_label--selected":s}),htmlFor:this.props.namespace+"-search_show_debug_info"},f.a.createElement("input",{type:"checkbox",className:"flex_shrink_none",id:this.props.namespace+"-search_show_debug_info",checked:s,onChange:function e(){return t.props.toggleDebugInfoVisible()}}),"[DEBUG] Show solr debug info"," ")))}},{key:"render",value:function e(){var t=this.props.filters.after&&k()(this.props.filters.after,L["a"]).add(1,"days").format(L["a"]);var a=this.props.filters.before&&k()(this.props.filters.before,L["a"]).subtract(1,"days").format(L["a"]);return f.a.createElement("div",{className:"p-search_filters"},this.renderFileTypeFilter(),this.renderFromFilter(),this.renderInFilter(),f.a.createElement(X,{onStartDateChange:this.onStartDateSelect,onEndDateChange:this.onEndDateSelect,startDate:t,endDate:a,context:this.props.showFileFilters?"files":"messages"}),this.renderPrefs())}}]);return t}(v["PureComponent"]);ne.displayName="MessagesFilterUIBase";ne.defaultProps=re},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(85);var s=a.n(i);var o=a(12);var l=a(156);var c=a(26);var u=a(218);var d=a.n(u);var p=a(245);var m=a.n(p);var h=a(88);var v=a.n(h);var f=a(110);var b=a.n(f);var g=a(169);var _=a.n(g);var y=a(138);var O=a.n(y);var k=a(147);var E=a.n(k);var C=a(135);var S=a.n(C);var w=a(185);var j=a.n(w);var I=a(2);var T=a(30);var A=a(0);var N=a(286);var P=a(13);var M=a.n(P);var D=a(6);var x=a(22);var R=a(35);var F=a(34);var L=a(886);var U=a(452);var B=a(11);var q=a(448);var G=a(491);var H=a(20);var W=a(148);var V=a(73);var K=a(370);var z=a(897);var Q=a(1324);var Y=a(150);var J=a(122);var X=a(38);var Z=a(755);var $=a(90);var ee=a(107);var te=a(41);var ae=a(9);var re=a(2740);var ne=a(16);var ie=a(1672);var se=a(1673);var oe=a(519);var le=a(2187);var ce=a(202);var ue=a(77);var de=a(165);var pe=a(55);var me=a(1236);var he=a(392);var ve=a(457);var fe=a(1689);var be=a(1631);var ge=a(1996);var _e=a(922);var ye=a(43);var Oe=a(2702);var ke=a(2703);var Ee=a(1997);var Ce=a(1452);var Se=a(1453);var we=a(485);var je=a(80);var Ie=a(906);var Te=a(1157);var Ae=a(1158);var Ne=a(21);var Pe=100;var Me=8;function De(e){var t=e.timestamps;return Object(I["last"])(t)}function xe(e){var t=e.messages,a=e.timestamps,r=e.threadTs,n=e.lastRead,i=e.reachedStart;var s=t[r];if(!s)return"0000000000.000000";var o=Object(I["filter"])(a,function(e){return e!==r});if(Object(te["getReplyCount"])(s)<=4)return"0000000000.000000";var l=Object(I["takeWhile"])(o,function(e){return e<=n});if(i&&l.length<=2)return"0000000000.000000";if(l.length===o.length)return Object(I["first"])(Object(I["takeRight"])(l,2));return Object(I["last"])(l)}var Re=xe;function Fe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function Le(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Fe(Object(a),true).forEach(function(t){v()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Fe(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function Ue(e){var t=e.threads,a=e.minimumVisibleTsByThread,r=e.maximumVisibleTsByThread,n=e.firstReadThreadKey,i=e.isDoingGlobalRefresh,s=e.currentUserId,o=e.initialLastReadByThread,l=e.hasMore,c=e.logError,u=void 0===c?I["noop"]:c;var d=[];var p=[];if(i){d.push("global-loading");p.push({type:"loading"})}var m=Object(I["dropWhile"])(t,function(e){return e.threadKey!==n});var h=m.some(function(e){return Object(I["values"])(e.messages).some(function(t){if(!t){u("Missing message in "+e.threadKey);return false}return t.ts>o[e.threadKey]&&t.user!==s})});t.forEach(function(e){var t=e.channelId,s=e.threadTs,l=e.timestamps,c=e.threadKey,u=e.messages,m=e.reachedStart;var v=a[c];var f=r[c];if(!i&&!h&&c===n){d.push("divider-"+c);p.push({type:"divider"})}var b={channelId:t,threadTs:s,threadKey:c};var g=l.some(function(e){return e>f});d.push("heading-"+c);p.push(Le({type:"heading"},b));d.push("root-"+c);p.push(Le({type:"root"},b));var _=!m||Object(I["some"])(l,function(e){return e!==s&&e<v});if(_){d.push("load_older-"+c);p.push(Le({type:"load_older",messages:u},b))}l.forEach(function(t){if(t===s)return;if(t<v)return;if(t>f)return;var a=u[t];if(Object(te["isHiddenInThread"])(a))return;var r=o&&t>o[e.threadKey];d.push(c+"-"+t);p.push(Le({type:"reply",ts:t,isNewReply:r},b))});if(g){d.push("load_newer-"+c);p.push(Le({type:"load_newer"},b))}d.push("footer-"+c);p.push(Le({type:"footer"},b))});if(l&&t){var v=Object(I["last"])(t);var f=v&&v.threadKey;d.push("loading_more_threads-"+f);p.push({type:"loading_more_threads"})}return{keys:d,rows:p}}var Be=Ue;function qe(e){var t=Object(I["filter"])(e,"subscribed");var a=Object(I["sortBy"])(t,function(e){var t=e.maxMarkableTs>e.lastRead;return(t?1:0)+"-"+e.maxMarkableTs});return a.reverse()}var Ge=a(166);var He=a(2030);var We={channelId:void 0,threadTs:void 0,replyUsers:[],replyUsersCount:0,rootMsgAuthor:void 0,firstItem:false,clogLinkClick:I["noop"]};var Ve=function(e){j()(t,e);function t(e){var a;b()(this,t);a=_()(this,O()(t).call(this,e));a.clogClick=a.clogClick.bind(E()(a));return a}S()(t,[{key:"clogClick",value:function e(){var t=this.props.clogLinkClick;t("CLICK_CHANNEL_NAME")}},{key:"render",value:function e(){var t=this.props,a=t.channelId,r=t.threadTs,i=t.replyUsers,s=t.replyUsersCount,o=t.rootMsgAuthor,l=t.firstItem;var c=Object(te["constructMsgPermalink"])(a,r);var u=M()("p-threads_view_header",{"p-threads_view_header--first":l});return n.a.createElement("div",{className:u},n.a.createElement(ye["a"],{href:c,className:"p-threads_view_header__permalink",clogLinkClick:this.clogClick},n.a.createElement(Ge["a"],{channelId:a,className:"p-threads_view_header__channel_name"})),n.a.createElement(He["a"],{replyUsers:i,replyUsersCount:s,rootMsgAuthor:o,className:"p-threads_view_header__participant_list"}))}}]);return t}(r["Component"]);Ve.displayName="Header";Ve.defaultProps=We;function Ke(e,t){var a=t.channelId,r=t.threadTs;var n=Object(V["a"])(e,a,r);if(!n)return null;var i=Object(te["getReplyUsers"])(n);var s=Object(te["getReplyUsersCount"])(n);var o;if(n.replies){i=Object(I["map"])(n.replies,"user");n.user&&i.push(n.user);s=Object(I["uniq"])(i).length}else n.user&&(o=n.user);return{replyUsers:i,replyUsersCount:s,rootMsgAuthor:o}}var ze=Object(o["connect"])(Ke)(Ve);var Qe=a(144);var Ye=a(861);var Je=a(590);var Xe=a(445);var Ze=a(521);var $e=a(838);var et=a(433);var tt=a(515);var at=a(1674);var rt=a(862);var nt=a(1325);var it=a(1056);var st=a(816);var ot=a(911);var lt=a(750);var ct=a(1658);var ut=a(1341);var dt=a(1326);var pt=a(1327);var mt={first:false,last:false,children:void 0};var ht=function(e){j()(t,e);function t(){b()(this,t);return _()(this,O()(t).apply(this,arguments))}S()(t,[{key:"render",value:function e(){var t=this.props,a=t.first,r=t.last;var i=M()("p-threads_view__default_background",{"p-threads_view__default_background--first":a,"p-threads_view__default_background--last":r});return n.a.createElement("div",{className:i},this.props.children)}}]);return t}(r["PureComponent"]);ht.displayName="ThreadsDefaultBackground";ht.defaultProps=mt;var vt=ht;var ft=new D["b"]("message_kit");var bt={className:void 0,theme:"light",clogLinkClick:I["noop"],clogThreadEvent:I["noop"],focused:false,renderActionsOffscreen:false,parentId:void 0};var gt=function(e){j()(t,e);function t(){b()(this,t);return _()(this,O()(t).apply(this,arguments))}S()(t,[{key:"getCompactMessageBody",value:function e(t){return n.a.createElement(pt["a"],null,n.a.createElement(Ze["a"],{msg:t,className:"p-threads_view_sender--compact"}),"\xa0\xa0",n.a.createElement(et["a"],{msg:t}),n.a.createElement(at["a"],{msg:t,blocksContainerContext:Qe["a"].all_threads}),n.a.createElement(Xe["b"],{msg:t}),n.a.createElement(Ye["a"],{msg:t}),n.a.createElement(rt["a"],{msg:t}))}},{key:"getMessageBody",value:function e(t){return n.a.createElement(n.a.Fragment,null,n.a.createElement(Ze["a"],{msg:t}),"\xa0\xa0",n.a.createElement($e["a"],{msg:t,relative:true,clickable:true},ft.t("Open in channel")),n.a.createElement("br",null),n.a.createElement(et["a"],{msg:t}),n.a.createElement(tt["a"],{msg:t,blocksContainerContext:Qe["a"].all_threads}),n.a.createElement(Xe["b"],{msg:t}),n.a.createElement(Ye["a"],{msg:t}),n.a.createElement(rt["a"],{msg:t}))}},{key:"render",value:function e(){var t=this.props,a=t.msg,r=t.theme,i=t.clogLinkClick,s=t.focused,o=t.renderActionsOffscreen,l=t.clogThreadEvent,c=t.parentId;var u="dense"===r;var d=M()("p-threads_view_root","c-message_kit__message","c-message_kit__thread_message","c-message_kit__thread_message--root",this.props.className);var p=u?n.a.createElement("div",{className:"p-threads_view_compact_timestamp"},n.a.createElement($e["a"],{msg:a,relative:true,compact:true,clickable:true},ft.t("Open in channel"))):null;var m=u?"above":"default";var h=u?this.getCompactMessageBody(a):this.getMessageBody(a);return n.a.createElement(nt["a"],{msg:a},n.a.createElement(vt,{first:true},n.a.createElement(it["a"],{msg:a,className:d},n.a.createElement(st["a"],{hovered:s},n.a.createElement(ot["a"],{msg:a,showComment:true,showShare:false,showJump:true,messageContainerType:x["MESSAGE_CONTAINERS"].THREADS_VIEW,renderOffscreen:o,position:m,clogLinkClick:i,clogThreadEvent:l,parentId:c},n.a.createElement(ut["a"],{msg:a},n.a.createElement(lt["a"],{light:n.a.createElement(Je["a"],{msg:a}),compact:p},n.a.createElement(ct["a"],{msg:a},n.a.createElement(dt["a"],{msg:a},h)))))))))}}]);return t}(r["PureComponent"]);gt.displayName="RootMessage";gt.defaultProps=bt;var _t=a(1698);var yt=new D["b"]("threads");var Ot={className:void 0,highlight:void 0,clearHighlight:void 0,focused:false,renderActionsOffscreen:false,isNewReply:false,theme:"light",clogThreadEvent:I["noop"],parentId:void 0};var kt=function(e){j()(t,e);function t(){b()(this,t);return _()(this,O()(t).apply(this,arguments))}S()(t,[{key:"getCompactMessageBody",value:function e(t){return n.a.createElement(pt["a"],null,n.a.createElement(Ze["a"],{msg:t,className:"p-threads_view_sender--compact"}),"\xa0\xa0",n.a.createElement(_t["a"],{msg:t},n.a.createElement(et["a"],{msg:t}),n.a.createElement(at["a"],{msg:t,blocksContainerContext:Qe["a"].all_threads}),n.a.createElement(Xe["b"],{msg:t}),n.a.createElement(Ye["a"],{msg:t})),n.a.createElement(rt["a"],{msg:t}))}},{key:"getMessageBody",value:function e(t){return n.a.createElement(n.a.Fragment,null,n.a.createElement(Ze["a"],{msg:t}),"\xa0\xa0",n.a.createElement($e["a"],{msg:t,relative:true,clickable:true},yt.t("Open in sidebar",{fallbackHash:"12680843c28c99d16fef1b02d2c6bbce0760c86b",fallbackHashNs:"templates_helpers"})),n.a.createElement("br",null),n.a.createElement(_t["a"],{msg:t},n.a.createElement(et["a"],{msg:t}),n.a.createElement(tt["a"],{msg:t,blocksContainerContext:Qe["a"].all_threads}),n.a.createElement(Xe["b"],{msg:t}),n.a.createElement(Ye["a"],{msg:t})),n.a.createElement(rt["a"],{msg:t}))}},{key:"render",value:function e(){var t=this.props,a=t.msg,r=t.highlight,i=t.clearHighlight,s=t.focused,o=t.renderActionsOffscreen,l=t.isNewReply,c=t.theme,u=t.clogThreadEvent,d=t.parentId;var p="dense"===c;var m=M()("c-message_kit__message","c-message_kit__thread_message","p-threads_view_reply",{"p-threads_view_reply--new_reply":l},this.props.className);var h=p?n.a.createElement("div",{className:"p-threads_view_compact_timestamp"},n.a.createElement($e["a"],{msg:a,relative:true,compact:true,clickable:true},yt.t("Open in sidebar",{fallbackHash:"12680843c28c99d16fef1b02d2c6bbce0760c86b",fallbackHashNs:"templates_helpers"}))):null;var v=p?"above":"default";var f=p?this.getCompactMessageBody(a):this.getMessageBody(a);return n.a.createElement(nt["a"],{msg:a},n.a.createElement(vt,null,n.a.createElement(it["a"],{msg:a,className:m,highlight:r,clearHighlight:i},n.a.createElement(st["a"],{hovered:s},n.a.createElement(ot["a"],{msg:a,showComment:false,showShare:false,messageContainerType:x["MESSAGE_CONTAINERS"].THREADS_VIEW,renderOffscreen:o,position:v,clogThreadEvent:u,parentId:d},n.a.createElement(ut["a"],{msg:a,showBroadcast:true},n.a.createElement(lt["a"],{light:n.a.createElement(Je["a"],{msg:a}),compact:h},n.a.createElement(dt["a"],{msg:a},f))))))))}}]);return t}(r["PureComponent"]);kt.displayName="ReplyMessage";kt.defaultProps=Ot;var Et=a(89);var Ct=new D["b"]("threads");var St={channelId:void 0,threadTs:void 0,minimumVisibleTs:void 0,rootMsg:void 0,messages:{},loadOlderReplies:I["noop"],theme:"light"};var wt=function(e){j()(t,e);function t(e){var a;b()(this,t);a=_()(this,O()(t).call(this,e));a.state={isLoading:false};a.onClick=a.onClick.bind(E()(a));return a}S()(t,[{key:"onClick",value:function e(){var t=this;var a=this.props,r=a.channelId,n=a.threadTs,i=a.loadOlderReplies;if(!this.state.isLoading&&i){this.setState(function(){return{isLoading:true}});i(r,n).then(function(){t.setState(function(){return{isLoading:false}})})}}},{key:"render",value:function e(){var t=this.props,a=t.minimumVisibleTs,r=t.rootMsg,i=t.messages,s=t.theme;var o="dense"===s;var l=[];var c=Object(te["getMessageTs"])(r);var u=Object(te["getLatestReply"])(r);Object(I["each"])(i,function(e,t){!Object(te["isEphemeral"])(e)&&!Object(te["isTempMsg"])(e)&&t!==c&&t<=u&&l.push(t)});var d=Object(te["getReplyCount"])(r);var p=d-l.length;var m=l.filter(function(e){return e<a});var h=Object(I["clamp"])(p+m.length,0,Pe);if(!h)return null;var v=M()("p_threads_view_load_older_button",{"p_threads_view_load_older_button--with-gutter":o});return n.a.createElement(vt,null,n.a.createElement("div",{className:v},n.a.createElement(ye["a"],{onClick:this.onClick},Ct.t("Show {showPrevCount, plural, =1 {# more reply} other {# more replies}}",{showPrevCount:h})),this.state.isLoading?n.a.createElement(Et["a"],{size:"medium",className:"margin_left_25",inline:true}):null))}}]);return t}(r["Component"]);wt.displayName="LoadOlderButton";wt.defaultProps=St;function jt(e,t){var a=t.channelId,r=t.threadTs,n=t.messages;var i=Object(V["a"])(e,a,r);return{rootMsg:i,messages:n}}var It=Object(o["connect"])(jt)(wt);var Tt=new D["b"]("threads");var At={channelId:void 0,threadTs:void 0,maximumVisibleTs:"0000000000.000000",timestamps:[],loadNewerReplies:I["noop"],theme:"light"};var Nt=function(e){j()(t,e);function t(e){var a;b()(this,t);a=_()(this,O()(t).call(this,e));a.onClick=a.onClick.bind(E()(a));return a}S()(t,[{key:"onClick",value:function e(){var t=this.props,a=t.channelId,r=t.threadTs,n=t.loadNewerReplies;n(a,r)}},{key:"render",value:function e(){var t=this.props,a=t.maximumVisibleTs,r=t.timestamps,i=t.theme;var s="dense"===i;var o=r.filter(function(e){return e>a});if(!o.length)return null;var l=Tt.t("{count, plural, =1 {# new reply} other {# new replies}}",{count:o.length});var c=M()("p_threads_view_load_newer_button",{"p_threads_view_load_newer_button--with-gutter":s});return n.a.createElement(vt,null,n.a.createElement("div",{className:c},n.a.createElement("span",{className:"p_threads_view_load_newer_button__blue_dot"},"\u2022"),n.a.createElement(ye["a"],{onClick:this.onClick},l)))}}]);return t}(r["Component"]);Nt.displayName="LoadNewerButton";Nt.defaultProps=At;function Pt(e,t){var a=t.channelId,r=t.threadTs;var n=Object(ee["getThreadKey"])(a,r);var i=Object(W["getTimestampsByChannelId"])(e,n)||{timestamps:[]},s=i.timestamps;return{timestamps:s}}var Mt=Object(o["connect"])(Pt)(Nt);var Dt=a(2798);function xt(e){return n.a.createElement(vt,{last:true},n.a.createElement("div",{className:"p-threads_view__footer"},n.a.createElement(Dt["a"],e)))}xt.displayName="Footer";var Rt=xt;var Ft=a(325);var Lt=a(180);var Ut=a(27);var Bt=a(238);var qt=a(760);var Gt=a(99);var Ht=":seedling:";var Wt=new D["b"]("threads");var Vt={emojiUrl:void 0};function Kt(e){var t=e.emojiUrl;var a=Object(Ft["a"])({zdLocale:Object(ue["a"])(),articleId:"115000769927"});return n.a.createElement(qt["a"],{description:Wt.t("Threads you\u2019re involved in will be collected right here."),imageUrl:t,isExtended:true,secondaryActionHref:a,secondaryActionText:Wt.t("Learn about threads"),title:Wt.t("Tend to your threads")})}Kt.displayName="ThreadsEmptyState";Kt.defaultProps=Vt;function zt(e){return{emojiUrl:Object(Bt["getEmojiUrl"])(e,{emojiMode:Object(Lt["h"])(e,{forceDisplay:true}),emojiSize:Gt["a"].LARGE,teamId:Object(Ut["getTeamId"])(e),text:Ht})}}var Qt=Object(o["connect"])(zt)(Kt);var Yt={className:void 0,label:void 0,showSpinner:false};var Jt=function(e){j()(t,e);function t(){b()(this,t);return _()(this,O()(t).apply(this,arguments))}S()(t,[{key:"render",value:function e(){var t=this.props,a=t.className,r=t.label,i=t.showSpinner;return n.a.createElement("div",{className:a},n.a.createElement("div",{className:"p-threads_view__divider_line"}),n.a.createElement("div",{className:"p-threads_view__divider_label"},i&&n.a.createElement(Et["a"],{color:"blue",size:"medium",className:"p-threads_view__divider_spinner"}),r))}}]);return t}(r["PureComponent"]);Jt.displayName="Divider";Jt.defaultProps=Yt;var Xt=new D["b"]("threads");var Zt={slowLoadingMore:false};var $t=function(e){j()(t,e);function t(){b()(this,t);return _()(this,O()(t).apply(this,arguments))}S()(t,[{key:"render",value:function e(){var t=this.props.slowLoadingMore;return n.a.createElement("div",{className:"p-threads_view__loading_more_threads"},t?Xt.t("Still loading... sorry for the long wait!"):Xt.t("Loading more messages...",{fallbackHash:"49f93cf64ea9ce3b4fee3f46ee40103e4840b333",fallbackHashNs:"unread"}))}}]);return t}(r["PureComponent"]);$t.displayName="LoadingMoreThreadsIndicator";$t.defaultProps=Zt;var ea=a(520);var ta=a(285);var aa=a(23);var ra=a(24);var na=new D["b"]("threads");var ia={totalNewThreads:0,userHasUnreadThreads:false,onClick:I["noop"],isIAP1Enabled:false,featureDangerouslyGuardIATranslations:false};var sa=function(e){j()(t,e);function t(e){var a;b()(this,t);a=_()(this,O()(t).call(this,e));a.onClick=a.onClick.bind(E()(a));return a}S()(t,[{key:"onClick",value:function e(){this.props.onClick()}},{key:"render",value:function e(){var t=this.props,a=t.totalNewThreads,r=t.userHasUnreadThreads,i=t.isIAP1Enabled,s=t.featureDangerouslyGuardIATranslations;if(!a)return null;if(!r)return null;var o=na.rt('{totalNewThreads,plural,=1{{totalNewThreads} new thread}other{{totalNewThreads} new threads}} <span className="p-new_threads_banner__cta">Click to refresh</span>',{totalNewThreads:a});s&&(o=na.rt("{totalNewThreads,plural,=1{{totalNewThreads} new thread}other{{totalNewThreads} new threads}}",{totalNewThreads:a}));return n.a.createElement(ra["c"],{className:"p-new_threads_banner p-message_pane__banner",onClick:this.onClick},i&&n.a.createElement(aa["b"],{type:"reload-small",className:"p-new_threads_banner__icon inline"}),o)}}]);return t}(r["Component"]);sa.displayName="NewThreadsBanner";sa.defaultProps=ia;function oa(e){var t=Object($["e"])(e);return{totalNewThreads:Object(U["getTotalNewThreads"])(e),userHasUnreadThreads:Object(B["isFeatureEnabled"])(e,"feature_incremental_unread_counts")?Object(ta["hasUnreadThreads"])(e):Object(ea["hasUnreadThreads"])(e),isIAP1Enabled:t,featureDangerouslyGuardIATranslations:t}}var la=Object(o["connect"])(oa)(sa);var ca=a(3794);function ua(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function da(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ua(Object(a),true).forEach(function(t){v()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ua(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var pa="THREADS-VIEW";var ma=new D["b"]("threads");var ha=Object(_e["b"])(gt);var va=Object(_e["b"])(kt);var fa={teamId:void 0,threads:void 0,threadsPresent:false,hasMore:true,refreshId:void 0,cursorTs:void 0,currentUserId:void 0,refreshThreads:I["noop"],loadMoreThreads:I["noop"],truncateThreads:I["noop"],logger:{error:I["noop"],info:I["noop"]},requestReplies:I["noop"],markThread:I["noop"],markAllThreads:I["noop"],featureAriaApplicationMode:false,theme:"light",makeMessageSummary:I["noop"],clearTotalNewThreads:I["noop"],clogger:{track:I["noop"]},allThreadsRefreshCount:void 0,showThreadOrRefresh:I["noop"],focusRequestedThreadKey:void 0,setFocusRequestedThreadKey:I["noop"],totalUnreadReplies:void 0,featureOfflineMode:false,isOffline:false,userAttentionIsOnChat:false,composerVisible:false,hasReceivedThreadedMessage:true,setUserPrefByApi:I["noop"],removeFromSectionNavigation:I["noop"],addToSectionNavigation:I["noop"],setInitialActiveSection:I["noop"],clientTheme:"light",featureMessageNavigationShortcuts:false,impressionLoggingWebGroup:"control",focusRequestedReplyTs:null,setFocusRequestedReplyTs:I["noop"],featureContextualMessageShortcuts:false,isIAPhase1Enabled:false};var ba=function(e){j()(t,e);S()(t,null,[{key:"getDerivedStateFromProps",value:function e(t,a){var r=t.threads,n=t.currentUserId,i=t.refreshId,s=t.logger;var o=a.minimumVisibleTsByThread,l=a.maximumVisibleTsByThread,c=a.initialLastReadByThread,u=a.firstReadThreadKey,d=a.threadKeysOrdered;if(i!==a.currentRefreshId){o={};l={};c={};u=null;d=[]}if(Object(I["isEmpty"])(d)){var p=qe(r);d=Object(I["map"])(p,"threadKey");if(a.currentRefreshId){var m=Object(I["map"])(r,"threadKey");Object(I["isEqual"])(d,m)||s.error(pa,"Thread order different after refreshing: "+d+" - "+m)}}if(!u){var h=Object(I["keyBy"])(r,"threadKey");u=Object(I["find"])(d,function(e){return h[e].maxMarkableTs<=h[e].lastRead})}var v={};r.forEach(function(e){if(o[e.threadKey])return;var t=Re(e);v[e.threadKey]=t});var f={};r.forEach(function(e){var t=l[e.threadKey];if(t){if(!e.messages[t]){t=Object(I["findLast"])(e.timestamps,function(e){return e<t});f[e.threadKey]=t}var a=Object(I["filter"])(e.timestamps,function(e){return e>t});var r=Object(I["some"])(a,function(t){var a=e.messages[t];return a&&a.user===n});var i=Object(I["some"])(a,function(t){var a=e.messages[t];return Object(te["isEphemeral"])(a)});if(!r&&!i)return}var s=De(e);f[e.threadKey]=s});var b={};r.forEach(function(e){if(c[e.threadKey])return;b[e.threadKey]=e.lastRead});if(Object(I["isEmpty"])(v)&&Object(I["isEmpty"])(f)&&Object(I["isEmpty"])(b)&&i===a.currentRefreshId&&u===a.firstReadThreadKey&&(d===a.threadKeysOrdered||Object(I["isEqual"])(d,a.threadKeysOrdered)))return null;return da({},a,{currentRefreshId:i,firstReadThreadKey:u,threadKeysOrdered:d,minimumVisibleTsByThread:da({},o,{},v),maximumVisibleTsByThread:da({},l,{},f),initialLastReadByThread:da({},c,{},b)})}}]);function t(e){var a;b()(this,t);a=_()(this,O()(t).call(this,e));Object(T["a"])(E()(a),["fetchAround","fetchPre","fetchPost","renderRow","loadOlderReplies","loadNewerReplies","tryAgain","getPropsForItem","isFocusableItem","onKeyDown","reloadThreads","clogThreadEvent","clogThreadCloseEvent","onFocusEnter","onFocusLeave","onItemTabWithin","shouldIgnoreArrowKeys","logError","logInfo","focus","onArrowKeyRight","onItemFocusEnter","onUpArrowInEmptyInput","onDownArrowInEmptyInput","onListScroll"]);a.state={minimumVisibleTsByThread:{},maximumVisibleTsByThread:{},initialLastReadByThread:{},currentRefreshId:void 0,firstReadThreadKey:void 0,threadKeysOrdered:[],isDoingGlobalRefresh:true,slowLoadingMore:false,errored:false,hasKeyboardFocus:false};a.pendingPromises=[];a.threadsEventSeqId=0;a.initializedTime=Date.now();a.clogThreadCloseHasBeenCalled=false;a.onListScrolledDebounce=Object(L["a"])(a.onListScroll,150);a.listRef=n.a.createRef();a.attachMessageImpressionLogger(e.teamId,e.impressionLoggingWebGroup,e.clogger);return a}S()(t,[{key:"componentDidMount",value:function e(){this.logInfo("mounting");this.clogThreadEvent({event:"THREADS_VIEW_OPEN",metadata:{is_iap1:this.props.isIAPhase1Enabled}});this.loadThreads();this.props.hasReceivedThreadedMessage||this.props.setUserPrefByApi({pref:"has_received_threaded_message",value:true})}},{key:"shouldComponentUpdate",value:function e(t,a){if(!Object(de["a"])(this.state,a))return true;var r=this.props,n=r.threads,i=m()(r,["threads"]);var s=t.threads,o=m()(t,["threads"]);if(!Object(de["a"])(i,o))return true;var l=3;if(!Object(de["a"])(n,s,l))return true;return false}},{key:"componentDidUpdate",value:function e(t){var a={prevUserAttentionIsOnChat:t.userAttentionIsOnChat,prevComposerVisible:t.composerVisible,currentUserAttentionIsOnChat:this.props.userAttentionIsOnChat,currentComposerVisible:this.props.composerVisible};Object(Te["a"])(a)&&this.props.addToSectionNavigation();Object(Ae["a"])(a)&&this.props.removeFromSectionNavigation();t.allThreadsRefreshCount<this.props.allThreadsRefreshCount&&false===this.loading&&this.reloadThreads();if(t.refreshId!==this.props.refreshId&&Object(I["isNumber"])(this.nextScrollTop)&&this.listRef.current){this.listRef.current.scrollToOffset(this.nextScrollTop);this.nextScrollTop=null}t.teamId!==this.props.teamId&&this.attachMessageImpressionLogger(this.props.teamId,this.props.impressionLoggingWebGroup,this.props.clogger)}},{key:"componentDidCatch",value:function e(t){this.setState(function(){return{errored:true}});this.logError("Threads view componentDidCatch");this.props.logger.error(pa,t,"threads_view_did_catch")}},{key:"componentWillUnmount",value:function e(){this.logInfo("unmounting");this.clogThreadCloseEvent("OTHER");this.pendingPromises.forEach(function(e){return e.cancel()});this.props.truncateThreads();this.messageImpressionLogger.flushAllVisibleMessages()}},{key:"onArrowKeyRight",value:function e(){var t=this.getKeyboardFocusedThreadKey();var a=Object(ee["decodeThreadKey"])(t),r=a.channelId,n=a.threadTs;if(!r||!n)return;this.props.showThreadOrRefresh({channelId:r,threadTs:n,requestFocus:true});this.blur()}},{key:"onDownArrowInEmptyInput",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.channelId,r=t.threadTs;if(!this.props.featureMessageNavigationShortcuts||!a||!r)return;var n=Object(ee["getThreadKey"])(a,r);n&&this.focusItemBelowInput(n)}},{key:"onFocusEnter",value:function e(t){var a=this;this.setState(function(){return{hasKeyboardFocus:t.isKeyboardFocus}},function(){var e=a.props,t=e.focusRequestedThreadKey,r=e.focusRequestedReplyTs;var n=a.listRef.current;if(!n||!t)return;var i=n.getActiveItem();var s=a.threadKeyForListKey(i);if(t&&s===t){a.logInfo("Focused "+t);a.props.setFocusRequestedThreadKey(null);r&&a.props.setFocusRequestedReplyTs(null)}})}},{key:"onFocusLeave",value:function e(){this.setState(function(){return{hasKeyboardFocus:false}})}},{key:"onItemFocusEnter",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var a=t.id,r=t.relatedTarget;if(!this.props.featureMessageNavigationShortcuts||!a)return;this.state.hasKeyboardFocus||this.setState(function(){return{hasKeyboardFocus:true}});var n=this.rows[this.keys.indexOf(a)];n&&"footer"===n.type&&r&&this.focusInput({channelId:n.channelId,threadTs:n.threadTs})}},{key:"onItemTabWithin",value:function e(){this.props.setInitialActiveSection()}},{key:"onKeyDown",value:function e(t){if(Object(oe["a"])(document.activeElement))return;if(!Object(le["a"])(t))return;var a=this.getKeyboardFocusedThreadKey();if(!a)return;var r=this.listRef&&this.listRef.current;r&&r.focusOnKey("footer-"+a)}},{key:"onListScroll",value:function e(){if(!(this.listRef&&this.listRef.current))return;var t=this.listRef.current.getVisibleRange(void 0,true),a=t.start,r=t.end;var n=this.rows.slice(a,r).filter(function(e){return["root","reply"].includes(e.type)}).map(function(e){return{ts:"root"===e.type?e.threadTs:e.ts,channel:e.channelId}});try{this.messageImpressionLogger.setCurrentlyVisibleMessages(n)}catch(e){this.props.logger.error("threads_view_unable_log_message_impressions","Threads View unable to log message impressions",e)}}},{key:"onUpArrowInEmptyInput",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.cmd,r=void 0!==a&&a,n=t.channelId,i=t.threadTs;if(!this.props.featureMessageNavigationShortcuts||r||!n||!i)return;var s=Object(ee["getThreadKey"])(n,i);s&&this.focusItemAboveInput(s)}},{key:"getKeyboardFocusedThreadKey",value:function e(){var t=this.listRef.current;if(!t)return null;var a=t.getInitialActiveItem();var r=this.threadKeyForListKey(a);return r}},{key:"getPropsForItem",value:function e(t){var a=t.index;if(!this.props.makeMessageSummary)return;var r=this.rows[a];if(!r||!r.type)return;if("root"!==r.type&&"reply"!==r.type)return;var n="root"===r.type?r.threadTs:r.ts;var i=this.props.makeMessageSummary({channelId:r.channelId,ts:n,hasFocus:this.state.hasKeyboardFocus,day:{ts:n},viewContext:x["MESSAGE_CONTAINERS"].THREADS_VIEW});return{"aria-label":i}}},{key:"attachMessageImpressionLogger",value:function e(t,a,r){if(this.messageImpressionLogger)try{this.messageImpressionLogger.flushAllVisibleMessages()}catch(e){this.props.logger.error("threads_view_unable_log_message_impressions","Threads View unable to log message impressions",e)}this.messageImpressionLogger=new ie["a"]({teamId:t,experimentGroup:a,clogger:r,messageViewLocation:se["a"].ALL_THREADS})}},{key:"blur",value:function e(){var t=this.listRef.current;t&&t.blur()}},{key:"clogThreadCloseEvent",value:function e(t){if(this.clogThreadCloseHasBeenCalled)return;var a={view_session_elapsed_time:Date.now()-this.initializedTime,view_session_index:this.threadsEventSeqId,num_threads_loaded:this.props.threads.length,view_exit_event:t};this.clogThreadEvent({event:"THREADS_VIEW_CLOSE",metadata:a});this.clogThreadCloseHasBeenCalled=true}},{key:"clogThreadEvent",value:function e(t){var a=t.event,r=t.metadata;var n=this.props.clogger;n.track(a,da({is_threads_view:1,is_flexpane:0,view_session_index:this.threadsEventSeqId},r));this.incrementTrackingSeqId()}},{key:"determineFocusItemForRender",value:function e(t,a){var r=this.props,n=r.focusRequestedThreadKey,i=r.featureContextualMessageShortcuts,s=r.focusRequestedReplyTs;if(n){if(i&&s)return n+"-"+s;return"root-"+n}var o=this.listRef.current;if(!o)return null;var l=o.getInitialActiveItem();if(!l)return null;var c=Object(I["startsWith"])(l,"load_older-")||Object(I["startsWith"])(l,"load_newer-");if(c&&!Object(I["includes"])(a,l)){var u=t.indexOf(l);if(-1===u)return null;var d=t[u-1];var p=a.indexOf(d);if(-1===p)return null;var m=a[p+1];if(m)return m}return null}},{key:"fetchAround",value:function e(){return false}},{key:"fetchPost",value:function e(){var t=this;var a=this.props,r=a.threads,n=a.hasMore,i=a.cursorTs;if(this.loading||!n||!r||!r.length||!i)return false;var s=setTimeout(function(){t.setState(function(e){return da({},e,{slowLoadingMore:true})})},x["SLOW_API_RESPONSE_TIME"]);this.loading=true;this.logInfo("Loading more from "+i);var o=this.props.loadMoreThreads({currentTs:i,limit:Me}).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.threads;if(!r)return;t.setState(function(e){var t=Object(I["map"])(a,"threadKey");return{threadKeysOrdered:Object(I["uniq"])([].concat(d()(e.threadKeysOrdered),d()(t)))}})}).finally(function(){var e=t.state.slowLoadingMore;t.loading=false;Object(I["remove"])(t.pendingPromises,o);clearTimeout(s);e&&t.setState(function(e){return da({},e,{slowLoadingMore:false})})});this.pendingPromises.push(o);return o}},{key:"fetchPre",value:function e(){return false}},{key:"focus",value:function e(){var t=this.listRef.current;t&&t.focus()}},{key:"focusInput",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.channelId,r=t.threadTs;if(!a||!r)return;var n=Object(ce["a"])({viewContext:x["MESSAGE_CONTAINERS"].THREADS_VIEW,channelId:a,threadTs:r});if(n){var i=function e(){n.focus()};Object(ue["c"])()?setTimeout(i,0):i()}}},{key:"focusItemAboveInput",value:function e(t){if(!t)return;var a=this.keys[this.keys.indexOf("footer-"+t)-1];a&&this.listRef.current&&this.listRef.current.focusOnKey(a)}},{key:"focusItemBelowInput",value:function e(t){if(!t)return;var a=this.keys[this.keys.indexOf("footer-"+t)+1];a&&this.listRef.current&&this.listRef.current.focusOnKey(a)}},{key:"incrementTrackingSeqId",value:function e(){this.threadsEventSeqId+=1}},{key:"isFocusableItem",value:function e(t){var a=t.index;var r=this.rows[a];if(!r)return false;var n=["root","reply","heading","load_older","load_newer"];this.props.featureMessageNavigationShortcuts&&n.push("footer");return Object(I["includes"])(n,r.type)}},{key:"loadNewerReplies",value:function e(t,a){var r=this;var n=Object(ee["getThreadKey"])(t,a);var i=Object(I["find"])(this.props.threads,{threadKey:n});if(!i){this.logError("Could not find "+n+" in loadNewerReplies");return}this.setState(function(e){return da({},e,{maximumVisibleTsByThread:da({},e.maximumVisibleTsByThread,v()({},n,De(i)))})},function(){r.logInfo("Marking "+n+" to "+i.maxMarkableTs);r.props.markThread({channelId:t,ts:a,lastRead:i.maxMarkableTs,reason:"mark-thread-as-read-from-threads-view"})})}},{key:"loadOlderReplies",value:function e(t,a){var r=this;var n=Object(ee["getThreadKey"])(t,a);var i=Object(I["find"])(this.props.threads,{threadKey:n});if(!i){this.logError("Could not find "+n+" in loadOlderReplies");return Promise.resolve()}this.logInfo("Loading older replies in "+n);var s=i.timestamps;var o=this.state.minimumVisibleTsByThread[i.threadKey];var l=Object(I["filter"])(s,function(e){return e<o&&e!==a});if(l.length>=Pe){this.setState(function(e){return da({},e,{minimumVisibleTsByThread:da({},e.minimumVisibleTsByThread,v()({},n,Object(I["first"])(Object(I["takeRight"])(l,Pe))))})});return Promise.resolve()}if(i.reachedStart){this.setState(function(e){return da({},e,{minimumVisibleTsByThread:da({},e.minimumVisibleTsByThread,v()({},n,"0000000000.000000"))})});return Promise.resolve()}var c=this.props.requestReplies({channelId:t,threadTs:a,latest:Object(I["first"])(s),limit:Pe}).then(function(e){var t=e.msgs;var a=Object(I["first"])(Object(I["takeRight"])(t,Pe-l.length));r.setState(function(e){return da({},e,{minimumVisibleTsByThread:da({},e.minimumVisibleTsByThread,v()({},n,a.ts))})})}).finally(function(){Object(I["remove"])(r.pendingPromises,c)});this.pendingPromises.push(c);return c}},{key:"loadThreads",value:function e(){var t=this;this.loading&&this.logError("Unexpectedly already loading");if(!this.props.refreshThreads)return;this.loading=true;var a=this.props.refreshThreads({limit:Me,refreshId:"threads-view-refresh-"+Date.now()}).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.maxTs;t.listRef&&t.listRef.current&&(t.nextScrollTop=t.listRef.current.getScrollTop());if(a){t.logInfo("marking all: "+a);t.props.markAllThreads({maxTs:a})}else t.logInfo("no threads to mark");t.setState(function(){return{isDoingGlobalRefresh:false,errored:false}})}).catch(function(e){t.setState(function(){return{errored:true}});t.logError("refreshThreads caught error");t.props.logger.error(pa,e,"threads_view_loading_error")}).finally(function(){t.loading=false;Object(I["remove"])(t.pendingPromises,a)});this.pendingPromises.push(a)}},{key:"logError",value:function e(t){this.props.logger.error(pa,t)}},{key:"logInfo",value:function e(t){this.props.logger.info(pa,t)}},{key:"reloadThreads",value:function e(){var t=this;this.logInfo("Reloading threads");this.setState(function(){return{currentRefreshId:null}},function(){t.listRef&&t.listRef.current&&t.listRef.current.scrollToOffset(0);t.props.clearTotalNewThreads();t.loadThreads()})}},{key:"shouldIgnoreArrowKeys",value:function e(t){if(Object(oe["a"])(t.target))return true;return!this.state.hasKeyboardFocus}},{key:"threadKeyForListKey",value:function e(t){if(!t)return null;var a=this.keys.indexOf(t);var r=this.rows[a];if(r)return r.threadKey;return null}},{key:"tryAgain",value:function e(){var t=this;this.setState(function(e){return da({},e,{errored:false})},function(){return t.loadThreads()})}},{key:"renderRow",value:function e(t,a){var r=a.hasFocus,i=a.itemId;var s=this.rows[t];var o=this.state,l=o.minimumVisibleTsByThread,c=o.maximumVisibleTsByThread,u=o.slowLoadingMore,d=o.hasKeyboardFocus;var p=this.props,m=p.theme,h=p.featureOfflineMode,v=p.isOffline;var f=M()("p-threads_view__divider",{"p-threads_view__divider--first":0===t});var b=ma.t("Loading threads\u2026");switch(s.type){case"heading":return n.a.createElement(ze,{channelId:s.channelId,threadTs:s.threadTs,firstItem:0===t,clogLinkClick:this.clogThreadCloseEvent});case"root":return n.a.createElement(ha,{channelId:s.channelId,ts:s.threadTs,theme:m,clogLinkClick:this.clogThreadCloseEvent,focused:r,renderActionsOffscreen:d,clogThreadEvent:this.clogThreadEvent,parentId:i});case"load_older":return n.a.createElement(It,{messages:s.messages,channelId:s.channelId,threadTs:s.threadTs,minimumVisibleTs:l[s.threadKey],loadOlderReplies:this.loadOlderReplies,theme:m});case"load_newer":return n.a.createElement(Mt,{channelId:s.channelId,threadTs:s.threadTs,maximumVisibleTs:c[s.threadKey],loadNewerReplies:this.loadNewerReplies,theme:m});case"reply":return n.a.createElement(va,{channelId:s.channelId,ts:s.ts,minimumVisibleTs:l[s.threadKey],isNewReply:s.isNewReply,theme:m,focused:r,renderActionsOffscreen:d,clogThreadEvent:this.clogThreadEvent,parentId:i});case"divider":return n.a.createElement(Jt,{className:f,label:ma.t("You\u2019re up to date")});case"loading":return n.a.createElement(Jt,{className:f,label:b,showSpinner:true});case"footer":return n.a.createElement(Rt,{channelId:s.channelId,threadTs:s.threadTs,focusInputOnMount:false,viewContext:x["MESSAGE_CONTAINERS"].THREADS_VIEW,clogThreadEvent:this.clogThreadEvent,onUpArrow:this.onUpArrowInEmptyInput,onDownArrowWhenEmpty:this.onDownArrowInEmptyInput});case"loading_more_threads":if(h&&v)return n.a.createElement(Se["a"],{caption:ma.t("Go online to load more threads.")});return n.a.createElement($t,{slowLoadingMore:u});default:this.logError("Unknown row type "+s.type);return null}}},{key:"renderTopBanners",value:function e(){return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"p-threads_view__top_banners"},n.a.createElement(fe["a"],null),n.a.createElement(be["a"],null,n.a.createElement(ge["a"],null)),n.a.createElement(la,{onClick:this.reloadThreads})),n.a.createElement(Ee["a"],null))}},{key:"render",value:function e(){var t=this;var a=this.props,r=a.threads,i=a.threadsPresent,s=a.currentUserId,o=a.hasMore,l=a.featureAriaApplicationMode,c=a.totalUnreadReplies,u=a.featureOfflineMode,d=a.isOffline;var p=this.state,m=p.minimumVisibleTsByThread,h=p.maximumVisibleTsByThread,v=p.firstReadThreadKey,f=p.threadKeysOrdered,b=p.isDoingGlobalRefresh,g=p.initialLastReadByThread,_=p.errored;if(_)return n.a.createElement(n.a.Fragment,null,this.renderTopBanners(),n.a.createElement("div",{className:"p-threads_view"},n.a.createElement(ke["a"],{tryAgain:this.tryAgain,"data-qa":"threads_view_error"},ma.t("Something\u2019s fishy! Slack can\u2019t seem to load your threads.")," ",n.a.createElement("br",null),ma.rt("You can try again, but if the problem persists, please <a>drop us a line.</a>",null,function(e){var t=e.text;return n.a.createElement(ye["a"],{href:"https://slack.com/help/contact"},t)}))));if(u&&d&&!i)return n.a.createElement(n.a.Fragment,null,this.renderTopBanners(),n.a.createElement(Ce["a"],{caption:ma.t("Go online to get the latest threads.")}));if(!i)return n.a.createElement(n.a.Fragment,null,this.renderTopBanners(),n.a.createElement(Oe["a"],{clientTheme:this.props.clientTheme}));var y=Object(I["keyBy"])(r,"threadKey");var O=Object(I["compact"])(Object(I["map"])(f,function(e){return y[e]}));var k=this.keys;var E=Be({threads:O,minimumVisibleTsByThread:m,maximumVisibleTsByThread:h,firstReadThreadKey:v,isDoingGlobalRefresh:b,currentUserId:s,initialLastReadByThread:g,hasMore:o,logError:this.logError}),C=E.rows,S=E.keys;this.rows=C;this.keys=S;var w=this.determineFocusItemForRender(k,this.keys);if(0===O.length)return n.a.createElement(n.a.Fragment,null,this.renderTopBanners(),n.a.createElement(Qt,null));var j=this.keys.filter(function(e){return Object(I["startsWith"])(e,"footer-")});var T=[{keys:["right"],handler:this.onArrowKeyRight,filter:this.shouldIgnoreArrowKeys}];var A;A=ma.t("Threads");Object(I["isNumber"])(c)&&(A=ma.t("Threads, {totalUnreadReplies, plural, =0 {no new replies} =1 {# new reply} other {# new replies}}",{totalUnreadReplies:c}));var P=n.a.createElement(he["a"],{id:x["MESSAGE_CONTAINERS"].THREADS_VIEW},n.a.createElement("div",{className:"p-threads_view",onKeyDown:this.onKeyDown},this.renderTopBanners(),n.a.createElement(N["a"],null,function(e){var a=e.width,r=e.height;return n.a.createElement(ve["a"],{id:"threads_view",ref:t.listRef,width:a,height:r,keys:t.keys,rowRenderer:t.renderRow,isFocusableItem:t.isFocusableItem,loadAround:t.fetchAround,loadPre:t.fetchPre,loadPost:t.fetchPost,persistentKeys:j,getPropsForItem:t.getPropsForItem,"aria-label":A,useAriaApplicationMode:l,onFocusEnter:t.onFocusEnter,onFocusLeave:t.onFocusLeave,onScroll:t.onListScrolledDebounce,onItemTabWithin:t.onItemTabWithin,onItemFocusEnter:t.onItemFocusEnter,keyCommands:T,activeItem:w})})));if(Object(F["a"])())return P;return n.a.createElement(me["a"],{component:this,order:.1},P)}}]);return t}(r["Component"]);ba.displayName="ThreadsView";ba.defaultProps=fa;var ga=Object(F["a"])()?Object(Z["a"])(ba,"ThreadsView",{index:0}):ba;function _a(e){var t=Object(ne["a"])({state:e});var a=Object(R["a"])({state:e});var r=Object(U["getThreads"])(e);var n=Object(I["compact"])(Object(I["map"])(r,function(a){var r=a.threadKey;var n=Object(ee["decodeThreadKey"])(r),i=n.channelId,s=n.threadTs;var o=Object(H["e"])(e,i);if(!o||Object(pe["e"])(o)){t.warn("Skipping "+r+" in unknown or non-existent channel");return null}if(Object(ae["isPublicChannel"])(o)&&!Object(ae["isMemberOfChannel"])(o)){t.warn("Skipping "+r+" in non-member public channel");return null}var l=Object(W["getPotentiallyOutdatedTimestamps"])(e,r)||{timestamps:[],reachedStart:true},c=l.timestamps,u=l.reachedStart;var d={};var p=Object(V["a"])(e,i,s);if(!p){t.warn("Skipping "+r+" with missing root message");return null}d[s]=p;c.forEach(function(t){var a=Object(V["a"])(e,i,t);a&&(d[t]=a)});var m=Object(G["getSubscriptionState"])(e,{channelId:i,ts:s});return{threadKey:r,channelId:i,threadTs:s,reachedStart:u,timestamps:c,messages:d,lastRead:m.lastRead,subscribed:m.subscribed,maxMarkableTs:Object(re["a"])(e,i,c)||s}}));return{logger:t,clogger:a,teamId:Object(Ne["b"])(e),featureAriaApplicationMode:Object(B["isFeatureEnabled"])(e,"feature_aria_application_mode"),threadsPresent:void 0!==r,threads:n,hasMore:Object(U["getThreadsHasMore"])(e),refreshId:Object(U["getThreadsRefreshId"])(e),cursorTs:Object(U["getThreadsCursorTs"])(e),currentUserId:Object(B["getCurrentUserId"])(e),theme:Object(K["a"])(e),allThreadsRefreshCount:Object(U["getAllThreadsRefreshCounter"])(e),focusRequestedThreadKey:Object(U["getFocusRequestedThreadKey"])(e),totalUnreadReplies:Object(U["getTotalUnreadReplies"])(e),featureOfflineMode:Object(B["isFeatureEnabled"])(e,"feature_offline_mode"),isOffline:!Object(Y["c"])(e),userAttentionIsOnChat:Object(we["e"])(e),composerVisible:Object(Ie["isComposerVisible"])(e),hasReceivedThreadedMessage:Object(X["k"])(e,"has_received_threaded_message"),featureMessageNavigationShortcuts:Object(B["isFeatureEnabled"])(e,"feature_message_navigation_shortcuts"),impressionLoggingWebGroup:Object(je["getGroupForUser"])(e,"impression_logging_web"),focusRequestedReplyTs:Object(U["getFocusRequestedReplyTs"])(e),featureContextualMessageShortcuts:Object(B["isFeatureEnabled"])(e,"feature_contextual_message_shortcuts"),isIAPhase1Enabled:Object($["e"])(e)}}function ya(e){return{refreshThreads:function t(){return e(U["refreshThreads"].apply(void 0,arguments))},loadMoreThreads:function t(){return e(U["loadMoreThreads"].apply(void 0,arguments))},truncateThreads:function t(){return e(U["truncateThreads"].apply(void 0,arguments))},requestReplies:function t(){return e(q["requestReplies"].apply(void 0,arguments))},clearTotalNewThreads:function t(){return e(U["clearTotalNewThreads"].apply(void 0,arguments))},markThread:function t(){return e(G["markThread"].apply(void 0,arguments))},markAllThreads:function t(){return e(z["c"].apply(void 0,arguments))},makeMessageSummary:function t(){return e(Q["a"].apply(void 0,arguments))},showThreadOrRefresh:function t(){return e(q["showThreadOrRefresh"].apply(void 0,arguments))},setFocusRequestedThreadKey:function t(){return e(U["setFocusRequestedThreadKey"].apply(void 0,arguments))},setUserPrefByApi:function t(){return e(J["d"].apply(void 0,arguments))},setFocusRequestedReplyTs:function t(){return e(U["setFocusRequestedReplyTs"].apply(void 0,arguments))}}}var Oa=Object(o["connect"])(_a,ya)(ga);var ka=Oa;var Ea=a(197);var Ca=function e(t,a){if(!t)throw new Error("mountThreadsView must be called with a teamId parameter");Object(l["a"])(n.a.createElement(o["Provider"],{store:Object(c["f"])(t)},n.a.createElement(Ea["a"],null,n.a.createElement(ka,null))),a)};var Sa=function e(t){s.a.unmountComponentAtNode(t)};var wa=a(52);Object(wa["a"])("interop.mountThreadsView",Ca);Object(wa["a"])("interop.unmountThreadsView",Sa)},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){"use strict";a.d(t,"a",function(){return d});var r=a(0);var n=a(94);var i=a(124);var s=a(87);var o=a(756);var l=a(33);var c=a(27);var u=a(21);var d=Object(n["e"])("Opens the docs Gantry app in a new window",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelId;var n=t();var d=r||Object(s["a"])(n);var p=Object(l["d"])(n);var m=Object(c["getTeamId"])(p);var h=Object(u["a"])(n);var v={origin_team:h||m};Object(i["a"])(d)&&(v.origin_channel=d);e(Object(o["c"])({pathname:"/docs/"+m,queryStringParams:v,windowOptions:{frame:true,center:true,height:600,width:800,titleBarStyle:"default"}}))});d.meta={name:"createPost",key:"actionsDocsCreatePostCreatePost",description:"Opens the docs Gantry app in a new window"};d.propTypes=r["default"].object},function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(85);var s=a.n(i);var o=a(12);var l=a(26);var c=a(52);var u=a(196);var d=a.n(u);var p=a(110);var m=a.n(p);var h=a(135);var v=a.n(h);var f=a(169);var b=a.n(f);var g=a(138);var _=a.n(g);var y=a(185);var O=a.n(y);var k=a(0);var E=a(2);var C=a(6);var S=a(777);var w=a(218);var j=a.n(w);var I=a(88);var T=a.n(I);var A=a(147);var N=a.n(A);var P=a(1987);var M=a(494);var D=a(23);var x=a(89);var R=a(43);var F=a(131);var L=a(387);var U=a(232);var B=a(2029);var q=a(245);var G=a.n(q);var H=a(1630);var W={showingSelection:false,titleFormatter:void 0,onToggleShowingSelection:void 0,onToggleSelect:void 0,onAction:void 0,"data-qa":"selection_bar",itemMapper:null,position:void 0};var V=function(e){O()(t,e);function t(){m()(this,t);return b()(this,_()(t).apply(this,arguments))}v()(t,[{key:"getBaseSelectionBarProps",value:function e(t){var a=this.props.itemMapper;var r=a?t.map(a):t;var n=Object(E["reduce"])(r,function(e,t){return e+(t.isSelected?1:0)},0);return{items:r,availableCount:t.length,selectedCount:n}}},{key:"render",value:function e(){var t=this.props,a=t.items,r=G()(t,["items"]);return n.a.createElement(H["b"],d()({},this.getBaseSelectionBarProps(a),r))}}]);return t}(r["PureComponent"]);V.displayName="SelectionBar";V.defaultProps=W;var K=V;var z=K;var Q=a(2694);var Y=Q["a"];var J=a(649);var X=a(11);var Z=a(106);var $=a(39);var ee=a(208);var te=a(229);var ae=function e(t){var a=t.date;return n.a.createElement(n.a.Fragment,null,Object(ee["a"])(a),n.a.createElement("br",null),n.a.createElement("span",{className:"sk_foreground_max"},Object(te["a"])(a)))};var re=ae;var ne=re;var ie=a(24);var se=a(54);var oe=new C["b"]("migration_table");var le={statusPageURL:null,isOrgOwner:false,disableActions:false,onApprove:E["noop"],onDecline:E["noop"]};var ce=function(e){O()(t,e);function t(){m()(this,t);return b()(this,_()(t).apply(this,arguments))}v()(t,[{key:"renderInProgress",value:function e(){var t;t=this.props.featureMigrationOrgApprovals?n.a.createElement("div",{className:"p-migration_table__in_progress"},n.a.createElement(x["a"],{color:"blue",size:"large"}),n.a.createElement("div",null,oe.rt("In progress"),n.a.createElement("br",null),this.renderStatusLink())):this.renderStatusLink();return t}},{key:"renderInviteResponse",value:function e(){var t=this.props,a=t.migrationInfo,r=t.featureMigrationOrgApprovals;var i=null;r&&(a.date_declined?i=n.a.createElement("span",{className:"sk_raspberry_red"},oe.t("Declined")):a.date_approved&&a.approver&&(i=oe.rt("Approved <div>by {name}</div>",{name:a.approver.real_name},function(e){var t=e.key,a=e.text;return n.a.createElement("div",{key:t,className:"sk_foreground_max"},a)})));return i}},{key:"renderPendingResponse",value:function e(){var t=this.props,a=t.isOrgOwner,r=t.disableActions,i=t.onApprove,s=t.onDecline,o=t.migrationInfo,l=t.featureMigrationOrgApprovals;if(!l)return null;var c=null;c=a?n.a.createElement("div",{className:"p-migration_table__buttons"},n.a.createElement(ie["d"],{type:"outline",size:"small",disabled:r,onClick:function e(){return s(o.id)}},oe.t("Decline")),n.a.createElement(ie["d"],{type:"primary",size:"small",disabled:r,onClick:function e(){return i(o.id)},className:"margin_left_50"},oe.t("Approve"))):n.a.createElement(n.a.Fragment,null,oe.t("Pending approval")," ",n.a.createElement(se["c"],{tip:oe.t("Migrations can only be approved by an Organization Owner"),position:"top"},n.a.createElement(D["b"],{type:"question-circle",inline:true,className:"sk_foreground_high"})));return c}},{key:"renderScheduled",value:function e(){var t=(new Date).getTime()/1e3;var a=t+28800;var r=this.props,i=r.migrationInfo,s=r.featureMigrationOrgApprovals;var o=null;o=i.date_approved||i.date_declined?i.date_scheduled>t&&i.date_scheduled<=a?s?n.a.createElement(n.a.Fragment,null,oe.t("Starting soon"),n.a.createElement("br",null),this.renderStatusLink()):this.renderStatusLink():this.renderInviteResponse():i.date_scheduled<=t&&s?n.a.createElement(n.a.Fragment,null,n.a.createElement("span",{className:"sk_raspberry_red"},oe.t("Canceled")),n.a.createElement("br",null),n.a.createElement("span",{className:"sk_foreground_max"},oe.t("Contact Slack to reschedule"))):this.renderPendingResponse();return o}},{key:"renderStatusLink",value:function e(){var t=this.props,a=t.statusPageURL,r=t.featureMigrationOrgApprovals;var i;i=r?n.a.createElement(R["a"],{href:a},oe.t("View status")):n.a.createElement("div",{className:"p-migration_table__link"},n.a.createElement(R["a"],{href:a},n.a.createElement("span",null,oe.t("View Migration Status"))),n.a.createElement(D["b"],{type:"chevron-right"}));return i}},{key:"render",value:function e(){var t=this.props.migrationInfo;var a=null;switch(t.status){case"scheduled":a=this.renderScheduled();break;case"in_progress":case"in_background":a=this.renderInProgress();break;case"complete":case"invite_rejected":a=this.renderInviteResponse();break;default:break}return a}}]);return t}(r["PureComponent"]);ce.displayName="MigrationStatusRowItem";ce.defaultProps=le;var ue=ce;var de=ue;var pe=a(57);var me=new C["b"]("migration_table");var he={statusPageURL:null,isOrgOwner:false,disableActions:false,onDecline:E["noop"]};var ve=function(e){O()(t,e);function t(e){var a;m()(this,t);a=b()(this,_()(t).call(this,e));a.renderMenu=a.renderMenu.bind(N()(a));return a}v()(t,[{key:"renderMenu",value:function e(t){var a=this.props,r=a.migrationInfo,i=a.statusPageURL,s=a.isOrgOwner,o=a.onDecline,l=a.disableActions;return n.a.createElement(pe["f"],d()({},t,{width:"auto"}),n.a.createElement(pe["b"],{label:me.t("View status"),href:i,disabled:l}),s?n.a.createElement(pe["b"],{danger:true,label:me.t("Decline"),onSelected:function e(){return o(r.id)},disabled:l}):null)}},{key:"renderMenuTrigger",value:function e(){var t=this.props.disableActions;return n.a.createElement(pe["e"],{renderMenu:this.renderMenu,position:"bottom-right"},n.a.createElement(ie["c"],{disabled:t},n.a.createElement(D["b"],{type:"ellipsis"})))}},{key:"render",value:function e(){var t=this.props,a=t.migrationInfo,r=t.featureMigrationOrgApprovals;if(!r)return null;var n=null;"scheduled"!==a.status||!a.date_approved||(n=this.renderMenuTrigger());return n}}]);return t}(r["PureComponent"]);ve.displayName="MigrationTableRowMenu";ve.defaultProps=he;var fe=ve;var be=fe;var ge=a(117);var _e=a(518);var ye=a(3282);var Oe=new C["b"]("migration_table");var ke="approve";var Ee={onSubmit:E["noop"]};var Ce=function(e){O()(t,e);function t(e){var a;m()(this,t);a=b()(this,_()(t).call(this,e));a.state={isPending:false};a.handleSubmit=a.handleSubmit.bind(N()(a));return a}v()(t,[{key:"getBulkConfirmTableRows",value:function e(t){var a=this.props.migrations;var r={workspace:function e(t){return n.a.createElement(Y,{team:t.team})},date:function e(t){return n.a.createElement(ne,{date:t.migration_info.date_scheduled})}};return a.map(function(e){return{id:"mig-"+e.migration_info.id,items:t.map(function(t){var a=t.id,n=t.className;return{id:a,className:n,value:r[a]&&r[a](e)}})}})}},{key:"getTextTitle",value:function e(){var t=this.props,a=t.migrations,r=t.action,n=t.featureMigrationOrgApprovals;if(!n)return null;var i=null;i=r===ke?Oe.t("{count, plural, =1 {Approve migration?} other {Approve # migrations?}}",{count:a.length}):Oe.t("{count, plural, =1 {Decline migration?} other {Decline # migrations?}}",{count:a.length});return i}},{key:"handleSubmit",value:function e(){var t=this;this.setState(function(){return{isPending:true}});return this.props.onSubmit().finally(function(){return t.setState(function(){return{isPending:false}})})}},{key:"renderBulkConfirmList",value:function e(){if(!this.props.featureMigrationOrgApprovals)return null;var t=[{id:"workspace",value:Oe.t("Workspace"),className:"p-migration_response_confirm_dialog__workspace_item",noHover:true},{id:"date",value:Oe.t("Scheduled for"),className:"p-migration_response_confirm_dialog__date_item",noHover:true}];return n.a.createElement("div",{className:"p-migration_response_confirm_dialog__table"},n.a.createElement(M["b"],{headers:t,rows:this.getBulkConfirmTableRows(t),disableHover:true,height:"35vh"}))}},{key:"renderContent",value:function e(){var t=this.props,a=t.migrations,r=t.action,i=t.featureMigrationOrgApprovals;if(!i)return null;var s=null;if(a.length>1)s=n.a.createElement(n.a.Fragment,null,r===ke?Oe.t("Would you like to approve these migrations?"):Oe.t("If you decline these migrations, you'll need to contact Slack to reschedule them."),this.renderBulkConfirmList());else{var o=a[0];s=r===ke?Oe.rt("Approve the migration of the workspace <strong>{name}</strong> for <strong>{date} at {time}</strong>?",{name:o.team.name,date:Object(ee["a"])(o.migration_info.date_scheduled),time:Object(te["a"])(o.migration_info.date_scheduled)}):Oe.rt("If you decline this migration of <strong>{name}</strong>, you\u2019ll need to contact Slack to reschedule it.",{name:o.team.name})}return s}},{key:"renderTitle",value:function e(){var t=this.props,a=t.migrations,r=t.featureMigrationOrgApprovals;if(!r)return null;var i=this.getTextTitle();1===a.length&&(i=n.a.createElement("div",{className:"display_flex align_items_center"},n.a.createElement(_e["a"],{entityType:"workspace",dimension:24,entityData:a[0].team,customClasses:"margin_right_75"}),i));return i}},{key:"render",value:function e(){var t=this.props,a=t.action,r=t.featureMigrationOrgApprovals;if(!r)return null;return n.a.createElement(ge["a"],{cancelText:Oe.t("Cancel"),goButtonText:a===ke?Oe.t("Approve"):Oe.t("Decline"),goButtonType:a===ke?"primary":"danger",goButtonIsPending:this.state.isPending,goButtonIsDisabled:this.state.isPending,onGo:this.handleSubmit,title:this.renderTitle(),titleAria:this.getTextTitle(),useSlackScrollbar:false},this.renderContent())}}]);return t}(r["PureComponent"]);Ce.displayName="MigrationResponseConfirmDialog";Ce.defaultProps=Ee;var Se=Ce;var we=Se;var je=new C["b"]("migration_table");var Ie={enqueueToast:E["noop"],openModal:E["noop"],scheduled:false,isOrgOwner:false,orgURL:null};var Te="approve";var Ae="decline";function Ne(e){return"mig-"+e}function Pe(e){return"migration-table-"+e+"-checkbox"}function Me(e){var t=(new Date).getTime()/1e3;var a=e.migration_info;return"scheduled"===a.status&&a.date_scheduled>t}function De(e){var t=(new Date).getTime()/1e3;var a=e.migration_info;var r="invite_rejected"===a.status;var n="scheduled"===a.status&&a.date_scheduled<=t&&!a.date_approved&&!a.date_declined;return r||n}var xe=function(e){O()(t,e);function t(e){var a;m()(this,t);a=b()(this,_()(t).call(this,e));a.state={selectedRows:[],completedMigrations:[],scheduledMigrations:[],pendingUpdates:[],recentlyUpdated:[],isCompletedLoading:true,isScheduledLoading:true,errorAlert:false,tableHeight:null,tablePaddingBottom:0,showingSelection:false};a.refreshTableHeight=a.refreshTableHeight.bind(N()(a));a.refreshTableHeightPolitely=a.refreshTableHeightPolitely.bind(N()(a));return a}v()(t,[{key:"UNSAFE_componentWillMount",value:function e(){var t=this.props.scheduled;if(t)return this.fetchScheduledMigrations();return this.fetchCompletedMigrations()}},{key:"componentDidMount",value:function e(){this.refreshTableHeightPolitely();window.addEventListener("resize",this.refreshTableHeightPolitely)}},{key:"componentDidUpdate",value:function e(t,a){var r=this.state.selectedRows;var n=this.props.scheduled;var i=r.length>0;var s=a&&a.selectedRows&&a.selectedRows.length>0;i!==s&&this.refreshTableHeightPolitely();if(n!==t.scheduled){if(n)return this.fetchScheduledMigrations();return this.fetchCompletedMigrations()}return E["noop"]}},{key:"componentWillUnmount",value:function e(){window.removeEventListener("resize",this.refreshTableHeightPolitely)}},{key:"getStatusPageURL",value:function e(t){return this.props.orgURL+"/migrations/"+t+"/status"}},{key:"createHeaders",value:function e(){var t=this.props,a=t.featureMigrationOrgApprovals,r=t.scheduled;var n=r?je.t("Scheduled for"):je.t("Completed on");var i="";a&&(i=r?je.t("Status"):je.t("Approved by"));var s=[{id:"workspace",value:je.t("Workspace"),className:"p-migration_table__workspace",noHover:true},{id:"date",value:n,className:"p-migration_table__date",noHover:true},{id:"status",value:i,className:"p-migration_table__status",noHover:true}];a&&r&&s.push({id:"contextMenu",value:"",className:"p-migration_table__context_menu",noHover:true});return s}},{key:"displayErrorAlert",value:function e(){return n.a.createElement("div",{className:"p-migration_table__empty_state","data-qa":"migration-table-error-alert"},n.a.createElement("span",{className:"p-migration_table__empty_state_icon"},n.a.createElement(D["b"],{type:"warning-filled"})),n.a.createElement("div",{className:"p-migration_table__empty_state_title"},je.rt("Unable to load past migrations")),n.a.createElement("div",{className:"p-migration_table__empty_state_subtitle"},je.rt("Something went wrong that prevented past migrations from loading. If you continue to have trouble loading this page, please <a>contact us</a>.",null,function(e){var t=e.key,a=e.text;return n.a.createElement(R["a"],{key:t,href:"https://slack.com/help/contact"},a)})))}},{key:"fetchCompletedMigrations",value:function e(){var t=this;this.setState(function(){return{isCompletedLoading:true}});return this.props.fetchCompletedMigrations().then(function(e){var a=Object(E["sortBy"])(e,[function(e){return-e.migration_info.date_finished}]);t.setState(function(){return{completedMigrations:a,isCompletedLoading:false}})}).catch(function(){t.setState(function(){return{errorAlert:true,isCompletedLoading:false}})}).finally(this.refreshTableHeightPolitely)}},{key:"fetchScheduledMigrations",value:function e(){var t=this;var a=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var r=this.props.featureMigrationOrgApprovals;a||this.setState(function(){return{isScheduledLoading:true}});return this.props.fetchScheduledMigrations().then(function(e){var a=Object(E["sortBy"])(e,[function(e){var t;t=!r||e.migration_info.date_approved||e.migration_info.date_declined?{in_progress:1,in_background:1,scheduled:2,invite_rejected:3}[e.migration_info.status]:0;return t},function(e){return e.migration_info.date_scheduled}]);t.setState(function(){return{scheduledMigrations:a,isScheduledLoading:false}})}).catch(function(){t.setState(function(){return{errorAlert:true,isScheduledLoading:false}})}).finally(this.refreshTableHeightPolitely)}},{key:"makeTableRows",value:function e(t,a){var r=this;var i=this.props,s=i.isOrgOwner,o=i.featureMigrationOrgApprovals;var l=this.state,c=l.pendingUpdates,u=l.recentlyUpdated,d=l.selectedRows,p=l.showingSelection;var m={workspace:function e(t){return n.a.createElement(Y,{team:t.team,inactive:De(t)})},date:function e(t){return r.renderDateRow(t.migration_info)},status:function e(t){return r.renderStatusRow(t)},contextMenu:function e(t){return n.a.createElement(be,{statusPageURL:r.getStatusPageURL(t.migration_info.id),isOrgOwner:s,migrationInfo:t.migration_info,featureMigrationOrgApprovals:o,disableActions:c.includes(t.migration_info.id),onDecline:function e(){return r.showResponseConfirmDialog([t],Ae)}})}};var h=t;p&&(h=h.filter(function(e){return d.includes(Ne(e.migration_info.id))}));return h.map(function(e){return{id:Ne(e.migration_info.id),highlight:u.includes(e.migration_info.id),selectable:Me(e),inactive:De(e),items:a.map(function(t){var a=t.id,r=t.className;return{id:a,className:r,value:m[a]&&m[a](e)}})}})}},{key:"refreshTableHeight",value:function e(){var t=this.state.selectedRows;var a=window.innerHeight;if(!this.tableViewRef)return;var r=this.tableViewRef.querySelectorAll(".c-table_view_all_rows_container")[0];if(!r)return;var n=r.getBoundingClientRect();var i=t.length>0?H["a"]:0;var s=a-(n&&n.top);var o=64;var l=Math.max(o,s-i);this.setState(function(){return{tableHeight:l,tablePaddingBottom:i}})}},{key:"refreshTableHeightPolitely",value:function e(){window.requestAnimationFrame(this.refreshTableHeight)}},{key:"respondToInvite",value:function e(t,a){var r,n=this;if(!this.props.featureMigrationOrgApprovals)return null;var i=(r={},T()(r,Te,this.props.approveMigrations),T()(r,Ae,this.props.declineMigrations),r)[a];var s=t.map(function(e){return e.migration_info.id});this.setState(function(e){var t=e.pendingUpdates;return{pendingUpdates:Object(E["union"])(t,s)}});return i({migrationIds:s}).then(function(){return n.handleInviteResponseSuccess(s,a)}).catch(function(e){var t=e.data;if("multiple_errors"===t.error&&Object(E["isArray"])(t.errors)){n.showMultipleErrorToasts(t.errors);if(s.length!==t.errors.length){var r=t.errors.map(function(e){return e.migration_id});var i=E["without"].apply(void 0,[s].concat(j()(r)));n.handleInviteResponseSuccess(i,a)}}else n.showErrorToast()}).finally(function(){return n.setState(function(e){var t=e.pendingUpdates;return{pendingUpdates:E["without"].apply(void 0,[t].concat(j()(s)))}})})}},{key:"handleInviteResponseSuccess",value:function e(t,a){var r=this;this.fetchScheduledMigrations(true);var i=null;i=a===Te?je.t("{count, plural, =1 {Migration approved} other {# migrations approved}}",{count:t.length}):je.t("{count, plural, =1 {Migration declined} other {# migrations declined}}",{count:t.length});this.props.enqueueToast({element:n.a.createElement(F["b"],null,i)});this.setState(function(e){var a=e.recentlyUpdated;return{recentlyUpdated:Object(E["union"])(a,t),selectedRows:[],showingSelection:false}});setTimeout(function(){r.setState(function(e){var a=e.recentlyUpdated;return{recentlyUpdated:E["without"].apply(void 0,[a].concat(j()(t)))}})},M["b"].HIGHLIGHT_DURATION)}},{key:"showMultipleErrorToasts",value:function e(t){var a=this;var r={};var n=false;t.forEach(function(e){var t=e.error;if(r[t])return;switch(t){case"invitation_expired":a.showErrorToast(je.t("This migration link has expired. To get a new link and complete the migration, contact Slack.",{fallbackHash:"df85741ad00338b07077088b4d602fd42aac14c4"}));r[t]=true;break;default:if(n)break;a.showErrorToast();n=true}})}},{key:"showErrorToast",value:function e(t){this.props.enqueueToast({element:n.a.createElement(F["b"],null,t||je.t("Something\u2019s gone wrong. Mind trying again in a moment?"))})}},{key:"showResponseConfirmDialog",value:function e(t,a){var r=this;this.props.openModal({element:n.a.createElement(we,{migrations:t,action:a,onSubmit:function e(){return r.respondToInvite(t,a)},featureMigrationOrgApprovals:this.props.featureMigrationOrgApprovals})})}},{key:"renderCompleted",value:function e(){var t=this.state,a=t.isCompletedLoading,r=t.completedMigrations;if(!a){var n=0===r.length?this.renderEmptyCompleted():this.renderTable(r);return n}return this.renderLoadingState()}},{key:"renderDateRow",value:function e(t){var a=this.props.featureMigrationOrgApprovals;var r;switch(t.status){case"in_progress":case"in_background":r=a?n.a.createElement(ne,{date:t.date_scheduled}):n.a.createElement("div",{className:"p-migration_table__in_progress"},n.a.createElement(x["a"],{color:"blue",size:"large"}),n.a.createElement("b",null,je.rt("In Progress")));break;case"scheduled":r=n.a.createElement(ne,{date:t.date_scheduled});break;case"complete":r=n.a.createElement(ne,{date:t.date_finished});break;default:break}return r}},{key:"renderEmptyCompleted",value:function e(){var t=this.props.enterpriseName;return n.a.createElement("div",{className:"p-migration_table__empty_state","data-qa":"migration-empty-completed"},n.a.createElement("div",{className:"p-migration_table__empty_state_title"},je.rt("No past migrations.")),n.a.createElement("div",{className:"p-migration_table__empty_state_subtitle"},je.rt("There aren't any completed workspace migrations for <b>{enterpriseName}</b> yet, but when there are, you'll find them here.",{enterpriseName:t})))}},{key:"renderEmptyScheduled",value:function e(){var t=this.props.enterpriseName;return n.a.createElement("div",{className:"p-migration_table__empty_state","data-qa":"migration-empty-scheduled"},n.a.createElement("div",{className:"p-migration_table__empty_state_title"},je.rt("No scheduled migrations.")),n.a.createElement("div",{className:"p-migration_table__empty_state_subtitle"},je.rt("When new workspace migrations are scheduled for <b>{enterpriseName}</b>, you'll see them here.",{enterpriseName:t})))}},{key:"renderLoadingState",value:function e(){return n.a.createElement("div",{className:"p-migration_table__loading"},n.a.createElement(x["a"],{color:"blue",size:"jumbo","data-qa":"migration-loading-spinner"}))}},{key:"renderMigrationCount",value:function e(t){var a=je.t("{count, plural, =1 {# scheduled migration} other {# scheduled migrations}}",{count:t});return a}},{key:"renderScheduled",value:function e(){var t=this.state,a=t.isScheduledLoading,r=t.scheduledMigrations;if(!a){var i=0===r.length?this.renderEmptyScheduled():n.a.createElement(n.a.Fragment,null,n.a.createElement(P["a"],{title:this.renderMigrationCount(r.length),"data-qa":"migration-count-action-bar"}),this.renderTable(r));return i}return this.renderLoadingState()}},{key:"renderSelectionBar",value:function e(t){var a=this;var r=this.props.featureMigrationOrgApprovals;if(!r)return null;var i=this.state,s=i.selectedRows,o=i.pendingUpdates,l=i.showingSelection;var c=t.filter(Me);var u=t.filter(function(e){return s.includes(Ne(e.migration_info.id))});var d=u.filter(function(e){return!e.migration_info.date_approved});return n.a.createElement(z,{position:"absolute",items:c,itemMapper:function e(t){return{selectionElementId:Pe(Ne(t.migration_info.id)),previewText:t.team.name,isSelected:s.includes(Ne(t.migration_info.id))}},actions:[{id:Ae,label:je.t("Decline"),disabled:o.length>0},{id:Te,label:je.t("Approve"),isPrimary:true,disabled:o.length>0||0===d.length,appliesToCount:d.length!==s.length?d.length:void 0}],titleFormatter:function e(t){return je.t("{count, plural, =1 {# migration selected} other {# migrations selected}}",{count:t})},showingSelection:l,onToggleSelect:function e(t){return a.setState(function(e){var a=e.showingSelection;return{selectedRows:t?c.map(function(e){return Ne(e.migration_info.id)}):[],showingSelection:!!t&&a}})},onAction:function e(t){a.showResponseConfirmDialog(t===Te?d:u,t)},onToggleShowingSelection:function e(t){return a.setState(function(){return{showingSelection:t}})},"data-qa":"migration-table-selection-bar"})}},{key:"renderStatusRow",value:function e(t){var a=this;var r=this.props,i=r.scheduled,s=r.isOrgOwner,o=r.featureMigrationOrgApprovals;var l=this.state.pendingUpdates;var c=null;c=i?n.a.createElement(de,{statusPageURL:this.getStatusPageURL(t.migration_info.id),isOrgOwner:s,migrationInfo:t.migration_info,featureMigrationOrgApprovals:o,disableActions:l.includes(t.migration_info.id),onApprove:function e(){return a.showResponseConfirmDialog([t],Te)},onDecline:function e(){return a.showResponseConfirmDialog([t],Ae)}}):t.migration_info.approver?t.migration_info.approver.real_name:null;return c}},{key:"renderTable",value:function e(t){var a=this;var r=this.props,i=r.scheduled,s=r.isOrgOwner,o=r.featureMigrationOrgApprovals;var l=this.state,c=l.tableHeight,u=l.selectedRows,p=l.tablePaddingBottom;var m=this.createHeaders();var h=this.makeTableRows(t,m);var v={headers:m,rows:h,height:c+"px","data-qa":"migration-table-rows"};return n.a.createElement("div",{className:"p-migration_table__table_view_container",ref:function e(t){a.tableViewRef=t}},i&&s&&o?n.a.createElement("div",{style:{paddingBottom:p}},n.a.createElement(B["a"],d()({},v,{id:"migration-table",selectedRows:u,onSelect:function e(t){return a.setState(function(e){var a=e.showingSelection;return{selectedRows:t,showingSelection:t.length>0&&a}})},getCheckboxId:Pe})),this.renderSelectionBar(t)):n.a.createElement(M["b"],v))}},{key:"render",value:function e(){var t=this.props.scheduled;var a=this.state.errorAlert;if(a)return this.displayErrorAlert();return n.a.createElement(n.a.Fragment,null,t?this.renderScheduled():this.renderCompleted(),n.a.createElement(L["a"],null))}}]);return t}(r["PureComponent"]);xe.displayName="MigrationTableView";xe.defaultProps=Ie;var Re=function e(t,a){var r=a.enterpriseDomain;return{orgURL:Object(J["b"])(t,r),featureMigrationOrgApprovals:Object(X["isFeatureEnabled"])(t,"feature_migration_org_approvals")}};var Fe={enqueueToast:Z["enqueueToast"],openModal:$["openModal"],fetchCompletedMigrations:U["l"],fetchScheduledMigrations:U["p"],approveMigrations:U["c"],declineMigrations:U["i"]};var Le=xe;var Ue=Object(o["connect"])(Re,Fe)(xe);var Be=Ue;var qe=a(3284);var Ge=new C["b"]("migration_table");var He={isOrgOwner:false,tabActionOnClick:E["noop"],defaultTabId:""};var We=function(e){O()(t,e);function t(){m()(this,t);return b()(this,_()(t).apply(this,arguments))}v()(t,[{key:"renderHeader",value:function e(){var t=Ge.t("Migrations");return n.a.createElement("div",{className:"p-migration_table_indent","data-qa":"migration-header"},n.a.createElement("h1",null,t))}},{key:"render",value:function e(){var t=this.props,a=t.tabActionOnClick,r=t.defaultTabId;var i=[{title:Ge.t("Scheduled Migrations"),id:"scheduled",content:n.a.createElement(Be,d()({},this.props,{scheduled:true})),onClick:a,"data-qa":"migration-tab-scheduled"},{title:Ge.t("Past Migrations"),id:"past",content:n.a.createElement(Be,this.props),onClick:a,"data-qa":"migration-tab-completed"}];return n.a.createElement("div",{className:"p-migration_table","data-qa":"migration-page"},this.renderHeader(),n.a.createElement("div",{className:"p-migration_table_migrations"},n.a.createElement(S["a"],{"data-qa":"migration-tabs",tabs:i,defaultTabId:r,fullHeight:true})))}}]);return t}(r["PureComponent"]);We.displayName="MigrationTable";We.defaultProps=He;var Ve=We;var Ke=Ve;Object(c["a"])("interop.migrationTable",{render:function e(t,a,r){if(!t)throw new Error("migrationTable render must be called with a teamId parameter");var i=Object(l["f"])(t);s.a.render(n.a.createElement(o["Provider"],{store:i},n.a.createElement(Ke,r)),a)},stop:function e(t){s.a.unmountComponentAtNode(t)}})},function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(12);var s=a(156);var o=a(26);var l=a(0);var c=a(119);var u=a(833);var d=a(110);var p=a.n(d);var m=a(135);var h=a.n(m);var v=a(169);var f=a.n(v);var b=a(138);var g=a.n(b);var _=a(147);var y=a.n(_);var O=a(185);var k=a.n(O);var E=a(2);var C=a.n(E);var S=a(30);var w=a(286);var j=a(13);var I=a.n(j);var T=a(129);var A=a(38);var N=a(25);var P=a(262);var M=a(1218);var D=a(82);var x=a(17);var R=a(102);var F=a(189);var L=a(6);var U=a(562);var B=a(55);var q=a(1441);var G=a(1964);var H=a(43);var W=a(852);var V=a(2018);var K=a(547);var z=a(2732);var Q=a(2473);var Y={comments:l["default"].array,fileId:l["default"].string};var J={comments:void 0,fileId:void 0};var X=function(e){k()(t,e);function t(e){var a;p()(this,t);a=f()(this,g()(t).call(this,e));a.toggle=a.toggle.bind(y()(a));a.state={expanded:false};return a}h()(t,[{key:"toggle",value:function e(){this.setState(function(e){return{expanded:!e.expanded}})}},{key:"render",value:function e(){var t=this.props,a=t.comments,r=t.fileId;var i=this.state.expanded;if(Object(E["isEmpty"])(a))return null;var s=a.map(function(e){var t=e.id;return n.a.createElement(V["a"],{key:t,comment:e,fileId:r})});var o=I()("p-comment_list",{"p-comment_list--expanded":i});return n.a.createElement("div",{className:o},n.a.createElement(z["a"],{expanded:i,commentCount:a.length,toggleList:this.toggle}),n.a.createElement("div",{className:"p-comment_list__comments"},s))}}]);return t}(K["a"]);X.displayName="CommentList";X.propTypes=Y;X.defaultProps=J;var Z=X;var $=V["a"];var ee=a(11);var te=a(909);var ae=a(1684);var re=a(2753);var ne=a(492);var ie=a(34);var se=a(16);var oe=a(104);var le=a(33);var ce=a(20);var ue=a(1154);var de=a(41);var pe=a(9);var me=a(27);var he=a(564);var ve=a(866);var fe=a(1457);var be=new L["b"]("file-details");var ge={teamIdForIcon:void 0,teamDomain:void 0,channel:void 0,openThread:C.a.noop};var _e=function(e){k()(t,e);function t(e){var a;p()(this,t);a=f()(this,g()(t).call(this,e));a.onShareClick=a.onShareClick.bind(y()(a));return a}h()(t,[{key:"onShareClick",value:function e(t){var a=this.props,r=a.share,n=a.fileId,i=a.openThread;t.preventDefault();var s=r.threadTs||r.ts;var o=s!==r.ts?r.ts:null;var l="file_details";var c=n;i({channelId:r.channelId,threadTs:s,highlightTs:o,origin:l,originId:c})}},{key:"getReplyCountText",value:function e(t,a,r){var i=t||{},s=i.replyCount,o=i.ts,l=i.threadTs;if(!s)return null;var c="";c=l&&o!==l?be.t("from a thread"):be.t("{replyCount, plural, =1 {# reply} other {# replies}}",{replyCount:s});return n.a.createElement(n.a.Fragment,null,n.a.createElement("span",{className:"p-file_details__share_metadata_dot"},"\xb7"),n.a.createElement(H["a"],{href:a,onClick:r},n.a.createElement("span",{className:"p-file_details__share_metadata_reply_count"},c)))}},{key:"renderEntity",value:function e(){var t=this.props,a=t.share,r=t.teamIdForIcon,i=t.channel;if(r){var s={id:a.channelId,name:a.channelName,is_channel:true,is_private:!a.isPublic,shared_team_ids:a.sharedTeamIds,team_id:r};return n.a.createElement(he["a"],{channel:s,className:"p-file_details__share_channel",truncate:true,truncateWidth:"100%"})}if(Object(pe["isIm"])(i))return n.a.createElement(ve["a"],{className:"p-file_details__share_channel",showStatus:false,id:Object(pe["getMemberIdFromIm"])(i)});if(Object(pe["isMpim"])(i))return n.a.createElement(fe["a"],{className:"p-file_details__share_channel",id:i.id});return n.a.createElement(he["a"],{channelId:a.channelId,className:"p-file_details__share_channel",truncate:true,truncateWidth:"100%"})}},{key:"render",value:function e(){var t=this.props,a=t.share,r=t.teamIdForIcon,i=t.teamDomain;var s;var o;r||(o=this.onShareClick);i&&(s=Object(de["constructAbsoluteMsgPermalink"])({teamDomain:i,channelId:a.channelId,ts:a.ts,threadTs:a.threadTs}));return n.a.createElement("div",{className:"p-file_details__share",key:a.channelId+"_"+a.ts},n.a.createElement(H["a"],{href:s,onClick:o,className:"p-file_details__share_channel_link"},this.renderEntity()),n.a.createElement("span",{className:"p-file_details__share_metadata"},n.a.createElement(ue["a"],{timestamp:a.ts,relative:true}),this.getReplyCountText(a,s,o)))}}]);return t}(r["Component"]);_e.displayName="FileDetailsShareLocation";_e.defaultProps=ge;function ye(e,t){var a=t.share;var r=Object(le["d"])(e);if(!r)return{};var n=r.id;var i=r.enterprise_id;var s=r.domain;var o;var l=a.teamId===i&&!C.a.isEmpty(a.sharedTeamIds)&&!C.a.includes(a.sharedTeamIds,n);var c=a.teamId&&a.teamId!==n&&a.teamId!==i;if(l||c){o=C.a.first(a.sharedTeamIds)||a.teamId;var u=Object(le["l"])(e,[o]);s=Object(me["isExistent"])(u&&u[0])?u[0].domain:null}var d;o||(d=Object(ce["e"])(e,a.channelId));return{teamIdForIcon:o,teamDomain:s,channel:d}}var Oe=Object(i["connect"])(ye,{openThread:oe["m"]})(_e);var ke=new L["b"]("file-details");var Ee={file:null};var Ce=function(e){k()(t,e);function t(){p()(this,t);return f()(this,g()(t).apply(this,arguments))}h()(t,[{key:"getFormattedSharesData",value:function e(t){var a=this;var r=[];C.a.forEach(t.public,function(e,t){C.a.forEach(e,function(e){var n=true;var i=a.formatShareData(e,t,n);i&&r.push(i)})});var n=[];C.a.forEach(t.private,function(e,t){C.a.forEach(e,function(e){var n=false;var i=a.formatShareData(e,t,n);i&&r.push(i)})});var i=r.concat(n);return C.a.orderBy(i,"ts","desc")}},{key:"formatShareData",value:function e(t,a,r){if("0000000000.000000"===t.ts){Object(se["b"])().warn("Skipping 0000000000.000000 share for "+this.props.file.id);return null}var n=t.reply_count||null;var i=t.reply_users;var s=t.reply_users_count;var o=t.latest_reply||t.ts;var l=t.internal_team_ids;return{channelId:a,replyCount:n,replyUsers:i,replyUsersCount:s,latest:o,ts:t.ts,threadTs:t.thread_ts,channelName:t.channel_name,teamId:t.team_id,sharedTeamIds:l,isPublic:r}}},{key:"render",value:function e(){var t=this.props.file;if(!t||!t.shares)return null;var a=t.shares;var r=!!Object.keys(t.shares).length;var i=r&&this.getFormattedSharesData(a);return r&&n.a.createElement("div",{className:"p-file_details__shares"},n.a.createElement("div",{className:"p-file_details__share_divider"},n.a.createElement("span",null,ke.rt("Shared in")),n.a.createElement("hr",null)),i.map(function(e){return n.a.createElement(Oe,{key:e.ts+"-"+e.channelId,share:e,fileId:t.id})}))}}]);return t}(r["PureComponent"]);Ce.displayName="FileDetailsShares";Ce.defaultProps=Ee;var Se=a(1057);var we=a(24);var je=new L["b"]("file-details");var Ie={tryAgain:E["noop"]};function Te(e){var t=e.tryAgain;return n.a.createElement("div",{role:"alert",className:"p-file_details__error"},n.a.createElement("p",{className:"p-file_details__error_header"},je.t("Couldn't load file")),n.a.createElement("p",null,je.rt("If the problem persists, please <a>drop us a line.</a>",null,function(e){var t=e.text,a=e.key;return n.a.createElement(H["a"],{href:"https://slack.com/help/contact",rel:"noopener noreferrer",key:a},t)})),n.a.createElement(we["d"],{type:"primary",onClick:t},je.t("Try Again")))}Te.displayName="FileDetailsError";Te.defaultProps=Ie;var Ae=a(23);var Ne=new L["b"]("file-details");function Pe(){return n.a.createElement("div",{role:"alert",className:"p-file_details__tombstone"},n.a.createElement("div",{className:"p-file_details__tombstone_icon"},n.a.createElement(Ae["b"],{type:"trash",size:"inherit"})),n.a.createElement("p",null,Ne.t("This file was deleted.")))}Pe.displayName="FileDetailsTombstone";var Me=new L["b"]("file-details");function De(){var e=Me.t("This file was not found.");return n.a.createElement("div",{role:"alert",className:"p-file_details__tombstone"},n.a.createElement("div",{className:"p-file_details__tombstone_icon"},n.a.createElement(Ae["b"],{type:"question",size:"inherit"})),n.a.createElement("p",null,e))}De.displayName="FileDetailsNotFound";var xe=De;var Re=a(3657);var Fe=a(2474);var Le=new L["b"]("file-details");var Ue={file:null,origin:null,do24hrTime:false,fileIsFetching:false,reloadFile:E["noop"],isWorkflow:false,userId:"",botId:"",ownerName:"",clogFileClick:E["noop"]};var Be=function(e){k()(t,e);function t(e){var a;p()(this,t);a=f()(this,g()(t).call(this,e));Object(S["a"])(y()(a),["renderPreview","onNameClick","clogLinkClick","renderBody"]);return a}h()(t,[{key:"onNameClick",value:function e(t){if(Object(U["a"])(t))return;var a=this.props,r=a.userId,n=a.botId;if(!r&&!n)return;t.preventDefault();t.persist()}},{key:"clogLinkClick",value:function e(t){var a=this.props.file;this.props.clogFileClick({file:a,payload:t})}},{key:"isImage",value:function e(){return"image"===Object(D["getFileType"])(this.props.file)}},{key:"renderBody",value:function e(){var t=this;return n.a.createElement("div",{className:"p-file_flexpane__content"},n.a.createElement(w["a"],null,function(e){var a=e.width,r=e.height;return n.a.createElement(W["b"],{width:a,height:r,fade:true},n.a.createElement("div",{className:"p-file_details"},t.renderFileDetails()))}))}},{key:"renderComments",value:function e(){var t=this.props.file;if(Object(E["isEmpty"])(t.comments))return null;return n.a.createElement("div",{className:"p-file_details__comments"},n.a.createElement("hr",{className:"p-file_details__comment_separator"}),n.a.createElement(Z,{comments:t.comments,fileId:t.id}))}},{key:"renderFileDetails",value:function e(){var t=this.props,a=t.file,r=t.fileIsFetching,i=t.reloadFile;if(r&&(!a||Object(B["d"])(a)&&!Object(B["c"])(a)))return null;if(!a||Object(B["c"])(a))return n.a.createElement(Te,{tryAgain:i});if(Object(D["isTombstone"])(a))return n.a.createElement(Pe,null);if(Object(D["isNotFound"])(a))return n.a.createElement(xe,null);var s=!Object(D["isHiddenByStorageLimit"])(a);var o={};if(this.isImage()){o.maxWidth=(a.thumb_480_w||a.thumb_360_w)+"px";o.maxHeight=(a.thumb_480_h||a.thumb_360_h)+"px"}var l=Object(D["getFileType"])(a);var c="image"===l||"snippet"===l;var u=I()("p-file_details__meta",{"p-file_details__meta--show_filename":c});return n.a.createElement(n.a.Fragment,null,s?n.a.createElement("div",{className:"p-file_details__meta_container","data-qa":"file_details-meta_container"},n.a.createElement("div",{className:u},c?n.a.createElement(q["a"],{file:a,className:"p-file_details__name"}):null,this.renderUserNameAndTimestamp()),n.a.createElement(ae["a"],{file:a,clogLinkClick:this.clogLinkClick,inFileDetails:true})):null,n.a.createElement("div",{className:"p-file_details__preview",style:o},this.renderPreview()),this.renderComments(),n.a.createElement(Ce,{file:a}))}},{key:"renderPreview",value:function e(){return n.a.createElement(re["a"],{file:this.props.file,showActions:false,forceExpanded:true,largeImage:true,clogLinkClick:this.clogLinkClick,channelId:"",ts:""})}},{key:"renderUserNameAndTimestamp",value:function e(){var t=this.props,a=t.file,r=t.do24hrTime,i=t.ownerName,s=t.userId,o=t.botId,l=t.isWorkflow;var c="";Object(D["isFilePublic"])(a)||(c=n.a.createElement("div",{className:"p-file_details__private"},Le.t("Private file")));var u="";u=o?"/services/"+o:"/team/"+s;var d=n.a.createElement(ne["a"],{botId:o,userId:s,onClick:this.onNameClick},n.a.createElement(H["a"],{href:u,className:"p-file_details__user_link"},i));return n.a.createElement("div",{className:"p-file_details__user_meta"},d,o&&n.a.createElement(te["a"],{isWorkflow:l}),n.a.createElement("div",{className:"p-file_details__upload_date"},Le.t("{date} at {time}",{date:a.timestamp&&Object(F["j"])(a.timestamp),time:a.timestamp&&Object(F["n"])(a.timestamp,{do24hrTime:r})})),c)}},{key:"render",value:function e(){var t=this.props.origin;var a={member_preview:Le.t("Member"),starred_items:Le.t("Starred Items"),search_results:Le.t("Search Results"),channel_page:Le.t("Channel Details"),group_page:Le.t("Channel Info"),im_page:Le.t("Conversation Details"),mentions:Le.t("Activity")};var r=Le.t("Files");var i=a[t]||r;var s=I()("p-file_flexpane","p-file_flexpane--detail");return n.a.createElement(Se["b"],{"aria-label":i,flexOrigin:t,className:s,title:i,renderBody:this.renderBody,viewId:"file-details",kbNavOrder:Object(ie["a"])()?void 0:4.9})}}]);return t}(r["PureComponent"]);Be.displayName="FileDetails";Be.defaultProps=Ue;var qe=function e(t,a){var r=a.fileId;if(!r)return{};var n=Object(T["getFileById"])(t,r);if(!n)return{};var i=Object(D["getFileEntityId"])(n),s=i.userId,o=i.botId;var l=s?Object(N["e"])(t,s):null;var c=l?Object(x["getBotIdFromMember"])(l):null;var u=o||c;var d="";if(u){var p=Object(P["getBotById"])(t,u);p&&p.name&&(d=p.name)}!d&&l&&(d=Object(x["getPrefCompliantMemberName"])(t,l));d||(d=n.username);return{file:Object(T["getFileById"])(t,r),do24hrTime:Object(A["k"])(t,"time24"),featureEmailWorkobjectUi:Object(ee["isFeatureEnabled"])(t,"feature_email_workobject_ui"),userId:s,botId:u,ownerName:d,isWorkflow:Object(x["isWorkflowBot"])(l)}};var Ge={clogFileClick:function e(){return M["a"].apply(void 0,arguments)}};var He=Object(i["connect"])(qe,Ge)(Be);var We=Object(G["a"])(He,{alwaysFetchOnMount:true});var Ve=a(196);var Ke=a.n(Ve);var ze=a(245);var Qe=a.n(ze);var Ye=a(218);var Je=a.n(Ye);var Xe=a(453);var Ze=a(86);var $e=a(14);var et=a(457);var tt=a(783);var at=a(1450);var rt=a(1451);var nt=a(35);var it=a(1329);var st=a(1033);var ot=a(1994);var lt=a(277);var ct=a(645);var ut=a(1135);var dt=new L["b"]("files");var pt={member:null,onChange:E["noop"]};var mt=function(e){k()(t,e);function t(e){var a;p()(this,t);a=f()(this,g()(t).call(this,e));a.onChange=a.onChange.bind(y()(a));a.state={value:e.member?e.member.id:null,selectedOption:e.member?ht(e.member.id):null};return a}h()(t,[{key:"UNSAFE_componentWillReceiveProps",value:function e(t){this.setState(function(){return{value:t.member?t.member.id:null,selectedOption:t.member?ht(t.member.id):null}})}},{key:"onChange",value:function e(t,a){this.setState(function(){return{value:t,selectedOption:{value:t,label:a}}});this.props.onChange(t)}},{key:"render",value:function e(){return n.a.createElement(ct["a"],{className:"p-file_list__select p-file_list__members_select",placeholder:dt.t("Everyone",{fallbackHash:"c756f6af1f03c9ce381cb85934ffb274e2f54af3"}),onChange:this.onChange,value:this.state.value,selectedOption:this.state.selectedOption,optionsFetcher:this.props.searchMembers,optionsRowHeight:30})}}]);return t}(r["PureComponent"]);mt.displayName="FilesFlexpaneMembersSelect";mt.defaultProps=pt;function ht(e){return{value:e,label:n.a.createElement("div",{className:"p-file_list__select__member"},n.a.createElement(ut["a"],{id:e,size:"small"}))}}var vt=function e(t){return{searchMembers:function e(a){return t(Object(lt["e"])({query:a,options:{entities:{members:{includeSelf:true,onlyLocalTeam:true}},sort:{selfFirst:true},allowEmptyQuery:true}})).then(function(e){return{options:e.map(function(e){return ht(e.id)})}})}}};var ft=Object(i["connect"])(function(e,t){var a=t.userId;return{member:Object(N["e"])(e,a)}},vt)(mt);var bt=a(3662);var gt=new L["b"]("files");var _t=Object(rt["a"])(at["a"]);var yt={files:[],filetype:"",user:"",scrollmark:void 0,fetchFilesPre:E["noop"],fetchFilesPost:E["noop"],saveScrollmark:E["noop"],setFiletype:E["noop"],setUser:E["noop"],previewFile:E["noop"],focusKey:null,clogFileClick:E["noop"],setFocusKey:E["noop"]};var Ot=function(e){k()(t,e);function t(e){var a;p()(this,t);a=f()(this,g()(t).call(this,e));Object(S["a"])(y()(a),["onFileClick","onScroll","fetchPre","fetchPost","fetchAround","renderRow","renderFile","clogFileClick","clogPricingLinkClick","renderBody","focus","isEmpty","isFocusableItem","onItemTabWithin"]);a.requestPre=null;a.requestPost=null;a.reachedStart=false;a.reachedEnd=false;a.keys=null;a.layout=new tt["a"];a.list=n.a.createRef();a.flexpane=n.a.createRef();a.layout.heightCache.DEFAULT_HEIGHT=69;return a}h()(t,[{key:"componentDidMount",value:function e(){var t=this.props,a=t.scrollmark,r=t.clogger,n=t.overStorageLimit;if(a){var i=a.key,s=a.offset;this.layout.setAnchor(i,s);this.props.saveScrollmark(null)}n&&r.track($e["EventId"].GROWTH_PRICING,{contexts:{ui_context:{action:$e["UiAction"].IMPRESSION,step:$e["UiStep"].FILE_PANE,ui_component:$e["UiComponent"].FILE_STORAGE_LIMIT_BANNER}}});var o=this.props,l=o.focusKey,c=o.files;if("files"===l&&c.length){this.setFocusOnFirstItem();this.clearFocusKey()}}},{key:"UNSAFE_componentWillReceiveProps",value:function e(t){var a=this.props,r=a.filetype,n=a.user;if(t.filetype!==r||t.user!==n){this.requestPre&&this.requestPre.cancel();this.requestPost&&this.requestPost.cancel();this.requestPre=null;this.requestPost=null;this.reachedStart=false;this.reachedEnd=false;this.layout&&this.layout.setAnchor(false)}}},{key:"componentDidUpdate",value:function e(t){var a=t.focusKey;var r=this.props,n=r.focusKey,i=r.files;if("files"===n&&n!==a&&i.length){this.setFocusOnFirstItem();this.clearFocusKey()}if("files"===n&&i.length){this.setFocusOnFirstItem();this.clearFocusKey()}}},{key:"onFileClick",value:function e(t){var a=t.id;var r=this.list.current;if(!r)return;if(!a)return;var n=this.props.clogger;n.track($e["EventId"].FLEXPANE_FILE_CLICKED,{click_file_id:a});this.props.saveScrollmark({key:a,offset:this.layout.getOffsetForKey(a)-r.getScrollTop()});this.props.previewFile({fileId:a,flexOrigin:"files"})}},{key:"onItemTabWithin",value:function e(){var t=this.flexpane.current;t&&t.setInitialActiveSection()}},{key:"onScroll",value:function e(){this.layout.anchor&&this.layout.setAnchor(false)}},{key:"setFocusOnFirstItem",value:function e(){var t=this.keys[0];var a=this.list.current;a&&a.focusOnKey(t)}},{key:"clearFocusKey",value:function e(){this.props.setFocusKey(null)}},{key:"clogFileClick",value:function e(t,a){this.props.clogFileClick({file:a,payload:t})}},{key:"clogPricingLinkClick",value:function e(){this.props.clogger.track($e["EventId"].GROWTH_PRICING,{contexts:{ui_context:{action:$e["UiAction"].CLICK,step:$e["UiStep"].FILE_PANE,ui_element:$e["UiElement"].PRICING_LINK,ui_component:$e["UiComponent"].FILE_STORAGE_LIMIT_BANNER}}})}},{key:"fetchAround",value:function e(){if(this.requestPre&&this.requestPost)return false;if(this.reachedEnd)return this.fetchPre();if(this.reachedStart)return this.fetchPost();return this.fetchPre()}},{key:"fetchPost",value:function e(){var t=this;if(this.requestPost)return false;if(this.reachedEnd)return false;var a=this.props,r=a.filetype,n=a.user;this.requestPost=this.props.fetchFilesPost({types:r,user:n});return this.requestPost.then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.paging;var r=a.page,n=a.pages;r>=n&&(t.reachedEnd=true)}).finally(function(){t.requestPost=null})}},{key:"fetchPre",value:function e(){var t=this;if(this.requestPre)return false;if(this.reachedStart)return false;var a=this.props,r=a.filetype,n=a.user;this.requestPre=this.props.fetchFilesPre({types:r,user:n});return this.requestPre.then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.paging;var r=a.page;1===r&&(t.reachedStart=true)}).finally(function(){t.requestPre=null})}},{key:"focus",value:function e(){var t=this.list.current;t&&t.focus()}},{key:"isEmpty",value:function e(){return!this.props.files.length&&this.reachedStart&&this.reachedEnd}},{key:"isFocusableItem",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.key;return Object(u["a"])(a)}},{key:"renderBody",value:function e(){var t=this;var a=this.props,r=a.files,i=a.overStorageLimit;var s=r.map(function(e){return e.id});this.keys=Je()(s);this.reachedEnd||this.keys.push("Loading"+this.keys.length);this.isEmpty()&&this.keys.push("Placeholder");return n.a.createElement(n.a.Fragment,null,i&&this.renderStorageWarningBanner(),n.a.createElement("div",{className:"p-file_list"},n.a.createElement(w["a"],null,function(e){var a=e.width,r=e.height;return n.a.createElement(et["a"],{width:a,height:r,keys:t.keys,layout:t.layout,rowRenderer:t.renderRow,onScroll:t.onScroll,ref:t.list,loadAround:t.fetchAround,loadPre:t.fetchPre,loadPost:t.fetchPost,onItemTabWithin:t.onItemTabWithin,onItemClick:t.onFileClick,isFocusableItem:t.isFocusableItem,"aria-label":gt.t("Files")})})))}},{key:"renderFile",value:function e(t){var a=this.props.files[t]&&this.props.files[t].id;if(!a)return null;var r=t===this.props.files.length-1;var i=I()("p-file_list__file",{"p-file_list__file--last":r});return n.a.createElement(_t,{fileId:a,className:i,clogLinkClick:this.clogFileClick,fullWidth:true,useRowAction:true})}},{key:"renderRow",value:function e(t){var a=this.keys[t];if(!a)return null;switch(a[0]){case"L":return n.a.createElement("div",{className:"p-file_list__loading"},gt.t("Loading\u2026"));case"P":return n.a.createElement("div",{className:"p-file_list__empty"},gt.t("No matching files were found."));default:return this.renderFile(t)}}},{key:"renderStorageWarningBanner",value:function e(){var t=this;return n.a.createElement("div",{className:"p-file_flexpane__storage-warning-container"},n.a.createElement("div",{className:"display_flex"},n.a.createElement(Ae["b"],{className:"p-message_limit_banner__graphic",type:"eye-closed"}),n.a.createElement("div",null,n.a.createElement("span",null,gt.rt("Some additional results aren\u2019t visible because your workspace has passed the free plan\u2019s 5 GB storage limit. <a>See paid plans</a>",null,function(e){var a=e.text;return n.a.createElement(H["a"],{href:Object(Ze["j"])({entryPoint:"flexpane_file_list"}),onClick:t.clogPricingLinkClick,target:"new","data-qa":"file-flexpane__pricing-link"},a)})))))}},{key:"render",value:function e(){var t=this;var a=this.props,r=a.filetype,i=a.user;var s=gt.t("Files");return n.a.createElement(Se["b"],{ref:this.flexpane,"aria-label":s,focus:this.focus,isEmpty:this.isEmpty(),title:s,className:I()("p-file_flexpane","p-file_flexpane--list"),bodyClassName:"p-file_flexpane__body",renderBody:this.renderBody,renderControls:function e(){return n.a.createElement("div",{className:"p-file_list__filters"},n.a.createElement(ot["a"],{filetype:r,onChange:t.props.setFiletype}),n.a.createElement(ft,{userId:i,onChange:function e(a){t.props.setUser(a)}}))},viewId:"file-list",kbNavOrder:Object(ie["a"])()?void 0:4.8})}}]);return t}(r["PureComponent"]);Ot.displayName="FileList";Ot.defaultProps=yt;var kt=function e(t){return{files:Object(Xe["getFlexpaneFiles"])(t),scrollmark:Object(Xe["getScrollmark"])(t),filetype:Object(Xe["getFiletype"])(t),user:Object(Xe["getUser"])(t),clogger:Object(nt["a"])({state:t}),overStorageLimit:Object(me["isOverStorageLimit"])(Object(le["d"])(t)),focusKey:Object(it["a"])(t)}};var Et={fetchFilesPre:function e(){return Xe["fetchFilesPre"].apply(void 0,arguments)},fetchFilesPost:function e(){return Xe["fetchFilesPost"].apply(void 0,arguments)},saveScrollmark:function e(){return Xe["saveScrollmark"].apply(void 0,arguments)},setFiletype:function e(){return Xe["setFiletype"].apply(void 0,arguments)},setUser:function e(){return Xe["setUser"].apply(void 0,arguments)},previewFile:function e(){return oe["c"].apply(void 0,arguments)},clogFileClick:function e(){return M["a"].apply(void 0,arguments)},setFocusKey:function e(t){return Object(st["a"])(t)}};var Ct=Object(i["connect"])(kt,Et)(function(e){var t=e.refToForward,a=Qe()(e,["refToForward"]);return n.a.createElement(Ot,Ke()({ref:t},a))});var St=n.a.forwardRef(function(e,t){return n.a.createElement(Ct,Ke()({refToForward:t},e))});function wt(e){if(e.fileId)return n.a.createElement(We,e);if(e.list)return n.a.createElement(St,e);return null}wt.defaultProps={fileId:null,list:false,origin:null};function jt(e){var t=Object(c["j"])(e);var a=Object(c["f"])(e)[0];var r=Object(c["d"])(e);var n=Object(u["a"])(a);return{list:"files"===t&&!n,fileId:"files"===t&&n?a:null,origin:"files"===t?r:null}}var It=Object(i["connect"])(jt)(wt);var Tt=It;var At=a(197);var Nt=function e(t,a){if(!t)throw new Error("mountFilesFlexpane must be called with a teamId parameter");var r=Object(o["f"])(t);Object(s["a"])(n.a.createElement(i["Provider"],{store:r},n.a.createElement(At["a"],null,n.a.createElement(Tt,null))),a)};var Pt=Nt;var Mt=a(52);Object(Mt["a"])("interop.mountFilesFlexpane",Pt)},function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(85);var s=a.n(i);var o=a(12);var l=a(26);var c=a(52);var u=a(444);var d=a(110);var p=a.n(d);var m=a(135);var h=a.n(m);var v=a(169);var f=a.n(v);var b=a(138);var g=a.n(b);var _=a(147);var y=a.n(_);var O=a(185);var k=a.n(O);var E=a(0);var C=a(13);var S=a.n(C);var w=a(2);var j=a.n(w);var I=a(24);var T=a(3151);var A={name:"",avatar:"",scrollTop:false};var N=function(e){k()(t,e);function t(){p()(this,t);return f()(this,g()(t).apply(this,arguments))}h()(t,[{key:"render",value:function e(){var t=this;var a=S()("p-ent_nav_header",{"p-ent_nav_header__scroll_border":this.props.scrollTop});var r={backgroundImage:"url('"+this.props.avatar+"')"};return n.a.createElement("div",{className:a},n.a.createElement(I["c"],{onClick:function e(){return t.props.onClick()},className:"p-ent_nav_header__org_img",alt:"org avatar",style:r,type:"link"}),n.a.createElement("div",{className:"p-ent_nav_header__org_name"},this.props.name))}}]);return t}(r["PureComponent"]);N.displayName="DashboardNavHeader";N.defaultProps=A;var P=N;var M=P;var D=a(88);var x=a.n(D);var R=a(23);var F=a(3153);var L={isOpen:false};var U=function(e){k()(t,e);function t(){p()(this,t);return f()(this,g()(t).apply(this,arguments))}h()(t,[{key:"render",value:function e(){var t,a=this;var r=S()("p-ent_nav_item_primary","p-ent_nav_item_primary--"+this.props.iconColor,(t={},x()(t,"p-ent_nav_item_primary--expanded_"+this.props.iconColor,this.props.isOpen),x()(t,"p-ent_nav_item_primary--expanded",this.props.isOpen),t));var i="ent-nav-primary-"+Object(w["camelCase"])(this.props.name);return n.a.createElement(I["c"],{onClick:function e(){return a.props.onClick(a.props.name)},className:r,"data-qa":i},n.a.createElement(R["a"],{type:this.props.icon}),n.a.createElement("div",{className:"p-ent_nav_item_primary__header"},this.props.name))}}]);return t}(r["PureComponent"]);U.displayName="DashboardNavItemPrimary";U.defaultProps=L;var B=U;var q=B;var G=a(3155);var H={animateClose:false};var W=function(e){k()(t,e);function t(e){var a;p()(this,t);a=f()(this,g()(t).call(this,e));a.renderSecondaryItems=a.renderSecondaryItems.bind(y()(a));return a}h()(t,[{key:"renderSecondaryItems",value:function e(){var t=this;var a=j.a.map(this.props.subItems,function(e){var a=S()("p-ent_nav_item_secondary__item",{"p-ent_nav_item_secondary__item--selected":e.selected});var r="ent-nav-secondary-"+j.a.camelCase(t.props.parentName)+"-"+j.a.camelCase(e.name);return n.a.createElement(I["c"],{key:e.id,onClick:function t(){return e.onClick(e.id)},className:a,"data-qa":r},e.name," ",n.a.createElement(R["a"],{className:"p-ent_nav_item_secondary__icon",type:e.icon}))});return a}},{key:"render",value:function e(){var t=S()("p-ent_nav_item_secondary__container",{"p-ent_nav_item_secondary__container--collapse":this.props.animateClose});return n.a.createElement("div",{className:t},this.renderSecondaryItems())}}]);return t}(r["PureComponent"]);W.displayName="DashboardNavItemSecondary";W.defaultProps=H;var V=W;var K=V;var z=a(3157);var Q={isOpen:false,animateClose:false,subItems:null};var Y=function(e){k()(t,e);function t(e){var a;p()(this,t);a=f()(this,g()(t).call(this,e));a.toggleAnimation=a.toggleAnimation.bind(y()(a));a.shouldAnimateClosed=a.shouldAnimateClosed.bind(y()(a));return a}h()(t,[{key:"componentDidMount",value:function e(){var t=this.element;t&&(t.style.maxHeight=j.a.head(t.children).offsetHeight+"px")}},{key:"componentDidUpdate",value:function e(){(this.props.animateClose||this.props.isOpen)&&this.toggleAnimation()}},{key:"shouldAnimateClosed",value:function e(){var t=this.element;if(this.props.animateClose&&t){var a=j.a.head(t.children).offsetHeight;var r=1;var n=a-r;var i=a+r;if(t.style.maxHeight>=n+"px"&&t.style.maxHeight<=i+"px")return false;return true}return false}},{key:"toggleAnimation",value:function e(){var t=this.element;if(t){var a=j.a.map(t.children,function(e){return e.offsetHeight});this.props.animateClose&&(t.style.maxHeight=j.a.head(a)+"px");this.props.isOpen&&(t.style.maxHeight=j.a.sum(a)+"px")}}},{key:"render",value:function e(){var t=this;var a=x()({"p-ent_nav_item--expanded":this.props.isOpen,"p-ent_nav_item--collapse":this.shouldAnimateClosed(),"p-ent_nav_item--sub_items":this.props.subItems&&this.props.isOpen},"p-ent_nav_item--expanded_"+this.props.iconColor,this.props.isOpen||this.shouldAnimateClosed());var r=S()("p-ent_nav_item",a);var i=null;this.props.subItems&&(this.props.isOpen||this.props.animateClose)&&(i=n.a.createElement(K,{parentName:this.props.name,subItems:this.props.subItems,animateClose:this.props.animateClose}));return n.a.createElement("div",{ref:function e(a){t.element=a},className:r},n.a.createElement(q,{isOpen:this.props.isOpen,icon:this.props.icon,iconColor:this.props.iconColor,name:this.props.name,onClick:this.props.onClick}),n.a.createElement("div",null,i))}}]);return t}(r["PureComponent"]);Y.displayName="DashboardNavItem";Y.defaultProps=Q;var J=Y;var X=J;var Z=a(98);var $=a(3159);var ee={name:"",avatar:""};var te=function(e){k()(t,e);function t(){p()(this,t);return f()(this,g()(t).apply(this,arguments))}h()(t,[{key:"render",value:function e(){var t=this;var a={backgroundImage:"url('"+this.props.avatar+"')"};return n.a.createElement(Z["a"],{onClick:function e(){return t.props.onClick()},className:"p-ent_nav_user_menu","data-qa":"ent-nav-user_menu","data-popover-trigger":"user_menu"},n.a.createElement("div",{className:"p-ent_nav_user_menu__avatar",alt:"user menu avatar",style:a}),n.a.createElement("div",{className:"p-ent_nav_user_menu__name"},this.props.name),n.a.createElement(R["a"],{type:"chevron-down"}))}}]);return t}(r["PureComponent"]);te.displayName="DashboardNavUserMenu";te.defaultProps=ee;var ae=te;var re=ae;var ne=a(3161);var ie=function(e){k()(t,e);function t(e){var a;p()(this,t);a=f()(this,g()(t).call(this,e));a.renderNavItems=a.renderNavItems.bind(y()(a));a.makeScrollable=a.makeScrollable.bind(y()(a));a.onWindowResize=a.onWindowResize.bind(y()(a));a.state={scrollTop:false,scrollBottom:false};return a}h()(t,[{key:"componentDidMount",value:function e(){this.makeScrollable();window.addEventListener("resize",this.onWindowResize)}},{key:"componentWillUnmount",value:function e(){window.removeEventListener("resize",this.onWindowResize)}},{key:"onWindowResize",value:function e(){this.makeScrollable()}},{key:"makeScrollable",value:function e(){var t=this.element;if(t){var a=t.scrollHeight-t.scrollTop;this.setState(function(){return{scrollTop:0!==t.scrollTop,scrollBottom:!(a===t.offsetHeight)}})}}},{key:"renderNavItems",value:function e(){var t=j.a.map(this.props.navItems,function(e){return n.a.createElement(X,{key:e.id,isOpen:e.isOpen,animateClose:e.animateClose,icon:e.icon,iconColor:e.iconColor,name:e.name,onClick:e.onClick,subItems:e.subItems})});return t}},{key:"render",value:function e(){var t=this;var a=this.props.header,r=a.name,i=a.avatar,s=a.onClick;var o=S()("p-ent_nav_item__wrapper",{"p-ent_nav_item__scroll_border":this.state.scrollBottom});return n.a.createElement("div",{className:"p-ent_nav"},n.a.createElement(M,{name:r,avatar:i,onClick:s,scrollTop:this.state.scrollTop}),n.a.createElement("div",{ref:function e(a){t.element=a},onScroll:this.makeScrollable,className:o},this.renderNavItems()),n.a.createElement(re,{avatar:this.props.userMenu.avatar,name:this.props.userMenu.name,onClick:this.props.userMenu.onClick}))}}]);return t}(r["PureComponent"]);ie.displayName="DashboardNav";var se=ie;var oe=se;Object(c["a"])("interop.dashboardNav",{render:function e(t,a,r){if(!t)throw new Error("dashboardNav render must be called with a teamId parameter");var i=Object(l["f"])(t);s.a.render(n.a.createElement(o["Provider"],{store:i},n.a.createElement(u["a"],null,n.a.createElement(oe,r))),a)},stop:function e(t){s.a.unmountComponentAtNode(t)}})},function(e,t,a){"use strict";a.r(t);var r=a(196);var n=a.n(r);var i=a(1);var s=a.n(i);var o=a(85);var l=a.n(o);var c=a(12);var u=a(26);var d=a(52);var p=a(444);var m=a(218);var h=a.n(m);var v=a(110);var f=a.n(v);var b=a(135);var g=a.n(b);var _=a(169);var y=a.n(_);var O=a(138);var k=a.n(O);var E=a(147);var C=a.n(E);var S=a(185);var w=a.n(S);var j=a(2);var I=a(0);var T=a(39);var A=a(232);var N=a(106);var P=a(387);var M=a(6);var D=new M["b"]("external_shared_channels");var x=function(e){w()(t,e);function t(){f()(this,t);return y()(this,k()(t).apply(this,arguments))}g()(t,[{key:"render",value:function e(){return s.a.createElement("div",{className:"c-shared_channels_indent"},s.a.createElement("div",{className:"p-shared_channels__header"},s.a.createElement("h1",null,D.t("External Sharing"))))}}]);return t}(s.a.Component);x.displayName="SharedChannelsHeader";var R=x;var F=a(1987);var L=a(428);var U=new M["b"]("external_shared_channels");var B={};var q=function(e){w()(t,e);function t(e){var a;f()(this,t);a=y()(this,k()(t).call(this,e));var r=300;a.onInputChange=a.onInputChange.bind(C()(a));a.onSearchInputChangeDebounced=Object(j["debounce"])(function(e){a.props.onSearchInputChange(e)},r);return a}g()(t,[{key:"onInputChange",value:function e(t){var a=t.target.value||"";this.onSearchInputChangeDebounced(a)}},{key:"render",value:function e(){var t=U.t("Search organizations...");return s.a.createElement("div",null,s.a.createElement(L["a"],{className:"p-app_management_filter_search_bar",placeholder:t,icon:"search",autoFocus:false,isLoading:false,onChange:this.onInputChange,value:this.props.searchQuery,size:"small"}))}}]);return t}(i["PureComponent"]);q.displayName="SharedChannelsSearch";q.defaultProps=B;var G=q;var H=new M["b"]("external_shared_channels");function W(e){var t=e.orgsCount,a=e.searchQuery,r=e.onSearchInputChange;var n=H.t("Organizations");t>0&&(n=H.t("{orgsCount, plural, =1 {# Organization} other {# Organizations}}",{orgsCount:t}));return s.a.createElement("div",{className:"p-shared_channels padding_top_100"},s.a.createElement(F["a"],{"data-qa":"shared-channels-action-bar",title:n,actions:[s.a.createElement(G,{searchQuery:a,onSearchInputChange:r})]}))}W.displayName="SharedChannelsActionBar";var V=W;var K=a(88);var z=a.n(K);var Q=a(27);var Y=a(910);var J=a(2694);var X=new M["b"]("external_shared_channels");function Z(){return s.a.createElement("div",{className:"p-shared_channels__empty_table"},s.a.createElement("div",{className:"p-shared_channels__title_container"},s.a.createElement("div",{className:"p-shared_channels__empty_table_title"},X.rt("No Results")),s.a.createElement("div",{className:"p-shared_channels__empty_table_subtitle"},X.rt("Slack couldn't find any organizations matching your search."))))}Z.displayName="EmptySearchResults";var $=Z;var ee=a(2498);var te=a.n(ee);var ae=a(2499);var re=a.n(ae);var ne=a(2403);var ie=a.n(ne);var se=a(2500);var oe=a.n(se);var le=a(54);var ce=new M["b"]("external_shared_channels");var ue=function e(t,a){return te()(re()(function(e){var t=e.workspace_name;return t}),oe()(1,a))(t)};var de=function e(t){var a=t.length;var r=ue(t);if(a>50)return ce.t("{rem, plural, =1 {{spaces}} other {{spaces} and # others...}}",{spaces:ie()(", ")(r),rem:a-51});if(3===a)return ce.t("{secondWorkSpace} and {thirdWorkspace}",{secondWorkSpace:r[0],thirdWorkspace:r[1]});if(2===a)return r[0];return ie()(", ")(r)};var pe=function e(t,a){var r=ce.t("{len, plural, =1 {# other} other {# others...}}",{len:t-1});return s.a.createElement(le["c"],{tip:a},s.a.createElement("span",{className:"sk_primary_foreground p-shared_channels__table_tooltip"},r))};pe.displayName="renderWorkspaces";var me=function e(t){var a=t.workspaces;var r=a.length;var n=de(a);return r>=1?s.a.createElement("div",null,s.a.createElement("span",{className:"sk_primary_foreground"},a[0].workspace_name),r>=2&&ce.rt("<span> {ampSym} </span>",{ampSym:"&"}),r>=2&&pe(r,n)):null};var he=me;var ve=a(23);var fe=a(24);var be=a(57);var ge=new M["b"]("external_shared_channels");var _e=function(e){w()(t,e);function t(e){var a;f()(this,t);a=y()(this,k()(t).call(this,e));a.renderMenu=a.renderMenu.bind(C()(a));return a}g()(t,[{key:"renderMenu",value:function e(t){var a=this.props,r=a.onStopSharing,i=a.teamName;return s.a.createElement(be["f"],n()({},t,{width:"auto"}),s.a.createElement(be["b"],{danger:true,label:ge.rt("Stop sharing with {teamName}",{teamName:i}),onSelected:function e(){return r()}}))}},{key:"render",value:function e(){return s.a.createElement(be["e"],{renderMenu:this.renderMenu,position:"bottom-right"},s.a.createElement(fe["c"],null,s.a.createElement(ve["b"],{type:"ellipsis"})))}}]);return t}(i["PureComponent"]);_e.displayName="SharedChannelsRowMenu";var ye=_e;var Oe=new M["b"]("external_shared_channels");var ke=function(e){w()(t,e);function t(e){var a;f()(this,t);a=y()(this,k()(t).call(this,e));a.renderChannelCount=a.renderChannelCount.bind(C()(a));a.renderDirectConversationCount=a.renderDirectConversationCount.bind(C()(a));return a}g()(t,[{key:"renderChannelCount",value:function e(){var t=this.props,a=t.totalCount,r=t.privateCount;var n=Oe.t("{totalCount, plural, =0 {No channels} =1 {# channel} other {# channels}}",{totalCount:a});var i=r?Oe.t(" ({privateCount, plural, =1 {# private} other {# private}})",{privateCount:r}):"";var o=""+n+i;return s.a.createElement("span",{"data-qa":"channel_counts"},o)}},{key:"renderDirectConversationCount",value:function e(){var t=this.props.directConversationCount;return s.a.createElement("span",{"data-qa":"dm_mpdm_counts"},Oe.t("{directConversationCount, plural, =0 {No direct message conversations} =1 {# direct message conversation} other {# direct message conversations}}",{directConversationCount:t}))}},{key:"render",value:function e(){return s.a.createElement(s.a.Fragment,null,this.renderChannelCount(),this.renderDirectConversationCount())}}]);return t}(s.a.Component);ke.displayName="SharedChannelTableChannelCounts";var Ee=function e(t,a){var r=a.team;var n=Object(j["get"])(r,"public_channel_count",0);var i=Object(j["get"])(r,"private_channel_count",0);var s=Object(j["get"])(r,"im_channel_count",0);var o=Object(j["get"])(r,"mpim_channel_count",0);var l=n+i;var c=s+o;return{totalCount:l,privateCount:i,directConversationCount:c}};var Ce=Object(c["connect"])(Ee)(ke);function Se(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function we(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Se(Object(a),true).forEach(function(t){z()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Se(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var je={isLoading:false,onStopSharing:j["noop"],onSortChange:j["noop"],onRequestNextPage:j["noop"]};var Ie="asc";var Te="desc";var Ae="caret_down";var Ne="caret_up";var Pe={};Pe[Ie]=Ae;Pe[Te]=Ne;var Me=function(e){w()(t,e);function t(e){var a;f()(this,t);a=y()(this,k()(t).call(this,e));a.state={headers:[],rowData:[],sortBy:"",sortDir:""};a.tableViewControllerRef=null;a.headerItemOnClick=a.headerItemOnClick.bind(C()(a));return a}g()(t,[{key:"componentDidMount",value:function e(){this.rebuildHeaders()}},{key:"UNSAFE_componentWillReceiveProps",value:function e(t){var a=t.organizations;if(a&&a.length){var r={rowData:this.formatData(a)};this.setState(function(){return r})}}},{key:"buildHeaders",value:function e(){var t=this;var a=[{id:"header_organization",value:"Organization",className:"p-shared_channels__table__org",sortable:true},{id:"header_channels",value:"Channels",className:"p-shared_channels__table__channels"},{id:"header_workspaces",value:"Workspaces",className:"p-shared_channels__table__workspaces"},{id:"header_row_menu",value:"",className:"p-shared_channels__table__row_menu",noHover:true,sortable:false}].map(function(e){if(!e.sortable)return e;return we({},e,{iconType:t.determineSortState(e.id,e),onClick:t.headerItemOnClick})});return a}},{key:"determineSortState",value:function e(t,a){var r=this.state,n=r.sortBy,i=r.sortDir;var s=a&&a.defaultSortType||Ie;var o=Pe[s];if(!n||n!==t)return o;var l;l=i?i===Ie?Ae:Ne:Pe[s];return l}},{key:"formatData",value:function e(t){if(!t)return[];var a=this.props.onStopSharing;var r=t.map(function(e){var t="row_"+e.team_id;return{id:t,items:[{value:s.a.createElement(J["a"],{dimension:34,team:{name:e.team_name,domain:Object(Q["getEnterpriseFormattedDomain"])(e.team_id,e.team_domain),icon:e.team_icon}}),className:"p-shared_channels__table__org",id:t+"_team_name"},{value:s.a.createElement(Ce,{team:e}),className:"p-shared_channels__table__channels",id:t+"_channels"},{value:s.a.createElement(he,{workspaces:e.connected_workspaces}),className:"p-shared_channels__table__workspaces",id:t+"_workspaces"},{value:s.a.createElement(ye,{teamName:e.team_name,onStopSharing:function t(){return a(e)}}),className:"p-shared_channels__table__row_menu",id:t+"_row_menu"}]}});return r}},{key:"headerItemOnClick",value:function e(t){var a=this;var r=this.state,n=r.sortBy,i=r.sortDir;var s=this.props.onSortChange;var o=n;var l=i;if(t.id===n)l=i&&i!==Ie?Ie:Te;else{o=t.id;l=t.defaultSortType?t.defaultSortType===Ie?Te:Ie:Te}var c=this.state.rowData;c.sort(function(e,t){var a=l===Te?1:-1;if(e.items[0].value>t.items[0].value)return-1*a;if(e.items[0].value<t.items[0].value)return 1*a;return 0});var u={rowData:c,sortBy:o,sortDir:l};this.setState(function(){return u},function(){s&&s(l);a.rebuildHeaders()})}},{key:"rebuildHeaders",value:function e(){var t={headers:this.buildHeaders()};this.setState(function(){return t})}},{key:"render",value:function e(){var t=this;var a=this.state,r=a.headers,n=a.paddingBottom,i=a.rowData;var o=this.props,l=o.isLoading,c=o.organizations;if(!l&&!c.length)return s.a.createElement($,null);return s.a.createElement("div",{style:{paddingBottom:n},className:"c-shared_channels_table_indent"},s.a.createElement(Y["a"],{autoHeight:true,headers:r,isLoading:l,newQuery:l,onRequestNextPage:this.props.onRequestNextPage,rows:i,ref:function e(a){t.tableViewControllerRef=a}}))}}]);return t}(i["PureComponent"]);Me.displayName="SharedChannelsTableView";Me.defaultProps=je;var De=Me;var xe=a(117);var Re=a(93);var Fe=a(108);var Le=a(50);function Ue(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function Be(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ue(Object(a),true).forEach(function(t){z()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ue(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var qe=new M["b"]("external_shared_channels");var Ge={hasClickedStopSharing:false,isButtonDisabled:true,isCheckboxChecked:false};var He=function(e){w()(t,e);function t(e){var a;f()(this,t);a=y()(this,k()(t).call(this,e));a.state=Be({},Ge);a.onStopSharing=a.onStopSharing.bind(C()(a));a.handleCheckboxChange=a.handleCheckboxChange.bind(C()(a));return a}g()(t,[{key:"onStopSharing",value:function e(){this.setState(function(){return Be({},Ge,{hasClickedStopSharing:true})});this.props.onStopSharing()}},{key:"handleCheckboxChange",value:function e(t){var a=!!t.target.checked;this.setState(function(){return{isCheckboxChecked:a,isButtonDisabled:!a}})}},{key:"render",value:function e(){var t=this.state,a=t.hasClickedStopSharing,r=t.isButtonDisabled,n=t.isCheckboxChecked;var i=this.props.orgItem;var o=i.team_name;var l=qe.rt("Stop sharing with {teamName}",{teamName:o});var c=qe.t("Stop sharing with {teamName}",{teamName:o});var u=qe.rt("<strong>Yes, stop sharing with {teamName}</strong>",{teamName:o,fallbackHash:"dcdf67715146b5e0c681eccadd3f02d9f4df9c2b"});var d=qe.rt("<strong>This can\u2019t be undone.</strong> You won\u2019t be able to reshare any of these channels.");var p=s.a.createElement("p",null,qe.rt("Note: channels that were originally created by <strong>{targetWorkspaceName}</strong> will become read-only.",{targetWorkspaceName:o,fallbackHashNs:"connected_workspaces",fallbackHash:"0fd82d0aefa51f9f85afab8776920d5655f78aca"}));return s.a.createElement(xe["a"],{goButtonType:"danger",cancelText:qe.t("Cancel"),goButtonIsDisabled:r,goButtonIsPending:a,goButtonText:qe.t("Stop Sharing"),goOnEnterPressed:!r,onGo:this.onStopSharing,title:l,titleAria:c,useSlackScrollbar:false},s.a.createElement(Re["a"],{level:"error",type:"inline",className:"margin_bottom_100"},d),s.a.createElement("p",{"data-qa":"stop_sharing_description"},qe.rt("This will disconnect all the channels you currently share with {teamName}. Members of the two organizations will no longer be able to direct message each other.",{teamName:s.a.createElement("strong",null,o)})),s.a.createElement("p",{className:"margin_bottom_25"},qe.t("You\u2019re disconnecting...")),s.a.createElement("ul",null,i.public_channel_count>0&&s.a.createElement("li",{"data-qa":"public_channel_count"},qe.t("{count, plural, =1 {# public channel} other {# public channels}}",{count:i.public_channel_count})),i.private_channel_count>0&&s.a.createElement("li",{"data-qa":"private_channel_count"},qe.t("{count, plural, =1 {# private channel} other {# private channels}}",{count:i.private_channel_count})),s.a.createElement("li",null,qe.t("All direct and group messages"))),p,s.a.createElement(Le["a"],{text:u,type:"inline",cursor:"pointer"},s.a.createElement(Fe["a"],{"data-qa":"stop_sharing_confirm",checked:n,onChange:this.handleCheckboxChange})))}}]);return t}(s.a.Component);He.displayName="StopSharingDialog";var We=He;var Ve=a(131);var Ke=new M["b"]("external_shared_channels");var ze={teamName:"[teamName]",onCloseComplete:j["noop"]};var Qe=function e(t){var a=t.disconnectionStatus,r=t.teamName,n=t.onCloseComplete;if(!a)return null;var i="";"error"===a&&(i=s.a.createElement("span",null,Ke.t("Something\u2019s gone wrong. Mind trying again in a moment?")));"success"===a&&(i=s.a.createElement("span",null,Ke.rt("Disconnecting all channels and conversations with {teamName}",{teamName:s.a.createElement("span",{className:"p-shared_channels__stopped_sharing_toast"},r)})));return s.a.createElement(Ve["b"],{position:"bottom-right",onCloseComplete:n,shouldAutoFade:true},i)};Qe.displayName="StopSharingToast";Qe.defaultProps=ze;var Ye=Qe;var Je=a(3266);var Xe=a(1389);var Ze=new M["b"]("external_shared_channels");function $e(e){var t=e.orgName;var a=s.a.createElement(Xe["a"],{href:"https://get.slack.help/hc/en-us/articles/115004151203-create-shared-channels"},Ze.t("Learn more about shared channels"));return s.a.createElement("div",{className:"p-shared_channels__empty_table"},s.a.createElement("div",{className:"p-shared_channels__title_container"},s.a.createElement("div",{className:"p-shared_channels__empty_table_title"},Ze.rt("{orgName} isn't sharing any channels",{orgName:t})),s.a.createElement("div",{className:"p-shared_channels__empty_table_subtitle"},Ze.rt("When your organization shares a channel with another organization, you\u2019ll see that connection here. {learnMoreUrl}",{learnMoreUrl:a}))))}$e.displayName="NoSharedChannels";var et=$e;var tt={};var at="asc";var rt=function(e){w()(t,e);function t(e){var a;f()(this,t);a=y()(this,k()(t).call(this,e));a.state={orgsCount:0,searchQuery:"",sortDir:at,organizations:[],isLoading:false,nextPageId:"",initCount:null};a._isMounted=false;a.handleSearchInputChange=a.handleSearchInputChange.bind(C()(a));a.handleRequestNextPage=a.handleRequestNextPage.bind(C()(a));a.handleTableSortChange=a.handleTableSortChange.bind(C()(a));a.openStopSharingDialog=a.openStopSharingDialog.bind(C()(a));a.stopSharingWorkspace=a.stopSharingWorkspace.bind(C()(a));return a}g()(t,[{key:"componentDidMount",value:function e(){this._isMounted=true;this.fetchSharedChannels()}},{key:"componentWillUnmount",value:function e(){this._isMounted=false}},{key:"fetchSharedChannels",value:function e(){var t=this;this.setState(function(){return{isLoading:true}},function(){var e=t.state,a=e.searchQuery,r=e.nextPageId,n=e.sortDir,i=e.initCount;var s={searchQuery:a,nextPageId:r,sortDir:n};t.props.searchConnectedOrgs(s).then(function(e){var a=e.organizations,r=e.nextCursor;if(t._isMounted){var n=a.length;t.setState(function(){return{organizations:a,nextPageId:r,orgsCount:n,isLoading:false,initCount:null===i?n:i}})}}).catch(function(e){console.warn("An error occured: ",e)})})}},{key:"handleRequestNextPage",value:function e(){var t=this;if(!this.state.nextPageId)return;this.setState(function(){return{isLoading:true}},function(){var e=t.state,a=e.searchQuery,r=e.nextPageId,n=e.sortDir;var i={searchQuery:a,nextPageId:r,sortDir:n};t.props.searchConnectedOrgs(i).then(function(e){var a=e.organizations,r=e.nextCursor;t._isMounted&&t.setState(function(e){return{organizations:[].concat(h()(e.organizations),h()(a)),orgsCount:e.organizations.length+a.length,nextPageId:r}})}).catch(function(e){console.warn("An error occured: ",e)})})}},{key:"handleSearchInputChange",value:function e(t){var a={searchQuery:t.trim(),nextPageId:""};this.setState(function(){return a},this.fetchSharedChannels)}},{key:"handleTableSortChange",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:at;this.setState(function(){return{sortDir:t}},this.fetchSharedChannels)}},{key:"openStopSharingDialog",value:function e(t){var a=this;var r=function e(){a.stopSharingWorkspace(t.team_id,t.team_name)};this.props.openModal({element:s.a.createElement(We,{onStopSharing:r,orgItem:t,openModal:this.props.openModal})})}},{key:"removeOrg",value:function e(t){var a=this.state.organizations.filter(function(e){return e.team_id!==t});this._isMounted&&this.setState(function(){return{organizations:a,orgsCount:a.length}})}},{key:"showSharingStatusToast",value:function e(t,a){this.props.enqueueToast({element:s.a.createElement(Ye,{disconnectionStatus:a,teamName:t,onCloseComplete:j["noop"]})})}},{key:"stopSharingWorkspace",value:function e(t,a){var r=this;this.props.disconnectSharedTeam({teamId:t}).then(function(){r.props.closeModal();r.removeOrg(t);r.showSharingStatusToast(a,"success")}).catch(function(){console.log("error while stop sharing");r.showSharingStatusToast(a,"error")})}},{key:"renderTableView",value:function e(){var t=this.props.orgName;var a=this.state,r=a.orgsCount,n=a.searchQuery,i=a.initCount,o=a.organizations,l=a.isLoading;if(0===i)return s.a.createElement(et,{orgName:t});return s.a.createElement(s.a.Fragment,null,s.a.createElement(V,{onSearchInputChange:this.handleSearchInputChange,orgsCount:r,searchQuery:n}),s.a.createElement(De,{isLoading:l,onStopSharing:this.openStopSharingDialog,onRequestNextPage:this.handleRequestNextPage,onSortChange:this.handleTableSortChange,organizations:o}),s.a.createElement(P["a"],null))}},{key:"render",value:function e(){return s.a.createElement("div",{className:"p-shared_channels padding_top_200"},s.a.createElement(R,null),this.renderTableView())}}]);return t}(i["PureComponent"]);rt.displayName="SharedChannels";rt.defaultProps=tt;var nt=function e(){return{}};var it={openModal:T["openModal"],closeModal:T["closeModal"],enqueueToast:N["enqueueToast"],searchConnectedOrgs:A["z"],disconnectSharedTeam:A["j"]};var st=Object(c["connect"])(nt,it)(rt);Object(d["a"])("interop.sharedChannels",{render:function e(t,a,r){if(!t)throw new Error("sharedChannels render must be called with a teamId parameter");var i=Object(u["f"])(t);var o=r.org.enterprise.name;l.a.render(s.a.createElement(c["Provider"],{store:i},s.a.createElement(p["a"],null,s.a.createElement(st,n()({},r,{orgName:o})))),a)},stop:function e(t){l.a.unmountComponentAtNode(t)}})},,function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(12);var s=a(156);var o=a(26);var l=a(0);var c=a(31);var u=a(29);var d=Object(u["a"])("Fetches org retention settings",function(e,t,a){return e(Object(c["a"])({method:"mc.enterprise.retention.get",args:{enterprise:a}}))});d.meta={name:"fetchOrgRetention",key:"fetchersOrgRetentionApiFetchOrgRetention",description:"Fetches org retention settings"};d.propTypes=l["default"].string.isRequired;var p=Object(u["a"])("Submits retention request to API",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.type,n=a.requestData;return e(Object(c["a"])({method:"newRequest"===r?"mc.enterprise.retention.requestChange":"mc.enterprise.retention.cancelRequest",args:n}))});p.meta={name:"submitRetentionRequest",key:"fetchersOrgRetentionApiSubmitRetentionRequest",description:"Submits retention request to API"};p.propTypes={type:l["default"].string.isRequired,requestData:l["default"].object};var m=a(533);var h=a(88);var v=a.n(h);var f=a(110);var b=a.n(f);var g=a(135);var _=a.n(g);var y=a(169);var O=a.n(y);var k=a(138);var E=a.n(k);var C=a(147);var S=a.n(C);var w=a(185);var j=a.n(w);var I=a(2);var T=a.n(I);var A=a(6);var N=a(24);var P=a(270);var M=a(13);var D=a.n(M);var x=a(23);var R=a(560);function F(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function L(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?F(Object(a),true).forEach(function(t){v()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):F(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var U=new A["b"]("policy-retention");function B(e){return{channels:U.t("Channel Retention"),private_channels:U.t("Private Channel Retention"),dms:U.t("Direct Message Retention"),allow_override:e?U.t("Member & Admin Override"):U.t("Direct Message and Private Channel Override"),files:U.t("File Retention")}}function q(e){return{channels:[{value:4,label:e?U.t("No org-wide policy \u2014 Workspace Owners can set their own settings for their workspace"):U.t("No policy; teams can modify their own retention settings")},{value:0,label:e?U.t("Keep all messages, but don\u2019t track revisions (i.e. edits and deletions)"):U.t("Retain all messages")},{value:1,label:e?U.t("Keep all messages, including revision history"):U.t("Retain all messages AND retain edit/deletion logs for all messages")},{value:2,label:e?U.t("Delete messages and their revisions after a set number of days"):U.t("Retain all messages and logs for only a specific number of days"),showDuration:true},{value:3,label:e?U.t("Delete messages & revisions after set number of days (History still accessible via Corporate Export)"):U.t("Retain all messages for only a specific number of days (but keep logs for compliance exports)"),showDuration:true}],private_channels:[{value:4,label:e?U.t("No org-wide policy \u2014 Workspace Owners can set their own settings for their workspace"):U.t("No policy; teams can modify their own retention settings")},{value:0,label:e?U.t("Keep all messages, but don\u2019t track revisions (i.e. edits and deletions)"):U.t("Retain all messages")},{value:1,label:e?U.t("Keep all messages, including revision history"):U.t("Retain all messages AND retain edit/deletion logs for all messages")},{value:2,label:e?U.t("Delete messages and their revisions after a set number of days"):U.t("Retain all messages and logs for only a specific number of days"),showDuration:true},{value:3,label:e?U.t("Delete messages & revisions after set number of days (History still accessible via Corporate Export)"):U.t("Retain all messages for only a specific number of days (but keep logs for compliance exports)"),showDuration:true}],dms:[{value:0,label:e?U.t("Keep all messages, but don\u2019t track revisions (i.e. edits and deletions)"):U.t("Retain all messages")},{value:1,label:e?U.t("Keep all messages, including revision history"):U.t("Retain all messages AND retain edit/deletion logs for all messages")},{value:2,label:e?U.t("Delete messages and their revisions after a set number of days"):U.t("Retain all messages and logs for only a specific number of days"),showDuration:true},{value:3,label:e?U.t("Delete messages & revisions after set number of days (History still accessible via Corporate Export)"):U.t("Retain all messages for only a specific number of days (but keep logs for compliance exports)"),showDuration:true}],allow_override:[{value:4,label:e?U.t("No org-wide policy \u2014 Workspace Owners can set the override policy for their workspace"):U.t("No policy; teams can set their own override policy")},{value:0,label:e?U.t("Don\u2019t allow overrides",{fallbackHash:"b3883b64ef567796c018246d529c988cedb2ff77"}):U.t("Don\u2019t allow team members to override team-wide retention policies for DMs and private channels")},{value:1,label:e?U.t("Always allow overrides",{fallbackHash:"3896315f9f4066fdff2b7ac363e7e1651c6b9d8a"}):U.t("Allow team members to override team-wide retention policies for DMs and private channels")}],files:[{value:0,label:e?U.t("Keep files"):U.t("Retain all files")},{value:1,label:e?U.t("Keep files, but only for a set number of days"):U.t("Retain all files for only a specific number of days"),showDuration:true}]}}function G(e){var t=e.policyType,a=e.featureGdprExports;var r=B(a);return r[t]}function H(e){var t=e.policyType,a=e.featureGdprExports;var r=q(a);return r[t]}function W(e){return T.a.includes(["channels","private_channels","allow_override"],e)}function V(e){var t=e.policyType,a=e.retentionType,r=e.featureGdprExports;var n=H({policyType:t,featureGdprExports:r});return T.a.get(T.a.find(n,function(e){return e.value===a}),"showDuration",false)}function K(e){var t=e.policyType,a=e.retentionType,r=e.policyDurationValue,n=e.featureGdprExports;if(T.a.isUndefined(t)||T.a.isUndefined(a))return"";var i=V({policyType:t,retentionType:a,featureGdprExports:n});var s=i?r:0;if(0===T.a.parseInt(s)||4===T.a.parseInt(a)){var o=H({policyType:t,featureGdprExports:n});var l=T.a.find(o,function(e){return e.value===a}),c=l.label;return c}if("files"===t)return n?U.t("Keep files for {policyDurationValue} days",{policyDurationValue:r}):U.t("Retain all files for only {policyDurationValue} days",{policyDurationValue:r});switch(T.a.parseInt(a)){case 2:return n?U.t("Delete messages and their revisions after {policyDurationValue} days",{policyDurationValue:r}):U.t("Retain all messages and logs for only {policyDurationValue} days",{policyDurationValue:r});case 3:return n?U.t("Delete messages & revisions after set number of days (History still accessible via Corporate Export)",{policyDurationValue:r}):U.t("Retain all messages for only {policyDurationValue} days (but keep logs for compliance exports)",{policyDurationValue:r});default:return""}}function z(e){var t=e.policyType,a=e.settingValues,r=e.featureGdprExports;var n=a.retention_type;if(4===n){if("allow_override"===t)return{retention_type:1,is_locked:false};return{retention_type:0,retention_duration:0,is_locked:false}}var i=L({},a,{is_locked:true});if(!V({policyType:t,retentionType:n,featureGdprExports:r}))return L({},i,{retention_duration:0});return i}var Q=new A["b"]("policy-retention");var Y={cancelRequest:false,requestDate:"",currentPolicies:{},requestedPolicies:{}};var J=function(e){j()(t,e);function t(e){var a;b()(this,t);a=O()(this,E()(t).call(this,e));a.onClickCloseOrCancelButton=a.onClickCloseOrCancelButton.bind(S()(a));a.onClickSubmitButton=a.onClickSubmitButton.bind(S()(a));return a}_()(t,[{key:"onClickCloseOrCancelButton",value:function e(){this.props.onCancel()}},{key:"onClickSubmitButton",value:function e(){this.props.onConfirm()}},{key:"buildCancelModalContent",value:function e(){var t=Object(R["a"])(this.props.requestDate,{omitTime:true,dateFormat:"MMMM Do, YYYY"});return n.a.createElement("div",null,n.a.createElement("h2",{className:"margin_bottom_150"},Q.t("Are you sure you\u2019d like to cancel the retention policy update request?")),n.a.createElement("div",{className:"p-org_retention_request--font_bump margin_bottom_300"},"Once you\u2019ve clicked ",n.a.createElement("strong",null,"Confirm Cancellation"),", Slackbot mark the approval request sent to ",this.props.orgName," on",n.a.createElement("strong",null,t)," as expired."))}},{key:"buildRequestModalContent",value:function e(){var t=this.props,a=t.requesterName,r=t.orgName;return n.a.createElement("div",null,n.a.createElement("div",{className:"p-org_retention_request__modal_sectionp-org_retention_request__modal_section--lead"},n.a.createElement("p",{className:"p-org_retention_request--font_bump"},n.a.createElement("strong",null,a,"\u2019s")," ","requested changes are listed below. Once you\u2019ve clicked"," ",n.a.createElement("strong",null,"Confirm with Customer"),", a Slackbot message will be sent to the Primary Org Owner of ",r," to confirm the change."),n.a.createElement("p",null,n.a.createElement("strong",null,"Your name will be included with this request."))),n.a.createElement("div",null,this.renderRequestedPolicies()))}},{key:"renderRequestedPolicies",value:function e(){var t=this;var a=this.props.featureGdprExports;return T.a.map(this.props.requestedPolicies,function(e,r){var i=e.retention_type,s=e.retention_duration,o=e.is_locked;var l=0!==i&&"allow_override"!==r||o?i:4;var c=T.a.get(t.props.currentPolicies,r);var u=c.retention_type,d=c.retention_duration,p=c.is_locked;var m=0!==u&&"allow_override"!==r||p?u:4;return n.a.createElement("div",{key:r,className:"p-org_retention_request__modal_section"},n.a.createElement("div",{className:"bold margin_bottom_50 p-org_retention_request--font_bump"},G({policyType:r,featureGdprExports:a})),n.a.createElement("div",null,n.a.createElement("div",{className:"bold"},Q.t("New:")," ",K({policyType:r,retentionType:l,policyDurationValue:s,featureGdprExports:a})),n.a.createElement("div",null,Q.t("Old:")," ",K({policyType:r,retentionType:m,policyDurationValue:d,featureGdprExports:a}))))})}},{key:"render",value:function e(){var t=this.props.cancelRequest?"":Q.t("Ready to confirm with {orgName}?",{orgName:this.props.orgName});var a=this.props.cancelRequest?this.buildCancelModalContent():this.buildRequestModalContent();var r=this.props.cancelRequest?Q.t("Confirm Cancellation"):Q.t("Confirm with Customer");var i=D()("btn",{btn_danger:this.props.cancelRequest});return n.a.createElement("div",{className:"c-modal c-modal--active"},n.a.createElement("div",{className:"c-modal__background"}),n.a.createElement("div",{className:"c-modal__contents c-modal__contents--active p-org_retention_request__modal"},n.a.createElement(x["a"],{type:"times",onClick:this.onClickCloseOrCancelButton,className:"c-modal__close"}),n.a.createElement("div",{className:"c-modal__header"},n.a.createElement("h2",{className:"margin_bottom_0"},t)),n.a.createElement("div",{className:"c-modal__body p-org_retention_request__modal_content"},a,n.a.createElement("div",{className:"margin_bottom_400"},n.a.createElement(N["d"],{type:"outline",className:"margin_right_75",onClick:this.onClickCloseOrCancelButton},Q.t("Cancel")),n.a.createElement(N["d"],{className:i,onClick:this.onClickSubmitButton},r)))))}}]);return t}(n.a.PureComponent);J.displayName="PolicyRequestModal";J.defaultProps=Y;var X=Object(P["a"])("feature_gdpr_exports")(J);var Z=a(109);var $=new A["b"]("policy-retention");var ee=function e(t){var a=Object(R["a"])(t.requestTimestamp,{omitTime:true,dateFormat:"MMMM Do, YYYY"});var r=$.t("{requesterName} requested the following policy updates on {displayDate}",{requesterName:t.requesterName,displayDate:a});var i=$.t("If you need to modify this request, please cancel it and initiate a new one. ");return n.a.createElement("div",{className:"alert alert_info p-org_retention_request--font_bump padding_top_150 padding_bottom_150 margin_bottom_200"},n.a.createElement("ts-icon",{class:"ts_icon_info_circle"}),n.a.createElement("strong",null,r),n.a.createElement("p",{className:"no_margin"},i))};ee.displayName="PendingRequestAlert";var te=Object(Z["pure"])(ee);var ae=new A["b"]("policy-retention");var re={onUpdateUserSelection:T.a.noop,currentSelectionValue:"",isFormPending:false};var ne=function(e){j()(t,e);function t(e){var a;b()(this,t);a=O()(this,E()(t).call(this,e));a.onOptionSelection=a.onOptionSelection.bind(S()(a));return a}_()(t,[{key:"onOptionSelection",value:function e(t){var a=t.target[t.target.selectedIndex].getAttribute("data-name");this.props.onUpdateUserSelection({id:t.target.value,name:a})}},{key:"renderOptions",value:function e(){return T.a.map(this.props.users,function(e){return n.a.createElement("option",{value:e.id,key:e.id,"data-name":e.name},e.name)})}},{key:"render",value:function e(){return n.a.createElement("div",{className:"margin_bottom_200"},n.a.createElement("label",{htmlFor:"policy-requester"},ae.t("Requester")),n.a.createElement("div",{className:"p-org_retention_request__select_wrapper"},n.a.createElement("select",{value:this.props.currentSelectionValue,onChange:this.onOptionSelection,disabled:this.props.isFormPending,className:"p-org_retention_request__select",id:"policy-requester"},n.a.createElement("option",{value:"",disabled:true},ae.t("Choose an Organization Owner")),this.renderOptions())))}}]);return t}(n.a.Component);ne.displayName="RequesterSelect";ne.defaultProps=re;var ie=ne;var se=new A["b"]("policy-retention");var oe={onUpdateUserInput:T.a.noop,currentUserValue:"",placeholder:"",isDisabled:false};var le=function(e){j()(t,e);function t(e){var a;b()(this,t);a=O()(this,E()(t).call(this,e));a.onUpdateInput=a.onUpdateInput.bind(S()(a));return a}_()(t,[{key:"onUpdateInput",value:function e(t){this.props.onUpdateUserInput(t.target.value)}},{key:"render",value:function e(){return n.a.createElement("div",{className:"margin_bottom_200"},n.a.createElement("label",{htmlFor:"mc-user"},se.t("Your Full Name")),n.a.createElement("div",{className:"p-org_retention_request__requester_input",id:"mc-user"},n.a.createElement("input",{type:"text",value:this.props.currentUserValue,placeholder:this.props.placeholder,onChange:this.onUpdateInput,disabled:this.props.isDisabled?"disabled":""})))}}]);return t}(n.a.Component);le.displayName="McUserInput";le.defaultProps=oe;var ce=le;var ue=new A["b"]("policy-retention");var de={onUpdatePolicySelection:T.a.noop,currentSelectionValue:0,currentDurationValue:0,isDeactivated:false};var pe=function(e){j()(t,e);function t(e){var a;b()(this,t);a=O()(this,E()(t).call(this,e));a.onTextInput=a.onTextInput.bind(S()(a));a.onOptionSelection=a.onOptionSelection.bind(S()(a));return a}_()(t,[{key:"onOptionSelection",value:function e(t){var a=t.target.value;var r=4!==T.a.parseInt(a);this.props.onUpdatePolicySelection({retention_type:T.a.parseInt(a),is_locked:r})}},{key:"onTextInput",value:function e(t){var a=T.a.parseInt(t.target.value)||"";this.props.onUpdatePolicySelection({retention_duration:a})}},{key:"maybeRenderDuration",value:function e(){var t=this;var a=T.a.find(this.props.options,function(e){return e.value===T.a.parseInt(t.props.currentSelectionValue)}),r=a.showDuration;if(r)return n.a.createElement("div",{className:"p-org_retention_request__duration_group "},n.a.createElement("span",{className:"p-org_retention_request__duration_label"},ue.t("Duration")),n.a.createElement("input",{className:"p-org_retention_request__duration_input",type:"text",value:this.props.currentDurationValue,onChange:this.onTextInput,disabled:this.props.isDeactivated}),n.a.createElement("span",{className:"p-org_retention_request__duration_label--secondary margin_left_50"},"days"));return null}},{key:"renderOptions",value:function e(){return T.a.map(this.props.options,function(e){return n.a.createElement("option",{value:e.value,key:e.value},e.label)})}},{key:"render",value:function e(){return n.a.createElement("div",{className:"p-org_retention_request__policy_select_group"},n.a.createElement("div",{className:"p-org_retention_request__select_wrapper margin_right_150"},n.a.createElement("select",{value:this.props.currentSelectionValue,onChange:this.onOptionSelection,disabled:this.props.isDeactivated,className:"p-org_retention_request__select margin_right_200"},this.renderOptions())),this.maybeRenderDuration())}}]);return t}(n.a.Component);pe.displayName="PolicySelect";pe.defaultProps=de;var me=pe;var he=new A["b"]("policy-retention");var ve={pendingSettings:{},currentSettings:{},onUpdatePolicy:T.a.noop,isFormPending:false};var fe=function(e){j()(t,e);function t(e){var a;b()(this,t);a=O()(this,E()(t).call(this,e));a.onUpdatePolicy=a.onUpdatePolicy.bind(S()(a));return a}_()(t,[{key:"onUpdatePolicy",value:function e(t){this.props.onUpdatePolicy({data:t,policyType:this.props.policyType})}},{key:"maybeRenderCurrentPolicyText",value:function e(){var t=this.props,a=t.featureGdprExports,r=t.policyType;if(!T.a.isEmpty(this.props.pendingSettings)){var i=this.props.currentSettings,s=i.retention_type,o=i.retention_duration,l=i.is_locked;var c=0!==s&&"allow_override"!==this.props.policyType||l?s:4;var u=K({policyType:r,retentionType:c,policyDurationValue:o,featureGdprExports:a});var d=he.t("Current:");return n.a.createElement("p",null,d," ",u)}return null}},{key:"renderPolicyItem",value:function e(){var t=this.props,a=t.isFormPending,r=t.policyType,i=t.featureGdprExports;var s=H({policyType:r,featureGdprExports:i});var o=this.props.displaySettings;!T.a.isEmpty(this.props.pendingSettings)&&a&&(o=this.props.pendingSettings);var l=o,c=l.is_locked,u=l.retention_duration,d=l.retention_type;var p="allow_override"===r&&!c||0===d&&!c&&W(r)?4:d;return n.a.createElement(me,{id:"policy_select_"+this.props.policyType,options:s,currentSelectionValue:p,currentDurationValue:u,isDeactivated:a,onUpdatePolicySelection:this.onUpdatePolicy})}},{key:"render",value:function e(){return n.a.createElement("div",{className:"p-org_retention_request__policy_item margin_bottom_200"},n.a.createElement("label",{htmlFor:"policy_select_"+this.props.policyType,className:"inline_block"},this.props.policyLabel),this.renderPolicyItem(),this.maybeRenderCurrentPolicyText())}}]);return t}(n.a.Component);fe.displayName="PolicyItem";fe.defaultProps=ve;var be=Object(P["a"])("feature_gdpr_exports")(fe);var ge=a(3763);function _e(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function ye(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?_e(Object(a),true).forEach(function(t){v()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_e(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Oe=new A["b"]("policy-retention");var ke={pendingData:{}};var Ee=function(e){j()(t,e);function t(e){var a;b()(this,t);a=O()(this,E()(t).call(this,e));a.state={requestedSettings:{},mcUser:"",requester:{},modalOpen:false};a.onUpdatePolicySelect=a.onUpdatePolicySelect.bind(S()(a));a.onUpdateRequesterSelect=a.onUpdateRequesterSelect.bind(S()(a));a.onMcUserInput=a.onMcUserInput.bind(S()(a));a.onSubmitRequest=a.onSubmitRequest.bind(S()(a));a.onCancelRequest=a.onCancelRequest.bind(S()(a));a.onCloseModal=a.onCloseModal.bind(S()(a));a.onOpenModal=a.onOpenModal.bind(S()(a));return a}_()(t,[{key:"onCancelRequest",value:function e(){var t=this;var a={enterprise:this.props.orgId};this.setState(function(){return{modalOpen:false,requestedSettings:{}}},function(){t.props.submitRequest("cancelRequest",a)})}},{key:"onCloseModal",value:function e(){this.setState(function(){return{modalOpen:false}})}},{key:"onMcUserInput",value:function e(t){this.setState(function(){return{mcUser:t}})}},{key:"onOpenModal",value:function e(){this.setState(function(){return{modalOpen:true}})}},{key:"onSubmitRequest",value:function e(){var t=this;var a=this.formatSettings();this.setState(function(){return{modalOpen:false,requestedSettings:{}}},function(){t.props.submitRequest("newRequest",a)})}},{key:"onUpdatePolicySelect",value:function e(t){var a=t.policyType,r=t.data;var n=this.props.featureGdprExports;var i=this.state.requestedSettings;var s=i[a]||{};var o=this.props.currentSettings[a];var l=ye({},o,{},s,{},r);var c;var u=z({policyType:a,settingValues:l,featureGdprExports:n});c=T.a.isEqual(o,u)?T.a.omit(i,a):ye({},this.state.requestedSettings,v()({},a,l));this.setState(function(){return{requestedSettings:c}})}},{key:"onUpdateRequesterSelect",value:function e(t){this.setState(function(){return{requester:t}})}},{key:"formatSettings",value:function e(){var t=this.props.featureGdprExports;var a=this.state,r=a.requestedSettings,n=a.mcUser,i=a.requester;var s=T.a.reduce(r,function(e,a,r){e[r]=z({policyType:r,settingValues:a,featureGdprExports:t});return e},{});return{mc_user:n,enterprise:this.props.orgId,requester:i.id,requested_settings:JSON.stringify(s)}}},{key:"isFormDataValid",value:function e(){var t=this.props.featureGdprExports;var a=this.state.requestedSettings;return T.a.every(a,function(e,a){var r=e.retention_duration,n=e.retention_type;return!(V({policyType:a,retentionType:n,featureGdprExports:t})&&(0===r||""===r))})}},{key:"isFormSubmittable",value:function e(){var t=this.state,a=t.requestedSettings,r=t.mcUser,n=t.requester;return this.isFormDataValid()&&!T.a.isEmpty(a)&&!T.a.isUndefined(r)&&!T.a.isEmpty(r)&&!T.a.isUndefined(n)&&!T.a.isEmpty(n)}},{key:"maybeRenderModal",value:function e(){if(!this.state.modalOpen)return"";var t;var a=!T.a.isEmpty(this.props.pendingData);var r=this.props.pendingData,i=r.date_create,s=r.requester;if(a){var o=s.name;t=n.a.createElement(X,{orgName:this.props.orgName,requestDate:i,requesterName:o,onConfirm:this.onCancelRequest,onCancel:this.onCloseModal,cancelRequest:true})}else{var l=this.state.requester.name;t=n.a.createElement(X,{orgName:this.props.orgName,currentPolicies:this.props.currentSettings,requestedPolicies:this.state.requestedSettings,requesterName:l,onConfirm:this.onSubmitRequest,onCancel:this.onCloseModal})}return t}},{key:"maybeRenderPendingAlert",value:function e(t,a,r){if(t)return n.a.createElement(te,{requestTimestamp:T.a.parseInt(r),requesterName:a});return null}},{key:"renderButtons",value:function e(){var t=!T.a.isEmpty(this.props.pendingData);var a=this.isFormSubmittable();var r;r=t?n.a.createElement("div",null,n.a.createElement(N["d"],{type:"outline",className:"margin_right_75",disabled:true},Oe.t("Request Submitted")),n.a.createElement(N["d"],{type:"outline",onClick:this.onOpenModal},Oe.t("Cancel"))):a?n.a.createElement("div",null,n.a.createElement(N["d"],{onClick:this.onOpenModal},Oe.t("Continue"))):n.a.createElement("div",null,n.a.createElement(N["d"],{type:"outline",disabled:true},Oe.t("Continue")));return r}},{key:"renderPolicyItem",value:function e(t,a,r){var i=this.props.featureGdprExports;return n.a.createElement(be,{displaySettings:T.a.get(this.state.requestedSettings,t)||T.a.get(this.props.currentSettings,t),currentSettings:r?T.a.get(this.props.currentSettings,t):{},pendingSettings:T.a.get(a,t),onUpdatePolicy:this.onUpdatePolicySelect,policyType:t,policyLabel:G({policyType:t,featureGdprExports:i}),isFormPending:r})}},{key:"render",value:function e(){var t=!T.a.isEmpty(this.props.pendingData)||!this.props.hasPermission;var a=this.props.pendingData,r=a.requested_settings,i=a.mc_user,s=a.requester,o=a.date_create;return n.a.createElement("div",{className:"p-org_retention_request"},this.maybeRenderModal(),n.a.createElement("div",null,this.maybeRenderPendingAlert(!T.a.isEmpty(this.props.pendingData),i,o),n.a.createElement("div",{className:"p-org_retention_request__section_header"},Oe.t("Message Retention")),n.a.createElement("div",null,this.renderPolicyItem("channels",r,t)),n.a.createElement("div",null,this.renderPolicyItem("private_channels",r,t)),n.a.createElement("div",null,this.renderPolicyItem("dms",r,t)),n.a.createElement("div",null,this.renderPolicyItem("allow_override",r,t)),n.a.createElement("div",{className:"p-org_retention_request__section_header"},Oe.t("File Retention")),n.a.createElement("div",null,this.renderPolicyItem("files",r,t)),n.a.createElement("div",{className:"p-org_retention_request__section_header margin_bottom_100"},Oe.t("Authorization")),n.a.createElement("p",{className:"margin_bottom_200"},Oe.t("Please include information about who is requesting this update, and your name.")),n.a.createElement("div",null,n.a.createElement("div",null,n.a.createElement(ie,{users:this.props.orgOwners,currentSelectionValue:T.a.get(this.state.requester,"id")||T.a.get(s,"id"),onUpdateUserSelection:this.onUpdateRequesterSelect,isFormPending:t}))),n.a.createElement(ce,{currentUserValue:this.state.mcUser||i,isDisabled:t,placeholder:Oe.t("Please enter your full name"),onUpdateUserInput:this.onMcUserInput}),this.renderButtons()))}}]);return t}(n.a.Component);Ee.displayName="OrgRetentionRequest";Ee.defaultProps=ke;var Ce=Object(P["a"])("feature_gdpr_exports")(Ee);var Se=Ce;var we=a(197);var je=function e(t,a,r,l){if(!t)throw new Error("mountOrgRetentionRequest must be called with a teamId parameter");var c=Object(o["f"])(t);var u=function n(i,s){Object(o["b"])(t,p({type:i,requestData:s})).then(function(){e(t,a,r,l)}).catch(function(e){return Object(m["c"])("Failed to submit retention request:",e)})};Object(o["b"])(t,d(r)).then(function(e){var t=e.id,r=e.has_permission,o=e.all_org_owners,d=e.current_settings,p=e.pending;Object(s["a"])(n.a.createElement(i["Provider"],{store:c},n.a.createElement(we["a"],null,n.a.createElement(Se,{submitRequest:u,orgId:t,orgName:l,hasPermission:r,orgOwners:o,currentSettings:d,pendingData:p}))),a)}).catch(function(e){return Object(m["c"])("Failed to fetch retention settings:",e)})};var Ie=je;var Te=a(52);Object(Te["a"])("interop.mountOrgRetentionRequest",Ie)},,,function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(85);var s=a.n(i);var o=a(12);var l=a(26);var c=a(52);var u=a(444);var d=a(110);var p=a.n(d);var m=a(135);var h=a.n(m);var v=a(169);var f=a.n(v);var b=a(138);var g=a.n(b);var _=a(185);var y=a.n(_);var O=a(0);var k=a(2);var E=a(15);var C=a(6);var S=a(23);var w=a(24);var j=a(54);var I=a(27);var T=a(33);var A=new C["b"]("enterprise_dashboard");var N={teamVisibility:null,teamDomain:null};var P={teamName:"team_name",teamDomainName:"team_domain_name",teamVisibilityLabel:"team_visibility_label",openSlackBtn:"open_slack_btn",disabledOpenSlackBtn:"disabled_open_slack_btn"};var M=function(e){y()(t,e);function t(){p()(this,t);return f()(this,g()(t).apply(this,arguments))}h()(t,[{key:"getWorkspaceVisibilityLabel",value:function e(){var t=this.props.teamVisibility;switch(t){case"open":return A.t("Open");case"unlisted":return A.t("Hidden");case"closed":return A.t("By Request");case"invite_only":return A.t("Invite Only");default:return t}}},{key:"renderOpenSlackBtn",value:function e(){var t=this.props,a=t.available,r=t.teamUrl;if(!r)return null;if(a)return n.a.createElement(w["d"],{type:"primary",size:"medium",href:r,className:"no_underline","data-qa":P.openSlackBtn},n.a.createElement("div",{className:"p-ent_overview__header_btn"},A.t("Open in Slack")),n.a.createElement(S["b"],{type:"external-link",size:"inherit",inline:true}));return n.a.createElement(j["c"],{tip:A.t("You are not a member of this workspace."),position:"bottom"},n.a.createElement("div",null,n.a.createElement(w["d"],{type:"primary",size:"medium",disabled:true,"data-qa":P.disabledOpenSlackBtn,className:"no_underline"},n.a.createElement("div",{className:"p-ent_overview__header_btn"},A.t("Open in Slack")),n.a.createElement(S["b"],{type:"external-link",size:"inherit",inline:true}))))}},{key:"render",value:function e(){var t=this.props,a=t.teamDomain,r=t.teamName;return n.a.createElement("div",{className:"margin_bottom_100"},n.a.createElement("div",{className:"p-ent_team_overview__header"},n.a.createElement("h2",{className:"p-ent_overview__header_title","data-qa":P.teamName},r),n.a.createElement("div",{className:"p-ent_overview__header_domain"},a?n.a.createElement("span",{"data-qa":P.teamDomainName},a+".slack.com"):null),this.renderOpenSlackBtn()),n.a.createElement("div",{className:"p-ent_overview__header_subtitle","data-qa":P.teamVisibilityLabel},this.getWorkspaceVisibilityLabel()))}}]);return t}(r["PureComponent"]);M.displayName="TeamOverviewHeader";M.defaultProps=N;var D=Object(E["b"])(function(e,t,a){var r=t&&t.teams&&t.teams.teams;return r&&Object(k["find"])(r,{id:a})});D.meta={name:"getLegacyTeamById",key:"componentsEnterpriseTeamOverviewTeamOverviewHeaderGetLegacyTeamById"};var x=function e(t,a){var r=a.teams,n=a.org;var i=r.team_settings_team_id;var s=Object(T["k"])(t,i);var o=D(t,a,i);var l=Object(I["getTeamDomain"])(s);var c=Object(I["getTeamUrl"])(s);var u=Object(I["getTeamDiscoverable"])(o);return{teamUrl:c,teamDomain:l,teamName:Object(I["getTeamDisplayName"])(s),teamVisibility:u||Object(I["getTeamDiscoverable"])(s),available:Object(k["get"])(n,"user.enterprise_user.teams",[]).indexOf(i)>-1}};var R=M;var F=Object(o["connect"])(x)(M);var L=a(147);var U=a.n(L);var B=a(494);var q=a(219);var G=a(88);var H=a.n(G);var W=a(245);var V=a.n(W);var K=a(29);var z=a(31);var Q=a(16);function Y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function J(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(a),true).forEach(function(t){H()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Y(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var X="SEARCH_TEAM";var Z={type:"is",value:"user"};var $={type:"or",clauses:[{type:"level",value:"admin"},{type:"level",value:"owner"},{type:"level",value:"primary_owner"}]};var ee=Object(K["a"])("Fetch workspace admins by query from the API",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var r=a.reason,n=void 0===r?"fetchWorkspaceAdmins":r,i=V()(a,["reason"]);var s=JSON.stringify({type:"and",clauses:[Z,$]});return e(Object(z["a"])({method:"search.team",args:J({query:s},i),reason:n})).catch(function(e){var a="failed to call search.team with query "+s+": "+JSON.stringify(e&&e.data);e&&e.data&&"post_failed"===e.data.error?Object(Q["a"])({getState:t}).warn(X,a):Object(Q["a"])({getState:t}).error(X,a);return{items:[]}})});ee.meta={name:"fetchWorkspaceAdmins",key:"fetchersEnterpriseSearchTeamFetchWorkspaceAdmins",description:"Fetch workspace admins by query from the API"};ee.propTypes={options:O["default"].object};var te={DEFAULT_WORKSPACE_QUERY:Z,DEFAULT_ADMINS_QUERY:$};var ae=a(11);var re=new C["b"]("enterprise_dashboard");var ne={navigateToMemberProfile:k["noop"],fetchWorkspaceAdmins:k["noop"],teams:{},org:{},featureOrgLevelUserGroupsPhase2Frontend:false};var ie=function(e){y()(t,e);function t(){var e;p()(this,t);e=f()(this,g()(t).call(this));e.state={members:[],isLoading:true,nextCursorMark:null};e.fetchTeamDetails=e.fetchTeamDetails.bind(U()(e));e.parseTeamDetails=e.parseTeamDetails.bind(U()(e));e.parseMembers=e.parseMembers.bind(U()(e));e.onMemberRowClick=e.onMemberRowClick.bind(U()(e));e.onRequestNextPage=e.onRequestNextPage.bind(U()(e));e.rowTemplate={items:[{value:function e(t){var a=Object(k["get"])(t,"profile.image_72");if(a)return n.a.createElement("div",{"data-member-id":t.id},n.a.createElement("div",{className:"p-team_overview_table__avatar_image"},n.a.createElement(q["a"],{size:36,imageUrl:a})),t.real_name&&n.a.createElement("div",null,n.a.createElement("b",{className:"p-team_overview_table__avatar_realname"},t.real_name)),n.a.createElement("div",{className:"p-team_overview_table__avatar_name"},"@",t.profile&&t.profile.display_name||t.name));return n.a.createElement("b",{"data-member-id":t.id},t.name)},className:"p-team_overview_table__item p-team_overview_table__user_profile"},{value:function t(a){if(!a)return"";return n.a.createElement("b",{"data-member-id":a.id},e.getUserLabel(a))},className:"p-team_overview_table__item p-team_overview_table__user_type"}]};return e}h()(t,[{key:"componentDidMount",value:function e(){this.fetchTeamDetails()}},{key:"onMemberRowClick",value:function e(t){var a=this.props.navigateToMemberProfile;if(!a)return;a(t)}},{key:"onRequestNextPage",value:function e(){if(this.state.members.length===this.state.adminOwnerCount)return;this.fetchTeamDetails()}},{key:"getUserLabel",value:function e(t){if(!t)return"";var a=this.props.featureOrgLevelUserGroupsPhase2Frontend;if(a){if(t.is_primary_owner)return re.t("Primary Owner");if(t.is_owner)return re.t("Workspace Owner");if(t.is_admin)return re.t("Workspace Admin");return re.t("Member")}if(t.is_primary_owner)return"Primary Owner";if(t.is_owner)return"Workspace Owner";if(t.is_admin)return"Workspace Admin";return"Member"}},{key:"fetchTeamDetails",value:function e(){var t=this;var a=this.props.teams&&this.props.teams.team_settings_team_id;var r=this.state.nextCursorMark;var n={isLoading:true};this.setState(n);var i={team:a,reason:"admin_dashboard_team_overview",count:100};r&&(i.cursor_mark=r);this.props.fetchWorkspaceAdmins(i).then(function(e){return t.parseTeamDetails(e)})}},{key:"parseMembers",value:function e(t){var a=this.state.members;if(!t||!t.length)return[this.props.org.enterprise.primary_owner];var r=a.concat(t);return r}},{key:"parseTeamDetails",value:function e(t){var a={teamData:t.team,adminOwnerCount:t.num_found,members:this.parseMembers(t.items),isLoading:false,nextCursorMark:t.items.length&&t.next_cursor_mark};this.setState(a)}},{key:"render",value:function e(){var t=this;var a=this.state,r=a.isLoading,i=a.members,s=a.adminOwnerCount;var o=0;var l=i&&i.map(function(e){o+=1;var a="member"+o;var r=0;return{id:"row_"+a,onClick:t.onMemberRowClick,items:t.rowTemplate.items.map(function(t){r+=1;return{id:"row_"+a+"_col_"+r,value:t.value(e),className:t.className}})}});return n.a.createElement(n.a.Fragment,null,n.a.createElement("h2",{className:"p-team_overview_table__header"},re.t("{count, plural, =1 {# Workspace Admin} other {# Workspace Admins}}",{count:s||1})),n.a.createElement("div",{className:"p-team_overview_table"},n.a.createElement(B["b"],{autoHeight:true,headers:[{id:"header_0",value:re.t("Admin Name")},{id:"header_1",value:re.t("Admin Type")}],isLoading:r,onRequestNextPage:this.onRequestNextPage,rows:l,rowClassName:"p-team_overview_table__row",rowHeaderItemClassName:"p-team_overview_table__row_header c-table_view_hover_disabled",listClassName:"p-team_overview_table__list",useKeyboardNavigableTable:true})))}}]);return t}(n.a.PureComponent);ie.displayName="TeamOverviewTable";ie.defaultProps=ne;var se={fetchWorkspaceAdmins:ee};var oe=function e(t){return{featureOrgLevelUserGroupsPhase2Frontend:Object(ae["isFeatureEnabled"])(t,"feature_org_level_user_groups_phase_2_frontend")}};var le=Object(o["connect"])(oe,se)(ie);var ce=a(3272);var ue=a(3274);var de={label:"[Enter label here]",value:0};var pe=function e(t){var a=t.label,r=t.value;return n.a.createElement("div",{className:"p-team_overview__details_pane"},n.a.createElement("h1",{className:"p-team_overview__details_pane__value"},r),n.a.createElement("p",{className:"p-team_overview__details_pane__label"},a))};pe.displayName="DetailsPane";pe.displayName="DetailsPane";pe.defaultProps=de;var me=pe;var he=a(3276);var ve=new C["b"]("enterprise_dashboard");var fe=function e(t){return ve.t("{membersCount, plural, =0 {No Members} =1 {Member} other {Members}}",{membersCount:t})};var be=function e(t){var a=t.membersCount;return n.a.createElement("div",{className:"p-team_overview__members_count","data-qa":"team-overview-members-count"},n.a.createElement(me,{label:fe(a),value:a}))};be.displayName="MembersCount";be.displayName="MembersCount";var ge=be;var _e=new C["b"]("enterprise_team_overview");var ye=function e(t,a){var r=t||_e.t("IDP");return _e.t("{idpGroupsCount, plural, =0 {No {idp} Groups} =1 {{idp} Group} other {{idp} Groups}}",{idpGroupsCount:a,idp:r})};var Oe=function e(t){var a=t.idpGroupsCount,r=t.idpGroupsLabel;return n.a.createElement(me,{"data-qa":"team-overview-groups-count",label:ye(r,a),value:a})};Oe.displayName="IdpGroupsCount";Oe.displayName="IdpGroupsCount";var ke=Oe;var Ee=function e(t){var a=t.membersCount,r=t.idpGroupsCount,i=t.idpGroupsLabel;return n.a.createElement("div",{className:"p-team_overview__details_wrapper"},n.a.createElement(ge,{membersCount:a}),n.a.createElement(ke,{idpGroupsCount:r,idpGroupsLabel:i}))};Ee.displayName="DetailsWrapper";Ee.displayName="DetailsWrapper";var Ce=Ee;var Se=Object(E["b"])(function(e,t){var a=t.enterprise,r=void 0===a?{}:a;return r});Se.meta={name:"getEnterpriseFromOrg",key:"componentsEnterpriseTeamOverviewTeamOverviewDetailsDetailsContainerGetEnterpriseFromOrg"};var we=Object(E["b"])(function(e,t){var a=Se(e,t).sso_provider||{};return a.label||""});we.meta={name:"getSSOProviderLabel",key:"componentsEnterpriseTeamOverviewTeamOverviewDetailsDetailsContainerGetSSOProviderLabel"};var je=Object(E["b"])(function(e,t){var a=t.teams,r=t.team_settings_team_id;return a.find(function(e){return e.id===r})||{}});je.meta={name:"getSelectedTeam",key:"componentsEnterpriseTeamOverviewTeamOverviewDetailsDetailsContainerGetSelectedTeam"};var Ie=function e(t,a){var r=a.teams,n=a.org;var i=je(t,r),s=i.count_members_all,o=void 0===s?1:s,l=i.count_groups_enterprise,c=void 0===l?0:l;return{idpGroupsLabel:we(t,n),membersCount:o,idpGroupsCount:c}};var Te=Object(o["connect"])(Ie)(Ce);var Ae=a(3278);var Ne=function(e){y()(t,e);function t(){p()(this,t);return f()(this,g()(t).apply(this,arguments))}h()(t,[{key:"render",value:function e(){return n.a.createElement("div",{"data-qa":"team_overview"},n.a.createElement(F,this.props),n.a.createElement(Te,{teams:this.props.teams,org:this.props.org}),n.a.createElement("div",{"data-qa":"team_overview_table"},n.a.createElement(le,this.props)))}}]);return t}(n.a.PureComponent);Ne.displayName="TeamOverview";var Pe=Ne;Object(c["a"])("interop.teamOverview",{render:function e(t,a,r){if(!t)throw new Error("team overview render must be called with a teamId parameter");var i=Object(l["f"])(t);s.a.render(n.a.createElement(o["Provider"],{store:i},n.a.createElement(u["a"],null,n.a.createElement(Pe,r))),a)},stop:function e(t){s.a.unmountComponentAtNode(t)}})},function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(12);var s=a(156);var o=a(26);var l=a(342);var c=a.n(l);var u=a(110);var d=a.n(u);var p=a(135);var m=a.n(p);var h=a(169);var v=a.n(h);var f=a(138);var b=a.n(f);var g=a(185);var _=a.n(g);var y=a(2);var O=a(6);var k=a(25);var E=a(33);var C=a(17);var S=a(27);var w=a(836);var j=a(291);var I=a(24);var T=a(23);var A=a(2185);function N(e){return!!Object(y["has"])(e,"activeCall")}var P=a(268);var M=a(1306);var D=a(514);var x=a(61);var R=a(3510);var F=new O["b"]("incoming_call_window");var L=function(e){_()(t,e);function t(){d()(this,t);return v()(this,b()(t).apply(this,arguments))}m()(t,[{key:"componentDidMount",value:function e(){this.props.telemeter.count("calls_dialog_displayed",1);Object(M["a"])(D["g"],{loop:true})}},{key:"componentWillUnmount",value:function e(){Object(M["b"])(D["g"])}},{key:"getSrcSetAttribute",value:function e(t){if(!t)return"";return t+" 2x"}},{key:"maybeRenderGuestBadge",value:function e(){if(this.props.isUltraRestricted)return n.a.createElement(T["b"],{type:"single-channel-guest",inline:true});if(this.props.isRestricted)return n.a.createElement(T["b"],{type:"restricted-user",inline:true});return null}},{key:"renderUserImage",value:function e(){var t=this.props.avatarUrls,a=t.imageUrl,r=t.imageUrl2x;if(a||r)return n.a.createElement("img",{className:"p-incoming_call__member_image",src:a||r,srcSet:this.getSrcSetAttribute(r),alt:""});return null}},{key:"renderExternalTeamLabel",value:function e(){return n.a.createElement("div",{className:"p-incoming_call__external_team_banner"},n.a.createElement("span",{className:"p-incoming_call__external_team_name"},this.props.externalTeamName),n.a.createElement(j["b"],{className:"p-incoming_call__external_team_icon",id:this.props.memberTeamId,size:18}))}},{key:"renderUserName",value:function e(){return n.a.createElement("div",{className:"p-incoming_call__member_name_wrapper"},n.a.createElement("span",{className:"p-incoming_call__member_name"},this.props.prefCompliantMemberName),this.maybeRenderGuestBadge())}},{key:"renderCaptionText",value:function e(){var t=F.t("is calling you");return n.a.createElement("div",{className:"p-incoming_call__user_caption"},t)}},{key:"renderCallButtons",value:function e(){var t=this;return n.a.createElement("div",{className:"p-incoming_call__button_container"},n.a.createElement(I["d"],{type:"danger",size:"medium",onClick:function e(){return t.onRejectCall()},className:"p-incoming_call__button","aria-label":"Decline"},n.a.createElement(T["b"],{type:"times"})),n.a.createElement(I["d"],{type:"primary",size:"medium",onClick:function e(){return t.onAcceptCall()},className:"p-incoming_call__button","aria-label":"Accept"},n.a.createElement(T["b"],{type:"phone"})))}},{key:"render",value:function e(){return n.a.createElement("div",{className:"p-incoming_call"},this.props.isExternal&&this.renderExternalTeamLabel(),this.renderUserImage(),n.a.createElement("div",{className:"p-incoming_call__info"},this.renderUserName(),this.renderCaptionText(),this.renderCallButtons()))}},{key:"onAcceptCall",value:function e(){this.props.telemeter.count("calls_dialog_accepted",1);this.props.onAcceptCall(this.props.callId);Object(M["b"])(D["g"])}},{key:"onRejectCall",value:function e(){this.props.telemeter.count("calls_dialog_declined",1);this.props.onRejectCall(this.props.callId)}}]);return t}(r["PureComponent"]);L.displayName="IncomingCall";function U(e,t){if(N(e))return e.activeCall.incomingInviterUserId;var a=Object(P["b"])(e,t).incomingInvite;if(!a){Object(A["a"])("No incoming invite");return}return a.userId}var B=function e(t,a){var r=U(t,a.callId);if(!r)throw new Error("No inviter user id for callId: "+a.callId);var n=Object(k["e"])(t,r);var i=Object(C["getTeamIdForMember"])(t,n);var s=Object(E["k"])(t,i);var o=Object(C["isExternal"])(n);var l=Object(C["getPrefCompliantMemberName"])(t,n);var c=Object(S["getTeamDisplayName"])(s);var u=Object(y["get"])(n,"profile.avatar_hash");var d=Object(w["a"])({size:200,teamId:i,memberId:r,avatarHash:u});return{avatarUrls:d,prefCompliantMemberName:l,memberTeamId:i,externalTeamName:c,isRestricted:Object(C["isRestricted"])(n),isUltraRestricted:Object(C["isUltraRestricted"])(n),isExternal:o,telemeter:Object(x["c"])({state:t})}};var q={mapStateToProps:B};Object.defineProperty(q,"mapStateToProps",{get:function e(){return B},set:function e(t){B=t}});var G=Object(i["connect"])(B)(L);var H=a(32);var W=a(16);var V=a(3512);var K=a(790);var z=a(205);var Q=a(94);var Y=a(218);var J=a.n(Y);var X=a(88);var Z=a.n(X);var $=a(196);var ee=a.n($);var te=a(163);var ae=a(224);var re=["#FFE0E0","#DBEB8D","#B5E0FF","#FFE5B2","#BDE595","#D4D5FF","#F9EF6E","#D0F2ED","#FFCCFF"];var ne=function(){function e(){d()(this,e);this.startIndex=Math.floor(Math.random()*(re.length-1))}m()(e,[{key:"getSelfColor",value:function e(){return re[this.startIndex]}},{key:"getColorForJoinIndex",value:function e(t){return re[(this.startIndex+1+t)%re.length]}}]);return e}();var ie=a(31);var se=a(427);var oe=Object(Q["b"])("Sends an invite to the web API from the call window",function(e,t,a){var r=a.id,n=a.invitedUserIds;Object(A["a"])(Object(se["a"])(),"We expect this to run in a call window context");return Promise.all([n.map(function(t){return e(Object(ie["a"])({method:"screenhero.rooms.invite",reason:"calls-invite",args:{responder:t,room:r,should_share:true,cancelable:true}}))})])});oe.meta={name:"sendInvites",key:"appCallsFetchersSendInvitesSendInvites",description:"Sends an invite to the web API from the call window"};var le=new ne;function ce(e,t){return"Could not "+t+": problem with peerId "+e+"."}function ue(e){return"self"===e.id}function de(e){return ue(e)}function pe(e){return ue(e)}var me=Object(Q["a"])("Add a remote peer");me.meta={name:"addRemotePeer",key:"appCallsReduxPeersStoreAddRemotePeer",description:"Add a remote peer"};var he=Object(Q["a"])("Remove a remote peer");he.meta={name:"removeRemotePeer",key:"appCallsReduxPeersStoreRemoveRemotePeer",description:"Remove a remote peer"};var ve=Object(Q["a"])("Update a peer");ve.meta={name:"updatePeer",key:"appCallsReduxPeersStoreUpdatePeer",description:"Update a peer"};var fe=Object(Q["a"])("Add an invited user");fe.meta={name:"addInvitedUser",key:"appCallsReduxPeersStoreAddInvitedUser",description:"Add an invited user"};var be=Object(Q["a"])("Update a response for an invited user");be.meta={name:"updateResponseForInvitedUser",key:"appCallsReduxPeersStoreUpdateResponseForInvitedUser",description:"Update a response for an invited user"};var ge=Object(Q["a"])("Remove an invited user");ge.meta={name:"markInviteExpired",key:"appCallsReduxPeersStoreMarkInviteExpired",description:"Remove an invited user"};var _e=Object(Q["a"])("Update a peer's connection");_e.meta={name:"setRemotePeerIsConnected",key:"appCallsReduxPeersStoreSetRemotePeerIsConnected",description:"Update a peer's connection"};var ye=Object(Q["a"])("Update the screen share of a peer");ye.meta={name:"setRemotePeerScreenshareDoNotDispatch",key:"appCallsReduxPeersStoreSetRemotePeerScreenshareDoNotDispatch",description:"Update the screen share of a peer"};var Oe=Object(Q["a"])("Set the ID of the peer selected by the user");Oe.meta={name:"setUserSelectedPeerId",key:"appCallsReduxPeersStoreSetUserSelectedPeerId",description:"Set the ID of the peer selected by the user"};var ke=Object(Q["a"])("Set the ID of the peer selected by the user");ke.meta={name:"unsetUserSelectedPeerId",key:"appCallsReduxPeersStoreUnsetUserSelectedPeerId",description:"Set the ID of the peer selected by the user"};var Ee=Object(Q["a"])("Set the ID of the active speaker");Ee.meta={name:"setSpeakingPeerId",key:"appCallsReduxPeersStoreSetSpeakingPeerId",description:"Set the ID of the active speaker"};var Ce=Object(Q["a"])("Add an emoji reaction");Ce.meta={name:"addEphemeralMessage",key:"appCallsReduxPeersStoreAddEphemeralMessage",description:"Add an emoji reaction"};var Se=Object(Q["a"])("Remove an emoji reaction");Se.meta={name:"removeEmojiReaction",key:"appCallsReduxPeersStoreRemoveEmojiReaction",description:"Remove an emoji reaction"};var we=Object(Q["a"])("Send an emoji reaction");we.meta={name:"sendEphemeralMessage",key:"appCallsReduxPeersStoreSendEphemeralMessage",description:"Send an emoji reaction"};var je={self:{id:"self",isMicrophoneEnabled:true,isDrawEnabled:true,reactionColor:le.getSelfColor(),drawHue:Math.floor(360*Math.random())},invitedUsers:{},byId:{},leftById:{},reacjis:[],reacjiShownCounter:0,remotePeerJoinedCounter:0};var Ie=Object(Q["c"])({},je,{storeKey:"peers",persistenceEnabled:false}).on(me,function(e,t){Object(A["a"])(!e.byId[t.id],ce(t.id,"addRemotePeer"));var a=e.remotePeerJoinedCounter;return ee()(ee()(ee()({},e),{remotePeerJoinedCounter:e.remotePeerJoinedCounter+1,lastRemoteScreensharePeerId:it(e,t),byId:ee()(ee()({},e.byId),Z()({},t.id,ee()(ee()({},t),{joinIndex:a,reactionColor:le.getColorForJoinIndex(a)})))}),e.invitedUsers[t.userId]?{invitedUsers:ee()(ee()({},e.invitedUsers),Z()({},t.userId,ee()(ee()({},e.invitedUsers[t.userId]),{isExpired:true})))}:null)}).on(he,function(e,t){var a=e.byId[t];Object(A["a"])(!!a,"Peer should exist in order to remove");return ee()(ee()({},e),{speakingPeerId:e.speakingPeerId===t?void 0:e.speakingPeerId,userSelectedPeerId:e.userSelectedPeerId===t?void 0:e.userSelectedPeerId,lastRemoteScreensharePeerId:e.lastRemoteScreensharePeerId===t?void 0:e.lastRemoteScreensharePeerId,byId:ee()({},Object(y["omit"])(e.byId,t)),leftById:ee()(ee()({},e.leftById),Z()({},a.id,ee()({},a)))})}).on(fe,function(e,t){var a=t.userId,r=t.isCancelable,n=void 0===r||r;return ee()(ee()({},e),{invitedUsers:ee()(ee()({},e.invitedUsers),Z()({},a,{response:"pending",isCancelable:n,isExpired:false}))})}).on(be,function(e,t){var a=t.userId,r=t.response;return ee()(ee()({},e),{invitedUsers:ee()(ee()({},e.invitedUsers),Z()({},a,ee()(ee()({},e.invitedUsers[a]),{response:r})))})}).on(ge,function(e,t){return ee()(ee()({},e),{invitedUsers:ee()(ee()({},e.invitedUsers),Z()({},t,ee()(ee()({},e.invitedUsers[t]),{isExpired:true})))})}).on(ve,function(e,t){if(de(t))return ee()(ee()({},e),{self:ee()(ee()(ee()({},e.self),t),!Object(y["isUndefined"])(t.isScreenshareEnabled)&&{isHostDrawEnabled:false})});Object(A["a"])(!!e.byId[t.id],ce(t.id,"updatePeer"));return ee()(ee()({},e),{byId:ee()(ee()({},e.byId),Z()({},t.id,ee()(ee()({},e.byId[t.id]),t)))})}).on(ye,function(e,t){Object(A["a"])(!!e.byId[t.id],ce(t.id,"setRemotePeerScreenshare"));return ee()(ee()({},e),{lastRemoteScreensharePeerId:it(e,t),byId:ee()(ee()({},e.byId),Z()({},t.id,ee()(ee()({},e.byId[t.id]),t)))})}).on(_e,function(e,t){var a=t.id,r=t.isConnected;Object(A["a"])(!!e.byId[a],ce(a,"setRemotePeerIsConnected"));return ee()(ee()(ee()({},e),!r&&{lastRemoteScreensharePeerId:it(e,{id:a,isScreenshareEnabled:false})}),{byId:ee()(ee()({},e.byId),Z()({},a,ee()(ee()(ee()({},e.byId[a]),{isConnected:r}),!r&&{isCameraEnabled:false,isScreenshareEnabled:false})))})}).on(Oe,function(e,t){"self"!==t&&Object(A["a"])(!!e.byId[t],ce(t,"setUserSelectedPeerId"));return ee()(ee()({},e),{userSelectedPeerId:t})}).on(ke,function(e){return ee()(ee()({},e),{userSelectedPeerId:void 0})}).on(Ee,function(e,t){Object(A["a"])(!!e.byId[t],ce(t,"setSpeakingPeerId"));return ee()(ee()({},e),{speakingPeerId:t})}).on(Ce,function(e,t){var a=e.reacjiShownCounter+1;return ee()(ee()({},e),{reacjiShownCounter:a,reacjis:[{peerId:t.peerId,emoji:t.emoji,id:a,isEmoji:t.isEmoji}].concat(J()(e.reacjis))})}).on(Se,function(e,t){var a=e.reacjis.filter(function(e){return e.id!==t});return ee()(ee()({},e),{reacjis:a})});var Te=Ie;var Ae=Object(Q["d"])(function(e,t){var a=e.peers;if("self"===t)return a.self;var r=a.byId[t];Object(A["a"])(!!r,ce(t,"getPeer"));return r});Ae.meta={name:"getPeer",key:"appCallsReduxPeersStoreGetPeer"};var Ne=Object(Q["d"])(function(e,t){var a=e.peers.byId[t];Object(A["a"])(!!a,ce(t,"getPeer"));return a});Ne.meta={name:"getRemotePeer",key:"appCallsReduxPeersStoreGetRemotePeer"};var Pe=Object(Q["d"])(function(e){return e.peers.self});Pe.meta={name:"getSelf",key:"appCallsReduxPeersStoreGetSelf"};var Me=Object(Q["d"])(function(e,t){if("self"===t)return e.peers.self;return De(e,t)});Me.meta={name:"getMaybeLeftPeer",key:"appCallsReduxPeersStoreGetMaybeLeftPeer"};var De=Object(Q["d"])(function(e,t){var a=e.peers;var r=a.byId[t];var n=a.leftById[t];Object(A["a"])(!!r||!!n,"No record of peer ever existing with id: "+t);return r||n});De.meta={name:"getMaybeLeftRemotePeer",key:"appCallsReduxPeersStoreGetMaybeLeftRemotePeer"};var xe=Object(Q["d"])(function(e){return e.peers.leftById});xe.meta={name:"getLeftPeers",key:"appCallsReduxPeersStoreGetLeftPeers"};var Re=Object(Q["d"])(function(e){return e.peers.invitedUsers});Re.meta={name:"getAllInvitedUsers",key:"appCallsReduxPeersStoreGetAllInvitedUsers"};var Fe=Object(te["createSelector"])(Re,function(e){return Object(y["pickBy"])(e,function(e){var t=e.isExpired;return!t})});var Le=Object(te["createSelector"])(Re,function(e){return Object.keys(e)});var Ue=Object(te["createSelector"])(Fe,function(e){return Object.keys(e)});var Be=Object(te["createSelector"])(Re,function(e){return 0!==Object(y["size"])(e)&&Object(y["every"])(e,function(e){return e.response===z["c"].DoNotDisturb})});var qe=Object(Q["d"])(function(e){return e.peers.byId});qe.meta={name:"getRemotePeers",key:"appCallsReduxPeersStoreGetRemotePeers"};var Ge=Object(te["createSelector"])(qe,function(e){return Object(y["map"])(e,"userId")});var He=Object(te["createSelector"])(qe,function(e){return Object(y["orderBy"])(e,"joinIndex","desc")});var We=Object(te["createSelector"])(He,function(e){return Object(y["map"])(e,"id")});var Ve=Object(te["createSelector"])(He,function(e){return Object(y["map"])(e,"userId")});var Ke=Object(Q["d"])(function(e){return!!Object.keys(e.peers.byId).length||!!Object.keys(e.peers.leftById).length});Ke.meta={name:"getHasRemotePeerEverJoined",key:"appCallsReduxPeersStoreGetHasRemotePeerEverJoined"};var ze=Object(te["createSelector"])(qe,function(e){return Object(y["some"])(e,function(e){var t=e.isScreenshareEnabled;return!!t})});var Qe=Object(te["createSelector"])(Fe,function(e){return Object(y["reduce"])(e,function(e,t,a){var r=t.response,n=t.isExpired;("pending"===r||r===z["c"].Accept&&!n)&&e.push(a);return e},[])});var Ye=Object(te["createSelector"])(Fe,function(e){return Object(y["filter"])(e,function(e){var t=e.isCancelable;return t})});var Je=Object(te["createSelector"])(Re,qe,xe,function(e){return e.activeCall.conversationId},function(e,t,a,r){return!Object(y["size"])(t)&&!Object(y["size"])(a)&&Object(y["size"])(e)&&!!r&&!Object(z["l"])(r)&&Object(y["every"])(e,function(e){return"pending"!==e.response&&e.response!==z["c"].Accept})});var Xe=Object(Q["d"])(function(e){return tt(e)||e.peers.lastRemoteScreensharePeerId||e.peers.speakingPeerId||Number(Object.keys(e.peers.byId)[0])});Xe.meta={name:"getActivePeerId",key:"appCallsReduxPeersStoreGetActivePeerId"};var Ze=Object(te["createSelector"])(Qe,function(e){return e[0]});var $e=Object(Q["d"])(function(e){var t=Xe(e);if(!t)return false;return!!Ae(e,t).isScreenshareEnabled});$e.meta={name:"getIsActivePeerScreenSharing",key:"appCallsReduxPeersStoreGetIsActivePeerScreenSharing"};var et=Object(Q["d"])(function(e){var t=Xe(e);if(!t)return false;return!!Ae(e,t).isCameraEnabled});et.meta={name:"getIsActivePeerCameraEnabled",key:"appCallsReduxPeersStoreGetIsActivePeerCameraEnabled"};var tt=Object(Q["d"])(function(e){return e.peers.userSelectedPeerId});tt.meta={name:"getUserSelectedPeerId",key:"appCallsReduxPeersStoreGetUserSelectedPeerId"};var at=Object(Q["d"])(function(e){var t=Pe(e);if(!t.isScreenshareEnabled||!t.screens)return;return t.screens[t.thumbnailIndex||0]});at.meta={name:"getCurrentlySharedScreen",key:"appCallsReduxPeersStoreGetCurrentlySharedScreen"};var rt=Object(Q["d"])(function(e){return e.peers.reacjis});rt.meta={name:"getReactions",key:"appCallsReduxPeersStoreGetReactions"};var nt=Object(Q["d"])(function(e,t){return Object(C["getPrefCompliantMemberNameById"])(e,De(e,t).userId)});nt.meta={name:"getMemberNameByRemotePeerId",key:"appCallsReduxPeersStoreGetMemberNameByRemotePeerId"};function it(e,t){var a=t.isScreenshareEnabled;if(e.lastRemoteScreensharePeerId===t.id&&!a)return;return a&&t.id||e.lastRemoteScreensharePeerId}var st=Object(Q["e"])("Set the screen sharing of a peer. If screen sharing is turned on, turn off our screen share",function(e,t,a){var r=a.id,n=a.isScreenshareEnabled;e(ye({id:r,isScreenshareEnabled:n}));n&&e(ve({id:"self",isScreenshareEnabled:false}))});st.meta={name:"setRemoteScreenshareAndDisableForSelf",key:"appCallsReduxPeersStoreSetRemoteScreenshareAndDisableForSelf",description:"Set the screen sharing of a peer. If screen sharing is turned on, turn off our screen share"};var ot=Object(Q["e"])("Invite new members to an existing call",function(e,t,a){var r=t();if(!Object(ae["b"])(r.activeCall.id,"Must have an active call to send an invite"))return;a.forEach(function(t){return e(fe({userId:t}))});e(oe({id:r.activeCall.id,invitedUserIds:a}))});ot.meta={name:"inviteMembersToCall",key:"appCallsReduxPeersStoreInviteMembersToCall",description:"Invite new members to an existing call"};var lt=a(1298);var ct=Object(Q["a"])("Update part or all of the call");ct.meta={name:"update",key:"appCallsReduxActiveCallStoreUpdate",description:"Update part or all of the call"};var ut=Object(Q["a"])("Update the active call token");ut.meta={name:"setServerToken",key:"appCallsReduxActiveCallStoreSetServerToken",description:"Update the active call token"};var dt=Object(Q["a"])("Update the elapsed call time");dt.meta={name:"tickCallTime",key:"appCallsReduxActiveCallStoreTickCallTime",description:"Update the elapsed call time"};var pt=Object(Q["a"])("update state to notify active call window is closed");pt.meta={name:"callWindowClosed",key:"appCallsReduxActiveCallStoreCallWindowClosed",description:"update state to notify active call window is closed"};var mt=Object(Q["a"])("Store gleaned contextual information from the url");mt.meta={name:"setInitialContext",key:"appCallsReduxActiveCallStoreSetInitialContext",description:"Store gleaned contextual information from the url"};var ht=Object(Q["c"])({},{hasJoined:false,hasSelfConnected:false,hasRemotePeerConnected:false,hasVideoBeenEnabled:false,elapsedDisplayTime:Object(lt["a"])(0)},{storeKey:"activeCall",persistenceEnabled:false}).on(mt,function(e,t){var a=t.callOrConversationId,r=t.inviterUserId;var n=Object(z["h"])(a);return ee()(ee()({},e),{id:n?a:void 0,conversationId:n?void 0:a,incomingInviterUserId:r,incomingInviteResponse:Object(H["isSSB"])()?void 0:z["c"].Accept})}).on(ct,function(e,t){return ee()(ee()({},e),t)}).on(pt,function(e,t){var a=t.isCallWindowClosed;return ee()(ee()({},e),{isCallWindowClosed:a})}).on(dt,function(e){if(!e.callStartedTimestamp)return e;return ee()(ee()({},e),{elapsedDisplayTime:Object(lt["a"])(Date.now()-1e3*e.callStartedTimestamp)})}).on(ut,function(e,t){var a=t.token,r=t.tokenExpiry;if(!e.server){Object(A["a"])("Cannot set server token without a server");return e}return ee()(ee()({},e),{server:ee()(ee()({},e.server),{token:a,tokenExpiry:r})})}).on(ve,function(e,t){return ee()(ee()({},e),{hasVideoBeenEnabled:e.hasVideoBeenEnabled||!!(t.isCameraEnabled||de(t)&&t.isScreenshareEnabled),hasSelfConnected:e.hasSelfConnected||!!(de(t)&&t.isConnected)})}).on(_e,function(e,t){return ee()(ee()({},e),{hasRemotePeerConnected:e.hasRemotePeerConnected||!!t.isConnected})}).on(ye,function(e,t){return ee()(ee()({},e),{hasVideoBeenEnabled:e.hasVideoBeenEnabled||!!t.isScreenshareEnabled})});var vt=ht;var ft=function e(t){return!!t.activeCall.incomingInviterUserId&&!t.activeCall.incomingInviteResponse};var bt=function e(t){return!!t.activeCall.incomingInviterUserId};var gt=function e(t){return!!t.activeCall.conversationId&&Object(z["j"])(t.activeCall.conversationId)};var _t=function e(t){return t.activeCall.id};var yt=function e(t){return t.activeCall.hasSelfConnected&&t.activeCall.hasRemotePeerConnected};var Ot=new O["b"]("calls");var kt=Object(Q["d"])(function(e){var t=e.activeCall.incomingInviterUserId&&Object(C["getPrefCompliantMemberNameById"])(e,e.activeCall.incomingInviterUserId);var a=e.activeCall.name;var r=e.activeCall.conversationId;var n=e.activeCall.hasJoined;var i=Ve(e);var s=i.length;var o=ft(e);var l=Le(e);if(a&&n)return a;if(o)return Ot.t("{inviterName} is calling you",{inviterName:t});if(r&&!s&&l.length){var c=Object(C["getPrefCompliantMemberNameById"])(e,l[0]);var u=l.length-1;if(l.length>1)return Ot.t("Calling {namedInvitedUser} and {remainingInvitedUserCount,plural,=1{# other person}other{# other people}}",{namedInvitedUser:c,remainingInvitedUserCount:u,fallbackHash:"1f193c850fe96a988a352bb5c38247343e49f235"});return Ot.t("Calling {namedInvitedUser}",{namedInvitedUser:c})}if(!s)return Ot.t("Slack call, waiting for others to join");var d=Object(C["getPrefCompliantMemberNameById"])(e,i[0]);var p=i.length-1;if(i.length>1)return Ot.t("Slack call with {namedPeer} and {remainingJoinedPeers,plural,=1{# other person}other{# other people}}",{namedPeer:d,remainingJoinedPeers:p,fallbackHash:"6f6600f1cf4eef0e7f75926baabfc8baf445c5c8"});return Ot.t("Slack call with {namedPeer}",{namedPeer:d})});kt.meta={name:"getCallWindowTitle",key:"callsReduxSelectorsGetCallWindowTitleGetCallWindowTitle"};var Et=Object(Q["d"])(function(e){var t=Object(P["c"])(e);var a=t&&t.incomingInvite&&Object(C["getPrefCompliantMemberNameById"])(e,t.incomingInvite.userId);return a?Ot.t("{inviterName} is calling you",{inviterName:a}):Ot.t("Incoming call")});Et.meta={name:"getIncomingCallAriaLabelForBrowser",key:"callsReduxSelectorsGetCallWindowTitleGetIncomingCallAriaLabelForBrowser"};var Ct=function e(t){var a=t.invitingCall,r=t.onAcceptCall,i=t.onRejectCall,s=t.callTitle;Object(H["isSSB"])()&&Object(W["b"])().error("BrowserIncomingCall should only be instantiated in a browser.");if(!a)return null;var o={content:{background:"transparent",border:"none",left:"50%",margin:"0",padding:"0",width:"200px"}};return n.a.createElement(c.a,{isOpen:true,overlayClassName:"p-browser_incoming_call--shroud",shouldFocusAfterRender:true,shouldReturnFocusAfterClose:true,style:o,contentLabel:s},n.a.createElement("div",{className:"p-browser_incoming_call"},n.a.createElement(G,{callId:a,onAcceptCall:r,onRejectCall:i})))};var St=function e(t){var a=Object(P["c"])(t);var r=Et(t);return{invitingCall:a&&a.id,callTitle:r}};var wt=function e(t){return{onAcceptCall:function e(a){return t(Object(K["a"])(a))},onRejectCall:function e(a){return t(Object(K["b"])({id:a,response:z["c"].Reject}))}}};var jt=Object(i["connect"])(St,wt)(Ct);var It=a(197);var Tt=function e(t,a){if(!t)throw new Error("mountIncomingCall must be called with a teamId parameter");var r=Object(o["f"])(t);Object(s["a"])(n.a.createElement(i["Provider"],{store:r},n.a.createElement(It["a"],null,n.a.createElement(jt,null))),a)};var At=Tt;var Nt=a(52);Object(Nt["a"])("interop.mountBrowserIncomingCall",At)},function(e,t,a){},,,,,,function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(85);var s=a.n(i);var o=a(12);var l=a(26);var c=a(52);var u=a(444);var d=a(196);var p=a.n(d);var m=a(218);var h=a.n(m);var v=a(110);var f=a.n(v);var b=a(135);var g=a.n(b);var _=a(169);var y=a.n(_);var O=a(138);var k=a.n(O);var E=a(147);var C=a.n(E);var S=a(185);var w=a.n(S);var j=a(2);var I=a(0);var T=a(30);var A=a(39);var N=a(540);var P=a(27);var M=a(33);var D=a(89);var x=a(2756);var R=a(601);var F=a(2693);var L=a(6);var U=new L["b"]("enterprise_dashboard");function B(){var e=cdn_url+"/80588/img/enterprise/unavailable_channel.png";return n.a.createElement("img",{className:"p-org_level_user_groups__no_provider_image",src:e,srcSet:e+", "+e.replace(".png","@2x.png")+" 2x",alt:U.t("Manage the same groups from your identity provider, in Slack."),"data-qa":"no_connected_idp_group_image"})}B.displayName="NoProviderImage";function q(){return n.a.createElement("div",{className:"p-org_level_user_groups__no_provider_container"},n.a.createElement("div",{className:"p-org_level_user_groups__no-provider_header","data-qa":"idp_group_title"},U.t("IDP Groups")),n.a.createElement("div",{className:"p-org_level_user_groups__no_provider_content"},n.a.createElement(B,null),n.a.createElement("div",{"data-qa":"no_connected_idp_group_text"},n.a.createElement("div",{className:"p-org_level_user_groups__no_provider_content_header"},U.t("Connect groups from your identity provider to Slack")),n.a.createElement("div",{className:"p-org_level_user_groups__no_provider_content-subheader"},U.rt("Slack works with the groups you already manage in your identity provider, so you can easily provision members to the right workspaces. <a>Learn how to get started connecting your IDP to Slack.</a>",null,function(e){var t=e.key,a=e.text;return n.a.createElement("a",{key:t,href:"https://slack.com/help/articles/203772216-saml-single-sign-on"},a)})))))}q.displayName="OrgLevelNoProvider";var G=q;var H=a(387);var W=a(494);var V=a(295);var K=a(191);var z=a(24);var Q=new L["b"]("enterprise_dashboard");var Y=function(e){w()(t,e);function t(e){var a;f()(this,t);a=y()(this,k()(t).call(this,e));a.handleGroupNameClick=a.handleGroupNameClick.bind(C()(a));return a}g()(t,[{key:"handleGroupNameClick",value:function e(){var t=this.props.idpGroup.id;Object(K["c"])("/people/groups/"+t)}},{key:"render",value:function e(){var t=this.props.idpGroup;return n.a.createElement(z["c"],{onClick:this.handleGroupNameClick},n.a.createElement("div",{"data-group-id":t.id},n.a.createElement("b",{"data-qa":"idp_group_row_name"},t.name),n.a.createElement("div",{"data-qa":"idp_group_row_name_subtitle",className:"p-org_level_user_groups__table_member_num"},Q.t("{idpGroupMemberCount} members",{idpGroupMemberCount:t.user_count}))))}}]);return t}(n.a.PureComponent);Y.displayName="OrgLevelUserGroupMemberName";var J=Y;var X=a(57);var Z=a(23);var $=new L["b"]("enterprise_dashboard");var ee=function(e){w()(t,e);function t(e){var a;f()(this,t);a=y()(this,k()(t).call(this,e));a.renderMenu=a.renderMenu.bind(C()(a));return a}g()(t,[{key:"renderMenu",value:function e(t){var a=this.props,r=a.target,i=a.onConnectWorkspaceClick;var s=r.teams?r.teams.length:0;return n.a.createElement(X["f"],p()({},t,{width:"auto"}),n.a.createElement(X["b"],{key:r.id,label:$.t("Connect {userGroupTeamCount, plural, =1 {workspace} other {workspaces}}",{userGroupTeamCount:s,fallbackHash:"211cb31dbfcc8bc2cbba1954e1bf1ee8156bdf5e"}),onSelected:i}))}},{key:"render",value:function e(){var t=this.props.target;return n.a.createElement("div",null,n.a.createElement(X["e"],{renderMenu:this.renderMenu,position:"bottom-right",offsetX:20},n.a.createElement(z["c"],{"data-qa":"idp_group_row_open_menu",className:"p-org_level_user_groups__menu_button","aria-label":$.t("Actions for {idpGroupName}",{idpGroupName:Object(L["q"])(t.name)})},n.a.createElement(Z["b"],{type:"ellipsis"}))))}}]);return t}(r["PureComponent"]);ee.displayName="OrgLevelTableRowMenu";var te=ee;var ae=new L["b"]("enterprise_dashboard");var re={orgUserGroups:[]};var ne=function(e){w()(t,e);function t(){f()(this,t);return y()(this,k()(t).apply(this,arguments))}g()(t,[{key:"makeNoSearchResultsRowTemplate",value:function e(){var t=this.props.searchQuery;return{items:[{value:function e(){return n.a.createElement("div",null,ae.rt("No results matching <b>{searchQuery}</b>.",{searchQuery:t}))},className:"p-org_level_user_groups__search_row"}]}}},{key:"makeRow",value:function e(t,a,r){var n={id:"row_"+r,items:[]};if(!a||!a.items)return[];a.items.forEach(function(e,a){var i={value:e.value(t),id:"row_"+r+"_item"+a};e.className&&(i.className=e.className);n.items.push(i)});return n}},{key:"makeRowTemplate",value:function e(){var t=this;return{items:[{value:function e(t){if(Object(j["isEmpty"])(t))return"";return n.a.createElement(J,{idpGroup:t})},className:"p-org_level_user_groups__table_row_item--name"},{value:function e(t){if(Object(j["isEmpty"])(t))return"";var a=t.teams?t.teams.length:0;return n.a.createElement("div",{"data-qa":"idp_group_row_connected_ws","data-group-id":t.id},ae.t("{userGroupTeamCount, plural, =1 {# Workspace} other {# Workspaces}}",{fallbackHash:"211cb31dbfcc8bc2cbba1954e1bf1ee8156bdf5e",userGroupTeamCount:a}))},className:"p-org_level_user_groups__table_row_item--teams"},{value:function e(t){if(Object(j["isEmpty"])(t)||!t.date_update)return"";return n.a.createElement("div",{"data-qa":"idp_group_row_date_added","data-group-id":t.id},Object(V["a"])(t.date_update,"{date_num}"))},className:"p-org_level_user_groups__table_row_item--date"},{value:function e(a){return n.a.createElement(te,{"data-qa":"idp_group_row_open_menu",target:a,onConnectWorkspaceClick:function e(){return t.props.onConnectWorkspaceClick(a.id)}})},className:"p-org_level_user_groups__table_row_item--actions"}]}}},{key:"makeRows",value:function e(){var t=this;var a=this.props,r=a.orgUserGroups,n=a.isSearching,i=a.searchQuery;var s=0;if(!r.length&&!n&&!!i.length)return[this.makeRow({},this.makeNoSearchResultsRowTemplate(),0)];var o=r.map(function(e){s+=1;var a="group"+s;var r=0;return{id:"row_"+a,items:t.makeRowTemplate().items.map(function(t){r+=1;return{id:"row_"+a+"_col_"+r,value:t.value(e),className:t.className}})}});return o}},{key:"render",value:function e(){var t=this.props.isSearching;var a=this.makeRows();return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"p-org_level_user_groups__table","data-qa":"org_level_table_view"},n.a.createElement(W["b"],{autoHeight:true,headers:[{"data-qa":"idp_group_col_name_title",id:"header_0",value:ae.t("Name"),noHover:true,className:"p-org_level_user_groups__table_header--name"},{"data-qa":"idp_group_col_connected_to_title",id:"header_1",value:ae.t("Connected to..."),noHover:true,className:"p-org_level_user_groups__table_header--teams"},{"data-qa":"idp_group_col_date_added_title",id:"header_2",value:ae.t("Last modified"),noHover:true,className:"p-org_level_user_groups__table_header--date"},{id:"header_3",value:null,noHover:true,className:"p-org_level_user_groups__table_header--actions"}],isLoading:t,onRequestNextPage:this.props.onRequestNextPage,rows:a,useKeyboardNavigableTable:true,rowClassName:"p-org_level_user_groups__row",rowHeaderItemClassName:"p-org_level_user_groups__row_header"})))}}]);return t}(n.a.PureComponent);ne.displayName="OrgLevelTableView";ne.defaultProps=re;var ie=ne;var se=a(428);var oe=a(278);var le=a.n(oe);var ce=a(94);var ue=a(1156);var de="100";var pe=Object(ce["e"])("fetch user groups in org context",function(){var e=le()(regeneratorRuntime.mark(function e(t,a){var r,n,i,s,o,l,c=arguments;return regeneratorRuntime.wrap(function e(a){while(1)switch(a.prev=a.next){case 0:r=c.length>2&&void 0!==c[2]?c[2]:{},n=r.searchTerm,i=r.userGroupIds;s=me(n,i);a.next=4;return t(Object(ue["f"])({searchTerm:n,count:de,query:s,includeEnterprise:0}));case 4:o=a.sent;l=o.map(function(e){return e.id});t(Object(N["n"])({groupIds:l}));case 7:case"end":return a.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}());pe.meta={name:"fetchUserGroups",key:"componentsEnterpriseOrgLevelUserGroupsUtilitySearchUserGroupsFetchUserGroups",description:"fetch user groups in org context"};pe.propTypes={query:I["default"].string,userGroupIds:I["default"].array};function me(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];var a=t.map(function(e){return{type:"id",value:e}});return{type:"and",clauses:Object(j["compact"])([{type:"is",value:"group"},e&&{type:"fuzzy",value:e}].concat(h()(a)))}}var he=new L["b"]("enterprise_dashboard");var ve=function(e){w()(t,e);function t(e){var a;f()(this,t);a=y()(this,k()(t).call(this,e));a.searchGroups=a.searchGroups.bind(C()(a));a.handleSearchInputChange=a.handleSearchInputChange.bind(C()(a));a.throttledSearchGroups=Object(j["debounce"])(a.searchGroups,300,{leading:false});return a}g()(t,[{key:"handleSearchInputChange",value:function e(t){var a=t.target.value||"";this.throttledSearchGroups(a)}},{key:"searchGroups",value:function e(t){this.props.onSearchIdpGroups(t)}},{key:"render",value:function e(){var t=he.t("Search {ssoProviderName} groups by name",{ssoProviderName:this.props.ssoProviderName,fallbackHash:"c65a154366e93f3e1b780c7df863d27019deb374"});return n.a.createElement("div",{className:"p-org_level_user_groups__search_input_wrapper"},n.a.createElement(se["a"],{"data-qa":"idp_group_search",className:"p-org_level_user_groups__search_input",placeholder:t,icon:"search",autoFocus:false,value:this.props.searchQuery,onChange:this.handleSearchInputChange,onFocus:this.handleSearchInputOnFocus}))}}]);return t}(r["PureComponent"]);ve.displayName="IdpGroupSearch";var fe={searchGroups:pe};var be=Object(o["connect"])(null,fe)(ve);var ge=new L["b"]("enterprise_dashboard");var _e={orgUserGroups:[]};var ye=function(e){w()(t,e);function t(){f()(this,t);return y()(this,k()(t).apply(this,arguments))}g()(t,[{key:"render",value:function e(){var t=this.props,a=t.isSearching,r=t.searchQuery,i=t.orgUserGroups,s=t.ssoProviderName,o=t.onSearchIdpGroups,l=t.onRequestNextPage,c=t.onConnectWorkspaceClick;return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",null,n.a.createElement("div",{"data-qa":"idp_group_title",className:"padding_top_250 padding_right_175 padding_bottom_125 padding_left_300 "},n.a.createElement("h1",null,ge.t("{ssoProviderName} Groups",{ssoProviderName:s})),n.a.createElement("p",{"data-qa":"idp_group_description",className:"no_margin"},ge.t("Your organization\u2019s {ssoProviderName} groups are synced with Slack and will automatically appear in the list below. Connect a group to workspaces to get your teams set up quickly in Slack.",{ssoProviderName:s}))),n.a.createElement(be,{searchQuery:r,ssoProviderName:s,onSearchIdpGroups:o})),n.a.createElement(ie,{isSearching:a,searchQuery:r,orgUserGroups:i,onConnectWorkspaceClick:c,onRequestNextPage:l}),n.a.createElement(H["a"],null))}}]);return t}(n.a.PureComponent);ye.displayName="OrgLevelUserGroupsWrapper";ye.defaultProps=_e;var Oe=ye;var ke=a(4822);var Ee=function(e){w()(t,e);function t(e){var a;f()(this,t);a=y()(this,k()(t).call(this,e));a.state={isLoading:true,isSearching:false,searchTerm:"",orgUserGroupsSearch:[],nextCursorMark:"",tableItemsCount:0};Object(T["a"])(C()(a),["onConnectWorkspaceClick","onSearchIdpGroups","onRequestNextPage"]);return a}g()(t,[{key:"componentDidMount",value:function e(){var t=this;this.setState(function(){return{isLoading:true}});this.props.searchAndBulkUpsertOrgUserGroups().then(function(e){t.setState(function(){return{isLoading:false,tableItemsCount:e&&e.num_found,nextCursorMark:e&&e.next_cursor_mark}})});this.props.loadSsoProvider()}},{key:"onConnectWorkspaceClick",value:function e(t){this.props.openModal({element:n.a.createElement(x["a"],{userGroupId:t})})}},{key:"onRequestNextPage",value:function e(t){var a=this;if(this.state.tableItemsCount===t)return;this.setState(function(){return{isSearching:true}});var r=this.state,n=r.searchTerm,i=r.nextCursorMark;this.props.searchAndBulkUpsertOrgUserGroups({searchTerm:n,nextCursorMark:i}).then(function(e){a.setState(function(t){var a=t.orgUserGroupsSearch;return{isSearching:false,tableItemsCount:e.num_found,nextCursorMark:e.next_cursor_mark,orgUserGroupsSearch:n?[].concat(h()(a),h()(e.items)):[]}})})}},{key:"onSearchIdpGroups",value:function e(t){var a=this;this.setState(function(){return{isSearching:true,searchTerm:t}});this.props.searchAndBulkUpsertOrgUserGroups({searchTerm:t}).then(function(e){a.setState(function(){return{isSearching:false,nextCursorMark:e.next_cursor_mark,tableItemsCount:e&&e.num_found,orgUserGroupsSearch:h()(e.items)}})})}},{key:"render",value:function e(){var t=this.props,a=t.orgUserGroups,r=t.ssoProviderName;var i=this.state,s=i.isSearching,o=i.isLoading,l=i.searchTerm,c=i.orgUserGroupsSearch;if(o)return n.a.createElement(D["a"],{color:"blue",size:"jumbo",className:"p-org_level_user_groups__spinner"});if(Object(j["isEmpty"])(a)&&!l&&!s)return n.a.createElement(G,null);return n.a.createElement(Oe,p()({},this.props,{ssoProviderName:r,isLoading:o,isSearching:s,searchQuery:l,orgUserGroups:l?c:a,onConnectWorkspaceClick:this.onConnectWorkspaceClick,onSearchIdpGroups:this.onSearchIdpGroups,onRequestNextPage:this.onRequestNextPage}))}}]);return t}(n.a.PureComponent);Ee.displayName="OrgLevelUserGroups";function Ce(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];var a=t.map(function(t){return Object(R["e"])(e,{groupId:t})});return Object(j["sortBy"])(a,function(e){return e&&e.name.toLowerCase()})}var Se=function e(t){var a=Object(M["d"])(t);var r=Object(P["getTeamSsoProvider"])(a);var n=Object(R["f"])(t);return{ssoProviderName:Object(P["getSSOProviderLabel"])(r,"IDP"),orgUserGroups:Ce(t,n)}};var we=function e(t){return{searchAndBulkUpsertOrgUserGroups:function e(){return t(N["i"].apply(void 0,arguments))},loadSsoProvider:function e(){return t(Object(F["a"])())},openModal:function e(){return t(A["openModal"].apply(void 0,arguments))}}};var je=Object(o["connect"])(Se,we)(Ee);Object(c["a"])("interop.orgLevelUserGroups",{render:function e(t,a){if(!t)throw new Error("orgLevelUserGroups render must be called with a teamId parameter");var r=Object(l["f"])(t);s.a.render(n.a.createElement(o["Provider"],{store:r},n.a.createElement(u["a"],null,n.a.createElement(je,null))),a)},stop:function e(t){s.a.unmountComponentAtNode(t)}})},,function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(12);var s=a(156);var o=a(26);var l=a(110);var c=a.n(l);var u=a(135);var d=a.n(u);var p=a(169);var m=a.n(p);var h=a(138);var v=a.n(h);var f=a(147);var b=a.n(f);var g=a(185);var _=a.n(g);var y=a(0);var O=a(2);var k=a(30);var E=a(322);var C=a(32);var S=a(6);var w=a(38);var j=a(61);var I=a(34);var T=a(1663);var A=a(1329);var N=a(1033);var P=a(11);var M=a(90);var D=a(58);var x=a(18);var R=a(1675);var F=a(1323);var L=a(1058);var U=a(754);var B=a(784);var q=a(211);var G=a(438);var H=Object(x["b"])("Switches to the All Threads view",function(e){e(Object(q["a"])({id:G["a"].allThreads}))});H.meta={name:"openThreadsView",key:"actionsOpenThreadsViewOpenThreadsView",description:"Switches to the All Threads view"};var W=H;var V=a(87);var K=a(1061);var z=Object(x["b"])("Switches to the All Unreads view",function(e,t){var a="Punreads";var r=Object(V["a"])(t());e(r===a?Object(K["b"])():Object(q["a"])({id:a}))});z.meta={name:"openUnreadsView",key:"actionsOpenUnreadsViewOpenUnreadsView",description:"Switches to the All Unreads view"};var Q=z;var Y=a(28);var J=Object(Y["b"])("TS.ui.react_keyboard_shortcuts.executeShortcut",function(){return null});var X="browse_dms";var Z="browse_channels";var $="open_all_unreads";var ee="quick_switcher";var te="set_a_status";var ae="open_preferences";var re="open_all_threads";var ne=Object(x["b"])("Run a keyboard shortcut without the keyboard",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.id;if(r===X){e(Object(L["a"])());return}if(r===ae){e(Object(B["a"])());return}if(r===re){e(W());return}if(r===$){e(Q());return}if(r===Z){e(Object(U["a"])());return}if(Object(D["a"])()){r===te?e(Object(F["a"])()):r===ee?e(Object(R["a"])()):r===$&&e(Q());return}J(r)});ne.meta={name:"executeKeyboardShortcut",key:"componentsFlexpaneKeyboardShortcutsUtilityExecuteKeyboardShortcutExecuteKeyboardShortcut",description:"Run a keyboard shortcut without the keyboard"};ne.propTypes={id:y["default"].oneOf([$,te,X,Z,ee,ae,re]).isRequired};var ie=ne;var se=a(1662);var oe=a(1057);var le=a(218);var ce=a.n(le);var ue=a(88);var de=a.n(ue);var pe=a(286);var me=a(13);var he=a.n(me);var ve=a(1345);var fe=a(54);var be=a(1025);var ge=a(152);var _e=a(237);var ye=a(3702);var Oe=new S["b"]("keyboard_shortcuts");var ke={title:"",keys:[],hasInfoButton:false,infoButtonMessage:"",id:null,executeKeyboardShortcut:O["noop"],telemeter:{count:O["noop"]}};var Ee=function(e){_()(t,e);d()(t,null,[{key:"makeAriaLabel",value:function e(t){var a=t.title,r=t.keys;var n=(r||[]).map(function(e){var t=e.split("key_")[1];return t?Object(be["b"])(t):e}).join(" ");return Oe.t("{shortcutTitle}: {keyNames}",{shortcutTitle:a,keyNames:n})}}]);function t(){var e;c()(this,t);e=m()(this,v()(t).call(this));e.execShortcut=e.execShortcut.bind(b()(e));return e}d()(t,[{key:"execShortcut",value:function e(){this.props.executeKeyboardShortcut({id:this.props.id});this.props.telemeter.count("clicked_keyboard_shortcut")}},{key:"renderInfoButton",value:function e(){return n.a.createElement(fe["c"],{tip:this.props.infoButtonMessage,delay:fe["b"]},n.a.createElement(_e["a"],{className:"p-shortcuts_flexpane__tip",icon:"question-circle"}))}},{key:"renderKeys",value:function e(){var t=this.props,a=t.keys,r=t.title;return a.map(function(e){var t=e.split("key_")[1];return t?n.a.createElement(be["a"],{label:t,key:r+" "+e+" "+Object(O["uniqueId"])()}):e})}},{key:"renderTitle",value:function e(){var t=this.props.hasInfoButton?this.renderInfoButton():null;var a=this.props.title;if(null==this.props.id)return n.a.createElement(n.a.Fragment,null,a,t);return n.a.createElement(n.a.Fragment,null,n.a.createElement(ge["a"],{type:"button",onClick:this.execShortcut},a),t)}},{key:"render",value:function e(){return n.a.createElement("div",{className:"p-shortcuts_flexpane__shortcut"},n.a.createElement("div",{className:"p-shortcuts_flexpane__shortcut_title"},this.renderTitle()),n.a.createElement("div",{className:"p-shortcuts_flexpane__shortcut_keys"},this.renderKeys()))}}]);return t}(n.a.PureComponent);Ee.displayName="Shortcut";Ee.defaultProps=ke;var Ce=Ee;var Se=a(3706);function we(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function je(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?we(Object(a),true).forEach(function(t){de()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):we(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Ie=new S["b"]("shortcuts_flexpane");var Te={items:[],executeKeyboardShortcut:O["noop"],telemeter:{count:O["noop"]},onItemTabWithin:O["noop"],focusKey:null,setFocusKey:O["noop"],featureContextualMessageShortcuts:false};var Ae=function(e){_()(t,e);function t(e){var a;c()(this,t);a=m()(this,v()(t).call(this,e));Object(k["a"])(b()(a),["renderItem","isFocusableItem","focus","renderLabelForRow"]);a.list=n.a.createRef();return a}d()(t,[{key:"componentDidMount",value:function e(){var t=this.props,a=t.focusKey,r=t.items;if("keyboard_shortcuts"===a&&r.length){this.setFocusOnFirstItem();this.clearFocusKey()}}},{key:"componentDidUpdate",value:function e(t){var a=t.focusKey;var r=this.props,n=r.focusKey,i=r.items,s=r.featureContextualMessageShortcuts;if("keyboard_shortcuts"===n&&n!==a&&i.length){this.setFocusOnFirstItem();this.clearFocusKey()}if(n&&i.length){var o=n&&n.split("-");if(!o||!o.length||"keyboard_shortcuts"!==o[0])return;1===o.length&&this.setFocusOnFirstItem();s&&2===o.length&&this.setFocusOnHeader(o[1]);this.clearFocusKey()}}},{key:"getItemKeyForHeaderId",value:function e(t){var a=this.props.items;var r=a&&Object(O["findIndex"])(a,function(e){return e.id===t});return r&&-1!==r?r:null}},{key:"getItemKeys",value:function e(){return this.rows.map(function(e){return e.key})}},{key:"setFocusOnFirstItem",value:function e(){var t=this.getItemKeys()[1];var a=this.list.current;a&&a.focusOnKey(t)}},{key:"setFocusOnHeader",value:function e(t){if(!t)return;var a=this.getItemKeyForHeaderId(t);if(!a)return;var r=this.list&&this.list.current;if(!r)return;r.focusOnKey("header-"+a)}},{key:"clearFocusKey",value:function e(){this.props.setFocusKey(null)}},{key:"createRows",value:function e(){return this.props.items.reduce(function(e,t,a){var r=t.shortcuts.map(function(e,t){return je({type:"shortcut",key:"shortcut-"+a+"-"+t},e)});return[].concat(ce()(e),[{type:"header",key:"header-"+a,title:t.title,subtitle:t.subtitle}],ce()(r))},[])}},{key:"focus",value:function e(){var t=this.list.current;t&&t.focus()}},{key:"isFocusableItem",value:function e(t){var a=t.index;var r=this.rows[a];return r&&("shortcut"===r.type||"header"===r.type)}},{key:"renderItem",value:function e(t){var a=this.rows[t];if(!a||!a.type)return null;var r=this.props,i=r.executeKeyboardShortcut,s=r.telemeter;if("shortcut"===a.type)return n.a.createElement(Ce,{title:a.title,hasInfoButton:a.hasInfoButton,infoButtonMessage:a.infoButtonMessage,id:a.id,executeKeyboardShortcut:i,telemeter:s,keys:a.keys});var o=he()("p-shortcuts_flexpane__shortcut_heading",{"p-shortcuts_flexpane__shortcut_heading_first":0===t});if("header"===a.type)return n.a.createElement(n.a.Fragment,null,n.a.createElement("h3",{className:o},a.title),a.subtitle&&n.a.createElement("h4",{className:"p-shortcuts_flexpane__shortcut_sub_heading"},a.subtitle));return null}},{key:"renderLabelForRow",value:function e(t){var a=t.index;var r=this.rows[a];if(!r||!r.type)return;if("shortcut"!==r.type)return;var n=Ce.makeAriaLabel({title:r.title,keys:r.keys});return{"aria-label":n}}},{key:"render",value:function e(){var t=this;this.rows=this.createRows();var a=this.getItemKeys();return n.a.createElement(pe["a"],null,function(e){var r=e.width,i=e.height;return n.a.createElement(ve["a"],{className:"p-shortcuts_flexpane__list",ref:t.list,width:r,height:i,keys:a,rowRenderer:t.renderItem,getPropsForItem:t.renderLabelForRow,animateOnScroll:false,"aria-label":Ie.t("Keyboard Shortcuts"),isFocusableItem:t.isFocusableItem,onItemTabWithin:t.props.onItemTabWithin})})}}]);return t}(r["PureComponent"]);Ae.displayName="KeyboardShortcutsList";Ae.defaultProps=Te;var Ne=Ae;var Pe=a(3708);var Me={className:void 0,sections:void 0,keyboardLocale:null,enableUnreadView:false,executeKeyboardShortcut:O["noop"],telemeter:{count:O["noop"]},focusKey:null,setFocusKey:O["noop"],featureContextualMessageShortcuts:false,featureMessageNavigationShortcuts:false,featureAppViewsReminders:false,isIAPhase1Enabled:false,upToBrowseKbShortcutPref:false};var De=new S["b"]("shortcuts_flexpane");var xe=Object(C["getOperatingSystem"])();var Re=function(e){_()(t,e);function t(e){var a;c()(this,t);a=m()(this,v()(t).call(this,e));Object(k["a"])(b()(a),["renderBody","renderSubtitle","focus","onItemTabWithin"]);a.list=n.a.createRef();a.flexpane=n.a.createRef();return a}d()(t,[{key:"onItemTabWithin",value:function e(){var t=this.flexpane.current;t&&t.setInitialActiveSection()}},{key:"focus",value:function e(){var t=this.list.current;t&&t.focus()}},{key:"renderBody",value:function e(){var t=this.props,a=t.keyboardLocale,r=t.enableUnreadView,i=t.executeKeyboardShortcut,s=t.focusKey,o=t.setFocusKey,l=t.telemeter,c=t.featureContextualMessageShortcuts,u=t.featureMessageNavigationShortcuts,d=t.featureAppViewsReminders;var p=this.props.sections||Object(se["c"])({keyboardLocale:a,enableUnreadView:r,featureContextualMessageShortcuts:c,featureMessageNavigationShortcuts:u,featureAppViewsReminders:d,isIAPhase1Enabled:this.props.isIAPhase1Enabled,upToBrowseKbShortcutPref:this.props.upToBrowseKbShortcutPref});return n.a.createElement(Ne,{ref:this.list,items:p,keyboardLocale:a,executeKeyboardShortcut:i,telemeter:l,onItemTabWithin:this.onItemTabWithin,focusKey:s,setFocusKey:o,featureContextualMessageShortcuts:c})}},{key:"renderSubtitle",value:function e(){var t="mac"===xe?De.t("Cmd"):De.t("Ctrl");var a=Object(E["d"])("/",{kb:this.props.keyboardLocale});return De.rt('Press <span className="c-keyboard_key c-keyboard_key--slim">{headerCmdButton}</span><span className="c-keyboard_key c-keyboard_key--slim">{headerSlashButton}</span> to toggle this panel.',{headerCmdButton:t,headerSlashButton:a})}},{key:"render",value:function e(){var t=De.t("Keyboard Shortcuts");return n.a.createElement(oe["b"],{"aria-label":t,className:this.props.className,ref:this.flexpane,focus:this.focus,renderSubtitle:this.renderSubtitle,renderBody:this.renderBody,title:t,kbNavOrder:Object(I["a"])()?void 0:4.6,viewId:"shortcuts"})}}]);return t}(n.a.PureComponent);Re.displayName="KeyboardShortcutsFlexpane";Re.defaultProps=Me;function Fe(e){return{enableUnreadView:Object(w["k"])(e,"enable_unread_view"),telemeter:Object(j["c"])({state:e}),focusKey:Object(A["a"])(e),featureContextualMessageShortcuts:Object(P["isFeatureEnabled"])(e,"feature_contextual_message_shortcuts"),featureMessageNavigationShortcuts:Object(P["isFeatureEnabled"])(e,"feature_message_navigation_shortcuts"),featureAppViewsReminders:Object(P["isFeatureEnabled"])(e,"feature_app_views_reminders"),isIAPhase1Enabled:Object(M["e"])(e),upToBrowseKbShortcutPref:Object(w["k"])(e,"up_to_browse_kb_shortcut")}}var Le=function e(t){return{executeKeyboardShortcut:function e(){return t(ie.apply(void 0,arguments))},setFocusKey:function e(a){return t(Object(N["a"])(a))}}};var Ue=Object(i["connect"])(Fe,Le)(Re);var Be=Object(T["a"])(Ue);var qe=a(197);var Ge=function e(t,a,r){if(!t)throw new Error("mountKeyboardShortcuts must be called with a teamId parameter");var l=Object(o["f"])(t);var c=r;Object(s["a"])(n.a.createElement(i["Provider"],{store:l},n.a.createElement(qe["a"],null,n.a.createElement(Be,c))),a)};var He=Ge;var We=a(52);Object(We["a"])("interop.mountKeyboardShortcuts",He)},,,,,,function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(85);var s=a.n(i);var o=a(12);var l=a(26);var c=a(52);var u=a(444);var d=a(88);var p=a.n(d);var m=a(110);var h=a.n(m);var v=a(135);var f=a.n(v);var b=a(169);var g=a.n(b);var _=a(138);var y=a.n(_);var O=a(147);var k=a.n(O);var E=a(185);var C=a.n(E);var S=a(0);var w=a(6);var j=a(11);var I=a(89);var T=a(1483);var A=a(759);var N=a(4239);var P=a(30);var M=a(387);var D=a(2);var x=a(108);var R=a(151);var F=a(269);var L=a(50);var U=a(352);var B=a(44);var q=a(145);var G=a(106);var H=a(131);var W=a(141);var V=a(530);var K=a(24);var z=a(93);var Q=a(219);var Y=a(913);var J;function X(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function Z(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?X(Object(a),true).forEach(function(t){p()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):X(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var $=new w["b"]("enterprise_dashboard");var ee=-1;var te=12;var ae=-1;var re=0;var ne={twoFactorAuthRequired:false,sessionDuration:te,sessionDurationType:ae};var ie=Symbol("MANDATORY_TWO_FACTOR_AUTHENTICATION_SETTING");var se=Symbol("LOGIN_SESSION_DURATION_SETTING");var oe=Symbol("FORCE_PASSWORD_RESET_SETTING");var le=(J={},p()(J,ie,"twoFactorAuthRequired"),p()(J,se,"sessionDurationType"),J);var ce="radio";var ue=function(e){C()(t,e);function t(e){var a;h()(this,t);a=g()(this,y()(t).call(this,e));a.state={settingsItems:[{id:ie,saving:false,open:false,custom2FAMessage:""},{id:se,saving:false,open:false},{id:oe,saving:false,open:false}]};Object(P["a"])(k()(a),["onDisable","onEdit","onCancel","settingClicked"]);return a}f()(t,[{key:"onCancel",value:function e(t){var a=this;return function(){a.setSettingsItemKeys(t,[{k:"open",v:false},{k:"editing",v:false}])}}},{key:"onCheckboxChange",value:function e(t){var a=this;return function(e){a.setSettingsItemKeys(t,[{k:"tempValue",v:e.target.checked}])}}},{key:"onDisable",value:function e(t){var a=this;return function(){a.setSettingsItemKeys(t,[{k:"open",v:true},{k:"editing",v:false}])}}},{key:"onEdit",value:function e(t){var a=this;return function(){var e=a.state.settingsItems[t];var r=a.getItemValue(e);e.id===se&&r===ae&&(r=0);var n=[{k:"open",v:true},{k:"editing",v:true},{k:"tempValue",v:r}];e.id===se&&n.push({k:"sessionDurationValue",v:a.props.sessionDuration===ee||a.props.sessionDuration===re?te:a.props.sessionDuration});a.setSettingsItemKeys(t,n)}}},{key:"onRadioChange",value:function e(t){var a=this;return function(e){e.target.checked&&a.setSettingsItemKeys(t,[{k:"tempValue",v:parseInt(e.target.value,10)}])}}},{key:"getItemValue",value:function e(t){if(t.id===oe)return false;return this.props[le[t.id]]}},{key:"setSettingsItemKeys",value:function e(t,a){this.setState(function(e){var r=e.settingsItems.slice();var n=Object(D["reduce"])(a,function(e,t){e[t.k]=t.v;return e},{});r.splice(t,1,Z({},r[t],{},n));return{settingsItems:r}})}},{key:"settingClicked",value:function e(t){var a=this;return function(){return a.onEdit(t)()}}},{key:"isInvalid",value:function e(t){var a;switch(t.id){case se:a=parseFloat(t.sessionDurationValue);return!!t.tempValue&&(!Object(D["isInteger"])(a)||a<te);default:return false}}},{key:"persistToApi",value:function e(t){var a=this;var r=this.state.settingsItems[t];var i={};var s;var o="";var l=this.props,c=l.enable2FA,u=l.disable2FA,d=l.setSessionDuration,p=l.forcePasswordResetFunction;switch(r.id){case ie:if(r.editing){i.message=r.custom2FAMessage;r.tempValue=true;s=c;var m=$.t("Mandatory two-factor authentication enabled");var h=$.t("Mandatory two-factor authentication updated");o=this.getItemValue(r)?h:m}else{r.tempValue=false;s=u;o=$.t("Mandatory two-factor authentication disabled")}break;case se:if(r.editing){i.sessionDurationType=r.tempValue;i.sessionDurationLength=1!==r.tempValue?r.tempValue:parseInt(r.sessionDurationValue,10);var v=$.t("Session duration enabled");var f=$.t("Session duration updated");o=this.getItemValue(r)!==ae?f:v}else{r.tempValue=ee;i.sessionDurationLength=ae;i.sessionDurationType=ee;o=$.t("Session duration disabled")}s=d;break;case oe:i.forceLogout=r.tempValue;s=p;o=$.t("Password reset forced");break;default:return null}this.setSettingsItemKeys(t,[{k:"saving",v:true}]);return s(i).then(function(){a.setSettingsItemKeys(t,[{k:"value",v:r.tempValue}]);o&&a.props.enqueueToast({element:n.a.createElement(H["b"],{icon:"check-circle-o-large"},n.a.createElement("strong",null,o))});a.setSettingsItemKeys(t,[{k:"saving",v:false},{k:"open",v:false},{k:"editing",v:false}])}).catch(function(){a.setSettingsItemKeys(t,[{k:"saving",v:false},{k:"open",v:false},{k:"editing",v:false}]);var e=$.t("Something went wrong.");e&&a.props.enqueueToast({element:n.a.createElement(H["b"],null,n.a.createElement("strong",null,e))})})}},{key:"saveSetting",value:function e(t){var a=this;return function(){return a.persistToApi(t)}}},{key:"renderAlert",value:function e(t,a){if(a[t.id].alertText)return n.a.createElement(z["a"],{type:"inline",level:"warning",align:"left"},n.a.createElement("span",null,a[t.id].alertText));return null}},{key:"renderControl",value:function e(t,a,r){var i=this;var s=$.t("Add a message...");var o=$.t("Your custom message goes here.");var l=$.t("Slackbot");var c=$.t("Customize Slackbot Message");var u=r[t.id].dataQA||"";switch(t.id){case oe:return n.a.createElement("p",null,n.a.createElement(L["a"],{text:r[t.id].controlText,type:"inline",cursor:"pointer"},n.a.createElement(x["a"],{name:"checkbox-"+a,checked:t.tempValue,onChange:this.onCheckboxChange(a),"data-qa":"enterprise-security-settings-force_password_reset-signout-checkbox"})));case se:return n.a.createElement("div",{className:"p-security-preferences-view__div__session-duration"},n.a.createElement(F["a"],{field:ce+"-"+a},n.a.createElement(L["a"],{text:$.t("Sign users out when they close the application"),type:"inline",cursor:"pointer"},n.a.createElement(R["a"],{name:ce+"-"+a,value:"0",checked:0===t.tempValue,onChange:this.onRadioChange(a),"data-qa":u+"-on-signout-radio-input"})),n.a.createElement(L["a"],{text:$.t("Sign users out after a specific amount of hours (minimum 12)"),type:"inline",cursor:"pointer"},n.a.createElement(R["a"],{name:ce+"-"+a,value:"1",checked:1===t.tempValue,onChange:this.onRadioChange(a),"data-qa":u+"-duration-radio-input"}))),1===t.tempValue&&n.a.createElement(W["a"],{className:"p-security-preferences-view__session-duration-input",min:""+te,pattern:"\\d*",id:"login-session-duration",name:"login-session-duration",type:"number",useInlineAlert:true,value:t.sessionDurationValue,title:this.isInvalid(t)?$.t("You must enter a whole number that is at least 12"):"",errorText:$.t("You must enter a whole number that is at least 12"),onChange:function e(t){return i.setSettingsItemKeys(a,[{k:"sessionDurationValue",v:t}])}}));case ie:return n.a.createElement("div",{className:"p-security_preferences_view__2fa__slackbot_container"},n.a.createElement("p",{className:"bold"}," ",c," "),n.a.createElement("div",{className:"p-security_preferences_view__2fa__slackbot_message"},n.a.createElement("div",{className:"p-security_preferences_view__2fa__slackbot_avatar"},n.a.createElement(Q["a"],{size:36,imageUrl:"/img/slackbot/slackbot_72.png"})),n.a.createElement("div",{className:"p-security_preferences_view__2fa__slackbot_message_column"},n.a.createElement("p",{className:"bold"},l),n.a.createElement("p",null,n.a.createElement(q["a"],{text:this.props.enable2FaMessage})),n.a.createElement("p",{className:"p-security_preferences_view__2fa__message"},t.custom2FAMessage||n.a.createElement("em",null,o)))),n.a.createElement(V["a"],{className:"p-security_preferences_view__2fa__slackbot_message_input",ariaDescribedby:"text-label-1",placeholder:s,size:"medium",id:"custom-slackbot-message",name:"custom-slackbot-message",onChange:function e(t){i.setSettingsItemKeys(a,[{k:"custom2FAMessage",v:t}])},value:t.custom2FAMessage}));default:return null}}},{key:"renderParagraphs",value:function e(t){return t.map(function(e){return n.a.createElement("p",{key:e},e)})}},{key:"renderSignInSettings",value:function e(){var t=this,a;var r=(a={},p()(a,ie,{label:$.t("Mandatory Two-Factor Authentication"),disabledDescription:$.t("You can choose to make two-factor authentication mandatory for all guests and owners signing in with an email address and password."),enabledDescription:$.t("Guests and owners signing in with an email address and password must use two-factor authentication to sign in."),enabledState:$.t("Enabled"),disabledState:$.t("Disabled"),editModalText:[$.t("Thanks for keeping your org's accounts safe and secure with mandatory two-factor authentication (2FA). Next, all members who don't use SSO and don't yet have 2FA set up will receive a Slackbot notification and an email about how to get set up."),$.t("Members who don't set up 2FA within 24 hours will be logged out and prompted to set up 2FA before logging in again.")],disableModalText:[$.t("This will allow guests and owners to sign in with an email address and password, and not require the use of two-factor authentication.")],modalButtonType:"primary",modalButtonConfirmationText:$.t("Enable"),messge:"",dataQA:"enterprise-security-settings-mandatory_2fa"}),p()(a,se,{label:$.t("Session Duration"),disabledDescription:$.t("You can choose to sign users out after a specific amount of time or upon closing the app."),enabledDescription:function e(a){var r=$.rt("<strong>Sign users out when they close the application</strong>{break}Members will be signed out when they close Slack.",{break:n.a.createElement("br",null)});var i=$.rt("<strong>Sign users out after {hours} hours</strong>{break}Members will be signed out after the specified time.",{hours:t.props.sessionDuration,break:n.a.createElement("br",null)});return 0===t.getItemValue(a)?r:i},enabledState:$.t("Enabled"),disabledState:$.t("Disabled"),editModalText:[$.t("Limiting session durations requires members to re-authenticate periodically. This can help increase security and prevent unauthorized access to your workspace.")],disableModalText:[$.t("This will allow members to remain signed in to your organzation indefinitely without re-authenticating.")],alertText:$.t("Note: Session duration only applies to the Slack desktop app and in a web browser. With session duration turned on, members won't be signed out of their Slack mobile apps."),modalButtonType:"primary",modalButtonConfirmationText:$.t("Enable"),dataQA:"enterprise-security-settings-login_session_duration"}),p()(a,oe,{label:$.t("Force Password Reset"),disabledDescription:$.t("Force members who sign in with an email address and password to create a new password."),enabledState:"",disabledState:"",editModalText:[$.t("This will force members who sign in with an email address and password to create a new password. They\u2019ll automatically receive an email with instructions.")],disableModalText:[$.t("This will force members who sign in with an email address and password to create a new password. They\u2019ll automatically receive an email with instructions.")],editOnly:true,editButtonText:$.t("Reset"),alertText:$.t("Note: This will only reset passwords for members who don\u2019t sign in with SSO."),modalButtonType:"danger",modalButtonConfirmationText:$.t("Reset Passwords"),controlText:$.t("Also sign these members out of Slack"),dataQA:"enterprise-security-settings-force_password_reset"}),a);var i=function e(a){var r=t.getItemValue(a);switch(a.id){case ie:return r;case se:return r!==ee;case oe:return false;default:return false}};var s=$.t("Save");var o=function e(t){if(t.editing)return i(t)?s:r[t.id].modalButtonConfirmationText;return $.t("Disable")};var l=function e(t){var a=r[t.id];var n=i(t)?a.enabledDescription:a.disabledDescription;if("function"===typeof n)return n(t);return n};return n.a.createElement("div",null,n.a.createElement("p",{className:"p-security_preferences_view__subtitle"},$.t("Sign-in Settings")),n.a.createElement("p",{className:"p-security_preferences_view__subtext"},$.t("Choose how you want to secure users\u2019 sign in experience.")),this.state.settingsItems.map(function(e,a){var s=r[e.id].dataQA||"";return n.a.createElement("div",{key:e.id.toString(),"data-qa":s},n.a.createElement(Y["a"],{label:r[e.id].label,state:i(e)?r[e.id].enabledState:r[e.id].disabledState,description:l(e),onClick:t.settingClicked(a),type:"button",control:{enabled:i(e),type:"button",onEdit:t.onEdit(a),editOnly:r[e.id].editOnly,editButtonText:r[e.id].editButtonText,onEnable:t.onEdit(a),onDisable:t.onDisable(a),dataQAPrefix:s}}),n.a.createElement(B["a"],{closeModal:t.onCancel(a),isOpen:e.open,centered:true},n.a.createElement(B["h"],null,n.a.createElement(B["j"],{title:r[e.id].label})),n.a.createElement(B["d"],null,n.a.createElement(B["e"],null,e.editing?t.renderParagraphs(r[e.id].editModalText):t.renderParagraphs(r[e.id].disableModalText),e.editing?t.renderControl(e,a,r):null,t.renderAlert(e,r))),n.a.createElement(B["f"],{"data-qa":s+"-modal-footer"},n.a.createElement(B["g"],null,n.a.createElement(B["c"],{type:"outline","data-qa":s+"-modal-close-button"},$.t("Cancel")),n.a.createElement(K["b"],{type:e.editing?r[e.id].modalButtonType:"danger",onClick:t.saveSetting(a),loading:e.saving,disabled:t.isInvalid(e),"data-qa":s+"-modal-PCTA-button"},o(e))))))}))}},{key:"render",value:function e(){return n.a.createElement("div",null,n.a.createElement("div",null,this.renderSignInSettings()))}}]);return t}(r["PureComponent"]);ue.displayName="SigninSettings";ue.defaultProps=ne;var de=function e(t){return{twoFactorAuthRequired:!!Object(U["a"])(t,"two_factor_auth_required"),sessionDuration:Object(U["a"])(t,"session_duration"),sessionDurationType:Object(U["a"])(t,"session_duration_type")}};var pe=function e(t){return{enqueueToast:function e(){return t(G["enqueueToast"].apply(void 0,arguments))},enable2FA:function e(a){return t(Object(A["b"])(a))},disable2FA:function e(){return t(Object(A["a"])())},setSessionDuration:function e(a){return t(Object(A["k"])(a))},forcePasswordResetFunction:function e(a){return t(Object(T["c"])(Z({},a,{reason:"SecurityPreferencesView_forcePasswordReset"})))}}};var me=Object(o["connect"])(de,pe)(ue);var he=a(451);var ve=a(25);var fe=a(33);var be=a(43);var ge=a(17);var _e,ye;function Oe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function ke(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Oe(Object(a),true).forEach(function(t){p()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Oe(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Ee=new w["b"]("enterprise_dashboard");var Ce={mobileDeviceManagementLevel:0,disableUnmanagedDownloads:false,mobilePasscodeTimeout:-1,requiredBrowserId:"",user:{},featureEnterpriseMobileDeviceCheck:false,orgName:"",featureDefaultBrowserControlV2:false,supportedBrowsers:[],getBrowserDisplayNameById:D["noop"],getBrowserIconById:D["noop"]};var Se=Symbol("MOBILE_DEVICE_APPROVAL");var we=Symbol("BLOCK_FILE_DOWNLOADS");var je=Symbol("MOBILE_PASSCODE");var Ie=Symbol("REQUIRED_BROWSER_ID");var Te=Symbol("MOBILE_DEVICE_CHECK");var Ae=(_e={},p()(_e,we,"enterprise_mdm_disable_file_download"),p()(_e,je,"mobile_passcode_timeout_in_seconds"),p()(_e,Ie,"ent_required_browser"),p()(_e,Te,"enterprise_mobile_device_check"),_e);var Ne=(ye={},p()(ye,Se,"mobileDeviceManagementLevel"),p()(ye,we,"disableUnmanagedDownloads"),p()(ye,je,"mobilePasscodeTimeout"),p()(ye,Ie,"requiredBrowserId"),p()(ye,Te,"mobileDeviceCheck"),ye);var Pe=function(e){C()(t,e);function t(e){var a;h()(this,t);a=g()(this,y()(t).call(this,e));var r=[{id:Se,saving:false,open:false},{id:we,saving:false,open:false},{id:je,saving:false,open:false},{id:Ie,saving:false,open:false}];e.featureEnterpriseMobileDeviceCheck&&r.push({id:Te,saving:false,open:false});a.state={settingsItems:r};Object(P["a"])(k()(a),["onEnable","onEdit","onCancel","saveSetting","settingClicked","onButtonPreviewChange","getValueToSave"]);return a}f()(t,[{key:"onCancel",value:function e(t){var a=this;return function(){a.resetSettingItem(t)}}},{key:"onDisable",value:function e(t){var a=this;return function(){var e=a.state.settingsItems[t];var r=a.props.featureEnterpriseMobileDeviceCheck;var n;switch(e.id){case we:n=false;break;case je:n=-1;break;case Ie:n="";break;case Te:r&&(n=false);break;default:break}a.setSettingsItemKeys(t,[{k:"open",v:true},{k:"editing",v:false},{k:"disabling",v:true},{k:"tempValue",v:n}])}}},{key:"onEdit",value:function e(t){var a=this;return function(){var e=a.state.settingsItems[t];var r=a.getItemValue(e);a.setSettingsItemKeys(t,[{k:"open",v:true},{k:"editing",v:true},{k:"tempValue",v:r}])}}},{key:"onEnable",value:function e(t){var a=this;return function(){var e=a.state.settingsItems[t];var r=a.getItemValue(e);var n=a.props.featureEnterpriseMobileDeviceCheck;var i;switch(e.id){case we:i=true;break;case je:i=-1===r?900:r;break;case Ie:i=r;break;case Te:n&&(i=true);break;default:break}a.setSettingsItemKeys(t,[{k:"open",v:true},{k:"tempValue",v:i}])}}},{key:"getItemValue",value:function e(t){return this.props[Ne[t.id]]}},{key:"getValueToSave",value:function e(t){switch(t.id){case Ie:return{browser_id:t.tempValue};default:return t.tempValue}}},{key:"setSettingsItemKeys",value:function e(t,a){this.setState(function(e){var r=e.settingsItems.slice();var n=Object(D["reduce"])(a,function(e,t){e[t.k]=t.v;return e},{});r.splice(t,1,ke({},r[t],{},n));return{settingsItems:r}})}},{key:"settingClicked",value:function e(t){var a=this;return function(){a.isOn(a.state.settingsItems[t])?a.onDisable(t)():a.onEnable(t)()}}},{key:"isOn",value:function e(t){var a=this.getItemValue(t);switch(t.id){case Se:return!!a;case we:return a;case je:return-1!==a;case Ie:return!!a;case Te:return a;default:return false}}},{key:"persistToApi",value:function e(t,a){var r=this;var i=this.state.settingsItems[a];var s=this.props,o=s.featureEnterpriseMobileDeviceCheck,l=s.featureDefaultBrowserControlV2,c=s.getBrowserDisplayNameById;var u;var d;var p;var m;switch(i.id){case we:d=Ee.t("File downloads and copying blocked");p=Ee.t("File downloads and copying allowed");break;case je:d=Ee.t("Mobile passcode enabled");p=Ee.t("Mobile passcode disabled");m=Ee.t("Mobile passcode updated");break;case Ie:if(l){d=Ee.t("{browserName} is now mandatory for unmanaged devices",{browserName:c(i.tempValue)});m=d}else d=Ee.t("Blackberry Access is now mandatory for unmanaged devices");p=Ee.t("Mandatory mobile browser disabled");break;case Te:if(o){d=Ee.t("Block Jailbroken/Rooted Devices is now enabled");p=Ee.t("Block Jailbroken/Rooted Devices is now disabled")}break;default:break}u=i.editing?m:i.disabling?p:d;this.setSettingsItemKeys(a,[{k:"saving",v:true}]);return this.props.saveLockedPref(t).then(function(){u&&r.props.enqueueToast({element:n.a.createElement(H["b"],{icon:"check-circle-o-large"},n.a.createElement("strong",null,u))});r.resetSettingItem(a)}).catch(function(){var e=Ee.t("Something went wrong.");e&&r.props.enqueueToast({element:n.a.createElement(H["b"],null,n.a.createElement("strong",null,e))});r.resetSettingItem(a)})}},{key:"resetSettingItem",value:function e(t){this.setSettingsItemKeys(t,[{k:"open",v:false},{k:"editing",v:false},{k:"disabling",v:false},{k:"saving",v:false}])}},{key:"saveSetting",value:function e(t){var a=this;return function(){var e=a.state.settingsItems[t];var r=e.id;var n={pref:Ae[r],value:a.getValueToSave(e)};a.persistToApi(n,t)}}},{key:"renderAlert",value:function e(t,a){if(a[t.id].alertText)return n.a.createElement(z["a"],{type:"inline",level:"warning",align:"left"},n.a.createElement("span",null,a[t.id].alertText));return null}},{key:"renderControl",value:function e(t,a){var r=this;var i=Ee.t("Immediately");var s=Ee.t("After 5 minutes");var o=Ee.t("After 15 minutes");var l=Ee.t("After 30 minutes");var c=Ee.t("After 1 hour");var u=[{label:i,value:"0"},{label:s,value:"300"},{label:o,value:"900"},{label:l,value:"1800"},{label:c,value:"3600"}];var d=Ee.t("Please select an option");var p=Ee.t("Require mobile passcode:");switch(t.id){case je:return n.a.createElement("div",null,n.a.createElement("p",{className:"p-security_preferences_view__mobile_passcode__select_label"},p),n.a.createElement(he["d"],{className:"p-security_preferences_view__mobile_passcode__select",options:u,ariaLabel:d,selectId:"mobile-passcode-timeframe",width:"100%",selectedOption:Object(D["find"])(u,{value:""+t.tempValue}),onOptionSelected:function e(t){return r.setSettingsItemKeys(a,[{k:"tempValue",v:+t.value}])}}));case Ie:var m=this.props.featureDefaultBrowserControlV2;var h=Ee.t("Select a browser\u2026");var v=[];v=m?this.props.supportedBrowsers.map(function(e){return{label:r.props.getBrowserDisplayNameById(e),value:e,icon:r.props.getBrowserIconById(e)}}):[{label:Ee.t("Blackberry Access"),value:"blackberry_access"}];var f=function e(t){return n.a.createElement("div",{className:"p-security_preferences_view__required_browser__select__item"},m&&n.a.createElement("img",{className:"p-security_preferences_view__required_browser__select__item__icon",src:t.icon,alt:m?Ee.t("{browserName} icon",{browserName:t.label}):""}),!m&&n.a.createElement("div",{className:"p-security_preferences_view__required_browser__select__item__icon p-security_preferences_view__required_browser__select__item__icon--"+t.value}),n.a.createElement("div",null,t.label))};return n.a.createElement(he["d"],{className:"p-security_preferences_view__required_browser__select",options:v,ariaLabel:h,selectId:"required-browser-name",width:"100%",selectedOption:Object(D["find"])(v,{value:t.tempValue}),onOptionSelected:function e(t){return r.setSettingsItemKeys(a,[{k:"tempValue",v:t.value}])},renderOption:f,renderSelectedOption:f});default:return null}}},{key:"renderDeviceSettings",value:function e(){var t=this,a;var r=Object(ge["isEnterpriseOwner"])(this.props.user);var i=r?"":Ee.t("Only Org Owners can change this setting");var s=this.props,o=s.featureEnterpriseMobileDeviceCheck,l=s.featureDefaultBrowserControlV2,c=s.orgName;var u=(a={},p()(a,Se,{label:Ee.t("Mobile Device Approval"),enabledDescription:function e(a){var r=t.getItemValue(a);if(1===r)return Ee.rt("<strong> Required for all users</strong><br></br> All users must use an approved mobile device.");if(2===r)return Ee.rt("<strong>Required for all users, except guests</strong><br></br> All users must use an approved mobile device, except guest accounts.");return Ee.rt("<strong>Optional for all users</strong><br></br> Members can opt-in to mobile device management, but they can still access Slack from an unmanaged device.")},disabledDescription:Ee.t("Any mobile device can be used to access Slack."),onState:Ee.t("Enabled"),offState:Ee.t("Disabled"),modalButtonType:"primary",modalButtonConfirmationText:Ee.t("Enable"),descriptionAlerts:[Ee.t("Enterprise mobility management settings at the organization level require a two-step confirmation to ensure Slack is set up with your EMM tool correctly."),Ee.rt("<Link>Contact Slack</Link> to change your mobile security settings.",null,function(e){var t=e.key,a=e.text;return n.a.createElement(be["a"],{key:t,href:"mailto:feedback@slack.com"},a)})],noButton:true,readOnly:true,managedByEMM:false}),p()(a,we,{label:Ee.t("Block File Downloads and Copying"),enabledDescription:Ee.t("Users on unmanaged mobile devices will not be able to download files or copy data out of Slack."),disabledDescription:Ee.t("You can choose to prevent members from downloading files or copying data out of Slack."),onState:Ee.t("Enabled"),offState:Ee.t("Disabled"),alertText:Ee.t("Note: This will only apply to downloads and copying on mobile devices."),modalButtonType:"primary",modalButtonConfirmationText:Ee.t("Enable"),toggleOnly:true,editModalText:[Ee.t("When enabled, downloading of files and copying of content will be blocked on any mobile device that isn\u2019t enrolled in mobile device management.")],disableModalText:[Ee.t("This will allow members of your organization to download files and copy data out of the Slack mobile app on unmanaged devices.")],readOnly:!r,readonlyTooltip:i,managedByEMM:true,dataQA:"enterprise-security-settings-block-file-downloads"}),p()(a,je,{label:Ee.t("Mobile Passcode"),enabledDescription:function e(a){var r=t.getItemValue(a);if(0===r)return Ee.rt("<strong>Required immediately for unmanaged devices</strong><br></br>Members using unmanaged mobile devices will be immediately prompted for additional authentication when opening Slack.");return Ee.rt("<strong>Required after {minutes} minutes for unmanaged devices</strong><br></br>Members using unmanaged mobile devices will be prompted for additional authentication when opening Slack after the specified time.",{minutes:Math.round(r/60)})},disabledDescription:Ee.t("You can choose to have members set a passcode to access Slack from unmanaged mobile devices."),onState:Ee.t("Enabled"),offState:Ee.t("Disabled"),alertText:Ee.t("Note: This setting will only apply to members who access Slack from an unmanaged mobile device. Settings for other members are controlled by your EMM service."),modalButtonConfirmationText:Ee.t("Save"),controlText:Ee.t("Also sign these members out of Slack"),editModalText:[Ee.t("When enabled, all members who access Slack from a unmanaged mobile device will be required to enter a passcode after a set amount of time away from the app."),Ee.t("Depending on their device, members may also have the option to use biometric authentication such as a fingerprint or facial scan.")],disableModalText:[Ee.t("This will allow members on unmanaged mobile devices to access Slack without the use of a passcode.")],readOnly:!r,readonlyTooltip:i,managedByEMM:true,dataQA:"enterprise-security-settings-mobile-passcode"}),p()(a,Ie,{label:Ee.t("Mandatory Mobile Browser"),enabledDescription:function e(a){if(l)return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"bold"},t.props.getBrowserDisplayNameById(t.getItemValue(a))),n.a.createElement("div",null,Ee.t("Members on unmanaged mobile devices must use this browser to sign in with SSO and open external links.")));return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"bold"},Ee.t("Blackberry Access")),n.a.createElement("div",null,Ee.t("Members on unmanaged mobile devices must use this browser to sign in with SSO and open external links.")))},disabledDescription:Ee.t("You can force the use of a specific browser for external links and SSO authentication on unmanaged mobile devices."),onState:Ee.t("Enabled"),offState:Ee.t("Disabled"),alertText:Ee.t("Note: This setting will only apply to members who access Slack from an unmanaged mobile device. Settings for other members are controlled by your EMM service."),modalButtonConfirmationText:Ee.t("Enable"),editModalText:[Ee.t("If enabled, all SSO sign-in attempts and outbound links will go through the specified browser for members using unmanaged devices.")],disableModalText:[Ee.t("Once disabled, members on unmanaged mobile devices will be able to use whatever browser they choose to sign in with SSO and open external links.")],toggleOnly:!l,readOnly:!r,readonlyTooltip:i,managedByEMM:true,dataQA:"enterprise-security-settings-required_browser_id"}),a);o&&(u[Te]={label:Ee.t("Jailbreak or Root Detection"),enabledDescription:Ee.t("Members on jailbroken or rooted unmanaged devices will not be able to access Slack."),disabledDescription:Ee.t("You can prevent users on  jailbroken or rooted unmanaged devices from accessing Slack."),onState:Ee.t("Enabled"),offState:Ee.t("Disabled"),alertText:Ee.t("Note: This setting will only apply to members who access Slack from an unmanaged mobile device. Settings for other members are controlled by your EMM service."),modalButtonConfirmationText:Ee.t("Enable"),editModalText:[Ee.t("This will prevent jailbroken or rooted devices from accessing Slack. It will sign out any members currently using those devices.")],disableModalText:[Ee.rt("Once disabled, members on jailbroken or rooted unmanaged devices will be able to sign into <strong>{orgName}</strong>.",{orgName:c})],toggleOnly:true,readOnly:!r,readonlyTooltip:i,managedByEMM:true,dataQA:"enterprise-security-settings-mobile_device_check"});var d=Ee.t("Save");var m=function e(a){if(!a.disabling)return t.isOn(a)?d:u[a.id].modalButtonConfirmationText;return Ee.t("Disable")};var h=1===this.props.mobileDeviceManagementLevel;var v=function e(t){return u[t.id].managedByEMM&&h};var f=function e(a){if(v(a))return"";return t.isOn(a)?u[a.id].onState:u[a.id].offState};var b=Ee.t("This setting is controlled by your EMM service.");var g=function e(a){if(v(a))return b;var r=u[a.id];var n=t.isOn(a)?r.enabledDescription:r.disabledDescription;if("function"===typeof n)return n(a);return n};var _=function e(t){switch(t.id){case Ie:return!t.disabling&&!t.tempValue;default:return false}};return n.a.createElement("div",null,n.a.createElement("p",{className:"p-security_preferences_view__subtitle"},Ee.t("Device Settings")),n.a.createElement("p",{className:"p-security_preferences_view__subtext"},Ee.t("Configure settings for access to Slack and files from managed devices")),this.state.settingsItems.map(function(e,a){var r=u[e.id].dataQA||"";return n.a.createElement("div",{key:e.id.toString(),"data-qa":r},n.a.createElement(Y["a"],{label:u[e.id].label,state:f(e),readonly:u[e.id].readOnly||v(e),readonlyTooltip:u[e.id].readonlyTooltip,noButton:u[e.id].noButton||v(e),description:g(e),onClick:t.settingClicked(a),type:"button",descriptionAlerts:u[e.id].descriptionAlerts,control:{type:"button",enabled:t.isOn(e),onEnable:t.onEnable(a),onDisable:t.onDisable(a),onEdit:t.onEdit(a),toggleOnly:u[e.id].toggleOnly,dataQAPrefix:r}}),n.a.createElement(B["a"],{closeModal:t.onCancel(a),isOpen:e.open,centered:true},n.a.createElement(B["h"],null,n.a.createElement(B["j"],{title:u[e.id].label})),n.a.createElement(B["d"],null,n.a.createElement(B["e"],null,e.disabling?t.renderParagraphs(u[e.id].disableModalText):t.renderParagraphs(u[e.id].editModalText),!e.disabling&&t.renderControl(e,a),t.renderAlert(e,u))),n.a.createElement(B["f"],{"data-qa":r+"-modal-footer"},n.a.createElement(B["g"],null,n.a.createElement(B["c"],{type:"outline","data-qa":r+"-modal-close-button"},Ee.t("Cancel")),n.a.createElement(K["b"],{type:e.disabling?"danger":u[e.id].modalButtonType,onClick:t.saveSetting(a),loading:e.saving,disabled:_(e),"data-qa":r+"-modal-PCTA-button"},m(e))))))}))}},{key:"renderParagraphs",value:function e(t){if(Object(D["isEmpty"])(t))return null;return t.map(function(e){return n.a.createElement("p",{key:e},e)})}},{key:"render",value:function e(){return n.a.createElement("div",null,n.a.createElement("div",null,this.renderDeviceSettings()))}}]);return t}(r["PureComponent"]);Pe.displayName="DeviceSettings";Pe.defaultProps=Ce;var Me=function e(t){var a=Object(j["isFeatureEnabled"])(t,"feature_enterprise_mobile_device_check");var r=Object(j["isFeatureEnabled"])(t,"feature_default_browser_control_v2");var n=Object(U["a"])(t,"ent_required_browser");var i={user:Object(ve["b"])(t),mobilePasscodeTimeout:Object(U["a"])(t,"mobile_passcode_timeout_in_seconds"),disableUnmanagedDownloads:Object(U["a"])(t,"enterprise_mdm_disable_file_download"),mobileDeviceManagementLevel:Object(U["g"])(t,"enterprise_mdm_level"),featureEnterpriseMobileDeviceCheck:a,orgName:Object(fe["g"])(t),requiredBrowserId:n&&n.browser_id,featureDefaultBrowserControlV2:r};a&&(i.mobileDeviceCheck=Object(U["a"])(t,"enterprise_mobile_device_check"));r&&(i=ke({},i,{supportedBrowsers:Object(N["b"])(t),getBrowserDisplayNameById:function e(a){return Object(N["c"])(t,a)},getBrowserIconById:function e(a){return Object(N["d"])(t,a)}}));return i};var De=function e(t){return{enqueueToast:function e(){return t(G["enqueueToast"].apply(void 0,arguments))},saveLockedPref:function e(){return t(A["f"].apply(void 0,arguments))}}};var xe=Object(o["connect"])(Me,De)(Pe);var Re=a(278);var Fe=a.n(Re);var Le=new w["b"]("enterprise_dashboard");var Ue={invitedUserPreset:{},updatePrefs:D["noop"]};var Be=function(e){C()(t,e);f()(t,null,[{key:"getDerivedStateFromProps",value:function e(t){return{isTlsEnabled:t.invitedUserPreset.enforce_tls||false}}}]);function t(e){var a;h()(this,t);a=g()(this,y()(t).call(this,e));a.state={modalOpened:false,isTlsEnabled:false,saving:false};Object(P["a"])(k()(a),["toggleSetting","toggleShowModal"]);return a}f()(t,[{key:"toggleSetting",value:function(){var e=Fe()(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function e(a){while(1)switch(a.prev=a.next){case 0:t=this.props.updatePrefs;this.setState(function(){return{saving:true}});a.prev=2;a.next=5;return t({enforce_tls:!this.state.isTlsEnabled});case 5:a.prev=5;this.setState(function(){return{saving:false}},this.toggleShowModal);return a.finish(5);case 8:case"end":return a.stop()}},e,this,[[2,,5,8]])}));function t(){return e.apply(this,arguments)}return t}()},{key:"toggleShowModal",value:function e(){this.setState(function(e){return{modalOpened:!e.modalOpened}})}},{key:"render",value:function e(){var t=this;var a=this.state,r=a.modalOpened,i=a.saving;var s=this.state.isTlsEnabled;return n.a.createElement("div",null,n.a.createElement(Y["a"],{label:Le.t("Enforce TLS for Invited Members"),state:"",description:n.a.createElement("div",null,n.a.createElement("div",{className:"bold"},s?Le.t("Enabled"):Le.t("Disabled")),n.a.createElement("div",null,Le.t("You can choose to enforce TLS (Transport Layer Security) for email notifications to invited members."))),onClick:function e(){return s&&t.toggleShowModal()},type:"button",control:{enabled:s,type:"button",onDisable:this.toggleShowModal,onEnable:this.toggleShowModal,toggleOnly:true,onEdit:this.toggleShowModal}}),n.a.createElement(B["a"],{closeModal:this.toggleShowModal,isOpen:r,centered:true},n.a.createElement(B["h"],null,n.a.createElement(B["j"],{title:Le.t("Enforce TLS for Invited Members")})),n.a.createElement(B["d"],null,n.a.createElement(B["e"],null,n.a.createElement("p",null,Le.t("Once {isEnabled}, email notifications will be sent to domains regardless of Transport Layer Security enforcement.",{isEnabled:s?Le.t("disabled"):Le.t("enabled")})),!s&&n.a.createElement(z["a"],{type:"inline",level:"warning",align:"left"},n.a.createElement("span",null,Le.rt("Emails sent to domains that do not enforce TLS won\u2019t be delivered."))))),n.a.createElement(B["f"],null,n.a.createElement(B["g"],null,n.a.createElement(B["c"],{type:"outline"},Le.t("Cancel")),n.a.createElement(K["b"],{type:s?"danger":"primary",onClick:this.toggleSetting,loading:i,disabled:i},!s&&Le.t("Enable"),s&&Le.t("Disable"))))))}}]);return t}(n.a.PureComponent);Be.displayName="BaseSecurityEmailTls";Be.defaultProps=Ue;var qe=Be;var Ge=new w["b"]("enterprise_dashboard");var He={setEnterpriseBridgeEmailDomainsRestricted:D["noop"],enqueueToastFunc:D["noop"]};var We=function(e){C()(t,e);f()(t,null,[{key:"getDerivedStateFromProps",value:function e(t,a){if(null===a.domains)return{domains:t.domainList.join(", ")};return null}}]);function t(e){var a;h()(this,t);a=g()(this,y()(t).call(this,e));a.state={modalOpened:false,domains:null,saving:false,disableAlertOpened:false};Object(P["a"])(k()(a),["toggleModal","toggleDisableAlertModal","updateFormTextValue","saveUpdatedDomains","confirmDeleteDomains"]);return a}f()(t,[{key:"getDomainsList",value:function e(){var t=this.state.domains;return t.split(",").map(function(e){return e.trim()}).filter(function(e){return!Object(D["isEmpty"])(e)})}},{key:"confirmDeleteDomains",value:function e(){var t=this;this.setState(function(){return{domains:""}},Fe()(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function e(a){while(1)switch(a.prev=a.next){case 0:a.next=2;return t.saveUpdatedDomains();case 2:t.toggleDisableAlertModal();case 3:case"end":return a.stop()}},e)})))}},{key:"saveUpdatedDomains",value:function(){var e=Fe()(regeneratorRuntime.mark(function e(){var t,a,r,i;return regeneratorRuntime.wrap(function e(s){while(1)switch(s.prev=s.next){case 0:t=this.props,a=t.setEnterpriseBridgeEmailDomainsRestricted,r=t.enqueueToastFunc;i=this.getDomainsList();s.prev=2;this.setState(function(){return{saving:true}});s.next=6;return a({domainList:i});case 6:this.setState(function(){return{saving:false,modalOpened:false}});s.next=13;break;case 9:s.prev=9;s.t0=s["catch"](2);this.setState(function(){return{saving:false}});r({element:n.a.createElement(H["b"],null,Ge.t("Something went wrong."))});case 13:case"end":return s.stop()}},e,this,[[2,9]])}));function t(){return e.apply(this,arguments)}return t}()},{key:"toggleDisableAlertModal",value:function e(){this.setState(function(e){return{disableAlertOpened:!e.disableAlertOpened}})}},{key:"toggleModal",value:function e(){this.setState(function(e){return{modalOpened:!e.modalOpened}})}},{key:"updateFormTextValue",value:function e(t){this.setState(function(){return{domains:t}})}},{key:"render",value:function e(){var t=this;var a=this.state,r=a.modalOpened,i=a.domains,s=a.saving,o=a.disableAlertOpened;var l=Ge.t("Hide Message Content for Invited Members");var c=Ge.t("You can hide message content in emails to invited members who have not yet joined Slack.");var u=Ge.t("Edit");var d=this.getDomainsList();var p=!Object(D["isEmpty"])(d);var m="enterprise-security-settings-hide_message_content_for_invited_members";return n.a.createElement("div",null,n.a.createElement(Y["a"],{label:l,state:"",description:n.a.createElement("div",null,n.a.createElement("div",{className:"bold"},p?Ge.t("Enabled"):Ge.t("Disabled")),p&&n.a.createElement("div",{className:"bold"},Ge.t("Message content is hidden for {count} domains.",{count:d.length})),n.a.createElement("div",null,c)),onClick:function e(){return p&&t.toggleModal()},type:"button",control:{enabled:p,type:"button",onDisable:this.toggleDisableAlertModal,onEnable:this.toggleModal,onEdit:this.toggleModal,editOnly:false,editButtonText:u,dataQAPrefix:m}}),n.a.createElement(B["a"],{closeModal:this.toggleModal,isOpen:r,centered:true},n.a.createElement(B["h"],null,n.a.createElement(B["j"],{title:l})),n.a.createElement(B["d"],null,n.a.createElement(B["e"],null,n.a.createElement("div",null,n.a.createElement("p",null,Ge.t("Invited members that haven\u2019t finished signing up for Slack get emails about channel mentions and direct messages they receive. The content of those messages will be hidden in emails sent to the domains you list below.")),n.a.createElement(V["a"],{id:"forwarding_messages_to_invited_members",name:"forwarding_messages_to_invited_members",onChange:this.updateFormTextValue,placeholder:"acme.com, widgets.com",value:i,"data-qa":m+"-textarea"}),n.a.createElement("div",{className:"p-security_preferences_view__subtext p-security_preferences_view__org_email_nudgelist_config__note"},Ge.t("Separate each domain with a comma."))),n.a.createElement(z["a"],{className:"p-security_preferences_view__org_email_nudgelist_config__alert",type:"inline",level:"warning",align:"left"},n.a.createElement("span",null,Ge.rt("To learn more about invited members in Slack, please read this help article: <a>Invited members in Slack</a>",null,function(e){var t=e.text;return n.a.createElement(be["a"],{href:"https://slack.com/help/articles/360024686174"},t)}))))),n.a.createElement(B["f"],{"data-qa":m+"-modal-footer"},n.a.createElement(B["g"],null,n.a.createElement(B["c"],{type:"outline","data-qa":m+"-modal-close-button"},Ge.t("Cancel")),n.a.createElement(K["b"],{type:"primary",onClick:this.saveUpdatedDomains,loading:s,disabled:s,"data-qa":m+"-modal-PCTA-button"},Ge.t("Save"))))),n.a.createElement(B["a"],{closeModal:this.toggleDisableAlertModal,isOpen:o,centered:true},n.a.createElement(B["h"],null,n.a.createElement(B["j"],{title:l})),n.a.createElement(B["d"],null,n.a.createElement(B["e"],null,n.a.createElement("p",null,Ge.t("Message content will be shown in emails to invited members from all domains, including any outside your workplace.")))),n.a.createElement(B["f"],{"data-qa":m+"-disable-modal-footer"},n.a.createElement(B["g"],null,n.a.createElement(B["c"],{type:"outline"},Ge.t("Cancel")),n.a.createElement(K["b"],{type:"danger",onClick:this.confirmDeleteDomains,loading:s,disabled:s,"data-qa":m+"-disable-modal-PCTA-button"},Ge.t("Disable"))))))}}]);return t}(n.a.Component);We.displayName="SecurityEmailNudgeListConfig";We.defaultProps=He;var Ve=function e(t){return{enqueueToastFunc:function e(a){return t(Object(G["enqueueToast"])(a))}}};var Ke=Object(o["connect"])(null,Ve)(We);function ze(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function Qe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ze(Object(a),true).forEach(function(t){p()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ze(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Ye=new w["b"]("enterprise_dashboard");var Je={setEnterpriseBridgeEmailDomainsRestricted:D["noop"],invitedUserPreset:{},savePrefs:D["noop"]};var Xe=function(e){C()(t,e);function t(e){var a;h()(this,t);a=g()(this,y()(t).call(this,e));Object(P["a"])(k()(a),["updateInvitedUserPrefs"]);return a}f()(t,[{key:"updateInvitedUserPrefs",value:function e(t){var a=this.props,r=a.savePrefs,n=a.invitedUserPreset;return r({pref:"invited_user_preset",value:Qe({},n,{},t)})}},{key:"render",value:function e(){var t=this.props,a=t.domainList,r=t.invitedUserPreset,i=t.setEnterpriseBridgeEmailDomainsRestricted;return n.a.createElement("div",null,n.a.createElement("p",{className:"p-security_preferences_view__subtitle"},Ye.t("Email Notification Settings")),n.a.createElement("p",{className:"p-security_preferences_view__subtext"},Ye.t("Manage what content is sent over email")),n.a.createElement(Ke,{domainList:a,setEnterpriseBridgeEmailDomainsRestricted:i}),n.a.createElement(qe,{updatePrefs:this.updateInvitedUserPrefs,invitedUserPreset:r}))}}]);return t}(n.a.PureComponent);Xe.displayName="EmailSettings";Xe.defaultProps=Je;var Ze=function e(t){return{invitedUserPreset:Object(U["a"])(t,"invited_user_preset")||{}}};var $e=function e(t){return{savePrefs:function e(a){return t(Object(A["f"])(a))}}};var et=Object(o["connect"])(Ze,$e)(Xe);var tt=a(3163);function at(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function rt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?at(Object(a),true).forEach(function(t){p()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):at(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var nt=new w["b"]("enterprise_dashboard");var it={featureDefaultBrowserControlV2:false};var st=function(e){C()(t,e);function t(e){var a;h()(this,t);a=g()(this,y()(t).call(this,e));a.state={loading:true,domainList:[]};Object(P["a"])(k()(a),["setEnterpriseBridgeEmailDomainsRestricted"]);return a}f()(t,[{key:"componentDidMount",value:function e(){var t=this;var a=this.props.getEnterpriseBridgeEmailDomainsRestrictedFunc();var r=this.props.getEnterprisePrefs();var n=this.props.featureDefaultBrowserControlV2?this.props.getMandatoryMobileBrowsers():Promise.resolve();Promise.all([a,r,n]).then(function(e){var a=e[0]||{};var r=a&&Object(D["filter"])(a.domains,function(e){return!Object(D["isEmpty"])(e)})||[];t.setState(function(){return{domainList:r,loading:false}})});document.body.classList.add("p-security_preferences_view__body-position-static")}},{key:"componentWillUnmount",value:function e(){document.body.classList.remove("p-security_preferences_view__body-position-static")}},{key:"setEnterpriseBridgeEmailDomainsRestricted",value:function e(t){var a=this;var r=t.domainList;var n=this.props.setEnterpriseBridgeEmailDomainsRestrictedFunc;return n({domains:r}).then(function(){a.setState(function(){return{domainList:r}})})}},{key:"render",value:function e(){return n.a.createElement("div",{className:"p-security_preferences_view"},n.a.createElement("h1",{className:"p-security_preferences_view__title"},nt.t("Security Settings")),this.state.loading?n.a.createElement(I["a"],{color:"blue",size:"jumbo"}):n.a.createElement("div",null,n.a.createElement(me,{enable2FaMessage:this.props.enable2FaMessage}),n.a.createElement(xe,null),n.a.createElement(et,{domainList:this.state.domainList,setEnterpriseBridgeEmailDomainsRestricted:this.setEnterpriseBridgeEmailDomainsRestricted})),n.a.createElement(M["a"],{style:{position:"fixed",bottom:0,right:0}}))}}]);return t}(r["PureComponent"]);st.displayName="SecurityPreferencesView";st.defaultProps=it;var ot=function e(t){return{featureDefaultBrowserControlV2:Object(j["isFeatureEnabled"])(t,"feature_default_browser_control_v2")}};var lt=function e(t){return{getEnterprisePrefs:function e(){return t(Object(A["c"])({reason:"SecurityPreferencesView_getEnterpriseSecurityPrefs",logReduxDiff:true}))},getEnterpriseBridgeEmailDomainsRestrictedFunc:function e(){return t(Object(T["d"])({reason:"SecurityPreferencesView_getEnterpriseBridgeEmailDomainsRestricted"}))},setEnterpriseBridgeEmailDomainsRestrictedFunc:function e(a){return t(Object(T["f"])(rt({},a,{reason:"SecurityPreferencesView_setEnterpriseBridgeEmailDomainsRestricted"})))},getMandatoryMobileBrowsers:function e(){return t(Object(N["e"])({reason:"SecurityPreferencesView_getMandatoryMobileBrowsers"}))}}};var ct=Object(o["connect"])(ot,lt)(st);var ut=ct;Object(c["a"])("interop.securityPreferences",{render:function e(t,a,r){if(!t)throw new Error("securityPreferences render must be called with a teamId parameter");var i=Object(l["f"])(t);s.a.render(n.a.createElement(o["Provider"],{store:i},n.a.createElement(u["a"],null,n.a.createElement(ut,r))),a)},stop:function e(t){s.a.unmountComponentAtNode(t)}})},,function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(85);var s=a.n(i);var o=a(12);var l=a(26);var c=a(52);var u=a(444);var d=a(110);var p=a.n(d);var m=a(135);var h=a.n(m);var v=a(169);var f=a.n(v);var b=a(138);var g=a.n(b);var _=a(147);var y=a.n(_);var O=a(185);var k=a.n(O);var E=a(0);var C=a(2);var S=a(6);var w=a(191);var j=a(428);var I=a(24);var T=a(54);var A=a(23);var N=a(13);var P=a.n(N);var M={headerAction:null};var D=function(e){k()(t,e);function t(){p()(this,t);return f()(this,g()(t).apply(this,arguments))}h()(t,[{key:"render",value:function e(){return n.a.createElement("div",{className:"margin_left_75"},this.props.headerAction)}}]);return t}(r["PureComponent"]);D.displayName="OrgDashboardHeaderItem";D.defaultProps=M;var x=D;var R={headerActions:[],headerClassName:""};var F=function(e){k()(t,e);function t(){p()(this,t);return f()(this,g()(t).apply(this,arguments))}h()(t,[{key:"renderActionItems",value:function e(){var t=this.props.headerActions;var a=Object(C["map"])(t,function(e,t){return n.a.createElement(x,{key:t,headerAction:e})});return a}},{key:"render",value:function e(){var t=this.props.headerClassName;var a=P()("margin_left_75","display_flex","justify_content_between",""+t);return n.a.createElement("div",{className:a},n.a.createElement("h1",null,this.props.title),n.a.createElement("div",{className:"display_flex align_items_center"},this.renderActionItems()))}}]);return t}(r["PureComponent"]);F.displayName="OrgDashboardHeader";F.defaultProps=R;var L=F;var U=L;var B=a(3270);var q=new S["b"]("enterprise_dashboard");var G={pageHeader:""};var H=function(e){k()(t,e);function t(){p()(this,t);return f()(this,g()(t).apply(this,arguments))}h()(t,[{key:"render",value:function e(){var t=cdn_url+"/80588/img/enterprise/empty_apps_state.png";var a=q.t("No apps have been installed on this workspace.");return n.a.createElement("div",{className:"padding_left_250 padding_right_250 padding_top_200 full_height full_width position_relative"},n.a.createElement(U,{title:this.props.pageHeader,headerClassName:"margin_bottom_150"}),n.a.createElement("div",{className:"display_flex flex_direction_column align_items_center position_absolute p-team_apps_empty_content"},n.a.createElement("img",{src:t,alt:"",className:"auto_width margin_bottom_100"}),n.a.createElement("h3",{className:"black margin_bottom_75"},a)))}}]);return t}(r["PureComponent"]);H.displayName="TeamAppsEmptyState";H.defaultProps=G;var W=H;var V=a(98);var K=a(910);var z=new S["b"]("enterprise_dashboard");var Q={teamApps:[],headerItemOnClick:C["noop"],pageSize:50,sortBy:"name",sortDir:null,searchQuery:"",teamAppsApiCursor:null,teamAppsApiTotal:null,teamAppsLoading:false,rowHeaderItemClassName:"p-app_management_table_view_header_item",rowClassName:"p-app_management_table_view_row"};var Y="asc";var J="desc";var X="caret_down";var Z="caret_up";var $={};$[Y]=X;$[J]=Z;var ee=function(e){k()(t,e);function t(e){var a;p()(this,t);a=f()(this,g()(t).call(this,e));var r=a.props,i=r.sortBy,s=r.sortDir;a.state={rowListItems:[],sortBy:i,sortDir:s,offset:0};a.tableViewControllerRef=null;a.headerItemOnClick=a.headerItemOnClick.bind(y()(a));a.onRequestNextPage=a.onRequestNextPage.bind(y()(a));a.appSources={internal:z.t("Internal"),"app directory":z.t("App Directory"),unknown:z.t("Unknown")};a.sourceTooltipStrings={"app directory":z.t("This app has been installed from the Slack App Directory."),internal:z.t("This app was created by someone within your organization."),unknown:z.t("This app was installed from an unknown external source.")};a.rowTemplate={items:[{value:function e(t){var r=t&&t.icons&&t.icons.image_72;return n.a.createElement(V["a"],{className:"p-app_management_table_view_app_name",onClick:function e(){return a.onAppNameClick(t.id)}},r&&n.a.createElement("img",{src:r,style:{width:"36px",height:"36px",verticalAlign:"middle",marginRight:"1rem"},alt:t.name}),t.name)}},{value:function e(t){var a=t.installed_by&&t.installed_by.count;return z.t("{installCount, plural, =1 {# member} other {# members}}",{installCount:a})}},{value:function e(t){var a=t.installed_by&&t.installed_by.first_installation&&t.installed_by.first_installation.date;var r=new Date(1e3*a).toLocaleDateString();return""+r}},{value:function e(t){var r=a.sourceTooltipStrings[t.source];var i=a.appSources[t.source]||a.appSources.unknown;return n.a.createElement("div",null,n.a.createElement(T["c"],{tip:r,position:"top"},n.a.createElement("span",null,i)))}}]};a.emptyRowTemplate={items:[{value:function e(t){var a=t.searchQuery;var r=z.rt("No apps were found matching <b>{query}</b>",{query:a});return n.a.createElement("div",{className:"align_center"},r)}}]};a.headerData=[{id:"name",value:z.t("Name"),sortable:true},{id:"installed_by",value:z.t("Installed By"),sortable:true},{id:"installed_on",value:z.t("Installed On"),sortable:true},{id:"source",value:z.t("Source"),sortable:true}];return a}h()(t,[{key:"UNSAFE_componentWillMount",value:function e(){var t=this.props,a=t.teamApps,r=t.sortBy;var n=this.state.offset;a.length?this.updateRowListItemsData(n):Object(w["b"])(Object(w["a"])().teams.setTeamAppsLoading(true));Object(w["b"])(Object(w["a"])().teams.setTeamAppsSortBy(r))}},{key:"componentDidUpdate",value:function e(t){this.maybeUpdateListRowItems(t);this.maybeUpdateSearchQuery(t);this.maybeFetchNextPage(t)}},{key:"onAppNameClick",value:function e(t){return Object(w["b"])(Object(w["a"])().router.navigateTo("/organization/apps/profile/"+t+"/"+this.props.teamId))}},{key:"onRequestNextPage",value:function e(t){var a=this.props,r=a.teamApps,n=a.teamAppsApiTotal;if(n&&r.length>=n)return;var i={offset:t};this.setState(function(){return i},function(){Object(w["b"])(Object(w["a"])().teams.setTeamAppsLoading(true))})}},{key:"determineSortState",value:function e(t,a){var r=this.state,n=r.sortBy,i=r.sortDir;var s=a.defaultSortType||Y;var o=$[s];if(!n||n!==t)return o;var l;l=i?i===Y?X:Z:$[s];return l}},{key:"fetchNewPage",value:function e(){var t=this.state,a=t.sortBy,r=t.sortDir;var n=this.props,i=n.pageSize,s=n.searchQuery,o=n.teamAppsApiCursor,l=n.teamId;var c={limit:i};a&&(c.sort=a);r&&(c.sort_dir=r);null!==s&&void 0!==s&&Object(C["trim"])(s).length&&(c.query=s);o&&(c.cursor=o);c.team=l;Object(w["b"])(Object(w["a"])().teams.getAppsByWorkspace(l,c))}},{key:"headerItemOnClick",value:function e(t){var a=this;var r=this.state,n=r.sortBy,i=r.sortDir;var e=this.props.headerItemOnClick;var s=n;var o=i;if(t.id===n){o=i&&i!==Y?Y:J;Object(w["b"])(Object(w["a"])().teams.setTeamAppsSortDir(o))}else{s=t.id;o=t.defaultSortType?t.defaultSortType===Y?J:Y:J;Object(w["b"])(Object(w["a"])().teams.setTeamAppsSortDir(o));Object(w["b"])(Object(w["a"])().teams.setTeamAppsSortBy(s))}var l={sortBy:s,sortDir:o};this.setState(function(){return l},function(){a.resetTeamAppsState();e&&e(t)})}},{key:"makeHeader",value:function e(t){var a={id:t.id,value:t.value};if(t.sortable){a.iconType=this.determineSortState(t.id,t);a.onClick=this.headerItemOnClick;t.defaultSortType&&(a.defaultSortType=t.defaultSortType)}return a}},{key:"makeHeaders",value:function e(t){var a=this;var r=[];t.forEach(function(e){r.push(a.makeHeader(e))});return r}},{key:"maybeFetchNextPage",value:function e(t){var a=this.props.teamAppsLoading;a&&!t.teamAppsLoading&&this.fetchNewPage()}},{key:"maybeUpdateListRowItems",value:function e(t){var a=this.state.offset;var r=this.props,n=r.searchQuery,i=r.teamApps,s=r.teamAppsLoading;t.teamApps===i&&t.searchQuery===n&&t.teamAppsLoading===s||this.updateRowListItemsData(a)}},{key:"maybeUpdateSearchQuery",value:function e(t){var a=this.props.searchQuery;if(t.searchQuery!==a){Object(w["b"])(Object(w["a"])().teams.setTeamAppsSearchQuery(a));this.resetTeamAppsState()}}},{key:"resetAPICursorMark",value:function e(){Object(w["b"])(Object(w["a"])().teams.setTeamAppsApiCursor(null))}},{key:"resetTeamAppsState",value:function e(){Object(w["b"])(Object(w["a"])().teams.setTeamAppsApiTotal(null));Object(w["b"])(Object(w["a"])().teams.resetTeamAppsApiCursor());Object(w["b"])(Object(w["a"])().teams.resetTeamApps());Object(w["b"])(Object(w["a"])().teams.setTeamAppsLoading(true))}},{key:"updateRowListItemsData",value:function e(t){var a=this;var r=this.props,n=r.teamApps,i=r.teamAppsLoading;var s=[];var o=t||0;var l=0;var c={rowListItems:s};function u(){l+=1;return"row_"+o+"_item"+l}function d(e,t){var a={id:"row_"+o,items:[]};if(!t||!t.items)return[];t.items.forEach(function(t){var r={value:t.value(e),id:u()};t.className&&(r.className=t.className);a.items.push(r)});o+=1;return a}if(n&&n.length)n.forEach(function(e){s.push(d(e,a.rowTemplate))});else if(!i){var p=this.props.searchQuery;if(null===p||void 0===p||!p.length){this.setState(c);return}var m=[{searchQuery:p}];m.forEach(function(e){s.push(d(e,a.emptyRowTemplate))})}this.setState(c)}},{key:"render",value:function e(){var t=this;var a=this.state,r=a.sortBy,i=a.sortDir,s=a.rowListItems,o=a.offset;var l=this.props,c=l.rowHeaderItemClassName,u=l.rowClassName,d=l.searchQuery,p=l.teamAppsLoading;var m=this.makeHeaders(this.headerData);return n.a.createElement("div",null,n.a.createElement(K["a"],{autoHeight:true,rows:s,headers:m,rowHeaderItemClassName:c,rowClassName:u,headerItemOnClick:this.headerItemOnClick,onRequestNextPage:this.onRequestNextPage,sortBy:r,sortDir:i,searchQuery:d,isLoading:p,newQuery:!o,ref:function e(a){t.tableViewControllerRef=a}}))}}]);return t}(r["PureComponent"]);ee.displayName="TeamAppsList";ee.defaultProps=Q;var te=ee;var ae=new S["b"]("enterprise_dashboard");var re={teamApps:[],teamAppsApiCursor:null,teamAppsApiTotal:null,teamAppsCount:0,teamAppsLoading:false,teamAppsSearchQuery:"",teamAppsTeamUrl:null,teamAppsSortBy:null,teamAppsSortDir:null};var ne=333;var ie=function(e){k()(t,e);function t(e){var a;p()(this,t);a=f()(this,g()(t).call(this,e));a.onSearchInputChange=Object(C["debounce"])(a.onSearchInputChange,ne,{trailing:true}).bind(y()(a));a.generateTeamsForAppCSV=a.generateTeamsForAppCSV.bind(y()(a));return a}h()(t,[{key:"onSearchInputChange",value:function e(t){t.persist();var a=Object(C["get"])(t,"target.value","");Object(w["b"])(Object(w["a"])().teams.setTeamAppsSearchQuery(a))}},{key:"getTeamAppListProps",value:function e(){return{teamId:this.props.teamId,teamApps:this.props.teamApps,teamAppsApiCursor:this.props.teamAppsApiCursor,teamAppsApiTotal:this.props.teamAppsApiTotal,teamAppsLoading:this.props.teamAppsLoading,searchQuery:this.props.teamAppsSearchQuery,isLoading:this.props.teamAppsLoading}}},{key:"formatHeader",value:function e(){var t=parseInt(this.props.teamAppsCount,10);if(!Number.isNaN(t))return ae.t("{count} Apps",{count:this.props.teamAppsCount});return ae.t("Apps")}},{key:"generateTeamsForAppCSV",value:function e(){var t={type:"apps",team_id:this.props.teamId};this.props.teamAppsSearchQuery&&(t.query=this.props.teamAppsSearchQuery);if(this.props.teamAppsSortBy){t.sort_prefix=this.props.teamAppsSortBy;this.props.teamAppsSortDir&&(t.sort_dir=this.props.teamAppsSortDir)}Object(w["b"])(Object(w["a"])().apps.generateAppsCSVForSlackbotDM(t))}},{key:"renderAppFilterInput",value:function e(){var t=ae.t("Filter by name...");return n.a.createElement(j["a"],{placeholder:t,icon:"search",autoFocus:false,isLoading:this.props.teamAppsLoading,onChange:this.onSearchInputChange,value:this.props.teamAppsSearchQuery})}},{key:"renderManageAppsButton",value:function e(){var t=this.props.teamAppsTeamUrl;var a=t&&t+"apps/manage"||null;var r=ae.t("Manage Apps");if(a)return n.a.createElement(I["d"],{href:a,target:"_blank",rel:"noopener noreferrer",type:"outline"},r,n.a.createElement(A["a"],{type:"external_link",className:"p-export_csv_button_caret"}));var i=ae.t("You must join this workspace to manage its apps.");return n.a.createElement(T["c"],{tip:i,position:"top"},n.a.createElement("div",null,n.a.createElement(I["d"],{type:"outline",disabled:true},r,n.a.createElement(A["a"],{type:"external_link",className:"p-export_csv_button_caret"}))))}},{key:"render",value:function e(){var t=[this.renderManageAppsButton()];if(0===this.props.teamAppsCount&&this.props.teamAppsApiCursor&&Object(C["isNull"])(this.props.teamAppsSearchQuery)){var a=ae.t("Apps");return n.a.createElement(W,{pageHeader:a})}var r=this.getTeamAppListProps();return n.a.createElement("div",{className:"padding_left_250 padding_right_250 padding_top_200"},n.a.createElement(U,{title:this.formatHeader(),headerActions:t,headerClassName:"margin_bottom_150"}),this.renderAppFilterInput(),n.a.createElement("div",{className:"p-app_management_team_apps_list"},n.a.createElement(te,r)))}}]);return t}(r["PureComponent"]);ie.displayName="TeamApps";ie.defaultProps=re;var se=ie;var oe=se;Object(c["a"])("interop.teamApps",{render:function e(t,a,r){if(!t)throw new Error("Team Apps render must be called with a teamId parameter");var i=Object(l["f"])(t);s.a.render(n.a.createElement(o["Provider"],{store:i},n.a.createElement(u["a"],null,n.a.createElement(oe,r))),a)},stop:function e(t){s.a.unmountComponentAtNode(t)}})},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(85);var s=a.n(i);var o=a(12);var l=a(156);var c=a(26);var u=a(218);var d=a.n(u);var p=a(88);var m=a.n(p);var h=a(110);var v=a.n(h);var f=a(135);var b=a.n(f);var g=a(169);var _=a.n(g);var y=a(138);var O=a.n(y);var k=a(147);var E=a.n(k);var C=a(185);var S=a.n(C);var w=a(0);var j=a(2);var I=a(24);var T=a(25);var A=a(533);function N(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function P(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?N(Object(a),true).forEach(function(t){m()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):N(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function M(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.map(function(a,r){var n=Object(A["g"])(a.email).error_key;if(!n&&("invite"===a.mapping||"create"===a.mapping)){var i=e.some(function(e,t){return t!==r&&e.email===a.email});var s=!i&&t.some(function(e){return e.profile.email===a.email});var o=i||s;n=o?"duped":n}return P({},a,{email_state:n||"ok"})})}function D(e){return{label:e.profile.real_name+" "+e.name,lfs_id:e.id,id:e.id,member:e,value:e.id}}var x={makeUserLFSItem:D,validateEmails:M};var R=a(23);var F=a(1219);var L=a(6);var U=a(1970);function B(e){if(e.member)return n.a.createElement(U["a"],{item:e});return e.label}var q=a(1971);function G(e){if(e.member)return n.a.createElement(q["a"],{item:e});return e.label}var H=a(2481);function W(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function V(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?W(Object(a),true).forEach(function(t){m()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):W(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var K=new L["b"]("imports");var z={onUserMappingChange:j["noop"]};function Q(e){var t=[{label:K.t("Choose one:"),value:"-",id:"-"},{label:K.t("Create & invite user"),value:"invite",id:"invite"},{label:K.t("Create a disabled user, without inviting them"),value:"create",id:"create"},{label:K.t("Do not create a user, just import messages"),value:"bot",id:"bot"},{label:K.t("Skip user completely, importing no messages"),value:"0",id:"0"}];return[].concat(t,d()(Object.values(e.allMembers).map(D))).map(function(t){return t.value===e.userMapping.mapping?V({},t,{preselected:true}):t})}function Y(e){return-1===["-","invite","create","bot","0"].indexOf(e)}var J=function(e){S()(t,e);function t(e){var a;v()(this,t);a=_()(this,O()(t).call(this,e));a.onEmailChange=a.onEmailChange.bind(E()(a));a.onMappingChange=a.onMappingChange.bind(E()(a));return a}b()(t,[{key:"UNSAFE_componentWillReceiveProps",value:function e(t){t.userMapping.mapping!==this.props.userMapping.mapping&&this.lazyFilterSelect&&this.lazyFilterSelect.processItems(Q(t))}},{key:"onEmailChange",value:function e(t){this.props.onUserMappingChange(V({},this.props.userMapping,{email:t}))}},{key:"onMappingChange",value:function e(t){var a;var r=this.props.allMembers[t];a=r&&r.profile&&r.profile.email?r.profile.email:this.props.userMapping.import_email;this.props.onUserMappingChange(V({},this.props.userMapping,{mapping:t,email:a}))}},{key:"maybeRenderEmailInput",value:function e(){var t=this;var a=this.props.userMapping,r=a.mapping,i=a.email,s=a.email_state,o=a.import_email,l=a.id;if(i===o&&"ok"===s)return null;if(i===o&&"create"!==r&&"invite"!==r)return null;if(Y(r))return null;return n.a.createElement("input",{type:"email",name:"email_"+l,defaultValue:i,onChange:function e(a){return t.onEmailChange(a.target.value)},placeholder:Object(A["a"])(),className:"small small_top_margin"})}},{key:"renderAction",value:function e(){return n.a.createElement("div",{className:"col span_3_of_6"},this.renderUserSelect(),this.renderErrors())}},{key:"renderErrors",value:function e(){var t;switch(this.props.userMapping.email_state){case"duped":t=K.t("Another user has this email.");break;case"empty":t=K.t("An email address is required.");break;case"invalid":t=K.t("This address is invalid.");break;case"ok":default:break}var a=["control-group","small_top_margin",{error:!Y(this.props.userMapping.mapping)&&"ok"!==this.props.userMapping.email_state}];return n.a.createElement("div",{className:a},t&&n.a.createElement("span",{className:"small_left_margin help-inline"},n.a.createElement(R["a"],{type:"warning",className:"moscow_red"})," ",t),this.maybeRenderEmailInput())}},{key:"renderUserSelect",value:function e(){var t=this;return n.a.createElement(F["a"],{ref:function e(a){t.lazyFilterSelect=a},items:Q(this.props),template:B,tokenTemplate:G,onValueChange:function e(a){return t.onMappingChange(a[0].value)},single:true})}},{key:"render",value:function e(){return n.a.createElement("div",{className:"p-service_import_mapping_form--user-mapping-row"},n.a.createElement("div",{className:"col span_3_of_6 break_all"},this.props.userMapping.import_email||K.t("no email")),this.renderAction())}}]);return t}(r["PureComponent"]);J.displayName="ServiceImportUserMapping";J.defaultProps=z;var X=J;function Z(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function $(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(a),true).forEach(function(t){m()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Z(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var ee={};var te=function(e){S()(t,e);function t(e){var a;v()(this,t);a=_()(this,O()(t).call(this,e));a.state={batchUserAction:"-",userMappings:e.initialUserMappings};a.onUserMappingChange=a.onUserMappingChange.bind(E()(a));a.onChange=a.onChange.bind(E()(a));a.renderUserMapping=a.renderUserMapping.bind(E()(a));a.onApplyBatchUserActionToAll=a.onApplyBatchUserActionToAll.bind(E()(a));a.onApplyBatchUserActionToUnmapped=a.onApplyBatchUserActionToUnmapped.bind(E()(a));return a}b()(t,[{key:"onApplyBatchUserActionToAll",value:function e(){var t=this;this.setState(function(e){return{userMappings:M(e.userMappings.map(function(a,r){return $({},a,{mapping:"-"===e.batchUserAction?t.props.initialUserMappings[r].mapping:e.batchUserAction,email:a.import_email})}),Object.values(t.props.allMembers))}})}},{key:"onApplyBatchUserActionToUnmapped",value:function e(){var t=this;this.setState(function(e){return{userMappings:M(e.userMappings.map(function(a,r){return Y(a.mapping)?a:$({},a,{mapping:"-"===e.batchUserAction?t.props.initialUserMappings[r].mapping:e.batchUserAction,email:a.import_email})}),Object.values(t.props.allMembers))}})}},{key:"onChange",value:function e(t,a){this.setState(function(){return m()({},t,a)})}},{key:"onUserMappingChange",value:function e(){var t=this;var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!a.id)return;var r=this.state.userMappings;var n=Object(j["findIndex"])(r,function(e){return e.id===a.id});if(-1===n)return;var i=[].concat(d()(r.slice(0,n)),[a],d()(r.slice(n+1)));this.setState(function(){return{userMappings:M(i,Object.values(t.props.allMembers))}})}},{key:"renderFormInputs",value:function e(){var t=JSON.stringify(this.state.userMappings);var a=JSON.stringify(this.props.initialChannelMappings);var r=this.state.userMappings.map(function(e){return n.a.createElement("div",{key:e.id},n.a.createElement("input",{type:"hidden",value:e.mapping,name:"user_"+e.id}),n.a.createElement("input",{type:"hidden",value:e.email,name:"email_"+e.id}))});var i=this.props.initialChannelMappings.map(function(e){return n.a.createElement("input",{key:e.id,type:"hidden",value:e.mapping,name:"channel_"+e.id})});return n.a.createElement("div",null,n.a.createElement("input",{type:"hidden",value:this.props.crumb,name:"crumb"}),n.a.createElement("input",{type:"hidden",value:"mapping",name:"step"}),r,i,n.a.createElement("input",{type:"hidden",value:t,name:"user_list"}),n.a.createElement("input",{type:"hidden",value:a,name:"channel_list"}))}},{key:"renderUserMapping",value:function e(t){return n.a.createElement(X,{key:t,userMapping:this.state.userMappings[t],allMembers:this.props.allMembers,onUserMappingChange:this.onUserMappingChange})}},{key:"render",value:function e(){return n.a.createElement("div",{className:"p-service_import_mapping_form large_bottom_margin"},n.a.createElement("form",{method:"post",action:"/services/import/"+this.props.service},this.renderFormInputs(),n.a.createElement(I["d"],{htmlType:"submit",size:"large"},"Save Changes")))}}]);return t}(r["PureComponent"]);te.displayName="ServiceImportMappingForm";te.defaultProps=ee;function ae(e){var t=Object(T["a"])(e);return{allMembers:t}}var re=Object(o["connect"])(ae)(te);var ne=re;var ie=a(197);var se=function e(t,a,r){if(!t)throw new Error("mountServiceImportMappingForm must be called with a teamId parameter");Object(l["a"])(n.a.createElement(o["Provider"],{store:Object(c["f"])(t)},n.a.createElement(ie["a"],null,n.a.createElement(ne,r))),a)};var oe=s.a.unmountComponentAtNode;var le={mountServiceImportMappingForm:se,unmountServiceImportMappingForm:oe};var ce=a(52);Object(ce["a"])("interop.mountServiceImportMappingForm",se);Object(ce["a"])("interop.unmountServiceImportMappingForm",oe)},,,,function(e,t,a){},function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(85);var s=a.n(i);var o=a(12);var l=a(26);var c=a(52);var u=a(196);var d=a.n(u);var p=a(278);var m=a.n(p);var h=a(110);var v=a.n(h);var f=a(135);var b=a.n(f);var g=a(169);var _=a.n(g);var y=a(138);var O=a.n(y);var k=a(147);var E=a.n(k);var C=a(185);var S=a.n(C);var w=a(0);var j=a(2);var I=a(30);var T=a(13);var A=a.n(T);var N=a(191);var P=a(6);var M=a(2026);var D=a(88);var x=a.n(D);function R(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function F(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?R(Object(a),true).forEach(function(t){x()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):R(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function L(e){var t=e.workspaceName,a=e.workspaceDomain,r=e.workspaceDesc,n=e.accessSetting;var i={name:t,domain:a};if(r||n)return F({},i,{description:r,access_setting:n});return i}var U=a(245);var B=a.n(U);var q=a(50);var G=a(141);var H=a(530);var W=a(194);var V=new P["b"]("enterprise_dashboard");var K=/^[a-z0-9-]+$/i;var z=/[a-z]+/i;var Q=/^[a-z0-9]/i;var Y=/[a-z0-9]$/i;var J;function X(){J={empty_domain:V.t("Please fill in a workspace domain."),invalid_domain_characters:V.t("Your domain can only have letters, numbers, and dashes."),domain_no_start_end_dash:V.t("Your domain can\u2019t start or end with a dash."),domain_minimum_one_letter:V.t("Your domain needs at least one letter in it."),maximum_domain_length_reached:Object(W["b"])(me),empty_name:V.t("Please fill in a name."),maximum_workspace_name_length_reached:Object(W["b"])(he),empty_description:V.t("Please fill in a workspace description."),maximum_description_length_reached:Object(W["b"])(ve)};return null}function Z(e){return Y.test(e)}function $(e){return e.length<=me}function ee(e){return e.length<=he}function te(e){return e.length<=ve}function ae(e){return Q.test(e)}function re(e){return e.trim().length>0}function ne(e){if(Object(j["isNull"])(e)||Object(j["isUndefined"])(e))return"";if(!re(e))return J.empty_name;if(!ee(e))return J.maximum_workspace_name_length_reached;return""}function ie(e){if(Object(j["isNull"])(e)||Object(j["isUndefined"])(e))return"";if(!re(e)||"organization"===e)return J.empty_domain;if(!$(e))return J.maximum_domain_length_reached;if(!K.test(e))return J.invalid_domain_characters;if(!z.test(e))return J.domain_minimum_one_letter;if(!ae(e)||!Z(e))return J.domain_no_start_end_dash;return""}function se(e){if(Object(j["isNull"])(e)||Object(j["isUndefined"])(e))return"";if(!re(e))return J.empty_description;if(!te(e))return J.maximum_description_length_reached;return""}function oe(e){X();var t=e.workspaceName,a=e.workspaceDomain,r=e.workspaceDesc;var n=ne(t);var i=ie(a);var s=se(r);if(!n&&!i&&!s)return{};return{workspaceName:n,workspaceDomain:i,workspaceDesc:s}}var le={};Object.defineProperty(le,"isValidWorkspaceName",{get:function e(){return ne},set:function e(t){ne=t}});Object.defineProperty(le,"isValidWorkspaceDomain",{get:function e(){return ie},set:function e(t){ie=t}});Object.defineProperty(le,"isValidWorkspaceDescription",{get:function e(){return se},set:function e(t){se=t}});function ce(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function ue(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(a),true).forEach(function(t){x()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ce(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var de=new P["b"]("enterprise_dashboard");var pe={workspaceName:null,workspaceDomain:null,workspaceDesc:null,errors:null};var me=21;var he=255;var ve=255;var fe=function e(t){Object(N["b"])(Object(N["a"])().teams.setCreateTeamErrors(t))};var be=function e(t,a){Object(N["b"])(Object(N["a"])().teams.setCreateTeamError(t,a))};var ge=function(e){S()(t,e);function t(e){var a;v()(this,t);a=_()(this,O()(t).call(this,e));a.state={values:{workspaceDomain:a.props.workspaceDomain,workspaceName:a.props.workspaceName,workspaceDesc:a.props.workspaceDesc}};return a}b()(t,[{key:"onInputChanged",value:function e(t,a){this.setFormValue(t,a);be(t,"")}},{key:"setFormValue",value:function e(t,a){this.setState(function(e){return{values:ue({},e.values,x()({},t,a))}})}},{key:"bindArgs",value:function e(t){for(var a=arguments.length,r=new Array(a>1?a-1:0),n=1;n<a;n++)r[n-1]=arguments[n];return t.bind.apply(t,[this].concat(r))}},{key:"submit",value:function e(t){var a=oe(this.state.values);if(!Object(j["isEmpty"])(a)){fe(a);return}this.props.onSubmit(this.state.values,t)}},{key:"renderDescriptionInput",value:function e(){var t=this.state.values.workspaceDesc;var a=Object(j["get"])(this.props.errors,"workspaceDesc");var r="workspace_input_description";var n={name:"workspaceDesc",inputLabel:de.t("Workspace Description"),hintText:de.t("A detailed description can help members of your organization decide whether they should join this workspace."),maxCharacterLimit:ve,value:t,id:r,labelId:r+"_label"};a&&(n=ue({},n,{errorText:a}));return this.renderTextareaElement(n)}},{key:"renderDomainInput",value:function e(){var t=this.state.values.workspaceDomain;var a=Object(j["get"])(this.props.errors,"workspaceDomain");var r="workspace_input_domain";var n={name:"workspaceDomain",inputLabel:de.t("Workspace Domain"),hintText:de.t("Letters, numbers, and hyphens only."),maxCharacterLimit:me,suffix:de.t(".slack.com"),placeholder:de.t("workspace-url"),value:t,id:r,labelId:r+"_label"};a&&(n=ue({},n,{errorText:a}));return this.renderTextElement(n)}},{key:"renderNameInput",value:function e(){var t=this.state.values.workspaceName;var a=Object(j["get"])(this.props.errors,"workspaceName");var r="workspace_input_name";var n={name:"workspaceName",inputLabel:de.t("Workspace Name"),maxCharacterLimit:he,value:t,id:r,labelId:r+"_label"};a&&(n=ue({},n,{errorText:a}));return this.renderTextElement(n)}},{key:"renderTextElement",value:function e(t){var a=t.inputLabel,r=t.labelId,i=t.sublabelText,s=t.id,o=B()(t,["inputLabel","labelId","sublabelText","id"]);return n.a.createElement(q["a"],{id:r,htmlFor:s,className:"p-ent_workspace_create__label",text:a,subtext:i},this.renderTextInput(ue({id:s},o)))}},{key:"renderTextInput",value:function e(t){var a=t.suffix,r=t.name,i=B()(t,["suffix","name"]);return n.a.createElement(G["a"],d()({},i,{name:r,suffix:a,onChange:this.bindArgs(this.onInputChanged,r)}))}},{key:"renderTextareaElement",value:function e(t){var a=t.labelId,r=t.inputLabel,i=t.sublabelText,s=t.id,o=t.name,l=B()(t,["labelId","inputLabel","sublabelText","id","name"]);return n.a.createElement(q["a"],{id:a,htmlFor:s,className:"p-ent_workspace_create__label",text:r,subtext:i},n.a.createElement(H["a"],d()({},l,{id:s,name:o,onChange:this.bindArgs(this.onInputChanged,o),resize:"none"})))}},{key:"render",value:function e(){return n.a.createElement("div",null,this.renderNameInput(),this.renderDomainInput(),this.renderDescriptionInput())}}]);return t}(r["Component"]);ge.displayName="CreateWorkspaceModalNameForm";ge.defaultProps=pe;var _e=ge;var ye=a(151);var Oe=a(269);var ke=new P["b"]("enterprise_dashboard");var Ee={accessSetting:null};var Ce=function(e){S()(t,e);function t(e){var a;v()(this,t);a=_()(this,O()(t).call(this,e));a.state={accessSetting:a.props.accessSetting};Object(I["a"])(E()(a),["renderAccessSettingRadio","handleAccessSettingChange"]);return a}b()(t,[{key:"UNSAFE_componentWillReceiveProps",value:function e(t){this.updateOnAccessSettingChange(t)}},{key:"getAccessSetting",value:function e(){return this.state.accessSetting}},{key:"setAccessSetting",value:function e(t){this.setState(function(){return{accessSetting:t}})}},{key:"handleAccessSettingChange",value:function e(t){t.persist();this.setAccessSetting(t.target.value)}},{key:"submit",value:function e(t){var a=this.getAccessSetting();this.props.onSubmit(a,t)}},{key:"updateOnAccessSettingChange",value:function e(t){var a=t.accessSetting!==this.props.accessSetting;a&&this.setAccessSetting(t.accessSetting)}},{key:"renderAccessSettingForm",value:function e(){var t=[{accessType:"open",accessName:ke.t("Open"),descriptionText:ke.t("Anyone in your organization will be able to join this workspace.")},{accessType:"closed",accessName:ke.t("By Request"),descriptionText:ke.t("Members can request to join this workspace.")},{accessType:"invite_only",accessName:ke.t("Invite Only"),descriptionText:ke.t("Members must be invited by a Workspace Owner or Admin.")},{accessType:"unlisted",accessName:ke.t("Hidden"),descriptionText:ke.t("This workspace will be hidden from the rest of your organization. Members must be invited by a Workspace Owner or Admin.")}];var a=t.map(this.renderAccessSettingRadio);return n.a.createElement(Oe["a"],{field:"workspaceAccessSetting",noTouch:true},a)}},{key:"renderAccessSettingRadio",value:function e(t){var a=this.state.accessSetting;var r=t.accessType,i=t.accessName,s=t.descriptionText;return n.a.createElement("div",{key:r},n.a.createElement(q["a"],{id:r,htmlFor:"workspace_access_type_"+r,type:"inline",cursor:"pointer",className:"p-ent_workspace_create__label p-ent_workspace_create__label--radio",text:i,subtext:s},n.a.createElement(ye["a"],{id:"workspace_access_type_"+r,value:r,onChange:this.handleAccessSettingChange,checked:r===a})))}},{key:"render",value:function e(){return n.a.createElement("div",null,this.renderAccessSettingForm())}}]);return t}(r["Component"]);Ce.displayName="CreateWorkspaceModalAccessForm";Ce.defaultProps=Ee;var Se=Ce;var we=a(3123);var je=new P["b"]("enterprise_dashboard");var Ie={workspaceName:"",workspaceDomain:"",accessSetting:"closed",workspaceDesc:"",errors:{},ui:{},open:true};var Te=function(e){S()(t,e);function t(e){var a;v()(this,t);a=_()(this,O()(t).call(this,e));a.state={workspaceName:a.props.workspaceName,workspaceDomain:a.props.workspaceDomain,workspaceDesc:a.props.workspaceDesc,accessSetting:a.props.accessSetting,isPending:false};Object(I["a"])(E()(a),["renderChooseNamePane","renderAccessSettingPane","setWorkspaceInfo","setAccessSetting","getWorkspaceInfo"]);return a}b()(t,[{key:"UNSAFE_componentWillReceiveProps",value:function e(t){this.updateOnModalClose(t)}},{key:"getWorkspaceInfo",value:function e(){return{workspaceName:this.state.workspaceName,workspaceDomain:this.state.workspaceDomain,accessSetting:this.state.accessSetting,workspaceDesc:this.state.workspaceDesc}}},{key:"setAccessSetting",value:function e(t,a){this.setState(function(){return{accessSetting:t}},a)}},{key:"setPendingState",value:function e(t){this.setState(function(){return{isPending:t}})}},{key:"setWorkspaceInfo",value:function e(t,a){this.setState(function(){return{workspaceName:t.workspaceName,workspaceDomain:t.workspaceDomain,workspaceDesc:t.workspaceDesc}},a)}},{key:"buildModalSteps",value:function e(){var t=this;var a=function e(){var a={header:je.t("Set up your workspace"),subtitle:je.t("Choose a name and domain for your workspace, and give it a description. You can always change these later."),renderInnerPane:t.renderChooseNamePane};return t.renderModalPane(a)};var r=function e(){var a={header:je.t("Set access for this workspace"),subtitle:je.t("Choose how members in your organization can join this workspace."),renderInnerPane:t.renderAccessSettingPane};return t.renderModalPane(a)};var n=function e(){var a=function e(){var a=t.state,r=a.workspaceName,n=a.workspaceDomain;Object(N["b"])(Object(N["a"])().teams.getWorkspaceInfoAvailability({workspaceName:r,workspaceDomain:n}))};t.chooseNameForm.submit(a)};var i=function e(){var a=t.getWorkspaceInfo();t.setPendingState(true);t.submit(L(a));t.createWorkspaceModalRef.goToNextStep()};var s=function e(){t.accessSettingForm.submit(i);t.createWorkspaceModalRef.goToNextStep()};var o=[{children:a,goButtonText:je.t("Next"),title:je.t("Choose Name"),withFooter:true,withBreadcrumbHeader:true,showBackButton:false,goButtonIsPending:this.isPending(),showCancelButton:true,onGo:n,onCancel:this.props.onCancel,shouldCloseOnGo:false},{children:r,goButtonText:je.t("Create Workspace"),title:je.t("Set Access"),withFooter:true,withBreadcrumbHeader:true,showBackButton:true,goButtonIsPending:this.isPending(),showCancelButton:true,onBack:function e(){Object(N["b"])(Object(N["a"])().ui.updateModalStepIndex(0))},onGo:s,cancelText:je.t("Cancel"),onCancel:this.props.onCancel,shouldCloseOnGo:false}];return o}},{key:"isPending",value:function e(){return this.state.isPending}},{key:"reset",value:function e(){var t=Ie.workspaceName,a=Ie.workspaceDomain,r=Ie.workspaceDesc,n=Ie.accessSetting;this.setWorkspaceInfo({workspaceName:t,workspaceDomain:a,workspaceDesc:r},j["noop"]);this.setAccessSetting(n);this.setPendingState(false)}},{key:"submit",value:function(){var e=m()(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function e(a){while(1)switch(a.prev=a.next){case 0:a.next=2;return this.props.onSubmit(t);case 2:this.setPendingState(false);case 3:case"end":return a.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"updateOnModalClose",value:function e(t){var a=this.props.open&&!t.open;a&&this.reset()}},{key:"renderAccessSettingPane",value:function e(){var t=this;var a=this.state.accessSetting;return n.a.createElement(Se,{accessSetting:a,onSubmit:this.setAccessSetting,ref:function e(a){t.accessSettingForm=a}})}},{key:"renderChooseNamePane",value:function e(){var t=this;var a=this.state,r=a.workspaceName,i=a.workspaceDomain,s=a.workspaceDesc;var o=this.props.errors;return n.a.createElement(_e,{workspaceName:r,workspaceDomain:i,workspaceDesc:s,errors:o,onSubmit:this.setWorkspaceInfo,ref:function e(a){t.chooseNameForm=a}})}},{key:"renderModalPane",value:function e(t){var a=t.header,r=t.subtitle,i=t.renderInnerPane;var s=A()("p-ent_workspace_create__header",{"p-ent_workspace_create__header--with_subtitle":r});return n.a.createElement("div",{className:"p-ent_workspace_create","data-enterprise-teams-create":true},n.a.createElement("div",{className:"p-ent_workspace_create__pane"},n.a.createElement("div",{className:"p-ent_workspace_create__form"},n.a.createElement("h3",{className:s},a),this.renderSubtitle(r),i())))}},{key:"renderSubtitle",value:function e(t){if(t)return n.a.createElement("p",{className:"p-ent_workspace_create__subtitle"},t);return null}},{key:"render",value:function e(){var t=this;var a=je.t("Set up");var r=je.t("Set access");var i=[a,r];var s={steps:this.buildModalSteps(),breadcrumbTitles:i,onCancel:this.props.onCancel,stepIndex:this.props.ui.modal_step_index,isOpen:this.props.open,position:"fixed"};return n.a.createElement(M["a"],d()({},s,{ref:function e(a){t.createWorkspaceModalRef=a}}))}}]);return t}(r["Component"]);Te.displayName="CreateWorkspaceModal";Te.defaultProps=Ie;var Ae=Te;var Ne=Ae;Object(c["a"])("interop.createWorkspaceModal",{render:function e(t,a,r){if(!t)throw new Error("createWorkspaceModal render must be called with a teamId parameter");var i=Object(l["f"])(t);s.a.render(n.a.createElement(o["Provider"],{store:i},n.a.createElement(Ne,r)),a)},stop:function e(t){s.a.unmountComponentAtNode(t)}})},function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(85);var s=a.n(i);var o=a(12);var l=a(26);var c=a(52);var u=a(444);var d=a(0);var p=a(110);var m=a.n(p);var h=a(135);var v=a.n(h);var f=a(169);var b=a.n(f);var g=a(138);var _=a.n(g);var y=a(147);var O=a.n(y);var k=a(185);var E=a.n(k);var C=a(40);var S=a.n(C);var w=a(6);var j=a(106);var I=a(928);var T=a(24);var A=a(131);var N=a(387);var P=a(93);var M=a(2059);var D=a(1857);var x=a(3147);var R=new w["b"]("enterprise_dashboard");var F={orgName:"",configured:false,lastCacheClearTs:0};var L=function(e){E()(t,e);function t(e){var a;m()(this,t);a=b()(this,_()(t).call(this,e));a.onPushClick=a.onPushClick.bind(O()(a));a.state={lastCacheClearTs:e.lastCacheClearTs};return a}v()(t,[{key:"componentDidMount",value:function e(){var t=this;this.props.configured&&this.props.getClearCacheTs().then(function(e){var a=e.timestamp;t.setState(function(){return{lastCacheClearTs:a}})})}},{key:"onPushClick",value:function e(){var t=this;this.props.setClearCacheTs({timestamp:S()().unix(),reason:"EKMPurchasedView_setClearCacheTs"}).then(function(e){var a=e.timestamp;t.setState(function(){return{lastCacheClearTs:a}});t.props.enqueueToast({element:n.a.createElement(A["b"],{position:"bottom-right"},n.a.createElement("div",null,R.rt("<b>Caches cleared.</b> Key changes will be reflected across all clients in a few minutes.")))})})}},{key:"renderCacheClearControls",value:function e(){return n.a.createElement("div",null,n.a.createElement("div",{className:"display_flex justify_content_between"},n.a.createElement("div",null,n.a.createElement("h2",{className:"p-ekm_purchased_view__subtitle"},R.t("Made key policy changes in AWS?")),n.a.createElement("div",{className:"sk_foreground_max margin_bottom_100"},n.a.createElement("span",{className:"bold"},R.t("Last Cleared: ")),n.a.createElement("span",null,n.a.createElement(D["a"],{timestamp:this.state.lastCacheClearTs})))),n.a.createElement("div",null,n.a.createElement(T["d"],{type:"primary",onClick:this.onPushClick},R.t("Clear Cache")))),n.a.createElement("p",null,R.t("Clearing client caches is recommended when making any key changes in AWS as different Slack clients cache data for varying amounts of time. This will ensure key changes are reflected across all clients within 24 hours. Any offline devices will update the next time they\u2019re online.")),n.a.createElement(N["a"],null))}},{key:"renderUnconfiguredMessage",value:function e(){return n.a.createElement(P["a"],{type:"boxed",level:"info",icon:"info-circle",align:"left",className:"margin_bottom_100"},n.a.createElement("span",{className:"bold"},R.t("Contact your Slack Customer Success Manager to enable EKM")),n.a.createElement("div",null,R.t("To start encrypting all data using your own keys, you\u2019ll need to enable EKM by providing the ARN for your key family.")))}},{key:"render",value:function e(){var t=this.props,a=t.configured,r=t.orgName;return n.a.createElement("div",{className:"p-ekm_purchased_view"},n.a.createElement("h1",{className:"p-ekm_purchased_view__title"},R.t("Enterprise Key Management")),n.a.createElement("p",null,R.t("Enterprise Key Management (EKM) encrypts all messages and files in your organization using your keys managed through AWS Key Management Service. These keys are never visible to Slack.")),!a&&this.renderUnconfiguredMessage(),a&&n.a.createElement("hr",null),n.a.createElement(M["a"],{orgName:r}),a&&n.a.createElement("hr",null),a&&this.renderCacheClearControls())}}]);return t}(r["PureComponent"]);L.displayName="EKMPurchasedView";L.defaultProps=F;var U=function e(t){return{enqueueToast:function e(a){return t(Object(j["enqueueToast"])(a))},getClearCacheTs:function e(){return t(Object(I["c"])({reason:"EKMPurchasedView_getClearCacheTs"}))},setClearCacheTs:function e(a){return t(Object(I["i"])(a))}}};var B=Object(o["connect"])(null,U)(L);var q=B;var G=a(3149);var H=new w["b"]("enterprise_dashboard");var W={orgName:""};var V="https://slack.com/enterprise-key-management";var K=function(e){E()(t,e);function t(){m()(this,t);return b()(this,_()(t).apply(this,arguments))}v()(t,[{key:"render",value:function e(){var t=this.props.orgName;return n.a.createElement("div",{className:"p-ekm_status_view__not_purchased display_flex flex_direction_column align_items_center"},n.a.createElement("div",{className:"p-ekm_status_view__not_purchased_img"}),n.a.createElement("h2",{"data-qa":"p-ekm-status-title",className:"p-ekm_status_view__title"},H.t("Enterprise Key Management")),n.a.createElement("p",{className:"p-ekm_status_view__not_purchased_text align_center"},H.rt("Adding Enterprise Key Management (EKM) to <strong>{orgName}</strong> allows you to encrypt all messages and files in your organization using your own encryption keys, giving you complete control of your data in Slack.",{orgName:t})),n.a.createElement(T["d"],{href:V,className:"no_underline"},H.t("Learn More")))}}]);return t}(r["PureComponent"]);K.displayName="EKMNotPurchasedView";K.defaultProps=W;var z=K;var Q=z;var Y={purchased:false};function J(e){var t=e.purchased;if(!t)return n.a.createElement(Q,e);return n.a.createElement(q,e)}J.displayName="EKMView";J.defaultProps=Y;var X=J;var Z=X;Object(c["a"])("interop.ekmStatus",{render:function e(t,a,r){if(!t)throw new Error("ekmStatus render must be called with a teamId parameter");var i=Object(l["f"])(t);s.a.render(n.a.createElement(o["Provider"],{store:i},n.a.createElement(u["a"],null,n.a.createElement(Z,r))),a)},stop:function e(t){s.a.unmountComponentAtNode(t)}})},function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(12);var s=a(156);var o=a(26);var l=a(110);var c=a.n(l);var u=a(135);var d=a.n(u);var p=a(169);var m=a.n(p);var h=a(138);var v=a.n(h);var f=a(147);var b=a.n(f);var g=a(185);var _=a.n(g);var y=a(0);var O=a(2796);var k=a(20);var E=a(33);var C=a(302);var S=a(285);var w=a(87);var j=a(9);var I=a(438);var T=a(422);var A=a(920);var N=a(6);var P=a(16);var M=new N["b"]("view");var D={totalUnreadHighlights:null};var x=0;var R=function(e){_()(t,e);function t(){c()(this,t);return m()(this,v()(t).apply(this,arguments))}d()(t,[{key:"componentDidMount",value:function e(){x&&this.props.logger.error("Multiple DocumentTitles mounted");x+=1;this.originalTitle=document.title;this.updateTitle()}},{key:"componentDidUpdate",value:function e(t){t.title===this.props.title&&t.totalUnreadHighlights===this.props.totalUnreadHighlights||this.updateTitle()}},{key:"componentWillUnmount",value:function e(){x-=1;document.title=this.originalTitle}},{key:"unreadHighlightsCountString",value:function e(){return M.t("{totalUnreadHighlights, plural, =1 {# new item} other {# new items}}",{totalUnreadHighlights:this.props.totalUnreadHighlights})}},{key:"updateTitle",value:function e(){var t=this.props,a=t.totalUnreadHighlights,r=t.title;var n=M.t("Slack");if(0===r.length){document.title=n;return}document.title=a?n+" | "+r+" | "+this.unreadHighlightsCountString():n+" | "+r}},{key:"render",value:function e(){return null}}]);return t}(r["PureComponent"]);R.displayName="DocumentTitle";R.defaultProps=D;var F=function e(t){return{logger:Object(P["a"])({state:t}),totalUnreadHighlights:Object(S["getTotalUnreadHighlights"])(t)}};var L=Object(i["connect"])(F)(R);var U=L;var B={viewName:"",teamName:""};var q=function(e){_()(t,e);d()(t,null,[{key:"getDerivedStateFromProps",value:function e(t,a){var r=!t.isWindowFocused&&(a.showHighlights||t.highlightCount>a.highlightCount);var n=!t.isWindowFocused&&(a.showUnreads||t.unreadCount>a.unreadCount);return{highlightCount:t.highlightCount,unreadCount:t.unreadCount,showHighlights:r,showUnreads:n}}}]);function t(e){var a;c()(this,t);a=m()(this,v()(t).call(this,e));a.state={highlightCount:0,unreadCount:0,showHighlights:false,showUnreads:false};return a}d()(t,[{key:"render",value:function e(){var t=this.props,a=t.viewName,r=t.teamName;if(!r)return null;var i=a?a+" | "+r:r;this.state.showHighlights?i="! "+i:this.state.showUnreads&&(i="* "+i);return n.a.createElement(U,{title:i})}}]);return t}(r["PureComponent"]);q.displayName="WorkspaceDocumentTitle";q.defaultProps=B;var G=q;var H=new N["b"]("view");var W=new N["b"]("welcome_place");var V=function(e){_()(t,e);function t(e){var a;c()(this,t);a=m()(this,v()(t).call(this,e));a.renderWithState=a.renderWithState.bind(b()(a));return a}d()(t,[{key:"renderWithState",value:function e(t){var a=Object(w["a"])(t);var r=Object(k["e"])(t,a);var i=Object(E["d"])(t);var s="";a===I["a"].allUnreads||"Punreads"===a?s=H.t("Unread Messages"):a===I["a"].allThreads?s=H.t("Threads"):"Pwelcome"===a?s=W.t("Get Started"):Object(T["g"])(a)?s=Object(A["a"])(a).label():r&&(s=Object(j["getDisplayNameForChannel"])(t,r,{publicChannelIncludeHashSign:false,imIncludeAtSign:false}));return n.a.createElement(G,{viewName:s,teamName:i&&i.name,isWindowFocused:!!Object(C["isWindowFocused"])(t),highlightCount:Object(S["getTotalUnreadHighlights"])(t),unreadCount:Object(S["getTotalUnreads"])(t)})}},{key:"render",value:function e(){return n.a.createElement(O["a"],{render:this.renderWithState,store:this.props.store})}}]);return t}(r["Component"]);V.displayName="ConnectedWorkspaceDocumentTitle";var K=V;var z=K;var Q=function e(t,a){if(!t)throw new Error("mountDocumentTitle must be called with a teamId parameter");var r=Object(o["f"])(t);Object(s["a"])(n.a.createElement(i["Provider"],{store:r},n.a.createElement(z,{store:r})),a)};var Y=Q;var J=a(52);Object(J["a"])("interop.mountDocumentTitle",Y)},,function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(12);var s=a(156);var o=a(26);var l=a(110);var c=a.n(l);var u=a(135);var d=a.n(u);var p=a(169);var m=a.n(p);var h=a(138);var v=a.n(h);var f=a(147);var b=a.n(f);var g=a(185);var _=a.n(g);var y=a(0);var O=a(2796);var k=a(2);var E=a(16);var C=a(165);var S={sizes:"16x16 32x32 48x48",type:"image/png"};var w=0;var j=function(e){_()(t,e);function t(e){var a;c()(this,t);a=m()(this,v()(t).call(this,e));a.originalFavicon=a.findFavicon();return a}d()(t,[{key:"componentDidMount",value:function e(){w&&this.props.logger.error("Multiple Favicons mounted");w+=1;this.updateFavicon()}},{key:"componentDidUpdate",value:function e(t){Object(C["a"])(this.getFaviconProps(t),this.getFaviconProps(this.props))||this.updateFavicon()}},{key:"componentWillUnmount",value:function e(){w-=1;this.setOrRemoveFavicon(this.originalFavicon)}},{key:"getFaviconProps",value:function e(t){return{rel:"shortcut icon",href:t.href,sizes:t.sizes,type:t.type}}},{key:"setOrRemoveFavicon",value:function e(t){var a=document.querySelector("head");if(!a){this.logger.error("<head> not found");return}var r=this.findFavicon();r?t?a.replaceChild(t,r):r.remove():t&&a.appendChild(t)}},{key:"findFavicon",value:function e(){var t=document.querySelectorAll("head > link");return Object(k["find"])(t,function(e){var t=e.getAttribute("rel");if(t&&t.split(" ").includes("icon"))return true;return false})}},{key:"updateFavicon",value:function e(){var t=document.createElement("link");Object(k["forEach"])(this.getFaviconProps(this.props),function(e,a){t.setAttribute(a,e)});this.setOrRemoveFavicon(t)}},{key:"render",value:function e(){return null}}]);return t}(r["PureComponent"]);j.displayName="Favicon";j.defaultProps=S;var I=function e(t){return{logger:Object(E["a"])({state:t})}};var T=Object(i["connect"])(I)(j);var A=T;var N=a(150);var P=a(285);var M=a(305);var D={online:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAzFBMVEVKFEyScpNLFU1cK16Mao1hMmOEX4WObZBWJFiQb5FZKFtNGE97VH1QHFJOGVBsQW5jNWV2TXdsQG1aKVxdLV9WI1dwRXGObI9pPGpTIFVPG1FfL2FSH1RVIld8VX1YJlpOGlBbK12RcZJMFk5iNGSBW4JmOGhgMGF3TniLaIx9Vn5lN2eFYYaNa45eLmB5UXtkN2ZUIVaGYodkNmVtQm9YJ1pRHVOHZImCXIN1THZgMWKDXoR9V392TniMaY1nOmmKZ4tpPWtXJVlvRHFqMc1IAAABCklEQVR4Xr3RxZLEIBSG0f9C3NPuPu7u/v7vNEE6dFdRM7s+i0sFvg0EO9X0/CQFeqfeCWwyh4gmCKgSwGJOlRCuWG5gMSKBrcTch03jvwD9Z9eFNcj4gcRj1EE2H5n7OaS93+lA7uXQPKo96kDt9aH4JnDUNS+xEEsLSmKCC0zFMoWY3RmUdBKSFCYDoHPmNCCCaw6DSTC2v8bnw+E9llHrCkBUHkvJbbz1hC4Tl+khWtDaHrQjGXAxH1CSEWwGzUJMH09ktKHkRPTCdBCEdfCKteItj6EDjDuHUvnBsKkO7EywIvr8+juofMNCnnTVUsCird6Gq99o80PkRFh6VcZgFafyYDDDbv0CWLgS6JWTyyIAAAAASUVORK5CYII=",onlineUnreads:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAABNVBMVEVKFEz///9NGE+EX4VLFU3w7PD9/f1SH1Tb0Nv59/n18/W4orhZKFt2TnhwRXF2TXdpPGqghKFMFk7FtMZTIFVhMmNxR3PHt8hfL2F6U3xpPWt/WYD+/v5nOWhWI1edgJ7z8POBW4LIuMhySHS6pruHZIl/WoGJZopuQ3CObI/Vydba0NtsQW7ArcHw6/DEs8VYJlqojqnx7fH8/PyfgqDGtcbg1+Du6e7e1N5kN2Z8VX2fg6BbKlxOGVBxRnJ4T3ljNWV6UnuDXoSLaIyih6NMF07az9qWd5f8+/zUx9Ts5+zj2+Pv6u/t5+13Tni1n7WYeZlTH1XYzdn49vjLu8uIZYm5pLpmOGipkKqMaY2UdJXr5euZe5prP2xsQG2JZovTxtSnjahOGlDSxdOQcJKHY4hXJVnkajHYAAABJUlEQVR4Xr3PNXbFMBCF4Tvmx8wYZmZmZmaG/S8hHke2UuikfF9xp9DfCC3V4YQzUeB01umDStYkogKS5EpCIUGukLHOZwMKRYsLrYv3EyqTljqQcm26DmWQXen2HNsIgrNEUf7PJGGm1w/yJlkLEBwK9PvBgLtWTgRhGQxD53OHCT5rIpiSwRCe+QyCt1kXQbQQIk9oZBQYGz9sAETV6RgChuaBpGlpSHPzlcoilpZLqwDikXZPZtOG0CCXvrXt7g7iu+TbM0Sw7wUx3gNESCqL4IiDfA9vGCck1USQIqLztAjKF+S7hO/qOmVDBLi57fRE7jX8FQRqMugienj8P3A9QeGLg+bveYFCjYNXxPiUoPJWJTOOd4foQ4OSHeUH47uO1voBEO4eo1Zt+vMAAAAASUVORK5CYII=",onlineMentions:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAAAC9UlEQVR4AdSVA4wfXxDH/7H/rm3bttvzVWfbtm3btm3bVnC27Wk23dvu/VxPvsGbTOaz7w32j5f/v6ZKz/97mXSQoeIIM4WiGvDsvxeFh5l+H4Dsc/m26raZqZmC+MIPx9kQQNaZ998GwLyfdXx4fO2zFSUVg1PwplAZs/y3ASi+UVrD2MLcwqstb7TYtCuNXL8NgOscz8rKCpbxZju9Pq9he2lVxTHWb1MDL11vLAMABnxGY2NjRTwa36yLeC7y6bDp6nMZgOBoxG+ysLBQl1tUDqWmFgBVVaZX0fqog5MSnTLTPhYIQABwJ7hEga13xVEWKgDQkdiewdnowKjkI2kEAMelpaWurq58NatyygHQ72skraGkEQWsrq7CQ3V0dBg/4S84zEgRAKaJNGB8aBzCoBLIEWGoc2g8++d2HocK9BUZQGFCIWlAdkQOhInfl0A9wBC9J/7k32f19fXZkXG5apZF9NLFN7gLjzDBOkk8SO+779UGADYBzCpM0+bU4MyPK3h/9CMSGWwZMjEyMTY45qHtCccX/72Cq0DZ4cXiI+LZbrNf++sG6MZfN2/9fQffpjCr0Ow4kW1liHm9je7llk/LHJYVKjh+AeC/JqjOqqH1QRvEdpIdPHQ7GGSeyqoyq/NdEUDDpJ/IJPsmFycX4wQL0dfID21oRBsAuO8axqCY8FGtVa2ox1HJCcm+vLRMolT1RfXwDAQAw33DOIAinTLW09XWBWHw7WvkTOSOGAHASN8INkjmmZyJoCnWA30MYQleCWQBQjeECQC89X3QiOaKltdb6QgC4OvmZ+dJZC9LKyNcA5CxgEmKfyqQkEIRBIAErwuHWIemBqbhBK9nL++A6zoS25QwgFpRDUB2EdhQz5CLmut3BCAmdk+cdoARnzE219T41GaniaAZ7QDoNmyuusJ6cOKGA4acdgAoyCIYViYkgn8RzDB46HYyoH+O2oI6sptqfYTrZGCSBRa0YIMQBWK4amSYcjiFqYgwGhkWAAA494XLYBFPegAAAABJRU5ErkJggg==",offline:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAzFBMVEVKFEyScpNLFU1cK16Mao1hMmOEX4WObZBWJFiQb5FZKFtNGE97VH1QHFJOGVBsQW5jNWV2TXdsQG1aKVxdLV9WI1dwRXGObI9pPGpTIFVPG1FfL2FSH1RVIld8VX1YJlpOGlBbK12RcZJMFk5iNGSBW4JmOGhgMGF3TniLaIx9Vn5lN2eFYYaNa45eLmB5UXtkN2ZUIVaGYodkNmVtQm9YJ1pRHVOHZImCXIN1THZgMWKDXoR9V392TniMaY1nOmmKZ4tpPWtXJVlvRHFqMc1IAAABCklEQVR4Xr3RxZLEIBSG0f9C3NPuPu7u/v7vNEE6dFdRM7s+i0sFvg0EO9X0/CQFeqfeCWwyh4gmCKgSwGJOlRCuWG5gMSKBrcTch03jvwD9Z9eFNcj4gcRj1EE2H5n7OaS93+lA7uXQPKo96kDt9aH4JnDUNS+xEEsLSmKCC0zFMoWY3RmUdBKSFCYDoHPmNCCCaw6DSTC2v8bnw+E9llHrCkBUHkvJbbz1hC4Tl+khWtDaHrQjGXAxH1CSEWwGzUJMH09ktKHkRPTCdBCEdfCKteItj6EDjDuHUvnBsKkO7EywIvr8+juofMNCnnTVUsCird6Gq99o80PkRFh6VcZgFafyYDDDbv0CWLgS6JWTyyIAAAAASUVORK5CYII=",offlineUnreads:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAzFBMVEVKFEyScpNLFU1cK16Mao1hMmOEX4WObZBWJFiQb5FZKFtNGE97VH1QHFJOGVBsQW5jNWV2TXdsQG1aKVxdLV9WI1dwRXGObI9pPGpTIFVPG1FfL2FSH1RVIld8VX1YJlpOGlBbK12RcZJMFk5iNGSBW4JmOGhgMGF3TniLaIx9Vn5lN2eFYYaNa45eLmB5UXtkN2ZUIVaGYodkNmVtQm9YJ1pRHVOHZImCXIN1THZgMWKDXoR9V392TniMaY1nOmmKZ4tpPWtXJVlvRHFqMc1IAAABCklEQVR4Xr3RxZLEIBSG0f9C3NPuPu7u/v7vNEE6dFdRM7s+i0sFvg0EO9X0/CQFeqfeCWwyh4gmCKgSwGJOlRCuWG5gMSKBrcTch03jvwD9Z9eFNcj4gcRj1EE2H5n7OaS93+lA7uXQPKo96kDt9aH4JnDUNS+xEEsLSmKCC0zFMoWY3RmUdBKSFCYDoHPmNCCCaw6DSTC2v8bnw+E9llHrCkBUHkvJbbz1hC4Tl+khWtDaHrQjGXAxH1CSEWwGzUJMH09ktKHkRPTCdBCEdfCKteItj6EDjDuHUvnBsKkO7EywIvr8+juofMNCnnTVUsCird6Gq99o80PkRFh6VcZgFafyYDDDbv0CWLgS6JWTyyIAAAAASUVORK5CYII=",offlineMentions:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAABSlBMVEVKFEyScpNLFU1iNGSMao17VH2Qb5FZKFtNGE9hMmPGJFKObZCOb4+EX4WRcZJjNWVHE0lcK15sQG2Iaol2TXdIE0pQHFJaKVxVIlfMJVNwRXHMJVRdLV98VX1WI1dsQW5WJFhOGVA3DzlMFk5PG1FfL2GLaIzNJVOBW4J3Tnh9Vn5gMGGIXXu6JlKPcJCaRWdYJ1pbK11TIFV+Yn9zKE/FJFFSH1SCXINTI1WzNFxYJlpWJVhFEke3IlB3T2uTP2CwMlq+K1a2Ik+WP2FHETylNlyNa46MaY1/Y39sT21HIUheMGA5Dzo7ED1JFEtgM2JeLmBZMFpRHVNhM2N5UXunN11UIVZgMWJ5XnptQm9pPGqBWHbIKFSHZImiH0uQcZF1THaMR2dJE0uDXoR9V392TniBZYJnOmmKZ4tpPWtXJVmObI9vRHFOGlBSjo4eAAABPUlEQVR4Xr3QNWPrQBCF0TtiMzNTmJmZmZnh8fv/bVYrGWRbKVLka+c0c9FcZL7TUgvwO78OYh6XHIW/3w4UJCLKYGraDgwTS8HuoB2YID3hsC9lAxDk4DR0bgcwculwQHTf3rWAQqCXF9AA8TH0nGgCMYnMNocg0sCP1YQVeKjWJANe9+jYuAW46kCCg5g4XltPNQC5Ds4wQ0zMzl0tLC4tO50rD2BFM4oBFLkMJDekIF7coa3tnWJxbx9GAg/1BBxE/KwIB/GjSuUEJTV9AUAN9/Dka80yoUPQn7mB6qVqXTDr4CCgs3uEqV6+EcR8OnDhqQFkTZBj4FUwQV6pgTdU873nNJgA8WQ3L/xTgCUT2GcCkejX788B6w9aMy5/DeBrB7LGNnyONNr1j0hSUfIwJqBtWpQfyv/xvX0AvdA4SuBm2+sAAAAASUVORK5CYII=",posts:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAw0lEQVR4AWOAg4IAAYaqqHqG6sj9QPo/jfB5IE5gwAAVEQpAifsgRXTC98F2wgB9LUc4AhzqoCCBC9IfNzAwVEefHzAHVALTG4gxoJiQglEHJKyZ8b9hzxpyMEgv5Q64//71f3LB/XevaRwFo2lgNA2MpoHRNDCaBgjHOZ3SACLOh2IUjDpg1AGV0fsHrlkO7KqBOgcD5oCKCGA/sSFBANhBoHvXDGQnSucUJEBPy8F2ogNwkFRH0ayrBu36N4A7pVAAAK813oG8J1mnAAAAAElFTkSuQmCC"};var x=function(e){_()(t,e);function t(e){var a;c()(this,t);a=m()(this,v()(t).call(this,e));a.renderWithState=a.renderWithState.bind(b()(a));return a}d()(t,[{key:"renderWithState",value:function e(t){var a=Object(N["d"])(t);var r=!!Object(P["getTotalUnreadHighlights"])(t);var i=Object(P["teamHasUnreads"])(t);var s;if(a)s=r?D.onlineMentions:i?D.onlineUnreads:Object(M["a"])()?D.posts:D.online;else{s=D.offline;s=r?D.offlineMentions:i?D.offlineUnreads:D.offline}return n.a.createElement(A,{href:s})}},{key:"render",value:function e(){return n.a.createElement(O["a"],{render:this.renderWithState,store:this.props.store})}}]);return t}(r["Component"]);x.displayName="WorkspaceFavicon";var R=x;var F=R;var L=function e(t,a){if(!t)throw new Error("mountFavicon must be called with a teamId parameter");var r=Object(o["f"])(t);Object(s["a"])(n.a.createElement(i["Provider"],{store:r},n.a.createElement(F,{store:r})),a)};var U=L;var B=a(52);Object(B["a"])("interop.mountFavicon",U)},function(e,t,a){e.exports=a.p+"590de7ad40048f2e77d7ec62b33535c9.png"},function(e,t,a){"use strict";a.r(t);var r={};a.r(r);a.d(r,"fetchHighlightsListForChannel",function(){return _t});a.d(r,"fetchTopContributorsAndRelatedChannels",function(){return yt});var n={};a.r(n);a.d(n,"default",function(){return Fa});a.d(n,"setPersistenceHashes",function(){return Da["a"]});a.d(n,"getPersistenceHashes",function(){return Ra});var i=a(88);var s=a.n(i);var o=a(245);var l=a.n(o);var c=a(42);var u=a(606);var d=a(119);var p=a(18);var m=a(21);var h=a(26);var v=a(35);var f=a(516);var b=a(34);function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function _(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(Object(a),true).forEach(function(t){s()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var y={},O=y.dispatchActionToAllBootedTeams;window.hasSetDesktopFocusedTeamDelegate=false;var k=Object(p["b"])("Create a delegate object for interop with the desktop app",function(e,t){if(!Object(f["a"])())return;if(!c["isDesktop"]){var a=Object(v["a"])({state:t()});a.track("DESKTOP_SCRIPTS_MISSING");return}E(e,t);if(!window.hasSetDesktopFocusedTeamDelegate){var r=C(e,t,{useFocusedTeam:true});Object(c["isContextIsolationEnabled"])()?window.desktop.setGlobalDelegate(r):window.desktop.delegate=r;window.desktopDelegate=r;window.hasSetDesktopFocusedTeamDelegate=true}});k.meta={name:"createDesktopDelegate",key:"desktopCreateDelegateCreateDesktopDelegate",description:"Create a delegate object for interop with the desktop app"};k.propTypes=null;function E(e,t){var a=Object(m["b"])(t());var r=C(e,t);if(Object(c["isContextIsolationEnabled"])())window.desktop.exposeWorkspaceDelegate(a,r);else{window.desktop.delegates||(window.desktop.delegates={});window.desktop.delegates[a]=r}window.desktopDelegates=window.desktopDelegates||{};window.desktopDelegates[a]=r}function C(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.useFocusedTeam;var n=u["a"].accessibilitySupportChanged,i=u["a"].canOpenURLInWindow,s=u["a"].focusNextWorkspace,o=u["a"].focusPreviousWorkspace,c=u["a"].getCurrentUserId,p=u["a"].getCurrentUserName,m=u["a"].getEnterpriseId,v=u["a"].getThemeValues,f=u["a"].getTokenFromBootData,g=u["a"].getUserPref,y=u["a"].getWebappVersionUid,k=u["a"].handleDeepLinkWithArgs,E=u["a"].handleDeepLinkFromDesktop,C=u["a"].maybeTickleMS,S=u["a"].notificationActivated,w=u["a"].notificationClicked,j=u["a"].openDialog,I=u["a"].openFromCmdF,T=u["a"].recentMessagesFromCurrentChannel,A=u["a"].replyToNotification,N=u["a"].setCurrentMemberPresence,P=u["a"].setFocusedWorkspace,M=u["a"].teamSelectionChanged,D=u["a"].updateState,x=l()(u["a"],["accessibilitySupportChanged","canOpenURLInWindow","focusNextWorkspace","focusPreviousWorkspace","getCurrentUserId","getCurrentUserName","getEnterpriseId","getThemeValues","getTokenFromBootData","getUserPref","getWebappVersionUid","handleDeepLinkWithArgs","handleDeepLinkFromDesktop","maybeTickleMS","notificationActivated","notificationClicked","openDialog","openFromCmdF","recentMessagesFromCurrentChannel","replyToNotification","setCurrentMemberPresence","setFocusedWorkspace","teamSelectionChanged","updateState"]);var R=function a(){var n=r&&Object(d["g"])(t());var i=n?function(e){return Object(h["b"])(n,e)}:e;return i};var F=function e(){var a=r&&Object(d["g"])(t());var n=a?function(){return Object(h["d"])(a)}:t;return n};var L=function e(t){return function(){return R()(t.apply(void 0,arguments))}};var U=function e(t){return function(){return Object(h["a"])(t.apply(void 0,arguments))}};var B=function t(a){return function(){if(Object(b["a"])())return Object(h["a"])(O(a.apply(void 0,arguments)));return e(a.apply(void 0,arguments))}};var q=function e(t){return function(){for(var e=arguments.length,a=new Array(e),r=0;r<e;r++)a[r]=arguments[r];return t.apply(void 0,[R()].concat(a))}};var G=function e(t){return function(){for(var e=arguments.length,a=new Array(e),r=0;r<e;r++)a[r]=arguments[r];return t.apply(void 0,[F()()].concat(a))}};var H=function e(t){return function(){for(var e=arguments.length,a=new Array(e),r=0;r<e;r++)a[r]=arguments[r];return t.apply(void 0,[R(),F()()].concat(a))}};return _({accessibilitySupportChanged:L(n),canOpenURLInWindow:G(i),focusNextWorkspace:U(s),focusPreviousWorkspace:U(o),getCurrentUserId:G(c),getCurrentUserName:G(p),getEnterpriseId:G(m),getThemeValues:G(v),getTokenFromBootData:G(f),getUserPref:G(g),getWebappVersionUid:G(y),handleDeepLinkWithArgs:Object(b["a"])()?L(E):k,maybeTickleMS:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return B(C)(_({},t,{reason:"polling"}))},notificationActivated:q(S),notificationActivationHandler:function e(t){var a=t.channelId,r=t.messageTs,n=t.threadTs,i=t.teamId;if(Object(b["a"])())return U(P)({teamId:i}).then(function(){return L(w)({channelId:a,messageTs:r,threadTs:n})});return L(w)({channelId:a,messageTs:r,threadTs:n})},openDialog:H(j),openFromCmdF:L(I),recentMessagesFromCurrentChannel:G(T),replyToNotification:L(A),setCurrentMemberPresence:L(N),setFocusedWorkspace:function e(t){return U(P)({teamId:t})},startSearch:L(I),teamSelectionChanged:q(M),updateState:function e(){Object(b["a"])()&&U(D).apply(void 0,arguments);return B(D).apply(void 0,arguments)}},x)}function S(e){var t=e.canOpenURLInWindow,a=e.getCurrentUserId,r=e.getSelectedInputText,n=e.getTokenFromBootData,i=e.notificationActivated,s=e.replyToNotification,o=e.openFromCmdF,c=l()(e,["canOpenURLInWindow","getCurrentUserId","getSelectedInputText","getTokenFromBootData","notificationActivated","replyToNotification","openFromCmdF"]);return _({canUrlBeOpenedInSSBWindow:t,focusTabAndSwitchToChannel:i,getAPIToken:n,getUserId:a,getSelectedInputTxt:r,searchForTxt:o,sendMsgFromUser:function e(t,a,r,n){return s(t,a,n)}},c)}var w=a(1456);var j=a(1710);var I=a(819);var T=a(580);var A=a(360);var N=a(1890);var P=a(1323);var M=a(784);var D=a(1337);var x=a(1338);var R=a(1312);var F=a(1153);var L=a(2765);var U=a(1437);var B=a(2022);var q=a(1992);var G=a(1954);var H=a(1686);var W=a(2024);var V=a(1816);var K=a(1621);var z=a(1144);var Q=a(2222);var Y=a(1468);var J=a(238);var X=a(1459);var Z=a(1061);var $=a(1);var ee=a.n($);var te=a(0);var ae=a(106);var re=a(33);var ne=a(27);var ie=a(196);var se=a.n(ie);var oe=a(110);var le=a.n(oe);var ce=a(135);var ue=a.n(ce);var de=a(169);var pe=a.n(de);var me=a(138);var he=a.n(me);var ve=a(185);var fe=a.n(ve);var be=a(131);var ge=a(6);var _e=new ge["b"]("unavailable_channel");var ye=function(e){fe()(t,e);function t(){le()(this,t);return pe()(this,he()(t).apply(this,arguments))}ue()(t,[{key:"render",value:function e(){var t=this.props,a=t.teamName,r=l()(t,["teamName"]);var n=_e.t("{teamName} is making some changes to their workspace, so content and conversations shared with them are temporarily unavailable.",{teamName:a});return ee.a.createElement(be["b"],se()({fadeDelay:1e4,type:"error"},r),ee.a.createElement("span",null,n))}}]);return t}($["PureComponent"]);ye.displayName="UnavailableMemberToast";var Oe=ye;var ke=Object(p["b"])("Show unavailable member toast",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.teamId;var n=t();var i=Object(re["k"])(n,r);var s=Object(ne["getTeamDisplayName"])(i);return e(Object(ae["enqueueToast"])({element:ee.a.createElement(Oe,{type:"error",teamName:s})}))});ke.meta={name:"showUnavailableMemberToast",key:"actionsShowUnavailableMemberToastShowUnavailableMemberToast",description:"Show unavailable member toast"};var Ee=ke;var Ce=a(754);var Se=a(1650);var we=a(1161);var je=a(1162);var Ie=a(2690);var Te=a(1984);var Ae=a(221);var Ne=a(2691);var Pe=a(1276);var Me=a(847);var De=a(52);var xe=a(751);var Re=a(834);var Fe=a(452);var Le=a(520);var Ue=a(2217);var Be=a(1855);var qe=a(11);var Ge=a(344);var He=a(1137);var We=a(1853);var Ve=a(758);var Ke=a(1237);var ze=a(1146);var Qe=a(439);var Ye=a(283);var Je=a(906);var Xe=a(394);var Ze=a(1544);var $e=a(1259);var et=a(303);var tt=a(233);var at=a(1913);var rt=a(2218);var nt=a(1424);var it=a(335);var st=a(552);var ot=a(80);var lt=a(811);var ct=a(414);var ut=a(453);var dt=a(1300);var pt=a(1423);var mt=a(1182);var ht=a(2);var vt=a(16);var ft=a(412);var bt=a(183);var gt=a(1428);var _t=Object(p["b"])("Fetch highlights items list for channel",function(e,t,a){return e(Object(gt["c"])(a)).then(function(t){var r=Object(ht["get"])(t,"highlightMsgs.messages",[]);if(Object(ht["isEmpty"])(r))return[];var n=e(Object(ft["a"])({imsgs:r,channelId:a}));e(Object(bt["a"])(n));return n}).catch(function(e){Object(vt["a"])({getState:t}).error("HIGHLIGHTS-STORE",e,{subtype:"error_fetching_channel_highlights"});throw e})});_t.meta={name:"fetchHighlightsListForChannel",key:"highlightsStoreFetchHighlightsListForChannel",description:"Fetch highlights items list for channel"};_t.propTypes={channelId:te["default"].string};var yt=Object(p["b"])("Fetch highlights items list for channel",function(e,t,a){return e(Object(gt["d"])(a)).then(function(e){var t=Object(ht["get"])(e,"resp.top_contributors.users",[]);var a=Object(ht["get"])(e,"resp.similar_channels.channels",[]);return{topContributors:t,similarChannels:a}}).catch(function(e){Object(vt["a"])({getState:t}).error("HIGHLIGHTS-STORE",e,{subtype:"error_fetching_top_contributors"});throw e})});yt.meta={name:"fetchTopContributorsAndRelatedChannels",key:"highlightsStoreFetchTopContributorsAndRelatedChannels",description:"Fetch highlights items list for channel"};yt.propTypes={channelId:te["default"].string};var Ot=a(225);var kt=a(858);var Et=a(1240);var Ct=a(572);var St=a(1626);var wt=a(2219);var jt=a(349);var It=a(873);var Tt=a(39);var At=a(1923);var Nt=a(1178);var Pt=a(855);var Mt=a(1665);var Dt=a(1376);var xt=a(298);var Rt=a(345);var Ft=a(1628);var Lt=a(761);var Ut=a(293);var Bt=a(2220);var qt=a(1038);var Gt=a(292);var Ht=a(227);var Wt=a(441);var Vt=a(70);var Kt=a(895);var zt=a(1366);var Qt=a(287);var Yt=a(491);var Jt=a(448);var Xt=a(822);var Zt=a(1080);var $t=a(2420);var ea=a(285);var ta=a(874);var aa=a(2221);var ra=a(1854);var na=a(170);var ia=a(255);var sa=a(1202);var oa=a(301);var la=a(788);var ca=a(1039);var ua=a(226);var da=a(1386);var pa=a(262);var ma=a(528);var ha=a(542);var va=a(806);var fa=a(1624);var ba=a(1262);var ga=a(1903);var _a=a(304);var ya=a(1856);var Oa=a(343);var ka=a(484);var Ea=a(1533);var Ca=a(1585);var Sa=a(359);var wa=a(1207);var ja=a(371);var Ia=a(302);var Ta=a(148);var Aa=a(496);var Na=a(129);var Pa=a(1315);var Ma=a(2664);var Da=a(1910);var xa=a(15);var Ra=Object(xa["b"])(function(e){return e&&e.persistenceHashes});Ra.meta={name:"getPersistenceHashes",key:"persistenceHashesStorePersistenceHashesSelectorsGetPersistenceHashes"};var Fa=Ma["a"];function La(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function Ua(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?La(Object(a),true).forEach(function(t){s()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):La(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Ba={accessibility:xe,activity:Re,allThreads:Fe,allUnreads:Le,appsBrowser:Ue,appsInChannels:Be,bootData:qe,canInteract:Ge,cfm:He,channelBrowser:We,channelLoading:Ve,channelPrefixes:Ke,channelSidebarFolders:ze,channelSidebar:Qe,clientTheme:Ye,composerUi:Je,consistency:Xe,customEmoji:Ze,deletedMessages:$e,desktop:et,dnd:tt,ekmChanges:at,emailRender:rt,enablePopupsBanner:nt,ephemeralMessages:it,expandables:st,experiments:ot,fileRefresh:lt,fileUpload:ct,filesFlexpane:ut,flannelUrl:dt,globalNav:pt,help:mt,highlights:r,imports:Ot,inbox:kt,inlineFilePreviews:Et,invites:Ct,lastUsedSlashCommand:St,memberDirectoryFlexpane:wt,messageEdit:jt,megaphoneNotificationThunks:It,modal:Tt,noop:At,openPopoversCountUi:Nt,pendingFiles:Pt,pendingOpenChannel:Mt,persistedApiCalls:Dt,pins:xt,presence:Rt,reactionsToast:Ft,recentlySharedFilesPicker:Lt,searchAutocomplete:Ut,searchChannelsUsers:Bt,searchInProductEducation:qt,searchInputBox:Gt,searchResults:Ht,searchSession:Wt,socket:Vt,stars:Kt,tabs:zt,teamCreation:Qt,threadSub:Yt,threadsFlexpane:Jt,toast:ae,typing:Xt,uiSerialization:Zt,unfurls:$t,unreadCounts:ea,userGroupsFlexpane:ta,usersCounts:aa,whatsNew:ra,checkoutFlow:na,pricingPlans:ia,searchUi:sa,unreadsView:{refreshAllUnreads:Z["b"]}};var qa={adminMembers:oa,appPermissions:la,appProfiles:ca,apps:ua,blocks:da,bots:pa,customizeEmoji:ma,developerActions:ha,developerApps:va,environment:fa,idpGroups:ba,lastNetworkSend:ga,memberCounts:_a,membershipOrdered:ya,membership:Oa,messagesMeta:ka,notifications:Ea,paidFeatures:Ca,reactions:Sa,telemetry:wa,userGroupMembership:ja,window:Ia,channelHistory:Ta,persistenceHashes:n};Object(De["a"])("interop.redux",{configureStore:w["a"],defaultReducers:j,getMiddlewares:we["a"],clientMiddlewares:je["a"],createDesktopDelegate:k,actions:{sendMessage:I["d"],prepareAndSendMessage:I["a"],saveMessageEdit:N["a"],removeMessageAndTimestamp:T["a"],openCustomStatusDialog:P["a"],openPrefsModal:M["a"],openChannelNotificationPrefsModal:x["a"],openRequestToJoinWorkspacePermalinkDialog:K["c"],openFileUploadDialog:R["a"],openShareDialog:F["a"],getChannelIdForSharing:U["a"],openRenameFileDialog:B["a"],openCreateGDocDialog:L["a"],openSnippetDialog:q["a"],universalSearchSetVisible:G["a"],clearSearchInput:H["a"],editLastUserMessageText:W["a"],maybeAnimateDeleteMessage:V["a"],loadEmoji:X["loadEmoji"],showUnavailableMemberToast:Ee,setEnterpriseId:Y["a"],changeReactionFromUserAction:D["a"],openChannelBrowser:Ce["a"],startChannelInviteModal:Se["b"]},features:Ba,getDelegateForLegacy:S,middleware:{socketManager:A},models:Ua({},qa,{channelsMeta:{channelNamesToIds:Ie,inviters:Te,mutedChannels:Ae,needsApiMarking:Ne,needsCreatedMessage:Pe,prqMetrics:Me},files:Ua({},Aa,{},Na,{},Pa),emoji:Ua({},qa.emoji,{},z,{},J,{},X,{reducer:Q["a"]})}),selectors:{getCurrentModals:Tt["getCurrentModals"]}})},,function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(85);var s=a.n(i);var o=a(12);var l=a(26);var c=a(52);var u=a(444);var d=a(218);var p=a.n(d);var m=a(88);var h=a.n(m);var v=a(246);var f=a.n(v);var b=a(110);var g=a.n(b);var _=a(135);var y=a.n(_);var O=a(169);var k=a.n(O);var E=a(138);var C=a.n(E);var S=a(185);var w=a.n(S);var j=a(0);var I=a(2);var T=a(31);var A=a(29);var N=a(16);var P=Object(A["a"])("Get payment company info",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.reason;return e(Object(T["a"])({reason:r,method:"enterprise.payments.companyGet"})).catch(function(e){var a="failed to get payment company info";Object(N["a"])({getState:t}).error("payments",a);throw e})});P.meta={name:"getCompany",key:"fetchersPaymentsApiGetCompany",description:"Get payment company info"};P.propTypes={reason:j["default"].string.isRequired};var M=Object(A["a"])("Get payments contact list",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.reason;return e(Object(T["a"])({reason:r,method:"enterprise.payments.contactsList"})).catch(function(e){var a="failed to get payment contact list";Object(N["a"])({getState:t}).error("payments",a);throw e})});M.meta={name:"getContacts",key:"fetchersPaymentsApiGetContacts",description:"Get payments contact list"};M.propTypes={reason:j["default"].string.isRequired};var D=a(1274);var x=a(191);var R=a(295);var F=a(219);var L=a(23);var U=a(13);var B=a.n(U);var q=a(6);var G=a(89);var H=a(3143);var W={loading:false};function V(e){var t=e.loading;if(!t)return null;return n.a.createElement("div",{className:"p-billing_loading"},n.a.createElement("div",{className:"p-billing_loading__overlay"}),n.a.createElement("div",{className:"p-billing_loading__content"},n.a.createElement(G["a"],null)))}V.displayName="LoadingState";V.defaultProps=W;var K=V;var z=K;var Q=a(3145);function Y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function J(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(a),true).forEach(function(t){h()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Y(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var X={orgName:void 0};var Z=new q["b"]("enterprise_dashboard");var $=function(e){w()(t,e);function t(e){var a;g()(this,t);a=k()(this,C()(t).call(this,e));a.state={billingOverviewLoading:true};return a}y()(t,[{key:"componentDidMount",value:function e(){this.getBillingOverview()}},{key:"getBillingOverview",value:function e(){var t=this;var a=this.props,r=a.getTeamPaidFeatures,n=a.getPaymentsCompany,i=a.getPaymentsContacts,s=a.setOrgError;this.setState(function(){return{billingOverviewLoading:true}});var o={reason:"enterprise-billing-dashboard"};Promise.all([r(o),n(o),i(o)]).then(function(e){var a=f()(e,3),r=a[0],n=a[1],i=a[2];t.setState(function(){return{billingOverviewLoading:false,billingCompanyName:n.billing_company_name,billingCompanyAddress:J({},n.address_fields),billingContacts:i.billing_contacts,paidFeatures:r}})}).catch(function(){s({message:Z.t("We couldn\u2019t load your organization\u2019s billing information."),retryAction:function e(){return t.getBillingOverview()},retry_message:Z.t("Try again")});t.setState(function(){return{billingOverviewLoading:false}})})}},{key:"getMemberType",value:function e(t){if(t.is_primary_owner)return Z.t("Primary Org Owner");if(t.is_owner)return Z.t("Org Owner");if(t.is_admin)return Z.t("Org Admin");if(t.profile)return Z.t("Member");return Z.t("Not In Organization")}},{key:"hasELA",value:function e(){var t=this.state.paidFeatures,a=void 0===t?{}:t;return a.is_ela}},{key:"renderAvatar",value:function e(t){var a=t.profile;var r=a&&a.image_48;var i=B()("p-biling_overview__billing_contact_avatar",{"p-biling_overview__billing_contact_avatar--no_profile":!r});if(r)return n.a.createElement("div",{className:i},n.a.createElement(F["a"],{size:36,imageUrl:a.image_48}));return n.a.createElement("div",{className:i},n.a.createElement(L["b"],{type:"user"}))}},{key:"renderBillingCompanyInfo",value:function e(){var t=this.state,a=t.billingOverviewLoading,r=t.billingCompanyName,i=t.billingCompanyAddress;if(a)return null;if(!r&&Object(I["isEmpty"])(i))return n.a.createElement("div",null,Z.t("No company information"));return n.a.createElement("div",null,r&&n.a.createElement("div",{className:"bold"},r),i.street1&&n.a.createElement("div",{className:"sk_foreground_max"},i.street1),i.street2&&n.a.createElement("div",{className:"sk_foreground_max"},i.street2),(i.city||i.state)&&n.a.createElement("div",{className:"sk_foreground_max"},i.city&&i.city,i.city&&i.state&&", ",i.state&&i.state),i.zip&&n.a.createElement("div",{className:"sk_foreground_max"},i.zip),i.country&&n.a.createElement("div",{className:"sk_foreground_max"},i.country),i.vat_id&&n.a.createElement("div",{className:"sk_foreground_max"},"VAT ID: "+i.vat_id),i.abn_id&&n.a.createElement("div",{className:"sk_foreground_max"},"ABN ID: "+i.abn_id))}},{key:"renderBillingContact",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var a=t.real_name;var r=t.profile&&t.profile.email||t.email;return n.a.createElement("div",{key:t.id,className:"p-biling_overview__billing_contact"},this.renderAvatar(t),n.a.createElement("div",null,a&&n.a.createElement("div",{className:"bold"},a),r&&n.a.createElement("div",{className:"sk_foreground_max"},r),n.a.createElement("div",{className:"sk_foreground_max bold"},this.getMemberType(t))))}},{key:"renderBillingContacts",value:function e(){var t=this;var a=this.state,r=a.billingOverviewLoading,i=a.billingContacts,s=void 0===i?[]:i;if(r)return null;if(!s.length)return n.a.createElement("div",{className:"p-biling_overview__billing_contact--none"},Z.t("No billing contacts"));return s.map(function(e){return t.renderBillingContact(e)})}},{key:"renderBillingInfo",value:function e(){return n.a.createElement("div",null,n.a.createElement("div",{className:"p-biling_overview__billing_info_titles"},n.a.createElement("div",{className:"p-biling_overview__billing_info_cell billing_header"},Z.t("Company")),n.a.createElement("div",{className:"p-biling_overview__billing_info_cell billing_header"},Z.t("Billing contacts"))),n.a.createElement("div",{className:"p-biling_overview__billing_info_content"},n.a.createElement("div",{className:"p-biling_overview__billing_info_cell"},this.renderBillingCompanyInfo()),n.a.createElement("div",{className:"p-biling_overview__billing_info_cell"},this.renderBillingContacts())))}},{key:"renderLicensingTable",value:function e(){var t=this.hasELA();return n.a.createElement("div",{className:"p-billing_overview__licensing_table"},n.a.createElement("div",{className:"licensing_table_row licensing_table_header"},n.a.createElement("div",{className:"licensing_table_cell"},Z.t("Annual license")),t&&n.a.createElement("div",{className:"licensing_table_cell"},Z.t("Renewal date"))),t?this.renderLicensingTableRows():this.renderNoELAMessage())}},{key:"renderLicensingTableRows",value:function e(){var t=this.state,a=t.billingOverviewLoading,r=t.paidFeatures;r=void 0===r?{}:r;var i=r.level,s=r.add_ons;if(a)return null;var o=[J({},i,{typeName:Z.t("Enterprise License Agreement")})].concat(p()(s.map(function(e){return J({},e,{typeName:Z.t("Add-on")})})));return o.map(function(e){return n.a.createElement("div",{key:Object(I["uniqueId"])(e.feature_id+"_"),className:"licensing_table_row"},n.a.createElement("div",{className:"licensing_table_cell"},n.a.createElement("div",{className:"bold"},e.name),n.a.createElement("div",{className:"sk_foreground_max"},e.typeName)),n.a.createElement("div",{className:"licensing_table_cell"},Object(R["a"])(e.term.end_ts,"{date}")))})}},{key:"renderNoELAMessage",value:function e(){if(this.state.billingOverviewLoading)return null;var t=this.props.orgName;var a;a=t?Z.rt("No ELA information available for <strong>{orgName}</strong>",{orgName:t}):Z.t("No ELA information available for your organization.");return n.a.createElement("div",{className:"licensing_table_row--no_ela"},a)}},{key:"render",value:function e(){return n.a.createElement("div",{className:"p-billing_overview","data-enterprise-billing-overview":true,"data-name":"enterprise_billing_overview"},n.a.createElement("h1",{className:"p-billing_overview__title"},Z.t("Billing Overview")),n.a.createElement("p",{className:"p-billing_overview__title_description"},Z.t("Below is a summary of your billing information. Upon renewal of your Enterprise License Agreement, we\u2019ll review any increased usage or add-on products to calculate a new rate. For additional invoicing information, please reach out to your Account Executive.")),n.a.createElement("div",{className:"p-billing_overview__container"},n.a.createElement("div",{className:"p-billing_overview__content"},n.a.createElement("div",{className:"p-billing_overview__licensing"},n.a.createElement("h2",{className:"p-billing_overview__subtitle"},Z.t("Licensing")),this.renderLicensingTable()),n.a.createElement("div",{className:"p-billing_overview__billing"},n.a.createElement("h2",{className:"p-billing_overview__subtitle"},Z.t("Billing Information")),this.renderBillingInfo())),n.a.createElement(z,{loading:this.state.billingOverviewLoading})))}}]);return t}(r["PureComponent"]);$.displayName="BillingOverview";$.defaultProps=X;var ee=function e(t){return{getTeamPaidFeatures:function e(a){return t(Object(D["c"])(a))},getPaymentsCompany:function e(a){return t(P(a))},getPaymentsContacts:function e(a){return t(M(a))},setOrgError:function e(a){return t(Object(x["a"])().org.setOrgError(a))}}};var te=Object(o["connect"])(null,ee)($);var ae=te;Object(c["a"])("interop.billingOverview",{render:function e(t,a,r){if(!t)throw new Error("billingOverview render must be called with a teamId parameter");var i=Object(l["f"])(t);s.a.render(n.a.createElement(o["Provider"],{store:i},n.a.createElement(u["a"],null,n.a.createElement(ae,r))),a)},stop:function e(t){s.a.unmountComponentAtNode(t)}})},,,,,function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(85);var s=a.n(i);var o=a(12);var l=a(156);var c=a(26);var u=a(0);var d=a(87);var p=a(422);var m=a(920);var h={id:u["default"].string.isRequired,isEnabled:u["default"].bool.isRequired};var v=function e(t){var a=t.id,r=t.isEnabled;if(!a||!r)return null;var n=Object(m["a"])(a);return n.view(a)};v.propTypes=h;var f=function e(t){var a=Object(d["a"])(t);return{id:a,isEnabled:Object(p["f"])(t,a)}};var b=Object(o["connect"])(f)(v);var g=a(197);var _=function e(t,a){if(!t)throw new Error("mountPageView must be called with a teamId parameter");Object(l["a"])(n.a.createElement(o["Provider"],{store:Object(c["f"])(t)},n.a.createElement(g["a"],null,n.a.createElement(b,null))),a)};var y=function e(t){s.a.unmountComponentAtNode(t)};var O=a(13);var k=a.n(O);var E=a(2713);var C={className:void 0,legacy:false};var S=function e(t){var a=t.id,r=t.className,i=t.legacy;if(!a)return null;var s=Object(m["a"])(a);if(s.header)return s.header({className:r});var o=k()("p-classic_nav__page_header",{"p-classic_nav__page_header--legacy":i},r);return n.a.createElement("div",{className:o},n.a.createElement("div",{className:"p-classic_nav__channel_header__title"},s.label()),n.a.createElement(E["a"],{regionId:"main",flex:true}))};S.displayName="PageHeader";S.defaultProps=C;var w=S;var j=a(3765);var I=a(3767);var T=function e(t){var a=t.id,r=t.isEnabled;if(!a||!r)return null;return n.a.createElement("div",{className:"p-pages__legacy_page_header"},n.a.createElement(w,{id:a,legacy:true}))};T.displayName="LegacyPageHeader";var A=function e(t){var a=Object(d["a"])(t);return{id:a,isEnabled:Object(p["f"])(t,a)}};var N=Object(o["connect"])(A)(T);var P=function e(t,a){if(!t)throw new Error("mountPageHeader must be called with a teamId parameter");Object(l["a"])(n.a.createElement(o["Provider"],{store:Object(c["f"])(t)},n.a.createElement(g["a"],null,n.a.createElement(N,null))),a)};var M=function e(t){s.a.unmountComponentAtNode(t)};var D=a(52);Object(D["a"])("interop.mountPageView",_);Object(D["a"])("interop.unmountPageView",y);Object(D["a"])("interop.mountPageHeader",P);Object(D["a"])("interop.unmountPageHeader",M)},function(e,t,a){"use strict";a.r(t);var r=a(52);var n=a(287);var i=a(859);var s=a(450);var o=a(38);var l=a(87);var c=function e(t){if(false===Object(o["k"])(t,"seen_welcome_2"))return true;var a=Object(i["d"])(t);var r=Object(l["a"])(t);return!!(a.id&&a.id===r)};var u=a(18);var d=a(34);var p=a(214);var m=Object(u["b"])("Starts creator onboarding",function(e){return e(Object(n["fetchTeamCreationWorkflow"])()).then(function(t){var a=t&&"completed"!==t.state;return e(Object(s["a"])(a))})});m.meta={name:"startCreatorOnboarding",key:"onboardingStoreThunksStartCreatorOnboardingStartCreatorOnboarding",description:"Starts creator onboarding"};var h=a(278);var v=a.n(h);var f=a(1293);var b=a(211);var g=a(174);var _=a(1693);var y=a(1878);var O=a(2);var k=a(304);var E=a(124);var C=25;var S=Object(u["b"])("Starts the Joiner Landing Place onboarding experience",function(){var e=v()(regeneratorRuntime.mark(function e(t,a){var r,n,i,o;return regeneratorRuntime.wrap(function e(c){while(1)switch(c.prev=c.next){case 0:r=a();n=Object(l["a"])(r);if(!Object(E["a"])(n)){c.next=8;break}i=t(Object(k["getOrFetchMemberCounts"])({channelId:n}));c.next=6;return i.promise||Promise.resolve(i);case 6:o=c.sent;Object(O["get"])(o,"counts.member_count",C+1)<=C&&t(Object(s["c"])(true));case 8:return c.abrupt("return",t(Object(y["a"])()));case 9:case"end":return c.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}());S.meta={name:"startJoinerLandingPlace",key:"onboardingStoreThunksStartJoinerLandingPlaceStartJoinerLandingPlace",description:"Starts the Joiner Landing Place onboarding experience"};var w=Object(u["b"])("Starts joiner onboarding",function(){var e=v()(regeneratorRuntime.mark(function e(t,a){var r;return regeneratorRuntime.wrap(function e(n){while(1)switch(n.prev=n.next){case 0:r=a();if(!Object(d["a"])()){n.next=7;break}t(Object(s["b"])(true));if(!Object(p["v"])(r)){n.next=6;break}t(Object(y["a"])());return n.abrupt("return",Promise.resolve());case 6:return n.abrupt("return",t(S()));case 7:if(!Object(p["v"])(r)){n.next=14;break}t(Object(s["b"])(true));t(Object(y["a"])());if(!(Object(p["w"])(r)&&!Object(_["a"])(r))){n.next=13;break}t(Object(g["e"])());return n.abrupt("return",t(Object(b["a"])({id:"Pwelcome",fromHistory:false,replaceHistoryState:false})));case 13:return n.abrupt("return",Promise.resolve());case 14:return n.abrupt("return",Object(f["f"])());case 15:case"end":return n.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}());w.meta={name:"startJoinerOnboarding",key:"onboardingStoreThunksStartJoinerOnboardingStartJoinerOnboarding",description:"Starts joiner onboarding"};var j=Object(u["b"])("Start user onboarding if necessary",function(e,t){if(Object(d["a"])())return;var a=t();var r=Object(i["g"])(a);var n=Object(o["k"])(a,"onboarding_complete");if(r||n)return;var s=Object(o["k"])(a,"tractor_enabled");var l=!Object(o["k"])(a,"seen_welcome_2")||Object(p["v"])(a);s?e(m()):l&&e(w())});j.meta={name:"maybeStartOnboarding",key:"onboardingStoreThunksMaybeStartOnboardingMaybeStartOnboarding",description:"Start user onboarding if necessary"};var I=a(2689);Object(r["a"])("interop.onboarding",{fetchTeamCreationWorkflow:function e(){return TS.redux.dispatch(Object(n["fetchTeamCreationWorkflow"])())},showSecondAccountSetupBanner:function e(){return TS.redux.dispatch(Object(n["showSecondAccountSetupBanner"])())},isInOnboarding:function e(){return Object(i["g"])(TS.redux.getState())},isInCreatorOnboarding:function e(){return Object(i["e"])(TS.redux.getState())},isInJoinerOnboarding:function e(){return Object(i["f"])(TS.redux.getState())},setNoLongerInOnboarding:function e(){TS.redux.dispatch(Object(s["d"])())},shouldShowFirstWelcome:function e(){return c(TS.redux.getState())},setInJoinerOnboarding:function e(t){TS.redux.dispatch(Object(s["b"])(!!t))},getWelcomeModel:function e(){return Object(i["d"])(TS.redux.getState())},setWelcomeModel:function e(t){TS.redux.dispatch(Object(s["h"])(t))},maybeStartOnboarding:function e(){TS.redux.dispatch(j())},cancelOnboarding:function e(){TS.redux.dispatch(Object(I["a"])())}})},,,,,function(e,t,a){},,function(e,t,a){"use strict";a.r(t);var r=a(52);var n=a(88);var i=a.n(n);function s(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?s(Object(a),true).forEach(function(t){i()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function l(e,t){return e.map(function(e){return o({},e,{items:e.items.map(function(e){return{label:t[e],value:e}})})})}var c=a(2);function u(e){return Object(c["flatten"])(e.map(function(e){return e.items}))}function d(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function p(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?d(Object(a),true).forEach(function(t){i()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function m(e,t){return e.map(function(e){return p({},e,{items:Object(c["difference"])(e.items,t)})}).filter(function(e){var t=e.items;return t&&t.length})}function h(e,t,a){var r=Object(c["intersection"])(u(e),t);return r.map(function(e){return{label:a[e]}})}var v=a(27);var f="interop.enterpriseAnalytics";Object(r["a"])(f+".addLabelAndValueToGroupItems",l);Object(r["a"])(f+".getItemKeysFromGroups",u);Object(r["a"])(f+".filterGroups",m);Object(r["a"])(f+".formatDisabledOptions",h);Object(r["a"])(f+".teams.isOnPlusPlanOrHigher",v["isOnPlusPlanOrHigher"]);Object(r["a"])(f+".teams.isEnterpriseTeam",v["isEnterpriseTeam"])},,function(e,t,a){},,,,function(e,t,a){},function(e,t,a){},,,,,,,function(e,t,a){"use strict";a.r(t);var r=a(52);var n=a(373);var i=a(182);var s=a(1565);function o(){return Object(s["a"])({channelId:null,startTs:null})}var l=a(0);var c=a(18);var u=a(87);var d=Object(c["b"])("Switch to a channel if it is not currently active",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelId;var n=Object(u["a"])(t());n!==r&&e(Object(s["a"])({channelId:r}))});d.meta={name:"switchToChannelIfNotActive",key:"messagePaneStoreSwitchToChannelIfNotActiveSwitchToChannelIfNotActive",description:"Switch to a channel if it is not currently active"};d.propTypes={channelId:l["default"].string};var p=d;var m=a(580);var h=a(484);var v=a(302);var f=Object(c["b"])("Conditionally animate a message deletion",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channel,n=a.ts,i=a.fromEvtLog,s=void 0!==i&&i;var o=t();Object(v["isWindowFocused"])(o)&&Object(u["a"])(o)===r?e(Object(h["animateDeleteMessage"])({channelId:r,ts:n})):e(Object(m["a"])({channelId:r,ts:n,fromEvtLog:s}))});f.meta={name:"deprecatedMaybeAnimateDeleteMessage",key:"messagePaneStoreDeprecatedMaybeAnimateDeleteMessageDeprecatedMaybeAnimateDeleteMessage",description:"Conditionally animate a message deletion"};f.propTypes={channel:l["default"].string,ts:l["default"].string,fromEvtLog:l["default"].bool};var b=f;var g=a(21);var _=a(11);function y(e,t,a){if(!e)return null;if(!t)return null;if(!a)return null;var r=Date.now();return e+"-"+t+"-"+a+"-"+r+"000"}var O=Object(c["b"])("Update the active channel session id",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelId;var n=t();var s=Object(g["b"])(n);var o=Object(_["getCurrentUserId"])(n);var l=y(s,o,r);e(Object(i["f"])(l))});O.meta={name:"updateActiveChannelSessionId",key:"messagePaneStoreUpdateActiveChannelSessionIdUpdateActiveChannelSessionId",description:"Update the active channel session id"};O.propTypes={channelId:l["default"].string};var k=O;function E(){return Object(n["b"])(TS.redux.getState())}function C(){return Object(n["m"])(TS.redux.getState())}function S(){return TS.redux.dispatch(o())}function w(){return TS.redux.dispatch(i["g"].apply(void 0,arguments))}function j(){return TS.redux.dispatch(i["c"].apply(void 0,arguments))}function I(){return TS.redux.dispatch(i["o"].apply(void 0,arguments))}function T(){return TS.redux.dispatch(p.apply(void 0,arguments))}function A(){return Object(n["j"])(TS.redux.getState())}function N(){return TS.redux.dispatch(i["k"].apply(void 0,arguments))}function P(){return TS.redux.dispatch(i["l"].apply(void 0,arguments))}function M(){return TS.redux.dispatch(i["n"].apply(void 0,arguments))}function D(){return TS.redux.dispatch(b.apply(void 0,arguments))}function x(){return TS.redux.dispatch(k.apply(void 0,arguments))}function R(){return Object(n["e"])(TS.redux.getState())}Object(r["a"])("interop.messagePane",{getChannelSessionId:E,getPrevChannelId:C,hideMessagePane:S,setAppSpaceOpen:w,jumpToTimestamp:j,setOverlayVisible:I,switchToChannelIfNotActive:T,getMessagePaneStartTs:A,setGhostLastRead:N,setHighlightsBackButtonVisible:P,setNewxpOnboardingStep:M,deprecatedMaybeAnimateDeleteMessage:D,updateActiveChannelSessionId:x,getFocusRequestedTs:R})},function(e,t,a){},,,function(e,t,a){e.exports=a.p+"85830c1c35539c4cf79e4926906fb263.png"},function(e,t,a){"use strict";var r=a(110);var n=a.n(r);var i=a(135);var s=a.n(i);var o=a(169);var l=a.n(o);var c=a(138);var u=a.n(c);var d=a(147);var p=a.n(d);var m=a(185);var h=a.n(m);var v=a(1);var f=a.n(v);var b=a(12);var g=a(13);var _=a.n(g);var y=a(30);var O=a(0);var k=a(2);var E=a(6);var C=a(775);var S=a(560);var w=a(4722);var j=a(80);var I=a(1985);var T=a(20);var A=a(9);var N=a(17);var P=a(220);var M=a(145);var D=a(219);var x=a(166);var R=a(99);var F=a(1145);var L=new E["b"]("admin");var U={INVITE_EMAIL:"invite_email",INVITE_INFO:"invite_info"};var B={channels:[],requesterNames:[],inviterName:void 0,approverName:void 0,isModernAdminInvitesTreatment:false};var q=function(e){h()(t,e);function t(e){var a;n()(this,t);a=l()(this,u()(t).call(this,e));a.rollupRequestsCutoff=3;return a}s()(t,[{key:"maybeRenderGuestTimeLimit",value:function e(){var t=this.props.invite;if(t.expiration_ts){var a=Object(S["a"])(t.expiration_ts,{omitTime:true,dateFormat:"MMM D, YYYY"});return f.a.createElement("div",{className:"p-admin_invites_row__text"},L.t("Deactivate on {date}",{date:a}))}return null}},{key:"maybeRenderRequesterMessage",value:function e(){var t=this.props.invite;if(t.requester_message){var a=f.a.createElement(M["a"],{text:t.requester_message,emojiSize:R["a"].SMALL,noJumbomoji:true,noHighlights:true});return f.a.createElement("div",{className:"p-admin_invites_row__text"},L.rt('"{message}"',{message:a}))}return null}},{key:"renderInviters",value:function e(){var t=this.props,a=t.invite,r=t.requesterNames;var n;r.length<this.rollupRequestsCutoff&&(n=Object(E["i"])(r.map(function(e,t){var r=a.inviters[t];return f.a.createElement(P["a"],{href:"/team/"+r,target:"_blank",rel:"noopener noreferrer"},e)}),{react:true,noEscape:true}));var i=a.date_create&&Object(S["a"])(a.date_create,{omitTime:true,dateFormat:"MMM D, YYYY"});if(r.length<this.rollupRequestsCutoff)return L.rt("Requested by {users} on {date}",{users:n,date:i});return L.rt("Requested by {user} and {numOtherRequesters, plural, =1 {# other} other {# others}} on {date}",{user:f.a.createElement(P["a"],{href:"/team/"+a.inviters[0],target:"_blank",rel:"noopener noreferrer"},r[0]),numOtherRequesters:r.length-1,date:i,fallbackHash:"38844e8506c2847e8978bd6feefe4a96c18fc874"})}},{key:"renderRequesters",value:function e(){var t=this.props,a=t.requesterNames,r=t.invite;if(!a)return null;var n;a.length<this.rollupRequestsCutoff&&(n=Object(E["i"])(a.map(function(e,t){var a=r.inviters[t];return f.a.createElement(P["a"],{href:"/team/"+a,target:"_blank",rel:"noopener noreferrer",className:"p-admin_invites_row__requester"},e)}),{react:true,noEscape:true}));if(a.length<this.rollupRequestsCutoff)return L.rt("Requested by {users}",{users:n});return L.rt("Requested by {user} and {numOtherRequesters, plural, =1 {# other} other {# others}}",{user:f.a.createElement(P["a"],{href:"/team/"+r.inviters[0],target:"_blank",rel:"noopener noreferrer"},a[0]),numOtherRequesters:a.length-1})}},{key:"renderModernAdminInviters",value:function e(){var t=this.props,a=t.invite,r=t.inviterName,n=t.approverName;if(!r)return null;if("DOMAIN_APPROVED"===a.invite_request_status)return L.rt("Invited by {inviterName} via approved domain",{inviterName:f.a.createElement(P["a"],{href:"/team/"+a.inviter.id,target:"_blank",rel:"noopener noreferrer"},r)});if(n)return L.rt("Invited by {inviterName} and approved by {approverName}",{inviterName:f.a.createElement(P["a"],{href:"/team/"+a.inviter.id,target:"_blank",rel:"noopener noreferrer"},r),approverName:f.a.createElement(P["a"],{href:"/team/"+a.approver.id,target:"_blank",rel:"noopener noreferrer"},n)});return L.rt("Invited by {inviterName}",{inviterName:f.a.createElement(P["a"],{href:"/team/"+a.inviter.id,target:"_blank",rel:"noopener noreferrer"},r)})}},{key:"renderMemberTypeAndChannels",value:function e(){var t=this.props,a=t.invite,r=t.channels;if("restricted"!==a.invite_type&&"ultra_restricted"!==a.invite_type)return L.t("Full Member");if(!r||!r.length)return null;var n=Object(k["filter"])(r,function(e){return Object(A["isUnknownOrNonExistent"])(e)});if(n.length){if("ultra_restricted"===a.invite_type)return L.rt("Single-Channel Guest: 1 private channel");var i=Object(k["filter"])(r,function(e){return!Object(A["isUnknownOrNonExistent"])(e)});var s=Object(E["i"])(i.map(function(e){return f.a.createElement(x["a"],{channel:e,inline:true})}),{react:true,noConj:true});if(0===i.length)return L.rt("Multi-Channel Guest: {hiddenPrivateChannelsCount, plural, =1 {# private channel} other {# private channels}}",{hiddenPrivateChannelsCount:n.length});if(1===i.length)return L.rt("Multi-Channel Guest: {knownChannel} and {hiddenPrivateChannelsCount, plural, =1 {# private channel} other {# private channels}}",{knownChannel:s,hiddenPrivateChannelsCount:n.length});return L.rt("Multi-Channel Guest: {knownChannels}, and {hiddenPrivateChannelsCount, plural, =1 {# private channel} other {# private channels}}",{knownChannels:s,hiddenPrivateChannelsCount:n.length})}var o=Object(E["i"])(r.map(function(e){return f.a.createElement(x["a"],{channel:e,inline:true})},{react:true}));if("restricted"===a.invite_type)return L.rt("Multi-Channel Guest: {channels}",{channels:o});if("ultra_restricted"===a.invite_type)return L.rt("Single-Channel Guest: {channel}",{channel:o});return null}},{key:"renderChannels",value:function e(){var t=this.props,a=t.channels,r=t.invite;if(!a||!a.length||"full_member"===r.invite_type)return null;var n=Object(k["filter"])(a,function(e){return Object(A["isUnknownOrNonExistent"])(e)});if(n.length){if("ultra_restricted"===r.invite_type)return L.rt("1 private channel");var i=Object(k["filter"])(a,function(e){return!Object(A["isUnknownOrNonExistent"])(e)});var s=Object(E["i"])(i.map(function(e){return f.a.createElement(x["a"],{channel:e,inline:true})}),{react:true,noConj:true});if(0===i.length)return L.rt("{hiddenPrivateChannelsCount, plural, =1 {# private channel} other {# private channels}}",{hiddenPrivateChannelsCount:n.length});if(1===i.length)return L.rt("{knownChannel} and {hiddenPrivateChannelsCount, plural, =1 {# private channel} other {# private channels}}",{knownChannel:s,hiddenPrivateChannelsCount:n.length});return L.rt("{knownChannels}, and {hiddenPrivateChannelsCount, plural, =1 {# private channel} other {# private channels}}",{knownChannels:s,hiddenPrivateChannelsCount:n.length})}return Object(E["i"])(a.map(function(e){return f.a.createElement(x["a"],{channel:e,inline:true})},{react:true}))}},{key:"renderMemberType",value:function e(){var t=this.props,a=t.invite,r=t.inviteType;var n=Object(w["b"])(r)?a.invite_type:a.invite_prefs&&a.invite_prefs.type||"full_member";var i;i="ultra_restricted"===n?L.t("Single-Channel Guest"):"restricted"===n?L.t("Multi-Channel Guest"):L.t("Member");return f.a.createElement("div",{className:"p-admin_invites_row__member_type p-admin_invites_row__member_type--"+n},i)}},{key:"renderName",value:function e(){var t=this.props,a=t.invite,r=t.inviteType;if(Object(w["b"])(r))return a.real_name?a.real_name+" \u2013 ":"";return a.invite_prefs&&a.invite_prefs.real_name?a.invite_prefs.real_name+" \u2013 ":""}},{key:"renderEmail",value:function e(){var t=this.props.invite;return f.a.createElement("div",{className:"p-admin_invites_row_email","data-qa":U.INVITE_EMAIL},f.a.createElement("strong",{className:"sk_primary_foreground"},t.email),t.bouncing?" \u2013 "+L.t("email address bounced",{fallbackHash:"e6fa4427b0d81a6127de35a859d2b755b7b45f4b",fallbackHashNs:"invite"}):"")}},{key:"renderModernAdminInviteInfo",value:function e(){var t;var a=this.props,r=a.invite,n=a.inviteType;var i=Object(w["a"])(n);var s=_()("p-admin_invites_row__text","display_flex",{"p-admin_invites_row__info_new":!i,"p-admin_invites_row__info_new--accepted":i});return f.a.createElement("div",{className:s},i&&(null===(t=r.user)||void 0===t?void 0:t.id)?f.a.createElement(D["b"],{size:36,userId:r.user.id,className:"p-admin_invites_row__avatar",showBadge:false,isInteractive:false}):null,f.a.createElement("div",{className:"p-admin_invites_row__info_text"},this.renderEmail(),f.a.createElement("div",{"data-qa":U.INVITE_INFO},this.renderName(),Object(w["b"])(n)?this.renderRequesters():this.renderModernAdminInviters()),this.renderMemberType(),this.maybeRenderRequesterMessage(),f.a.createElement("div",{className:"p-admin_invites_row__channels"},this.renderChannels())))}},{key:"renderInviteInfo",value:function e(){var t=this.props.invite;var a=f.a.createElement("div",{className:"p-admin_invites_row__text p-admin_invites_row__email"},f.a.createElement("span",{className:"bold"},t.email));t.real_name&&(a=f.a.createElement("div",{className:"p-admin_invites_row__text p-admin_invites_row__email"},f.a.createElement("span",{className:"bold"},t.real_name)," ",f.a.createElement("span",null,"(",t.email,")")));return f.a.createElement("div",{className:"p-admin_invites_row__info"},a,f.a.createElement("div",{className:"p-admin_invites_row__text"},this.renderMemberTypeAndChannels()),this.maybeRenderGuestTimeLimit(),f.a.createElement("div",{className:"p-admin_invites_row__text"},this.renderInviters()),this.maybeRenderRequesterMessage())}},{key:"render",value:function e(){return this.props.isModernAdminInvitesTreatment?this.renderModernAdminInviteInfo():this.renderInviteInfo()}}]);return t}(v["Component"]);q.displayName="AdminInviteInfo";q.defaultProps=B;var G=function e(t,a){var r=a.invite,n=a.inviteType;var i=r.channels;"restricted"!==r.invite_type&&"ultra_restricted"!==r.invite_type||(i=r.channels.map(function(e){return Object(T["e"])(t,e)}));var s;var o;var l;if(Object(w["b"])(n))s=r.inviters?r.inviters.map(function(e){return Object(N["getPrefCompliantMemberNameById"])(t,e)}):null;else{o=Object(N["getPrefCompliantMemberNameById"])(t,r.inviter.id);l=r.approver?Object(N["getPrefCompliantMemberNameById"])(t,r.approver.id):null}return{isModernAdminInvitesTreatment:"treatment"===Object(j["getGroupForUser"])(t,"modernize_admin_invites"),requesterNames:s,inviterName:o,approverName:l,channels:i}};var H=Object(b["connect"])(G)(q);var W=a(35);var V=a(14);var K=a(809);var z=a(25);var Q=a(33);var Y=a(106);var J=a(27);var X=a(1353);var Z=a(23);var $=a(24);var ee=a(131);var te={APPROVE_BUTTON:"approve-button",DENY_BUTTON:"deny-button",RESEND_BUTTON:"resend-button",REVOKE_BUTTON:"revoke-button"};var ae={APPROVE_BUTTON:"approve_request",DENY_BUTTON:"deny_request",RESEND_BUTTON:"resend_invite",RESEND_ERROR:"resend_error",REVOKE_BUTTON:"revoke_invite",REVOKE_ERROR:"revoke_error"};var re={removeRow:k["noop"],shouldHideActionButtonsForGuests:true,isModernAdminInvitesTreatment:false};var ne=new E["b"]("admin");var ie=function(e){h()(t,e);function t(e){var a;n()(this,t);a=l()(this,u()(t).call(this,e));Object(y["a"])(p()(a),["onClickApprove","onClickDeny","onClickResend","onClickRevoke"]);a.state={isApproving:false,isApproved:false,isDenying:false,isDenied:false,isResending:false,isResent:false,isRevoking:false,isRevoked:false};return a}s()(t,[{key:"onClickApprove",value:function e(){var t=this;var a=this.props,r=a.invite,n=a.approveRequest,i=a.removeRow;if(this.isActionInProgress())return;this.clogButtonClick({step:V["UiStep"].ADMIN_INVITE_REQUESTS,elementName:"approve_request"});this.setState(function(){return{isApproving:true}});n(r).then(function(){t.setState(function(){return{isApproving:false,isApproved:true}});i()})}},{key:"onClickDeny",value:function e(){var t=this;var a=this.props,r=a.invite,n=a.denyRequest,i=a.removeRow;if(this.isActionInProgress())return;this.clogButtonClick({step:V["UiStep"].ADMIN_INVITE_REQUESTS,elementName:ae.DENY_BUTTON});this.setState(function(){return{isDenying:true}});n(r).then(function(){t.setState(function(){return{isDenying:false,isDenied:true}});i()})}},{key:"onClickResend",value:function e(){var t=this;var a=this.props.invite;if(this.isActionInProgress())return;this.clogButtonClick({step:V["UiStep"].ADMIN_PENDING_INVITES,elementName:ae.RESEND_BUTTON});this.setState(function(){return{isResending:true}});this.props.submitResendInvite({inviteId:a.id}).then(function(){t.setState(function(){return{isResending:false,isResent:true}})}).catch(function(e){t.showToast(t.getResendError(e.data.error));t.setState(function(){return{isResending:false,isResent:false}});t.clogToast({step:V["UiStep"].ADMIN_PENDING_INVITES,elementName:ae.RESEND_ERROR})})}},{key:"onClickRevoke",value:function e(){var t=this;var a=this.props,r=a.invite,n=a.removeRow;if(this.isActionInProgress())return;this.clogButtonClick({step:V["UiStep"].ADMIN_PENDING_INVITES,elementName:ae.REVOKE_BUTTON});this.setState(function(){return{isRevoking:true}});this.props.submitRevokeInvite({inviteId:r.id}).then(function(){t.setState(function(){return{isRevoking:false,isRevoked:true}});n()}).catch(function(e){t.showToast(t.getRevokeError(e.data.error));t.setState(function(){return{isRevoking:false,isRevoked:false}});t.clogToast({step:V["UiStep"].ADMIN_PENDING_INVITES,elementName:ae.REVOKE_ERROR})})}},{key:"getResendError",value:function e(t){switch(t){case F["a"].RESEND_SENT_RECENTLY:return ne.t("Invitation sent recently.");case F["a"].RESEND_NOT_FOUND:return ne.t("Couldn\u2019t find invitation.");default:return ne.t("Invitation couldn\u2019t send.")}}},{key:"getRevokeError",value:function e(t){switch(t){case F["a"].REVOKE_NOT_FOUND:return ne.t("Couldn\u2019t find invitation.");default:return ne.t("Invitation couldn\u2019t be revoked.")}}},{key:"clogButtonClick",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.step,r=t.elementName;this.props.clogger.track(V["EventId"].ADMIN_INVITES,{contexts:{ui_context:{step:a,action:V["UiAction"].CLICK,ui_properties:{element_type:V["ElementType"].BUTTON,element_name:r}}}})}},{key:"clogToast",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.step,r=t.elementName;this.props.clogger.track(V["EventId"].ADMIN_INVITES,{contexts:{ui_context:{step:a,action:V["UiAction"].IMPRESSION,ui_properties:{element_type:V["ElementType"].TOAST,element_name:r}}}})}},{key:"isActionInProgress",value:function e(){var t=this.state,a=t.isApproving,r=t.isDenying,n=t.isResending,i=t.isRevoking;return a||r||n||i}},{key:"showToast",value:function e(t){return this.props.enqueueToast({element:f.a.createElement(ee["b"],{position:"bottom-right",toastClasses:"p-admin_invites_toast"},f.a.createElement(Z["b"],{type:"warning",inline:true}),t)})}},{key:"renderRequestActions",value:function e(){var t=this.props,a=t.invite,r=t.shouldHideActionButtonsForGuests,n=t.isModernAdminInvitesTreatment;if(n&&("restricted"===a.invite_type||"ultra_restricted"===a.invite_type)&&r)return f.a.createElement("div",{className:"p-admin_invites_row__actions p-admin_invites_row__actions_new"});if(("restricted"===a.invite_type||"ultra_restricted"===a.invite_type)&&r)return null;var i=this.state,s=i.isApproving,o=i.isDenying,l=i.isApproved,c=i.isDenied;var u=_()("p-admin_invites_row__actions",{"p-admin_invites_row__actions_new":n});if(s||l)return f.a.createElement("div",{className:u},f.a.createElement($["b"],{type:"outline",className:"p-admin_invites_row__button",size:"small",loading:s&&!l,disabled:true},l?f.a.createElement(Z["b"],{type:"check-small",inline:true}):null,l?ne.t("Invitation sent"):ne.t("Sending")));if(o||c)return f.a.createElement("div",{className:u},f.a.createElement($["b"],{type:"outline",className:"p-admin_invites_row__button",size:"small",loading:o&&!c,disabled:true},c?ne.t("Denied"):ne.t("Denying")));return f.a.createElement("div",{className:u,id:"invite-requests-actions"},f.a.createElement($["b"],{type:"outline",className:"p-admin_invites_row__button",onClick:this.onClickApprove,size:"small","data-qa":te.APPROVE_BUTTON},ne.t("Send Invitation")),f.a.createElement($["b"],{type:"outline",className:"p-admin_invites_row__button",onClick:this.onClickDeny,size:"small","data-qa":te.DENY_BUTTON},ne.t("Deny")))}},{key:"renderPendingActions",value:function e(){var t=this.props.isModernAdminInvitesTreatment;var a=this.state,r=a.isResending,n=a.isResent,i=a.isRevoking,s=a.isRevoked;var o=_()("p-admin_invites_row__actions",{"p-admin_invites_row__actions_new":t});if(r||n)return f.a.createElement("div",{className:o},f.a.createElement($["b"],{type:"outline",className:"p-admin_invites_row__button",size:"small",loading:r&&!n,disabled:true},n?f.a.createElement(Z["b"],{type:"check-small",inline:true}):null,n?ne.t("Invitation resent"):ne.t("Sending")),f.a.createElement($["b"],{type:"outline",className:"p-admin_invites_row__button",onClick:this.onClickRevoke,size:"small"},ne.t("Revoke")));if(i||s)return f.a.createElement("div",{className:o},f.a.createElement($["b"],{type:"outline",className:"p-admin_invites_row__button",size:"small",loading:i&&!s,disabled:true},s?f.a.createElement(Z["b"],{type:"times-small",inline:true}):null,s?ne.t("Invitation revoked"):ne.t("Revoking")));return f.a.createElement("div",{className:o,id:"invite-requests-actions"},f.a.createElement($["b"],{type:"outline",className:"p-admin_invites_row__button",onClick:this.onClickResend,size:"small","data-qa":te.RESEND_BUTTON},ne.t("Resend Invitation")),f.a.createElement($["b"],{type:"outline",className:"p-admin_invites_row__button",onClick:this.onClickRevoke,size:"small","data-qa":te.REVOKE_BUTTON},ne.t("Revoke")))}},{key:"render",value:function e(){var t=this.props.inviteType;if(Object(w["a"])(t))return f.a.createElement("div",{className:"p-admin_invites_row__actions_new"});return Object(w["b"])(t)?this.renderRequestActions():this.renderPendingActions()}}]);return t}(v["Component"]);ie.displayName="AdminInviteActions";ie.defaultProps=re;function se(e){var t=Object(z["b"])(e);var a=Object(Q["d"])(e);return{shouldHideActionButtonsForGuests:Object(J["isEnterpriseTeam"])(a)&&!Object(X["a"])(a,t),clogger:Object(W["a"])({state:e}),isModernAdminInvitesTreatment:"treatment"===Object(j["getGroupForUser"])(e,"modernize_admin_invites")}}var oe={submitRevokeInvite:K["n"],submitResendInvite:K["m"],enqueueToast:Y["enqueueToast"]};var le=Object(b["connect"])(se,oe)(ie);var ce=a(3329);var ue=new E["b"]("admin");var de={isModernAdminInvitesTreatment:false,removeRow:k["noop"]};var pe=1e3;var me=200;var he=function(e){h()(t,e);function t(e){var a;n()(this,t);a=l()(this,u()(t).call(this,e));Object(y["a"])(p()(a),["animateRemoveRow","onDeleteAnimationTick","onDeleteAnimationEnd","setRef","startDeleteAnimation"]);a.rowRef=null;a.deleteAnimation=null;a.state={height:null,opacity:1};return a}s()(t,[{key:"componentWillUnmount",value:function e(){if(this.deleteAnimation){this.deleteAnimation.cancel();this.onDeleteAnimationEnd()}}},{key:"onDeleteAnimationEnd",value:function e(){var t=this.props,a=t.invite,r=t.inviteType,n=t.isModernAdminInvitesTreatment;n?this.props.removeInvite({inviteType:r,id:a.id}):this.props.removeRow(a);this.deleteAnimation=null}},{key:"onDeleteAnimationTick",value:function e(t){var a=t.value,r=t.nextTick;if(!this.rowRef)return;this.setState(function(){return{height:a,opacity:.01*a}},r)}},{key:"setRef",value:function e(t){this.rowRef=t}},{key:"animateRemoveRow",value:function e(){setTimeout(this.startDeleteAnimation,pe)}},{key:"startDeleteAnimation",value:function e(){if(!this.rowRef)return;var t=this.rowRef.clientHeight;this.deleteAnimation=Object(C["a"])({fromValue:t,toValue:0,duration:me,easing:"easeInOutQuad",onTick:this.onDeleteAnimationTick,onComplete:this.onDeleteAnimationEnd})}},{key:"renderDate",value:function e(){var t=this.props,a=t.invite,r=t.inviteType,n=t.isModernAdminInvitesTreatment;if(!n)return null;var i=a.date_create&&Object(S["a"])(a.date_create,{omitTime:true,dateFormat:"MMM D, YYYY"});var s;s=Object(w["b"])(r)?ue.t("Requested {date}",{date:i}):Object(w["c"])(r)?ue.t("Sent {date}",{date:i}):ue.t("Joined {date}",{date:i});var o=_()("p-admin_invites_row_item","p-admin_invites_row__date",{padding_0:Object(w["a"])(r)});return f.a.createElement("div",{className:o},s)}},{key:"render",value:function e(){var t=this.props,a=t.invite,r=t.inviteType,n=t.approveRequest,i=t.denyRequest,s=t.isModernAdminInvitesTreatment;var o=this.state,l=o.height,c=o.opacity;var u={};null!==l&&(u={height:l,opacity:c});var d=_()("p-admin_invites_row",{"p-admin_invites_row_new":s});return f.a.createElement("div",{className:d,ref:this.setRef,style:u},f.a.createElement(H,{invite:a,inviteType:r}),this.renderDate(),f.a.createElement(le,{invite:a,inviteType:r,removeRow:this.animateRemoveRow,approveRequest:n,denyRequest:i}))}}]);return t}(v["PureComponent"]);he.displayName="AdminInvitesRow";he.defaultProps=de;var ve=function e(t){return{isModernAdminInvitesTreatment:"treatment"===Object(j["getGroupForUser"])(t,"modernize_admin_invites")}};var fe=function e(t){return{removeInvite:function e(a){return t(Object(I["j"])(a))}}};var be=t["a"]=Object(b["connect"])(ve,fe)(he)},,function(e,t,a){"use strict";a.r(t);var r=a(88);var n=a.n(r);var i=a(2);var s=a(31);var o=a(52);var l=a(2754);var c=["activity.mentions","channels.history","channels.insights","channels.listShared","channels.replies","chat.command","conversations.history","files.info","files.list","groups.history","groups.listShared","groups.replies","highlights.briefing","im.history","im.replies","mpim.history","pins.list","search.files","search.messages","stars.list","subscriptions.thread.getView","subteams.list","subteams.users.list","unread.history"];function u(e){return c.includes(e)}var d=c;var p=["activity.mentions","channels.history","conversations.history","groups.history","im.history","mpim.history","pins.list","unread.history"];function m(e){return p.includes(e)}var h=p;var v=["activity.mentions","conversations.history","conversations.info","unread.history","pins.list"];function f(e){return v.includes(e)}var b=v;function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function _(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(Object(a),true).forEach(function(t){n()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function y(e){var t=e.data,a=e.method,r=e.args;var n=_({},t,{args:null});var i=false===a.startsWith("bots.")&&TS.bots.legacyEnsureBotsInDataArePresent(n,a,r&&r.channel);var s=false===a.startsWith("users.")&&false===m(a)&&TS.members.legacyEnsureMembersInDataArePresent(n,a);var o=false===a.startsWith("teams.")&&TS.teams.ensureTeamsInDataArePresent(n,"api/ensureModelForLegacy for method: "+a);var l=false===f(a)&&TS.shared.legacyEnsureModelObsInDataArePresent(n,a);return TS.ensureFullyBooted().then(function(){return l}).then(function(){return Promise.join(i,s,o)}).catch(TS.error)}function O(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.reason||e._x_reason||"legacy_no_reason_provided"}function k(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.expedited,a=void 0!==t&&t;return function(e,t,r,n){var i={method:e,args:t,reason:O(t),EXPEDITED:a,SET_ACTIVE:!TS.client&&!n};var o=function a(r){return{ok:r.ok,request_id:r.request_id,data:r,method:e,args:t}};var l=TS.redux.dispatch(Object(s["a"])(i)).then(o).tap(u(e)&&y).catch(function(e){e.args=_({_attempts:e.attempts},e.args);throw e});"function"===typeof r&&(l=l.then(function(e){return r(true,e.data,t)}).catch(function(e){return r(false,e.data,t)}));return l}}function E(){return Object(l["b"])(TS.redux.getState())}function C(){return E().isPaused()}function S(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i["noop"];E().awaitEmptyQ().then(e)}var w=k();var j=k({expedited:true});Object(o["a"])("interop.api",{call:w,callExpedited:j,callImmediately:j,getQueue:E,isPaused:C,callFuncWhenApiQisEmpty:S})},function(e,t,a){},,,function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(12);var s=a(156);var o=a(26);var l=a(0);var c=a(62);var u=a(110);var d=a.n(u);var p=a(135);var m=a.n(p);var h=a(169);var v=a.n(h);var f=a(138);var b=a.n(f);var g=a(147);var _=a.n(g);var y=a(185);var O=a.n(y);var k=a(50);var E=a(151);var C=a(269);var S=a(1193);var w=a(20);var j=a(288);var I=a(30);var T=a(6);var A=a(2696);var N=a(3327);var P={SLACKBOT:"slackbot",CHANNEL:"channel"};var M=new T["b"]("admin");var D={inviteRequestsApprovalChannel:"invite_requests_approval_channel",invitesOnlyAdmin:"invites_only_admins"};var x={selectedChannel:void 0};var R=function(e){O()(t,e);function t(e){var a;d()(this,t);a=v()(this,b()(t).call(this,e));a.state={inviteDeliveryMethod:e.selectedChannel?P.CHANNEL:P.SLACKBOT,isSaving:false,requireAdminApproval:e.invitesOnlyAdmin,selectedChannel:e.selectedChannel,submitButtonText:M.t("Save")};Object(I["a"])(_()(a),["onChangeChannel","onSubmit"]);return a}m()(t,[{key:"onChangeAdminApproval",value:function e(t){this.setState(function(){return{requireAdminApproval:t,inviteDeliveryMethod:P.CHANNEL,submitButtonText:M.t("Save")}})}},{key:"onChangeChannel",value:function e(t){this.setState(function(){return{selectedChannel:t.entity,submitButtonText:M.t("Save")}})}},{key:"onRadioSelect",value:function e(t){this.setState(function(){return{inviteDeliveryMethod:t,submitButtonText:M.t("Save")}})}},{key:"onSubmit",value:function e(){var t=this;this.setState(function(){return{isSaving:true}});return this.props.setMultipleTeamPrefsByApi({invite_requests_approval_channel:this.getSelectedChannelIdForSubmit(),invites_only_admins:this.state.requireAdminApproval}).then(function(){t.setState(function(){return{submitButtonText:M.t("Saved")}})}).catch(function(){TS.generic_dialog.alert(M.t("Sorry! Something went wrong. Please try again."))}).finally(function(){t.setState(function(){return{isSaving:false}})})}},{key:"getSelectedChannelIdForSubmit",value:function e(){return this.state.requireAdminApproval&&this.state.inviteDeliveryMethod===P.CHANNEL?this.state.selectedChannel.id:null}},{key:"maybeRenderSubForm",value:function e(t){var a=this;if(!t)return null;var r=this.state,i=r.inviteDeliveryMethod,s=r.selectedChannel;return n.a.createElement("div",null,n.a.createElement("p",{className:"admin_invite_settings_delivery_instructions margin_top_200"},M.t("Send invitation requests to...")),n.a.createElement(C["a"],{className:"margin_bottom_0"},n.a.createElement("div",null,n.a.createElement(k["a"],{htmlFor:"invites_destination_slackbot",className:"admin_invite_settings_delivery_method",text:M.t("All admins, via Slackbot"),type:"inline",cursor:"pointer"},n.a.createElement(E["a"],{id:"invites_destination_slackbot",checked:i===P.SLACKBOT,onChange:function e(){return a.onRadioSelect(P.SLACKBOT)}}))),n.a.createElement("div",null,n.a.createElement(k["a"],{htmlFor:"invites_destination_channel",className:"admin_invite_settings_delivery_method",text:M.t("This channel:"),type:"inline",cursor:"pointer"},n.a.createElement(E["a"],{id:"invites_destination_channel",checked:i===P.CHANNEL,onChange:function e(){return a.onRadioSelect(P.CHANNEL)}})),n.a.createElement(A["a"],{isDisabled:i!==P.CHANNEL,onChangeChannel:this.onChangeChannel,selectedChannel:s,classPrefix:"admin_invite_settings",selectId:"invites_channel_select"}))))}},{key:"render",value:function e(){var t=this;var a=this.state,r=a.inviteDeliveryMethod,i=a.isSaving,s=a.requireAdminApproval,o=a.selectedChannel,l=a.submitButtonText;var c=s&&r===P.CHANNEL&&!o;return n.a.createElement("div",null,n.a.createElement("div",null,n.a.createElement(k["a"],{htmlFor:"change_invites_only_admins",className:"checkbox",text:M.t("Require admin approval"),type:"inline"},n.a.createElement("input",{type:"checkbox",name:"invites_only_admins",id:"change_invites_only_admins",checked:s,onChange:function e(){return t.onChangeAdminApproval(!s)}}))),this.maybeRenderSubForm(s),n.a.createElement(j["a"],{className:"admin_invite_settings_submit_button",disabled:c,onClick:this.onSubmit,loading:i},l))}}]);return t}(r["Component"]);R.displayName="AdminInviteSettings";R.defaultProps=x;function F(e){var t=Object(c["a"])(e,D.inviteRequestsApprovalChannel);return{selectedChannel:t&&Object(w["e"])(e,t,true),invitesOnlyAdmin:Object(c["a"])(e,D.invitesOnlyAdmin)}}var L={setMultipleTeamPrefsByApi:S["a"]};var U=Object(i["connect"])(F,L)(R);var B={invitesOnlyAdmin:void 0};function q(e){if(void 0===e.invitesOnlyAdmin)return null;return n.a.createElement(U,null)}q.displayName="AdminInviteSettingsContainer";function G(e){return{invitesOnlyAdmin:Object(c["a"])(e,"invites_only_admins")}}q.defaultProps=B;var H=Object(i["connect"])(G)(q);function W(e,t){var a=document.getElementById("admin_invite_settings_mount_point");if(!a||!e)return;var r=Object(o["f"])(e);Object(s["a"])(n.a.createElement(i["Provider"],{store:r},n.a.createElement(H,t)),a)}var V={mountAdminInviteSettings:W};var K=a(52);Object(K["a"])("interop.mountAdminInviteSettings",W)},function(e,t,a){e.exports=a.p+"b86f8262b381648838f4190e248fb639.png"},function(e,t,a){"use strict";a.r(t);var r=a(246);var n=a.n(r);var i=a(1);var s=a.n(i);var o=a(12);var l=a(0);var c=a(332);var u=a.n(c);var d=a(320);var p=a(4739);var m=a(18);var h=a(1179);var v=a(141);var f=a(50);var b=a(39);var g=a(90);var _=new d["a"]("app_action_picker");var y=Object(m["b"])("run a /giphy command with the given query",function(e,t,a){var r=a.channelId,n=a.threadTs,i=a.query;var s=(new u.a).insert("/giphy "+i);e(Object(p["a"])({channelId:r,threadTs:n,delta:s}))});y.meta={name:"runGiphy",key:"componentsWIPIaAppActionPickerFakeGiphyGlobalActionModalRunGiphy",description:"run a /giphy command with the given query"};y.propTypes={channelId:l["default"].string,threadTs:l["default"].string,query:l["default"].string};var O=function e(t){var a=t.channelId,r=t.threadTs,o=t.search,l=t.onClose,c=t.featureDangerouslyGuardIATranslations;var u=Object(i["useState"])(""),d=n()(u,2),p=d[0],m=d[1];var b=Object(i["useCallback"])(function(e){e.preventDefault();o({channelId:a,threadTs:r,query:p});l()},[o,a,r,p,l]);if(!c)return null;return s.a.createElement(h["a"],{onSubmit:b,onClose:l,onCancel:l,title:"Giphy",submitButtonText:"Search"},s.a.createElement("form",{onSubmit:b},s.a.createElement(f["a"],{htmlFor:"fake-giphy",text:_.t("Search for a GIF")},s.a.createElement(v["a"],{value:p,onChange:m,id:"fake-giphy",name:"fake-giphy",placeholder:_.t("Search Giphy..."),focusOnMount:true})),s.a.createElement("button",{style:{display:"none"},type:"submit"},_.t("Submit"))))};O.displayName="FakeGiphyGlobalActionModal";O.defaultProps={threadTs:void 0,featureDangerouslyGuardIATranslations:false};var k=function e(t){return{featureDangerouslyGuardIATranslations:Object(g["e"])(t)}};var E={search:function e(){return y.apply(void 0,arguments)},onClose:function e(){return Object(b["closeModal"])()}};t["default"]=Object(o["connect"])(k,E)(O)},function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(12);var s=a(156);var o=a(26);var l=a(110);var c=a.n(l);var u=a(135);var d=a.n(u);var p=a(169);var m=a.n(p);var h=a(138);var v=a.n(h);var f=a(185);var b=a.n(f);var g=a(0);var _=a(24);var y=a(2);var O=a(11);var k=a(6);var E=a(31);var C=a(29);var S=Object(C["a"])("Gets the access logs",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.reason,n=void 0===r?"get-access-logs":r;return e(Object(E["a"])({method:"users.accessLogs",reason:n,args:{}})).then(function(e){return e}).catch(function(e){throw e})});S.meta={name:"getAccessLogs",key:"fetchersAccessLogsApiGetAccessLogs",description:"Gets the access logs"};S.propTypes={};var w=a(13);var j=a.n(w);var I=new k["b"]("download_access_logs");var T={getAccessLogs:y["noop"],featureDownloadAccessLogs:true};var A=function(e){b()(t,e);function t(){c()(this,t);return m()(this,v()(t).apply(this,arguments))}d()(t,[{key:"onDownloadAccessLogs",value:function e(){var t=this;this.props.getAccessLogs({}).then(function(e){var a=t.getAccessLogsAsString(e.logins);var r=document.createElement("a");var n=new Blob([a],{type:"text/csv;encoding:utf-8"});var i="access_logs.csv";if(navigator.msSaveBlob)navigator.msSaveBlob(n,i);else if(URL&&"download"in r){r.href=URL.createObjectURL(n);r.setAttribute("download",i);document.body.appendChild(r);r.click();document.body.removeChild(r)}else location.href="data:application/octet-stream,"+encodeURIComponent(a)}).catch(function(e){throw e})}},{key:"getAccessLogsAsString",value:function e(t){var a=[];var r=["Date Accessed","User Agent - Simple","User Agent - Full","IP Address","Number of Logins","Last Date Accessed"];a.push(r);t.forEach(function(e){var t=[];var r=new Date(1e3*e.date_first);var n=r.toString();var i=new Date(1e3*e.date_last);var s=i.toString();t.push(n);t.push(e.user_agent_simple);t.push('"'+e.user_agent_full+'"');t.push(e.ip);t.push(e.login_count);t.push(s);a.push(t)});return a.map(function(e){return e.join(",")}).join("\n")}},{key:"render",value:function e(){var t=this;var a=j()("float_right","margin_bottom_100");if(this.props.featureDownloadAccessLogs)return n.a.createElement(_["d"],{className:a,type:"outline",onClick:function e(){return t.onDownloadAccessLogs()}},I.t("Download Access Logs"));return null}}]);return t}(r["Component"]);A.displayName="DownloadAccessLogsButton";A.defaultProps=T;var N=function e(t){return{getAccessLogs:function e(a){return t(S(a))}}};var P=function e(t){return{featureDownloadAccessLogs:Object(O["isFeatureEnabled"])(t,"feature_download_access_logs")}};var M=Object(i["connect"])(P,N)(A);var D=a(197);var x=function e(t,a){var r=document.getElementById("download_access_logs_button_mount_point");if(!r)throw new Error("Could not find a valid download access logs mount point.");if(!t)throw new Error("mountDownloadAccessLogs must be called with a valid teamId parameter.");var l=Object(o["f"])(t);Object(s["a"])(n.a.createElement(i["Provider"],{store:l},n.a.createElement(D["a"],null,n.a.createElement(M,a))),r)};var R={mountDownloadAccessLogsButton:x};var F=a(52);Object(F["a"])("interop.mountDownloadAccessLogsButton",x)},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(85);var s=a.n(i);var o=a(12);var l=a(156);var c=a(26);var u=a(110);var d=a.n(u);var p=a(135);var m=a.n(p);var h=a(169);var v=a.n(h);var f=a(138);var b=a.n(f);var g=a(147);var _=a.n(g);var y=a(185);var O=a.n(y);var k=a(0);var E=a(2);var C=a(30);var S=a(11);var w=a(25);var j=a(119);var I=a(33);var T=a(1375);var A=a(17);var N=a(27);var P=a(34);var M=a(6);var D=a(1068);var x=a(603);var R=a(428);var F=a(57);var L=a(237);var U=a(1057);var B=a(2768);var q=a(2726);var G=a(3714);var H=new M["b"]("member_directory");var W={isEnterprise:false,isAdmin:false,isRestricted:false,setSearchQuery:E["noop"],setFilter:E["noop"],searchQuery:"",filter:"people",isVisible:false,flexParams:[],teamUrl:"/",fetchMemberCountsForTeam:E["noop"]};var V=function(e){O()(t,e);function t(e){var a;d()(this,t);a=v()(this,b()(t).call(this,e));Object(C["a"])(_()(a),["onSearchInputChange","onMenuItemSelected","renderMenu","renderBody","focus","onItemTabWithin"]);a.state={externalTeams:[]};a.list=n.a.createRef();a.flexpane=n.a.createRef();return a}m()(t,[{key:"componentDidMount",value:function e(){this.fetchExternalTeams()}},{key:"onItemTabWithin",value:function e(){var t=this.flexpane.current;t&&t.setInitialActiveSection()}},{key:"onMenuItemSelected",value:function e(t){this.props.setFilter(t)}},{key:"onSearchInputChange",value:function e(t){var a=t.target.value||"";this.props.setSearchQuery(a)}},{key:"getTitle",value:function e(){var t=this.props.isEnterprise;return t?H.t("Organization Directory"):H.t("Workspace Directory")}},{key:"fetchExternalTeams",value:function e(){var t=this;this.props.fetchMemberCountsForTeam().then(function(e){if(!e||!e.external_teams)return;t.setState(function(){return{externalTeams:Object.keys(e.external_teams)}})})}},{key:"focus",value:function e(){var t=this.list.current;t&&t.focus()}},{key:"renderBody",value:function e(){return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"p-member_directory__search_filter_container","data-qa":"member_directory"},this.renderSearch(),this.renderFilterIconButton()),n.a.createElement(B["a"],{ref:this.list,onItemTabWithin:this.onItemTabWithin,"aria-label":this.getTitle()}))}},{key:"renderFilterIconButton",value:function e(){if(this.props.isRestricted)return null;var t="people"!==this.props.filter;var a=t?H.t("Filter members (filter active)"):H.t("Filter members");return n.a.createElement(F["e"],{renderMenu:this.renderMenu,position:"bottom-left"},n.a.createElement(L["a"],{icon:"filters","data-qa":"p-member_directory_menu_trigger",showBadge:t,"aria-label":a}))}},{key:"renderMenu",value:function e(t){return n.a.createElement(q["a"],{onMenuItemSelected:this.onMenuItemSelected,selectedFilter:this.props.filter,menuProps:t,externalTeams:this.state.externalTeams})}},{key:"renderSearch",value:function e(){return n.a.createElement("div",{className:"p-member_directory__search"},n.a.createElement(R["a"],{value:this.props.searchQuery,onChange:this.onSearchInputChange,placeholder:H.t("Search by name or title"),icon:"search",autoFocus:true,inputAriaLabel:H.t("Search members by name or title",{fallbackHash:"4be82cb9b1458f2d26a012d16010b3630c49c611"})}))}},{key:"render",value:function e(){var t=this.props,a=t.isVisible,r=t.flexParams,i=t.teamUrl;if(!a)return null;if(r.length)return null;var s=this.getTitle();return n.a.createElement(U["b"],{"aria-label":s,ref:this.flexpane,focus:this.focus,title:s,renderBody:this.renderBody,kbNavOrder:Object(P["a"])()?void 0:5,viewId:"member-directory",headerProps:{optionsHref:this.props.isAdmin?i+"admin":void 0,optionsIconType:"cog-o",optionsTooltipText:H.t("Manage members")}})}}]);return t}(r["Component"]);V.displayName="MemberDirectoryFlexpane";V.defaultProps=W;var K=function e(t){var a=Object(j["j"])(t);var r=!Object(P["a"])()&&"team"===a||"directory"===a;return{isEnterprise:Object(S["pageNeedsEnterprise"])(t),isAdmin:Object(A["isAdmin"])(t,Object(w["b"])(t)),isRestricted:Object(A["isRestricted"])(Object(w["b"])(t)),searchQuery:Object(D["f"])(t),filter:Object(D["a"])(t),flexParams:Object(j["f"])(t),teamUrl:Object(N["getTeamUrl"])(Object(I["d"])(t)),isVisible:r}};var z={setSearchQuery:function e(){return x["f"].apply(void 0,arguments)},setFilter:function e(){return x["d"].apply(void 0,arguments)},fetchMemberCountsForTeam:function e(){return T["b"].apply(void 0,arguments)}};var Q=Object(o["connect"])(K,z)(V);var Y=Q;var J=a(197);var X=function e(t,a){if(!t)throw new Error("mountMemberDirectoryFlexpane must be called with a teamId parameter");var r=Object(c["f"])(t);Object(l["a"])(n.a.createElement(o["Provider"],{store:r},n.a.createElement(J["a"],null,n.a.createElement(Y,null))),a)};var Z=function e(t){s.a.unmountComponentAtNode(t)};var $=a(52);Object($["a"])("interop.mountMemberDirectoryFlexpane",X);Object($["a"])("interop.unmountMemberDirectoryFlexpane",Z)},,function(e,t,a){},,function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(12);var s=a(156);var o=a(26);var l=a(110);var c=a.n(l);var u=a(135);var d=a.n(u);var p=a(169);var m=a.n(p);var h=a(138);var v=a.n(h);var f=a(147);var b=a.n(f);var g=a(185);var _=a.n(g);var y=a(0);var O=a(2);var k=a(13);var E=a.n(k);var C=a(24);var S=a(288);var w=a(23);var j=a(2688);var I=a(324);var T=a(34);var A=a(35);var N=a(14);var P=a(6);var M=a(3755);var D=new P["b"]("migration_blocker_page");var x={isOrgOwner:false,isWorkspaceOwner:false,isOrgAdmin:false,isWorkspaceAdmin:false,enterpriseName:null,teamURL:null,migrationID:null,sendEmail:false,teamId:null,teamName:null,migrationIsComplete:false,clogger:{track:O["noop"]},pollMigrationStatus:O["noop"]};var R="migration_blocker_reload";var F="migration_blocker_page";var L=function(e){_()(t,e);function t(e){var a;c()(this,t);a=m()(this,v()(t).call(this,e));a.state={loading:false};a.handleReload=a.handleReload.bind(b()(a));return a}d()(t,[{key:"componentDidMount",value:function e(){this.clogImpression();Object(T["a"])()&&this.props.pollMigrationStatus(this.props.teamId)}},{key:"componentDidUpdate",value:function e(t){t.migrationIsComplete===this.props.migrationIsComplete&&t.teamId===this.props.teamId||this.clogImpression()}},{key:"clogImpression",value:function e(){var t=this.props,a=t.migrationIsComplete,r=t.clogger;r.track(N["EventId"].ENTERPRISE_MIGRATIONS,{contexts:{ui_context:{action:N["UiAction"].IMPRESSION,ui_properties:{element_name:a?R:F}}}})}},{key:"handleReload",value:function e(){var t=this.props,a=t.teamId,r=t.clogger;this.setState(function(){return{loading:true}});Object(I["a"])({reason:"MigrationBlockerPage: Grid Migration for team "+a+" is complete, user triggered client reload",reasonKey:"migration_blocker_reload"});r.track(N["EventId"].ENTERPRISE_MIGRATIONS,{contexts:{ui_context:{action:N["UiAction"].CLICK,ui_element:N["UiElement"].BTN_RELOAD,ui_properties:{element_type:N["ElementType"].BUTTON,element_name:R}}}});r.sendDataAndEmptyQueue()}},{key:"renderMigrationButton",value:function e(){var t=this.props,a=t.migrationID,r=t.isOrgOwner,i=t.isWorkspaceOwner,s=t.isOrgAdmin,o=t.isWorkspaceAdmin,l=t.teamURL,c=t.migrationIsComplete;if(c)return null;if(!r&&!i&&!s&&!o)return null;return n.a.createElement(C["c"],{className:"p-migration_blocker_page__button",href:l+"migrations/"+a+"/status"},n.a.createElement("div",{className:"p-migration_blocker_page__button__text"},n.a.createElement("span",{className:"p-migration_blocker_page__button__title"},D.t("View migration status")),n.a.createElement("span",{className:"p-migration_blocker_page__button__subtitle"},D.t("Migration status is only visible to owners and admins."))),n.a.createElement("span",{className:"p-migration_blocker_page__button_icon"},n.a.createElement(w["b"],{type:"chevron-large-right"})))}},{key:"renderMigrationCompleteMessage",value:function e(){var t=this.props.enterpriseName;var a=t?D.rt("Starting today, your workspace is part of the <b>{enterprise_name}</b> organization. That means you can now message and share files with anyone at {enterprise_name} \u2014 even if you\u2019re not in the same workspace. Continue to your workspace, and we\u2019ll show you what\u2019s new.",{enterprise_name:t}):D.t("Starting today, your workspace is part of an organization. That means you can now message and share files with anyone in the organization \u2014 even if you\u2019re not on the same workspace. Continue to your workspace, and we\u2019ll show you what\u2019s new.");return n.a.createElement("div",{className:"p-migration_blocker_page__description"},n.a.createElement("p",null,D.t("Your workspace has just been upgraded to Slack Enterprise Grid, which makes it simpler for large organizations to work together.")),n.a.createElement("p",null,a),n.a.createElement("div",{className:"align_center margin_top_150"},n.a.createElement(S["a"],{type:"primary",size:"large",onClick:this.handleReload,disabled:this.state.loading,loading:this.state.loading},D.t("Continue to Your Workspace"))))}},{key:"renderMigrationMessage",value:function e(){var t=this.props,a=t.enterpriseName,r=t.sendEmail;var i=D.rt("It\u2019s moving day! Your workspace is being migrated into the <b>{enterpriseName}</b> Enterprise Grid organization, and will be temporarily unavailable until the process is complete.",{enterpriseName:a,fallbackHash:"f805600b955705eefe22feb6f32b1871508f03bd"});return n.a.createElement("div",{className:"p-migration_blocker_page__description"},i,r?D.t(" You\u2019ll receive an email when it\u2019s all done."):"")}},{key:"renderMigrationTitle",value:function e(){var t=this.props,a=t.teamName,r=t.enterpriseName,i=t.migrationIsComplete;var s=i?D.t("Welcome to Slack Enterprise Grid!"):D.rt("The {teamName} workspace is joining {enterpriseName}!",{teamName:a,enterpriseName:r});return n.a.createElement("h3",{className:"p-migration_blocker_page__title"},s)}},{key:"render",value:function e(){var t=this.props.migrationIsComplete;var a=E()("p-migration_blocker_page","p-migration_blocker_page--large");var r=E()("p-migration_blocker_page__icon",{"p-migration_blocker_page__icon--complete":t});return n.a.createElement("div",{className:a},n.a.createElement("div",{className:"p-migration_blocker_text"},n.a.createElement("div",{className:r}),this.renderMigrationTitle(),t?this.renderMigrationCompleteMessage():this.renderMigrationMessage()),this.renderMigrationButton())}}]);return t}(r["Component"]);L.displayName="MigrationBlockerPage";L.defaultProps=x;var U={};var B=function e(t){return{clogger:Object(A["a"])({state:t})}};var q={pollMigrationStatus:j["a"]};var G=Object(i["connect"])(B,q)(L);var H=G;var W=a(197);var V=function e(t,a,r){if(!t)throw new Error("mountMigrationBlocker must be called with a teamId parameter");Object(s["a"])(n.a.createElement(i["Provider"],{store:Object(o["f"])(t)},n.a.createElement(W["a"],null,n.a.createElement(H,r))),a)};var K=V;var z=a(52);Object(z["a"])("interop.mountMigrationBlocker",K)},,function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(12);var s=a(156);var o=a(26);var l=a(88);var c=a.n(l);var u=a(110);var d=a.n(u);var p=a(135);var m=a.n(p);var h=a(169);var v=a.n(h);var f=a(138);var b=a.n(f);var g=a(147);var _=a.n(g);var y=a(185);var O=a.n(y);var k=a(0);var E=a(2);var C=a(30);var S=a(6);var w=a(1461);var j=a(1462);var I=a(2739);var T=a(24);var A=a(152);var N=a(1391);var P=a(50);var M=a(1847);var D=a(2096);var x=a(2788);var R=a(151);var F=a(23);var L=a(43);var U=a(54);var B=a(1681);var q=a(35);var G=a(1361);var H=a(109);var W=function e(t){var a=t.appIcon,r=t.appName,i=t.teamIcon,s=t.teamName;return n.a.createElement("div",{className:"p-oauth_flow__logos margin_auto display_flex"},n.a.createElement("img",{className:"p-oauth_flow__logo_img",src:a,alt:r,title:r}),n.a.createElement("span",{className:"p-oauth_flow__arrows flex_one sk_foreground_high"},n.a.createElement(F["a"],{type:"arrow-large-left",className:"p-oauth_flow__left_directional_arrow--secondary full_width inline_block position_relative"}),n.a.createElement(F["a"],{type:"arrow-large-right",className:"p-oauth_flow__right_directional_arrow--secondary full_width inline_block position_relative"})),n.a.createElement("img",{className:"p-oauth_flow__logo_img",src:i,alt:r,title:s}))};W.displayName="OAuthPageLogos";var V=Object(H["pure"])(W);var K=a(3761);function z(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function Q(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?z(Object(a),true).forEach(function(t){c()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):z(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Y=new S["b"]("pages_oauth");var J={appIsReviewed:true,appIsInternalIntegration:false,safeTeamScopeInfo:[],dangerousTeamScopeInfo:[],safeChannelScopeInfo:[],dangerousChannelScopeInfo:[],singleChannel:false,appId:void 0,appType:void 0,appIsInstalled:false,initialSelectedTeamID:void 0,teamsList:[],onTeamSelected:E["noop"],signInUrl:void 0,switchTeamUrlPathAndQuery:void 0,orgName:void 0,appDevelopmentTeamName:void 0,teamId:void 0,userId:void 0,enterpriseId:void 0,channelTypes:{},loadIms:E["noop"],loadMpims:E["noop"],dispatchSearchChannelsForService:E["noop"]};var X=300;var Z=function e(t){return"p-oauth_flow__channel_picker_list_item"+(t.group?"--group-title":"")};var $=function e(t,a,r,n){var i=Object(E["compact"])(t.concat(a,r,n));return Object(E["map"])(i,function(e){return e.scopes.join(",")}).join(",")};var ee=function(e){O()(t,e);function t(e){var a;d()(this,t);a=v()(this,b()(t).call(this,e));var r=a.props,n=r.appId,i=r.appName,s=r.safeTeamScopeInfo,o=r.dangerousTeamScopeInfo,l=r.safeChannelScopeInfo,c=r.dangerousChannelScopeInfo,u=r.userId,p=r.teamId,m=r.enterpriseId;a.trackingProps={app_scopes:$(s,o,l,c),app_name:i,app_id:n};a.state={step:0,selectedRadioValue:"all-channels",selectedChannelValues:[],lfsInputValue:""};a.clogger=Object(q["a"])({userId:u,teamId:p,enterpriseId:m,locale:Object(S["s"])()});Object(C["a"])(_()(a),["onDenyClick","onContinueClick","onBackClick","onInputKeyUp","changeRadioButtonCheck","updateSpecificChannelsValues","setLfsRef","searchForChannelsAsync"]);return a}m()(t,[{key:"componentDidMount",value:function e(){var t=this.props,a=t.appIsInstalled,r=t.appId,n=t.appType,i=t.channelTypes,s=t.loadIms,o=t.loadMpims;window.dataLayer=window.dataLayer||[];window.dataLayer.push({event:"AppDirectoryApp_OAuthDetails",is_installed:a,app_id:r,app_type:n});this.clogger.track("OAUTH_REVIEWS_SCOPES",this.trackingProps);this.clogger.trackForm("#oauth_authorize_confirm_form","OAUTH_AUTHORIZE_CONFIRM_FORM",this.trackingProps);i.im_channels&&s();i.mpim_channels&&o()}},{key:"onBackClick",value:function e(t){t.preventDefault();this.clogger.track("OAUTH_PREVIOUS_PAGE",this.trackingProps);this.setState(function(){return{step:0}})}},{key:"onContinueClick",value:function e(t){t.preventDefault();this.clogger.track("OAUTH_NEXT_PAGE",this.trackingProps);this.setState(function(){return{step:1}})}},{key:"onDenyClick",value:function e(){this.clogger.track("OAUTH_DENY",this.trackingProps)}},{key:"onInputKeyUp",value:function e(){var t=Object(E["get"])(this,"lfs.input.value","");this.setState(function(){return{lfsInputValue:t}})}},{key:"getSearchConfiguration",value:function e(){var t=this.props.channelTypes;if(!t)return;var a={channels:{canPost:true,includeArchived:false,includeFromAnotherTeam:false,includePrivate:!!t.group_channels,includePublic:!!t.channels,includeMpims:!!t.mpim_channels},members:{includeSelf:true}};t.im_channels||delete a.members;return a}},{key:"setLfsRef",value:function e(t){this.lfs=t}},{key:"changeRadioButtonCheck",value:function e(t){var a=t.target.id;this.setState(function(){return{selectedRadioValue:a}})}},{key:"isChannelInputRequired",value:function e(){var t=this.state.step;var a=this.props,r=a.appIsInstalled,n=a.singleChannel,i=a.needSecondStep;if(this.noChannelScopesUsed())return false;if(1===t&&!n&&r)return false;if(0===t&&i&&!this.noWorkspaceScopesUsed())return false;return true}},{key:"isLastStep",value:function e(){var t=this.state.step;var a=this.props.needSecondStep;if(this.noWorkspaceScopesUsed())return true;return!a||1===t}},{key:"isRequiredChannelMissing",value:function e(){var t=false;var a=this.state,r=a.selectedChannelValues,n=a.selectedRadioValue,i=a.lfsInputValue;var s=this.props.singleChannel;this.isChannelInputRequired()&&(s?t=0===r.length:"specific-channels"===n&&(t=0===r.length||i.length>0));return t}},{key:"maybeRenderBackButton",value:function e(){var t=this.props.needSecondStep;var a=this.state.step;if(t&&1===a)return n.a.createElement(A["a"],{className:"p-oauth_flow__nav_anchor margin_left_100 margin_top_25 position_relative",onClick:this.onBackClick},n.a.createElement(F["b"],{type:"arrow-large-left",className:"position_relative p-oauth_flow__nav_back_arrow"}));return false}},{key:"maybeRenderTeamPicker",value:function e(){var t=this.props,a=t.needTeamPicker,r=t.initialSelectedTeamID,i=t.teamsList,s=t.signInUrl,o=t.switchTeamUrlPathAndQuery;var l=this.state.step;if(a&&0===l){var c=i;o&&(c=Object(E["map"])(i,function(e){return Q({},e,{href:window.location.protocol+"//"+window.location.hostname+o+"&switch_to_team="+e.teamId})}));return n.a.createElement("div",{"data-qa":"team_switcher",className:"p-oauth_flow__team_switcher position_relative"},n.a.createElement(B["a"],{initialSelectedTeamID:r,teamsList:c,signInUrl:s}))}return false}},{key:"noChannelScopesUsed",value:function e(){var t=this.props,a=t.dangerousChannelScopeInfo,r=t.safeChannelScopeInfo;return Object(E["isEmpty"])(a)&&Object(E["isEmpty"])(r)}},{key:"noWorkspaceScopesUsed",value:function e(){var t=this.props,a=t.dangerousTeamScopeInfo,r=t.safeTeamScopeInfo;return Object(E["isEmpty"])(a)&&Object(E["isEmpty"])(r)}},{key:"searchForChannelsAsync",value:function e(t){return this.props.dispatchSearchChannelsForService({query:t,entitiesConfiguration:this.getSearchConfiguration()}).then(function(e){var t=e.options;return{items:t.map(function(e){return Q({},e,{id:e.value})}),replace_all_items:true}})}},{key:"updateSpecificChannelsValues",value:function e(t){this.setState(function(){return{lfsInputValue:"",selectedChannelValues:t,selectedRadioValue:"specific-channels"}})}},{key:"renderAlert",value:function e(){var t=this.props,a=t.appDevelopmentTeamName,r=t.appIsInternalIntegration,i=t.appIsReviewed,s=t.orgName,o=t.teamName;if(i)return null;var l;l=r?a?Y.t("This app was created by a member of {teamName}, another workspace in {orgName}.",{orgName:Object(S["q"])(s),teamName:Object(S["q"])(a)}):Y.t("This app was created by a member of your workspace, {teamName}.",{teamName:Object(S["q"])(o)}):Y.rt("This app hasn\u2019t been reviewed or approved by Slack. <a>Learn More</a>.",null,function(e){var t=e.key,a=e.text;return n.a.createElement(L["a"],{key:t,className:"p-oauth_flow__app_not_reviewed_link",href:"https://get.slack.help/hc/en-us/articles/222386767-Manage-apps-for-your-team",rel:"noopener noreferrer"},a)});return n.a.createElement(N["a"],{type:r?"neutral":"warning",showCloseButton:false,isFixedPosition:false},l)}},{key:"renderChannelSelections",value:function e(){var t=this.state,a=t.selectedChannelValues,r=t.selectedRadioValue;var i=this.props.appName;var s=Y.t("Select channels");var o=Y.t("All Public Channels");var l=Y.t("Any channel accessible to full members of your team.");var c=Y.t("Specific channels");var u=Y.t("Search for channels");var d=Y.t("No channels");var p=Y.t("{app_name} will still be able to access a private conversation with you",{app_name:i});var m=a.map(function(e){return'"'+e.id+'"'}).join(",");return n.a.createElement("div",{className:"margin_auto no_right_padding"},n.a.createElement("div",{className:"large_top_margin"},n.a.createElement("p",{className:"p-oauth_flow__para bold"},s),n.a.createElement("div",{className:"margin_bottom_100"},n.a.createElement(P["a"],{text:o,htmlFor:"all-channels",type:"inline",subtext:l,cursor:"pointer"},n.a.createElement(R["a"],{name:"channels",id:"all-channels",value:"['*']",checked:"all-channels"===r,onChange:this.changeRadioButtonCheck}))),n.a.createElement("div",{className:"margin_bottom_100"},n.a.createElement("label",{htmlFor:"specific-channels",className:"c-label c-label--inline c-label--pointer margin_bottom_100"},n.a.createElement("div",{className:"c-label__text full_width"},n.a.createElement("span",{className:"bold"},c)),n.a.createElement("input",{id:"specific-channels",className:"c-input_radio",type:"radio",name:"channels",value:"["+m+"]",checked:"specific-channels"===r,onChange:this.changeRadioButtonCheck})),n.a.createElement("div",{className:"margin_left_150 margin_top_50 p-oauth_flow__lazy-filter-select-container"},n.a.createElement(D["a"],{ref:this.setLfsRef,dataPromise:this.searchForChannelsAsync,scrollThreshold:X,placeholderText:u,onKeyUp:this.onInputKeyUp,onValueChange:this.updateSpecificChannelsValues,listItemClass:Z}))),n.a.createElement("div",{className:"margin_bottom_100"},n.a.createElement(P["a"],{text:d,htmlFor:"no-channels",type:"inline",subtext:p,cursor:"pointer"},n.a.createElement(R["a"],{name:"channels",id:"no-channels",value:"[]",checked:"no-channels"===r,onChange:this.changeRadioButtonCheck})))))}},{key:"renderConfirmTitle",value:function e(){var t=this.props,a=t.appIsInstalled,r=t.appName,n=t.needSecondStep,i=t.singleChannel,s=t.teamName;var o=this.state.step;var l;l=1===o?i?Y.rt("{appName} would like to do the following in the <strong>selected channel:</strong>",{appName:r}):a?Y.rt("{appName} would like to do the following in the <strong>all channels it\u2018s a member of:</strong>",{appName:r}):Y.rt("{appName} would like to do the following in the <strong>selected channels:</strong>",{appName:r}):a?this.noWorkspaceScopesUsed()?n?i?Y.rt("{appName} is already installed on {teamName}, and would now also like to do the following in the <strong>selected channel:</strong>",{appName:r,teamName:s}):Y.rt("{appName} is already installed on {teamName}, and would now also like to do the following in <strong>all channels it\u2019s a member of:</strong>",{appName:r,teamName:s}):this.noChannelScopesUsed()?Y.t("{appName} is already installed on {teamName}.",{teamName:Object(S["q"])(s),appName:Object(S["q"])(r)}):Y.t("{appName} is already installed on {teamName}, and would now also like to:",{teamName:Object(S["q"])(s),appName:Object(S["q"])(r)}):Y.t("{appName} is already installed on {teamName}, and would now also like to:",{teamName:Object(S["q"])(s),appName:Object(S["q"])(r)}):Y.t("On {teamName}, {appName} would like to:",{teamName:Object(S["q"])(s),appName:Object(S["q"])(r)});return l}},{key:"renderContinueOrInstallButton",value:function e(){var t=this.state.step;var a=this.props,r=a.needSecondStep,i=a.appIsInstalled,s=a.appId,o=a.appType,l=a.singleChannel;var c=this.isRequiredChannelMissing();var u;var d;var p;var m;var h=Y.t("Allow");var v=Y.t("Continue");var f=Y.t("Install");if(0===t&&r&&!this.noWorkspaceScopesUsed()){u=v;d=this.onContinueClick;p="button"}else{u=i?this.noWorkspaceScopesUsed()&&this.noChannelScopesUsed()?v:h:f;d=function e(){window.dataLayer.push({event:"AppDirectoryApp_Authorize",is_installed:i,app_id:s,app_type:o})};p="submit"}c&&(m=l?Y.t("Select channel"):Y.t("Select channels"));return n.a.createElement(T["d"],{"data-qa":"oauth_flow_button_next",className:"p-oauth_flow__button",htmlType:p,onClick:d,disabled:c},u,m&&n.a.createElement(U["c"],{tip:m},n.a.createElement("div",{className:"p-oauth_flow__button_tooltip_target"})))}},{key:"renderSingleChannelOrChannelSelections",value:function e(){var t=this.state.step;var a=this.props,r=a.appIsInstalled,n=a.singleChannel,i=a.needSecondStep;if(this.noChannelScopesUsed())return null;if(1===t){if(!n&&r)return null}else if(i&&!this.noWorkspaceScopesUsed())return null;return n?this.renderSingleChannelPicker():this.renderChannelSelections()}},{key:"renderSingleChannelPicker",value:function e(){var t=this.props.needSecondStep;var a=this.state.selectedChannelValues;var r=a.map(function(e){return e.id});var i=Y.t("Post to");var s=Y.t("Select Channel");var o=n.a.createElement(D["a"],{ref:this.setLfsRef,scrollThreshold:X,placeholderText:s,onValueChange:this.updateSpecificChannelsValues,listItemClass:Z,single:true,dataPromise:this.searchForChannelsAsync});return t?n.a.createElement("div",{className:"margin_top_200"},n.a.createElement("p",{className:"p-oauth_flow__para bold"},Y.t("Select a channel")),n.a.createElement("div",{className:"p-oauth_flow__lazy-filter-select-container"},o),n.a.createElement("input",{type:"hidden",name:"channel",value:r})):n.a.createElement("div",{className:"p-oauth_flow__single_channel_picker display_flex align_items_center"},n.a.createElement("span",{className:"margin_right_50"},i),n.a.createElement("div",{className:"flex_one p-oauth_flow__lazy-filter-select-container"},o),n.a.createElement("input",{type:"hidden",name:"channel",value:r}))}},{key:"render",value:function e(){var t=this.state.step;var a=this.props,r=a.appIcon,i=a.appName,s=a.teamIcon,o=a.teamName,l=a.safeTeamScopeInfo,c=a.dangerousTeamScopeInfo,u=a.safeChannelScopeInfo,d=a.dangerousChannelScopeInfo,p=a.authRowIdentifier,m=a.crumbKey,h=a.denyUrl,v=a.needSecondStep;var f={appIcon:r,appName:i,teamIcon:s,teamName:o};var b;b=0!==t||this.noWorkspaceScopesUsed()&&v?u.concat(d):Object(E["compact"])(l.concat(c));var g=Y.t("Cancel");return n.a.createElement("div",null,this.renderAlert(),n.a.createElement("header",{className:"p-oauth_flow__nav"},n.a.createElement("div",{className:"p-oauth_flow__nav_back"},this.maybeRenderBackButton()),n.a.createElement("div",{className:"p-oauth_flow__nav_back clearfix"},this.maybeRenderTeamPicker())),n.a.createElement("section",{className:"p-oauth_flow__header align_center"},n.a.createElement(V,f),n.a.createElement("h3",{className:"p-oauth_flow__title normal","data-qa":"oauth_page_title"},this.renderConfirmTitle())),n.a.createElement("section",{className:"p-oauth_flow__body"},n.a.createElement("form",{id:"oauth_authorize_confirm_form",name:"oauth-confirm",action:"/oauth/"+p,method:"post","accept-encoding":"UTF-8"},n.a.createElement("input",{type:"hidden",name:"create_authorization",value:"1"}),n.a.createElement("input",{type:"hidden",name:"crumb",value:m}),n.a.createElement("div",{className:"p-oauth_flow__scopes_container"},n.a.createElement(x["a"],{scopeInfo:b}),this.renderSingleChannelOrChannelSelections(),n.a.createElement("div",{className:"p-oauth_flow__buttons_container"},n.a.createElement(T["d"],{type:"outline",onClick:this.onDenyClick,href:h,className:"p-oauth_flow__button",target:"_self"},g),this.renderContinueOrInstallButton())))))}}]);return t}(r["PureComponent"]);ee.displayName="OAuthConfirm";ee.defaultProps=J;ee.displayName="OAuthConfirm";var te=ee;var ae=function e(t){return{dispatchSearchChannelsForService:function e(){return t(I["a"].apply(void 0,arguments))},loadIms:function e(){return t(Object(w["a"])({latest:false,reason:"oauth_channel_picker"}))},loadMpims:function e(){return t(Object(j["a"])({latest:false,reason:"oauth_channel_picker"}))}}};var re=Object(i["connect"])(null,ae)(ee);var ne=a(197);var ie=function e(t,a,r){if(!t)throw new Error("mountOAuthConfirm must be called with a teamId parameter");Object(s["a"])(n.a.createElement(i["Provider"],{store:Object(o["f"])(t)},n.a.createElement(ne["a"],null,n.a.createElement(re,r))),a)};var se=ie;var oe=a(52);Object(oe["a"])("interop.mountOAuthConfirm",se)},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(12);var s=a(156);var o=a(26);var l=a(286);var c=a(2);var u=a(14);var d=a(0);var p=a(35);var m=a(17);var h=a(344);var v=a(27);var f=a(25);var b=a(33);var g=a(11);var _=a(57);var y=a(23);var O=a(24);var k=a(852);var E=a(348);var C=a(2866);var S=a(2654);var w=a(2655);var j=a(2656);var I=a(2657);var T=a(2658);var A=a(1881);var N=a(196);var P=a.n(N);var M=a(6);var D=a(63);var x=a(257);var R=a(345);var F=a(784);var L=a(104);var U=a(1794);var B=a(653);var q=a(90);var G=new M["b"]("member_profile");var H={isPresenceActive:false,openPrefsModal:c["noop"],showFileList:c["noop"],openFileBrowser:c["noop"],toggleUserPresence:c["noop"],userCanEditCustomResponses:false,onClick:c["noop"],isIAP1Enabled:false};function W(e){var t=e.isPresenceActive,a=e.member,i=e.menuProps,s=e.openPrefsModal,o=e.showFileList,l=e.openFileBrowser,c=e.team,u=e.toggleUserPresence,d=e.userCanEditCustomResponses,p=e.onClick,h=e.isIAP1Enabled;var f=Object(E["a"])(),b=f.featureModernProfileFlexpane;var g=a.id;var _=Object(r["useCallback"])(function(){h?l({filters:{from:[g]}}):o({user:g});p()},[g,h,l,o,p]);if(!b)return null;var y;if(Object(m["isSelf"])(a)){var O;O=t?G.t("Set yourself away"):G.t("[AWAY] Set yourself active");y=[{label:G.t("View preferences"),click:function e(){p();s()}},{label:G.t("Account settings"),click:function e(){Object(v["openAuthenticatedUrlInBrowser"])(c,"/account/settings")},showLinkIndicatorIcon:true},{type:"separator"},{label:G.t("View your files"),click:_},{label:O,click:function e(){p();u()}}]}else{y=[{label:G.t("View files"),click:_}];Object(m["isSlackbot"])(a)&&d&&y.push({label:G.t("Create/edit Slackbot responses"),href:Object(v["getTeamUrl"])(c,"/customize/slackbot")})}if(Object(x["canWriteText"])()){y.push({type:"separator"});y.push({label:G.t("Copy member ID"),description:a.id,click:function e(){p();Object(x["writeText"])(a.id)}})}return n.a.createElement(U["a"],P()({},i,{template:y}))}W.displayName="MemberProfileOverflowMenu";W.defaultProps=H;function V(e,t){var a=t.member;return{isPresenceActive:Object(R["getPresenceByMemberId"])(e,a.id)===R["PRESENCE_ACTIVE"],userCanEditCustomResponses:Object(D["K"])(e),isIAP1Enabled:Object(q["e"])(e)}}var K={openPrefsModal:function e(){return F["a"].apply(void 0,arguments)},showFileList:function e(){return L["h"].apply(void 0,arguments)},openFileBrowser:function e(){return B["p"].apply(void 0,arguments)},toggleUserPresence:function e(){return R["toggleUserPresence"].apply(void 0,arguments)}};var z=Object(i["connect"])(V,K)(W);var Q=a(1209);var Y=a(2425);var J={currentMemberId:void 0,member:void 0,memberTeam:void 0,team:void 0,canInteract:true,clogger:{track:c["noop"]}};function X(e){var t=e.currentMemberId,a=e.member,i=e.memberTeam,s=e.team,o=e.canInteract,c=e.clogger;var d=Object(r["useMemo"])(function(){var e=[Q["a"].STATUS,Q["a"].NAME,Q["a"].TIME,Q["a"].PHONE,Q["a"].EMAIL,Q["a"].CUSTOM,Q["a"].GUEST,Q["a"].SHARED_CHANNELS];a.id!==t&&e.push(Q["a"].SHARED_WORKSPACES);return e},[t,a]);var p=Object(E["a"])(),m=p.featureModernProfileFlexpane;var h=Object(r["useCallback"])(function(){c.track(u["EventId"].USER_PROFILE_CLICK)},[c]);if(!m)return null;var f=n.a.createElement(S["a"],{className:"p-member_profile__picture",member:a});var b=n.a.createElement(j["a"],{className:"p-member_profile__restriction",member:a,team:i});var g=n.a.createElement(A["a"],{className:"p-member_profile__name",member:a,canInteract:o});if(Object(v["isUnavailable"])(i))return n.a.createElement(n.a.Fragment,null,f,b,g,n.a.createElement(I["a"],{memberTeam:i}));if(!o)return n.a.createElement(n.a.Fragment,null,f,b,g,n.a.createElement(T["a"],{member:a}));return n.a.createElement(l["a"],null,function(e){var t=e.width,r=e.height;return n.a.createElement(k["b"],{width:t,height:r,fade:true},f,b,n.a.createElement(w["a"],{className:"p-member_profile__buttons",includeOverflow:true,member:a,showCallButton:true,onClick:h,callLogContext:C["a"].profileSideBar},n.a.createElement(_["e"],{offsetY:8,position:"bottom-right",renderMenu:function e(t){return n.a.createElement(z,{member:a,menuProps:t,team:i,onClick:h})}},n.a.createElement(O["d"],{className:"p-member_profile_buttons__button p-member_profile_buttons__button--overflow",type:"outline"},n.a.createElement(y["b"],{type:"vertical-ellipsis"})))),g,n.a.createElement(Q["b"],{member:a,team:s,types:d,onClick:h}))})}X.displayName="MemberProfileDetails";X.defaultProps=J;function Z(e,t){var a=t.memberId;var r=Object(f["e"])(e,a);if(!r)return{};var n=Object(g["isFeatureEnabled"])(e,"feature_stranger_danger")?Object(h["canMemberInteractById"])(e,a):!Object(m["isStranger"])(r);return{currentMemberId:Object(g["getCurrentUserId"])(e),member:r,memberTeam:Object(b["k"])(e,Object(m["getTeamIdForMember"])(e,r)),team:Object(b["d"])(e),canInteract:n,clogger:Object(p["a"])({state:e})}}var $=Object(i["connect"])(Z)(X);var ee=a(197);var te=function e(t,a,r){if(!t)throw new Error("mountProfileFlexpane must be called with a teamId parameter");var l=Object(o["f"])(t);Object(s["a"])(n.a.createElement(i["Provider"],{store:l},n.a.createElement(ee["a"],null,n.a.createElement($,r))),a)};var ae=te;var re=a(52);Object(re["a"])("interop.mountProfileFlexpane",ae)},,,,function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(85);var s=a.n(i);var o=a(12);var l=a(156);var c=a(26);var u=a(110);var d=a.n(u);var p=a(135);var m=a.n(p);var h=a(169);var v=a.n(h);var f=a(138);var b=a.n(f);var g=a(185);var _=a.n(g);var y=a(11);var O=a(0);var k=a(6);var E=a(22);var C=a(392);var S=a(1236);var w=a(2731);var j=a(2011);var I=a(3797);var T=new k["b"]("calendar");var A={featureCalendarSimpleAgendaView:true,isLoading:true};var N=function(e){_()(t,e);function t(){d()(this,t);return v()(this,b()(t).apply(this,arguments))}m()(t,[{key:"blur",value:function e(){return null}},{key:"focus",value:function e(){return null}},{key:"renderBody",value:function e(){var t=this.props,a=t.isLoading,r=t.featureCalendarSimpleAgendaView;if(!r)return null;if(a)return n.a.createElement("div",{className:"p-calendar_flexpane__loading"},T.t("Loading\u2026"));return n.a.createElement("div",null," This is user calendar ")}},{key:"render",value:function e(){var t=this.props.featureCalendarSimpleAgendaView;if(!t)return null;return n.a.createElement(S["a"],{component:this,order:4},n.a.createElement(C["a"],{id:E["MESSAGE_CONTAINERS"].ACTIVITY_FLEXPANE},n.a.createElement("div",{className:"p-calendar_flexpane"},n.a.createElement(w["a"],null,n.a.createElement(j["a"],{size:"medium"}),n.a.createElement("div",null,T.t("Your calendar"))),this.renderBody())))}}]);return t}(n.a.Component);N.displayName="CalendarFlexpane";N.defaultProps=A;var P=function e(t){return{featureCalendarSimpleAgendaView:Object(y["isFeatureEnabled"])(t,"feature_calendar_simple_agenda_view")}};var M={};var D=Object(o["connect"])(P,M)(N);var x=D;var R=function e(t,a){if(!t)throw new Error("mountUserCalendar must be called with a teamId parameter");var r=Object(c["f"])(t);Object(l["a"])(n.a.createElement(o["Provider"],{store:r},n.a.createElement(x,null)),a)};var F=function e(t){s.a.unmountComponentAtNode(t)};var L={mountUserCalendarFlexPane:R,unmountUserCalendarFlexPane:F};var U=a(52);Object(U["a"])("interop.mountUserCalendarFlexPane",R);Object(U["a"])("interop.unMountUserCalendarFlexPane",F)},,,function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(85);var s=a.n(i);var o=a(12);var l=a(26);var c=a(52);var u=a(444);var d=a(246);var p=a.n(d);var m=a(88);var h=a.n(m);var v=a(11);var f=a(1884);var b=a(232);var g=a(323);var _=a(879);function y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function O(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?y(Object(a),true).forEach(function(t){h()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):y(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var k=function e(t,a){return(t.items||[]).map(function(e){return{value:e.id,label:e.id,entity:e,type:a}})};var E=function e(t){return{featureAuditLogsView:Object(v["isFeatureEnabled"])(t,"feature_audit_logs_view")}};var C=function e(t){return{getAuditLogs:function e(a){return t(Object(f["b"])(O({},a,{reason:"OrgAuditLogsView_getAuditLogs"})))},searchUsers:function e(a){return t(Object(b["A"])({searchTerm:a,count:"20",reason:"OrgAuditLogsView_searchUsers",includeGuests:true,includeDeleted:true})).then(function(e){return k(e,_["a"].USER)})},searchAffected:function e(a){return Promise.all([t(Object(b["A"])({searchTerm:a,count:"5",reason:"OrgAuditLogsView_searchAffected_users",includeGuests:true,includeDeleted:true})).catch(function(){return{}}),t(Object(g["c"])({module:"channels",query:a||"a",count:5,highlight:false,reason:"enterprise-audit-logs",channel_type:"private_exclude"})).catch(function(){return{}}),t(Object(b["B"])({searchTerm:a,count:"5",reason:"OrgAuditLogsView_searchAffected_teams",includeDeleted:true})).catch(function(){return{}})]).then(function(e){var t=p()(e,3),a=t[0],r=t[1],n=t[2];var i=[];var s=k(a,_["a"].USER);s.length&&i.push({label:Object(_["c"])(_["a"].USER),options:s});var o=k(r,_["a"].CHANNEL);o.length&&i.push({label:Object(_["c"])(_["a"].CHANNEL),options:o});var l=k(n,_["a"].WORKSPACE);l.length&&i.push({label:Object(_["c"])(_["a"].WORKSPACE),options:l});return i})},getAuditLogActions:function e(){return t(Object(f["a"])({reason:"OrgAuditLogsView_getAuditLogLogActions"}))}}};var S=Object(o["connect"])(E,C)(_["b"]);var w=S;Object(c["a"])("interop.auditLogs",{render:function e(t,a){if(!t)throw new Error("auditLogs render must be called with a teamId parameter");var r=Object(l["f"])(t);s.a.render(n.a.createElement(o["Provider"],{store:r},n.a.createElement(u["a"],null,n.a.createElement(w,null))),a)},stop:function e(t){s.a.unmountComponentAtNode(t)}})},function(e,t,a){"use strict";a.r(t);var r=a(196);var n=a.n(r);var i=a(1);var s=a.n(i);var o=a(85);var l=a.n(o);var c=a(12);var u=a(26);var d=a(52);var p=a(110);var m=a.n(p);var h=a(135);var v=a.n(h);var f=a(169);var b=a.n(f);var g=a(138);var _=a.n(g);var y=a(185);var O=a.n(y);var k=a(0);var E=a(6);var C=a(93);var S=a(4477);var w=new E["b"]("enterprise_dashboard");var j={location:""};var I=function(e){O()(t,e);function t(){m()(this,t);return b()(this,_()(t).apply(this,arguments))}v()(t,[{key:"renderContentHeader",value:function e(){return s.a.createElement("div",{className:"p-data_location_view__subtitle","data-qa":"location-subtitle"},w.rt("Hosting location: {country_name}",{country_name:this.props.location}))}},{key:"renderESCNote",value:function e(){return s.a.createElement(C["a"],{type:"inline",level:"default",align:"left"},s.a.createElement("span",null,w.rt("<b>Note:</b> when sharing channels with organizations in a different data region, search data for external conversations will be stored in both regions.",null,function(e){var t=e.text,a=e.key;return s.a.createElement("b",{key:a},t)})))}},{key:"renderError",value:function e(){return s.a.createElement(C["a"],{type:"boxed",level:"error",align:"left"},s.a.createElement("span",{"data-qa":"location-error"},w.rt("<b>We had trouble getting the hosting location for your organization.</b> If this problem persists, please <a>contact Slack</a>.",null,function(e){var t=e.tag,a=e.text,r=e.key;switch(t){case"a":return s.a.createElement("a",{key:r,href:"mailto:feedback@slack.com"},a);case"b":return s.a.createElement("b",{key:r},a);default:return a}})))}},{key:"renderLocation",value:function e(){return s.a.createElement("div",{className:"p-data_location_view__location_info"},s.a.createElement("span",null,w.rt("Your organization's \"Customer Data\" as described in Slack's <a>Terms of Service</a> will be stored in {country_name}.",{country_name:this.props.location},function(e){var t=e.text,a=e.key;return s.a.createElement("a",{key:a,target:"_blank",rel:"noopener noreferrer",href:"https://slack.com/terms-of-service"},t)})))}},{key:"render",value:function e(){return s.a.createElement("div",{className:"p-data_location_view"},s.a.createElement("h1",{className:"p-data_location_view__title"},w.t("Data Location")),s.a.createElement("p",{className:"p-data_location_view__title_description"},w.t("Manage the location where your Slack data is stored.")),s.a.createElement("div",{className:"p-data_location_view__container"},s.a.createElement("div",{className:"p-data_location_view__content"},this.renderContentHeader(),this.props.location?this.renderLocation():this.renderError(),this.renderESCNote())))}}]);return t}(i["PureComponent"]);I.displayName="DataLocationView";I.defaultProps=j;var T=function e(t,a){var r=a.location,n=void 0===r?"":r;return{location:n}};var A=Object(c["connect"])(T)(I);var N=A;Object(d["a"])("interop.dataLocation",{render:function e(t,a,r){if(!t)throw new Error("dataLocation render must be called with a teamId parameter");var i=Object(u["f"])(t);var o=window.TS_enterprise_boot_data&&window.TS_enterprise_boot_data.security,d=o.idr;l.a.render(s.a.createElement(c["Provider"],{store:i},s.a.createElement(N,n()({},r,{location:d.data_location}))),a)},stop:function e(t){l.a.unmountComponentAtNode(t)}})},function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(85);var s=a.n(i);var o=a(12);var l=a(26);var c=a(52);var u=a(110);var d=a.n(u);var p=a(135);var m=a.n(p);var h=a(169);var v=a.n(h);var f=a(138);var b=a.n(f);var g=a(147);var _=a.n(g);var y=a(185);var O=a.n(y);var k=a(0);var E=a(2);var C=a(191);var S=a(50);var w=a(530);var j=a(108);var I=a(6);var T=new I["b"]("enterprise_moving_channels");var A=/\r?\n|\r/g;var N={onInputChange:E["noop"],onCheckboxChange:E["noop"],customMessageError:null};var P=300;var M;var D=function e(t){return M[t]};var x=function e(t){t&&t.length>P?Object(C["b"])(Object(C["a"])().channels.setMoveChannelMessageError("message_too_long")):Object(C["b"])(Object(C["a"])().channels.setMoveChannelMessageError())};var R=function(e){O()(t,e);function t(e){var a;d()(this,t);a=v()(this,b()(t).call(this,e));a.state={includeCustomMessage:false,customMessage:""};a.onInputChange=a.onInputChange.bind(_()(a));a.onKeyDown=a.onKeyDown.bind(_()(a));a.onCheckboxChange=a.onCheckboxChange.bind(_()(a));M={message_too_long:T.t("That\u2019s a bit too long. Messages must be fewer than {maxlength} characters.",{maxlength:P}),message_empty:T.t("Please fill in a custom message.")};return a}m()(t,[{key:"onCheckboxChange",value:function e(t){t.persist();var a=t.target.checked;this.setIncludeCustomMessage(a);this.props.onCheckboxChange(a);a?x(this.state.customMessage):Object(C["b"])(Object(C["a"])().channels.setMoveChannelMessageError())}},{key:"onInputChange",value:function e(t){var a=t.replace(A," ");this.setCustomMessage(a);this.props.onInputChange(a);x(a)}},{key:"onKeyDown",value:function e(t){13===t.keyCode&&t.preventDefault()}},{key:"setCustomMessage",value:function e(t){this.setState(function(){return{customMessage:t}})}},{key:"setIncludeCustomMessage",value:function e(t){this.setState(function(){return{includeCustomMessage:t}})}},{key:"renderCheckbox",value:function e(){var t=this.state.includeCustomMessage;var a=T.t("Add a custom message to channel members");var r=T.t("This message will appear within the Slackbot notification that each member will receive.");return n.a.createElement("div",null,n.a.createElement(S["a"],{htmlFor:"mvch_message_checkbox",className:"p-move_channels_msg__label",cursor:"pointer",text:a,subtext:r,type:"inline"},n.a.createElement(j["a"],{id:"mvch_message_checkbox",checked:t,onChange:this.onCheckboxChange,"data-qa":"mvch_message_checkbox"})))}},{key:"renderCustomMessageTextarea",value:function e(){var t=this.state.customMessage;var a=this.props.customMessageError;var r=T.rt("<b>*bold*</b> <i>_italics_</i> and links are allowed. Line breaks aren\u2019t supported for this message.");return n.a.createElement("div",{className:"margin_left_150"},n.a.createElement(w["a"],{id:"ent_mvch_custom_message","data-qa":"ent_mvch_custom_message_input",resize:"none",name:"move_channels_custom_message_input",value:t,hintText:r,maxCharacterLimit:P,onChange:this.onInputChange,onKeyDown:this.onKeyDown,errorText:D(a)||a,errorLevel:"warning",isRequired:true}))}},{key:"render",value:function e(){var t=this.state.includeCustomMessage;return n.a.createElement("div",{"data-qa":"ent_mvch_custom_message"},this.renderCheckbox(),t&&this.renderCustomMessageTextarea())}}]);return t}(r["PureComponent"]);R.displayName="MoveChannelsCustomMessage";R.defaultProps=N;var F=R;var L=F;Object(c["a"])("interop.moveChannelsCustomMessage",{render:function e(t,a,r){if(!t)throw new Error("moveChannelsCustomMessage render must be called with a teamId parameter");var i=Object(l["f"])(t);s.a.render(n.a.createElement(o["Provider"],{store:i},n.a.createElement(L,r)),a)},stop:function e(t){s.a.unmountComponentAtNode(t)}})},,,function(e,t,a){"use strict";a.r(t);var r={};a.r(r);a.d(r,"hydrateStartData",function(){return E});a.d(r,"getStartData",function(){return C});var n=a(218);var i=a.n(n);var s=a(88);var o=a.n(s);var l=a(278);var c=a.n(l);var u=a(2);var d=a(18);var p=a(0);var m=a(9);var h=a(245);var v=a.n(h);var f=a(29);var b=a(31);function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function _(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(Object(a),true).forEach(function(t){o()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var y=Object(f["a"])("Fetch start data",function(e,t,a){var r=a.reason,n=v()(a,["reason"]);var i=_({flannel_api_ver:4,only_self_subteams:1},n);return e(Object(b["b"])({method:"client.boot",args:i,reason:r}))});y.meta={name:"fetchStartData",key:"fetchersStartApiFetchStartData",description:"Fetch start data"};y.propTypes={reason:p["default"].string.isRequired,only_self_subteams:p["default"].oneOf([0,1])};function O(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?O(Object(a),true).forEach(function(t){o()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):O(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var E=Object(d["b"])("Hydrate start data by fetching any required objects",function(){var e=c()(regeneratorRuntime.mark(function e(t,a,r){var n,s,o,l,c,d,p,h,v,f,b,g,_,y,O,E,C,S,w,j,I,T,A,N,P,M,D,x;return regeneratorRuntime.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:n=r.startData;s=k({},n.rtm_start);o=Object(u["get"])(n,"self",Object(u["get"])(s,"self"));l=[].concat(i()(s.channels||[]),i()(s.ims||[]),i()(s.mpims||[]));c=s.channels_latest;d=[];if(l&&c){p=s.last_read,h=void 0===p?{}:p,v=s.channels_priority,f=void 0===v?{}:v,b=s.is_open,g=void 0===b?[]:b,_=s.starred,y=void 0===_?[]:_;O=g.reduce(function(e,t){e[t]=true;return e},{});E=y.reduce(function(e,t){e[t]=true;return e},{});C=l.length;for(S=0;S<C;S++){w=l[S];j=w.id;I=c[j];T=!!c[j];A=Object(m["isIm"])(w)||Object(m["isMpim"])(w)||T;N=h[j];P=f[j];M=!!E[j];D=!!O[j];x=Object(m["isIm"])(w)||Object(m["isMpim"])(w)?k({},w,{is_member:A,latest:I,last_read:N,priority:P,is_starred:M,is_open:D}):k({},w,{is_member:A,latest:I,last_read:N,priority:P,is_starred:M});d.push(x)}}delete s.users;delete s.updated_users;delete s.updated_bots;s.channels=d;s.bots=[];s.users=[o];return t.abrupt("return",Promise.resolve(s));case 14:case"end":return t.stop()}},e)}));return function(t,a,r){return e.apply(this,arguments)}}());E.meta={name:"hydrateStartData",key:"infraBootDataHydrateStartData",description:"Hydrate start data by fetching any required objects"};E.propTypes={startData:p["default"].object.isRequired};var C=Object(d["b"])("Fetch start data",function(){var e=c()(regeneratorRuntime.mark(function e(t,a,r){var n,i;return regeneratorRuntime.wrap(function e(a){while(1)switch(a.prev=a.next){case 0:n=r.reason,i=void 0===n?"legacy-fetch-start-data":n;return a.abrupt("return",t(y({reason:i})).then(function(e){return t(E({startData:{rtm_start:e}}))}));case 2:case"end":return a.stop()}},e)}));return function(t,a,r){return e.apply(this,arguments)}}());C.meta={name:"getStartData",key:"infraBootDataGetStartData",description:"Fetch start data"};C.propTypes={};var S=a(52);Object(S["a"])("interop.boot",{data:r})},,function(e,t,a){},,,function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(85);var s=a.n(i);var o=a(12);var l=a(156);var c=a(26);var u=a(2091);var d=u["a"];var p=a(197);var m=function e(t,a,r){if(!t)throw new Error("mountChannelOptions must be called with a teamId parameter");var i=Object(c["f"])(t);Object(l["a"])(n.a.createElement(o["Provider"],{store:i},n.a.createElement(p["a"],null,n.a.createElement(d,r))),a)};var h=function e(t){s.a.unmountComponentAtNode(t)};var v={mountChannelOptions:m,unmountChannelOptions:h};var f=a(52);Object(f["a"])("interop.mountChannelOptions",m);Object(f["a"])("interop.unmountChannelOptions",h)},function(e,t,a){e.exports=a.p+"cdd6afacd5b69e1657ea496c3e383183.png"},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(85);var s=a.n(i);var o=a(12);var l=a(156);var c=a(26);var u=a(2772);var d=a(88);var p=a.n(d);var m=a(110);var h=a.n(m);var v=a(135);var f=a.n(v);var b=a(169);var g=a.n(b);var _=a(138);var y=a.n(_);var O=a(147);var k=a.n(O);var E=a(185);var C=a.n(E);var S=a(0);var w=a(11);var j=a(62);var I=a(2763);var T=a(179);var A=a(1975);var N=a(2303);function P(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function M(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?P(Object(a),true).forEach(function(t){p()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):P(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var D={featureGranularDnd:false};var x=function(e){C()(t,e);function t(e){var a;h()(this,t);a=g()(this,y()(t).call(this,e));var r=e.dndDays,n=e.dndEnabledDays,i=e.dndBeforeDays,s=e.dndAfterDays,o=e.dndBaseBeforeTime,l=e.dndBaseAfterTime;a.state={dndDays:r,dndEnabledDays:n,dndBeforeDays:i,dndAfterDays:s,dndBaseBeforeTime:o,dndBaseAfterTime:l};a.handleDndDaysChange=a.handleDndDaysChange.bind(k()(a));a.handleTimeChange=a.handleTimeChange.bind(k()(a));a.handleAllDayChange=a.handleAllDayChange.bind(k()(a));a.handleDayChange=a.handleDayChange.bind(k()(a));return a}f()(t,[{key:"getDayOfTheWeek",value:function e(t){if(!t)return null;return t.split("_")[2]}},{key:"handleAllDayChange",value:function e(t){var a=this;var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.pref;var i=this.state.dndDays;var s=t.target.checked?T["b"].DISABLED:T["b"].PARTIAL;if(i===T["a"].CUSTOM){this.setState(function(e){return{dndEnabledDays:M({},e.dndEnabledDays,p()({},a.getDayOfTheWeek(n),s))}});return}var o=i===T["a"].WEEKDAYS;this.setState(function(){return{dndEnabledDays:{monday:s,tuesday:s,wednesday:s,thursday:s,friday:s,saturday:o?T["b"].ALL_DAY:s,sunday:o?T["b"].ALL_DAY:s}}})}},{key:"handleDayChange",value:function e(t){var a=this;var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.pref;var i=t.target.checked?T["b"].PARTIAL:T["b"].ALL_DAY;this.setState(function(e){return{dndEnabledDays:M({},e.dndEnabledDays,p()({},a.getDayOfTheWeek(n),i))}})}},{key:"handleDndDaysChange",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.value;var r=this.state,n=r.dndBaseBeforeTime,i=r.dndBaseAfterTime,s=r.dndEnabledDays;if(a===T["a"].CUSTOM){this.setState(function(){return{dndDays:a}});return}var o=Object(A["a"])({dndDays:a,dndEnabledDays:s});var l=o?T["b"].DISABLED:T["b"].PARTIAL;var c=a===T["a"].WEEKDAYS;this.setState(function(){return{dndDays:a,dndBeforeDays:{monday:n,tuesday:n,wednesday:n,thursday:n,friday:n,saturday:n,sunday:n},dndAfterDays:{monday:i,tuesday:i,wednesday:i,thursday:i,friday:i,saturday:i,sunday:i},dndEnabledDays:{monday:l,tuesday:l,wednesday:l,thursday:l,friday:l,saturday:c?T["b"].ALL_DAY:l,sunday:c?T["b"].ALL_DAY:l}}})}},{key:"handleTimeChange",value:function e(){var t=this;var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=a.value,n=a.type,i=a.pref;var s=this.state.dndDays;var o="dndBeforeDays";var l="dndBaseBeforeTime";if("AFTER"===n){o="dndAfterDays";l="dndBaseAfterTime"}if(s===T["a"].CUSTOM){this.setState(function(e){return p()({},o,M({},e[o],p()({},t.getDayOfTheWeek(i),r)))});return}this.setState(function(){var e;return e={},p()(e,o,{monday:r,tuesday:r,wednesday:r,thursday:r,friday:r,saturday:r,sunday:r}),p()(e,l,r),e})}},{key:"render",value:function e(){var t=this.props.featureGranularDnd;var a=this.state,r=a.dndDays,i=a.dndEnabledDays,s=a.dndBeforeDays,o=a.dndAfterDays,l=a.dndBaseBeforeTime,c=a.dndBaseAfterTime;if(!t)return null;return n.a.createElement(n.a.Fragment,null,n.a.createElement(I["a"],{dndDays:r,dndEnabledDays:i,dndBeforeDays:s,dndAfterDays:o,dndBaseBeforeTime:l,dndBaseAfterTime:c,handleDndDaysChange:this.handleDndDaysChange,handleTimeChange:this.handleTimeChange,handleAllDayChange:this.handleAllDayChange,handleDayChange:this.handleDayChange,featureGranularDnd:t}))}}]);return t}(r["Component"]);x.displayName="DndAdminPreferences";x.defaultProps=D;var R=function e(t){return{featureGranularDnd:Object(w["isFeatureEnabled"])(t,"feature_granular_dnd"),dndDays:Object(j["a"])(t,"dnd_days"),dndEnabledDays:{monday:Object(j["a"])(t,"dnd_enabled_monday"),tuesday:Object(j["a"])(t,"dnd_enabled_tuesday"),wednesday:Object(j["a"])(t,"dnd_enabled_wednesday"),thursday:Object(j["a"])(t,"dnd_enabled_thursday"),friday:Object(j["a"])(t,"dnd_enabled_friday"),saturday:Object(j["a"])(t,"dnd_enabled_saturday"),sunday:Object(j["a"])(t,"dnd_enabled_sunday")},dndBeforeDays:{monday:Object(j["a"])(t,"dnd_before_monday"),tuesday:Object(j["a"])(t,"dnd_before_tuesday"),wednesday:Object(j["a"])(t,"dnd_before_wednesday"),thursday:Object(j["a"])(t,"dnd_before_thursday"),friday:Object(j["a"])(t,"dnd_before_friday"),saturday:Object(j["a"])(t,"dnd_before_saturday"),sunday:Object(j["a"])(t,"dnd_before_sunday")},dndAfterDays:{monday:Object(j["a"])(t,"dnd_after_monday"),tuesday:Object(j["a"])(t,"dnd_after_tuesday"),wednesday:Object(j["a"])(t,"dnd_after_wednesday"),thursday:Object(j["a"])(t,"dnd_after_thursday"),friday:Object(j["a"])(t,"dnd_after_friday"),saturday:Object(j["a"])(t,"dnd_after_saturday"),sunday:Object(j["a"])(t,"dnd_after_sunday")},dndBaseBeforeTime:Object(j["a"])(t,"dnd_before_monday"),dndBaseAfterTime:Object(j["a"])(t,"dnd_after_monday")}};var F=Object(o["connect"])(R)(x);var L=a(197);var U=function e(t,a){if(!t)throw new Error("mountDndPreferences must be called with a teamId parameter");var r=Object(c["f"])(t);Object(l["a"])(n.a.createElement(o["Provider"],{store:r},n.a.createElement(L["a"],null,n.a.createElement(u["a"],null))),a)};var B=function e(t){s.a.unmountComponentAtNode(t)};var q=function e(t,a){if(!a)throw new Error("mountDndAdminPreferences needs a valid reactRoot to mount to");if(!t)throw new Error("mountDndAdminPreferences must be called with a teamId parameter");var r=Object(c["f"])(t);Object(l["a"])(n.a.createElement(o["Provider"],{store:r},n.a.createElement(L["a"],null,n.a.createElement(F,null))),a)};var G=a(52);Object(G["a"])("interop.mountDndPreferences",U);Object(G["a"])("interop.unmountDndPreferences",B);Object(G["a"])("interop.mountDndAdminPreferences",q)},function(e,t,a){"use strict";a.r(t);var r=a(52);var n=a(1);var i=a.n(n);var s=a(12);var o=a(156);var l=a(26);var c=a(110);var u=a.n(c);var d=a(135);var p=a.n(d);var m=a(169);var h=a.n(m);var v=a(138);var f=a.n(v);var b=a(185);var g=a.n(b);var _=a(0);var y=a(2);var O=a(33);var k=a(27);var E=a(545);var C=a(291);var S=a(3809);var w={onMouseEnter:y["noop"]};var j=function(e){g()(t,e);function t(){u()(this,t);return h()(this,f()(t).apply(this,arguments))}p()(t,[{key:"render",value:function e(){var t=this.props,a=t.team,r=t.name,n=t.url,s=t.onMouseEnter;return i.a.createElement("div",{onMouseEnter:s},i.a.createElement("div",{className:"p-classic_nav__team_menu__blurb p-classic_nav__team_menu__blurb--team"},i.a.createElement(C["b"],{id:a.id,size:36,className:"p-classic_nav__team_menu__blurb__icon",tabIndex:"-1"}),i.a.createElement("div",{className:"p-classic_nav__team_menu__blurb__right"},i.a.createElement("div",{className:"p-classic_nav__team_menu__blurb__name"},r),i.a.createElement("div",{className:"p-classic_nav__team_menu__blurb__sub"},n))))}}]);return t}(n["Component"]);j.displayName="TeamBlurb";j.defaultProps=w;var I=function e(t){var a=Object(O["d"])(t);return{team:a,name:Object(k["getTeamDisplayName"])(a),url:a.domain+".slack.com"}};var T=Object(s["connect"])(I)(Object(E["b"])(j));var A=a(197);function N(e,t,a){if(!e)throw new Error("mountTeamBlurb must be called with a teamId parameter");var r=Object(l["f"])(e);Object(o["a"])(i.a.createElement(s["Provider"],{store:r},i.a.createElement(A["a"],null,i.a.createElement(T,a))),t)}Object(r["a"])("interop.mountTeamBlurb",N)},function(e,t,a){},,,function(e,t,a){"use strict";a.r(t);var r=a(52);var n=a(193);var i=a(114);var s=a(292);var o=a(1070);var l=a(837);var c=a(786);var u=a(2729);var d=a(1);var p=a.n(d);var m=a(85);var h=a.n(m);var v=a(12);var f=a(2);var b=a(156);var g=a(26);var _=a(4721);var y=a(197);var O=function e(){return document.getElementById("search_popover_container")};var k=function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:O();if(!t)throw new Error("mountSearch must be called with a teamId parameter");Object(b["a"])(p.a.createElement(v["Provider"],{store:Object(g["f"])(t)},p.a.createElement(y["a"],null,p.a.createElement(_["a"],{onClickRefreshSearch:f["noop"]}))),a)};var E=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O();h.a.unmountComponentAtNode(t)};var C={mountPrimarySearch:k};var S=a(2766);var w=function e(t,a){if(!t)throw new Error("mountSearch must be called with a teamId parameter");if(!a)throw new Error("mountSearch must be called with a reactRoot parameter");Object(b["a"])(p.a.createElement(v["Provider"],{store:Object(g["f"])(t)},p.a.createElement(y["a"],null,p.a.createElement(S["a"],null))),a)};var j={mountSearch:w};var I=a(831);var T=a(781);var A=a(293);var N=function e(t){return function(){return TS.redux.dispatch(t.apply(void 0,arguments))}};Object(r["a"])("interop.searchUi",{getVisible:function e(){return Object(n["v"])(TS.redux.getState())}});Object(r["a"])("interop.searchInputBox",{getSearchInputBoxDisplayQuery:function e(){return Object(s["getSearchInputBoxDisplayQuery"])(TS.redux.getState())},getInFilterTextyString:function e(t){return Object(o["c"])(TS.redux.getState(),t)}});Object(r["a"])("interop.searchActions",{close:N(l["a"]),setFocusedViaTabKey:N(i["o"]),openFromCmdF:N(c["b"]),openFromCmdG:N(c["c"]),toggleFromQuickSwitcherCmd:N(u["a"]),openFromClick:N(c["a"]),openFromSlashCommand:N(c["j"]),openFromKeyDown:N(c["f"]),openFromFilesMenu:N(c["e"])});Object(r["a"])("interop.mountPrimarySearch",k);Object(r["a"])("interop.unmountPrimarySearch",E);Object(r["a"])("interop.mountSearch",w);Object(r["a"])("interop.usePrimarySearch",function(){return Object(I["a"])(TS.redux.getState())});Object(r["a"])("interop.isExperimentAnyOmniSwitcher",function(){return Object(T["b"])(TS.redux.getState())});Object(r["a"])("interop.isSearchAutocompleteOpen",function(){return Object(A["isSearchAutocompleteOpen"])(TS.redux.getState())})},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,,function(e,t,a){e.exports=a.p+"ce2e8d3d37265d64cfe0030477f5489f.png"},,,,,function(e,t,a){"use strict";a.r(t);var r=a(52);var n=a(2);var i=a.n(n);var s=a(11);var o=a(907);var l=a(35);var c=a(498);var u=0;var d=6e4;var p=["focus","focusin","touchstart","mousedown","mouseup","wheel","keydown","keyup","beforeinput","input","scroll","compositionstart","compositionupdate","compositionend"];function m(e){if(!Object(s["isFeatureEnabled"])(e(),"feature_track_time_spent"))return i.a.noop;var t={capture:true,passive:true};var a=function t(){return v(e)};var r=setInterval(a,d);var n=i.a.throttle(function(){document.hasFocus&&document.hasFocus()&&Object(c["f"])(Object(c["d"])(e()))},5e3,{leading:true,trailing:true});p.forEach(function(e){window.addEventListener(e,n,t)});var o=function e(){p.forEach(function(e){window.removeEventListener(e,n,t)});clearInterval(r)};return o}function h(e){return{uid:e.id,timestamp_start:Object(o["a"])(e.startTime),timestamp_refresh:Object(o["a"])(e.lastActivity),seconds_offline:Object(c["a"])(e),version:u}}function v(e){var t=e();var a=Object(c["b"])(Object(c["d"])(t));var r=Object(l["a"])({state:t});i.a.each(a,function(e){null===e.lastLogged?r.track("SESSION_START",{client_session:h(e)}):e.isActive&&e.needsRefresh&&r.track("SESSION_REFRESH",{client_session:h(e)});e.isActive||r.track("SESSION_END",{client_session:h(e)})})}Object(r["a"])("interop.activity_session",{listenForUserEvents:function e(){return m(TS.redux.getState)},recordUserActivity:c["f"]})},function(e,t){e.exports=function e(t,a,r,n){var i=r?r.call(n,t,a):void 0;if(void 0!==i)return!!i;if(t===a)return true;if("object"!==typeof t||!t||"object"!==typeof a||!a)return false;var s=Object.keys(t);var o=Object.keys(a);if(s.length!==o.length)return false;var l=Object.prototype.hasOwnProperty.bind(a);for(var c=0;c<s.length;c++){var u=s[c];if(!l(u))return false;var d=t[u];var p=a[u];i=r?r.call(n,d,p,u):void 0;if(false===i||void 0===i&&d!==p)return false}return true}},function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(12);var s=a(85);var o=a.n(s);var l=a(156);var c=a(26);var u=a(2070);var d=a(197);var p=function e(t,a,r){if(!t)throw new Error("mountToast must be called with a teamId parameter");var s=Object(c["f"])(t);Object(l["a"])(n.a.createElement(i["Provider"],{store:s},n.a.createElement(d["a"],null,n.a.createElement(u["a"],r))),a)};var m=function e(t){o.a.unmountComponentAtNode(t)};var h={mountTermsOfService:p,unmountTermsOfService:m};var v=a(52);Object(v["a"])("interop.mountTermsOfService",p);Object(v["a"])("interop.unmountTermsOfService",m)},function(e,t,a){"use strict";a.r(t);var r=a(88);var n=a.n(r);var i=a(1);var s=a.n(i);var o=a(85);var l=a.n(o);var c=a(12);var u=a(156);var d=a(26);var p=a(2750);var m=a(197);function h(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function v(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?h(Object(a),true).forEach(function(t){n()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):h(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var f=function e(t,a,r){if(!t)throw new Error("mountWorkspaceDirectory must be called with a teamId parameter");var n=Object(d["f"])(t);var i=v({},r,{onClose:function e(){return l.a.unmountComponentAtNode(a)}});Object(u["a"])(s.a.createElement(c["Provider"],{store:n},s.a.createElement(m["a"],null,s.a.createElement(p["b"],i))),a)};var b=function e(t){l.a.unmountComponentAtNode(t)};var g={mountWorkspaceDirectory:f,unmountWorkspaceDirectory:b};var _=a(52);Object(_["a"])("interop.mountWorkspaceDirectory",f);Object(_["a"])("interop.unmountWorkspaceDirectory",b)},function(e,t,a){"use strict";a.r(t);var r=a(52);var n=a(16);var i=Object(n["b"])();function s(){i.info("Greetings Earth!")}function o(){i.info("\ud83d\udc7d")}Object(r["a"])("interop.greetingsEarth",{greet:s,takeMeToYourLeader:o})},function(e,t,a){"use strict";a.r(t);var r=a(52);var n=a(18);var i=a(548);var s=a(11);var o=a(38);var l=a(122);var c=a(61);var u=a(16);var d="https://app.slack.com/api/api.test";var p="app_subdomain_check";var m="app_subdomain_check_completed";var h=12;var v=Object(n["b"])("Tests whether `app.slack.com` is a blocked subdomain",function(e,t){var a=t();var r=Object(c["c"])({state:a});var n=Object(u["a"])({getState:t});if(!Object(s["isFeatureEnabled"])(a,"feature_app_subdomain_check")||Object(o["k"])(a,m)===h)return;i["b"].fetch({url:d+"?_x_"+p+"="+h}).then(function(){r.count(p+"_passed_"+h)}).catch(function(e){r.count(p+"_failed_"+h);var t="Check for `app.slack.com` failed";var a=p;n.error(e,t,{subtype:a})}).finally(function(){e(Object(l["d"])({pref:m,value:h}))})});v.meta={name:"appSubdomainCheck",key:"infraAppSubdomainCheckAppSubdomainCheck",description:"Tests whether `app.slack.com` is a blocked subdomain"};Object(r["a"])("interop.appSubdomainCheck",function(){return TS.redux.dispatch(v())})},,,function(e,t,a){"use strict";a.r(t);var r=a(52);var n=a(2);var i=a(1372);var s=a(18);var o=a(38);var l=a(122);var c=a(61);var u=a(16);var d=["wss-primary","wss-backup","wss-mobile"];var p="_CONNECTION_TEST_TOKEN_";var m="failover_proxy_check";var h=4;var v=1e4;var f=3e3;var b=JSON.stringify({ok:true});function g(e){return new Promise(function(t,a){var r;var i=setTimeout(function(){a(new Error("Socket open timed out"))},v);var s=new WebSocket("wss://"+e+".slack.com/?flannel=1&token="+p);s.onopen=function(){clearTimeout(i);r=setTimeout(function(){a(new Error("Message response timed out"));s.close()},f);s.send(b)};s.onmessage=function(e){clearTimeout(r);try{var i=JSON.parse(e.data);if(!i.ok)throw new Error("Message response is not ok");t();s.onclose=n["noop"];s.close()}catch(e){a(e)}};s.onclose=function(){a(new Error("Socket closed unexpectedly"))}})}function _(){var e={};return Promise.each(d,function(t,a){var r=1e3*Object(i["b"])({attempts:a});return Promise.delay(r).then(function(){return g(t)}).catch(function(a){e[t]=a.message})}).then(function(){return e})}var y=Object(s["b"])("Tests if Flannel socket can be opened and send/receive a message",function(e,t){var a=t();var r=Object(c["c"])({state:a});if(Object(o["k"])(a,"failover_proxy_check_completed")===h)return;_().then(function(a){if(Object.keys(a).length){r.count(m+"_failed_"+h);var n=new Error(JSON.stringify(Object.keys(a)));var i=JSON.stringify(a);var s=m;Object(u["a"])({getState:t}).error(n,i,{subtype:s})}else r.count(m+"_passed_"+h);e(Object(l["d"])({pref:"failover_proxy_check_completed",value:h}))})});y.meta={name:"failoverProxyCheck",key:"infraFailoverProxyCheckFailoverProxyCheck",description:"Tests if Flannel socket can be opened and send/receive a message"};Object(r["a"])("interop.failoverProxyCheck",function(){return TS.redux.dispatch(y())})},function(e,t,a){"use strict";a.r(t);var r=a(2);var n=a(25);var i=a(497);var s=a(231);var o=a(1396);var l=a(1652);var c=a(651);var u=a(21);var d=a(38);var p=a(424);var m=a(2384);var h=a(297);var v=a(17);var f=a(2686);var b=a(2687);var g=a(184);var _=a(261);var y=a(583);function O(e,t){var a=Object(y["e"])(e);var r=Object(y["e"])(t);return Object(_["a"])(a,r)}var k=a(52);function E(e){var t=TS.redux.getState();return Object(n["e"])(t,e)}function C(e){var t=e;e&&"@"===e[0]&&(t=e.substring(1));var a=TS.redux.getState();var r=Object(n["e"])(a,t);if(!r)return null;if(r.isUnknown)return null;if(r.isNonExistent)return null;return r}function S(e){var t=e;e&&"@"===e[0]&&(t=e.substring(1));var a=TS.redux.getState();var r=Object(n["j"])(a,t);if(!r)return null;if(r.isUnknown)return null;if(r.isNonExistent)return null;return r}function w(e){return Object(r["isString"])(e)?C(e):e}function j(e){return Object(s["b"])(TS.redux.getState(),e)}function I(e){return TS.redux.dispatch(Object(h["b"])(e))}function T(e){return TS.redux.dispatch(Object(h["e"])(e))}function A(e){return TS.redux.dispatch(Object(h["d"])(e))}function N(e){return TS.redux.dispatch(Object(l["a"])(e))}function P(e){return TS.redux.dispatch(Object(o["a"])(e))}function M(e){return TS.redux.dispatch(Object(i["c"])(e))}function D(e){return TS.redux.dispatch(Object(i["d"])(e))}function x(e){var t=TS.redux.getState();var a=Object(u["b"])(t);Object(c["b"])(a,e)}function R(e){var t=TS.redux.getState();var a=Object(u["b"])(t);return Object(c["a"])(a,e)}function F(){return g["b"].pauseRefetch()}function L(e,t){return TS.redux.dispatch(Object(f["a"])({teamId:e,fields:t}))}function U(e,t){return TS.redux.dispatch(Object(b["a"])({teamId:e,fieldsToDelete:t}))}Object(k["a"])("interop.members",{getMemberById:C,getPotentiallyUnknownMemberById:E,getRawMemberById:S,dangerouslyAddMember:M,dangerouslyBulkAddMembers:D,membersSelectorsTest:n["q"],shouldDisplayRealNames:function e(){return Object(d["l"])(TS.redux.getState())},getCurrentMember:function e(){return Object(n["b"])(TS.redux.getState())},getUserHighlightWords:function e(){return Object(p["a"])(TS.redux.getState())},getPrefCompliantMemberName:function e(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return v["getPrefCompliantMemberName"].apply(void 0,[TS.redux.getState()].concat(a))},getPrefCompliantMemberNameById:function e(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return v["getPrefCompliantMemberNameById"].apply(void 0,[TS.redux.getState()].concat(a))},getPrefCompliantMemberNameLowerCase:function e(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return v["getPrefCompliantMemberNameLowerCase"].apply(void 0,[TS.redux.getState()].concat(a))},getMemberByName:function e(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return n["f"].apply(void 0,[TS.redux.getState()].concat(a))},getMemberByEmail:function e(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return n["d"].apply(void 0,[TS.redux.getState()].concat(a))},memberExistsWithName:function e(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return n["p"].apply(void 0,[TS.redux.getState()].concat(a))},hasMemberWithId:function e(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return n["k"].apply(void 0,[TS.redux.getState()].concat(a))},getAllMembers:function e(){return Object(n["a"])(TS.redux.getState())},isAppmin:function e(){return Object(n["l"])(TS.redux.getState())},isExternal:v["isExternal"],isExternalById:function e(t){return Object(v["isExternalById"])(TS.redux.getState(),t)},isMember:v["isMember"],isMemberOnTeam:v["isMemberOnTeam"],fetchMemberProfileExtras:function e(t,a){return TS.redux.dispatch(Object(h["f"])({userId:t,keys:a}))},memberSorterByName:O,getMemberCurrentStatus:n["g"],getMemberMentionName:v["getMemberMentionName"],getMemberMentionRegExp:v["getMemberMentionRegExp"],getMemberRealName:function e(t){return Object(v["getMemberRealName"])(w(t))},getMemberRealNameLowerCase:function e(t){return Object(v["getMemberRealNameLowerCase"])(w(t))},getMemberProfileFieldDisplayName:function e(t){return Object(v["getMemberProfileFieldDisplayName"])(w(t))},getMemberProfileFieldDisplayNameLowerCase:function e(t){return Object(v["getMemberProfileFieldDisplayNameLowerCase"])(w(t))},getMemberSecondaryName:function e(t){return Object(v["getMemberSecondaryName"])(TS.redux.getState(),w(t))},ensureMembersArePresent:function e(t){return TS.redux.dispatch(Object(m["a"])({memberIds:t}))},processMemberForUpserting:j,fetchAndUpsertMembersById:I,fetchAndUpsertMembersWithQuery:T,fetchAndUpsertMembersFromFlannel:A,markObjectsAsFresh:x,isObjectFresh:R,pauseRefetch:F,updateCurrentMemberPresence:P,updateCurrentMemberProfile:N,updateProfileFields:L,deleteProfileFields:U,canMemberJoinChannel:function e(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return v["canMemberJoinChannel"].apply(void 0,[TS.redux.getState()].concat(a))},canMemberBeInvitedToChannel:function e(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return v["canMemberBeInvitedToChannel"].apply(void 0,[TS.redux.getState()].concat(a))}})},function(e,t,a){"use strict";a.r(t);var r=a(196);var n=a.n(r);var i=a(1);var s=a.n(i);var o=a(85);var l=a.n(o);var c=a(12);var u=a(2);var d=a(156);var p=a(26);var m=a(2082);var h=a(197);var v=function e(t,a){var r=document.getElementById("channel_create_modal_mount_point");if(!r)throw new Error("Could not find a valid channel create modal mount point.");if(!t)throw new Error("mountChannelCreateModal must be called with a valid teamId parameter.");var i=Object(p["f"])(t);var o=function e(){Object(u["defer"])(function(){l.a.unmountComponentAtNode(r)})};Object(d["a"])(s.a.createElement(c["Provider"],{store:i},s.a.createElement(h["a"],null,s.a.createElement(m["a"],n()({},a,{onClose:o})))),r)};var f={mountChannelCreateModal:v};var b=a(52);Object(b["a"])("interop.mountChannelCreateModal",v)},function(e,t,a){"use strict";a.r(t);var r=a(196);var n=a.n(r);var i=a(1);var s=a.n(i);var o=a(85);var l=a.n(o);var c=a(12);var u=a(2);var d=a(156);var p=a(26);var m=a(2225);var h=a(197);var v=function e(t,a){var r=document.getElementById("channel_invite_modal_mount_point");if(!r)throw new Error("Could not find a valid invite modal mount point.");if(!t)throw new Error("mountChannelInviteModal must be called with a valid teamId parameter.");var i=Object(p["f"])(t);var o=function e(){Object(u["defer"])(function(){l.a.unmountComponentAtNode(r)})};Object(d["a"])(s.a.createElement(c["Provider"],{store:i},s.a.createElement(h["a"],null,s.a.createElement(m["a"],n()({},a,{onClose:o})))),r)};var f={mountChannelInviteModal:v};var b=a(52);Object(b["a"])("interop.mountChannelInviteModal",v)},function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(85);var s=a.n(i);var o=a(12);var l=a(156);var c=a(26);var u=a(1700);var d=a(61);var p=a(197);var m=function e(t,a,r){if(!t)throw new Error("mountCustomStatusInput must be called with a teamId parameter");var i=Object(c["f"])(t);var s=Object(d["c"])({state:i.getState()});var m="react_custom_status_input_render";s.mark(m+"_mark");Object(l["a"])(n.a.createElement(o["Provider"],{store:i},n.a.createElement(p["a"],null,n.a.createElement(u["c"],r))),a,function(){return s.measureAndClear(m+"_mark",m)})};var h=s.a.unmountComponentAtNode;var v=a(52);Object(v["a"])("interop.mountCustomStatusInput",m);Object(v["a"])("interop.unmountCustomStatusInput",h)},function(e,t,a){"use strict";a.r(t);var r=a(196);var n=a.n(r);var i=a(1);var s=a.n(i);var o=a(12);var l=a(156);var c=a(26);var u=a(385);var d=a(2749);var p=a(61);var m=a(197);var h=function e(t,a,r,i){if(!t)throw new Error("mountEmojiPicker must be called with a teamId parameter");var h=Object(c["f"])(t);var v=Object(p["c"])({state:h.getState()});var f="react_emoji_menu_render";v.mark(f+"_mark");Object(l["a"])(s.a.createElement(o["Provider"],{store:h},s.a.createElement(m["a"],null,s.a.createElement(u["a"],n()({shouldFade:false},i),s.a.createElement(d["a"],r)))),a,function(){return v.measureAndClear(f+"_mark",f)})};var v=h;var f=a(52);Object(f["a"])("interop.mountEmojiPicker",v)},function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(85);var s=a.n(i);var o=a(12);var l=a(156);var c=a(26);var u=a(1689);var d=a(197);function p(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e)throw new Error("mountFileUploadBanner must be called with a teamId parameter");var r=Object(c["f"])(e);Object(l["a"])(n.a.createElement(o["Provider"],{store:r},n.a.createElement(d["a"],null,n.a.createElement(u["a"],a))),t)}function m(e){s.a.unmountComponentAtNode(e)}var h=a(52);Object(h["a"])("interop.mountFileUploadBanner",p);Object(h["a"])("interop.unmountFileUploadBanner",m)},function(e,t,a){"use strict";a.r(t);var r=a(196);var n=a.n(r);var i=a(1);var s=a.n(i);var o=a(85);var l=a.n(o);var c=a(12);var u=a(2);var d=a(156);var p=a(26);var m=a(2733);var h=a(197);var v=function e(t,a){var r=document.getElementById("help_modal_mount_point");if(!r)throw new Error("Could not find a valid help modal mount point.");if(!t)throw new Error("mountHelpModal must be called with a valid teamId parameter.");var i=Object(p["f"])(t);var o=function e(){Object(u["defer"])(function(){l.a.unmountComponentAtNode(r)})};Object(d["a"])(s.a.createElement(c["Provider"],{store:i},s.a.createElement(h["a"],null,s.a.createElement(m["a"],n()({},a,{onClose:o})))),r)};var f={mountHelpModal:v};var b=a(52);Object(b["a"])("interop.mountHelpModal",v)},function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(85);var s=a.n(i);var o=a(12);var l=a(156);var c=a(26);var u=a(2755);var d=a(197);var p=function e(t,a,r){var i=r.image,s=r.onDidZoomLevelChange;if(!t)throw new Error("mountImageViewer must be called with a teamId parameter");var p=Object(c["f"])(t);Object(l["a"])(n.a.createElement(o["Provider"],{store:p},n.a.createElement(d["a"],null,n.a.createElement(u["a"],{image:i,onDidZoomLevelChange:s}))),a)};var m=function e(t){s.a.unmountComponentAtNode(t)};var h=a(52);Object(h["a"])("interop.mountImageViewer",p);Object(h["a"])("interop.unmountImageViewer",m)},function(e,t,a){"use strict";a.r(t);var r=a(196);var n=a.n(r);var i=a(1);var s=a.n(i);var o=a(85);var l=a.n(o);var c=a(12);var u=a(2);var d=a(156);var p=a(26);var m=a(2068);var h=a(197);var v=function e(t,a){var r=document.getElementById("invite_modal_mount_point");if(!r)throw new Error("Could not find a valid invite modal mount point.");if(!t)throw new Error("mountInviteModal must be called with a valid teamId parameter.");var i=Object(p["f"])(t);var o=function e(){Object(u["defer"])(function(){l.a.unmountComponentAtNode(r)})};Object(d["a"])(s.a.createElement(c["Provider"],{store:i},s.a.createElement(h["a"],null,s.a.createElement(m["a"],n()({},a,{onClose:o})))),r)};var f={mountInviteModal:v};var b=a(52);Object(b["a"])("interop.mountInviteModal",v)},function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(12);var s=a(156);var o=a(26);var l=a(1219);var c=function e(t,a,r){if(!t)throw new Error("mountLazyFilterSelect must be called with a teamId parameter");var c=Object(o["f"])(t);Object(s["a"])(n.a.createElement(i["Provider"],{store:c},n.a.createElement(l["a"],r)),a)};var u=c;var d=a(52);Object(d["a"])("interop.mountLazyFilterSelect",u)},function(e,t,a){},,function(e,t,a){"use strict";a.r(t);var r=a(196);var n=a.n(r);var i=a(1);var s=a.n(i);var o=a(85);var l=a.n(o);var c=a(12);var u=a(156);var d=a(26);var p=a(385);var m=a(57);var h=a(61);var v=a(197);var f=function e(t,a,r,i){if(!t)throw new Error("mountMenu must be called with a teamId parameter");var o=Object(d["f"])(t);var l=Object(h["c"])({state:o.getState()});var f=function e(){return a};var b="react_menu_render";l.mark(b+"_mark");Object(u["a"])(s.a.createElement(c["Provider"],{store:o},s.a.createElement(v["a"],null,s.a.createElement(p["a"],n()({},i,{parentSelector:f,shouldFade:false}),s.a.createElement(m["a"],r)))),a,function(){return l.measureAndClear(b+"_mark",b)})};var b=l.a.unmountComponentAtNode;var g={mountMenu:f,unmountMenu:b};var _=a(52);Object(_["a"])("interop.mountMenu",f);Object(_["a"])("interop.unmountMenu",b)},function(e,t,a){e.exports=a.p+"be9654acaf0796fa0c65589b57e7d0c9.png"},function(e,t,a){"use strict";a.r(t);var r=a(52);var n=a(1);var i=a.n(n);var s=a(12);var o=a(156);var l=a(26);var c=a(4961);var u=a(385);var d=a(197);function p(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{isOpen:false};if(!e)throw new Error("mountMessageActionsMenu must be called with a teamId parameter");Object(o["a"])(i.a.createElement(s["Provider"],{store:Object(l["f"])(e)},i.a.createElement(d["a"],null,i.a.createElement(u["a"],r,r.isOpen?i.a.createElement(c["a"],a):i.a.createElement("span",null)))),t)}var m=p;var h=a(22);Object(r["a"])("interop.mountMessageActionsMenu",m);Object(r["a"])("interop.mountMessageActionsMenu.actionIds",h["SLACK_ACTION_IDS"])},,function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(85);var s=a.n(i);var o=a(12);var l=a(156);var c=a(26);var u=a(2956);var d=a(197);var p=function e(t,a){if(!t)throw new Error("mountBannerContainer must be called with a teamId parameter");Object(l["a"])(n.a.createElement(o["Provider"],{store:Object(c["f"])(t)},n.a.createElement(d["a"],null,n.a.createElement(u["a"],null))),a)};var m=function e(t){s.a.unmountComponentAtNode(t)};var h=a(52);Object(h["a"])("interop.mountMessagePaneBanner",p);Object(h["a"])("interop.unmountMessagePaneBanner",m)},function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(85);var s=a.n(i);var o=a(12);var l=a(156);var c=a(26);var u=a(2787);function d(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e)throw new Error("mountMessagePaneDragOverlay must be called with a teamId parameter");var r=Object(c["f"])(e);Object(l["a"])(n.a.createElement(o["Provider"],{store:r},n.a.createElement(u["a"],a)),t)}function p(e){s.a.unmountComponentAtNode(e)}var m=a(52);Object(m["a"])("interop.mountMessagePaneDragOverlay",d);Object(m["a"])("interop.unmountMessagePaneDragOverlay",p)},function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(85);var s=a.n(i);var o=a(12);var l=a(156);var c=a(26);var u=a(1159);var d=a(197);var p=function e(t,a){if(!t)throw new Error("mountModalContainer must be called with a teamId parameter");var r=Object(c["f"])(t);Object(l["a"])(n.a.createElement(o["Provider"],{store:r},n.a.createElement(d["a"],null,n.a.createElement(u["a"],null))),a)};var m=function e(t){s.a.unmountComponentAtNode(t)};var h={mountModalContainer:p,unmountModalContainer:m};var v=a(52);Object(v["a"])("interop.modalContainer",{mountModalContainer:p,unmountModalContainer:m})},function(e,t,a){"use strict";a.r(t);var r=a(196);var n=a.n(r);var i=a(88);var s=a.n(i);var o=a(1);var l=a.n(o);var c=a(12);var u=a(85);var d=a.n(u);var p=a(197);var m=a(385);var h=a(156);var v=a(26);var f=a(5173);function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function g(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(Object(a),true).forEach(function(t){s()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var _=function e(t,a,r,i){if(!t)throw new Error("unmountNewFileMenu must be called with a teamId parameter");var s=Object(v["f"])(t);var o=g({onMenuItemSelected:r.onMenuItemSelected},i);Object(h["a"])(l.a.createElement(c["Provider"],{store:s},l.a.createElement(p["a"],null,l.a.createElement(m["a"],n()({shouldFade:false},i),l.a.createElement(f["a"],n()({menuProps:o},r))))),a)};var y=function e(t){d.a.unmountComponentAtNode(t)};var O={mountNewFileMenu:_,unmountNewFileMenu:y};var k=a(52);Object(k["a"])("interop.mountNewFileMenu",_)},function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(12);var s=a(156);var o=a(26);var l=a(2025);var c=a(197);var u=function e(t,a,r){if(!t)throw new Error("mountNotificationBar must be called with a teamId parameter");var u=Object(o["f"])(t);Object(s["a"])(n.a.createElement(i["Provider"],{store:u},n.a.createElement(c["a"],null,n.a.createElement(l["a"],r))),a)};var d={mountNotificationBar:u};var p=a(52);Object(p["a"])("interop.mountNotificationBar",u)},,function(e,t,a){"use strict";a.r(t);var r=a(245);var n=a.n(r);var i=a(1);var s=a.n(i);var o=a(85);var l=a.n(o);var c=a(12);var u=a(156);var d=a(26);var p=a(852);var m=function e(t,a,r){if(!t)throw new Error("mountScrollbar must be called with a teamId parameter");var i=Object(d["f"])(t);var o=r.safeHtml,l=n()(r,["safeHtml"]);Object(u["a"])(s.a.createElement(c["Provider"],{store:i},s.a.createElement(p["b"],l,s.a.createElement("div",{dangerouslySetInnerHTML:{__html:o}}))),a)};var h=function e(t){l.a.unmountComponentAtNode(t)};var v={mountScrollbar:m,unmountScrollbar:h};var f=a(52);Object(f["a"])("interop.mountScrollbar",m);Object(f["a"])("interop.unmountScrollbar",h)},function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(85);var s=a.n(i);var o=a(12);var l=a(156);var c=a(26);var u=a(2012);function d(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e)throw new Error("mountThreadDragOverlay must be called with a teamId parameter");var r=Object(c["f"])(e);Object(l["a"])(n.a.createElement(o["Provider"],{store:r},n.a.createElement(u["a"],a)),t)}function p(e){s.a.unmountComponentAtNode(e)}var m=a(52);Object(m["a"])("interop.mountThreadDragOverlay",d);Object(m["a"])("interop.unmountThreadDragOverlay",p)},function(e,t,a){e.exports=a.p+"8481913e86a1e0d785670b4028213bda.png"},function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(85);var s=a.n(i);var o=a(12);var l=a(156);var c=a(26);var u=a(1210);var d=a(1135);var p=function e(t,a,r,i){if(!t)throw new Error("mountTooltipTip must be called with a teamId parameter");var s=Object(c["f"])(t);r?Object(l["a"])(n.a.createElement(o["Provider"],{store:s},n.a.createElement(u["a"],i,n.a.createElement(d["a"],{id:r,size:"small",showAvatar:true,useDarkMode:true,showPresence:true,forcedPrimary:"real_name"}))),a):Object(l["a"])(n.a.createElement(o["Provider"],{store:s},n.a.createElement(u["a"],i)),a)};var m=function e(t){s.a.unmountComponentAtNode(t)};var h={mountTooltipTip:p,unmountTooltipTip:m};var v=a(52);Object(v["a"])("interop.mountTooltipTip",p);Object(v["a"])("interop.unmountTooltipTip",m)},,function(e,t,a){e.exports=a.p+"be89942e32e59ce394752ca5c57e21b9.png"},function(e,t,a){e.exports=a.p+"abefb2a6eae3c05efbc1385beb89334a.png"},function(e,t,a){e.exports=a.p+"4eec854dd2f118ca702ff7503b19bc8e.png"},function(e,t,a){e.exports=a.p+"d4bcb6d5a8c25694df4cdfd9688c9b42.png"},function(e,t,a){e.exports=a.p+"5027823b6422715c9474f83d66c497cc.png"},function(e,t,a){e.exports=a.p+"01ee1e17e7a588f0bb8c9e798edcbc32.png"},function(e,t,a){e.exports=a.p+"321c1849def8634601d2a5611b5307d8.png"},function(e,t,a){e.exports=a.p+"81786aff3ca4193ee7968532c97d664f.png"},function(e,t,a){e.exports=a.p+"3a400be54d1d8b78b48107359e37cbc4.png"},,function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(12);var s=a(85);var o=a.n(s);var l=a(156);var c=a(26);var u=a(5085);var d=a(197);var p=function e(t,a){if(!t)throw new Error("mountUserGroupsFlexpane must be called with a teamId parameter");var r=Object(c["f"])(t);Object(l["a"])(n.a.createElement(i["Provider"],{store:r},n.a.createElement(d["a"],null,n.a.createElement(u["f"],null))),a)};var m=function e(t){o.a.unmountComponentAtNode(t)};var h=a(52);Object(h["a"])("interop.mountUserGroupsFlexpane",p);Object(h["a"])("interop.unmountUserGroupsFlexpane",m)},,,,function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(12);var s=a(85);var o=a.n(s);var l=a(156);var c=a(26);var u=a(5089);var d=a(197);var p=function e(t,a,r){if(!t)throw new Error("mountUserGroupsFlexpane must be called with a teamId parameter");var s=Object(c["f"])(t);Object(l["a"])(n.a.createElement(i["Provider"],{store:s},n.a.createElement(d["a"],null,n.a.createElement(u["a"],r))),a)};var m=function e(t){o.a.unmountComponentAtNode(t)};var h=a(52);Object(h["a"])("interop.mountUserGroupsList",p);Object(h["a"])("interop.unmountUserGroupsList",m)},,function(e,t,a){"use strict";a.r(t);var r=a(52);var n=a(423);var i=a(240);var s=a(2);var o=a(1557);var l=/[,\uff0c\u3001]/;function c(e){if(!Object(s["isString"])(e))return"";return Object(o["a"])(e).split(l).map(s["trim"]).filter(s["identity"]).join(",")}var u=a(122);var d=a(38);var p=a(440);var m=a(424);var h=a(2648);var v=a(369);var f=a(1434);var b=a(62);var g=a(1193);var _=a(1480);var y=a(605);var O=a(1668);var k=a(352);function E(){return TS.redux.dispatch(p["b"].apply(void 0,arguments))}function C(){return TS.redux.dispatch(p["c"].apply(void 0,arguments))}function S(){return TS.redux.dispatch(p["a"].apply(void 0,arguments))}function w(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return v["d"].apply(void 0,[TS.redux.getState()].concat(t))}function j(){return Object(v["a"])(TS.redux.getState())}function I(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return v["c"].apply(void 0,[TS.redux.getState()].concat(t))}function T(){return TS.redux.dispatch(f["b"].apply(void 0,arguments))}function A(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return b["a"].apply(void 0,[TS.redux.getState()].concat(t))}function N(){return TS.redux.dispatch(g["b"].apply(void 0,arguments))}function P(){return TS.redux.dispatch(_["c"].apply(void 0,arguments))}function M(){return TS.redux.dispatch(y["c"].apply(void 0,arguments))}function D(){return TS.redux.dispatch(y["d"].apply(void 0,arguments))}function x(){return TS.redux.dispatch(y["f"].apply(void 0,arguments))}function R(){return TS.redux.dispatch(y["e"].apply(void 0,arguments))}function F(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return d["k"].apply(void 0,[TS.redux.getState()].concat(t))}function L(e){return Object(k["g"])(TS.redux.getState(),e)}function U(){var e=Object(i["getEnterpriseSharedChannelsPref"])(TS.redux.getState()),t=e.users,a=e.userGroups;(t&&t.length||a&&a.length)&&TS.redux.dispatch(Object(O["a"])({query:"",userIds:t,userGroupIds:a}))}Object(r["a"])("interop.prefs",{setUserPref:E,setUserPrefs:C,setMultipleUserPrefs:S,getNotificationsGlobalPref:w,getAllNotificationOverrides:j,getNotificationsChannelPref:I,setChannelNotificationOverrideAndCallApi:T,getTeamPref:A,setTeamPrefs:P,setTeamPref:N,setEnterprisePrefs:M,setOrgDefaultChannels:D,setOrgWideChannels:x,setOrgMembersCount:R,getOrgPref:L,getHighlightWords:function e(){var t=TS.redux.getState();return Object(m["a"])(t)},getUserGroupHighlightById:n["d"],cleanHighlightWords:c,setUserPrefByApi:u["d"],getUserPref:F,getReadStateTrackingPref:function e(){return Object(h["a"])(TS.redux.getState())},prefetchMembersAndUserGroups:U})},function(e,t,a){"use strict";a.r(t);var r=a(2);var n=a.n(r);function i(e){if(e._last_query!==e.query)return true;if(e._last_include_org!==e.include_org)return true;if(n.a.xor(e._last_org_team_ids,e.org_team_ids).length)return true;return false}var s=a(1599);var o=a(277);var l=a(598);var c=a(52);Object(c["a"])("interop.searcher",{isNewMemberSearch:i,emojiSkiplist:s["a"],search:o["e"],recordFrecencyEvent:l["b"]})},function(e,t,a){"use strict";a.r(t);var r=a(52);var n=a(1307);var i=a(888);var s=a(1186);var o=a(2);var l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.text,a=e.prefix,r=e.suffix;if(!t)return t;var n=t;if(a&&!Object(o["startsWith"])(n,a)){var i=n.search(/\S/);n=i>0?n.slice(0,i)+a+n.slice(i):a+n}if(r&&!Object(o["endsWith"])(n,r)){var s=n.search(/\s+$/);s>0?n=n.slice(0,s)+r+n.slice(s):n+=r}return n};var c=a(1557);var u=a(410);Object(r["a"])("interop.format",{formatBroadcastCommand:n["a"],formatChannelName:i["a"],locateHighlightWords:s["a"],surroundTextWith:l,replaceUnicodeDoppelgangers:c["a"],cleanMessageTextWithState:u["b"]})},,function(e,t,a){"use strict";a.r(t);var r=a(88);var n=a.n(r);var i=a(110);var s=a.n(i);var o=a(135);var l=a.n(o);var c=a(169);var u=a.n(c);var d=a(138);var p=a.n(d);var m=a(147);var h=a.n(m);var v=a(185);var f=a.n(v);var b=a(2);var g=a(30);var _=a(1);var y=a.n(_);var O=a(0);var k=a(12);var E=a(13);var C=a.n(E);var S=a(188);var w=a(117);var j=a(108);var I=a(50);var T=a(2401);var A=a(18);var N=a(21);var P=a(211);var M=a(1437);var D=a(919);var x=a(6);var R=a(168);var F=a(2991);var L=new x["b"]("snippet-dialog");var U="text/plain";var B=Object(A["b"])("Upload a Snippet, maybe share it too",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.broadcast,n=a.fileName,i=a.fileType,s=a.fileContent,o=a.channelOrMemberId,l=a.threadTs,c=a.introMessage,u=a.blocks;var d=t();var p=n||L.t("Untitled");var m=F["a"][i];var h=m&&m.mimeType||U;var v=new Blob([s],{type:h});v.name=p;v.snippetType=i;var f=Object(N["b"])(d);var b=Object(D["a"])(f);if(o)return e(Object(M["a"])({channelOrMemberId:o})).then(function(t){return b.uploadFiles({files:[v],shareData:{channelId:t,threadTs:t?l:void 0,clientMsgId:t?Object(R["a"])():void 0,introMessage:c,blocks:u,broadcast:!(!t||!l)&&r}}).then(function(){if(l)return Promise.resolve();return e(Object(P["a"])({id:t}))})});return b.uploadFiles({files:[v]})});B.meta={name:"uploadSnippet",key:"actionsUploadSnippetUploadSnippet",description:"Upload a Snippet, maybe share it too"};B.propTypes={fileName:O["default"].string,fileType:O["default"].string,fileContent:O["default"].string.isRequired,channelOrMemberId:O["default"].string,threadTs:O["default"].string,introMessage:O["default"].string,blocks:O["default"].array,broadcast:O["default"].bool};var q=B;var G=a(1438);var H=a(22);var W=a(202);var V=a(596);var K=a(318);var z=a(39);var Q=a(1659);var Y=a(1660);var J=a(1352);var X=a(1661);var Z=a(1965);var $=a(1966);var ee=a(1911);a.d(t,"BaseSnippetDialog",function(){return ie});function te(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function ae(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?te(Object(a),true).forEach(function(t){n()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):te(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var re=new x["b"]("snippet-dialog");var ne={initialName:"",initialType:void 0,initialSnippetText:"",initialChannelId:void 0,initialShareWith:void 0,threadTs:void 0,viewContext:void 0,initialContents:void 0,resetChannelId:void 0,msgText:"",channelType:null,selectedChannelId:null,disallowedKeywordInMsgText:null,msgOps:void 0};var ie=function(e){f()(t,e);function t(e){var a;s()(this,t);a=u()(this,p()(t).call(this,e));Object(g["a"])(h()(a),["handleBroadcastChange","handleFileNameChange","handleFileTypeChange","handleFileContentChange","handleShareWithChange","handleMsgTextChange","handleSubmit","handleSubmitError","shouldShowSpeedBump","handleCancel"]);a.state={fileName:e.initialName,fileType:e.initialType,fileContent:e.initialSnippetText,shareWith:Object(b["isBoolean"])(e.initialShareWith)?e.initialShareWith:!!e.initialChannelId,overMsgLengthLimit:false,broadcast:false};return a}l()(t,[{key:"handleBroadcastChange",value:function e(t){this.setState(function(){return{broadcast:t}})}},{key:"handleCancel",value:function e(){var t=this.props,a=t.initialContents,r=t.resetChannelId,n=t.threadTs,i=t.viewContext;var s=Object(W["a"])({channelId:r,threadTs:n,viewContext:i});if(!s)return;if(!a||!s.setContents||!s.focus)return;s.setContents(a);s.focus()}},{key:"handleFileContentChange",value:function e(t){this.setState(function(){return{fileContent:t}})}},{key:"handleFileNameChange",value:function e(t){this.setState(function(){return{fileName:t}})}},{key:"handleFileTypeChange",value:function e(t){this.setState(function(){return{fileType:t}})}},{key:"handleMsgTextChange",value:function e(t){var a=t.msgOps,r=t.overLimit;this.props.setMsgOps(a);this.setState(function(){return{overMsgLengthLimit:r}})}},{key:"handleShareWithChange",value:function e(t){var a=t.target.checked;this.setState(function(){return{shareWith:!!a}})}},{key:"handleSubmit",value:function e(){var t=this.props,a=t.selectedChannelId,r=t.msgText,n=t.msgOps,i=t.threadTs;var s=this.state,o=s.broadcast,l=s.fileName,c=s.fileType,u=s.fileContent,d=s.shareWith;var p=this.props.converMsgOpsToRichTextMessage({msgOps:n,channelId:a,inThread:!!i});this.props.uploadSnippet({fileName:Object(K["c"])({locale:Object(V["a"])(),text:l}),fileType:c,fileContent:u,channelOrMemberId:d?a:void 0,threadTs:d?i:void 0,introMessage:r,blocks:p,broadcast:o}).catch(this.handleSubmitError);this.props.closeModal()}},{key:"handleSubmitError",value:function e(){var t=this.props,a=t.selectedChannelId,r=t.threadTs,n=t.msgText,i=t.initialContents,s=t.resetChannelId,o=t.viewContext;var l=this.state,c=l.fileName,u=l.fileType,d=l.fileContent,p=l.shareWith;this.props.openModal({element:y.a.createElement(le,{initialName:c,initialType:u,initialSnippetText:d,initialChannelId:a,initialShareWith:p,initialContents:i,initialText:n,threadTs:r,resetChannelId:s,viewContext:o})})}},{key:"isGoButtonDisabled",value:function e(){var t=this.props,a=t.disallowedKeywordInMsgText,r=t.canPostInSelectedChannel,n=t.threadTs,i=t.canThread;var s=this.state,o=s.overMsgLengthLimit,l=s.fileName,c=s.fileContent,u=s.shareWith;var d=l.length>H["MAX_FILENAME_LENGTH"];return u&&!r&&!n||u&&n&&!i||!!a||!c||o||d}},{key:"maybeRenderBroadcast",value:function e(){var t=this.props,a=t.threadTs,r=t.canPostInSelectedChannel,n=t.channelType,i=t.selectedChannelName;var s=this.state.broadcast;if(!a||!r)return null;return y.a.createElement("div",{className:"p-snippet_dialog__broadcast_section"},y.a.createElement($["a"],{channelType:n,selectedChannelName:i,value:s,onChange:this.handleBroadcastChange}))}},{key:"shouldShowSpeedBump",value:function e(t){if("cancel"===t||"close"===t){var a=this.state.fileContent;var r=this.props.initialSnippetText;return a!==r}return false}},{key:"renderChannelPicker",value:function e(){var t=this.props,a=t.selectedChannelId,r=t.setSelectedChannel;var n=this.state.shareWith;return y.a.createElement(Y["a"],{onChange:r,initialChannelId:a,isDisabled:!n,dialogType:"share_snippet_dialog"})}},{key:"renderMessageInput",value:function e(){var t=this.props,a=t.selectedChannelId,r=t.msgText;var n=this.state.shareWith;var i=re.t("Add a message, if you\u2019d like.",{fallbackHash:"23c9aa1fa55b5fbe8da1b3748ad70b595d6fadc5",fallbackHashNs:"share-dialog"});var s=C()("p-share_dialog__section","p-share_dialog__create_snippet_message_input",{"p-share_dialog__create_snippet_message_input--hide":!n});return y.a.createElement("div",{className:s},y.a.createElement(Q["a"],{text:r,channelId:a,onTextChange:this.handleMsgTextChange,enabled:n,placeholder:i,ariaLabel:i,onEnter:this.handleSubmit}),this.maybeRenderBroadcast())}},{key:"renderShareAlert",value:function e(){var t=this.state.shareWith;if(!t)return null;var a=Object(X["a"])(ae({},this.props));if(!a)return null;return y.a.createElement("div",{className:"p-share_dialog__section"},y.a.createElement(S["d"],{type:"inline",level:"warning",className:"margin_bottom_100"},a))}},{key:"renderShareWith",value:function e(){var t=this.state.shareWith;var a=re.t("Share with:",{fallbackHash:"134bfa9822f411e84749498f9747ec887fd5d0fd",fallbackHashNs:"share-dialog"});var r="create-snippet-share-with-checkbox";return y.a.createElement(I["a"],{text:a,htmlFor:r,type:"inline"},y.a.createElement(j["a"],{id:r,"data-qa":"share_with",checked:t,onChange:this.handleShareWithChange}))}},{key:"renderShareWithPicker",value:function e(){var t=this.props,a=t.selectedChannelId,r=t.threadTs;if(r)return y.a.createElement(Z["a"],{label:re.t("Sharing snippet in a thread"),channelId:a,threadTs:r});return y.a.createElement("div",{className:"p-snippet_dialog__footer_share_inputs"},this.renderShareWith(),this.renderChannelPicker())}},{key:"render",value:function e(){var t=this.state,a=t.fileName,r=t.fileType,n=t.fileContent;var i="p-snippet_dialog";var s=re.t("Create snippet");var o=re.t("Create Snippet");return y.a.createElement(w["a"],{className:i,title:s,goButtonText:o,useSlackScrollbarWithPadding:true,shouldCloseOnGo:false,onGo:this.handleSubmit,onClose:this.handleCancel,footerText:this.renderShareWithPicker(),goButtonIsDisabled:this.isGoButtonDisabled(),getShouldShowSpeedBump:this.shouldShowSpeedBump,speedBumpTitleText:re.t("Are you sure you want to discard this snippet permanently?"),speedBumpCancelButtonText:re.t("No, keep it"),speedBumpContinueButtonText:re.t("Yes, discard this snippet"),showCancelButton:false},y.a.createElement(T["a"],{fileName:a,onFileNameChange:this.handleFileNameChange,fileType:r,onFileTypeChange:this.handleFileTypeChange,fileContent:n,onFileContentChange:this.handleFileContentChange,onKBSubmit:this.handleSubmit}),this.renderShareAlert(),this.renderMessageInput())}}]);return t}(_["PureComponent"]);ie.displayName="SnippetDialog";ie.defaultProps=ne;function se(e){return{uploadSnippet:function t(){return e(q.apply(void 0,arguments))},closeModal:function t(){return e(z["closeModal"].apply(void 0,arguments))},openModal:function t(){return e(z["openModal"].apply(void 0,arguments))},converMsgOpsToRichTextMessage:function t(){return e(G["a"].apply(void 0,arguments))}}}var oe=Object(k["connect"])(J["b"],se)(ie);var le=Object(J["a"])(oe);var ce=t["default"]=le},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},function(e,t,a){"use strict";var r=a(88);var n=a.n(r);var i=a(196);var s=a.n(i);var o=a(245);var l=a.n(o);var c=a(218);var u=a.n(c);var d=a(110);var p=a.n(d);var m=a(135);var h=a.n(m);var v=a(169);var f=a.n(v);var b=a(138);var g=a.n(b);var _=a(147);var y=a.n(_);var O=a(185);var k=a.n(O);var E=a(1);var C=a.n(E);var S=a(0);var w=a(12);var j=a(2);var I=a(30);var T=a(14);var A=a(35);var N=a(545);var P=a(559);var M=a(18);var D=a(6);var x=a(598);var R=a(102);var F=Object(M["b"])("Record a frecency event for some message action + maybe a query",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.action,n=a.query,i=void 0===n?"":n;var s=r.frecencyId;e(Object(x["b"])({id:s,text:i}))});F.meta={name:"recordMessageActionFrecencyEvent",key:"actionsRecordMessageActionFrecencyEventRecordMessageActionFrecencyEvent",description:"Record a frecency event for some message action + maybe a query"};F.propTypes={action:R["a"].MessageAction.isRequired,query:S["default"].string};var L=F;var U=a(22);var B=a(15);var q=a(73);var G=a(41);var H=a(531);var W=new D["b"]("message");var V={ts:S["default"].string.isRequired,channelId:S["default"].string.isRequired};var K=Object(B["b"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.ts,r=t.channelId;var n=Object(q["a"])(e,r,a);if(!n)return null;if(!Object(G["canAddReaction"])(e,n))return null;return{id:U["SLACK_ACTION_IDS"].addReaction,name:W.t("Add reaction"),iconType:"add-reaction","data-qa":"add_reaction_menu_item",frecencyId:Object(H["c"])("add_reaction"),uiElement:T["UiElement"].ADD_REACTION_BUTTON}});K.meta={name:"addReaction",key:"componentsMessageActionSelectorsAddReactionAddReaction"};K.propTypes=V;var z=K;var Q=a(20);var Y=new D["b"]("message");var J={ts:S["default"].string.isRequired,channelId:S["default"].string.isRequired};var X=Object(B["b"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.ts,r=t.channelId;var n=Object(q["a"])(e,r,a);if(!n)return null;var i=Object(Q["e"])(e,r);if(!Object(G["canReplyOrComment"])(e,{message:n,channel:i}))return null;var s=Y.t("Start a thread");var o=T["UiElement"].START_A_THREAD_BUTTON;if(Object(G["isThreadBroadcast"])(n)||Object(G["getReplyCount"])(n)){s=Y.t("Reply to thread");o=T["UiElement"].REPLY_TO_THREAD_BUTTON}return{id:U["SLACK_ACTION_IDS"].comment,name:s,iconType:"comment-alt","data-qa":"start_thread_menu",frecencyId:Object(H["c"])("thread_reply"),uiElement:o}});X.meta={name:"comment",key:"componentsMessageActionSelectorsCommentComment"};X.propTypes=J;var Z=X;var $=a(11);var ee=new D["b"]("message");var te={ts:S["default"].string.isRequired,channelId:S["default"].string.isRequired};var ae=Object(B["b"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.ts,r=t.channelId;var n=Object(q["a"])(e,r,a);if(!n)return null;var i=Object(Q["e"])(e,r);if(!Object(G["canCopyLink"])(e,{message:n,channel:i}))return null;return{id:U["SLACK_ACTION_IDS"].copyLink,name:Object($["isFeatureEnabled"])(e,"feature_desktop_copy_text")?ee.t("Copy link to message"):ee.t("Copy link"),iconType:"link","data-qa":"copy_link",frecencyId:Object(H["c"])("copy_link"),uiElement:T["UiElement"].COPY_LINK_BUTTON}});ae.meta={name:"copyLink",key:"componentsMessageActionSelectorsCopyLinkCopyLink"};ae.propTypes=te;var re=ae;var ne=new D["b"]("message");var ie={ts:S["default"].string.isRequired,channelId:S["default"].string.isRequired,disabled:S["default"].bool.isRequired,showOfflineIcon:S["default"].bool.isRequired};var se=Object(B["b"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.ts,r=t.channelId,n=t.messageContainerType,i=t.disabled,s=void 0!==i&&i,o=t.showOfflineIcon,l=void 0!==o&&o;var c=Object(q["a"])(e,r,a);if(!c)return null;var u=Object(Q["e"])(e,r);if(!Object(G["canDeleteMessage"])(e,{message:c,channel:u,messageContainerType:n}))return null;var d=Object($["isFeatureEnabled"])(e,"feature_contextual_message_shortcuts");return{id:U["SLACK_ACTION_IDS"].deleteMessage,name:ne.t("Delete message"),shortcut:d?ne.t("delete"):void 0,iconType:"trash",danger:true,"data-qa":"delete_message",frecencyId:Object(H["c"])("delete"),uiElement:T["UiElement"].DELETE_MESSAGE_BUTTON,disabled:s,showOfflineIcon:l}});se.meta={name:"deleteMessage",key:"componentsMessageActionSelectorsDeleteMessageDeleteMessage"};se.propTypes=ie;var oe=se;var le=a(62);var ce=new D["b"]("message");var ue={ts:S["default"].string.isRequired,channelId:S["default"].string.isRequired,disabled:S["default"].bool.isRequired,showOfflineIcon:S["default"].bool.isRequired};var de=Object(B["b"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.ts,r=t.channelId,n=t.disabled,i=void 0!==n&&n,s=t.showOfflineIcon,o=void 0!==s&&s;var l=Object(q["a"])(e,r,a);if(!l)return null;var c=Object(Q["e"])(e,r);var u=Object($["getCurrentUserId"])(e);var d=Object(le["a"])(e,"msg_edit_window_mins");if(!Object(G["canEditMessage"])(e,u,l,c,d))return null;var p=Object($["isFeatureEnabled"])(e,"feature_contextual_message_shortcuts");return{id:U["SLACK_ACTION_IDS"].editMessage,name:ce.t("Edit message"),shortcut:p?ce.t("E"):void 0,iconType:"pencil","data-qa":"edit_message",frecencyId:Object(H["c"])("edit"),uiElement:T["UiElement"].EDIT_MESSAGE_BUTTON,disabled:i,showOfflineIcon:o}});de.meta={name:"editMessage",key:"componentsMessageActionSelectorsEditMessageEditMessage"};de.propTypes=ue;var pe=de;var me=new D["b"]("message");var he=new D["b"]("messages_action_items");var ve={ts:S["default"].string.isRequired,channelId:S["default"].string.isRequired,allUnreads:S["default"].string.isRequired};var fe=Object(B["b"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.ts,r=t.channelId,n=t.allUnreads;var i=Object(q["a"])(e,r,a);if(!i)return null;var s=Object(Q["e"])(e,r);if(!Object(G["canMarkUnread"])(e,{message:i,channel:s}))return null;var o=Object($["isFeatureEnabled"])(e,"feature_contextual_message_shortcuts");return{id:U["SLACK_ACTION_IDS"].markUnread,name:n?he.t("Mark above as read"):me.t("Mark unread"),shortcut:!n&&o?me.t("U"):void 0,iconType:"mark-unread","data-qa":"mark_unread",frecencyId:Object(H["c"])("mark_unread"),uiElement:T["UiElement"].MARK_UNREAD_BUTTON}});fe.meta={name:"markUnread",key:"componentsMessageActionSelectorsMarkUnreadMarkUnread"};fe.propTypes=ve;var be=fe;var ge=a(298);var _e=a(9);var ye=new D["b"]("message");function Oe(e,t,a,r){var n="#"+t;switch(a){case"channel":if(e)return ye.t("Un-pin from channel",{channelName:n,fallbackHash:"fde81182bd7937727711f50079046f2e43ab467c"});if(r)return ye.t("Pin to channel",{channelName:n,fallbackHash:"017de9a57dbb4ec0a6c70cb3a18a8c6c762a3e0f"});return ye.t("Pin to channel",{channelName:n,fallbackHash:"d8191c4354e474f5ec36b8cb35ee970f5c624260"});case"private":if(e)return ye.t("Un-pin from channel",{channelName:t,fallbackHash:"fde81182bd7937727711f50079046f2e43ab467c"});if(r)return ye.t("Pin to channel",{channelName:t,fallbackHash:"017de9a57dbb4ec0a6c70cb3a18a8c6c762a3e0f"});return ye.t("Pin to channel",{channelName:t,fallbackHash:"d8191c4354e474f5ec36b8cb35ee970f5c624260"});default:if(e)return ye.t("Un-pin from this conversation");if(r)return ye.t("Pin to this conversation",{fallbackHash:"26463acec4f15a90924c42970bb258dae75e73f9"});return ye.t("Pin to this conversation\u2026")}}var ke=new D["b"]("message");var Ee={ts:S["default"].string.isRequired,channelId:S["default"].string.isRequired,disabled:S["default"].bool.isRequired,showOfflineIcon:S["default"].bool.isRequired};var Ce=Object(B["b"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.ts,r=t.channelId,n=t.disabled,i=void 0!==n&&n,s=t.showOfflineIcon,o=void 0!==s&&s;var l=Object(q["a"])(e,r,a);if(!l)return null;var c=Object(Q["e"])(e,r);if(!Object(G["canPin"])(e,{message:l,channel:c}))return null;var u=Object(ge["isMessagePinned"])(e,{channelId:r,ts:a});var d=Object(_e["getDisplayNameForChannel"])(e,c,{publicChannelIncludeHashSign:false,imIncludeAtSign:false});var p=Object(_e["getChannelType"])(c);var m=u?T["UiElement"].PIN_TO_THIS_CONVERSATION_BUTTON:T["UiElement"].UNPIN_FROM_THIS_CONVERSATION_BUTTON;var h=Object($["isFeatureEnabled"])(e,"feature_sonic_pins");var v=Object($["isFeatureEnabled"])(e,"feature_contextual_message_shortcuts");return{id:U["SLACK_ACTION_IDS"].pin,name:Oe(u,d,p,h),iconType:"thumb-tack",shortcut:v?ke.t("P"):void 0,"data-qa":"pin_message",frecencyId:Object(H["c"])(u?"unpin":"pin"),uiElement:m,disabled:i,showOfflineIcon:o}});Ce.meta={name:"pin",key:"componentsMessageActionSelectorsPinPin"};Ce.propTypes=Ee;var Se=Ce;var we=a(883);var je=a(1255);var Ie=a(1866);var Te=a(2707);var Ae=a(1316);var Ne=Object(M["b"])("Add a reminder for a message",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.time,n=a.channelId,i=a.ts,s=a.viewContext,o=a.featureContextualMessageShortcuts,l=void 0!==o&&o;var c=Object(q["a"])(t(),n,i);l&&e(Object(Ae["a"])({viewContext:s,channelId:n,ts:i}));return e(Object(Te["a"])({time:r,message_channel:n,message_ts:i,respond_in_channel:Object(G["reminderShouldRespondInChannel"])(c)}))});Ne.meta={name:"addReminderForMessage",key:"actionsAddReminderForMessageAddReminderForMessage",description:"Add a reminder for a message"};Ne.propTypes={channelId:S["default"].string.isRequired,ts:S["default"].string.isRequired,time:S["default"].string.isRequired,viewContext:S["default"].string};var Pe=Ne;var Me=new D["b"]("message");var De={shortcut:void 0};var xe=function(e){k()(t,e);function t(e){var a;p()(this,t);a=f()(this,g()(t).call(this,e));a.onSelected=a.onSelected.bind(y()(a));return a}h()(t,[{key:"onSelected",value:function e(){var t=this.props,a=t.remind,r=t.ts,n=t.channelId,i=t.time,s=t.clogger;a({ts:r,channelId:n,time:i});s.track(T["EventId"].MSG_ACTION,{contexts:{ui_context:{action:T["UiAction"].CLICK,step:T["UiStep"].MORE_ACTIONS_MENU,ui_element:T["UiElement"].REMIND_ME_BUTTON}}})}},{key:"render",value:function e(){var t=this.props,a=t.remind,r=t.ts,n=t.channelId,i=t.time,o=l()(t,["remind","ts","channelId","time"]);return C.a.createElement(P["a"],s()({},o,{onSelected:this.onSelected}))}}]);return t}(E["PureComponent"]);xe.displayName="RemindMenuItem";xe.defaultProps=De;var Re=function e(t){return{clogger:Object(A["a"])({state:t})}};var Fe={remind:Pe};var Le=Object(w["connect"])(Re,Fe)(xe);var Ue=Object(N["b"])(Le);var Be={featureAppViewsReminders:false,renderLegacySubmenu:true,featureContextualMessageShortcuts:false};var qe=function(e){k()(t,e);function t(e){var a;p()(this,t);a=f()(this,g()(t).call(this,e));a.renderSubmenu=a.renderSubmenu.bind(y()(a));return a}h()(t,[{key:"renderSubmenu",value:function e(t){var a=this.props,r=a.channelId,n=a.ts,i=a.featureAppViewsReminders,o=a.featureContextualMessageShortcuts;var l={channelId:r,ts:n};return C.a.createElement(we["a"],s()({},t,{"data-qa":"remind_submenu",width:"auto"}),C.a.createElement(Ue,s()({},l,{label:Me.t("In 20 minutes",{fallbackHash:"c473e4622b51d4d86dabe29940fee9c1796bb93d"}),time:"In 20 minutes"})),C.a.createElement(Ue,s()({},l,{label:Me.t("In 1 hour",{fallbackHash:"e2e5de960f1c2c574aaeac98339a787a5bdab8e6"}),time:"In 1 hour"})),C.a.createElement(Ue,s()({},l,{label:Me.t("In 3 hours",{fallbackHash:"9ec09cee220ff97e87efe884ad910bc050c301cb"}),time:"In 3 hours"})),C.a.createElement(Ue,s()({},l,{label:Me.t("Tomorrow"),time:"Tomorrow"})),C.a.createElement(Ue,s()({},l,{label:Me.t("Next week",{fallbackHash:"fdc2b827d9b1e8ed62eeb53c174f0ba91f90f490"}),time:"Next week"})),i&&C.a.createElement(Ue,s()({},l,{label:Me.t("Custom\u2026"),time:"Custom",shortcut:o?Me.t("M"):void 0})))}},{key:"render",value:function e(){var t=this.props,a=t.channelId,r=t.ts,n=l()(t,["channelId","ts"]);return C.a.createElement(Ie["a"],s()({},n,{renderSubmenu:this.renderSubmenu}))}}]);return t}(E["PureComponent"]);qe.displayName="Remind";qe.defaultProps=Be;var Ge=Object(je["a"])(qe);var He=Object(B["b"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.ts,r=t.channelId,n=t.disabled,i=void 0!==n&&n,s=t.showOfflineIcon,o=void 0!==s&&s;var l=Object(q["a"])(e,r,a);if(!l)return null;var c=Object(Q["e"])(e,r);if(!Object(G["canAddReminder"])(e,{message:l,channel:c}))return null;var u=Object($["isFeatureEnabled"])(e,"feature_app_views_reminders");var d=Object($["isFeatureEnabled"])(e,"feature_contextual_message_shortcuts");return C.a.createElement(Ge,{key:"remind_submenu",label:Me.t("Remind me about this"),"data-qa":"remind_me",frecencyId:Object(H["c"])("remind"),ts:a,channelId:r,featureAppViewsReminders:u,featureContextualMessageShortcuts:d,renderLegacySubmenu:true,disabled:i,showOfflineIcon:o})});He.meta={name:"remindSubmenu",key:"componentsMessageActionSelectorsRemindRemindSubmenu"};var We=He;var Ve=new D["b"]("message");var Ke={ts:S["default"].string.isRequired,channelId:S["default"].string.isRequired,messageContainerType:S["default"].oneOf(Object(j["values"])(U["MESSAGE_CONTAINERS"])),disabled:S["default"].bool.isRequired,showOfflineIcon:S["default"].bool.isRequired};var ze=Object(B["b"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.ts,r=t.channelId,n=t.messageContainerType,i=t.disabled,s=void 0!==i&&i,o=t.showOfflineIcon,l=void 0!==o&&o;var c=Object(q["a"])(e,r,a);if(!c)return null;var u=Object(Q["e"])(e,r);if(!Object(G["canRemoveBroadcast"])(e,{message:c,channel:u,messageContainerType:n}))return null;var d=Object(_e["isPublicChannel"])(u)||Object(_e["isPrivateChannel"])(u)?Ve.t("Remove from channel"):Ve.t("Remove from conversation");return{id:U["SLACK_ACTION_IDS"].removeBroadcast,name:d,iconType:"times","data-qa":"remove_broadcast",frecencyId:Object(H["c"])("remove"),uiElement:T["UiElement"].REMOVE_FROM_CONVERSATION_BUTTON,disabled:s,showOfflineIcon:l}});ze.meta={name:"removeBroadcast",key:"componentsMessageActionSelectorsRemoveBroadcastRemoveBroadcast"};ze.propTypes=Ke;var Qe=ze;var Ye=a(2e3);var Je=a(1319);var Xe=new D["b"]("message");var Ze={ts:S["default"].string.isRequired,channelId:S["default"].string.isRequired};var $e=Object(B["b"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.ts,r=t.channelId,n=t.disabled,i=void 0!==n&&n,s=t.showOfflineIcon,o=void 0!==s&&s;var l=Object(Je["a"])(e);if(!l)return null;var c=Object(q["a"])(e,r,a);if(!c)return null;if(!Object(Ye["a"])(e,c))return null;return{id:U["SLACK_ACTION_IDS"].replyToEmail,name:Xe.t("Reply to email"),iconType:"share-email","data-qa":"reply_to_email",frecencyId:"reply_to_email",disabled:i,showOfflineIcon:o}});$e.meta={name:"replyToEmail",key:"componentsMessageActionSelectorsReplyToEmailReplyToEmail"};$e.propTypes=Ze;var et=$e;var tt=new D["b"]("message");var at={ts:S["default"].string.isRequired,channelId:S["default"].string.isRequired};var rt=Object(B["b"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.ts,r=t.channelId;var n=Object(q["a"])(e,r,a);if(!n)return null;if(!Object(G["canBeShared"])(n))return null;var i=Object(G["isShareableFileMsg"])(n)?tt.t("Share file\u2026",{fallbackHash:"9056b6c934805611f8d5a90ad5c937b656be6641"}):tt.t("Share message\u2026",{fallbackHash:"587f9ecd03b16e92d064f4fbbfd4ba7e76e29807"});var s=Object($["isFeatureEnabled"])(e,"feature_contextual_message_shortcuts");return{id:U["SLACK_ACTION_IDS"].shareMessage,name:i,iconType:"share-action","data-qa":"share_message_menu",frecencyId:Object(H["c"])("share"),uiElement:T["UiElement"].SHARE_MESSAGE_BUTTON,shortcut:s?tt.t("S"):void 0}});rt.meta={name:"shareMessage",key:"componentsMessageActionSelectorsShareMessageShareMessage"};rt.propTypes=at;var nt=rt;var it=a(129);var st=a(90);var ot=new D["b"]("message");var lt={ts:S["default"].string.isRequired,channelId:S["default"].string.isRequired};var ct=Object(B["b"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.ts,r=t.channelId;var n=Object(q["a"])(e,r,a);if(!n)return null;if(!Object(G["canStar"])(n))return null;var i=Object(G["isStarred"])(n);var s=i?ot.t("Unstar message"):ot.t("Star message");if(Object(G["isFileComment"])(n)){var o=Object(j["first"])(n.files);var l=n.comment&&Object(it["getFileCommentById"])(e,o,n.comment.id);l&&(s=i?ot.t("Unstar file comment"):ot.t("Star file comment"))}var c=i?T["UiElement"].UNSTAR_MESSAGE_BUTTON:T["UiElement"].STAR_MESSAGE_BUTTON;var u=i?"unstar-o":"star-o";var d=Object(st["e"])(e);if(d){s=i?ot.t("Remove from saved"):ot.t("Save");u=i?"bookmark-filled":"bookmark"}return{id:U["SLACK_ACTION_IDS"].star,name:s,iconType:u,"data-qa":"star_message_menu",frecencyId:Object(H["c"])(i?"unstar":"star"),uiElement:c}});ct.meta={name:"star",key:"componentsMessageActionSelectorsStarStar"};ct.propTypes=lt;var ut=ct;var dt=a(491);var pt=a(38);var mt=new D["b"]("message");var ht=Object(B["b"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.ts,r=t.threadTs,n=t.channelId,i=t.disabled,s=void 0!==i&&i,o=t.showOfflineIcon,l=void 0!==o&&o;var c=Object(q["a"])(e,n,r||a);var u=Object(Q["e"])(e,n);var d=Object(_e["isArchived"])(u);var p=Object(dt["getIsSubscribed"])(e,{ts:r||a,channelId:n});var m=d&&p;if(!Object(G["canReplyOrComment"])(e,{message:c,channel:u,ignoreMembership:m}))return null;var h=Object(pt["k"])(e,"threads_everything");var v=Object(G["getReplyCount"])(c);var f=mt.t("Follow message");var b=mt.t("You\u2019ll be notified about any replies");var g=T["UiElement"].FOLLOW_MESSAGE_BUTTON;var _;var y=Object(dt["getIsSubscriptionLoading"])(e,{ts:r||a,channelId:n});if(!y||s&&l)if(p){if(v){f=mt.t("Unfollow thread");_=mt.t("This will be removed from Threads");b=h?mt.t("You won\u2019t be notified about new replies"):_}else{f=mt.t("Unfollow message");_=mt.t("Replies will be excluded from Threads");b=h?mt.t("You won\u2019t be notified about replies"):_}g=T["UiElement"].UNFOLLOW_MESSAGE_BUTTON}else if(v){f=mt.t("Follow thread");_=mt.t("New replies will appear in Threads");b=h?mt.t("You\u2019ll be notified about new replies"):_}else{f=mt.t("Follow message");_=mt.t("Any replies will show up in Threads");b=h?mt.t("You\u2019ll be notified about any replies"):_}else{f=mt.t("Loading\u2026",{fallbackHash:"0e140d567d90b0014d95ffec7a755e52355079f3"});b=""}return{id:U["SLACK_ACTION_IDS"].subscribe,name:f,description:b,isLoading:y,iconType:"message-notification","data-qa":"follow_message",frecencyId:Object(H["c"])(p?"thread_unfollow":"thread_follow"),uiElement:g}});ht.meta={name:"subscribe",key:"componentsMessageActionSelectorsSubscribeSubscribe"};ht.propTypes={ts:S["default"].string.isRequired,channelId:S["default"].string.isRequired,disabled:S["default"].bool.isRequired,showOfflineIcon:S["default"].bool.isRequired};var vt=ht;var ft=a(80);var bt=a(33);var gt=a(27);var _t=a(304);var yt=a(128);var Ot=new D["b"]("message");var kt={ts:S["default"].string.isRequired,channelId:S["default"].string.isRequired,messageContainerType:S["default"].oneOf(Object(j["values"])(U["MESSAGE_CONTAINERS"])),disabled:S["default"].bool.isRequired,showOfflineIcon:S["default"].bool.isRequired};var Et=Object(B["b"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.ts,r=t.channelId,n=t.disabled,i=void 0!==n&&n,s=t.showOfflineIcon,o=void 0!==s&&s;if(!Object($["isFeatureEnabled"])(e,"feature_insights_comms_impact_message_stats"))return null;var l=Object(ft["getGroupForUser"])(e,"insights_comms_impact_message_stats_pilot");if("treatment"!==l)return null;var c=Object(bt["d"])(e);if(!Object(gt["isOnPlusPlan"])(c)&&!Object(gt["isOnCompliancePlan"])(c)&&!Object(gt["isEnterpriseTeam"])(c))return null;var u=Object(q["a"])(e,r,a);if(!u)return null;if(Object(G["isEphemeral"])(u))return null;var d=Object(Q["e"])(e,r);if(!d||!Object(_e["isPublicChannel"])(d)&&!Object(_e["isPrivateChannel"])(d)||Object(_e["isExternallySharedChannel"])(d))return null;var p=0;var m=Object(_t["getMemberCounts"])(e,r);p=m&&m.counts&&m.counts.member_count;if(!p||p<50)return null;var h=Object(yt["a"])(a);var v=Object(ft["getGroupForUser"])(e,"insights_comms_impact_message_stats_data_cutoff");var f=v&&"control"!==v;var b=new Date(f?v:"2019-12-15");if(h<b)return null;return{id:U["SLACK_ACTION_IDS"].viewStats,name:Ot.t("View message activity"),iconType:"times","data-qa":U["SLACK_ACTION_IDS"].viewStats,frecencyId:Object(H["c"])(U["SLACK_ACTION_IDS"].viewStats),uiElement:T["UiElement"].REMOVE_FROM_CONVERSATION_BUTTON,disabled:i,showOfflineIcon:o}});Et.meta={name:"viewStats",key:"componentsMessageActionSelectorsViewStatsViewStats"};Et.propTypes=kt;var Ct=Et;function St(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function wt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?St(Object(a),true).forEach(function(t){n()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):St(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function jt(e){return wt({id:e.id,appId:e.app.id,name:e.name,description:e.app.name,iconSet:e.app.icons||{},uiElement:T["UiElement"].APP_ACTION_BUTTON,"data-qa":"app_action_"+e.id},Object(H["b"])(e))}var It=a(1350);function Tt(e,t){if(!e)return false;var a=Object(It["a"])(e.name);if(!a)return false;var r=Object(It["a"])(e.description);var n=t.split(/\s+/);return Object(j["every"])(n,function(e){return Object(j["includes"])(a,e)||Object(j["includes"])(r,e)})}var At=a(1402);function Nt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function Pt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Nt(Object(a),true).forEach(function(t){n()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Nt(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Mt=new D["b"]("app_actions");var Dt=function e(t,a){return[z(t,a),Z(t,a),re(t,a),oe(t,a),pe(t,a),be(t,a),Se(t,a),Qe(t,a),et(t,a),nt(t,a),ut(t,a),vt(t,a)]};var xt=function e(t){return Pt({},t,{danger:false,description:Mt.t("Slack")})};var Rt=function e(t){return{id:t.frecencyId,action:t}};var Ft=Object(M["b"])("Search message actions (app + Slack) in Redux store",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var r=a.query,n=void 0===r?"":r,i=l()(a,["query"]);var s=t();var o=Object(At["d"])(s),c=o.actions;var d=Dt(s,i).filter(function(e){return e&&!e.isLoading});var p=[].concat(u()(d.map(xt)),u()(c.map(jt)));p=p.filter(function(e){return Tt(e,Object(It["a"])(n))});p=Object(x["d"])(s,{query:n,list:p.map(Rt)});p=p.map(function(e){return e.action});return p});Ft.meta={name:"searchLocalMessageActions",key:"actionsSearchMessageActionsSearchLocalMessageActions",description:"Search message actions (app + Slack) in Redux store"};Ft.propTypes={channelId:S["default"].string.isRequired,ts:S["default"].string.isRequired,messageContainerType:S["default"].oneOf(Object(j["values"])(U["MESSAGE_CONTAINERS"])),query:S["default"].string};var Lt=Object(M["b"])("Search message actions (app + Slack), returns as Promise",function(e,t,a){var r=e(Ft(a));return Promise.resolve(r)});Lt.meta={name:"searchMessageActions",key:"actionsSearchMessageActionsSearchMessageActions",description:"Search message actions (app + Slack), returns as Promise"};Lt.propTypes=Ft.propTypes;var Ut=Lt;var Bt=a(2662);var qt=a(121);var Gt=a(448);var Ht=a(1221);var Wt=a(29);var Vt=a(31);var Kt=Object(Wt["a"])("Fetch message stats, e.g. views/reactions/shares",function(e,t,a){var r=a.messageTs,n=a.channelId;return e(Object(Vt["a"])({method:"insights.messageStats",args:{ts:r,channel:n},reason:"view-message-stats"})).then(function(e){if(e.ok)return e;throw new Error(e.error)})});Kt.meta={name:"fetchMessageStats",key:"fetchersInsightsCommsImpactApiFetchMessageStats",description:"Fetch message stats, e.g. views/reactions/shares"};Kt.propTypes={messageTs:S["default"].string,channelId:S["default"].string};var zt=a(1562);var Qt=a(2530);var Yt=a(5042);var Jt=a(5045);var Xt=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.dispatch,n=t.messageTs,i=t.channelId;return C.a.lazy(function(){return new Promise(function(e){return Promise.all([r(Kt({messageTs:n,channelId:i})).then(function(e){r(Object(zt["j"])({response:e,messageTs:n,channelId:i}))}),Promise.all([a.e(453),a.e(166)]).then(a.bind(null,4978))]).then(function(t){var a=t[1];e(a)})})})};var Zt=Object(M["b"])("Opens the Message Stats modal",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.messageTs,n=a.channelId;e(Object(zt["i"])({messageTs:r,channelId:n}));e(Object(Ht["a"])({element:C.a.createElement(Xt({dispatch:e,messageTs:r,channelId:n}),{messageTs:r,channelId:n})}))});Zt.meta={name:"openMessageStats",key:"actionsCommsImpactOpenMessageStatsOpenMessageStats",description:"Opens the Message Stats modal"};Zt.propTypes={messageTs:S["default"].string.isRequired,channelId:S["default"].string.isRequired};var $t=Zt;var ea=a(16);var ta=a(34);var aa=a(1053);var ra=a(384);var na=a(39);var ia=a(1337);var sa=a(1213);var oa=function(e){k()(t,e);function t(e){var a;p()(this,t);a=f()(this,g()(t).call(this,e));a.onEmojiSelected=a.onEmojiSelected.bind(y()(a));return a}h()(t,[{key:"onEmojiSelected",value:function e(t,a){this.props.changeReactionFromUserAction({key:this.props.reactionKey,name:a})}},{key:"render",value:function e(){var t={left:"auto",top:"auto"};var a={display:"flex","justify-content":"center","align-items":"center"};return C.a.createElement(sa["a"],{showHandyReactions:true,forceOpen:true,onEmojiSelected:this.onEmojiSelected,onClose:this.props.closeModal,startsOpen:true,contentStyle:t,overlayStyle:a},C.a.createElement("span",{style:{position:"absolute"}}))}}]);return t}(E["PureComponent"]);oa.displayName="AppActionsEmojiMenu";var la={changeReactionFromUserAction:function e(){return ia["a"].apply(void 0,arguments)},closeModal:function e(){return na["closeModal"].apply(void 0,arguments)}};var ca=Object(w["connect"])(null,la)(oa);var ua=function e(t,a,r){var n=a.channelId,i=a.ts;return r(function(e,a){var s=a();var o=Object(q["a"])(s,n,i);var l=Object(ra["b"])(o);if(Object(ta["a"])())return r(Object(na["openModal"])({element:C.a.createElement(ca,{reactionKey:l})}));return Object(aa["a"])({e:t,rxn_key:l})})};var da=ua;var pa=a(104);var ma=Object(M["b"])("Open a thread to reply to a message",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelId,n=a.ts;var i=t();var s=Object(q["a"])(i,r,n);var o=s.thread_ts||n;e(Object(pa["m"])({channelId:r,threadTs:o}))});ma.meta={name:"comment",key:"actionsCommentComment",description:"Open a thread to reply to a message"};ma.propTypes={channelId:S["default"].string.isRequired,ts:S["default"].string.isRequired};var ha=ma;var va=a(815);var fa=a(257);var ba=Object(M["b"])("Copy link to message",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelId,n=a.ts;var i=t();var s=Object(q["a"])(i,r,n);var o=s.thread_ts;var l=Object(bt["d"])(i);var c=l&&l.domain;var u=Object(G["constructAbsoluteMsgPermalink"])({teamDomain:c,channelId:r,ts:n,threadTs:o});e(Object(va["a"])({msg:s,payload:{subtype:"copy_link"}}));Object(fa["writeText"])(u)});ba.meta={name:"copyLink",key:"actionsCopyLinkCopyLink",description:"Copy link to message"};ba.propTypes={channelId:S["default"].string.isRequired,ts:S["default"].string.isRequired};var ga=ba;var _a=a(582);var ya=a(1336);var Oa=Object(M["b"])("Copy message text",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelId,n=a.ts;var i=t();var s=Object(q["a"])(i,r,n);e(Object(va["a"])({msg:s,payload:{subtype:"copy_text"}}));var o=Object(_a["a"])(Object(ya["a"])(i,{text:s.text,tsf_mode:"EDIT"}));Object(fa["writeText"])(o)});Oa.meta={name:"copyText",key:"actionsCopyTextCopyText",description:"Copy message text"};Oa.propTypes={channelId:S["default"].string.isRequired,ts:S["default"].string.isRequired};var ka=Oa;var Ea=a(2002);var Ca=Object(M["b"])("Delete message",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelId,n=a.ts,i=a.rollup;var s=C.a.createElement(Ea["a"],{channelId:r,ts:n,rollup:i});Promise.resolve().then(function(){return e(Object(na["openModal"])({element:s}))})});Ca.meta={name:"deleteMsg",key:"actionsDeleteMessageDeleteMsg",description:"Delete message"};Ca.propTypes={channelId:S["default"].string.isRequired,ts:S["default"].string.isRequired};var Sa=Ca;var wa=a(2001);var ja=Object(M["b"])("Remove message broadcast",function(e,t,a){var r=C.a.createElement(wa["a"],a);Promise.resolve().then(function(){return e(Object(na["openModal"])({element:r}))})});ja.meta={name:"removeBroadcast",key:"actionsRemoveBroadcastRemoveBroadcast",description:"Remove message broadcast"};ja.propTypes={channelId:S["default"].string.isRequired,ts:S["default"].string.isRequired};var Ia=ja;var Ta=a(4962);var Aa=a(1153);var Na=Object(M["b"])("Share message in channel",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelId,n=a.ts;e(Object(Aa["a"])({ts:n,channelId:r}))});Na.meta={name:"shareMessage",key:"actionsShareMessageShareMessage",description:"Share message in channel"};Na.propTypes={channelId:S["default"].string.isRequired,ts:S["default"].string.isRequired};var Pa=Na;var Ma=a(563);var Da=a(2742);var xa=function e(t,a,r,n){var i=r.ts,s=r.threadTs,o=r.channelId,l=r.rollup,c=r.messageContainerType;var u=Object(ea["b"])();if(a.appId)return n(Object(Bt["b"])({actionId:a.id,appId:a.appId,messageTs:i,channelId:o}));switch(a.id){case U["SLACK_ACTION_IDS"].addReaction:return da(t,r,n);case U["SLACK_ACTION_IDS"].comment:return n(ha({ts:i,channelId:o}));case U["SLACK_ACTION_IDS"].copyLink:return n(ga({ts:i,channelId:o}));case U["SLACK_ACTION_IDS"].copyText:return n(ka({ts:i,channelId:o}));case U["SLACK_ACTION_IDS"].deleteMessage:return n(Sa({ts:i,channelId:o,rollup:l}));case U["SLACK_ACTION_IDS"].editMessage:u.warn("Edit message is an unhandled case");return null;case U["SLACK_ACTION_IDS"].markUnread:if(s&&"threads-flexpane"===c)return n(Object(Gt["setThreadLastRead"])({channelId:o,threadTs:s,lastRead:i,read:false,reason:"mark_thread_as_unread"}));return n(Object(qt["setUnreadPoint"])({channelId:o,unreadTs:i}));case U["SLACK_ACTION_IDS"].pin:return Object(ta["a"])()?n(Object(Da["a"])({ts:i,channelId:o})):n(Object(ge["togglePin"])({ts:i,channelId:o}));case U["SLACK_ACTION_IDS"].remind:u.warn("Remind is an unhandled case");return null;case U["SLACK_ACTION_IDS"].removeBroadcast:return n(Ia({ts:i,channelId:o}));case U["SLACK_ACTION_IDS"].replyToEmail:return n(Object(Ta["a"])({ts:i,channelId:o}));case U["SLACK_ACTION_IDS"].shareMessage:return n(Pa({ts:i,channelId:o}));case U["SLACK_ACTION_IDS"].star:return n(Object(Ma["b"])({ts:i,channelId:o}));case U["SLACK_ACTION_IDS"].subscribe:return n(Object(dt["toggleThreadSubscription"])({ts:s||i,channelId:o,messageContainerType:c}));case U["SLACK_ACTION_IDS"].viewStats:return n($t({messageTs:i,channelId:o}));default:u.warn("Unknown action type "+a.id);return null}};var Ra=xa;var Fa=a(117);var La=a(89);var Ua=a(839);var Ba=a(13);var qa=a.n(Ba);var Ga=a(1667);var Ha=a(23);var Wa=a(55);var Va=a(226);var Ka=a(421);var za=56;var Qa={className:"",pillarClassName:"",app:void 0};var Ya=function(e){k()(t,e);function t(e){var a;p()(this,t);a=f()(this,g()(t).call(this,e));Object(I["a"])(y()(a),["renderEnter","renderIcon","renderIconMaybe"]);return a}h()(t,[{key:"renderEnter",value:function e(){var t=this.props,a=t.className,r=t.pillarClassName;var i=qa()(a,"c-menu_item__enter",n()({},r+"__enter",r));return C.a.createElement(Ha["a"],{type:"enter",className:i,"data-qa":"menu_item_enter",role:"presentation"})}},{key:"renderIcon",value:function e(){var t=this.props,a=t.action,r=t.app,n=t.defaultAppIcon;var i=r&&r.icons||a.iconSet;if(i){var s=za;var o=Object(Ka["b"])({icons:i},s,n);return C.a.createElement("img",{alt:"",className:"p-message-actions__icon",src:o})}if(a.iconType)return C.a.createElement(Ha["b"],{type:a.iconType});return null}},{key:"renderIconMaybe",value:function e(t){if(!t)return null;return C.a.createElement("div",{className:"c-menu_item__icon","data-qa":"menu_item_icon",role:"presentation"},t)}},{key:"render",value:function e(){var t;var a=this.props,r=a.action,i=a.app,s=a.className,o=a.pillarClassName;var l=qa()(s,"c-menu_item__button","c-button-unstyled",(t={"c-menu_item__button--danger":r.danger},n()(t,""+o,o),n()(t,o+"--danger",r.danger&&o),t));var c=i&&i.name||r.description;!c&&i&&(c=C.a.createElement(Ga["a"],{type:Object(Wa["d"])(i)?"unknown":"non-existent"}));return C.a.createElement("div",{className:"c-menu_item__li",role:"presentation"},C.a.createElement("div",{className:l,"data-qa":r["data-qa"],key:r.id,id:r.id},this.renderIconMaybe(this.renderIcon()),C.a.createElement("div",{className:"c-menu_item__label",role:"presentation"},r.label||r.name,C.a.createElement("div",{className:"c-menu_item__description"},c)),this.renderEnter()))}}]);return t}(E["PureComponent"]);Ya.displayName="AppActionsDialogItem";Ya.defaultProps=Qa;var Ja=function e(t,a){var r=a.action;return{app:r&&r.appId&&Object(Va["getAppById"])(t,r.appId),defaultAppIcon:Object(Va["getDefaultAppIcon"])(t)}};var Xa=Object(w["connect"])(Ja)(Ya);var Za=a(85);var $a=a(370);var er=a(1654);var tr=a(244);var ar=a(1346);var rr=a(144);var nr=a(145);var ir=a(219);var sr=a(1154);var or=a(918);var lr=a(1059);var cr=a(3621);var ur={theme:"light",hasAdHocSender:false,userId:null,username:null,botId:null,attachments:[],blocks:void 0,blocksContainerContext:rr["a"].app_actions,text:void 0,message:void 0};var dr=function(e){k()(t,e);function t(e){var a;p()(this,t);a=f()(this,g()(t).call(this,e));a.state={gradient:false};a.renderAttachment=a.renderAttachment.bind(y()(a));return a}h()(t,[{key:"componentDidMount",value:function e(){this.maybeSetGradient()}},{key:"maybeSetGradient",value:function e(){var t=Object(Za["findDOMNode"])(this);t&&t.scrollHeight>t.clientHeight&&this.setState(function(){return{gradient:true}})}},{key:"renderAttachment",value:function e(t,a){var r=this.props,n=r.ts,i=r.channelId,o=r.blocksContainerContext;return C.a.createElement(or["a"],s()({key:a},Object(tr["b"])(t),{messageTs:n,activeChannelId:i,showDelete:false,blocksContainerContext:o}))}},{key:"renderAttachments",value:function e(){var t=this.props.attachments;if(!t||!t.length)return null;return C.a.createElement("div",{className:"p-app_actions_pillow__attachments"},t.map(this.renderAttachment))}},{key:"renderAvatar",value:function e(){var t=this.props,a=t.userId,r=t.hasAdHocSender,n=t.botId;return C.a.createElement(ir["b"],{className:"p-app_actions_pillow__avatar",userId:a,isAdHocMember:r,botId:n,size:24,isInteractive:false,showCard:false,showTooltip:false,tabIndex:"-1"})}},{key:"renderContent",value:function e(){var t=this.props,a=t.text,r=t.blocksContainerContext,n=t.message;if(n&&n.blocks)return C.a.createElement(ar["a"],{msg:n,blocksContainerContext:r});return C.a.createElement(nr["a"],{"data-qa":"app-actions-pillow-message-text",text:a})}},{key:"renderContentHeader",value:function e(){var t=this.props,a=t.userId,r=t.botId,n=t.username,i=t.theme,s=t.channel;return C.a.createElement("div",{className:"p-app_actions_pillow__content_header"},C.a.createElement(lr["a"],{userId:a,botId:r,username:n,channelName:Object(_e["getDisplayName"])(s),isInteractive:false}),"light"===i&&this.renderTimestamp())}},{key:"renderGutter",value:function e(){if("light"===this.props.theme)return C.a.createElement("div",{className:"p-app_actions_pillow__gutter"},this.renderAvatar());return C.a.createElement("div",{className:"p-app_actions_pillow__gutter"},this.renderTimestamp())}},{key:"renderTimestamp",value:function e(){var t=this.props.ts;return C.a.createElement(sr["b"],{timestamp:t,relative:false,full:true})}},{key:"render",value:function e(){var t=this.props.theme;var a=qa()("p-app_actions_pillow","p-app_actions_pillow--"+t,{"p-app_actions_pillow--gradient":this.state.gradient});return C.a.createElement("div",{className:a,role:"presentation","data-qa":"app_action_pillow"},this.renderGutter(),C.a.createElement("div",{className:"p-app_actions_pillow__content"},this.renderContentHeader(),C.a.createElement("div",{className:"p-app_actions_pillow__body",id:"p-app_actions_pillow__body"},this.renderContent(),this.renderAttachments(),C.a.createElement("span",{className:"p-app_actions_pillow__blocker"}))))}}]);return t}(E["PureComponent"]);dr.displayName="AppActionsPillow";dr.defaultProps=ur;var pr=function e(t,a){var r=a.ts,n=a.channelId;var i=Object(q["a"])(t,n,r);var s=Object(Q["e"])(t,n);var o=Object(G["getMessageMemberId"])(i);var l=Object(G["getMsgSenderEntity"])(t,i),c=l.botId,u=l.username;return{channel:s,userId:o,username:u,botId:c,theme:Object($a["a"])(t),hasAdHocSender:Object(er["a"])(i),text:i.text,attachments:i.attachments,message:i}};var mr=Object(w["connect"])(pr)(dr);var hr=a(2472);var vr=new D["b"]("app_actions");var fr=64;var br="/apps/collection/actions?utm_source=in-prod&utm_medium=inprod-get_more_app_actions-message_action_dialog-click";var gr={onClose:j["noop"],onSelectAction:j["noop"]};var _r=function(e){k()(t,e);function t(e){var a;p()(this,t);a=f()(this,g()(t).call(this,e));a.state={filterQuery:"",isLoading:true,isError:false,actions:[]};a.initClogged=false;Object(I["a"])(y()(a),["onFilterUpdate","onFooterLinkClick","onSelectAction","renderSingleAction","handleSelectEvent","searchActions"]);a.searchActionsDebounced=Object(j["debounce"])(a.searchActions,200,{leading:true});return a}h()(t,[{key:"componentDidMount",value:function e(){this.searchActionsDebounced()}},{key:"componentDidUpdate",value:function e(){if(!this.initClogged&&!this.state.isLoading&&!this.state.isError){var t=this.props.clogger;t.track(T["EventId"].MSG_ACTION,{contexts:{ui_context:{action:T["UiAction"].IMPRESSION,step:T["UiStep"].MESSAGE_ACTION_DIALOG,ui_element:T["UiElement"].MESSAGE_ACTION_DIALOG}},app_actions_showing:this.state.actions.length});this.initClogged=true}}},{key:"componentWillUnmount",value:function e(){this.activePromise&&delete this.activePromise}},{key:"onFilterUpdate",value:function e(t){this.setState(function(){return{filterQuery:t}},this.searchActionsDebounced)}},{key:"onFooterLinkClick",value:function e(){var t=this.props.clogger;t.track(T["EventId"].MSG_ACTION,{contexts:{ui_context:{action:T["UiAction"].CLICK,step:T["UiStep"].MESSAGE_ACTION_DIALOG,ui_element:T["UiElement"].GET_MORE_APP_ACTIONS}},app_actions_showing:this.state.actions.length})}},{key:"onSelectAction",value:function e(t,a){var r=this.props,n=r.ts,i=r.channelId,s=r.closeModal,o=r.handleMessageAction,e=r.onSelectAction,l=r.clogger;s();this.props.onClose&&this.props.onClose(t);var c=e(t,a,{ts:n,channelId:i});c||o(t,a,{ts:n,channelId:i});this.props.recordMessageActionFrecencyEvent({action:a,query:this.state.filterQuery});var u={ui_context:{action:T["UiAction"].CLICK,step:T["UiStep"].MESSAGE_ACTION_DIALOG,ui_element:a.uiElement}};a.appId?l.track(T["EventId"].MSG_ACTION,{contexts:u,app_id:a.appId,action_id:a.id}):l.track(T["EventId"].MSG_ACTION,{contexts:u})}},{key:"handleSelectEvent",value:function e(t,a,r){this.onSelectAction(r,a.props.action)}},{key:"searchActions",value:function e(){var t=this;var a=this.props.searchMessageActions({channelId:this.props.channelId,ts:this.props.ts,query:this.state.filterQuery}).then(function(e){t.activePromise===a&&t.setState(function(){return{actions:e,isError:false,isLoading:false}})}).catch(function(){t.setState(function(){return{isError:true,isLoading:false}})});this.activePromise=a}},{key:"renderLoading",value:function e(){return C.a.createElement("div",{className:"p-app_actions_dialog__loader"},C.a.createElement(La["a"],null))}},{key:"renderMessagePreview",value:function e(){var t=this.props,a=t.channelId,r=t.ts;return C.a.createElement("div",{className:"p-app_actions_dialog__message","data-qa-app-actions-dialog-message":true},C.a.createElement(mr,{channelId:a,ts:r}))}},{key:"renderSelect",value:function e(){var t=vr.t("Search message actions\u2026");return C.a.createElement(Ua["b"],{"data-qa":"app-actions-dialog-list",isAlwaysOpen:true,usePlaceholderOption:false,autoSelectFirstOption:true,focusInputOnMount:true,placeholder:t,icon:"search",id:"p-app_actions_dialog__select",className:"p-app_actions_dialog__select",pillarClassName:"p-app_actions_dialog",onChange:this.handleSelectEvent,onFilterInputChange:this.onFilterUpdate,options:Object(j["map"])(this.state.actions,this.renderSingleAction),optionsRowHeight:fr,useFullWidthOptions:true})}},{key:"renderSingleAction",value:function e(t){var a=C.a.createElement(Xa,{key:t.id,pillarClassName:"p-app_actions_dialog_option",action:t});return{label:a,value:t.id}}},{key:"renderTitle",value:function e(t){return C.a.createElement("div",{className:"p-app_actions_dialog__title","data-qa-app-actions-dialog-title":true},C.a.createElement("div",{className:"p-app_actions_dialog__title_text"},t))}},{key:"render",value:function e(){var t=this.state.isLoading;var a=vr.t("Get more message actions");var r=vr.t("Use an action");return C.a.createElement(Fa["a"],{contentLabel:r,className:"p-app_actions_dialog",overlayClassName:"p-app_actions_dialog__overlay",footerIcon:"external-link",footerLink:br,onFooterLinkClick:this.onFooterLinkClick,footerText:a,goOnEnterPressed:false,onCancel:this.props.onClose,showCancelButton:false,showGoButton:false,title:this.renderTitle(r),ariaContent:{describedby:"p-app_actions_pillow__body"},useSlackScrollbar:false},this.renderMessagePreview(),t?this.renderLoading():this.renderSelect())}}]);return t}(E["PureComponent"]);_r.displayName="AppActionsDialog";_r.defaultProps=gr;function yr(e){return{clogger:Object(A["a"])({state:e})}}var Or=function e(t){return{closeModal:function e(){return t(Object(na["closeModal"])())},handleMessageAction:function e(){for(var a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return Ra.apply(void 0,r.concat([t]))},searchMessageActions:function e(){return t(Ut.apply(void 0,arguments))},recordMessageActionFrecencyEvent:function e(a){return t(L(a))}}};var kr=Object(w["connect"])(yr,Or)(_r);var Er=kr;var Cr=Object(M["b"])("Open app actions dialog",function(e,t,a){var r=C.a.createElement(Er,a);e(Object(na["openModal"])({element:r}))});Cr.meta={name:"browseAppActions",key:"actionsBrowseAppActionsBrowseAppActions",description:"Open app actions dialog"};Cr.propTypes={channelId:S["default"].string.isRequired,ts:S["default"].string.isRequired,onSelectAction:S["default"].func.isRequired};var Sr=Cr;var wr=a(150);var jr=new D["b"]("message");var Ir=3;var Tr="/apps/collection/actions?utm_source=in-prod&utm_medium=inprod-more_message_actions_button-more_actions_menu-click";var Ar=function(e){k()(t,e);function t(e){var a;p()(this,t);a=f()(this,g()(t).call(this,e));a.onSelected=a.onSelected.bind(y()(a));a.state={hasActions:e.hasActions};return a}h()(t,[{key:"onSelected",value:function e(t){var a=this.props,r=a.ts,n=a.channelId,i=a.onSelectAction,s=a.clogger;this.props.hasOverflow?this.props.browseAppActions({ts:r,channelId:n,onSelectAction:i}):t&&"click"!==t.type&&window.open(Tr,"_blank");s.track(T["EventId"].MSG_ACTION,{contexts:{ui_context:{action:T["UiAction"].CLICK,step:T["UiStep"].MORE_ACTIONS_MENU,ui_element:T["UiElement"].MORE_MESSAGE_ACTIONS_BUTTON}}})}},{key:"render",value:function e(){var t=this.props,a=t.ts,r=t.channelId,n=t.onSelectAction,i=t.hasActions,o=t.browseAppActions,c=t.featureOfflineMode,u=t.isOffline,d=l()(t,["ts","channelId","onSelectAction","hasActions","browseAppActions","featureOfflineMode","isOffline"]);var p=this.state.hasActions?jr.t("More message actions\u2026"):jr.t("Add a message action\u2026");return C.a.createElement(P["a"],s()({},d,{label:p,"data-qa":this.props.hasOverflow?"app_message_actions_dialog":"app_directory_link",onSelected:this.onSelected,href:this.props.hasOverflow?void 0:Tr,disabled:c&&u,showOfflineIcon:c&&u}))}}]);return t}(E["Component"]);Ar.displayName="BrowseAppActions";var Nr=function e(t){var a=Object(At["d"])(t),r=a.actions,n=a.loading;var i=r.length;return{hasActions:n||!!i,hasOverflow:n||i>Ir,clogger:Object(A["a"])({state:t}),featureOfflineMode:Object($["isFeatureEnabled"])(t,"feature_offline_mode"),isOffline:!Object(wr["c"])(t)}};var Pr=function e(t){return{browseAppActions:function e(){return t(Sr.apply(void 0,arguments))}}};var Mr=Object(N["b"])(Object(w["connect"])(Nr,Pr)(Ar));var Dr=a(57);var xr=a(454);var Rr=new D["b"]("message");var Fr={ts:S["default"].string.isRequired,channelId:S["default"].string.isRequired};var Lr=Object(B["b"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.ts,r=t.channelId;var n=Object(q["a"])(e,r,a);if(!n)return null;if(!Object(G["canCopyMessage"])(e,{message:n}))return null;return{id:U["SLACK_ACTION_IDS"].copyText,name:Rr.t("Copy text"),iconType:"link","data-qa":"copy_text",frecencyId:Object(H["c"])("copy_text"),uiElement:T["UiElement"].COPY_LINK_BUTTON}});Lr.meta={name:"copyText",key:"componentsMessageActionSelectorsCopyTextCopyText"};Lr.propTypes=Fr;var Ur=Lr;var Br=a(17);var qr=56;var Gr=40;var Hr={type:xr["a"].default,app:void 0,shortcut:void 0};var Wr=function(e){k()(t,e);function t(e){var a;p()(this,t);a=f()(this,g()(t).call(this,e));a.onSelected=a.onSelected.bind(y()(a));return a}h()(t,[{key:"componentDidMount",value:function e(){var t=this.props,a=t.clogger,r=t.action;if(r.appId){var n={ui_context:{action:T["UiAction"].IMPRESSION,step:T["UiStep"].MORE_ACTIONS_MENU,ui_element:r.uiElement}};a.track(T["EventId"].MSG_ACTION,{app_id:r.appId,action_id:r.id,contexts:n})}}},{key:"onSelected",value:function e(t){t.stopPropagation();var a=this.props,r=a.action,e=a.onSelected;e(t,r)}},{key:"renderIcon",value:function e(){var t=this.props,a=t.action,r=t.app,n=t.type,i=t.defaultAppIcon;var s=r&&r.icons||a.iconSet;if(s){var o=n===xr["a"].compactItem?Gr:qr;var l=Object(Ka["b"])({icons:s},o,i);return C.a.createElement("img",{alt:"",className:"p-message-actions__icon",src:l})}if(a.iconType)return C.a.createElement(Ha["b"],{type:a.iconType});return null}},{key:"render",value:function e(){var t=this.props,a=t.action,r=t.app,n=t.onSelected,i=t.type,o=t.shortcut,c=l()(t,["action","app","onSelected","type","shortcut"]);var u=r&&r.name||a.description;!u&&r&&(u=C.a.createElement(Ga["a"],{type:Object(Wa["d"])(r)?"unknown":"non-existent"}));return C.a.createElement(P["a"],s()({type:i,label:a.label||a.name,description:u,icon:this.renderIcon(),danger:a.danger,onSelected:this.onSelected,"data-qa":a["data-qa"],shortcut:o},c))}}]);return t}(E["PureComponent"]);Wr.displayName="MessageActionMenuItem";Wr.defaultProps=Hr;var Vr=function e(t,a){var r=a.action;return{app:r&&r.appId&&Object(Va["getAppById"])(t,r.appId),defaultAppIcon:Object(Va["getDefaultAppIcon"])(t),clogger:Object(A["a"])({state:t})}};var Kr=Object(w["connect"])(Vr)(Wr);var zr=Object(N["b"])(Kr);var Qr=a(3624);function Yr(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function Jr(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Yr(Object(a),true).forEach(function(t){n()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Yr(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Xr=3;var Zr={messageContainerType:U["MESSAGE_CONTAINERS"].MESSAGE_PANE,onSelectAction:j["noop"],onMenuItemSelected:j["noop"],canRunAppAction:false,appActions:[],rollup:void 0,threadTs:void 0};var $r=function(e){k()(t,e);function t(e){var a;p()(this,t);a=f()(this,g()(t).call(this,e));a.state={appActions:e.appActions};Object(I["a"])(y()(a),["onSelectAction","renderSingleAppAction","renderSingleSlackAction"]);return a}h()(t,[{key:"componentDidMount",value:function e(){var t=this.props.clogger;t.track(T["EventId"].MSG_ACTION,{contexts:{ui_context:{action:T["UiAction"].IMPRESSION,step:T["UiStep"].MORE_ACTIONS_MENU,ui_element:T["UiElement"].MORE_ACTIONS_MENU}},app_actions_showing:Math.min(this.state.appActions.length,Xr)})}},{key:"onSelectAction",value:function e(t,a){var r=this.props,n=r.ts,i=r.threadTs,s=r.channelId,o=r.handleMessageAction,e=r.onSelectAction,l=r.rollup,c=r.clogger,u=r.messageContainerType;var d=e(t,a,{ts:n,channelId:s});d||o(t,a,{ts:n,threadTs:i,channelId:s,rollup:l,messageContainerType:u});this.props.recordMessageActionFrecencyEvent({action:a});var p={ui_context:{action:T["UiAction"].CLICK,step:T["UiStep"].MORE_ACTIONS_MENU,ui_element:a.uiElement}};a.appId?c.track(T["EventId"].MSG_ACTION,{contexts:p,app_id:a.appId,action_id:a.id}):c.track(T["EventId"].MSG_ACTION,{contexts:p})}},{key:"renderAppActions",value:function e(){var t=this.props,a=t.onSelectAction,r=t.ts,n=t.channelId;var i=this.state.appActions;var s=i.slice(0,Xr).map(this.renderSingleAppAction);return[].concat(u()(s),[C.a.createElement(Mr,{key:"browse_app_actions",ts:r,channelId:n,onSelectAction:a})])}},{key:"renderSingleAppAction",value:function e(t){var a=this.props,r=a.featureOfflineMode,n=a.isOffline;var i=jt(t);return C.a.createElement(zr,{key:i.id,type:xr["a"].compactItem,action:i,onSelected:this.onSelectAction,disabled:r&&n,showOfflineIcon:r&&n})}},{key:"renderSingleSlackAction",value:function e(t,a){if(!t)return null;if(C.a.isValidElement(t))return C.a.cloneElement(t,{key:a});var r=Object(j["omit"])(t,["iconType","iconSet"]);return C.a.createElement(zr,{key:r.id,className:"p-message_actions_menu__"+r.id,action:r,onSelected:this.onSelectAction,disabled:r.disabled,showOfflineIcon:r.showOfflineIcon,shortcut:t.shortcut?t.shortcut:void 0})}},{key:"renderSlackActions",value:function e(){return this.props.slackActions.map(this.renderSingleSlackAction)}},{key:"render",value:function e(){var t=this.props,a=t.ts,r=t.channelId,n=t.messageContainerType,i=t.onMenuItemSelected,o=t.onSelectAction,c=t.canRunAppAction,u=t.appActions,d=t.slackActions,p=t.handleMessageAction,m=l()(t,["ts","channelId","messageContainerType","onMenuItemSelected","onSelectAction","canRunAppAction","appActions","slackActions","handleMessageAction"]);return C.a.createElement(Dr["f"],s()({menuClassNames:"p-message_actions_menu",onMenuItemSelected:i,stripTerminalSeparators:true},m),this.renderSlackActions(),C.a.createElement(Dr["d"],null),c&&this.renderAppActions())}}]);return t}(E["PureComponent"]);$r.displayName="MessageActionsMenu";$r.defaultProps=Zr;var en=function e(t,a){var r=a.channelId,n=a.ts;var i=a.messageContainerType||U["MESSAGE_CONTAINERS"].MESSAGE_PANE;var s=Object(q["a"])(t,r,n);var o=Object(G["canRunAppAction"])(s);var l=Object(Br["canRunAppAction"])(t);var c=Object(At["d"])(t),u=c.actions;var d=Object($["isFeatureEnabled"])(t,"feature_offline_mode");var p=!Object(wr["c"])(t);var m="treatment"===Object(ft["getGroupForUser"])(t,"nova_unread_threads");var h=l&&o;var v=d?Jr({},a,{disabled:p,showOfflineIcon:p}):a;var f=m?[U["MESSAGE_CONTAINERS"].MESSAGE_PANE,U["MESSAGE_CONTAINERS"].UNREAD_VIEW,U["MESSAGE_CONTAINERS"].THREADS_FLEXPANE]:[U["MESSAGE_CONTAINERS"].MESSAGE_PANE,U["MESSAGE_CONTAINERS"].UNREAD_VIEW];var b=Object(j["filter"])([vt(t,v),C.a.createElement(Dr["d"],null),Object(j["includes"])([U["MESSAGE_CONTAINERS"].THREADS_FLEXPANE,U["MESSAGE_CONTAINERS"].THREADS_VIEW,U["MESSAGE_CONTAINERS"].SLI_BRIEFING],i)&&nt(t,a),re(t,a),Ur(t,a),Object(j["includes"])(f,i)&&be(t,Jr({},a,{allUnreads:i===U["MESSAGE_CONTAINERS"].UNREAD_VIEW})),We(t,v),Se(t,v),Ct(t,v),pe(t,v),Qe(t,v),oe(t,v)]);return{slackActions:b,appActions:u,canRunAppAction:h,clogger:Object(A["a"])({state:t}),featureOfflineMode:d,isOffline:p}};var tn=function e(t){return{handleMessageAction:function e(){for(var a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return Ra.apply(void 0,r.concat([t]))},recordMessageActionFrecencyEvent:function e(a){return t(L(a))}}};var an=Object(w["connect"])(en,tn)($r);var rn=t["a"]=an},,function(e,t,a){},,,,,function(e,t,a){},,,,,,function(e,t,a){},,,,,function(e,t,a){"use strict";var r=a(1804);var n={childContextTypes:true,contextType:true,contextTypes:true,defaultProps:true,displayName:true,getDefaultProps:true,getDerivedStateFromError:true,getDerivedStateFromProps:true,mixins:true,propTypes:true,type:true};var i={name:true,length:true,prototype:true,caller:true,callee:true,arguments:true,arity:true};var s={$$typeof:true,render:true,defaultProps:true,displayName:true,propTypes:true};var o={$$typeof:true,compare:true,defaultProps:true,displayName:true,propTypes:true,type:true};var l={};l[r.ForwardRef]=s;function c(e){if(r.isMemo(e))return o;return l[e["$$typeof"]]||n}var u=Object.defineProperty;var d=Object.getOwnPropertyNames;var p=Object.getOwnPropertySymbols;var m=Object.getOwnPropertyDescriptor;var h=Object.getPrototypeOf;var v=Object.prototype;function f(e,t,a){if("string"!==typeof t){if(v){var r=h(t);r&&r!==v&&f(e,r,a)}var n=d(t);p&&(n=n.concat(p(t)));var s=c(e);var o=c(t);for(var l=0;l<n.length;++l){var b=n[l];if(!i[b]&&!(a&&a[b])&&!(o&&o[b])&&!(s&&s[b])){var g=m(t,b);try{u(e,b,g)}catch(e){}}}}return e}e.exports=f},,,function(e,t,a){"use strict";var r=a(4984);var n=[];var i=[];var s=r.makeRequestCallFromTimer(o);function o(){if(i.length)throw i.shift()}e.exports=l;function l(e){var t;t=n.length?n.pop():new c;t.task=e;r(t)}function c(){this.task=null}c.prototype.call=function(){try{this.task.call()}catch(e){if(l.onerror)l.onerror(e);else{i.push(e);s()}}finally{this.task=null;n[n.length]=this}}},,function(e,t,a){"use strict";(function(t){e.exports=a;function a(e){if(!r.length){i();n=true}r[r.length]=e}var r=[];var n=false;var i;var s=0;var o=1024;function l(){while(s<r.length){var e=s;s+=1;r[e].call();if(s>o){for(var t=0,a=r.length-s;t<a;t++)r[t]=r[t+s];r.length-=s;s=0}}r.length=0;s=0;n=false}var c="undefined"!==typeof t?t:self;var u=c.MutationObserver||c.WebKitMutationObserver;i="function"===typeof u?d(l):p(l);a.requestFlush=i;function d(e){var t=1;var a=new u(e);var r=document.createTextNode("");a.observe(r,{characterData:true});return function e(){t=-t;r.data=t}}function p(e){return function t(){var a=setTimeout(n,0);var r=setInterval(n,50);function n(){clearTimeout(a);clearInterval(r);e()}}}a.makeRequestCallFromTimer=p}).call(this,a(71))},,,function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(85);var s=a.n(i);var o=a(12);var l=a(26);var c=a(52);var u=a(444);var d=a(110);var p=a.n(d);var m=a(135);var h=a.n(m);var v=a(169);var f=a.n(v);var b=a(138);var g=a.n(b);var _=a(185);var y=a.n(_);var O=a(11);var k=a(0);var E=a(6);var C=a(240);var S=a(387);var w=a(88);var j=a.n(w);var I=a(147);var T=a.n(I);var A=a(20);var N=a(299);var P=a(25);var M=a(192);var D=a(39);var x=a(759);var R=a(266);var F=a(33);var L=a(352);var U=a(913);var B=a(486);var q=a(109);var G=a(1179);var H=C["SHARED_CHANNELS_MGMT_OPTIONS"].GRID;function W(e){var t="type:"+e.value;if(e.value===H.TOPLEVEL_ADMINS_AND_OWNERS_AND_SELECTED){var a=e.users;var r=e.userGroups;a&&a.forEach(function(e){t+=",user:"+e.id});r&&r.forEach(function(e){t+=",subteam:"+e.id})}return t}var V=new E["b"]("enterprise_dashboard");function K(e){var t=function t(){e.setAndUpsertOrgPref({pref:"who_can_manage_ext_shared_channels",value:W({value:C["SHARED_CHANNELS_MGMT_OPTIONS"].GRID.NO_ONE})}).then(function(){e.closeModal()})};return n.a.createElement(G["a"],{title:V.t("Don\u2019t allow new shared channels?"),submitButtonType:"danger",submitButtonText:V.t("Disable"),onSubmit:t,onCancel:e.closeModal,onClose:e.closeModal},n.a.createElement("p",null,V.rt("If you disable shared channel requests, <strong>no one at {enterpriseOrgName} will be able to create new shared channels.</strong>",{enterpriseOrgName:e.enterpriseOrgName})),n.a.createElement("p",null,V.rt("Instead, you may want to restrict who can approve shared channel requests. <a>Learn more</a>",null,function(e){var t=e.text;return n.a.createElement(B["a"],{href:"https://get.slack.help/hc/articles/115004152843"},t)})))}K.displayName="SharedChannelsSettingDisableConfirmation";var z=function e(t){return{enterpriseOrgName:Object(R["c"])(Object(F["e"])(t))}};var Q=function e(t){return{setAndUpsertOrgPref:function e(){return t(x["g"].apply(void 0,arguments))},closeModal:function e(){return t(D["closeModal"].apply(void 0,arguments))}}};var Y=Object(o["connect"])(z,Q)(Object(q["pure"])(K));var J=a(44);var X=a(24);var Z=a(93);var $=a(15);var ee=a(163);var te=a(9);var ae=Object($["b"])(function(e){return e&&e.prefs&&e.prefs.enterprise&&e.prefs.enterprise.orgWideChannels||[]});ae.meta={name:"getOrgWideChannels",key:"prefsStoreEnterpriseOrgWideChannelsSelectorsGetOrgWideChannels"};var re=Object(ee["createSelector"])(ae,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.filter(function(e){return!Object(te["isPrivateChannel"])(e)})});var ne=Object(ee["createSelector"])(ae,L["e"],function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.filter(function(e){return!t.includes(e.id)})});var ie=a(2);var se=a(30);var oe=a(247);var le=a(860);var ce=a(356);var ue=a(50);var de=a(151);var pe=a(269);var me=a(1389);var he=a(564);var ve=a(1311);var fe=k["default"].shape({value:k["default"].string,users:k["default"].array,userGroups:k["default"].array});var be={SLACKBOT:"slackbot",CHANNEL:"channel"};function ge(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function _e(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ge(Object(a),true).forEach(function(t){j()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ge(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var ye=new E["b"]("enterprise_dashboard");var Oe={initialRequestDeliveryMethod:be.SLACKBOT,initialSelectedChannel:void 0,channelOptions:[],onSelectionChange:ie["noop"]};var ke=function e(t){return t&&t.id?_e({label:Object(te["getDisplayName"])(t),value:t.id},t):void 0};var Ee=function(e){y()(t,e);function t(e){var a;p()(this,t);a=f()(this,g()(t).call(this,e));a.state={requestDeliveryMethod:e.initialRequestDeliveryMethod,selectedChannel:e.initialSelectedChannel&&e.initialSelectedChannel.value?e.initialSelectedChannel:void 0};Object(se["a"])(T()(a),["renderChannelOption","renderSelectedOption","formatMultiSelectOptions","onDeliveryMethodChange","onChannelSelectionChange"]);return a}h()(t,[{key:"onChannelSelectionChange",value:function e(t){this.setState(function(){return{selectedChannel:t}},this.onRouteToChannelPrefChange)}},{key:"onDeliveryMethodChange",value:function e(t){if(!Object.values(be).includes(t))return;this.setState(function(){return{requestDeliveryMethod:t}},this.onRouteToChannelPrefChange)}},{key:"onRouteToChannelPrefChange",value:function e(){var t=this.props.onSelectionChange;var a=this.state,r=a.requestDeliveryMethod,n=a.selectedChannel;t({deliveryMethod:r,selectedChannel:n})}},{key:"formatMultiSelectOptions",value:function e(){var t=this.props.channelOptions;return Object(ie["map"])(t,ke)}},{key:"renderChannelOption",value:function e(t){var a=this.props.channelOptions;var r=Object(ie["find"])(a,{id:t.value});if(!r)return null;return n.a.createElement(he["a"],{channel:r})}},{key:"renderSelectedOption",value:function e(t){var a=this.props.channelOptions;var r=Object(ie["find"])(a,{id:t.value});if(!r)return null;return n.a.createElement(ve["a"],{channel:r})}},{key:"render",value:function e(){var t=this;var a=ye.t("Choose a channel");var r=this.state,i=r.requestDeliveryMethod,s=r.selectedChannel;return n.a.createElement("div",{"data-qa":"shared_channels_route_to_channel",className:"margin_top_150"},n.a.createElement("p",{className:"bold small margin_bottom_50"},ye.t("Where will these requests be sent?")),n.a.createElement(pe["a"],{className:"margin_bottom_0"},n.a.createElement(ue["a"],{text:ye.t("Everyone who can approve via direct message"),type:"inline",cursor:"pointer"},n.a.createElement(de["a"],{"data-qa":"requests_destination_slackbot",checked:i===be.SLACKBOT,onChange:function e(){return t.onDeliveryMethodChange(be.SLACKBOT)}})),n.a.createElement(ue["a"],{text:ye.t("A specific channel"),type:"inline",cursor:"pointer"},n.a.createElement(de["a"],{"data-qa":"requests_destination_channel",checked:i===be.CHANNEL,onChange:function e(){return t.onDeliveryMethodChange(be.CHANNEL)}})),n.a.createElement("div",{className:"margin_left_150 nudge_left_2"},n.a.createElement(ce["f"],{width:"100%",selectId:"shared_channels_route_to_channel_select",isDisabled:i!==be.CHANNEL,options:this.formatMultiSelectOptions(),onOptionSelected:this.onChannelSelectionChange,selectedOption:s,renderOption:this.renderChannelOption,renderSelectedOption:this.renderSelectedOption,placeholderText:a}),n.a.createElement("span",{className:"c-label__subtext margin_top_25"},ye.rt("Requests can only be sent to {orgWideLink}.",{orgWideLink:n.a.createElement(me["a"],{href:"https://slack.com/help/articles/115001399587-Create-multi-workspace-channels-on-Enterprise-Grid?utm_medium=in-prod&utm_source=in-prod&utm_campaign=cd_in-prod_in-prod_all_en_sharedchannels-betterinvites_cr-route-to-channel-org-wide_ym-201911"},ye.t("org-wide channels"))})))))}}]);return t}(r["PureComponent"]);Ee.displayName="SharedChannelsSettingRouteToChannel";Ee.defaultProps=Oe;var Ce=function e(t,a){var r=a.initialRequestDeliveryMethod,n=a.initialSelectedChannel;return{initialRequestDeliveryMethod:r,initialSelectedChannel:n?ke(n):void 0}};var Se=function e(t){return{setSelectedApp:function e(a){return t(Object(oe["z"])(a))},fetchAppManagementStatus:function e(){return t(le["a"].apply(void 0,arguments))},fetchInstallableApps:function e(){return t(le["d"].apply(void 0,arguments))}}};var we=Object(o["connect"])(Ce,Se)(Ee);var je=a(124);var Ie=a(131);var Te=a(106);var Ae=a(18);var Ne=new E["b"]("enterprise_dashboard");var Pe=Object(Ae["b"])("Shows a success toast when admin settings are saved.",function(e){e(Object(Te["enqueueToast"])({element:n.a.createElement(Ie["b"],{position:"bottom-right",shouldAutoFade:true},n.a.createElement("span",null,n.a.createElement("strong",null,Ne.rt("Changes saved"))))}))});Pe.meta={name:"enqueueSettingsSavedToast",key:"componentsEnterpriseSettingsSavedToastSettingsSavedToastEnqueueSettingsSavedToast",description:"Shows a success toast when admin settings are saved."};Pe.propTypes={};var Me=Pe;var De=a(2017);var xe=a(17);var Re=a(97);var Fe=a(420);var Le=a(866);var Ue=a(1443);var Be=C["SHARED_CHANNELS_MGMT_OPTIONS"].GRID;var qe=new E["b"]("enterprise_dashboard");var Ge={member:"member",userGroup:"user_group"};var He=function(e){y()(t,e);function t(){p()(this,t);return f()(this,g()(t).apply(this,arguments))}h()(t,[{key:"getSelectedMembers",value:function e(){var t=this.props.whoCanManageESC;var a=t.users.filter(function(e){return!!e}).map(function(e){return{label:Object(xe["getMemberRealName"])(e),value:e.id,type:"member",entity:e}});var r=t.userGroups.filter(function(e){return!!e}).map(function(e){return{label:Object(Re["h"])(e),value:e.id,type:"user_group",entity:e}});return a.concat(r)}},{key:"renderEntity",value:function e(t){var a=t.type,r=t.value,i=t.label,s=t.entity;switch(a){case Ge.member:return n.a.createElement(Le["a"],{size:"small",id:r,key:r});case Ge.userGroup:return n.a.createElement(Ue["a"],{size:"small",userGroup:s,key:r});default:return i}}},{key:"render",value:function e(){var t=this.props,a=t.whoCanManageESC,r=t.searchUserGroupsAndMembers;if(a.value===Be.TOPLEVEL_ADMINS_AND_OWNERS_AND_SELECTED)return n.a.createElement(Fe["b"],{width:"100%",maxHeight:200,selectId:"enterprise_esc_filter_select",search:r,placeholderText:qe.t("Search"),renderOption:this.renderEntity,selectedOptions:this.getSelectedMembers(),onSelectedItemsChange:this.props.onSelectedItemsChange});return null}}]);return t}(n.a.Component);He.displayName="SharedChannelSettingsMultiSelect";var We=He;var Ve=new E["b"]("enterprise_dashboard");var Ke=C["SHARED_CHANNELS_MGMT_OPTIONS"].GRID;var ze={};var Qe=function(e){y()(t,e);function t(){p()(this,t);return f()(this,g()(t).apply(this,arguments))}h()(t,[{key:"isRadioChecked",value:function e(t){return this.props.whoCanManageESC.value===t}},{key:"renderRadioGroup",value:function e(){var t=this;return n.a.createElement(pe["a"],null,n.a.createElement(ue["a"],{text:Ve.t("Everyone, except guests"),type:"inline",cursor:"pointer"},n.a.createElement(de["a"],{name:"who_can_manage_ext_shared_channels",value:Ke.EVERYONE,checked:this.isRadioChecked(Ke.EVERYONE),onChange:function e(){return t.props.onRadioChange({value:Ke.EVERYONE})}})),n.a.createElement(ue["a"],{text:Ve.t("Any admin or owner"),type:"inline",cursor:"pointer"},n.a.createElement(de["a"],{name:"who_can_manage_ext_shared_channels",value:Ke.ALL_ADMINS_AND_OWNERS,checked:this.isRadioChecked(Ke.ALL_ADMINS_AND_OWNERS),onChange:function e(){return t.props.onRadioChange({value:Ke.ALL_ADMINS_AND_OWNERS})}})),n.a.createElement(ue["a"],{text:Ve.t("Org Admins and Owners only (default)"),type:"inline",cursor:"pointer"},n.a.createElement(de["a"],{name:"who_can_manage_ext_shared_channels",value:Ke.TOPLEVEL_ADMINS_AND_OWNERS,checked:this.isRadioChecked(Ke.TOPLEVEL_ADMINS_AND_OWNERS),onChange:function e(){return t.props.onRadioChange({value:Ke.TOPLEVEL_ADMINS_AND_OWNERS})}})),n.a.createElement(ue["a"],{text:Ve.t("Org Admins and Owners, along with\u2026"),type:"inline",cursor:"pointer"},n.a.createElement(de["a"],{name:"who_can_manage_ext_shared_channels",value:Ke.TOPLEVEL_ADMINS_AND_OWNERS_AND_SELECTED,checked:this.isRadioChecked(Ke.TOPLEVEL_ADMINS_AND_OWNERS_AND_SELECTED),onChange:function e(){return t.props.onRadioChange({value:Ke.TOPLEVEL_ADMINS_AND_OWNERS_AND_SELECTED})}})),n.a.createElement(We,{whoCanManageESC:this.props.whoCanManageESC,searchUserGroupsAndMembers:this.props.searchUserGroupsAndMembers,onSelectedItemsChange:this.props.onSelectedItemsChange}))}},{key:"renderSettingDescription",value:function e(){return n.a.createElement(n.a.Fragment,null,n.a.createElement("p",{className:"bold small margin_bottom_50"},Ve.rt("<b>Who can approve shared channel requests?</b>")),n.a.createElement("p",{className:"permissions_title_info"},Ve.t("Choose who can approve shared channel requests or disconnect existing shared channels.")))}},{key:"render",value:function e(){return n.a.createElement(n.a.Fragment,null,this.renderSettingDescription(),this.renderRadioGroup())}}]);return t}(n.a.Component);Qe.displayName="SharedChannelsSettingRadio";Qe.defaultProps=ze;var Ye=Object(q["pure"])(Qe);var Je=new E["b"]("enterprise_dashboard");var Xe=C["SHARED_CHANNELS_MGMT_OPTIONS"].GRID;var Ze={orgWideNonMandatoryChannels:[],initialRouteToChannelDeliveryMethod:be.SLACKBOT,initialRouteToChannelSelectedChannel:void 0};var $e=function(e){y()(t,e);function t(e){var a;p()(this,t);a=f()(this,g()(t).call(this,e));a.state={whoCanManageESC:e.whoCanManageESC,isSaving:false,selectionChanged:false,isSharedChannelsEnabled:e.whoCanManageESC!==Xe.NO_ONE,routeToChannelDeliveryMethod:e.initialRouteToChannelDeliveryMethod,routeToChannelSelectedChannel:e.initialRouteToChannelSelectedChannel};a.onSave=a.onSave.bind(T()(a));a.onWhoCanManageESCRadioChange=a.onWhoCanManageESCRadioChange.bind(T()(a));a.onSelectedItemsChange=a.onSelectedItemsChange.bind(T()(a));a.onSharedChannelsEnabledChange=a.onSharedChannelsEnabledChange.bind(T()(a));a.onRouteToChannelChange=a.onRouteToChannelChange.bind(T()(a));return a}h()(t,[{key:"onRouteToChannelChange",value:function e(t){var a=t.deliveryMethod,r=t.selectedChannel;this.setState(function(){return{routeToChannelDeliveryMethod:a,routeToChannelSelectedChannel:r,selectionChanged:true}})}},{key:"onSave",value:function e(){var t=this;this.setState(function(){return{isSaving:true}});var a;a=this.state.isSharedChannelsEnabled?W(this.state.whoCanManageESC):W({value:Xe.NO_ONE});var r=this.state,n=r.routeToChannelDeliveryMethod,i=r.routeToChannelSelectedChannel;var s=null;n===be.CHANNEL&&i&&i.id&&Object(je["a"])(i.id)&&(s=i.id);var o={who_can_manage_ext_shared_channels:a,external_shared_channel_requests_approval_channel:s};this.props.saveESCPrefs({prefs:o}).then(function(){t.props.closeModal();t.props.enqueueSuccessToast()}).catch(function(){t.setState(function(){return{isSaving:false}});t.props.enqueueErrorToast({shouldAutoFade:true})});return false}},{key:"onSelectedItemsChange",value:function e(t){var a=t.filter(function(e){return"member"===e.type}).map(function(e){return e.entity});var r=t.filter(function(e){return"user_group"===e.type}).map(function(e){return e.entity});this.onWhoCanManageESCRadioChange({value:Xe.TOPLEVEL_ADMINS_AND_OWNERS_AND_SELECTED,users:a,userGroups:r})}},{key:"onSharedChannelsEnabledChange",value:function e(){this.setState(function(e){return{isSharedChannelsEnabled:!e.isSharedChannelsEnabled,selectionChanged:true}})}},{key:"onWhoCanManageESCRadioChange",value:function e(t){var a=t.value,r=t.users,n=t.userGroups;this.setState(function(e){var t=e.whoCanManageESC;return{whoCanManageESC:{value:a,users:r||t.users,userGroups:n||t.userGroups},selectionChanged:true}})}},{key:"maybeRenderPrivateChannelWarning",value:function e(){var t=this.state,a=t.routeToChannelDeliveryMethod,r=t.routeToChannelSelectedChannel;if(a===be.CHANNEL&&r&&Object(te["isPrivateChannel"])(r))return n.a.createElement(Z["a"],{className:"margin_bottom_100",level:"warning"},Je.rt("People with approval permissions who aren\u2019t in this private channel will still be able to manage requests from the <strong>Manage shared channels</strong> page.",{fallbackHash:"4646b8c8e96485a4b049ba31b072f004c21cb183",fallbackHashNs:"admin"}));return null}},{key:"disableOnSave",value:function e(){var t=this.state,a=t.routeToChannelDeliveryMethod,r=t.routeToChannelSelectedChannel,n=t.whoCanManageESC;return n.value===Xe.NO_ONE||a===be.CHANNEL&&(!r||!r.id)||!this.state.selectionChanged||this.state.isSaving}},{key:"render",value:function e(){var t=this.props,a=t.searchUserGroupsAndMembers,r=t.initialRouteToChannelDeliveryMethod,i=t.initialRouteToChannelSelectedChannel,s=t.orgWideNonMandatoryChannels;var o=this.state.whoCanManageESC;return n.a.createElement(J["a"],{closeModal:this.props.closeModal,className:"p-shared_channels_settings__edit_modal"},n.a.createElement(J["h"],null,n.a.createElement(J["j"],{id:"story__title-bar",title:Je.t("Shared channel requests")})),n.a.createElement(J["d"],{className:"p-shared_channels_settings__edit_modal__content"},n.a.createElement(J["e"],null,this.maybeRenderPrivateChannelWarning(),n.a.createElement(Ye,{whoCanManageESC:o,searchUserGroupsAndMembers:a,onRadioChange:this.onWhoCanManageESCRadioChange,onSelectedItemsChange:this.onSelectedItemsChange,isSharedChannelsEnabled:this.state.isSharedChannelsEnabled}),n.a.createElement(we,{initialRequestDeliveryMethod:r,initialSelectedChannel:i,channelOptions:s,onSelectionChange:this.onRouteToChannelChange}))),n.a.createElement(J["f"],null,n.a.createElement(J["g"],null,n.a.createElement(J["c"],{type:"outline",onClick:this.props.closeModal},Je.t("Cancel")),n.a.createElement(X["b"],{onClick:this.onSave,disabled:this.disableOnSave(),loading:this.state.isSaving,"data-qa":"multi-workspace-channel-modal-go"},Je.t("Save Setting")))))}}]);return t}(n.a.Component);$e.displayName="SharedChannelsSettingDialog";$e.defaultProps=Ze;var et=function e(t){var a=Object(L["g"])(t,"external_shared_channel_requests_approval_channel");var r;if(a){var n=Object(A["e"])(t,a,false);n&&(r=n)}return{orgWideNonMandatoryChannels:ne(t),initialRouteToChannelDeliveryMethod:a?be.CHANNEL:be.SLACKBOT,initialRouteToChannelSelectedChannel:r}};var tt=function e(t){return{enqueueSuccessToast:function e(){return t(Me.apply(void 0,arguments))},enqueueErrorToast:function e(){return t(De["a"].apply(void 0,arguments))}}};var at=Object(o["connect"])(et,tt)(Object(q["pure"])($e));var rt=a(55);var nt=a(153);var it=a(524);var st=new E["b"]("enterprise_dashboard");var ot={optionIds:[],optionsToDisplay:[],className:void 0};var lt=function e(t){var a=t.option;if(!a)return null;if(Object(rt["e"])(a))return n.a.createElement(it["a"],null);if(Object(xe["isMember"])(a))return Object(xe["getMemberRealName"])(a);return Object(Re["h"])(a)};function ct(e){var t=e.optionsToDisplay,a=e.className;var r;switch(t.length){case 0:return st.t("Org Admins and Owners");case 1:r=st.rt("Org Admins and Owners, along with {name}",{name:n.a.createElement(lt,{option:t[0]})});break;case 2:r=st.rt("Org Admins and Owners, along with {firstName} and {secondName}",{firstName:n.a.createElement(lt,{option:t[0]}),secondName:n.a.createElement(lt,{option:t[1]})});break;case 3:r=st.rt("Org Admins and Owners, along with {firstName}, {secondName}, and {thirdName}",{firstName:n.a.createElement(lt,{option:t[0]}),secondName:n.a.createElement(lt,{option:t[1]}),thirdName:n.a.createElement(lt,{option:t[2]})});break;default:r=st.rt("Org Admins and Owners, along with {firstName}, {secondName}, and {numRemaining} others",{firstName:n.a.createElement(lt,{option:t[0]}),secondName:n.a.createElement(lt,{option:t[1]}),numRemaining:t.length-2})}return n.a.createElement("span",{className:a},r)}ct.displayName="SelectedOptionsText";ct.defaultProps=ot;function ut(e,t){var a=t.optionIds||[];var r=a;var n=[];if(a.length>3){r=a.slice(0,2);n=a.slice(2)}var i=r.map(function(t){if(Object(nt["a"])(t))return Object(P["e"])(e,t);var a=false;return Object(M["f"])(e,t,a)});return{optionsToDisplay:i.concat(n)}}var dt=Object(o["connect"])(ut)(ct);var pt=a(1668);function mt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function ht(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?mt(Object(a),true).forEach(function(t){j()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):mt(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var vt=new E["b"]("enterprise_dashboard");var ft=C["SHARED_CHANNELS_MGMT_OPTIONS"].GRID;var bt={enterpriseOrgName:void 0,routeToChannelPref:void 0,selectedChannelForRouting:{}};var gt=function(e){y()(t,e);function t(e){var a;p()(this,t);a=f()(this,g()(t).call(this,e));a.openDialog=a.openDialog.bind(T()(a));a.onDisable=a.onDisable.bind(T()(a));return a}h()(t,[{key:"onDisable",value:function e(){this.props.openModal({element:n.a.createElement(Y,null)})}},{key:"getSettingsTitle",value:function e(){var t=this.props.whoCanManageESC;var a=t.value!==ft.NO_ONE;return a?vt.t("Enabled"):vt.t("Disabled")}},{key:"getRouteToChannelDescription",value:function e(){var t=this.props.routeToChannelPref;if(t)return vt.rt(" can approve via {channelName}.",{channelName:n.a.createElement(N["a"],{channelId:t})});return vt.t(" can approve via direct message")}},{key:"getSettingsDescription",value:function e(){var t=this.props.whoCanManageESC;var a;var r=vt.t("Choose who can approve shared channel requests and disconnect existing shared channels, and where new requests are sent.");switch(t.value){case ft.EVERYONE:a=vt.t("Everyone, except guests");break;case ft.ALL_ADMINS_AND_OWNERS:a=vt.t("Any admin or owner");break;case ft.TOPLEVEL_ADMINS_AND_OWNERS:a=vt.t("Org Admins and Owners");break;case ft.TOPLEVEL_ADMINS_AND_OWNERS_AND_SELECTED:a=n.a.createElement(ct,{optionsToDisplay:[].concat(t.users,t.userGroups)});break;case ft.NO_ONE:r=vt.t("No one at {enterpriseOrgName} can request to create new shared channels.",{enterpriseOrgName:this.props.enterpriseOrgName});break;default:return null}return n.a.createElement("div",{className:"p-shared_channels_setting__description"},a&&n.a.createElement(n.a.Fragment,null,n.a.createElement("span",{className:"p-shared_channels_settings__description__selected"},a,this.getRouteToChannelDescription()),n.a.createElement("br",null)),n.a.createElement("span",{className:"p-shared_channels_setting__description__text"},r))}},{key:"openDialog",value:function e(){this.props.openModal({element:n.a.createElement(at,this.props)})}},{key:"renderHeader",value:function e(){if(this.props.featureChannelMgmtPhaseOne)return null;return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"p-shared_channels__header"},n.a.createElement("h2",{className:"ent_header_secondary"},vt.t("Shared Channels"))),this.renderLabel())}},{key:"renderLabel",value:function e(){var t=vt.rt("By default, any member of your organization can request admin approval to share a channel. You can disable this if you\u2019d like. <a>Learn more</a>",null,function(){return n.a.createElement(B["a"],{href:"https://slack.com/help/articles/115005912706?utm_medium=in-prod&utm_source=in-prod&utm_campaign=cd_in-prod_in-prod_all_en_sharedchannels-betterinvites_cr-channel-administration-learn-more_ym-201912"},"Learn more")});return n.a.createElement("p",{className:"permissions_label"},t)}},{key:"render",value:function e(){var t=this.props.whoCanManageESC;var a=t.value!==ft.NO_ONE;var r=!a;var i={type:"button",enabled:a,onEdit:this.openDialog,editOnly:r,onDisable:this.onDisable};return n.a.createElement("div",{className:"p-shared_channels_setting_esc"},this.renderHeader(),n.a.createElement(U["a"],{label:vt.t("Shared channel requests"),state:this.getSettingsTitle(),description:this.getSettingsDescription(),onClick:this.openDialog,control:i,type:"button"}))}}]);return t}(r["PureComponent"]);gt.displayName="SharedChannelsSetting";gt.defaultProps=bt;function _t(e,t){var a=t.users||[];var r=t.userGroups||[];return ht({},t,{users:a.map(function(t){return Object(P["e"])(e,t,false)}),userGroups:r.map(function(t){return Object(M["f"])(e,t,false)})})}var yt=function e(t){var a=Object(C["getEnterpriseSharedChannelsPref"])(t)||{value:""};var r;var n=Object(L["g"])(t,"external_shared_channel_requests_approval_channel");n&&(r=Object(A["e"])(t,n,false));return{whoCanManageESC:_t(t,a),enterpriseOrgName:Object(R["c"])(Object(F["e"])(t)),routeToChannelPref:n,selectedChannelForRouting:r,featureChannelMgmtPhaseOne:Object(O["isFeatureEnabled"])(t,"feature_channel_mgmt_phase_one")}};var Ot=function e(t){return{searchUserGroupsAndMembers:function e(){return t(pt["b"].apply(void 0,arguments))},openModal:function e(){return t(D["openModal"].apply(void 0,arguments))},closeModal:function e(){return t(D["closeModal"].apply(void 0,arguments))},saveESCPrefs:function e(){return t(x["h"].apply(void 0,arguments))}}};var kt=Object(o["connect"])(yt,Ot)(gt);var Et=a(196);var Ct=a.n(Et);var St=a(278);var wt=a.n(St);var jt=a(232);var It=a(118);var Tt=a(912);var At=a(451);var Nt=new E["b"]("enterprise_dashboard");var Pt={switchPane:ie["noop"],orgName:null,orgWidePublicChannels:[],defaultOrgWideChannels:[],setSelectedChannel:ie["noop"],selectedChannel:null};var Mt=function(e){y()(t,e);function t(e){var a;p()(this,t);a=f()(this,g()(t).call(this,e));Object(se["a"])(T()(a),["renderChannel","renderSelectedOption","filterOutDefaultChannels"]);return a}h()(t,[{key:"onNext",value:function e(){this.props.switchPane("settings");this.selectLabelId="addChannelSelect"}},{key:"filterOutDefaultChannels",value:function e(){return Object(ie["differenceBy"])(this.props.orgWidePublicChannels,this.props.defaultOrgWideChannels,"id")}},{key:"formatMultiSelectOptions",value:function e(t){return Object(ie["map"])(t,function(e){return{label:Object(te["getDisplayName"])(e),value:e.id}})}},{key:"renderChannel",value:function e(t){var a=Object(ie["find"])(this.props.orgWidePublicChannels,{id:t.value});if(!a)return null;return n.a.createElement(he["a"],{channel:a})}},{key:"renderSelectedOption",value:function e(t){var a=Object(ie["find"])(this.props.orgWidePublicChannels,{id:t.value});if(!a)return null;return n.a.createElement(ve["a"],{channel:a})}},{key:"render",value:function e(){var t=this;var a=Nt.t("Cancel",{fallbackHash:"77dfd2135f4db726c47299bb55be26f7f4525a46"});var r=Nt.t("Next",{fallbackHash:"bc981983e7f547dc62e19a1e383acfe00782a6d5"});var i=Nt.t("All full members of {org_name} will be automatically added to this channel. Guests will need to be invited manually.",{org_name:this.props.orgName,fallbackHash:"b3bd9e606ad0321b24065cc32f7f118de9c3dab5"});var s=Nt.rt("Can\u2019t find the channel you\u2019re looking for? You\u2019ll need to make it an org-wide channel first. <a>Learn more</a>",{fallbackHash:"fc7e2aaee7e1a7a0e8dc089074fe681ac30d1fa5"},function(e){var t=e.key,a=e.text;return n.a.createElement("a",{href:"https://get.slack.help/hc/en-us/articles/115001399587-Create-a-shared-channel",target:"_blank",rel:"noopener noreferrer",key:t},a)});var o=Nt.t("Select a channel",{fallbackHash:"0e2b8f495c6ff19bc0b0d3aca6ced666c1dc61f8"});var l=Nt.t("Select an org-wide channel...",{fallbackHash:"bc6f6a99830c6ae122f3fe7777b4e06da91a56cc"});var c=!Object(ie["isEmpty"])(this.props.selectedChannel)&&!this.props.selectedChannel.value;var u=this.props.selectedChannel;var d=u&&u.value?u:void 0;return n.a.createElement(n.a.Fragment,null,n.a.createElement(J["h"],{"data-qa-default-org-wide-channel-add-channel-pane-header":true},n.a.createElement(J["j"],{id:"customTOS__title-bar",title:Nt.t("Add a default org-wide channel",{fallbackHash:"c22dc24715f7870569cab6605b6265bb2bfc0a83"})})),n.a.createElement(J["d"],null,n.a.createElement("div",{className:"p-default_org_wide_channels_dialog__modal_content"},n.a.createElement("p",null,i),n.a.createElement("h3",{id:this.selectLabelId,className:"margin_bottom_75"},o),n.a.createElement(At["d"],{width:"100%",className:"margin_bottom_150",selectId:this.selectLabelId,options:this.formatMultiSelectOptions(this.filterOutDefaultChannels()),labelId:this.selectLabelId,onOptionSelected:function e(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=a.value,n=a.label;return t.props.setSelectedChannel({value:r,label:n})},selectedOption:d,renderOption:this.renderChannel,renderSelectedOption:this.renderSelectedOption,placeholderText:l}),n.a.createElement(Z["a"],{type:"boxed",level:"info",align:"left"},s))),n.a.createElement(J["f"],null,n.a.createElement(J["g"],null,n.a.createElement(X["d"],{type:"outline",onClick:this.props.closeModal,"data-qa":"dialog_cancel"},a),n.a.createElement(X["d"],{onClick:function e(){return t.onNext()},"data-qa":"add_channel_next",disabled:c},r))))}}]);return t}(r["PureComponent"]);Mt.displayName="DefaultOrgWideChannelsAddChannelPane";Mt.defaultProps=Pt;var Dt=function e(t){return{orgName:Object(F["g"])(t),orgWidePublicChannels:re(t),defaultOrgWideChannels:Object(L["d"])(t)}};var xt=function e(t){return{closeModal:function e(){return t(D["closeModal"].apply(void 0,arguments))}}};var Rt=Object(o["connect"])(Dt,xt)(Mt);var Ft=a(108);var Lt=new E["b"]("enterprise_dashboard");var Ut={required:"required",optional:"optional"};var Bt={owner:"owner",multi:"multi"};var qt={member:"member",userGroup:"user_group"};var Gt={channel:null,switchPane:ie["noop"],onMembershipTypeChange:ie["noop"],membershipType:Ut.optional,onPostingPermissionTypeChange:ie["noop"],postingPermissionType:Bt.owner,onMemberSelectorChange:ie["noop"],selectedEntities:{},searchUserGroupsAndMembers:ie["noop"],onThreadsCheckboxChange:ie["noop"],allowThreads:true};var Ht=function(e){y()(t,e);function t(e){var a;p()(this,t);a=f()(this,g()(t).call(this,e));Object(se["a"])(T()(a),["maybeRenderMemberSelector","renderThreadsCheckbox","getSelectedEntities"]);return a}h()(t,[{key:"onBack",value:function e(){if(Object(ie["isEmpty"])(this.props.channel))return this.props.switchPane("selectChannel");return this.props.closeModal()}},{key:"onNext",value:function e(){this.props.switchPane("confirm")}},{key:"getSelectedEntities",value:function e(){var t=this.props.selectedEntities;var a=t.users.filter(function(e){return e&&!e.isUnknown&&!e.isNonExistent}).map(function(e){return{label:Object(xe["getMemberRealName"])(e),value:e.id,type:"member",entity:e}});var r=t.userGroups.filter(function(e){return!!e}).map(function(e){return{label:Object(Re["h"])(e),value:e.id,type:"user_group",entity:e}});return a.concat(r)}},{key:"maybeRenderMemberSelector",value:function e(){if(this.props.postingPermissionType===Bt.owner)return false;var t="dowc-member-select";return n.a.createElement(Fe["b"],{className:"p-default_org_wide_channels_dialog__member_select",width:"100%",selectId:t,search:this.props.searchUserGroupsAndMembers,placeholderText:Lt.t("Search"),renderOption:this.renderEntity,selectedOptions:this.getSelectedEntities(),onSelectedItemsChange:this.props.onMemberSelectorChange})}},{key:"renderEntity",value:function e(t){var a=t.type,r=t.value,i=t.label,s=t.entity;switch(a){case qt.member:return n.a.createElement(Le["a"],{size:"small",id:r,key:r});case qt.userGroup:return n.a.createElement(Ue["a"],{size:"small",userGroup:s,key:r});default:return i}}},{key:"renderThreadsCheckbox",value:function e(){var t=this;return n.a.createElement(ue["a"],{text:Lt.t("Allow threads",{fallbackHash:"809a7cba18ae3804f11707fb6f7a72f56d9b7a26"}),subtext:Lt.t("Everyone will be able to add replies to messages posted in this channel, regardless of overall posting permissions",{fallbackHash:"8315efee095dc4d3627f20b3dca7dc751578918c"}),htmlFor:"dowc-allow-threads",type:"inline"},n.a.createElement(Ft["a"],{id:"dowc-allow-threads",className:"p-default_org_wide_channels_dialog__threads_checkbox","data-qa-dowc-allow-threads":true,checked:this.props.allowThreads,onChange:function e(){return t.props.onThreadsCheckboxChange(!t.props.allowThreads)}}))}},{key:"render",value:function e(){var t=this;var a=Lt.t("Back",{fallbackHash:"b52b36b7269fbfc58ec24bb724691951a3decbe8"});Object(ie["isEmpty"])(this.props.channel)||(a=Lt.t("Cancel",{fallbackHash:"77dfd2135f4db726c47299bb55be26f7f4525a46"}));var r=Lt.t("Next",{fallbackHash:"bc981983e7f547dc62e19a1e383acfe00782a6d5"});var i=Lt.t("Choose Settings for #{channelName}",{channelName:this.props.channelName,fallbackHash:"6d3b9e1601d474a9a5311f6e821ce86f252fca7f"});return n.a.createElement(n.a.Fragment,null,n.a.createElement(J["h"],{"data-qa-default-org-wide-channel-settings-header":true},n.a.createElement(J["j"],{id:"customTOS__title-bar",title:i,"data-qa":"dialog_header"})),n.a.createElement(J["d"],null,n.a.createElement("div",{className:"p-default_org_wide_channels_dialog__modal_content"},n.a.createElement("div",{className:"p-default_org_wide_channels_dialog__radio_group_title"},Lt.t("Choose membership type",{fallbackHash:"fd2296ccec44f1146f8666854a29b77b74ae9572"})),n.a.createElement("div",{className:"p-default_org_wide_channels_dialog__radio_group_subtitle"},Lt.t("Choose if you\u2019d like membership to be suggested or required for all members.",{fallbackHash:"2bb180f51f2255fd70565ee1b758c168f9a13560"})),n.a.createElement(pe["a"],null,n.a.createElement(ue["a"],{text:Lt.t("Optional",{fallbackHash:"0c6c4102d4dfec3b1aa41117e0e344046c58a151"}),subtext:Lt.t("Members can leave the channel.",{fallbackHash:"a567dd29813894b7d9f71339e450e9bbc21b5877"}),htmlFor:"dowc-optional",type:"inline",cursor:"pointer"},n.a.createElement(de["a"],{id:"dowc-optional","data-qa-dowc-optional":true,name:"membership_type",value:Ut.optional,checked:this.props.membershipType===Ut.optional,onChange:function e(){return t.props.onMembershipTypeChange(Ut.optional)}})),n.a.createElement(ue["a"],{text:Lt.t("Required",{fallbackHash:"eed6bfb41051ed5b74447340f3c2e29d11e99a7c"}),subtext:Lt.rt("Members will <strong>not</strong> be able to leave.",{fallbackHash:"0091dec17f757e29bb2d9d3a92a976352cf7c089"}),htmlFor:"dowc-required",type:"inline",cursor:"pointer"},n.a.createElement(de["a"],{id:"dowc-required",name:"membership_type",value:Ut.required,"data-qa-dowc-required":true,checked:this.props.membershipType===Ut.required,onChange:function e(){return t.props.onMembershipTypeChange(Ut.required)}}))),n.a.createElement("div",{className:"p-default_org_wide_channels_dialog__radio_group_title"},Lt.t("Posting permissions",{fallbackHash:"aec61a61412de92f7a358f3d4c3437a2c5bd9a16"})),n.a.createElement("div",{className:"p-default_org_wide_channels_dialog__radio_group_subtitle"},Lt.t("Who can post in this channel?",{fallbackHash:"30b4a5f6c75379ff034d191f4c9b7199d2494180"})),n.a.createElement(pe["a"],{className:"p-default_org_wide_channels_dialog__posting_permission_radio"},n.a.createElement(ue["a"],{text:Lt.t("Org Admins only",{fallbackHash:"df8417ace6627d8ce26e65b18df785253db60faf"}),htmlFor:"dowc-posting-permissions-owner",type:"inline",cursor:"pointer"},n.a.createElement(de["a"],{id:"dowc-posting-permissions-owner",name:"default_channels_who_can_post",value:Bt.owner,"data-qa-dowc-posting-permissions-owner":true,checked:this.props.postingPermissionType===Bt.owner,onChange:function e(){return t.props.onPostingPermissionTypeChange(Bt.owner)}})),n.a.createElement(ue["a"],{text:Lt.t("Org Admins, plus specific people",{fallbackHash:"d63d547e46a6abc08ab8e095c014cc64e7796ad6"}),htmlFor:"dowc-posting-permissions-multi",type:"inline",cursor:"pointer"},n.a.createElement(de["a"],{id:"dowc-posting-permissions-multi",name:"default_channels_who_can_post",value:Bt.multi,"data-qa-dowc-posting-permissions-multi":true,checked:this.props.postingPermissionType===Bt.multi,onChange:function e(){return t.props.onPostingPermissionTypeChange(Bt.multi)}}))),this.maybeRenderMemberSelector(),this.renderThreadsCheckbox())),n.a.createElement(J["f"],null,n.a.createElement(J["g"],null,n.a.createElement(X["d"],{type:"outline",onClick:function e(){return t.onBack()},"data-qa":"dialog_cancel"},a),n.a.createElement(X["d"],{onClick:function e(){return t.onNext()},"data-qa":"settings_pane_next"},r))))}}]);return t}(r["PureComponent"]);Ht.displayName="DefaultOrgWideChannelsSettingsPane";Ht.defaultProps=Gt;var Wt=function e(t){return{searchUserGroupsAndMembers:function e(){return t(pt["b"].apply(void 0,arguments))},closeModal:function e(){return t(D["closeModal"].apply(void 0,arguments))}}};var Vt=Object(o["connect"])(null,Wt)(Ht);var Kt=a(166);var zt=a(23);function Qt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function Yt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Qt(Object(a),true).forEach(function(t){j()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Qt(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Jt=new E["b"]("enterprise_dashboard");var Xt={switchPane:ie["noop"],orgName:null,channel:{},membersCount:null,allowThreads:false,selectedEntities:{},onDialogSubmit:ie["noop"]};function Zt(e){if(!e)return{};if(Object(te["isPublicChannel"])(e))return e;return Yt({},e,{is_channel:true})}Zt.propTypes={channel:k["default"].object.isRequired};var $t=function(e){y()(t,e);function t(){p()(this,t);return f()(this,g()(t).apply(this,arguments))}h()(t,[{key:"onBack",value:function e(){this.props.switchPane("settings")}},{key:"onSubmit",value:function e(){this.props.onDialogSubmit();this.props.closeModal()}},{key:"formatPostingPermissionsString",value:function e(){var t=this.formatSelectedMemberNames(this.props.selectedEntities);var a=n.a.createElement("span",{"data-qa-posting-permissions-allow-threads-multi":true},Jt.rt("Only Org Owners & Admins and {users} will be able to post in this channel. Anyone will be able to reply to messages using threads.",{users:Object(E["i"])(t),fallbackHash:"a624e2ef6fd99bb7a2d71b4b0be9f879af1c9981"}));var r=n.a.createElement("span",{"data-qa-posting-permissions-allow-threads-owners":true},Jt.rt("Only Org Owners & Admins will be able to post in this channel. Anyone will be able to reply to messages using threads.",{fallbackHash:"a624e2ef6fd99bb7a2d71b4b0be9f879af1c9981"}));var i=n.a.createElement("span",{"data-qa-posting-permissions-multi":true},Jt.rt("Only Org Owners & Admins and {users} will be able to post in this channel.",{users:Object(E["i"])(t),fallbackHash:"9702b21ef5d13f5e28686554f97e81d22da63b78"}));var s=n.a.createElement("span",{"data-qa-posting-permissions-owners":true},Jt.rt("Only Org Owners & Admins will be able to post in this channel.",{fallbackHash:"9702b21ef5d13f5e28686554f97e81d22da63b78"}));if(this.props.allowThreads)return t.length?a:r;return t.length?i:s}},{key:"formatSelectedMemberNames",value:function e(t){var a=this;var r=Object(ie["map"])(t.users,function(e){return a.props.getPrefCompliantMemberNameById(e.id)});var n=Object(ie["map"])(t.userGroups,function(e){return Object(Re["h"])(e)});return r.concat(n)}},{key:"render",value:function e(){var t=this;var a=300;var r=Math.ceil(this.props.membersCount/a);var i=Jt.t("Back",{fallbackHash:"b52b36b7269fbfc58ec24bb724691951a3decbe8"});var s=Jt.t("Save",{fallbackHash:"efc007a393f66cdb14d57d385822a3d9e36ef873"});var o=Jt.rt("Make {channelName} a default channel for all members of {orgName}?",{channelName:n.a.createElement(Kt["a"],{channel:Zt(this.props.channel)}),orgName:this.props.orgName,fallbackHash:"8250b78edb23ae484002cfa0eefae57ea0b10673"});var l=Jt.rt("<strong>{membersCount} members</strong> will be added to this channel. Future full members will be added to this channel automatically.",{membersCount:this.props.membersCount,fallbackHash:"0f8048fcbfb72fbe81793cef840f68ed69bf5046"});var c=Jt.rt("It may take <strong>up to {timeToCompletionInMinutes} minutes</strong> for all members to be added to the channel. A message will be posted in the channel when this process is complete.",{timeToCompletionInMinutes:r,fallbackHash:"592a2affda7a997b274f8f5fa6b7e503f75ca706"});return n.a.createElement(n.a.Fragment,null,n.a.createElement(J["h"],{"data-qa-default-org-wide-channel-confirm-pane-header":true},n.a.createElement(J["j"],{id:"customTOS__title-bar",title:Jt.t("Add all organization members?",{fallbackHash:"5bdf5243ed6ea706718aa012a6da80448981310b"}),"data-qa":"dialog_header"})),n.a.createElement(J["d"],null,n.a.createElement("div",{className:"p-default_org_wide_channels_dialog__modal_content"},n.a.createElement("div",{className:"p-default_org_wide_channels_dialog__confirm_pane_description"},o),n.a.createElement("div",{className:"p-default_org_wide_channels_dialog__confirm_pane_section"},n.a.createElement(zt["b"],{type:"user",className:"p-default_org_wide_channels_dialog__confirm_pane_icon sk_sky_blue"}),n.a.createElement("div",null,l)),n.a.createElement("div",{className:"p-default_org_wide_channels_dialog__confirm_pane_section"},n.a.createElement(zt["b"],{type:"clock-o",className:"p-default_org_wide_channels_dialog__confirm_pane_icon sk_just_orange"}),n.a.createElement("div",null,c)),n.a.createElement("div",{className:"p-default_org_wide_channels_dialog__confirm_pane_section"},n.a.createElement(zt["b"],{type:"comment-alt",className:"p-default_org_wide_channels_dialog__confirm_pane_icon sk_lilypad_green"}),n.a.createElement("div",{"data-qa-dowc-posting-permission-confirmation":true},this.formatPostingPermissionsString())))),n.a.createElement(J["f"],null,n.a.createElement(J["g"],null,n.a.createElement(X["d"],{type:"outline",onClick:function e(){return t.onBack()},"data-qa":"dialog_cancel"},i),n.a.createElement(X["d"],{onClick:function e(){return t.onSubmit()},"data-qa":"dialog_go","data-qa-dowc-submit-button":true},s))))}}]);return t}(r["PureComponent"]);$t.displayName="DefaultOrgWideChannelsConfirmPane";$t.defaultProps=Xt;var ea=function e(t,a){var r=a.selectedChannelId;return{orgName:Object(F["g"])(t),channel:Object(A["e"])(t,r,false),membersCount:Object(L["f"])(t),getPrefCompliantMemberNameById:function e(){for(var a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return xe["getPrefCompliantMemberNameById"].apply(void 0,[t].concat(r))}}};var ta=function e(t){return{closeModal:function e(){return t(D["closeModal"].apply(void 0,arguments))}}};var aa=Object(o["connect"])(ea,ta)($t);var ra={};Object.defineProperty(ra,"formatChannel",{get:function e(){return Zt},set:function e(t){Zt=t}});var na=a(3121);var ia={orgWideChannels:[],setAndUpsertDefaultChannel:ie["noop"],getOrgDefaultChannelPrefsById:ie["noop"],getOrgDefaultChannelIsMandatoryById:ie["noop"],channel:{}};var sa=function e(t,a,r){var n={who_can_post:"type:org_admin"};"multi"===t&&a&&a.users.length&&a.users.forEach(function(e){n.who_can_post+=",user:"+e.id});"multi"===t&&a&&a.userGroups.length&&a.userGroups.forEach(function(e){n.who_can_post+=",subteam:"+e.id});n.can_thread=r?"type:all":"";return n};sa.propTypes={postingPermissionType:k["default"].string.isRequired,selectedEntities:k["default"].object.isRequired,allowThreads:k["default"].bool.isRequired};var oa=function e(t,a,r){var n={who_can_post:{type:"org_admin"}};var i=[];var s=[];"multi"===t&&a&&a.users.length&&(i=a.users.map(function(e){return e.id}));"multi"===t&&a&&a.userGroups.length&&(s=a.userGroups.map(function(e){return e.id}));n.who_can_post.user=i;n.who_can_post.subteam=s;n.can_thread=r?{type:"all"}:{};return n};var la={required:"required",optional:"optional"};var ca={owner:"owner",multi:"multi"};var ua={member:"member",userGroup:"user_group"};var da=function(e){y()(t,e);function t(e){var a;p()(this,t);a=f()(this,g()(t).call(this,e));a.state={selectedChannel:{},membershipType:la.optional,postingPermissionType:ca.owner,selectedEntities:{users:[],userGroups:[]},allowThreads:true,defaultPane:Object(ie["isEmpty"])(a.props.channel)?"selectChannel":"settings"};Object(se["a"])(T()(a),["getNewChannelPanes","getExistingChannelPanes","setSelectedChannel","onMembershipTypeChange","onMemberSelectorChange","onPostingPermissionTypeChange","onThreadsCheckboxChange","onDialogSubmit","formatChannelIdForSelectedChannelOption","renderSelectChannelPane","renderSettingsPane","renderConfirmPane","parseAndSetChannelState"]);return a}h()(t,[{key:"componentDidMount",value:function e(){this.props.channel&&this.parseAndSetChannelState(this.props.channel)}},{key:"onAddDialogSubmit",value:function(){var e=wt()(regeneratorRuntime.mark(function e(){var t,a,r,n,i,s,o,l,c,u;return regeneratorRuntime.wrap(function e(d){while(1)switch(d.prev=d.next){case 0:t=this.state,a=t.selectedChannel,r=t.membershipType,n=t.postingPermissionType,i=t.selectedEntities,s=t.allowThreads;o=a.value;l=r===la.required;d.prev=3;d.next=6;return this.props.setAndUpsertDefaultChannel({channel:o,isMandatory:l,prefs:sa(n,i,s),reason:"onDialogSubmit"});case 6:c=d.sent;if(!l){d.next=11;break}d.next=10;return this.props.addDefaultOrgWideMandatoryApi({channel:o,isMandatory:l,prefs:sa(n,i,s),reason:"onDialogSubmit"});case 10:c=d.sent;case 11:if(c){u=false;this.onSubmitSuccess(u,l,o)}d.next=17;break;case 14:d.prev=14;d.t0=d["catch"](3);this.onSubmitError(o);case 17:case"end":return d.stop()}},e,this,[[3,14]])}));function t(){return e.apply(this,arguments)}return t}()},{key:"onDialogSubmit",value:function e(){Object(ie["isEmpty"])(this.props.channel)?this.onAddDialogSubmit():this.onEditDialogSubmit()}},{key:"onEditDialogSubmit",value:function(){var e=wt()(regeneratorRuntime.mark(function e(){var t,a,r,n,i,s,o,l,c,u,d;return regeneratorRuntime.wrap(function e(p){while(1)switch(p.prev=p.next){case 0:t=this.state,a=t.selectedChannel,r=t.membershipType,n=t.postingPermissionType,i=t.selectedEntities,s=t.allowThreads;o=a.value;l=r===la.required;u=this.props.getOrgDefaultChannelIsMandatoryById(this.props.channel&&this.props.channel.id);d=l!==u;p.prev=5;if(!(d&&!l)){p.next=12;break}p.next=9;return this.props.removeDefaultOrgWideMandatoryApi({channel:o,isMandatory:l,prefs:sa(n,i,s),reason:"onDialogSubmit-removeMandatory"});case 9:c=p.sent;p.next=21;break;case 12:if(!(d&&!!l)){p.next=18;break}p.next=15;return this.props.addDefaultOrgWideMandatoryApi({channel:o,isMandatory:l,prefs:sa(n,i,s),reason:"onDialogSubmit"});case 15:c=p.sent;p.next=21;break;case 18:p.next=20;return this.props.setChannelPrefs({channelId:o,newPrefs:JSON.stringify(sa(n,i,s)),reason:"DefaultOrgWideChannelsAddChannelDialog"});case 20:c=p.sent;case 21:this.props.upsertDefaultChannelPrefs({channelId:o,prefs:oa(n,i,s),isMandatory:l});c&&this.onSubmitSuccess(d,l,o);p.next=28;break;case 25:p.prev=25;p.t0=p["catch"](5);this.onSubmitError(o);case 28:case"end":return p.stop()}},e,this,[[5,25]])}));function t(){return e.apply(this,arguments)}return t}()},{key:"onMemberSelectorChange",value:function e(t){var a=t.filter(function(e){return e.type===ua.member}).map(function(e){return e.entity});var r=t.filter(function(e){return e.type===ua.userGroup}).map(function(e){return e.entity});this.setState(function(){return{selectedEntities:{users:a,userGroups:r}}})}},{key:"onMembershipTypeChange",value:function e(t){this.setState(function(){return{membershipType:t}})}},{key:"onPostingPermissionTypeChange",value:function e(t){this.setState(function(){return{postingPermissionType:t}})}},{key:"onSubmitError",value:function e(t){this.props.onDialogSubmitComplete({channelId:t,status:"error"})}},{key:"onSubmitSuccess",value:function e(t,a,r){this.props.onDialogSubmitComplete({isMandatoryChanged:t,isMandatory:a,channelId:r,isEdit:true,status:"success"})}},{key:"onThreadsCheckboxChange",value:function e(t){this.setState(function(){return{allowThreads:t}})}},{key:"getExistingChannelPanes",value:function e(){var t=this;return{settings:{render:function e(a){return t.renderSettingsPane(a)}},confirm:{render:function e(a){return t.renderConfirmPane(a)}}}}},{key:"getNewChannelPanes",value:function e(){var t=this;return{selectChannel:{render:function e(a){return t.renderSelectChannelPane(a)}},settings:{render:function e(a){return t.renderSettingsPane(a)}},confirm:{render:function e(a){return t.renderConfirmPane(a)}}}}},{key:"setSelectedChannel",value:function e(t){this.setState(function(){return{selectedChannel:t}})}},{key:"formatChannelIdForSelectedChannelOption",value:function e(t){if(!t)return{};return{label:Object(te["getDisplayName"])(t),value:t.id,entity:t}}},{key:"parseAndSetChannelState",value:function e(t){var a=this;if(!t)return;this.setSelectedChannel(this.formatChannelIdForSelectedChannelOption(t));var r=this.props.getOrgDefaultChannelPrefsById(t.id);var n=this.props.getOrgDefaultChannelIsMandatoryById(t.id);n?this.onMembershipTypeChange(la.required):this.onMembershipTypeChange(la.optional);var i=[];if(r&&r.who_can_post&&r.who_can_post.user){this.onPostingPermissionTypeChange(ca.multi);var s=r.who_can_post.user.map(function(e){return{entity:a.props.getMemberById(e),type:ua.member}});i=i.concat(s)}if(r&&r.who_can_post&&r.who_can_post.subteam){this.onPostingPermissionTypeChange(ca.multi);var o=r.who_can_post.subteam.map(function(e){return{entity:a.props.getMemberById(e),type:ua.userGroup}});i=i.concat(o)}this.onMemberSelectorChange(i);this.onThreadsCheckboxChange(r&&r.can_thread&&r.can_thread.type&&r.can_thread.type.length&&"all"===r.can_thread.type[0])}},{key:"renderConfirmPane",value:function e(t){return n.a.createElement(aa,Ct()({},t,{selectedChannelId:this.state.selectedChannel.value,postingPermissionType:this.state.postingPermissionType,allowThreads:this.state.allowThreads,selectedEntities:this.state.selectedEntities,onDialogSubmit:this.onDialogSubmit}))}},{key:"renderSelectChannelPane",value:function e(t){return n.a.createElement(Rt,Ct()({},t,{setSelectedChannel:this.setSelectedChannel,selectedChannel:this.state.selectedChannel}))}},{key:"renderSettingsPane",value:function e(t){return n.a.createElement(Vt,Ct()({},t,{channel:this.props.channel,channelName:this.state.selectedChannel.label,onMembershipTypeChange:this.onMembershipTypeChange,membershipType:this.state.membershipType,onPostingPermissionTypeChange:this.onPostingPermissionTypeChange,postingPermissionType:this.state.postingPermissionType,onMemberSelectorChange:this.onMemberSelectorChange,selectedEntities:this.state.selectedEntities,allowThreads:this.state.allowThreads,onThreadsCheckboxChange:this.onThreadsCheckboxChange}))}},{key:"render",value:function e(){return n.a.createElement(Tt["b"],{closeModal:this.props.closeModal,defaultPane:this.state.defaultPane,panes:Object(ie["isEmpty"])(this.props.channel)?this.getNewChannelPanes():this.getExistingChannelPanes()})}}]);return t}(r["PureComponent"]);da.displayName="DefaultOrgWideChannelsAddChannelDialog";da.defaultProps=ia;var pa=function e(t){return{getOrgDefaultChannelPrefsById:function e(a){return Object(L["c"])(t,a)},getOrgDefaultChannelIsMandatoryById:function e(a){return Object(L["b"])(t,a)},getMemberById:function e(a){return Object(P["e"])(t,a)}}};var ma=function e(t){return{closeModal:function e(){return t(D["closeModal"].apply(void 0,arguments))},addDefaultChannelApi:function e(){return t(jt["a"].apply(void 0,arguments))},setAndUpsertDefaultChannel:function e(){return t(x["e"].apply(void 0,arguments))},upsertDefaultChannel:function e(){return t(x["n"].apply(void 0,arguments))},setChannelPrefs:function e(){return t(It["z"].apply(void 0,arguments))},upsertDefaultChannelPrefs:function e(){return t(x["o"].apply(void 0,arguments))},removeDefaultOrgWideMandatoryApi:function e(){return t(jt["v"].apply(void 0,arguments))},addDefaultOrgWideMandatoryApi:function e(){return t(jt["b"].apply(void 0,arguments))}}};var ha=Object(o["connect"])(pa,ma)(da);var va={};Object.defineProperty(va,"formatApiPrefs",{get:function e(){return sa},set:function e(t){sa=t}});Object.defineProperty(va,"formatChannelPrefsToUpsert",{get:function e(){return oa},set:function e(t){oa=t}});var fa=a(494);var ba=a(245);var ga=a.n(ba);var _a=a(13);var ya=a.n(_a);var Oa=a(57);var ka=new E["b"]("enterprise_dashboard");var Ea=function(e){y()(t,e);function t(e){var a;p()(this,t);a=f()(this,g()(t).call(this,e));a.state={isSaving:false};a.onSave=a.onSave.bind(T()(a));return a}h()(t,[{key:"onSave",value:function e(){var t=this;var a=this.props,r=a.channelId,n=a.removeDefaultChannel;this.setState(function(){return{isSaving:true}});n({channelId:r}).then(function(){t.props.onClose("success")}).catch(function(){t.props.onClose("error")})}},{key:"render",value:function e(){return n.a.createElement(J["a"],{closeModal:this.props.onClose},n.a.createElement(J["h"],null,n.a.createElement(J["j"],{id:"default_status__title-bar",title:ka.t("Remove default status for {channel_name}?",{channel_name:this.props.channelName})})),n.a.createElement(J["d"],null,n.a.createElement(J["e"],null,n.a.createElement("p",null,ka.rt("By removing <strong>{channel_name}</strong> from suggested and required channels, new members of the organization will no longer be automatically added to the channel.",{channel_name:this.props.channelName})),n.a.createElement("p",null,ka.t("Anyone currently in the channel will remain, but they will be able to leave the channel if they wish.")),n.a.createElement("p",null,ka.rt("Are you sure you want to remove <strong>{channel_name}</strong> from the suggested and required channels?",{channel_name:this.props.channelName})))),n.a.createElement(J["f"],null,n.a.createElement(J["g"],null,n.a.createElement(J["c"],{type:"outline",onClick:this.props.onClose},ka.t("Cancel")),n.a.createElement(X["b"],{onClick:this.onSave,loading:this.state.isSaving,type:"danger","data-qa":"remove-default-channel-modal-go"},ka.t("Remove Default Status")))))}}]);return t}(n.a.PureComponent);Ea.displayName="DefaultChannelsRemoveDialog";Ea.defaultProps={channelId:"",channelName:""};var Ca=Ea;var Sa=new E["b"]("external_shared_channels");var wa=function(e){y()(t,e);function t(){p()(this,t);return f()(this,g()(t).apply(this,arguments))}h()(t,[{key:"render",value:function e(){if("error"===this.props.status)return n.a.createElement(Ie["b"],{position:"bottom-right",icon:"warning",onCloseComplete:ie["noop"],shouldAutoFade:true},n.a.createElement("span",null,Sa.t("Something\u2019s gone wrong. Mind trying again in a moment?")));return n.a.createElement(Ie["b"],{position:"bottom-right",icon:"check-circle-o",onCloseComplete:ie["noop"],shouldAutoFade:true},n.a.createElement("span",null,Sa.t("Successfully Removed Default Status")))}}]);return t}(r["PureComponent"]);wa.displayName="DefaultChannelsRemoveToast";var ja=wa;var Ia=new E["b"]("enterprise_dashboard");var Ta=function(e){y()(t,e);function t(e){var a;p()(this,t);a=f()(this,g()(t).call(this,e));Object(se["a"])(T()(a),["onEditChannelSettings","onRemoveChannelDefaultStatus","onRemoveDialogClose"]);return a}h()(t,[{key:"onEditChannelSettings",value:function e(){var t=this.props,a=t.channel,r=t.openModal;r({element:n.a.createElement(ha,{channel:a,onDialogSubmitComplete:this.props.onDialogSubmitComplete})})}},{key:"onRemoveChannelDefaultStatus",value:function e(){var t=this.props,a=t.channel,r=t.openModal;r({element:n.a.createElement(Ca,{onClose:this.onRemoveDialogClose,removeDefaultChannel:this.props.removeDefaultChannel,channelName:Object(te["getDisplayName"])(a),channelId:a&&a.id})})}},{key:"onRemoveDialogClose",value:function e(t){t&&this.props.enqueueToast({element:n.a.createElement(ja,{status:t})});this.props.closeModal()}},{key:"render",value:function e(){return n.a.createElement(Oa["f"],this.props,n.a.createElement(Oa["b"],{label:Ia.t("Edit channel settings\u2026",{fallbackHash:"4138294cb5838eea3b81a430152e8368d86403fe"}),onSelected:this.onEditChannelSettings}),n.a.createElement(Oa["b"],{danger:true,label:Ia.t("Remove default status for {channel_name}?",{fallbackHash:"4b84082f17dad42aee553e188b22d71685bd4b12",channel_name:Object(te["getDisplayName"])(this.props.channel)}),onSelected:this.onRemoveChannelDefaultStatus}))}}]);return t}(r["PureComponent"]);Ta.displayName="ChannelActionsMenu";Ta.defaultProps={onDialogSubmitComplete:ie["noop"]};var Aa=function e(t){return{openModal:function e(){return t(D["openModal"].apply(void 0,arguments))},closeModal:function e(){return t(D["closeModal"].apply(void 0,arguments))},enqueueToast:function e(){return t(Te["enqueueToast"].apply(void 0,arguments))},removeDefaultChannel:function e(){return t(x["d"].apply(void 0,arguments))}}};var Na=Object(o["connect"])(null,Aa)(Ta);var Pa=function(e){y()(t,e);function t(){p()(this,t);return f()(this,g()(t).apply(this,arguments))}h()(t,[{key:"renderChannelActionsMenu",value:function e(t){return n.a.createElement(Na,t)}},{key:"render",value:function e(){var t=this.props.channel;return n.a.createElement("div",null,n.a.createElement(Oa["e"],Ct()({},this.props,{renderMenu:this.renderChannelActionsMenu,position:"bottom-right",offsetX:20}),n.a.createElement(X["c"],{"data-qa":"default_org_wide_channels_table_menu_btn-"+t.id,className:"p-default_org_wide_channels_table__menu_button"},n.a.createElement(zt["b"],{type:"ellipsis"}))))}}]);return t}(r["PureComponent"]);Pa.displayName="ChannelActionsMenuButton";var Ma=Pa;var Da=new E["b"]("enterprise_dashboard");var xa=function e(t){var a=t.id,r=t.colIdPrefix,i=t.name;return{id:r+"1",className:"p-default_org_wide_channels_table__item p-default_org_wide_channels_table__channel",value:n.a.createElement("div",{id:a,className:"p-default_org_wide_channels_table__channel_name_container"},n.a.createElement(zt["b"],{type:"channel",className:"p-default_org_wide_channels_table__channel-icon"}),n.a.createElement("span",{className:"p-default_org_wide_channels_table__channel-text"},i),n.a.createElement(zt["b"],{type:"org-shared-channel",className:"p-default_org_wide_channels_table__channel-icon"}))}};var Ra=function e(t){var a=t.id,r=t.colIdPrefix,i=t.isRequired,s=void 0!==i&&i;var o=ya()("p-default_org_wide_channels_table__membership",{"p-default_org_wide_channels_table__membership-required":s,"p-default_org_wide_channels_table__membership-optional":!s});var l=n.a.createElement("span",null,Da.t("Optional"));var c=n.a.createElement(n.a.Fragment,null,n.a.createElement(zt["b"],{type:"lock",className:"p-default_org_wide_channels_table__required-membership-icon"}),n.a.createElement("span",{className:"p-default_org_wide_channels_table__membership-text__required"},Da.t("Required")));return{id:r+"2",className:o,value:n.a.createElement("div",{id:a},s?c:l)}};var Fa=function e(t){var a=t.colIdPrefix,r=t.classes,i=ga()(t,["colIdPrefix","classes"]);return{id:a+"3",className:"p-default_org_wide_channels_table__channel-actions "+r,value:n.a.createElement(Ma,i)}};var La=a(3894);var Ua=new E["b"]("enterprise_dashboard");var Ba={defaultOrgWideChannels:[],onDialogSubmitComplete:ie["noop"]};var qa=function(e){y()(t,e);function t(e){var a;p()(this,t);a=f()(this,g()(t).call(this,e));Object(se["a"])(T()(a),["makeRowData"]);return a}h()(t,[{key:"headerData",value:function e(){return[{id:"header_0",value:Ua.t("Channel")},{id:"header_1",value:Ua.t("Membership")}]}},{key:"makeRowData",value:function e(t,a){var r=t.id,n=t.is_mandatory;var i="row_channel"+(a+1);var s=i+"_col_";var o={colIdPrefix:s,channel:t,index:a,onDialogSubmitComplete:this.props.onDialogSubmitComplete};return{id:i,items:[xa({id:r,name:Object(te["getDisplayName"])(t),colIdPrefix:s}),Ra({id:r,isRequired:n,colIdPrefix:s}),Fa(o)]}}},{key:"makeRows",value:function e(){var t=this.props.defaultOrgWideChannels;return t.map(this.makeRowData)}},{key:"render",value:function e(){return n.a.createElement("div",{className:"p-default_org_wide_channels_table"},n.a.createElement(fa["b"],{autoHeight:true,minHeight:300,headers:this.headerData(),rows:this.makeRows(),rowClassName:"p-default_org_wide_channels_table__row",rowHeaderItemClassName:"p-default_org_wide_channels_table__column_header c-table_view_hover_disabled",listClassName:"p-default_org_wide_channels_table__list",useKeyboardNavigableTable:true}))}}]);return t}(r["Component"]);qa.displayName="DefaultOrgWideChannelsTable";qa.defaultProps=Ba;var Ga=function e(t){return{defaultOrgWideChannels:Object(L["d"])(t)}};var Ha=Object(o["connect"])(Ga)(qa);function Wa(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function Va(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Wa(Object(a),true).forEach(function(t){j()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Wa(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Ka=new E["b"]("external_shared_channels");function za(e){if(!e)return{};if(Object(te["isPublicChannel"])(e))return e;return Va({},e,{is_channel:true})}za.propTypes={channel:k["default"].object.isRequired};var Qa={channel:{},isMandatoryChanged:false,isMandatory:false,isEdit:true};var Ya=function(e){y()(t,e);function t(){p()(this,t);return f()(this,g()(t).apply(this,arguments))}h()(t,[{key:"render",value:function e(){var t=this.props,a=t.isMandatoryChanged,r=t.isMandatory,i=t.isEdit,s=t.channel;if("error"===this.props.status)return n.a.createElement(Ie["b"],{position:"bottom-right",icon:"warning",onCloseComplete:ie["noop"],shouldAutoFade:true},n.a.createElement("span",null,Ka.t("Something\u2019s gone wrong. Mind trying again in a moment?")));var o="";!r&&a&&i&&(o=n.a.createElement("span",null,Ka.rt("Membership in <strong>{channelName}</strong> is no longer required for all members, though it\u2019s still a default channel.",{channelName:n.a.createElement(Kt["a"],{channel:za(s)}),fallbackHash:"93efad37d03682791002911767b335f914e838e7"})));(r&&a&&i||r&&!i)&&(o=n.a.createElement("span",null,Ka.rt("<strong>{channelName}</strong> is now a default channel for all org members, and membership is required.",{channelName:n.a.createElement(Kt["a"],{channel:za(s)}),fallbackHash:"1dde11ed6b2fcae117a77f7e8d453bd8c8e4a15a"})));i&&!a&&(o=n.a.createElement("span",null,Ka.rt("<strong>{channelName}</strong> is now a default channel for all org members.",{channelName:n.a.createElement(Kt["a"],{channel:za(s)}),fallbackHash:"8d39726a7eb19b1b7f6b49b65e6fa9617b0cc9d5"})));i||(o=n.a.createElement("span",null,Ka.rt("<strong>{channelName}</strong> is now a default channel for all org members.",{channelName:n.a.createElement(Kt["a"],{channel:za(s)}),fallbackHash:"8d39726a7eb19b1b7f6b49b65e6fa9617b0cc9d5"})));"error"===this.props.status&&(o=n.a.createElement("span",null,Ka.t("Something\u2019s gone wrong. Mind trying again in a moment?")));return n.a.createElement(Ie["b"],{position:"bottom-right",icon:"check-circle-o",onCloseComplete:ie["noop"],shouldAutoFade:true},o)}}]);return t}(r["PureComponent"]);Ya.displayName="DefaultOrgWideChannelChangeToast";Ya.defaultProps=Qa;var Ja=function e(t,a){var r=a.channelId;var n=Object(A["e"])(t,r);return{channel:n}};var Xa=Object(o["connect"])(Ja)(Ya);var Za=new E["b"]("enterprise_dashboard");var $a={defaultOrgWideChannels:[],orgWideChannels:[]};var er=25;var tr=function(e){y()(t,e);function t(e){var a;p()(this,t);a=f()(this,g()(t).call(this,e));Object(se["a"])(T()(a),["openAddChannelModal","onDialogSubmitComplete"]);return a}h()(t,[{key:"onDialogSubmitComplete",value:function e(t){this.props.enqueueToast({element:n.a.createElement(Xa,{channelId:t.channelId,isMandatoryChanged:t.isMandatoryChanged,isMandatory:t.isMandatory,status:t.status})})}},{key:"areThereNonDefaultOrgWideChannels",value:function e(){var t=this.props,a=t.orgWideChannels,r=t.defaultOrgWideChannels;return r.length<a.length}},{key:"didMaxNumberOfDefaultChannelsReached",value:function e(){return this.props.defaultOrgWideChannels.length>=er}},{key:"openAddChannelModal",value:function e(){this.props.openModal({element:n.a.createElement(ha,{orgWideChannels:this.props.orgWideChannels,onDialogSubmitComplete:this.onDialogSubmitComplete})})}},{key:"renderAddChannelButton",value:function e(){return n.a.createElement("div",{"data-enterprise-settings-default-org-wide-channels-add-button":true},n.a.createElement(X["d"],{size:"small",onClick:this.openAddChannelModal,disabled:!this.areThereNonDefaultOrgWideChannels()||this.didMaxNumberOfDefaultChannelsReached()},Za.t("Add a channel",{fallbackHash:"83445b6f0ee7b0a0729a39829a26223028bdd9ba"})))}},{key:"renderChannelCount",value:function e(){var t=this.props.defaultOrgWideChannels;var a=t&&t.length||0;return n.a.createElement("div",{className:"ent_header_tertiary"},Za.t("{count, plural, =1 {# Channel} other {# Channels}}",{count:a,fallbackHash:"4f87fb5595b85f836f00ed34b272039f3e19bfea"}))}},{key:"renderDescription",value:function e(){return n.a.createElement("p",{className:"permissions_title_info"},Za.t("Default org-wide channels are the channels all organization members will be added to.",{fallbackHash:"4f87fb5595b85f836f00ed34b272039f3e19bfea"}))}},{key:"renderDialog",value:function e(){return n.a.createElement(ha,{orgWideChannels:this.props.orgWideChannels})}},{key:"renderErrorBanner",value:function e(){if(!this.areThereNonDefaultOrgWideChannels())return n.a.createElement("p",{className:"permissions_title_info"},Za.t("There are currently no org-wide channels available to be made default. You will need to make a channel shared across your entire organization before you can add another default org-wide channel."));if(this.didMaxNumberOfDefaultChannelsReached())return n.a.createElement("p",{className:"permissions_title_info"},Za.t("Your organization has reached the maximum number of default org-wide channels available."));return null}},{key:"renderHeader",value:function e(){return n.a.createElement("div",{className:"p-shared_channels__header"},n.a.createElement("h2",{className:"ent_header_secondary margin_bottom_50"},Za.t("Default Org-Wide Channels",{fallbackHash:"1d8ca9502e386336fbc73880ec17d91b01b18f26"})))}},{key:"render",value:function e(){return n.a.createElement("div",{"data-enterprise-settings-default-org-wide-channels-management":true},this.renderHeader(),this.renderDescription(),this.renderErrorBanner(),n.a.createElement("div",{className:"top_margin display_flex align_items_center justify_content_between"},this.renderChannelCount(),this.renderAddChannelButton()),n.a.createElement("div",{className:"top_margin display_flex align_items_center justify_content_between"},n.a.createElement(Ha,{onDialogSubmitComplete:this.onDialogSubmitComplete})))}}]);return t}(r["PureComponent"]);tr.displayName="DefaultOrgWideChannelsSetting";tr.defaultProps=$a;var ar=function e(t){return{defaultOrgWideChannels:Object(L["d"])(t),orgWideChannels:re(t)}};var rr=function e(t){return{openModal:function e(){return t(D["openModal"].apply(void 0,arguments))},enqueueToast:function e(){return t(Te["enqueueToast"].apply(void 0,arguments))}}};var nr=Object(o["connect"])(ar,rr)(tr);var ir=a(102);var sr=a(1933);var or=a(4740);var lr=a(2354);var cr=a(386);var ur=a(286);var dr=a(914);var pr=a(152);var mr=new E["b"]("enterprise_dashboard");var hr=70;var vr=350;var fr=35;var br={isLoading:false,selectDataQa:void 0,onSelectedItemsChange:ie["noop"],onKeyDown:ie["noop"],onKeyUp:ie["noop"],onBlur:ie["noop"],onInputFocused:ie["noop"]};var gr=function(e){y()(t,e);function t(e){var a;p()(this,t);a=f()(this,g()(t).call(this,e));Object(se["a"])(T()(a),["renderOptionsList","renderSelectedItemRow","onRemoveButtonClick","onSelectedItemRemoveClick","renderOption","renderSelectedItemRow"]);var r=e.selectState.selectId;a.measurePopoverEventName="measureSelectPopover--"+r;a.fallbackDataQa=e.selectDataQa||r;return a}h()(t,[{key:"componentDidUpdate",value:function e(t){var a=t.selectState;var r=this.props,n=r.selectState,i=r.onSelectedItemsChange;Object(ie["isEqual"])(a.selectedOptions,n.selectedOptions)||i(n.selectedOptions)}},{key:"onRemoveButtonClick",value:function e(t,a){var r=this.props,n=r.selectState,i=r.setSelectState;var s=n.selectedOptions;s=s.filter(function(e){return e.value!==a});i(function(){return{selectedOptions:s,isExpanded:false}})}},{key:"onSelectedItemRemoveClick",value:function e(t){var a=this.props,r=a.selectState,n=a.setSelectState;var i=r.selectedOptions;i=i.filter(function(e,a){return a!==t});n(function(){return{selectedOptions:i}})}},{key:"renderOptionsList",value:function e(){var t=this;var a=this.props,r=a.selectState,i=a.setSelectState,s=a.inputRef,o=a.isLoading,l=a.featureUpdateMultiworkspaceChannelModal;var c=r.isDisabled,u=r.loadInBackground;if(c||!l)return null;return n.a.createElement(sr["a"],{width:"100%",selectState:r,setSelectState:i,renderOption:function e(a){return t.renderOption(a)},emptyStateMessage:function e(){return mr.t("No results found")},multiSelectMode:true,inputRef:s,measurePopoverEventName:this.measurePopoverEventName,isLoading:o&&!u,selectDataQa:this.fallbackDataQa,optionsRowHeight:cr["a"],classPrefix:"p-channel_admin"})}},{key:"renderSelectedItemRow",value:function e(t){var a=this;var r=this.props.selectState;var i=r.selectedOptions;var s=i&&i[t]&&i[t].value;if(!s)return null;return n.a.createElement("div",{className:"p-channel_admin__select_list_row"},Object(nt["a"])(s)?n.a.createElement(Le["a"],{size:"small",id:s,key:s+"-selected-item",showPresence:false}):n.a.createElement(Ue["a"],{size:"small",id:s,key:s+"-selected-item"}),n.a.createElement(X["c"],{onClick:function e(){return a.onSelectedItemRemoveClick(t)},className:"p-channel_admin__select_list_row--close_button"},n.a.createElement(zt["b"],{type:"close-filled"})))}},{key:"renderOption",value:function e(t){var a=this;var r=t.value,i=t.entity,s=t.label,o=t.type;var l=this.props,c=l.selectState,u=l.featureUpdateMultiworkspaceChannelModal;if(!u)return null;var d=(c.selectedOptions||[]).map(function(e){return e.value});var p=Object(ie["includes"])(d,r);var m;switch(o){case"member":m=n.a.createElement(Le["a"],{size:"small",id:r,key:r,useShortMode:true,showPresence:false,isDisabled:p});break;case"user_group":m=n.a.createElement(Ue["a"],{size:"small",userGroup:i,key:r,showDescription:false,isDisabled:p});break;default:m=s}return n.a.createElement("div",{className:"p-channel_admin__select_option"},m,p&&n.a.createElement("span",{className:"p-channel_admin__select_option--secondary_text_wrapper"},n.a.createElement("span",{className:"p-channel_admin__select_option--secondary_text"},mr.t("Already added.")),n.a.createElement(pr["a"],{onClick:function e(){return a.onRemoveButtonClick(r)}},mr.t("Remove?"))))}},{key:"renderSelectedItemsList",value:function e(){var t=this;var a=this.props,r=a.selectState,i=a.featureUpdateMultiworkspaceChannelModal;if(!i)return null;var s=r.selectedOptions||[];if(Object(ie["isEmpty"])(s))return n.a.createElement("div",{"data-qa":"channel-admin-no-selected-items",className:"p-channel_admin__select_empty_message"},n.a.createElement("span",{role:"alert"},mr.t("No members or groups selected")));var o;o=s.length>10?vr:Math.max(s.length*fr,hr);return n.a.createElement("div",{"data-qa":"channel-admin-select-list-container",className:"p-channel_admin__select_list_container"},n.a.createElement(ur["a"],{disableHeight:true},function(e){var a=e.width;return n.a.createElement(dr["b"],{className:"p-channel_admin__select_list_scroller",keys:s.map(function(e){return e.value}),height:o,rowRenderer:function e(a){return t.renderSelectedItemRow(a)},width:a,id:"channel-admin-select-list",role:"listbox","aria-label":""})}))}},{key:"render",value:function e(){var t=this.props,a=t.selectState,r=t.setSelectState,i=t.inputRef,s=t.isLoading,o=t.onSelectedItemsChange,l=t.onKeyDown,c=t.onKeyUp,u=t.onBlur,d=t.onInputFocused;return n.a.createElement("div",{"data-qa":this.fallbackDataQa},n.a.createElement(or["a"],{width:"100%",selectState:a,setSelectState:r,size:cr["f"].MEDIUM,placeholderText:mr.t("Select members or groups...",{fallbackHash:"bce06414177f72ab70e6387b6af9f8ceef0d6049"}),isLoading:s,inputRef:i,focusOnMount:false,measurePopoverEventName:this.measurePopoverEventName,onSelectedItemsChange:o,selectDataQa:this.fallbackDataQa,onKeyDown:l,onKeyUp:c,onBlur:u,expandOnFocus:false,ariaLabel:mr.t("Select members or groups",{fallbackHash:"bce06414177f72ab70e6387b6af9f8ceef0d6049"}),onInputFocused:d,renderSelectedOption:ie["noop"]}),this.renderOptionsList(),this.renderSelectedItemsList())}}]);return t}(r["Component"]);gr.displayName="OrgChannelAdministrationSelect";gr.defaultProps=br;var _r=Object(lr["a"])(gr);var yr=new E["b"]("enterprise_dashboard");var Or={selectedPref:void 0,closeModal:ie["noop"],searchUserGroupsAndMembers:ie["noop"],setAndUpsertLockedOrgPref:ie["noop"],selectedUsers:[],selectedUserGroups:[],featureUpdateMultiworkspaceChannelModal:false};var kr={admin:"admin",owner:"owner",everyoneButGuests:"regular",selectedMembers:"multi"};var Er={member:"member",userGroup:"user_group"};var Cr="who_can_manage_shared_channels";var Sr=function(e){y()(t,e);function t(e){var a;p()(this,t);a=f()(this,g()(t).call(this,e));Object(se["a"])(T()(a),["handleUpdatePref","renderRadios","onRadioChange","onSelectedItemsChange"]);a.initialSelectedOptions=e.selectedUsers.concat(e.selectedUserGroups);a.inputRef=n.a.createRef();a.state={prefValue:e.selectedPref,selectedOptions:a.initialSelectedOptions,isSaving:false};return a}h()(t,[{key:"onRadioChange",value:function e(t){var a=t.target.value;this.setPrefValue(a)}},{key:"onSelectedItemsChange",value:function e(t){var a=t.map(function(e){return e.value});this.setSelectedOptions(a)}},{key:"setIsSaving",value:function e(t){this.setState(function(){return{isSaving:t}})}},{key:"setPrefValue",value:function e(t){this.setState(function(){return{prefValue:t}})}},{key:"setSelectedOptions",value:function e(t){this.setState(function(){return{selectedOptions:t}})}},{key:"formatPrefsForApi",value:function e(){var t=this.state,a=t.selectedOptions,r=t.prefValue;if(r===kr.selectedMembers){var n=[];var i=[];a.forEach(function(e){Object(nt["a"])(e)?n.push(e):i.push(e)});return{subteam:i,user:n,type:["owner"]}}return{type:[r]}}},{key:"formatSelectedOptions",value:function e(){var t=this.state.selectedOptions;return t.map(function(e){return{value:e,label:e}})}},{key:"handleUpdatePref",value:function e(){var t=this;var a=this.props,r=a.closeModal,n=a.setAndUpsertLockedOrgPref;var i=this.formatPrefsForApi();this.setIsSaving(true);n({pref:"who_can_manage_shared_channels",value:i}).then(r).finally(function(){return t.setIsSaving(false)})}},{key:"shouldDisabledSaveButton",value:function e(){var t=this.state,a=t.selectedOptions,r=t.prefValue;var n=this.props.selectedPref;if(r===kr.selectedMembers){if(Object(ie["isEmpty"])(a))return true;var i=Object(ie["xor"])(this.initialSelectedOptions,a);return Object(ie["isEmpty"])(i)}return n===r}},{key:"maybeRenderSelect",value:function e(){var t=this.props,a=t.searchUserGroupsAndMembers,r=t.featureUpdateMultiworkspaceChannelModal;var i=this.state.prefValue;if(i===kr.selectedMembers){if(r)return n.a.createElement(_r,{selectId:"who_can_manage_shared_channels_select",search:a,onSelectedItemsChange:this.onSelectedItemsChange,selectedOptions:this.formatSelectedOptions(),inputRef:this.inputRef,featureUpdateMultiworkspaceChannelModal:r});return n.a.createElement(Fe["b"],{width:"100%",maxHeight:200,selectId:"who_can_manage_shared_channels_select",search:a,placeholderText:yr.t("Search"),renderOption:this.renderEntity,selectedOptions:this.formatSelectedOptions(),onSelectedItemsChange:this.onSelectedItemsChange})}return null}},{key:"renderEntity",value:function e(t){var a=t.type,r=t.value,i=t.label,s=t.entity;switch(a){case Er.member:return n.a.createElement(Le["a"],{size:"small",id:r,key:r});case Er.userGroup:return n.a.createElement(Ue["a"],{size:"small",userGroup:s,key:r});default:return i}}},{key:"renderRadios",value:function e(){var t=this.state.prefValue;return n.a.createElement(pe["a"],{className:"margin_bottom_100"},n.a.createElement(ue["a"],{text:yr.t("Everyone, except guests"),type:"inline",cursor:"pointer"},n.a.createElement(de["a"],{"data-qa":"who-can-manage-shared-channels-regular",name:Cr,value:kr.everyoneButGuests,checked:t===kr.everyoneButGuests,onChange:this.onRadioChange})),n.a.createElement(ue["a"],{text:yr.t("Any admin or owner"),type:"inline",cursor:"pointer"},n.a.createElement(de["a"],{"data-qa":"who-can-manage-shared-channels-admin",name:Cr,value:kr.admin,checked:t===kr.admin,onChange:this.onRadioChange})),n.a.createElement(ue["a"],{text:yr.t("Org Admins and Owners"),type:"inline",cursor:"pointer"},n.a.createElement(de["a"],{"data-qa":"who-can-manage-shared-channels-owner",name:Cr,value:kr.owner,checked:t===kr.owner,onChange:this.onRadioChange})),n.a.createElement(ue["a"],{text:yr.t("Org Admins and Owners, along with..."),type:"inline",cursor:"pointer"},n.a.createElement(de["a"],{"data-qa":"who-can-manage-shared-channels-multi",name:Cr,value:kr.selectedMembers,checked:t===kr.selectedMembers,onChange:this.onRadioChange})))}},{key:"render",value:function e(){var t=this.props.closeModal;var a=this.state.isSaving;return n.a.createElement(J["a"],{labelledby:"multiWorkspaceChannelModal__title-bar",className:"p-shared_channels_settings__edit_modal",centered:true,closeModal:t},n.a.createElement(J["h"],null,n.a.createElement(J["j"],{id:"multiWorkspaceChannelModal__title-bar",title:yr.t("Who can manage multi-workspace channels?"),subtitle:yr.t("Choose who can create, edit, or archive channels available to multiple workspaces"),"data-qa":"multi-workspace-channel-modal-header"})),n.a.createElement(J["d"],null,n.a.createElement(J["e"],{className:"margin_bottom_25","data-qa":"multi-workspace-channel-modal-body"},this.renderRadios(),this.maybeRenderSelect())),n.a.createElement(J["f"],{"data-qa":"multi-workspace-channel-modal-footer"},n.a.createElement(J["g"],null,n.a.createElement(J["c"],{type:"outline","data-qa":"multi-workspace-channel-modal-cancel"},"Cancel"),n.a.createElement(X["b"],{onClick:this.handleUpdatePref,loading:a,"data-qa":"multi-workspace-channel-modal-go",disabled:this.shouldDisabledSaveButton()},yr.t("Save Setting")))))}}]);return t}(r["PureComponent"]);Sr.displayName="MultiWorkspaceChannelsModal";Sr.defaultProps=Or;var wr=function e(t){return{featureUpdateMultiworkspaceChannelModal:Object(O["isFeatureEnabled"])(t,"feature_update_multiworkspace_channel_modal")}};var jr=function e(t){return{closeModal:function e(){return t(D["closeModal"].apply(void 0,arguments))},searchUserGroupsAndMembers:function e(){return t(pt["b"].apply(void 0,arguments))},setAndUpsertLockedOrgPref:function e(){return t(x["f"].apply(void 0,arguments))}}};var Ir=Object(o["connect"])(wr,jr)(Sr);var Tr=new E["b"]("enterprise_dashboard");var Ar={whoCanManageSharedChannelsPref:{type:[],subteam:[],user:[]}};var Nr=function(e){y()(t,e);function t(e){var a;p()(this,t);a=f()(this,g()(t).call(this,e));Object(se["a"])(T()(a),["onEditSetting","renderSetting"]);return a}h()(t,[{key:"onEditSetting",value:function e(){var t=this.props,a=t.openModal,r=t.whoCanManageSharedChannelsPref;var i=r.type,s=r.user,o=r.subteam;var l=i[0];("owner"!==l||Object(ie["isEmpty"])(s))&&Object(ie["isEmpty"])(o)||(l="multi");a({element:n.a.createElement(Ir,{selectedPref:l,selectedUserGroups:o,selectedUsers:s})})}},{key:"getSettingText",value:function e(){var t=this.props.whoCanManageSharedChannelsPref,a=t.type,r=t.user,i=t.subteam;var s=a[0];switch(s){case"admin":return Tr.t("Any admin or owner");case"owner":if(!Object(ie["isEmpty"])(r)||!Object(ie["isEmpty"])(i)){var o=r||[];var l=i||[];return n.a.createElement(dt,{optionIds:o.concat(l)})}return Tr.t("Org Admins and Owners");case"regular":return Tr.t("Everyone, except guests");default:return Tr.t("Any admin or owner")}}},{key:"renderSetting",value:function e(){var t={type:"button",enabled:true,onEdit:this.onEditSetting,editOnly:true};return n.a.createElement(U["a"],{label:Tr.t("Who can manage multi-workspace channels?"),state:this.getSettingText(),description:Tr.t("Can create, edit, and archive channels available to multiple workspaces"),onClick:this.onEditSetting,control:t})}},{key:"renderHeader",value:function e(){if(this.props.featureChannelMgmtPhaseOne)return null;return n.a.createElement(n.a.Fragment,null,n.a.createElement("h2",{"data-qa":"multi-workspace-section-header"},Tr.t("Multi-Workspace Channels")),n.a.createElement("p",{className:"sk_foreground_max_solid"},Tr.t("Settings for channels that are accessed by multiple workspaces in your organization")))}},{key:"render",value:function e(){return n.a.createElement(n.a.Fragment,null,this.renderHeader(),this.renderSetting())}}]);return t}(r["PureComponent"]);Nr.displayName="MultiWorkspaceChannelsSection";Nr.defaultProps=Ar;var Pr=function e(t){return{featureChannelMgmtPhaseOne:Object(O["isFeatureEnabled"])(t,"feature_channel_mgmt_phase_one"),whoCanManageSharedChannelsPref:Object(L["a"])(t,"who_can_manage_shared_channels")}};var Mr=function e(t){return{openModal:function e(){return t(D["openModal"].apply(void 0,arguments))}}};var Dr=Object(o["connect"])(Pr,Mr)(Nr);var xr=a(63);var Rr={admin:"admin",owner:"owner",primary_owner:"primary_owner"};var Fr=new E["b"]("enterprise_dashboard");var Lr={member:"member",userGroup:"user_group"};var Ur=function(e){y()(t,e);function t(e){var a;p()(this,t);a=f()(this,g()(t).call(this,e));a.renderEntity=a.renderEntity.bind(T()(a));a.onSelectedItemsChange=a.onSelectedItemsChange.bind(T()(a));return a}h()(t,[{key:"onSelectedItemsChange",value:function e(t){var a=t.map(function(e){return e.value});this.props.onSelectedItemsChange(a)}},{key:"formatSelectedOptions",value:function e(){var t=this.props.selectedOptions;return t.map(function(e){return{value:e,label:e}})}},{key:"renderEntity",value:function e(t){var a=t.type,r=t.value,i=t.label,s=t.entity;switch(a){case Lr.member:return n.a.createElement(Le["a"],{size:"small",id:r,key:r});case Lr.userGroup:return n.a.createElement(Ue["a"],{size:"small",userGroup:s,key:r});default:return i}}},{key:"render",value:function e(){return n.a.createElement(Fe["b"],{width:"100%",maxHeight:200,className:"p-public_channel_mgmt__select",selectId:"public_channel_mgmt_select",search:this.props.searchUserGroupsAndMembers,placeholderText:Fr.t("Search members or groups...",{fallbackHash:"bce06414177f72ab70e6387b6af9f8ceef0d6049"}),renderOption:this.renderEntity,selectedOptions:this.formatSelectedOptions(),onSelectedItemsChange:this.onSelectedItemsChange})}}]);return t}(n.a.Component);Ur.displayName="PublicChannelMgmtSelect";var Br=function e(t){return{searchUserGroupsAndMembers:function e(a){return t(Object(pt["b"])(a))}}};var qr=Object(o["connect"])(null,Br)(Ur);var Gr=new E["b"]("enterprise_dashboard");var Hr={selectedPref:"primary_owner",closeModal:ie["noop"],selectedUsers:[],selectedUserGroups:[],featureChannelMgmtPhaseOne:false};var Wr="public_channel_management";var Vr=function(e){y()(t,e);function t(e){var a;p()(this,t);a=f()(this,g()(t).call(this,e));Object(se["a"])(T()(a),["renderRadios","onRadioChange","onAllowSpecificUsersClick","onSearchItemChange"]);a.initialSelectedOptions=(e.selectedUsers||[]).concat(e.selectedUserGroups||[]);a.state={prefValue:e.selectedPref,isSaving:false,allowSpecificUsers:false,selectedOptions:a.initialSelectedOptions};return a}h()(t,[{key:"onRadioChange",value:function e(t){var a=t.target.value;this.setPrefValue(a)}},{key:"onAllowSpecificUsersClick",value:function e(){this.setState(function(e){return{allowSpecificUsers:!e.allowSpecificUsers}})}},{key:"onSearchItemChange",value:function e(t){this.setState(function(){return{selectedOptions:t}})}},{key:"getStrings",value:function e(){if(!this.props.featureChannelMgmtPhaseOne)return null;return{titleString:Gr.t("Who can manage public channels for the organization?"),checkboxText:Gr.t("Also allow specific users and groups"),orgOwners:Gr.t("Org owners only"),orgOwnerAndAdmins:Gr.t("Org owners and admins")}}},{key:"setIsSaving",value:function e(t){this.setState(function(){return{isSaving:t}})}},{key:"setPrefValue",value:function e(t){this.setState(function(){return{prefValue:t}})}},{key:"shouldDisableSaveButton",value:function e(){var t=this.state,a=t.prefValue,r=t.selectedOptions,n=t.allowSpecificUsers;var i=this.props.selectedPref;if(n)return Object(ie["isEmpty"])(r);return i===a}},{key:"renderRadios",value:function e(){var t=this.state.prefValue;return n.a.createElement(pe["a"],{className:"margin_bottom_100",isDisabled:true},n.a.createElement(ue["a"],{text:Gr.t("Org Primary Owner Only (default)",{fallbackHash:"026c49233598a80fdcabc0e9002a73a77e3e412d"}),type:"inline",cursor:"pointer","data-qa":"mod_pub_ch_opt_opoo_text",isDisabled:true},n.a.createElement(de["a"],{"data-qa":"mod_pub_ch_opt_opoo_radio_btn",name:Wr,value:Rr.primary_owner,checked:t===Rr.primary_owner,onChange:this.onRadioChange})))}},{key:"renderMultiSelectSearch",value:function e(){return n.a.createElement("div",{className:"p-public_channel_mgmt__search_container"},n.a.createElement(ue["a"],{text:"Also allow specific users and groups:",type:"inline",cursor:"pointer"},n.a.createElement(Ft["a"],{id:"public_channel_management_checkbox",checked:this.state.allowSpecificUsers,onChange:this.onAllowSpecificUsersClick,"data-qa":"mod_pub_ch_allow_chkbox"})),n.a.createElement(qr,{selectedOptions:this.state.selectedOptions,onSelectedItemsChange:this.onSearchItemChange}))}},{key:"render",value:function e(){var t=this.props.closeModal;var a=this.state.isSaving;return n.a.createElement(J["a"],{labelledby:"publicChannelManagementModal__title-bar",className:"p-shared_channels_settings__edit_modal",centered:true,closeModal:t},n.a.createElement(J["h"],null,n.a.createElement(J["j"],{id:"publicChannelManagementModal__title-bar",title:"Who can manage public channels for the organization?","data-qa":"mod_pub_ch_title_text"})),n.a.createElement(J["d"],null,n.a.createElement(J["e"],{className:"margin_bottom_25","data-qa":"multi-workspace-channel-modal-body"},this.renderRadios(),this.renderMultiSelectSearch())),n.a.createElement(J["f"],{"data-qa":"multi-workspace-channel-modal-footer"},n.a.createElement(J["g"],null,n.a.createElement(J["c"],{type:"outline","data-qa":"mod_pub_ch_cancel_btn"},Gr.t("Cancel")),n.a.createElement(X["b"],{onClick:ie["noop"],loading:a,"data-qa":"mod_pub_ch_save_btn",disabled:this.shouldDisableSaveButton()},Gr.t("Save Setting")))))}}]);return t}(r["PureComponent"]);Vr.displayName="PublicChannelMgmtModal";Vr.defaultProps=Hr;var Kr=function e(t){return{featureChannelMgmtPhaseOne:Object(O["isFeatureEnabled"])(t,"feature_channel_mgmt_phase_one")}};var zr=function e(t){return{closeModal:function e(){return t(D["closeModal"].apply(void 0,arguments))}}};var Qr=Object(o["connect"])(Kr,zr)(Vr);var Yr=a(4788);var Jr=new E["b"]("enterprise_dashboard");var Xr={featureChannelMgmtPhaseOne:false};var Zr=function(e){y()(t,e);function t(e){var a;p()(this,t);a=f()(this,g()(t).call(this,e));a.onEditSetting=a.onEditSetting.bind(T()(a));a.state={whoCanManageChannelsPref:Rr.primary_owner};return a}h()(t,[{key:"onEditSetting",value:function e(){var t=this.props.openModal;t({element:n.a.createElement(Qr,{selectedPref:this.state.whoCanManageChannelsPref})})}},{key:"getStrings",value:function e(){if(!this.props.featureChannelMgmtPhaseOne)return null;return{orgAdminOwnerString:Jr.t("Org owners and admins"),orgOwnerString:Jr.t("Org Owner only"),titleString:Jr.t("Who can manage public channels for the organization?"),descriptionString:Jr.t("Can view and manage all public channels in the organization.")}}},{key:"getSettingText",value:function e(){var t=this.state.whoCanManageChannelsPref;switch(t){case Rr.primary_owner:return Jr.t("Org Primary Owner only",{fallbackHash:"026c49233598a80fdcabc0e9002a73a77e3e412d"});case Rr.owner:return"Org Owner only";default:return"Can view and manage all public channels in the organization."}}},{key:"render",value:function e(){var t={type:"button",enabled:true,onEdit:this.onEditSetting,editOnly:true,dataQAPrefix:"pub_ch_edit_btn"};return n.a.createElement(U["a"],{label:n.a.createElement("span",{"data-qa":"pub_ch_permission_text"},"Who can manage public channels for the organization?"),state:n.a.createElement("span",{"data-qa":"pub_ch_role_text"},this.getSettingText()),description:n.a.createElement("span",{"data-qa":"pub_ch_role_sub_text"},"Can view and manage all public channels in the organization"),onClick:this.onEditSetting,control:t,readonly:!this.props.canEditSetting})}}]);return t}(r["PureComponent"]);Zr.displayName="PublicChannelMgmtSection";Zr.defaultProps=Xr;var $r=function e(t){return{featureChannelMgmtPhaseOne:Object(O["isFeatureEnabled"])(t,"feature_channel_mgmt_phase_one"),canEditSetting:Object(xr["L"])(t)}};var en=function e(t){return{openModal:function e(){return t(D["openModal"].apply(void 0,arguments))}}};var tn=Object(o["connect"])($r,en)(Zr);var an={admin:"admin",owner:"owner",primary_owner:"primary_owner"};var rn=new E["b"]("enterprise_dashboard");var nn={member:"member",userGroup:"user_group"};var sn=function(e){y()(t,e);function t(e){var a;p()(this,t);a=f()(this,g()(t).call(this,e));a.renderEntity=a.renderEntity.bind(T()(a));a.onSelectedItemsChange=a.onSelectedItemsChange.bind(T()(a));return a}h()(t,[{key:"onSelectedItemsChange",value:function e(t){var a=t.map(function(e){return e.value});this.props.onSelectedItemsChange(a)}},{key:"formatSelectedOptions",value:function e(){var t=this.props.selectedOptions;return t.map(function(e){return{value:e,label:e}})}},{key:"renderEntity",value:function e(t){var a=t.type,r=t.value,i=t.label,s=t.entity;switch(a){case nn.member:return n.a.createElement(Le["a"],{size:"small",id:r,key:r});case nn.userGroup:return n.a.createElement(Ue["a"],{size:"small",userGroup:s,key:r});default:return i}}},{key:"render",value:function e(){if(!this.props.featureChannelMgmtPhaseTwo)return null;return n.a.createElement(Fe["b"],{width:"100%",maxHeight:200,className:"p-private_channel_mgmt__select",selectId:"private_channel_mgmt_select",search:this.props.searchUserGroupsAndMembers,placeholderText:rn.t("Search members or groups..."),renderOption:this.renderEntity,selectedOptions:this.formatSelectedOptions(),onSelectedItemsChange:this.onSelectedItemsChange})}}]);return t}(n.a.Component);sn.displayName="PrivateChannelMgmtSelect";var on=function e(t){return{featureChannelMgmtPhaseTwo:Object(O["isFeatureEnabled"])(t,"feature_channel_mgmt_phase_two")}};var ln=function e(t){return{searchUserGroupsAndMembers:function e(a){return t(Object(pt["b"])(a))}}};var cn=Object(o["connect"])(on,ln)(sn);var un=new E["b"]("enterprise_dashboard");var dn={selectedPref:"primary_owner",closeModal:ie["noop"],featureChannelMgmtPhaseTwo:false};var pn="private_channel_management";var mn=function(e){y()(t,e);function t(e){var a;p()(this,t);a=f()(this,g()(t).call(this,e));Object(se["a"])(T()(a),["renderRadios","onRadioChange","onAllowSpecificUsersClick","onSearchItemChange"]);a.state={prefValue:e.selectedPref,isSaving:false,allowSpecificUsers:false,selectedOptions:[]};return a}h()(t,[{key:"onRadioChange",value:function e(t){var a=t.target.value;this.setPrefValue(a)}},{key:"onAllowSpecificUsersClick",value:function e(){this.setState(function(e){return{allowSpecificUsers:!e.allowSpecificUsers}})}},{key:"onSearchItemChange",value:function e(t){this.setState(function(){return{selectedOptions:t}})}},{key:"setIsSaving",value:function e(t){this.setState(function(){return{isSaving:t}})}},{key:"setPrefValue",value:function e(t){this.setState(function(){return{prefValue:t}})}},{key:"hasChanges",value:function e(){var t=this.state.prefValue;var a=this.props.selectedPref;return a===t}},{key:"renderRadios",value:function e(){var t=this.state.prefValue;if(!this.props.featureChannelMgmtPhaseTwo)return null;return n.a.createElement(pe["a"],{className:"margin_bottom_100"},n.a.createElement(ue["a"],{text:un.t("Org Primary Owner Only (default)"),type:"inline",cursor:"pointer","data-qa":"mod_pub_ch_opt_opoo_text"},n.a.createElement(de["a"],{"data-qa":"mod_pub_ch_opt_opoo_radio_btn",name:pn,value:an.primary_owner,checked:t===an.primary_owner,onChange:this.onRadioChange})),n.a.createElement(ue["a"],{text:un.t("Org owners only"),type:"inline",cursor:"pointer","data-qa":"mod_pub_ch_opt_ooo_text"},n.a.createElement(de["a"],{"data-qa":"mod_pub_ch_opt_ooo_radio_btn",name:pn,value:an.owner,checked:t===an.owner,onChange:this.onRadioChange})),n.a.createElement(ue["a"],{text:un.t("Org owners and admins"),type:"inline",cursor:"pointer","data-qa":"mod_pub_ch_opt_ooaa_text"},n.a.createElement(de["a"],{"data-qa":"mod_pub_ch_opt_ooaa_radio_btn",name:pn,value:an.admin,checked:t===an.admin,onChange:this.onRadioChange})))}},{key:"renderMultiSelectSearch",value:function e(){if(!this.props.featureChannelMgmtPhaseTwo)return null;return n.a.createElement("div",{className:"p-private_channel_mgmt__search_container"},n.a.createElement(ue["a"],{text:un.t("Also allow specific users and groups:"),type:"inline",cursor:"pointer"},n.a.createElement(Ft["a"],{id:"private_channel_management_checkbox",checked:this.state.allowSpecificUsers,onChange:this.onAllowSpecificUsersClick,"data-qa":"mod_pub_ch_allow_chkbox"})),n.a.createElement(cn,{selectedOptions:this.state.selectedOptions,onSelectedItemsChange:this.onSearchItemChange,featureChannelMgmtPhaseOne:true}))}},{key:"render",value:function e(){var t=this.props.closeModal;var a=this.state.isSaving;if(!this.props.featureChannelMgmtPhaseTwo)return null;return n.a.createElement(J["a"],{labelledby:"privateChannelManagementModal__title-bar",className:"p-shared_channels_settings__edit_modal",centered:true,closeModal:t},n.a.createElement(J["h"],null,n.a.createElement(J["j"],{id:"privateChannelManagementModal__title-bar",title:un.t("Who can manage private channels for the organization?"),"data-qa":"mod_pub_ch_title_text"})),n.a.createElement(J["d"],null,n.a.createElement(J["e"],{className:"margin_bottom_25","data-qa":"multi-workspace-channel-modal-body"},this.renderRadios(),this.renderMultiSelectSearch())),n.a.createElement(J["f"],{"data-qa":"multi-workspace-channel-modal-footer"},n.a.createElement(J["g"],null,n.a.createElement(J["c"],{type:"outline","data-qa":"mod_pub_ch_cancel_btn"},un.t("Cancel")),n.a.createElement(X["b"],{onClick:ie["noop"],loading:a,"data-qa":"mod_pub_ch_save_btn",disabled:this.hasChanges()},un.t("Save Setting")))))}}]);return t}(r["PureComponent"]);mn.displayName="PrivateChannelMgmtModal";mn.defaultProps=dn;var hn=function e(t){return{featureChannelMgmtPhaseTwo:Object(O["isFeatureEnabled"])(t,"feature_channel_mgmt_phase_two")}};var vn=function e(t){return{closeModal:function e(){return t(D["closeModal"].apply(void 0,arguments))}}};var fn=Object(o["connect"])(hn,vn)(mn);var bn=new E["b"]("enterprise_dashboard");var gn=function(e){y()(t,e);function t(e){var a;p()(this,t);a=f()(this,g()(t).call(this,e));a.onEditSetting=a.onEditSetting.bind(T()(a));a.state={whoCanManagePrivateChannelsPref:an.primary_owner};return a}h()(t,[{key:"onEditSetting",value:function e(){var t=this.props.openModal;t({element:n.a.createElement(fn,{selectedPref:this.state.whoCanManageChannelsPref})})}},{key:"getSettingText",value:function e(){if(!this.props.featureChannelMgmtPhaseTwo)return null;var t=this.state.whoCanManagePrivateChannelsPref;switch(t){case an.primary_owner:return bn.t("Org Primary Owner only");case an.owner:return bn.t("Org Owner only");default:return bn.t("Org owners and admins")}}},{key:"render",value:function e(){if(!this.props.featureChannelMgmtPhaseTwo)return null;var t={type:"button",enabled:true,onEdit:this.onEditSetting,editOnly:true,dataQAPrefix:"pub_ch_edit_btn"};return n.a.createElement(U["a"],{label:n.a.createElement("span",{"data-qa":"pub_ch_permission_text"},bn.t("Who can manage private channels for the organization?")),state:n.a.createElement("span",{"data-qa":"pub_ch_role_text"},this.getSettingText()),description:n.a.createElement("span",{"data-qa":"pub_ch_role_sub_text"},bn.t("Can view and manage all private channels in the organization.")),onClick:this.onEditSetting,control:t})}}]);return t}(r["PureComponent"]);gn.displayName="PrivateChannelMgmtSection";var _n=function e(t){return{featureChannelMgmtPhaseTwo:Object(O["isFeatureEnabled"])(t,"feature_channel_mgmt_phase_two")}};var yn=function e(t){return{openModal:function e(){return t(D["openModal"].apply(void 0,arguments))}}};var On=Object(o["connect"])(_n,yn)(gn);var kn=a(4867);var En=new E["b"]("enterprise_dashboard");var Cn=function(e){y()(t,e);function t(){p()(this,t);return f()(this,g()(t).apply(this,arguments))}h()(t,[{key:"renderSharedChannels",value:function e(){return n.a.createElement(kt,{whoCanManageESC:this.props.whoCanManageESC})}},{key:"renderChannelMgmtLayout",value:function e(){return n.a.createElement("div",null,n.a.createElement("h1",{className:"ent_content_header ent_header ent_header_primary","data-qa":"admin-header"},En.t("Channel Administration")),n.a.createElement(tn,null),this.props.featureChannelMgmtPhaseTwo&&n.a.createElement(On,null),n.a.createElement(Dr,null),n.a.createElement("div",{className:"enterprise_fieldset"},this.renderSharedChannels()),n.a.createElement("div",{className:"enterprise_fieldset margin_bottom_0"},n.a.createElement(nr,null)),n.a.createElement(S["a"],null))}},{key:"render",value:function e(){var t=this.props,a=t.featureOrgLevelUserGroupsPhase2Frontend,r=t.featureChannelMgmtPhaseOne;if(r||a)return this.renderChannelMgmtLayout();return n.a.createElement("div",null,n.a.createElement("h1",{className:"ent_content_header ent_header ent_header_primary","data-qa":"admin-header"},En.t("Channel Administration")),n.a.createElement("div",{className:"enterprise_fieldset"},this.renderSharedChannels()),n.a.createElement(Dr,null),n.a.createElement("div",{className:"enterprise_fieldset margin_bottom_0"},n.a.createElement(nr,null)),n.a.createElement(S["a"],null))}}]);return t}(r["PureComponent"]);Cn.displayName="ChannelAdmin";var Sn=function e(t){return{featureChannelMgmtPhaseOne:Object(O["isFeatureEnabled"])(t,"feature_channel_mgmt_phase_one"),featureChannelMgmtPhaseTwo:Object(O["isFeatureEnabled"])(t,"feature_channel_mgmt_phase_two"),whoCanManageESC:Object(C["getEnterpriseSharedChannelsPref"])(t),featureOrgLevelUserGroupsPhase2Frontend:Object(O["isFeatureEnabled"])(t,"feature_org_level_user_groups_phase_2_frontend")}};var wn=Object(o["connect"])(Sn)(Cn);Object(c["a"])("interop.channelsAdminSettings",{render:function e(t,a){if(!t)throw new Error("channelsAdminSettings render must be called with a teamId parameter");var r=Object(l["f"])(t);s.a.render(n.a.createElement(o["Provider"],{store:r},n.a.createElement(u["a"],null,n.a.createElement(wn,null))),a)},stop:function e(t){s.a.unmountComponentAtNode(t)}})},,function(e,t,a){"use strict";var r=a(88);var n=a.n(r);var i=a(110);var s=a.n(i);var o=a(135);var l=a.n(o);var c=a(169);var u=a.n(c);var d=a(138);var p=a.n(d);var m=a(147);var h=a.n(m);var v=a(185);var f=a.n(v);var b=a(1);var g=a.n(b);var _=a(0);var y=a(2);var O=a(30);var k=a(13);var E=a.n(k);var C=a(2186);var S=a(6);var w=a(210);var j=a(1653);var I=a(821);var T=a(120);var A=new S["b"]("search");var N=function(e){f()(t,e);function t(e){var a;s()(this,t);a=u()(this,p()(t).call(this,e));Object(O["a"])(h()(a),["onChange"]);return a}l()(t,[{key:"onChange",value:function e(t){this.props.onAccountTypeChange({type:t.value})}},{key:"render",value:function e(){var t=this;var a=[{value:T["h"].all,label:A.t("All types")},{value:T["h"].owners,label:A.t("Owners")},{value:T["h"].admins,label:A.t("Admins")},{value:T["h"].full,label:A.t("Full Members (includes owners and admins)")},{value:T["h"].guests,label:A.t("Guests")},{value:T["h"].deactivated,label:A.t("Deactivated accounts"),isDisabled:this.props.hideDeactivatedUsers}];var r=a.find(function(e){return e.value===t.props.accountType.type});var n=this.props.hideDeactivatedUsers?"deactivated-accounts-disabled":"deactivated-accounts-enabled";return g.a.createElement(I["a"],{key:n,width:"100%",options:a,ariaLabel:A.t("Select an account type to filter by"),className:"c-people_filter",selectedOption:r,onOptionSelected:this.onChange})}}]);return t}(b["Component"]);N.displayName="PeopleFilterAccountType";N.defaultProps={accountType:{type:T["h"].all},hideDeactivatedUsers:false,onAccountTypeChange:y["noop"]};var P=N;var M=a(1036);var D=a(877);var x=a(1699);var R=a(2727);var F=a(218);var L=a.n(F);var U=a(17);var B=a(1958);var q=a(596);var G=a(25);var H=Object(y["memoize"])(function(){var e=Object(B["a"])(Object(q["a"])());var t={};e.forEach(function(e){var a=e[1];var r=e[0];t[a]=r});return t});function W(e){var t=H();var a=Object.values(Object(G["a"])(e));var r={};var n;for(var i=0;i<a.length;i++){var s=a[i];var o=Object(U["getMemberTimezone"])(s);if(o){r[o]?r[o]+=1:r[o]=1;Object(U["isSelf"])(s)&&(n=o)}}var l=Object.keys(r);l.sort(function(e,t){return r[e]<r[t]});Object(y["remove"])(l,function(e){return e===n});var c=[n].concat(L()(l.slice(0,2))).map(function(e){return{value:e,label:t[e],checked:false}});return c}var V=a(2743);var K=a(2010);var z=a(2728);a.d(t,"a",function(){return Z});function Q(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function Y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(a),true).forEach(function(t){n()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Q(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var J=new S["b"]("search");var X={accountType:{type:T["h"].all},visibleFilterState:{},sharedTeams:{state:"ready",teams:[]},filters:[],filterSuggestions:[],clogSearchFilterAdded:y["noop"],clogSearchFilterRemoved:y["noop"],peopleSearchOpened:y["noop"],peopleSearchCustomFilterChanged:y["noop"],peopleSearchTimezoneFilterChanged:y["noop"],timezoneSuggestions:[],teamProfileState:{state:"ready",refreshed:0},filterWorkspaceOnly:false,searchOnlyWorkspaceTeamId:"",searchOnlyByEnterpriseTeamId:y["noop"],loggedInEnterpriseTeams:[],selfEnterpriseOrgName:"",onMount:y["noop"]};var Z=function(e){f()(t,e);function t(e){var a;s()(this,t);a=u()(this,p()(t).call(this,e));Object(O["a"])(h()(a),["onAccountTypeChange","onOnlySearchWorkspaceChange","onHideDeactivatedUsersChange","onSearchLimitTeamFilterDropdownChange"]);a.peopleSearchOpenedPromise=null;return a}l()(t,[{key:"componentDidMount",value:function e(){this.peopleSearchOpenedPromise=this.props.peopleSearchOpened();this.props.onMount()}},{key:"componentWillUnmount",value:function e(){this.peopleSearchOpenedPromise&&this.peopleSearchOpenedPromise.cancel()}},{key:"onAccountTypeChange",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.type;this.props.clogSearchFilterAdded({filter_account_type:a});this.props.setPeopleSearchFilterType({type:a})}},{key:"onHideDeactivatedUsersChange",value:function e(t){t.target.checked?this.props.clogSearchFilterAdded({filter_other:"hide_deactivated_users"}):this.props.clogSearchFilterRemoved({filter_other:"hide_deactivated_users"});this.props.setPeopleSearchHideDeactivatedUsers({value:t.target.checked})}},{key:"onOnlySearchWorkspaceChange",value:function e(t){t.target.checked?this.props.clogSearchFilterAdded({filter_other:"workspace_only"}):this.props.clogSearchFilterRemoved({filter_other:"workspace_only"});this.props.setSearchOnlySearchWorkspace({value:t.target.checked})}},{key:"onSearchLimitTeamFilterDropdownChange",value:function e(t){this.props.searchOnlyByEnterpriseTeamId({value:t.value})}},{key:"filterOptions",value:function e(t,a,r){return a.filter(function(e){return isFinite(e.score)&&!r.some(function(t){return t.checked&&t.value===e.value})})}},{key:"loadOptions",value:function e(t,a){var r=new M["b"](t);return Object(y["sortBy"])(a.map(function(e){return{value:e.value,label:e.label,score:0===t.length?0:r.normalizeAndScore(e.label)}}),"score")}},{key:"renderPrefs",value:function e(){var t=this.props,a=t.showEnterpriseOptions,r=t.filterWorkspaceOnly,n=t.hideDeactivatedUsers,i=t.currentTeam,s=t.accountType,o=t.featureSearchLimitTeamFilter,l=t.searchOnlyWorkspaceTeamId,c=t.selfEnterpriseOrgName,u=t.loggedInEnterpriseTeams;var d=s.type===T["h"].deactivated;return g.a.createElement("div",null,a&&o?g.a.createElement(D["a"],{title:J.t("Workspace"),"data-qa":"search-filter-workspace-section"},g.a.createElement("div",{className:"p-search_filter__select"},g.a.createElement(K["a"],{loggedInEnterpriseTeams:u,selfEnterpriseOrgName:c,searchOnlyWorkspaceTeamId:l,onChange:this.onSearchLimitTeamFilterDropdownChange,featureSearchLimitTeamFilter:o}))):null,g.a.createElement(D["a"],{title:J.t("More options")},g.a.createElement("div",{className:"p-search_filter__select"},a&&!o?g.a.createElement(z["a"],{currentTeam:i,filterWorkspaceOnly:r,checkOnlySearchWorkspace:this.onOnlySearchWorkspaceChange,featureSearchLimitTeamFilter:o}):null,g.a.createElement("label",{className:E()("p-search_filter__checkbox_label",{"p-search_filter__checkbox_label--selected":n,"p-search_filter__checkbox_label--disabled":d}),htmlFor:this.props.namespace+"-filter-hide-deactivated-users"},g.a.createElement("input",{type:"checkbox",className:"flex_shrink_none",disabled:d,checked:n,onChange:this.onHideDeactivatedUsersChange,id:this.props.namespace+"-filter-hide-deactivated-users"}),J.t("Hide deactivated accounts")," "))))}},{key:"renderTimezoneFilter",value:function e(){var t=this;var a=this.props.timezoneSuggestions;var r=H();var n=Object.keys(r).map(function(e){return{value:e,label:r[e]}});var i=J.t("Choose another");return g.a.createElement(D["a"],{title:J.t("Time zone",{ns:"edit_profile"}),"data-qa":"search-filter-section-people-timezones"},g.a.createElement(x["a"],{namespace:this.props.namespace+"-time-zone",checkboxName:"timezone",placeholderText:i,showMoreOptionsAriaLabel:i,loadOptions:function e(a){return Promise.resolve({options:t.loadOptions(a,n)})},visibleOptions:a,onOptionChange:function e(a,r){t.props.peopleSearchTimezoneFilterChanged({label:a.label,value:a.value,checked:r})},onOptionAdd:function e(r){var n=a&&a.find(function(e){return e.value===r.value});var i=n&&n.checked;t.props.peopleSearchTimezoneFilterChanged({label:r.label,value:r.value,checked:!i})},filterOptions:function e(r,n){return t.filterOptions(r,n,a)}}))}},{key:"render",value:function e(){var t=this;var a=this.props,r=a.accountType,n=a.currentTeam,i=a.visibleFilterState,s=a.sharedTeams,o=a.teamProfileState,l=a.filters,c=a.filterSuggestions,u=a.hideDeactivatedUsers;var d="loading"===o.state||"loading"===s.state;var p=J.t("Choose another");var m=Object(j["a"])(n).filter(function(e){return e.options&&e.options.length>1});var h={};m.forEach(function(e){var t=e.name;var a={};e.options.forEach(function(e){a[e.value]=e});h[t]=i[t]?i[t].filter(function(e){return a[e.value]}).map(function(e){return{value:e.value,label:a[e.value].label,checked:e.checked}}):[]});return g.a.createElement(g.a.Fragment,null,g.a.createElement(D["a"],{title:J.t("Account type")},g.a.createElement("div",{className:"p-search_filter__select"},g.a.createElement(P,{accountType:r,hideDeactivatedUsers:u,onAccountTypeChange:this.onAccountTypeChange}))),g.a.createElement(w["a"],{enabled:["feature_steeple_church_ext"]},!d&&s.teams.length>0&&g.a.createElement(R["a"],{namespace:this.props.namespace,context:"people",sharedTeams:s,filters:l,filterSuggestions:c,toggleSearchOrgFilter:this.props.togglePeopleSearchOrgFilter,clogSearchFilterAdded:this.props.clogSearchFilterAdded,clogSearchFilterRemoved:this.props.clogSearchFilterRemoved})),this.renderPrefs(),d?g.a.createElement("div",null,g.a.createElement(V["a"],{variation:0}),g.a.createElement(V["a"],{variation:1})):m.map(function(e,a){return g.a.createElement(D["a"],{key:e.name,title:e.label,"data-qa":"search-filter-section-people-custom"},g.a.createElement(x["a"],{namespace:t.props.namespace+"-profile-fields",checkboxName:e.name,visibleOptions:h[e.name],loadOptions:function a(r){return Promise.resolve({options:t.loadOptions(r,e.options)})},filterOptions:function a(r,n){return t.filterOptions(r,n,h[e.name])},onOptionChange:function r(n,i){i?t.props.clogSearchFilterAdded({filter_custom_profile:true,filter_module_position:a,filter_position:h[e.name].indexOf(n)}):t.props.clogSearchFilterRemoved({filter_custom_profile:true,filter_module_position:a,filter_position:h[e.name].indexOf(n)});t.props.peopleSearchCustomFilterChanged({id:e.name,value:n.value,checked:i})},onOptionAdd:function r(n){var s=i[e.name]&&i[e.name].find(function(e){return e.value===n.value});var o=s&&s.checked;t.props.peopleSearchCustomFilterChanged({id:e.name,value:n.value,checked:!o});o?t.props.clogSearchFilterRemoved({filter_custom_profile:true,filter_module_position:a,filter_position:null}):t.props.clogSearchFilterAdded({filter_custom_profile:true,filter_module_position:a,filter_position:null})},placeholderText:p,showMoreOptionsAriaLabel:p,showMoreOptions:e.options.length>h[e.name].length}))}))}}]);return t}(b["Component"]);Z.displayName="PeopleFilterUIBase";Z.defaultProps=Y({},X)},,,function(e,t,a){e.exports=a.p+"32c2fbfac9856c4cc782029020b3428c.png"},function(e,t,a){},,function(e,t,a){},,function(e,t,a){"use strict";var r=a(110);var n=a.n(r);var i=a(135);var s=a.n(i);var o=a(169);var l=a.n(o);var c=a(138);var u=a.n(c);var d=a(185);var p=a.n(d);var m=a(1);var h=a.n(m);var v=a(12);var f=a(2);var b=a(0);var g=a(1182);var _=a(104);var y=a(33);var O=a(35);var k=a(90);var E=a(147);var C=a.n(E);var S=a(30);var w=a(11);var j=a(1235);var I=a(6);var T=a(27);var A=a(253);var N=a(325);var P=a(77);var M=a(23);var D=a(152);var x=a(2764);var R=a(5123);var F=a(3335);var L=new I["b"]("help");var U={query:"",onClose:f["noop"],showKeyboardShortcuts:f["noop"],withoutFullscreenModal:false,isIAPhase1Enabled:false,includeFooter:true,featureHelpModalIaRedesign:false,isIAPhase1EnabledFlag:false};var B=function(e){p()(t,e);function t(e){var a;n()(this,t);a=l()(this,u()(t).call(this,e));a.state={isModalOpen:true,query:e.query};a.zdLocale=Object(P["a"])();Object(S["a"])(C()(a),["onClickBrowseLink","onClickContactUsButton","onClickShortcutsButton","onOpenSearchLink","onQueryChange"]);return a}s()(t,[{key:"componentDidMount",value:function e(){var t=this.props,a=t.trigger,r=t.clogger,n=t.isIAPhase1Enabled;r.track("HELP_MODAL_ACTION",{action:"open_modal",trigger:a,is_iap1:n})}},{key:"onClickBrowseLink",value:function e(){var t=this.state.query;var a=this.props.clogger;var r=Object(N["a"])({zdLocale:this.zdLocale,query:t});t&&a.track("HELP_MODAL_SEARCH",{search_terms:t});a.track("HELP_MODAL_ACTION",{action:"browse_all",trigger:"click_browse_all"});window.open(r)}},{key:"onClickContactUsButton",value:function e(){var t="/help/requests/new";var a=this.props,r=a.clogger,n=a.team;var i="HELP_MODAL_ACTION";var s={action:"submit_new_request",trigger:"click_submit_new_request"};r.track(i,s);Object(T["openAuthenticatedUrlInBrowser"])(n,t)}},{key:"onClickShortcutsButton",value:function e(){var t=this.props.clogger;var a="HELP_MODAL_ACTION";var r={action:"keyboard_shorcuts",trigger:"click_keyboard_shorcuts"};this.setState(function(){return{isModalOpen:false}});t.track(a,r);this.props.showKeyboardShortcuts()}},{key:"onOpenSearchLink",value:function e(t){var a=t.url,r=t.query;var n=this.props.clogger;r&&n.track("HELP_MODAL_SEARCH",{search_terms:this.state.query,locale:this.zdLocale});n.track("HELP_MODAL_ZD_HIT",{zd_article_url:a})}},{key:"onQueryChange",value:function e(t){this.setState(function(){return{query:t}})}},{key:"render",value:function e(){var t=this.state.isModalOpen;var a=this.props,r=a.onClose,n=a.query,i=a.withoutFullscreenModal,s=a.includeFooter,o=a.featureHelpModalIaRedesign,l=a.isIAPhase1EnabledFlag;var c;if(l&&o){c=h.a.createElement(h.a.Fragment,null,h.a.createElement(x["a"],{query:n,onOpenLink:this.onOpenSearchLink,autoFocus:true,onQueryChange:this.onQueryChange}),s&&h.a.createElement(R["a"],null));return c}c=h.a.createElement(h.a.Fragment,null,h.a.createElement(A["c"],{className:"p-help_modal__shortcuts__button c-button--outline",type:"outline",onClick:this.onClickShortcutsButton,"data-qa":"help_modal_shortcuts_button"},h.a.createElement(M["b"],{type:"keyboard",className:"small_right_margin"}),h.a.createElement("strong",null,L.t("Keyboard shortcuts"))),h.a.createElement("div",{className:"display_flex align_items_baseline justify_content_between padding_top_200 p-help_modal__header"},h.a.createElement("h1",{className:"p-help_modal_title"},L.t("How can we help?")),h.a.createElement(D["a"],{className:"p-help_modal__browse display_flex align_items_end",onClick:this.onClickBrowseLink,"data-qa":"help_modal_browse"},h.a.createElement("span",{className:"p-help_modal__browse__text"},L.t("Browse all answers")),h.a.createElement(M["b"],{type:"arrow-large-right",className:"padding_left_100 p-help_modal__browse__icon"}))),h.a.createElement(x["a"],{query:n,onOpenLink:this.onOpenSearchLink,autoFocus:true,onQueryChange:this.onQueryChange}),s&&h.a.createElement(R["a"],null));if(i)return c;return h.a.createElement(j["a"],{isOpen:t,showCancelButton:false,showGoButton:false,onCancel:r,modalClasses:"p-help_modal",contentLabel:"help-modal","data-qa":"help_modal"},c)}}]);return t}(m["Component"]);B.displayName="HelpModal";B.defaultProps=U;var q=function e(t){return{isIAPhase1EnabledFlag:Object(k["e"])(t),featureHelpModalIaRedesign:Object(w["isFeatureEnabled"])(t,"feature_help_modal_ia_redesign")}};var G=Object(v["connect"])(q)(B);var H={query:"",showKeyboardShortcuts:f["noop"],onClose:f["noop"],withoutFullscreenModal:false,isIAPhase1Enabled:false,includeFooter:true};var W=function(e){p()(t,e);function t(){n()(this,t);return l()(this,u()(t).apply(this,arguments))}s()(t,[{key:"render",value:function e(){var t=this.props,a=t.trigger,r=t.clogger,n=t.onClose,i=t.team,s=t.tickets,o=t.query,l=t.withoutFullscreenModal,c=t.isIAPhase1Enabled,u=t.includeFooter;return h.a.createElement(G,{query:o,team:i,tickets:s,onClose:n,showKeyboardShortcuts:this.props.showKeyboardShortcuts,trigger:a,clogger:r,withoutFullscreenModal:l,isIAPhase1Enabled:c,includeFooter:u})}}]);return t}(m["Component"]);W.displayName="HelpModalContainer";W.defaultProps=H;var V=function e(t){return{clogger:Object(O["a"])({state:t}),team:Object(y["d"])(t),tickets:Object(g["getTicketCounts"])(t),isIAPhase1Enabled:Object(k["e"])(t)}};var K={showKeyboardShortcuts:_["i"]};var z=t["a"]=Object(v["connect"])(V,K)(W)},,,function(e,t,a){},,,,function(e,t,a){},,function(e,t,a){},,,function(e,t,a){"use strict";var r=a(0);var n=a(1);var i=a.n(n);var s=a(6);var o=a(152);var l=a(27);var c=a(12);var u=a(11);var d=new s["b"]("help");var p={tickets:{open:0,closed:0,unread:0},useNewMessaging:false,featureHelpModalIaRedesign:false};var m="HELP_MODAL_ACTION";var h="/help/requests";var v=function e(t,a){var r={action:"view_request_history",trigger:"click_view_request_history"};t.track(m,r);Object(l["openAuthenticatedUrlInBrowser"])(a,h)};var f=function e(t,a){var r={action:"view_new_replies",trigger:"click_view_new_replies"};t.track(m,r);Object(l["openAuthenticatedUrlInBrowser"])(a,h)};var b=function e(t,a){var r={action:"view_open_requests",trigger:"click_view_open_requests"};t.track(m,r);Object(l["openAuthenticatedUrlInBrowser"])(a,h)};var g=function e(t,a){t.track(m,{action:"view_requests",trigger:"click_view_requests"});Object(l["openAuthenticatedUrlInBrowser"])(a,h)};var _=function e(t,a,r){if(t.closed>0&&0===t.unread&&0===t.open)return i.a.createElement("div",null,i.a.createElement("span",null,d.t("No pending requests.")),i.a.createElement(o["a"],{className:"p-help_modal__requests",onClick:function e(){return v(a,r)},"data-qa":"help_modal_requests_closed"},i.a.createElement("span",{className:"p-help_modal__requests__message bold"},d.t("View your help request history"),".")));return null};var y=function e(t,a,r){if(t>0){var n=t>1?d.t("You have new replies to your help requests."):d.t("You have a new reply to your help request.");return i.a.createElement(o["a"],{className:"p-help_modal__requests",onClick:function e(){return f(a,r)},"data-qa":"help_modal_requests_unread"},i.a.createElement("span",{className:"p-help_modal__requests_badge unread"},t),i.a.createElement("span",{className:"p-help_modal__requests__message bold"},n))}return null};var O=function e(t,a,r){if(t>0){var n=t>1?d.t("You have open help requests."):d.t("You have an open help request.");return i.a.createElement(o["a"],{className:"p-help_modal__requests",onClick:function e(){return b(a,r)},"data-qa":"help_modal_requests_read"},i.a.createElement("span",{className:"p-help_modal__requests_badge read"},t),i.a.createElement("span",{className:"p-help_modal__requests__message read bold"},n))}return null};var k=function e(t){if(t.useNewMessaging){var a=function e(){if(t.tickets.open>0)return i.a.createElement("span",{className:"p-help_modal__requests_badge p-help_modal__requests_badge__redesign read"},t.tickets.open);if(t.tickets.unread>0)return i.a.createElement("span",{className:"p-help_modal__requests_badge p-help_modal__requests_badge__redesign unread"},t.tickets.unread);return null};return i.a.createElement("div",{className:"display_flex flex_direction_column"},i.a.createElement(o["a"],{className:"p-help_modal__requests",onClick:function e(){return g(t.clogger,t.team)},"data-qa":"help_modal_requests_all"},i.a.createElement("span",{className:"p-help_modal__requests__message p-help_modal__requests__message__redesign read bold"},t.featureHelpModalIaRedesign?d.t("Help requests"):""),a()))}return i.a.createElement("div",{className:"display_flex flex_direction_column"},_(t.tickets,t.clogger,t.team),i.a.createElement("div",{className:t.tickets.unread>0?"padding_top_50":""},y(t.tickets.unread,t.clogger,t.team)),i.a.createElement("div",{className:t.tickets.closed>0||t.tickets.unread>0?"padding_top_50":""},O(t.tickets.open,t.clogger,t.team)))};k.displayName="TicketsStatus";k.defaultProps=p;var E=function e(t){return{featureHelpModalIaRedesign:Object(u["isFeatureEnabled"])(t,"feature_help_modal_ia_redesign")}};t["a"]=Object(c["connect"])(E)(k)},,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.r(t);var r=a(61);var n=a(52);var i=a(785);Object(n["a"])("interop.getTelemeter",function(){return Object(r["c"])({state:TS.redux.getState()})});Object(n["a"])("interop.telemeter",{start:function e(){return i["a"].start()},sendDataAndEmptyQueue:function e(){return i["a"].sendDataAndEmptyQueue()}})},function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(12);var s=a(156);var o=a(26);var l=a(246);var c=a.n(l);var u=a(196);var d=a.n(u);var p=a(245);var m=a.n(p);var h=a(88);var v=a.n(h);var f=a(110);var b=a.n(f);var g=a(169);var _=a.n(g);var y=a(138);var O=a.n(y);var k=a(147);var E=a.n(k);var C=a(135);var S=a.n(C);var w=a(185);var j=a.n(w);var I=a(0);var T=a(13);var A=a.n(T);var N=a(2);var P=a(21);var M=a(302);var D=a(148);var x=a(20);var R=a(221);var F=a(129);var L=a(73);var U=a(11);var B=a(119);var q=a(87);var G=a(448);var H=a(491);var W=a(520);var V=a(285);var K=a(1324);var z=a(182);var Q=a(1061);var Y=a(1080);var J=a(1318);var X=a(18);var Z=a(452);var $=a(107);var ee=a(438);var te=a(16);var ae=Object(X["b"])("If All Threads is open and the thread is present, request it to be focused via the all-threads-store",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelId,n=a.threadTs;var i=Object($["getThreadKey"])(r,n);var s=Object(te["a"])({getState:t,label:"MAYBE-JUMP-THREAD"});var o=t();var l=Object(q["a"])(t());var c=Object(B["l"])(t())||!Object(B["g"])(t());if(l!==ee["a"].allThreads||!c){s.info("All Threads not open");return false}var u=Object(Z["getThreads"])(o);if(!u){s.info("No threads");return false}var d=Object(N["find"])(u,{threadKey:i});if(!d){s.info("Thread not found");return false}s.info("Requesting "+i);e(Object(Z["setFocusRequestedThreadKey"])(i));return true});ae.meta={name:"maybeFocusThreadInAllThreads",key:"actionsMaybeFocusThreadInAllThreadsMaybeFocusThreadInAllThreads",description:"If All Threads is open and the thread is present, request it to be focused via the all-threads-store"};ae.propTypes={channelId:I["default"].string,threadTs:I["default"].string};var re=ae;var ne=a(150);var ie=a(283);var se=a(80);var oe=a(122);var le=a(38);var ce=a(235);var ue=a(485);var de=a(41);var pe=a(9);var me=a(34);var he=a(6);var ve=a(77);var fe=a(35);var be=a(61);var ge=a(22);var _e=a(519);var ye=a(202);var Oe=a(1676);var ke=a(57);var Ee=a(2737);var Ce=a(1062);var Se=a(1834);var we=a(1183);var je=a(2717);var Ie=a(2006);var Te=a(457);var Ae=a(2007);var Ne=a(1964);var Pe=a(4114);var Me=a(1057);var De=a(646);var xe=a(922);var Re=a(2732);var Fe=a(2018);var Le=a(3783);var Ue=new he["b"]("flexpane");var Be={clientTheme:"light"};function qe(e){var t=e.clientTheme;var a="light"===t?cdn_url+"/80588/img/loading_hash_animation_@2x_vogue.gif":cdn_url+"/80588/img/loading_hash_animation_@2x_vogue_dark.gif";var r="light"===t?cdn_url+"/80588/img/loading_hash_animation_vogue.gif":cdn_url+"/80588/img/loading_hash_animation_vogue_dark.gif";var i=Ue.t("loading\u2026");var s=r+" 1x, "+a+" 2x";return n.a.createElement("div",{className:"p-flexpane_loading","data-qa":"flexpane_loading"},n.a.createElement("img",{className:"p-flexpane_loading__spinner",src:a,alt:i,srcSet:s}),n.a.createElement("br",null),i)}qe.displayName="FlexpaneLoading";qe.defaultProps=Be;var Ge=qe;var He=a(2798);var We=a(2769);var Ve=a(1452);var Ke=a(1453);var ze=a(1672);var Qe=a(1673);var Ye=a(2005);var Je=a(1240);var Xe=a(1988);var Ze=a(2697);var $e=a(1669);var et=a(165);var tt=a(2012);var at=a(166);var rt=a(43);var nt=a(54);var it=a(3789);var st=new he["b"]("threads");var ot={channelId:void 0,threadTs:void 0,isMpim:false,numMpimMembers:0,mpimName:void 0};function lt(e){var t=e.channelId,a=e.threadTs,r=e.isMpim,i=e.numMpimMembers,s=e.mpimName;var o;o=r?n.a.createElement("div",{className:"p-threads_flexpane__header_channel_name"},n.a.createElement(nt["c"],{tip:s},n.a.createElement("span",null,st.t("Direct message with {count} others",{count:i})))):n.a.createElement(at["a"],{channelId:t,className:"p-threads_flexpane__header_channel_name",inline:true,iconProps:{inherit:true}});return n.a.createElement(rt["a"],{className:"p-threads_flexpane__header_permalink",href:Object(de["constructMsgPermalink"])(t,a)},o)}lt.displayName="Header";lt.defaultProps=ot;function ct(e,t){var a=t.channelId;var r=Object(x["e"])(e,a);var n={};if(r&&"mpim"===Object(pe["getChannelType"])(r)){n.isMpim=true;var i=Object(pe["getMemberIdsFromMpim"])(r)||[];n.numMpimMembers=i.length-1;n.mpimName=Object(pe["getDisplayNameForChannel"])(e,r)}return n}var ut=Object(i["connect"])(ct)(lt);var dt=a(3791);var pt=new he["b"]("threads");var mt={replyCount:0};function ht(e){var t=e.replyCount;var a=Math.max(1,t);var r=pt.t("{count, plural, =1 {# reply} other {# replies}}",{count:a,fallbackHash:"45d5eeb729c4b8d8b91f810f9387e5a97b3e6ce5"});return n.a.createElement("div",{className:"p-threads_flexpane__separator"},n.a.createElement("span",{className:"p-threads_flexpane__separator_count"},r),n.a.createElement("hr",{className:"p-threads_flexpane__separator_line"}))}ht.displayName="Separator";ht.defaultProps=mt;function vt(e,t){var a=t.channelId,r=t.threadTs;var n=Object(L["a"])(e,a,r);return{replyCount:Object(de["getReplyCount"])(n)}}var ft=Object(i["connect"])(vt)(ht);var bt=a(24);var gt=a(99);var _t=a(2483);var yt=new he["b"]("threads");var Ot={tryAgain:N["noop"]};function kt(e){var t=e.tryAgain;return n.a.createElement("div",{className:"p-threads_flexpane__error","data-qa":"threads_flexpane_error"},n.a.createElement("div",{className:"p-threads_flexpane__error_contents"},n.a.createElement("div",{className:"p-threads_flexpane__error_emoji"},n.a.createElement(gt["b"],{text:":mag:",emojiSize:gt["a"].LARGE})),n.a.createElement("p",{className:"p-threads_flexpane__error_header"},yt.t("Couldn't load thread")),n.a.createElement("p",{className:"p-threads_flexpane__error_body"},yt.rt("If the problem persists, please <a>drop us a line.</a>",null,function(e){var t=e.text,a=e.key;return n.a.createElement(rt["a"],{href:"https://slack.com/help/contact",rel:"noopener noreferrer",key:a},t)})),n.a.createElement(bt["d"],{type:"primary",onClick:t,"data-qa":"threads_flexpane_error_try_again"},yt.t("Try Again"))))}kt.displayName="ThreadsError";kt.defaultProps=Ot;var Et=kt;var Ct=a(144);var St=a(590);var wt=a(521);var jt=a(838);var It=a(433);var Tt=a(515);var At=a(861);var Nt=a(445);var Pt=a(862);var Mt=a(1325);var Dt=a(1056);var xt=a(816);var Rt=a(911);var Ft=a(1341);var Lt=a(750);var Ut=a(1150);var Bt=a(1326);var qt=a(1327);var Gt=a(2337);var Ht=a(2482);var Wt=new he["b"]("message_kit");var Vt={className:void 0,highlight:void 0,clearHighlight:void 0,focused:false,renderActionsOffscreen:false,parentId:void 0};var Kt=function(e){j()(t,e);function t(){b()(this,t);return _()(this,O()(t).apply(this,arguments))}S()(t,[{key:"render",value:function e(){var t=this.props,a=t.msg,r=t.highlight,i=t.clearHighlight,s=t.focused,o=t.renderActionsOffscreen,l=t.parentId;var c=A()("c-message_kit__message","c-message_kit__thread_message","c-message_kit__thread_message--root",this.props.className);return n.a.createElement(Mt["a"],{msg:a},n.a.createElement(Dt["a"],{msg:a,className:c,highlight:r,clearHighlight:i},n.a.createElement(xt["a"],{hovered:s},n.a.createElement(Rt["a"],{msg:a,showComment:false,showShare:false,showJump:true,messageContainerType:ge["MESSAGE_CONTAINERS"].THREADS_FLEXPANE,position:"inside",renderOffscreen:o,parentId:l},n.a.createElement(Ut["a"],{msg:a},n.a.createElement(Ft["a"],{msg:a},n.a.createElement(Lt["a"],{light:n.a.createElement(St["a"],{msg:a})},n.a.createElement(Bt["a"],{msg:a},n.a.createElement(wt["a"],{msg:a}),"\xa0",n.a.createElement(jt["a"],{msg:a,full:true,clickable:true},Wt.t("Open in channel")),n.a.createElement("br",null),n.a.createElement(qt["a"],null,n.a.createElement(It["a"],{msg:a}),n.a.createElement(Tt["a"],{msg:a,blocksContainerContext:Ct["a"].threads_flexpane}),n.a.createElement(Nt["b"],{msg:a}),n.a.createElement(At["a"],{msg:a,blocksContainerContext:Ct["a"].threads_flexpane}),n.a.createElement(Pt["a"],{msg:a}))))))))))}}]);return t}(r["PureComponent"]);Kt.displayName="ThreadRootMessage";Kt.defaultProps=Vt;var zt=a(1698);var Qt={className:void 0,highlight:void 0,clearHighlight:void 0,focused:false,renderActionsOffscreen:false,parentId:void 0,isNewReply:false};var Yt=function(e){j()(t,e);function t(){b()(this,t);return _()(this,O()(t).apply(this,arguments))}S()(t,[{key:"render",value:function e(){var t=this.props,a=t.msg,r=t.highlight,i=t.clearHighlight,s=t.focused,o=t.renderActionsOffscreen,l=t.parentId,c=t.isNewReply;var u=A()("c-message_kit__message","c-message_kit__thread_message",{"c-message_kit__thread-message--new_reply":c},this.props.className);return n.a.createElement(Mt["a"],{msg:a},n.a.createElement(Dt["a"],{msg:a,className:u,highlight:r,clearHighlight:i},n.a.createElement(xt["a"],{hovered:s},n.a.createElement(Rt["a"],{msg:a,showComment:false,showShare:false,messageContainerType:ge["MESSAGE_CONTAINERS"].THREADS_FLEXPANE,renderOffscreen:o,parentId:l},n.a.createElement(Ft["a"],{msg:a,showBroadcast:true},n.a.createElement(Lt["a"],{light:n.a.createElement(St["a"],{msg:a})},n.a.createElement(Bt["a"],{msg:a},n.a.createElement(wt["a"],{msg:a}),"\xa0\xa0",n.a.createElement(jt["a"],{msg:a,relative:true}),n.a.createElement("br",null),n.a.createElement(qt["a"],null,n.a.createElement(zt["a"],{msg:a},n.a.createElement(It["a"],{msg:a}),n.a.createElement(Tt["a"],{msg:a,blocksContainerContext:Ct["a"].threads_flexpane}),n.a.createElement(Nt["b"],{msg:a}),n.a.createElement(At["a"],{msg:a,blocksContainerContext:Ct["a"].threads_flexpane})),n.a.createElement(Pt["a"],{msg:a})))))))))}}]);return t}(r["PureComponent"]);Yt.displayName="ThreadReplyMessage";Yt.defaultProps=Qt;var Jt=a(2740);function Xt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function Zt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Xt(Object(a),true).forEach(function(t){v()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Xt(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var $t=new he["b"]("threads");var ea=Object(xe["b"])(Kt);var ta=Object(xe["b"])(Yt);var aa={threadTs:void 0,channelId:void 0,teamId:void 0,subscribed:void 0,lastRead:void 0,maxMarkableTs:void 0,oldest:void 0,latest:void 0,timestamps:[],reachedStart:false,reachedEnd:false,prevReachedEnd:false,userHasUnreadThreads:false,fileId:void 0,comments:[],messages:{},startTs:void 0,highlightTs:void 0,highlightKey:void 0,showDragOverlay:false,scrollMarkTs:void 0,scrollMarkOffset:0,serializationKey:void 0,clearSerializedDataForKey:N["noop"],requestHistory:N["noop"],clearHighlight:N["noop"],primaryView:void 0,windowFocused:false,userAttention:"",featureAriaApplicationMode:false,clientTheme:"light",logInfo:N["noop"],logWarn:N["noop"],logError:N["noop"],clogger:{track:N["noop"]},telemeter:{count:N["noop"]},jumpToMessage:N["noop"],setFocusRequestedTs:N["noop"],focusRequested:void 0,setFocusRequested:N["noop"],maybeFocusThreadInAllThreads:function e(){return false},maybeFocusThreadInAllUnreads:N["noop"],focusInput:null,setFocusInput:N["noop"],makeMessageSummary:N["noop"],channel:void 0,channelIsYou:false,channelIsMuted:false,channelHasDraft:false,channelBadgeCount:0,isChannelUnavailable:false,unavailableTeamId:"",isContextBarShowing:false,readOnly:false,featureAnnounceOnly:false,isFileExpanding:false,featureOfflineMode:false,isOffline:false,truncateThreadHistory:N["noop"],impressionLoggingWebGroup:"control",hasReceivedThreadedMessage:true,setUserPrefByApi:N["noop"],featureMessageNavigationShortcuts:false,featureContextualMessageShortcuts:false,featureContextBarScalable:false,channelName:void 0,isChannelMuted:false,inUnreadThreadsExperiment:false,setThreadLastRead:N["noop"],isThreadMarkedUnread:false,setThreadMarkedAsUnread:N["noop"]};var ra="THREAD-FLEXPANE";var na=function(e){j()(t,e);S()(t,null,[{key:"getRowsAndKeys",value:function e(t,a){var r=t.threadTs,n=t.reachedStart,i=t.reachedEnd,s=t.prevReachedEnd,o=t.timestamps,l=t.comments,c=t.messages;var u=a.commentsExpanded,d=a.degraded;var p=[];var m=[];if(Object(N["isEmpty"])(o))return{rows:m,keys:p};var h=Object(N["first"])(o)===r;var v=Object(N["without"])(o,r);if(!n&&!d){p.push("loading-start-"+Object(N["first"])(v));m.push({type:"loading"})}if(h){p.push(r);m.push({type:"root",ts:r});if(!Object(N["isEmpty"])(l)){p.push("comments-toggle");m.push({type:"comments-toggle"});u&&l.forEach(function(e){p.push(e.id);m.push({type:"comment",comment:e})})}if(v.length){p.push("separator");m.push({type:"separator"})}}v.forEach(function(e,t){var a=c[e];if(Object(de["isHiddenInThread"])(a))return;p.push(e);m.push({type:"reply",ts:e,prevTs:v[t-1]})});if(i||s){p.push("input");m.push({type:"input"})}else if(!d){p.push("loading-end");m.push({type:"loading"})}return{rows:m,keys:p}}}]);function t(e){var a;b()(this,t);a=_()(this,O()(t).call(this,e));a.requestHistory=a.requestHistory.bind(E()(a));a.renderRow=a.renderRow.bind(E()(a));a.renderList=a.renderList.bind(E()(a));a.tryAgain=a.tryAgain.bind(E()(a));a.toggleComments=a.toggleComments.bind(E()(a));a.isFocusableItem=a.isFocusableItem.bind(E()(a));a.onFocusEnter=a.onFocusEnter.bind(E()(a));a.onFocusLeave=a.onFocusLeave.bind(E()(a));a.clogThreadEvent=a.clogThreadEvent.bind(E()(a));a.onArrowKeyLeft=a.onArrowKeyLeft.bind(E()(a));a.shouldIgnoreArrowKeys=a.shouldIgnoreArrowKeys.bind(E()(a));a.onKeyDown=a.onKeyDown.bind(E()(a));a.getAriaLabelForRow=a.getAriaLabelForRow.bind(E()(a));a.renderBody=a.renderBody.bind(E()(a));a.renderSubtitle=a.renderSubtitle.bind(E()(a));a.focus=a.focus.bind(E()(a));a.blur=a.blur.bind(E()(a));a.onItemTabWithin=a.onItemTabWithin.bind(E()(a));a.onVisibleRowsChanged=a.onVisibleRowsChanged.bind(E()(a));a.onItemFocusEnter=a.onItemFocusEnter.bind(E()(a));a.onUpArrowInEmptyInput=a.onUpArrowInEmptyInput.bind(E()(a));a.keys=null;a.rows=null;a.historyRateLimiter=new Ye["a"];a.listRef=n.a.createRef();a.flexpane=n.a.createRef();a.state={degraded:Object(Ae["a"])(),commentsExpanded:false,hasKeyboardFocus:false,errored:false};e.scrollMarkTs||e.scrollMarkOffset?a.initialScrollMark={mark:e.scrollMarkTs,offset:e.scrollMarkOffset}:a.initialScrollMark={};a.attachMessageImpressionsLogger(e);return a}S()(t,[{key:"componentDidMount",value:function e(){this.props.setThreadMarkedAsUnread(false);this.checkUnreads();Object(me["a"])()&&this.maybeFocus();var t=this.props,a=t.scrollMarkTs,r=t.scrollMarkOffset,n=t.serializationKey;(a||r)&&n&&this.props.clearSerializedDataForKey(n);this.props.hasReceivedThreadedMessage||this.props.setUserPrefByApi({pref:"has_received_threaded_message",value:true})}},{key:"UNSAFE_componentWillReceiveProps",value:function e(t){var a=Object($["getThreadKey"])(this.props.channelId,this.props.threadTs);var r=Object($["getThreadKey"])(t.channelId,t.threadTs);this.state.errored&&a!==r&&this.setState(function(e){return Zt({},e,{errored:false})});this.props.teamId!==t.teamId&&this.attachMessageImpressionsLogger(t)}},{key:"shouldComponentUpdate",value:function e(t,a){if(!Object(et["a"])(this.state,a))return true;var r=this.props,n=r.messages,i=m()(r,["messages"]);var s=t.messages,o=m()(t,["messages"]);if(!Object(et["a"])(i,o))return true;return false}},{key:"componentDidUpdate",value:function e(t){this.checkUnreads();var a=this.props,r=a.threadTs,n=a.channelId;var i=Object($["getThreadKey"])(n,r);var s=t.threadTs,o=t.channelId;var l=Object($["getThreadKey"])(o,s);i!==l&&this.historyRateLimiter.reset();l&&i!==l&&this.props.truncateThreadHistory({threadKey:l});this.maybeFocus()}},{key:"componentDidCatch",value:function e(t){this.setState(function(){return{errored:true}});this.props.logError(ra,"ThreadsFlexpane componentDidCatch","threads_flexpane_did_catch",t)}},{key:"componentWillUnmount",value:function e(){var t=this.props,a=t.focusInput,r=t.channelId,n=t.threadTs;a===Object($["getThreadKey"])(r,n)&&this.props.setFocusInput(null);this.props.truncateThreadHistory({threadKey:Object($["getThreadKey"])(r,n)});try{this.messageImpressionLogger.flushAllVisibleMessages()}catch(e){this.props.logError(ra,"threads_flexpane_unable_log_message_impressions","ThreadsFlexpane unable to log message impressions",e)}delete this.messageImpressionLogger}},{key:"onArrowKeyLeft",value:function e(){var t=this;var a=this.props,r=a.channelId,n=a.threadTs,i=a.primaryView;if(Object(N["includes"])([Ce["a"].allUnreads,"Punreads"],i)){this.props.maybeFocusThreadInAllUnreads(Object($["getThreadKey"])(r,n));return Promise.resolve()}if(i===Ce["a"].allThreads){var s=this.props.maybeFocusThreadInAllThreads({channelId:r,threadTs:n});if(s)return Promise.resolve()}return this.props.jumpToMessage({channelId:this.props.channelId,ts:this.props.threadTs}).then(function(){t.props.setFocusRequestedTs(t.props.threadTs)})}},{key:"onFocusEnter",value:function e(t){var a=this;this.setState(function(){return{hasKeyboardFocus:t.isKeyboardFocus}},function(){var e=a.props.focusRequested;if(!e)return;a.props.setFocusRequested(null)})}},{key:"onFocusLeave",value:function e(){this.setState(function(){return{hasKeyboardFocus:false}})}},{key:"onItemFocusEnter",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var a=t.id,r=t.relatedTarget;if(!this.props.featureMessageNavigationShortcuts)return;this.state.hasKeyboardFocus||this.setState(function(){return{hasKeyboardFocus:true}});"input"===a&&r&&this.focusInput()}},{key:"onItemTabWithin",value:function e(){var t=this.flexpane.current;t&&t.setInitialActiveSection()}},{key:"onKeyDown",value:function e(t){if(!Object(Ee["a"])({e:t,isMenuVisible:Object(ke["g"])()}))return;var a=this.listRef&&this.listRef.current&&this.listRef.current.list;a&&a.focusOnKey("input")}},{key:"onUpArrowInEmptyInput",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.cmd,r=void 0!==a&&a;var n=this.props.featureMessageNavigationShortcuts;!r&&n&&this.focusLastMessage()}},{key:"onVisibleRowsChanged",value:function e(t,a){var r=this;try{this.messageImpressionLogger.setCurrentlyVisibleMessages(a.map(function(e){return r.props.messages[e]}))}catch(e){this.props.logError(ra,"threads_flexpane_unable_log_message_impressions","ThreadsFlexpane unable to log message impressions",e)}}},{key:"getAriaLabelForRow",value:function e(t){var a=t.index;if(!this.props.makeMessageSummary)return;var r=this.rows[a];if(!r||!r.type)return;if("root"!==r.type&&"reply"!==r.type)return;var n=this.props.makeMessageSummary({channelId:this.props.channelId,ts:r.ts,hasFocus:this.state.hasKeyboardFocus,day:{ts:r.ts},viewContext:ge["MESSAGE_CONTAINERS"].THREADS_FLEXPANE});return{"aria-label":n}}},{key:"attachMessageImpressionsLogger",value:function e(t){this.messageImpressionLogger=new ze["a"]({teamId:t.teamId,experimentGroup:t.impressionLoggingWebGroup,clogger:t.clogger,messageViewLocation:Qe["a"].THREAD})}},{key:"blur",value:function e(){var t=this.listRef.current&&this.listRef.current.list;t&&t.blur()}},{key:"checkUnreads",value:function e(){var t=this.props,a=t.channelId,r=t.threadTs,n=t.subscribed,i=t.lastRead,s=t.reachedEnd,o=t.maxMarkableTs,l=t.userAttention,c=t.userHasUnreadThreads,u=t.logInfo;if(!n||!s||!o)return;var d=Object($["getThreadKey"])(a,r);if(!i||i<o){if(Object(me["a"])()){if(l!==ue["a"].MESSAGE_PANE){u(ra,"Not marking "+d+" to "+o+" because "+l);return}}else if(!Object(ce["f"])()){u(ra,"Not marking "+d+" to "+o+" because "+Object(ce["c"])());return}if(!c){u(ra,"Not marking "+d+" to "+o+" because no unread threads yet");return}if(!this.props.isThreadMarkedUnread){u(ra,"Marking "+Object($["getThreadKey"])(a,r)+": "+o);this.props.setThreadLastRead({channelId:a,threadTs:r,lastRead:o,read:true,reason:"mark-thread-as-read-from-flexpane"})}}}},{key:"checkUserAttentionIsOnChat",value:function e(){if(Object(me["a"])())return this.props.userAttention===ue["a"].MESSAGE_PANE;return Object(ce["f"])()}},{key:"clogThreadEvent",value:function e(t){var a=t.event,r=t.metadata;var n=this.props,i=n.channelId,s=n.threadTs,o=n.clogger;o.track(a,Zt({parent_message_id:s,channel_id:i,is_threads_view:0,is_flexpane:1},r))}},{key:"focus",value:function e(){var t=this.listRef.current&&this.listRef.current.list;if(!t)return;this.setState(function(){return{hasKeyboardFocus:true}});var a=t.getInitialActiveItem();if(a){t.scrollToKey(a);t.setActiveItem(a);return}t.focus()}},{key:"focusInput",value:function e(){var t=Object(ye["a"])({viewContext:ge["MESSAGE_CONTAINERS"].THREADS_FLEXPANE,channelId:this.props.channelId,threadTs:this.props.threadTs});if(t){var a=function e(){t.focus()};Object(ve["c"])()?setTimeout(a,0):a()}}},{key:"focusLastMessage",value:function e(){var t=Object(N["findLast"])(this.rows,{type:"reply"})||Object(N["find"])(this.rows,{type:"root"});t&&this.listRef.current.list.focusOnKey(t.ts)}},{key:"isFocusableItem",value:function e(t){var a=t.index;var r=this.rows[a];if(!r)return false;if("loading"===r.type)return false;if("separator"===r.type)return false;if("input"===r.type&&!this.props.featureMessageNavigationShortcuts)return false;return true}},{key:"isListScrollable",value:function e(){var t=this.listRef.current&&this.listRef.current.list;var a=t&&t.layout.getHeightValidity("input");return!a||t.getContentHeight()>t.getContainerHeight()}},{key:"maybeFocus",value:function e(){var t=this.props,a=t.focusRequested,r=t.timestamps,n=t.channelId,i=t.threadTs,s=t.featureContextualMessageShortcuts;if(!a||Object(N["isEmpty"])(r))return;var o=a===Object($["getThreadKey"])(n,i);var l=this.keys&&-1!==this.keys.indexOf(a);(o||s&&l)&&this.focus()}},{key:"requestHistory",value:function e(t){var a=this;var r=t.oldest,n=t.latest;var i=this.props,s=i.channelId,o=i.threadTs,e=i.requestHistory,l=i.logWarn,c=i.telemeter;if(this.historyRateLimiter.isRequestPending({oldest:r,latest:n}))return false;if(this.historyRateLimiter.shouldPreventHistoryRequest({oldest:r,latest:n})){if(this.beaconedRateLimit)l(ra,"Rate-limited thread: "+Object($["getThreadKey"])(s,o));else{c.count("rate_limited_thread");this.beaconedRateLimit=true}return false}this.beaconedRateLimit=false;var u=e({oldest:r,latest:n,channelId:s,threadTs:o});u&&this.historyRateLimiter.logHistoryRequest({oldest:r,latest:n,promise:u});return u.then(function(e){a.setState(function(e){return Zt({},e,{errored:false})});return e}).catch(function(e){a.setState(function(e){return Zt({},e,{errored:true})});return Promise.reject(e)})}},{key:"shouldIgnoreArrowKeys",value:function e(t){if(Object(_e["a"])(t.target))return true;if(!this.checkUserAttentionIsOnChat())return true;return!this.state.hasKeyboardFocus}},{key:"toggleComments",value:function e(){var t=this.state.commentsExpanded;this.setState(function(){return{commentsExpanded:!t}})}},{key:"tryAgain",value:function e(){this.setState(function(e){return Zt({},e,{errored:false})})}},{key:"renderBody",value:function e(){var t=this.props,a=t.channelId,r=t.threadTs,i=t.timestamps,s=t.showDragOverlay,o=t.featureOfflineMode,l=t.isOffline,c=t.clientTheme,u=t.featureContextBarScalable,d=t.isContextBarShowing;var p=this.state.errored;var m=A()("p-threads_flexpane",{"p-threads_flexpane--context_bar_showing":u&&d});if(o&&l&&Object(N["isEmpty"])(i))return n.a.createElement("div",{className:m},n.a.createElement(Ve["a"],null));if(p)return n.a.createElement("div",{className:m},n.a.createElement(Et,{tryAgain:this.tryAgain}));var h=n.a.createElement(n.a.Fragment,null,this.renderMessageList(),Object(N["isEmpty"])(i)&&n.a.createElement(Ge,{clientTheme:c}),s&&n.a.createElement(tt["a"],null));return Object(me["a"])()?n.a.createElement(Pe["b"],{location:Pe["a"].THREAD,channelId:a,threadTs:r,className:m,viewContext:ge["MESSAGE_CONTAINERS"].THREADS_FLEXPANE,elementProps:{onKeyDown:this.onKeyDown}},h):n.a.createElement("div",{className:"p-threads_flexpane",onKeyDown:this.onKeyDown},h)}},{key:"renderList",value:function e(a){var r=this;var i=t.getRowsAndKeys(this.props,this.state),s=i.rows,o=i.keys;this.rows=s;this.keys=o;var l=this.state.degraded?Ie["a"]:Te["a"];var c=this.props,u=c.reachedEnd,p=c.reachedStart,m=c.featureAriaApplicationMode,h=c.channel,v=c.channelId,f=c.channelIsYou,b=c.channelIsMuted,g=c.channelHasDraft,_=c.channelBadgeCount,y=c.threadTs,O=c.readOnly,k=c.featureAnnounceOnly,E=c.featureOfflineMode,C=c.isOffline;var S=[{keys:["left"],handler:this.onArrowKeyLeft,filter:this.shouldIgnoreArrowKeys}];var w=Object(Oe["a"])({type:Object(pe["getChannelType"])(h),displayName:Object(pe["getDisplayName"])(h),isShared:Object(pe["isExternallySharedChannel"])(h),isOrgShared:Object(pe["isOrgShared"])(h),hasUnreads:!!Object(pe["getUnreadCount"])(h),isArchived:Object(pe["isArchived"])(h),unreadCount:Object(pe["getUnreadCount"])(h),isYou:f,isMuted:b,hasDraft:g,badgeCount:_,isSelected:false,userActive:false,isTyping:false,isThread:true,canPost:!O,featureAnnounceOnly:k});var j=function(){if(!r.rows.length)return null;var e=r.rows.filter(function(e){return"reply"===e.type});var t=e[0];return t?t.ts:y}();var I=Object($["makeIdForThreadList"])(Object($["getThreadKey"])(v,y));return n.a.createElement(De["a"],null,function(e){var t=e.measureRef,i=e.width,s=e.height;return n.a.createElement("div",{className:"flex_one no_min_height",ref:t},n.a.createElement(l,d()({},a,{id:I,keys:o,width:i,height:s,rowRenderer:r.renderRow,isFocusableItem:r.isFocusableItem,ignoreKeyCommandsOnInputs:!r.props.featureMessageNavigationShortcuts,initialActiveItem:j,onFocusEnter:r.onFocusEnter,onItemTabWithin:r.onItemTabWithin,onItemFocusEnter:r.onItemFocusEnter,onFocusLeave:r.onFocusLeave,reachedEnd:u,reachedStart:p,"aria-label":w,getPropsForItem:r.getAriaLabelForRow,persistentKeys:["input"],keyCommands:S,useAriaApplicationMode:m,featureOfflineMode:E,isOffline:C,shouldIgnoreArrowKeys:r.shouldIgnoreArrowKeys})))})}},{key:"renderMessageList",value:function e(){if(this.props.isChannelUnavailable){var t=this.props,a=t.unavailableTeamId,r=t.channelId;return n.a.createElement(We["a"],{unavailableTeamId:a,channelId:r,isThread:true})}var i=this.props,s=i.channelId,o=i.threadTs,l=i.oldest,c=i.latest,u=i.timestamps,p=i.startTs,m=i.highlightTs,h=i.highlightKey,v=i.reachedStart,f=i.reachedEnd,b=i.comments,g=i.clientTheme,_=i.lastRead;if(!s||!o)return null;var y=this.state.commentsExpanded;var O={comments:b,commentsExpanded:y,highlightTs:m,highlightKey:h,lastRead:_};var k=this.initialScrollMark,E=k.mark,C=k.offset;return n.a.createElement(je["a"],d()({oldest:l,latest:c,timestamps:u,listRenderer:this.renderList,startTs:E||p,startTsOffset:C,highlightKey:h,requestHistory:this.requestHistory,reachedStart:v,reachedEnd:f,isFileExpanding:this.props.isFileExpanding,clientTheme:g,ref:this.listRef},O,{key:Object($["getThreadKey"])(s,o),onVisibleRowsChanged:this.onVisibleRowsChanged}))}},{key:"renderRow",value:function e(t,a){var r=a.hasFocus,i=a.itemId;var s=this.props,o=s.channelId,l=s.highlightTs,c=s.threadTs,u=s.comments,d=s.fileId,p=s.focusInput,m=s.featureOfflineMode,h=s.isOffline,v=s.lastRead;var f=this.state.commentsExpanded;var b=this.rows[t];if(!b)return null;var g=this.state.hasKeyboardFocus;switch(b.type){case"separator":return n.a.createElement(ft,{channelId:o,threadTs:c});case"root":return n.a.createElement(ea,{channelId:o,ts:b.ts,highlight:b.ts===l,clearHighlight:this.props.clearHighlight,focused:r,renderActionsOffscreen:g,parentId:i});case"reply":return n.a.createElement(ta,{channelId:o,ts:b.ts,highlight:b.ts===l,clearHighlight:this.props.clearHighlight,focused:r,renderActionsOffscreen:g,parentId:i,isNewReply:this.props.inUnreadThreadsExperiment&&v<b.ts});case"input":return n.a.createElement(He["a"],{channelId:o,threadTs:c,focusInputOnMount:p===Object($["getThreadKey"])(o,c)&&!this.isListScrollable(),viewContext:ge["MESSAGE_CONTAINERS"].THREADS_FLEXPANE,clogThreadEvent:this.clogThreadEvent,onFocus:this.onItemTabWithin,onUpArrow:this.onUpArrowInEmptyInput});case"comments-toggle":return n.a.createElement(Re["a"],{commentCount:u.length,expanded:f,toggleList:this.toggleComments});case"comment":return n.a.createElement(Fe["a"],{comment:b.comment,fileId:d});case"loading":if(m&&h)return n.a.createElement(Ke["a"],null);return n.a.createElement("div",{className:"p-threads_flexpane__loading"},$t.t("Loading messages..."));default:return null}}},{key:"renderSubtitle",value:function e(){var t=this.props,a=t.channelId,r=t.threadTs;return n.a.createElement(ut,{channelId:a,threadTs:r})}},{key:"renderAriaLabel",value:function e(){var t=this.props,a=t.channel,r=t.channelName,n=t.isChannelMuted;var i=Object(pe["isStarred"])(a);var s=Object(pe["isArchived"])(a);var o=Object(pe["isIm"])(a);var l=Object(pe["isMpim"])(a);if(o)return $t.t("Thread in conversation with {memberName}",{memberName:Object($e["a"])({name:r,isStarred:i,isMuted:n}),fallbackHash:"7863f7503e5377891a3b7452c7d6cc377d443fe7"});if(l)return $t.t("Thread in conversation with {mpimName}",{mpimName:Object(Ze["a"])({name:r,isStarred:i,isMuted:n}),fallbackHash:"7863f7503e5377891a3b7452c7d6cc377d443fe7"});return $t.t("Thread in {channelName}",{channelName:Object(Xe["a"])({channelName:r,isPrivate:Object(pe["isPrivateChannel"])(a),isStarred:i,isMuted:n,isArchived:s}),fallbackHash:"7863f7503e5377891a3b7452c7d6cc377d443fe7"})}},{key:"render",value:function e(){var t=this.props,a=t.channelId,r=t.threadTs;if(!a||!r)return null;var i=Object(me["a"])()?N["noop"]:this.focus;var s=Object(me["a"])()?N["noop"]:this.blur;return n.a.createElement(Me["b"],{"aria-label":this.renderAriaLabel(),ref:this.flexpane,focus:this.focus,title:$t.t("Thread"),renderSubtitle:this.renderSubtitle,renderBody:this.renderBody,flexName:"convo",viewId:ge["MESSAGE_CONTAINERS"].THREADS_FLEXPANE,kbNavOrder:Object(me["a"])()?void 0:4,bodyClassName:"p-threads_flexpane_container",onFocus:i,onBlur:s})}}]);return t}(r["Component"]);na.displayName="ThreadsFlexpane";na.defaultProps=aa;var ia=Object(we["a"])(na,{getStateToSerialize:N["noop"],getDerivedProps:function e(t){var a=t.instance;if(!a.listRef||!a.listRef.current)return{};var r=a.listRef.current.getScrollmark(),n=r.mark,i=r.offset,s=r.stickToBottom;return{scrollMarkTs:s?"input":n,scrollMarkOffset:s?0:i}}});var sa=function e(t,a){var r=Object(B["f"])(t)[0];var n=(r||"").split("-"),i=c()(n,2),s=i[0],o=i[1];var l=a.threadTs||o;var u=a.channelId||s;var d=Object(x["e"])(t,u);if(!l||!u)return{};var p=Object(G["getStartTs"])(t)||l;var m=Object(G["getHighlight"])(t),h=m.highlightTs,v=m.highlightKey;var f=Object($["getThreadKey"])(u,l);var b=Object(D["getPotentiallyOutdatedTimestamps"])(t,f,p),g=b.start,_=b.end,y=b.timestamps,O=b.reachedStart,k=b.reachedEnd,E=b.prevReachedEnd;var C=Object(H["getSubscriptionState"])(t,{channelId:u,ts:l});var S;var w;var j=false;var I=Object(L["a"])(t,u,l,j);if(I&&I.files&&1===I.files.length){w=I.files[0];var T=Object(F["getFileById"])(t,w);T&&(S=T.comments)}var A={};Object(me["a"])()?A.userAttention=Object(ue["c"])(t):A.windowFocused=Object(M["isWindowFocused"])(t);var N=Object(te["a"])({state:t});var K=Object(fe["a"])({state:t});var z=Object(Je["isAnyFileExpanding"])(t);var Q=Object(pe["getDisplayNameForChannel"])(t,d,{publicChannelIncludeHashSign:false});var Y=Object(R["isChannelMutedById"])(t,u);return Zt({isFileExpanding:z,threadTs:l,channelId:u,teamId:Object(P["b"])(t),channel:d,subscribed:C&&C.subscribed,lastRead:C&&C.lastRead,maxMarkableTs:Object(Jt["a"])(t,u,y),oldest:g,latest:_,timestamps:y,reachedStart:O,reachedEnd:k,prevReachedEnd:E,userHasUnreadThreads:Object(U["isFeatureEnabled"])(t,"feature_incremental_unread_counts")?Object(V["hasUnreadThreads"])(t):Object(W["hasUnreadThreads"])(t),fileId:w,comments:S,messages:Object(L["b"])(t,u)||{},isContextBarShowing:Object(U["isFeatureEnabled"])(t,"feature_context_bar_scalable")&&!!Object(Se["b"])(t,u),startTs:p,highlightTs:h,highlightKey:v,showDragOverlay:Object(G["getShowDragOverlay"])(t),primaryView:Object(q["a"])(t)},A,{featureAriaApplicationMode:Object(U["isFeatureEnabled"])(t,"feature_aria_application_mode"),logInfo:N.info,logWarn:N.warn,logError:N.error,clogger:K,telemeter:Object(be["c"])({state:t}),channelIsYou:Object(pe["isYou"])(t,d),channelIsMuted:Object(R["isChannelMutedById"])(t,u),channelHasDraft:Object(pe["getHasDraft"])(t,u),channelBadgeCount:Object(x["d"])(t,d),focusRequested:Object(G["getFocusRequested"])(t),focusInput:Object(G["getFocusInput"])(t),isChannelUnavailable:Object(pe["isUnavailable"])(t,d),unavailableTeamId:Object(pe["getUnavailableTeamId"])(t,d),readOnly:Object(pe["isReadOnly"])(t,d),featureAnnounceOnly:Object(U["isFeatureEnabled"])(t,"feature_announce_only"),featureOfflineMode:Object(U["isFeatureEnabled"])(t,"feature_offline_mode"),isOffline:!Object(ne["c"])(t),clientTheme:Object(ie["getClientTheme"])(t),inUnreadThreadsExperiment:"treatment"===Object(se["getGroupForUser"])(t,"nova_unread_threads"),impressionLoggingWebGroup:Object(se["getGroupForUser"])(t,"impression_logging_web"),hasReceivedThreadedMessage:Object(le["k"])(t,"has_received_threaded_message"),featureMessageNavigationShortcuts:Object(U["isFeatureEnabled"])(t,"feature_message_navigation_shortcuts"),featureContextualMessageShortcuts:Object(U["isFeatureEnabled"])(t,"feature_contextual_message_shortcuts"),featureContextBarScalable:Object(U["isFeatureEnabled"])(t,"feature_context_bar_scalable"),channelName:Q,isChannelMuted:Y,isThreadMarkedUnread:Object(G["isThreadMarkedUnread"])(t)})};function oa(e){return{requestHistory:function t(){return e(G["requestReplies"].apply(void 0,arguments))},clearHighlight:function t(){return e(G["clearHighlight"].apply(void 0,arguments))},jumpToMessage:function t(){return e(J["a"].apply(void 0,arguments))},setFocusRequestedTs:function t(){return e(z["j"].apply(void 0,arguments))},setFocusRequested:function t(){return e(G["setFocusRequested"].apply(void 0,arguments))},setFocusInput:function t(){return e(G["setFocusInput"].apply(void 0,arguments))},makeMessageSummary:function t(){return e(K["a"].apply(void 0,arguments))},maybeFocusThreadInAllThreads:function t(){return e(re.apply(void 0,arguments))},maybeFocusThreadInAllUnreads:function t(){return e(Q["c"].apply(void 0,arguments))},clearSerializedDataForKey:function t(){return e(Y["clearSerializedDataForKey"].apply(void 0,arguments))},truncateThreadHistory:function t(){return e(G["truncateThreadHistory"].apply(void 0,arguments))},setUserPrefByApi:function t(){return e(oe["d"].apply(void 0,arguments))},setThreadLastRead:function t(){return e(G["setThreadLastRead"].apply(void 0,arguments))},setThreadMarkedAsUnread:function t(){return e(G["setThreadMarkedAsUnread"].apply(void 0,arguments))}}}var la=Object(Ne["a"])(ia,{alwaysFetchOnMount:true});var ca=Object(i["connect"])(sa,oa)(la);var ua=ca;var da=a(197);var pa=function e(t,a){if(!t)throw new Error("mountThreadsFlexpane must be called with a teamId parameter");var r=Object(o["f"])(t);Object(s["a"])(n.a.createElement(i["Provider"],{store:r},n.a.createElement(da["a"],null,n.a.createElement(ua,null))),a)};var ma=pa;var ha=a(52);Object(ha["a"])("interop.mountThreadsFlexpane",ma)},,,function(e,t,a){},,,function(e,t,a){},,,,,,function(e,t,a){},,function(e,t,a){},,,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,,,function(e,t,a){"use strict";var r=a(0);var n=a(18);var i=a(29);var s=a(31);var o=Object(i["a"])("Starts a trial for this team",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.reason,n=a.args;return e(Object(s["a"])({method:"promo.campaigns.redeem",reason:r,args:n}))});o.meta={name:"callStartTrialApi",key:"fetchersStartTrialApiCallStartTrialApi",description:"Starts a trial for this team"};o.propTypes={reason:r["default"].string.isRequired,args:r["default"].object.isRequired};var l=Object(n["b"])("Starts a trial for the team",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.reason,n=a.args;return e(o({reason:r,args:n}))});l.meta={name:"startTrial",key:"actionsStartTrialStartTrial",description:"Starts a trial for the team"};l.propTypes={reason:r["default"].string.isRequired,args:r["default"].shape({campaign_type:r["default"].string.isRequired,campaign_sub_type:r["default"].string.isRequired}).isRequired};var c=t["a"]=l},,,,function(e,t,a){"use strict";a.r(t);var r=a(196);var n=a.n(r);var i=a(1);var s=a.n(i);var o=a(85);var l=a.n(o);var c=a(12);var u=a(2);var d=a(156);var p=a(26);var m=a(110);var h=a.n(m);var v=a(135);var f=a.n(v);var b=a(169);var g=a.n(b);var _=a(138);var y=a.n(_);var O=a(147);var k=a.n(O);var E=a(185);var C=a.n(E);var S=a(0);var w=a(30);var j=a(6);var I=a(809);var T=a(494);var A=a(4834);var N=a(817);var P=a(28);var M=Object(P["b"])("TS.web.admin.onApproveInviteRequest",function(){return null});var D=Object(P["b"])("TS.web.admin.decrementInviteRequestsCount",function(){return null});var x=a(1145);var R=a(3331);var F=new j["b"]("admin");var L={};var U={EMPTY_STATE:"empty-state"};var B=function(e){C()(t,e);function t(e){var a;h()(this,t);a=g()(this,y()(t).call(this,e));Object(w["a"])(k()(a),["approveRequest","denyRequest","removeRow"]);a.headers=[{id:"invite_request",value:null,noHover:true}];a.state={invitesData:null};return a}f()(t,[{key:"componentDidMount",value:function e(){var t=this;this.props.fetchInviteRequests().then(function(e){t.setState(function(){return{invitesData:e.requests}})})}},{key:"getHeight",value:function e(t){if(!t||0===t.length)return null;return(t.length<7?100*t.length:700)+"px"}},{key:"getRows",value:function e(){var t=this;var a=this.state.invitesData;if(!a)return null;return a.map(function(e){return{id:"inviteRequest-"+e.id,items:[{id:"invite_request",value:s.a.createElement(A["a"],{invite:e,inviteType:x["d"].REQUESTS,approveRequest:t.approveRequest,denyRequest:t.denyRequest,removeRow:t.removeRow})}]}})}},{key:"approveRequest",value:function e(t){return this.props.submitApproveInviteRequest({requestId:t.id}).then(function(e){var t=e.successful_requests[0];M(t)})}},{key:"denyRequest",value:function e(t){return this.props.submitDenyInviteRequest({requestId:t.id}).then(function(){D()})}},{key:"removeRow",value:function e(t){this.setState(function(e){var a=Object(u["reject"])(e.invitesData,{id:t.id});return{invitesData:a}})}},{key:"renderEmptyState",value:function e(){return s.a.createElement("div",{className:"p-admin_invites_table_empty_state","data-qa":U.EMPTY_STATE},s.a.createElement(N["b"],{text:":tada:",emojiSize:N["a"].LARGE})," ",s.a.createElement(N["b"],{text:":confetti_ball:",emojiSize:N["a"].LARGE})," ",s.a.createElement(N["b"],{text:":tada:",emojiSize:N["a"].LARGE}),s.a.createElement("div",{className:"p-admin_invites_table_empty_state_subtitle"},F.t("Done and Done")),s.a.createElement("div",{className:"p-admin_invites_table_empty_state_text"},F.t("One way or another, you\u2019ve answered all the requests. What\u2019s next?")))}},{key:"render",value:function e(){var t=this.getRows();var a=this.getHeight(t);return s.a.createElement("div",{className:"p-admin_invites_table","data-qa":"admin_invites_table"},t&&0===t.length?this.renderEmptyState():s.a.createElement(T["b"],{height:a,useKeyboardNavigableTable:true,headers:this.headers,rows:t,rowClassName:"p-admin_invites_table__row",disableHover:true}))}}]);return t}(i["Component"]);B.displayName="AdminInvitesTable";B.defaultProps=L;var q=function e(t){return{fetchInviteRequests:function e(a){return t(Object(I["e"])(a))},submitApproveInviteRequest:function e(a){return t(Object(I["j"])(a))},submitDenyInviteRequest:function e(a){return t(Object(I["l"])(a))}}};var G=Object(c["connect"])(null,q)(B);var H=function e(t,a){var r=document.getElementById("admin_invites_table_mount_point");if(!r||!t)return;var i=Object(p["f"])(t);var o=function e(){Object(u["defer"])(function(){l.a.unmountComponentAtNode(r)})};Object(d["a"])(s.a.createElement(c["Provider"],{store:i},s.a.createElement(G,n()({},a,{onClose:o}))),r)};var W={mountAdminInvitesTable:H};var V=a(52);Object(V["a"])("interop.mountAdminInvitesTable",H)},,,,,,,,,,,,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});Object.defineProperty(t,"default",{enumerable:true,get:function e(){return r.default}});var r=n(a(5078));function n(e){return e&&e.__esModule?e:{default:e}}},,,function(e,t,a){},,function(e,t,a){},,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var r=l(a(1));var n=o(a(0));var i=o(a(85));var s=o(a(5079));function o(e){return e&&e.__esModule?e:{default:e}}function l(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};r.get||r.set?Object.defineProperty(t,a,r):t[a]=e[a]}t.default=e;return t}function c(e){c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};return c(e)}function u(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};var r=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})));r.forEach(function(t){S(e,t,a[t])})}return e}function d(e,t){if(null==e)return{};var a=p(e,t);var r,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++){r=i[n];if(t.indexOf(r)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(e,r))continue;a[r]=e[r]}}return a}function p(e,t){if(null==e)return{};var a={};var r=Object.keys(e);var n,i;for(i=0;i<r.length;i++){n=r[i];if(t.indexOf(n)>=0)continue;a[n]=e[n]}return a}function m(e){return f(e)||v(e)||h()}function h(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function v(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function f(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||false;r.configurable=true;"value"in r&&(r.writable=true);Object.defineProperty(e,r.key,r)}}function _(e,t,a){t&&g(e.prototype,t);a&&g(e,a);return e}function y(e,t){if(t&&("object"===c(t)||"function"===typeof t))return t;return C(e)}function O(e){O=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return O(e)}function k(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});t&&E(e,t)}function E(e,t){E=Object.setPrototypeOf||function e(t,a){t.__proto__=a;return t};return E(e,t)}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:true,configurable:true,writable:true}):e[t]=a;return e}s.default||console.error("It looks like Tether has not been included. Please load this dependency first https://github.com/HubSpot/tether");var w=[n.default.string,n.default.shape({appendChild:n.default.func.isRequired})];var j=function e(t,a,n){var i=t.children;var s=r.Children.count(i);if(s>0)return new Error("".concat(n," no longer uses children to render components. Please use renderTarget and renderElement instead."))};var I=["auto auto","top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"];var T=function(e){k(t,e);function t(){var e;var a;b(this,t);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];a=y(this,(e=O(t)).call.apply(e,[this].concat(i)));S(C(C(a)),"_targetNode",r.default.createRef());S(C(C(a)),"_elementNode",r.default.createRef());S(C(C(a)),"_elementParentNode",null);S(C(C(a)),"_tetherInstance",null);return a}_(t,[{key:"componentDidMount",value:function e(){this._createContainer();this.forceUpdate()}},{key:"componentDidUpdate",value:function e(t){t.renderElementTag===this.props.renderElementTag&&t.renderElementTo===this.props.renderElementTo||this._createContainer();if(this._elementParentNode&&t.className!==this.props.className){var a,r;var n=(t.className||"").split(" ").filter(function(e){return e.length>0});var i=(this.props.className||"").split(" ").filter(function(e){return e.length>0});(a=this._elementParentNode.classList).remove.apply(a,m(n));(r=this._elementParentNode.classList).add.apply(r,m(i))}this._update()}},{key:"componentWillUnmount",value:function e(){this._destroy()}},{key:"getTetherInstance",value:function e(){return this._tetherInstance}},{key:"disable",value:function e(){this._tetherInstance.disable()}},{key:"enable",value:function e(){this._tetherInstance.enable()}},{key:"on",value:function e(t,a,r){this._tetherInstance.on(t,a,r)}},{key:"once",value:function e(t,a,r){this._tetherInstance.once(t,a,r)}},{key:"off",value:function e(t,a){this._tetherInstance.off(t,a)}},{key:"position",value:function e(){this._tetherInstance.position()}},{key:"_runRenders",value:function e(){var t="function"===typeof this.props.renderTarget?this.props.renderTarget(this._targetNode):null;var a="function"===typeof this.props.renderElement?this.props.renderElement(this._elementNode):null;(0,r.isValidElement)(t)||(t=null);(0,r.isValidElement)(a)||(a=null);return{targetComponent:t,elementComponent:a}}},{key:"_createTetherInstance",value:function e(t){this._tetherInstance&&this._destroy();this._tetherInstance=new s.default(t);this._registerEventListeners()}},{key:"_destroyTetherInstance",value:function e(){if(this._tetherInstance){this._tetherInstance.destroy();this._tetherInstance=null}}},{key:"_registerEventListeners",value:function e(){var t=this;this.on("update",function(){for(var e=arguments.length,a=new Array(e),r=0;r<e;r++)a[r]=arguments[r];return t.props.onUpdate&&t.props.onUpdate.apply(t,a)});this.on("repositioned",function(){for(var e=arguments.length,a=new Array(e),r=0;r<e;r++)a[r]=arguments[r];return t.props.onRepositioned&&t.props.onRepositioned.apply(t,a)})}},{key:"_destroy",value:function e(){this._destroyTetherInstance();this._removeContainer()}},{key:"_createContainer",value:function e(){this._removeContainer();var t=this.props,a=t.renderElementTag,r=t.className;this._elementParentNode=document.createElement(a);this._elementParentNode.className=r||""}},{key:"_addContainerToDOM",value:function e(){this._elementParentNode.parentNode!==this._renderNode&&this._renderNode.appendChild(this._elementParentNode)}},{key:"_removeContainer",value:function e(){this._elementParentNode&&this._elementParentNode.parentNode&&this._elementParentNode.parentNode.removeChild(this._elementParentNode)}},{key:"_update",value:function e(){var t=!this._elementNode.current||!this._targetNode.current;if(t){this._destroy();return}this._updateTether()}},{key:"_updateTether",value:function e(){var t=this.props,a=t.children,r=t.renderElementTag,n=t.renderElementTo,i=t.id,s=t.className,o=t.style,l=t.renderTarget,c=t.renderElement,p=d(t,["children","renderElementTag","renderElementTo","id","className","style","renderTarget","renderElement"]);var m=u({target:this._targetNode.current,element:this._elementParentNode},p);var h=i||"";this._elementParentNode.id!==h&&(this._elementParentNode.id=h);if(o){var v=this._elementParentNode.style;Object.keys(o).forEach(function(e){v[e]!==o[e]&&(v[e]=o[e])})}this._addContainerToDOM();this._tetherInstance?this._tetherInstance.setOptions(m):this._createTetherInstance(m);this._tetherInstance.position()}},{key:"render",value:function e(){var t=this._runRenders(),a=t.targetComponent,n=t.elementComponent;if(!a)return null;return r.default.createElement(r.default.Fragment,null,a,n&&this._elementParentNode&&i.default.createPortal(n,this._elementParentNode))}},{key:"_renderNode",get:function e(){var t=this.props.renderElementTo;if("string"===typeof t)return document.querySelector(t);return t||document.body}}]);return t}(r.Component);S(T,"propTypes",{renderElementTag:n.default.string,renderElementTo:n.default.oneOfType(w),attachment:n.default.oneOf(I).isRequired,targetAttachment:n.default.oneOf(I),offset:n.default.string,targetOffset:n.default.string,targetModifier:n.default.string,enabled:n.default.bool,classes:n.default.object,classPrefix:n.default.string,optimizations:n.default.object,constraints:n.default.array,id:n.default.string,className:n.default.string,style:n.default.object,onUpdate:n.default.func,onRepositioned:n.default.func,renderTarget:n.default.func,renderElement:n.default.func,children:j});S(T,"defaultProps",{renderElementTag:"div",renderElementTo:null});var A=T;t.default=A},function(e,t,a){var r,n,i;(function(a,s){true;!(n=[],r=s,i="function"===typeof r?r.apply(t,n):r,void 0!==i&&(e.exports=i))})(this,function(){"use strict";var e=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||false;r.configurable=true;"value"in r&&(r.writable=true);Object.defineProperty(e,r.key,r)}}return function(t,a,r){a&&e(t.prototype,a);r&&e(t,r);return t}}();function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=void 0;"undefined"===typeof a&&(a={modules:[]});var r=null;function n(e){var t=e.getBoundingClientRect();var a={};for(var r in t)a[r]=t[r];try{if(e.ownerDocument!==document){var i=e.ownerDocument.defaultView.frameElement;if(i){var s=n(i);a.top+=s.top;a.bottom+=s.top;a.left+=s.left;a.right+=s.left}}}catch(e){}return a}function i(e){var t=getComputedStyle(e)||{};var a=t.position;var r=[];if("fixed"===a)return[e];var n=e;while((n=n.parentNode)&&n&&1===n.nodeType){var i=void 0;try{i=getComputedStyle(n)}catch(e){}if("undefined"===typeof i||null===i){r.push(n);return r}var s=i;var o=s.overflow;var l=s.overflowX;var c=s.overflowY;/(auto|scroll|overlay)/.test(o+c+l)&&("absolute"!==a||["relative","absolute","fixed"].indexOf(i.position)>=0)&&r.push(n)}r.push(e.ownerDocument.body);e.ownerDocument!==document&&r.push(e.ownerDocument.defaultView);return r}var s=function(){var e=0;return function(){return++e}}();var o={};var l=function e(){var t=r;if(!t||!document.body.contains(t)){t=document.createElement("div");t.setAttribute("data-tether-id",s());h(t.style,{top:0,left:0,position:"absolute"});document.body.appendChild(t);r=t}var a=t.getAttribute("data-tether-id");if("undefined"===typeof o[a]){o[a]=n(t);k(function(){delete o[a]})}return o[a]};function c(){r&&document.body.removeChild(r);r=null}function u(e){var t=void 0;if(e===document){t=document;e=document.documentElement}else t=e.ownerDocument;var a=t.documentElement;var r=n(e);var i=l();r.top-=i.top;r.left-=i.left;"undefined"===typeof r.width&&(r.width=document.body.scrollWidth-r.left-r.right);"undefined"===typeof r.height&&(r.height=document.body.scrollHeight-r.top-r.bottom);r.top=r.top-a.clientTop;r.left=r.left-a.clientLeft;r.right=t.body.clientWidth-r.width-r.left;r.bottom=t.body.clientHeight-r.height-r.top;return r}function d(e){return e.offsetParent||document.documentElement}var p=null;function m(){if(p)return p;var e=document.createElement("div");e.style.width="100%";e.style.height="200px";var t=document.createElement("div");h(t.style,{position:"absolute",top:0,left:0,pointerEvents:"none",visibility:"hidden",width:"200px",height:"150px",overflow:"hidden"});t.appendChild(e);document.body.appendChild(t);var a=e.offsetWidth;t.style.overflow="scroll";var r=e.offsetWidth;a===r&&(r=t.clientWidth);document.body.removeChild(t);var n=a-r;p={width:n,height:n};return p}function h(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];var t=[];Array.prototype.push.apply(t,arguments);t.slice(1).forEach(function(t){if(t)for(var a in t)({}).hasOwnProperty.call(t,a)&&(e[a]=t[a])});return e}function v(e,t){if("undefined"!==typeof e.classList)t.split(" ").forEach(function(t){t.trim()&&e.classList.remove(t)});else{var a=new RegExp("(^| )"+t.split(" ").join("|")+"( |$)","gi");var r=g(e).replace(a," ");_(e,r)}}function f(e,t){if("undefined"!==typeof e.classList)t.split(" ").forEach(function(t){t.trim()&&e.classList.add(t)});else{v(e,t);var a=g(e)+" "+t;_(e,a)}}function b(e,t){if("undefined"!==typeof e.classList)return e.classList.contains(t);var a=g(e);return new RegExp("(^| )"+t+"( |$)","gi").test(a)}function g(e){if(e.className instanceof e.ownerDocument.defaultView.SVGAnimatedString)return e.className.baseVal;return e.className}function _(e,t){e.setAttribute("class",t)}function y(e,t,a){a.forEach(function(a){-1===t.indexOf(a)&&b(e,a)&&v(e,a)});t.forEach(function(t){b(e,t)||f(e,t)})}var O=[];var k=function e(t){O.push(t)};var E=function e(){var t=void 0;while(t=O.pop())t()};var C=function(){function a(){t(this,a)}e(a,[{key:"on",value:function e(t,a,r){var n=!(arguments.length<=3||void 0===arguments[3])&&arguments[3];"undefined"===typeof this.bindings&&(this.bindings={});"undefined"===typeof this.bindings[t]&&(this.bindings[t]=[]);this.bindings[t].push({handler:a,ctx:r,once:n})}},{key:"once",value:function e(t,a,r){this.on(t,a,r,true)}},{key:"off",value:function e(t,a){if("undefined"===typeof this.bindings||"undefined"===typeof this.bindings[t])return;if("undefined"===typeof a)delete this.bindings[t];else{var r=0;while(r<this.bindings[t].length)this.bindings[t][r].handler===a?this.bindings[t].splice(r,1):++r}}},{key:"trigger",value:function e(t){if("undefined"!==typeof this.bindings&&this.bindings[t]){var a=0;for(var r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];while(a<this.bindings[t].length){var s=this.bindings[t][a];var o=s.handler;var l=s.ctx;var c=s.once;var u=l;"undefined"===typeof u&&(u=this);o.apply(u,n);c?this.bindings[t].splice(a,1):++a}}}}]);return a}();a.Utils={getActualBoundingClientRect:n,getScrollParents:i,getBounds:u,getOffsetParent:d,extend:h,addClass:f,removeClass:v,hasClass:b,updateClasses:y,defer:k,flush:E,uniqueId:s,Evented:C,getScrollBarSize:m,removeUtilElements:c};"use strict";var S=function(){function e(e,t){var a=[];var r=true;var n=false;var i=void 0;try{for(var s=e[Symbol.iterator](),o;!(r=(o=s.next()).done);r=true){a.push(o.value);if(t&&a.length===t)break}}catch(e){n=true;i=e}finally{try{!r&&s["return"]&&s["return"]()}finally{if(n)throw i}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();var e=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||false;r.configurable=true;"value"in r&&(r.writable=true);Object.defineProperty(e,r.key,r)}}return function(t,a,r){a&&e(t.prototype,a);r&&e(t,r);return t}}();var w=function e(t,a,r){var n=true;e:while(n){var i=t,s=a,o=r;n=false;null===i&&(i=Function.prototype);var l=Object.getOwnPropertyDescriptor(i,s);if(void 0===l){var c=Object.getPrototypeOf(i);if(null===c)return;t=c;a=s;r=o;n=true;l=c=void 0;continue e}if("value"in l)return l.value;var u=l.get;if(void 0===u)return;return u.call(o)}};function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function j(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}if("undefined"===typeof a)throw new Error("You must include the utils.js file before tether.js");var I=a.Utils;var i=I.getScrollParents;var u=I.getBounds;var d=I.getOffsetParent;var h=I.extend;var f=I.addClass;var v=I.removeClass;var y=I.updateClasses;var k=I.defer;var E=I.flush;var m=I.getScrollBarSize;var c=I.removeUtilElements;function T(e,t){var a=arguments.length<=2||void 0===arguments[2]?1:arguments[2];return e+a>=t&&t>=e-a}var A=function(){if("undefined"===typeof document)return"";var e=document.createElement("div");var t=["transform","WebkitTransform","OTransform","MozTransform","msTransform"];for(var a=0;a<t.length;++a){var r=t[a];if(void 0!==e.style[r])return r}}();var N=[];var P=function e(){N.forEach(function(e){e.position(false)});E()};function M(){if("object"===typeof performance&&"function"===typeof performance.now)return performance.now();return+new Date}(function(){var e=null;var t=null;var a=null;var r=function r(){if("undefined"!==typeof t&&t>16){t=Math.min(t-16,250);a=setTimeout(r,250);return}if("undefined"!==typeof e&&M()-e<10)return;if(null!=a){clearTimeout(a);a=null}e=M();P();t=M()-e};"undefined"!==typeof window&&"undefined"!==typeof window.addEventListener&&["resize","scroll","touchmove"].forEach(function(e){window.addEventListener(e,r)})})();var D={center:"center",left:"right",right:"left"};var x={middle:"middle",top:"bottom",bottom:"top"};var R={top:0,left:0,middle:"50%",center:"50%",bottom:"100%",right:"100%"};var F=function e(t,a){var r=t.left;var n=t.top;"auto"===r&&(r=D[a.left]);"auto"===n&&(n=x[a.top]);return{left:r,top:n}};var L=function e(t){var a=t.left;var r=t.top;"undefined"!==typeof R[t.left]&&(a=R[t.left]);"undefined"!==typeof R[t.top]&&(r=R[t.top]);return{left:a,top:r}};function U(){var e={top:0,left:0};for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];a.forEach(function(t){var a=t.top;var r=t.left;"string"===typeof a&&(a=parseFloat(a,10));"string"===typeof r&&(r=parseFloat(r,10));e.top+=a;e.left+=r});return e}function B(e,t){"string"===typeof e.left&&-1!==e.left.indexOf("%")&&(e.left=parseFloat(e.left,10)/100*t.width);"string"===typeof e.top&&-1!==e.top.indexOf("%")&&(e.top=parseFloat(e.top,10)/100*t.height);return e}var q=function e(t){var a=t.split(" ");var r=S(a,2);var n=r[0];var i=r[1];return{top:n,left:i}};var G=q;var H=function(r){j(n,r);function n(e){var r=this;t(this,n);w(Object.getPrototypeOf(n.prototype),"constructor",this).call(this);this.position=this.position.bind(this);N.push(this);this.history=[];this.setOptions(e,false);a.modules.forEach(function(e){"undefined"!==typeof e.initialize&&e.initialize.call(r)});this.position()}e(n,[{key:"getClass",value:function e(){var t=arguments.length<=0||void 0===arguments[0]?"":arguments[0];var a=this.options.classes;return"undefined"!==typeof a&&a[t]?this.options.classes[t]:this.options.classPrefix?this.options.classPrefix+"-"+t:t}},{key:"setOptions",value:function e(t){var a=this;var r=arguments.length<=1||void 0===arguments[1]||arguments[1];var n={offset:"0 0",targetOffset:"0 0",targetAttachment:"auto auto",classPrefix:"tether"};this.options=h(n,t);var s=this.options;var o=s.element;var l=s.target;var c=s.targetModifier;this.element=o;this.target=l;this.targetModifier=c;if("viewport"===this.target){this.target=document.body;this.targetModifier="visible"}else if("scroll-handle"===this.target){this.target=document.body;this.targetModifier="scroll-handle"}["element","target"].forEach(function(e){if("undefined"===typeof a[e])throw new Error("Tether Error: Both element and target must be defined");"undefined"!==typeof a[e].jquery?a[e]=a[e][0]:"string"===typeof a[e]&&(a[e]=document.querySelector(a[e]))});f(this.element,this.getClass("element"));false===this.options.addTargetClasses||f(this.target,this.getClass("target"));if(!this.options.attachment)throw new Error("Tether Error: You must provide an attachment");this.targetAttachment=G(this.options.targetAttachment);this.attachment=G(this.options.attachment);this.offset=q(this.options.offset);this.targetOffset=q(this.options.targetOffset);"undefined"!==typeof this.scrollParents&&this.disable();"scroll-handle"===this.targetModifier?this.scrollParents=[this.target]:this.scrollParents=i(this.target);false===this.options.enabled||this.enable(r)}},{key:"getTargetBounds",value:function e(){if("undefined"===typeof this.targetModifier)return u(this.target);if("visible"===this.targetModifier){if(this.target===document.body)return{top:pageYOffset,left:pageXOffset,height:innerHeight,width:innerWidth};var t=u(this.target);var a={height:t.height,width:t.width,top:t.top,left:t.left};a.height=Math.min(a.height,t.height-(pageYOffset-t.top));a.height=Math.min(a.height,t.height-(t.top+t.height-(pageYOffset+innerHeight)));a.height=Math.min(innerHeight,a.height);a.height-=2;a.width=Math.min(a.width,t.width-(pageXOffset-t.left));a.width=Math.min(a.width,t.width-(t.left+t.width-(pageXOffset+innerWidth)));a.width=Math.min(innerWidth,a.width);a.width-=2;a.top<pageYOffset&&(a.top=pageYOffset);a.left<pageXOffset&&(a.left=pageXOffset);return a}if("scroll-handle"===this.targetModifier){var t=void 0;var r=this.target;if(r===document.body){r=document.documentElement;t={left:pageXOffset,top:pageYOffset,height:innerHeight,width:innerWidth}}else t=u(r);var n=getComputedStyle(r);var i=r.scrollWidth>r.clientWidth||[n.overflow,n.overflowX].indexOf("scroll")>=0||this.target!==document.body;var s=0;i&&(s=15);var o=t.height-parseFloat(n.borderTopWidth)-parseFloat(n.borderBottomWidth)-s;var a={width:15,height:.975*o*(o/r.scrollHeight),left:t.left+t.width-parseFloat(n.borderLeftWidth)-15};var l=0;o<408&&this.target===document.body&&(l=-11e-5*Math.pow(o,2)-.00727*o+22.58);this.target!==document.body&&(a.height=Math.max(a.height,24));var c=this.target.scrollTop/(r.scrollHeight-o);a.top=c*(o-a.height-l)+t.top+parseFloat(n.borderTopWidth);this.target===document.body&&(a.height=Math.max(a.height,24));return a}}},{key:"clearCache",value:function e(){this._cache={}}},{key:"cache",value:function e(t,a){"undefined"===typeof this._cache&&(this._cache={});"undefined"===typeof this._cache[t]&&(this._cache[t]=a.call(this));return this._cache[t]}},{key:"enable",value:function e(){var t=this;var a=arguments.length<=0||void 0===arguments[0]||arguments[0];false===this.options.addTargetClasses||f(this.target,this.getClass("enabled"));f(this.element,this.getClass("enabled"));this.enabled=true;this.scrollParents.forEach(function(e){e!==t.target.ownerDocument&&e.addEventListener("scroll",t.position)});a&&this.position()}},{key:"disable",value:function e(){var t=this;v(this.target,this.getClass("enabled"));v(this.element,this.getClass("enabled"));this.enabled=false;"undefined"!==typeof this.scrollParents&&this.scrollParents.forEach(function(e){e.removeEventListener("scroll",t.position)})}},{key:"destroy",value:function e(){var t=this;this.disable();N.forEach(function(e,a){e===t&&N.splice(a,1)});0===N.length&&c()}},{key:"updateAttachClasses",value:function e(t,a){var r=this;t=t||this.attachment;a=a||this.targetAttachment;var n=["left","top","bottom","right","middle","center"];"undefined"!==typeof this._addAttachClasses&&this._addAttachClasses.length&&this._addAttachClasses.splice(0,this._addAttachClasses.length);"undefined"===typeof this._addAttachClasses&&(this._addAttachClasses=[]);var i=this._addAttachClasses;t.top&&i.push(this.getClass("element-attached")+"-"+t.top);t.left&&i.push(this.getClass("element-attached")+"-"+t.left);a.top&&i.push(this.getClass("target-attached")+"-"+a.top);a.left&&i.push(this.getClass("target-attached")+"-"+a.left);var s=[];n.forEach(function(e){s.push(r.getClass("element-attached")+"-"+e);s.push(r.getClass("target-attached")+"-"+e)});k(function(){if(!("undefined"!==typeof r._addAttachClasses))return;y(r.element,r._addAttachClasses,s);false===r.options.addTargetClasses||y(r.target,r._addAttachClasses,s);delete r._addAttachClasses})}},{key:"position",value:function e(){var t=this;var r=arguments.length<=0||void 0===arguments[0]||arguments[0];if(!this.enabled)return;this.clearCache();var n=F(this.targetAttachment,this.attachment);this.updateAttachClasses(this.attachment,n);var i=this.cache("element-bounds",function(){return u(t.element)});var s=i.width;var o=i.height;if(0===s&&0===o&&"undefined"!==typeof this.lastSize){var l=this.lastSize;s=l.width;o=l.height}else this.lastSize={width:s,height:o};var c=this.cache("target-bounds",function(){return t.getTargetBounds()});var p=c;var h=B(L(this.attachment),{width:s,height:o});var v=B(L(n),p);var f=B(this.offset,{width:s,height:o});var b=B(this.targetOffset,p);h=U(h,f);v=U(v,b);var g=c.left+v.left-h.left;var _=c.top+v.top-h.top;for(var y=0;y<a.modules.length;++y){var O=a.modules[y];var k=O.position.call(this,{left:g,top:_,targetAttachment:n,targetPos:c,elementPos:i,offset:h,targetOffset:v,manualOffset:f,manualTargetOffset:b,scrollbarSize:j,attachment:this.attachment});if(false===k)return false;if("undefined"===typeof k||"object"!==typeof k)continue;_=k.top;g=k.left}var C={page:{top:_,left:g},viewport:{top:_-pageYOffset,bottom:pageYOffset-_-o+innerHeight,left:g-pageXOffset,right:pageXOffset-g-s+innerWidth}};var S=this.target.ownerDocument;var w=S.defaultView;var j=void 0;if(w.innerHeight>S.documentElement.clientHeight){j=this.cache("scrollbar-size",m);C.viewport.bottom-=j.height}if(w.innerWidth>S.documentElement.clientWidth){j=this.cache("scrollbar-size",m);C.viewport.right-=j.width}if(-1===["","static"].indexOf(S.body.style.position)||-1===["","static"].indexOf(S.body.parentElement.style.position)){C.page.bottom=S.body.scrollHeight-_-o;C.page.right=S.body.scrollWidth-g-s}"undefined"===typeof this.options.optimizations||false===this.options.optimizations.moveElement||"undefined"!==typeof this.targetModifier||function(){var e=t.cache("target-offsetparent",function(){return d(t.target)});var a=t.cache("target-offsetparent-bounds",function(){return u(e)});var r=getComputedStyle(e);var n=a;var i={};["Top","Left","Bottom","Right"].forEach(function(e){i[e.toLowerCase()]=parseFloat(r["border"+e+"Width"])});a.right=S.body.scrollWidth-a.left-n.width+i.right;a.bottom=S.body.scrollHeight-a.top-n.height+i.bottom;if(C.page.top>=a.top+i.top&&C.page.bottom>=a.bottom&&C.page.left>=a.left+i.left&&C.page.right>=a.right){var s=e.scrollTop;var o=e.scrollLeft;C.offset={top:C.page.top-a.top+s-i.top,left:C.page.left-a.left+o-i.left}}}();this.move(C);this.history.unshift(C);this.history.length>3&&this.history.pop();r&&E();return true}},{key:"move",value:function e(t){var a=this;if(!("undefined"!==typeof this.element.parentNode))return;var r={};for(var n in t){r[n]={};for(var i in t[n]){var s=false;for(var o=0;o<this.history.length;++o){var l=this.history[o];if("undefined"!==typeof l[n]&&!T(l[n][i],t[n][i])){s=true;break}}s||(r[n][i]=true)}}var c={top:"",left:"",right:"",bottom:""};var u=function e(t,r){var n="undefined"!==typeof a.options.optimizations;var i=n?a.options.optimizations.gpu:null;if(false!==i){var s=void 0,o=void 0;if(t.top){c.top=0;s=r.top}else{c.bottom=0;s=-r.bottom}if(t.left){c.left=0;o=r.left}else{c.right=0;o=-r.right}if("number"===typeof window.devicePixelRatio&&devicePixelRatio%1===0){o=Math.round(o*devicePixelRatio)/devicePixelRatio;s=Math.round(s*devicePixelRatio)/devicePixelRatio}c[A]="translateX("+o+"px) translateY("+s+"px)";"msTransform"!==A&&(c[A]+=" translateZ(0)")}else{t.top?c.top=r.top+"px":c.bottom=r.bottom+"px";t.left?c.left=r.left+"px":c.right=r.right+"px"}};var p=false;if((r.page.top||r.page.bottom)&&(r.page.left||r.page.right)){c.position="absolute";u(r.page,t.page)}else if((r.viewport.top||r.viewport.bottom)&&(r.viewport.left||r.viewport.right)){c.position="fixed";u(r.viewport,t.viewport)}else if("undefined"!==typeof r.offset&&r.offset.top&&r.offset.left)(function(){c.position="absolute";var e=a.cache("target-offsetparent",function(){return d(a.target)});d(a.element)!==e&&k(function(){a.element.parentNode.removeChild(a.element);e.appendChild(a.element)});u(r.offset,t.offset);p=true})();else{c.position="absolute";u({top:true,left:true},t.page)}if(!p)if(this.options.bodyElement)this.element.parentNode!==this.options.bodyElement&&this.options.bodyElement.appendChild(this.element);else{var m=function e(t){var a=t.ownerDocument;var r=a.fullscreenElement||a.webkitFullscreenElement||a.mozFullScreenElement||a.msFullscreenElement;return r===t};var v=true;var f=this.element.parentNode;while(f&&1===f.nodeType&&"BODY"!==f.tagName&&!m(f)){if("static"!==getComputedStyle(f).position){v=false;break}f=f.parentNode}if(!v){this.element.parentNode.removeChild(this.element);this.element.ownerDocument.body.appendChild(this.element)}}var b={};var g=false;for(var i in c){var _=c[i];var y=this.element.style[i];if(y!==_){g=true;b[i]=_}}g&&k(function(){h(a.element.style,b);a.trigger("repositioned")})}}]);return n}(C);H.modules=[];a.position=P;var W=h(H,a);"use strict";var S=function(){function e(e,t){var a=[];var r=true;var n=false;var i=void 0;try{for(var s=e[Symbol.iterator](),o;!(r=(o=s.next()).done);r=true){a.push(o.value);if(t&&a.length===t)break}}catch(e){n=true;i=e}finally{try{!r&&s["return"]&&s["return"]()}finally{if(n)throw i}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();var I=a.Utils;var u=I.getBounds;var h=I.extend;var y=I.updateClasses;var k=I.defer;var V=["left","top","right","bottom"];function K(e,t){"scrollParent"===t?t=e.scrollParents[0]:"window"===t&&(t=[pageXOffset,pageYOffset,innerWidth+pageXOffset,innerHeight+pageYOffset]);t===document&&(t=t.documentElement);"undefined"!==typeof t.nodeType&&function(){var e=t;var a=u(t);var r=a;var n=getComputedStyle(t);t=[r.left,r.top,a.width+r.left,a.height+r.top];if(e.ownerDocument!==document){var i=e.ownerDocument.defaultView;t[0]+=i.pageXOffset;t[1]+=i.pageYOffset;t[2]+=i.pageXOffset;t[3]+=i.pageYOffset}V.forEach(function(e,a){e=e[0].toUpperCase()+e.substr(1);"Top"===e||"Left"===e?t[a]+=parseFloat(n["border"+e+"Width"]):t[a]-=parseFloat(n["border"+e+"Width"])})}();return t}a.modules.push({position:function e(t){var a=this;var r=t.top;var n=t.left;var i=t.targetAttachment;if(!this.options.constraints)return true;var s=this.cache("element-bounds",function(){return u(a.element)});var o=s.height;var l=s.width;if(0===l&&0===o&&"undefined"!==typeof this.lastSize){var c=this.lastSize;l=c.width;o=c.height}var d=this.cache("target-bounds",function(){return a.getTargetBounds()});var p=d.height;var m=d.width;var v=[this.getClass("pinned"),this.getClass("out-of-bounds")];this.options.constraints.forEach(function(e){var t=e.outOfBoundsClass;var a=e.pinnedClass;t&&v.push(t);a&&v.push(a)});v.forEach(function(e){["left","top","right","bottom"].forEach(function(t){v.push(e+"-"+t)})});var f=[];var b=h({},i);var g=h({},this.attachment);this.options.constraints.forEach(function(e){var t=e.to;var s=e.attachment;var c=e.pin;"undefined"===typeof s&&(s="");var u=void 0,d=void 0;if(s.indexOf(" ")>=0){var h=s.split(" ");var v=S(h,2);d=v[0];u=v[1]}else u=d=s;var _=K(a,t);if("target"===d||"both"===d){if(r<_[1]&&"top"===b.top){r+=p;b.top="bottom"}if(r+o>_[3]&&"bottom"===b.top){r-=p;b.top="top"}}if("together"===d){if("top"===b.top)if("bottom"===g.top&&r<_[1]){r+=p;b.top="bottom";r+=o;g.top="top"}else if("top"===g.top&&r+o>_[3]&&r-(o-p)>=_[1]){r-=o-p;b.top="bottom";g.top="bottom"}if("bottom"===b.top)if("top"===g.top&&r+o>_[3]){r-=p;b.top="top";r-=o;g.top="bottom"}else if("bottom"===g.top&&r<_[1]&&r+(2*o-p)<=_[3]){r+=o-p;b.top="top";g.top="top"}if("middle"===b.top)if(r+o>_[3]&&"top"===g.top){r-=o;g.top="bottom"}else if(r<_[1]&&"bottom"===g.top){r+=o;g.top="top"}}if("target"===u||"both"===u){if(n<_[0]&&"left"===b.left){n+=m;b.left="right"}if(n+l>_[2]&&"right"===b.left){n-=m;b.left="left"}}if("together"===u)if(n<_[0]&&"left"===b.left){if("right"===g.left){n+=m;b.left="right";n+=l;g.left="left"}else if("left"===g.left){n+=m;b.left="right";n-=l;g.left="right"}}else if(n+l>_[2]&&"right"===b.left){if("left"===g.left){n-=m;b.left="left";n-=l;g.left="right"}else if("right"===g.left){n-=m;b.left="left";n+=l;g.left="left"}}else if("center"===b.left)if(n+l>_[2]&&"left"===g.left){n-=l;g.left="right"}else if(n<_[0]&&"right"===g.left){n+=l;g.left="left"}if("element"===d||"both"===d){if(r<_[1]&&"bottom"===g.top){r+=o;g.top="top"}if(r+o>_[3]&&"top"===g.top){r-=o;g.top="bottom"}}if("element"===u||"both"===u){if(n<_[0])if("right"===g.left){n+=l;g.left="left"}else if("center"===g.left){n+=l/2;g.left="left"}if(n+l>_[2])if("left"===g.left){n-=l;g.left="right"}else if("center"===g.left){n-=l/2;g.left="right"}}"string"===typeof c?c=c.split(",").map(function(e){return e.trim()}):true===c&&(c=["top","left","right","bottom"]);c=c||[];var y=[];var O=[];if(r<_[1])if(c.indexOf("top")>=0){r=_[1];y.push("top")}else O.push("top");if(r+o>_[3])if(c.indexOf("bottom")>=0){r=_[3]-o;y.push("bottom")}else O.push("bottom");if(n<_[0])if(c.indexOf("left")>=0){n=_[0];y.push("left")}else O.push("left");if(n+l>_[2])if(c.indexOf("right")>=0){n=_[2]-l;y.push("right")}else O.push("right");y.length&&function(){var e=void 0;e="undefined"!==typeof a.options.pinnedClass?a.options.pinnedClass:a.getClass("pinned");f.push(e);y.forEach(function(t){f.push(e+"-"+t)})}();O.length&&function(){var e=void 0;e="undefined"!==typeof a.options.outOfBoundsClass?a.options.outOfBoundsClass:a.getClass("out-of-bounds");f.push(e);O.forEach(function(t){f.push(e+"-"+t)})}();(y.indexOf("left")>=0||y.indexOf("right")>=0)&&(g.left=b.left=false);(y.indexOf("top")>=0||y.indexOf("bottom")>=0)&&(g.top=b.top=false);if(b.top!==i.top||b.left!==i.left||g.top!==a.attachment.top||g.left!==a.attachment.left){a.updateAttachClasses(g,b);a.trigger("update",{attachment:g,targetAttachment:b})}});k(function(){false===a.options.addTargetClasses||y(a.target,f,v);y(a.element,f,v)});return{top:r,left:n}}});"use strict";var I=a.Utils;var u=I.getBounds;var y=I.updateClasses;var k=I.defer;a.modules.push({position:function e(t){var a=this;var r=t.top;var n=t.left;var i=this.cache("element-bounds",function(){return u(a.element)});var s=i.height;var o=i.width;var l=this.getTargetBounds();var c=r+s;var d=n+o;var p=[];r<=l.bottom&&c>=l.top&&["left","right"].forEach(function(e){var t=l[e];t!==n&&t!==d||p.push(e)});n<=l.right&&d>=l.left&&["top","bottom"].forEach(function(e){var t=l[e];t!==r&&t!==c||p.push(e)});var m=[];var h=[];var v=["left","top","right","bottom"];m.push(this.getClass("abutted"));v.forEach(function(e){m.push(a.getClass("abutted")+"-"+e)});p.length&&h.push(this.getClass("abutted"));p.forEach(function(e){h.push(a.getClass("abutted")+"-"+e)});k(function(){false===a.options.addTargetClasses||y(a.target,h,m);y(a.element,h,m)});return true}});"use strict";var S=function(){function e(e,t){var a=[];var r=true;var n=false;var i=void 0;try{for(var s=e[Symbol.iterator](),o;!(r=(o=s.next()).done);r=true){a.push(o.value);if(t&&a.length===t)break}}catch(e){n=true;i=e}finally{try{!r&&s["return"]&&s["return"]()}finally{if(n)throw i}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();a.modules.push({position:function e(t){var a=t.top;var r=t.left;if(!this.options.shift)return;var n=this.options.shift;"function"===typeof this.options.shift&&(n=this.options.shift.call(this,{top:a,left:r}));var i=void 0,s=void 0;if("string"===typeof n){n=n.split(" ");n[1]=n[1]||n[0];var o=n;var l=S(o,2);i=l[0];s=l[1];i=parseFloat(i,10);s=parseFloat(s,10)}else{i=n.top;s=n.left}a+=i;r+=s;return{top:a,left:r}}});return W})},function(e,t,a){},,,,,function(e,t,a){"use strict";var r=a(196);var n=a.n(r);var i=a(245);var s=a.n(i);var o=a(110);var l=a.n(o);var c=a(135);var u=a.n(c);var d=a(169);var p=a.n(d);var m=a(138);var h=a.n(m);var v=a(147);var f=a.n(v);var b=a(185);var g=a.n(b);var _=a(1);var y=a.n(_);var O=a(0);var k=a(13);var E=a.n(k);var C=a(12);var S=a(2);var w=a(30);var j=a(11);var I=a(1676);var T=a(1669);var A=a(9);var N=a(17);var P=a(353);var M=a(192);var D=a(20);var x=a(25);var R=a(39);var F=a(106);var L=a(104);var U=a(505);var B=a(97);var q=a(34);var G=a(6);var H=a(16);var W=a(646);var V=a(131);var K=a(57);var z=a(777);var Q=a(760);var Y=a(457);var J=a(43);var X=a(24);var Z=a(4696);var $=a(1057);var ee=a(90);var te=a(54);var ae=a(218);var re=a.n(ae);var ne=a(1634);var ie={isDetailsView:false,featureSonicUserGroups:false,onEnableUserGroup:S["noop"],onDisableUserGroup:S["noop"],canEditUserGroups:S["noop"],canCreateAndDeleteUserGroups:S["noop"],openModal:S["noop"],menuProps:{},onClick:S["noop"]};var se=new G["b"]("user_groups");var oe=function(e){g()(t,e);function t(e){var a;l()(this,t);a=p()(this,h()(t).call(this,e));Object(w["a"])(f()(a),["onEnableUserGroup","onDisableUserGroup","onEditDetails","onEditMembers"]);return a}u()(t,[{key:"onDisableUserGroup",value:function e(){this.props.openModal({element:this.renderConfirmationDialog({action:"disable_group",onSubmit:this.props.onDisableUserGroup})});this.props.onClick()}},{key:"onEditDetails",value:function e(){this.props.openModal({element:this.renderEditDialog(this.props.groupId)})}},{key:"onEditMembers",value:function e(){this.props.openModal({element:this.renderEditMembersDialog()})}},{key:"onEnableUserGroup",value:function e(){this.props.onClick();return this.props.onEnableUserGroup()}},{key:"getEditMenuItems",value:function e(){if(!this.props.featureSonicUserGroups)return null;var t=this.props,a=t.isAutoGenerated,r=t.isDetailsView;if(a&&r)return null;var n=[];r||a||n.push({key:"menu-edit-members",label:se.t("Edit group members..."),onSelected:this.onEditMembers});n.push({key:"menu-edit-details",label:se.t("Edit group details..."),onSelected:this.onEditDetails});return n}},{key:"getMenuItems",value:function e(){var t=this;if(!this.props.featureSonicUserGroups)return null;var a=[];if(this.userGroupIsEditable()){var r=this.getEditMenuItems();r&&a.push.apply(a,re()(r))}this.canEnableUserGroup()?a.push({key:"menu-enable",label:se.t("Enable group"),onSelected:function e(){return t.onEnableUserGroup()}}):this.canDisableUserGroup()&&a.push({key:"menu-disable",label:se.t("Deactivate group"),danger:true,onSelected:function e(){return t.onDisableUserGroup()}});return a}},{key:"canDisableUserGroup",value:function e(){return this.props.canCreateAndDeleteUserGroups()&&this.props.isActive}},{key:"canEnableUserGroup",value:function e(){return this.props.canCreateAndDeleteUserGroups()&&!this.props.isActive}},{key:"userGroupIsEditable",value:function e(){return this.props.canEditUserGroups()&&this.props.isActive}},{key:"renderConfirmationDialog",value:function e(t){var a=t.action,r=t.onSubmit;var n=this.props.groupId;return y.a.createElement(Pe,{groupId:n,action:a,onSubmit:r})}},{key:"renderEditDialog",value:function e(t){return y.a.createElement(ne["a"],{userGroupId:t})}},{key:"renderEditMembersDialog",value:function e(){var t=this.props.groupId;return y.a.createElement(Xe,{groupId:t})}},{key:"render",value:function e(){if(!this.props.featureSonicUserGroups)return null;return y.a.createElement(K["f"],n()({},this.props.menuProps,{width:"auto"}),this.getMenuItems().map(function(e){return y.a.createElement(K["b"],e)}))}}]);return t}(_["PureComponent"]);oe.displayName="UserGroupContextMenu";oe.defaultProps=ie;var le=function e(t,a){var r=a.groupId,n=a.isDetailsView;var i=Object(M["f"])(t,r);var s=Object(B["v"])(i);var o=Object(B["n"])(i);var l=Object(j["isFeatureEnabled"])(t,"feature_sonic_user_groups");return{isActive:s,isAutoGenerated:o,isDetailsView:n,canEditUserGroups:function e(){return Object(B["c"])(t)},canCreateAndDeleteUserGroups:function e(){return Object(B["b"])(t)},featureSonicUserGroups:l}};var ce=function e(t,a){var r=a.groupId,n=a.isIAPhase1Enabled;return{openModal:function e(){return t(R["openModal"].apply(void 0,arguments))},onLoad:function e(){return t(Object(P["j"])({groupId:r}))},onDisableUserGroup:function e(){t(Object(P["h"])({groupId:r})).then(function(){n||t(Object(L["p"])())})},onEnableUserGroup:function e(){t(Object(P["i"])({groupId:r})).then(function(){return t(Object(L["o"])({groupId:r}))})}}};var ue=Object(C["connect"])(le,ce)(oe);var de=a(2484);var pe=new G["b"]("user_groups");var me={userGroup:void 0,isIAPhase1Enabled:false};var he=function(e){g()(t,e);function t(e){var a;l()(this,t);a=p()(this,h()(t).call(this,e));a.renderUserGroupOptionsMenu=a.renderUserGroupOptionsMenu.bind(f()(a));return a}u()(t,[{key:"renderEditDetailsButton",value:function e(){if(!this.props.featureSonicUserGroups)return null;return y.a.createElement(X["d"],{type:"outline",className:"p-user_group_details__button--edit",onClick:this.props.onEditDetails,"data-qa-user-group-details-edit-details-btn":true},pe.t("Edit Details"))}},{key:"renderEditMembersButton",value:function e(){if(!this.props.featureSonicUserGroups)return null;return y.a.createElement(X["d"],{type:"outline",className:"p-user_group_details__button--edit",onClick:this.props.onEditMembers,"data-qa-user-group-details-edit-members-btn":true},pe.t("Edit Members"))}},{key:"renderPrimaryAction",value:function e(){if(Object(B["n"])(this.props.userGroup))return this.renderEditDetailsButton();return this.renderEditMembersButton()}},{key:"renderUserGroupOptions",value:function e(){if(!this.props.featureSonicUserGroups)return null;var t=pe.t("More actions");return y.a.createElement(K["e"],{renderMenu:this.renderUserGroupOptionsMenu,position:"bottom-right"},y.a.createElement(te["c"],{tip:t,delay:te["a"],position:"top-right"},y.a.createElement(X["d"],{type:"outline",className:"p-user_group_details__button--options","data-qa-user-group-details-group-options-btn":true,"aria-label":t,icon:"ellipsis"})))}},{key:"renderUserGroupOptionsMenu",value:function e(t){return y.a.createElement(ue,{menuProps:t,groupId:this.props.userGroup.id,isDetailsView:true,isIAPhase1Enabled:this.props.isIAPhase1Enabled})}},{key:"render",value:function e(){if(!this.props.featureSonicUserGroups)return null;return y.a.createElement("div",{className:"p-user_group_details__actions"},this.renderPrimaryAction(),this.renderUserGroupOptions())}}]);return t}(_["Component"]);he.displayName="UserGroupsDetailsActionBar";var ve=function e(t,a){var r=a.groupId;return{userGroup:Object(M["f"])(t,r),featureSonicUserGroups:Object(j["isFeatureEnabled"])(t,"feature_sonic_user_groups"),isIAPhase1Enabled:Object(ee["e"])(t)}};he.defaultProps=me;var fe=Object(C["connect"])(ve)(he);var be={members:"members",channels:"channels"};var ge=new G["b"]("user_groups");var _e={userGroup:{},fetchUserGroupMembers:S["noop"],onChannelSwitch:S["noop"],removeMember:S["noop"],removeChannel:S["noop"],openModal:S["noop"],enqueueToast:S["noop"],canEditUserGroups:S["noop"],canCreateAndDeleteUserGroups:S["noop"],userGroupMembers:[],newMembers:[],userGroupDefaultChannels:[],showMemberProfile:S["noop"],openPeopleBrowser:S["noop"],getPrefCompliantMemberNameLowerCase:S["noop"],onEnableUserGroup:S["noop"],featureSonicUserGroups:false};var ye=Object(H["b"])();var Oe=function(e){g()(t,e);function t(e){var a;l()(this,t);a=p()(this,h()(t).call(this,e));a.state={sortedMembers:[],freshMount:true};Object(w["a"])(f()(a),["onViewProfile","onRemoveFromGroup","onAddMembers","onAddChannels","renderMemberItem","renderChannelItem","renderChannelsList","renderMembersList","renderListItemOptionsMenu","renderConfirmationDialog","renderContent","focus","getAriaLabelForChannelRow","getAriaLabelForMemberRow","onItemTabWithin","sortMembers","setSortedMembers","setAndUpdateSortedMembers"]);a.memberList=y.a.createRef();a.channelsList=y.a.createRef();a.flexpane=y.a.createRef();a.channelListKeys=null;a.memberListKeys=null;return a}u()(t,[{key:"componentDidMount",value:function e(){Object(B["v"])(this.props.userGroup)&&this.props.fetchUserGroupMembers("user-group-details/componentDidMount")}},{key:"componentDidUpdate",value:function e(t){var a=t.userGroup,r=a.users,n=s()(a,["users"]);var i=this.props.userGroup,o=i.users,l=s()(i,["users"]);var c=this.props.userGroupMembers;var u=this.state.freshMount;Object(S["isEqual"])(n,l)||this.props.fetchUserGroupMembers("user-group-details/componentDidUpdate");(u&&!Object(S["isEqual"])(t.userGroupMembers,c)||u&&t.userGroupMembers.length)&&this.setSortedMembers(this.sortMembers(c));u||Object(S["isEqual"])(t.userGroupMembers,c)||this.setAndUpdateSortedMembers(this.state.sortedMembers,c)}},{key:"onAddChannels",value:function e(){this.displayEditDetailsDialog()}},{key:"onAddMembers",value:function e(){this.displayMemberManagementDialog()}},{key:"onItemTabWithin",value:function e(){var t=this.flexpane.current;t&&t.setInitialActiveSection()}},{key:"onRemoveChannel",value:function e(t){var a=this;if(!this.props.featureSonicUserGroups)return;this.props.openModal({element:this.renderConfirmationDialog({action:"remove_channel",onSubmit:function e(){a.props.removeChannel(t).then(function(){a.props.enqueueToast({element:y.a.createElement(V["b"],null,ge.t("Channel removed from group."))})}).catch(function(e){ye.error("Error removing default channel from user group: "+e)})},id:t})})}},{key:"onRemoveFromGroup",value:function e(t){var a=t.type,r=t.id;a===be.members?this.onRemoveMember(r):a===be.channels&&this.onRemoveChannel(r)}},{key:"onRemoveMember",value:function e(t){var a=this;if(!this.props.featureSonicUserGroups)return;this.props.openModal({element:this.renderConfirmationDialog({action:"remove_member",onSubmit:function e(){a.props.removeMember(t).then(function(){a.props.enqueueToast({element:y.a.createElement(V["b"],null,ge.t("Member removed from group."))})}).catch(function(e){ye.error("Error removing member from user group: "+e);"no_users_provided"===e.data.error&&a.props.enqueueToast({element:y.a.createElement(V["b"],null,ge.t("User groups need to have at least one member."))})})},id:t})})}},{key:"onViewProfile",value:function e(t){var a=t.type,r=t.id;if(a===be.members)return this.props.showMemberProfile({memberId:r});if(a===be.channels)return this.props.onChannelSwitch(r);return null}},{key:"getAriaLabelForChannelRow",value:function e(t){var a=t.index;if(!this.channelListKeys)return;var r=this.props.userGroupDefaultChannels;var n=r[a];var i=Object(I["a"])({type:Object(A["getChannelType"])(n),displayName:Object(A["getDisplayName"])(n),isShared:Object(A["isExternallySharedChannel"])(n),isOrgShared:Object(A["isOrgShared"])(n),isArchived:Object(A["isArchived"])(n)});return{"aria-label":i}}},{key:"getAriaLabelForMemberRow",value:function e(t){var a=t.index;if(!this.memberListKeys)return;var r=this.props.userGroupMembers;var n=r[a];var i=Object(T["a"])({name:Object(N["getMemberRealName"])(n),isDeleted:Object(N["isDeleted"])(n),isAppOrBot:false,isGuest:false});return{"aria-label":i}}},{key:"getTabs",value:function e(){if(!this.props.featureSonicUserGroups)return null;var t=this.props,a=t.userGroup,r=t.userGroupDefaultChannels,n=void 0===r?[]:r;var i=Object(B["l"])(a);return[{title:ge.rt("Members"),titleCount:i,id:"user-groups-members-tab",content:this.renderMembersList()},{title:ge.rt("Channels"),titleCount:n.length,id:"user-groups-channels-tab",content:this.renderChannelsList()}]}},{key:"setAndUpdateSortedMembers",value:function e(t,a){var r=Object(S["intersection"])(t,a);var n=Object(S["difference"])(a,t);r=r.concat(n);this.setState(function(){return{sortedMembers:r}})}},{key:"setSortedMembers",value:function e(t){this.setState(function(){return{sortedMembers:t}})}},{key:"canRemoveItem",value:function e(t){var a=this.props.userGroup;if(t===be.members&&Object(B["n"])(a))return false;return true}},{key:"displayEditDetailsDialog",value:function e(){this.props.openModal({element:this.renderEditDetailsDialog()})}},{key:"displayMemberManagementDialog",value:function e(){this.props.openModal({element:this.renderEditMembersDialog()})}},{key:"focus",value:function e(){var t=this.memberList.current||this.channelsList.current;t&&t.focus()}},{key:"sortMembers",value:function e(t){var a=this;this.setState(function(){return{freshMount:false}});return Object(S["sortBy"])(t,function(e){return a.props.getPrefCompliantMemberNameLowerCase(e)})}},{key:"userGroupIsEditable",value:function e(){var t=this.props.userGroup;return this.props.canEditUserGroups()&&Object(B["v"])(t)}},{key:"renderActions",value:function e(){var t=this;if(!this.props.featureSonicUserGroups)return null;if(!this.userGroupIsEditable()||!this.props.canEditUserGroups())return null;return y.a.createElement("div",{className:"p-user_group_details__section"},y.a.createElement(fe,{groupId:this.props.groupId,onEditMembers:function e(){return t.displayMemberManagementDialog()},onEditDetails:function e(){return t.displayEditDetailsDialog()}}))}},{key:"renderChannelItem",value:function e(){var t=this;var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var r=this.userGroupIsEditable();var n=E()("p-user_group_details__list_item",{"p-user_group_details__list_item--has_options":r});var i={className:n,isContextButtonVisible:r,tooltip:this.renderTooltip(),onClick:function e(){return t.onViewProfile({type:be.channels,id:a.id})},renderMenu:function e(r){return t.renderListItemOptionsMenu({menuProps:r,id:a.id,type:be.channels})},customProps:{key:a.id,"data-qa-user-group-details-channels-list-item":true,"data-qa-user-group-details-channels-list-item-id":a.id},id:a.id};return y.a.createElement(He,i)}},{key:"renderChannelsList",value:function e(){var t=this;var a=this.props,r=a.userGroupDefaultChannels,n=a.userGroup;if(!r||Object(S["isEmpty"])(r))return this.renderEmptyChannelState();this.channelListKeys=Object(S["map"])(r,"id");var i=Object(B["h"])(n);return y.a.createElement(W["a"],null,function(e){var a=e.width,n=e.height,s=e.measureRef;return y.a.createElement("div",{className:"p-user_group_details__list","data-qa-user-group-details-channels-list":true,ref:s},y.a.createElement(Y["a"],{ref:t.channelsList,width:a,height:n,keys:t.channelListKeys,rowRenderer:function e(a){return t.renderChannelItem(r[a])},"aria-label":ge.t("{userGroupName} Default Channels",{userGroupName:i}),getPropsForItem:t.getAriaLabelForChannelRow,onItemTabWithin:t.onItemTabWithin}))})}},{key:"renderConfirmationDialog",value:function e(t){var a=t.action,r=t.onSubmit,n=t.id;var i=this.props.groupId;return y.a.createElement(Pe,{action:a,onSubmit:r,id:n,groupId:i})}},{key:"renderEnableGroupButton",value:function e(){return y.a.createElement("div",{className:"p-user_group_details__section"},y.a.createElement(X["d"],{className:"p-user_group_details__button--edit",type:"outline",onClick:this.props.onEnableUserGroup},ge.t("Enable group")))}},{key:"renderContent",value:function e(){if(!this.props.featureSonicUserGroups)return null;var t=this.props.userGroup;var a=Object(B["v"])(t);return y.a.createElement("div",{className:"p-user_group_details p-user_group__content","data-qa-user-group-details":true,"data-qa-user-group-details-id":t.id},this.renderHeader(),a&&this.renderActions(),a&&this.renderTabs(),!a&&this.props.canCreateAndDeleteUserGroups()?this.renderEnableGroupButton():null)}},{key:"renderEditDetailsDialog",value:function e(){var t=this.props.groupId;return y.a.createElement(ne["a"],{userGroupId:t})}},{key:"renderEditMembersDialog",value:function e(){var t=this.props.groupId;return y.a.createElement(Xe,{groupId:t})}},{key:"renderEmptyChannelState",value:function e(){if(!this.props.featureSonicUserGroups)return null;var t=ge.t("Add Default Channels");var a=ge.t("No default channels");var r=ge.t("All members of a user group are automatically added to its default channels.");var n=this.userGroupIsEditable();return y.a.createElement("div",{className:"p-user_group_details__empty_list"},y.a.createElement(Q["a"],{title:a,description:r,primaryActionText:n?t:null,onClickPrimaryAction:n?this.onAddChannels:null}))}},{key:"renderEmptyMemberState",value:function e(){if(!this.props.featureSonicUserGroups)return null;var t=this.props.openPeopleBrowser;var a=ge.t("Nobody\u2019s in this group");var r=ge.t("You can add a few people with the button below.",{fallbackHash:"32b2dad876a61039ba234bd6df16d4f15057cbcc"});var n=ge.rt("Contact a <Link>workspace administrator</Link> to add members.",{fallbackHash:"32b2dad876a61039ba234bd6df16d4f15057cbcc"},function(e){var a=e.key,r=e.text;return y.a.createElement(J["a"],{key:a,onClick:function e(){return t({filters:{accountType:"admins"}})}},r)});var i=ge.t("Add Members");var s=this.userGroupIsEditable();return y.a.createElement("div",{className:"p-user_group_details__empty_list","data-qa-user-group-members-empty-list":true},y.a.createElement(Q["a"],{title:a,description:s?r:n,primaryActionText:s?i:null,onClickPrimaryAction:s?this.onAddMembers:null}))}},{key:"renderHeader",value:function e(){var t=this.props.userGroup;var a=Object(B["h"])(t);var r=Object(B["v"])(t)?a:ge.t("{name} (Deactivated)",{name:a});return y.a.createElement("div",{className:"p-user_group_details__section"},y.a.createElement("div",{className:"p-user_group_details__name"},r),y.a.createElement("div",{className:"p-user_group_details__description"},Object(B["e"])(t)),y.a.createElement("div",{className:"p-user_group_details__handle"},Object(B["f"])(t,{includeAtSign:true})))}},{key:"renderListItemOptionsMenu",value:function e(t){var a=this;var r=t.menuProps,i=t.id,s=t.type;if(!this.props.featureSonicUserGroups)return null;var o=s===be.channels?ge.t("Open channel"):ge.t("View profile");var l=[y.a.createElement(K["b"],{key:i,label:o,onSelected:function e(){return a.onViewProfile({type:s,id:i})}})];this.canRemoveItem(s)&&l.push(y.a.createElement(K["b"],{key:i,label:ge.t("Remove from group..."),onSelected:function e(){return a.onRemoveFromGroup({type:s,id:i})},danger:true}));return y.a.createElement(K["f"],n()({},r,{width:"auto"}),l)}},{key:"renderMemberItem",value:function e(){var t=this;var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var r=this.userGroupIsEditable();var n=Object(S["includes"])(this.props.newMembers,a);var i=E()("p-user_group_details__list_item",{"p-user_group_details__list_item--has_options":r,"p-user_group_base_row--active":n});var s={className:i,isContextButtonVisible:r,tooltip:this.renderTooltip(),onClick:function e(){return t.onViewProfile({type:be.members,id:a.id})},renderMenu:function e(r){return t.renderListItemOptionsMenu({menuProps:r,id:a.id,type:be.members})},customProps:{key:a.id,"data-qa-user-group-details-members-list-item":true,"data-qa-user-group-details-members-list-item-id":a.id},id:a.id};return y.a.createElement(He,s)}},{key:"renderMembersList",value:function e(){var t=this;var a=this.props,r=a.userGroup,n=a.userGroupMembers;var i=this.state.sortedMembers;if(!n||Object(S["isEmpty"])(n))return this.renderEmptyMemberState();this.memberListKeys=Object(S["map"])(i,"id");var s=Object(B["h"])(r);return y.a.createElement(W["a"],null,function(e){var a=e.width,r=e.height,n=e.measureRef;return y.a.createElement("div",{className:"p-user_group_details__list","data-qa-user-group-details-members-list":true,ref:n},y.a.createElement(Y["a"],{ref:t.memberList,width:a,height:r,keys:t.memberListKeys,rowRenderer:function e(a){return t.renderMemberItem(i[a])},"aria-label":ge.t("{userGroupName} Members",{userGroupName:s}),getPropsForItem:t.getAriaLabelForMemberRow,onItemTabWithin:t.onItemTabWithin}))})}},{key:"renderTabs",value:function e(){var t="user-groups-members-tab";var a=this.getTabs();return y.a.createElement(z["a"],{tabs:a,defaultTabId:t,fullHeight:true,fullWidthMenu:true})}},{key:"renderTooltip",value:function e(){if(!this.props.featureSonicUserGroups)return null;return ge.t("More actions")}},{key:"render",value:function e(){var t=this.props.featureSonicUserGroups;if(!t)return null;var a=ge.t("User Groups");return y.a.createElement($["b"],{"aria-label":a,ref:this.flexpane,focus:this.focus,className:"p-user_groups_flexpane_container",onOptionsClick:this.onCreateUserGroup,renderBody:this.renderContent,title:a,viewId:"user-group-details",kbNavOrder:Object(q["a"])()?void 0:7})}}]);return t}(_["PureComponent"]);Oe.displayName="UserGroupDetails";Oe.defaultProps=_e;var ke=function e(t,a){var r=a.groupId;var n=Object(M["f"])(t,r);var i=Object(j["isFeatureEnabled"])(t,"feature_sonic_user_groups");if(Object(B["t"])(n))return{userGroup:n,featureSonicUserGroups:i};var s=Object(B["g"])(n);var o=Object(S["map"])(s,function(e){return Object(x["e"])(t,e)});var l=Object(B["d"])(t,n);var c=Object(S["map"])(l,function(e){return Object(D["e"])(t,e)});return{userGroup:n,featureSonicUserGroups:i,userGroupMembers:o,userGroupDefaultChannels:c,canEditUserGroups:function e(){return Object(B["c"])(t)},canCreateAndDeleteUserGroups:function e(){return Object(B["b"])(t)},getPrefCompliantMemberNameLowerCase:function e(a){return Object(N["getPrefCompliantMemberNameLowerCase"])(t,a)}}};var Ee=function e(t,a){var r=a.groupId;return{openModal:function e(){return t(R["openModal"].apply(void 0,arguments))},fetchUserGroupMembers:function e(a){return t(Object(P["j"])({groupId:r,reason:a}))},removeMember:function e(a){return t(Object(P["n"])({groupId:r,memberId:a}))},removeChannel:function e(a){return t(Object(P["m"])({groupId:r,channelId:a}))},onChannelSwitch:function e(a){return t(Object(U["a"])({id:a}))},onEnableUserGroup:function e(){return t(Object(P["i"])({groupId:r}))},enqueueToast:function e(){return t(F["enqueueToast"].apply(void 0,arguments))},showMemberProfile:function e(){return t(L["k"].apply(void 0,arguments))},openPeopleBrowser:function e(){return t(Z["a"].apply(void 0,arguments))}}};var Ce=Object(C["connect"])(ke,Ee)(Oe);var Se=a(153);var we=a(124);var je=a(117);var Ie=new G["b"]("user_groups");var Te={label:"",groupName:"",featureSonicUserGroups:false};var Ae=function(e){g()(t,e);function t(e){var a;l()(this,t);a=p()(this,h()(t).call(this,e));a.onGo=a.onGo.bind(f()(a));return a}u()(t,[{key:"onGo",value:function e(){return this.props.onSubmit()}},{key:"getButtonText",value:function e(){if(!this.props.featureSonicUserGroups)return"";var t=this.props.action;switch(t){case"disable_group":return Ie.t("Deactivate");case"remove_member":case"remove_channel":return Ie.t("Remove");default:}return""}},{key:"getDialogBody",value:function e(){if(!this.props.featureSonicUserGroups)return"";var t=this.props,a=t.groupName,r=t.label,n=t.action;switch(n){case"disable_group":return Ie.rt("If you deactivate this user group, you won\u2019t be able to use <strong>{groupName}</strong> or view a list of its members. You can reactivate this group at any time.",{groupName:a});case"remove_member":return Ie.rt("Are you sure you want to remove <strong>{label}</strong> from the <strong>{groupName}</strong> user group?",{label:r,groupName:a});case"remove_channel":return Ie.rt("Are you sure you want to remove <strong>{label}</strong> as a default channel for the <strong>{groupName}</strong> user group?",{label:r,groupName:a});default:}return""}},{key:"getTitle",value:function e(){if(!this.props.featureSonicUserGroups)return"";var t=this.props,a=t.action,r=t.groupName;switch(a){case"disable_group":return Ie.t("Deactivate {groupName}?",{groupName:r});case"remove_member":return Ie.t("Remove from group?");case"remove_channel":return Ie.t("Remove default channel?");default:}return""}},{key:"render",value:function e(){return y.a.createElement(je["a"],{showHeader:true,showGoButton:true,title:this.getTitle(),goButtonText:this.getButtonText(),goButtonType:"danger",onGo:this.onGo},y.a.createElement("p",null,this.getDialogBody()))}}]);return t}(_["Component"]);Ae.displayName="UserGroupConfirmationDialog";Ae.defaultProps=Te;var Ne=function e(t,a){var r=a.id,n=a.groupId;var i="";var s=Object(M["f"])(t,n);if(Object(we["a"])(r)){var o=Object(D["e"])(t,r);i=Object(A["getDisplayNameForChannel"])(t,o)}else if(Object(Se["a"])(r)){var l=Object(x["e"])(t,r);i=Object(N["getMemberRealName"])(l)}return{groupName:Object(B["h"])(s),label:i,featureSonicUserGroups:Object(j["isFeatureEnabled"])(t,"feature_sonic_user_groups")}};var Pe=Object(C["connect"])(Ne)(Ae);var Me=a(2224);var De=a(1899);var xe=a(5124);var Re=a(1444);var Fe=a(1604);var Le=a(341);var Ue=a(3800);var Be=new G["b"]("user_groups");var qe={id:null,className:"",isContextButtonVisible:false,onClick:S["noop"],tooltip:void 0};var Ge=function(e){g()(t,e);function t(){l()(this,t);return p()(this,h()(t).apply(this,arguments))}u()(t,[{key:"getTooltipLabel",value:function e(){return this.props.tooltip||Be.t("Edit user groups")}},{key:"renderContextButton",value:function e(){var t=this.props,a=t.isContextButtonVisible,r=t.renderMenu;if(!a)return null;var n={tooltip:this.getTooltipLabel(),icon:"ellipsis",tooltipPosition:"top-right",onClick:r,menuProps:{renderMenu:r,width:"auto"}};return y.a.createElement(De["b"],{customClasses:"p-user_group_base_row__list_item_option"},y.a.createElement(De["a"],n))}},{key:"render",value:function e(){var t=this.props,a=t.className,r=t.id,n=t.onClick;var i=E()("p-user_group_base_row__list_item","p-user_group_base_row__entity",{"p-user_group_base_row__entity_group":r&&Object(Le["a"])(r)},a);if(Object(we["a"])(r))return y.a.createElement(Re["a"],{channelId:r,secondaryContent:this.renderContextButton(),showPurpose:false,onClick:n,className:i});if(Object(Se["a"])(r))return y.a.createElement(Fe["a"],{className:i,id:r,secondaryContent:this.renderContextButton()});return y.a.createElement(xe["a"],{id:r,secondaryContent:this.renderContextButton(),className:i})}}]);return t}(_["PureComponent"]);Ge.displayName="UserGroupBaseRow";Ge.defaultProps=qe;var He=Ge;var We=a(2797);var Ve=a(2341);var Ke=new G["b"]("user_groups");var ze={featureSonicUserGroups:false};var Qe=function(e){g()(t,e);function t(e){var a;l()(this,t);a=p()(this,h()(t).call(this,e));a.state={searchResultMode:false,disableGoButton:false};Object(w["a"])(f()(a),["onSave","onUpsertSuccess","onToggleSearchResultsMode","setUserGroupMemberManagementRef","onSelectedItemsChange"]);a.userGroupMemberManagementRef=null;return a}u()(t,[{key:"onSave",value:function e(){if(!this.userGroupMemberManagementRef)return false;var t=this.userGroupMemberManagementRef.validateUpdatedGroupMemberCount();if(!t)return false;var a=this.userGroupMemberManagementRef.getUpdatedUserGroupMembers();return this.props.bulkUpsertUserGroupMembers(a).then(this.onUpsertSuccess).catch(this.onUpsertFailure)}},{key:"onSelectedItemsChange",value:function e(t){this.setState(function(){return{disableGoButton:!t.length}})}},{key:"onToggleSearchResultsMode",value:function e(){this.setState(function(e){return{searchResultMode:!e.searchResultMode}})}},{key:"onUpsertFailure",value:function e(t){Object(H["b"])().error("Error updating user group members: "+JSON.stringify(t))}},{key:"onUpsertSuccess",value:function e(){if(!this.props.featureSonicUserGroups)return;this.props.enqueueToast({element:y.a.createElement(V["b"],null,Ke.t("Group has been updated."))})}},{key:"setUserGroupMemberManagementRef",value:function e(t){this.userGroupMemberManagementRef=t&&t.getWrappedInstance?t.getWrappedInstance():t}},{key:"render",value:function e(){if(!this.props.featureSonicUserGroups)return null;var t=Ke.t("Edit members");return y.a.createElement(je["a"],{showHeader:true,showGoButton:true,showFooter:true,bodyClassName:"p-user_group_member_management__dialog_body",title:t,contentLabel:t,goButtonText:Ke.t("Save"),onGo:this.onSave,goOnEnterPressed:false,goButtonIsDisabled:this.state.disableGoButton},y.a.createElement(We["a"],{groupId:this.props.groupId,ref:this.setUserGroupMemberManagementRef,onSelectedItemsChange:this.onSelectedItemsChange}))}}]);return t}(_["PureComponent"]);Qe.displayName="UserGroupMemberManagementDialog";Qe.defaultProps=ze;var Ye=function e(t){return{featureSonicUserGroups:Object(j["isFeatureEnabled"])(t,"feature_sonic_user_groups")}};var Je=function e(t,a){var r=a.groupId;return{bulkUpsertUserGroupMembers:function e(a){return t(Object(P["f"])({groupId:r,users:a}))},enqueueToast:function e(){return t(F["enqueueToast"].apply(void 0,arguments))}}};var Xe=Object(C["connect"])(Ye,Je)(Qe);var Ze=a(119);var $e=a(88);var et=a.n($e);var tt=a(874);var at=a(428);var rt=a(5089);var nt=a(2741);var it=a(2485);function st(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function ot(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?st(Object(a),true).forEach(function(t){et()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):st(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var lt={userGroups:{},featureSonicUserGroups:false,openModal:S["noop"],searchTerm:"",searchQuery:"",onSearchInputChange:S["noop"],onClearSearch:S["noop"],setSearchQuery:S["noop"],shouldDisplayCreateUserGroupOption:false,isActive:S["noop"],showUserGroupDetails:S["noop"]};var ct=new G["b"]("user_groups");var ut=function(e){g()(t,e);function t(e){var a;l()(this,t);a=p()(this,h()(t).call(this,e));Object(w["a"])(f()(a),["onCreateUserGroup","onSearchInputChange","renderRow","renderContent","onClearSearch","focus","onItemClick","onItemTabWithin"]);a.searchableGroupList=y.a.createRef();a.groupList=y.a.createRef();a.flexpane=y.a.createRef();return a}u()(t,[{key:"onClearSearch",value:function e(){return this.props.setSearchQuery("")}},{key:"onCreateUserGroup",value:function e(){this.props.openModal({element:this.renderCreateEditDialog()})}},{key:"onItemClick",value:function e(t){var a=t.id;this.props.isActive(a)&&this.props.showUserGroupDetails({groupId:a})}},{key:"onItemTabWithin",value:function e(){var t=this.flexpane.current;t&&t.setInitialActiveSection()}},{key:"onSearchInputChange",value:function e(t){return this.props.setSearchQuery(t.target.value)}},{key:"getGroupedUserGroups",value:function e(t){var a=Object(S["groupBy"])(t,function(e){return Object(B["v"])(e)?"active":"inactive"});a.active=a.active||[];a.inactive=a.inactive||[];return a.active.concat(a.inactive)}},{key:"getSearchResults",value:function e(t,a){var r=this;if(!a)return Object.values(t);return Object(S["filter"])(t,function(e){if(!e)return false;var t=Object(B["h"])(e);var n=Object(B["f"])(e)||"";var i=Object(B["e"])(e)||"";if(r.checkForMatch(t,a))return true;if(r.checkForMatch(n,a))return true;if(r.checkForMatch(i,a,false))return true;return false})}},{key:"getSortedResults",value:function e(t){return Object(S["sortBy"])(t,function(e){var t=Object(B["h"])(e);return t.toLocaleLowerCase()})}},{key:"checkForMatch",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.prepStringForSearch(t,r).includes(this.prepStringForSearch(a,r))}},{key:"focus",value:function e(){var t=this.searchableGroupList.current||this.groupList.current;t&&t.focus()}},{key:"prepStringForSearch",value:function e(t,a){if(!t)return"";var r=t.toLocaleLowerCase();a&&(r=r.replace(/[\s-_]/g,""));return Object(G["a"])(r)}},{key:"renderContent",value:function e(){return y.a.createElement("div",{className:"p-user_group__content"},this.renderSearch(),this.renderSearchableList())}},{key:"renderCreateEditDialog",value:function e(){return y.a.createElement(ne["a"],null)}},{key:"renderEmptySearchResults",value:function e(){if(!this.props.featureSonicUserGroups)return null;return y.a.createElement("div",{className:"p-user_group_list__empty_search_results"},y.a.createElement("div",{className:"p-user_group_list__empty_search_results_subtext"},ct.rt("No matches found for <strong>{searchTerm}</strong>",{searchTerm:this.props.searchTerm})),y.a.createElement(X["d"],{type:"outline",size:"small",onClick:this.props.onClearSearch},ct.t("Clear Search")))}},{key:"renderRow",value:function e(t){var a=this.keys[t];return y.a.createElement(nt["a"],{id:a})}},{key:"renderSearch",value:function e(){var t=this.props.searchQuery;if(!this.props.featureSonicUserGroups)return null;return y.a.createElement("div",{className:"p-user_group_list__search"},y.a.createElement(at["a"],{value:t,onChange:this.onSearchInputChange,placeholder:ct.t("Find by name..."),autoFocus:true,icon:"search"}))}},{key:"renderSearchableList",value:function e(){return y.a.createElement(rt["a"],{ref:this.searchableGroupList,onCreateUserGroup:this.onCreateUserGroup,includeDeactivated:true,onClearSearch:this.onClearSearch,onItemClick:this.onItemClick,onItemTabWithin:this.onItemTabWithin})}},{key:"render",value:function e(){var t=this.props,a=t.featureSonicUserGroups,r=t.shouldDisplayCreateUserGroupOption;if(!a)return null;var i=ct.t("User Groups");var s={renderBody:this.renderContent,title:i,viewId:"user-group-list"};if(r){s.onOptionsClick=this.onCreateUserGroup;s.headerProps={optionsIconType:"compose-dm",optionsTooltipText:ct.t("Create a user group")}}return y.a.createElement($["b"],n()({"aria-label":i,ref:this.flexpane,focus:this.focus,className:"p-user_groups_flexpane_container"},s,{kbNavOrder:Object(q["a"])()?void 0:7}))}}]);return t}(_["PureComponent"]);ut.displayName="UserGroupList";ut.defaultProps=lt;var dt=function e(t,a){var r=Object(M["b"])(t);var n=Object(j["isFeatureEnabled"])(t,"feature_sonic_user_groups");var i=Object(B["b"])(t);return ot({userGroups:r,searchQuery:Object(tt["getSearchQuery"])(t),featureSonicUserGroups:n,shouldDisplayCreateUserGroupOption:i,isActive:function e(a){return Object(B["v"])(Object(M["f"])(t,a))}},a)};var pt={openModal:R["openModal"],setSearchQuery:tt["setSearchQuery"],showUserGroupDetails:L["o"]};var mt=Object(C["connect"])(dt,pt)(ut);var ht=a(3807);var vt={groupId:null,featureSonicUserGroups:false,userGroupMembers:[]};var ft=function(e){g()(t,e);function t(e){var a;l()(this,t);a=p()(this,h()(t).call(this,e));a.state={newMembers:[],timeoutId:null,searchTerm:""};Object(w["a"])(f()(a),["onSearchInputChange","onClearSearch"]);return a}u()(t,[{key:"componentDidUpdate",value:function e(t){var a=this;var r=[];t.userGroupMembers.length&&!Object(S["isEqual"])(t.userGroupMembers,this.props.userGroupMembers)&&(r=Object(S["differenceBy"])(this.props.userGroupMembers,t.userGroupMembers,"id"));if(r.length){this.setState(function(){return{newMembers:r}});var n=this.state.timeoutId;n&&clearTimeout(n);var i=setTimeout(function(){a.setState(function(){return{newMembers:[]}})},1050);this.setState(function(){return{timeoutId:i}})}}},{key:"onClearSearch",value:function e(){this.setState(function(){return{searchTerm:""}})}},{key:"onSearchInputChange",value:function e(t){var a=t.target.value;this.setState(function(){return{searchTerm:a}})}},{key:"render",value:function e(){if(!this.props.featureSonicUserGroups)return null;var t=this.props.groupId;var a=this.state,r=a.newMembers,n=a.searchTerm;if(t)return y.a.createElement(Ce,{groupId:t,newMembers:r});return y.a.createElement(mt,{searchTerm:n,onSearchInputChange:this.onSearchInputChange,onClearSearch:this.onClearSearch})}}]);return t}(_["PureComponent"]);ft.displayName="UserGroupsFlexpane";ft.defaultProps=vt;var bt=function e(t){var a=Object(Ze["f"])(t)[0];var r=Object(M["f"])(t,a);var n=Object(B["g"])(r);var i=Object(S["map"])(n,function(e){return Object(x["e"])(t,e)});return{groupId:a,userGroupMembers:i,featureSonicUserGroups:Object(j["isFeatureEnabled"])(t,"feature_sonic_user_groups")}};var gt=Object(C["connect"])(bt)(ft);a.d(t,"d",function(){return ne["a"]});a.d(t,"b",function(){return Pe});a.d(t,"c",function(){return ue});a.d(t,"a",function(){return He});a.d(t,"e",function(){return Xe});var _t=t["f"]=gt},,function(e,t,a){"use strict";var r=a(1);var n=a.n(r);var i=a(0);var s=a(13);var o=a.n(s);var l=a(646);var c=a(3802);var u=a.n(c);var d={className:void 0};function p(e){var t=e.className,a=e.children;return n.a.createElement(l["a"],null,function(e){var r=e.width,i=e.height,s=e.measureRef;return n.a.createElement("div",{ref:s,className:o()(t,"c-measure_container")},a({width:r,height:i}))})}p.displayName="MeasureContainer";p.defaultProps=d;t["a"]=p},function(e,t,a){},function(e,t,a){"use strict";var r=a(196);var n=a.n(r);var i=a(245);var s=a.n(i);var o=a(110);var l=a.n(o);var c=a(135);var u=a.n(c);var d=a(169);var p=a.n(d);var m=a(138);var h=a.n(m);var v=a(147);var f=a.n(v);var b=a(185);var g=a.n(b);var _=a(1);var y=a.n(_);var O=a(0);var k=a(12);var E=a(13);var C=a.n(E);var S=a(163);var w=a(2);var j=a(874);var I=a(192);var T=a(11);var A=a(6);var N=a(61);var P=new A["b"]("a11y");function M(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,a=e.handle,r=e.purpose,n=e.isDeactivated,i=e.memberCount,s=void 0===i?void 0:i;if(!t)return"";var o=!Object(w["isUndefined"])(s);if(a&&r&&n&&!o)return P.t("{name}, @{handle}, {purpose} (deactivated)",{name:t,handle:a,purpose:r});if(a&&r&&n&&o)return P.t("{name}, @{handle}, {purpose} (deactivated, { memberCount, plural, =1 {# member} other {# members}})",{name:t,handle:a,purpose:r,memberCount:s});if(a&&r&&!n&&o)return P.t("{name}, @{handle}, {purpose} ({ memberCount, plural, =1 {# member} other {# members}})",{name:t,handle:a,purpose:r,memberCount:s});if(a&&!r&&!n&&o)return P.t("{name}, @{handle} ({ memberCount, plural, =1 {# member} other {# members}})",{name:t,handle:a,memberCount:s});if(!a&&r&&!n&&o)return P.t("{name}, {purpose} ({ memberCount, plural, =1 {# member} other {# members}})",{name:t,purpose:r,memberCount:s});if(!a&&r&&n&&o)return P.t("{name}, {purpose} (deactivated, { memberCount, plural, =1 {# member} other {# members}})",{name:t,purpose:r,memberCount:s});if(!a&&r&&n&&!o)return P.t("{name}, {purpose} (deactivated)",{name:t,purpose:r});if(!a&&r&&!n&&!o)return P.t("{name}, {purpose}",{name:t,purpose:r});if(!a&&!r&&n&&o)return P.t("{name} (deactivated, { memberCount, plural, =1 {# member} other {# members}})",{name:t,memberCount:s});if(!a&&!r&&n&&!o)return P.t("{name} (deactivated)",{name:t});if(a&&!r&&n&&!o)return P.t("{name}, @{handle} (deactivated)",{name:t,handle:a});if(a&&!r&&n&&o)return P.t("{name}, @{handle} (deactivated, { memberCount, plural, =1 {# member} other {# members}})",{name:t,handle:a,memberCount:s});if(!a&&!r&&!n&&!o)return t;if(a&&!r&&!n&&!o)return P.t("{name}, @{handle}",{name:t,handle:a});if(a&&r&&!n&&!o)return P.t("{name}, @{handle}, {purpose}",{name:t,handle:a,purpose:r});if(!a&&!r&&!n&&o)return P.t("{name} ({ memberCount, plural, =1 {# member} other {# members}})",{name:t,memberCount:s});return t}var D=a(97);var x=a(5087);var R=a(457);var F=a(783);var L=a(760);var U=a(89);var B=a(1614);var q=a(2741);var G=a(1151);var H=a(98);var W=a(40);var V=a.n(W);var K=a(1187);var z=a(9);var Q=a(20);var Y=a(17);var J=a(54);var X=a(24);var Z=a(152);var $=a(165);var ee=new A["b"]("user_groups");var te={userGroup:{},defaultChannelNames:void 0,showToggle:false,creator:void 0};var ae=function(e){g()(t,e);function t(e){var a;l()(this,t);a=p()(this,h()(t).call(this,e));a.onButtonClick=a.onButtonClick.bind(f()(a));return a}u()(t,[{key:"onButtonClick",value:function e(t,a){var r=this.props.userGroup;Object(K["c"])({action:a,userGroup:r})}},{key:"maybeRenderCreatedBy",value:function e(){var t=this.props,a=t.userGroup,r=t.creator;if(!a&&(!a.created_by||!a.date_create))return null;var n=ee.rt("Created by <strong>{creator}</strong> on {creationDate}",{creator:r,creationDate:V()(1e3*a.date_create).format("MMMM Do, YYYY")});return y.a.createElement("p",{className:"small subtle_silver no_bottom_margin"},n)}},{key:"maybeRenderDefaultChannels",value:function e(){var t=this.props.defaultChannelNames;if(!t||!t.length)return null;var a=Object(A["i"])(t,{react:true,noEscape:true}).join("");return y.a.createElement("p",{className:"small subtle_silver no_bottom_margin"},y.a.createElement("span",{className:"bold"},ee.t("Default channels: {channels}",{channels:a})))}},{key:"maybeRenderDescription",value:function e(t){var a=this.props.userGroup;var r=Object(D["e"])(a);if(!r)return null;return y.a.createElement("p",{className:t},r)}},{key:"maybeRenderDisableButton",value:function e(){var t=this;var a=this.props.showToggle;if(!a)return null;return y.a.createElement(J["c"],{position:"bottom",zIndex:"above_fs",tip:ee.t("Disable group")},y.a.createElement(X["d"],{size:"large",type:"outline",icon:"disable",className:"user_group_toggle_btn",title:""+ee.t("Disable"),"data-action":"disable_user_group",onClick:function e(a){return t.onButtonClick(a,"disable")}}))}},{key:"maybeRenderHandle",value:function e(){var t=this.props.userGroup;var a=Object(D["f"])(t,{includeAtSign:true});if(!a)return null;return y.a.createElement("span",{className:"subtle_silver"},a)}},{key:"maybeRenderToggle",value:function e(){var t=this;var a=this.props.showToggle;if(!a)return null;return y.a.createElement(y.a.Fragment,null,y.a.createElement(J["c"],{position:"left",zIndex:"above_fs",tip:ee.t("Enable group")},y.a.createElement(Z["a"],{"data-action":"enable_user_group",className:"user_group_toggle_btn no_bottom_margin subtle_silver small small_right_padding",onClick:function e(a){return t.onButtonClick(a,"enable")},"aria-label":ee.t("Enable group")},y.a.createElement("i",{className:"ts_icon ts_icon_power_off"}))))}},{key:"renderCount",value:function e(){var t=this.props.userGroup;var a=t.isExternal||Object(D["n"])(t)?y.a.createElement("i",{className:"ts_icon ts_icon_sync"}):null;return y.a.createElement("p",{className:"user_group_count no_bottom_margin float_right small subtle_silver"},a,y.a.createElement("i",{className:"ts_icon ts_icon_user"}),Object(D["l"])(t))}},{key:"renderDeactivatedRow",value:function e(){var t=this.props.userGroup;var a=Object(D["h"])(t);return y.a.createElement(y.a.Fragment,null,y.a.createElement("div",{className:"col span_4_of_6 small_padding no_bottom_margin"},y.a.createElement("p",{className:"no_bottom_margin subtle_silver"},y.a.createElement("span",{className:"bold"},a),ee.t("(Disabled)"))),y.a.createElement("div",{className:"col span_2_of_6 small_padding no_bottom_margin float_right align_right"},this.maybeRenderToggle()))}},{key:"renderMemberButton",value:function e(){var t=this;var a=this.props.userGroup;var r;r=Object(D["n"])(a||a.is_external)?ee.t("View group members"):ee.t("Edit group members");return y.a.createElement(J["c"],{position:"bottom",tip:r,zIndex:"above_fs"},y.a.createElement(X["d"],{size:"large",type:"outline",icon:"user",title:""+ee.t("Members"),"data-action":"edit_members",onClick:function e(a){return t.onButtonClick(a,"editMembers")}}))}},{key:"renderSettingsButton",value:function e(){var t=this;return y.a.createElement(J["c"],{position:"bottom",tip:ee.t("Edit group info"),zIndex:"above_fs"},y.a.createElement(X["d"],{size:"large",type:"outline",icon:"cog_o",title:""+ee.t("Settings"),"data-action":"open_form",onClick:function e(a){return t.onButtonClick(a,"editInfo")}}))}},{key:"render",value:function e(){var t=this.props.userGroup;var a=Object(D["v"])(this.props.userGroup);if(!a)return this.renderDeactivatedRow();var r=Object(D["h"])(t);return y.a.createElement(y.a.Fragment,null,y.a.createElement("div",{className:"col span_3_of_4 small_padding no_bottom_margin"},y.a.createElement("p",{className:"bold no_bottom_margin"},r," ",this.maybeRenderHandle()),this.maybeRenderDescription("small no_bottom_margin"),this.maybeRenderDefaultChannels(),this.maybeRenderCreatedBy()),y.a.createElement("div",{className:"float_right right_padding"},this.renderCount(),y.a.createElement("p",{className:"user_group_actions user_group_actions--modern small no_bottom_margin"},this.maybeRenderDisableButton(),this.renderSettingsButton(),this.renderMemberButton())))}}]);return t}(_["Component"]);ae.displayName="LegacyUserGroupBrowserListItem";ae.defaultProps=te;var re=function e(t,a){var r=a.id;var n=Object(I["f"])(t,r);var i=Object(D["d"])(t,n,{includePrivateChannels:false});var s=i.map(function(e){if(!e)return null;var a=Object(Q["e"])(t,e);if(!a)return null;var r=Object(z["getName"])(a);if(!r)return null;return"#"+r});s=Object(w["filter"])(s);var o=Object(Y["getPrefCompliantMemberNameById"])(t,n.created_by);return{userGroup:n,defaultChannels:i,defaultChannelNames:s,creator:o,showDelete:!Object(D["n"])(n)&&!n.is_external,showToggle:Object(D["b"])(t)}};var ne=Object(k["connect"])(re,null,null,{areStatePropsEqual:function e(t,a){return Object($["a"])(t,a,2)}})(ae);var ie=new A["b"]("user_groups");var se={userGroup:{},onClick:w["noop"],isUserGroupBrowser:false};var oe=function(e){g()(t,e);function t(e){var a;l()(this,t);a=p()(this,h()(t).call(this,e));a.onClick=a.onClick.bind(f()(a));return a}u()(t,[{key:"onClick",value:function e(t){this.props.onClick(t,this.props.id);return Object(G["d"])(t,this.props.id)}},{key:"maybeRenderCountOrHandle",value:function e(){var t=this.props.userGroup;var a=Object(D["l"])(t);var r=Object(D["f"])(t,{includeAtSign:false});if(!(a||r))return null;var n=ie.t("{userCount, plural, =1 {# member} other {# members}}",{userCount:a});r&&(n=n+" - "+Object(D["f"])(t));return y.a.createElement("p",{className:"subtle_silver tiny_bottom_margin"},n)}},{key:"maybeRenderDescription",value:function e(){var t=this.props.userGroup;var a=Object(D["e"])(t);if(!a)return null;return y.a.createElement("p",null,a)}},{key:"renderRow",value:function e(){var t=this.props,a=t.userGroup,r=t.id,n=t.isUserGroupBrowser;if(n)return y.a.createElement(ne,{id:r});return y.a.createElement("div",{className:"col span_5_of_6 small_padding no_bottom_margin"},y.a.createElement(H["a"],{"data-user-group-id":""+r,onClick:this.onClick},y.a.createElement("h4",null,Object(D["h"])(a)),this.maybeRenderDescription(),this.maybeRenderCountOrHandle()))}},{key:"render",value:function e(){var t=this.props.id;return y.a.createElement("div",{className:"user_group_item small_padding bottom_border clearfix","data-qa":"user_group_list_item","data-user-group-id":""+t},this.renderRow())}}]);return t}(_["Component"]);oe.displayName="LegacyUserGroupListItem";oe.defaultProps=se;var le=function e(t,a){var r=a.id;return{userGroup:Object(I["f"])(t,r)}};var ce=Object(k["connect"])(le)(oe);var ue=a(362);var de=new A["b"]("user_groups");var pe={isFlexpane:false,featureSonicUserGroups:false};var me=function(e){g()(t,e);function t(){l()(this,t);return p()(this,h()(t).apply(this,arguments))}u()(t,[{key:"computeAtLabel",value:function e(t){var a=t;"group"===a&&(a="channel");var r=Object(ue["b"])({ms_name:a});return"@"+r}},{key:"renderContent",value:function e(){var t=this.props.isFlexpane;var a=t?null:C()("col","span_3_of_4");var r=C()("normal_padding",{dull_grey:t});var n=de.rt('While commands like <span className="mention">{atEveryone}</span>, <span className="mention">{atChannel}</span>, and <span className="mention">{atHere}</span> call the attention of all members in a conversation, User Groups let you choose exactly who should get your message.',{atEveryone:this.computeAtLabel("everyone"),atChannel:this.computeAtLabel("channel"),atHere:this.computeAtLabel("here"),fallbackHash:"b74e7333e097c646698fe696052060665b263452"});var i=de.rt('Choose a group name, like <span className="mention">@design</span> or <span className="mention">@marketing</span>, then select the group members. Now, when someone in your workspace mentions the User Group, only its members will be notified. You can even add those members to channels of your choice automatically!',{fallbackHash:"a7c79b0ec617bd1a98db5c6183b5e1f91d52cb31"});return y.a.createElement("div",{className:a},y.a.createElement("div",{className:r},y.a.createElement("p",{className:"user_groups_tip"},n),y.a.createElement("p",{className:"user_groups_tip"},i)))}},{key:"render",value:function e(){var t=this.props,a=t.isFlexpane,r=t.featureSonicUserGroups;if(r)return null;var n=a?y.a.createElement("div",null,y.a.createElement("span",{className:"user_groups_img"})):null;var i=a?null:y.a.createElement("div",{className:"col span_1_of_4 no_right_padding"},y.a.createElement("span",{className:"user_groups_img"}));return y.a.createElement(y.a.Fragment,null,n,this.renderContent(),i)}}]);return t}(_["PureComponent"]);me.displayName="LegacyUserGroupEmptyState";me.defaultProps=pe;var he=function e(t,a){var r=a.id;return{userGroup:Object(I["f"])(t,r),featureSonicUserGroups:Object(T["isFeatureEnabled"])(t,"feature_sonic_user_groups")}};var ve=Object(k["connect"])(he)(me);var fe=a(2485);var be=new A["b"]("user_groups");var ge={userGroups:[],scrollmark:void 0,searchQuery:void 0,setCursorMark:w["noop"],fetchUserGroupsPost:w["noop"],fetchDeactivatedUserGroupsPost:w["noop"],saveScrollmark:w["noop"],onItemClick:w["noop"],onCreateUserGroup:w["noop"],onClearSearch:w["noop"],isLegacy:false,includeDeactivated:false,isUserGroupBrowser:false,featureSonicUserGroups:false,onItemTabWithin:w["noop"]};var _e=function(e){g()(t,e);function t(e){var a;l()(this,t);a=p()(this,h()(t).call(this,e));a.onGroupClick=a.onGroupClick.bind(f()(a));a.onScroll=a.onScroll.bind(f()(a));a.setListRef=a.setListRef.bind(f()(a));a.fetchPost=a.fetchPost.bind(f()(a));a.handleFetchDeactivatedGroupsResponse=a.handleFetchDeactivatedGroupsResponse.bind(f()(a));a.handleFetchActiveGroupsResponse=a.handleFetchActiveGroupsResponse.bind(f()(a));a.fetchAround=a.fetchAround.bind(f()(a));a.renderRow=a.renderRow.bind(f()(a));a.maybeRenderList=a.maybeRenderList.bind(f()(a));a.focus=a.focus.bind(f()(a));a.getAriaLabelForRow=a.getAriaLabelForRow.bind(f()(a));a.isFocusableItem=a.isFocusableItem.bind(f()(a));a.requestPost=null;a.keys=null;a.list=null;a.layout=new F["a"];a.layout.heightCache.DEFAULT_HEIGHT=90;a.totalGroups=0;a.isFirstFetch=!e.userGroups.length&&!e.searchQuery;a.state={reachedEnd:false,fetchingDeactivatedGroups:false};return a}u()(t,[{key:"componentDidMount",value:function e(){if(!this.props.scrollmark)return;var t=this.props.scrollmark,a=t.key,r=t.offset;this.layout.setAnchor(a,r);this.props.saveScrollmark(null)}},{key:"UNSAFE_componentWillReceiveProps",value:function e(t){var a=this.props.searchQuery;if(t.searchQuery!==a){this.setState(function(){return{reachedEnd:false,fetchingDeactivatedGroups:false}});this.requestPost&&this.requestPost.cancel();this.requestPost=null;this.totalGroups=0;this.layout&&this.layout.setAnchor(false)}}},{key:"componentWillUnmount",value:function e(){if(this.requestPost){this.requestPost.cancel();this.requestPost=null}}},{key:"onGroupClick",value:function e(t,a){if(!this.list)return;if(!a)return;this.props.saveScrollmark({key:a,offset:this.layout.getOffsetForKey(a)-this.list.getScrollTop()})}},{key:"onScroll",value:function e(){this.layout.anchor&&this.layout.setAnchor(false)}},{key:"getAriaLabelForRow",value:function e(t){var a=t.index;if(!this.keys)return;var r=this.props.userGroups;var n=r[a];var i=false;var s=M({name:Object(D["i"])(n),handle:Object(D["f"])(n,i),purpose:Object(D["e"])(n),isDeactivated:!Object(D["v"])(n),memberCount:Object(D["l"])(n)});return{"aria-label":s}}},{key:"setListRef",value:function e(t){this.list=t}},{key:"fetchActiveGroups",value:function e(){return this.props.fetchUserGroupsPost({searchQuery:this.props.searchQuery}).then(this.handleFetchActiveGroupsResponse)}},{key:"fetchAround",value:function e(){if(this.requestPost||this.state.reachedEnd)return false;return this.fetchPost()}},{key:"fetchDeactivatedGroups",value:function e(){return this.props.fetchDeactivatedUserGroupsPost({searchQuery:this.props.searchQuery}).then(this.handleFetchDeactivatedGroupsResponse)}},{key:"fetchPost",value:function e(){var t=this;if(this.requestPost)return false;if(this.state.reachedEnd)return false;this.requestPost=this.state.fetchingDeactivatedGroups?this.fetchDeactivatedGroups():this.fetchActiveGroups();this.isFirstFetch&&this.props.telemeter.mark("start_user_group_list_show");return this.requestPost.bind(this).finally(function(){t.requestPost=null;if(t.isFirstFetch){t.props.telemeter.measureAndClear("start_user_group_list_show","user_group_list_show_lazy");t.isFirstFetch=false}})}},{key:"focus",value:function e(){this.list&&this.list.focus()}},{key:"handleFetchActiveGroupsResponse",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.items,r=t.num_found;this.totalGroups=r;if(this.props.userGroups.length>=this.totalGroups||!a.length)if(this.props.includeDeactivated){this.props.setCursorMark(null);this.setState(function(){return{fetchingDeactivatedGroups:true}});this.requestPost=this.fetchDeactivatedGroups()}else this.setState(function(){return{reachedEnd:true}})}},{key:"handleFetchDeactivatedGroupsResponse",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.items,r=t.num_found;var n=this.totalGroups+r;(this.props.userGroups.length>=n||!a.length)&&this.setState(function(){return{reachedEnd:true}})}},{key:"isFocusableItem",value:function e(t){var a=t.key;return a!==this.loadingIndicatorKey}},{key:"maybeRenderList",value:function e(t){var a=this;if(!t.length&&this.state.reachedEnd)return this.renderEmptyListView();if(!this.state.reachedEnd){this.loadingIndicatorKey="Loading"+t.length;t.push(this.loadingIndicatorKey)}return y.a.createElement(x["a"],null,function(e){var r=e.width,n=e.height;return y.a.createElement(R["a"],{width:r,height:n,keys:t,layout:a.layout,rowRenderer:a.renderRow,onScroll:a.onScroll,onItemClick:a.props.onItemClick,ref:a.setListRef,loadAround:a.fetchAround,loadPost:a.fetchPost,isFocusableItem:a.isFocusableItem,onItemTabWithin:a.props.onItemTabWithin,"aria-label":be.t("User Groups"),getPropsForItem:a.getAriaLabelForRow})})}},{key:"renderEmptyListView",value:function e(){var t=this.props,a=t.featureSonicUserGroups,r=t.searchQuery,n=t.onClearSearch,i=t.onCreateUserGroup,s=t.isLegacy,o=t.isUserGroupBrowser;var l;var c;var u;var d;var p=!!(r&&r.length);if(p){c=be.rt("No matches found for <strong>{searchTerm}</strong>",{searchTerm:r});u=be.t("Clear Search");d=n}else{if(s&&!a)return y.a.createElement(ve,{isFlexpane:!o});if(Object(B["a"])()){l=be.t("Organize your team");u=be.t("Create a User Group");d=i}else l=be.t("No user groups yet");c=be.t("User groups make it easy to get the attention of many members at once.")}var m=C()({"p-user_group_list__empty_list":!p,"p-user_group_list__empty_search_results":p});return y.a.createElement("div",{className:m,"data-qa":"searchable_ug_list_empty_state"},y.a.createElement(L["a"],{title:l,description:c,primaryActionText:u,onClickPrimaryAction:d}))}},{key:"renderRow",value:function e(t){var a=this.keys[t];if(!a)return null;if(a===this.loadingIndicatorKey)return y.a.createElement("div",{className:"margin_top_200"},y.a.createElement(U["a"],{color:"blue"}));return this.renderUserGroup(t)}},{key:"renderUserGroup",value:function e(t){var a=this.props,r=a.userGroups,n=a.isLegacy,i=a.isUserGroupBrowser;var s=r[t].id;if(!s)return null;if(n)return y.a.createElement(ce,{id:s,isUserGroupBrowser:i,onClick:this.onGroupClick});return y.a.createElement(q["a"],{id:s,onClick:this.onGroupClick})}},{key:"render",value:function e(){var t=this.props.userGroups;this.keys=this.props.includeDeactivated?t.map(function(e){return e.id}):t.filter(function(e){return!e.isDeactivated}).map(function(e){return e.id});return y.a.createElement("div",{className:"p-user_group_list","aria-live":"polite"},this.maybeRenderList(this.keys))}}]);return t}(_["PureComponent"]);_e.displayName="SearchableUserGroupsList";_e.defaultProps=ge;var ye=function e(t,a){var r=a.map(function(e){var a=t[e];if(!a)return null;return{id:a.id,isDeactivated:!!a.date_delete,name:a.name,handle:a.handle,user_count:a.user_count}}).filter(function(e){return e});return r};var Oe=Object(S["createSelector"])([I["b"],j["getFlexpaneUserGroups"]],ye);var ke={getUserGroups:Oe};var Ee=function e(t){return{userGroups:Oe(t),scrollmark:Object(j["getScrollmark"])(t),searchQuery:Object(j["getSearchQuery"])(t),featureSonicUserGroups:Object(T["isFeatureEnabled"])(t,"feature_sonic_user_groups"),telemeter:Object(N["c"])({state:t})}};var Ce={fetchUserGroupsPost:j["fetchUserGroupsPost"],saveScrollmark:j["saveScrollmark"],setSearchQuery:j["setSearchQuery"],setCursorMark:j["setCursorMark"],fetchDeactivatedUserGroupsPost:j["fetchDeactivatedUserGroupsPost"]};var Se=Object(k["connect"])(Ee,Ce)(function(e){var t=e.refToForward,a=s()(e,["refToForward"]);return y.a.createElement(_e,n()({ref:t},a))});var we=t["a"]=y.a.forwardRef(function(e,t){return y.a.createElement(Se,n()({refToForward:t},e))})},function(e,t,a){"use strict";a.d(t,"a",function(){return u});var r=a(218);var n=a.n(r);var i=a(2);var s=a.n(i);var o=a(176);var l=a(11);var c=a(20);function u(e,t){if(!Object(o["n"])(t))return null;var a=Object(o["c"])(t);if(a&&1===a.length)return a[0];var r=Object(o["k"])(t);if(!Object(i["isEmpty"])(r)){if(1===r.length)return Object(c["m"])(e,r[0]);var s=Object(l["getCurrentUserId"])(e);var u=Object(i["without"])(r,s);if(1===u.length)return Object(c["m"])(e,u[0]);var d=[].concat(n()(u),[s]);var p=Object(c["o"])(e,d);if(p)return p.id}return null}},,,function(e,t,a){},,function(e,t,a){},,,,,,,,,function(e,t,a){"use strict";var r=a(19);var n=a(18);var i=a(0);var s=a(29);var o=a(31);var l=Object(s["a"])("Fetch list of channels in org",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.reason,n=void 0===r?"fetch-org-wide-channels":r,i=a.limit,s=void 0===i?20:i,l=a.sortDir,c=void 0===l?"desc":l,u=a.sortBy,d=void 0===u?"member_count":u,p=a.teamIds,m=a.searchQuery,h=a.cursorMark,v=a.filter;return e(Object(o["a"])({method:"admin.conversations.search",args:{team_ids:JSON.stringify(p),sort_dir:c,sort:d,limit:s,cursor:h,query:m,search_channel_types:v},reason:n})).then(function(e){return{sortBy:d,sortDir:c,channels:e.channels,cursorMark:e.next_cursor,numTotalResults:e.num_found}}).catch(function(e){throw e})});l.meta={name:"fetchChannelsInOrg",key:"fetchersEnterpriseChannelMgmtApiFetchChannelsInOrg",description:"Fetch list of channels in org"};l.propTypes={sortDir:i["default"].string,sortBy:i["default"].string,teamIds:i["default"].array,limit:i["default"].number,reason:i["default"].string,searchQuery:i["default"].string,cursorMark:i["default"].string};var c=a(1375);var u=a(5105);a.d(t,"f",function(){return d});a.d(t,"l",function(){return p});a.d(t,"k",function(){return m});a.d(t,"g",function(){return h});a.d(t,"e",function(){return v});a.d(t,"i",function(){return f});a.d(t,"j",function(){return b});a.d(t,"d",function(){return g});a.d(t,"m",function(){return _});a.d(t,"h",function(){return y});a.d(t,"a",function(){return k});a.d(t,"c",function(){return E});a.d(t,"n",function(){return C});a.d(t,"b",function(){return S});var d=Object(r["b"])("Sets channels to the store");d.meta={name:"setChannels",key:"orgAdminChannelMgmtActionsSetChannels",description:"Sets channels to the store"};d.propTypes={channels:i["default"].array.isRequired,cursorMark:i["default"].string,numTotalResults:i["default"].number};var p=Object(r["b"])("Set the current sort and list of channels in the store");p.meta={name:"setSortedChannels",key:"orgAdminChannelMgmtActionsSetSortedChannels",description:"Set the current sort and list of channels in the store"};p.propTypes={sortBy:i["default"].string.isRequired,sortDir:i["default"].string.isRequired,cursorMark:i["default"].string,numTotalResults:i["default"].number};var m=Object(r["b"])("Set the current search query and list of channels in the store");m.meta={name:"setSearchResultChannels",key:"orgAdminChannelMgmtActionsSetSearchResultChannels",description:"Set the current search query and list of channels in the store"};m.propTypes={searchQuery:i["default"].string,channels:i["default"].array,cursorMark:i["default"].string,numTotalResults:i["default"].number};var h=Object(r["b"])("Set the current filter and list of channels in the store");h.meta={name:"setFilterResultChannels",key:"orgAdminChannelMgmtActionsSetFilterResultChannels",description:"Set the current filter and list of channels in the store"};h.propTypes={channels:i["default"].array,cursorMark:i["default"].string,numTotalResults:i["default"].number};var v=Object(r["b"])("Sets the guest count for a given channel");v.meta={name:"setChannelGuestCount",key:"orgAdminChannelMgmtActionsSetChannelGuestCount",description:"Sets the guest count for a given channel"};v.propTypes={channelId:i["default"].string,channelGuestCount:i["default"].number};var f=Object(r["b"])("Set the loading status for the next page of results");f.meta={name:"setIsLoadingNewPage",key:"orgAdminChannelMgmtActionsSetIsLoadingNewPage",description:"Set the loading status for the next page of results"};f.propTypes=i["default"].bool.isRequired;var b=Object(r["b"])("Set the loading status for a new query");b.meta={name:"setIsLoadingNewQuery",key:"orgAdminChannelMgmtActionsSetIsLoadingNewQuery",description:"Set the loading status for a new query"};b.propTypes=i["default"].bool.isRequired;var g=Object(r["b"])("Sets the channel type filter");g.meta={name:"setChannelFilter",key:"orgAdminChannelMgmtActionsSetChannelFilter",description:"Sets the channel type filter"};g.propTypes=i["default"].string.isRequired;var _=Object(r["b"])("Sets the selected team id to filter for");_.meta={name:"setTeamIdFilter",key:"orgAdminChannelMgmtActionsSetTeamIdFilter",description:"Sets the selected team id to filter for"};_.propTypes=i["default"].string.isRequired;var y=Object(r["b"])("Sets whether to include private channels or not");y.meta={name:"setIncludePrivate",key:"orgAdminChannelMgmtActionsSetIncludePrivate",description:"Sets whether to include private channels or not"};y.propTypes=i["default"].bool.isRequired;var O=Object(n["b"])("Loads guest count for new channels and adds them to the store",function(e,t,a){a.map(function(t){var a=t.id;return e(Object(c["a"])({channelId:a})).then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.guests;var n=r;e(v({channelId:a,channelGuestCount:n}))}).catch(function(e){throw e})})});O.meta={name:"fetchAndUpsertGuestCount",key:"orgAdminChannelMgmtActionsFetchAndUpsertGuestCount",description:"Loads guest count for new channels and adds them to the store"};O.propTypes={channels:i["default"].array};var k=Object(n["b"])("Loads a new page of channels and adds them to the store",function(e,t){e(f(true));var a=Object(u["a"])(t(),{reason:"channel-mgmt-store-fetch-new-page"});return e(l(a)).then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.channels,r=t.cursorMark,n=t.numTotalResults;e(f(false));e(d({channels:a,cursorMark:r,numTotalResults:n}));return a}).catch(function(t){e(f(false));throw t})});k.meta={name:"fetchChannels",key:"orgAdminChannelMgmtActionsFetchChannels",description:"Loads a new page of channels and adds them to the store"};var E=Object(n["b"])("Loads a subset of channels matching a search query",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.searchQuery;e(b(true));var n=Object(u["a"])(t(),{searchQuery:r,cursorMark:"",reason:"admin-members-store-search-members"});return e(l(n)).then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.channels,n=t.cursorMark,i=t.numTotalResults;e(b(false));e(m({numTotalResults:i,searchQuery:r,channels:a,cursorMark:n,filter:"all"}));return a}).catch(function(t){e(b(false));throw t})});E.meta={name:"searchChannels",key:"orgAdminChannelMgmtActionsSearchChannels",description:"Loads a subset of channels matching a search query"};E.propTypes={searchQuery:i["default"].string};var C=Object(n["b"])("Load sorted channel data",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.sortBy,n=a.sortDir;e(b(true));e(p({sortBy:r,sortDir:n,cursorMark:""}));var i=Object(u["a"])(t(),{sortBy:r,sortDir:n,reason:"channel-mgmt-store-sort-channels"});return e(l(i)).then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.channels,i=t.cursorMark,s=t.numTotalResults;e(p({channels:a,sortBy:r,sortDir:n,cursorMark:i,numTotalResults:s}));e(b(false));return a}).catch(function(e){throw e})});C.meta={name:"sortChannels",key:"orgAdminChannelMgmtActionsSortChannels",description:"Load sorted channel data"};C.propTypes={sortBy:i["default"].string.isRequired,sortDir:i["default"].string.isRequired};var S=Object(n["b"])("Filters channels by workspace, private, archived, etc",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.filter,n=a.teamId,i=a.includePrivate,s=void 0!==i&&i;r&&e(g(r));n&&e(_(n));e(y(s));e(b(true));var o=Object(u["a"])(t(),{cursorMark:"",reason:"channel-mgmt-store-filter-channels"});return e(l(o)).then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.channels,r=t.cursorMark,n=t.numTotalResults;e(b(false));e(h({channels:a,cursorMark:r,numTotalResults:n}));return a}).catch(function(t){e(b(false));throw t})});S.meta={name:"filterChannels",key:"orgAdminChannelMgmtActionsFilterChannels",description:"Filters channels by workspace, private, archived, etc"};S.propTypes={filter:i["default"].string,teamId:i["default"].string}},function(e,t,a){"use strict";a.d(t,"b",function(){return s});a.d(t,"d",function(){return o});a.d(t,"e",function(){return l});a.d(t,"c",function(){return d});a.d(t,"f",function(){return p});a.d(t,"h",function(){return m});a.d(t,"g",function(){return h});a.d(t,"i",function(){return v});a.d(t,"a",function(){return _});var r=a(2);var n=a.n(r);var i=a(15);var s=Object(i["b"])(function(e){var t;if(null===e||void 0===e?void 0:null===(t=e.channelMgmt)||void 0===t?void 0:t.channels)return e.channelMgmt.channels;return[]});s.meta={name:"getChannels",key:"orgAdminChannelMgmtSelectorsGetChannels"};var o=Object(i["b"])(function(e){var t;if(null===e||void 0===e?void 0:null===(t=e.channelMgmt)||void 0===t?void 0:t.isLoadingNewPage)return e.channelMgmt.isLoadingNewPage;return null});o.meta={name:"getIsLoadingNewPage",key:"orgAdminChannelMgmtSelectorsGetIsLoadingNewPage"};var l=Object(i["b"])(function(e){var t;if(null===e||void 0===e?void 0:null===(t=e.channelMgmt)||void 0===t?void 0:t.isLoadingNewQuery)return e.channelMgmt.isLoadingNewQuery;return null});l.meta={name:"getIsLoadingNewQuery",key:"orgAdminChannelMgmtSelectorsGetIsLoadingNewQuery"};var c=Object(i["b"])(function(e){var t;if(null===e||void 0===e?void 0:null===(t=e.channelMgmt)||void 0===t?void 0:t.cursorMark)return e.channelMgmt.cursorMark;return""});c.meta={name:"getCursorMark",key:"orgAdminChannelMgmtSelectorsGetCursorMark"};var u=Object(i["b"])(function(e){var t;if(null===e||void 0===e?void 0:null===(t=e.channelMgmt)||void 0===t?void 0:t.searchQuery)return e.channelMgmt.searchQuery;return""});u.meta={name:"getSearchQuery",key:"orgAdminChannelMgmtSelectorsGetSearchQuery"};var d=Object(i["b"])(function(e){var t;if(null===e||void 0===e?void 0:null===(t=e.channelMgmt)||void 0===t?void 0:t.filter)return e.channelMgmt.filter;return null});d.meta={name:"getFilter",key:"orgAdminChannelMgmtSelectorsGetFilter"};var p=Object(i["b"])(function(e){var t;if(null===e||void 0===e?void 0:null===(t=e.channelMgmt)||void 0===t?void 0:t.numTotalResults)return e.channelMgmt.numTotalResults;return null});p.meta={name:"getNumTotalResults",key:"orgAdminChannelMgmtSelectorsGetNumTotalResults"};var m=Object(i["b"])(function(e){var t;if(null===e||void 0===e?void 0:null===(t=e.channelMgmt)||void 0===t?void 0:t.sortDir)return e.channelMgmt.sortDir;return"desc"});m.meta={name:"getSortDirection",key:"orgAdminChannelMgmtSelectorsGetSortDirection"};var h=Object(i["b"])(function(e){var t;if(null===e||void 0===e?void 0:null===(t=e.channelMgmt)||void 0===t?void 0:t.sortBy)return e.channelMgmt.sortBy;return"member_count"});h.meta={name:"getSortBy",key:"orgAdminChannelMgmtSelectorsGetSortBy"};var v=Object(i["b"])(function(e){var t;if(null===e||void 0===e?void 0:null===(t=e.channelMgmt)||void 0===t?void 0:t.teamId)return e.channelMgmt.teamId;return});v.meta={name:"getTeamIdFilter",key:"orgAdminChannelMgmtSelectorsGetTeamIdFilter"};var f=Object(i["b"])(function(e){var t;if(null===e||void 0===e?void 0:null===(t=e.channelMgmt)||void 0===t?void 0:t.includePrivate)return e.channelMgmt.includePrivate;return false});f.meta={name:"getIncludePrivate",key:"orgAdminChannelMgmtSelectorsGetIncludePrivate"};var b=function e(t){if(!t||"any_workspace"===t)return;return[t]};var g=function e(t,a){var r=[];"all"!==t&&r.push(t);var n=f(a);n||r.push("private_exclude");return r};var _=Object(i["b"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var a={filter:g(d(e),e),teamIds:b(v(e)),sortBy:h(e),sortDir:m(e),searchQuery:u(e),cursorMark:c(e)};Object(r["merge"])(a,t);return a});_.meta={name:"getApiArgs",key:"orgAdminChannelMgmtSelectorsGetApiArgs"}},function(e,t,a){},function(e,t,a){},,function(e,t,a){},,,,,,,,,,,,,,function(e,t,a){"use strict";var r=a(110);var n=a.n(r);var i=a(135);var s=a.n(i);var o=a(169);var l=a.n(o);var c=a(138);var u=a.n(c);var d=a(147);var p=a.n(d);var m=a(185);var h=a.n(m);var v=a(1);var f=a.n(v);var b=a(12);var g=a(30);var _=a(0);var y=a(6);var O=a(27);var k=a(5009);var E=a(253);var C=a(77);var S=a(1182);var w=a(33);var j=a(35);var I=a(11);var T=a(3335);var A=a.n(T);var N=new y["b"]("help");var P={tickets:{closed:0,read:0,unread:0},featureHelpModalIaRedesign:false};var M=function(e){h()(t,e);function t(e){var a;n()(this,t);a=l()(this,u()(t).call(this,e));a.zdLocale=Object(C["a"])();Object(g["a"])(p()(a),["onClickContactUsButton"]);return a}s()(t,[{key:"onClickContactUsButton",value:function e(){var t="/help/requests/new";var a=this.props,r=a.clogger,n=a.team;var i="HELP_MODAL_ACTION";var s={action:"submit_new_request",trigger:"click_submit_new_request"};r.track(i,s);Object(O["openAuthenticatedUrlInBrowser"])(n,t)}},{key:"render",value:function e(){var t=this.props,a=t.tickets,r=t.clogger,n=t.team,i=t.featureHelpModalIaRedesign;if(i)return f.a.createElement("div",{className:"p-help_modal__footer p-help_modal__footer__redesign display_flex align_items_center justify_content_between"},f.a.createElement("div",{className:"p-help_modal__footer_contact"},f.a.createElement("div",null,f.a.createElement("span",{className:"p-help_modal__contact_us__message"},N.t("Can\u2019t find what you\u2019re looking for?")),f.a.createElement(E["c"],{type:"outline",size:"medium",className:"p-help_modal__contact_us__button",onClick:this.onClickContactUsButton,"data-qa":"help_modal_contact_button"},N.t("Contact Us")))));return f.a.createElement("div",{className:"p-help_modal__footer display_flex align_items_center justify_content_between"},f.a.createElement("div",{className:"p-help_modal__footer_tickets display_flex flex_direction_column"},f.a.createElement(k["a"],{tickets:a,team:n,clogger:r})),f.a.createElement("div",{className:"p-help_modal__footer_contact"},f.a.createElement("div",null,f.a.createElement("span",{className:"p-help_modal__contact_us__message"},N.t("Can\u2019t find what you need, or have some feedback?")),f.a.createElement(E["c"],{type:"primary",size:"medium",className:"p-help_modal__contact_us__button",onClick:this.onClickContactUsButton,"data-qa":"help_modal_contact_button"},N.t("Contact Us")))))}}]);return t}(v["Component"]);M.displayName="HelpModalFooter";M.defaultProps=P;var D=function e(t){return{clogger:Object(j["a"])({state:t}),team:Object(w["d"])(t),tickets:Object(S["getTicketCounts"])(t),featureHelpModalIaRedesign:Object(I["isFeatureEnabled"])(t,"feature_help_modal_ia_redesign")}};t["a"]=Object(b["connect"])(D)(M)},function(e,t,a){"use strict";var r=a(196);var n=a.n(r);var i=a(245);var s=a.n(i);var o=a(1);var l=a.n(o);var c=a(0);var u=a(493);var d=a(134);var p=a(246);var m=a.n(p);var h=a(12);var v=a(13);var f=a.n(v);var b=a(192);var g=a(97);var _=a(326);var y=a(1412);var O=a(54);var k=a(646);var E=a(6);var C=a(4350);var S=new E["b"]("search");var w={className:void 0,userGroup:void 0};function j(e){var t=e.className,a=e.userGroup;var r=Object(o["useRef"])();var n=Object(o["useState"])(0),i=m()(n,2),s=i[0],c=i[1];var u=Object(o["useState"])(false),p=m()(u,2),h=p[0],v=p[1];var b=!Object(g["v"])(a);var E=b?d["c"].dim:null;var C=Object(g["h"])(a);var w=Object(g["f"])(a);var j=Object(g["e"])(a);var I=Object(g["l"])(a);var T="\xa0\xa0\xb7\xa0\xa0";var A=l.a.createElement(_["c"],null,l.a.createElement("span",{className:"p-browse_page_user_group_entity__name","data-qa":"browse_page_user_group_entity__name"},C),l.a.createElement("span",{className:"p-browse_page_user_group_entity__handle","data-qa":"browse_page_user_group_entity__handle"},w));var N=l.a.createElement("span",{className:"p-browse_page_user_group_entity__subtext","data-qa":"browse_page_user_group_entity__subtext",ref:r},l.a.createElement("span",{className:"browse_page_user_group_entity__subtext__contents","data-qa":"browse_page_user_group_entity__subtext__contents"},S.t("{count, plural, =1 {# member} other {# members}}",{count:I}),j&&T,j));var P=l.a.createElement(k["a"],null,function(e){var t=e.width,a=e.measureRef;c(t);return l.a.createElement("div",{ref:a},h?l.a.createElement(O["c"],{tip:j},N):N)});Object(o["useEffect"])(function(){if(!r.current)return;v(s<r.current.scrollWidth)},[s]);if(Object(g["s"])(a)||Object(g["r"])(a))return l.a.createElement(y["a"],{type:Object(g["s"])(a)?"unknown":"non-existent",size:"medium",isIAPhase1Enabled:true});return l.a.createElement(_["d"],{className:f()(t,"p-browse_page_user_group_entity"),size:"medium",text:A,subtext:P,style:E})}j.displayName="BrowsePageUserGroupEntity";j.defaultProps=w;var I=function e(t,a){var r=a.id,n=a.userGroup;return{userGroup:n||Object(b["f"])(t,r)}};var T=Object(h["connect"])(I)(j);var A=a(11);var N=a(23);var P=a(1843);var M=new E["b"]("user_groups");var D={className:void 0,userGroup:void 0};var x={unknown:"unknown",nonexistent:"non-existent"};var R=function e(t){var a=Object(g["h"])(t);return l.a.createElement(_["c"],{className:"c-user_group__name"},l.a.createElement(N["b"],{type:"user_groups",inline:true,className:"c-medium_user_group__icon"}),a)};R.displayName="renderName";var F=function e(t){var a=Object(g["e"])(t);return l.a.createElement(_["b"],null,a)};F.displayName="renderDescription";var L=function e(t,a){var r=Object(g["f"])(t);var n=Object(g["l"])(t);return l.a.createElement(_["a"],null,l.a.createElement("span",{className:"c-medium_user_group__handle"},r),a?M.rt("{count} {count, plural, =1 {member} other {members}}",{count:n}):void 0)};L.displayName="renderMetaData";function U(e){var t=e.className,a=e.userGroup,r=e.featureSonicUserGroups;var n=!Object(g["v"])(a);if(Object(g["s"])(a)||Object(g["r"])(a))return l.a.createElement(y["a"],{type:Object(g["s"])(a)?x.unknown:x.nonexistent,size:"medium"});var i=n?d["c"].dim:null;return l.a.createElement(_["d"],{className:t,size:"medium",style:i,text:R(a),subtext:F(a),metadata:L(a,r)})}U.displayName="MediumUserGroupEntity";U.defaultProps=D;function B(e,t){var a=t.id,r=t.userGroup;return{userGroup:r||Object(b["f"])(e,a),featureSonicUserGroups:Object(A["isFeatureEnabled"])(e,"feature_sonic_user_groups")}}var q=Object(h["connect"])(B)(U);var G={className:void 0,isActive:false,isDeactivated:false,isDisabled:false,secondaryContent:void 0,isIAPhase1Enabled:false};function H(e){var t=e.className,a=e.isActive,r=e.isDeactivated,i=e.isDisabled,o=e.secondaryContent,c=e.isIAPhase1Enabled,p=s()(e,["className","isActive","isDeactivated","isDisabled","secondaryContent","isIAPhase1Enabled"]);var m;a?m=i||r?d["c"].highlightDim:d["c"].highlightLight:(i||r)&&(m=d["c"].dim);return l.a.createElement(u["a"],{className:t,primaryContent:c?l.a.createElement(T,p):l.a.createElement(q,n()({isDeactivated:r},p)),secondaryContent:o,size:"medium",style:m})}H.displayName="MediumUserGroupListEntity";H.defaultProps=G;var W=t["a"]=H},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){},,,function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(12);var s=a(156);var o=a(26);var l=a(2730);var c=a(0);var u=a(13);var d=a.n(u);var p=a(11);var m=a(38);var h=a(6);var v=a(32);var f=a(34);var b=a(196);var g=a.n(b);var _=a(110);var y=a.n(_);var O=a(135);var k=a.n(O);var E=a(169);var C=a.n(E);var S=a(138);var w=a.n(S);var j=a(147);var I=a.n(j);var T=a(185);var A=a.n(T);var N=a(33);var P=a(27);var M=a(35);var D=a(23);var x=a(24);var R=a(57);var F=a(54);var L=a(1701);var U=a(245);var B=a.n(U);var q=a(2);var G=a(86);var H=a(42);var W=a(1052);var V=a(18);var K=a(1221);var z=n.a.lazy(function(){return Promise.resolve().then(a.bind(null,3375))});var Q=Object(V["b"])("Opens the Shared Channel Accept Invitation modal",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.entryPoint;if(!Object(p["isFeatureEnabled"])(t(),"feature_sonic_esc_creation"))return;var i=Object(N["d"])(t());var s=Object(P["isOnFreePlan"])(i);var o=Object(P["isSharedChannelsEnabled"])(t(),i);if(!s&&!o)return;e(Object(K["a"])({element:n.a.createElement(z,{entryPoint:r})}))});Q.meta={name:"openSharedChannelIntroductionModal",key:"actionsUiOpenSharedChannelIntroductionModalOpenSharedChannelIntroductionModal",description:"Opens the Shared Channel Accept Invitation modal"};Q.propTypes={};var Y=Q;var J=a(784);var X=a(28);var Z=Object(X["b"])("TS.ui.workspaces.start");var $=a(39);var ee=a(2733);var te=a(325);var ae=a(77);var re=a(90);var ne=a(1182);var ie=a(5009);var se=a(4997);var oe=a(5123);var le=a(44);var ce=a(43);var ue=a(3418);var de=new h["b"]("help");var pe={featureDangerouslyGuardIATranslations:false,featureHelpModalIaRedesign:false};var me=function e(t){var a=t.featureDangerouslyGuardIATranslations,i=t.dispatch,s=t.featureHelpModalIaRedesign,o=t.team,l=t.tickets,c=t.clogger;var u=Object(r["useCallback"])(function(){i(Object($["closeModal"])())},[i]);var d=Object(r["useMemo"])(function(){return Object(te["a"])({zdLocale:Object(ae["a"])()})},[]);if(!a)return null;if(s){var p=de.t("Learn more about the new Slack experience.");var m=de.rt("We\u2019re updating our Help Center to reflect a simpler, more organized Slack.{breakTag}{link}",{breakTag:n.a.createElement("br",null),link:n.a.createElement("a",{href:"",target:"_blank",rel:"nofollow noopener"},p)});return n.a.createElement(le["a"],{isOpen:true,centered:true,closeModal:u,maxWidth:600,className:"p-help_dialog stuffs"},n.a.createElement(le["h"],null,n.a.createElement(le["j"],{title:de.t("Help"),className:"p-help_dialog__title_bar"},n.a.createElement(ie["a"],{tickets:l,team:o,clogger:c,useNewMessaging:true}))),n.a.createElement(le["d"],{showScrollIndicatorBottom:false},n.a.createElement("div",{className:"p-help_dialog__content"},n.a.createElement("div",{className:"p-help_dialog__banner"},m),n.a.createElement(se["a"],{withoutFullscreenModal:true,includeFooter:false,trigger:"help_dialog"}))),n.a.createElement(le["f"],{isAdaptive:true,className:"p-help_dialog__footer"},n.a.createElement(oe["a"],null)))}return n.a.createElement(le["a"],{isOpen:true,centered:true,closeModal:u,maxWidth:600,className:"p-help_dialog"},n.a.createElement(le["h"],null,n.a.createElement(le["j"],{title:de.t("Help")},n.a.createElement(ce["a"],{href:d,className:"p-help_dialog__browse"},de.t("Browse all answers")))),n.a.createElement(le["d"],{showScrollIndicatorBottom:false},n.a.createElement("div",{className:"p-help_dialog__content"},n.a.createElement(se["a"],{withoutFullscreenModal:true,includeFooter:false}))),n.a.createElement(le["f"],{isAdaptive:true,className:"p-help_dialog__footer"},n.a.createElement(oe["a"],null)))};me.displayName="HelpDialog";me.defaultProps=pe;var he=function e(t){return{featureDangerouslyGuardIATranslations:Object(re["e"])(t),featureHelpModalIaRedesign:Object(p["isFeatureEnabled"])(t,"feature_help_modal_ia_redesign"),clogger:Object(M["a"])({state:t}),team:Object(N["d"])(t),tickets:Object(ne["getTicketCounts"])(t)}};var ve=Object(i["connect"])(he)(me);var fe=Object(V["b"])("Opens the help modal",function(e,t,a){if(Object(re["e"])(t())){e(Object($["openModal"])({element:n.a.createElement(ve,null)}));return}e(Object($["openModal"])({element:n.a.createElement(ee["a"],a)}))});fe.meta={name:"openHelpModal",key:"actionsHelpActionsOpenHelpModal",description:"Opens the help modal"};fe.propTypes={trigger:c["default"].string.isRequired};var be=a(2701);var ge=Object(X["b"])("TS.magic_login.execute");var _e={org:void 0,icon:void 0,url:void 0};var ye=function e(t){var a=t.name,r=t.icon,i=t.org,s=t.url;return n.a.createElement("div",{className:"p-global_nav__top_menu_header"},n.a.createElement("div",{className:"p-global_nav__top_menu_header_icon",style:{backgroundImage:r&&"url("+r+")"}}),n.a.createElement("div",{className:"p-global_nav__top_menu_header_right"},n.a.createElement("div",{className:"p-global_nav__top_menu_header_name"},a),n.a.createElement("div",{className:"p-global_nav__top_menu_header_sub"},i||s)))};ye.displayName="TeamHeader";ye.defaultProps=_e;var Oe=function e(t){var a=Object(N["d"])(t);return{name:Object(P["getTeamDisplayName"])(a),org:a.enterprise_name,icon:a.icon&&a.icon.image_88||void 0,url:a.domain+".slack.com"}};var ke=Object(i["connect"])(Oe)(ye);var Ee=a(25);var Ce=a(63);var Se=a(2092);var we=new h["b"]("global_nav");var je={menuProps:void 0,isEnterprise:false,enterpriseURL:void 0,isAppmin:false,userCanManageSharedChannels:false,featureGlobalNav:false};var Ie=function e(t){var a=t.featureGlobalNav,r=t.team,i=t.isEnterprise,s=t.enterpriseURL,o=t.isAppmin,l=t.userCanManageSharedChannels,c=t.menuProps;if(!a)return null;var u=[{label:we.t("Manage members"),href:Object(P["getTeamUrl"])(r,"/admin")},{label:we.t("Workspace settings"),href:Object(P["getTeamUrl"])(r,"/admin/settings")},{label:we.t("Organization settings"),href:"https://"+s+"/manage",hide:!i},{label:we.t("Manage apps"),href:Object(P["getTeamUrl"])(r,"/apps/manage?utm_source=in-prod&utm_medium=inprod-apps_link-slack_menu-click"),hide:i||!o},{label:we.t("Manage shared channels"),click:function e(){return Object(Se["a"])(r.id)},hide:!l}].filter(function(e){return!e.hide});return n.a.createElement(R["a"],g()({},c,{template:u}))};Ie.displayName="TeamAdminSubmenu";Ie.defaultProps=je;var Te=function e(t){var a=Object(N["d"])(t);return{team:a,isEnterprise:Object(P["isEnterpriseTeam"])(a),enterpriseURL:Object(p["getFromBootData"])(t,"enterprise_url"),isAppmin:Object(Ee["l"])(t),userCanManageSharedChannels:Object(Ce["B"])(t)||Object(Ce["V"])(t),featureGlobalNav:Object(p["isFeatureEnabled"])(t,"feature_global_nav")}};var Ae=Object(i["connect"])(Te)(Ie);var Ne=a(218);var Pe=a.n(Ne);var Me=a(2750);var De=Object(V["b"])("Opens the Find More Workspaces modal.",function(e,t,a){if(!Object(p["isFeatureEnabled"])(t(),"feature_sonic_find_more_wksps"))return;e(Object($["openModal"])({element:n.a.createElement(Me["b"],{userId:a}),name:"find-more-workspaces",isStackable:true}))});De.meta={name:"openFindMoreWorkspacesModal",key:"actionsOpenFindMoreWorkspacesModalOpenFindMoreWorkspacesModal",description:"Opens the Find More Workspaces modal."};De.propTypes={userId:c["default"].string.isRequired};var xe=De;var Re=a(58);var Fe=a(649);var Le=new h["b"]("global_nav");var Ue=3;var Be={menuProps:void 0,enterprises:[],others:[],currentEnterpriseId:void 0,currentUserId:void 0,signinURL:void 0,featureGlobalNav:false,featureClassicNav:false};var qe=function(e){A()(t,e);function t(e){var a;y()(this,t);a=C()(this,w()(t).call(this,e));a.getTeamItem=a.getTeamItem.bind(I()(a));a.getEnterpriseItems=a.getEnterpriseItems.bind(I()(a));a.getOtherItems=a.getOtherItems.bind(I()(a));return a}k()(t,[{key:"getEnterpriseItems",value:function e(){var t=this;var a=this.props,r=a.enterprises,n=a.currentEnterpriseId,i=a.currentUserId,s=a.featureGlobalNav,o=a.featureClassicNav;if(!s&&!o)return[];return Object(q["flatten"])(r.map(function(e){var a=e.teams.map(t.getTeamItem);var r=e.id===n&&e.overLimit?{label:Le.rt("See all <strong>{enterpriseName}</strong> workspaces",{enterpriseName:e.name}),click:function e(){return t.props.openFindMoreWorkspacesModal(i)}}:null;return[{type:"header",label:e.name}].concat(Pe()(a),[r,{type:"separator"}])}))}},{key:"getOtherItems",value:function e(){var t=this;var a=this.props,r=a.others,n=a.featureGlobalNav,i=a.featureClassicNav;if(!n&&!i)return[];if(!r||!r.length)return[];var s=r.map(function(e){return t.getTeamItem(e)});return[{type:"header",label:Le.t("Your other workspaces")}].concat(Pe()(s))}},{key:"getTeamItem",value:function e(t){var a=this.props,r=a.featureGlobalNav,i=a.featureClassicNav;if(!r&&!i)return null;if(!t.url)return null;var s=Object(f["a"])()?Object(P["getTeamUrl"])({domain:"app"},"client/"+t.id+window.location.search):t.url+("/"===t.url.substr(-1)?"messages":"/messages");var o=t.icons&&(t.icons.image_44||t.icons.image_88);return{label:n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"p-global_nav__top_switch_workspaces_icon",style:{backgroundImage:"url("+o+")"}}),n.a.createElement("strong",null,t.name)),href:s,target:"_self",showLinkIndicatorIcon:false}}},{key:"render",value:function e(){var t=this.props,a=t.signinURL,r=t.featureGlobalNav,i=t.featureClassicNav,s=t.menuProps;if(!r&&!i)return null;var o=a&&[{type:"separator"},{label:Le.t("Sign in to another workspace"),href:a}];var l=[].concat(Pe()(this.getEnterpriseItems()),Pe()(this.getOtherItems()),Pe()(o||[]));return n.a.createElement(R["a"],g()({},s,{template:l,stripTerminalSeparators:true}))}}]);return t}(r["Component"]);qe.displayName="SwitchWorkspacesSubmenu";qe.defaultProps=Be;var Ge=function e(t){var a=Object(p["getOtherAccounts"])(t).map(function(e){return{id:e.team_id,enterpriseId:e.enterprise_id,url:e.team_url,name:e.team_name,enterpriseName:e.enterprise_name,icons:e.team_icon}});if(!Object(Re["a"])()){var r=Object(Ee["b"])(t);(Object(q["get"])(r,"enterprise_user.teams")||[]).map(function(e){return Object(N["k"])(t,e)}).forEach(function(e){a.push({id:e.id,enterpriseId:Object(q["get"])(r,"enterprise_user.enterprise_id")||e.enterprise_id,url:Object(Fe["c"])(t,e.domain),name:Object(P["getTeamDisplayName"])(e),enterpriseName:Object(q["get"])(r,"enterprise_user.enterprise_name")||e.enterprise_name,icons:e.icon,isUnknown:Object(P["isUnknown"])(e)})})}var n=Object(N["d"])(t);var i=n.enterprise_id;a=a.sort(function(e,t){if(i){if(e.enterpriseId===i&&t.enterpriseId!==i)return-1;if(t.enterpriseId===i&&e.enterpriseId!==i)return 1}if(!e.isUnknown&&t.isUnknown)return-1;if(!t.isUnknown&&e.isUnknown)return 1;return Object(h["r"])(e.name,t.name)});var s=n.id;a=a.filter(function(e){return e.id!==s});return Object(q["uniqBy"])(a,"id")};var He=function e(t){var a={};t.filter(function(e){return e.enterpriseId}).forEach(function(e){var t=e.enterpriseId;a[t]?a[t].teams.length<Ue?a[t].teams.push(e):a[t].overLimit=true:a[t]={id:t,name:e.enterpriseName,teams:[e]}});return Object.values(a)};var We=function e(t){var a=Ge(t);var r=He(a);var n=a.filter(function(e){return!e.enterpriseId});var i=Object(N["d"])(t).enterprise_id;var s=Object(p["getCurrentUserId"])(t);var o=Object(p["getFromBootData"])(t,"signin_url");return{enterprises:r,others:n,currentEnterpriseId:i,currentUserId:s,signinURL:o,featureGlobalNav:Object(p["isFeatureEnabled"])(t,"feature_global_nav"),featureClassicNav:Object(p["isFeatureEnabled"])(t,"feature_classic_nav")}};var Ve={openFindMoreWorkspacesModal:function e(){return xe.apply(void 0,arguments)}};var Ke=Object(i["connect"])(We,Ve)(qe);var ze=a(62);var Qe=a(17);var Ye=a(1614);function Je(e){var t=Object(Ee["b"])(e);var a=Object(N["d"])(e);var r=Object(Qe["isAdmin"])(e,t);var n=Object(Qe["isOwner"])(e,t);var i=Object(Qe["isRestricted"])(t);var s=Object(p["pageNeedsEnterprise"])(e);var o=Object(P["isPaidTeam"])(a);var l=r;var c=Object(Ye["d"])();var u=Object(p["isFeatureEnabled"])(e,"feature_builder_can_access");var d=r||!i&&(!Object(ze["a"])(e,"emoji_only_admins")||!Object(ze["a"])(e,"slackbot_responses_only_admins")||!Object(ze["a"])(e,"loading_only_admins"));var h=s&&Object(Ee["l"])(e);var f=r||!Object(ze["a"])(e,"stats_only_admins")&&!i;var b=n||Object(m["k"])(e,"purchaser")||Object(ze["a"])(e,"all_users_can_purchase");var g=b&&o;var _=!o&&!Object(H["isAppStoreBuild"])();var y=s&&!Object(Qe["isRestricted"])(t);var O=o&&Object(Ce["m"])(e);var k=Object(p["getFromBootData"])(e,"help_url");var E=Object(p["isFeatureEnabled"])(e,"feature_tinyspeck")||v["isDev"];var C=s&&!i;var S=Object(p["getOtherAccounts"])(e).length-1;var w=Object(Re["a"])()?S:S+Object(q["get"])(t,"enterprise_user.teams.length",1);var j=w>=1&&!H["isDesktop"];var I=!j&&!!Object(p["getFromBootData"])(e,"signin_url");return{administration:l,invite:c,launchWorkflowBuilder:u,customize:d,manageApps:h,analytics:f,billing:g,plans:_,orgShared:y,externalShared:O,help:k,version:E,findWorkspaces:C,switchWorkspaces:j,signin:I}}var Xe={},Ze=Xe.removeWorkspace;var $e=new h["b"]("global_nav");var et={actions:{},signOut:q["noop"],openPrefsModal:q["noop"],openSharedChannelIntroductionModal:q["noop"],openInviteModal:q["noop"],signoutURL:void 0,signinURL:void 0,renderSonicMenu:void 0,featureGlobalNav:false};var tt=function(e){A()(t,e);function t(e){var a;y()(this,t);a=C()(this,w()(t).call(this,e));a.onSigninClick=a.onSigninClick.bind(I()(a));a.onOpenAppClick=a.onOpenAppClick.bind(I()(a));a.renderAdminSubmenu=a.renderAdminSubmenu.bind(I()(a));a.renderWorkspacesSubmenu=a.renderWorkspacesSubmenu.bind(I()(a));return a}k()(t,[{key:"onOpenAppClick",value:function e(t){t.preventDefault();ge({fallback_to_browser:true,browser_uri:"/downloads",app_uri:"/ssb/open"})}},{key:"onSigninClick",value:function e(t){if(H["isDesktop"]){t.preventDefault();Object(H["signInTeam"])()}}},{key:"renderAdminSubmenu",value:function e(t){return n.a.createElement(Ae,{menuProps:t})}},{key:"renderWorkspacesSubmenu",value:function e(t){return n.a.createElement(Ke,{menuProps:t})}},{key:"render",value:function e(){var t=this;var a=this.props,r=a.actions,i=a.renderSonicMenu,s=a.featureGlobalNav,o=a.signoutName,l=a.signoutURL,c=a.signinURL,u=a.team,d=B()(a,["actions","renderSonicMenu","featureGlobalNav","signoutName","signoutURL","signinURL","team"]);if(!s)return null;var p=[{type:"submenu",label:"Sonic",renderSubmenu:i,hide:!i},{type:"separator"},{type:"custom",children:n.a.createElement(ke,{key:"team-header"})},{type:"separator"},{label:$e.t("Preferences"),shortcut:Object(v["isMac"])()&&H["isDesktop"]&&"\u2318,",click:function e(){return t.props.openPrefsModal()}},{type:"separator"},{type:"submenu",label:$e.t("Administration"),renderSubmenu:this.renderAdminSubmenu,hide:!r.administration},{label:$e.t("Analytics"),hide:!r.analytics,href:Object(P["getTeamUrl"])(u,"/stats")},{label:$e.t("Billing"),hide:!r.billing,href:Object(P["getTeamUrl"])(u,"/admin/billing")},{label:$e.t("See paid plans"),hide:!r.plans,href:Object(P["getTeamUrl"])(u,Object(G["j"])({entryPoint:"global_nav_team_menu"}))},{label:$e.t("Customize Slack"),hide:!r.customize,href:Object(P["getTeamUrl"])(u,"/customize?utm_source=in-prod&utm_medium=inprod-customize_link-slack_menu-click"),target:"_blank"},{type:"separator"},{label:$e.t("Invite people"),hide:!r.invite,click:function e(){return t.props.openInviteModal({source:"team_menu"})}},{label:$e.t("Manage apps"),hide:!r.manageApps,href:"/apps/manage?utm_source=in-prod&utm_medium=inprod-apps_link-slack_menu-click"},{label:$e.t("Shared channels"),hide:!r.externalShared,click:function e(){return t.props.openSharedChannelIntroductionModal()}},{type:"separator"},{label:$e.t("Help & feedback"),hide:!r.help,click:fe},{label:"Version info (TS only)",hide:!r.version,click:be["a"]},{type:"separator"},{label:$e.t("Find more workspaces"),hide:!r.findWorkspaces,click:function e(){return Z()}},{type:"submenu",label:$e.t("Switch workspaces"),hide:Object(f["a"])()||!r.switchWorkspaces,renderSubmenu:this.renderWorkspacesSubmenu},{label:$e.t("Sign in to another workspace"),hide:!r.signin,href:c,click:this.onSigninClick},{label:$e.rt("Sign out of <strong>{signoutName}</strong>",{signoutName:o}),hide:!Object(f["a"])(),click:function e(){return t.props.signOut(u.id)},dataQa:"logout"},{label:$e.rt("Sign out of <strong>{signoutName}</strong>",{signoutName:o}),hide:Object(f["a"])(),href:l,target:"_self",dataQa:"logout"},{type:"separator"},{label:$e.rt("Open the Slack App"),hide:H["isDesktop"],href:Object(P["getTeamUrl"])(u,"/ssb/open"),click:this.onOpenAppClick}].filter(function(e){return!e.hide});return n.a.createElement(R["a"],g()({},d,{template:p,menuClassNames:"p-global_nav__top_team_menu",stripTerminalSeparators:true}))}}]);return t}(r["Component"]);tt.displayName="TeamMenu";tt.defaultProps=et;var at=function e(t){return{signOut:function e(){return t(Ze.apply(void 0,arguments))},openPrefsModal:function e(){return t(Object(J["a"])())},openSharedChannelIntroductionModal:function e(){return t(Y.apply(void 0,arguments))},openInviteModal:function e(){return t(W["a"].apply(void 0,arguments))}}};var rt=function e(t){var a=Object(N["d"])(t);return{actions:Je(t),team:a,signoutName:a.enterprise_name||Object(P["getTeamDisplayName"])(a),signoutURL:Object(P["isEnterpriseTeam"])(a)?Object(p["getFromBootData"])(t,"enterprise_logout_url"):Object(p["getFromBootData"])(t,"logout_url"),signinURL:Object(p["getFromBootData"])(t,"signin_url"),featureGlobalNav:Object(p["isFeatureEnabled"])(t,"feature_global_nav")}};var nt=Object(i["connect"])(rt,at)(tt);var it=nt;var st=new h["b"]("global_nav");var ot={name:void 0,featureGlobalNav:false,featureOfflineMode:false,renderSonicMenu:void 0};var lt=function(e){A()(t,e);function t(e){var a;y()(this,t);a=C()(this,w()(t).call(this,e));a.onClick=a.onClick.bind(I()(a));a.renderMenu=a.renderMenu.bind(I()(a));a.renderIcon=a.renderIcon.bind(I()(a));return a}k()(t,[{key:"onClick",value:function e(){this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_TEAM_MENU"}}})}},{key:"renderIcon",value:function e(){if(this.props.featureOfflineMode)return n.a.createElement(n.a.Fragment,null,n.a.createElement(L["b"],null,n.a.createElement(D["b"],{type:"chevron-down",className:"p-global_nav__top_name_icon"})),n.a.createElement(L["a"],null,n.a.createElement(F["c"],{tip:st.t("No network connection"),position:"bottom"},n.a.createElement(D["b"],{type:"cloud-offline-small",className:"p-global_nav__top_name_icon margin_left_25"}))));return n.a.createElement(D["b"],{type:"chevron-down",className:"p-global_nav__top_name_icon"})}},{key:"renderMenu",value:function e(t){return n.a.createElement(it,g()({},t,{renderSonicMenu:this.props.renderSonicMenu}))}},{key:"render",value:function e(){var t=this.props,a=t.name,r=t.featureGlobalNav;if(!a||!r)return null;return n.a.createElement(R["e"],{renderMenu:this.renderMenu,position:"bottom-left",offsetX:-4,offsetY:-4,allowanceX:12,onClick:this.onClick},n.a.createElement(x["c"],{className:"p-global_nav__top_name","data-qa":"team_menu","aria-label":st.t("Team menu")},n.a.createElement("div",{className:"overflow_ellipsis"},a),this.renderIcon()))}}]);return t}(r["Component"]);lt.displayName="Name";lt.defaultProps=ot;var ct=function e(t){var a=Object(N["d"])(t);return{name:a?Object(P["getTeamDisplayName"])(a):void 0,featureGlobalNav:Object(p["isFeatureEnabled"])(t,"feature_global_nav"),featureOfflineMode:Object(p["isFeatureEnabled"])(t,"feature_offline_mode"),clogger:Object(M["a"])({state:t})}};var ut=Object(i["connect"])(ct)(lt);var dt=a(1323);var pt=a(219);var mt=a(840);var ht=a(418);var vt=a(652);var ft=a(1652);var bt=a(345);var gt=a(87);var _t=a(20);var yt=a(233);var Ot=a(235);var kt=a(2227);var Et={name:void 0,secondary:void 0,userId:void 0,inDnd:false,inDndBySnooze:false};var Ct=function e(t){var a=t.name,r=t.secondary,i=t.userId,s=t.inDnd,o=t.inDndBySnooze;var l=r?n.a.createElement("div",{className:"p-global_nav__top_menu_header_sub"},r):null;var c=d()("p-global_nav__top_menu_header","p-global_nav__top_menu_header--full","p-global_nav__top_menu_header--user",{"p-global_nav__top_menu_snooze_background":s&&o,"p-global_nav__top_menu_schedule_background":s&&!o});return n.a.createElement("div",{className:c},n.a.createElement(pt["b"],{userId:i,size:36,isInteractive:false,className:"p-global_nav__top_menu_header_icon",tabIndex:"-1"}),n.a.createElement("div",{className:"p-global_nav__top_menu_header_right"},n.a.createElement("div",{className:"p-global_nav__top_menu_header_name"},a),l))};Ct.displayName="UserHeader";Ct.defaultProps=Et;var St=function e(t){var a=Object(Ee["b"])(t);var r=Object(yt["getSnoozeScheduleForCurrentUser"])(t),n=r.snoozeEnabled;return{name:Object(Qe["getPrefCompliantMemberName"])(t,a),secondary:Object(Qe["getMemberSecondaryName"])(t,a),userId:a.id,inDnd:!!Object(yt["getDndByMemberId"])(t,a.id),inDndBySnooze:n}};var wt=Object(i["connect"])(St)(Ct);var jt=a(1348);var It=a(1870);var Tt=new h["b"]("do_not_disturb");var At={snoozeEndTs:void 0,dndEndTs:void 0,do24hrTime:false};var Nt=function(e){A()(t,e);function t(){y()(this,t);return C()(this,w()(t).apply(this,arguments))}k()(t,[{key:"render",value:function e(){var t=this.props,a=t.inDndBySnooze,r=t.snoozeEndTs,i=t.dndEndTs,s=t.do24hrTime;var o=d()("p-dnd_header",{"p-dnd_header__snooze_background":a,"p-dnd_header__schedule_background":!a});var l=a?r:i;var c=Object(jt["b"])(l,{do24hrTime:s});return n.a.createElement("div",{className:o},n.a.createElement("div",{className:"p-dnd_header__status"},n.a.createElement("div",null,n.a.createElement("strong",null,Tt.t("Do Not Disturb: ON",{fallbackHash:"e9f808845f44c3345ade56f562f58e9da896e00e"}))),n.a.createElement("div",{className:"p-dnd_header__sub_text"},c)))}}]);return t}(r["PureComponent"]);Nt.displayName="DndHeader";Nt.defaultProps=At;var Pt=function e(t){var a=Object(p["getCurrentUserId"])(t);var r=Object(yt["getDndScheduleByMemberId"])(t,a),n=r.nextDndEndTs;var i=Object(yt["getSnoozeScheduleForCurrentUser"])(t),s=i.snoozeEnabled,o=i.snoozeEndTs;return{inDndBySnooze:s,snoozeEndTs:o,dndEndTs:n,do24hrTime:Object(m["k"])(t,"time24")}};var Mt=Object(i["connect"])(Pt)(Nt);function Dt(e){var t=Object(p["isFeatureEnabled"])(e,"feature_tinyspeck");return{help:Object(p["getFromBootData"])(e,"help_url"),version:t||v["isDev"]}}var xt=new h["b"]("global_nav");var Rt={actions:void 0,currentMember:void 0,currentPresence:void 0,onTriggerClose:q["noop"],openCustomStatusDialog:q["noop"],currentChannel:void 0,inDnd:false,inDndBySnooze:false,endDndSnooze:q["noop"],endDndSchedule:q["noop"],featureGlobalNav:false,toggleUserPresence:q["noop"],updateCurrentMemberProfile:q["noop"],openPrefsModal:q["noop"]};var Ft=function(e){A()(t,e);function t(e){var a;y()(this,t);a=C()(this,w()(t).call(this,e));a.renderDndMenu=a.renderDndMenu.bind(I()(a));a.renderPresenceLabel=a.renderPresenceLabel.bind(I()(a));return a}k()(t,[{key:"renderDndMenu",value:function e(t){var a=this.props.currentChannel;return n.a.createElement(kt["a"],{currentChannel:a,menuProps:t,useGlobalNav:true})}},{key:"renderPresenceLabel",value:function e(){var t=this.props,a=t.currentPresence,r=t.featureGlobalNav;if(!r)return null;switch(a){case"active":return xt.rt("Set yourself to <strong>away</strong>",null,function(e){var t=e.text,a=e.key;return n.a.createElement("strong",{key:a},t)});case"away":return xt.rt("<status>Away</status> Set yourself to <strong>active</strong>",null,function(e){var t=e.tag,a=e.text,r=e.key;switch(t){case"status":return n.a.createElement("strong",{className:"half_opacity",key:r},a);case"strong":return n.a.createElement("strong",{key:r},a);default:return null}});default:return null}}},{key:"render",value:function e(){var t=this;var a=this.props,r=a.actions,i=a.currentMember,s=a.inDnd,o=a.inDndBySnooze,l=a.featureGlobalNav,c=B()(a,["actions","currentMember","inDnd","inDndBySnooze","featureGlobalNav"]);if(!l)return null;var u=[{type:"custom",children:n.a.createElement(wt,{key:"user-header"})},{type:"custom",children:n.a.createElement(Mt,{key:"dnd-header"}),hide:!s},{type:"submenu",label:xt.rt("Turn on <strong>Do Not Disturb</strong>"),renderSubmenu:this.renderDndMenu,hide:s},{label:xt.t("Resume notifications now"),key:"turn-off-dnd",hide:!s,click:o?this.props.endDndSnooze:this.props.endDndSchedule},{type:"submenu",label:xt.t("Adjust time"),renderSubmenu:this.renderDndMenu,hide:!s||s&&!o},{label:xt.t("Adjust schedule\u2026",{fallbackHash:"ce0d0efeb198eef758ed1a5393ca0a0f33012be6"}),key:"adjust-dnd-schedule",hide:!s||s&&o,click:function e(){return t.props.openPrefsModal({activeSection:"notifications",activeSubsection:"prefs_dnd"})}},{type:"separator",key:"dnd-separator",hide:!s},{label:xt.t("Clear status"),hide:!Object(Qe["hasCustomStatusSet"])(i),click:function e(){t.props.updateCurrentMemberProfile({profile:{status_text:"",status_emoji:"",status_text_canonical:"",status_expiration:0}})}},{label:Object(Qe["hasCustomStatusSet"])(i)?xt.t("Edit status"):xt.t("Set a status"),shortcut:Object(v["isMac"])()?"\u2318\u21e7Y":"Ctrl+Shift+Y",click:this.props.openCustomStatusDialog},{label:this.renderPresenceLabel(),key:"set-active-away",click:this.props.toggleUserPresence},{type:"separator",key:"header-separator"},{label:xt.t("Profile & account"),click:function e(){return Object(Ot["h"])(i.id)}},{label:xt.rt("Notification preferences"),key:"notification-preferences",click:function e(){return t.props.openPrefsModal({activeSection:"notifications"})}},{type:"custom",children:n.a.createElement("div",{className:"p-global_nav__top_menu_cap",key:"user-menu-bottom-cap"})}].filter(function(e){return!e.hide});var p=d()({"p-global_nav__top_user_menu":true,"p-global_nav__top_user_menu--dnd":s});return n.a.createElement(R["a"],g()({},c,{template:u,menuClassNames:p,noMargin:true}))}}]);return t}(r["Component"]);Ft.displayName="UserMenu";Ft.defaultProps=Rt;var Lt=function e(t){var a=Object(Ee["b"])(t);var r=Object(gt["a"])(t);var n=Object(yt["getSnoozeScheduleForCurrentUser"])(t),i=n.snoozeEnabled;return{actions:Dt(t),currentMember:a,currentPresence:Object(bt["getCurrentMemberPresence"])(t),currentChannel:Object(_t["e"])(t,r,false)||void 0,inDnd:!!Object(yt["getDndByMemberId"])(t,a.id),inDndBySnooze:i,featureGlobalNav:Object(p["isFeatureEnabled"])(t,"feature_global_nav")}};var Ut={openCustomStatusDialog:dt["a"],toggleUserPresence:bt["toggleUserPresence"],updateCurrentMemberProfile:ft["a"],endDndSnooze:vt["b"],endDndSchedule:vt["a"],openPrefsModal:J["a"]};var Bt=Object(i["connect"])(Lt,Ut)(Ft);var qt=Bt;var Gt=new h["b"]("global_nav");var Ht={userId:void 0,hasCustomStatus:false,openCustomStatusDialog:q["noop"],featureGlobalNav:false};var Wt=function(e){A()(t,e);function t(e){var a;y()(this,t);a=C()(this,w()(t).call(this,e));a.onUserClick=a.onUserClick.bind(I()(a));a.onStatusClick=a.onStatusClick.bind(I()(a));a.renderMenu=a.renderMenu.bind(I()(a));return a}k()(t,[{key:"onStatusClick",value:function e(){this.props.openCustomStatusDialog();this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_CUSTOM_STATUS"}}})}},{key:"onUserClick",value:function e(){this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_USER_MENU"}}})}},{key:"renderMenu",value:function e(t){return n.a.createElement(qt,t)}},{key:"render",value:function e(){var t=this.props,a=t.userId,r=t.hasCustomStatus,i=t.featureGlobalNav;if(!a||!i)return null;var s=r&&n.a.createElement(x["c"],{onClick:this.onStatusClick,className:"p-global_nav__top_user_status_button","aria-label":Gt.t("Edit status")},n.a.createElement(mt["b"],{memberId:a,tipPosition:"bottom-right",className:"p-global_nav__top_user_status"}),n.a.createElement(D["b"],{type:"pencil",className:"p-global_nav__top_user_status_edit"}));return n.a.createElement("div",{className:"p-global_nav__top_user"},s,n.a.createElement(R["e"],{renderMenu:this.renderMenu,position:"bottom-right",offsetX:4,offsetY:10,allowanceX:12,onClick:this.onUserClick},n.a.createElement(x["c"],{"aria-label":Gt.t("User menu")},n.a.createElement(pt["b"],{userId:a,size:32,showBadge:false,isInteractive:false,className:d()({"p-global_nav__top_user_avatar":true,"p-global_nav__top_user_avatar--beside-status":r}),tabIndex:"-1"}),n.a.createElement(ht["a"],{memberId:a,className:"p-global_nav__top_user_presence",inline:false}))))}}]);return t}(r["Component"]);Wt.displayName="User";Wt.defaultProps=Ht;var Vt=function e(t){return{userId:Object(p["getCurrentUserId"])(t),hasCustomStatus:Object(Qe["hasCustomStatusSet"])(Object(Ee["b"])(t)),featureGlobalNav:Object(p["isFeatureEnabled"])(t,"feature_global_nav"),clogger:Object(M["a"])({state:t})}};var Kt={openCustomStatusDialog:dt["a"]};var zt=Object(i["connect"])(Vt,Kt)(Wt);var Qt=a(75);var Yt=a.n(Qt);var Jt=a(1423);var Xt=a(1247);var Zt=a(99);var $t=a(119);var ea=a(104);var ta=a(499);var aa={active:false,children:void 0,className:void 0};var ra=function(e){A()(t,e);function t(e){var a;y()(this,t);a=C()(this,w()(t).call(this,e));a.onClick=a.onClick.bind(I()(a));return a}k()(t,[{key:"onClick",value:function e(){var t=this.props,a=t.pane,r=t.active,n=t.clogger;"team"===a?Object(Ot["k"])():"starred_items"===a&&Object(f["a"])()?r?this.props.closeFlexpane():this.props.showStarredItemsList():"activity"===a?this.props.toggleActivityFlexpane():Object(ta["d"])(a);"mentions"===a?n.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_FLEX_ACTIVITY"}}}):"stars"===a&&n.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_FLEX_STARS"}}})}},{key:"render",value:function e(){var t=this.props,a=t.icon,r=t.tooltip,i=t.pane,s=t.active,o=t.children,l=t["aria-label"];var c=d()("p-global_nav__top_button","p-global_nav__top_flex","p-global_nav__top_flex--"+i,s&&"p-global_nav__top_flex--active",this.props.className);return n.a.createElement(F["c"],{tip:r,delay:F["a"],position:"bottom",offsetY:er},n.a.createElement(x["c"],{className:c,onClick:this.onClick,"aria-label":l},n.a.createElement(D["b"],{type:a,className:"p-global_nav__top_button_icon"}),o))}}]);return t}(r["PureComponent"]);ra.displayName="FlexButton";ra.defaultProps=aa;var na=function e(t,a){var r=a.pane;return{active:Object($t["j"])(t)===r,clogger:Object(M["a"])({state:t})}};var ia=function e(t){return{toggleActivityFlexpane:function e(){return t(Object(ea["s"])())},showStarredItemsList:function e(){return t(Object(ea["l"])())},closeFlexpane:function e(){return t(Object(ea["a"])())}}};var sa=Object(i["connect"])(na,ia)(ra);var oa=new h["b"]("global_nav");var la={reactionToast:void 0,noAnimation:false,featureGlobalNav:false};var ca=function e(t){var a=t.reactionToast,r=t.noAnimation,i=t.featureGlobalNav;if(!i)return null;var s=a&&n.a.createElement(Zt["b"],{text:":"+a.emoji+":",emojiSize:Zt["a"].LARGE,className:"p-global_nav__top_activity_toast"});var o=Yt.a.chrome&&!H["isDesktop"];var l=!o&&n.a.createElement("span",{className:"p-global_nav__tip_shortcut"},Object(v["isMac"])()?"\u2318\u21e7M":"Ctrl+Shift+M");var c=a?n.a.createElement(n.a.Fragment,null,Object(Xt["a"])(a.memberName),n.a.createElement("br",null),n.a.createElement("span",{className:"sk_foreground_high"},Object(Xt["a"])(a.channelName))):n.a.createElement(n.a.Fragment,null,oa.t("Activity"),l);var u=d()({"p-global_nav__top_activity":true,"p-global_nav__top_activity--no-animation":r,"p-global_nav__top_activity--toasting":a});return n.a.createElement("div",{className:u},n.a.createElement(sa,{icon:"mentions",pane:"activity",tooltip:c,"aria-label":oa.t("Activity")}),s)};ca.displayName="ActivityButton";ca.defaultProps=la;var ua=function e(t){return{reactionToast:Object(Jt["getReactionToast"])(t),noAnimation:!Object(m["k"])(t,"a11y_animations"),featureGlobalNav:Object(p["isFeatureEnabled"])(t,"feature_global_nav")}};var da=Object(i["connect"])(ua)(ca);var pa=new h["b"]("global_nav");var ma={isUserRestricted:false,isPaid:false,isEnterprise:false,userId:void 0,showFileList:q["noop"],showDownloads:q["noop"],showKeyboardShortcuts:q["noop"],showWhatsNew:q["noop"],showUserGroupList:q["noop"],showUserCalendar:q["noop"],featureCalendarSimpleAgendaView:false,featureGlobalNav:false,featureSonicUserGroups:false,openHelpModal:q["noop"]};var ha=function(e){A()(t,e);function t(e){var a;y()(this,t);a=C()(this,w()(t).call(this,e));a.onTriggerClick=a.onTriggerClick.bind(I()(a));a.clogItem=a.clogItem.bind(I()(a));a.renderMenu=a.renderMenu.bind(I()(a));return a}k()(t,[{key:"onTriggerClick",value:function e(){this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_FLEX_MENU"}}})}},{key:"clogItem",value:function e(t){this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_FLEX_MENU_ITEM"}},flex_name:t})}},{key:"renderMenu",value:function e(t){var a=this;var r=this.props,i=r.featureGlobalNav,s=r.featureSonicUserGroups,o=r.isUserRestricted,l=r.isPaid,c=r.isEnterprise,u=r.userId;if(!i)return null;var d=[{label:pa.t("Your events"),icon:n.a.createElement(D["b"],{type:"all-files-alt"}),click:function e(){a.props.showUserCalendar();a.clogItem("calendar")},hide:!this.props.featureCalendarSimpleAgendaView},{label:pa.t("Files"),icon:n.a.createElement(D["b"],{type:"all-files-alt"}),click:function e(){a.props.showFileList({user:u});a.clogItem("files_user")}},{label:pa.t("Downloads"),icon:n.a.createElement(D["b"],{type:"cloud-download"}),click:function e(){a.props.showDownloads({user:u});a.clogItem("downloads")},hide:!H["isDesktop"]},{type:"separator"},{label:c?pa.t("Organization Directory"):pa.t("Workspace Directory"),icon:n.a.createElement(D["b"],{type:"team-directory"}),shortcut:!Yt.a.firefox&&(Object(v["isMac"])()?"\u2318\u21e7E":"Ctrl+Shift+E"),click:function e(){Object(Ot["k"])();a.clogItem("team")}},{label:pa.t("User Groups"),icon:n.a.createElement(D["b"],{type:"user-groups"}),click:function e(){s?a.props.showUserGroupList():Object(Ot["j"])();a.clogItem("groups")},hide:o||!l},{type:"separator"},{label:pa.t("What\u2019s New"),icon:n.a.createElement(D["b"],{type:"emoji-celebration"}),click:function e(){a.props.showWhatsNew();a.clogItem("whats_new")}},{label:pa.t("Keyboard Shortcuts"),icon:n.a.createElement(D["b"],{type:"keyboard"}),shortcut:Object(v["isMac"])()?"\u2318/":"Ctrl+/",click:function e(){a.props.showKeyboardShortcuts();a.clogItem("shortcuts")}},{label:pa.t("Help"),icon:n.a.createElement(D["b"],{type:"question-circle"}),click:function e(){a.props.openHelpModal({trigger:"flex_menu"});a.clogItem("help")}}].filter(function(e){return!e.hide});return n.a.createElement(R["a"],g()({},t,{menuClassNames:"p-global_nav__top_flexpanes_menu",template:d,stripTerminalSeparators:true,width:Object(v["isMac"])()?void 0:360}))}},{key:"render",value:function e(){if(!this.props.featureGlobalNav)return null;return n.a.createElement(R["e"],{position:"bottom-right",renderMenu:this.renderMenu,offsetY:tr,onClick:this.onTriggerClick},n.a.createElement(F["c"],{tip:pa.t("More options"),position:"bottom",delay:F["a"],offsetY:er},n.a.createElement(x["c"],{className:"p-global_nav__top_button p-global_nav__top_button--flexpanes","aria-label":pa.t("More options")},n.a.createElement(D["b"],{type:"vertical-ellipsis",className:"p-global_nav__top_button_icon"}))))}}]);return t}(r["PureComponent"]);ha.displayName="FlexpanesMenu";ha.defaultProps=ma;var va=function e(t){return{isUserRestricted:Object(Qe["isRestricted"])(Object(Ee["b"])(t)),isPaid:Object(P["isPaidTeam"])(Object(N["d"])(t)),isEnterprise:Object(p["pageNeedsEnterprise"])(t),userId:Object(p["getCurrentUserId"])(t),featureCalendarSimpleAgendaView:Object(p["isFeatureEnabled"])(t,"feature_calendar_simple_agenda_view"),featureGlobalNav:Object(p["isFeatureEnabled"])(t,"feature_global_nav"),featureSonicUserGroups:Object(p["isFeatureEnabled"])(t,"feature_sonic_user_groups"),clogger:Object(M["a"])({state:t})}};var fa={showFileList:ea["h"],showKeyboardShortcuts:function e(){return ea["i"].apply(void 0,arguments)},showDownloads:ea["g"],showWhatsNew:ea["q"],showUserGroupList:ea["p"],showUserCalendar:ea["n"],openHelpModal:fe};var ba=Object(i["connect"])(va,fa)(ha);var ga=a(292);var _a=a(1686);var ya=a(2766);var Oa=a(85);var ka=a(30);var Ea=a(385);var Ca=a(293);var Sa=a(210);var wa=a(1063);var ja=a(2031);var Ia=a(61);var Ta=a(2802);var Aa=a(323);var Na=a(2803);var Pa={displayQuery:"",telemeter:Ia["d"]};var Ma=function(e){A()(t,e);function t(e){var a;y()(this,t);a=C()(this,w()(t).call(this,e));Object(ka["a"])(I()(a),["onClick","onSearchInputBoxFocus","onSearchInputBoxEscape","onSearchAutocompleteSuggestionAccept"]);a.precacheSearch=Object(q["throttle"])(a.precacheSearch.bind(I()(a)),6e4);return a}k()(t,[{key:"onClick",value:function e(){this.props.autocompleteIsOpen||this.props.openSearchAutocomplete()}},{key:"onSearchAutocompleteSuggestionAccept",value:function e(){Object(wa["e"])(this.props.telemeter);this.props.searchAutocompleteSuggestionAccept()}},{key:"onSearchInputBoxEscape",value:function e(){this.props.closeSearchAutocomplete()}},{key:"onSearchInputBoxFocus",value:function e(){this.props.openSearchAutocomplete();this.precacheSearch()}},{key:"precacheSearch",value:function e(){this.props.searchPrecache()}},{key:"render",value:function e(){var t=d()({"p-global_nav__top_search":true,"p-global_nav__top_search--browser":!H["isDesktop"],"p-global_nav__top_search--primarysearch":true,"p-global_nav__top_search--primarysearch_open":this.props.autocompleteIsOpen});return n.a.createElement(Sa["a"],{enabled:["feature_primary_search"]},n.a.createElement(x["c"],{className:t,onClick:this.onClick},n.a.createElement(Na["a"],{autoFocus:false,displayQuery:this.props.displayQuery,onEnter:this.onSearchAutocompleteSuggestionAccept,onEscape:this.onSearchInputBoxEscape,onFocus:this.onSearchInputBoxFocus})))}}]);return t}(r["PureComponent"]);Ma.displayName="AutocompleteInputInPrimarySearch";Ma.defaultProps=Pa;var Da=function e(t){return{autocompleteIsOpen:Object(Ca["isSearchAutocompleteOpen"])(t),displayQuery:Object(ga["getSearchInputBoxDisplayQuery"])(t),telemeter:Object(Ia["c"])({state:t})}};var xa={searchPrecache:Aa["s"],openSearchAutocomplete:Ca["openSearchAutocomplete"],closeSearchAutocomplete:Ca["closeSearchAutocomplete"],searchAutocompleteSuggestionAccept:ja["a"]};var Ra=Object(i["connect"])(Da,xa)(Ma);var Fa={telemeter:Ia["d"]};var La=function(e){A()(t,e);function t(e){var a;y()(this,t);a=C()(this,w()(t).call(this,e));Object(ka["a"])(I()(a),["handleClick","onSearchAutocompleteSuggestionAccept","handleAutocompleteRef"]);a.calculatePopoverConstraints=Object(q["throttle"])(a.calculatePopoverConstraints.bind(I()(a)),1e3);a.searchHeaderBackdrop=Object(r["createRef"])();a.state={hasCalculatedConstraints:false,overlayStyle:{marginTop:0},contentStyle:{top:0,left:0,width:200}};a.autocompleteInputRef=null;return a}k()(t,[{key:"onSearchAutocompleteSuggestionAccept",value:function e(){Object(wa["e"])(this.props.telemeter);this.props.searchAutocompleteSuggestionAccept()}},{key:"calculatePopoverConstraints",value:function e(){if(!this.autocompleteInputRef)return;var t=Object(Oa["findDOMNode"])(this.autocompleteInputRef);var a=t.getBoundingClientRect();var r=t.parentElement.getBoundingClientRect();var n=10;this.setState(function(){return{hasCalculatedConstraints:true,overlayStyle:{marginTop:r.bottom},contentStyle:{top:0,left:a.left-n,width:a.width+2*n}}})}},{key:"handleAutocompleteRef",value:function e(t){this.autocompleteInputRef=t;t&&this.calculatePopoverConstraints()}},{key:"handleClick",value:function e(t){this.searchHeaderBackdrop&&this.searchHeaderBackdrop.current===t.target&&this.props.closeAutocomplete()}},{key:"render",value:function e(){var t=this.props,a=t.isOpen,r=t.closeAutocomplete;var i="c-popover c-search_modal c-search_modal--autocomplete c-search_modal--primarysearch";var s=a&&this.state.hasCalculatedConstraints;return n.a.createElement(Sa["a"],{enabled:["feature_primary_search"]},s&&n.a.createElement("div",{className:"c-search_autocomplete__header_backdrop",ref:this.searchHeaderBackdrop,onClick:this.handleClick}),n.a.createElement(Ra,{ref:this.handleAutocompleteRef}),n.a.createElement(Ea["a"],{ariaRole:"dialog",ariaLabel:"Search",isOpen:s,position:"bottom-right",onClose:r,shouldFade:false,overlayClassName:i,allowanceX:20,allowanceY:0,shouldFocusAfterRender:false,shouldReturnFocusAfterClose:false,onResize:this.calculatePopoverConstraints,shouldObserveResize:true,contentStyle:this.state.contentStyle,overlayStyle:this.state.overlayStyle},a&&n.a.createElement("div",{className:"c-search-autocomplete"},n.a.createElement(Ta["a"],{userQuery:this.props.userQuery,onAccept:this.onSearchAutocompleteSuggestionAccept}))))}}]);return t}(r["PureComponent"]);La.displayName="AutocompleteInPrimarySearch";La.defaultProps=Fa;var Ua=function e(t){return{userQuery:Object(ga["getSearchInputBoxUserQuery"])(t),isOpen:Object(Ca["isSearchAutocompleteOpen"])(t),telemeter:Object(Ia["c"])({state:t})}};var Ba={closeAutocomplete:Ca["closeSearchAutocomplete"],searchAutocompleteSuggestionAccept:ja["a"]};var qa=Object(i["connect"])(Ua,Ba)(La);var Ga=a(145);var Ha=a(786);var Wa=a(831);function Va(e){return"Vsearch"===Object(gt["a"])(e)}var Ka=new h["b"]("search");var za={displayQuery:void 0,orgName:void 0,teamName:void 0,openFromClick:q["noop"],clearSearchInputField:q["noop"]};var Qa=function(e){A()(t,e);function t(e){var a;y()(this,t);a=C()(this,w()(t).call(this,e));a.onClick=a.onClick.bind(I()(a));a.onClearClick=a.onClearClick.bind(I()(a));return a}k()(t,[{key:"onClearClick",value:function e(t){t.stopPropagation();this.props.clearSearchInputField()}},{key:"onClick",value:function e(){this.props.isPrimarySearchFeatureEnabled?this.props.openSearchAutocomplete():this.props.openFromClick();this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_SEARCH"}}})}},{key:"render",value:function e(){var t=this.props,a=t.displayQuery,r=t.orgName,i=t.teamName,s=t.isPrimarySearchFeatureEnabled,o=t.showSearchAsActive;var l=a?n.a.createElement(n.a.Fragment,null,n.a.createElement(Ga["a"],{text:a,className:"p-global_nav__top_search_text",customLineEnding:" ",showTooltips:false,noLinking:true,noSpecials:true,noHighlights:true}),n.a.createElement(x["c"],{className:"p-global_nav__top_search_clear",onClick:this.onClearClick,label:Ka.t("Clear")},n.a.createElement(D["b"],{type:"times-small"}))):n.a.createElement("span",{className:"p-global_nav__top_search_text p-global_nav__top_search_text--placeholder"},Ka.rt("Search {teamName}",{teamName:r||i||""}));var c=d()({"p-global_nav__top_search":true,"p-global_nav__top_search--no_history":true});var u=!s||!o;return n.a.createElement(n.a.Fragment,null,u&&n.a.createElement(x["c"],{className:c,onClick:this.onClick},n.a.createElement(D["b"],{type:"search-medium",className:"p-global_nav__top_search_icon"}),l),!s&&n.a.createElement(ya["a"],null),!u&&n.a.createElement(qa,null))}}]);return t}(r["Component"]);Qa.displayName="SearchPlaceholderInput";Qa.defaultProps=za;var Ya=function e(t){return{displayQuery:Object(ga["getSearchInputBoxDisplayQuery"])(t),orgName:Object(N["g"])(t)||"",teamName:Object(P["getTeamDisplayName"])(Object(N["d"])(t)),clogger:Object(M["a"])({state:t}),isPrimarySearchFeatureEnabled:Object(Wa["a"])(t),showSearchAsActive:Va(t)||Object(Ca["isSearchAutocompleteOpen"])(t)}};var Ja={openSearchAutocomplete:Ca["openSearchAutocomplete"],openFromClick:Ha["a"],clearSearchInputField:_a["a"]};var Xa=Object(i["connect"])(Ya,Ja)(Qa);var Za=a(2477);var $a=new h["b"]("global_nav");var er=-12;var tr=-4;var ar={theme:void 0,renderSonicMenu:void 0,featureGlobalNav:false};var rr=function e(t){var a=t.theme,r=t.renderSonicMenu,i=t.featureGlobalNav;if(!i)return null;var s=d()("p-global_nav__top",a&&"p-global_nav__top--theme-"+a);return n.a.createElement("div",{className:s},n.a.createElement(ut,{renderSonicMenu:r}),n.a.createElement("div",{className:"p-global_nav__top_spacer"}),n.a.createElement(Xa,null),n.a.createElement("div",{className:"p-global_nav__top_spacer--fill"}),n.a.createElement(da,null),n.a.createElement(sa,{icon:"star-o",pane:Object(f["a"])()?"starred_items":"stars",tooltip:n.a.createElement(n.a.Fragment,null,$a.t("Starred items"),n.a.createElement("span",{className:"p-global_nav__tip_shortcut"},Object(v["isMac"])()?"\u2318\u21e7S":"Ctrl+Shift+S")),"aria-label":$a.t("Starred items")}),n.a.createElement(ba,null),n.a.createElement("div",{className:"p-global_nav__top_spacer"}),n.a.createElement(zt,null))};rr.displayName="TopNav";rr.defaultProps=ar;var nr=function e(t){return{theme:Object(m["k"])(t,"sidebar_theme"),featureGlobalNav:Object(p["isFeatureEnabled"])(t,"feature_global_nav")}};var ir=Object(i["connect"])(nr)(rr);var sr=a(2791);var or=a(9);var lr=a(316);var cr=a(1309);var ur=a(221);var dr=a(121);var pr=a(460);var mr=a(1338);var hr=a(1381);var vr=Object(X["b"])("TS.ui.channel_options_dialog.start");var fr=Object(X["b"])("TS.ui.invite.showInviteMemberToChannelDialog");var br=Object(X["b"])("TS.ui.mpim_conversion_modal.startMpimConversionModal");var gr=Object(X["b"])("TS.ui.im_browser.startWithMpim");var _r=Object(X["b"])("TS.notifs.canModelObHaveChannelMentions",function(){return false});var yr=Object(X["b"])("TS.notifs.muteOrUnmuteCorG");var Or=a(408);var kr=a(1650);var Er=a(40);var Cr=a.n(Er);var Sr=a(1191);var wr=new h["b"]("global_nav");var jr={channel:void 0,close:q["noop"],back:q["noop"],featureGlobalNav:false};var Ir=function(e){A()(t,e);function t(e){var a;y()(this,t);a=C()(this,w()(t).call(this,e));a.onDateChange=a.onDateChange.bind(I()(a));return a}k()(t,[{key:"onDateChange",value:function e(t){var a=this.props,r=a.channelId,n=a.close;var i=Cr()(t,"YYYY-MM-DD").format("X");Object(Ot["o"])(r,i);n()}},{key:"render",value:function e(){var t=this.props,a=t.channel,r=t.back,i=t.featureGlobalNav;if(!i)return null;var s=a.created?Cr()(a.created,"X").format("YYYY-MM-DD"):void 0;return n.a.createElement(R["f"],g()({},this.props,{width:325}),n.a.createElement(Sr["a"],{key:"date-picker",className:"p-global_nav__channel_date_picker",disableDatesBefore:s,disableDatesAfter:Cr()().format("YYYY-MM-DD"),onDateChange:this.onDateChange}),n.a.createElement(x["c"],{key:"date-picker-back",className:"p-global_nav__channel_date_picker_back","data-qa":"date_picker_back",onClick:r},wr.t("Back to menu")))}}]);return t}(r["Component"]);Ir.displayName="JumpToDate";Ir.defaultProps=jr;var Tr=function e(t,a){var r=a.channelId;return{channel:Object(_t["e"])(t,r),featureGlobalNav:Object(p["isFeatureEnabled"])(t,"feature_global_nav")}};var Ar=Object(i["connect"])(Tr)(Ir);var Nr=a(1212);function Pr(e,t){var a=Object(_t["e"])(e,t);if(!e||!a)return null;var r=Object(Ee["e"])(e,Object(or["getMemberIdFromIm"])(a));var n=Object(Ee["b"])(e);var i=Object(or["getChannelType"])(a);var s="im"===i;var o="mpim"===i;var l="channel"===i;var c="private"===i;var u=l||c;var d=Object(or["isYou"])(n.id,a);var m=Object(Nr["d"])(e,a);var h=true;var v=!s&&!Object(Qe["isUltraRestricted"])(n);var f=d;var b=s&&!d;var g=s&&!d&&!Object(or["isSlackbot"])(a)&&!Object(Qe["isUltraRestricted"])(n)&&!Object(Qe["isUltraRestricted"])(r)&&!Object(Qe["isDeleted"])(r)&&!Object(Qe["isExternal"])(r);var _=true;var y=u&&!Object(Qe["isUltraRestricted"])(n)&&!Object(Qe["isRestricted"])(n)&&Object(or["isMemberOfChannel"])(a)&&(!Object(or["isRequired"])(a)||Object(Ye["c"])(a))&&(!Object(p["pageNeedsEnterprise"])(e)||!(Object(or["isOrgShared"])(a)&&!Object(Ye["b"])()));var O=Object(Ce["T"])(e,t);var k=o&&Object(Ce["F"])(e)&&!Object(or["isExternallySharedChannel"])(a);var E=!s&&(o||Object(or["isMemberOfChannel"])(a)&&!Object(or["isArchived"])(a));var C=E;var S=true;var w=Object(ze["a"])(e,"allow_email_ingestion");var j=u&&Object(or["isMemberOfChannel"])(a)&&!Object(or["isArchived"])(a)&&!Object(or["isRequired"])(a)&&!Object(Qe["isUltraRestricted"])(n)&&!Object(Qe["isRestricted"])(n);var I=u&&!Object(or["isMemberOfChannel"])(a)&&!Object(or["isArchived"])(a)&&!Object(Qe["isUltraRestricted"])(n)&&!Object(Qe["isRestricted"])(n);var T=!l&&Object(Ce["M"])(e,t);var A=Object(or["isArchived"])(a)&&!Object(or["isFrozen"])(a)&&!Object(or["getIsChannelMoved"])(a);var N=Object(or["isArchived"])(a)&&Object(Qe["isAdmin"])(e,n)&&l&&!Object(or["isRequired"])(a);return{call:m,jump:h,invite:v,editProfile:f,viewProfile:b,addMember:g,details:_,options:y,retention:O,convertToPrivate:k,notifications:E,mute:C,apps:S,email:w,leave:j,join:I,exportHistory:T,unarchive:A,delete:N}}var Mr=a(118);var Dr=a(16);var xr=a(372);var Rr=new h["b"]("global_nav");var Fr=Object(V["b"])("Un-archive a channel",function(e,t,a){var r=a.channelId;if(!Object(p["isFeatureEnabled"])(t(),"feature_global_nav"))return;e(Object(Mr["P"])({channelId:r})).catch(function(a){Object(Dr["a"])({getState:t}).error("CHANNEL-ACTIONS","Unarchive failed with error",a);var r=Object(q["get"])(a,"data.error");var i="restricted_action"===r?Rr.t("You don\u2019t have permission to un-archive channels. Please talk to your Workspace Owner."):Rr.t("Sorry, something went wrong. Try again in a moment.");e(Object($["openModal"])({element:n.a.createElement(xr["a"],{title:Rr.t("Un-archive failed")},i)}))})});Fr.meta={name:"unarchiveChannel",key:"componentsGlobalNavChannelModelUtilityUnarchiveChannelUnarchiveChannel",description:"Un-archive a channel"};Fr.propTypes={channelId:c["default"].string.isRequired};var Lr=Fr;var Ur=new h["b"]("global_nav");var Br={onMenuItemSelected:q["noop"],actions:void 0,displayName:void 0,isMuted:false,joinChannel:q["noop"],unarchiveChannel:q["noop"],gantryStartCall:q["noop"],openChannelNotificationPrefsModal:q["noop"],team:void 0,canManagePostingPermissions:false,featureGlobalNav:false,featureAnnounceOnly:false,startChannelInviteModal:q["noop"]};var qr=function(e){A()(t,e);function t(e){var a;y()(this,t);a=C()(this,w()(t).call(this,e));a.onMenuItemSelected=a.onMenuItemSelected.bind(I()(a));a.getMuteLabel=a.getMuteLabel.bind(I()(a));a.getItems=a.getItems.bind(I()(a));a.preventClose=false;a.state={mode:"menu"};return a}k()(t,[{key:"onMenuItemSelected",value:function e(t,a){if(this.preventClose){this.preventClose=false;return}this.props.onMenuItemSelected(t,a)}},{key:"getItems",value:function e(){var t=this;var a=this.props,r=a.channelId,n=a.channel,i=a.actions,s=a.displayName,o=a.joinChannel,l=a.team,c=a.canManagePostingPermissions,u=a.featureGlobalNav,d=a.featureAnnounceOnly;var p=Object(or["getChannelType"])(n);var m=Object(or["getMemberIdFromIm"])(n);if(!i||!p||!u)return[];var v="mpim"===p;var f="channel"===p;var b="private"===p;var g=f||b;var _=[{label:Ur.t("Jump to date\u2026"),show:i.jump,key:"jump",click:function e(){t.preventClose=true;t.setState(function(){return{mode:"jump-to-date"}})}},{label:v?Ur.t("Invite another member\u2026"):Ur.rt("Add people to {channelName}\u2026",{channelName:s}),show:i.invite,key:"invite",click:function e(){return v?gr(n):t.props.startChannelInviteModal({channelId:n.id})}},{label:Ur.t("Edit your profile"),show:i.editProfile,key:"editProfile",click:function e(){return Object(hr["a"])()}},{label:Ur.t("View {userPossesive} profile",{userPossesive:Object(h["c"])(s)}),show:i.viewProfile,key:"viewProfile",click:function e(){return Object(Ot["h"])(m)}},{label:Ur.t("Add {userName} to a channel\u2026",{userName:s}),show:i.addMember,key:"addMember",click:function e(){return fr(m)}},{label:g?Ur.t("View channel details"):Ur.t("View conversation details"),show:i.details,key:"details",click:function e(){return Object(ta["c"])("details")}},{label:Ur.t("Convert to a private channel\u2026"),show:i.convertToPrivate,key:"convertToPrivate",click:function e(){return br(n)}},{label:Ur.t("Edit message retention\u2026"),show:i.retention,key:"retention",click:function e(){return vr(r,"retention")}},{label:Ur.t("Manage posting permissions"),show:d&&c&&i.options,key:"managePostingPermissions",click:function e(){return vr(r,"posting_privilege")}},{label:Ur.t("Additional options\u2026"),show:i.options,key:"options",click:function e(){return vr(r)}},{type:"separator",key:"separator-1"},{label:Ur.t("Notification preferences\u2026"),show:i.notifications,key:"notifications",click:function e(){return t.props.openChannelNotificationPrefsModal({channelId:r,entryPoint:"global_nav_menu"})}},{label:this.getMuteLabel(),show:i.mute,key:"mute",click:function e(){return yr(r)}},{type:"separator",key:"separator-2"},{label:Ur.t("Add an app"),show:i.apps,key:"apps",click:q["noop"]},{label:v?Ur.t("Send email to this conversation\u2026"):Ur.t("Send email to {channelName}\u2026",{channelName:s}),show:i.email,key:"email",href:Object(P["getTeamUrl"])(l,"/services/new/email"),target:"_blank"},{type:"separator",key:"separator-3"},{label:Ur.t("Leave {channelName}",{channelName:s}),show:i.leave,key:"leave",click:function e(){return Object(Or["r"])(r)}},{label:Ur.t("Join {channelName}",{channelName:s}),show:i.join,key:"join",click:function e(){return o({channelId:r})}},{type:"separator",key:"separator-4"},{label:Ur.t("Export message history\u2026"),show:i.exportHistory,key:"exportHistory",click:function e(){return vr(r,"export")}},{type:"separator",key:"separator-5"},{label:Ur.t("Un-archive {channelName}",{channelName:s}),show:i.unarchive,key:"unarchive",click:function e(){return t.props.unarchiveChannel({channelId:r})}},{label:Ur.t("Delete {channelName}",{channelName:s}),show:i.delete,key:"unarchive",click:function e(){return vr(r,"delete")}}];return _.filter(function(e){return e&&(e.show||"separator"===e.type)})}},{key:"getMuteLabel",value:function e(){var t=this.props,a=t.isMuted,r=t.channel,n=t.displayName,i=t.featureGlobalNav;var s="mpim"===Object(or["getChannelType"])(r);if(!i)return null;if(a&&s)return Ur.t("Unmute this conversation");if(a&&!s)return Ur.t("Unmute {channelName}",{channelName:n});if(!a&&s)return Ur.t("Mute this conversation");if(!a&&!s)return Ur.t("Mute {channelName}",{channelName:n});return null}},{key:"render",value:function e(){var t=this;switch(this.state.mode){case"menu":return n.a.createElement(R["a"],g()({},this.props,{template:this.getItems(),onMenuItemSelected:this.onMenuItemSelected,stripTerminalSeparators:true}));case"jump-to-date":return n.a.createElement(Ar,g()({},this.props,{channelId:this.props.channelId,close:this.props.onMenuItemSelected,back:function e(){t.preventClose=true;t.setState(function(){return{mode:"menu"}})}}));default:return null}}}]);return t}(r["Component"]);qr.displayName="Menu";qr.defaultProps=Br;var Gr=function e(t,a){var r=a.channelId;var n=Object(_t["e"])(t,r);var i=Object(N["d"])(t);var s=Object(Ce["O"])(t,r);return{channel:n,actions:Pr(t,r),displayName:Object(or["getDisplayNameForChannel"])(t,n,{imIncludeAtSign:false}),isMuted:Object(ur["isChannelMutedById"])(t,r),team:i,canManagePostingPermissions:s,featureGlobalNav:Object(p["isFeatureEnabled"])(t,"feature_global_nav"),featureAnnounceOnly:Object(p["isFeatureEnabled"])(t,"feature_announce_only")}};var Hr={joinChannel:dr["joinConversationApi"],unarchiveChannel:Lr,gantryStartCall:pr["d"],openChannelNotificationPrefsModal:mr["a"],startChannelInviteModal:kr["b"]};var Wr=Object(i["connect"])(Gr,Hr)(qr);var Vr={channel:void 0,channelId:void 0,name:void 0,userId:void 0,members:void 0,presences:void 0,className:void 0,isMuted:false,featureGlobalNav:false};var Kr=function(e){A()(t,e);function t(e){var a;y()(this,t);a=C()(this,w()(t).call(this,e));a.renderChannel=a.renderChannel.bind(I()(a));a.renderPrivate=a.renderPrivate.bind(I()(a));a.renderIM=a.renderIM.bind(I()(a));a.renderMPIM=a.renderMPIM.bind(I()(a));a.renderMenu=a.renderMenu.bind(I()(a));a.onClick=a.onClick.bind(I()(a));return a}k()(t,[{key:"onClick",value:function e(){this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_CHANNEL_NAME"}}})}},{key:"renderChannel",value:function e(t){return n.a.createElement(t,null,this.props.name)}},{key:"renderIM",value:function e(t){var a=this.props.userId;return n.a.createElement(n.a.Fragment,null,n.a.createElement(t,null,n.a.createElement(lr["a"],{id:a,key:"name"})),n.a.createElement(ht["a"],{memberId:a,className:"p-global_nav__channel_name_presence",key:"presence"}),n.a.createElement(mt["b"],{memberId:a,tooltip:false,key:"custom-status"}))}},{key:"renderMPIM",value:function e(t){var a=this;var i=this.props,s=i.members,o=i.presences;var l=Object(q["flatMap"])(Object(q["filter"])(s,function(e){return e!==a.props.currentUser}),function(e,t){var a=o[e]===bt["PRESENCE_AWAY"]?"p-global_nav__channel_name_member--away":void 0;return n.a.createElement(r["Fragment"],{key:e},t>0?", ":null,n.a.createElement(lr["a"],{id:e,className:a}),n.a.createElement(mt["b"],{memberId:e,tooltip:false,noText:true}))});return n.a.createElement(t,null,l)}},{key:"renderMenu",value:function e(t){return n.a.createElement(Wr,g()({},t,{channelId:this.props.channelId}))}},{key:"renderPrivate",value:function e(t){return n.a.createElement(n.a.Fragment,null,n.a.createElement(D["b"],{type:"lock",className:"p-global_nav__channel_name_icon p-global_nav__channel_name_icon--private"}),n.a.createElement(t,null,this.props.name))}},{key:"renderShared",value:function e(){var t=this.props.channel;return n.a.createElement(cr["a"],{channel:t,className:"p-global_nav__channel_name_icon p-global_nav__channel_name_icon--shared",inline:true,tooltipPosition:"bottom"})}},{key:"render",value:function e(){var t=this;var a=this.props,r=a.type,i=a.className,s=a.isMuted,o=a.featureGlobalNav;if(!o)return null;var l=function e(a){var r=a.children;return n.a.createElement(R["e"],{renderMenu:t.renderMenu,position:"bottom-left",offsetX:-4,offsetY:4,onClick:t.onClick},n.a.createElement(x["c"],{className:"p-global_nav__channel_name_name"},r))};var c;switch(r){case"channel":c=this.renderChannel(l);break;case"private":c=this.renderPrivate(l);break;case"im":c=this.renderIM(l);break;case"mpim":c=this.renderMPIM(l);break;default:break}var u=d()("p-global_nav__channel_name","p-global_nav__channel_name--model","p-global_nav__channel_name--"+r,s&&"p-global_nav__channel_name--muted",i);return n.a.createElement("div",{className:u,"data-qa":"channel_name"},c,this.renderShared())}}]);return t}(r["Component"]);Kr.displayName="Name";Kr.defaultProps=Vr;var zr=function e(t,a){var r=a.channelId;var n=Object(_t["e"])(t,r);var i=Object(or["getMemberIdsFromMpim"])(n);var s=i&&Object(q["mapValues"])(Object(q["keyBy"])(i),function(e){return Object(bt["getPresenceByMemberId"])(t,e)});return{channel:n,channelId:r,name:Object(or["getDisplayNameForChannel"])(t,n,{imIncludeAtSign:false}),type:Object(or["getChannelType"])(n),userId:Object(or["getMemberIdFromIm"])(n)||n.user_id,currentUser:Object(p["getCurrentUserId"])(t),isMuted:Object(ur["isChannelMutedById"])(t,r),members:i,presences:s,featureGlobalNav:Object(p["isFeatureEnabled"])(t,"feature_global_nav"),clogger:Object(M["a"])({state:t})}};var Qr=Object(i["connect"])(zr)(Kr);var Yr=Object(X["b"])("TS.ui.channel_topic_dialog.start");var Jr={start:Yr};var Xr=new h["b"]("global_nav");var Zr={topic:void 0,canEdit:true};var $r=function e(t){if(t.target&&"A"===t.target.tagName)return;Yr()};var en=function e(t){var a=t.topic,r=t.isChannel,i=t.canEdit,s=t.featureGlobalNav;if(!s||!r)return null;var o;if(a){var l=n.a.createElement("div",{className:"p-global_nav__channel_topic_edit"},Xr.t("edit"));o=n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"p-global_nav__channel_topic_text"},n.a.createElement(Ga["a"],{text:a,className:"p-global_nav__channel_topic_content",noJumbomoji:true,noHighlights:true})),i&&l)}else o=i?n.a.createElement("div",{className:"p-global_nav__channel_topic_placeholder"},Xr.t("Add a topic\u2026")):null;var c=d()("p-global_nav__channel_topic",{"p-global_nav__channel_topic--empty":!a});return n.a.createElement(x["c"],{className:c,onClick:$r},o)};en.displayName="Topic";en.defaultProps=Zr;var tn=function e(t,a){var r=a.channelId;var n=Object(_t["e"])(t,r);return{topic:n&&n.topic&&n.topic.value,isChannel:!!(Object(or["isPublicChannel"])(n)||Object(or["isPrivateChannel"])(n)),canEdit:Object(Ce["x"])(t,r).ok,featureGlobalNav:Object(p["isFeatureEnabled"])(t,"feature_global_nav")}};var an=Object(i["connect"])(tn)(en);var rn=a(563);var nn=new h["b"]("global_nav");var sn={starred:false,type:"channel"};var on=function(e){A()(t,e);function t(e){var a;y()(this,t);a=C()(this,w()(t).call(this,e));a.onClick=a.onClick.bind(I()(a));return a}k()(t,[{key:"onClick",value:function e(){var t=this.props,a=t.channelId,r=t.starred,n=t.clogger;this.props.updateStar(!r,{channel:a});n.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_CHANNEL_STAR"}}})}},{key:"getTip",value:function e(){var t=this.props,a=t.type,r=t.starred,n=t.featureGlobalNav;if(!n)return null;if("im"===a||"mpim"===a)return r?nn.t("Unstar this conversation"):nn.t("Star this conversation");return r?nn.t("Unstar this channel"):nn.t("Star this channel")}},{key:"render",value:function e(){var t=this.props,a=t.starred,r=t.show;if(!r)return null;return n.a.createElement(F["c"],{position:"bottom",tip:this.getTip()},n.a.createElement(x["c"],{className:d()("p-global_nav__channel_star",a&&"p-global_nav__channel_star--starred"),onClick:this.onClick,"aria-label":this.getTip()},n.a.createElement(D["b"],{type:a?"star":"star-o",size:"inherit"})))}}]);return t}(r["Component"]);on.displayName="Star";on.defaultProps=sn;var ln=function e(t,a){var r=a.channelId;var n=Object(_t["e"])(t,r);return{type:Object(or["getChannelType"])(n),show:Object(or["canStarOrUnstarChannel"])(n),starred:Object(or["isStarred"])(n),featureGlobalNav:Object(p["isFeatureEnabled"])(t,"feature_global_nav"),clogger:Object(M["a"])({state:t})}};var cn={updateStar:rn["a"]};var un=Object(i["connect"])(ln,cn)(on);var dn=a(330);var pn=a(254);var mn=new h["b"]("global_nav");var hn={count:void 0,isChannel:true,featureGlobalNav:false};var vn=function e(t){var a=t.count,i=t.isChannel,s=t.clogger,o=t.featureGlobalNav;if(!o)return null;if(!a&&!i)return null;var l=function e(t){var a=t.key,i=t.text;return n.a.createElement(r["Fragment"],{key:a},n.a.createElement("span",{className:"bold"},i),"\xa0")};var c=Object(q["isNumber"])(a)?mn.rt("{count, plural, =1 {<span>#</span>Pin} other {<span>#</span>Pins}}",{count:a},l):mn.rt("<span>\u2013</span>Pins",{count:a},l);var u=Object(q["isNumber"])(a)?mn.t("{count, plural, =1 {# pins} other {# pins}}. View pinned items",{count:a},l):mn.t("View pinned items");var d=function e(){if(Object(f["a"])()){var t=Object(dn["b"])();Object(dn["c"])(pn["e"],t.params)}Object(ta["f"])();s.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_CHANNEL_PINS"}}})};return n.a.createElement(F["c"],{position:"bottom",tip:mn.t("View pinned items"),offsetY:-4,delay:F["a"]},n.a.createElement(x["c"],{className:"p-global_nav__channel_info_item p-global_nav__channel_info_pins",onClick:d,"aria-label":u},c))};vn.displayName="Pins";vn.defaultProps=hn;var fn=function e(t,a){var r=a.channelId;var n=Object(_t["e"])(t,r);return{count:n&&n.pinned_items_count,isChannel:Object(or["isPublicChannel"])(n)||Object(or["isPrivateChannel"])(n),featureGlobalNav:Object(p["isFeatureEnabled"])(t,"feature_global_nav"),clogger:Object(M["a"])({state:t})}};var bn=Object(i["connect"])(fn)(vn);var gn=a(304);var _n=new h["b"]("global_nav");var yn={count:void 0,featureGlobalNav:false};var On=function e(t){var a=t.count,i=t.clogger,s=t.featureGlobalNav;if(!s)return null;var o=function e(t){var a=t.key,i=t.text;return n.a.createElement(r["Fragment"],{key:a},n.a.createElement("span",{className:"bold"},i),"\xa0")};var l=Object(q["isNumber"])(a)?_n.rt("{count, plural, =1 {<span>#</span>Member} other {<span>#</span>Members}}",{count:a},o):_n.rt("<span>\u2013</span>Members",{count:a},o);var c=Object(q["isNumber"])(a)?_n.t("{count, plural, =1 {# member} other {# members}}. View member list",{count:a},o):_n.t("View member list");var u=function e(){Object(ta["e"])();i.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_CHANNEL_MEMBERS"}}})};return n.a.createElement(F["c"],{position:"bottom",tip:_n.t("View member list"),offsetY:-4,delay:F["a"]},n.a.createElement(x["c"],{className:"p-global_nav__channel_info_item",onClick:u,"aria-label":c},l))};On.displayName="Members";On.defaultProps=yn;var kn=function e(t,a){var r=a.channelId;var n=Object(gn["getMemberCounts"])(t,r);return{count:n&&n.counts&&n.counts.member_count,featureGlobalNav:Object(p["isFeatureEnabled"])(t,"feature_global_nav"),clogger:Object(M["a"])({state:t})}};var En=Object(i["connect"])(kn)(On);var Cn=new h["b"]("channel_header");var Sn={featureGlobalNav:false};var wn=function(e){A()(t,e);function t(e){var a;y()(this,t);a=C()(this,w()(t).call(this,e));a.onClick=a.onClick.bind(I()(a));a.renderMenu=a.renderMenu.bind(I()(a));return a}k()(t,[{key:"onClick",value:function e(){this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_CHANNEL_ACTIONS"}}})}},{key:"renderMenu",value:function e(t){return n.a.createElement(Wr,g()({},t,{channelId:this.props.channelId}))}},{key:"render",value:function e(){if(!this.props.featureGlobalNav)return null;return n.a.createElement(R["e"],{renderMenu:this.renderMenu,position:"bottom-right",offsetY:-4,onClick:this.onClick},n.a.createElement(F["c"],{position:"bottom-right",tip:Cn.t("Channel settings"),offsetY:-4},n.a.createElement(x["c"],{className:"p-global_nav__channel_info_item","aria-label":Cn.t("Channel settings")},n.a.createElement(D["b"],{type:"cog-o"}))))}}]);return t}(r["Component"]);wn.displayName="Actions";wn.defaultProps=Sn;var jn=function e(t){return{featureGlobalNav:Object(p["isFeatureEnabled"])(t,"feature_global_nav"),clogger:Object(M["a"])({state:t})}};var In=Object(i["connect"])(jn)(wn);var Tn=new h["b"]("global_nav");var An={isBot:false,activeTab:"messages",featureGlobalNav:false};var Nn=function e(t){var a=t.isBot,r=t.activeTab,i=t.featureGlobalNav;if(!i||!a)return null;return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"p-global_nav__channel_bot_tabs"},n.a.createElement(x["c"],{className:d()("p-global_nav__channel_bot_tab","messages"===r&&"p-global_nav__channel_bot_tab--active"),"data-qa":"global_nav_channel_bot_tabs_messages"},Tn.t("Messages")),n.a.createElement(x["c"],{className:d()("p-global_nav__channel_bot_tab","about"===r&&"p-global_nav__channel_bot_tab--active"),"data-qa":"global_nav_channel_bot_tabs_about"},Tn.t("About"))),n.a.createElement("div",{className:"p-global_nav__channel_divider"}))};Nn.defaultProps=An;var Pn=function e(t,a){var r=a.channelId;var n=Object(_t["e"])(t,r);var i=Object(or["getMemberIdFromIm"])(n);if(!i)return{};var s=Object(Ee["e"])(t,i);return{isBot:Object(Qe["isAppOrBot"])(s),activeTab:Object(Jt["getActiveAppTab"])(t),featureGlobalNav:Object(p["isFeatureEnabled"])(t,"feature_global_nav")}};var Mn=Object(i["connect"])(Pn)(Nn);var Dn=a(1269);var xn=new h["b"]("global_nav");var Rn={show:false,channel:void 0,tooltipMessage:void 0,featureGlobalNav:false,startCall:q["noop"]};var Fn=function e(t){var a=t.show,r=t.channel,i=t.tooltipMessage,s=t.featureGlobalNav,o=t.startCall;if(!a||!r||!s)return null;return n.a.createElement(F["c"],{position:"bottom",tip:i,offsetY:-4},n.a.createElement(x["c"],{className:"p-global_nav__channel_info_item p-global_nav__channel_call_button",onClick:function e(){return Object(f["a"])()?o():Object(Dn["c"])(r)},"aria-label":xn.t("Start a call")},n.a.createElement(D["b"],{className:"p-global_nav__channel_call_button_icon",type:"phone"})))};Fn.displayName="CallButton";Fn.defaultProps=Rn;var Ln=function e(t,a){var r=a.channelId;var n=Object(_t["e"])(t,r);if(!n)return null;return{show:Object(Nr["d"])(t,n),channel:n,tooltipMessage:Object(Nr["c"])(t,n),featureGlobalNav:Object(p["isFeatureEnabled"])(t,"feature_global_nav")}};var Un={startCall:pr["d"]};var Bn=Object(i["connect"])(Ln,Un)(Fn);var qn=new h["b"]("channel_header");var Gn={isChannel:true,active:false,featureGlobalNav:false};var Hn=function e(t){var a=t.isChannel,r=t.active,i=t.clogger,s=t.featureGlobalNav;if(!s)return null;var o;a&&r&&(o=qn.t("Hide channel details"));a&&!r&&(o=qn.t("View channel details"));!a&&r&&(o=qn.t("Hide conversation details"));a||r||(o=qn.t("View conversation details"));var l=d()("p-global_nav__channel_info_item",{"p-global_nav__channel_details_button--active":r});var c=function e(){if(Object(f["a"])()){var t=Object(dn["b"])();Object(dn["c"])(pn["e"],t.params)}Object(ta["d"])("details");i.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_CHANNEL_DETAILS"}}})};return n.a.createElement(F["c"],{position:"bottom-right",tip:o,offsetY:-4,delay:F["a"]},n.a.createElement(x["c"],{className:l,onClick:c},qn.t("Details")))};Hn.displayName="Details";Hn.defaultProps=Gn;var Wn=function e(t,a){var r=a.channelId;var n=Object(_t["e"])(t,r);if(!n)return null;return{isChannel:Object(or["isPublicChannel"])(n)||Object(or["isPrivateChannel"])(n),active:"details"===Object($t["j"])(t),featureGlobalNav:Object(p["isFeatureEnabled"])(t,"feature_global_nav"),clogger:Object(M["a"])({state:t})}};var Vn=Object(i["connect"])(Wn)(Hn);var Kn={channelType:void 0};var zn=function e(t){var a=t.channelId,r=t.channelType;if(!a||!r)return null;var i=d()("p-global_nav__channel");return n.a.createElement("div",{className:i},n.a.createElement(un,{channelId:a}),n.a.createElement(Qr,{channelId:a}),n.a.createElement(an,{channelId:a}),n.a.createElement("div",{className:"p-global_nav__channel_spacer--fill"}),n.a.createElement(Mn,{channelId:a}),"im"!==r&&n.a.createElement(En,{channelId:a}),n.a.createElement(bn,{channelId:a}),n.a.createElement(Vn,{channelId:a}),n.a.createElement("div",{className:"p-global_nav__channel_divider"}),n.a.createElement(Bn,{channelId:a}),n.a.createElement(In,{channelId:a}))};zn.displayName="ModelHeader";zn.defaultProps=Kn;var Qn=function e(t,a){var r=a.channelId;var n=Object(_t["e"])(t,r);if(!n)return{};return{channelType:Object(or["getChannelType"])(n)}};var Yn=Object(i["connect"])(Qn)(zn);var Jn=a(270);var Xn=new h["b"]("global_nav");var Zn={featureGlobalNav:false};var $n=function e(t){var a=t.featureGlobalNav;if(!a)return null;var r=Xn.t("Threads");var i="p-global_nav__channel_name p-global_nav__channel_name--synthetic";var s=d()({"p-global_nav__channel":true,"p-global_nav__channel--synthetic":true});return n.a.createElement("div",{className:s,"data-qa":"channel_name"},n.a.createElement("div",{className:i},r))};$n.displayName="AllThreadsHeader";$n.defaultProps=Zn;var ei=Object(Jn["a"])("feature_global_nav")($n);var ti=a(122);var ai=a(1671);var ri=a(520);var ni=a(2087);var ii=new h["b"]("global_nav");var si={hasUnreads:true,sortOrder:"alphabetical",newUnreads:0,setUserPrefByApi:q["noop"],featureGlobalNav:false};var oi=function(e){A()(t,e);function t(e){var a;y()(this,t);a=C()(this,w()(t).call(this,e));a.renderSortButton=a.renderSortButton.bind(I()(a));a.renderSortMenu=a.renderSortMenu.bind(I()(a));return a}k()(t,[{key:"changeSort",value:function e(t){if(t===this.props.sortOrder)return;this.props.setUserPrefByApi({pref:"all_unreads_sort_order",value:t});Object(ni["b"])()}},{key:"renderRefreshButton",value:function e(){var t=this.props,a=t.newUnreads,r=t.featureGlobalNav;if(!r||!a)return null;var i=ii.t("{newUnreadsCount, plural, =1 {# new message} other {# new messages}}",{newUnreadsCount:a});return n.a.createElement(x["d"],{type:"outline",size:"small",className:"p-global_nav__unread_refresh",onClick:ni["c"]},n.a.createElement(D["b"],{type:"sync",className:"p-global_nav__unread_refresh_icon",size:"inherit"}),i)}},{key:"renderSortButton",value:function e(){var t=this.props,a=t.hasUnreads,r=t.sortOrder,i=t.featureGlobalNav;if(!i)return null;if(!a)return null;var s={alphabetical:ii.rt("<strong>Sort:</strong> Alphabetically"),priority:ii.rt("<strong>Sort:</strong> Scientifically"),oldest:ii.rt("<strong>Sort:</strong> Oldest channel"),newest:ii.rt("<strong>Sort:</strong> Newest channel")};var o=s[r];return n.a.createElement(R["e"],{renderMenu:this.renderSortMenu,position:"bottom-right",offsetY:4},n.a.createElement(x["c"],{className:"p-global_nav__unread_sort"},o,n.a.createElement(D["b"],{type:"chevron-down",inline:true})))}},{key:"renderSortMenu",value:function e(t){var a=this;if(!this.props.featureGlobalNav)return null;var r=[{label:ii.t("Alphabetically"),click:function e(){return a.changeSort("alphabetical")}},{label:ii.t("Scientifically"),click:function e(){return a.changeSort("priority")}},{label:ii.t("Newest channel"),click:function e(){return a.changeSort("newest")}},{label:ii.t("Oldest channel"),click:function e(){return a.changeSort("oldest")}}];return n.a.createElement(R["a"],g()({},t,{template:r}))}},{key:"render",value:function e(){if(!this.props.featureGlobalNav)return null;var t=d()({"p-global_nav__channel":true,"p-global_nav__channel--synthetic":true});return n.a.createElement("div",{className:t},n.a.createElement("div",{className:"p-global_nav__channel_name p-global_nav__channel_name--synthetic","data-qa":"channel_name"},ii.t("All Unreads")),this.renderRefreshButton(),n.a.createElement("div",{className:"p-global_nav__channel_spacer--fill"}),this.renderSortButton())}}]);return t}(r["Component"]);oi.displayName="AllUnreadsHeader";oi.defaultProps=si;var li=function e(t){return{hasUnreads:Object(ri["hasUnreads"])(t),sortOrder:Object(ai["a"])(t),newUnreads:Object(Jt["getNewUnreads"])(t),featureGlobalNav:Object(p["isFeatureEnabled"])(t,"feature_global_nav")}};var ci={setUserPrefByApi:ti["d"]};var ui=Object(i["connect"])(li,ci)(oi);var di={id:void 0};var pi=function e(t){var a=t.id;if(!a)return null;if("Vall_threads"===a)return n.a.createElement(ei,null);if("Vall_unreads"===a)return n.a.createElement(ui,null);if("Vsearch"===a)return n.a.createElement(sr["a"],null);return n.a.createElement(Yn,{channelId:a})};pi.displayName="ChannelHeader";pi.defaultProps=di;var mi=function e(t){return{id:Object(gt["a"])(t)}};var hi=Object(i["connect"])(mi)(pi);var vi=Object(X["b"])("TS.ui.jumper.start",function(){return null});var fi=Object(X["b"])("TS.ui.jumper.getSessionId",function(){return null});var bi={start:vi};var gi=a(1675);var _i=new h["b"]("global_nav");var yi={featureGlobalNav:false,maybeShowOmniSwitcher:q["noop"]};var Oi=function e(t){var a=t.featureGlobalNav;if(!a)return null;var r=Object(f["a"])()?t.maybeShowOmniSwitcher:vi;var i=n.a.createElement(x["c"],{className:"p-global_nav__sidebar_jumper",onClick:r},n.a.createElement(D["b"],{type:"filter",className:"p-global_nav__sidebar_jumper_icon"}),_i.t("Go to\u2026",{note:"Used to open the quickswitcher. This label should as short as possible."}));var s=d()("p-global_nav__sidebar");return n.a.createElement("div",{className:s},i)};Oi.displayName="SidebarHeader";Oi.defaultProps=yi;var ki=function e(t){return{featureGlobalNav:Object(p["isFeatureEnabled"])(t,"feature_global_nav")}};var Ei=function e(t){return{maybeShowOmniSwitcher:function e(){return t(gi["a"].apply(void 0,arguments))}}};var Ci=Object(i["connect"])(ki,Ei)(Oi);var Si=a(88);var wi=a.n(Si);var ji={closeFlexpane:q["noop"]};var Ii=function e(t){return n.a.createElement(x["c"],{className:"p-global_nav__flex_btn",onClick:t.closeFlexpane},n.a.createElement(D["b"],{type:"times"}))};Ii.displayName="FlexClose";Ii.defaultProps=ji;var Ti=Object(i["connect"])(null,{closeFlexpane:ea["a"]})(Ii);var Ai=a(2011);var Ni=a(107);var Pi=a(41);var Mi=new h["b"]("global_nav");var Di=function e(t){var a=t.channelId,r=t.threadTs,i=t.name,s=t.isChannel,o=t.featureGlobalNav;if(!o)return null;var l=Object(Pi["constructMsgPermalink"])(a,r);var c;if(i){var u=n.a.createElement(ce["a"],{href:l,className:"p-global_nav__flex_thread_permalink"},i);c=s?Mi.rt("Thread in {channelName}",{channelName:u}):Mi.rt("Thread with {displayName}",{displayName:u})}else c=Mi.t("Thread");return n.a.createElement("h2",{className:"p-global_nav__flex_title overflow_ellipsis"},c)};Di.displayName="ThreadHeader";Di.defaultProps={channelId:void 0,threadTs:void 0,name:void 0,isChannel:true,featureGlobalNav:false};var xi=function e(t){var a=Object($t["f"])(t)[0];var r=Object(Ni["decodeThreadKey"])(a),n=r.channelId,i=r.threadTs;var s=Object(_t["e"])(t,n);if(!s)return null;return{channelId:n,threadTs:i,name:Object(or["getDisplayNameForChannel"])(t,s),isChannel:Object(or["isPublicChannel"])(s)||Object(or["isPrivateChannel"])(s),featureGlobalNav:Object(p["isFeatureEnabled"])(t,"feature_global_nav")}};var Ri=Object(i["connect"])(xi)(Di);var Fi=new h["b"]("global_nav");var Li=function e(t){var a=t.name,r=t.isChannel,i=t.featureGlobalNav;if(!i)return null;return r&&a?n.a.createElement("h2",{className:"p-global_nav__flex_title overflow_ellipsis"},Fi.t("About {channelName}",{channelName:a})):n.a.createElement("h2",{className:"p-global_nav__flex_title"},Fi.t("About this conversation"))};Li.defaultProps={name:void 0,isChannel:true,featureGlobalNav:false};var Ui=function e(t){var a=Object(gt["a"])(t);var r=Object(_t["e"])(t,a);if(!r)return null;return{name:Object(or["getDisplayNameForChannel"])(t,r),isChannel:Object(or["isPrivateChannel"])(r)||Object(or["isPublicChannel"])(r),featureGlobalNav:Object(p["isFeatureEnabled"])(t,"feature_global_nav")}};var Bi=Object(i["connect"])(Ui)(Li);var qi=new h["b"]("global_nav");var Gi={isAdminUser:false,isEnterprise:false,isDetailPane:false,featureGlobalNav:false};var Hi=function e(t){var a=t.isAdminUser,r=t.isEnterprise,i=t.isDetailPane,s=t.featureGlobalNav;if(!s)return null;var o=r?qi.t("Organization Directory"):qi.t("Workspace Directory");var l=a&&!i&&n.a.createElement(n.a.Fragment,null,n.a.createElement(F["c"],{tip:qi.t("Manage members"),position:"bottom-right"},n.a.createElement(x["c"],{href:"/admin",className:"p-global_nav__flex_btn p-global_nav__flex_btn--link"},n.a.createElement(D["b"],{type:"cog-o"}))),n.a.createElement("div",{className:"p-global_nav__flex_divider"}));return n.a.createElement(n.a.Fragment,null,n.a.createElement("h2",{className:"p-global_nav__flex_title"},o),l)};Hi.defaultProps=Gi;var Wi=function e(t){return{isAdminUser:Object(Qe["isAdmin"])(t,Object(Ee["b"])(t)),isEnterprise:Object(P["isEnterpriseTeam"])(Object(N["d"])(t)),isDetailPane:!Object(q["isEmpty"])(Object($t["f"])(t)),featureGlobalNav:Object(p["isFeatureEnabled"])(t,"feature_global_nav")}};var Vi=Object(i["connect"])(Wi)(Hi);var Ki=a(1634);var zi=new h["b"]("global_nav");var Qi={featureGlobalNav:false,dispatchOpenModal:false};var Yi=function e(t){var a=t.featureGlobalNav,r=t.dispatchOpenModal;if(!a)return null;var i=zi.t("User Groups");var s=function e(){r({element:n.a.createElement(Ki["a"],null)})};var o=Object(Ye["a"])()?n.a.createElement(n.a.Fragment,null,n.a.createElement(F["c"],{tip:zi.t("Create a user group"),position:"bottom-right"},n.a.createElement(x["c"],{"data-qa":"user_group_create_button",onClick:s,className:"p-global_nav__flex_btn p-global_nav__flex_btn--link"},n.a.createElement(D["b"],{type:"compose-dm"}))),n.a.createElement("div",{className:"p-global_nav__flex_divider"})):null;return n.a.createElement(n.a.Fragment,null,n.a.createElement("h2",{className:"p-global_nav__flex_title"},i),o)};Yi.defaultProps=Qi;var Ji=function e(t){return{featureGlobalNav:Object(p["isFeatureEnabled"])(t,"feature_global_nav")}};var Xi=function e(t){return{dispatchOpenModal:function e(){return t($["openModal"].apply(void 0,arguments))}}};var Zi=Object(i["connect"])(Ji,Xi)(Yi);var $i=a(303);var es=new h["b"]("global_nav");var ts={numDownloads:0,featureGlobalNav:false,clearDownloads:q["noop"]};var as=function e(t){var a=t.numDownloads,r=t.featureGlobalNav,i=t.clearDownloads;if(!r)return null;var s=a>1&&n.a.createElement(n.a.Fragment,null,n.a.createElement(x["c"],{onClick:i,className:"p-global_nav__flex_btn"},es.t("Clear all")),n.a.createElement("div",{className:"p-global_nav__flex_divider"}));return n.a.createElement(n.a.Fragment,null,n.a.createElement("h2",{className:"p-global_nav__flex_title"},es.t("Downloads")),s)};as.defaultProps=ts;var rs=function e(t){return{numDownloads:(Object($i["getTeamDownloadIds"])(t)||[]).length,featureGlobalNav:Object(p["isFeatureEnabled"])(t,"feature_global_nav")}};var ns={clearDownloads:function e(){return Object($i["clearTeamDesktopDownloads"])()}};var is=Object(i["connect"])(rs,ns)(as);var ss=new h["b"]("global_nav");var os={flexName:void 0,featureGlobalNav:void 0,featureSonicUserGroups:void 0,flexOrigin:void 0};var ls=function(e){A()(t,e);function t(){y()(this,t);return C()(this,w()(t).apply(this,arguments))}k()(t,[{key:"renderTitle",value:function e(){var t=this.props,a=t.flexName,r=t.featureGlobalNav,i=t.flexOrigin,s=t.featureSonicUserGroups;if(!r)return null;var o="p-global_nav__flex_title";switch(a){case"convo":case"thread":return n.a.createElement(Ri,null);case"files":if("starred_items"===i)return n.a.createElement("h2",{className:o},ss.t("Starred Items"));return n.a.createElement("h2",{className:o},ss.t("Files"));case"stars":case"starred_items":return n.a.createElement("h2",{className:o},ss.t("Starred Items"));case"mentions":return n.a.createElement("h2",{className:o},ss.t("Activity"));case"team":return n.a.createElement(Vi,null);case"whats_new":return n.a.createElement("h2",{className:o},ss.t("What\u2019s New"));case"groups":case"user_groups":if(s)return n.a.createElement(Zi,null);return n.a.createElement("h2",{className:o},ss.t("User Groups"));case"shortcuts":return n.a.createElement("h2",{className:o},ss.t("Keyboard Shortcuts"));case"downloads":return n.a.createElement(is,null);case"details":return n.a.createElement(Bi,null);case"apps":return n.a.createElement("h2",{className:o},ss.t("About this app"));default:return n.a.createElement("h2",{className:o},"Unimplemented: ",a)}}},{key:"render",value:function e(){var t=this.props.flexName;if(!t)return null;var a=d()(wi()({"p-global_nav__flex":true,"p-global_nav__flex--sonic":Object(f["a"])(),"p-global_nav__flex--legacy":!Object(f["a"])()},"p-global_nav__flex--"+t,true));return n.a.createElement("div",{className:a},n.a.createElement(Ai["a"],null),this.renderTitle(),n.a.createElement(Ti,null))}}]);return t}(r["Component"]);ls.displayName="FlexHeader";ls.defaultProps=os;var cs=function e(t){return{flexName:Object($t["j"])(t),flexOrigin:Object($t["d"])(t),featureGlobalNav:Object(p["isFeatureEnabled"])(t,"feature_global_nav"),featureSonicUserGroups:Object(p["isFeatureEnabled"])(t,"feature_sonic_user_groups")}};var us=Object(i["connect"])(cs)(ls);var ds=function e(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(l["a"],null),n.a.createElement("div",{className:"p-global_nav"},n.a.createElement(ir,null),n.a.createElement("div",{className:"p-global_nav__bottom"},n.a.createElement(Ci,null),n.a.createElement(hi,null),n.a.createElement(us,null))))};var ps=ds;var ms=function e(t,a){if(!t)throw new Error("mountGlobalNav must be called with a teamId parameter");var r=Object(o["f"])(t);Object(s["a"])(n.a.createElement(i["Provider"],{store:r},n.a.createElement(ps,null)),a)};var hs=function e(t,a){if(!t)throw new Error("mountGlobalNavChannel must be called with a teamId parameter");var r=Object(o["f"])(t);Object(s["a"])(n.a.createElement(i["Provider"],{store:r},n.a.createElement(hi,null)),a)};var vs=function e(t,a){if(!t)throw new Error("mountGlobalNavChannel must be called with a teamId parameter");var r=Object(o["f"])(t);Object(s["a"])(n.a.createElement(i["Provider"],{store:r},n.a.createElement(us,null)),a)};var fs=a(52);Object(fs["a"])("interop.globalNav",{mountGlobalNav:ms,mountGlobalNavChannel:hs,mountGlobalNavFlex:vs})},function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(85);var s=a.n(i);var o=a(12);var l=a(26);var c=a(52);var u=a(444);var d=a(110);var p=a.n(d);var m=a(135);var h=a.n(m);var v=a(169);var f=a.n(v);var b=a(138);var g=a.n(b);var _=a(147);var y=a.n(_);var O=a(185);var k=a.n(O);var E=a(2);var C=a(0);var S=a(39);var w=a(11);var j=a(540);var I=a(191);var T=a(89);var A=a(2756);var N=a(387);var P=a(23);var M=a(24);var D=a(27);var x=a(21);var R=a(33);var F=a(601);var L=a(6);var U=a(2693);var B=new L["b"]("enterprise_dashboard");var q={featureOrgLevelUserGroupsPhase2Frontend:false,onConnectChannelsClick:E["_noop"],hasConnectedWorkspaces:false};var G=function(e){k()(t,e);function t(){p()(this,t);return f()(this,g()(t).apply(this,arguments))}h()(t,[{key:"componentDidMount",value:function e(){this.props.loadSsoProvider()}},{key:"renderBackButton",value:function e(){var t=function e(){Object(I["c"])("/people/groups")};return n.a.createElement(M["c"],{onClick:t,className:"p-org_level_group_details__back_btn","data-qa":"idp_group_detail_back_button"},n.a.createElement(P["a"],{type:"chevron_medium_left"}))}},{key:"renderConnectWorkspacesButton",value:function e(){return n.a.createElement(M["d"],{"data-qa":"idp_group_detail_connect_to_ws",className:"margin_right_75",type:"outline",onClick:this.props.onConnectWorkspacesClick},B.t("Connect Workspaces"))}},{key:"renderConnectChannelsButton",value:function e(){var t=this.props,a=t.featureOrgLevelUserGroupsPhase2Frontend,r=t.hasConnectedWorkspaces;if(!a||!r)return null;return n.a.createElement(M["d"],{"data-qa":"idp_group_detail_connect_to_channel",type:"outline",onClick:this.props.onConnectChannelsClick},B.t("Connect Channels"))}},{key:"renderIDPGroup",value:function e(){return n.a.createElement("div",null,n.a.createElement("div",{className:"p-org_level_group_details__idp-group","data-qa":"idp_group_detail_title"},this.props.userGroupName),n.a.createElement("div",{className:"p-org_level_group_details__sso_provider","data-qa":"idp_group_detail_subtitle"},B.t("{provider_label} groups",{provider_label:this.props.ssoProviderName})))}},{key:"render",value:function e(){return n.a.createElement("div",{className:"p-org_level_group_details_header_container"},n.a.createElement("div",{className:"p-org_level_group_details_header_back_container"},this.renderBackButton(),this.renderIDPGroup()),n.a.createElement("div",null,this.renderConnectWorkspacesButton(),this.renderConnectChannelsButton()))}}]);return t}(n.a.PureComponent);G.displayName="GroupDetailsHeader";var H=function e(t,a){var r=a.groupId;var n=Object(x["b"])(t);var i=Object(R["k"])(t,n,false);var s=Object(D["getTeamSsoProvider"])(i);return{ssoProviderName:Object(D["getSSOProviderLabel"])(s,"IDP"),userGroupName:Object(F["g"])(t,{groupId:r})||"",hasConnectedWorkspaces:!!Object(F["h"])(t,{groupId:r})}};var W=function e(t){return{loadSsoProvider:function e(){return t(Object(U["a"])())}}};G.defaultProps=q;var V=Object(o["connect"])(H,W)(G);var K=a(777);var z=new L["b"]("enterprise_dashboard");var Q={onTabChange:E["noop"],featureOrgLevelUserGroupsPhase2Frontend:false,workspaceCount:0,channelCount:0};var Y=function(e){k()(t,e);function t(){p()(this,t);return f()(this,g()(t).apply(this,arguments))}h()(t,[{key:"render",value:function e(){var t=this.props,a=t.activeTab,r=t.onTabChange,i=t.workspaceCount,s=t.channelCount,o=t.featureOrgLevelUserGroupsPhase2Frontend;var l=[{title:z.t("Members {memberCount}",{memberCount:this.props.totalMemberCount}),id:"members",content:this.props.membersContent,"data-qa":"idp_group_detail_members_tab"},{title:z.t("Workspaces {workspace_count}",{workspace_count:i}),id:"workspaces",content:this.props.workspacesContent,"data-qa":"idp_group_detail_ws_tab"}];o&&l.push({title:z.t("Channels {channelCount}",{channelCount:s}),id:"channels",content:this.props.channelsContent,"data-qa":"idp_group_detail_channels_tab"});return n.a.createElement("div",{className:"p-org_level_group_details__tab_container"},n.a.createElement(K["a"],{tabs:l,defaultTabId:a,onTabChange:r}))}}]);return t}(n.a.Component);Y.displayName="GroupDetailTabMenu";Y.defaultProps=Q;var J=function e(t,a){var r=a.groupId;return{workspaceCount:Object(F["h"])(t,{groupId:r}),channelCount:Object(F["b"])(t,{groupId:r})}};var X=Object(o["connect"])(J)(Y);var Z=a(760);var $=new L["b"]("enterprise_dashboard");var ee=function(e){k()(t,e);function t(){p()(this,t);return f()(this,g()(t).apply(this,arguments))}h()(t,[{key:"render",value:function e(){var t=this.props.ssoProviderName;"IDP"===t&&(t=$.t("your IDP"));return n.a.createElement("div",{className:"p-org_level_group_details_members_table_empty"},n.a.createElement(Z["a"],{title:$.t("Add members in {idp} to see them here",{idp:t}),description:$.t("This {idp} group doesn\u2019t have any members. When you add them, they\u2019ll show up here.",{idp:this.props.ssoProviderName}),imageUrl:"/img/enterprise/no_idp_members.png",imageUrl2x:"/img/enterprise/no_idp_members@2x.png"}))}}]);return t}(n.a.PureComponent);ee.displayName="MembersEmptyState";var te=function e(t){var a=Object(x["b"])(t);var r=Object(R["k"])(t,a,false);var n=Object(D["getTeamSsoProvider"])(r);return{ssoProviderName:Object(D["getSSOProviderLabel"])(n,"IDP")}};var ae=Object(o["connect"])(te)(ee);var re=a(428);var ne=new L["b"]("enterprise_dashboard");var ie=function(e){k()(t,e);function t(e){var a;p()(this,t);a=f()(this,g()(t).call(this,e));a.handleSearchInputChange=a.handleSearchInputChange.bind(y()(a));a.throttledSearch=Object(E["debounce"])(a.handleSearchInputChange,300,{leading:false});return a}h()(t,[{key:"handleSearchInputChange",value:function e(t){var a=t&&t.target&&t.target.value;var r=a||"";this.props.onSearchChange(r)}},{key:"render",value:function e(){return n.a.createElement("div",{className:"p-org_level_group_details__search_container"},n.a.createElement(re["a"],{className:"p-org_level_user_groups__search_input",placeholder:ne.t("Search members by name or email"),icon:"search",autoFocus:false,isLoading:this.props.isSearching,value:this.props.searchTerm,onChange:this.throttledSearch,"data-qa":"idp_group_detail_search"}))}}]);return t}(n.a.PureComponent);ie.displayName="MembersSearchBar";var se=ie;var oe=a(30);var le=a(17);var ce=a(25);var ue=a(494);var de=a(196);var pe=a.n(de);var me=a(134);var he=a(219);var ve=a(326);var fe=function(e){k()(t,e);function t(e){var a;p()(this,t);a=f()(this,g()(t).call(this,e));a.renderMemberRealName=a.renderMemberRealName.bind(y()(a));a.renderMemberEmail=a.renderMemberEmail.bind(y()(a));a.handleMemberClick=a.handleMemberClick.bind(y()(a));return a}h()(t,[{key:"handleMemberClick",value:function e(){var t=Object(le["getMemberId"])(this.props.member);Object(I["c"])("/people/"+t)}},{key:"renderMemberEmail",value:function e(){return n.a.createElement(ve["b"],{"data-qa":"idp_group_detail_row_email"},Object(le["getMemberEmail"])(this.props.member))}},{key:"renderMemberRealName",value:function e(){return n.a.createElement(ve["c"],{className:"bold","data-qa":"idp_group_detail_row_name"},Object(le["getMemberRealName"])(this.props.member))}},{key:"render",value:function e(){var t=this;return n.a.createElement(M["c"],{onClick:this.handleMemberClick},n.a.createElement(ve["d"],{size:me["b"].medium,avatar:function e(a){return n.a.createElement(he["b"],pe()({},a,{size:me["a"].medium,userId:t.props.member.id,"data-qa":"group-member__avatar",isInteractive:false}))},text:this.renderMemberRealName(),subtext:this.renderMemberEmail()}))}}]);return t}(n.a.PureComponent);fe.displayName="MembersTableMemberName";var be=fe;var ge=new L["b"]("enterprise_dashboard");function _e(e){var t={dangerouslyOverrideCreateSelectorSanityCheck:true,roles:null};var a;a=Object(le["isDeleted"])(e)||Object(D["isUnknown"])(e)?ge.t("Deactivated",{fallbackHash:"314a1adcc8b57b30a6122706d38c91effe82d96c"}):Object(le["isPrimaryOwner"])(t,e)?ge.t("Primary Owner",{fallbackHash:"2207f14a6e8077d80a2edc4f2823d8e42b3dff08"}):Object(le["isEnterpriseOwner"])(e)?ge.t("Org Owner",{fallbackHash:"a7ccf2347f0b9f103ce46dbc648046f167931c8f"}):Object(le["isEnterpriseAdmin"])(e)?ge.t("Org Admin",{fallbackHash:"d22f3fa38a60273f7135a411efefde0a66afb036"}):Object(le["isOwner"])(t,e)?ge.t("Workspace Owner",{fallbackHash:"345f22301a4089a4c23ccf06af1e81086b852103"}):Object(le["isAdmin"])(t,e)?ge.t("Workspace Admin",{fallbackHash:"74da170f8967a1608b4b5472f3f41bfd71a98a73"}):Object(le["isUltraRestricted"])(e)?ge.t("Single-Channel Guest",{fallbackHash:"e3834e91afca7d96ea32a0cf447d059c033de1c0"}):Object(le["isRestricted"])(e)?ge.t("Multi-Channel Guest",{fallbackHash:"fe7b205c800f472fbb5bbdc4791e822026d2d96e"}):ge.t("Full Member",{fallbackHash:"134fd5677dcff88f498beb7ab28201a1096e681a",fallbackHashNs:"admin"});return a}var ye=_e;var Oe=new L["b"]("enterprise_dashboard");var ke={members:[],isSearching:false,searchTerm:""};var Ee=function(e){k()(t,e);function t(e){var a;p()(this,t);a=f()(this,g()(t).call(this,e));a.state={isLoading:false,cursorMark:null,totalMemberCount:0};Object(oe["a"])(y()(a),["makeRowData","headerData","onRequestNextPage"]);return a}h()(t,[{key:"onRequestNextPage",value:function e(){var t=this;var a=this.props,r=a.members,n=a.groupId,i=a.cursorMark,s=a.totalMemberCount;if(s&&r.length>=s)return;if(this.state.totalMemberCount&&r.length>=this.state.totalMemberCount)return;this.setState(function(){return{isLoading:true}});var o=this.state.cursorMark||i;this.props.getEnterpriseMembersInOrgUserGroup({userGroupId:n,cursorMark:o}).then(function(e){t.setState(function(){return{isLoading:false,cursorMark:e.next_cursor_mark,totalMemberCount:e.num_found}})})}},{key:"headerData",value:function e(){return[{id:"header_0",value:Oe.t("Name",{fallbackHash:'709a23220f2c3d64d1e1d6d18c4d5280f8d82fca"'}),"data-qa":"idp_group_detail_col_name_title"},{id:"header_1",value:Oe.t("Account type",{fallbackHash:"1ff69626f5c7ab4d3f32e90d0cf019b125de08c88"}),"data-qa":"idp_group_detail_col_acct_type_title"}]}},{key:"makeNoSearchResultsRow",value:function e(){var t=this.props.searchTerm;return{id:"row_member1",items:[{id:"row_member1_col_",value:n.a.createElement("div",{className:"p-org_level_user_groups__table--no_search_results"},Oe.rt("No results matching <b>{searchQuery}</b>.",{searchQuery:t}))}]}}},{key:"makeRowData",value:function e(t,a){var r={dangerouslyOverrideCreateSelectorSanityCheck:true,roles:null};var i="row_member"+(a+1);var s=i+"_col_";var o="p-org_level_group_details__member_table_row_item";(Object(le["isPrimaryOwner"])(r,t)||Object(le["isEnterpriseAdmin"])(t)||Object(le["isEnterpriseOwner"])(t))&&(o+=" p-org_level_group_details__member_admin_type_item");return{id:i,items:[{id:s+"1",value:n.a.createElement(be,{member:t})},{id:s+"2",value:n.a.createElement("div",{className:o,"data-qa":"idp_group_detail_row_acct_type"},_e(t))}]}}},{key:"makeRows",value:function e(){if(!this.props.members.length&&!this.props.isSearching)return[this.makeNoSearchResultsRow()];return this.props.members.map(this.makeRowData)}},{key:"render",value:function e(){var t=this.props.isSearching;var a=this.state.isLoading;return n.a.createElement("div",{className:"p-org_level_user_groups__table"},n.a.createElement(ue["b"],{autoHeight:true,onRequestNextPage:this.onRequestNextPage,isLoading:t||a,headers:this.headerData(),rows:this.makeRows(),rowClassName:"p-org_level_group_details__member_table_row",rowHeaderItemClassName:"p-org_level_group_details__row_header c-table_view_hover_disabled",listClassName:"p-group_members_table__list",useKeyboardNavigableTable:true}))}}]);return t}(n.a.PureComponent);Ee.displayName="MembersTable";Ee.defaultProps=ke;var Ce=function e(t,a){if(!a)return null;return a.map(function(e){return Object(ce["e"])(t,e)})};var Se=function e(t,a){var r=a.groupId;var n=Object(F["d"])(t,{groupId:r})||[];var i=Ce(t,n);return{members:i}};var we=function e(t){return{getEnterpriseMembersInOrgUserGroup:function e(){return t(j["h"].apply(void 0,arguments))}}};var je=Object(o["connect"])(Se,we)(Ee);var Ie=function(e){k()(t,e);function t(e){var a;p()(this,t);a=f()(this,g()(t).call(this,e));a.state={searchTerm:"",isSearching:false};a.onSearchChange=a.onSearchChange.bind(y()(a));return a}h()(t,[{key:"onSearchChange",value:function e(t){var a=this;this.setState(function(){return{isSearching:true,searchTerm:t}});this.props.getEnterpriseMembersInOrgUserGroup({userGroupId:this.props.groupId,searchTerm:t}).then(function(){a.setState(function(){return{isSearching:false}})})}},{key:"render",value:function e(){var t=this.props,a=t.cursorMark,r=t.totalMemberCount;if(0===r&&!this.state.searchTerm.length)return n.a.createElement(ae,null);return n.a.createElement("div",null,n.a.createElement(se,{onSearchChange:this.onSearchChange,isSearching:this.state.isSearching,searchTerm:this.state.searchTerm}),n.a.createElement(je,{cursorMark:a,totalMemberCount:r,isSearching:this.state.isSearching,searchTerm:this.state.searchTerm,groupId:this.props.groupId}))}}]);return t}(n.a.PureComponent);Ie.displayName="MembersContent";var Te=function e(t){return{getEnterpriseMembersInOrgUserGroup:function e(){return t(j["h"].apply(void 0,arguments))}}};var Ae=Object(o["connect"])(null,Te)(Ie);var Ne=a(88);var Pe=a.n(Ne);var Me=a(295);var De=a(291);var xe=function(e){k()(t,e);function t(e){var a;p()(this,t);a=f()(this,g()(t).call(this,e));a.handleWorkspaceClick=a.handleWorkspaceClick.bind(y()(a));a.renderWorkspaceName=a.renderWorkspaceName.bind(y()(a));return a}h()(t,[{key:"handleWorkspaceClick",value:function e(){Object(I["c"])("/organization/teams/"+this.props.team.id)}},{key:"renderWorkspaceName",value:function e(){return n.a.createElement(ve["c"],{className:"p-org_level_group_details__workspace_table_row_name","data-qa":"idp_group_detail_row_ws_name"},Object(D["getTeamDisplayName"])(this.props.team))}},{key:"render",value:function e(){var t=this;return n.a.createElement(M["c"],{onClick:this.handleWorkspaceClick},n.a.createElement(ve["d"],{size:me["b"].medium,avatar:function e(a){return n.a.createElement(De["b"],pe()({id:t.props.team.id},a,{size:36,"data-qa":"idp_group_detail_row_ws_icon"}))},text:this.renderWorkspaceName()}))}}]);return t}(n.a.PureComponent);xe.displayName="WorkspaceTableName";var Re=xe;var Fe=a(57);var Le=a(278);var Ue=a.n(Le);var Be=a(106);var qe=a(131);var Ge=a(543);var He=a(44);var We=a(544);var Ve=a(288);var Ke=new L["b"]("enterprise_dashboard");var ze=function(e){k()(t,e);function t(e){var a;p()(this,t);a=f()(this,g()(t).call(this,e));a.state={isLoading:false};a.onGo=a.onGo.bind(y()(a));a.onSuccess=a.onSuccess.bind(y()(a));a.onFailure=a.onFailure.bind(y()(a));a.getModalCopy=a.getModalCopy.bind(y()(a));return a}h()(t,[{key:"onFailure",value:function e(){this.props.enqueueToast({element:n.a.createElement(qe["b"],{position:"bottom-right",icon:"warning"},Ke.t("That didn't work!"))})}},{key:"onGo",value:function(){var e=Ue()(regeneratorRuntime.mark(function e(){var t,a,r,n,i,s,o;return regeneratorRuntime.wrap(function e(l){while(1)switch(l.prev=l.next){case 0:t=this.props,a=t.team,r=t.userGroup,n=t.closeModal,i=t.setProvisioningAndUpdateOrgUserGroup;s=!a.auto_provision;this.setState(function(){return{isLoading:true}});l.next=5;return i({autoProvision:s,teamId:a.id,userGroupId:r.id});case 5:o=l.sent;o&&o.ok?this.onSuccess(s):this.onFailure();this.setState(function(){return{isLoading:false}});n();case 9:case"end":return l.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"onSuccess",value:function e(t){var a=this.props.team;var r=t?Ke.t("{workspaceName} membership required",{workspaceName:a.name}):Ke.t("{workspaceName} membership optional",{workspaceName:a.name});this.props.enqueueToast({element:n.a.createElement(qe["b"],{position:"bottom-right",icon:"check-circle-o",shouldAutoFade:true},r)})}},{key:"getModalCopy",value:function e(){var t=this.props,a=t.team,r=t.userGroup;if(a.auto_provision)return{title:Ke.t("Make {workspaceName} optional?",{workspaceName:a.name}),description:Ke.rt("Members of {userGroupName} will still have access to {workspaceName}, but won\u2019t be required to remain in the workspace.",{workspaceName:a.name,userGroupName:n.a.createElement("strong",null,r.name)}),button:Ke.t("Make Optional",{fallbackHash:"0c6c4102d4dfec3b1aa41117e0e344046c58a151"})};return{title:Ke.t("Make {workspaceName} required?",{workspaceName:a.name}),description:Ke.rt("All current and future members of {userGroupName} will be added to {workspaceName} and won\u2019t be able to leave.",{workspaceName:a.name,userGroupName:n.a.createElement("strong",null,r.name)}),button:Ke.t("Make Required",{fallbackHash:"eed6bfb41051ed5b74447340f3c2e29d11e99a7c"})}}},{key:"render",value:function e(){var t=this.props.closeModal;var a=this.getModalCopy();return n.a.createElement(Ge["a"],{closeModal:t},n.a.createElement("span",{"data-qa":"idp_ws_autoprovision_modal"},n.a.createElement(He["h"],null,n.a.createElement(We["a"],{title:a.title,"data-qa":"idp_ws_autoprovision_modal_title"})),n.a.createElement(He["d"],null,n.a.createElement(He["e"],null,n.a.createElement("p",{"data-qa":"idp_ws_autoprovision_modal_msg_text"},a.description))),n.a.createElement(He["f"],null,n.a.createElement(He["g"],null,n.a.createElement(He["c"],{type:"outline",onClick:t,"data-qa":"idp_ws_autoprovision_modal_cancel_btn"},Ke.t("Cancel")),n.a.createElement(Ve["a"],{"data-qa":"idp_ws_autoprovision_modal_go_btn",onClick:this.onGo,loading:this.state.isLoading},a.button)))))}}]);return t}(r["PureComponent"]);ze.displayName="WorkspaceMembershipModal";var Qe=function e(t){return{enqueueToast:function e(){return t(Be["enqueueToast"].apply(void 0,arguments))},closeModal:function e(){return t(S["closeModal"].apply(void 0,arguments))},setProvisioningAndUpdateOrgUserGroup:function e(){return t(j["m"].apply(void 0,arguments))}}};var Ye=Object(o["connect"])(null,Qe)(ze);var Je=a(117);var Xe=new L["b"]("enterprise_dashboard");var Ze=function(e){k()(t,e);function t(e){var a;p()(this,t);a=f()(this,g()(t).call(this,e));a.state={isDisconnecting:false};Object(oe["a"])(y()(a),["onGo"]);return a}h()(t,[{key:"onGo",value:function(){var e=Ue()(regeneratorRuntime.mark(function e(){var t,a,r,i;return regeneratorRuntime.wrap(function e(s){while(1)switch(s.prev=s.next){case 0:t=this.props,a=t.groupId,r=t.team;this.setState(function(){return{isDisconnecting:true}});s.next=4;return this.props.disconnectWorkspacesFromOrgUserGroup({teams:[r.id],usergroup:a});case 4:i=s.sent;i&&this.props.enqueueToast({element:n.a.createElement(qe["b"],{icon:"check-circle-o",shouldAutoFade:true},Xe.t("Workspace disconnected"))});this.setState(function(){return{isDisconnecting:false}});return s.abrupt("return",i);case 8:case"end":return s.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"render",value:function e(){var t=this.props,a=t.team,r=t.groupName;var i=Object(D["getTeamDisplayName"])(a);var s=Xe.t("Disconnect {groupName} from {teamName}?",{groupName:r,teamName:i});var o=Xe.t("Members of this group will be removed from {teamName}, and some apps they\u2019ve installed may stop working.",{teamName:i});var l=Xe.t("Disconnect Workspace");return n.a.createElement(Je["a"],{title:n.a.createElement("span",{"data-qa":"org_user_groups_ws_disconnect_modal_title"},s),titleAria:s,goButtonText:l,goButtonType:"danger",onGo:this.onGo,goButtonIsPending:this.state.isDisconnecting,"data-qa":"org_user_groups_ws_disconnect_modal"},n.a.createElement("span",{"data-qa":"org_user_groups_ws_disconnect_modal_msg_text"},o))}}]);return t}(n.a.PureComponent);Ze.displayName="WorkspaceDisconnectDialog";var $e=function e(t,a){var r=a.groupId;return{groupName:Object(F["g"])(t,{groupId:r})}};var et=function e(t){return{enqueueToast:function e(){return t(Be["enqueueToast"].apply(void 0,arguments))},disconnectWorkspacesFromOrgUserGroup:function e(){return t(j["e"].apply(void 0,arguments))}}};var tt=Object(o["connect"])($e,et)(Ze);var at=new L["b"]("enterprise_dashboard");var rt={team:{},groupId:null};var nt=function(e){k()(t,e);function t(e){var a;p()(this,t);a=f()(this,g()(t).call(this,e));a.renderMenu=a.renderMenu.bind(y()(a));a.onMembershipClick=a.onMembershipClick.bind(y()(a));a.onEditConnectionSelected=a.onEditConnectionSelected.bind(y()(a));return a}h()(t,[{key:"onEditConnectionSelected",value:function e(){this.props.openModal({element:n.a.createElement(tt,{team:this.props.team,groupId:this.props.groupId})})}},{key:"onMembershipClick",value:function e(){var t=this.props,a=t.team,r=t.userGroup,i=t.openModal;i({element:n.a.createElement(Ye,{team:a,userGroup:r})})}},{key:"renderMenu",value:function e(t){var a=this.props.team;var r=a.auto_provision?at.t("Make membership optional"):at.t("Make membership required");return n.a.createElement(Fe["f"],pe()({},t,{width:"auto"}),n.a.createElement(Fe["b"],{key:a.id,label:r,onSelected:this.onMembershipClick,"data-qa":"idp_group_detail_row_ws_dialog_make_optional"}),n.a.createElement(Fe["b"],{key:a.id,label:at.t("Disconnect workspace"),danger:true,onSelected:this.onEditConnectionSelected,"data-qa":"idp_group_detail_row_ws_dialog_disconnect"}))}},{key:"render",value:function e(){var t=this.props.team;return n.a.createElement("div",null,n.a.createElement(Fe["e"],{renderMenu:this.renderMenu,position:"bottom-right",offsetX:20},n.a.createElement(M["c"],{"data-qa":"idp_group_detail_row_ws_open_menu",className:"p-org_level_user_groups__menu_button","aria-label":at.t("Actions for {teamName}",{teamName:Object(D["getTeamDisplayName"])(t)})},n.a.createElement(P["b"],{type:"ellipsis"}))))}}]);return t}(r["PureComponent"]);nt.displayName="WorkspaceTableRowMenu";nt.defaultProps=rt;var it=function e(t,a){var r=a.groupId;return{userGroup:Object(F["e"])(t,{groupId:r})}};var st=function e(t){return{openModal:function e(){return t(S["openModal"].apply(void 0,arguments))}}};var ot=Object(o["connect"])(it,st)(nt);var lt=new L["b"]("enterprise_dashboard");var ct=function(e){k()(t,e);function t(){p()(this,t);return f()(this,g()(t).apply(this,arguments))}h()(t,[{key:"render",value:function e(){return n.a.createElement("div",{className:"p-org_level_group_details_members_table_empty"},n.a.createElement(Z["a"],{title:lt.t("Connect workspaces to give groups access"),description:lt.t("Connecting an {idp} group to workspaces allows anyone in the group to access it. You can also choose to make workspaces required. ",{idp:this.props.ssoProviderName}),imageUrl:"/img/enterprise/no_idp_workspaces.png",imageUrl2x:"/img/enterprise/no_idp_workspaces@2x.png",primaryActionText:lt.t("Connect Workspaces"),onClickPrimaryAction:this.props.onConnectButtonClick}))}}]);return t}(n.a.PureComponent);ct.displayName="WorkspaceTableEmptyState";var ut=function e(t){var a=Object(x["b"])(t);var r=Object(R["k"])(t,a,false);var n=Object(D["getTeamSsoProvider"])(r);return{ssoProviderName:Object(D["getSSOProviderLabel"])(n,"IDP")}};var dt=Object(o["connect"])(ut)(ct);var pt=new L["b"]("enterprise_dashboard");var mt={workspaces:[],highlightedIds:[],groupId:null};var ht=function(e){k()(t,e);function t(e){var a;p()(this,t);a=f()(this,g()(t).call(this,e));Object(oe["a"])(y()(a),["makeRowData","headerData","renderMembershipType"]);return a}h()(t,[{key:"headerData",value:function e(){return[{id:"header_0",value:pt.t("Name",{fallbackHash:'709a23220f2c3d64d1e1d6d18c4d5280f8d82fca"'}),"data-qa":"idp_group_detail_col_name_title",className:"p-org_level_user_groups__table_header--name",noHover:true},{id:"header_1",value:pt.t("Membership",{fallbackHash:"53bc9670e7230f766538a396ed6acc93c09e9067"}),"data-qa":"idp_group_detail_col_membership_title",className:"p-org_level_user_groups__table_header--teams",noHover:true},{id:"header_2",value:pt.t("Date added"),"data-qa":"idp_group_detail_col_date_added_title",className:"p-org_level_user_groups__table_header--date",noHover:true},{id:"header_3",value:null,className:"p-org_level_user_groups__table_header--actions",noHover:true}]}},{key:"makeRowData",value:function e(t,a){var r="row_team"+(a+1);var i=r+"_col_";return{id:r,highlight:Object(E["includes"])(this.props.highlightedIds,t.id),items:[{id:i+"1",value:n.a.createElement(Re,{team:t}),className:"p-org_level_user_groups__table_row_item--name"},{id:i+"2",value:n.a.createElement("div",{"data-qa":"idp_group_detail_row_ws_membership"},this.renderMembershipType(t)),className:"p-org_level_user_groups__table_row_item--teams"},{id:i+"3",value:n.a.createElement("div",{"data-qa":"idp_group_detail_row_ws_date_added"},t.date_create&&Object(Me["a"])(t.date_create,"{date_num}")),className:"p-org_level_user_groups__table_row_item--date"},{id:i+"4",value:n.a.createElement(ot,{"data-qa":"workspace_row_open_menu",team:t,groupId:this.props.groupId}),className:"p-org_level_user_groups__table_row_item--actions"}]}}},{key:"makeRows",value:function e(){return this.props.workspaces.map(this.makeRowData)}},{key:"renderMembershipType",value:function e(t){if(t.auto_provision)return n.a.createElement("div",{"data-idp-team-required-membership":true},n.a.createElement(P["b"],{type:"lock",inline:true}),pt.t("Required",{fallbackHash:"eed6bfb41051ed5b74447340f3c2e29d11e99a7c"}));return pt.t("Optional",{fallbackHash:"0c6c4102d4dfec3b1aa41117e0e344046c58a151"})}},{key:"render",value:function e(){if(0===this.props.workspaceCount)return n.a.createElement(dt,{onConnectButtonClick:this.props.onConnectButtonClick});return n.a.createElement("div",{className:"p-org_level_user_groups__table"},n.a.createElement(ue["b"],{autoHeight:true,headers:this.headerData(),rows:this.makeRows(),rowClassName:"p-org_level_user_groups__row",rowHeaderItemClassName:"p-org_level_user_groups__row_header",listClassName:"p-group_members_table__list",useKeyboardNavigableTable:true}))}}]);return t}(n.a.PureComponent);ht.displayName="WorkspaceTable";ht.defaultProps=mt;var vt=function e(t,a){var r=a.groupId;return{workspaceCount:Object(F["h"])(t,{groupId:r})}};var ft=Object(o["connect"])(vt)(ht);function bt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function gt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?bt(Object(a),true).forEach(function(t){Pe()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):bt(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var _t=1e3;var yt=function(e){k()(t,e);function t(e){var a;p()(this,t);a=f()(this,g()(t).call(this,e));a.updateRecentlyAddedWorkspaces=a.updateRecentlyAddedWorkspaces.bind(y()(a));a.state={recentlyAddedWorkspaces:[]};return a}h()(t,[{key:"componentDidUpdate",value:function e(t){var a=Object(E["difference"])(this.props.workspaceIds,t.workspaceIds);a.length&&this.updateRecentlyAddedWorkspaces(a)}},{key:"updateRecentlyAddedWorkspaces",value:function e(t){var a=this;this.setState(function(){return{recentlyAddedWorkspaces:t}});setTimeout(function(){a.setState(function(){return{recentlyAddedWorkspaces:[]}})},_t)}},{key:"render",value:function e(){var t=this.props,a=t.onConnectButtonClick,r=t.workspaces;var i=this.state.recentlyAddedWorkspaces;return n.a.createElement("div",null,n.a.createElement(ft,{groupId:this.props.groupId,workspaces:r,onConnectButtonClick:a,highlightedIds:i}))}}]);return t}(n.a.PureComponent);yt.displayName="WorkspaceContent";function Ot(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];var r=t.map(function(t){var r=Object(R["k"])(e,t,false);if(r){var n=a.filter(function(e){return e.team_id===r.id})[0];return gt({},r,{},n)}return r});return Object(E["sortBy"])(r,function(e){return e&&e.name.toLowerCase()})}var kt=function e(t,a){var r=a.groupId;var n=Object(F["i"])(t,{groupId:r});var i=Object(F["a"])(t,{groupId:r});return{workspaceIds:n,workspaces:Ot(t,n,i)}};var Et=Object(o["connect"])(kt)(yt);var Ct=new L["b"]("enterprise_dashboard");var St={workspacesCount:0,groupName:"",featureOrgLevelUserGroupsPhase2Frontend:false};var wt=function(e){k()(t,e);function t(){p()(this,t);return f()(this,g()(t).apply(this,arguments))}h()(t,[{key:"render",value:function e(){var t=this.props,a=t.workspacesCount,r=t.groupName,i=t.featureOrgLevelUserGroupsPhase2Frontend;if(!i)return null;var s=a?Ct.rt("Connect channels to {groupName}",{groupName:r}):Ct.t("First, connect a required workspace");var o=a?Ct.rt("Connecting {groupName} to channels gives them automatic access to the right conversations.",{groupName:r}):Ct.rt("Use the <b>Workspaces</b> tab to connect at least one required workspace. After that, you'll be able to connect to channels from that workspace.");var l=Ct.t("Connect Channels");return n.a.createElement("div",{className:"p-org_level_group_details_channels_table_empty align_center"},n.a.createElement(Z["a"],{title:s,description:o,imageUrl:"/img/enterprise/no_idp_members.png",imageUrl2x:"/img/enterprise/no_idp_members@2x.png",primaryActionText:a?l:null}))}}]);return t}(n.a.PureComponent);wt.displayName="ChannelsEmptyState";wt.defaultProps=St;var jt=wt;var It=a(97);var Tt=a(9);var At=a(1156);var Nt=new L["b"]("enterprise_dashboard");var Pt={channels:[],closeModal:E["noop"],featureOrgLevelUserGroupsPhase2Frontend:false,onDisconnectComplete:E["noop"],orgId:"",removeChannelsFromUserGroup:E["noop"],userGroup:null,userGroupId:""};var Mt=function(e){k()(t,e);function t(e){var a;p()(this,t);a=f()(this,g()(t).call(this,e));a.state={isRemovingChannels:false};a.onCloseModal=a.onCloseModal.bind(y()(a));a.onRemoveChannels=a.onRemoveChannels.bind(y()(a));return a}h()(t,[{key:"onCloseModal",value:function e(){this.props.closeModal()}},{key:"onRemoveChannels",value:function e(){var t=this;var a=this.props,r=a.channels,n=a.closeModal,i=a.onDisconnectComplete,s=a.orgId,o=a.removeChannelsFromUserGroup,l=a.userGroupId;var c={channelIds:r.map(function(e){return e.id}),teamId:s,userGroupId:l};this.setState(function(){return{isRemovingChannels:true}});var u=true;o(c).then(function(){n()}).catch(function(){u=false;t.setState(function(){return{isRemovingChannels:false}})}).finally(function(){i(u,r)})}},{key:"render",value:function e(){if(!this.props.featureOrgLevelUserGroupsPhase2Frontend)return null;var t=this.props,a=t.channels,r=t.userGroup;var i=this.state.isRemovingChannels;var s=Object(It["h"])(r);var o=a&&a[0]&&Object(Tt["getDisplayName"])(a[0]);var l=Nt.t("Disconnect {groupName} from channel",{groupName:s});var c=Nt.t("Disconnect Channel");var u=Nt.t("Cancel");var d=Nt.rt("Members of {groupName} will no longer be automatically added to <b>{channelName}</b>. Current members won\u2019t lose access, but they can choose to leave the channel.",{groupName:s,channelName:o});return n.a.createElement(He["a"],{closeModal:this.onCloseModal},n.a.createElement(He["h"],null,n.a.createElement(He["j"],{title:l})),n.a.createElement(He["d"],null,n.a.createElement(He["e"],null,n.a.createElement("p",null,d))),n.a.createElement(He["f"],null,n.a.createElement(He["g"],null,n.a.createElement(He["c"],{type:"outline"},u),n.a.createElement(M["b"],{type:"danger",loading:i,disabled:i,onClick:this.onRemoveChannels},c))))}}]);return t}(n.a.PureComponent);Mt.displayName="DisconnectChannelsConfirmModal";Mt.defaultProps=Pt;var Dt=function e(t){return{closeModal:function e(){return t(S["closeModal"].apply(void 0,arguments))},removeChannelsFromUserGroup:function e(){return t(At["e"].apply(void 0,arguments))}}};var xt=function e(t,a){var r=a.userGroupId;return{orgId:Object(x["a"])(t),userGroup:Object(F["e"])(t,{groupId:r})}};var Rt=Object(o["connect"])(xt,Dt)(Mt);var Ft=a(560);var Lt=new L["b"]("enterprise_dashboard");function Ut(e,t){return{text:e,toastProps:{icon:t?"check-circle-o":"warning",position:"bottom-right"}}}function Bt(e,t,a){if(!a)return null;if(!t||!t.length)return null;var r=1===t.length;var n=r&&Object(Tt["getName"])(t[0]);var i;i=e?r?Lt.t("{channelName} connected",{channelName:n}):Lt.t("{numberOfChannels, plural, =1 {# channel} other {# channels}} connected",{numberOfChannels:t.length}):r?Lt.t("Unable to connect {channelName}",{channelName:n}):Lt.t("Unable to connect {numberOfChannels, plural, =1 {# channel} other {# channels}}",{numberOfChannels:t.length});return Ut(i,e)}function qt(e,t,a){if(!a)return null;if(!t||!t.length)return null;var r=1===t.length;var n=r&&Object(Tt["getName"])(t[0]);var i;i=e?r?Lt.t("{channelName} disconnected",{channelName:n}):Lt.t("{numberOfChannels, plural, =1 {# channel} other {# channels}} disconnected",{numberOfChannels:t.length}):r?Lt.t("Unable to disconnect {channelName}",{channelName:n}):Lt.t("Unable to disconnect {numberOfChannels, plural, =1 {# channel} other {# channels}}",{numberOfChannels:t.length});return Ut(i,e)}var Gt=new L["b"]("enterprise_dashboard");var Ht={featureOrgLevelUserGroupsPhase2Frontend:false,onSelected:E["noop"]};var Wt=function(e){k()(t,e);function t(e){var a;p()(this,t);a=f()(this,g()(t).call(this,e));a.renderMenu=a.renderMenu.bind(y()(a));return a}h()(t,[{key:"renderMenu",value:function e(t){var a=this.props,r=a.featureOrgLevelUserGroupsPhase2Frontend,i=a.onSelected;if(!r)return null;return n.a.createElement(Fe["f"],pe()({},t,{width:"auto"}),n.a.createElement(Fe["b"],{danger:true,key:0,label:Gt.t("Disconnect channel"),onSelected:i}))}},{key:"render",value:function e(){var t=this.props.featureOrgLevelUserGroupsPhase2Frontend;if(!t)return null;return n.a.createElement("div",null,n.a.createElement(Fe["e"],{renderMenu:this.renderMenu,position:"bottom-right",offsetX:20},n.a.createElement(M["c"],{"data-qa":"idp_group_detail_row_ws_open_menu",className:"p-org_level_user_groups__menu_button"},n.a.createElement(P["b"],{type:"ellipsis"}))))}}]);return t}(r["PureComponent"]);Wt.displayName="ChannelsTableRowMenu";Wt.defaultProps=Ht;var Vt=Wt;var Kt=a(1311);var zt=new L["b"]("enterprise_dashboard");var Qt={featureOrgLevelUserGroupsPhase2Frontend:false};var Yt=function(e){k()(t,e);function t(){p()(this,t);return f()(this,g()(t).apply(this,arguments))}h()(t,[{key:"render",value:function e(){var t=this.props,a=t.featureOrgLevelUserGroupsPhase2Frontend,r=t.channel;if(!a)return null;var i=r.num_members||r.member_count;var s=zt.t("{numMembers, plural, =1 {# member} other {# members}}",{numMembers:i});return n.a.createElement(n.a.Fragment,null,n.a.createElement(Kt["a"],{channel:r}),n.a.createElement("div",{className:"p-org_level_group_details__channel_member_count","data-qa":"channels-members-label-member-count"},s))}}]);return t}(n.a.PureComponent);Yt.displayName="ChannelsMembersLabel";Yt.defaultProps=Qt;var Jt=Yt;var Xt=a(1609);var Zt=new L["b"]("enterprise_dashboard");var $t="*";var ea={featureOrgLevelUserGroupsPhase2Frontend:false};var ta=function(e){k()(t,e);function t(){p()(this,t);return f()(this,g()(t).apply(this,arguments))}h()(t,[{key:"render",value:function e(){var t=this.props.featureOrgLevelUserGroupsPhase2Frontend;if(!t)return null;var a=this.props.channel;if(!a)return null;if(Object(Tt["isOrgWide"])(a))return n.a.createElement("div",null,n.a.createElement("b",null,Zt.t("Org-wide")));var r=a.internal_team_ids;var i=r&&r[0];if(!i)return null;if(r.length>1)return n.a.createElement("div",null,n.a.createElement("b",null,Zt.t("{count, plural, =1 {# workspace} other {# workspaces}}",{count:r.length})));return n.a.createElement(Xt["a"],{id:i})}}]);return t}(n.a.PureComponent);ta.displayName="ChannelsWorkspaceLabel";ta.defaultProps=ea;var aa=ta;var ra;function na(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function ia(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?na(Object(a),true).forEach(function(t){Pe()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):na(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var sa=new L["b"]("enterprise_dashboard");var oa="asc";var la="desc";var ca="caret_down";var ua="caret_up";var da="name";var pa="date_create";var ma=da;var ha={featureOrgLevelUserGroupsPhase2Frontend:false,groupId:null,channels:[],searchTerm:null,onHeaderItemClick:E["noop"],sortBy:ma,sortDir:oa,enqueueToast:E["noop"],openModal:E["noop"],onChannelDisconnect:E["noop"]};var va=(ra={},Pe()(ra,oa,ca),Pe()(ra,la,ua),ra);var fa=function(e){k()(t,e);function t(e){var a;p()(this,t);a=f()(this,g()(t).call(this,e));var r=e.featureOrgLevelUserGroupsPhase2Frontend;if(!r)return f()(a);a.state={isLoading:true};a.makeRows=a.makeRows.bind(y()(a));a.makeRowData=a.makeRowData.bind(y()(a));a.headerItemOnClick=a.headerItemOnClick.bind(y()(a));a.onChannelMenuItemSelected=a.onChannelMenuItemSelected.bind(y()(a));a.onDisconnectComplete=a.onDisconnectComplete.bind(y()(a));return a}h()(t,[{key:"componentDidMount",value:function e(){var t=this.props.channels;t.length&&this.channelsUpdated()}},{key:"componentDidUpdate",value:function e(){var t=this.props.channels;var a=this.state.isLoading;a&&t.length&&this.channelsUpdated()}},{key:"onChannelMenuItemSelected",value:function e(t){var a=this.props,r=a.featureOrgLevelUserGroupsPhase2Frontend,i=a.groupId,s=a.openModal;s({element:n.a.createElement(Rt,{channels:t,userGroupId:i,featureOrgLevelUserGroupsPhase2Frontend:r,onDisconnectComplete:this.onDisconnectComplete})})}},{key:"onDisconnectComplete",value:function e(t,a){var r=this.props.onChannelDisconnect;var i=qt(t,a,this.props.featureOrgLevelUserGroupsPhase2Frontend);if(!i)return;var s=this.props.enqueueToast;var o=i.text,l=i.toastProps;var c=n.a.createElement(qe["b"],l,o);r();s({element:c})}},{key:"getHeaderSortIcon",value:function e(t,a){var r=this.props,n=r.sortBy,i=r.sortDir;var s=a.defaultSortType||oa;var o=va[s];if(!n||n!==t)return o;var l;l=i?i===oa?ca:ua:va[s];return l}},{key:"channelsUpdated",value:function e(){this.setState(function(){return{isLoading:false}})}},{key:"headerItemOnClick",value:function e(t){var a=this.props,r=a.sortBy,n=a.sortDir,i=a.onHeaderItemClick;var s=r;var o=n;if(t.id===r)o=n&&n!==oa?oa:la;else{s=t.id;o=t.defaultSortType?t.defaultSortType===oa?la:oa:la}var l={sortBy:s,sortDir:o};i(l)}},{key:"makeHeaderData",value:function e(){var t=this;var a=this.props.featureOrgLevelUserGroupsPhase2Frontend;if(!a)return[];var r=[{id:da,value:sa.t("Channel Name"),"data-qa":"idp_group_detail_col_name_title",className:"p-org_level_user_groups__sortable_table_header p-org_level_user_groups__table_header--name",onClick:this.headerItemOnClick,sortable:true},{id:"header_workspace",value:sa.t("Workspace"),"data-qa":"idp_group_detail_col_membership_title",className:"p-org_level_user_groups__table_header--teams"},{id:pa,value:sa.t("Date connected"),"data-qa":"idp_group_detail_col_date_added_title",className:"p-org_level_user_groups__sortable_table_header p-org_level_user_groups__table_header--date",onClick:this.headerItemOnClick,sortable:true},{id:"header_menu",value:null,className:"margin_right_100",noHover:true}];var n=r.map(function(e){if(!e.sortable)return e;return ia({},e,{iconType:t.getHeaderSortIcon(e.id,e)})});return n}},{key:"makeRowData",value:function e(t,a){var r=this;var i=this.props.featureOrgLevelUserGroupsPhase2Frontend;var s="row_channel"+(a+1);var o=s+"_col_";return{id:"row_channel_"+(a+1),items:[{id:o+"_1",value:this.renderChannelColumn(t),className:"p-org_level_group_details__channels_table_channel_name"},{id:o+"_2",value:n.a.createElement(aa,{channel:t,featureOrgLevelUserGroupsPhase2Frontend:i})},{id:o+"_3",value:Object(Ft["a"])(t.created),className:"p-org_level_user_groups__table_row_item--date"},{id:o+"_4",value:n.a.createElement(Vt,{featureOrgLevelUserGroupsPhase2Frontend:i,onSelected:function e(){return r.onChannelMenuItemSelected([t])}}),className:"align_right margin_right_100"}]}}},{key:"makeRows",value:function e(){var t=this.props,a=t.featureOrgLevelUserGroupsPhase2Frontend,r=t.channels;if(!a||!r.length||!r.map)return[];return r.map(this.makeRowData)}},{key:"renderChannelColumn",value:function e(t){var a=this.props.featureOrgLevelUserGroupsPhase2Frontend;return n.a.createElement(Jt,{featureOrgLevelUserGroupsPhase2Frontend:a,channel:t})}},{key:"render",value:function e(){if(!this.props.featureOrgLevelUserGroupsPhase2Frontend)return null;var t=this.props,a=t.channels,r=t.searchTerm;var i=this.state.isLoading;if(i)return n.a.createElement(T["a"],{color:"blue",size:"jumbo",className:"p-org_level_group_details__member_table_loading"});if(r&&!a.length)return n.a.createElement("div",{className:"p-org_level_user_groups__table"},n.a.createElement("p",{className:"p-org_level_user_groups__table--no_search_results"},sa.rt("No results matching <b>{searchQuery}</b>.",{searchQuery:r})));return n.a.createElement("div",{className:"p-org_level_user_groups__table"},n.a.createElement(ue["b"],{autoHeight:true,isLoading:i,headers:this.makeHeaderData(),rows:this.makeRows(),rowClassName:"p-org_level_group_details__channels_table_row",rowHeaderItemClassName:"p-org_level_group_details__row_header c-table_view_hover_disabled",listClassName:"p-group_members_table__list",useKeyboardNavigableTable:true}))}}]);return t}(n.a.PureComponent);fa.displayName="ChannelsTable";fa.defaultProps=ha;var ba=function e(t,a){var r=a.groupId,n=a.searchTerm,i=a.sortBy,s=a.sortDir,o=a.filterByWorkspace;var l=Object(F["c"])(t,{groupId:r,searchTerm:n,sortBy:i,sortDirAscending:s===oa,filterByWorkspace:o})||[];return{channels:l}};var ga=function e(t){return{enqueueToast:function e(){return t(Be["enqueueToast"].apply(void 0,arguments))},openModal:function e(){return t(S["openModal"].apply(void 0,arguments))}}};var _a=Object(o["connect"])(ba,ga)(fa);var ya=a(218);var Oa=a.n(ya);var ka=a(821);var Ea=a(1586);var Ca=a(1420);var Sa=new L["b"]("enterprise_dashboard");var wa={featureOrgLevelUserGroupsPhase2Frontend:false,allChannels:[],onOptionSelected:E["noop"],autoProvisionedTeams:[],width:250,className:""};var ja=function(e){k()(t,e);function t(e){var a;p()(this,t);a=f()(this,g()(t).call(this,e));a.state={workspaceSelectOptions:[]};a.renderWorkspaceSelectOption=a.renderWorkspaceSelectOption.bind(y()(a));a.onOptionSelected=a.onOptionSelected.bind(y()(a));return a}h()(t,[{key:"componentDidMount",value:function e(){var t=this.props.allChannels;t.length&&this.updateWorkspaceSelectOptions()}},{key:"componentDidUpdate",value:function e(t){var a=this.props,r=a.allChannels,n=a.autoProvisionedTeams;(t.allChannels&&t.allChannels!==r||t.autoProvisionedTeams&&t.autoProvisionedTeams!==n)&&this.updateWorkspaceSelectOptions()}},{key:"onOptionSelected",value:function e(t){var a=t.value;this.props.onOptionSelected(a)}},{key:"updateWorkspaceSelectOptions",value:function e(){var t;var a=this.props,r=a.allChannels,n=a.autoProvisionedTeams;if(!r||!r.length)return;if(!n||!n.length)return;var i=[Ca["a"]];var s;r.forEach(function(e){!s&&Object(Tt["isOrgWide"])(e)&&(s=true)});s&&i.push(Ca["b"]);var o=r.map(function(e){return e.internal_team_ids&&e.internal_team_ids});o=(t=[]).concat.apply(t,Oa()(o));var l=n.filter(function(e){return o.includes(e.id)});l.sort(function(e,t){return e.name.toLowerCase().localeCompare(t.name.toLowerCase())});i=i.concat(l.map(function(e){return e.id}));var c=i.map(function(e){return{value:e}});this.setState(function(){return{workspaceSelectOptions:c}})}},{key:"renderWorkspaceSelectOption",value:function e(t){var a=this.props.featureOrgLevelUserGroupsPhase2Frontend;if(!a)return null;var r=t.value;if(r===Ca["a"])return n.a.createElement("div",null,Sa.t("All workspaces"));if(r===Ca["b"])return n.a.createElement("div",null,Sa.t("Org-wide channels"));return n.a.createElement(Ea["a"],{id:r,className:"p-org_level-user_groups__workspace_select_item"})}},{key:"render",value:function e(){var t=this.props,a=t.featureOrgLevelUserGroupsPhase2Frontend,r=t.width,i=t.className;if(!a)return null;var s=this.state.workspaceSelectOptions;if(!s.length)return null;return n.a.createElement(ka["a"],{selectId:"provider-user-groups-select",options:s,optionsRowHeight:32,ariaLabel:Sa.t("Please select an option"),placeholderText:Sa.t("All workspaces"),width:r,renderOption:this.renderWorkspaceSelectOption,renderSelectedOption:this.renderWorkspaceSelectOption,onOptionSelected:this.onOptionSelected,className:i,minOptionsListWidth:250})}}]);return t}(n.a.PureComponent);ja.displayName="ChannelsWorkspaceSelect";ja.defaultProps=wa;var Ia=function e(t,a){var r=a.groupId;var n=Object(F["c"])(t,{groupId:r})||[];var i=Object(F["a"])(t,{groupId:r,filterAutoProvision:true});var s=i.map(function(e){return e.team_id});var o=Object(R["l"])(t,s);return{allChannels:n,autoProvisionedTeams:o}};var Ta=Object(o["connect"])(Ia)(ja);var Aa=new L["b"]("enterprise_dashboard");var Na={featureOrgLevelUserGroupsPhase2Frontend:false,groupId:"",channelsCount:0,workspacesCount:0,groupName:"",onChannelDisconnect:E["noop"]};var Pa=100;var Ma="asc";var Da=function(e){k()(t,e);function t(e){var a;p()(this,t);a=f()(this,g()(t).call(this,e));a.state={searchTerm:"",sortBy:ma,sortDir:Ma,filterByWorkspace:""};a.handleSearchInputChange=a.handleSearchInputChange.bind(y()(a));a.onChannelsTableUpdateSort=a.onChannelsTableUpdateSort.bind(y()(a));a.onSelectWorkspace=a.onSelectWorkspace.bind(y()(a));a.throttledSearch=Object(E["debounce"])(a.handleSearchInputChange,Pa,{leading:false});return a}h()(t,[{key:"onSetSelectFilter",value:function e(t){var a=t.label,r=t.value;return{label:a,value:r}}},{key:"onChannelsTableUpdateSort",value:function e(t){var a=t.sortBy,r=t.sortDir;this.updateChannelsToDisplay({sortBy:a,sortDir:r})}},{key:"onSelectWorkspace",value:function e(t){this.setState(function(){return{filterByWorkspace:t}})}},{key:"handleSearchInputChange",value:function e(t){var a=t&&t.target&&t.target.value;var r=a||"";this.updateChannelsToDisplay({searchTerm:r})}},{key:"updateChannelsToDisplay",value:function e(t){var a=this.state,r=a.searchTerm,n=a.sortBy,i=a.sortDir;if(t){void 0!==t.searchTerm&&(r=t.searchTerm);t.sortBy&&(n=t.sortBy);t.sortDir&&(i=t.sortDir)}var s={searchTerm:r,sortBy:n,sortDir:i};this.setState(function(){return s})}},{key:"render",value:function e(){var t=this.props,a=t.featureOrgLevelUserGroupsPhase2Frontend,r=t.groupId,i=t.channelsCount,s=t.workspacesCount,o=t.groupName,l=t.onChannelDisconnect;if(!a)return null;var c=this.state,u=c.isSearching,d=c.searchTerm,p=c.sortBy,m=c.sortDir,h=c.filterByWorkspace;if(!i)return n.a.createElement(jt,{workspacesCount:s,groupName:o,featureOrgLevelUserGroupsPhase2Frontend:a});return n.a.createElement("div",null,n.a.createElement("div",{className:"p-org_level_group_details__search_container display_flex padding_right_300"},n.a.createElement(re["a"],{className:"margin_right_50 flex_one",placeholder:Aa.t("Search channels by name"),icon:"search",autoFocus:false,isLoading:u,value:d,onChange:this.throttledSearch,"data-qa":"idp_group_detail_search"}),n.a.createElement(Ta,{featureOrgLevelUserGroupsPhase2Frontend:true,onOptionSelected:this.onSelectWorkspace,groupId:r})),n.a.createElement(_a,{featureOrgLevelUserGroupsPhase2Frontend:a,searchTerm:d,sortBy:p,sortDir:m,onHeaderItemClick:this.onChannelsTableUpdateSort,filterByWorkspace:h,groupId:r,onChannelDisconnect:l}))}}]);return t}(n.a.PureComponent);Da.displayName="ChannelsContent";Da.defaultProps=Na;var xa=function e(t,a){var r=a.groupId;var n=Object(F["b"])(t,{groupId:r});var i=Object(F["h"])(t,{groupId:r});var s=Object(F["g"])(t,{groupId:r});return{channelsCount:n,workspacesCount:i,groupName:s}};var Ra=Object(o["connect"])(xa)(Da);var Fa=a(54);var La=a(2029);var Ua=a(43);var Ba=new L["b"]("enterprise_dashboard");var qa={featureOrgLevelUserGroupsPhase2Frontend:false,isShowingSelected:false,onClearSelected:E["_noop"],onShowAllSelectedToggle:E["_noop"],selectedChannelIdsCount:0};var Ga=function(e){k()(t,e);function t(){p()(this,t);return f()(this,g()(t).apply(this,arguments))}h()(t,[{key:"render",value:function e(){var t=this.props,a=t.featureOrgLevelUserGroupsPhase2Frontend,r=t.isShowingSelected,i=t.onClearSelected,s=t.onShowAllSelectedToggle,o=t.selectedChannelIdsCount;if(!a)return null;if(!o)return null;var l=Ba.t("{selectedChannelIdsCount, plural, =1 {# channel selected} other {# channels selected}}",{selectedChannelIdsCount:o});var c=Ba.t("Show selected");var u=Ba.t("Show all");var d=Ba.t("Clear");return n.a.createElement("div",{className:"p-connect_channels_modal__channel_selected_toolbar","data-qa":"channels-selected-toolbar"},n.a.createElement("b",{"data-qa":"channels-selected-toolbar-selected-count"},l),n.a.createElement(Ua["a"],{className:"p-connect_channels_modal__channel_selected_toolbar_action",onClick:s,"data-qa":"channels-selected-toolbar-show-button"},r?u:c),n.a.createElement(Ua["a"],{className:"p-connect_channels_modal__channel_selected_toolbar_action",onClick:i,"data-qa":"channels-selected-toolbar-clear-button"},d))}}]);return t}(n.a.PureComponent);Ga.displayName="ChannelsSelectedToolbar";Ga.defaultProps=qa;var Ha=Ga;var Wa=a(2060);var Va=new L["b"]("enterprise_dashboard");var Ka=300;var za={userGroupId:"",userGroupName:"",closeModal:E["noop"],featureOrgLevelUserGroupsPhase2Frontend:false,connectedChannels:[],workspaceIds:[],autoProvisionedWorkspaces:[],addChannelsToUserGroup:E["noop"],onChannelsConnect:E["noop"],searchOrgChannels:E["noop"],orgId:"",enqueueToast:E["noop"]};var Qa="345px";var Ya=function(e){k()(t,e);function t(e){var a;p()(this,t);a=f()(this,g()(t).call(this,e));a.state={searchValue:"",workspaceSelectOption:"",selectedChannels:[],isAddingChannels:false,isShowingSelected:false,searchResultChannels:{},initialChannelsIsLoading:true,searchIsLoading:false,userSelectedChannels:[]};a.onCloseModal=a.onCloseModal.bind(y()(a));a.onSearchChange=a.onSearchChange.bind(y()(a));a.onWorkspaceSelect=a.onWorkspaceSelect.bind(y()(a));a.onChannelSelect=a.onChannelSelect.bind(y()(a));a.onAddChannels=a.onAddChannels.bind(y()(a));a.onShowAllSelectedToggle=a.onShowAllSelectedToggle.bind(y()(a));a.onClearSelected=a.onClearSelected.bind(y()(a));a.debouncedSearchChannels=Object(E["debounce"])(a.searchChannels,Ka);a.onConnectComplete=a.onConnectComplete.bind(y()(a));return a}h()(t,[{key:"componentDidMount",value:function e(){var t=this.props.connectedChannels;this.setState(function(){return{selectedChannels:t}},this.searchChannels)}},{key:"onCloseModal",value:function e(){this.props.closeModal()}},{key:"onSearchChange",value:function e(t){var a=this.state.workspaceSelectOption;var r=t.target&&t.target.value||"";this.setState(function(){return{searchValue:r,isShowingSelected:false}});this.debouncedSearchChannels(r,a)}},{key:"onWorkspaceSelect",value:function e(t){var a=this.state.searchValue;this.setState(function(){return{workspaceSelectOption:t}});this.searchChannels(a,t)}},{key:"onChannelSelect",value:function e(t){var a=this.props.connectedChannels;var r=this.state.selectedChannels;var n=this.getChannelsToDisplay();var i=n.map(function(e){var t=e.id;return t});var s=r.filter(function(e){var t=e.id;return!i.includes(t)});var o=n.filter(function(e){var a=e.id;return t.includes(a)});var l=[].concat(Oa()(s),Oa()(o));var c=Object(E["differenceBy"])(l,a,"id");this.setState(function(){return{selectedChannels:l,userSelectedChannels:c}});l.length||this.setState(function(){return{isShowingSelected:false}})}},{key:"onConnectComplete",value:function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];var r=Bt(t,a,this.props.featureOrgLevelUserGroupsPhase2Frontend);if(!r)return;var i=this.props.enqueueToast;var s=r.text,o=r.toastProps;var l=n.a.createElement(qe["b"],o,s);i({element:l})}},{key:"onAddChannels",value:function e(){var t=this;var a=this.props,r=a.orgId,n=a.addChannelsToUserGroup,i=a.userGroupId,s=a.closeModal,o=a.onChannelsConnect;var l=this.state.userSelectedChannels;var c=Object(E["groupBy"])(l,function(e){return Object(Tt["isOrgShared"])(e)?r:Object(E["get"])(e,"internal_team_ids[0]")});this.setState(function(){return{isAddingChannels:true}});var u=Object.keys(c).map(function(e){var t=c[e].map(function(e){return e.id});return n({channelIds:t,teamId:e,userGroupId:i})});var d=true;Promise.all(u).then(function(){o();t.setState(function(){return{isAddingChannels:false}});s()}).catch(function(){d=false;t.setState(function(){return{isAddingChannels:false}})}).finally(function(){t.onConnectComplete(d,l)})}},{key:"onShowAllSelectedToggle",value:function e(){this.setState(function(e){var t=e.isShowingSelected;return{isShowingSelected:!t}})}},{key:"onClearSelected",value:function e(){var t=this.props.connectedChannels;this.setState(function(){return{selectedChannels:t,userSelectedChannels:[],isShowingSelected:false}})}},{key:"getChannelsToDisplay",value:function e(){var t=this.state,a=t.isShowingSelected,r=t.userSelectedChannels,n=t.searchResultChannels;return a?r:Object.values(n)}},{key:"getChannelRows",value:function e(){var t=this;var a=this.props.connectedChannels;var r=this.state.searchIsLoading;var n=this.getChannelsToDisplay();if(!n.length&&!r)return[this.makeNoSearchResultsRowTemplate()];var i=a.map(function(e){return e.id});return n.map(function(e){var a=!i.includes(e.id);return{id:e.id,items:[{value:t.renderChannel(e,a),className:"p-org_level_group_details__channel_modal_table_channel"},{value:t.renderWorkspace(e)}],selectable:a,inactive:!a}})}},{key:"getTableHeaders",value:function e(){return[{id:"header_0",value:Va.t("Channel"),noHover:true,className:"p-org_level_group_details__channel_modal_table_channel"},{id:"header_1",value:Va.t("Workspace"),noHover:true}]}},{key:"getWorkspaceOptions",value:function e(){var t=this.props.workspaceIds;if(!t)return[];return t.map(function(e){return{label:e,value:e}})}},{key:"makeNoSearchResultsRowTemplate",value:function e(){var t=this.props.featureOrgLevelUserGroupsPhase2Frontend;if(!t)return null;var a=this.state.searchValue;return{id:"row_member1",items:[{id:"no_results_row",value:n.a.createElement("div",null,Va.rt("No results matching <b>{searchValue}</b>.",{searchValue:a})),className:"p-org_level_user_groups__search_row"}],checkboxClassName:"hidden"}}},{key:"searchChannels",value:function e(t,a){var r=this;var n=this.props,i=n.searchOrgChannels,s=n.autoProvisionedWorkspaces;this.setState(function(){return{searchIsLoading:true}});var o={query:t||""};a&&a!==Ca["a"]?o.team_ids=[a]:s.length&&(o.team_ids=s.map(function(e){return e.team_id}));i(o).then(function(e){var t=e.channels;var a={};t.forEach(function(e){a[e.id]=e});r.setState(function(){return{searchResultChannels:a,searchIsLoading:false,initialChannelsIsLoading:false}})})}},{key:"renderChannel",value:function e(t,a){var r=this.props.featureOrgLevelUserGroupsPhase2Frontend;if(!r)return null;var i=n.a.createElement(Jt,{featureOrgLevelUserGroupsPhase2Frontend:r,channel:t});if(!a){var s=Va.t("Already connected");i=n.a.createElement(Fa["c"],{tip:s,position:"top"},n.a.createElement("div",null,i))}return i}},{key:"renderWorkspace",value:function e(t){var a=this.props.featureOrgLevelUserGroupsPhase2Frontend;return n.a.createElement(aa,{channel:t,featureOrgLevelUserGroupsPhase2Frontend:a})}},{key:"render",value:function e(){var t=this.props,a=t.featureOrgLevelUserGroupsPhase2Frontend,r=t.userGroupName,i=t.userGroupId;if(!a)return null;var s=this.state,o=s.searchValue,l=s.selectedChannels,c=s.isAddingChannels,u=s.isShowingSelected,d=s.initialChannelsIsLoading,p=s.searchIsLoading,m=s.userSelectedChannels;var h=Va.t("Search channels by name");var v=Va.t("Connect");var f=Va.t("Cancel");var b=Va.rt("Connect {userGroupName} to channels",{userGroupName:r});return n.a.createElement(He["a"],{closeModal:this.onCloseModal},n.a.createElement(He["h"],null,n.a.createElement(He["j"],{title:b})),n.a.createElement(He["d"],null,n.a.createElement(He["e"],{className:"display_flex padding_top_100 padding_bottom_100"},n.a.createElement(re["a"],{placeholder:h,value:o,icon:"search",autoFocus:true,onChange:this.onSearchChange,className:"flex_one",isLoading:p}),n.a.createElement(Ta,{featureOrgLevelUserGroupsPhase2Frontend:a,groupId:i,onOptionSelected:this.onWorkspaceSelect,width:150,className:"margin_left_100"})),n.a.createElement(He["e"],null,n.a.createElement(Ha,{featureOrgLevelUserGroupsPhase2Frontend:a,isShowingSelected:u,onClearSelected:this.onClearSelected,onShowAllSelectedToggle:this.onShowAllSelectedToggle,selectedChannelIdsCount:m.length})),d?n.a.createElement(He["e"],{className:"p-org_level_group_details__channels_modal_loading"},n.a.createElement(T["a"],null)):n.a.createElement(He["e"],null,n.a.createElement(La["a"],{id:"connect-channels-modal-channels-table",headers:this.getTableHeaders(),rows:this.getChannelRows(),height:Qa,onSelect:this.onChannelSelect,selectedRows:l.map(function(e){var t=e.id;return t}),allowSelectAll:false,rowClassName:"p-org_level_group_details__channels_table_row"}))),n.a.createElement(He["f"],null,n.a.createElement(He["g"],null,n.a.createElement(He["c"],{type:"outline"},f),n.a.createElement(M["b"],{loading:c,disabled:!l.length||c,onClick:this.onAddChannels},v))))}}]);return t}(n.a.PureComponent);Ya.displayName="ConnectChannelsModal";Ya.defaultProps=za;var Ja=function e(t){return{closeModal:function e(){return t(S["closeModal"].apply(void 0,arguments))},addChannelsToUserGroup:function e(){return t(At["a"].apply(void 0,arguments))},searchOrgChannels:function e(){return t(At["g"].apply(void 0,arguments))},enqueueToast:function e(){return t(Be["enqueueToast"].apply(void 0,arguments))}}};var Xa=function e(t,a){var r=a.userGroupId;var n=Object(x["a"])(t);var i=Object(F["i"])(t,{groupId:r})||[];var s=Object(F["a"])(t,{groupId:r,filterAutoProvision:true});var o=Object(F["c"])(t,{groupId:r})||[];var l=Object(F["g"])(t,{groupId:r});return{connectedChannels:o,workspaceIds:i,orgId:n,autoProvisionedWorkspaces:s,userGroupName:l}};var Za=Object(o["connect"])(Xa,Ja)(Ya);var $a=Za;var er=a(1922);var tr={activeTab:"members",getEnterpriseMembersInOrgUserGroup:E["noop"],getConnectedChannelsInOrgUserGroup:E["noop"],getConnectedWorkspaceInOrgUserGroup:E["noop"],featureOrgLevelUserGroupsPhase2Frontend:false};var ar=function(e){k()(t,e);function t(e){var a;p()(this,t);a=f()(this,g()(t).call(this,e));a.state={isLoadingMembers:true,isLoadingWorkspaces:true,isLoadingChannels:true,cursorMark:"*",totalMemberCount:0};a.renderMembers=a.renderMembers.bind(y()(a));a.renderWorkspaces=a.renderWorkspaces.bind(y()(a));a.renderChannels=a.renderChannels.bind(y()(a));a.handleTabChange=a.handleTabChange.bind(y()(a));a.onConnectWorkspacesClick=a.onConnectWorkspacesClick.bind(y()(a));a.onConnectChannelsClick=a.onConnectChannelsClick.bind(y()(a));a.onFetchConnectedChannelsList=a.onFetchConnectedChannelsList.bind(y()(a));return a}h()(t,[{key:"componentDidMount",value:function e(){var t=this;var a=this.props,r=a.groupId,n=a.searchAndBulkUpsertOrgUserGroups,i=a.getEnterpriseMembersInOrgUserGroup,s=a.getConnectedWorkspaceInOrgUserGroup;n({userGroupIds:[r]});i({userGroupId:r}).then(function(e){t.setState(function(){return{cursorMark:e.next_cursor_mark,totalMemberCount:e.num_found,isLoadingMembers:false}})});s({usergroupId:r}).then(function(){t.setState(function(){return{isLoadingWorkspaces:false}})});this.onFetchConnectedChannelsList()}},{key:"onFetchConnectedChannelsList",value:function e(){var t=this;var a=this.props,r=a.groupId,n=a.featureOrgLevelUserGroupsPhase2Frontend,i=a.getConnectedChannelsInOrgUserGroup;if(!n)return null;return i({userGroupId:r,includeNumMembers:true}).then(function(){t.setState(function(){return{isLoadingChannels:false}})})}},{key:"onConnectWorkspacesClick",value:function e(){this.props.openModal({element:n.a.createElement(A["a"],{userGroupId:this.props.groupId})})}},{key:"onConnectChannelsClick",value:function e(){var t=this.props,a=t.groupId,r=t.featureOrgLevelUserGroupsPhase2Frontend,i=t.openModal;if(!r)return;i({element:n.a.createElement($a,{userGroupId:a,featureOrgLevelUserGroupsPhase2Frontend:r,onChannelsConnect:this.onFetchConnectedChannelsList})})}},{key:"handleTabChange",value:function e(t){var a=this.props.groupId;t!==this.props.activeTab&&Object(I["b"])(Object(I["a"])().router.navigateTo("/people/groups/"+a+"/"+t))}},{key:"renderSpinner",value:function e(){return n.a.createElement(T["a"],{color:"blue",size:"jumbo",className:"p-org_level_user_groups__spinner"})}},{key:"renderChannels",value:function e(){var t=this.props,a=t.groupId,r=t.featureOrgLevelUserGroupsPhase2Frontend;var i=this.state.isLoadingChannels;if(!r)return null;if(i)return this.renderSpinner();return n.a.createElement(Ra,{featureOrgLevelUserGroupsPhase2Frontend:r,groupId:a,onChannelDisconnect:this.onFetchConnectedChannelsList})}},{key:"renderMembers",value:function e(){var t=this.props.groupId;var a=this.state,r=a.cursorMark,i=a.totalMemberCount,s=a.isLoadingMembers;if(s)return this.renderSpinner();return n.a.createElement(Ae,{groupId:t,cursorMark:r,totalMemberCount:i})}},{key:"renderWorkspaces",value:function e(){var t=this.props.groupId;var a=this.state.isLoadingWorkspaces;if(a)return this.renderSpinner();return n.a.createElement(Et,{onConnectButtonClick:this.onConnectWorkspacesClick,groupId:t})}},{key:"render",value:function e(){var t=this.state.totalMemberCount;var a=this.props,r=a.groupId,i=a.activeTab,s=a.featureOrgLevelUserGroupsPhase2Frontend;return n.a.createElement("div",null,n.a.createElement(V,{groupId:r,onConnectWorkspacesClick:this.onConnectWorkspacesClick,onConnectChannelsClick:this.onConnectChannelsClick,featureOrgLevelUserGroupsPhase2Frontend:s}),n.a.createElement(X,{activeTab:i,onTabChange:this.handleTabChange,totalMemberCount:t,membersContent:this.renderMembers(),workspacesContent:this.renderWorkspaces(),channelsContent:this.renderChannels(),groupId:r,featureOrgLevelUserGroupsPhase2Frontend:this.props.featureOrgLevelUserGroupsPhase2Frontend}),n.a.createElement(N["a"],null))}}]);return t}(n.a.PureComponent);ar.displayName="OrgLevelGroupDetails";ar.defaultProps=tr;var rr=function e(t){return{featureOrgLevelUserGroupsPhase2Frontend:Object(w["isFeatureEnabled"])(t,"feature_org_level_user_groups_phase_2_frontend")}};var nr=function e(t){return{openModal:function e(){return t(S["openModal"].apply(void 0,arguments))},searchAndBulkUpsertOrgUserGroups:function e(a){return t(Object(j["i"])(a))},getEnterpriseMembersInOrgUserGroup:function e(){return t(j["h"].apply(void 0,arguments))},getConnectedChannelsInOrgUserGroup:function e(){return t(j["f"].apply(void 0,arguments))},getConnectedWorkspaceInOrgUserGroup:function e(){return t(j["g"].apply(void 0,arguments))}}};var ir=Object(o["connect"])(rr,nr)(ar);Object(c["a"])("interop.orgLevelGroupDetails",{render:function e(t,a,r){if(!t)throw new Error("orgLevelUserGroups render must be called with a teamId parameter");var i=Object(l["f"])(t);s.a.render(n.a.createElement(o["Provider"],{store:i},n.a.createElement(u["a"],null,n.a.createElement(ir,r))),a)},stop:function e(t){s.a.unmountComponentAtNode(t)}})},function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(12);var s=a(156);var o=a(26);var l=a(88);var c=a.n(l);var u=a(110);var d=a.n(u);var p=a(135);var m=a.n(p);var h=a(169);var v=a.n(h);var f=a(138);var b=a.n(f);var g=a(147);var _=a.n(g);var y=a(185);var O=a.n(y);var k=a(50);var E=a(151);var C=a(269);var S=a(108);var w=a(0);var j=a(62);var I=a(1193);var T=a(20);var A=a(33);var N=a(27);var P=a(9);var M=a(240);var D=a(288);var x=a(28);var R=Object(x["b"])("TS.generic_dialog.alert",function(){return null});var F=a(30);var L=a(6);var U=a(2696);var B=a(93);var q=a(4995);var G=a(124);var H=new L["b"]("admin");var W={whoCanManageSharedChannels:"who_can_manage_ext_shared_channels",escRequestsApprovalChannel:"external_shared_channel_requests_approval_channel"};var V={SLACKBOT:"slackbot",CHANNEL:"channel"};var K={initialRouteToChannelPrefValue:null,initialSelectedChannel:void 0,areSharedChannelRequestsInitiallyEnabled:false,initialWhoCanManageSharedChannelsPrefValue:null};var z=function(e){O()(t,e);function t(e){var a;d()(this,t);a=v()(this,b()(t).call(this,e));a.state={requestDeliveryMethod:Object(G["a"])(e.initialRouteToChannelPrefValue)?V.CHANNEL:V.SLACKBOT,sharedChannelRequestsEnabled:e.areSharedChannelRequestsInitiallyEnabled,whoCanManageSharedChannels:e.initialWhoCanManageSharedChannelsPrefValue,isSaving:false,selectedChannel:e.initialSelectedChannel,isSaved:false};Object(F["a"])(_()(a),["onRequestApproverChange","onDeliveryMethodChange","onChangeChannel","onSubmit"]);return a}m()(t,[{key:"onChangeChannel",value:function e(t){var a=t.entity;this.setState(function(){return{selectedChannel:a,isSaved:false}})}},{key:"onDeliveryMethodChange",value:function e(t){if(!Object.values(V).includes(t))return;this.setState(function(){return{requestDeliveryMethod:t,isSaved:false}})}},{key:"onRequestApproverChange",value:function e(t){this.setState(function(){return{whoCanManageSharedChannels:t,isSaved:false}})}},{key:"onSubmit",value:function e(){var t=this;this.setState(function(){return{isSaving:true}});var a=this.getSelectedPrefValuesForSubmit();return this.props.setMultipleTeamPrefsByApi(a).then(function(){t.setState(function(){return{isSaved:true}})}).catch(function(){R(H.t("Sorry! Something went wrong. Please try again."))}).finally(function(){t.setState(function(){return{isSaving:false}})})}},{key:"onToggleSharedChannelsEnabled",value:function e(t){var a=this.state.whoCanManageSharedChannels;var r=!t||a!==M["SHARED_CHANNELS_MGMT_OPTIONS"].STANDARD.NO_ONE&&a?a:M["SHARED_CHANNELS_MGMT_OPTIONS"].STANDARD.TOPLEVEL_ADMINS_AND_OWNERS;this.setState(function(){return{sharedChannelRequestsEnabled:t,whoCanManageSharedChannels:r,isSaved:false}})}},{key:"getSelectedChannelIdForSubmit",value:function e(){var t=this.state,a=t.requestDeliveryMethod,r=t.selectedChannel,n=t.sharedChannelRequestsEnabled;if(!n)return null;if(a!==V.CHANNEL)return null;if(r&&r.id&&Object(G["a"])(r.id))return r.id;return null}},{key:"getSelectedPrefValuesForSubmit",value:function e(){var t;var a=this.state,r=a.sharedChannelRequestsEnabled,n=a.whoCanManageSharedChannels;return t={},c()(t,W.whoCanManageSharedChannels,r?{type:[n]}:{type:[M["SHARED_CHANNELS_MGMT_OPTIONS"].STANDARD.NO_ONE]}),c()(t,W.escRequestsApprovalChannel,this.getSelectedChannelIdForSubmit()),t}},{key:"filterRouteToChannelOptions",value:function e(t){return!Object(P["isRequired"])(t)}},{key:"maybeRenderPrivateChannelWarning",value:function e(){var t=this.state.selectedChannel;if(t&&Object(P["isPrivateChannel"])(t))return n.a.createElement(B["a"],{className:"margin_left_150 nudge_left_2",level:"warning"},H.rt("People with approval permissions who aren\u2019t in this private channel will still be able to manage requests from the <strong>Manage shared channels</strong> page.",{fallbackHash:"4646b8c8e96485a4b049ba31b072f004c21cb183",fallbackHashNs:"admin"}));return null}},{key:"maybeRenderRouteToChannel",value:function e(){var t=this;var a=this.state,r=a.requestDeliveryMethod,i=a.selectedChannel,s=a.sharedChannelRequestsEnabled;if(!s)return null;return n.a.createElement("div",{"data-qa":"shared_channels_route_to_channel",className:"margin_top_150"},n.a.createElement("p",{className:"bold small margin_bottom_25"},H.t("Where will these requests be sent?")),n.a.createElement(C["a"],{className:"margin_bottom_0"},n.a.createElement(k["a"],{text:H.t("Everyone who can approve via direct message"),type:"inline",cursor:"pointer"},n.a.createElement(E["a"],{"data-qa":"requests_destination_slackbot",checked:r===V.SLACKBOT,onChange:function e(){return t.onDeliveryMethodChange(V.SLACKBOT)}})),n.a.createElement(k["a"],{text:H.t("A specific channel"),type:"inline",cursor:"pointer"},n.a.createElement(E["a"],{"data-qa":"requests_destination_channel",checked:r===V.CHANNEL,onChange:function e(){return t.onDeliveryMethodChange(V.CHANNEL)}})),n.a.createElement(U["a"],{isDisabled:r!==V.CHANNEL,onChangeChannel:this.onChangeChannel,selectedChannel:i,channelOptionsFilter:this.filterRouteToChannelOptions,classPrefix:"admin_shared_channel_settings",selectId:"shared_channel_requests_channel_select"})))}},{key:"maybeRenderSelectApprovers",value:function e(){var t=this;var a=this.state,r=a.whoCanManageSharedChannels,i=a.sharedChannelRequestsEnabled;if(!i)return null;return n.a.createElement("div",{"data-qa":"shared_channels_select_approvers",className:"margin_top_150"},n.a.createElement("p",{className:"bold small margin_bottom_0"},H.t("Who can approve shared channel requests?")),n.a.createElement("p",{className:"subtle_silver small margin_bottom_25"},H.t("Choose who can approve shared channel requests or disconnect existing shared channels.")),n.a.createElement(C["a"],{className:"margin_bottom_0"},n.a.createElement(k["a"],{text:H.t("Everyone, except guests"),type:"inline",cursor:"pointer"},n.a.createElement(E["a"],{"data-qa":"who_can_manage_option_everyone",checked:r===M["SHARED_CHANNELS_MGMT_OPTIONS"].STANDARD.EVERYONE,onChange:function e(){return t.onRequestApproverChange(M["SHARED_CHANNELS_MGMT_OPTIONS"].STANDARD.EVERYONE)}})),n.a.createElement(k["a"],{text:H.t("Workspace Owners only"),type:"inline",cursor:"pointer"},n.a.createElement(E["a"],{"data-qa":"who_can_manage_option_toplevel_owners",checked:r===M["SHARED_CHANNELS_MGMT_OPTIONS"].STANDARD.TOPLEVEL_OWNERS,onChange:function e(){return t.onRequestApproverChange(M["SHARED_CHANNELS_MGMT_OPTIONS"].STANDARD.TOPLEVEL_OWNERS)}})),n.a.createElement(k["a"],{text:H.t("Workspace Owners and Admins only (default)"),type:"inline",cursor:"pointer"},n.a.createElement(E["a"],{"data-qa":"who_can_manage_option_toplevel_admins_and_owners",checked:r===M["SHARED_CHANNELS_MGMT_OPTIONS"].STANDARD.TOPLEVEL_ADMINS_AND_OWNERS,onChange:function e(){return t.onRequestApproverChange(M["SHARED_CHANNELS_MGMT_OPTIONS"].STANDARD.TOPLEVEL_ADMINS_AND_OWNERS)}}))))}},{key:"renderEnableRequests",value:function e(){var t=this;var a=this.state.sharedChannelRequestsEnabled;return n.a.createElement(k["a"],{text:H.t("Enable requests"),type:"inline"},n.a.createElement(S["a"],{checked:a,"data-qa":"requests_enabled-checkbox",onChange:function e(){return t.onToggleSharedChannelsEnabled(!a)}}))}},{key:"render",value:function e(){var t=this.state,a=t.requestDeliveryMethod,r=t.isSaving,i=t.selectedChannel,s=t.isSaved;var o=a===V.CHANNEL&&!i;return n.a.createElement("div",{"data-qa":"admin_shared_channels_settings"},this.renderEnableRequests(),this.maybeRenderSelectApprovers(),this.maybeRenderRouteToChannel(),this.maybeRenderPrivateChannelWarning(),n.a.createElement(D["a"],{className:"p-admin_shared_channels_settings__submit_button",disabled:o,onClick:this.onSubmit,loading:r},s?H.t("Saved"):H.t("Save")))}}]);return t}(r["Component"]);z.displayName="AdminSharedChannelsSettings";z.defaultProps=K;function Q(e){var t=Object(A["d"])(e);var a=Object(j["a"])(e,W.escRequestsApprovalChannel);var r=Object(M["getSharedChannelsPref"])(e);var n=r?r.value:M["SHARED_CHANNELS_MGMT_OPTIONS"].STANDARD.TOPLEVEL_ADMINS_AND_OWNERS;return{areSharedChannelRequestsInitiallyEnabled:Object(N["isSharedChannelsEnabled"])(e,t),initialWhoCanManageSharedChannelsPrefValue:n,initialRouteToChannelPrefValue:a,initialSelectedChannel:Object(G["a"])(a)?Object(T["e"])(e,a,true):void 0,invitesOnlyAdmin:Object(j["a"])(e,W.invitesOnlyAdmin)}}var Y={setMultipleTeamPrefsByApi:I["a"]};var J=Object(i["connect"])(Q,Y)(z);function X(e,t){var a=document.getElementById("admin_shared_channels_settings_mount_point");if(!a||!e)return;var r=Object(o["f"])(e);Object(s["a"])(n.a.createElement(i["Provider"],{store:r},n.a.createElement(J,t)),a)}var Z={mountAdminSharedChannelsSettings:X};var $=a(52);Object($["a"])("interop.mountAdminSharedChannelsSettings",X)},function(e,t,a){"use strict";a.r(t);var r=a(52);var n=a(505);var i=a(1168);var s=a(647);var o=a(2660);var l=a(104);var c=a(2990);var u=a(1058);var d=a(1155);var p=a(5170);var m=a(2771);var h=a(2780);var v=a(1083);var f=a(572);var b=a(1650);var g=a(196);var _=a.n(g);var y=a(1);var O=a.n(y);var k=a(0);var E=a(39);var C=a(18);var S=a(110);var w=a.n(S);var j=a(135);var I=a.n(j);var T=a(169);var A=a.n(T);var N=a(138);var P=a.n(N);var M=a(147);var D=a.n(M);var x=a(185);var R=a.n(x);var F=a(12);var L=a(2);var U=a(30);var B=a(6);var q=a(1205);var G=a(35);var H=a(14);var W=a(44);var V=a(24);var K=a(141);var z=a(29);var Q=a(31);var Y=Object(z["a"])("Redeem a single promo code",function(e,t,a){return e(Object(Q["a"])({method:"promo.codes.redeem",reason:"redeem-promo-code",args:a})).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t={};if(e.credits){var a=e.credits,r=a.additional_credits,n=a.total_credits;t.credits={additionalCredits:r,totalCredits:n}}return t}).catch(function(e){return{errorCode:e.name}})});Y.meta={name:"redeemPromoCode",key:"fetchersPromoCodesRedeemApiRedeemPromoCode",description:"Redeem a single promo code"};Y.propTypes={code:k["default"].string.isRequired};var J=Y;var X=a(11);var Z=new B["b"]("admin_billing");var $={onCloseModal:L["noop"]};var ee=function(e){R()(t,e);function t(e){var a;w()(this,t);a=A()(this,P()(t).call(this,e));Object(U["a"])(D()(a),["updateInput","onSubmit","onClose"]);a.state={promoCode:"",promoCodeErrorText:null,success:false,submitButtonDisabled:true};a.promoCodeResult=null;return a}I()(t,[{key:"onClose",value:function e(){this.props.onCloseModal(this.promoCodeResult);this.props.closeModal()}},{key:"onSubmit",value:function e(){var t=this;var a=this.state.promoCode;this.setState(function(){return{submitButtonDisabled:true}});this.props.redeemPromoCode({code:a}).then(function(e){if(e.errorCode)t.setState(function(){return{promoCodeErrorText:t.getTextForErrorCode(e.errorCode)}});else{t.promoCodeResult=e;t.setState(function(){return{success:true}})}})}},{key:"getTextForErrorCode",value:function e(t){switch(t){case"invalid_code":return Z.t("This promo code isn\u2019t valid");case"team_ineligible":return Z.t("Your team isn\u2019t eligible for this promotion");default:return null}}},{key:"updateInput",value:function e(t){this.setState(function(){return{promoCode:t,promoCodeErrorText:null,submitButtonDisabled:!t.length}})}},{key:"renderTitle",value:function e(){if(!this.props.featurePromoCodeRedemption)return null;return this.state.success?Z.t("Promo applied"):Z.t("Enter promo code")}},{key:"renderInputForm",value:function e(){var t=this.state,a=t.promoCode,r=t.promoCodeErrorText;return O.a.createElement("div",{className:"margin_top_25"},O.a.createElement(K["a"],{name:"promo-code",id:"promo-code",value:a,onChange:this.updateInput,maxLength:50,focusOnMount:true,errorText:r}))}},{key:"renderSuccess",value:function e(){var t=this.props,a=t.currency,r=t.featurePromoCodeRedemption;if(!r)return null;if(this.promoCodeResult&&this.promoCodeResult.credits)return O.a.createElement("p",null,Z.rt("{credit_amount} was credited to your account. You can use this for any of Slack\u2019s paid plans.",{credit_amount:Object(q["a"])(this.promoCodeResult.credits.additionalCredits,a)}));return null}},{key:"renderModalContent",value:function e(){return this.state.success?this.renderSuccess():this.renderInputForm()}},{key:"renderButtons",value:function e(){var t=this.state,a=t.success,r=t.submitButtonDisabled;if(!this.props.featurePromoCodeRedemption)return null;if(a)return O.a.createElement(V["d"],{type:"primary",onClick:this.onClose,"data-qa":"promo_code_modal_confirm_btn",autoClogProps:{elementName:"got_it"}},Z.t("Got It"));return O.a.createElement(O.a.Fragment,null,O.a.createElement(V["d"],{type:"outline",onClick:this.onClose,"data-qa":"promo_code_modal_cancel_btn",autoClogProps:{elementName:"cancel"}},Z.t("Cancel")),O.a.createElement(V["d"],{type:"primary",onClick:this.onSubmit,disabled:r,"data-qa":"promo_code_modal_submit_btn",autoClogProps:{elementName:"submit"}},Z.t("Submit")))}},{key:"render",value:function e(){if(!this.props.featurePromoCodeRedemption)return null;return O.a.createElement(W["a"],{closeModal:this.onClose,autoClogProps:{clogImpression:true,eventId:H["EventId"].GROWTH_PRICING,step:H["UiStep"].ADMIN_BILLING,elementName:"promo_code_modal",clogger:this.props.clogger}},O.a.createElement(W["h"],null,O.a.createElement(W["j"],{title:this.renderTitle()})),O.a.createElement(W["d"],null,O.a.createElement(W["e"],null,this.renderModalContent())),O.a.createElement(W["f"],null,O.a.createElement(W["g"],null,this.renderButtons())))}}]);return t}(y["PureComponent"]);ee.displayName="PromoCodeModal";ee.defaultProps=$;var te=function e(t){return{clogger:Object(G["a"])({state:t}),featurePromoCodeRedemption:Object(X["isFeatureEnabled"])(t,"feature_promo_code_redemption")}};var ae=function e(t){return{closeModal:function e(){return t(E["closeModal"].apply(void 0,arguments))},redeemPromoCode:function e(){return t(J.apply(void 0,arguments))}}};var re=Object(F["connect"])(te,ae)(ee);var ne=Object(C["b"])("Opens the enter promo code Modal",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var r=_()({},a);e(Object(E["openModal"])({element:O.a.createElement(re,r)}))});ne.meta={name:"openPromoCodeModal",key:"actionsUiOpenPromoCodeModalOpenPromoCodeModal",description:"Opens the enter promo code Modal"};ne.propTypes={currency:k["default"].string.isRequired,onCloseModal:k["default"].func};Object(r["a"])("interop.actions",{displayModelOrViewById:n["a"],setLastRead:i["d"],markLastRead:i["b"],markDelayedWithAPI:i["a"],openDmBrowserModal:u["a"],openChannelCreateModal:d["a"],startChannelInviteModal:b["b"],requestOfflineHistory:s["a"],requestOfflineCounts:o["a"],toggleKeyboardShortcuts:l["t"],showKeyboardShortcuts:l["i"],slackJsPathCommand:c["default"],filterFilesForUpload:p["a"],launchWorkflowBuilder:m["a"],openSMSDownloadAppDialog:h["a"],rebuildExternalTeamChannels:v["a"],setUnsentInvites:f["setUnsentInvites"],openPromoCodeModal:ne})},function(e,t,a){},,,,function(e,t,a){"use strict";var r=a(196);var n=a.n(r);var i=a(88);var s=a.n(i);var o=a(110);var l=a.n(o);var c=a(135);var u=a.n(c);var d=a(169);var p=a.n(d);var m=a(138);var h=a.n(m);var v=a(147);var f=a.n(v);var b=a(185);var g=a.n(b);var _=a(1);var y=a.n(_);var O=a(0);var k=a(12);var E=a(2);var C=a(30);var S=a(11);var w=a(62);var j=a(38);var I=a(1385);var T=a(150);var A=a(87);var N=a(32);var P=a(226);var M=a(585);var D=a(756);var x=a(33);var R=a(27);var F=a(1062);var L=a(43);var U=a(1153);var B=a(761);var q=a(23);var G=a(57);var H=a(1267);var W=a(14);var V=a(6);var K=a(35);var z=a(16);var Q=a(4758);var Y=a(1992);var J=a(2765);var X=a(18);var Z=a(372);var $=a(94);var ee=a(39);var te=new V["b"]("file-upload");var ae={SINGLE_LINK_MISSING:"single",MULTIPLE_LINK_MISSING:"multiple",WEBLINK:"weblink",NO_AUTH:"unauthorized",GENERIC:"generic_error"};var re=["single","multiple","weblink","unauthorized","generic_error"];var ne=function e(t,a,r){var n="";switch(t){case ae.SINGLE_LINK_MISSING:n=te.t("Your Box file is missing a shared link, which we\u2019ll need to add it to Slack.");break;case ae.MULTIPLE_LINK_MISSING:n=te.t("One or more of your Box files is missing a shared link, which we\u2019ll need to add it to Slack.");break;case ae.WEBLINK:n=te.t("Apologies! Links from Box can\u2019t be added this way yet.");break;case ae.NO_AUTH:n=a?te.rt("Apologies, but you\u2019ll need to <a-connect>reconnect Box to Slack</a-connect> to continue. It only takes a click or two!",null,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.key,a=e.text,n=e.tag;switch(n){case"a-connect":return y.a.createElement(L["a"],{href:r,key:t},a);default:return a}}):te.t("Hmm, something went wrong. Try again?",{fallbackHash:"83743049d08a764e93ca79d5621ee1e19f02bc75",fallbackHashNs:"files"});break;case ae.GENERIC:n=te.t("Hmm, something went wrong. Try again?",{fallbackHash:"83743049d08a764e93ca79d5621ee1e19f02bc75",fallbackHashNs:"files"});break;default:return null}return n};var ie=new V["b"]("file-upload");function se(e){var t=e.type,a=e.featureBoxContentPicker,r=e.proceedToNextDialog;var n=a?ie.t("Your file can\u2019t be added"):"";var i=ne(t);var s=r!==E["noop"]?function(){Object(E["defer"])(function(){r()})}:E["noop"];return y.a.createElement(Z["a"],{title:n,onGo:s},y.a.createElement("p",null,i))}se.displayName="BoxLinkAlert";se.defaultProps={type:ae.SINGLE,proceedToNextDialog:E["noop"],featureBoxContentPicker:false};var oe=Object($["e"])("Display Box Link Alert error",function(e,t,a){return e(Object(ee["openModal"])({element:y.a.createElement(se,a)}))});oe.meta={name:"openBoxLinkAlert",key:"componentsShareDialogsBoxLinkAlertOpenBoxLinkAlert",description:"Display Box Link Alert error"};oe.propTypes={};var le=oe;var ce=a(1312);var ue=a(1429);var de=a(335);var pe=a(21);var me=a(82);var he=a(4036);var ve=new V["b"]("files");var fe={channelId:O["default"].string.isRequired,threadTs:O["default"].string,metadata:O["default"].shape({fileUploadAction:O["default"].oneOfType([O["default"].number,O["default"].string]),fileUploadSrc:O["default"].oneOfType([O["default"].number,O["default"].string])})};var be=function e(t){var a=N["isDev"]?"A06147X5W":"A0F82E57C";var r=Object(x["d"])(t);return Object(R["getTeamUrl"])(r,"/apps/"+a)};var ge=Object(X["b"])("Open a window to pick a Box file",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelId,n=a.threadTs,i=a.metadata;var s=t();var o=Object(pe["b"])(s);var l=Object(w["a"])(s,"box_app_installed");var c=location.origin+"/files/import/box?team="+o+(N["isJsPath"]?"&js_path=1":"");return e(Object(he["a"])({url:c,windowFeatures:{height:675,width:925}})).then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.chosen_files,s=void 0===a?[]:a;var o=[];var c=[];s.forEach(function(t){t&&(Object(me["isValidBoxPayload"])(t)?l?e(Object(ue["a"])({channel:r,thread_ts:n,text:t.shared_link.url})):o.push({name:t.name,link:t.shared_link.url,is_box:true}):c.push(t))});var u=o.length&&!l?function(){return e(Object(ce["a"])({files:o,initialChannelId:r,threadTs:n,metadata:i}))}:E["noop"];if(c.length>0)return e(le({type:s.length>1?ae.MULTIPLE_LINK_MISSING:ae.SINGLE_LINK_MISSING,proceedToNextDialog:u}));return u()}).catch(function(a){if(a&&a.data&&a.data.error)switch(a.data.error){case"no_access_token":case"unauthorized":e(Object(de["addOrFlashEphemeralBotMsg"])({ephemeralType:de["EphemeralTypes"].boxFilePickerError,message:{channel:r,thread_ts:n,slackbot_feels:"sad_surprise",text:ve.t("Apologies, but you\u2019ll need to <{url}|reconnect Box to Slack> to continue. It only takes a click or two!",{url:be(t())})}}));break;default:break}throw a})});ge.meta={name:"openBoxFilePicker",key:"actionsCloudFilePickersOpenBoxFilePickerOpenBoxFilePicker",description:"Open a window to pick a Box file"};ge.propTypes=fe;var _e=ge;var ye=a(218);var Oe=a.n(ye);var ke=a(929);var Ee=a(1616);var Ce=function e(t){switch(t){case"application/vnd.google-apps.spreadsheet":return"gsheet";case"application/vnd.google-apps.document":return"gdoc";case"application/vnd.google-apps.presentation":return"gpres";case"application/vnd.google-apps.drawing":return"gdraw";default:return"File"}};var Se=Object(X["b"])("Process a Google Drive file object and add it to the store",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.gdriveFile,n=a.draftId;if(!r)return;if(!Object(me["isValidGoogleDrivePayload"])(r))throw new Error("Malformed Google Drive File");var i=Object(me["getGdriveID"])(r);var s={id:i,type:Ce(r.mimeType),name:r.name};e(Object(ke["b"])({files:[s]}));e(Object(Ee["b"])({draftId:n,pendingFileId:i}))});Se.meta={name:"addAndConnectPendingExternalGdriveFile",key:"actionsCloudFilePickersAddAndConnectPendingExternalFilesAddAndConnectPendingExternalGdriveFile",description:"Process a Google Drive file object and add it to the store"};Se.propTypes={gdriveFile:O["default"].shape({id:O["default"].string.isRequired,type:O["default"].string.isRequired,name:O["default"].string.isRequired}).isRequired,draftId:O["default"].string.isRequired,reason:O["default"].string.isRequired};var we=Object(X["b"])("Process a Dropbox file object and add it to the store",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.dropboxFile,n=a.draftId;if(!r||!Object(me["isValidDropboxPayload"])(r))return;var i=r.id;var s={id:i,name:r.name};e(Object(ke["b"])({files:[s]}));e(Object(Ee["b"])({draftId:n,pendingFileId:i}))});we.meta={name:"addAndConnectPendingExternalDropboxFile",key:"actionsCloudFilePickersAddAndConnectPendingExternalFilesAddAndConnectPendingExternalDropboxFile",description:"Process a Dropbox file object and add it to the store"};we.propTypes={dropboxFile:O["default"].shape({id:O["default"].string.isRequired,name:O["default"].string.isRequired}).isRequired,draftId:O["default"].string.isRequired};var je=Object(X["b"])("Process a Box File object and add it to the store",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.boxFile,n=a.draftId;if(!r||!Object(me["isValidBoxPayload"])(r))return;var i={id:r.id,name:r.name};e(Object(ke["b"])({files:[i]}));e(Object(Ee["b"])({draftId:n,pendingFileId:r.id}))});je.meta={name:"addAndConnectPendingExternalBoxFile",key:"actionsCloudFilePickersAddAndConnectPendingExternalFilesAddAndConnectPendingExternalBoxFile",description:"Process a Box File object and add it to the store"};je.propTypes={boxFile:O["default"].object,draftId:O["default"].string.isRequired};var Ie=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.dispatch,r=t.pendingFileId,n=t.draftId;a(Object(ke["c"])({pendingFileId:r}));a(Object(Ee["c"])({draftId:n,pendingFileId:r}))};var Te=a(332);var Ae=a.n(Te);var Ne=a(317);var Pe=a(187);var Me=a(202);var De=a(22);var xe=a(5090);var Re=Object(X["b"])("Either calls files.uploadExternal or posts message into the composer",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.draftId,n=a.linkToThirdPartyFile,i=a.remoteFilesAppEnabled,s=void 0!==i&&i,o=a.reason,l=void 0===o?"open-file-picker":o;if(s){var c=Object(Pe["d"])(t(),r);var u=Object(xe["a"])(t(),c);return new Promise(function(e,t){try{var a=Object(Me["a"])({viewContext:De["MESSAGE_CONTAINERS"].COMPOSER_VIEW,channelId:u});a.focus();a.setCursorAtEnd();a.insertContentsAtCursor({contents:(new Ae.a).insert("\n\n"+n)})}catch(e){t(e)}e(n)})}return e(Object(Ne["o"])({link:n,reason:l}))});Re.meta={name:"uploadOrPostCloudFile",key:"actionsCloudFilePickersUploadOrPostCloudFileUploadOrPostCloudFile",description:"Either calls files.uploadExternal or posts message into the composer"};Re.propTypes={linkToThirdPartyFile:O["default"].string.isRequired,remoteFilesAppEnabled:O["default"].bool,reason:O["default"].string};var Fe=Re;var Le=a(555);var Ue=a(176);var Be=a(543);var qe=a(1073);var Ge=a(544);var He=a(1029);var We=a(881);var Ve=a(882);var Ke=a(1074);var ze=a(24);var Qe=new V["b"]("files");var Ye={closeModal:E["noop"],featureComposeFlow:false,boxAppUrl:""};var Je=function(e){g()(t,e);function t(){l()(this,t);return p()(this,h()(t).apply(this,arguments))}u()(t,[{key:"render",value:function e(){var t=this.props,a=t.alertType,r=t.featureComposeFlow,n=t.boxAppUrl;return y.a.createElement(Be["a"],{centered:true,closeModal:this.props.closeModal},y.a.createElement(qe["a"],null,y.a.createElement(Ge["a"],{title:Qe.t("That didn\u2019t work",{fallbackHash:"c8c121f2de4a31088bfbbcc938db36cc74b754cc",fallbackHashNs:"invite"})})),y.a.createElement(He["a"],null,y.a.createElement(We["a"],null,ne(a,r,n)||Qe.t("Hmm, something went wrong. Try again?"))),y.a.createElement(Ve["a"],null,y.a.createElement(Ke["a"],null,y.a.createElement(ze["d"],{type:"primary",onClick:this.props.closeModal,autoFocus:true},Qe.t("OK")))))}}]);return t}(_["PureComponent"]);Je.displayName="BoxErrorModals";Je.defaultProps=Ye;var Xe=function e(t){return{closeModal:function e(){return t(ee["closeModal"].apply(void 0,arguments))}}};var Ze=function e(t){return{featureComposeFlow:Object(Pe["g"])(t)}};var $e=Object(k["connect"])(Ze,Xe)(Je);var et=a(5172);var tt=Object(X["b"])("Returns the correct number of external files for the compose flow, given the MAX_FILE_UPLOAD_COUNT",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.draftId,n=a.chosenFiles,i=a.remoteFilesAppInstalled,s=void 0!==i&&i;if(Object(E["isEmpty"])(n))return[];if(s)return n;var o=Object(Pe["d"])(t(),r);var l=Object(Ue["i"])(o)||[];if(l.length>=De["MAX_FILE_UPLOAD_COUNT"]){e(Object(et["a"])());return[]}var c=n;var u=l.length+n.length;if(l.length<De["MAX_FILE_UPLOAD_COUNT"]&&u>De["MAX_FILE_UPLOAD_COUNT"]){e(Object(et["a"])());c=n.slice(0,De["MAX_FILE_UPLOAD_COUNT"]-l.length)}return c});tt.meta={name:"validateChosenFiles",key:"actionsCloudFilePickersValidateChosenFilesValidateChosenFiles",description:"Returns the correct number of external files for the compose flow, given the MAX_FILE_UPLOAD_COUNT"};tt.propTypes={draftId:O["default"].string.isRequired,chosenFiles:O["default"].array.isRequired,remoteFilesAppInstalled:O["default"].bool};var at=tt;function rt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function nt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?rt(Object(a),true).forEach(function(t){s()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):rt(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var it=function e(t,a,r,n,i,o,l){var c;var u=Object(Pe["d"])(a(),r);var d=Object(Ue["i"])(u);d&&-1===d.indexOf(n)&&t(Object(Le["g"])(nt({},u,{files:[].concat(Oe()(d),[n])})));Ie({dispatch:t,pendingFileId:i.id,draftId:r});var p=Object(K["a"])({getState:a});p.track(W["EventId"].FILE_COMPLETE_UPLOAD_SUCCESS,(c={},s()(c,W["CoreKeys"].type,W["FileUploadType"].EXTERNAL),s()(c,W["CoreKeys"].duration,Date.now()-o),s()(c,W["CoreKeys"].has_upload_message,false),s()(c,W["CoreKeys"].file_count,1),s()(c,W["CoreKeys"].retry_count,0),s()(c,W["CoreKeys"].upload_size,i.size?i.size:0),s()(c,W["CoreKeys"].retry_reason,""),s()(c,W["CoreKeys"].did_disconnect_during_upload,false),s()(c,W["CoreKeys"].file_upload_action,l&&l.fileUploadAction),s()(c,W["CoreKeys"].file_upload_src,l&&l.fileUploadSrc),c))};var st=function e(t,a){var r=a.length>1?ae.MULTIPLE_LINK_MISSING:ae.SINGLE_LINK_MISSING;var n=y.a.createElement($e,{alertType:r});t(Object(ee["openModal"])({element:n,name:"invalid-file-error-modal-box"}))};var ot=function e(t,a){var r=be(a());var n=y.a.createElement($e,{alertType:ae.NO_AUTH,boxAppUrl:r});t(Object(ee["openModal"])({element:n,name:"auth-required-error-modal-box"}))};var lt=function e(t){var a=y.a.createElement($e,{alertType:ae.GENERIC});t(Object(ee["openModal"])({element:a,name:"generic-error-modal-box"}))};var ct=Object(X["b"])("Open a window to pick a Box file for drafts",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.metadata,n=a.draftId,i=a.reason;var s=t();var o=Object(pe["b"])(s);var l=Object(w["a"])(s,"box_app_installed");var c=location.origin+"/files/import/box?team="+o+(N["isJsPath"]?"&js_path=1":"");var u=[];return e(Object(he["a"])({url:c,windowFeatures:{height:675,width:925}})).then(function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=a.chosen_files,o=void 0===s?[]:s;var c=Date.now();var d=e(at({draftId:n,chosenFiles:o,remoteFilesAppInstalled:l}));return Promise.map(d,function(a){e(je({boxFile:a,draftId:n}));if(Object(me["isValidBoxPayload"])(a))return e(Fe({draftId:n,linkToThirdPartyFile:a.shared_link.url,remoteFilesAppEnabled:l,reason:i})).then(function(i){if(l)return Ie({dispatch:e,pendingFileId:a.id,draftId:n});var s=i.file;var o=s.id;return it(e,t,n,o,a,c,r)}).catch(function(t){Ie({dispatch:e,pendingFileId:a.id,draftId:n});throw t});return u.push(a)}).then(function(){if(u.length>0)throw new Error("invalid_box_files")})}).catch(function(a){var r=a&&(a.data&&a.data.error||a.message);switch(r){case"invalid_box_files":u.forEach(function(t){Ie({dispatch:e,pendingFileId:t.id,draftId:n})});return st(e,u);case"no_access_token":case"unauthorized":return ot(e,t);default:return lt(e)}})});ct.meta={name:"openBoxFilePickerForDrafts",key:"actionsCloudFilePickersOpenBoxFilePickerForDraftsOpenBoxFilePickerForDrafts",description:"Open a window to pick a Box file for drafts"};var ut=ct;var dt=a(350);var pt=a.n(dt);var mt={channelId:O["default"].string.isRequired,threadTs:O["default"].string,metadata:O["default"].shape({fileUploadAction:O["default"].oneOfType([O["default"].number,O["default"].string]),fileUploadSrc:O["default"].oneOfType([O["default"].number,O["default"].string])})};var ht=function e(t){if(!t||"object"!==pt()(t))return false;if("string"!==typeof t.name)return false;if("number"!==typeof t.bytes)return false;if("string"!==typeof t.link)return false;if(t.icon&&"string"!==typeof t.icon)return false;return true};var vt=function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=a.resolve,n=a.reject;if("https://www.dropbox.com"!==t.origin)return;var i;try{i="string"===typeof t.data?JSON.parse(t.data):t.data}catch(e){return}if(!i||"object"!==pt()(i))return;switch(i.method){case"files_selected":Object(E["isArray"])(i.params)&&Object(E["every"])(i.params,ht)&&r({chosen_files:i.params});n(new Error("Invalid file(s) from Dropbox"));break;case"close_dialog":r({chosen_files:[]});break;default:break}};var ft;var bt=Object(X["b"])("Open a window to pick a Box file",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelId,n=a.threadTs,i=a.metadata;var s=t();var o=Object(pe["b"])(s);ft&&ft.isPending()&&ft.cancel();var l=location.origin+"/files/import/dropbox?team="+o;ft=e(Object(he["a"])({url:l,processEvent:vt,windowFeatures:{height:552,width:640}}));return ft.then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.chosen_files,s=void 0===a?[]:a;var o=s.map(function(e){return{name:e.name,size:e.bytes,link:e.link,icon:e.icon,is_dropbox:true}});if(o.length)return e(Object(ce["a"])({files:o,initialChannelId:r,threadTs:n,metadata:i}));return null})});bt.meta={name:"openDropbox",key:"actionsCloudFilePickersOpenDropboxFilePickerOpenDropbox",description:"Open a window to pick a Box file"};bt.propTypes=mt;var gt=bt;function _t(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function yt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?_t(Object(a),true).forEach(function(t){s()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_t(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Ot;var kt=function e(){var t;var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=a.dispatch,n=a.getState,i=a.draftId,o=a.fileId,l=a.dropboxFile,c=a.startTime,u=a.metadata;var d=Object(Pe["d"])(n(),i);var p=Object(Ue["i"])(d);p&&-1===p.indexOf(o)&&r(Object(Le["g"])(yt({},d,{files:[].concat(Oe()(p),[o])})));Ie({dispatch:r,pendingFileId:l.id,draftId:i});var m=Object(K["a"])({getState:n});m.track(W["EventId"].FILE_COMPLETE_UPLOAD_SUCCESS,(t={},s()(t,W["CoreKeys"].type,W["FileUploadType"].EXTERNAL),s()(t,W["CoreKeys"].duration,Date.now()-c),s()(t,W["CoreKeys"].has_upload_message,false),s()(t,W["CoreKeys"].file_count,1),s()(t,W["CoreKeys"].retry_count,0),s()(t,W["CoreKeys"].upload_size,l.bytes?l.bytes:0),s()(t,W["CoreKeys"].retry_reason,""),s()(t,W["CoreKeys"].did_disconnect_during_upload,false),s()(t,W["CoreKeys"].file_upload_action,u&&u.fileUploadAction),s()(t,W["CoreKeys"].file_upload_src,u&&u.fileUploadSrc),t))};var Et=Object(X["b"])("Open a window to pick a Dropbox file for Drafts",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.draftId,n=a.metadata,i=a.reason;var s=t();var o=Object(pe["b"])(s);var l=Object(w["a"])(s,"dropbox_legacy_picker");Ot&&Ot.isPending()&&Ot.cancel();var c=location.origin+"/files/import/dropbox?team="+o;Ot=e(Object(he["a"])({url:c,processEvent:vt,windowFeatures:{height:552,width:640}}));return Ot.then(function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=a.chosen_files,o=void 0===s?[]:s;var c=Date.now();var u=e(at({draftId:r,chosenFiles:o,remoteFilesAppInstalled:l}));return Promise.map(u,function(a){e(we({dropboxFile:a,draftId:r}));return e(Fe({draftId:r,linkToThirdPartyFile:a.link,remoteFilesAppEnabled:l,reason:i})).then(function(i){if(l)return Ie({dispatch:e,pendingFileId:a.id,draftId:r});var s=i.file;var o=s.id;return kt({dispatch:e,getState:t,draftId:r,fileId:o,dropboxFile:a,startTime:c,metadata:n})})})})});Et.meta={name:"openDropboxFilePickerForDrafts",key:"actionsCloudFilePickersOpenDropboxFilePickerForDraftsOpenDropboxFilePickerForDrafts",description:"Open a window to pick a Dropbox file for Drafts"};Et.propTypes={draftId:O["default"].string.isRequired,metadata:O["default"].shape({fileUploadAction:O["default"].oneOfType([O["default"].number,O["default"].string]),fileUploadSrc:O["default"].oneOfType([O["default"].number,O["default"].string])}),reason:O["default"].string};var Ct=Et;var St=a(4037);var wt=a(532);var jt=new V["b"]("files");var It={closeModal:E["noop"],title:"",gdriveAppUrl:"",featureComposeFlow:false,errorType:""};var Tt=function(e){g()(t,e);function t(){l()(this,t);return p()(this,h()(t).apply(this,arguments))}u()(t,[{key:"renderCorrectError",value:function e(){var t=this.props.errorType;if(t===wt["a"].AUTH_REQUIRED)return this.renderAuthRequiredError();if(t===wt["a"].FILENAME_TOO_LONG)return this.renderFileNameTooLongError();if(t===wt["a"].UNIDENTIFIED_EXTERNAL_URL||t===wt["a"].FILE_TYPE_HAS_NO_HANDLER)return this.renderUnsupportedFileTypeError();return jt.t("Hmm, something went wrong. Try again?")}},{key:"renderUnsupportedFileTypeError",value:function e(){return jt.t("We don\u2019t currently support importing that type of Google Drive file, but we included the link so that others can access it.")}},{key:"renderFileNameTooLongError",value:function e(){return jt.t("Sorry! The name of that file is too long for us to handle. Please try importing a file with a shorter filename.")}},{key:"renderAuthRequiredError",value:function e(){var t=this.props,a=t.gdriveAppUrl,r=t.featureComposeFlow;var n=jt.t("Hmm, something went wrong. Try again?");r&&(n=jt.rt("Looks like you\u2019re trying to add a Google Drive file \u2014 first you\u2019ll need to connect <a-connect>Google Drive to Slack</a-connect>. Once your account is connected, you\u2019ll be able to easily share files, see file previews, and even find your files later as you search in Slack. <a-learn>Learn more about using Google Drive in Slack</a-learn>.",null,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.key,r=e.text,n=e.tag;switch(n){case"a-learn":case"a-connect":return y.a.createElement(L["a"],{href:a,key:t},r);default:return r}}));return n}},{key:"render",value:function e(){var t=this.props.title;return y.a.createElement(Be["a"],{centered:true,closeModal:this.props.closeModal},y.a.createElement(qe["a"],null,y.a.createElement(Ge["a"],{title:t||jt.t("That didn\u2019t work",{fallbackHash:"c8c121f2de4a31088bfbbcc938db36cc74b754cc",fallbackHashNs:"invite"})})),y.a.createElement(He["a"],null,y.a.createElement(We["a"],null,this.renderCorrectError())),y.a.createElement(Ve["a"],null,y.a.createElement(Ke["a"],null,y.a.createElement(ze["d"],{type:"primary",onClick:this.props.closeModal,autoFocus:true},jt.t("OK")))))}}]);return t}(_["PureComponent"]);Tt.displayName="GoogleDriveErrorModals";Tt.defaultProps=It;var At=function e(t){return{closeModal:function e(){return t(ee["closeModal"].apply(void 0,arguments))}}};var Nt=function e(t){return{featureComposeFlow:Object(Pe["g"])(t)}};var Pt=Object(k["connect"])(Nt,At)(Tt);function Mt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function Dt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Mt(Object(a),true).forEach(function(t){s()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Mt(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var xt=function e(t){var a=y.a.createElement(Pt);t(Object(ee["openModal"])({element:a,name:"default-error-modal-google-drive"}))};var Rt=function e(t,a,r,n){var i=y.a.createElement(Pt,{errorType:wt["a"].FILE_TYPE_HAS_NO_HANDLER});var s=Object(xe["a"])(a,r);var o=Object(Me["a"])({viewContext:De["MESSAGE_CONTAINERS"].COMPOSER_VIEW,channelId:s});o.focus();o.setCursorAtEnd();o.insertContentsAtCursor({contents:(new Ae.a).insert("\n\n"+n)});t(Object(ee["openModal"])({element:i,name:"unsupported-file-type-error-modal-google-drive"}))};var Ft=function e(t){var a=y.a.createElement(Pt,{errorType:wt["a"].FILENAME_TOO_LONG});t(Object(ee["openModal"])({element:a,name:"filename-too-long-error-modal-google-drive"}))};var Lt=function e(t,a){var r=Object(St["b"])(a());var n=y.a.createElement(Pt,{errorType:wt["a"].AUTH_REQUIRED,gdriveAppUrl:r});t(Object(ee["openModal"])({element:n,name:"auth-required-error-modal-google-drive"}))};var Ut=Object(X["b"])("Open a window to pick a GDrive file in the composer page (drafts)",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.draftId,n=a.metadata,i=a.reason;var o=t();var l=Object(pe["b"])(o);var c=location.origin+"/files/import/gdrive?team="+l;return fetch(c,{cache:"no-store",mode:"same-origin",credentials:"same-origin"}).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.status;if(403===t)throw new Error(wt["a"].AUTH_REQUIRED)}).then(function(){return e(Object(he["a"])({url:c,windowFeatures:{height:675}}))}).then(function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=a.chosen_files;var l=Date.now();var c=e(at({draftId:r,chosenFiles:o}));return Promise.map(c,function(a){e(Se({draftId:r,gdriveFile:a}));return e(Object(Ne["o"])({link:a.url,reason:i||"open-gdrive-file-picker"})).then(function(i){var o;var c=Object(Pe["d"])(t(),r);var u=i.file;var d=u.id;var p=Object(K["a"])({getState:t});var m=Object(Ue["i"])(c);m&&-1===m.indexOf(d)&&e(Object(Le["g"])(Dt({},c,{files:[].concat(Oe()(m),[d])})));e(Object(ke["c"])({pendingFileId:a.id}));e(Object(Ee["c"])({draftId:r,pendingFileId:a.id}));p.track(W["EventId"].FILE_COMPLETE_UPLOAD_SUCCESS,(o={},s()(o,W["CoreKeys"].type,W["FileUploadType"].EXTERNAL),s()(o,W["CoreKeys"].duration,Date.now()-l),s()(o,W["CoreKeys"].has_upload_message,false),s()(o,W["CoreKeys"].file_count,1),s()(o,W["CoreKeys"].retry_count,0),s()(o,W["CoreKeys"].upload_size,a.sizeBytes?a.sizeBytes:0),s()(o,W["CoreKeys"].retry_reason,""),s()(o,W["CoreKeys"].did_disconnect_during_upload,false),s()(o,W["CoreKeys"].file_upload_action,n&&n.fileUploadAction),s()(o,W["CoreKeys"].file_upload_src,n&&n.fileUploadSrc),o))}).catch(function(t){e(Object(ke["c"])({pendingFileId:a.id}));e(Object(Ee["c"])({draftId:r,pendingFileId:a.id}));throw t})})}).catch(function(a){var n=a&&(a.data&&a.data.error||a.message);var i=Object(Pe["d"])(t(),r);if(n===wt["a"].FILENAME_TOO_LONG)return Ft(e);var s=[wt["a"].FILE_TYPE_HAS_NO_HANDLER,wt["a"].UNIDENTIFIED_EXTERNAL_URL];if(s.includes(n)&&a.args&&a.args.link)return Rt(e,o,i,a.args.link);if(n===wt["a"].AUTH_REQUIRED)return Lt(e,t);Object(z["a"])({getState:t}).error(wt["b"],a);return xt(e)})});Ut.meta={name:"openGdriveFilePickerForDrafts",key:"actionsCloudFilePickersOpenGdriveFilePickerForDraftsOpenGdriveFilePickerForDrafts",description:"Open a window to pick a GDrive file in the composer page (drafts)"};var Bt=Ut;var qt=a(819);var Gt=a(1424);var Ht=a(91);var Wt="OneDrive_plus_button_import_failure";var Vt={AUTH_REQUIRED:"auth_required",ONENOTE_NOT_SUPPORTED:"onenote_not_supported",POPUP_BLOCKED:"popupOpen",BAD_RESPONSE:"badResponse",GENERIC:"defaultError"};var Kt=["auth_required","onenote_not_supported","popupOpen","badResponse","defaultError"];var zt=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!t.data)return t.message||"Data not OK";if(t.method&&"files.uploadExternal"===t.method&&t.data.error)return t.data.error;if(t.data.method&&"onedrive_picker"===t.data.method&&t.data.error_code)return t.data.error_code;return t.message||"Data not OK"};var Qt=new V["b"]("files");var Yt={channelId:O["default"].string.isRequired,threadTs:O["default"].string,metadata:O["default"].shape({fileUploadAction:O["default"].oneOfType([O["default"].number,O["default"].string]),fileUploadSrc:O["default"].oneOfType([O["default"].number,O["default"].string])}),reason:O["default"].string};var Jt=function e(t){var a=Object(x["d"])(t);return Object(R["getTeamUrl"])(a,N["isDev"]?"apps/A061CBSP3":"apps/A53TM6XA9")};var Xt=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.state,r=t.channelId,n=t.threadTs,i=t.reason,s=t.link;if(Object(w["a"])(a,"onedrive_app_installed"))return Object(qt["a"])({channelId:r,text:s,shouldBroadcast:false});return Object(Ne["o"])({channels:r,threadTs:n,link:s,reason:i||"open-onedrive-file-picker"})};var Zt=Object(X["b"])("Open a window to pick a OneDrive file",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelId,n=a.threadTs,i=a.metadata,o=a.reason;var l=t();var c=Object(pe["b"])(l);var u=location.origin+"/files/import/onedrive?team="+c+(N["isJsPath"]?"&js_path=1":"");if(N["isDev"]&&Object(w["a"])(l,"onedrive_app_installed")){var d=Object(N["getEnvironment"])().envSubdomain;"dev"===d||"dev6"===d||Object(Ht["error"])("The OneDrive picker for the OneDrive v2 app won't work in dev environments other than dev-main or dev6. If you are doing active development, please attach to dev6.")}return fetch(u,{cache:"no-store",mode:"same-origin",credentials:"same-origin"}).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.status;if(403===t)throw new Error(Vt.AUTH_REQUIRED)}).then(function(){return e(Object(he["a"])({url:u,hidden:true}))}).then(function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=a.chosen_files;var c=Date.now();return Promise.map(l,function(a){return e(Xt({state:t(),channelId:r,threadTs:n,reason:o,link:a})).then(function(){var e;var a=Object(K["a"])({getState:t});a.track(W["EventId"].FILE_COMPLETE_UPLOAD_SUCCESS,(e={},s()(e,W["CoreKeys"].type,W["FileUploadType"].EXTERNAL),s()(e,W["CoreKeys"].duration,Date.now()-c),s()(e,W["CoreKeys"].has_upload_message,false),s()(e,W["CoreKeys"].file_count,1),s()(e,W["CoreKeys"].retry_count,0),s()(e,W["CoreKeys"].upload_size,0),s()(e,W["CoreKeys"].retry_reason,""),s()(e,W["CoreKeys"].did_disconnect_during_upload,false),s()(e,W["CoreKeys"].file_upload_action,i&&i.fileUploadAction),s()(e,W["CoreKeys"].file_upload_src,i&&i.fileUploadSrc),e))}).catch(function(e){e.subtype="files.uploadExternal";throw e})})}).catch(function(a){var i=function t(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=a.text,s=a.ephemeralType;return e(Object(de["addOrFlashEphemeralBotMsg"])({ephemeralType:s||de["EphemeralTypes"].onedriveSdkError,message:{channel:r,thread_ts:n,slackbot_feels:"sad_surprise",text:i||Qt.t("Darn, that didn\u2019t work. Try again or <https://my.slack.com/help/requests/new|contact us> if it\u2019s still not working.")}}))};var s=zt(a);if(s===Vt.AUTH_REQUIRED)return i({text:Qt.t("Looks like you\u2019re trying to add a OneDrive file \u2014 first you\u2019ll need to connect <{url}|OneDrive to Slack>.\n\n Once your account is connected, you\u2019ll be able to easily share files, see file previews, and even find your files later as you search in Slack. <{url}|Learn more about using OneDrive in Slack>.",{url:Jt(t())})});if(s===Vt.ONENOTE_NOT_SUPPORTED)return i({text:Qt.t("It seems like we\u2019re not able to import OneNote notebooks.")});if(s===Vt.POPUP_BLOCKED)return e(Object(Gt["updateEnablePopupsBannerVisibility"])(true));if(s===Vt.BAD_RESPONSE){var o=a&&a.data&&a.data.error||s;a.message=o;Object(z["a"])({getState:t}).error(Wt,a);return i({text:Qt.t("Sorry, something went wrong. Please confirm that your OneDrive account has been fully set up and try again.\nIf the problem persists, please let us know by contacting <mailto:feedback@slack.com|feedback@slack.com>")})}a.message=s;Object(z["a"])({getState:t}).error(Wt,a,a.data&&a.data.error);return i()})});Zt.meta={name:"openOneDriveFilePicker",key:"actionsCloudFilePickersOpenOnedriveFilePickerOpenOneDriveFilePicker",description:"Open a window to pick a OneDrive file"};Zt.propTypes=Yt;var $t=Zt;var ea=a(168);var ta=new V["b"]("files");var aa={closeModal:E["noop"],onedriveAppUrl:"",featureComposeFlow:false,errorType:""};var ra=function(e){g()(t,e);function t(){l()(this,t);return p()(this,h()(t).apply(this,arguments))}u()(t,[{key:"renderCorrectError",value:function e(){var t=this.props,a=t.errorType,r=t.featureComposeFlow;if(a===Vt.AUTH_REQUIRED)return this.renderAuthRequiredError();if(a===Vt.ONENOTE_NOT_SUPPORTED)return this.renderOneNoteNotSupportedError();if(a===Vt.BAD_RESPONSE)return this.renderBadResponseError();var n=ta.t("Hmm, something went wrong. Try again?");r&&(n=ta.rt("Darn, that didn\u2019t work. Try again or <a-contact>contact us</a-contact> if it\u2019s still not working.",null,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.key,a=e.text;return y.a.createElement(L["a"],{href:"https://my.slack.com/help/requests/new",key:t},a)}));return n}},{key:"renderBadResponseError",value:function e(){var t=this.props.featureComposeFlow;var a=ta.t("Hmm, something went wrong. Try again?");t&&(a=ta.rt("Sorry, something went wrong. Please confirm that your OneDrive account has been fully set up and try again. If the problem persists, please let us know by contacting <a-mail>feedback@slack.com</a-mail>",null,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.key,a=e.text;return y.a.createElement(L["a"],{href:"mailto:feedback@slack.com",key:t},a)}));return a}},{key:"renderOneNoteNotSupportedError",value:function e(){return ta.t("It seems like we\u2019re not able to import OneNote notebooks.")}},{key:"renderAuthRequiredError",value:function e(){var t=this.props,a=t.featureComposeFlow,r=t.onedriveAppUrl;var n=ta.t("Hmm, something went wrong. Try again?");a&&(n=ta.rt("Looks like you\u2019re trying to add a OneDrive file \u2014 first you\u2019ll need to connect <a-connect>OneDrive to Slack</a-connect>. Once your account is connected, you\u2019ll be able to easily share files, see file previews, and even find your files later as you search in Slack. <a-learn>Learn more about using OneDrive in Slack</a-learn>.",null,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.key,a=e.text,n=e.tag;switch(n){case"a-learn":case"a-connect":return y.a.createElement(L["a"],{href:r,key:t},a);default:return a}}));return n}},{key:"render",value:function e(){return y.a.createElement(Be["a"],{centered:true,closeModal:this.props.closeModal},y.a.createElement(qe["a"],null,y.a.createElement(Ge["a"],{title:ta.t("That didn\u2019t work",{fallbackHash:"c8c121f2de4a31088bfbbcc938db36cc74b754cc",fallbackHashNs:"invite"})})),y.a.createElement(He["a"],null,y.a.createElement(We["a"],null,this.renderCorrectError())),y.a.createElement(Ve["a"],null,y.a.createElement(Ke["a"],null,y.a.createElement(ze["d"],{type:"primary",onClick:this.props.closeModal,autoFocus:true},ta.t("OK")))))}}]);return t}(_["PureComponent"]);ra.displayName="OnedriveErrorModals";ra.defaultProps=aa;var na=function e(t){return{closeModal:function e(){return t(ee["closeModal"].apply(void 0,arguments))}}};var ia=function e(t){return{featureComposeFlow:Object(Pe["g"])(t)}};var sa=Object(k["connect"])(ia,na)(ra);function oa(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function la(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?oa(Object(a),true).forEach(function(t){s()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):oa(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var ca=function e(){var t;var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=a.oneDriveFile,n=a.getState,i=a.draftId,o=a.dispatch,l=a.pendingFileId,c=a.startTime,u=a.metadata;var d=Object(Pe["d"])(n(),i);var p=r.file;var m=p.id;var h=Object(Ue["i"])(d);h&&-1===h.indexOf(m)&&o(Object(Le["g"])(la({},d,{files:[].concat(Oe()(h),[m])})));Ie({dispatch:o,pendingFileId:l,draftId:i});var v=Object(K["a"])({getState:n});v.track(W["EventId"].FILE_COMPLETE_UPLOAD_SUCCESS,(t={},s()(t,W["CoreKeys"].type,W["FileUploadType"].EXTERNAL),s()(t,W["CoreKeys"].duration,Date.now()-c),s()(t,W["CoreKeys"].has_upload_message,false),s()(t,W["CoreKeys"].file_count,1),s()(t,W["CoreKeys"].retry_count,0),s()(t,W["CoreKeys"].upload_size,0),s()(t,W["CoreKeys"].retry_reason,""),s()(t,W["CoreKeys"].did_disconnect_during_upload,false),s()(t,W["CoreKeys"].file_upload_action,u&&u.fileUploadAction),s()(t,W["CoreKeys"].file_upload_src,u&&u.fileUploadSrc),t))};var ua=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.dispatch,r=t.errorType,n=t.onedriveAppUrl;var i=y.a.createElement(sa,{errorType:r,onedriveAppUrl:n});a(Object(ee["openModal"])({element:i,name:"auth-required-error-modal-onedrive"}))};var da=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.dispatch,r=t.errorType;var n=y.a.createElement(sa,{errorType:r});a(Object(ee["openModal"])({element:n,name:"onenote-not-supported-error-modal-onedrive"}))};var pa=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.dispatch,r=t.errorType,n=t.err,i=t.message,s=t.getState;var o=n&&n.data&&n.data.error||i;n.message=o;Object(z["a"])({getState:s}).error(Wt,n);var l=y.a.createElement(sa,{errorType:r});a(Object(ee["openModal"])({element:l,name:"bad-response-error-modal-onedrive"}))};var ma=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.dispatch,r=t.errorType;var n=y.a.createElement(sa,{errorType:r});a(Object(ee["openModal"])({element:n,name:"default-error-modal-onedrive"}))};var ha=Object(X["b"])("Open a window to pick a OneDrive file in the composer page (for drafts)",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.draftId,n=a.metadata,i=a.reason;var s=t();var o=Object(pe["b"])(s);var l=Object(w["a"])(s,"onedrive_app_installed");var c=location.origin+"/files/import/onedrive?team="+o+(N["isJsPath"]?"&js_path=1":"");if(N["isDev"]&&l){var u=Object(N["getEnvironment"])().envSubdomain;"dev"===u||"dev6"===u||Object(Ht["error"])("The OneDrive picker for the OneDrive v2 app won't work in dev environments other than dev-main or dev6. If you are doing active development, please attach to dev6.")}return fetch(c,{cache:"no-store",mode:"same-origin",credentials:"same-origin"}).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.status;if(403===t)throw new Error(Vt.AUTH_REQUIRED)}).then(function(){return e(Object(he["a"])({url:c,hidden:true}))}).then(function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=a.chosen_files;var o=Date.now();var c=e(at({draftId:r,chosenFiles:s,remoteFilesAppInstalled:l}));return Promise.map(c,function(a){var s=Object(ea["a"])();e(Object(ke["b"])({files:[{id:s}]}));e(Object(Ee["b"])({draftId:r,pendingFileId:s}));return e(Fe({draftId:r,linkToThirdPartyFile:a,remoteFilesAppEnabled:l,reason:i})).then(function(a){if(l)return Ie({dispatch:e,pendingFileId:s,draftId:r});return ca({oneDriveFile:a,getState:t,draftId:r,dispatch:e,pendingFileId:s,startTime:o,metadata:n})}).catch(function(t){Ie({dispatch:e,pendingFileId:s,draftId:r});t.subtype="files.uploadExternal";throw t})})}).catch(function(a){var r=zt(a);if(r===Vt.AUTH_REQUIRED)return ua({dispatch:e,errorType:Vt.AUTH_REQUIRED,onedriveAppUrl:Jt(t())});if(r===Vt.ONENOTE_NOT_SUPPORTED)return da({dispatch:e,errorType:Vt.ONENOTE_NOT_SUPPORTED});if(r===Vt.POPUP_BLOCKED)return e(Object(Gt["updateEnablePopupsBannerVisibility"])(true));if(r===Vt.BAD_RESPONSE)return pa({dispatch:e,errorType:Vt.BAD_RESPONSE,err:a,message:r,getState:t});a.message=r;Object(z["a"])({getState:t}).error(Wt,a,a.data&&a.data.error);return ma({dispatch:e,errorType:Vt.GENERIC})})});ha.meta={name:"openOneDriveFilePickerForDrafts",key:"actionsCloudFilePickersOpenOnedriveFilePickerForDraftsOpenOneDriveFilePickerForDrafts",description:"Open a window to pick a OneDrive file in the composer page (for drafts)"};var va=ha;var fa=a(286);var ba=a(13);var ga=a.n(ba);var _a=a(86);var ya=a(914);var Oa=a(28);var ka=Object(Oa["b"])("TS.client.ui.files.backButtonOnClick");var Ea=Object(Oa["b"])("TS.client.ui.files.chooseFile");var Ca=a(34);var Sa=a(89);var wa=a(457);var ja=a(783);var Ia=a(1450);var Ta=a(1451);var Aa=a(3729);var Na=a(1994);function Pa(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));a.push.apply(a,r)}return a}function Ma(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Pa(Object(a),true).forEach(function(t){s()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Pa(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Da=new V["b"]("menu_file");var xa=Object(Ta["a"])(Ia["a"]);var Ra={threadTs:void 0,viewContext:void 0,files:[],filetype:"",currentUser:"",user:false,scrollmark:void 0,fetchFilesPre:E["noop"],fetchFilesPost:E["noop"],saveScrollmark:E["noop"],setFiletype:E["noop"],setUser:E["noop"],getRecentFilesForUser:E["noop"],closeModal:E["noop"],openShareDialog:E["noop"],isInEnforceFileLimitTreatment:false,hiddenFileInputRef:void 0,showUpload:false,isLoading:O["default"].bool,setisLoading:O["default"].func};var Fa=function(e){g()(t,e);function t(e){var a;l()(this,t);a=p()(this,h()(t).call(this,e));Object(C["a"])(f()(a),["onFileClick","onScroll","fetchPre","fetchPost","fetchAround","renderRow","renderFile","clogPricingLinkClick","renderBody","isEmpty","onModalCancel","renderList","renderDynamicList","handleFileTypeChange","handleYourFilesClick","handleYourWorkspaceClick","fetchAllFiles","selectFileFromComputer"]);a.requestPre=null;a.requestPost=null;a.reachedStart=false;a.reachedEnd=false;a.keys=null;a.requestAll=null;a.layout=new ja["a"];a.list=y.a.createRef();return a}u()(t,[{key:"componentDidMount",value:function e(){var t=this.props,a=t.scrollmark,r=t.clogger,n=t.user;if(a){var i=a.key,s=a.offset;this.layout.setAnchor(i,s);this.props.saveScrollmark(null)}if(n){var o={types:this.props.filetype};this.fetchAllFiles(o)}this.shouldShowStorageWarningBanner()&&r.track(W["EventId"].GROWTH_PRICING,{contexts:{ui_context:{action:W["UiAction"].IMPRESSION,step:W["UiStep"].FILE_PANE,ui_component:W["UiComponent"].FILE_STORAGE_LIMIT_BANNER}}})}},{key:"UNSAFE_componentWillReceiveProps",value:function e(t){var a=this.props,r=a.filetype,n=a.user;if(t.filetype!==r||t.user!==n){this.requestPre&&this.requestPre.cancel();this.requestPost&&this.requestPost.cancel();this.requestPre=null;this.requestPost=null;this.reachedStart=false;this.reachedEnd=false;this.layout&&this.layout.setAnchor(false)}}},{key:"componentWillUnmount",value:function e(){this.props.setFiletype("");this.requestAll&&this.requestAll.cancel()}},{key:"onFileClick",value:function e(t){var a=t.id;var r=this.list.current;if(!r)return;if(!a)return;var n=this.props,i=n.user,s=n.clogger;var o=i?W["EventId"].OMNIPICKER_DIALOG_SHARE_YOUR_RECENT_FILE:W["EventId"].OMNIPICKER_DIALOG_SHARE_WORKSPACE_FILE;this.props.saveScrollmark({key:a,offset:this.layout.getOffsetForKey(a)-r.getScrollTop()});this.props.openShareDialog({fileId:a,showFileType:true});s.track(o,{contexts:{ui_context:{action:W["UiAction"].CLICK,step:W["UiStep"].OMNIPICKER_DIALOG}}})}},{key:"onModalCancel",value:function e(){var t=this.props.clogger;this.props.closeModal();t.track(W["EventId"].OMNIPICKER_DIALOG_CLOSE_DIALOG,{contexts:{ui_context:{action:W["UiAction"].CLICK,step:W["UiStep"].OMNIPICKER_DIALOG}}})}},{key:"onScroll",value:function e(){this.layout.anchor&&this.layout.setAnchor(false)}},{key:"clogPricingLinkClick",value:function e(){this.props.clogger.track(W["EventId"].GROWTH_PRICING,{contexts:{ui_context:{action:W["UiAction"].CLICK,step:W["UiStep"].OMNIPICKER_DIALOG,ui_element:W["UiElement"].PRICING_LINK,ui_component:W["UiComponent"].FILE_STORAGE_LIMIT_BANNER}}})}},{key:"fetchAllFiles",value:function e(t){this.props.setisLoading(true);this.requestAll=this.props.getRecentFilesForUser(Ma({user:this.props.currentUser,reason:"get-recent-files",count:1e3},t))}},{key:"fetchAround",value:function e(){if(this.requestPre&&this.requestPost)return false;if(this.reachedEnd)return this.fetchPre();if(this.reachedStart)return this.fetchPost();return this.fetchPre()}},{key:"fetchPost",value:function e(){var t=this;if(this.requestPost)return false;if(this.reachedEnd)return false;var a=this.props.filetype;var r={types:a};this.requestPost=this.props.fetchFilesPost(r);return this.requestPost.then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.paging;var r=a.page,n=a.pages;r>=n&&(t.reachedEnd=true)}).finally(function(){t.requestPost=null})}},{key:"fetchPre",value:function e(){var t=this;if(this.requestPre)return false;if(this.reachedStart)return false;var a=this.props.filetype;var r={types:a};this.requestPre=this.props.fetchFilesPre(r);this.reachedStart||this.props.setisLoading(true);return this.requestPre.then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.paging;var r=a.page;if(1===r){t.reachedStart=true;t.props.setisLoading(false)}}).finally(function(){t.requestPre=null})}},{key:"handleFileTypeChange",value:function e(t){this.props.setFiletype(t);if(this.props.user){var a={types:t};this.fetchAllFiles(a)}}},{key:"handleYourFilesClick",value:function e(){var t=this.props,a=t.filetype,r=t.clogger;this.props.setUser(true);var n={types:a};this.fetchAllFiles(n);r.track(W["EventId"].OMNIPICKER_DIALOG_VIEW_YOUR_FILES,{contexts:{ui_context:{action:W["UiAction"].CLICK,step:W["UiStep"].OMNIPICKER_DIALOG}}})}},{key:"handleYourWorkspaceClick",value:function e(){var t=this.props.clogger;this.props.setUser(false);t.track(W["EventId"].OMNIPICKER_DIALOG_VIEW_WORKSPACE_FILES,{contexts:{ui_context:{action:W["UiAction"].CLICK,step:W["UiStep"].OMNIPICKER_DIALOG}}})}},{key:"isEmpty",value:function e(){var t=this.props.user;return t?!this.props.files.length:!this.props.files.length&&this.reachedStart&&this.reachedEnd}},{key:"selectFileFromComputer",value:function e(){var t=this.props,a=t.channelId,r=t.threadTs,n=t.viewContext,i=t.hiddenFileInputRef,s=t.clogger,o=t.logger;if(i&&i.current){i.current.click();this.props.closeModal()}else Object(Ca["a"])()?o.error("MSG_INPUT_FILE_BTN","Missing hidden input"):Ea(a,r,n);s.track(W["EventId"].OMNIPICKER_DIALOG_UPLOAD_FILE,{contexts:{ui_context:{action:W["UiAction"].CLICK,step:W["UiStep"].OMNIPICKER_DIALOG}}})}},{key:"shouldShowStorageWarningBanner",value:function e(){return this.props.isInEnforceFileLimitTreatment}},{key:"renderBody",value:function e(){var t=this.props,a=t.user,r=t.files,n=t.isLoading;var i=r.map(function(e){return e.id});this.keys=Oe()(i);a||this.reachedEnd||this.keys.push("Loading"+this.keys.length);this.isEmpty()&&this.keys.push("Placeholder");return n?y.a.createElement("div",{className:"p-omnipicker_dialog__loading_spinner"},y.a.createElement(Sa["a"],{size:"jumbo"})):y.a.createElement("div",{className:"p-omnipicker_dialog__list_content","data-qa":"omnipicker_dialog_list"},y.a.createElement(y.a.Fragment,null,this.shouldShowStorageWarningBanner()&&this.renderStorageWarningBanner(),a?this.renderList():this.renderDynamicList()))}},{key:"renderDynamicList",value:function e(){var t=this;return y.a.createElement(fa["a"],null,function(e){var a=e.width,r=e.height;return y.a.createElement(wa["a"],{height:r,width:a,keys:t.keys,layout:t.layout,rowRenderer:t.renderRow,onScroll:t.onScroll,ref:t.list,loadAround:t.fetchAround,loadPre:t.fetchPre,loadPost:t.fetchPost,onItemTabWithin:t.onItemTabWithin,onItemClick:t.onFileClick})})}},{key:"renderFile",value:function e(t){var a=this.props.files[t]&&this.props.files[t].id;if(!a)return null;var r=t===this.props.files.length-1;var n=ga()("p-omnipicker_dialog__file",{"p-omnipicker_dialog__file--last":r});return y.a.createElement(xa,{fileId:a,className:n,showActions:false,"data-qa":"test-file",fullWidth:true})}},{key:"renderList",value:function e(){var t=this;return y.a.createElement(fa["a"],null,function(e){var a=e.width,r=e.height;return y.a.createElement(ya["b"],{height:r,width:a,keys:t.keys,ref:t.list,layout:t.layout,onScroll:t.onScroll,rowRenderer:t.renderRow,onItemClick:t.onFileClick})})}},{key:"renderRow",value:function e(t){var a=this.keys[t];if(!a)return null;switch(a[0]){case"L":return y.a.createElement("div",{className:"p-omnipicker_dialog__list--loading"},Da.t("Loading\u2026"));case"P":return y.a.createElement("div",{className:"p-omnipicker_dialog__list--empty"},Da.t("No matching files were found."));default:return this.renderFile(t)}}},{key:"renderStorageWarningBanner",value:function e(){var t=this;var a=new V["b"]("files");return y.a.createElement("div",{className:"p-omnipicker_dialog__storage-warning-container"},y.a.createElement("div",{className:"display_flex"},y.a.createElement(q["b"],{className:"p-message_limit_banner__graphic",type:"eye-closed"}),y.a.createElement("div",null,y.a.createElement("span",null,a.rt("Some additional results aren\u2019t visible because your workspace has passed the free plan\u2019s 5 GB storage limit. <a>See paid plans</a>",null,function(e){var a=e.text;return y.a.createElement(L["a"],{href:Object(_a["j"])({entryPoint:"omnipicker_dialog"}),onClick:t.clogPricingLinkClick,target:"new","data-qa":"file-flexpane__pricing-link"},a)})))))}},{key:"render",value:function e(){var t=this.props,a=t.filetype,r=t.user,n=t.showUpload;var i=Da.t("Your recent files");var s=Da.t("Workspace files");var o=r?i:s;return y.a.createElement(Be["a"],{className:"p-omnipicker_dialog",fullscreen:true,maxWidth:"950px",showCloseButton:false,closeModal:this.props.closeModal},y.a.createElement(qe["a"],{className:"p-omnipicker_dialog__header"},y.a.createElement(Ge["a"],{id:"unshareConfirmPost__title-bar",title:"Browse","data-qa":"dialog_header"}),y.a.createElement("div",{className:"p-omnipicker_dialog__header--selector"},y.a.createElement("h3",null,o),y.a.createElement(Na["a"],{filetype:a,onChange:this.handleFileTypeChange}))),y.a.createElement("div",{className:"p-omnipicker_dialog__content"},y.a.createElement("div",{className:"p-omnipicker_dialog__menu"},y.a.createElement(G["f"],null,y.a.createElement(G["b"],{"data-qa":"view_your_files_menu_item",label:Da.t("Your files"),disabled:r,className:r?"c-menu_item__button__selected":"",icon:y.a.createElement(q["b"],{type:"user"}),onSelected:this.handleYourFilesClick}),y.a.createElement(G["b"],{"data-qa":"view_your_workspace_files_menu_item",label:Da.t("Your workspace"),disabled:!r,className:r?"":"c-menu_item__button__selected",icon:y.a.createElement(q["b"],{type:"slack"}),onSelected:this.handleYourWorkspaceClick}),n&&y.a.createElement(G["b"],{"data-qa":"add_file_from_computer_menu_item",label:Da.t("Your computer"),icon:y.a.createElement(q["b"],{type:"laptop"}),onSelected:this.selectFileFromComputer}))),y.a.createElement("div",{className:"p-omnipicker_dialog__list"},this.renderBody())),y.a.createElement(Ve["a"],{"data-qa":"dialog_footer"},y.a.createElement(Ke["a"],null,y.a.createElement(ze["d"],{type:"outline",onClick:this.onModalCancel,"data-qa":"dialog_cancel"},"Cancel"))))}}]);return t}(_["PureComponent"]);Fa.displayName="OmniPickerDialog";Fa.defaultProps=Ra;var La=function e(t){return{files:Object(B["getDialogFiles"])(t),scrollmark:Object(B["getScrollmark"])(t),filetype:Object(B["getFiletype"])(t),clogger:Object(K["a"])({state:t}),logger:Object(z["a"])({state:t}),currentUser:Object(S["getCurrentUserId"])(t),user:Object(B["getUser"])(t),isLoading:Object(B["getisLoading"])(t)}};var Ua={fetchFilesPre:function e(){return B["fetchFilesPre"].apply(void 0,arguments)},fetchFilesPost:function e(){return B["fetchFilesPost"].apply(void 0,arguments)},saveScrollmark:function e(){return B["saveScrollmark"].apply(void 0,arguments)},setFiletype:function e(){return B["setFiletype"].apply(void 0,arguments)},closeModal:function e(){return ee["closeModal"].apply(void 0,arguments)},getRecentFilesForUser:function e(){return B["listAndUpsertAllFiles"].apply(void 0,arguments)},openShareDialog:function e(){return U["a"].apply(void 0,arguments)},setUser:function e(){return B["setUser"].apply(void 0,arguments)},setisLoading:function e(){return B["setisLoading"].apply(void 0,arguments)}};var Ba=Object(k["connect"])(La,Ua)(Fa);var qa=Object(X["b"])("Opens the omni-picker file dialog",function(e,t,a){e(Object(ee["openModal"])({element:y.a.createElement(Ba,a)}))});qa.meta={name:"openOmniPickerDialog",key:"actionsOpenOmnipickerDialogOpenOmniPickerDialog",description:"Opens the omni-picker file dialog"};qa.propTypes={type:O["default"].string,displayType:O["default"].string,initialChannelId:O["default"].string};var Ga=qa;var Ha=a(90);var Wa=a(3731);var Va=new V["b"]("menu_file");var Ka={channelId:void 0,threadTs:void 0,viewContext:void 0,disableFileUploadsPref:void 0,menuProps:{},featureRecentFilesOmnipicker:false,featurePlusMenuAddAppsLink:false,hiddenFileInputRef:void 0,createDocPost:E["noop"],showBoxMenuItem:false,showDropboxMenuItem:false,boxAppInstalled:false,showGdriveMenuItem:false,showOneDriveMenuItem:false,hideCreateMenu:false,openSnippetDialog:E["noop"],openCreateGDocDialog:E["noop"],openBoxFilePicker:E["noop"],openBoxFilePickerForDrafts:E["noop"],openOnedriveFilePicker:E["noop"],openOneDriveFilePickerForDrafts:E["noop"],openDropboxFilePicker:E["noop"],openDropboxFilePickerForDrafts:E["noop"],openGdriveFilePicker:E["noop"],openGdriveFilePickerForDrafts:E["noop"],getRecentFilesForUser:E["noop"],openShareDialog:E["noop"],currentUser:void 0,recentFiles:[],openOmniPickerDialog:E["noop"],setUser:E["noop"],setfirstLoad:E["noop"],setisLoading:E["noop"],firstLoad:false,isLoading:false,isBoxAuthed:false,currentTeam:void 0,draftId:void 0,isComposerPage:false,isThreadsPage:false,setShouldOpenAppActionPicker:E["noop"],featureFilesInInput:false};var za="At06175UHW";var Qa="At0EFRCDPW";var Ya="A0F82E57C";var Ja="A06147X5W";var Xa=function(e){g()(t,e);function t(e){var a;l()(this,t);a=p()(this,h()(t).call(this,e));a.activeCloudServices=[];a.requestAll=null;Object(C["a"])(f()(a),["selectFileFromComputer","createDoc","createSnippet","createGDRiveDocument","createGDRiveSpreadsheet","createGDRivePresentation","renderCreateNewSubmenu","clogAddAppsClick","handleBoxFileProvider","handleDropboxFileProvider","handleGdriveFileProvider","handleOnedriveFileProvider","renderMultipleCloudServices","setRecentFiles","handleRecentFile","handleYourRecentFilesPicker","renderRecents","renderRecentsSection","openAppActionPopover","maybeRenderShortcutMovedNotice"]);return a}u()(t,[{key:"componentDidMount",value:function e(){var t=this.props.featureRecentFilesOmnipicker;if(!t)return;this.setRecentFiles()}},{key:"componentWillUnmount",value:function e(){this.requestAll&&this.requestAll.cancel()}},{key:"setRecentFiles",value:function e(){var t=this;var a=this.props,r=a.currentUser,n=a.firstLoad;this.props.setUser(true);n||this.props.setisLoading(true);this.requestAll=this.props.getRecentFilesForUser({user:r,reason:"get-recent-files",forMenu:true,count:1e3}).then(function(){n||t.props.setfirstLoad(true)})}},{key:"clogAddAppsClick",value:function e(){var t=this.props.clogger;t.track(W["EventId"].FILE_MENU_ADD_APPS,{contexts:{ui_context:{action:W["UiAction"].CLICK,step:W["UiStep"].FILE_MENU}}})}},{key:"createDoc",value:function e(){this.props.createDocPost()}},{key:"createGDRiveDocument",value:function e(){this.props.openCreateGDocDialog({type:"document",displayType:Va.t("Document"),initialChannelId:this.props.channelId,threadTs:this.props.threadTs});this.props.clogger.track("PFP_ACTION",{contexts:{growth:{action:"click",trigger:"plus_menu_subitem_gdrive_document"}}})}},{key:"createGDRivePresentation",value:function e(){this.props.openCreateGDocDialog({type:"presentation",displayType:Va.t("Presentation"),initialChannelId:this.props.channelId,threadTs:this.props.threadTs});this.props.clogger.track("PFP_ACTION",{contexts:{growth:{action:"click",trigger:"plus_menu_subitem_gdrive_presentation"}}})}},{key:"createGDRiveSpreadsheet",value:function e(){this.props.openCreateGDocDialog({type:"spreadsheet",displayType:Va.t("Spreadsheet"),initialChannelId:this.props.channelId,threadTs:this.props.threadTs});this.props.clogger.track("PFP_ACTION",{contexts:{growth:{action:"click",trigger:"plus_menu_subitem_gdrive_spreadsheet"}}})}},{key:"createSnippet",value:function e(){var t=this.props,a=t.clogger,r=t.channelId,n=t.viewContext,i=t.threadTs;a.track("PFP_ACTION",{contexts:{growth:{action:"click",trigger:"plus_menu_item_snippet"}}});var s=Object(Me["a"])({viewContext:n,channelId:r,threadTs:i});this.props.openSnippetDialog({initialText:s&&s.getDisplayValue?s.getDisplayValue():"",initialContents:s&&s.getContents?s.getContents():void 0,initialChannelId:r,threadTs:i,viewContext:n});s&&s.clear()}},{key:"handleBoxFileProvider",value:function e(){var t=this.props,a=t.clogger,r=t.channelId,n=t.threadTs,i=t.isBoxAuthed,o=t.boxAppInstalled,l=t.currentTeam,c=t.isComposerPage,u=t.draftId,d=t.featureFilesInInput;var p={fileUploadAction:W["FileUploadAction"].PLUS_MENU,fileUploadSrc:W["FileUploadSrc"].BOX};var m=N["isDev"]?Ja:Ya;if(!i&&o)return Object(D["d"])(Object(R["getTeamUrl"])(l,"/apps/"+m));a.track(W["EventId"].ATTACH_MENU,{contexts:{ui_context:s()({action:W["UiAction"].CLICK},W["UiContextKeys"].ui_properties,s()({},W["UiPropertiesKeys"].element_value,"box_opens"))}});if(c||d&&u)return this.props.openBoxFilePickerForDrafts({draftId:u,metadata:p,reason:"cloud-files-menu/composer/box"});return this.props.openBoxFilePicker({channelId:r,threadTs:n,metadata:p})}},{key:"handleDropboxFileProvider",value:function e(){var t=this.props,a=t.clogger,r=t.channelId,n=t.threadTs,i=t.isComposerPage,o=t.draftId,l=t.featureFilesInInput;var c={fileUploadAction:W["FileUploadAction"].PLUS_MENU,fileUploadSrc:W["FileUploadSrc"].DROPBOX};a.track(W["EventId"].ATTACH_MENU,{contexts:{ui_context:s()({action:W["UiAction"].CLICK},W["UiContextKeys"].ui_properties,s()({},W["UiPropertiesKeys"].element_value,"dropbox_opens"))}});if(i||l&&o)return this.props.openDropboxFilePickerForDrafts({draftId:o,metadata:c,reason:"cloud-files-menu/composer/dropbox"});return this.props.openDropboxFilePicker({channelId:r,threadTs:n,metadata:c})}},{key:"handleGdriveFileProvider",value:function e(){var t=this.props,a=t.clogger,r=t.channelId,n=t.threadTs,i=t.isComposerPage,o=t.draftId,l=t.featureFilesInInput;var c={fileUploadAction:W["FileUploadAction"].PLUS_MENU,fileUploadSrc:W["FileUploadSrc"].GOOGLE_DRIVE};a.track(W["EventId"].ATTACH_MENU,{contexts:{ui_context:s()({action:W["UiAction"].CLICK},W["UiContextKeys"].ui_properties,s()({},W["UiPropertiesKeys"].element_value,"gdrive_opens"))}});if(i||l&&o)return this.props.openGdriveFilePickerForDrafts({draftId:o,metadata:c,reason:"cloud-files-menu/composer/gdrive"});return this.props.openGdriveFilePicker({channelId:r,threadTs:n,metadata:c,reason:"cloud-files-menu/gdrive"})}},{key:"handleOnedriveFileProvider",value:function e(){var t=this.props,a=t.clogger,r=t.channelId,n=t.threadTs,i=t.isComposerPage,o=t.draftId,l=t.featureFilesInInput;var c={fileUploadAction:W["FileUploadAction"].PLUS_MENU,fileUploadSrc:W["FileUploadSrc"].ONEDRIVE};a.track(W["EventId"].ATTACH_MENU,{contexts:{ui_context:s()({action:W["UiAction"].CLICK},W["UiContextKeys"].ui_properties,s()({},W["UiPropertiesKeys"].element_value,"onedrive_opens"))}});if(i||l&&o)return this.props.openOneDriveFilePickerForDrafts({draftId:o,metadata:c,reason:"cloud-files-menu/composer/onedrive"});return this.props.openOnedriveFilePicker({channelId:r,threadTs:n,metadata:c,reason:"cloud-files-menu/onedrive"})}},{key:"handleRecentFile",value:function e(t){var a=this.props,r=a.clogger,n=a.viewContext,i=a.channelId,s=a.threadTs;var o=Object(Me["a"])({viewContext:n,channelId:i,threadTs:s});r.track(W["EventId"].FILE_MENU_SHARE_YOUR_RECENT_FILE,{contexts:{ui_context:{action:W["UiAction"].CLICK,step:W["UiStep"].FILE_MENU}}});this.props.openShareDialog({fileId:t.id,showFileType:true,initialText:o&&o.getDisplayValue?o.getDisplayValue():"",initialContents:o&&o.getContents?o.getContents():void 0})}},{key:"handleYourRecentFilesPicker",value:function e(t,a){var r=this.props,n=r.channelId,i=r.threadTs,s=r.viewContext,o=r.hiddenFileInputRef,l=r.disableFileUploadsPref,c=r.clogger;var u=a?W["EventId"].FILE_MENU_BROWSE_YOUR_FILES:W["EventId"].FILE_MENU_OPEN_WORKSPACE_FILES;var d="disable_all"!==l;this.props.setUser(a);this.props.openOmniPickerDialog({channelId:n,threadTs:i,viewContext:s,hiddenFileInputRef:o,showUpload:d});c.track(u,{contexts:{ui_context:{action:W["UiAction"].CLICK,step:W["UiStep"].FILE_MENU}}})}},{key:"selectFileFromComputer",value:function e(){var t=this.props,a=t.hiddenFileInputRef,r=t.clogger,n=t.logger;if(a&&a.current){a.current.click();r.track("PFP_ACTION",{contexts:{growth:{action:"click",trigger:"plus_menu_item_upload"}}})}else n.error("MSG_INPUT_FILE_BTN","Missing hidden input")}},{key:"openAppActionPopover",value:function e(){var t=this.props,a=t.viewContext,r=t.threadTs;this.props.clogger.track(W["EventId"].FILE_MENU_CREATE_MOVED_NOTICE,{contexts:{ui_context:{action:W["UiAction"].CLICK,step:W["UiStep"].FILE_MENU}}});this.props.setShouldOpenAppActionPicker({shouldOpen:true,viewContext:a,threadTs:r})}},{key:"maybeRenderShortcutMovedNotice",value:function e(){if(!this.props.hideCreateMenu)return null;return y.a.createElement(y.a.Fragment,null,y.a.createElement(G["b"],{"data-qa":"create_new_moved_notice",onSelected:this.openAppActionPopover,icon:y.a.createElement(q["b"],{type:"arrow-circle-o-right"}),className:"p-new_file_menu_source__create_new_moved_notice"},Va.t("Create new..."),y.a.createElement("div",{className:"c-menu_item__description"},Va.t("has moved to shortcuts"))),y.a.createElement(G["d"],null))}},{key:"renderCreateNew",value:function e(){var t=this.props,a=t.threadTs,r=t.isThreadsPage,n=t.showGdriveMenuItem;var i=this.renderCreateNewMenuItems();if(0===i.length)return null;var s=!a&&n?{top:-80}:void 0;return[1===i.length?i[0]:y.a.createElement(H["a"],{key:"create-new-submenu",label:Va.t("Create new..."),icon:y.a.createElement(q["b"],{type:"plus-circle"}),renderSubmenu:this.renderCreateNewSubmenu,"data-qa":"create_new_submenu",forceLeft:!!a&&!r,submenuStyle:s}),y.a.createElement(G["d"],{key:"create-new-separator"})]}},{key:"renderCreateNewMenuItems",value:function e(){var t=this.props,a=t.showGdriveMenuItem,r=t.threadTs,n=t.isOffline;var i=Va.t("Post");var s=!r&&y.a.createElement(G["b"],{key:"create-new-post",label:i,icon:y.a.createElement(q["b"],{type:"create-post"}),onSelected:this.createDoc,disabled:n,showOfflineIcon:n,"data-qa":"create_new_doc"});var o=y.a.createElement(G["b"],{key:"create-new-snippet",label:Va.t("Code or text snippet"),icon:y.a.createElement(q["b"],{type:"create-snippet"}),onSelected:this.createSnippet,disabled:n,showOfflineIcon:n,"data-qa":"create_new_snippet"});var l=a?[(o||s)&&y.a.createElement(G["d"],{key:"gdrive-separator"}),y.a.createElement(G["c"],{key:"gdrive-header",label:Va.t("Google Drive")}),y.a.createElement(G["b"],{key:"gdrive_doc",label:Va.t("Document"),icon:y.a.createElement(q["b"],{type:"google-drive",className:"p-new_file_menu__gdoc_icon"}),onSelected:this.createGDRiveDocument,disabled:n,showOfflineIcon:n,"data-qa":"google_doc_menu_item"}),y.a.createElement(G["b"],{key:"gdrive_sheet",label:Va.t("Spreadsheet"),icon:y.a.createElement(q["b"],{type:"google-drive",className:"p-new_file_menu__gsheet_icon"}),onSelected:this.createGDRiveSpreadsheet,disabled:n,showOfflineIcon:n,"data-qa":"google_sheet_menu_item"}),y.a.createElement(G["b"],{key:"gdrive_presentation",label:Va.t("Presentation"),icon:y.a.createElement(q["b"],{type:"google-drive",className:"p-new_file_menu__gpres_icon"}),onSelected:this.createGDRivePresentation,disabled:n,showOfflineIcon:n,"data-qa":"google_presentation_menu_item"})]:[];return Object(E["filter"])([s,o].concat(l))}},{key:"renderCreateNewSubmenu",value:function e(t){var a=this.props.menuProps;var r=this.renderCreateNewMenuItems();return y.a.createElement(G["f"],n()({},a,t,{"data-qa":"create_new_submenu"}),r)}},{key:"renderMultipleCloudServices",value:function e(){var t=this;var a=this.props,r=a.isOffline,n=a.disableFileUploadsPref,i=a.showBoxMenuItem,s=a.showDropboxMenuItem,o=a.showGdriveMenuItem,l=a.showOneDriveMenuItem,c=a.featurePlusMenuAddAppsLink;var u=i||s||o||l;var d="disable_all_except_images"===n;var p=u?Va.t("Add from\u2026"):Va.t("Add an image from\u2026");var m="/apps/category/"+(N["isDev"]?za:Qa);var h=c&&!this.activeCloudServices.length?Va.rt("Add a file from\u2026 <a>+ Add apps</a>",{},function(e){var a=e.text,r=e.key;return y.a.createElement(L["a"],{key:r,className:"c-menu_item__addrow",href:m,onClick:t.clogAddAppsClick},a)}):Va.t("Add a file from\u2026");var v={};var f=this.props;v.box=f.showBoxMenuItem;v.dropbox=f.showDropboxMenuItem;v.gdrive=f.showGdriveMenuItem;v.onedrive=f.showOneDriveMenuItem;var b=[{name:"box",props:{label:Va.t("Box"),icon:y.a.createElement(q["b"],{type:"box"}),onSelected:this.handleBoxFileProvider,dataQa:"box_picker_menu_item"}},{name:"dropbox",props:{label:Va.t("Dropbox"),icon:y.a.createElement(q["b"],{type:"dropbox"}),onSelected:this.handleDropboxFileProvider,dataQa:"dropbox_picker_menu_item"}},{name:"gdrive",props:{label:Va.t("Google Drive"),icon:y.a.createElement(q["b"],{type:"google-drive"}),onSelected:this.handleGdriveFileProvider,dataQa:"gdrive_picker_menu_item"}},{name:"onedrive",props:{label:Va.t("OneDrive"),icon:y.a.createElement(q["b"],{type:"onedrive"}),onSelected:this.handleOnedriveFileProvider,dataQa:"onedrive_picker_menu_item"}}];this.activeCloudServices=Object(E["filter"])(b,function(e){return v[e.name]?v[e.name]:null});var g=Object(E["map"])(this.activeCloudServices,function(e,t){return y.a.createElement(G["b"],{key:t,label:e.props.label,icon:e.props.icon,onSelected:e.props.onSelected,disabled:r,showOfflineIcon:r,"data-qa":e.props.dataQa})});return y.a.createElement(y.a.Fragment,null,y.a.createElement(G["c"],{label:d?p:h}),g)}},{key:"renderRecents",value:function e(){var t=this;var a=this.props,r=a.recentFiles,n=a.isLoading;return[n?y.a.createElement(_["Fragment"],{key:"recent-placeholders"},y.a.createElement(G["b"],{key:"0",disabled:true},y.a.createElement("span",{className:"c-missing_menu_item__button--loading"})),y.a.createElement(G["b"],{key:"1",disabled:true},y.a.createElement("span",{className:"c-missing_menu_item__button--loading"})),y.a.createElement(G["b"],{key:"2",disabled:true},y.a.createElement("span",{className:"c-missing_menu_item__button--loading"})),y.a.createElement(G["b"],{key:"3",disabled:true},y.a.createElement("span",{className:"c-missing_menu_item__button--loading"}))):Object(E["map"])(r.slice(0,4),function(e){return y.a.createElement(G["b"],{key:e.id,label:e.title,icon:y.a.createElement(q["b"],{type:e.filetype,file:"tiny"}),onSelected:function a(){return t.handleRecentFile(e)},"data-qa":"recent_file_menu_item"})})]}},{key:"renderRecentsSection",value:function e(){var t=this;var a=this.props,r=a.recentFiles,n=a.isLoading;return y.a.createElement(y.a.Fragment,null,this.renderRecents(),!n&&r.length?y.a.createElement(y.a.Fragment,null,y.a.createElement(G["b"],{className:"c-menu_item__browsefiles",key:"browse-files",onSelected:function e(a){t.handleYourRecentFilesPicker(a,true)}},y.a.createElement(L["a"],{key:"browse-files-link",href:"/",onClick:function e(t){t.preventDefault()}},Va.t("Browse files"))),y.a.createElement(G["d"],{key:"create-new-separator"})):null)}},{key:"render",value:function e(){var t=this;var a=this.props,r=a.disableFileUploadsPref,i=a.menuProps,s=a.recentFiles,o=a.featureRecentFilesOmnipicker,l=a.isLoading,c=a.isComposerPage,u=a.hideCreateMenu;var d="disable_all"!==r;var p=Va.t("Add file",{fallbackHash:"4881d0113be00c1d361cb809405df63a3d923445",fallbackHashNs:"multi_file_upload"});return y.a.createElement(G["f"],n()({},i,{"aria-label":p}),this.maybeRenderShortcutMovedNotice(),!c&&y.a.createElement(y.a.Fragment,null,u?null:this.renderCreateNew(),o&&(l||s.length)?y.a.createElement(G["c"],{label:Va.t("Your recent files")}):null,o&&this.renderRecentsSection()),this.renderMultipleCloudServices(),!c&&y.a.createElement(y.a.Fragment,null,o&&y.a.createElement(G["b"],{"data-qa":"open_omnipicker_for_workspace_from_menu_item",label:Va.t("Your workspace"),icon:y.a.createElement(q["b"],{type:"slack"}),onSelected:function e(a){t.handleYourRecentFilesPicker(a,false)}})),d&&y.a.createElement(G["b"],{"data-qa":"add_file_from_computer_menu_item",label:Va.t("Your computer"),icon:y.a.createElement(q["b"],{type:"laptop"}),onSelected:this.selectFileFromComputer}))}}]);return t}(_["Component"]);Xa.displayName="NewFileMenu";Xa.defaultProps=Ka;var Za=function e(t){return{createDocPost:function e(){return t(Q["a"].apply(void 0,arguments))},openSnippetDialog:function e(){return t(Y["a"].apply(void 0,arguments))},openCreateGDocDialog:function e(){return t(J["a"].apply(void 0,arguments))},openBoxFilePicker:function e(){return t(_e.apply(void 0,arguments))},openBoxFilePickerForDrafts:function e(){return t(ut.apply(void 0,arguments))},openDropboxFilePicker:function e(){return t(gt.apply(void 0,arguments))},openDropboxFilePickerForDrafts:function e(){return t(Ct.apply(void 0,arguments))},openGdriveFilePicker:function e(){return t(St["a"].apply(void 0,arguments))},openGdriveFilePickerForDrafts:function e(){return t(Bt.apply(void 0,arguments))},openOnedriveFilePicker:function e(){return t($t.apply(void 0,arguments))},openOneDriveFilePickerForDrafts:function e(){return t(va.apply(void 0,arguments))},getRecentFilesForUser:function e(){return t(B["listAndUpsertAllFiles"].apply(void 0,arguments))},openShareDialog:function e(){return t(U["a"].apply(void 0,arguments))},openOmniPickerDialog:function e(){return t(Ga.apply(void 0,arguments))},setUser:function e(){return t(B["setUser"].apply(void 0,arguments))},setFiletype:function e(){return t(B["setFiletype"].apply(void 0,arguments))},setfirstLoad:function e(){return t(B["setfirstLoad"].apply(void 0,arguments))},setisLoading:function e(){return t(B["setisLoading"].apply(void 0,arguments))},setShouldOpenAppActionPicker:function e(){return t(I["e"].apply(void 0,arguments))}}};function $a(e){var t=Object(w["a"])(e,"dropbox_legacy_picker");var a=Object(j["k"])(e,"dropbox_enabled");var r=Object(j["k"])(e,"box_enabled");var n=Object(w["a"])(e,"box_app_installed");var i=N["isDev"]?Object(P["getAppById"])(e,Ja):Object(P["getAppById"])(e,Ya);var s=Object(M["c"])(i);var o=a||t;var l=Object(w["a"])(e,"onedrive_enabled_team");var c=Object(w["a"])(e,"onedrive_app_installed");var u=l||c;return{disableFileUploadsPref:Object(w["a"])(e,"disable_file_uploads"),featurePlusMenuAddAppsLink:Object(S["isFeatureEnabled"])(e,"feature_plus_menu_add_apps_link"),featureRecentFilesOmnipicker:Object(S["isFeatureEnabled"])(e,"feature_recent_files_omnipicker"),hideCreateMenu:Object(Ha["e"])(e),clogger:Object(K["a"])({state:e}),logger:Object(z["a"])({state:e}),showBoxMenuItem:n||r&&s,showDropboxMenuItem:o,showGdriveMenuItem:Object(w["a"])(e,"gdrive_enabled_team"),isBoxAuthed:r,isThreadsPage:Object(A["a"])(e)===F["a"].allThreads,boxAppInstalled:n,showOneDriveMenuItem:u,currentUser:Object(S["getCurrentUserId"])(e),isOffline:!Object(T["c"])(e),recentFiles:Object(B["getMenuFiles"])(e),firstLoad:Object(B["getFirstLoad"])(e),isLoading:Object(B["getisLoading"])(e),currentTeam:Object(x["d"])(e),featureFilesInInput:Object(Pe["j"])(e)}}var er=t["a"]=Object(k["connect"])($a,Za)(Xa)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,,,,,,,,,,,function(e,t,a){}]),[[1181,0,2]]]);